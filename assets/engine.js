"use strict";!function(n,a){"object"==typeof module&&"object"==typeof module.exports?module.exports=n.document?a(n,!0):function(t){if(!t.document)throw new Error("jQuery requires a window with a document");return a(t)}:a(n)}("undefined"==typeof window?this:window,function(le,e){function t(a,e){var r=(e=e||W).createElement("script");r.text=a,e.head.appendChild(r).parentNode.removeChild(r)}function ue(a){var e=!!a&&"length"in a&&a.length,t=ie.type(a);return"function"!==t&&!ie.isWindow(a)&&("array"===t||0===e||"number"==typeof e&&0<e&&e-1 in a)}function ce(n,e){return n.nodeName&&n.nodeName.toLowerCase()===e.toLowerCase()}function n(a,i,o){return ie.isFunction(i)?ie.grep(a,function(t,e){return!!i.call(t,e,t)!==o}):i.nodeType?ie.grep(a,function(t){return t===i!==o}):"string"==typeof i?fe.test(i)?ie.filter(i,a,o):(i=ie.filter(i,a),ie.grep(a,function(t){return-1<Z.call(i,t)!==o&&1===t.nodeType})):ie.grep(a,function(t){return-1<Z.call(i,t)!==o})}function r(n,a){for(;(n=n[a])&&1!==n.nodeType;);return n}function _e(t){return t}function a(t){throw t}function l(a,e,t,n){var r;try{a&&ie.isFunction(r=a.promise)?r.call(a).done(e).fail(t):a&&ie.isFunction(r=a.then)?r.call(a,e,t):e.apply(void 0,[a].slice(n))}catch(n){t.apply(void 0,[n])}}function i(){W.removeEventListener("DOMContentLoaded",i),le.removeEventListener("load",i),ie.ready()}function o(){this.expando=ie.expando+o.uid++}function u(a,e,t){var i;if(void 0===t&&1===a.nodeType)if(i="data-"+e.replace(Me,"-$&").toLowerCase(),"string"==typeof(t=a.getAttribute(i))){try{t=function(t){return"true"===t||"false"!==t&&("null"===t?null:t===+t+""?+t:we.test(t)?JSON.parse(t):t)}(t)}catch(t){}Se.set(a,e,t)}else t=void 0;return t}function d(d,e,t,p){var r=1,h=20,f=p?function(){return p.cur()}:function(){return ie.css(d,e,"")},a=f(),l=t&&t[3]||(ie.cssNumber[e]?"":"px"),g=(ie.cssNumber[e]||"px"!==l&&+a)&&Ce.exec(ie.css(d,e)),m;if(g&&g[3]!==l){l=l||g[3],t=t||[],g=+a||1;do g/=r=r||".5",ie.style(d,e,g+l);while(r!==(r=f()/a)&&1!==r&&--h)}return t&&(g=+g||+a||0,m=t[1]?g+(t[1]+1)*t[2]:+t[2],p&&(p.unit=l,p.start=g,p.end=m)),m}function p(a){var e=a.ownerDocument,n=a.nodeName,r=De[n],o;return r||(o=e.body.appendChild(e.createElement(n)),r=ie.css(o,"display"),o.parentNode.removeChild(o),"none"===r&&(r="block"),De[n]=r,r)}function s(a,e){for(var t=[],i=0,d=a.length,s,l;i<d;i++)(l=a[i]).style&&(s=l.style.display,e?("none"===s&&(t[i]=Ee.get(l,"display")||null,t[i]||(l.style.display="")),""===l.style.display&&Ie(l)&&(t[i]=p(l))):"none"!==s&&(t[i]="none",Ee.set(l,"display",s)));for(i=0;i<d;i++)null!=t[i]&&(a[i].style.display=t[i]);return a}function f(a,e){var t;return t=void 0===a.getElementsByTagName?void 0===a.querySelectorAll?[]:a.querySelectorAll(e||"*"):a.getElementsByTagName(e||"*"),void 0===e||e&&ce(a,e)?ie.merge([a],t):t}function g(a,e){for(var t=0,i=a.length;t<i;t++)Ee.set(a[t],"globalEval",!e||Ee.get(e[t],"globalEval"))}function m(m,e,t,n,r){for(var i=e.createDocumentFragment(),h=[],d=0,y=m.length,_,b,x,v,T,E;d<y;d++)if((_=m[d])||0===_)if("object"===ie.type(_))ie.merge(h,_.nodeType?[_]:_);else if(Fe.test(_)){for(b=b||i.appendChild(e.createElement("div")),x=(Oe.exec(_)||["",""])[1].toLowerCase(),v=Ne[x]||Ne._default,b.innerHTML=v[1]+ie.htmlPrefilter(_)+v[2],E=v[0];E--;)b=b.lastChild;ie.merge(h,b.childNodes),(b=i.firstChild).textContent=""}else h.push(e.createTextNode(_));for(i.textContent="",d=0;_=h[d++];)if(n&&-1<ie.inArray(_,n))r&&r.push(_);else if(T=ie.contains(_.ownerDocument,_),b=f(i.appendChild(_),"script"),T&&g(b),t)for(E=0;_=b[E++];)ke.test(_.type||"")&&t.push(_);return i}function c(){return!0}function h(){return!1}function y(){try{return W.activeElement}catch(t){}}function _(d,e,t,l,u,p){var o,c;if("object"==typeof e){for(c in"string"!=typeof t&&(l=l||t,t=void 0),e)_(d,c,t,l,e[c],p);return d}if(null==l&&null==u?(u=t,l=t=void 0):null==u&&("string"==typeof t?(u=l,l=void 0):(u=l,l=t,t=void 0)),!1===u)u=h;else if(!u)return d;return 1===p&&(o=u,(u=function(t){return ie().off(t),o.apply(this,arguments)}).guid=o.guid||(o.guid=ie.guid++)),d.each(function(){ie.event.add(this,e,u,l,t)})}function b(n,e){return ce(n,"table")&&ce(11===e.nodeType?e.firstChild:e,"tr")?ie(">tbody",n)[0]||n:n}function x(t){return t.type=(null!==t.getAttribute("type"))+"/"+t.type,t}function v(n){var e=Ge.exec(n.type);return e?n.type=e[1]:n.removeAttribute("type"),n}function T(d,e){var t,p,c,h,f,g,m,y;if(1===e.nodeType){if(Ee.hasData(d)&&(h=Ee.access(d),f=Ee.set(e,h),y=h.events))for(c in delete f.handle,f.events={},y)for(t=0,p=y[c].length;t<p;t++)ie.event.add(e,c,y[c][t]);Se.hasData(d)&&(g=Se.access(d),m=ie.extend({},g),Se.set(e,m))}}function E(a,e){var t=e.nodeName.toLowerCase();"input"===t&&Le.test(a.type)?e.checked=a.checked:"input"!==t&&"textarea"!==t||(e.defaultValue=a.defaultValue)}function S(p,e,y,r){e=q.apply([],e);var n=0,i=p.length,d=e[0],_=ie.isFunction(d),g,b,T,E,w,C;if(_||1<i&&"string"==typeof d&&!re.checkClone&&Ye.test(d))return p.each(function(t){var n=p.eq(t);_&&(e[0]=d.call(this,t,n.html())),S(n,e,y,r)});if(i&&(g=m(e,p[0].ownerDocument,!1,p,r),b=g.firstChild,1===g.childNodes.length&&(g=b),b||r)){for(E=(T=ie.map(f(g,"script"),x)).length;n<i;n++)w=g,n!==i-1&&(w=ie.clone(w,!0,!0),E&&ie.merge(T,f(w,"script"))),y.call(p[n],w,n);if(E)for(C=T[T.length-1].ownerDocument,ie.map(T,v),n=0;n<E;n++)w=T[n],ke.test(w.type||"")&&!Ee.access(w,"globalEval")&&ie.contains(C,w)&&(w.src?ie._evalUrl&&ie._evalUrl(w.src):t(w.textContent.replace(je,""),C))}return p}function w(a,e,t){for(var n=e?ie.filter(e,a):a,i=0,s;null!=(s=n[i]);i++)t||1!==s.nodeType||ie.cleanData(f(s)),s.parentNode&&(t&&ie.contains(s.ownerDocument,s)&&g(f(s,"script")),s.parentNode.removeChild(s));return a}function M(d,e,t){var l=d.style,a,u,p,c;return(t=t||We(d))&&(""!==(c=t.getPropertyValue(e)||t[e])||ie.contains(d.ownerDocument,d)||(c=ie.style(d,e)),!re.pixelMarginRight()&&He.test(c)&&Xe.test(e)&&(a=l.width,u=l.minWidth,p=l.maxWidth,l.minWidth=l.maxWidth=l.width=c,c=t.width,l.width=a,l.minWidth=u,l.maxWidth=p)),void 0===c?c:c+""}function P(n,e){return{get:function(){return n()?void delete this.get:(this.get=e).apply(this,arguments)}}}function C(n){var e=ie.cssProps[n];return e||(e=ie.cssProps[n]=function(a){if(a in Ze)return a;for(var r=a[0].toUpperCase()+a.slice(1),t=Ke.length;t--;)if((a=Ke[t]+r)in Ze)return a}(n)||n),e}function A(a,e,t){var n=Ce.exec(e);return n?Math.max(0,n[2]-(t||0))+(n[3]||"px"):e}function I(a,e,t,n,r){var i=0,d;for(d=t===(n?"border":"content")?4:"width"===e?1:0;4>d;d+=2)"margin"===t&&(i+=ie.css(a,t+Ae[d],!0,r)),n?("content"===t&&(i-=ie.css(a,"padding"+Ae[d],!0,r)),"margin"!==t&&(i-=ie.css(a,"border"+Ae[d]+"Width",!0,r))):(i+=ie.css(a,"padding"+Ae[d],!0,r),"padding"!==t&&(i+=ie.css(a,"border"+Ae[d]+"Width",!0,r)));return i}function R(a,e,t){var n=We(a),i=M(a,e,n),d="border-box"===ie.css(a,"boxSizing",!1,n),s;return He.test(i)?i:(s=d&&(re.boxSizingReliable()||i===a.style[e]),"auto"===i&&(i=a["offset"+e[0].toUpperCase()+e.slice(1)]),(i=parseFloat(i)||0)+I(a,e,t||(d?"border":"content"),s,n)+"px")}function D(a,e,t,n,r){return new D.prototype.init(a,e,t,n,r)}function L(){Je&&(!1===W.hidden&&le.requestAnimationFrame?le.requestAnimationFrame(L):le.setTimeout(L,ie.fx.interval),ie.fx.tick())}function O(){return le.setTimeout(function(){Qe=void 0}),Qe=ie.now()}function k(a,e){var o=0,s={height:a},i;for(e=e?1:0;4>o;o+=2-e)s["margin"+(i=Ae[o])]=s["padding"+i]=a;return e&&(s.opacity=s.width=a),s}function N(a,e,t){for(var n=(F.tweeners[e]||[]).concat(F.tweeners["*"]),i=0,d=n.length,s;i<d;i++)if(s=n[i].call(t,e,a))return s}function F(d,e,t){var n=0,p=F.prefilters.length,h=ie.Deferred().always(function(){delete a.elem}),a=function(){if(c)return!1;for(var e=Qe||O(),t=Math.max(0,l.startTime+l.duration-e),n=1-(t/l.duration||0),a=0,r=l.tweens.length;a<r;a++)l.tweens[a].run(n);return h.notifyWith(d,[l,n,t]),1>n&&r?t:(r||h.notifyWith(d,[l,1,0]),h.resolveWith(d,[l]),!1)},l=h.promise({elem:d,props:ie.extend({},e),opts:ie.extend(!0,{specialEasing:{},easing:ie.easing._default},t),originalProperties:e,originalOptions:t,startTime:Qe||O(),duration:t.duration,tweens:[],createTween:function(e,t){var n=ie.Tween(d,l.opts,e,t,l.opts.specialEasing[e]||l.opts.easing);return l.tweens.push(n),n},stop:function(e){var t=0,a=e?l.tweens.length:0;if(c)return this;for(c=!0;t<a;t++)l.tweens[t].run(1);return e?(h.notifyWith(d,[l,1,0]),h.resolveWith(d,[l,e])):h.rejectWith(d,[l,e]),this}}),s=l.props,u,c;for(!function(a,e){var t,d,l,u,p;for(t in a)if(d=ie.camelCase(t),l=e[d],u=a[t],Array.isArray(u)&&(l=u[1],u=a[t]=u[0]),t!==d&&(a[d]=u,delete a[t]),(p=ie.cssHooks[d])&&("expand"in p))for(t in u=p.expand(u),delete a[d],u)(t in a)||(a[t]=u[t],e[t]=l);else e[d]=l}(s,l.opts.specialEasing);n<p;n++)if(u=F.prefilters[n].call(l,d,s,l.opts))return ie.isFunction(u.stop)&&(ie._queueHooks(l.elem,l.opts.queue).stop=ie.proxy(u.stop,u)),u;return ie.map(s,N,l),ie.isFunction(l.opts.start)&&l.opts.start.call(d,l),l.progress(l.opts.progress).done(l.opts.done,l.opts.complete).fail(l.opts.fail).always(l.opts.always),ie.fx.timer(ie.extend(a,{elem:d,anim:l,queue:l.opts.queue})),l}function B(t){return(t.match(be)||[]).join(" ")}function U(t){return t.getAttribute&&t.getAttribute("class")||""}function G(a,e,o,n){if(Array.isArray(e))ie.each(e,function(e,t){o||ot.test(a)?n(a,t):G(a+"["+("object"==typeof t&&null!=t?e:"")+"]",t,o,n)});else if(o||"object"!==ie.type(e))n(a,e);else for(var t in e)G(a+"["+t+"]",e[t],o,n)}function Y(t){return function(e,a){"string"!=typeof e&&(a=e,e="*");var s=0,d=e.toLowerCase().match(be)||[],o;if(ie.isFunction(a))for(;o=d[s++];)"+"===o[0]?(o=o.slice(1)||"*",(t[o]=t[o]||[]).unshift(a)):(t[o]=t[o]||[]).push(a)}}function j(d,l,t,n){function r(e){var s;return i[e]=!0,ie.each(d[e]||[],function(d,e){var a=e(l,t,n);return"string"!=typeof a||o||i[a]?o?!(s=a):void 0:(l.dataTypes.unshift(a),r(a),!1)}),s}var i={},o=d===ut;return r(l.dataTypes[0])||!i["*"]&&r("*")}function X(a,e){var t=ie.ajaxSettings.flatOptions||{},i,o;for(i in e)void 0!==e[i]&&((t[i]?a:o||(o={}))[i]=e[i]);return o&&ie.extend(!0,a,o),a}var H=[],W=le.document,z=Object.getPrototypeOf,V=H.slice,q=H.concat,K=H.push,Z=H.indexOf,Q={},J=Q.toString,ee=Q.hasOwnProperty,te=ee.toString,ne=te.call(Object),re={},ie=function(n,e){return new ie.fn.init(n,e)},ae=function(n,e){return e.toUpperCase()};ie.fn=ie.prototype={jquery:"3.2.1",constructor:ie,length:0,toArray:function(){return V.call(this)},get:function(t){return null==t?V.call(this):0>t?this[t+this.length]:this[t]},pushStack:function(n){var e=ie.merge(this.constructor(),n);return e.prevObject=this,e},each:function(t){return ie.each(this,t)},map:function(a){return this.pushStack(ie.map(this,function(e,t){return a.call(e,t,e)}))},slice:function(){return this.pushStack(V.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(a){var e=this.length,t=+a+(0>a?e:0);return this.pushStack(0<=t&&t<e?[this[t]]:[])},end:function(){return this.prevObject||this.constructor()},push:K,sort:H.sort,splice:H.splice},ie.extend=ie.fn.extend=function(){var d=arguments[0]||{},p=1,c=arguments.length,l=!1,h,f,g,m,y,_;for("boolean"==typeof d&&(l=d,d=arguments[p]||{},p++),"object"==typeof d||ie.isFunction(d)||(d={}),p===c&&(d=this,p--);p<c;p++)if(null!=(h=arguments[p]))for(f in h)g=d[f],d!==(m=h[f])&&(l&&m&&(ie.isPlainObject(m)||(y=Array.isArray(m)))?(y?(y=!1,_=g&&Array.isArray(g)?g:[]):_=g&&ie.isPlainObject(g)?g:{},d[f]=ie.extend(l,_,m)):void 0!==m&&(d[f]=m));return d},ie.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(t){throw new Error(t)},noop:function(){},isFunction:function(t){return"function"===ie.type(t)},isWindow:function(t){return null!=t&&t===t.window},isNumeric:function(n){var e=ie.type(n);return("number"===e||"string"===e)&&!isNaN(n-parseFloat(n))},isPlainObject:function(a){var e,r;return a&&"[object Object]"===J.call(a)&&(!(e=z(a))||"function"==typeof(r=ee.call(e,"constructor")&&e.constructor)&&te.call(r)===ne)},isEmptyObject:function(n){for(var e in n)return!1;return!0},type:function(t){return null==t?t+"":"object"==typeof t||"function"==typeof t?Q[J.call(t)]||"object":typeof t},globalEval:function(n){t(n)},camelCase:function(t){return t.replace(/^-ms-/,"ms-").replace(/-([a-z])/g,ae)},each:function(a,e){var t=0,r;if(ue(a))for(r=a.length;t<r&&!1!==e.call(a[t],t,a[t]);t++);else for(t in a)if(!1===e.call(a[t],t,a[t]))break;return a},trim:function(t){return null==t?"":(t+"").replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")},makeArray:function(a,e){var t=e||[];return null!=a&&(ue(Object(a))?ie.merge(t,"string"==typeof a?[a]:a):K.call(t,a)),t},inArray:function(a,e,t){return null==e?-1:Z.call(e,a,t)},merge:function(a,e){for(var t=+e.length,n=0,o=a.length;n<t;n++)a[o++]=e[n];return a.length=o,a},grep:function(a,e,t){for(var n=[],r=0,s=a.length;r<s;r++)!e(a[r],r)!=!t&&n.push(a[r]);return n},map:function(r,e,t){var n=0,d=[],a,l;if(ue(r))for(a=r.length;n<a;n++)null!=(l=e(r[n],n,t))&&d.push(l);else for(n in r)null!=(l=e(r[n],n,t))&&d.push(l);return q.apply([],d)},guid:1,proxy:function(a,o){var s,d,l;if("string"==typeof o&&(s=a[o],o=a,a=s),ie.isFunction(a))return d=V.call(arguments,2),l=function(){return a.apply(o||this,d.concat(V.call(arguments)))},l.guid=a.guid=a.guid||ie.guid++,l},now:Date.now,support:re}),"function"==typeof Symbol&&(ie.fn[Symbol.iterator]=H[Symbol.iterator]),ie.each(["Boolean","Number","String","Function","Array","Date","RegExp","Object","Error","Symbol"],function(n,e){Q["[object "+e+"]"]=e.toLowerCase()});var oe=function(Q){function ee(p,e,g,y){var r=e&&e.ownerDocument,_=e?e.nodeType:9,f,b,x,v,T,E,S;if(g=g||[],"string"!=typeof p||!p||1!==_&&9!==_&&11!==_)return g;if(!y&&((e?e.ownerDocument||e:h)!==Pe&&Me(e),e=e||Pe,Ie)){if(11!==_&&(T=de.exec(p)))if(!(f=T[1])){if(T[2])return H.apply(g,e.getElementsByTagName(p)),g;if((f=T[3])&&ye.getElementsByClassName&&e.getElementsByClassName)return H.apply(g,e.getElementsByClassName(f)),g}else if(9===_){if(!(x=e.getElementById(f)))return g;if(x.id===f)return g.push(x),g}else if(r&&(x=r.getElementById(f))&&Oe(e,x)&&x.id===f)return g.push(x),g;if(ye.qsa&&!m[p+" "]&&(!Re||!Re.test(p))){if(1!==_)r=e,S=p;else if("object"!==e.nodeName.toLowerCase()){for((v=e.getAttribute("id"))?v=v.replace(ce,he):e.setAttribute("id",v=se),b=(E=ve(p)).length;b--;)E[b]="#"+v+" "+s(E[b]);S=E.join(","),r=le.test(p)&&re(e.parentNode)||e}if(S)try{return H.apply(g,r.querySelectorAll(S)),g}catch(t){}finally{v===se&&e.removeAttribute("id")}}}return Ee(p.replace(Z,"$1"),e,g,y)}function e(){function a(t,n){return e.push(t+" ")>_e.cacheLength&&delete a[e.shift()],a[t+" "]=n}var e=[];return a}function te(t){return t[se]=!0,t}function ne(n){var e=Pe.createElement("fieldset");try{return!!n(e)}catch(t){return!1}finally{e.parentNode&&e.parentNode.removeChild(e),e=null}}function t(a,e){for(var t=a.split("|"),n=t.length;n--;)_e.attrHandle[t[n]]=e}function ae(a,e){var t=e&&a,i=t&&1===a.nodeType&&1===e.nodeType&&a.sourceIndex-e.sourceIndex;if(i)return i;if(t)for(;t=t.nextSibling;)if(t===e)return-1;return a?1:-1}function n(n){return function(e){return"input"===e.nodeName.toLowerCase()&&e.type===n}}function a(a){return function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&e.type===a}}function r(n){return function(e){return"form"in e?e.parentNode&&!1===e.disabled?"label"in e?"label"in e.parentNode?e.parentNode.disabled===n:e.disabled===n:e.isDisabled===n||e.isDisabled!==!n&&ge(e)===n:e.disabled===n:"label"in e&&e.disabled===n}}function i(a){return te(function(e){return e=+e,te(function(t,n){for(var r=a([],t.length,e),o=r.length,d;o--;)t[d=r[o]]&&(t[d]=!(n[d]=t[d]))})})}function re(t){return t&&void 0!==t.getElementsByTagName&&t}function o(){}function s(a){for(var e=0,i=a.length,n="";e<i;e++)n+=a[e].value;return n}function d(p,e,t){var f=e.dir,r=e.next,i=r||f,o=t&&"parentNode"===i,s=c++;return e.first?function(e,a,n){for(;e=e[f];)if(1===e.nodeType||o)return p(e,a,n);return!1}:function(e,a,n){var l=[F,s],d,g,m;if(n){for(;e=e[f];)if((1===e.nodeType||o)&&p(e,a,n))return!0;}else for(;e=e[f];)if(1===e.nodeType||o)if(m=e[se]||(e[se]={}),g=m[e.uniqueID]||(m[e.uniqueID]={}),r&&r===e.nodeName.toLowerCase())e=e[f]||e;else{if((d=g[i])&&d[0]===F&&d[1]===s)return l[2]=d[2];if(g[i]=l,l[2]=p(e,a,n))return!0}return!1}}function p(a){return 1<a.length?function(e,t,n){for(var r=a.length;r--;)if(!a[r](e,t,n))return!1;return!0}:a[0]}function ie(d,e,t,n,r){for(var i=[],s=0,u=d.length,l;s<u;s++)(l=d[s])&&(t&&!t(l,n,r)||(i.push(l),null!=e&&e.push(s)));return i}function l(t,e,n,i,m,r){return i&&!i[se]&&(i=l(i)),m&&!m[se]&&(m=l(m,r)),te(function(o,r,a,s){var l=[],u=[],p=r.length,f=o||function(t,e,n){for(var a=0,r=e.length;a<r;a++)ee(t,e[a],n);return n}(e||"*",a.nodeType?[a]:a,[]),g=t&&(o||!e)?ie(f,l,t,a,s):f,y=n?m||(o?t:p||i)?[]:r:g,_,x,v;if(n&&n(g,y,a,s),i)for(_=ie(y,u),i(_,[],a,s),x=_.length;x--;)(v=_[x])&&(y[u[x]]=!(g[u[x]]=v));if(!o)y=ie(y===r?y.splice(p,y.length):y),m?m(null,r,y,s):H.apply(r,y);else if(m||t){if(m){for(_=[],x=y.length;x--;)(v=y[x])&&_.push(g[x]=v);m(null,y=[],_,s)}for(x=y.length;x--;)(v=y[x])&&-1<(_=m?q(o,v):l[x])&&(o[_]=!(r[_]=v))}})}function u(h){for(var f=h.length,g=_e.relative[h[0].type],i=g||_e.relative[" "],o=g?1:0,m=d(function(t){return t===b},i,!0),y=d(function(t){return-1<q(b,t)},i,!0),_=[function(t,e,n){var a=!g&&(n||e!==Se)||((b=e).nodeType?m(t,e,n):y(t,e,n));return b=null,a}],b,x,v;o<f;o++)if(x=_e.relative[h[o].type])_=[d(p(_),x)];else{if((x=_e.filter[h[o].type].apply(null,h[o].matches))[se]){for(v=++o;v<f&&!_e.relative[h[v].type];v++);return l(1<o&&p(_),1<o&&s(h.slice(0,o-1).concat({value:" "===h[o-2].type?"*":""})).replace(Z,"$1"),x,o<v&&u(h.slice(o,v)),v<f&&u(h=h.slice(v)),v<f&&s(h))}_.push(x)}return p(_)}var se="sizzle"+1*new Date,h=Q.document,F=0,c=0,f=e(),g=e(),m=e(),y=function(n,e){return n===e&&(Ce=!0),0},v={}.hasOwnProperty,B=[],Y=B.pop,X=B.push,H=B.push,V=B.slice,q=function(a,e){for(var t=0,i=a.length;t<i;t++)if(a[t]===e)return t;return-1},Z=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,J={ID:/^#((?:\\.|[\w-]|[^\0-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^\0-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^\0-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\0-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\0-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^\0-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\0-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\0-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},oe=/^[^{]+\{\s*\[native \w/,de=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,le=/[+~]/,ue=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,pe=function(a,e,t){var n="0x"+e-65536;return n!=n||t?e:0>n?String.fromCharCode(n+65536):String.fromCharCode(55296|n>>10,56320|1023&n)},ce=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,he=function(n,e){return e?"\0"===n?"\uFFFD":n.slice(0,-1)+"\\"+n.charCodeAt(n.length-1).toString(16)+" ":"\\"+n},fe=function(){Me()},ge=d(function(t){return!0===t.disabled&&("form"in t||"label"in t)},{dir:"parentNode",next:"legend"}),me,ye,_e,be,xe,ve,Te,Ee,Se,we,Ce,Me,Pe,Ae,Ie,Re,De,Le,Oe;try{H.apply(B=V.call(h.childNodes),h.childNodes),B[h.childNodes.length].nodeType}catch(t){H={apply:B.length?function(n,e){X.apply(n,V.call(e))}:function(a,e){for(var t=a.length,i=0;a[t++]=e[i++];);a.length=t-1}}}for(me in ye=ee.support={},xe=ee.isXML=function(n){var e=n&&(n.ownerDocument||n).documentElement;return!!e&&"HTML"!==e.nodeName},Me=ee.setDocument=function(a){var e=a?a.ownerDocument||a:h,r,i;return e!==Pe&&9===e.nodeType&&e.documentElement?(Pe=e,Ae=Pe.documentElement,Ie=!xe(Pe),h!==Pe&&(i=Pe.defaultView)&&i.top!==i&&(i.addEventListener?i.addEventListener("unload",fe,!1):i.attachEvent&&i.attachEvent("onunload",fe)),ye.attributes=ne(function(t){return t.className="i",!t.getAttribute("className")}),ye.getElementsByTagName=ne(function(t){return t.appendChild(Pe.createComment("")),!t.getElementsByTagName("*").length}),ye.getElementsByClassName=oe.test(Pe.getElementsByClassName),ye.getById=ne(function(t){return Ae.appendChild(t).id=se,!Pe.getElementsByName||!Pe.getElementsByName(se).length}),ye.getById?(_e.filter.ID=function(n){var a=n.replace(ue,pe);return function(t){return t.getAttribute("id")===a}},_e.find.ID=function(a,e){if(void 0!==e.getElementById&&Ie){var t=e.getElementById(a);return t?[t]:[]}}):(_e.filter.ID=function(n){var a=n.replace(ue,pe);return function(t){var e=void 0!==t.getAttributeNode&&t.getAttributeNode("id");return e&&e.value===a}},_e.find.ID=function(a,e){if(void 0!==e.getElementById&&Ie){var t=e.getElementById(a),s,d,l;if(t){if((s=t.getAttributeNode("id"))&&s.value===a)return[t];for(l=e.getElementsByName(a),d=0;t=l[d++];)if((s=t.getAttributeNode("id"))&&s.value===a)return[t]}return[]}}),_e.find.TAG=ye.getElementsByTagName?function(n,e){return void 0===e.getElementsByTagName?ye.qsa?e.querySelectorAll(n):void 0:e.getElementsByTagName(n)}:function(a,e){var t=[],r=0,s=e.getElementsByTagName(a),o;if("*"===a){for(;o=s[r++];)1===o.nodeType&&t.push(o);return t}return s},_e.find.CLASS=ye.getElementsByClassName&&function(n,e){if(void 0!==e.getElementsByClassName&&Ie)return e.getElementsByClassName(n)},De=[],Re=[],(ye.qsa=oe.test(Pe.querySelectorAll))&&(ne(function(t){Ae.appendChild(t).innerHTML="<a id='"+se+"'></a><select id='"+se+"-\r\\' msallowcapture=''><option selected=''></option></select>",t.querySelectorAll("[msallowcapture^='']").length&&Re.push("[*^$]=[\\x20\\t\\r\\n\\f]*(?:''|\"\")"),t.querySelectorAll("[selected]").length||Re.push("\\[[\\x20\\t\\r\\n\\f]*(?:value|checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)"),t.querySelectorAll("[id~="+se+"-]").length||Re.push("~="),t.querySelectorAll(":checked").length||Re.push(":checked"),t.querySelectorAll("a#"+se+"+*").length||Re.push(".#.+[+~]")}),ne(function(n){n.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var e=Pe.createElement("input");e.setAttribute("type","hidden"),n.appendChild(e).setAttribute("name","D"),n.querySelectorAll("[name=d]").length&&Re.push("name[\\x20\\t\\r\\n\\f]*[*^$|!~]?="),2!==n.querySelectorAll(":enabled").length&&Re.push(":enabled",":disabled"),Ae.appendChild(n).disabled=!0,2!==n.querySelectorAll(":disabled").length&&Re.push(":enabled",":disabled"),n.querySelectorAll("*,:x"),Re.push(",.*:")})),(ye.matchesSelector=oe.test(Le=Ae.matches||Ae.webkitMatchesSelector||Ae.mozMatchesSelector||Ae.oMatchesSelector||Ae.msMatchesSelector))&&ne(function(t){ye.disconnectedMatch=Le.call(t,"*"),Le.call(t,"[s!='']:x"),De.push("!=",":((?:\\\\.|[\\w-]|[^\0-\\xa0])+)(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|\\[[\\x20\\t\\r\\n\\f]*((?:\\\\.|[\\w-]|[^\0-\\xa0])+)(?:[\\x20\\t\\r\\n\\f]*([*^$|!~]?=)[\\x20\\t\\r\\n\\f]*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|((?:\\\\.|[\\w-]|[^\0-\\xa0])+))|)[\\x20\\t\\r\\n\\f]*\\])*)|.*)\\)|)")}),Re=Re.length&&new RegExp(Re.join("|")),De=De.length&&new RegExp(De.join("|")),r=oe.test(Ae.compareDocumentPosition),Oe=r||oe.test(Ae.contains)?function(a,e){var t=9===a.nodeType?a.documentElement:a,n=e&&e.parentNode;return a===n||n&&1===n.nodeType&&(t.contains?t.contains(n):a.compareDocumentPosition&&16&a.compareDocumentPosition(n))}:function(n,e){if(e)for(;e=e.parentNode;)if(e===n)return!0;return!1},y=r?function(a,e){if(a===e)return Ce=!0,0;var t=!a.compareDocumentPosition-!e.compareDocumentPosition;return t||(1&(t=(a.ownerDocument||a)===(e.ownerDocument||e)?a.compareDocumentPosition(e):1)||!ye.sortDetached&&e.compareDocumentPosition(a)===t?a===Pe||a.ownerDocument===h&&Oe(h,a)?-1:e===Pe||e.ownerDocument===h&&Oe(h,e)?1:we?q(we,a)-q(we,e):0:4&t?-1:1)}:function(s,e){if(s===e)return Ce=!0,0;var t=0,d=s.parentNode,i=e.parentNode,o=[s],a=[e],l;if(!d||!i)return s===Pe?-1:e===Pe?1:d?-1:i?1:we?q(we,s)-q(we,e):0;if(d===i)return ae(s,e);for(l=s;l=l.parentNode;)o.unshift(l);for(l=e;l=l.parentNode;)a.unshift(l);for(;o[t]===a[t];)t++;return t?ae(o[t],a[t]):o[t]===h?-1:a[t]===h?1:0},Pe):Pe},ee.matches=function(t,e){return ee(t,null,null,e)},ee.matchesSelector=function(t,e){if((t.ownerDocument||t)!==Pe&&Me(t),e=e.replace(/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,"='$1']"),ye.matchesSelector&&Ie&&!m[e+" "]&&(!De||!De.test(e))&&(!Re||!Re.test(e)))try{var a=Le.call(t,e);if(a||ye.disconnectedMatch||t.document&&11!==t.document.nodeType)return a}catch(t){}return 0<ee(e,Pe,null,[t]).length},ee.contains=function(n,e){return(n.ownerDocument||n)!==Pe&&Me(n),Oe(n,e)},ee.attr=function(a,e){(a.ownerDocument||a)!==Pe&&Me(a);var t=_e.attrHandle[e.toLowerCase()],n=t&&v.call(_e.attrHandle,e.toLowerCase())?t(a,e,!Ie):void 0;return void 0===n?ye.attributes||!Ie?a.getAttribute(e):(n=a.getAttributeNode(e))&&n.specified?n.value:null:n},ee.escape=function(t){return(t+"").replace(ce,he)},ee.error=function(t){throw new Error("Syntax error, unrecognized expression: "+t)},ee.uniqueSort=function(a){var e=[],n=0,o=0,s;if(Ce=!ye.detectDuplicates,we=!ye.sortStable&&a.slice(0),a.sort(y),Ce){for(;s=a[o++];)s===a[o]&&(n=e.push(o));for(;n--;)a.splice(e[n],1)}return we=null,a},be=ee.getText=function(a){var o="",s=0,d=a.nodeType,i;if(!d)for(;i=a[s++];)o+=be(i);else if(1===d||9===d||11===d){if("string"==typeof a.textContent)return a.textContent;for(a=a.firstChild;a;a=a.nextSibling)o+=be(a)}else if(3===d||4===d)return a.nodeValue;return o},(_e=ee.selectors={cacheLength:50,createPseudo:te,match:J,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(t){return t[1]=t[1].replace(ue,pe),t[3]=(t[3]||t[4]||t[5]||"").replace(ue,pe),"~="===t[2]&&(t[3]=" "+t[3]+" "),t.slice(0,4)},CHILD:function(t){return t[1]=t[1].toLowerCase(),"nth"===t[1].slice(0,3)?(t[3]||ee.error(t[0]),t[4]=+(t[4]?t[5]+(t[6]||1):2*("even"===t[3]||"odd"===t[3])),t[5]=+(t[7]+t[8]||"odd"===t[3])):t[3]&&ee.error(t[0]),t},PSEUDO:function(a){var e=!a[6]&&a[2],n;return J.CHILD.test(a[0])?null:(a[3]?a[2]=a[4]||a[5]||"":e&&/:((?:\\.|[\w-]|[^\0-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^\0-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^\0-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/.test(e)&&(n=ve(e,!0))&&(n=e.indexOf(")",e.length-n)-e.length)&&(a[0]=a[0].slice(0,n),a[2]=e.slice(0,n)),a.slice(0,3))}},filter:{TAG:function(n){var a=n.replace(ue,pe).toLowerCase();return"*"===n?function(){return!0}:function(t){return t.nodeName&&t.nodeName.toLowerCase()===a}},CLASS:function(n){var a=f[n+" "];return a||(a=new RegExp("(^|[\\x20\\t\\r\\n\\f])"+n+"([\\x20\\t\\r\\n\\f]|$)"))&&f(n,function(t){return a.test("string"==typeof t.className&&t.className||void 0!==t.getAttribute&&t.getAttribute("class")||"")})},ATTR:function(t,e,n){return function(a){var r=ee.attr(a,t);return null==r?"!="===e:!e||(r+="","="===e?r===n:"!="===e?r!==n:"^="===e?n&&0===r.indexOf(n):"*="===e?n&&-1<r.indexOf(n):"$="===e?n&&r.slice(-n.length)===n:"~="===e?-1<(" "+r.replace(/[\x20\t\r\n\f]+/g," ")+" ").indexOf(n):"|="==e&&(r===n||r.slice(0,n.length+1)===n+"-"))}},CHILD:function(l,e,t,n,r){var i="nth"!==l.slice(0,3),o="last"!==l.slice(-4),s="of-type"===e;return 1===n&&0===r?function(t){return!!t.parentNode}:function(e,t,a){var _=i===o?"previousSibling":"nextSibling",x=e.parentNode,m=s&&e.nodeName.toLowerCase(),v=!a&&!s,y=!1,T,E,S,w,C,M;if(x){if(i){for(;_;){for(w=e;w=w[_];)if(s?w.nodeName.toLowerCase()===m:1===w.nodeType)return!1;M=_="only"===l&&!M&&"nextSibling"}return!0}if(M=[o?x.firstChild:x.lastChild],o&&v){for(y=(C=(T=(E=(S=(w=x)[se]||(w[se]={}))[w.uniqueID]||(S[w.uniqueID]={}))[l]||[])[0]===F&&T[1])&&T[2],w=C&&x.childNodes[C];w=++C&&w&&w[_]||(y=C=0)||M.pop();)if(1===w.nodeType&&++y&&w===e){E[l]=[F,C,y];break}}else if(v&&(y=C=(T=(E=(S=(w=e)[se]||(w[se]={}))[w.uniqueID]||(S[w.uniqueID]={}))[l]||[])[0]===F&&T[1]),!1===y)for(;(w=++C&&w&&w[_]||(y=C=0)||M.pop())&&((s?w.nodeName.toLowerCase()!==m:1!==w.nodeType)||!++y||(v&&((E=(S=w[se]||(w[se]={}))[w.uniqueID]||(S[w.uniqueID]={}))[l]=[F,y]),w!==e)););return(y-=r)===n||0==y%n&&0<=y/n}}},PSEUDO:function(t,a){var n=_e.pseudos[t]||_e.setFilters[t.toLowerCase()]||ee.error("unsupported pseudo: "+t),r;return n[se]?n(a):1<n.length?(r=[t,t,"",a],_e.setFilters.hasOwnProperty(t.toLowerCase())?te(function(o,e){for(var t=n(o,a),i=t.length,d;i--;)o[d=q(o,t[i])]=!(e[d]=t[i])}):function(t){return n(t,0,r)}):n}},pseudos:{not:te(function(a){var s=[],t=[],n=Te(a.replace(Z,"$1"));return n[se]?te(function(i,e,t,d){for(var r=n(i,null,d,[]),s=i.length,l;s--;)(l=r[s])&&(i[s]=!(e[s]=l))}):function(a,e,r){return s[0]=a,n(s,null,r,t),s[0]=null,!t.pop()}}),has:te(function(t){return function(e){return 0<ee(t,e).length}}),contains:te(function(n){return n=n.replace(ue,pe),function(e){return-1<(e.textContent||e.innerText||be(e)).indexOf(n)}}),lang:te(function(a){return /^(?:\\.|[\w-]|[^\0-\xa0])+$/.test(a||"")||ee.error("unsupported lang: "+a),a=a.replace(ue,pe).toLowerCase(),function(e){var r;do if(r=Ie?e.lang:e.getAttribute("xml:lang")||e.getAttribute("lang"))return(r=r.toLowerCase())===a||0===r.indexOf(a+"-");while((e=e.parentNode)&&1===e.nodeType);return!1}}),target:function(e){var t=Q.location&&Q.location.hash;return t&&t.slice(1)===e.id},root:function(t){return t===Ae},focus:function(t){return t===Pe.activeElement&&(!Pe.hasFocus||Pe.hasFocus())&&!!(t.type||t.href||~t.tabIndex)},enabled:r(!1),disabled:r(!0),checked:function(n){var e=n.nodeName.toLowerCase();return"input"===e&&!!n.checked||"option"===e&&!!n.selected},selected:function(t){return t.parentNode&&t.parentNode.selectedIndex,!0===t.selected},empty:function(t){for(t=t.firstChild;t;t=t.nextSibling)if(6>t.nodeType)return!1;return!0},parent:function(t){return!_e.pseudos.empty(t)},header:function(t){return /^h\d$/i.test(t.nodeName)},input:function(t){return /^(?:input|select|textarea|button)$/i.test(t.nodeName)},button:function(n){var e=n.nodeName.toLowerCase();return"input"===e&&"button"===n.type||"button"===e},text:function(n){var e;return"input"===n.nodeName.toLowerCase()&&"text"===n.type&&(null==(e=n.getAttribute("type"))||"text"===e.toLowerCase())},first:i(function(){return[0]}),last:i(function(n,e){return[e-1]}),eq:i(function(a,e,t){return[0>t?t+e:t]}),even:i(function(a,e){for(var t=0;t<e;t+=2)a.push(t);return a}),odd:i(function(a,e){for(var t=1;t<e;t+=2)a.push(t);return a}),lt:i(function(a,e,t){for(var n=0>t?t+e:t;0<=--n;)a.push(n);return a}),gt:i(function(a,e,t){for(var n=0>t?t+e:t;++n<e;)a.push(n);return a})}}).pseudos.nth=_e.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})_e.pseudos[me]=n(me);for(me in{submit:!0,reset:!0})_e.pseudos[me]=a(me);return o.prototype=_e.filters=_e.pseudos,_e.setFilters=new o,ve=ee.tokenize=function(t,e){var n=g[t+" "],d,p,c,h,f,m,y;if(n)return e?0:n.slice(0);for(f=t,m=[],y=_e.preFilter;f;){for(h in d&&!(p=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/.exec(f))||(p&&(f=f.slice(p[0].length)||f),m.push(c=[])),d=!1,(p=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/.exec(f))&&(d=p.shift(),c.push({value:d,type:p[0].replace(Z," ")}),f=f.slice(d.length)),_e.filter)(p=J[h].exec(f))&&(!y[h]||(p=y[h](p)))&&(d=p.shift(),c.push({value:d,type:h,matches:p}),f=f.slice(d.length));if(!d)break}return e?f.length:f?ee.error(t):g(t,m).slice(0)},Te=ee.compile=function(t,e){var r=[],o=[],s=m[t+" "],d;if(!s){for(e||(e=ve(t)),d=e.length;d--;)(s=u(e[d]))[se]?r.push(s):o.push(s);(s=m(t,function(t,e){var n=0<e.length,i=0<t.length,a=function(o,r,s,m,l){var u=0,x="0",T=o&&[],g=[],E=Se,y=o||i&&_e.find.TAG("*",l),b=F+=null==E?1:Math.random()||.1,_=y.length,S,w,C;for(l&&(Se=r===Pe||r||l);x!==_&&null!=(S=y[x]);x++){if(i&&S){for(w=0,r||S.ownerDocument===Pe||(Me(S),s=!Ie);C=t[w++];)if(C(S,r||Pe,s)){m.push(S);break}l&&(F=b)}n&&((S=!C&&S)&&u--,o&&T.push(S))}if(u+=x,n&&x!==u){for(w=0;C=e[w++];)C(T,g,r,s);if(o){if(0<u)for(;x--;)T[x]||g[x]||(g[x]=Y.call(m));g=ie(g)}H.apply(m,g),l&&!o&&0<g.length&&1<u+e.length&&ee.uniqueSort(m)}return l&&(F=b,Se=E),T};return n?te(a):a}(o,r))).selector=t}return s},Ee=ee.select=function(d,p,h,f){var g="function"==typeof d&&d,u=!f&&ve(d=g.selector||d),c,m,y,_,b;if(h=h||[],1===u.length){if(2<(m=u[0]=u[0].slice(0)).length&&"ID"===(y=m[0]).type&&9===p.nodeType&&Ie&&_e.relative[m[1].type]){if(!(p=(_e.find.ID(y.matches[0].replace(ue,pe),p)||[])[0]))return h;g&&(p=p.parentNode),d=d.slice(m.shift().value.length)}for(c=J.needsContext.test(d)?0:m.length;c--&&(y=m[c],!_e.relative[_=y.type]);)if((b=_e.find[_])&&(f=b(y.matches[0].replace(ue,pe),le.test(m[0].type)&&re(p.parentNode)||p))){if(m.splice(c,1),!(d=f.length&&s(m)))return H.apply(h,f),h;break}}return(g||Te(d,u))(f,p,!Ie,h,!p||le.test(d)&&re(p.parentNode)||p),h},ye.sortStable=se.split("").sort(y).join("")===se,ye.detectDuplicates=!!Ce,Me(),ye.sortDetached=ne(function(t){return 1&t.compareDocumentPosition(Pe.createElement("fieldset"))}),ne(function(t){return t.innerHTML="<a href='#'></a>","#"===t.firstChild.getAttribute("href")})||t("type|href|height|width",function(a,e,t){if(!t)return a.getAttribute(e,"type"===e.toLowerCase()?1:2)}),ye.attributes&&ne(function(t){return t.innerHTML="<input/>",t.firstChild.setAttribute("value",""),""===t.firstChild.getAttribute("value")})||t("value",function(a,e,t){if(!t&&"input"===a.nodeName.toLowerCase())return a.defaultValue}),ne(function(t){return null==t.getAttribute("disabled")})||t("checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",function(a,e,t){var n;if(!t)return!0===a[e]?e.toLowerCase():(n=a.getAttributeNode(e))&&n.specified?n.value:null}),ee}(le);ie.find=oe,ie.expr=oe.selectors,ie.expr[":"]=ie.expr.pseudos,ie.uniqueSort=ie.unique=oe.uniqueSort,ie.text=oe.getText,ie.isXMLDoc=oe.isXML,ie.contains=oe.contains,ie.escapeSelector=oe.escape;var se=function(a,i,t){for(var n=[];(a=a[i])&&9!==a.nodeType;)if(1===a.nodeType){if(void 0!==t&&ie(a).is(t))break;n.push(a)}return n},de=function(a,r){for(var t=[];a;a=a.nextSibling)1===a.nodeType&&a!==r&&t.push(a);return t},pe=ie.expr.match.needsContext,he=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,fe=/^.[^:#\[\.,]*$/;ie.filter=function(a,i,t){var n=i[0];return t&&(a=":not("+a+")"),1===i.length&&1===n.nodeType?ie.find.matchesSelector(n,a)?[n]:[]:ie.find.matches(a,ie.grep(i,function(t){return 1===t.nodeType}))},ie.fn.extend({find:function(a){var e=this.length,r=this,i,o;if("string"!=typeof a)return this.pushStack(ie(a).filter(function(){for(i=0;i<e;i++)if(ie.contains(r[i],this))return!0}));for(o=this.pushStack([]),i=0;i<e;i++)ie.find(a,r[i],o);return 1<e?ie.uniqueSort(o):o},filter:function(t){return this.pushStack(n(this,t||[],!1))},not:function(t){return this.pushStack(n(this,t||[],!0))},is:function(t){return!!n(this,"string"==typeof t&&pe.test(t)?ie(t):t||[],!1).length}});var ge;(ie.fn.init=function(a,e,o){var s,d;if(!a)return this;if(o=o||ge,"string"==typeof a){if(!(s="<"===a[0]&&">"===a[a.length-1]&&3<=a.length?[null,a,null]:/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/.exec(a))||!s[1]&&e)return!e||e.jquery?(e||o).find(a):this.constructor(e).find(a);if(s[1]){if(e=e instanceof ie?e[0]:e,ie.merge(this,ie.parseHTML(s[1],e&&e.nodeType?e.ownerDocument||e:W,!0)),he.test(s[1])&&ie.isPlainObject(e))for(s in e)ie.isFunction(this[s])?this[s](e[s]):this.attr(s,e[s]);return this}return(d=W.getElementById(s[2]))&&(this[0]=d,this.length=1),this}return a.nodeType?(this[0]=a,this.length=1,this):ie.isFunction(a)?void 0===o.ready?a(ie):o.ready(a):ie.makeArray(a,this)}).prototype=ie.fn,ge=ie(W);var me={children:!0,contents:!0,next:!0,prev:!0};ie.fn.extend({has:function(a){var r=ie(a,this),t=r.length;return this.filter(function(){for(var n=0;n<t;n++)if(ie.contains(this,r[n]))return!0})},closest:function(a,e){var t=0,d=this.length,i=[],o="string"!=typeof a&&ie(a),s;if(!pe.test(a))for(;t<d;t++)for(s=this[t];s&&s!==e;s=s.parentNode)if(11>s.nodeType&&(o?-1<o.index(s):1===s.nodeType&&ie.find.matchesSelector(s,a))){i.push(s);break}return this.pushStack(1<i.length?ie.uniqueSort(i):i)},index:function(t){return t?"string"==typeof t?Z.call(ie(t),this[0]):Z.call(this,t.jquery?t[0]:t):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(n,e){return this.pushStack(ie.uniqueSort(ie.merge(this.get(),ie(n,e))))},addBack:function(t){return this.add(null==t?this.prevObject:this.prevObject.filter(t))}}),ie.each({parent:function(n){var e=n.parentNode;return e&&11!==e.nodeType?e:null},parents:function(t){return se(t,"parentNode")},parentsUntil:function(a,e,t){return se(a,"parentNode",t)},next:function(t){return r(t,"nextSibling")},prev:function(t){return r(t,"previousSibling")},nextAll:function(t){return se(t,"nextSibling")},prevAll:function(t){return se(t,"previousSibling")},nextUntil:function(a,e,t){return se(a,"nextSibling",t)},prevUntil:function(a,e,t){return se(a,"previousSibling",t)},siblings:function(t){return de((t.parentNode||{}).firstChild,t)},children:function(t){return de(t.firstChild)},contents:function(t){return ce(t,"iframe")?t.contentDocument:(ce(t,"template")&&(t=t.content||t),ie.merge([],t.childNodes))}},function(a,e){ie.fn[a]=function(t,n){var o=ie.map(this,e,t);return"Until"!==a.slice(-5)&&(n=t),n&&"string"==typeof n&&(o=ie.filter(n,o)),1<this.length&&(me[a]||ie.uniqueSort(o),/^(?:parents|prev(?:Until|All))/.test(a)&&o.reverse()),this.pushStack(o)}});var be=/[^\x20\t\r\n\f]+/g;ie.Callbacks=function(d){d="string"==typeof d?function(n){var a={};return ie.each(n.match(be)||[],function(t,e){a[e]=!0}),a}(d):ie.extend({},d);var p=[],c=[],h=-1,f=function(){for(y=y||d.once,m=u=!0;c.length;h=-1)for(g=c.shift();++h<p.length;)!1===p[h].apply(g[0],g[1])&&d.stopOnFalse&&(h=p.length,g=!1);d.memory||(g=!1),u=!1,y&&(p=g?[]:"")},l={add:function(){return p&&(g&&!u&&(h=p.length-1,c.push(g)),function e(t){ie.each(t,function(t,n){ie.isFunction(n)?d.unique&&l.has(n)||p.push(n):n&&n.length&&"string"!==ie.type(n)&&e(n)})}(arguments),g&&!u&&f()),this},remove:function(){return ie.each(arguments,function(a,e){for(var t;-1<(t=ie.inArray(e,p,t));)p.splice(t,1),t<=h&&h--}),this},has:function(t){return t?-1<ie.inArray(t,p):0<p.length},empty:function(){return p&&(p=[]),this},disable:function(){return y=c=[],p=g="",this},disabled:function(){return!p},lock:function(){return y=c=[],g||u||(p=g=""),this},locked:function(){return!!y},fireWith:function(t,e){return y||(e=[t,(e=e||[]).slice?e.slice():e],c.push(e),u||f()),this},fire:function(){return l.fireWith(this,arguments),this},fired:function(){return!!m}},u,g,m,y;return l},ie.extend({Deferred:function(e){var d=[["notify","progress",ie.Callbacks("memory"),ie.Callbacks("memory"),2],["resolve","done",ie.Callbacks("once memory"),ie.Callbacks("once memory"),0,"resolved"],["reject","fail",ie.Callbacks("once memory"),ie.Callbacks("once memory"),1,"rejected"]],t="pending",n={state:function(){return t},always:function(){return l.done(arguments).fail(arguments),this},catch:function(t){return n.then(null,t)},pipe:function(){var a=arguments;return ie.Deferred(function(n){ie.each(d,function(e,t){var r=ie.isFunction(a[t[4]])&&a[t[4]];l[t[1]](function(){var a=r&&r.apply(this,arguments);a&&ie.isFunction(a.promise)?a.promise().progress(n.notify).done(n.resolve).fail(n.reject):n[t[0]+"With"](this,r?[a]:arguments)})}),a=null}).promise()},then:function(n,t,r){function l(s,t,n,r){return function(){var i=this,p=arguments,e=function(){var d,u;if(!(s<o)){if((d=n.apply(i,p))===t.promise())throw new TypeError("Thenable self-resolution");u=d&&("object"==typeof d||"function"==typeof d)&&d.then,ie.isFunction(u)?r?u.call(d,l(o,t,_e,r),l(o,t,a,r)):(o++,u.call(d,l(o,t,_e,r),l(o,t,a,r),l(o,t,_e,t.notifyWith))):(n!==_e&&(i=void 0,p=[d]),(r||t.resolveWith)(i,p))}},h=r?e:function(){try{e()}catch(r){ie.Deferred.exceptionHook&&ie.Deferred.exceptionHook(r,h.stackTrace),s+1>=o&&(n!==a&&(i=void 0,p=[r]),t.rejectWith(i,p))}};s?h():(ie.Deferred.getStackHook&&(h.stackTrace=ie.Deferred.getStackHook()),le.setTimeout(h))}}var o=0;return ie.Deferred(function(i){d[0][3].add(l(0,i,ie.isFunction(r)?r:_e,i.notifyWith)),d[1][3].add(l(0,i,ie.isFunction(n)?n:_e)),d[2][3].add(l(0,i,ie.isFunction(t)?t:a))}).promise()},promise:function(t){return null==t?n:ie.extend(t,n)}},l={};return ie.each(d,function(r,e){var i=e[2],o=e[5];n[e[1]]=i.add,o&&i.add(function(){t=o},d[3-r][2].disable,d[0][2].lock),i.add(e[3].fire),l[e[0]]=function(){return l[e[0]+"With"](this===l?void 0:this,arguments),this},l[e[0]+"With"]=i.fireWith}),n.promise(l),e&&e.call(l,l),l},when:function(a){var d=arguments.length,e=d,u=Array(e),r=V.call(arguments),i=ie.Deferred(),o=function(t){return function(e){u[t]=this,r[t]=1<arguments.length?V.call(arguments):e,--d||i.resolveWith(u,r)}};if(1>=d&&(l(a,i.done(o(e)).resolve,i.reject,!d),"pending"===i.state()||ie.isFunction(r[e]&&r[e].then)))return i.then();for(;e--;)l(r[e],o(e),i.reject);return i.promise()}});ie.Deferred.exceptionHook=function(e,t){le.console&&le.console.warn&&e&&/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/.test(e.name)&&le.console.warn("jQuery.Deferred exception: "+e.message,e.stack,t)},ie.readyException=function(e){le.setTimeout(function(){throw e})};var xe=ie.Deferred();ie.fn.ready=function(t){return xe.then(t).catch(function(t){ie.readyException(t)}),this},ie.extend({isReady:!1,readyWait:1,ready:function(t){(!0===t?--ie.readyWait:ie.isReady)||(ie.isReady=!0,!0!==t&&0<--ie.readyWait||xe.resolveWith(W,[ie]))}}),ie.ready.then=xe.then,"complete"!==W.readyState&&("loading"===W.readyState||W.documentElement.doScroll)?(W.addEventListener("DOMContentLoaded",i),le.addEventListener("load",i)):le.setTimeout(ie.ready);var ve=function(d,e,p,n,r,c,o){var h=0,f=d.length,l=null==p;if("object"===ie.type(p))for(h in r=!0,p)ve(d,e,h,p[h],!0,c,o);else if(void 0!==n&&(r=!0,ie.isFunction(n)||(o=!0),l&&(o?(e.call(d,n),e=null):(l=e,e=function(a,e,t){return l.call(ie(a),t)})),e))for(;h<f;h++)e(d[h],p,o?n:n.call(d[h],h,e(d[h],p)));return r?d:l?e.call(d):f?e(d[0],p):c},Te=function(t){return 1===t.nodeType||9===t.nodeType||!+t.nodeType};o.uid=1,o.prototype={cache:function(n){var e=n[this.expando];return e||(e={},Te(n)&&(n.nodeType?n[this.expando]=e:Object.defineProperty(n,this.expando,{value:e,configurable:!0}))),e},set:function(a,e,t){var n=this.cache(a),i;if("string"==typeof e)n[ie.camelCase(e)]=t;else for(i in e)n[ie.camelCase(i)]=e[i];return n},get:function(n,e){return void 0===e?this.cache(n):n[this.expando]&&n[this.expando][ie.camelCase(e)]},access:function(a,e,t){return void 0===e||e&&"string"==typeof e&&void 0===t?this.get(a,e):(this.set(a,e,t),void 0===t?e:t)},remove:function(a,e){var i=a[this.expando],r;if(void 0!==i){if(void 0!==e)for(r=(e=Array.isArray(e)?e.map(ie.camelCase):((e=ie.camelCase(e))in i)?[e]:e.match(be)||[]).length;r--;)delete i[e[r]];(void 0===e||ie.isEmptyObject(i))&&(a.nodeType?a[this.expando]=void 0:delete a[this.expando])}},hasData:function(n){var e=n[this.expando];return void 0!==e&&!ie.isEmptyObject(e)}};var Ee=new o,Se=new o,we=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Me=/[A-Z]/g;ie.extend({hasData:function(t){return Se.hasData(t)||Ee.hasData(t)},data:function(a,e,t){return Se.access(a,e,t)},removeData:function(n,e){Se.remove(n,e)},_data:function(a,e,t){return Ee.access(a,e,t)},_removeData:function(n,e){Ee.remove(n,e)}}),ie.fn.extend({data:function(a,e){var d=this[0],t=d&&d.attributes,o,s,l;if(void 0===a){if(this.length&&(l=Se.get(d),1===d.nodeType&&!Ee.get(d,"hasDataAttrs"))){for(o=t.length;o--;)t[o]&&0===(s=t[o].name).indexOf("data-")&&(s=ie.camelCase(s.slice(5)),u(d,s,l[s]));Ee.set(d,"hasDataAttrs",!0)}return l}return"object"==typeof a?this.each(function(){Se.set(this,a)}):ve(this,function(e){var t;if(d&&void 0===e){if(void 0!==(t=Se.get(d,a)))return t;if(void 0!==(t=u(d,a)))return t}else this.each(function(){Se.set(this,a,e)})},null,e,1<arguments.length,null,!0)},removeData:function(t){return this.each(function(){Se.remove(this,t)})}}),ie.extend({queue:function(a,e,i){var n;if(a)return e=(e||"fx")+"queue",n=Ee.get(a,e),i&&(!n||Array.isArray(i)?n=Ee.access(a,e,ie.makeArray(i)):n.push(i)),n||[]},dequeue:function(a,e){e=e||"fx";var d=ie.queue(a,e),n=d.length,l=d.shift(),u=ie._queueHooks(a,e),o=function(){ie.dequeue(a,e)};"inprogress"===l&&(l=d.shift(),n--),l&&("fx"===e&&d.unshift("inprogress"),delete u.stop,l.call(a,o,u)),!n&&u&&u.empty.fire()},_queueHooks:function(a,e){var t=e+"queueHooks";return Ee.get(a,t)||Ee.access(a,t,{empty:ie.Callbacks("once memory").add(function(){Ee.remove(a,[e+"queue",t])})})}}),ie.fn.extend({queue:function(a,r){var i=2;return"string"!=typeof a&&(r=a,a="fx",i--),arguments.length<i?ie.queue(this[0],a):void 0===r?this:this.each(function(){var e=ie.queue(this,a,r);ie._queueHooks(this,a),"fx"===a&&"inprogress"!==e[0]&&ie.dequeue(this,a)})},dequeue:function(t){return this.each(function(){ie.dequeue(this,t)})},clearQueue:function(t){return this.queue(t||"fx",[])},promise:function(d,l){var u=1,p=ie.Deferred(),i=this,o=this.length,c=function(){--u||p.resolveWith(i,[i])},a;for("string"!=typeof d&&(l=d,d=void 0),d=d||"fx";o--;)(a=Ee.get(i[o],d+"queueHooks"))&&a.empty&&(u++,a.empty.add(c));return c(),p.promise(l)}});var Pe=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,Ce=new RegExp("^(?:([+-])=|)("+Pe+")([a-z%]*)$","i"),Ae=["Top","Right","Bottom","Left"],Ie=function(n,a){return"none"===(n=a||n).style.display||""===n.style.display&&ie.contains(n.ownerDocument,n)&&"none"===ie.css(n,"display")},Re=function(a,e,t,n){var r={},s,d;for(d in e)r[d]=a.style[d],a.style[d]=e[d];for(d in s=t.apply(a,n||[]),e)a.style[d]=r[d];return s},De={};ie.fn.extend({show:function(){return s(this,!0)},hide:function(){return s(this)},toggle:function(t){return"boolean"==typeof t?t?this.show():this.hide():this.each(function(){Ie(this)?ie(this).show():ie(this).hide()})}});var Le=/^(?:checkbox|radio)$/i,Oe=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,ke=/^$|\/(?:java|ecma)script/i,Ne={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ne.optgroup=Ne.option,Ne.tbody=Ne.tfoot=Ne.colgroup=Ne.caption=Ne.thead,Ne.th=Ne.td;var Fe=/<|&#?\w+;/;!function(){var n=W.createDocumentFragment().appendChild(W.createElement("div")),e=W.createElement("input");e.setAttribute("type","radio"),e.setAttribute("checked","checked"),e.setAttribute("name","t"),n.appendChild(e),re.checkClone=n.cloneNode(!0).cloneNode(!0).lastChild.checked,n.innerHTML="<textarea>x</textarea>",re.noCloneChecked=!!n.cloneNode(!0).lastChild.defaultValue}();var Be=W.documentElement,Ue=/^([^.]*)(?:\.(.+)|)/;ie.event={global:{},add:function(y,e,_,b,r){var x=Ee.get(y),m,v,T,E,S,w,C,M,P,A,I;if(x)for(_.handler&&(_=(m=_).handler,r=m.selector),r&&ie.find.matchesSelector(Be,r),_.guid||(_.guid=ie.guid++),(E=x.events)||(E=x.events={}),(v=x.handle)||(v=x.handle=function(e){return void 0!==ie&&ie.event.triggered!==e.type?ie.event.dispatch.apply(y,arguments):void 0}),S=(e=(e||"").match(be)||[""]).length;S--;)P=I=(T=Ue.exec(e[S])||[])[1],A=(T[2]||"").split(".").sort(),P&&(C=ie.event.special[P]||{},P=(r?C.delegateType:C.bindType)||P,C=ie.event.special[P]||{},w=ie.extend({type:P,origType:I,data:b,handler:_,guid:_.guid,selector:r,needsContext:r&&ie.expr.match.needsContext.test(r),namespace:A.join(".")},m),(M=E[P])||((M=E[P]=[]).delegateCount=0,C.setup&&!1!==C.setup.call(y,b,A,v)||y.addEventListener&&y.addEventListener(P,v)),C.add&&(C.add.call(y,w),w.handler.guid||(w.handler.guid=_.guid)),r?M.splice(M.delegateCount++,0,w):M.push(w),ie.event.global[P]=!0)},remove:function(y,e,_,n,r){var i=Ee.hasData(y)&&Ee.get(y),m,b,x,v,T,E,S,w,C,M,P;if(i&&(v=i.events)){for(T=(e=(e||"").match(be)||[""]).length;T--;)if(x=Ue.exec(e[T])||[],C=P=x[1],M=(x[2]||"").split(".").sort(),C){for(S=ie.event.special[C]||{},w=v[C=(n?S.delegateType:S.bindType)||C]||[],x=x[2]&&new RegExp("(^|\\.)"+M.join("\\.(?:.*\\.|)")+"(\\.|$)"),b=m=w.length;m--;)E=w[m],!r&&P!==E.origType||_&&_.guid!==E.guid||x&&!x.test(E.namespace)||n&&n!==E.selector&&("**"!==n||!E.selector)||(w.splice(m,1),E.selector&&w.delegateCount--,S.remove&&S.remove.call(y,E));b&&!w.length&&(S.teardown&&!1!==S.teardown.call(y,M,i.handle)||ie.removeEvent(y,C,i.handle),delete v[C])}else for(C in v)ie.event.remove(y,C+e[T],_,n,!0);ie.isEmptyObject(v)&&Ee.remove(y,"handle events")}},dispatch:function(d){var e=ie.event.fix(d),a=Array(arguments.length),l=(Ee.get(this,"events")||{})[e.type]||[],u=ie.event.special[e.type]||{},p,c,h,f,g,m;for(a[0]=e,p=1;p<arguments.length;p++)a[p]=arguments[p];if(e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(m=ie.event.handlers.call(this,e,l),p=0;(f=m[p++])&&!e.isPropagationStopped();)for(e.currentTarget=f.elem,c=0;(g=f.handlers[c++])&&!e.isImmediatePropagationStopped();)e.rnamespace&&!e.rnamespace.test(g.namespace)||(e.handleObj=g,e.data=g.data,void 0!==(h=((ie.event.special[g.origType]||{}).handle||g.handler).apply(f.elem,a))&&!1===(e.result=h)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(d,e){var t=[],a=e.delegateCount,l=d.target,p,c,h,f,g;if(a&&l.nodeType&&!("click"===d.type&&1<=d.button))for(;l!==this;l=l.parentNode||this)if(1===l.nodeType&&("click"!==d.type||!0!==l.disabled)){for(f=[],g={},p=0;p<a;p++)void 0===g[h=(c=e[p]).selector+" "]&&(g[h]=c.needsContext?-1<ie(h,this).index(l):ie.find(h,this,null,[l]).length),g[h]&&f.push(c);f.length&&t.push({elem:l,handlers:f})}return l=this,a<e.length&&t.push({elem:l,handlers:e.slice(a)}),t},addProp:function(n,e){Object.defineProperty(ie.Event.prototype,n,{enumerable:!0,configurable:!0,get:ie.isFunction(e)?function(){if(this.originalEvent)return e(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[n]},set:function(e){Object.defineProperty(this,n,{enumerable:!0,configurable:!0,writable:!0,value:e})}})},fix:function(t){return t[ie.expando]?t:new ie.Event(t)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==y()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===y()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&ce(this,"input"))return this.click(),!1},_default:function(t){return ce(t.target,"a")}},beforeunload:{postDispatch:function(t){void 0!==t.result&&t.originalEvent&&(t.originalEvent.returnValue=t.result)}}}},ie.removeEvent=function(a,e,t){a.removeEventListener&&a.removeEventListener(e,t)},ie.Event=function(n,e){return this instanceof ie.Event?void(n&&n.type?(this.originalEvent=n,this.type=n.type,this.isDefaultPrevented=n.defaultPrevented||void 0===n.defaultPrevented&&!1===n.returnValue?c:h,this.target=n.target&&3===n.target.nodeType?n.target.parentNode:n.target,this.currentTarget=n.currentTarget,this.relatedTarget=n.relatedTarget):this.type=n,e&&ie.extend(this,e),this.timeStamp=n&&n.timeStamp||ie.now(),this[ie.expando]=!0):new ie.Event(n,e)},ie.Event.prototype={constructor:ie.Event,isDefaultPrevented:h,isPropagationStopped:h,isImmediatePropagationStopped:h,isSimulated:!1,preventDefault:function(){var t=this.originalEvent;this.isDefaultPrevented=c,t&&!this.isSimulated&&t.preventDefault()},stopPropagation:function(){var t=this.originalEvent;this.isPropagationStopped=c,t&&!this.isSimulated&&t.stopPropagation()},stopImmediatePropagation:function(){var t=this.originalEvent;this.isImmediatePropagationStopped=c,t&&!this.isSimulated&&t.stopImmediatePropagation(),this.stopPropagation()}},ie.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(n){var e=n.button;return null==n.which&&/^key/.test(n.type)?null==n.charCode?n.keyCode:n.charCode:!n.which&&void 0!==e&&/^(?:mouse|pointer|contextmenu|drag|drop)|click/.test(n.type)?1&e?1:2&e?3:4&e?2:0:n.which}},ie.event.addProp),ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(n,a){ie.event.special[n]={delegateType:a,bindType:a,handle:function(t){var e=t.relatedTarget,r=t.handleObj,i;return e&&(e===this||ie.contains(this,e))||(t.type=r.origType,i=r.handler.apply(this,arguments),t.type=a),i}}}),ie.fn.extend({on:function(a,e,t,n){return _(this,a,e,t,n)},one:function(a,e,t,n){return _(this,a,e,t,n,1)},off:function(a,e,o){var s,d;if(a&&a.preventDefault&&a.handleObj)return s=a.handleObj,ie(a.delegateTarget).off(s.namespace?s.origType+"."+s.namespace:s.origType,s.selector,s.handler),this;if("object"==typeof a){for(d in a)this.off(d,e,a[d]);return this}return!1!==e&&"function"!=typeof e||(o=e,e=void 0),!1===o&&(o=h),this.each(function(){ie.event.remove(this,a,o,e)})}});var Ye=/checked\s*(?:[^=]|=\s*.checked.)/i,Ge=/^true\/(.*)/,je=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;ie.extend({htmlPrefilter:function(t){return t.replace(/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,"<$1></$2>")},clone:function(d,e,t){var n=d.cloneNode(!0),a=ie.contains(d.ownerDocument,d),l,u,p,c;if(!(re.noCloneChecked||1!==d.nodeType&&11!==d.nodeType||ie.isXMLDoc(d)))for(c=f(n),l=0,u=(p=f(d)).length;l<u;l++)E(p[l],c[l]);if(e)if(t)for(p=p||f(d),c=c||f(n),l=0,u=p.length;l<u;l++)T(p[l],c[l]);else T(d,n);return 0<(c=f(n,"script")).length&&g(c,!a&&f(d,"script")),n},cleanData:function(a){for(var e=ie.event.special,i=0,s,d,l;void 0!==(d=a[i]);i++)if(Te(d)){if(s=d[Ee.expando]){if(s.events)for(l in s.events)e[l]?ie.event.remove(d,l):ie.removeEvent(d,l,s.handle);d[Ee.expando]=void 0}d[Se.expando]&&(d[Se.expando]=void 0)}}}),ie.fn.extend({detach:function(t){return w(this,t,!0)},remove:function(t){return w(this,t)},text:function(t){return ve(this,function(t){return void 0===t?ie.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=t)})},null,t,arguments.length)},append:function(){return S(this,arguments,function(t){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&b(this,t).appendChild(t)})},prepend:function(){return S(this,arguments,function(n){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var e=b(this,n);e.insertBefore(n,e.firstChild)}})},before:function(){return S(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this)})},after:function(){return S(this,arguments,function(t){this.parentNode&&this.parentNode.insertBefore(t,this.nextSibling)})},empty:function(){for(var n=0,a;null!=(a=this[n]);n++)1===a.nodeType&&(ie.cleanData(f(a,!1)),a.textContent="");return this},clone:function(n,a){return n=null!=n&&n,a=null==a?n:a,this.map(function(){return ie.clone(this,n,a)})},html:function(t){return ve(this,function(a){var i=this[0]||{},o=0,s=this.length;if(void 0===a&&1===i.nodeType)return i.innerHTML;if("string"==typeof a&&!/<script|<style|<link/i.test(a)&&!Ne[(Oe.exec(a)||["",""])[1].toLowerCase()]){a=ie.htmlPrefilter(a);try{for(;o<s;o++)1===(i=this[o]||{}).nodeType&&(ie.cleanData(f(i,!1)),i.innerHTML=a);i=0}catch(t){}}i&&this.empty().append(a)},null,t,arguments.length)},replaceWith:function(){var a=[];return S(this,arguments,function(e){var t=this.parentNode;0>ie.inArray(this,a)&&(ie.cleanData(f(this)),t&&t.replaceChild(e,this))},a)}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(n,a){ie.fn[n]=function(t){for(var e=[],r=ie(t),i=r.length-1,o=0,d;o<=i;o++)d=o==i?this:this.clone(!0),ie(r[o])[a](d),K.apply(e,d.get());return this.pushStack(e)}});var Xe=/^margin/,He=new RegExp("^("+Pe+")(?!px)[a-z%]+$","i"),We=function(e){var t=e.ownerDocument.defaultView;return t&&t.opener||(t=le),t.getComputedStyle(e)};!function(){function e(){if(s){s.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",s.innerHTML="",Be.appendChild(d);var e=le.getComputedStyle(s);l="1%"!==e.top,c="2px"===e.marginLeft,u="4px"===e.width,s.style.marginRight="50%",p="4px"===e.marginRight,Be.removeChild(d),s=null}}var d=W.createElement("div"),s=W.createElement("div"),l,u,p,c;s.style&&(s.style.backgroundClip="content-box",s.cloneNode(!0).style.backgroundClip="",re.clearCloneStyle="content-box"===s.style.backgroundClip,d.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",d.appendChild(s),ie.extend(re,{pixelPosition:function(){return e(),l},boxSizingReliable:function(){return e(),u},pixelMarginRight:function(){return e(),p},reliableMarginLeft:function(){return e(),c}}))}();var ze=/^--/,Ve={position:"absolute",visibility:"hidden",display:"block"},qe={letterSpacing:"0",fontWeight:"400"},Ke=["Webkit","Moz","ms"],Ze=W.createElement("div").style;ie.extend({cssHooks:{opacity:{get:function(a,e){if(e){var t=M(a,"opacity");return""===t?"1":t}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(p,e,c,h){if(p&&3!==p.nodeType&&8!==p.nodeType&&p.style){var r=ie.camelCase(e),a=ze.test(e),l=p.style,u,f,g;if(a||(e=C(r)),g=ie.cssHooks[e]||ie.cssHooks[r],void 0===c)return g&&"get"in g&&void 0!==(u=g.get(p,!1,h))?u:l[e];"string"==(f=typeof c)&&(u=Ce.exec(c))&&u[1]&&(c=d(p,e,u),f="number"),null!=c&&c==c&&("number"===f&&(c+=u&&u[3]||(ie.cssNumber[r]?"":"px")),re.clearCloneStyle||""!==c||0!==e.indexOf("background")||(l[e]="inherit"),g&&"set"in g&&void 0===(c=g.set(p,c,h))||(a?l.setProperty(e,c):l[e]=c))}},css:function(d,e,l,n){var r=ie.camelCase(e),a,u,p;return ze.test(e)||(e=C(r)),(p=ie.cssHooks[e]||ie.cssHooks[r])&&"get"in p&&(a=p.get(d,!0,l)),void 0===a&&(a=M(d,e,n)),"normal"===a&&e in qe&&(a=qe[e]),""===l||l?(u=parseFloat(a),!0===l||isFinite(u)?u||0:a):a}}),ie.each(["height","width"],function(n,a){ie.cssHooks[a]={get:function(t,e,n){if(e)return!/^(none|table(?!-c[ea]).+)/.test(ie.css(t,"display"))||t.getClientRects().length&&t.getBoundingClientRect().width?R(t,a,n):Re(t,Ve,function(){return R(t,a,n)})},set:function(t,e,d){var r=d&&We(t),o=d&&I(t,a,d,"border-box"===ie.css(t,"boxSizing",!1,r),r),s;return o&&(s=Ce.exec(e))&&"px"!==(s[3]||"px")&&(t.style[a]=e,e=ie.css(t,a)),A(0,e,o)}}}),ie.cssHooks.marginLeft=P(re.reliableMarginLeft,function(n,e){if(e)return(parseFloat(M(n,"marginLeft"))||n.getBoundingClientRect().left-Re(n,{marginLeft:0},function(){return n.getBoundingClientRect().left}))+"px"}),ie.each({margin:"",padding:"",border:"Width"},function(a,e){ie.cssHooks[a+e]={expand:function(t){for(var n=0,s={},i="string"==typeof t?t.split(" "):[t];4>n;n++)s[a+Ae[n]+e]=i[n]||i[n-2]||i[0];return s}},Xe.test(a)||(ie.cssHooks[a+e].set=A)}),ie.fn.extend({css:function(n,e){return ve(this,function(a,e,t){var n={},o=0,d,l;if(Array.isArray(e)){for(d=We(a),l=e.length;o<l;o++)n[e[o]]=ie.css(a,e[o],!1,d);return n}return void 0===t?ie.css(a,e):ie.style(a,e,t)},n,e,1<arguments.length)}}),ie.Tween=D,(D.prototype={constructor:D,init:function(a,e,t,n,r,i){this.elem=a,this.prop=t,this.easing=r||ie.easing._default,this.options=e,this.start=this.now=this.cur(),this.end=n,this.unit=i||(ie.cssNumber[t]?"":"px")},cur:function(){var t=D.propHooks[this.prop];return t&&t.get?t.get(this):D.propHooks._default.get(this)},run:function(a){var e=D.propHooks[this.prop],n;return this.pos=this.options.duration?n=ie.easing[this.easing](a,this.options.duration*a,0,1,this.options.duration):n=a,this.now=(this.end-this.start)*n+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),e&&e.set?e.set(this):D.propHooks._default.set(this),this}}).init.prototype=D.prototype,(D.propHooks={_default:{get:function(n){var e;return 1!==n.elem.nodeType||null!=n.elem[n.prop]&&null==n.elem.style[n.prop]?n.elem[n.prop]:(e=ie.css(n.elem,n.prop,""))&&"auto"!==e?e:0},set:function(t){ie.fx.step[t.prop]?ie.fx.step[t.prop](t):1===t.elem.nodeType&&(null!=t.elem.style[ie.cssProps[t.prop]]||ie.cssHooks[t.prop])?ie.style(t.elem,t.prop,t.now+t.unit):t.elem[t.prop]=t.now}}}).scrollTop=D.propHooks.scrollLeft={set:function(t){t.elem.nodeType&&t.elem.parentNode&&(t.elem[t.prop]=t.now)}},ie.easing={linear:function(t){return t},swing:function(t){return .5-Math.cos(t*Math.PI)/2},_default:"swing"},ie.fx=D.prototype.init,ie.fx.step={};var Qe,Je;ie.Animation=ie.extend(F,{tweeners:{"*":[function(a,e){var t=this.createTween(a,e);return d(t.elem,a,Ce.exec(e),t),t}]},tweener:function(a,o){ie.isFunction(a)?(o=a,a=["*"]):a=a.match(be);for(var s=0,d=a.length,i;s<d;s++)i=a[s],F.tweeners[i]=F.tweeners[i]||[],F.tweeners[i].unshift(o)},prefilters:[function(g,e,t){var n="width"in e||"height"in e,h=this,d={},p=g.style,f=g.nodeType&&Ie(g),y=Ee.get(g,"fxshow"),_,b,x,T,E,S,w,C;for(_ in t.queue||(null==(T=ie._queueHooks(g,"fx")).unqueued&&(T.unqueued=0,E=T.empty.fire,T.empty.fire=function(){T.unqueued||E()}),T.unqueued++,h.always(function(){h.always(function(){T.unqueued--,ie.queue(g,"fx").length||T.empty.fire()})})),e)if(b=e[_],/^(?:toggle|show|hide)$/.test(b)){if(delete e[_],x=x||"toggle"===b,b===(f?"hide":"show")){if("show"!==b||!y||void 0===y[_])continue;f=!0}d[_]=y&&y[_]||ie.style(g,_)}if((S=!ie.isEmptyObject(e))||!ie.isEmptyObject(d))for(_ in n&&1===g.nodeType&&(t.overflow=[p.overflow,p.overflowX,p.overflowY],null==(w=y&&y.display)&&(w=Ee.get(g,"display")),"none"===(C=ie.css(g,"display"))&&(w?C=w:(s([g],!0),w=g.style.display||w,C=ie.css(g,"display"),s([g]))),("inline"===C||"inline-block"===C&&null!=w)&&"none"===ie.css(g,"float")&&(S||(h.done(function(){p.display=w}),null==w&&(C=p.display,w="none"===C?"":C)),p.display="inline-block")),t.overflow&&(p.overflow="hidden",h.always(function(){p.overflow=t.overflow[0],p.overflowX=t.overflow[1],p.overflowY=t.overflow[2]})),S=!1,d)S||(y?"hidden"in y&&(f=y.hidden):y=Ee.access(g,"fxshow",{display:w}),x&&(y.hidden=!f),f&&s([g],!0),h.done(function(){for(_ in f||s([g]),Ee.remove(g,"fxshow"),d)ie.style(g,_,d[_])})),S=N(f?y[_]:0,_,h),_ in y||(y[_]=S.start,f&&(S.end=S.start,S.start=0))}],prefilter:function(n,e){e?F.prefilters.unshift(n):F.prefilters.push(n)}}),ie.speed=function(a,e,t){var n=a&&"object"==typeof a?ie.extend({},a):{complete:t||!t&&e||ie.isFunction(a)&&a,duration:a,easing:t&&e||e&&!ie.isFunction(e)&&e};return ie.fx.off?n.duration=0:"number"!=typeof n.duration&&(n.duration in ie.fx.speeds?n.duration=ie.fx.speeds[n.duration]:n.duration=ie.fx.speeds._default),null!=n.queue&&!0!==n.queue||(n.queue="fx"),n.old=n.complete,n.complete=function(){ie.isFunction(n.old)&&n.old.call(this),n.queue&&ie.dequeue(this,n.queue)},n},ie.fn.extend({fadeTo:function(a,e,t,n){return this.filter(Ie).css("opacity",0).show().end().animate({opacity:e},a,t,n)},animate:function(a,e,t,n){var r=ie.isEmptyObject(a),i=ie.speed(e,t,n),o=function(){var e=F(this,ie.extend({},a),i);(r||Ee.get(this,"finish"))&&e.stop(!0)};return o.finish=o,r||!1===i.queue?this.each(o):this.queue(i.queue,o)},stop:function(a,i,d){var l=function(n){var e=n.stop;delete n.stop,e(d)};return"string"!=typeof a&&(d=i,i=a,a=void 0),i&&!1!==a&&this.queue(a||"fx",[]),this.each(function(){var e=!0,n=null!=a&&a+"queueHooks",r=ie.timers,o=Ee.get(this);if(n)o[n]&&o[n].stop&&l(o[n]);else for(n in o)o[n]&&o[n].stop&&/queueHooks$/.test(n)&&l(o[n]);for(n=r.length;n--;)r[n].elem!==this||null!=a&&r[n].queue!==a||(r[n].anim.stop(d),e=!1,r.splice(n,1));!e&&d||ie.dequeue(this,a)})},finish:function(a){return!1!==a&&(a=a||"fx"),this.each(function(){var e=Ee.get(this),n=e[a+"queue"],r=e[a+"queueHooks"],i=ie.timers,o=n?n.length:0,s;for(e.finish=!0,ie.queue(this,a,[]),r&&r.stop&&r.stop.call(this,!0),s=i.length;s--;)i[s].elem===this&&i[s].queue===a&&(i[s].anim.stop(!0),i.splice(s,1));for(s=0;s<o;s++)n[s]&&n[s].finish&&n[s].finish.call(this);delete e.finish})}}),ie.each(["toggle","show","hide"],function(a,o){var t=ie.fn[o];ie.fn[o]=function(n,e,a){return null==n||"boolean"==typeof n?t.apply(this,arguments):this.animate(k(o,!0),n,e,a)}}),ie.each({slideDown:k("show"),slideUp:k("hide"),slideToggle:k("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(n,a){ie.fn[n]=function(t,e,n){return this.animate(a,t,e,n)}}),ie.timers=[],ie.fx.tick=function(){var a=0,r=ie.timers,n;for(Qe=ie.now();a<r.length;a++)(n=r[a])()||r[a]!==n||r.splice(a--,1);r.length||ie.fx.stop(),Qe=void 0},ie.fx.timer=function(t){ie.timers.push(t),ie.fx.start()},ie.fx.interval=13,ie.fx.start=function(){Je||(Je=!0,L())},ie.fx.stop=function(){Je=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(e,a){return e=ie.fx?ie.fx.speeds[e]||e:e,a=a||"fx",this.queue(a,function(t,n){var a=le.setTimeout(t,e);n.stop=function(){le.clearTimeout(a)}})},function(){var n=W.createElement("input"),a=W.createElement("select").appendChild(W.createElement("option"));n.type="checkbox",re.checkOn=""!==n.value,re.optSelected=a.selected,(n=W.createElement("input")).value="t",n.type="radio",re.radioValue="t"===n.value}();var $e=ie.expr.attrHandle,et;ie.fn.extend({attr:function(n,e){return ve(this,ie.attr,n,e,1<arguments.length)},removeAttr:function(t){return this.each(function(){ie.removeAttr(this,t)})}}),ie.extend({attr:function(a,e,t){var n=a.nodeType,o,s;if(3!==n&&8!==n&&2!==n)return void 0===a.getAttribute?ie.prop(a,e,t):(1===n&&ie.isXMLDoc(a)||(s=ie.attrHooks[e.toLowerCase()]||(ie.expr.match.bool.test(e)?et:void 0)),void 0===t?s&&"get"in s&&null!==(o=s.get(a,e))?o:null==(o=ie.find.attr(a,e))?void 0:o:null===t?void ie.removeAttr(a,e):s&&"set"in s&&void 0!==(o=s.set(a,t,e))?o:(a.setAttribute(e,t+""),t))},attrHooks:{type:{set:function(a,e){if(!re.radioValue&&"radio"===e&&ce(a,"input")){var t=a.value;return a.setAttribute("type",e),t&&(a.value=t),e}}}},removeAttr:function(a,e){var t=0,o=e&&e.match(be),i;if(o&&1===a.nodeType)for(;i=o[t++];)a.removeAttribute(i)}}),et={set:function(a,e,t){return!1===e?ie.removeAttr(a,t):a.setAttribute(t,t),t}},ie.each(ie.expr.match.bool.source.match(/\w+/g),function(a,e){var d=$e[e]||ie.find.attr;$e[e]=function(n,e,t){var a=e.toLowerCase(),r,s;return t||(s=$e[a],$e[a]=r,r=null==d(n,e,t)?null:a,$e[a]=s),r}});ie.fn.extend({prop:function(n,e){return ve(this,ie.prop,n,e,1<arguments.length)},removeProp:function(t){return this.each(function(){delete this[ie.propFix[t]||t]})}}),ie.extend({prop:function(a,e,s){var n=a.nodeType,o,d;if(3!==n&&8!==n&&2!==n)return 1===n&&ie.isXMLDoc(a)||(e=ie.propFix[e]||e,d=ie.propHooks[e]),void 0===s?d&&"get"in d&&null!==(o=d.get(a,e))?o:a[e]:d&&"set"in d&&void 0!==(o=d.set(a,s,e))?o:a[e]=s},propHooks:{tabIndex:{get:function(n){var e=ie.find.attr(n,"tabindex");return e?parseInt(e,10):/^(?:input|select|textarea|button)$/i.test(n.nodeName)||/^(?:a|area)$/i.test(n.nodeName)&&n.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),re.optSelected||(ie.propHooks.selected={get:function(n){var e=n.parentNode;return e&&e.parentNode&&e.parentNode.selectedIndex,null},set:function(n){var e=n.parentNode;e&&(e.selectedIndex,e.parentNode&&e.parentNode.selectedIndex)}}),ie.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ie.propFix[this.toLowerCase()]=this}),ie.fn.extend({addClass:function(d){var e=0,u,p,c,h,f,g,m;if(ie.isFunction(d))return this.each(function(e){ie(this).addClass(d.call(this,e,U(this)))});if("string"==typeof d&&d)for(u=d.match(be)||[];p=this[e++];)if(h=U(p),c=1===p.nodeType&&" "+B(h)+" "){for(g=0;f=u[g++];)0>c.indexOf(" "+f+" ")&&(c+=f+" ");h!==(m=B(c))&&p.setAttribute("class",m)}return this},removeClass:function(d){var e=0,u,p,c,h,f,g,m;if(ie.isFunction(d))return this.each(function(e){ie(this).removeClass(d.call(this,e,U(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof d&&d)for(u=d.match(be)||[];p=this[e++];)if(h=U(p),c=1===p.nodeType&&" "+B(h)+" "){for(g=0;f=u[g++];)for(;-1<c.indexOf(" "+f+" ");)c=c.replace(" "+f+" "," ");h!==(m=B(c))&&p.setAttribute("class",m)}return this},toggleClass:function(a,e){var s=typeof a;return"boolean"==typeof e&&"string"===s?e?this.addClass(a):this.removeClass(a):ie.isFunction(a)?this.each(function(t){ie(this).toggleClass(a.call(this,t,U(this),e),e)}):this.each(function(){var e,n,d,l;if("string"===s)for(n=0,d=ie(this),l=a.match(be)||[];e=l[n++];)d.hasClass(e)?d.removeClass(e):d.addClass(e);else void 0!==a&&"boolean"!==s||((e=U(this))&&Ee.set(this,"__className__",e),this.setAttribute&&this.setAttribute("class",e||!1===a?"":Ee.get(this,"__className__")||""))})},hasClass:function(a){var e=0,i,o;for(i=" "+a+" ";o=this[e++];)if(1===o.nodeType&&-1<(" "+B(U(o))+" ").indexOf(i))return!0;return!1}});ie.fn.extend({val:function(a){var e=this[0],o,i,s;return arguments.length?(s=ie.isFunction(a),this.each(function(e){var t;1===this.nodeType&&(null==(t=s?a.call(this,e,ie(this).val()):a)?t="":"number"==typeof t?t+="":Array.isArray(t)&&(t=ie.map(t,function(t){return null==t?"":t+""})),(o=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()])&&"set"in o&&void 0!==o.set(this,t,"value")||(this.value=t))})):e?(o=ie.valHooks[e.type]||ie.valHooks[e.nodeName.toLowerCase()])&&"get"in o&&void 0!==(i=o.get(e,"value"))?i:"string"==typeof(i=e.value)?i.replace(/\r/g,""):null==i?"":i:void 0}}),ie.extend({valHooks:{option:{get:function(n){var e=ie.find.attr(n,"value");return null==e?B(ie.text(n)):e}},select:{get:function(i){var e=i.options,o=i.selectedIndex,s="select-one"===i.type,a=s?null:[],d=s?o+1:e.length,l,u,p;for(p=0>o?d:s?o:0;p<d;p++)if(((u=e[p]).selected||p===o)&&!u.disabled&&(!u.parentNode.disabled||!ce(u.parentNode,"optgroup"))){if(l=ie(u).val(),s)return l;a.push(l)}return a},set:function(a,e){for(var t=a.options,i=ie.makeArray(e),o=t.length,d,l;o--;)((l=t[o]).selected=-1<ie.inArray(ie.valHooks.option.get(l),i))&&(d=!0);return d||(a.selectedIndex=-1),i}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(n,e){if(Array.isArray(e))return n.checked=-1<ie.inArray(ie(n).val(),e)}},re.checkOn||(ie.valHooks[this].get=function(t){return null===t.getAttribute("value")?"on":t.value})});var tt=/^(?:focusinfocus|focusoutblur)$/;ie.extend(ie.event,{trigger:function(e,g,m,y){var i=[m||W],d=ee.call(e,"type")?e.type:e,_=ee.call(e,"namespace")?e.namespace.split("."):[],b,x,v,T,E,S,w;if(x=v=m=m||W,3!==m.nodeType&&8!==m.nodeType&&!tt.test(d+ie.event.triggered)&&(-1<d.indexOf(".")&&(d=(_=d.split(".")).shift(),_.sort()),E=0>d.indexOf(":")&&"on"+d,e=e[ie.expando]?e:new ie.Event(d,"object"==typeof e&&e),e.isTrigger=y?2:3,e.namespace=_.join("."),e.rnamespace=e.namespace?new RegExp("(^|\\.)"+_.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,e.result=void 0,e.target||(e.target=m),g=null==g?[e]:ie.makeArray(g,[e]),w=ie.event.special[d]||{},y||!w.trigger||!1!==w.trigger.apply(m,g))){if(!y&&!w.noBubble&&!ie.isWindow(m)){for(T=w.delegateType||d,tt.test(T+d)||(x=x.parentNode);x;x=x.parentNode)i.push(x),v=x;v===(m.ownerDocument||W)&&i.push(v.defaultView||v.parentWindow||le)}for(b=0;(x=i[b++])&&!e.isPropagationStopped();)e.type=1<b?T:w.bindType||d,(S=(Ee.get(x,"events")||{})[e.type]&&Ee.get(x,"handle"))&&S.apply(x,g),(S=E&&x[E])&&S.apply&&Te(x)&&(e.result=S.apply(x,g),!1===e.result&&e.preventDefault());return e.type=d,y||e.isDefaultPrevented()||w._default&&!1!==w._default.apply(i.pop(),g)||!Te(m)||E&&ie.isFunction(m[d])&&!ie.isWindow(m)&&((v=m[E])&&(m[E]=null),ie.event.triggered=d,m[d](),ie.event.triggered=void 0,v&&(m[E]=v)),e.result}},simulate:function(a,e,t){var n=ie.extend(new ie.Event,t,{type:a,isSimulated:!0});ie.event.trigger(n,null,e)}}),ie.fn.extend({trigger:function(n,e){return this.each(function(){ie.event.trigger(n,e,this)})},triggerHandler:function(a,e){var t=this[0];if(t)return ie.event.trigger(a,e,t,!0)}}),ie.each(["blur","focus","focusin","focusout","resize","scroll","click","dblclick","mousedown","mouseup","mousemove","mouseover","mouseout","mouseenter","mouseleave","change","select","submit","keydown","keypress","keyup","contextmenu"],function(n,a){ie.fn[a]=function(t,e){return 0<arguments.length?this.on(a,null,t,e):this.trigger(a)}}),ie.fn.extend({hover:function(n,e){return this.mouseenter(n).mouseleave(e||n)}}),re.focusin="onfocusin"in le,re.focusin||ie.each({focus:"focusin",blur:"focusout"},function(a,o){var e=function(t){ie.event.simulate(o,t.target,ie.event.fix(t))};ie.event.special[o]={setup:function(){var t=this.ownerDocument||this,n=Ee.access(t,o);n||t.addEventListener(a,e,!0),Ee.access(t,o,(n||0)+1)},teardown:function(){var t=this.ownerDocument||this,n=Ee.access(t,o)-1;n?Ee.access(t,o,n):(t.removeEventListener(a,e,!0),Ee.remove(t,o))}}});var nt=le.location,rt=ie.now(),it=/\?/;ie.parseXML=function(e){var t;if(!e||"string"!=typeof e)return null;try{t=new le.DOMParser().parseFromString(e,"text/xml")}catch(n){t=void 0}return t&&!t.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+e),t};var ot=/\[\]$/,dt=/\r?\n/g;ie.param=function(a,e){var o=[],t=function(a,e){var t=ie.isFunction(e)?e():e;o[o.length]=encodeURIComponent(a)+"="+encodeURIComponent(null==t?"":t)},r;if(Array.isArray(a)||a.jquery&&!ie.isPlainObject(a))ie.each(a,function(){t(this.name,this.value)});else for(r in a)G(r,a[r],e,t);return o.join("&")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var t=ie.prop(this,"elements");return t?ie.makeArray(t):this}).filter(function(){var t=this.type;return this.name&&!ie(this).is(":disabled")&&/^(?:input|select|textarea|keygen)/i.test(this.nodeName)&&!/^(?:submit|button|image|reset|file)$/i.test(t)&&(this.checked||!Le.test(t))}).map(function(a,r){var e=ie(this).val();return null==e?null:Array.isArray(e)?ie.map(e,function(t){return{name:r.name,value:t.replace(dt,"\r\n")}}):{name:r.name,value:e.replace(dt,"\r\n")}}).get()}});var lt={},ut={},pt="*/".concat("*"),ht=W.createElement("a");ht.href=nt.href,ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:nt.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(nt.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":"*/*",text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(n,e){return e?X(X(n,ie.ajaxSettings),e):X(ie.ajaxSettings,n)},ajaxPrefilter:Y(lt),ajaxTransport:Y(ut),ajax:function(e,E){function S(e,i,n,r){var a=i,o,s,l,c,h;L||(L=!0,R&&le.clearTimeout(R),T=void 0,A=r||"",M.readyState=0<e?4:0,o=200<=e&&300>e||304===e,n&&(c=function(d,e,t){for(var n=d.contents,a=d.dataTypes,l,u,p,c;"*"===a[0];)a.shift(),void 0===l&&(l=d.mimeType||e.getResponseHeader("Content-Type"));if(l)for(u in n)if(n[u]&&n[u].test(l)){a.unshift(u);break}if(a[0]in t)p=a[0];else{for(u in t){if(!a[0]||d.converters[u+" "+a[0]]){p=u;break}c||(c=u)}p=p||c}return p?(p!==a[0]&&a.unshift(p),t[p]):void 0}(C,M,n)),c=function(d,e,p,n){var r={},u=d.dataTypes.slice(),c,h,f,g,m;if(u[1])for(f in d.converters)r[f.toLowerCase()]=d.converters[f];for(h=u.shift();h;)if(d.responseFields[h]&&(p[d.responseFields[h]]=e),!m&&n&&d.dataFilter&&(e=d.dataFilter(e,d.dataType)),m=h,h=u.shift())if("*"===h)h=m;else if("*"!==m&&m!==h){if(!(f=r[m+" "+h]||r["* "+h]))for(c in r)if((g=c.split(" "))[1]===h&&(f=r[m+" "+g[0]]||r["* "+g[0]])){!0===f?f=r[c]:!0!==r[c]&&(h=g[0],u.unshift(g[1]));break}if(!0!==f)if(f&&d.throws)e=f(e);else try{e=f(e)}catch(t){return{state:"parsererror",error:f?t:"No conversion from "+m+" to "+h}}}return{state:"success",data:e}}(C,c,M,o),o?(C.ifModified&&((h=M.getResponseHeader("Last-Modified"))&&(ie.lastModified[P]=h),(h=M.getResponseHeader("etag"))&&(ie.etag[P]=h)),204===e||"HEAD"===C.type?a="nocontent":304===e?a="notmodified":(a=c.state,s=c.data,o=!(l=c.error))):(l=a,!e&&a||(a="error",0>e&&(e=0))),M.status=e,M.statusText=(i||a)+"",o?m.resolveWith(f,[s,a,M]):m.rejectWith(f,[M,a,l]),M.statusCode(y),y=void 0,O&&g.trigger(o?"ajaxSuccess":"ajaxError",[M,C,o?s:l]),v.fireWith(f,[M,a]),O&&(g.trigger("ajaxComplete",[M,C]),--ie.active||ie.event.trigger("ajaxStop")))}"object"==typeof e&&(E=e,e=void 0),E=E||{};var C=ie.ajaxSetup({},E),f=C.context||C,g=C.context&&(f.nodeType||f.jquery)?ie(f):ie.event,m=ie.Deferred(),v=ie.Callbacks("once memory"),y=C.statusCode||{},r={},_={},x="canceled",M={readyState:0,getResponseHeader:function(n){var e;if(L){if(!I)for(I={};e=/^(.*?):[ \t]*([^\r\n]*)$/gm.exec(A);)I[e[1].toLowerCase()]=e[2];e=I[n.toLowerCase()]}return null==e?null:e},getAllResponseHeaders:function(){return L?A:null},setRequestHeader:function(n,a){return null==L&&(n=_[n.toLowerCase()]=_[n.toLowerCase()]||n,r[n]=a),this},overrideMimeType:function(t){return null==L&&(C.mimeType=t),this},statusCode:function(n){if(n)if(L)M.always(n[M.status]);else for(var e in n)y[e]=[y[e],n[e]];return this},abort:function(n){var e=n||x;return T&&T.abort(e),S(0,e),this}},T,P,A,I,R,D,L,O,k,N;if(m.promise(M),C.url=((e||C.url||nt.href)+"").replace(/^\/\//,nt.protocol+"//"),C.type=E.method||E.type||C.method||C.type,C.dataTypes=(C.dataType||"*").toLowerCase().match(be)||[""],null==C.crossDomain){D=W.createElement("a");try{D.href=C.url,D.href=D.href,C.crossDomain=ht.protocol+"//"+ht.host!=D.protocol+"//"+D.host}catch(t){C.crossDomain=!0}}if(C.data&&C.processData&&"string"!=typeof C.data&&(C.data=ie.param(C.data,C.traditional)),j(lt,C,E,M),L)return M;for(k in(O=ie.event&&C.global)&&0==ie.active++&&ie.event.trigger("ajaxStart"),C.type=C.type.toUpperCase(),C.hasContent=!/^(?:GET|HEAD)$/.test(C.type),P=C.url.replace(/#.*$/,""),C.hasContent?C.data&&C.processData&&0===(C.contentType||"").indexOf("application/x-www-form-urlencoded")&&(C.data=C.data.replace(/%20/g,"+")):(N=C.url.slice(P.length),C.data&&(P+=(it.test(P)?"&":"?")+C.data,delete C.data),!1===C.cache&&(P=P.replace(/([?&])_=[^&]*/,"$1"),N=(it.test(P)?"&":"?")+"_="+rt++ +N),C.url=P+N),C.ifModified&&(ie.lastModified[P]&&M.setRequestHeader("If-Modified-Since",ie.lastModified[P]),ie.etag[P]&&M.setRequestHeader("If-None-Match",ie.etag[P])),(C.data&&C.hasContent&&!1!==C.contentType||E.contentType)&&M.setRequestHeader("Content-Type",C.contentType),M.setRequestHeader("Accept",C.dataTypes[0]&&C.accepts[C.dataTypes[0]]?C.accepts[C.dataTypes[0]]+("*"===C.dataTypes[0]?"":", */*; q=0.01"):C.accepts["*"]),C.headers)M.setRequestHeader(k,C.headers[k]);if(C.beforeSend&&(!1===C.beforeSend.call(f,M,C)||L))return M.abort();if(x="abort",v.add(C.complete),M.done(C.success),M.fail(C.error),T=j(ut,C,E,M)){if(M.readyState=1,O&&g.trigger("ajaxSend",[M,C]),L)return M;C.async&&0<C.timeout&&(R=le.setTimeout(function(){M.abort("timeout")},C.timeout));try{L=!1,T.send(r,S)}catch(t){if(L)throw t;S(-1,t)}}else S(-1,"No Transport");return M},getJSON:function(a,e,t){return ie.get(a,e,t,"json")},getScript:function(n,e){return ie.get(n,void 0,e,"script")}}),ie.each(["get","post"],function(n,a){ie[a]=function(t,e,o,s){return ie.isFunction(e)&&(s=s||o,o=e,e=void 0),ie.ajax(ie.extend({url:t,type:a,dataType:s,data:e,success:o},ie.isPlainObject(t)&&t))}}),ie._evalUrl=function(t){return ie.ajax({url:t,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},ie.fn.extend({wrapAll:function(n){var a;return this[0]&&(ie.isFunction(n)&&(n=n.call(this[0])),a=ie(n,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&a.insertBefore(this[0]),a.map(function(){for(var t=this;t.firstElementChild;)t=t.firstElementChild;return t}).append(this)),this},wrapInner:function(a){return ie.isFunction(a)?this.each(function(e){ie(this).wrapInner(a.call(this,e))}):this.each(function(){var e=ie(this),t=e.contents();t.length?t.wrapAll(a):e.append(a)})},wrap:function(a){var e=ie.isFunction(a);return this.each(function(t){ie(this).wrapAll(e?a.call(this,t):a)})},unwrap:function(t){return this.parent(t).not("body").each(function(){ie(this).replaceWith(this.childNodes)}),this}}),ie.expr.pseudos.hidden=function(t){return!ie.expr.pseudos.visible(t)},ie.expr.pseudos.visible=function(t){return!!(t.offsetWidth||t.offsetHeight||t.getClientRects().length)},ie.ajaxSettings.xhr=function(){try{return new le.XMLHttpRequest}catch(t){}};var ft={0:200,1223:204},gt=ie.ajaxSettings.xhr();re.cors=!!gt&&"withCredentials"in gt,re.ajax=gt=!!gt,ie.ajaxTransport(function(e){var t,d;if(re.cors||gt&&!e.crossDomain)return{send:function(n,r){var i=e.xhr(),a;if(i.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(a in e.xhrFields)i[a]=e.xhrFields[a];for(a in e.mimeType&&i.overrideMimeType&&i.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest"),n)i.setRequestHeader(a,n[a]);t=function(n){return function(){t&&(t=d=i.onload=i.onerror=i.onabort=i.onreadystatechange=null,"abort"===n?i.abort():"error"===n?"number"==typeof i.status?r(i.status,i.statusText):r(0,"error"):r(ft[i.status]||i.status,i.statusText,"text"!==(i.responseType||"text")||"string"!=typeof i.responseText?{binary:i.response}:{text:i.responseText},i.getAllResponseHeaders()))}},i.onload=t(),d=i.onerror=t("error"),void 0===i.onabort?i.onreadystatechange=function(){4===i.readyState&&le.setTimeout(function(){t&&d()})}:i.onabort=d,t=t("abort");try{i.send(e.hasContent&&e.data||null)}catch(n){if(t)throw n}},abort:function(){t&&t()}}}),ie.ajaxPrefilter(function(t){t.crossDomain&&(t.contents.script=!1)}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(t){return ie.globalEval(t),t}}}),ie.ajaxPrefilter("script",function(t){void 0===t.cache&&(t.cache=!1),t.crossDomain&&(t.type="GET")}),ie.ajaxTransport("script",function(a){if(a.crossDomain){var o,s;return{send:function(e,t){o=ie("<script>").prop({charset:a.scriptCharset,src:a.url}).on("load error",s=function(n){o.remove(),s=null,n&&t("error"===n.type?404:200,n.type)}),W.head.appendChild(o[0])},abort:function(){s&&s()}}}});var mt=[],yt=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var t=mt.pop()||ie.expando+"_"+rt++;return this[t]=!0,t}}),ie.ajaxPrefilter("json jsonp",function(e,t,n){var r=!1!==e.jsonp&&(yt.test(e.url)?"url":"string"==typeof e.data&&0===(e.contentType||"").indexOf("application/x-www-form-urlencoded")&&yt.test(e.data)&&"data"),a,d,l;if(r||"jsonp"===e.dataTypes[0])return a=e.jsonpCallback=ie.isFunction(e.jsonpCallback)?e.jsonpCallback():e.jsonpCallback,r?e[r]=e[r].replace(yt,"$1"+a):!1!==e.jsonp&&(e.url+=(it.test(e.url)?"&":"?")+e.jsonp+"="+a),e.converters["script json"]=function(){return l||ie.error(a+" was not called"),l[0]},e.dataTypes[0]="json",d=le[a],le[a]=function(){l=arguments},n.always(function(){void 0===d?ie(le).removeProp(a):le[a]=d,e[a]&&(e.jsonpCallback=t.jsonpCallback,mt.push(a)),l&&ie.isFunction(d)&&d(l[0]),l=d=void 0}),"script"}),re.createHTMLDocument=function(){var t=W.implementation.createHTMLDocument("").body;return t.innerHTML="<form></form><form></form>",2===t.childNodes.length}(),ie.parseHTML=function(a,e,s){if("string"!=typeof a)return[];"boolean"==typeof e&&(s=e,e=!1);var d,l,u;return e||(re.createHTMLDocument?((d=(e=W.implementation.createHTMLDocument("")).createElement("base")).href=W.location.href,e.head.appendChild(d)):e=W),l=he.exec(a),u=!s&&[],l?[e.createElement(l[1])]:(l=m([a],e,u),u&&u.length&&ie(u).remove(),ie.merge([],l.childNodes))},ie.fn.load=function(d,l,u){var p=this,s=d.indexOf(" "),a,c,h;return-1<s&&(a=B(d.slice(s)),d=d.slice(0,s)),ie.isFunction(l)?(u=l,l=void 0):l&&"object"==typeof l&&(c="POST"),0<p.length&&ie.ajax({url:d,type:c||"GET",dataType:"html",data:l}).done(function(t){h=arguments,p.html(a?ie("<div>").append(ie.parseHTML(t)).find(a):t)}).always(u&&function(n,e){p.each(function(){u.apply(this,h||[n.responseText,e,n])})}),this},ie.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(n,a){ie.fn[a]=function(t){return this.on(a,t)}}),ie.expr.pseudos.animated=function(n){return ie.grep(ie.timers,function(e){return n===e.elem}).length},ie.offset={setOffset:function(d,e,p){var n=ie.css(d,"position"),u=ie(d),c={},h,f,g,m,y,_;"static"===n&&(d.style.position="relative"),y=u.offset(),g=ie.css(d,"top"),_=ie.css(d,"left"),("absolute"===n||"fixed"===n)&&-1<(g+_).indexOf("auto")?(m=(h=u.position()).top,f=h.left):(m=parseFloat(g)||0,f=parseFloat(_)||0),ie.isFunction(e)&&(e=e.call(d,p,ie.extend({},y))),null!=e.top&&(c.top=e.top-y.top+m),null!=e.left&&(c.left=e.left-y.left+f),"using"in e?e.using.call(d,c):u.css(c)}},ie.fn.extend({offset:function(a){if(arguments.length)return void 0===a?this:this.each(function(e){ie.offset.setOffset(this,a,e)});var e=this[0],o,s,d,l;if(e)return e.getClientRects().length?(d=e.getBoundingClientRect(),o=e.ownerDocument,s=o.documentElement,l=o.defaultView,{top:d.top+l.pageYOffset-s.clientTop,left:d.left+l.pageXOffset-s.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var a=this[0],n={top:0,left:0},i,o;return"fixed"===ie.css(a,"position")?o=a.getBoundingClientRect():(i=this.offsetParent(),o=this.offset(),ce(i[0],"html")||(n=i.offset()),n={top:n.top+ie.css(i[0],"borderTopWidth",!0),left:n.left+ie.css(i[0],"borderLeftWidth",!0)}),{top:o.top-n.top-ie.css(a,"marginTop",!0),left:o.left-n.left-ie.css(a,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var t=this.offsetParent;t&&"static"===ie.css(t,"position");)t=t.offsetParent;return t||Be})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(a,s){var t="pageYOffset"===s;ie.fn[a]=function(e){return ve(this,function(n,e,a){var r;return(ie.isWindow(n)?r=n:9===n.nodeType&&(r=n.defaultView),void 0===a)?r?r[s]:n[e]:void(r?r.scrollTo(t?r.pageXOffset:a,t?a:r.pageYOffset):n[e]=a)},a,e,arguments.length)}}),ie.each(["top","left"],function(n,a){ie.cssHooks[a]=P(re.pixelPosition,function(t,e){if(e)return e=M(t,a),He.test(e)?ie(t).position()[a]+"px":e})}),ie.each({Height:"height",Width:"width"},function(s,e){ie.each({padding:"inner"+s,content:e,"":"outer"+s},function(t,d){ie.fn[d]=function(n,r){var i=arguments.length&&(t||"boolean"!=typeof n),l=t||(!0===n||!0===r?"margin":"border");return ve(this,function(e,t,n){var a;return ie.isWindow(e)?0===d.indexOf("outer")?e["inner"+s]:e.document.documentElement["client"+s]:9===e.nodeType?(a=e.documentElement,Math.max(e.body["scroll"+s],a["scroll"+s],e.body["offset"+s],a["offset"+s],a["client"+s])):void 0===n?ie.css(e,t,l):ie.style(e,t,n,l)},e,i?n:void 0,i)}})}),ie.fn.extend({bind:function(a,e,t){return this.on(a,null,e,t)},unbind:function(n,e){return this.off(n,null,e)},delegate:function(a,e,t,n){return this.on(e,a,t,n)},undelegate:function(a,e,t){return 1===arguments.length?this.off(a,"**"):this.off(e,a||"**",t)}}),ie.holdReady=function(t){t?ie.readyWait++:ie.ready(!0)},ie.isArray=Array.isArray,ie.parseJSON=JSON.parse,ie.nodeName=ce,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ie});var _t=le.jQuery,bt=le.$;return ie.noConflict=function(e){return le.$===ie&&(le.$=bt),e&&le.jQuery===ie&&(le.jQuery=_t),ie},e||(le.jQuery=le.$=ie),ie}),function d(p,e,t){function a(r,i){if(!e[r]){if(!p[r]){var o="function"==typeof require&&require;if(!i&&o)return o(r,!0);if(n)return n(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var l=e[r]={exports:{}};p[r][0].call(l.exports,function(t){var e=p[r][1][t];return a(e||t)},l,l.exports,d,p,e,t)}return e[r].exports}for(var n="function"==typeof require&&require,r=0;r<t.length;r++)a(t[r]);return a}({1:[function(n,e){function t(t){t.fn.perfectScrollbar=function(t){return this.each(function(){if("object"==typeof t||void 0===t){r.get(this)||a.initialize(this,t)}else{var e=t;"update"===e?a.update(this):"destroy"===e&&a.destroy(this)}})}}var a=n("../main"),r=n("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],t);else{var i=window.jQuery?window.jQuery:window.$;void 0!==i&&t(i)}e.exports=t},{"../main":6,"../plugin/instances":17}],2:[function(n,e){var a={};a.create=function(a,e){var t=document.createElement(a);return t.className=e,t},a.appendTo=function(n,e){return e.appendChild(n),n},a.css=function(a,e,t){return"object"==typeof e?function(a,e){for(var t in e){var n=e[t];"number"==typeof n&&(n=n.toString()+"px"),a.style[t]=n}return a}(a,e):void 0===t?function(n,e){return window.getComputedStyle(n)[e]}(a,e):function(a,e,t){return"number"==typeof t&&(t=t.toString()+"px"),a.style[e]=t,a}(a,e,t)},a.matches=function(n,e){return void 0===n.matches?n.msMatchesSelector(e):n.matches(e)},a.remove=function(t){void 0===t.remove?t.parentNode&&t.parentNode.removeChild(t):t.remove()},a.queryChildren=function(n,r){return Array.prototype.filter.call(n.childNodes,function(t){return a.matches(t,r)})},e.exports=a},{}],3:[function(n,e){var a=function(t){this.element=t,this.events={}};a.prototype.bind=function(n,e){void 0===this.events[n]&&(this.events[n]=[]),this.events[n].push(e),this.element.addEventListener(n,e,!1)},a.prototype.unbind=function(n,e){this.events[n]=this.events[n].filter(function(t){return void 0!==e&&t!==e||(this.element.removeEventListener(n,t,!1),!1)},this)},a.prototype.unbindAll=function(){for(var t in this.events)this.unbind(t)};var t=function(){this.eventElements=[]};t.prototype.eventElement=function(n){var e=this.eventElements.filter(function(e){return e.element===n})[0];return void 0===e&&(e=new a(n),this.eventElements.push(e)),e},t.prototype.bind=function(a,e,t){this.eventElement(a).bind(e,t)},t.prototype.unbind=function(a,e,t){this.eventElement(a).unbind(e,t)},t.prototype.unbindAll=function(){for(var t=0;t<this.eventElements.length;t++)this.eventElements[t].unbindAll()},t.prototype.once=function(a,o,t){var n=this.eventElement(a),r=function(a){n.unbind(o,r),t(a)};n.bind(o,r)},e.exports=t},{}],4:[function(n,e){e.exports=function(){function t(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return t()+t()+"-"+t()+"-"+t()+"-"+t()+"-"+t()+t()+t()}}()},{}],5:[function(a,e,t){function s(n){var e;return e=void 0===n?["ps--x","ps--y"]:["ps--"+n],["ps--in-scrolling"].concat(e)}var n=a("./dom"),r=t.toInt=function(t){return parseInt(t,10)||0};t.isEditable=function(t){return n.matches(t,"input,[contenteditable]")||n.matches(t,"select,[contenteditable]")||n.matches(t,"textarea,[contenteditable]")||n.matches(t,"button,[contenteditable]")},t.removePsClasses=function(a){for(var e=0,r;e<a.classList.length;e++)r=a.classList[e],0===r.indexOf("ps-")&&a.classList.remove(r)},t.outerWidth=function(t){return r(n.css(t,"width"))+r(n.css(t,"paddingLeft"))+r(n.css(t,"paddingRight"))+r(n.css(t,"borderLeftWidth"))+r(n.css(t,"borderRightWidth"))},t.startScrolling=function(a,e){for(var t=s(e),n=0;n<t.length;n++)a.classList.add(t[n])},t.stopScrolling=function(a,e){for(var t=s(e),n=0;n<t.length;n++)a.classList.remove(t[n])},t.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},{"./dom":2}],6:[function(n,e){var t=n("./plugin/destroy"),a=n("./plugin/initialize"),r=n("./plugin/update");e.exports={initialize:a,update:r,destroy:t}},{"./plugin/destroy":8,"./plugin/initialize":16,"./plugin/update":20}],7:[function(n,e){e.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},{}],8:[function(n,e){var a=n("../lib/helper"),r=n("../lib/dom"),i=n("./instances");e.exports=function(n){var e=i.get(n);e&&(e.event.unbindAll(),r.remove(e.scrollbarX),r.remove(e.scrollbarY),r.remove(e.scrollbarXRail),r.remove(e.scrollbarYRail),a.removePsClasses(n),i.remove(n))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17}],9:[function(n,e){var t=n("../instances"),a=n("../update-geometry"),i=n("../update-scroll");e.exports=function(n){!function(o,e){function t(t){return t.getBoundingClientRect()}var n=function(t){t.stopPropagation()};e.event.bind(e.scrollbarY,"click",n),e.event.bind(e.scrollbarYRail,"click",function(n){var r=n.pageY-window.pageYOffset-t(e.scrollbarYRail).top>e.scrollbarYTop?1:-1;i(o,"top",o.scrollTop+r*e.containerHeight),a(o),n.stopPropagation()}),e.event.bind(e.scrollbarX,"click",n),e.event.bind(e.scrollbarXRail,"click",function(n){var r=n.pageX-window.pageXOffset-t(e.scrollbarXRail).left>e.scrollbarXLeft?1:-1;i(o,"left",o.scrollLeft+r*e.containerWidth),a(o),n.stopPropagation()})}(n,t.get(n))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],10:[function(n,e){function d(d,e){var t=null,s=null,u=function(n){!function(n){var r=t+n*e.railXRatio,i=Math.max(0,e.scrollbarXRail.getBoundingClientRect().left)+e.railXRatio*(e.railXWidth-e.scrollbarXWidth);e.scrollbarXLeft=0>r?0:r>i?i:r;var o=p.toInt(e.scrollbarXLeft*(e.contentWidth-e.containerWidth)/(e.containerWidth-e.railXRatio*e.scrollbarXWidth))-e.negativeScrollAdjustment;l(d,"left",o)}(n.pageX-s),a(d),n.stopPropagation(),n.preventDefault()},i=function(){p.stopScrolling(d,"x"),e.event.unbind(e.ownerDocument,"mousemove",u)};e.event.bind(e.scrollbarX,"mousedown",function(n){s=n.pageX,t=p.toInt(o.css(e.scrollbarX,"left"))*e.railXRatio,p.startScrolling(d,"x"),e.event.bind(e.ownerDocument,"mousemove",u),e.event.once(e.ownerDocument,"mouseup",i),n.stopPropagation(),n.preventDefault()})}function r(d,e){var t=null,s=null,u=function(n){!function(n){var r=t+n*e.railYRatio,i=Math.max(0,e.scrollbarYRail.getBoundingClientRect().top)+e.railYRatio*(e.railYHeight-e.scrollbarYHeight);e.scrollbarYTop=0>r?0:r>i?i:r;var o=p.toInt(e.scrollbarYTop*(e.contentHeight-e.containerHeight)/(e.containerHeight-e.railYRatio*e.scrollbarYHeight));l(d,"top",o)}(n.pageY-s),a(d),n.stopPropagation(),n.preventDefault()},i=function(){p.stopScrolling(d,"y"),e.event.unbind(e.ownerDocument,"mousemove",u)};e.event.bind(e.scrollbarY,"mousedown",function(n){s=n.pageY,t=p.toInt(o.css(e.scrollbarY,"top"))*e.railYRatio,p.startScrolling(d,"y"),e.event.bind(e.ownerDocument,"mousemove",u),e.event.once(e.ownerDocument,"mouseup",i),n.stopPropagation(),n.preventDefault()})}var p=n("../../lib/helper"),o=n("../../lib/dom"),i=n("../instances"),a=n("../update-geometry"),l=n("../update-scroll");e.exports=function(n){var e=i.get(n);d(n,e),r(n,e)}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],11:[function(n,e){function t(l,e){var t=!1;e.event.bind(l,"mouseenter",function(){t=!0}),e.event.bind(l,"mouseleave",function(){t=!1});var o=!1;e.event.bind(e.ownerDocument,"keydown",function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)){var r=i.matches(e.scrollbarX,":focus")||i.matches(e.scrollbarY,":focus");if(t||r){var s=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(s){if("IFRAME"===s.tagName)s=s.contentDocument.activeElement;else for(;s.shadowRoot;)s=s.shadowRoot.activeElement;if(r.isEditable(s))return}var p=0,f=0;switch(n.which){case 37:p=n.metaKey?-e.contentWidth:n.altKey?-e.containerWidth:-30;break;case 38:f=n.metaKey?e.contentHeight:n.altKey?e.containerHeight:30;break;case 39:p=n.metaKey?e.contentWidth:n.altKey?e.containerWidth:30;break;case 40:f=n.metaKey?-e.contentHeight:n.altKey?-e.containerHeight:-30;break;case 33:f=90;break;case 32:f=n.shiftKey?90:-90;break;case 34:f=-90;break;case 35:f=n.ctrlKey?-e.contentHeight:-e.containerHeight;break;case 36:f=n.ctrlKey?l.scrollTop:e.containerHeight;break;default:return;}a(l,"top",l.scrollTop-f),a(l,"left",l.scrollLeft+p),u(l),(o=function(t,n){var a=l.scrollTop;if(0===t){if(!e.scrollbarYActive)return!1;if(0===a&&0<n||a>=e.contentHeight-e.containerHeight&&0>n)return!e.settings.wheelPropagation}var r=l.scrollLeft;if(0===n){if(!e.scrollbarXActive)return!1;if(0===r&&0>t||r>=e.contentWidth-e.containerWidth&&0<t)return!e.settings.wheelPropagation}return!0}(p,f))&&n.preventDefault()}}})}var r=n("../../lib/helper"),i=n("../../lib/dom"),o=n("../instances"),u=n("../update-geometry"),a=n("../update-scroll");e.exports=function(n){t(n,o.get(n))}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],12:[function(n,e){function t(u,e){function t(t){var n=function(a){var e=a.deltaX,r=-1*a.deltaY;return void 0!==e&&void 0!==r||(e=-1*a.wheelDeltaX/6,r=a.wheelDeltaY/6),a.deltaMode&&1===a.deltaMode&&(e*=10,r*=10),e!=e&&r!=r&&(e=0,r=a.wheelDelta),a.shiftKey?[-r,-e]:[e,r]}(t),r=n[0],a=n[1];(function(e,t){var n=u.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(n){var a=window.getComputedStyle(n);if(![a.overflow,a.overflowX,a.overflowY].join("").match(/(scroll|auto)/))return!1;var r=n.scrollHeight-n.clientHeight;if(0<r&&!(0===n.scrollTop&&0<t||n.scrollTop===r&&0>t))return!0;var i=n.scrollLeft-n.clientWidth;if(0<i&&!(0===n.scrollLeft&&0>e||n.scrollLeft===i&&0<e))return!0}return!1})(r,a)||(s=!1,e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(a?o(u,"top",u.scrollTop-a*e.settings.wheelSpeed):o(u,"top",u.scrollTop+r*e.settings.wheelSpeed),s=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(r?o(u,"left",u.scrollLeft+r*e.settings.wheelSpeed):o(u,"left",u.scrollLeft-a*e.settings.wheelSpeed),s=!0):(o(u,"top",u.scrollTop-a*e.settings.wheelSpeed),o(u,"left",u.scrollLeft+r*e.settings.wheelSpeed)),d(u),(s=s||function(t,n){var a=u.scrollTop;if(0===t){if(!e.scrollbarYActive)return!1;if(0===a&&0<n||a>=e.contentHeight-e.containerHeight&&0>n)return!e.settings.wheelPropagation}var r=u.scrollLeft;if(0===n){if(!e.scrollbarXActive)return!1;if(0===r&&0>t||r>=e.contentWidth-e.containerWidth&&0<t)return!e.settings.wheelPropagation}return!0}(r,a))&&(t.stopPropagation(),t.preventDefault()))}var s=!1;void 0===window.onwheel?void 0!==window.onmousewheel&&e.event.bind(u,"mousewheel",t):e.event.bind(u,"wheel",t)}var a=n("../instances"),d=n("../update-geometry"),o=n("../update-scroll");e.exports=function(n){t(n,a.get(n))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],13:[function(n,e){var t=n("../instances"),a=n("../update-geometry");e.exports=function(n){!function(n,e){e.event.bind(n,"scroll",function(){a(n)})}(n,t.get(n))}},{"../instances":17,"../update-geometry":18}],14:[function(n,e){function t(a,e){function p(){n&&(clearInterval(n),n=null),d.stopScrolling(a)}var n=null,f={top:0,left:0},l=!1;e.event.bind(e.ownerDocument,"selectionchange",function(){a.contains(function(){var t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===t.toString().length?null:t.getRangeAt(0).commonAncestorContainer}())?l=!0:(l=!1,p())}),e.event.bind(window,"mouseup",function(){l&&(l=!1,p())}),e.event.bind(window,"keyup",function(){l&&(l=!1,p())}),e.event.bind(window,"mousemove",function(e){if(l){var t={x:e.pageX,y:e.pageY},r={left:a.offsetLeft,right:a.offsetLeft+a.offsetWidth,top:a.offsetTop,bottom:a.offsetTop+a.offsetHeight};t.x<r.left+3?(f.left=-5,d.startScrolling(a,"x")):t.x>r.right-3?(f.left=5,d.startScrolling(a,"x")):f.left=0,t.y<r.top+3?(f.top=5>r.top+3-t.y?-5:-20,d.startScrolling(a,"y")):t.y>r.bottom-3?(f.top=5>t.y-r.bottom+3?5:20,d.startScrolling(a,"y")):f.top=0,0===f.top&&0===f.left?p():n||(n=setInterval(function(){i.get(a)?(s(a,"top",a.scrollTop+f.top),s(a,"left",a.scrollLeft+f.left),o(a)):clearInterval(n)},50))}})}var d=n("../../lib/helper"),i=n("../instances"),o=n("../update-geometry"),s=n("../update-scroll");e.exports=function(n){t(n,i.get(n))}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],15:[function(n,e){function t(x,e,t,n){function T(e,t){o(x,"top",x.scrollTop-t),o(x,"left",x.scrollLeft-e),i(x)}function a(){v=!0}function r(){v=!1}function E(t){return t.targetTouches?t.targetTouches[0]:t}function c(t){return(!t.pointerType||"pen"!==t.pointerType||0!==t.buttons)&&(t.targetTouches&&1===t.targetTouches.length||t.pointerType&&"mouse"!==t.pointerType&&t.pointerType!==t.MSPOINTER_TYPE_MOUSE)}function h(n){if(c(n)){w=!0;var e=E(n);p.pageX=e.pageX,p.pageY=e.pageY,f=new Date().getTime(),null!==u&&clearInterval(u),n.stopPropagation()}}function s(t){if(!w&&e.settings.swipePropagation&&h(t),!v&&w&&c(t)){var n=E(t),r={pageX:n.pageX,pageY:n.pageY},i=r.pageX-p.pageX,o=r.pageY-p.pageY;T(i,o),p=r;var a=new Date().getTime(),s=a-f;0<s&&(S.x=i/s,S.y=o/s,f=a),function(t,n){var r=x.scrollTop,i=x.scrollLeft,o=Math.abs(t),s=Math.abs(n);if(s>o){if(0>n&&r===e.contentHeight-e.containerHeight||0<n&&0===r)return!e.settings.swipePropagation;}else if(o>s&&(0>t&&i===e.contentWidth-e.containerWidth||0<t&&0===i))return!e.settings.swipePropagation;return!0}(i,o)&&(t.stopPropagation(),t.preventDefault())}}function l(){!v&&w&&(w=!1,e.settings.swipeEasing&&(clearInterval(u),u=setInterval(function(){d.get(x)&&(S.x||S.y)?.01>Math.abs(S.x)&&.01>Math.abs(S.y)?clearInterval(u):(T(30*S.x,30*S.y),S.x*=.8,S.y*=.8):clearInterval(u)},10)))}var p={},f=0,S={},u=null,v=!1,w=!1;t?(e.event.bind(window,"touchstart",a),e.event.bind(window,"touchend",r),e.event.bind(x,"touchstart",h),e.event.bind(x,"touchmove",s),e.event.bind(x,"touchend",l)):n&&(window.PointerEvent?(e.event.bind(window,"pointerdown",a),e.event.bind(window,"pointerup",r),e.event.bind(x,"pointerdown",h),e.event.bind(x,"pointermove",s),e.event.bind(x,"pointerup",l)):window.MSPointerEvent&&(e.event.bind(window,"MSPointerDown",a),e.event.bind(window,"MSPointerUp",r),e.event.bind(x,"MSPointerDown",h),e.event.bind(x,"MSPointerMove",s),e.event.bind(x,"MSPointerUp",l)))}var r=n("../../lib/helper"),d=n("../instances"),i=n("../update-geometry"),o=n("../update-scroll");e.exports=function(n){(r.env.supportsTouch||r.env.supportsIePointer)&&t(n,d.get(n),r.env.supportsTouch,r.env.supportsIePointer)}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],16:[function(n,e){var a=n("./instances"),r=n("./update-geometry"),i={"click-rail":n("./handler/click-rail"),"drag-scrollbar":n("./handler/drag-scrollbar"),keyboard:n("./handler/keyboard"),wheel:n("./handler/mouse-wheel"),touch:n("./handler/touch"),selection:n("./handler/selection")},o=n("./handler/native-scroll");e.exports=function(s,e){s.classList.add("ps");var t=a.add(s,"object"==typeof e?e:{});s.classList.add("ps--theme_"+t.settings.theme),t.settings.handlers.forEach(function(e){i[e](s)}),o(s),r(s)}},{"./handler/click-rail":9,"./handler/drag-scrollbar":10,"./handler/keyboard":11,"./handler/mouse-wheel":12,"./handler/native-scroll":13,"./handler/selection":14,"./handler/touch":15,"./instances":17,"./update-geometry":18}],17:[function(d,e,t){function n(t){return t.getAttribute("data-ps-id")}var p=d("../lib/helper"),r=d("./default-setting"),i=d("../lib/dom"),o=d("../lib/event-manager"),a=d("../lib/guid"),s={};t.add=function(d,e){var t=a();return function(n,e){n.setAttribute("data-ps-id",e)}(d,t),s[t]=new function(a,e){function t(){a.classList.add("ps--focus")}function n(){a.classList.remove("ps--focus")}for(var s in this.settings=r(),e)this.settings[s]=e[s];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null,this.isRtl="rtl"===i.css(a,"direction"),this.isNegativeScroll=function(){var e=a.scrollLeft,t=null;return a.scrollLeft=-1,t=0>a.scrollLeft,a.scrollLeft=e,t}(),this.negativeScrollAdjustment=this.isNegativeScroll?a.scrollWidth-a.clientWidth:0,this.event=new o,this.ownerDocument=a.ownerDocument||document,this.scrollbarXRail=i.appendTo(i.create("div","ps__scrollbar-x-rail"),a),this.scrollbarX=i.appendTo(i.create("div","ps__scrollbar-x"),this.scrollbarXRail),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",t),this.event.bind(this.scrollbarX,"blur",n),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null,this.scrollbarXBottom=p.toInt(i.css(this.scrollbarXRail,"bottom")),this.isScrollbarXUsingBottom=this.scrollbarXBottom==this.scrollbarXBottom,this.scrollbarXTop=this.isScrollbarXUsingBottom?null:p.toInt(i.css(this.scrollbarXRail,"top")),this.railBorderXWidth=p.toInt(i.css(this.scrollbarXRail,"borderLeftWidth"))+p.toInt(i.css(this.scrollbarXRail,"borderRightWidth")),i.css(this.scrollbarXRail,"display","block"),this.railXMarginWidth=p.toInt(i.css(this.scrollbarXRail,"marginLeft"))+p.toInt(i.css(this.scrollbarXRail,"marginRight")),i.css(this.scrollbarXRail,"display",""),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=i.appendTo(i.create("div","ps__scrollbar-y-rail"),a),this.scrollbarY=i.appendTo(i.create("div","ps__scrollbar-y"),this.scrollbarYRail),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",t),this.event.bind(this.scrollbarY,"blur",n),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null,this.scrollbarYRight=p.toInt(i.css(this.scrollbarYRail,"right")),this.isScrollbarYUsingRight=this.scrollbarYRight==this.scrollbarYRight,this.scrollbarYLeft=this.isScrollbarYUsingRight?null:p.toInt(i.css(this.scrollbarYRail,"left")),this.scrollbarYOuterWidth=this.isRtl?p.outerWidth(this.scrollbarY):null,this.railBorderYWidth=p.toInt(i.css(this.scrollbarYRail,"borderTopWidth"))+p.toInt(i.css(this.scrollbarYRail,"borderBottomWidth")),i.css(this.scrollbarYRail,"display","block"),this.railYMarginHeight=p.toInt(i.css(this.scrollbarYRail,"marginTop"))+p.toInt(i.css(this.scrollbarYRail,"marginBottom")),i.css(this.scrollbarYRail,"display",""),this.railYHeight=null,this.railYRatio=null}(d,e),s[t]},t.remove=function(t){delete s[n(t)],function(t){t.removeAttribute("data-ps-id")}(t)},t.get=function(t){return s[n(t)]}},{"../lib/dom":2,"../lib/event-manager":3,"../lib/guid":4,"../lib/helper":5,"./default-setting":7}],18:[function(n,e){function d(n,e){return n.settings.minScrollbarLength&&(e=Math.max(e,n.settings.minScrollbarLength)),n.settings.maxScrollbarLength&&(e=Math.min(e,n.settings.maxScrollbarLength)),e}var r=n("../lib/helper"),i=n("../lib/dom"),o=n("./instances"),s=n("./update-scroll");e.exports=function(a){var e=o.get(a);e.containerWidth=a.clientWidth,e.containerHeight=a.clientHeight,e.contentWidth=a.scrollWidth,e.contentHeight=a.scrollHeight;var t;a.contains(e.scrollbarXRail)||(0<(t=i.queryChildren(a,".ps__scrollbar-x-rail")).length&&t.forEach(function(t){i.remove(t)}),i.appendTo(e.scrollbarXRail,a)),a.contains(e.scrollbarYRail)||(0<(t=i.queryChildren(a,".ps__scrollbar-y-rail")).length&&t.forEach(function(t){i.remove(t)}),i.appendTo(e.scrollbarYRail,a)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=d(e,r.toInt(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=r.toInt((e.negativeScrollAdjustment+a.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=d(e,r.toInt(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=r.toInt(a.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),function(a,e){var t={width:e.railXWidth};t.left=e.isRtl?e.negativeScrollAdjustment+a.scrollLeft+e.containerWidth-e.contentWidth:a.scrollLeft,e.isScrollbarXUsingBottom?t.bottom=e.scrollbarXBottom-a.scrollTop:t.top=e.scrollbarXTop+a.scrollTop,i.css(e.scrollbarXRail,t);var n={top:a.scrollTop,height:e.railYHeight};e.isScrollbarYUsingRight?e.isRtl?n.right=e.contentWidth-(e.negativeScrollAdjustment+a.scrollLeft)-e.scrollbarYRight-e.scrollbarYOuterWidth:n.right=e.scrollbarYRight-a.scrollLeft:e.isRtl?n.left=e.negativeScrollAdjustment+a.scrollLeft+2*e.containerWidth-e.contentWidth-e.scrollbarYLeft-e.scrollbarYOuterWidth:n.left=e.scrollbarYLeft+a.scrollLeft,i.css(e.scrollbarYRail,n),i.css(e.scrollbarX,{left:e.scrollbarXLeft,width:e.scrollbarXWidth-e.railBorderXWidth}),i.css(e.scrollbarY,{top:e.scrollbarYTop,height:e.scrollbarYHeight-e.railBorderYWidth})}(a,e),e.scrollbarXActive?a.classList.add("ps--active-x"):(a.classList.remove("ps--active-x"),e.scrollbarXWidth=0,e.scrollbarXLeft=0,s(a,"left",0)),e.scrollbarYActive?a.classList.add("ps--active-y"):(a.classList.remove("ps--active-y"),e.scrollbarYHeight=0,e.scrollbarYTop=0,s(a,"top",0))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-scroll":19}],19:[function(n,e){var a=n("./instances"),r=function(n){var e=document.createEvent("Event");return e.initEvent(n,!0,!0),e};e.exports=function(i,e,t){if(void 0===i)throw"You must provide an element to the update-scroll function";if(void 0===e)throw"You must provide an axis to the update-scroll function";if(void 0===t)throw"You must provide a value to the update-scroll function";"top"===e&&0>=t&&(i.scrollTop=t=0,i.dispatchEvent(r("ps-y-reach-start"))),"left"===e&&0>=t&&(i.scrollLeft=t=0,i.dispatchEvent(r("ps-x-reach-start")));var s=a.get(i);"top"===e&&t>=s.contentHeight-s.containerHeight&&(2>=(t=s.contentHeight-s.containerHeight)-i.scrollTop?t=i.scrollTop:i.scrollTop=t,i.dispatchEvent(r("ps-y-reach-end"))),"left"===e&&t>=s.contentWidth-s.containerWidth&&(2>=(t=s.contentWidth-s.containerWidth)-i.scrollLeft?t=i.scrollLeft:i.scrollLeft=t,i.dispatchEvent(r("ps-x-reach-end"))),void 0===s.lastTop&&(s.lastTop=i.scrollTop),void 0===s.lastLeft&&(s.lastLeft=i.scrollLeft),"top"===e&&t<s.lastTop&&i.dispatchEvent(r("ps-scroll-up")),"top"===e&&t>s.lastTop&&i.dispatchEvent(r("ps-scroll-down")),"left"===e&&t<s.lastLeft&&i.dispatchEvent(r("ps-scroll-left")),"left"===e&&t>s.lastLeft&&i.dispatchEvent(r("ps-scroll-right")),"top"===e&&t!==s.lastTop&&(i.scrollTop=s.lastTop=t,i.dispatchEvent(r("ps-scroll-y"))),"left"===e&&t!==s.lastLeft&&(i.scrollLeft=s.lastLeft=t,i.dispatchEvent(r("ps-scroll-x")))}},{"./instances":17}],20:[function(n,e){var d=n("../lib/helper"),r=n("../lib/dom"),i=n("./instances"),o=n("./update-geometry"),s=n("./update-scroll");e.exports=function(n){var e=i.get(n);e&&(e.negativeScrollAdjustment=e.isNegativeScroll?n.scrollWidth-n.clientWidth:0,r.css(e.scrollbarXRail,"display","block"),r.css(e.scrollbarYRail,"display","block"),e.railXMarginWidth=d.toInt(r.css(e.scrollbarXRail,"marginLeft"))+d.toInt(r.css(e.scrollbarXRail,"marginRight")),e.railYMarginHeight=d.toInt(r.css(e.scrollbarYRail,"marginTop"))+d.toInt(r.css(e.scrollbarYRail,"marginBottom")),r.css(e.scrollbarXRail,"display","none"),r.css(e.scrollbarYRail,"display","none"),o(n),s(n,"top",n.scrollTop),s(n,"left",n.scrollLeft),r.css(e.scrollbarXRail,"display",""),r.css(e.scrollbarYRail,"display",""))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-geometry":18,"./update-scroll":19}]},{},[1]),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).PIXI=t()}(function(){return function d(p,e,t){function a(r,i){if(!e[r]){if(!p[r]){var o="function"==typeof require&&require;if(!i&&o)return o(r,!0);if(n)return n(r,!0);var s=new Error("Cannot find module '"+r+"'");throw s.code="MODULE_NOT_FOUND",s}var l=e[r]={exports:{}};p[r][0].call(l.exports,function(t){var e=p[r][1][t];return a(e||t)},l,l.exports,d,p,e,t)}return e[r].exports}for(var n="function"==typeof require&&require,r=0;r<t.length;r++)a(t[r]);return a}({1:[function(a,e,t){"use restrict";function n(n){var a=32;return(n&=-n)&&a--,65535&n&&(a-=16),16711935&n&&(a-=8),252645135&n&&(a-=4),858993459&n&&(a-=2),1431655765&n&&(a-=1),a}t.INT_BITS=32,t.INT_MAX=2147483647,t.INT_MIN=-2147483648,t.sign=function(t){return(0<t)-(0>t)},t.abs=function(n){var e=n>>31;return(n^e)-e},t.min=function(n,e){return e^(n^e)&-(n<e)},t.max=function(n,e){return n^(n^e)&-(n<e)},t.isPow2=function(t){return!(t&t-1)&&t},t.log2=function(a){var r,i;return r=(65535<a)<<4,a>>>=r,i=(255<a)<<3,a>>>=i,r|=i,i=(15<a)<<2,a>>>=i,r|=i,i=(3<a)<<1,a>>>=i,(r|=i)|a>>1},t.log10=function(t){return 1e9<=t?9:1e8<=t?8:1e7<=t?7:1e6<=t?6:1e5<=t?5:1e4<=t?4:1e3<=t?3:100<=t?2:10<=t?1:0},t.popCount=function(t){return t-=1431655765&t>>>1,16843009*(252645135&(t=(858993459&t)+(858993459&t>>>2))+(t>>>4))>>>24},t.countTrailingZeros=n,t.nextPow2=function(t){return t+=0===t,--t,t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)+1},t.prevPow2=function(t){return t|=t>>>1,t|=t>>>2,t|=t>>>4,t|=t>>>8,(t|=t>>>16)-(t>>>1)},t.parity=function(t){return t^=t>>>16,t^=t>>>8,t^=t>>>4,1&27030>>>(t&=15)};var r=Array(256);!function(a){for(var e=0;256>e;++e){var o=e,s=e,d=7;for(o>>>=1;o;o>>>=1)s<<=1,s|=1&o,--d;a[e]=255&s<<d}}(r),t.reverse=function(t){return r[255&t]<<24|r[255&t>>>8]<<16|r[255&t>>>16]<<8|r[255&t>>>24]},t.interleave2=function(n,a){return n&=65535,n=16711935&(n|n<<8),n=252645135&(n|n<<4),n=858993459&(n|n<<2),n=1431655765&(n|n<<1),a&=65535,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),n|a<<1},t.deinterleave2=function(n,a){return n=1431655765&n>>>a,n=858993459&(n|n>>>1),n=252645135&(n|n>>>2),n=16711935&(n|n>>>4),(n=65535&(n|n>>>16))<<16>>16},t.interleave3=function(a,r,i){return a&=1023,a=4278190335&(a|a<<16),a=251719695&(a|a<<8),a=3272356035&(a|a<<4),a=1227133513&(a|a<<2),r&=1023,r=4278190335&(r|r<<16),r=251719695&(r|r<<8),r=3272356035&(r|r<<4),r=1227133513&(r|r<<2),a|=r<<1,i&=1023,i=4278190335&(i|i<<16),i=251719695&(i|i<<8),i=3272356035&(i|i<<4),i=1227133513&(i|i<<2),a|i<<2},t.deinterleave3=function(n,a){return n=1227133513&n>>>a,n=3272356035&(n|n>>>2),n=251719695&(n|n>>>4),n=4278190335&(n|n>>>8),(n=1023&(n|n>>>16))<<22>>22},t.nextCombination=function(a){var e=a|a-1;return e+1|(~e&-~e)-1>>>n(a)+1}},{}],2:[function(n,e){function t(i,e,t){t=t||2;var s=e&&e.length,u=s?e[0]*t:i.length,l=T(i,0,u,t,!0),p=[];if(!l)return p;var h,f,E,S,w,C,M;if(s&&(l=function(i,e,t,o){var u=[],p,f,g,m,y;for(p=0,f=e.length;p<f;p++)g=e[p]*o,m=p<f-1?e[p+1]*o:i.length,(y=T(i,g,m,o,!1))===y.next&&(y.steiner=!0),u.push(function(a){var e=a,r=a;do e.x<r.x&&(r=e),e=e.next;while(e!==a);return r}(y));for(u.sort(r),p=0;p<u.length;p++)!function(r,e){if(e=function(u,e){var t=e,p=u.x,i=u.y,o=-1/0,g;do{if(i<=t.y&&i>=t.next.y){var m=t.x+(i-t.y)*(t.next.x-t.x)/(t.next.y-t.y);if(m<=p&&m>o){if(o=m,m===p){if(i===t.y)return t;if(i===t.next.y)return t.next}g=t.x<t.next.x?t:t.next}}t=t.next}while(t!==e);if(!g)return null;if(p===o)return g.prev;var y=g,c=g.x,h=g.y,d=1/0,_;for(t=g.next;t!==y;)p>=t.x&&t.x>=c&&a(i<h?p:o,i,c,h,i<h?o:p,i,t.x,t.y)&&((_=Math.abs(i-t.y)/(p-t.x))<d||_===d&&t.x>g.x)&&x(t,u)&&(g=t,d=_),t=t.next;return g}(r,e)){var i=d(e,r);_(i,i.next)}}(u[p],t),t=_(t,t.next);return t}(i,e,l,t)),i.length>80*t){h=E=i[0],f=S=i[1];for(var P=t;P<u;P+=t)w=i[P],C=i[P+1],w<h&&(h=w),C<f&&(f=C),w>E&&(E=w),C>S&&(S=C);M=Math.max(E-h,S-f)}return o(l,p,t,h,f,M),p}function T(a,e,t,n,r){var d,l;if(r===0<g(a,e,t,n))for(d=e;d<t;d+=n)l=i(d,a[d],a[d+1],l);else for(d=t-n;d>=e;d-=n)l=i(d,a[d],a[d+1],l);return l&&u(l,l.next)&&(p(l),l=l.next),l}function _(a,e){if(!a)return a;e||(e=a);var i=a,o;do if(o=!1,i.steiner||!u(i,i.next)&&0!==l(i.prev,i,i.next))i=i.next;else{if(p(i),(i=e=i.prev)===i.next)return null;o=!0}while(o||i!==e);return e}function o(c,h,t,n,r,i,f){if(c){!f&&i&&function(a,e,t,n){var r=a;do null===r.z&&(r.z=b(r.x,r.y,e,t,n)),r.prevZ=r.prev,r.nextZ=r.next,r=r.next;while(r!==a);r.prevZ.nextZ=null,r.prevZ=null,function(d){var p=1,c,h,f,g,m,y,_,b;do{for(h=d,d=null,m=null,y=0;h;){for(y++,f=h,_=0,c=0;c<p&&(_++,f=f.nextZ);c++);for(b=p;0<_||0<b&&f;)0===_?(g=f,f=f.nextZ,b--):0!==b&&f?h.z<=f.z?(g=h,h=h.nextZ,_--):(g=f,f=f.nextZ,b--):(g=h,h=h.nextZ,_--),m?m.nextZ=g:d=g,g.prevZ=m,m=g;h=f}m.nextZ=null,p*=2}while(1<y)}(r)}(c,n,r,i);for(var g=c,m,T;c.prev!==c.next;)if(m=c.prev,T=c.next,i?function(u,e,t,n){var r=u.prev,i=u,o=u.next;if(0<=l(r,i,o))return!1;for(var s=r.x<i.x?r.x<o.x?r.x:o.x:i.x<o.x?i.x:o.x,c=r.y<i.y?r.y<o.y?r.y:o.y:i.y<o.y?i.y:o.y,h=r.x>i.x?r.x>o.x?r.x:o.x:i.x>o.x?i.x:o.x,d=r.y>i.y?r.y>o.y?r.y:o.y:i.y>o.y?i.y:o.y,p=b(s,c,e,t,n),f=b(h,d,e,t,n),g=u.nextZ;g&&g.z<=f;){if(g!==u.prev&&g!==u.next&&a(r.x,r.y,i.x,i.y,o.x,o.y,g.x,g.y)&&0<=l(g.prev,g,g.next))return!1;g=g.nextZ}for(g=u.prevZ;g&&g.z>=p;){if(g!==u.prev&&g!==u.next&&a(r.x,r.y,i.x,i.y,o.x,o.y,g.x,g.y)&&0<=l(g.prev,g,g.next))return!1;g=g.prevZ}return!0}(c,n,r,i):function(o){var e=o.prev,t=o,n=o.next;if(0<=l(e,t,n))return!1;for(var r=o.next.next;r!==o.prev;){if(a(e.x,e.y,t.x,t.y,n.x,n.y,r.x,r.y)&&0<=l(r.prev,r,r.next))return!1;r=r.next}return!0}(c))h.push(m.i/t),h.push(c.i/t),h.push(T.i/t),p(c),c=T.next,g=T.next;else if((c=T)===g){f?1===f?o(c=function(a,d,t){var n=a;do{var l=n.prev,i=n.next.next;!u(l,i)&&s(l,n,n.next,i)&&x(l,i)&&x(i,l)&&(d.push(l.i/t),d.push(n.i/t),d.push(i.i/t),p(n),p(n.next),n=a=i),n=n.next}while(n!==a);return n}(c,h,t),h,t,n,r,i,2):2==f&&function(p,e,t,n,r,i){var a=p;do{for(var h=a.next.next;h!==a.prev;){if(a.i!==h.i&&function(n,e){return n.next.i!==e.i&&n.prev.i!==e.i&&!function(a,e){var t=a;do{if(t.i!==a.i&&t.next.i!==a.i&&t.i!==e.i&&t.next.i!==e.i&&s(t,t.next,a,e))return!0;t=t.next}while(t!==a);return!1}(n,e)&&x(n,e)&&x(e,n)&&function(a,e){var t=a,s=!1,d=(a.x+e.x)/2,i=(a.y+e.y)/2;do t.y>i!=t.next.y>i&&d<(t.next.x-t.x)*(i-t.y)/(t.next.y-t.y)+t.x&&(s=!s),t=t.next;while(t!==a);return s}(n,e)}(a,h)){var f=d(a,h);return a=_(a,a.next),f=_(f,f.next),o(a,e,t,n,r,i),void o(f,e,t,n,r,i)}h=h.next}a=a.next}while(a!==p)}(c,h,t,n,r,i):o(_(c),h,t,n,r,i,1);break}}}function r(n,e){return n.x-e.x}function b(a,o,s,n,r){return a=32767*(a-s)/r,o=32767*(o-n)/r,a=16711935&(a|a<<8),a=252645135&(a|a<<4),a=858993459&(a|a<<2),a=1431655765&(a|a<<1),o=16711935&(o|o<<8),o=252645135&(o|o<<4),o=858993459&(o|o<<2),o=1431655765&(o|o<<1),a|o<<1}function a(d,e,t,n,r,i,o,s){return 0<=(r-o)*(e-s)-(d-o)*(i-s)&&0<=(d-o)*(n-s)-(t-o)*(e-s)&&0<=(t-o)*(i-s)-(r-o)*(n-s)}function l(a,e,t){return(e.y-a.y)*(t.x-e.x)-(e.x-a.x)*(t.y-e.y)}function u(n,e){return n.x===e.x&&n.y===e.y}function s(a,e,t,n){return!!(u(a,e)&&u(t,n)||u(a,n)&&u(t,e))||0<l(a,e,t)!=0<l(a,e,n)&&0<l(t,n,a)!=0<l(t,n,e)}function x(n,e){return 0>l(n.prev,n,n.next)?0<=l(n,e,n.next)&&0<=l(n,n.prev,e):0>l(n,e,n.prev)||0>l(n,n.next,e)}function d(a,e){var t=new c(a.i,a.x,a.y),n=new c(e.i,e.x,e.y),r=a.next,i=e.prev;return a.next=e,e.prev=a,t.next=r,r.prev=t,n.next=t,t.prev=n,i.next=n,n.prev=i,n}function i(a,e,t,n){var r=new c(a,e,t);return n?(r.next=n.next,r.prev=n,n.next.prev=r,n.next=r):(r.prev=r,r.next=r),r}function p(t){t.next.prev=t.prev,t.prev.next=t.next,t.prevZ&&(t.prevZ.nextZ=t.nextZ),t.nextZ&&(t.nextZ.prevZ=t.prevZ)}function c(a,e,t){this.i=a,this.x=e,this.y=t,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function g(a,e,t,n){for(var r=0,d=e,l=t-n;d<t;d+=n)r+=(a[l]-a[d])*(a[d+1]+a[l+1]),l=d;return r}e.exports=t,t.deviation=function(m,e,t,n){var r=e&&e.length,i=r?e[0]*t:m.length,o=Math.abs(g(m,0,i,t));if(r)for(var y=0,_=e.length;y<_;y++){var l=e[y]*t,u=y<_-1?e[y+1]*t:m.length;o-=Math.abs(g(m,l,u,t))}var c=0;for(y=0;y<n.length;y+=3){var b=n[y]*t,d=n[y+1]*t,p=n[y+2]*t;c+=Math.abs((m[b]-m[p])*(m[d+1]-m[b+1])-(m[b]-m[d])*(m[p+1]-m[b+1]))}return 0===o&&0===c?0:Math.abs((c-o)/o)},t.flatten=function(a){for(var e=a[0][0].length,t={vertices:[],holes:[],dimensions:e},n=0,d=0;d<a.length;d++){for(var l=0;l<a[d].length;l++)for(var u=0;u<e;u++)t.vertices.push(a[d][l][u]);0<d&&(n+=a[d-1].length,t.holes.push(n))}return t}},{}],3:[function(n,e){function d(){}function l(a,e,t){this.fn=a,this.context=e,this.once=t||!1}function t(){this._events=new d,this._eventsCount=0}var r=Object.prototype.hasOwnProperty,f="~";Object.create&&(d.prototype=Object.create(null),new d().__proto__||(f=!1)),t.prototype.eventNames=function(){var a=[],n,i;if(0===this._eventsCount)return a;for(i in n=this._events)r.call(n,i)&&a.push(f?i.slice(1):i);return Object.getOwnPropertySymbols?a.concat(Object.getOwnPropertySymbols(n)):a},t.prototype.listeners=function(a,e){var t=f?f+a:a,n=this._events[t];if(e)return!!n;if(!n)return[];if(n.fn)return[n.fn];for(var r=0,d=n.length,o=Array(d);r<d;r++)o[r]=n[r].fn;return o},t.prototype.emit=function(a,e,t,n,r,i){var o=f?f+a:a;if(!this._events[o])return!1;var s=this._events[o],c=arguments.length,h,g;if(s.fn){switch(s.once&&this.removeListener(a,s.fn,void 0,!0),c){case 1:return s.fn.call(s.context),!0;case 2:return s.fn.call(s.context,e),!0;case 3:return s.fn.call(s.context,e,t),!0;case 4:return s.fn.call(s.context,e,t,n),!0;case 5:return s.fn.call(s.context,e,t,n,r),!0;case 6:return s.fn.call(s.context,e,t,n,r,i),!0;}for(g=1,h=Array(c-1);g<c;g++)h[g-1]=arguments[g];s.fn.apply(s.context,h)}else{var m=s.length,p;for(g=0;g<m;g++)switch(s[g].once&&this.removeListener(a,s[g].fn,void 0,!0),c){case 1:s[g].fn.call(s[g].context);break;case 2:s[g].fn.call(s[g].context,e);break;case 3:s[g].fn.call(s[g].context,e,t);break;case 4:s[g].fn.call(s[g].context,e,t,n);break;default:if(!h)for(p=1,h=Array(c-1);p<c;p++)h[p-1]=arguments[p];s[g].fn.apply(s[g].context,h);}}return!0},t.prototype.on=function(a,e,t){var n=new l(e,t||this),r=f?f+a:a;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],n]:this._events[r].push(n):(this._events[r]=n,this._eventsCount++),this},t.prototype.once=function(a,e,t){var n=new l(e,t||this,!0),r=f?f+a:a;return this._events[r]?this._events[r].fn?this._events[r]=[this._events[r],n]:this._events[r].push(n):(this._events[r]=n,this._eventsCount++),this},t.prototype.removeListener=function(a,e,t,n){var r=f?f+a:a;if(!this._events[r])return this;if(!e)return 0==--this._eventsCount?this._events=new d:delete this._events[r],this;var i=this._events[r];if(i.fn)i.fn!==e||n&&!i.once||t&&i.context!==t||(0==--this._eventsCount?this._events=new d:delete this._events[r]);else{for(var o=0,s=[],u=i.length;o<u;o++)(i[o].fn!==e||n&&!i[o].once||t&&i[o].context!==t)&&s.push(i[o]);s.length?this._events[r]=1===s.length?s[0]:s:0==--this._eventsCount?this._events=new d:delete this._events[r]}return this},t.prototype.removeAllListeners=function(n){var e;return n?(e=f?f+n:n,this._events[e]&&(0==--this._eventsCount?this._events=new d:delete this._events[e])):(this._events=new d,this._eventsCount=0),this},t.prototype.off=t.prototype.removeListener,t.prototype.addListener=t.prototype.on,t.prototype.setMaxListeners=function(){return this},t.prefixed=f,t.EventEmitter=t,void 0!==e&&(e.exports=t)},{}],4:[function(n,m){!function(t){var _=/iPhone/i,n=/iPod/i,r=/iPad/i,i=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,o=/Android/i,s=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,a=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,l=/Windows Phone/i,u=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,c=/BlackBerry/i,h=/BB10/i,d=/Opera Mini/i,p=/(CriOS|Chrome)(?=.*\bMobile\b)/i,f=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,g=function(n,e){return n.test(e)},x=function(m){var e=m||navigator.userAgent,b=e.split("[FBAN");if(void 0!==b[1]&&(e=b[0]),void 0!==(b=e.split("Twitter"))[1]&&(e=b[0]),this.apple={phone:g(_,e),ipod:g(n,e),tablet:!g(_,e)&&g(r,e),device:g(_,e)||g(n,e)||g(r,e)},this.amazon={phone:g(s,e),tablet:!g(s,e)&&g(a,e),device:g(s,e)||g(a,e)},this.android={phone:g(s,e)||g(i,e),tablet:!g(s,e)&&!g(i,e)&&(g(a,e)||g(o,e)),device:g(s,e)||g(a,e)||g(i,e)||g(o,e)},this.windows={phone:g(l,e),tablet:g(u,e),device:g(l,e)||g(u,e)},this.other={blackberry:g(c,e),blackberry10:g(h,e),opera:g(d,e),firefox:g(f,e),chrome:g(p,e),device:g(c,e)||g(h,e)||g(d,e)||g(f,e)||g(p,e)},this.seven_inch=g(/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,e),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},e=function(){var t=new x;return t.Class=x,t};void 0!==m&&m.exports&&"undefined"==typeof window?m.exports=x:void 0!==m&&m.exports&&"undefined"!=typeof window?m.exports=e():t.isMobile=e()}(this)},{}],5:[function(n,e){var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,i=Object.prototype.propertyIsEnumerable;e.exports=function(){try{if(!Object.assign)return!1;var a=new String("abc");if(a[5]="de","5"===Object.getOwnPropertyNames(a)[0])return!1;for(var i={},e=0;10>e;e++)i["_"+String.fromCharCode(e)]=e;if("0123456789"!==Object.getOwnPropertyNames(i).map(function(t){return i[t]}).join(""))return!1;var t={};return["a","b","c","d","e","f","g","h","i","j","k","l","m","n","o","p","q","r","s","t"].forEach(function(n){t[n]=n}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},t)).join("")}catch(t){return!1}}()?Object.assign:function(o){for(var e=function(t){if(null===t||void 0===t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(t)}(o),a=1,d,p;a<arguments.length;a++){for(var h in d=Object(arguments[a]),d)r.call(d,h)&&(e[h]=d[h]);if(t){p=t(d);for(var u=0;u<p.length;u++)i.call(d,p[u])&&(e[p[u]]=d[p[u]])}}return e}},{}],6:[function(n,e){var a=new ArrayBuffer(0),o=function(r,e,t,n){this.gl=r,this.buffer=r.createBuffer(),this.type=e||r.ARRAY_BUFFER,this.drawType=n||r.STATIC_DRAW,this.data=a,t&&this.upload(t),this._updateID=0};o.prototype.upload=function(a,i,o){o||this.bind();var n=this.gl;a=a||this.data,i=i||0,this.data.byteLength>=a.byteLength?n.bufferSubData(this.type,i,a):n.bufferData(this.type,a,this.drawType),this.data=a},o.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},o.createVertexBuffer=function(a,e,t){return new o(a,a.ARRAY_BUFFER,e,t)},o.createIndexBuffer=function(a,e,t){return new o(a,a.ELEMENT_ARRAY_BUFFER,e,t)},o.create=function(a,e,t,n){return new o(a,e,t,n)},o.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},e.exports=o},{}],7:[function(n,e){var d=n("./GLTexture"),r=function(a,e,t){this.gl=a,this.framebuffer=a.createFramebuffer(),this.stencil=null,this.texture=null,this.width=e||100,this.height=t||100};r.prototype.enableTexture=function(n){var e=this.gl;this.texture=n||new d(e),this.texture.bind(),this.bind(),e.framebufferTexture2D(e.FRAMEBUFFER,e.COLOR_ATTACHMENT0,e.TEXTURE_2D,this.texture.texture,0)},r.prototype.enableStencil=function(){if(!this.stencil){var t=this.gl;this.stencil=t.createRenderbuffer(),t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.framebufferRenderbuffer(t.FRAMEBUFFER,t.DEPTH_STENCIL_ATTACHMENT,t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,this.width,this.height)}},r.prototype.clear=function(a,e,t,n){this.bind();var r=this.gl;r.clearColor(a,e,t,n),r.clear(r.COLOR_BUFFER_BIT|r.DEPTH_BUFFER_BIT)},r.prototype.bind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,this.framebuffer)},r.prototype.unbind=function(){var t=this.gl;t.bindFramebuffer(t.FRAMEBUFFER,null)},r.prototype.resize=function(a,e){var t=this.gl;this.width=a,this.height=e,this.texture&&this.texture.uploadData(null,a,e),this.stencil&&(t.bindRenderbuffer(t.RENDERBUFFER,this.stencil),t.renderbufferStorage(t.RENDERBUFFER,t.DEPTH_STENCIL,a,e))},r.prototype.destroy=function(){var t=this.gl;this.texture&&this.texture.destroy(),t.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},r.createRGBA=function(i,e,t){var n=d.fromData(i,null,e,t);n.enableNearestScaling(),n.enableWrapClamp();var o=new r(i,e,t);return o.enableTexture(n),o.unbind(),o},r.createFloat32=function(i,e,t,n){var o=new d.fromData(i,n,e,t);o.enableNearestScaling(),o.enableWrapClamp();var s=new r(i,e,t);return s.enableTexture(o),s.unbind(),s},e.exports=r},{"./GLTexture":9}],8:[function(n,e){var d=n("./shader/compileProgram"),r=n("./shader/extractAttributes"),i=n("./shader/extractUniforms"),o=n("./shader/setPrecision"),s=n("./shader/generateUniformAccessObject"),t=function(a,e,p,c,l){this.gl=a,c&&(e=o(e,c),p=o(p,c)),this.program=d(a,e,p,l),this.attributes=r(a,this.program),this.uniformData=i(a,this.program),this.uniforms=s(a,this.uniformData)};t.prototype.bind=function(){this.gl.useProgram(this.program)},t.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},e.exports=t},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18,"./shader/setPrecision":22}],9:[function(n,e){var a=function(a,e,t,n,r){this.gl=a,this.texture=a.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=e||-1,this.height=t||-1,this.format=n||a.RGBA,this.type=r||a.UNSIGNED_BYTE};a.prototype.upload=function(a){this.bind();var e=this.gl;e.pixelStorei(e.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var t=a.videoWidth||a.width,n=a.videoHeight||a.height;n!==this.height||t!==this.width?e.texImage2D(e.TEXTURE_2D,0,this.format,this.format,this.type,a):e.texSubImage2D(e.TEXTURE_2D,0,0,0,this.format,this.type,a),this.width=t,this.height=n};var t=!1;a.prototype.uploadData=function(a,e,i){this.bind();var n=this.gl;if(a instanceof Float32Array){if(!t){if(!n.getExtension("OES_texture_float"))throw new Error("floating point textures not available");t=!0}this.type=n.FLOAT}else this.type=this.type||n.UNSIGNED_BYTE;n.pixelStorei(n.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),e!==this.width||i!==this.height?n.texImage2D(n.TEXTURE_2D,0,this.format,e,i,0,this.format,this.type,a||null):n.texSubImage2D(n.TEXTURE_2D,0,0,0,e,i,this.format,this.type,a||null),this.width=e,this.height=i},a.prototype.bind=function(n){var e=this.gl;void 0!==n&&e.activeTexture(e.TEXTURE0+n),e.bindTexture(e.TEXTURE_2D,this.texture)},a.prototype.unbind=function(){var t=this.gl;t.bindTexture(t.TEXTURE_2D,null)},a.prototype.minFilter=function(n){var e=this.gl;this.bind(),this.mipmap?e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n?e.LINEAR_MIPMAP_LINEAR:e.NEAREST_MIPMAP_NEAREST):e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MIN_FILTER,n?e.LINEAR:e.NEAREST)},a.prototype.magFilter=function(n){var e=this.gl;this.bind(),e.texParameteri(e.TEXTURE_2D,e.TEXTURE_MAG_FILTER,n?e.LINEAR:e.NEAREST)},a.prototype.enableMipmap=function(){var t=this.gl;this.bind(),this.mipmap=!0,t.generateMipmap(t.TEXTURE_2D)},a.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},a.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},a.prototype.enableWrapClamp=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.CLAMP_TO_EDGE),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.CLAMP_TO_EDGE)},a.prototype.enableWrapRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.REPEAT)},a.prototype.enableWrapMirrorRepeat=function(){var t=this.gl;this.bind(),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_S,t.MIRRORED_REPEAT),t.texParameteri(t.TEXTURE_2D,t.TEXTURE_WRAP_T,t.MIRRORED_REPEAT)},a.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},a.fromSource=function(r,e,t){var n=new a(r);return n.premultiplyAlpha=t||!1,n.upload(e),n},a.fromData=function(r,e,t,n){var i=new a(r);return i.uploadData(e,t,n),i},e.exports=a},{}],10:[function(n,e){function a(r,e){if(this.nativeVaoExtension=null,a.FORCE_NATIVE||(this.nativeVaoExtension=r.getExtension("OES_vertex_array_object")||r.getExtension("MOZ_OES_vertex_array_object")||r.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=e,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var t=r.getParameter(r.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:Array(t),attribState:Array(t)}}this.gl=r,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var o=n("./setVertexAttribArrays");a.prototype.constructor=a,e.exports=a,a.FORCE_NATIVE=!1,a.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},a.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},a.prototype.activate=function(){for(var a=this.gl,e=null,i=0,s;i<this.attributes.length;i++)s=this.attributes[i],e!==s.buffer&&(s.buffer.bind(),e=s.buffer),a.vertexAttribPointer(s.attribute.location,s.attribute.size,s.type||a.FLOAT,s.normalized||!1,s.stride||0,s.start||0);return o(a,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},a.prototype.addAttribute=function(a,e,t,n,r,i){return this.attributes.push({buffer:a,attribute:e,location:e.location,type:t||this.gl.FLOAT,normalized:n||!1,stride:r||0,start:i||0}),this.dirty=!0,this},a.prototype.addIndex=function(t){return this.indexBuffer=t,this.dirty=!0,this},a.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},a.prototype.draw=function(a,e,t){var n=this.gl;return this.indexBuffer?n.drawElements(a,e||this.indexBuffer.data.length,n.UNSIGNED_SHORT,2*(t||0)):n.drawArrays(a,t,e||this.getSize()),this},a.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},a.prototype.getSize=function(){var t=this.attributes[0];return t.buffer.data.length/(t.stride/4||t.attribute.size)}},{"./setVertexAttribArrays":13}],11:[function(n,e){e.exports=function(a,e){var t=a.getContext("webgl",e)||a.getContext("experimental-webgl",e);if(!t)throw new Error("This browser does not support webGL. Try using the canvas renderer");return t}},{}],12:[function(n,e){var t={createContext:n("./createContext"),setVertexAttribArrays:n("./setVertexAttribArrays"),GLBuffer:n("./GLBuffer"),GLFramebuffer:n("./GLFramebuffer"),GLShader:n("./GLShader"),GLTexture:n("./GLTexture"),VertexArrayObject:n("./VertexArrayObject"),shader:n("./shader")};void 0!==e&&e.exports&&(e.exports=t),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=t)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(n,e){e.exports=function(a,e,t){var n;if(t){var d=t.tempAttribState,i=t.attribState;for(n=0;n<d.length;n++)d[n]=!1;for(n=0;n<e.length;n++)d[e[n].attribute.location]=!0;for(n=0;n<i.length;n++)i[n]!==d[n]&&(i[n]=d[n],t.attribState[n]?a.enableVertexAttribArray(n):a.disableVertexAttribArray(n))}else for(n=0;n<e.length;n++){var o=e[n];a.enableVertexAttribArray(o.attribute.location)}}},{}],14:[function(n,e){var d=function(a,e,t){var n=a.createShader(e);return a.shaderSource(n,t),a.compileShader(n),a.getShaderParameter(n,a.COMPILE_STATUS)?n:(console.log(a.getShaderInfoLog(n)),null)};e.exports=function(r,e,t,n){var i=d(r,r.VERTEX_SHADER,e),o=d(r,r.FRAGMENT_SHADER,t),s=r.createProgram();if(r.attachShader(s,i),r.attachShader(s,o),n)for(var u in n)r.bindAttribLocation(s,n[u],u);return r.linkProgram(s),r.getProgramParameter(s,r.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",r.getProgramParameter(s,r.VALIDATE_STATUS)),console.error("gl.getError()",r.getError()),""!==r.getProgramInfoLog(s)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",r.getProgramInfoLog(s)),r.deleteProgram(s),s=null),r.deleteShader(i),r.deleteShader(o),s}},{}],15:[function(n,e){var a=function(a){for(var e=Array(a),t=0;t<e.length;t++)e[t]=!1;return e};e.exports=function(n,e){return"float"===n?0:"vec2"===n?new Float32Array(2*e):"vec3"===n?new Float32Array(3*e):"vec4"===n?new Float32Array(4*e):"int"===n||"sampler2D"===n?0:"ivec2"===n?new Int32Array(2*e):"ivec3"===n?new Int32Array(3*e):"ivec4"===n?new Int32Array(4*e):"bool"!=n&&("bvec2"===n?a(2*e):"bvec3"===n?a(3*e):"bvec4"===n?a(4*e):"mat2"===n?new Float32Array([1,0,0,1]):"mat3"===n?new Float32Array([1,0,0,0,1,0,0,0,1]):"mat4"===n?new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):void 0)}},{}],16:[function(n,e){var s=n("./mapType"),r=n("./mapSize"),i=function(a,e,t,n){gl.vertexAttribPointer(this.location,this.size,a||gl.FLOAT,e||!1,t||0,n||0)};e.exports=function(o,e){for(var t={},n=o.getProgramParameter(e,o.ACTIVE_ATTRIBUTES),d=0;d<n;d++){var p=o.getActiveAttrib(e,d),l=s(o,p.type);t[p.name]={type:l,size:r(l),location:o.getAttribLocation(e,p.name),pointer:i}}return t}},{"./mapSize":20,"./mapType":21}],17:[function(n,e){var o=n("./mapType"),r=n("./defaultValue");e.exports=function(i,e){for(var t={},n=i.getProgramParameter(e,i.ACTIVE_UNIFORMS),d=0;d<n;d++){var p=i.getActiveUniform(e,d),a=p.name.replace(/\[.*?\]/,""),l=o(i,p.type);t[a]={type:l,size:p.size,location:i.getUniformLocation(e,a),value:r(l,p.size)}}return t}},{"./defaultValue":15,"./mapType":21}],18:[function(n,e){var p=function(n){var e="return this.data.%%.value;".replace("%%",n);return new Function(e)},r=function(i,e){var t="this.data.%%.value = value;\nvar location = this.data.%%.location;".replace(/%%/g,i),s;return(s=1===e.size?a[e.type]:o[e.type])&&(t+="\nthis.gl."+s+";"),new Function("value",t)},i=function(a,e){for(var t=e,o=0,s;o<a.length-1;o++)s=t[a[o]]||{data:{}},t[a[o]]=s,t=s;return t},a={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},o={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};e.exports=function(o,e){for(var t={data:{},gl:o},n=Object.keys(e),s=0;s<n.length;s++){var f=n[s],l=f.split("."),u=l[l.length-1],c=i(l,t),h=e[f];c.data[u]=h,c.gl=o,Object.defineProperty(c,u,{get:p(u),set:r(u,h)})}return t}},{}],19:[function(n,e){e.exports={compileProgram:n("./compileProgram"),defaultValue:n("./defaultValue"),extractAttributes:n("./extractAttributes"),extractUniforms:n("./extractUniforms"),generateUniformAccessObject:n("./generateUniformAccessObject"),setPrecision:n("./setPrecision"),mapSize:n("./mapSize"),mapType:n("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21,"./setPrecision":22}],20:[function(n,e){var t={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};e.exports=function(n){return t[n]}},{}],21:[function(n,e){var a=null,t={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};e.exports=function(r,e){if(!a){var i=Object.keys(t);a={};for(var n=0,d;n<i.length;++n)d=i[n],a[r[d]]=t[d]}return a[e]}},{}],22:[function(n,e){e.exports=function(n,e){return"precision"===n.substring(0,9)?n:"precision "+e+" float;\n"+n}},{}],23:[function(a,e,d){(function(a){function l(a,e){for(var t=0,o=a.length-1,s;0<=o;o--)s=a[o],"."===s?a.splice(o,1):".."===s?(a.splice(o,1),t++):t&&(a.splice(o,1),t--);if(e)for(;t--;t)a.unshift("..");return a}function t(a,e){if(a.filter)return a.filter(e);for(var t=[],n=0;n<a.length;n++)e(a[n],n,a)&&t.push(a[n]);return t}var i=function(t){return /^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/.exec(t).slice(1)};d.resolve=function(){for(var e="",r=!1,d=arguments.length-1,u;-1<=d&&!r;d--){if(u=0<=d?arguments[d]:a.cwd(),"string"!=typeof u)throw new TypeError("Arguments to path.resolve must be strings");u&&(e=u+"/"+e,r="/"===u.charAt(0))}return e=l(t(e.split("/"),function(t){return!!t}),!r).join("/"),(r?"/":"")+e||"."},d.normalize=function(a){var r=d.isAbsolute(a),i="/"===n(a,-1);return(a=l(t(a.split("/"),function(t){return!!t}),!r).join("/"))||r||(a="."),a&&i&&(a+="/"),(r?"/":"")+a},d.isAbsolute=function(t){return"/"===t.charAt(0)},d.join=function(){var n=Array.prototype.slice.call(arguments,0);return d.normalize(t(n,function(t){if("string"!=typeof t)throw new TypeError("Arguments to path.join must be strings");return t}).join("/"))},d.relative=function(n,p){function c(a){for(var e=0;e<a.length&&""===a[e];e++);for(var r=a.length-1;0<=r&&""===a[r];r--);return e>r?[]:a.slice(e,r-e+1)}n=d.resolve(n).substr(1),p=d.resolve(p).substr(1);for(var r=c(n.split("/")),i=c(p.split("/")),o=Math.min(r.length,i.length),s=o,h=0;h<o;h++)if(r[h]!==i[h]){s=h;break}var f=[];for(h=s;h<r.length;h++)f.push("..");return(f=f.concat(i.slice(s))).join("/")},d.sep="/",d.delimiter=":",d.dirname=function(a){var e=i(a),t=e[0],n=e[1];return t||n?(n&&(n=n.substr(0,n.length-1)),t+n):"."},d.basename=function(a,e){var t=i(a)[2];return e&&t.substr(-1*e.length)===e&&(t=t.substr(0,t.length-e.length)),t},d.extname=function(t){return i(t)[3]};var n=function(a,e,t){return a.substr(e,t)}}).call(this,a("_process"))},{_process:24}],24:[function(n,e){function t(){throw new Error("setTimeout has not been defined")}function r(){throw new Error("clearTimeout has not been defined")}function i(n){if(d===setTimeout)return setTimeout(n,0);if((d===t||!d)&&setTimeout)return d=setTimeout,setTimeout(n,0);try{return d(n,0)}catch(e){try{return d.call(null,n,0)}catch(e){return d.call(this,n,0)}}}function o(){b&&v&&(b=!1,v.length?_=v.concat(_):x=-1,_.length&&s())}function s(){if(!b){var n=i(o);b=!0;for(var e=_.length;e;){for(v=_,_=[];++x<e;)v&&v[x].run();x=-1,e=_.length}v=null,b=!1,function(n){if(y===clearTimeout)return clearTimeout(n);if((y===r||!y)&&clearTimeout)return y=clearTimeout,clearTimeout(n);try{y(n)}catch(e){try{return y.call(null,n)}catch(e){return y.call(this,n)}}}(n)}}function a(n,e){this.fun=n,this.array=e}function l(){}var u=e.exports={},d,y;!function(){try{d="function"==typeof setTimeout?setTimeout:t}catch(n){d=t}try{y="function"==typeof clearTimeout?clearTimeout:r}catch(t){y=r}}();var _=[],b=!1,x=-1,v;u.nextTick=function(r){var e=Array(arguments.length-1);if(1<arguments.length)for(var t=1;t<arguments.length;t++)e[t-1]=arguments[t];_.push(new a(r,e)),1!==_.length||b||i(s)},a.prototype.run=function(){this.fun.apply(null,this.array)},u.title="browser",u.browser=!0,u.env={},u.argv=[],u.version="",u.versions={},u.on=l,u.addListener=l,u.once=l,u.off=l,u.removeListener=l,u.removeAllListeners=l,u.emit=l,u.prependListener=l,u.prependOnceListener=l,u.listeners=function(){return[]},u.binding=function(){throw new Error("process.binding is not supported")},u.cwd=function(){return"/"},u.chdir=function(){throw new Error("process.chdir is not supported")},u.umask=function(){return 0}},{}],25:[function(a,M,t){(function(n){!function(e){function A(t){throw new RangeError(E[t])}function i(a,e){for(var t=a.length,i=[];t--;)i[t]=e(a[t]);return i}function o(a,o){var t=a.split("@"),n="";return 1<t.length&&(n=t[0]+"@",a=t[1]),n+i((a=a.replace(T,".")).split("."),o).join(".")}function s(a){for(var e=[],r=0,s=a.length,o,d;r<s;)55296<=(o=a.charCodeAt(r++))&&56319>=o&&r<s?56320==(64512&(d=a.charCodeAt(r++)))?e.push(((1023&o)<<10)+(1023&d)+65536):(e.push(o),r--):e.push(o);return e}function L(t){return i(t,function(n){var a="";return 65535<n&&(a+=R(55296|1023&(n-=65536)>>>10),n=56320|1023&n),a+=R(n)}).join("")}function l(t){return 10>t-48?t-22:26>t-65?t-65:26>t-97?t-97:g}function a(n,e){return n+22+75*(26>n)-((0!=e)<<5)}function u(a,i,t){var n=0;for(a=t?P(a/x):a>>1,a+=P(a/i);a>C*b>>1;n+=g)a=P(a/C);return P(n+(C+1)*a/(a+m))}function c(i){var e=[],h=i.length,m=0,x=S,E=w,C,M,R,D,O,k,F,B,U,Y;for(0>(M=i.lastIndexOf(I))&&(M=0),R=0;R<M;++R)128<=i.charCodeAt(R)&&A("not-basic"),e.push(i.charCodeAt(R));for(D=0<M?M+1:0;D<h;){for(O=m,k=1,F=g;D>=h&&A("invalid-input"),((B=l(i.charCodeAt(D++)))>=g||B>P((N-m)/k))&&A("overflow"),m+=B*k,U=F<=E?_:F>=E+b?b:F-E,!(B<U);F+=g)k>P(N/(Y=g-U))&&A("overflow"),k*=Y;E=u(m-O,C=e.length+1,0==O),P(m/C)>N-x&&A("overflow"),x+=P(m/C),m%=C,e.splice(m++,0,x)}return L(e)}function d(i){var c=[],h,x,E,C,M,D,L,O,k,F,B,U,Y,G,j;for(U=(i=s(i)).length,h=S,x=0,M=w,D=0;D<U;++D)128>(B=i[D])&&c.push(R(B));for(E=C=c.length,C&&c.push(I);E<U;){for(L=N,D=0;D<U;++D)(B=i[D])>=h&&B<L&&(L=B);for(L-h>P((N-x)/(Y=E+1))&&A("overflow"),x+=(L-h)*Y,h=L,D=0;D<U;++D)if((B=i[D])<h&&++x>N&&A("overflow"),B==h){for(O=x,k=g;F=k<=M?_:k>=M+b?b:k-M,!(O<F);k+=g)j=O-F,G=g-F,c.push(R(a(F+j%G,0))),O=P(j/G);c.push(R(a(O,0))),M=u(x,Y,E==C),x=0,++E}++x,++h}return c.join("")}var p="object"==typeof t&&t&&!t.nodeType&&t,h="object"==typeof M&&M&&!M.nodeType&&M,f="object"==typeof n&&n;f.global!==f&&f.window!==f&&f.self!==f||(e=f);var N=2147483647,g=36,_=1,b=26,m=38,x=700,w=72,S=128,I="-",T=/[\x2E\u3002\uFF0E\uFF61]/g,E={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},C=35,P=Math.floor,R=String.fromCharCode,D,O;if(!(D={version:"1.4.1",ucs2:{decode:s,encode:L},decode:c,encode:d,toASCII:function(t){return o(t,function(t){return /[^\x20-\x7E]/.test(t)?"xn--"+d(t):t})},toUnicode:function(t){return o(t,function(t){return /^xn--/.test(t)?c(t.slice(4).toLowerCase()):t})}},p&&h))e.punycode=D;else if(M.exports==p)h.exports=D;else for(O in D)D.hasOwnProperty(O)&&(p[O]=D[O])}(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],26:[function(n,e){function t(n,e){return Object.prototype.hasOwnProperty.call(n,e)}e.exports=function(r,i,y,_){i=i||"&",y=y||"=";var o={};if("string"!=typeof r||0===r.length)return o;r=r.split(i);var s=1e3;_&&"number"==typeof _.maxKeys&&(s=_.maxKeys);var b=r.length;0<s&&b>s&&(b=s);for(var x=0;x<b;++x){var v=r[x].replace(/\+/g,"%20"),g=v.indexOf(y),m,T,E,S;0<=g?(m=v.substr(0,g),T=v.substr(g+1)):(m=v,T=""),E=decodeURIComponent(m),S=decodeURIComponent(T),t(o,E)?a(o[E])?o[E].push(S):o[E]=[o[E],S]:o[E]=S}return o};var a=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)}},{}],27:[function(n,e){function d(a,e){if(a.map)return a.map(e);for(var t=[],n=0;n<a.length;n++)t.push(e(a[n],n));return t}var r=function(t){switch(typeof t){case"string":return t;case"boolean":return t?"true":"false";case"number":return isFinite(t)?t:"";default:return"";}};e.exports=function(l,u,p,s){return u=u||"&",p=p||"=",null===l&&(l=void 0),"object"==typeof l?d(o(l),function(e){var t=encodeURIComponent(r(e))+p;return i(l[e])?d(l[e],function(n){return t+encodeURIComponent(r(n))}).join(u):t+encodeURIComponent(r(l[e]))}).join(u):s?encodeURIComponent(r(s))+p+encodeURIComponent(r(l)):""};var i=Array.isArray||function(t){return"[object Array]"===Object.prototype.toString.call(t)},o=Object.keys||function(a){var e=[];for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&e.push(t);return e}},{}],28:[function(a,e,t){t.decode=t.parse=a("./decode"),t.encode=t.stringify=a("./encode")},{"./decode":26,"./encode":27}],29:[function(a,e,t){function l(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function n(a,e,t){if(a&&z.isObject(a)&&a instanceof l)return a;var n=new l;return n.parse(a,e,t),n}var r=a("punycode"),z=a("./util");t.parse=n,t.resolve=function(a,e){return n(a,!1,!0).resolve(e)},t.resolveObject=function(a,e){return a?n(a,!1,!0).resolveObject(e):e},t.format=function(t){return z.isString(t)&&(t=n(t)),t instanceof l?t.format():l.prototype.format.call(t)},t.Url=l;var i=["{","}","|","\\","^","`"].concat(["<",">","\"","`"," ","\r","\n","\t"]),o=["'"].concat(i),s=["%","/","?",";","#"].concat(o),d=["/","?","#"],u=/^[+a-z0-9A-Z_-]{0,63}$/,p={javascript:!0,"javascript:":!0},V={javascript:!0,"javascript:":!0},v={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},h=a("querystring");l.prototype.parse=function(a,f,t){if(!z.isString(a))throw new TypeError("Parameter 'url' must be a string, not "+typeof a);var n=a.indexOf("?"),g=-1!==n&&n<a.indexOf("#")?"?":"#",i=a.split(g);i[0]=i[0].replace(/\\/g,"/");var l=a=i.join(g);if(l=l.trim(),!t&&1===a.split("#").length){var m=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/.exec(l);if(m)return this.path=l,this.href=l,this.pathname=m[1],m[2]?(this.search=m[2],this.query=f?h.parse(this.search.substr(1)):this.search.substr(1)):f&&(this.search="",this.query={}),this}var y=/^([a-z0-9.+-]+:)/i.exec(l);if(y){var _=(y=y[0]).toLowerCase();this.protocol=_,l=l.substr(y.length)}if(t||y||l.match(/^\/\/[^@\/]+@[^@\/]+/)){var b="//"===l.substr(0,2);!b||y&&V[y]||(l=l.substr(2),this.slashes=!0)}if(!V[y]&&(b||y&&!v[y])){for(var T=-1,w=0;w<d.length;w++)-1!==(Z=l.indexOf(d[w]))&&(-1===T||Z<T)&&(T=Z);var q,K;for(-1!==(K=-1===T?l.lastIndexOf("@"):l.lastIndexOf("@",T))&&(q=l.slice(0,K),l=l.slice(K+1),this.auth=decodeURIComponent(q)),T=-1,w=0;w<s.length;w++){var Z;-1!==(Z=l.indexOf(s[w]))&&(-1===T||Z<T)&&(T=Z)}-1===T&&(T=l.length),this.host=l.slice(0,T),l=l.slice(T),this.parseHost(),this.hostname=this.hostname||"";var Q="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Q)for(var A=this.hostname.split(/\./),O=(w=0,A.length),J;w<O;w++)if(J=A[w],J&&!J.match(u)){for(var ee="",te=0,ne=J.length;te<ne;te++)ee+=127<J.charCodeAt(te)?"x":J[te];if(!ee.match(u)){var L=A.slice(0,w),N=A.slice(w+1),U=J.match(/^([+a-z0-9A-Z_-]{0,63})(.*)$/);U&&(L.push(U[1]),N.unshift(U[2])),N.length&&(l="/"+N.join(".")+l),this.hostname=L.join(".");break}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),Q||(this.hostname=r.toASCII(this.hostname));var F=this.port?":"+this.port:"",ae=this.hostname||"";this.host=ae+F,this.href+=this.host,Q&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==l[0]&&(l="/"+l))}if(!p[_])for(w=0,O=o.length;w<O;w++){var j=o[w];if(-1!==l.indexOf(j)){var G=encodeURIComponent(j);G===j&&(G=escape(j)),l=l.split(j).join(G)}}var re=l.indexOf("#");-1!==re&&(this.hash=l.substr(re),l=l.slice(0,re));var H=l.indexOf("?");if(-1===H?f&&(this.search="",this.query={}):(this.search=l.substr(H),this.query=l.substr(H+1),f&&(this.query=h.parse(this.query)),l=l.slice(0,H)),l&&(this.pathname=l),v[_]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){F=this.pathname||"";var Y=this.search||"";this.path=F+Y}return this.href=this.format(),this},l.prototype.format=function(){var s=this.auth||"";s&&(s=(s=encodeURIComponent(s)).replace(/%3A/i,":"),s+="@");var d=this.protocol||"",l=this.pathname||"",u=this.hash||"",p=!1,c="";this.host?p=s+this.host:this.hostname&&(p=s+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(p+=":"+this.port)),this.query&&z.isObject(this.query)&&Object.keys(this.query).length&&(c=h.stringify(this.query));var f=this.search||c&&"?"+c||"";return d&&":"!==d.substr(-1)&&(d+=":"),this.slashes||(!d||v[d])&&!1!==p?(p="//"+(p||""),l&&"/"!==l.charAt(0)&&(l="/"+l)):p||(p=""),u&&"#"!==u.charAt(0)&&(u="#"+u),f&&"?"!==f.charAt(0)&&(f="?"+f),l=l.replace(/[?#]/g,function(t){return encodeURIComponent(t)}),f=f.replace("#","%23"),d+p+l+f+u},l.prototype.resolve=function(t){return this.resolveObject(n(t,!1,!0)).format()},l.prototype.resolveObject=function(r){if(z.isString(r)){var s=new l;s.parse(r,!1,!0),r=s}for(var t=new l,n=Object.keys(this),i=0,y;i<n.length;i++)y=n[i],t[y]=this[y];if(t.hash=r.hash,""===r.href)return t.href=t.format(),t;if(r.slashes&&!r.protocol){for(var C=Object.keys(r),R=0,D;R<C.length;R++)D=C[R],"protocol"!==D&&(t[D]=r[D]);return v[t.protocol]&&t.hostname&&!t.pathname&&(t.path=t.pathname="/"),t.href=t.format(),t}if(r.protocol&&r.protocol!==t.protocol){if(!v[r.protocol]){for(var L=Object.keys(r),h=0,k;h<L.length;h++)k=L[h],t[k]=r[k];return t.href=t.format(),t}if(t.protocol=r.protocol,r.host||V[r.protocol])t.pathname=r.pathname;else{for(var N=(r.pathname||"").split("/");N.length&&!(r.host=N.shift()););r.host||(r.host=""),r.hostname||(r.hostname=""),""!==N[0]&&N.unshift(""),2>N.length&&N.unshift(""),t.pathname=N.join("/")}if(t.search=r.search,t.query=r.query,t.host=r.host||"",t.auth=r.auth,t.hostname=r.hostname||r.host,t.port=r.port,t.pathname||t.search){var F=t.pathname||"",g=t.search||"";t.path=F+g}return t.slashes=t.slashes||r.slashes,t.href=t.format(),t}var m=t.pathname&&"/"===t.pathname.charAt(0),b=r.host||r.pathname&&"/"===r.pathname.charAt(0),_=b||m||t.host&&r.pathname,B=_,w=t.pathname&&t.pathname.split("/")||[],U=(N=r.pathname&&r.pathname.split("/")||[],t.protocol&&!v[t.protocol]);if(U&&(t.hostname="",t.port=null,t.host&&(""===w[0]?w[0]=t.host:w.unshift(t.host)),t.host="",r.protocol&&(r.hostname=null,r.port=null,r.host&&(""===N[0]?N[0]=r.host:N.unshift(r.host)),r.host=null),_=_&&(""===N[0]||""===w[0])),b)t.host=r.host||""===r.host?r.host:t.host,t.hostname=r.hostname||""===r.hostname?r.hostname:t.hostname,t.search=r.search,t.query=r.query,w=N;else if(N.length)w||(w=[]),w.pop(),w=w.concat(N),t.search=r.search,t.query=r.query;else if(!z.isNullOrUndefined(r.search))return U&&(t.hostname=t.host=w.shift(),(A=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=A.shift(),t.host=t.hostname=A.shift())),t.search=r.search,t.query=r.query,z.isNull(t.pathname)&&z.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.href=t.format(),t;if(!w.length)return t.pathname=null,t.path=t.search?"/"+t.search:null,t.href=t.format(),t;for(var E=w.slice(-1)[0],Y=(t.host||r.host||1<w.length)&&("."===E||".."===E)||""===E,I=0,G=w.length;0<=G;G--)"."===(E=w[G])?w.splice(G,1):".."===E?(w.splice(G,1),I++):I&&(w.splice(G,1),I--);if(!_&&!B)for(;I--;I)w.unshift("..");!_||""===w[0]||w[0]&&"/"===w[0].charAt(0)||w.unshift(""),Y&&"/"!==w.join("/").substr(-1)&&w.push("");var j=""===w[0]||w[0]&&"/"===w[0].charAt(0);if(U){t.hostname=t.host=j?"":w.length?w.shift():"";var A;(A=!!(t.host&&0<t.host.indexOf("@"))&&t.host.split("@"))&&(t.auth=A.shift(),t.host=t.hostname=A.shift())}return(_=_||t.host&&w.length)&&!j&&w.unshift(""),w.length?t.pathname=w.join("/"):(t.pathname=null,t.path=null),z.isNull(t.pathname)&&z.isNull(t.search)||(t.path=(t.pathname?t.pathname:"")+(t.search?t.search:"")),t.auth=r.auth||t.auth,t.slashes=t.slashes||r.slashes,t.href=t.format(),t},l.prototype.parseHost=function(){var n=this.host,a=/:[0-9]*$/.exec(n);a&&(":"!==(a=a[0])&&(this.port=a.substr(1)),n=n.substr(0,n.length-a.length)),n&&(this.hostname=n)}},{"./util":30,punycode:25,querystring:28}],30:[function(n,e){e.exports={isString:function(t){return"string"==typeof t},isObject:function(t){return"object"==typeof t&&null!==t},isNull:function(t){return null===t},isNullOrUndefined:function(t){return null==t}}},{}],31:[function(n,e){e.exports=function(a,e,t){var s=a.length,i;if(!(e>=s||0===t)){var d=s-(t=e+t>s?s-e:t);for(i=e;i<d;++i)a[i]=a[i+t];a.length=d}}},{}],32:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var p="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},i=n(d("mini-signals")),o=n(d("parse-uri")),s=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("./async")),f=n(d("./Resource")),a=function(){function a(){var o=this,e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.baseUrl=e,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(t,e){return o._loadResource(t,e)},this._queue=s.queue(this._boundLoadResource,t),this._queue.pause(),this.resources={},this.onProgress=new i.default,this.onError=new i.default,this.onLoad=new i.default,this.onStart=new i.default,this.onComplete=new i.default}return a.prototype.add=function(i,d,l,g){if(Array.isArray(i)){for(var m=0;m<i.length;++m)this.add(i[m]);return this}if("object"===(void 0===i?"undefined":p(i))&&(g=d||i.callback||i.onComplete,l=i,d=i.url,i=i.name||i.key||i.url),"string"!=typeof d&&(g=l,l=d,d=i),"string"!=typeof d)throw new Error("No url passed to add resource to loader.");if("function"==typeof l&&(g=l,l=null),this.loading&&(!l||!l.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[i])throw new Error("Resource named \""+i+"\" already exists.");if(d=this._prepareUrl(d),this.resources[i]=new f.default(i,d,l),"function"==typeof g&&this.resources[i].onAfterMiddleware.once(g),this.loading){for(var y=l.parentResource,s=[],a=0;a<y.children.length;++a)y.children[a].isComplete||s.push(y.children[a]);var _=y.progressChunk*(s.length+1)/(s.length+2);y.children.push(this.resources[i]),y.progressChunk=_;for(var c=0;c<s.length;++c)s[c].progressChunk=_;this.resources[i].progressChunk=_}return this._queue.push(this.resources[i]),this},a.prototype.pre=function(t){return this._beforeMiddleware.push(t),this},a.prototype.use=function(t){return this._afterMiddleware.push(t),this},a.prototype.reset=function(){for(var n in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var e=this.resources[n];e._onLoadBinding&&e._onLoadBinding.detach(),e.isLoading&&e.abort()}return this.resources={},this},a.prototype.load=function(a){if("function"==typeof a&&this.onComplete.once(a),this.loading)return this;for(var e=100/this._queue._tasks.length,t=0;t<this._queue._tasks.length;++t)this._queue._tasks[t].data.progressChunk=e;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},a.prototype._prepareUrl=function(a){var e=(0,o.default)(a,{strictMode:!0}),t;if(t=e.protocol||!e.path||0===a.indexOf("//")?a:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==a.charAt(0)?this.baseUrl+"/"+a:this.baseUrl+a,this.defaultQueryString){var i=/(#[\w-]+)?$/.exec(t)[0];t+=-1===(t=t.substr(0,t.length-i.length)).indexOf("?")?"?"+this.defaultQueryString:"&"+this.defaultQueryString,t+=i}return t},a.prototype._loadResource=function(a,e){var i=this;a._dequeue=e,s.eachSeries(this._beforeMiddleware,function(e,t){e.call(i,a,function(){t(a.isComplete?{}:null)})},function(){a.isComplete?i._onLoad(a):(a._onLoadBinding=a.onComplete.once(i._onLoad,i),a.load())},!0)},a.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},a.prototype._onLoad=function(a){var e=this;a._onLoadBinding=null,this._resourcesParsing.push(a),a._dequeue(),s.eachSeries(this._afterMiddleware,function(t,n){t.call(e,a,n)},function(){a.onAfterMiddleware.dispatch(a),e.progress+=a.progressChunk,e.onProgress.dispatch(e,a),a.error?e.onError.dispatch(a.error,e,a):e.onLoad.dispatch(e,a),e._resourcesParsing.splice(e._resourcesParsing.indexOf(a),1),e._queue.idle()&&0===e._resourcesParsing.length&&(e.progress=100,e._onComplete())},!0)},a}();t.default=a},{"./Resource":33,"./async":34,"mini-signals":38,"parse-uri":39}],33:[function(p,e,t){function n(t){return t&&t.__esModule?t:{default:t}}function f(){}function r(a,e,r){e&&0===e.indexOf(".")&&(e=e.substring(1)),e&&(a[e]=r)}function i(t){return t.toString().replace("object ","")}t.__esModule=!0;var o=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),a=n(p("parse-uri")),s=n(p("mini-signals")),l=window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest),u=null,c=function(){function d(e,t,n){if(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),"string"!=typeof e||"string"!=typeof t)throw new Error("Both name and url are required for constructing a resource.");n=n||{},this._flags=0,this._setFlag(d.STATUS_FLAGS.DATA_URL,0===t.indexOf("data:")),this.name=e,this.url=t,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===n.crossOrigin?"anonymous":n.crossOrigin,this.loadType=n.loadType||this._determineLoadType(),this.xhrType=n.xhrType,this.metadata=n.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=d.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=f,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new s.default,this.onProgress=new s.default,this.onComplete=new s.default,this.onAfterMiddleware=new s.default}return d.setExtensionLoadType=function(e,t){r(d._loadTypeMap,e,t)},d.setExtensionXhrType=function(e,t){r(d._xhrTypeMap,e,t)},d.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(d.STATUS_FLAGS.COMPLETE,!0),this._setFlag(d.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},d.prototype.abort=function(e){if(!this.error){if(this.error=new Error(e),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=d.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},d.prototype.load=function(e){var t=this;if(!this.isLoading)if(this.isComplete)e&&setTimeout(function(){return e(t)},1);else switch(e&&this.onComplete.once(e),this._setFlag(d.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case d.LOAD_TYPE.IMAGE:this.type=d.TYPE.IMAGE,this._loadElement("image");break;case d.LOAD_TYPE.AUDIO:this.type=d.TYPE.AUDIO,this._loadSourceElement("audio");break;case d.LOAD_TYPE.VIDEO:this.type=d.TYPE.VIDEO,this._loadSourceElement("video");break;case d.LOAD_TYPE.XHR:default:l&&this.crossOrigin?this._loadXdr():this._loadXhr();}},d.prototype._hasFlag=function(t){return!!(this._flags&t)},d.prototype._setFlag=function(n,e){this._flags=e?this._flags|n:this._flags&~n},d.prototype._loadElement=function(t){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===t&&void 0!==window.Image?new Image:document.createElement(t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},d.prototype._loadSourceElement=function(a){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===a&&void 0!==window.Audio?new Audio:document.createElement(a),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var e=this.metadata.mimeType,t=0;t<this.url.length;++t)this.data.appendChild(this._createSource(a,this.url[t],Array.isArray(e)?e[t]:e));else{var i=this.metadata.mimeType;this.data.appendChild(this._createSource(a,this.url,Array.isArray(i)?i[0]:i))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+a)},d.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var e=this.xhr=new XMLHttpRequest;e.open("GET",this.url,!0),e.responseType=this.xhrType===d.XHR_RESPONSE_TYPE.JSON||this.xhrType===d.XHR_RESPONSE_TYPE.DOCUMENT?d.XHR_RESPONSE_TYPE.TEXT:this.xhrType,e.addEventListener("error",this._boundXhrOnError,!1),e.addEventListener("abort",this._boundXhrOnAbort,!1),e.addEventListener("progress",this._boundOnProgress,!1),e.addEventListener("load",this._boundXhrOnLoad,!1),e.send()},d.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var t=this.xhr=new XDomainRequest;t.timeout=5e3,t.onerror=this._boundXhrOnError,t.ontimeout=this._boundXdrOnTimeout,t.onprogress=this._boundOnProgress,t.onload=this._boundXhrOnLoad,t.open("GET",this.url,!0),setTimeout(function(){return t.send()},1)},d.prototype._createSource=function(a,e,t){t||(t=a+"/"+this._getExtension(e));var i=document.createElement("source");return i.src=e,i.type=t,i},d.prototype._onError=function(t){this.abort("Failed to load element using: "+t.target.nodeName)},d.prototype._onProgress=function(t){t&&t.lengthComputable&&this.onProgress.dispatch(this,t.loaded/t.total)},d.prototype._xhrOnError=function(){var t=this.xhr;this.abort(i(t)+" Request failed. Status: "+t.status+", text: \""+t.statusText+"\"")},d.prototype._xhrOnAbort=function(){this.abort(i(this.xhr)+" Request was aborted by the user.")},d.prototype._xdrOnTimeout=function(){this.abort(i(this.xhr)+" Request timed out.")},d.prototype._xhrOnLoad=function(){var e=this.xhr,t="",a=void 0===e.status?200:e.status;if(""!==e.responseType&&"text"!==e.responseType&&void 0!==e.responseType||(t=e.responseText),0===a&&0<t.length?a=200:1223==a&&(a=204),2==(0|a/100)){if(this.xhrType===d.XHR_RESPONSE_TYPE.TEXT)this.data=t,this.type=d.TYPE.TEXT;else if(this.xhrType===d.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(t),this.type=d.TYPE.JSON}catch(t){return void this.abort("Error trying to parse loaded json: "+t)}else if(this.xhrType===d.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var s=new DOMParser;this.data=s.parseFromString(t,"text/xml")}else{var i=document.createElement("div");i.innerHTML=t,this.data=i}this.type=d.TYPE.XML}catch(t){return void this.abort("Error trying to parse loaded xml: "+t)}else this.data=e.response||t;this.complete()}else this.abort("["+e.status+"] "+e.statusText+": "+e.responseURL)},d.prototype._determineCrossOrigin=function(i,o){if(0===i.indexOf("data:"))return"";o=o||window.location,u||(u=document.createElement("a")),u.href=i;var s=!(i=(0,a.default)(u.href,{strictMode:!0})).port&&""===o.port||i.port===o.port,n=i.protocol?i.protocol+":":"";return i.host===o.hostname&&s&&n===o.protocol?"":"anonymous"},d.prototype._determineXhrType=function(){return d._xhrTypeMap[this.extension]||d.XHR_RESPONSE_TYPE.TEXT},d.prototype._determineLoadType=function(){return d._loadTypeMap[this.extension]||d.LOAD_TYPE.XHR},d.prototype._getExtension=function(){var a=this.url,s="";if(this.isDataUrl){var d=a.indexOf("/");s=a.substring(d+1,a.indexOf(";",d))}else{var n=a.indexOf("?"),r=a.indexOf("#"),i=Math.min(-1<n?n:a.length,-1<r?r:a.length);s=(a=a.substring(0,i)).substring(a.lastIndexOf(".")+1)}return s.toLowerCase()},d.prototype._getMimeFromXhrType=function(e){switch(e){case d.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case d.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case d.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case d.XHR_RESPONSE_TYPE.JSON:return"application/json";case d.XHR_RESPONSE_TYPE.DEFAULT:case d.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain";}},o(d,[{key:"isDataUrl",get:function(){return this._hasFlag(d.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(d.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(d.STATUS_FLAGS.LOADING)}}]),d}();t.default=c,c.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},c.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},c.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},c.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},c._loadTypeMap={gif:c.LOAD_TYPE.IMAGE,png:c.LOAD_TYPE.IMAGE,bmp:c.LOAD_TYPE.IMAGE,jpg:c.LOAD_TYPE.IMAGE,jpeg:c.LOAD_TYPE.IMAGE,tif:c.LOAD_TYPE.IMAGE,tiff:c.LOAD_TYPE.IMAGE,webp:c.LOAD_TYPE.IMAGE,tga:c.LOAD_TYPE.IMAGE,svg:c.LOAD_TYPE.IMAGE,"svg+xml":c.LOAD_TYPE.IMAGE,mp3:c.LOAD_TYPE.AUDIO,ogg:c.LOAD_TYPE.AUDIO,wav:c.LOAD_TYPE.AUDIO,mp4:c.LOAD_TYPE.VIDEO,webm:c.LOAD_TYPE.VIDEO},c._xhrTypeMap={xhtml:c.XHR_RESPONSE_TYPE.DOCUMENT,html:c.XHR_RESPONSE_TYPE.DOCUMENT,htm:c.XHR_RESPONSE_TYPE.DOCUMENT,xml:c.XHR_RESPONSE_TYPE.DOCUMENT,tmx:c.XHR_RESPONSE_TYPE.DOCUMENT,svg:c.XHR_RESPONSE_TYPE.DOCUMENT,tsx:c.XHR_RESPONSE_TYPE.DOCUMENT,gif:c.XHR_RESPONSE_TYPE.BLOB,png:c.XHR_RESPONSE_TYPE.BLOB,bmp:c.XHR_RESPONSE_TYPE.BLOB,jpg:c.XHR_RESPONSE_TYPE.BLOB,jpeg:c.XHR_RESPONSE_TYPE.BLOB,tif:c.XHR_RESPONSE_TYPE.BLOB,tiff:c.XHR_RESPONSE_TYPE.BLOB,webp:c.XHR_RESPONSE_TYPE.BLOB,tga:c.XHR_RESPONSE_TYPE.BLOB,json:c.XHR_RESPONSE_TYPE.JSON,text:c.XHR_RESPONSE_TYPE.TEXT,txt:c.XHR_RESPONSE_TYPE.TEXT,ttf:c.XHR_RESPONSE_TYPE.BUFFER,otf:c.XHR_RESPONSE_TYPE.BUFFER},c.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":38,"parse-uri":39}],34:[function(a,e,t){function d(){}function n(n){return function(){if(null===n)throw new Error("Callback was already called.");var e=n;n=null,e.apply(this,arguments)}}t.__esModule=!0,t.eachSeries=function(d,e,t,n){var r=0,l=d.length;!function i(o){o||r===l?t&&t(o):n?setTimeout(function(){e(d[r++],i)},1):e(d[r++],i)}()},t.queue=function(a,e){function r(a,e,t){if(null!=t&&"function"!=typeof t)throw new Error("task callback must be a function");if(l.started=!0,null==a&&l.idle())setTimeout(function(){return l.drain()},1);else{var n={data:a,callback:"function"==typeof t?t:d};e?l._tasks.unshift(n):l._tasks.push(n),setTimeout(function(){return l.process()},1)}}if(null==e)e=1;else if(0===e)throw new Error("Concurrency must not be zero");var i=0,l={_tasks:[],concurrency:e,saturated:d,unsaturated:d,buffer:e/4,empty:d,drain:d,error:d,started:!1,paused:!1,push:function(n,e){r(n,!1,e)},kill:function(){i=0,l.drain=d,l.started=!1,l._tasks=[]},unshift:function(n,e){r(n,!0,e)},process:function(){for(;!l.paused&&i<l.concurrency&&l._tasks.length;){var e=l._tasks.shift();0===l._tasks.length&&l.empty(),(i+=1)===l.concurrency&&l.saturated(),a(e.data,n(function(t){return function(){i-=1,t.callback.apply(t,arguments),null!=arguments[0]&&l.error(arguments[0],t.data),i<=l.concurrency-l.buffer&&l.unsaturated(),l.idle()&&l.drain(),l.process()}}(e)))}},length:function(){return l._tasks.length},running:function(){return i},idle:function(){return 0===l._tasks.length+i},pause:function(){!0!==l.paused&&(l.paused=!0)},resume:function(){if(!1!==l.paused){l.paused=!1;for(var t=1;t<=l.concurrency;t++)l.process()}}};return l}},{}],35:[function(a,e,t){t.__esModule=!0,t.encodeBinary=function(r){for(var e="",d=0;d<r.length;){for(var l=[0,0,0],i=[0,0,0,0],o=0;o<l.length;++o)l[o]=d<r.length?255&r.charCodeAt(d++):0;switch(i[0]=l[0]>>2,i[1]=(3&l[0])<<4|l[1]>>4,i[2]=(15&l[1])<<2|l[2]>>6,i[3]=63&l[2],d-(r.length-1)){case 2:i[3]=64,i[2]=64;break;case 1:i[3]=64;}for(var u=0;u<i.length;++u)e+=n.charAt(i[u])}return e};var n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="},{}],36:[function(n,e){var t=n("./Loader").default,a=n("./Resource").default,r=n("./async"),i=n("./b64");t.Resource=a,t.async=r,t.base64=i,e.exports=t,e.exports.default=t},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t};t.blobMiddlewareFactory=function(){return function(a,e){if(a.data){if(a.xhr&&a.xhrType===i.default.XHR_RESPONSE_TYPE.BLOB)if(!(window.Blob&&"string"!=typeof a.data)){var t=a.xhr.getResponseHeader("content-type");if(t&&0===t.indexOf("image"))return a.data=new Image,a.data.src="data:"+t+";base64,"+o.default.encodeBinary(a.xhr.responseText),a.type=i.default.TYPE.IMAGE,void(a.data.onload=function(){a.data.onload=null,e()})}else if(0===a.data.type.indexOf("image")){var d=function(){var t=s.createObjectURL(a.data);return a.blob=a.data,a.data=new Image,a.data.src=t,a.type=i.default.TYPE.IMAGE,a.data.onload=function(){s.revokeObjectURL(t),a.data.onload=null,e()},{v:void 0}}();if("object"===(void 0===d?"undefined":r(d)))return d.v}e()}else e()}};var i=n(d("../../Resource")),o=n(d("../../b64")),s=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(d,e,t){function l(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}function n(n,e){return n._head?(n._tail._next=e,e._prev=n._tail,n._tail=e):(n._head=e,n._tail=e),e._owner=n,e}Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),i=function(){function a(e,t,r){void 0===t&&(t=!1),l(this,a),this._fn=e,this._once=t,this._thisArg=r,this._next=this._prev=this._owner=null}return r(a,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),a}(),o=function(){function t(){l(this,t),this._head=this._tail=void 0}return r(t,[{key:"handlers",value:function(){var a=!(0>=arguments.length||void 0===arguments[0])&&arguments[0],e=this._head;if(a)return!!e;for(var r=[];e;)r.push(e),e=e._next;return r}},{key:"has",value:function(t){if(!(t instanceof i))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return t._owner===this}},{key:"dispatch",value:function(){var t=this._head;if(!t)return!1;for(;t;)t._once&&this.detach(t),t._fn.apply(t._thisArg,arguments),t=t._next;return!0}},{key:"add",value:function(a){var e=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!=typeof a)throw new Error("MiniSignal#add(): First arg must be a Function.");return n(this,new i(a,!1,e))}},{key:"once",value:function(a){var e=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!=typeof a)throw new Error("MiniSignal#once(): First arg must be a Function.");return n(this,new i(a,!0,e))}},{key:"detach",value:function(t){if(!(t instanceof i))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return t._owner===this?(t._prev&&(t._prev._next=t._next),t._next&&(t._next._prev=t._prev),t===this._head?(this._head=t._next,null===t._next&&(this._tail=null)):t===this._tail&&(this._tail=t._prev,this._tail._next=null),t._owner=null,this):this}},{key:"detachAll",value:function(){var t=this._head;if(!t)return this;for(this._head=this._tail=null;t;)t._owner=null,t=t._next;return this}}]),t}();o.MiniSignalBinding=i,t.default=o,e.exports=t.default},{}],39:[function(n,e){e.exports=function(a,e){e=e||{};for(var s={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},n=s.parser[e.strictMode?"strict":"loose"].exec(a),d={},r=14;r--;)d[s.key[r]]=n[r]||"";return d[s.q.name]={},d[s.key[12]].replace(s.q.parser,function(n,e,t){e&&(d[s.q.name][e]=t)}),d}},{}],40:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var d=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../core")),r=n(a("ismobilejs")),i=n(a("./accessibleTarget"));d.utils.mixins.delayMixin(d.DisplayObject.prototype,i.default);var o=function(){function a(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),(r.default.tablet||r.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var t=document.createElement("div");t.style.width="100px",t.style.height="100px",t.style.position="absolute",t.style.top="0px",t.style.left="0px",t.style.zIndex=2,this.div=t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=e,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return a.prototype.createTouchHook=function(){var n=this,e=document.createElement("button");e.style.width="1px",e.style.height="1px",e.style.position="absolute",e.style.top="-1000px",e.style.left="-1000px",e.style.zIndex=2,e.style.backgroundColor="#FF0000",e.title="HOOK DIV",e.addEventListener("focus",function(){n.isMobileAccessabillity=!0,n.activate(),document.body.removeChild(e)}),document.body.appendChild(e)},a.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},a.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},a.prototype.updateAccessibleObjects=function(a){if(a.visible){a.accessible&&a.interactive&&(a._accessibleActive||this.addChild(a),a.renderId=this.renderId);for(var e=a.children,t=e.length-1;0<=t;t--)this.updateAccessibleObjects(e[t])}},a.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var i=this.renderer.view.getBoundingClientRect(),e=i.width/this.renderer.width,t=i.height/this.renderer.height,n=this.div;n.style.left=i.left+"px",n.style.top=i.top+"px",n.style.width=this.renderer.width+"px",n.style.height=this.renderer.height+"px";for(var u=0,p;u<this.children.length;u++)if(p=this.children[u],p.renderId!==this.renderId)p._accessibleActive=!1,d.utils.removeItems(this.children,u,1),this.div.removeChild(p._accessibleDiv),this.pool.push(p._accessibleDiv),p._accessibleDiv=null,u--,0===this.children.length&&this.deactivate();else{n=p._accessibleDiv;var c=p.hitArea,h=p.worldTransform;p.hitArea?(n.style.left=(h.tx+c.x*h.a)*e+"px",n.style.top=(h.ty+c.y*h.d)*t+"px",n.style.width=c.width*h.a*e+"px",n.style.height=c.height*h.d*t+"px"):(c=p.getBounds(),this.capHitArea(c),n.style.left=c.x*e+"px",n.style.top=c.y*t+"px",n.style.width=c.width*e+"px",n.style.height=c.height*t+"px")}this.renderId++}},a.prototype.capHitArea=function(t){0>t.x&&(t.width+=t.x,t.x=0),0>t.y&&(t.height+=t.y,t.y=0),t.x+t.width>this.renderer.width&&(t.width=this.renderer.width-t.x),t.y+t.height>this.renderer.height&&(t.height=this.renderer.height-t.y)},a.prototype.addChild=function(n){var e=this.pool.pop();e||((e=document.createElement("button")).style.width="100px",e.style.height="100px",e.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",e.style.position="absolute",e.style.zIndex=2,e.style.borderStyle="none",e.addEventListener("click",this._onClick.bind(this)),e.addEventListener("focus",this._onFocus.bind(this)),e.addEventListener("focusout",this._onFocusOut.bind(this))),n.accessibleTitle?e.title=n.accessibleTitle:n.accessibleTitle||n.accessibleHint||(e.title="displayObject "+this.tabIndex),n.accessibleHint&&e.setAttribute("aria-label",n.accessibleHint),n._accessibleActive=!0,n._accessibleDiv=e,e.displayObject=n,this.children.push(n),this.div.appendChild(n._accessibleDiv),n._accessibleDiv.tabIndex=n.tabIndex},a.prototype._onClick=function(n){var e=this.renderer.plugins.interaction;e.dispatchEvent(n.target.displayObject,"click",e.eventData)},a.prototype._onFocus=function(n){var e=this.renderer.plugins.interaction;e.dispatchEvent(n.target.displayObject,"mouseover",e.eventData)},a.prototype._onFocusOut=function(n){var e=this.renderer.plugins.interaction;e.dispatchEvent(n.target.displayObject,"mouseout",e.eventData)},a.prototype._onKeyDown=function(t){9===t.keyCode&&this.activate()},a.prototype._onMouseMove=function(){this.deactivate()},a.prototype.destroy=function(){this.div=null;for(var t=0;t<this.children.length;t++)this.children[t].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},a}();t.default=o,d.WebGLRenderer.registerPlugin("accessibility",o),d.CanvasRenderer.registerPlugin("accessibility",o)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(a,e,t){t.__esModule=!0,t.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=a("./accessibleTarget");Object.defineProperty(t,"accessibleTarget",{enumerable:!0,get:function(){return n(r).default}});var i=a("./AccessibilityManager");Object.defineProperty(t,"AccessibilityManager",{enumerable:!0,get:function(){return n(i).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),p=d("./autoDetectRenderer"),o=n(d("./display/Container")),s=d("./ticker"),a=n(d("./settings")),i=d("./const"),l=function(){function d(e,l,n,r,i){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),"number"==typeof e&&(e=Object.assign({width:e,height:l||a.default.RENDER_OPTIONS.height,forceCanvas:!!r,sharedTicker:!!i},n)),this._options=e=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},e),this.renderer=(0,p.autoDetectRenderer)(e),this.stage=new o.default,this._ticker=null,this.ticker=e.sharedTicker?s.shared:new s.Ticker,e.autoStart&&this.start()}return d.prototype.render=function(){this.renderer.render(this.stage)},d.prototype.stop=function(){this._ticker.stop()},d.prototype.start=function(){this._ticker.start()},d.prototype.destroy=function(n){var e=this._ticker;this.ticker=null,e.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(n),this.renderer=null,this._options=null},r(d,[{key:"ticker",set:function(t){this._ticker&&this._ticker.remove(this.render,this),this._ticker=t,t&&t.add(this.render,this,i.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),d}();t.default=l},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":120}],44:[function(a,e,t){function d(a,e){if(a instanceof Array){if("precision"!==a[0].substring(0,9)){var t=a.slice(0);return t.unshift("precision "+e+" float;"),t}}else if("precision"!==a.substring(0,9))return"precision "+e+" float;\n"+a;return a}t.__esModule=!0;var n=a("pixi-gl-core"),r=function(t){return t&&t.__esModule?t:{default:t}}(a("./settings")),i=function(a){function e(t,n,i){return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t,d(n,r.default.PRECISION_VERTEX),d(i,r.default.PRECISION_FRAGMENT)))}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e}(n.GLShader);t.default=i},{"./settings":101,"pixi-gl-core":12}],45:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0,t.autoDetectRenderer=function(s,e,t,n){var r=s&&s.forceCanvas;return void 0!==n&&(r=n),!r&&d.isWebGLSupported()?new o.default(s,e,t):new i.default(s,e,t)};var d=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("./utils")),i=n(a("./renderers/canvas/CanvasRenderer")),o=n(a("./renderers/webgl/WebGLRenderer"))},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":124}],46:[function(a,e,t){t.__esModule=!0,t.VERSION="4.5.6",t.PI_2=2*Math.PI,t.RAD_TO_DEG=180/Math.PI,t.DEG_TO_RAD=Math.PI/180,t.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},t.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},t.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},t.SCALE_MODES={LINEAR:0,NEAREST:1},t.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},t.GC_MODES={AUTO:0,MANUAL:1},t.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,t.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,t.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,t.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},t.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},t.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},t.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},t.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(a,e,t){t.__esModule=!0;var n=a("../math"),r=function(){function t(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return t.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},t.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},t.prototype.getRectangle=function(t){return this.minX>this.maxX||this.minY>this.maxY?n.Rectangle.EMPTY:(t=t||new n.Rectangle(0,0,1,1),t.x=this.minX,t.y=this.minY,t.width=this.maxX-this.minX,t.height=this.maxY-this.minY,t)},t.prototype.addPoint=function(t){this.minX=Math.min(this.minX,t.x),this.maxX=Math.max(this.maxX,t.x),this.minY=Math.min(this.minY,t.y),this.maxY=Math.max(this.maxY,t.y)},t.prototype.addQuad=function(a){var e=this.minX,d=this.minY,l=this.maxX,u=this.maxY,p=a[0],c=a[1];e=p<e?p:e,d=c<d?c:d,l=p>l?p:l,u=c>u?c:u,p=a[2],c=a[3],e=p<e?p:e,d=c<d?c:d,l=p>l?p:l,u=c>u?c:u,p=a[4],c=a[5],e=p<e?p:e,d=c<d?c:d,l=p>l?p:l,u=c>u?c:u,p=a[6],c=a[7],e=p<e?p:e,d=c<d?c:d,l=p>l?p:l,u=c>u?c:u,this.minX=e,this.minY=d,this.maxX=l,this.maxY=u},t.prototype.addFrame=function(y,e,t,n,r){var i=y.worldTransform,o=i.a,s=i.b,a=i.c,l=i.d,u=i.tx,c=i.ty,h=this.minX,_=this.minY,b=this.maxX,x=this.maxY,T=o*e+a*t+u,E=s*e+l*t+c;h=T<h?T:h,_=E<_?E:_,b=T>b?T:b,x=E>x?E:x,E=s*n+l*t+c,h=(T=o*n+a*t+u)<h?T:h,_=E<_?E:_,b=T>b?T:b,x=E>x?E:x,E=s*e+l*r+c,h=(T=o*e+a*r+u)<h?T:h,_=E<_?E:_,b=T>b?T:b,x=E>x?E:x,E=s*n+l*r+c,h=(T=o*n+a*r+u)<h?T:h,_=E<_?E:_,b=T>b?T:b,x=E>x?E:x,this.minX=h,this.minY=_,this.maxX=b,this.maxY=x},t.prototype.addVertices=function(_,e,t,n){for(var r=_.worldTransform,i=r.a,o=r.b,s=r.c,a=r.d,l=r.tx,u=r.ty,c=this.minX,x=this.minY,T=this.maxX,E=this.maxY,S=t;S<n;S+=2){var w=e[S],m=e[S+1],v=i*w+s*m+l,y=a*m+o*w+u;c=v<c?v:c,x=y<x?y:x,T=v>T?v:T,E=y>E?y:E}this.minX=c,this.minY=x,this.maxX=T,this.maxY=E},t.prototype.addBounds=function(a){var e=this.minX,t=this.minY,n=this.maxX,r=this.maxY;this.minX=a.minX<e?a.minX:e,this.minY=a.minY<t?a.minY:t,this.maxX=a.maxX>n?a.maxX:n,this.maxY=a.maxY>r?a.maxY:r},t.prototype.addBoundsMask=function(d,e){var t=d.minX>e.minX?d.minX:e.minX,n=d.minY>e.minY?d.minY:e.minY,r=d.maxX<e.maxX?d.maxX:e.maxX,i=d.maxY<e.maxY?d.maxY:e.maxY;if(t<=r&&n<=i){var o=this.minX,s=this.minY,a=this.maxX,l=this.maxY;this.minX=t<o?t:o,this.minY=n<s?n:s,this.maxX=r>a?r:a,this.maxY=i>l?i:l}},t.prototype.addBoundsArea=function(d,e){var t=d.minX>e.x?d.minX:e.x,n=d.minY>e.y?d.minY:e.y,r=d.maxX<e.x+e.width?d.maxX:e.x+e.width,i=d.maxY<e.y+e.height?d.maxY:e.y+e.height;if(t<=r&&n<=i){var o=this.minX,s=this.minY,a=this.maxX,l=this.maxY;this.minX=t<o?t:o,this.minY=n<s?n:s,this.maxX=r>a?r:a,this.maxY=i>l?i:l}},t}();t.default=r},{"../math":70}],48:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),s=a("../utils"),r=function(a){function e(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this));return t.children=[],t}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.onChildrenChange=function(){},e.prototype.addChild=function(a){var e=arguments.length;if(1<e)for(var t=0;t<e;t++)this.addChild(arguments[t]);else a.parent&&a.parent.removeChild(a),a.parent=this,a.transform._parentID=-1,this.children.push(a),this._boundsID++,this.onChildrenChange(this.children.length-1),a.emit("added",this);return a},e.prototype.addChildAt=function(n,e){if(0>e||e>this.children.length)throw new Error(n+"addChildAt: The index "+e+" supplied is out of bounds "+this.children.length);return n.parent&&n.parent.removeChild(n),n.parent=this,n.transform._parentID=-1,this.children.splice(e,0,n),this._boundsID++,this.onChildrenChange(e),n.emit("added",this),n},e.prototype.swapChildren=function(a,e){if(a!==e){var t=this.getChildIndex(a),n=this.getChildIndex(e);this.children[t]=e,this.children[n]=a,this.onChildrenChange(t<n?t:n)}},e.prototype.getChildIndex=function(n){var e=this.children.indexOf(n);if(-1===e)throw new Error("The supplied DisplayObject must be a child of the caller");return e},e.prototype.setChildIndex=function(a,e){if(0>e||e>=this.children.length)throw new Error("The supplied index is out of bounds");var t=this.getChildIndex(a);(0,s.removeItems)(this.children,t,1),this.children.splice(e,0,a),this.onChildrenChange(e)},e.prototype.getChildAt=function(t){if(0>t||t>=this.children.length)throw new Error("getChildAt: Index ("+t+") does not exist.");return this.children[t]},e.prototype.removeChild=function(a){var e=arguments.length;if(1<e)for(var t=0;t<e;t++)this.removeChild(arguments[t]);else{var i=this.children.indexOf(a);if(-1===i)return null;a.parent=null,a.transform._parentID=-1,(0,s.removeItems)(this.children,i,1),this._boundsID++,this.onChildrenChange(i),a.emit("removed",this)}return a},e.prototype.removeChildAt=function(n){var e=this.getChildAt(n);return e.parent=null,e.transform._parentID=-1,(0,s.removeItems)(this.children,n,1),this._boundsID++,this.onChildrenChange(n),e.emit("removed",this),e},e.prototype.removeChildren=function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],t=d,n="number"==typeof e?e:this.children.length,r=n-t,i;if(0<r&&r<=n){i=this.children.splice(t,r);for(var l=0;l<i.length;++l)i[l].parent=null,i[l].transform&&(i[l].transform._parentID=-1);this._boundsID++,this.onChildrenChange(d);for(var u=0;u<i.length;++u)i[u].emit("removed",this);return i}if(0==r&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},e.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var a=0,r=this.children.length,t;a<r;++a)t=this.children[a],t.visible&&t.updateTransform()},e.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var n=0,a;n<this.children.length;n++)a=this.children[n],a.visible&&a.renderable&&(a.calculateBounds(),a._mask?(a._mask.calculateBounds(),this._bounds.addBoundsMask(a._bounds,a._mask._bounds)):a.filterArea?this._bounds.addBoundsArea(a._bounds,a.filterArea):this._bounds.addBounds(a._bounds));this._lastBoundsID=this._boundsID},e.prototype._calculateBounds=function(){},e.prototype.renderWebGL=function(a){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(a);else{this._renderWebGL(a);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderWebGL(a)}},e.prototype.renderAdvancedWebGL=function(a){a.flush();var e=this._filters,t=this._mask;if(e){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var n=0;n<e.length;n++)e[n].enabled&&this._enabledFilters.push(e[n]);this._enabledFilters.length&&a.filterManager.pushFilter(this,this._enabledFilters)}t&&a.maskManager.pushMask(this,this._mask),this._renderWebGL(a);for(var s=0,d=this.children.length;s<d;s++)this.children[s].renderWebGL(a);a.flush(),t&&a.maskManager.popMask(this,this._mask),e&&this._enabledFilters&&this._enabledFilters.length&&a.filterManager.popFilter()},e.prototype._renderWebGL=function(){},e.prototype._renderCanvas=function(){},e.prototype.renderCanvas=function(a){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable){this._mask&&a.maskManager.pushMask(this._mask),this._renderCanvas(a);for(var e=0,r=this.children.length;e<r;++e)this.children[e].renderCanvas(a);this._mask&&a.maskManager.popMask(a)}},e.prototype.destroy=function(e){a.prototype.destroy.call(this);var t="boolean"==typeof e?e:e&&e.children,n=this.removeChildren(0,this.children.length);if(t)for(var r=0;r<n.length;++r)n[r].destroy(e)},n(e,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(n){var e=this.getLocalBounds().width;this.scale.x=0===e?1:n/e,this._width=n}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(n){var e=this.getLocalBounds().height;this.scale.y=0===e?1:n/e,this._height=n}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(a("./DisplayObject")).default);t.default=r,r.prototype.containerUpdateTransform=r.prototype.updateTransform},{"../utils":124,"./DisplayObject":49}],49:[function(p,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),i=n(p("eventemitter3")),o=p("../const"),s=n(p("../settings")),a=n(p("./TransformStatic")),l=n(p("./Transform")),u=n(p("./Bounds")),c=p("../math"),h=function(i){function e(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,i.call(this)),n=s.default.TRANSFORM_MODE===o.TRANSFORM_MODE.STATIC?a.default:l.default;return t.tempDisplayObjectParent=null,t.transform=new n,t.alpha=1,t.visible=!0,t.renderable=!0,t.parent=null,t.worldAlpha=1,t.filterArea=null,t._filters=null,t._enabledFilters=null,t._bounds=new u.default,t._boundsID=0,t._lastBoundsID=-1,t._boundsRect=null,t._localBoundsRect=null,t._mask=null,t._destroyed=!1,t}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,i),e.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},e.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},e.prototype.getBounds=function(n,e){return n||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),e||(this._boundsRect||(this._boundsRect=new c.Rectangle),e=this._boundsRect),this._bounds.getRectangle(e)},e.prototype.getLocalBounds=function(a){var i=this.transform,t=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,a||(this._localBoundsRect||(this._localBoundsRect=new c.Rectangle),a=this._localBoundsRect);var n=this.getBounds(!1,a);return this.parent=t,this.transform=i,n},e.prototype.toGlobal=function(n,e){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(n,e)},e.prototype.toLocal=function(a,i,t,n){return i&&(a=i.toGlobal(a,t,n)),n||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(a,t)},e.prototype.renderWebGL=function(){},e.prototype.renderCanvas=function(){},e.prototype.setParent=function(t){if(!t||!t.addChild)throw new Error("setParent: Argument must be a Container");return t.addChild(this),t},e.prototype.setTransform=function(){var d=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,r=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,i=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,o=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,s=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,a=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=d,this.position.y=e,this.scale.x=t||1,this.scale.y=n||1,this.rotation=r,this.skew.x=i,this.skew.y=o,this.pivot.x=s,this.pivot.y=a,this},e.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},r(e,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new e),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(t){this.transform.position.x=t}},{key:"y",get:function(){return this.position.y},set:function(t){this.transform.position.y=t}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(t){this.transform.position.copy(t)}},{key:"scale",get:function(){return this.transform.scale},set:function(t){this.transform.scale.copy(t)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(t){this.transform.pivot.copy(t)}},{key:"skew",get:function(){return this.transform.skew},set:function(t){this.transform.skew.copy(t)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(t){this.transform.rotation=t}},{key:"worldVisible",get:function(){var t=this;do{if(!t.visible)return!1;t=t.parent}while(t);return!0}},{key:"mask",get:function(){return this._mask},set:function(t){this._mask&&(this._mask.renderable=!0),this._mask=t,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(t){this._filters=t&&t.slice()}}]),e}(i.default);t.default=h,h.prototype.displayObjectUpdateTransform=h.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=a("../math"),i=function(a){function e(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this));return t.position=new r.Point(0,0),t.scale=new r.Point(1,1),t.skew=new r.ObservablePoint(t.updateSkew,t,0,0),t.pivot=new r.Point(0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},e.prototype.updateLocalTransform=function(){var t=this.localTransform;t.a=this._cx*this.scale.x,t.b=this._sx*this.scale.x,t.c=this._cy*this.scale.y,t.d=this._sy*this.scale.y,t.tx=this.position.x-(this.pivot.x*t.a+this.pivot.y*t.c),t.ty=this.position.y-(this.pivot.x*t.b+this.pivot.y*t.d)},e.prototype.updateTransform=function(a){var e=this.localTransform;e.a=this._cx*this.scale.x,e.b=this._sx*this.scale.x,e.c=this._cy*this.scale.y,e.d=this._sy*this.scale.y,e.tx=this.position.x-(this.pivot.x*e.a+this.pivot.y*e.c),e.ty=this.position.y-(this.pivot.x*e.b+this.pivot.y*e.d);var t=a.worldTransform,n=this.worldTransform;n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.tx=e.tx*t.a+e.ty*t.c+t.tx,n.ty=e.tx*t.b+e.ty*t.d+t.ty,this._worldID++},e.prototype.setFromMatrix=function(t){t.decompose(this)},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(a("./TransformBase")).default);t.default=i},{"../math":70,"./TransformBase":51}],51:[function(a,e,t){t.__esModule=!0;var n=a("../math"),r=function(){function t(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.worldTransform=new n.Matrix,this.localTransform=new n.Matrix,this._worldID=0,this._parentID=0}return t.prototype.updateLocalTransform=function(){},t.prototype.updateTransform=function(a){var e=a.worldTransform,t=this.worldTransform,n=this.localTransform;t.a=n.a*e.a+n.b*e.c,t.b=n.a*e.b+n.b*e.d,t.c=n.c*e.a+n.d*e.c,t.d=n.c*e.b+n.d*e.d,t.tx=n.tx*e.a+n.ty*e.c+e.tx,t.ty=n.tx*e.b+n.ty*e.d+e.ty,this._worldID++},t}();t.default=r,r.prototype.updateWorldTransform=r.prototype.updateTransform,r.IDENTITY=new r},{"../math":70}],52:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=a("../math"),i=function(a){function e(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this));return t.position=new r.ObservablePoint(t.onChange,t,0,0),t.scale=new r.ObservablePoint(t.onChange,t,1,1),t.pivot=new r.ObservablePoint(t.onChange,t,0,0),t.skew=new r.ObservablePoint(t.updateSkew,t,0,0),t._rotation=0,t._cx=1,t._sx=0,t._cy=0,t._sy=1,t._localID=0,t._currentLocalID=0,t}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.onChange=function(){this._localID++},e.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},e.prototype.updateLocalTransform=function(){var t=this.localTransform;this._localID!==this._currentLocalID&&(t.a=this._cx*this.scale._x,t.b=this._sx*this.scale._x,t.c=this._cy*this.scale._y,t.d=this._sy*this.scale._y,t.tx=this.position._x-(this.pivot._x*t.a+this.pivot._y*t.c),t.ty=this.position._y-(this.pivot._x*t.b+this.pivot._y*t.d),this._currentLocalID=this._localID,this._parentID=-1)},e.prototype.updateTransform=function(a){var e=this.localTransform;if(this._localID!==this._currentLocalID&&(e.a=this._cx*this.scale._x,e.b=this._sx*this.scale._x,e.c=this._cy*this.scale._y,e.d=this._sy*this.scale._y,e.tx=this.position._x-(this.pivot._x*e.a+this.pivot._y*e.c),e.ty=this.position._y-(this.pivot._x*e.b+this.pivot._y*e.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==a._worldID){var t=a.worldTransform,n=this.worldTransform;n.a=e.a*t.a+e.b*t.c,n.b=e.a*t.b+e.b*t.d,n.c=e.c*t.a+e.d*t.c,n.d=e.c*t.b+e.d*t.d,n.tx=e.tx*t.a+e.ty*t.c+t.tx,n.ty=e.tx*t.b+e.ty*t.d+t.ty,this._parentID=a._worldID,this._worldID++}},e.prototype.setFromMatrix=function(t){t.decompose(this),this._localID++},n(e,[{key:"rotation",get:function(){return this._rotation},set:function(t){this._rotation=t,this.updateSkew()}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(a("./TransformBase")).default);t.default=i},{"../math":70,"./TransformBase":51}],53:[function(x,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=n(x("../display/Container")),T=n(x("../textures/RenderTexture")),o=n(x("../textures/Texture")),i=n(x("./GraphicsData")),a=n(x("../sprites/Sprite")),s=x("../math"),l=x("../utils"),E=x("../const"),u=n(x("../display/Bounds")),d=n(x("./utils/bezierCurveTo")),p=n(x("../renderers/canvas/CanvasRenderer")),c=new s.Matrix,h=new s.Point,f=new Float32Array(4),m=new Float32Array(4),y=function(g){function y(){var e=0<arguments.length&&void 0!==arguments[0]&&arguments[0];!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y);var t=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,g.call(this));return t.fillAlpha=1,t.lineWidth=0,t.nativeLines=e,t.lineColor=0,t.graphicsData=[],t.tint=16777215,t._prevTint=16777215,t.blendMode=E.BLEND_MODES.NORMAL,t.currentPath=null,t._webGL={},t.isMask=!1,t.boundsPadding=0,t._localBounds=new u.default,t.dirty=0,t.fastRectDirty=-1,t.clearDirty=0,t.boundsDirty=-1,t.cachedSpriteDirty=!1,t._spriteRect=null,t._fastRect=!1,t}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(y,g),y.prototype.clone=function(){var t=new y;t.renderable=this.renderable,t.fillAlpha=this.fillAlpha,t.lineWidth=this.lineWidth,t.lineColor=this.lineColor,t.tint=this.tint,t.blendMode=this.blendMode,t.isMask=this.isMask,t.boundsPadding=this.boundsPadding,t.dirty=0,t.cachedSpriteDirty=this.cachedSpriteDirty;for(var e=0;e<this.graphicsData.length;++e)t.graphicsData.push(this.graphicsData[e].clone());return t.currentPath=t.graphicsData[t.graphicsData.length-1],t.updateLocalBounds(),t},y.prototype.lineStyle=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=a,this.lineColor=e,this.lineAlpha=t,this.currentPath)if(this.currentPath.shape.points.length){var n=new s.Polygon(this.currentPath.shape.points.slice(-2));n.closed=!1,this.drawShape(n)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},y.prototype.moveTo=function(a,e){var t=new s.Polygon([a,e]);return t.closed=!1,this.drawShape(t),this},y.prototype.lineTo=function(n,e){return this.currentPath.shape.points.push(n,e),this.dirty++,this},y.prototype.quadraticCurveTo=function(d,e,t,n){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var r=this.currentPath.shape.points,i=0,p=0;0===r.length&&this.moveTo(0,0);for(var h=r[r.length-2],a=r[r.length-1],l=1,f;20>=l;++l)f=l/20,i=h+(d-h)*f,p=a+(e-a)*f,r.push(i+(d+(t-d)*f-i)*f,p+(e+(n-e)*f-p)*f);return this.dirty++,this},y.prototype.bezierCurveTo=function(u,e,t,n,r,i){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var o=this.currentPath.shape.points,s=o[o.length-2],a=o[o.length-1];return o.length-=2,(0,d.default)(s,a,u,e,t,n,r,i,o),this.dirty++,this},y.prototype.arcTo=function(x,e,t,n,r){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(x,e):this.moveTo(x,e);var i=this.currentPath.shape.points,o=i[i.length-2],s=i[i.length-1]-e,a=o-x,l=n-e,u=t-x,c=Math.abs(s*u-a*l);if(1e-8>c||0===r)i[i.length-2]===x&&i[i.length-1]===e||i.push(x,e);else{var h=s*s+a*a,d=l*l+u*u,p=s*l+a*u,f=r*Math.sqrt(h)/c,g=r*Math.sqrt(d)/c,m=f*p/h,v=g*p/d,y=f*u+g*a,b=f*l+g*s,_=Math.atan2(s*(g+m)-b,a*(g+m)-y),T=Math.atan2(l*(f+v)-b,u*(f+v)-y);this.arc(y+x,b+e,r,_,T,a*l>u*s)}return this.dirty++,this},y.prototype.arc=function(d,e,t,n,m){var x=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(n===m)return this;!x&&m<=n?m+=2*Math.PI:x&&n<=m&&(n+=2*Math.PI);var o=m-n,s=40*Math.ceil(Math.abs(o)/(2*Math.PI));if(0==o)return this;var a=d+Math.cos(n)*t,l=e+Math.sin(n)*t,u=this.currentPath?this.currentPath.shape.points:null;u?u[u.length-2]===a&&u[u.length-1]===l||u.push(a,l):(this.moveTo(a,l),u=this.currentPath.shape.points);for(var T=o/(2*s),h=Math.cos(T),p=Math.sin(T),f=s-1,g=0;g<=f;++g){var E=T+n+2*T*(g+f%1/f*g),y=Math.cos(E),b=-Math.sin(E);u.push((h*y+p*b)*t+d,(h*-b+p*y)*t+e)}return this.dirty++,this},y.prototype.beginFill=function(){var n=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=n,this.fillAlpha=e,this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},y.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},y.prototype.drawRect=function(a,e,t,n){return this.drawShape(new s.Rectangle(a,e,t,n)),this},y.prototype.drawRoundedRect=function(a,e,t,n,r){return this.drawShape(new s.RoundedRectangle(a,e,t,n,r)),this},y.prototype.drawCircle=function(a,e,t){return this.drawShape(new s.Circle(a,e,t)),this},y.prototype.drawEllipse=function(a,e,t,n){return this.drawShape(new s.Ellipse(a,e,t,n)),this},y.prototype.drawPolygon=function(a){var e=a,o=!0;if(e instanceof s.Polygon&&(o=e.closed,e=e.points),!Array.isArray(e)){e=Array(arguments.length);for(var d=0;d<e.length;++d)e[d]=arguments[d]}var l=new s.Polygon(e);return l.closed=o,this.drawShape(l),this},y.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},y.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===E.SHAPES.RECT&&!this.graphicsData[0].lineWidth},y.prototype._renderWebGL=function(t){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(t):(t.setObjectRenderer(t.plugins.graphics),t.plugins.graphics.render(this))},y.prototype._renderSpriteRect=function(s){var e=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new a.default(new o.default(o.default.WHITE)));var t=this._spriteRect;if(16777215===this.tint)t.tint=this.graphicsData[0].fillColor;else{var n=f,r=m;(0,l.hex2rgb)(this.graphicsData[0].fillColor,n),(0,l.hex2rgb)(this.tint,r),n[0]*=r[0],n[1]*=r[1],n[2]*=r[2],t.tint=(0,l.rgb2hex)(n)}t.alpha=this.graphicsData[0].fillAlpha,t.worldAlpha=this.worldAlpha*t.alpha,t.blendMode=this.blendMode,t._texture._frame.width=e.width,t._texture._frame.height=e.height,t.transform.worldTransform=this.transform.worldTransform,t.anchor.set(-e.x/e.width,-e.y/e.height),t._onAnchorUpdate(),t._renderWebGL(s)},y.prototype._renderCanvas=function(t){!0!==this.isMask&&t.plugins.graphics.render(this)},y.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var t=this._localBounds;this._bounds.addFrame(this.transform,t.minX,t.minY,t.maxX,t.maxY)},y.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,h);for(var e=this.graphicsData,t=0,o;t<e.length;++t)if(o=e[t],o.fill&&o.shape&&o.shape.contains(h.x,h.y)){if(o.holes)for(var s=0;s<o.holes.length;s++)if(o.holes[s].contains(h.x,h.y))return!1;return!0}return!1},y.prototype.updateLocalBounds=function(){var h=1/0,S=-1/0,C=1/0,M=-1/0;if(this.graphicsData.length)for(var P=0,A=0,I=0,R=0,D=0,L=0;L<this.graphicsData.length;L++){var O=this.graphicsData[L],c=O.type,d=O.lineWidth;if(P=O.shape,c===E.SHAPES.RECT||c===E.SHAPES.RREC)A=P.x-d/2,I=P.y-d/2,R=P.width+d,D=P.height+d,h=A<h?A:h,S=A+R>S?A+R:S,C=I<C?I:C,M=I+D>M?I+D:M;else if(c===E.SHAPES.CIRC)A=P.x,I=P.y,R=P.radius+d/2,D=P.radius+d/2,h=A-R<h?A-R:h,S=A+R>S?A+R:S,C=I-D<C?I-D:C,M=I+D>M?I+D:M;else if(c===E.SHAPES.ELIP)A=P.x,I=P.y,R=P.width+d/2,D=P.height+d/2,h=A-R<h?A-R:h,S=A+R>S?A+R:S,C=I-D<C?I-D:C,M=I+D>M?I+D:M;else for(var p=P.points,f=0,k=0,N=0,F=0,B=0,U=0,Y=0,G=0,j=0;j+2<p.length;j+=2)A=p[j],I=p[j+1],f=p[j+2],k=p[j+3],N=Math.abs(f-A),F=Math.abs(k-I),D=d,1e-9>(R=Math.sqrt(N*N+F*F))||(U=(D/R*N+F)/2,G=(k+I)/2,h=(Y=(f+A)/2)-(B=(D/R*F+N)/2)<h?Y-B:h,S=Y+B>S?Y+B:S,C=G-U<C?G-U:C,M=G+U>M?G+U:M)}else h=0,S=0,C=0,M=0;var X=this.boundsPadding;this._localBounds.minX=h-X,this._localBounds.maxX=S+X,this._localBounds.minY=C-X,this._localBounds.maxY=M+X},y.prototype.drawShape=function(n){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop(),this.currentPath=null;var e=new i.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,n);return this.graphicsData.push(e),e.type===E.SHAPES.POLY&&(e.shape.closed=e.shape.closed||this.filling,this.currentPath=e),this.dirty++,e},y.prototype.generateCanvasTexture=function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,t=this.getLocalBounds(),n=T.default.create(t.width,t.height,a,e);_||(_=new p.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(c),c.invert(),c.tx-=t.x,c.ty-=t.y,_.render(this,n,!0,c);var r=o.default.fromCanvas(n.baseTexture._canvasRenderTarget.canvas,a,"graphics");return r.baseTexture.resolution=e,r.baseTexture.update(),r},y.prototype.closePath=function(){var t=this.currentPath;return t&&t.shape&&t.shape.close(),this},y.prototype.addHole=function(){var t=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(t.shape),this.currentPath=null,this},y.prototype.destroy=function(e){g.prototype.destroy.call(this,e);for(var t=0;t<this.graphicsData.length;++t)this.graphicsData[t].destroy();for(var a in this._webgl)for(var r=0;r<this._webgl[a].data.length;++r)this._webgl[a].data[r].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},y}(r.default),_;t.default=y,y._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":124,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(a,e,t){t.__esModule=!0;var n=function(){function d(e,t,n,r,i,o,s,a){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.lineWidth=e,this.nativeLines=s,this.lineColor=t,this.lineAlpha=n,this._lineTint=t,this.fillColor=r,this.fillAlpha=i,this._fillTint=r,this.fill=o,this.holes=[],this.shape=a,this.type=a.type}return d.prototype.clone=function(){return new d(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},d.prototype.addHole=function(t){this.holes.push(t)},d.prototype.destroy=function(){this.shape=null,this.holes=null},d}();t.default=n},{}],55:[function(a,e,t){t.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(a("../../renderers/canvas/CanvasRenderer")),s=a("../../const"),r=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.renderer=e}return n.prototype.render=function(i){var e=this.renderer,t=e.context,n=i.worldAlpha,r=i.transform.worldTransform,o=e.resolution;this._prevTint!==this.tint&&(this.dirty=!0),t.setTransform(r.a*o,r.b*o,r.c*o,r.d*o,r.tx*o,r.ty*o),i.dirty&&(this.updateGraphicsTint(i),i.dirty=!1),e.setBlendMode(i.blendMode);for(var C=0;C<i.graphicsData.length;C++){var A=i.graphicsData[C],l=A.shape,u=A._fillTint,c=A._lineTint;if(t.lineWidth=A.lineWidth,A.type===s.SHAPES.POLY){t.beginPath(),this.renderPolygon(l.points,l.closed,t);for(var h=0;h<A.holes.length;h++)this.renderPolygon(A.holes[h].points,!0,t);A.fill&&(t.globalAlpha=A.fillAlpha*n,t.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.fill()),A.lineWidth&&(t.globalAlpha=A.lineAlpha*n,t.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),t.stroke())}else if(A.type===s.SHAPES.RECT)(A.fillColor||0===A.fillColor)&&(t.globalAlpha=A.fillAlpha*n,t.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.fillRect(l.x,l.y,l.width,l.height)),A.lineWidth&&(t.globalAlpha=A.lineAlpha*n,t.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),t.strokeRect(l.x,l.y,l.width,l.height));else if(A.type===s.SHAPES.CIRC)t.beginPath(),t.arc(l.x,l.y,l.radius,0,2*Math.PI),t.closePath(),A.fill&&(t.globalAlpha=A.fillAlpha*n,t.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.fill()),A.lineWidth&&(t.globalAlpha=A.lineAlpha*n,t.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),t.stroke());else if(A.type===s.SHAPES.ELIP){var R=2*l.width,p=2*l.height,f=l.x-R/2,g=l.y-p/2;t.beginPath();var m=.5522848*(R/2),v=.5522848*(p/2),y=f+R,b=g+p,_=f+R/2,x=g+p/2;t.moveTo(f,x),t.bezierCurveTo(f,x-v,_-m,g,_,g),t.bezierCurveTo(_+m,g,y,x-v,y,x),t.bezierCurveTo(y,x+v,_+m,b,_,b),t.bezierCurveTo(_-m,b,f,x+v,f,x),t.closePath(),A.fill&&(t.globalAlpha=A.fillAlpha*n,t.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.fill()),A.lineWidth&&(t.globalAlpha=A.lineAlpha*n,t.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),t.stroke())}else if(A.type===s.SHAPES.RREC){var w=l.x,T=l.y,E=l.width,S=l.height,I=l.radius,D=0|Math.min(E,S)/2;I=I>D?D:I,t.beginPath(),t.moveTo(w,T+I),t.lineTo(w,T+S-I),t.quadraticCurveTo(w,T+S,w+I,T+S),t.lineTo(w+E-I,T+S),t.quadraticCurveTo(w+E,T+S,w+E,T+S-I),t.lineTo(w+E,T+I),t.quadraticCurveTo(w+E,T,w+E-I,T),t.lineTo(w+I,T),t.quadraticCurveTo(w,T,w,T+I),t.closePath(),(A.fillColor||0===A.fillColor)&&(t.globalAlpha=A.fillAlpha*n,t.fillStyle="#"+("00000"+(0|u).toString(16)).substr(-6),t.fill()),A.lineWidth&&(t.globalAlpha=A.lineAlpha*n,t.strokeStyle="#"+("00000"+(0|c).toString(16)).substr(-6),t.stroke())}}},n.prototype.updateGraphicsTint=function(d){d._prevTint=d.tint;for(var e=(255&d.tint>>16)/255,t=(255&d.tint>>8)/255,n=(255&d.tint)/255,r=0;r<d.graphicsData.length;++r){var l=d.graphicsData[r],o=0|l.fillColor,s=0|l.lineColor;l._fillTint=(255*((255&o>>16)/255*e)<<16)+(255*((255&o>>8)/255*t)<<8)+255*((255&o)/255*n),l._lineTint=(255*((255&s>>16)/255*e)<<16)+(255*((255&s>>8)/255*t)<<8)+255*((255&s)/255*n)}},n.prototype.renderPolygon=function(a,e,t){t.moveTo(a[0],a[1]);for(var n=1;n<a.length/2;++n)t.lineTo(a[2*n],a[2*n+1]);e&&t.closePath()},n.prototype.destroy=function(){this.renderer=null},n}();t.default=r,n.default.registerPlugin("graphics",r)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(a,e,t){t.__esModule=!0,t.default=function(m,e,t,n,r,i,o,s){var a=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],l=0,y=0,_=0,b=0,x=0;a.push(m,e);for(var v=1,T=0;20>=v;++v)_=(y=(l=1-(T=v/20))*l)*l,x=(b=T*T)*T,a.push(_*m+3*y*T*t+3*l*b*r+x*o,_*e+3*y*T*n+3*l*b*i+x*s);return a}},{}],57:[function(g,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var m=g("../../utils"),r=g("../../const"),i=n(g("../../renderers/webgl/utils/ObjectRenderer")),o=n(g("../../renderers/webgl/WebGLRenderer")),a=n(g("./WebGLGraphicsData")),s=n(g("./shaders/PrimitiveShader")),u=n(g("./utils/buildPoly")),c=n(g("./utils/buildRectangle")),h=n(g("./utils/buildRoundedRectangle")),d=n(g("./utils/buildCircle")),l=function(o){function e(t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,o.call(this,t));return n.graphicsDataPool=[],n.primitiveShader=null,n.gl=t.gl,n.CONTEXT_UID=0,n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,o),e.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new s.default(this.gl)},e.prototype.destroy=function(){i.default.prototype.destroy.call(this);for(var t=0;t<this.graphicsDataPool.length;++t)this.graphicsDataPool[t].destroy();this.graphicsDataPool=null},e.prototype.render=function(i){var e=this.renderer,t=e.gl,n=i._webGL[this.CONTEXT_UID],d;n&&i.dirty===n.dirty||(this.updateGraphics(i),n=i._webGL[this.CONTEXT_UID]);var p=this.primitiveShader;e.bindShader(p),e.state.setBlendMode(i.blendMode);for(var s=0,c=n.data.length,l;s<c;s++)l=(d=n.data[s]).shader,e.bindShader(l),l.uniforms.translationMatrix=i.transform.worldTransform.toArray(!0),l.uniforms.tint=(0,m.hex2rgb)(i.tint),l.uniforms.alpha=i.worldAlpha,e.bindVao(d.vao),d.nativeLines?t.drawArrays(t.LINES,0,d.points.length/6):d.vao.draw(t.TRIANGLE_STRIP,d.indices.length)},e.prototype.updateGraphics=function(o){var e=this.renderer.gl,t=o._webGL[this.CONTEXT_UID];if(t||(t=o._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:e,clearDirty:-1,dirty:-1}),t.dirty=o.dirty,o.clearDirty!==t.clearDirty){t.clearDirty=o.clearDirty;for(var p=0;p<t.data.length;p++)this.graphicsDataPool.push(t.data[p]);t.data.length=0,t.lastIndex=0}for(var f=void 0,g=void 0,m=t.lastIndex,y;m<o.graphicsData.length;m++)y=o.graphicsData[m],f=this.getWebGLData(t,0),y.nativeLines&&y.lineWidth&&(g=this.getWebGLData(t,0,!0),t.lastIndex++),y.type===r.SHAPES.POLY&&(0,u.default)(y,f,g),y.type===r.SHAPES.RECT?(0,c.default)(y,f,g):y.type===r.SHAPES.CIRC||y.type===r.SHAPES.ELIP?(0,d.default)(y,f,g):y.type===r.SHAPES.RREC&&(0,h.default)(y,f,g),t.lastIndex++;this.renderer.bindVao(null);for(var _=0;_<t.data.length;_++)(f=t.data[_]).dirty&&f.upload()},e.prototype.getWebGLData=function(i,e,t){var n=i.data[i.data.length-1];return(!n||n.nativeLines!==t||32e4<n.points.length)&&((n=this.graphicsDataPool.pop()||new a.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=t,n.reset(e),i.data.push(n)),n.dirty=!0,n},e}(i.default);t.default=l,o.default.registerPlugin("graphics",l)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":124,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(a,e,t){t.__esModule=!0;var o=function(t){return t&&t.__esModule?t:{default:t}}(a("pixi-gl-core")),n=function(){function a(e,t,n){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.gl=e,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=o.default.GLBuffer.createVertexBuffer(e),this.indexBuffer=o.default.GLBuffer.createIndexBuffer(e),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=t,this.vao=new o.default.VertexArrayObject(e,n).addIndex(this.indexBuffer).addAttribute(this.buffer,t.attributes.aVertexPosition,e.FLOAT,!1,24,0).addAttribute(this.buffer,t.attributes.aColor,e.FLOAT,!1,24,8)}return a.prototype.reset=function(){this.points.length=0,this.indices.length=0},a.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},a.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},a}();t.default=n},{"pixi-gl-core":12}],59:[function(a,e,t){t.__esModule=!0;var n=function(a){function e(t){return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t,"attribute vec2 aVertexPosition;\nattribute vec4 aColor;\nuniform mat3 translationMatrix;\nuniform mat3 projectionMatrix;\nuniform float alpha;\nuniform vec3 tint;\nvarying vec4 vColor;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vColor = aColor * vec4(tint * alpha, alpha);\n}","varying vec4 vColor;\nvoid main(void){\n   gl_FragColor = vColor;\n}"))}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e}(function(t){return t&&t.__esModule?t:{default:t}}(a("../../../Shader")).default);t.default=n},{"../../../Shader":44}],60:[function(a,e,t){t.__esModule=!0,t.default=function(i,e,t){var o=i.shape,E=o.x,a=o.y,l,S;if(i.type===r.SHAPES.CIRC?(l=o.radius,S=o.radius):(l=o.width,S=o.height),0!==l&&0!==S){var C=Math.floor(30*Math.sqrt(o.radius))||Math.floor(15*Math.sqrt(o.width+o.height)),h=2*Math.PI/C;if(i.fill){var d=(0,n.hex2rgb)(i.fillColor),p=i.fillAlpha,f=d[0]*p,g=d[1]*p,m=d[2]*p,v=e.points,y=e.indices,b=v.length/6;y.push(b);for(var M=0;M<C+1;M++)v.push(E,a,f,g,m,p),v.push(E+Math.sin(h*M)*l,a+Math.cos(h*M)*S,f,g,m,p),y.push(b++,b++);y.push(b-1)}if(i.lineWidth){var P=i.points;i.points=[];for(var w=0;w<C+1;w++)i.points.push(E+Math.sin(h*w)*l,a+Math.cos(h*w)*S);(0,s.default)(i,e,t),i.points=P}}};var s=function(t){return t&&t.__esModule?t:{default:t}}(a("./buildLine")),r=a("../../../const"),n=a("../../../utils")},{"../../../const":46,"../../../utils":124,"./buildLine":61}],61:[function(a,e,t){t.__esModule=!0,t.default=function(a,e,t){a.nativeLines?function(i,e){var t=0,m=i.points;if(0!==m.length){var r=e.points,o=m.length/2,s=(0,W.hex2rgb)(i.lineColor),a=i.lineAlpha,l=s[0]*a,u=s[1]*a,c=s[2]*a;for(t=1;t<o;t++){var h=m[2*(t-1)],d=m[2*(t-1)+1],p=m[2*t],f=m[2*t+1];r.push(h,d),r.push(l,u,c,a),r.push(p,f),r.push(l,u,c,a)}}}(a,t):function(r,e){var t=r.points;if(0!==t.length){var i=new Y.Point(t[0],t[1]),o=new Y.Point(t[t.length-2],t[t.length-1]);if(i.x===o.x&&i.y===o.y){(t=t.slice()).pop(),t.pop();var z=(o=new Y.Point(t[t.length-2],t[t.length-1])).x+.5*(i.x-o.x),a=o.y+.5*(i.y-o.y);t.unshift(z,a),t.push(z,a)}var l=e.points,u=e.indices,c=t.length/2,h=t.length,V=l.length/6,q=r.lineWidth/2,f=(0,W.hex2rgb)(r.lineColor),g=r.lineAlpha,m=f[0]*g,v=f[1]*g,y=f[2]*g,b=t[0],K=t[1],Z=t[2],Q=t[3],J=0,ee=0,te=-(K-Q),ne=b-Z,ae=0,re=0,ie=0,oe=0,se=Math.sqrt(te*te+ne*ne);te/=se,ne/=se,te*=q,ne*=q,l.push(b-te,K-ne,m,v,y,g),l.push(b+te,K+ne,m,v,y,g);for(var de=1;de<c-1;++de){b=t[2*(de-1)],K=t[2*(de-1)+1],Z=t[2*de],Q=t[2*de+1],J=t[2*(de+1)],ee=t[2*(de+1)+1],te=-(K-Q),ne=b-Z,te/=se=Math.sqrt(te*te+ne*ne),ne/=se,te*=q,ne*=q,ae=-(Q-ee),re=Z-J,ae/=se=Math.sqrt(ae*ae+re*re),re/=se;var le=-ne+K-(-ne+Q),k=-te+Z-(-te+b),L=(-te+b)*(-ne+Q)-(-te+Z)*(-ne+K),N=-(re*=q)+ee-(-re+Q),U=-(ae*=q)+Z-(-ae+J),F=(-ae+J)*(-re+Q)-(-ae+Z)*(-re+ee),B=le*U-N*k;if(.1>Math.abs(B))B+=10.1,l.push(Z-te,Q-ne,m,v,y,g),l.push(Z+te,Q+ne,m,v,y,g);else{var ue=(k*F-U*L)/B,G=(N*L-le*F)/B;(ue-Z)*(ue-Z)+(G-Q)*(G-Q)>196*q*q?(ie=te-ae,oe=ne-re,ie/=se=Math.sqrt(ie*ie+oe*oe),oe/=se,ie*=q,oe*=q,l.push(Z-ie,Q-oe),l.push(m,v,y,g),l.push(Z+ie,Q+oe),l.push(m,v,y,g),l.push(Z-ie,Q-oe),l.push(m,v,y,g),h++):(l.push(ue,G),l.push(m,v,y,g),l.push(Z-(ue-Z),Q-(G-Q)),l.push(m,v,y,g))}}b=t[2*(c-2)],K=t[2*(c-2)+1],Z=t[2*(c-1)],te=-(K-(Q=t[2*(c-1)+1])),ne=b-Z,te/=se=Math.sqrt(te*te+ne*ne),ne/=se,te*=q,ne*=q,l.push(Z-te,Q-ne),l.push(m,v,y,g),l.push(Z+te,Q+ne),l.push(m,v,y,g),u.push(V);for(var X=0;X<h;++X)u.push(V++);u.push(V-1)}}(a,e)};var Y=a("../../../math"),W=a("../../../utils")},{"../../../math":70,"../../../utils":124}],62:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0,t.default=function(s,e,t){s.points=s.shape.points.slice();var n=s.points;if(s.fill&&6<=n.length){for(var E=[],a=s.holes,l=0,S;l<a.length;l++)S=a[l],E.push(n.length/2),n=n.concat(S.points);var C=e.points,h=e.indices,d=n.length/2,p=(0,i.hex2rgb)(s.fillColor),f=s.fillAlpha,g=p[0]*f,m=p[1]*f,v=p[2]*f,y=(0,o.default)(n,E,2);if(!y)return;for(var b=C.length/6,_=0;_<y.length;_+=3)h.push(y[_]+b),h.push(y[_]+b),h.push(y[_+1]+b),h.push(y[_+2]+b),h.push(y[_+2]+b);for(var M=0;M<d;M++)C.push(n[2*M],n[2*M+1],g,m,v,f)}0<s.lineWidth&&(0,T.default)(s,e,t)};var T=n(a("./buildLine")),i=a("../../../utils"),o=n(a("earcut"))},{"../../../utils":124,"./buildLine":61,earcut:2}],63:[function(a,e,t){t.__esModule=!0,t.default=function(r,e,t){var i=r.shape,_=i.x,s=i.y,a=i.width,l=i.height;if(r.fill){var u=(0,n.hex2rgb)(r.fillColor),c=r.fillAlpha,h=u[0]*c,d=u[1]*c,p=u[2]*c,f=e.points,g=e.indices,m=f.length/6;f.push(_,s),f.push(h,d,p,c),f.push(_+a,s),f.push(h,d,p,c),f.push(_,s+l),f.push(h,d,p,c),f.push(_+a,s+l),f.push(h,d,p,c),g.push(m,m,m+1,m+2,m+3,m+3)}if(r.lineWidth){var b=r.points;r.points=[_,s,_+a,s,_+a,s+l,_,s+l,_,s],(0,o.default)(r,e,t),r.points=b}};var o=function(t){return t&&t.__esModule?t:{default:t}}(a("./buildLine")),n=a("../../../utils")},{"../../../utils":124,"./buildLine":61}],64:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}function m(a,e,t){return a+(e-a)*t}function C(i,e,t,n,r,o){for(var s=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],a=0,y=0,_=0,b=0,x=0,v=0,T=0,E=0;20>=T;++T)a=m(i,t,E=T/20),y=m(e,n,E),_=m(t,r,E),b=m(n,o,E),x=m(a,_,E),v=m(y,b,E),s.push(x,v);return s}t.__esModule=!0,t.default=function(o,e,t){var n=o.shape,s=n.x,l=n.y,u=n.width,c=n.height,h=n.radius,d=[];if(d.push(s,l+h),C(s,l+c-h,s,l+c,s+h,l+c,d),C(s+u-h,l+c,s+u,l+c,s+u,l+c-h,d),C(s+u,l+h,s+u,l,s+u-h,l,d),C(s+h,l,s,l,s,l+h+1e-10,d),o.fill){for(var p=(0,a.hex2rgb)(o.fillColor),f=o.fillAlpha,g=p[0]*f,m=p[1]*f,v=p[2]*f,y=e.points,b=e.indices,_=y.length/6,x=(0,r.default)(d,null,2),w=0,M=x.length;w<M;w+=3)b.push(x[w]+_),b.push(x[w]+_),b.push(x[w+1]+_),b.push(x[w+2]+_),b.push(x[w+2]+_);for(var E=0,A=d.length;E<A;E++)y.push(d[E],d[++E],g,m,v,f)}if(o.lineWidth){var I=o.points;o.points=d,(0,i.default)(o,e,t),o.points=I}};var r=n(d("earcut")),i=n(d("./buildLine")),a=d("../../../utils")},{"../../../utils":124,"./buildLine":61,earcut:2}],65:[function(z,e,t){function n(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}function r(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0,t.autoDetectRenderer=t.Application=t.Filter=t.SpriteMaskFilter=t.Quad=t.RenderTarget=t.ObjectRenderer=t.WebGLManager=t.Shader=t.CanvasRenderTarget=t.TextureUvs=t.VideoBaseTexture=t.BaseRenderTexture=t.RenderTexture=t.BaseTexture=t.Texture=t.Spritesheet=t.CanvasGraphicsRenderer=t.GraphicsRenderer=t.GraphicsData=t.Graphics=t.TextMetrics=t.TextStyle=t.Text=t.SpriteRenderer=t.CanvasTinter=t.CanvasSpriteRenderer=t.Sprite=t.TransformBase=t.TransformStatic=t.Transform=t.Container=t.DisplayObject=t.Bounds=t.glCore=t.WebGLRenderer=t.CanvasRenderer=t.ticker=t.utils=t.settings=void 0;var i=z("./const");Object.keys(i).forEach(function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(t,n,{enumerable:!0,get:function(){return i[n]}})});var o=z("./math");Object.keys(o).forEach(function(n){"default"!==n&&"__esModule"!==n&&Object.defineProperty(t,n,{enumerable:!0,get:function(){return o[n]}})});var s=z("pixi-gl-core");Object.defineProperty(t,"glCore",{enumerable:!0,get:function(){return r(s).default}});var a=z("./display/Bounds");Object.defineProperty(t,"Bounds",{enumerable:!0,get:function(){return r(a).default}});var l=z("./display/DisplayObject");Object.defineProperty(t,"DisplayObject",{enumerable:!0,get:function(){return r(l).default}});var u=z("./display/Container");Object.defineProperty(t,"Container",{enumerable:!0,get:function(){return r(u).default}});var c=z("./display/Transform");Object.defineProperty(t,"Transform",{enumerable:!0,get:function(){return r(c).default}});var h=z("./display/TransformStatic");Object.defineProperty(t,"TransformStatic",{enumerable:!0,get:function(){return r(h).default}});var d=z("./display/TransformBase");Object.defineProperty(t,"TransformBase",{enumerable:!0,get:function(){return r(d).default}});var p=z("./sprites/Sprite");Object.defineProperty(t,"Sprite",{enumerable:!0,get:function(){return r(p).default}});var f=z("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(t,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return r(f).default}});var g=z("./sprites/canvas/CanvasTinter");Object.defineProperty(t,"CanvasTinter",{enumerable:!0,get:function(){return r(g).default}});var m=z("./sprites/webgl/SpriteRenderer");Object.defineProperty(t,"SpriteRenderer",{enumerable:!0,get:function(){return r(m).default}});var v=z("./text/Text");Object.defineProperty(t,"Text",{enumerable:!0,get:function(){return r(v).default}});var y=z("./text/TextStyle");Object.defineProperty(t,"TextStyle",{enumerable:!0,get:function(){return r(y).default}});var b=z("./text/TextMetrics");Object.defineProperty(t,"TextMetrics",{enumerable:!0,get:function(){return r(b).default}});var _=z("./graphics/Graphics");Object.defineProperty(t,"Graphics",{enumerable:!0,get:function(){return r(_).default}});var x=z("./graphics/GraphicsData");Object.defineProperty(t,"GraphicsData",{enumerable:!0,get:function(){return r(x).default}});var w=z("./graphics/webgl/GraphicsRenderer");Object.defineProperty(t,"GraphicsRenderer",{enumerable:!0,get:function(){return r(w).default}});var T=z("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(t,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return r(T).default}});var E=z("./textures/Spritesheet");Object.defineProperty(t,"Spritesheet",{enumerable:!0,get:function(){return r(E).default}});var S=z("./textures/Texture");Object.defineProperty(t,"Texture",{enumerable:!0,get:function(){return r(S).default}});var I=z("./textures/BaseTexture");Object.defineProperty(t,"BaseTexture",{enumerable:!0,get:function(){return r(I).default}});var P=z("./textures/RenderTexture");Object.defineProperty(t,"RenderTexture",{enumerable:!0,get:function(){return r(P).default}});var M=z("./textures/BaseRenderTexture");Object.defineProperty(t,"BaseRenderTexture",{enumerable:!0,get:function(){return r(M).default}});var A=z("./textures/VideoBaseTexture");Object.defineProperty(t,"VideoBaseTexture",{enumerable:!0,get:function(){return r(A).default}});var O=z("./textures/TextureUvs");Object.defineProperty(t,"TextureUvs",{enumerable:!0,get:function(){return r(O).default}});var C=z("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(t,"CanvasRenderTarget",{enumerable:!0,get:function(){return r(C).default}});var R=z("./Shader");Object.defineProperty(t,"Shader",{enumerable:!0,get:function(){return r(R).default}});var D=z("./renderers/webgl/managers/WebGLManager");Object.defineProperty(t,"WebGLManager",{enumerable:!0,get:function(){return r(D).default}});var k=z("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(t,"ObjectRenderer",{enumerable:!0,get:function(){return r(k).default}});var L=z("./renderers/webgl/utils/RenderTarget");Object.defineProperty(t,"RenderTarget",{enumerable:!0,get:function(){return r(L).default}});var N=z("./renderers/webgl/utils/Quad");Object.defineProperty(t,"Quad",{enumerable:!0,get:function(){return r(N).default}});var U=z("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(t,"SpriteMaskFilter",{enumerable:!0,get:function(){return r(U).default}});var F=z("./renderers/webgl/filters/Filter");Object.defineProperty(t,"Filter",{enumerable:!0,get:function(){return r(F).default}});var B=z("./Application");Object.defineProperty(t,"Application",{enumerable:!0,get:function(){return r(B).default}});var j=z("./autoDetectRenderer");Object.defineProperty(t,"autoDetectRenderer",{enumerable:!0,get:function(){return j.autoDetectRenderer}});var G=n(z("./utils")),X=n(z("./ticker")),H=r(z("./settings")),Y=r(z("./renderers/canvas/CanvasRenderer")),W=r(z("./renderers/webgl/WebGLRenderer"));t.settings=H.default,t.utils=G,t.ticker=X,t.CanvasRenderer=Y.default,t.WebGLRenderer=W.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureUvs":116,"./textures/VideoBaseTexture":117,"./ticker":120,"./utils":124,"pixi-gl-core":12}],66:[function(d,e,t){function m(t){return 0>t?-1:0<t?1:0}t.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(d("./Matrix")),r=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],i=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],o=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],a=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],s=[],l=[];!function(){for(var u=0,c;16>u;u++){c=[],l.push(c);for(var y=0;16>y;y++)for(var _=m(r[u]*r[y]+o[u]*i[y]),h=m(i[u]*r[y]+a[u]*i[y]),d=m(r[u]*o[y]+o[u]*a[y]),p=m(i[u]*o[y]+a[u]*a[y]),f=0;16>f;f++)if(r[f]===_&&i[f]===h&&o[f]===d&&a[f]===p){c.push(f);break}}for(var b=0,x;16>b;b++)x=new n.default,x.set(r[b],i[b],o[b],a[b],0,0),s.push(x)}();var u={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(t){return r[t]},uY:function(t){return i[t]},vX:function(t){return o[t]},vY:function(t){return a[t]},inv:function(t){return 8&t?15&t:7&-t},add:function(n,e){return l[n][e]},sub:function(n,e){return l[n][u.inv(e)]},rotate180:function(t){return 4^t},isSwapWidthHeight:function(t){return 2==(3&t)},byDirection:function(n,e){return 2*Math.abs(n)<=Math.abs(e)?0<=e?u.S:u.N:2*Math.abs(e)<=Math.abs(n)?0<n?u.E:u.W:0<e?0<n?u.SE:u.SW:0<n?u.NE:u.NW},matrixAppendRotationInv:function(a,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,n=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,r=s[u.inv(e)];r.tx=t,r.ty=n,a.append(r)}};t.default=u},{"./Matrix":67}],67:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),s=function(t){return t&&t.__esModule?t:{default:t}}(a("./Point")),r=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,o=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.a=e,this.b=t,this.c=n,this.d=r,this.tx=i,this.ty=o,this.array=null}return a.prototype.fromArray=function(t){this.a=t[0],this.b=t[1],this.c=t[3],this.d=t[4],this.tx=t[2],this.ty=t[5]},a.prototype.set=function(a,e,t,n,r,i){return this.a=a,this.b=e,this.c=t,this.d=n,this.tx=r,this.ty=i,this},a.prototype.toArray=function(a,e){this.array||(this.array=new Float32Array(9));var t=e||this.array;return a?(t[0]=this.a,t[1]=this.b,t[2]=0,t[3]=this.c,t[4]=this.d,t[5]=0,t[6]=this.tx,t[7]=this.ty,t[8]=1):(t[0]=this.a,t[1]=this.c,t[2]=this.tx,t[3]=this.b,t[4]=this.d,t[5]=this.ty,t[6]=0,t[7]=0,t[8]=1),t},a.prototype.apply=function(a,e){e=e||new s.default;var i=a.x,n=a.y;return e.x=this.a*i+this.c*n+this.tx,e.y=this.b*i+this.d*n+this.ty,e},a.prototype.applyInverse=function(a,e){e=e||new s.default;var i=1/(this.a*this.d+this.c*-this.b),n=a.x,r=a.y;return e.x=this.d*i*n+-this.c*i*r+(this.ty*this.c-this.tx*this.d)*i,e.y=this.a*i*r+-this.b*i*n+(-this.ty*this.a+this.tx*this.b)*i,e},a.prototype.translate=function(n,e){return this.tx+=n,this.ty+=e,this},a.prototype.scale=function(n,e){return this.a*=n,this.d*=e,this.c*=n,this.b*=e,this.tx*=n,this.ty*=e,this},a.prototype.rotate=function(a){var e=Math.cos(a),t=Math.sin(a),n=this.a,r=this.c,i=this.tx;return this.a=n*e-this.b*t,this.b=n*t+this.b*e,this.c=r*e-this.d*t,this.d=r*t+this.d*e,this.tx=i*e-this.ty*t,this.ty=i*t+this.ty*e,this},a.prototype.append=function(a){var e=this.a,t=this.b,n=this.c,r=this.d;return this.a=a.a*e+a.b*n,this.b=a.a*t+a.b*r,this.c=a.c*e+a.d*n,this.d=a.c*t+a.d*r,this.tx=a.tx*e+a.ty*n+this.tx,this.ty=a.tx*t+a.ty*r+this.ty,this},a.prototype.setTransform=function(_,e,t,n,r,i,o,s,a){var l=Math.sin(o),u=Math.cos(o),c=Math.cos(a),h=Math.sin(a),d=-Math.sin(s),p=Math.cos(s),f=u*r,g=l*r,m=-l*i,b=u*i;return this.a=c*f+h*m,this.b=c*g+h*b,this.c=d*f+p*m,this.d=d*g+p*b,this.tx=_+(t*f+n*m),this.ty=e+(t*g+n*b),this},a.prototype.prepend=function(a){var e=this.tx;if(1!==a.a||0!==a.b||0!==a.c||1!==a.d){var t=this.a,n=this.c;this.a=t*a.a+this.b*a.c,this.b=t*a.b+this.b*a.d,this.c=n*a.a+this.d*a.c,this.d=n*a.b+this.d*a.d}return this.tx=e*a.a+this.ty*a.c+a.tx,this.ty=e*a.b+this.ty*a.d+a.ty,this},a.prototype.decompose=function(a){var e=this.a,t=this.b,n=this.c,r=this.d,i=-Math.atan2(-n,r),o=Math.atan2(t,e);return 1e-5>Math.abs(i+o)?(a.rotation=o,0>e&&0<=r&&(a.rotation+=0>=a.rotation?Math.PI:-Math.PI),a.skew.x=a.skew.y=0):(a.skew.x=i,a.skew.y=o),a.scale.x=Math.sqrt(e*e+t*t),a.scale.y=Math.sqrt(n*n+r*r),a.position.x=this.tx,a.position.y=this.ty,a},a.prototype.invert=function(){var a=this.a,e=this.b,t=this.c,n=this.d,r=this.tx,i=a*n-e*t;return this.a=n/i,this.b=-e/i,this.c=-t/i,this.d=a/i,this.tx=(t*this.ty-n*r)/i,this.ty=-(a*this.ty-e*r)/i,this},a.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},a.prototype.clone=function(){var e=new a;return e.a=this.a,e.b=this.b,e.c=this.c,e.d=this.d,e.tx=this.tx,e.ty=this.ty,e},a.prototype.copy=function(t){return t.a=this.a,t.b=this.b,t.c=this.c,t.d=this.d,t.tx=this.tx,t.ty=this.ty,t},n(a,null,[{key:"IDENTITY",get:function(){return new a}},{key:"TEMP_MATRIX",get:function(){return new a}}]),a}();t.default=r},{"./Point":69}],68:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(){function a(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this._x=n,this._y=r,this.cb=e,this.scope=t}return a.prototype.set=function(a,e){var t=a||0,n=e||(0===e?0:t);this._x===t&&this._y===n||(this._x=t,this._y=n,this.cb.call(this.scope))},a.prototype.copy=function(t){this._x===t.x&&this._y===t.y||(this._x=t.x,this._y=t.y,this.cb.call(this.scope))},n(a,[{key:"x",get:function(){return this._x},set:function(t){this._x!==t&&(this._x=t,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(t){this._y!==t&&(this._y=t,this.cb.call(this.scope))}}]),a}();t.default=r},{}],69:[function(a,e,t){t.__esModule=!0;var n=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.x=e,this.y=t}return a.prototype.clone=function(){return new a(this.x,this.y)},a.prototype.copy=function(t){this.set(t.x,t.y)},a.prototype.equals=function(t){return t.x===this.x&&t.y===this.y},a.prototype.set=function(n,e){this.x=n||0,this.y=e||(0===e?0:this.x)},a}();t.default=n},{}],70:[function(p,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=p("./Point");Object.defineProperty(t,"Point",{enumerable:!0,get:function(){return n(r).default}});var i=p("./ObservablePoint");Object.defineProperty(t,"ObservablePoint",{enumerable:!0,get:function(){return n(i).default}});var o=p("./Matrix");Object.defineProperty(t,"Matrix",{enumerable:!0,get:function(){return n(o).default}});var s=p("./GroupD8");Object.defineProperty(t,"GroupD8",{enumerable:!0,get:function(){return n(s).default}});var a=p("./shapes/Circle");Object.defineProperty(t,"Circle",{enumerable:!0,get:function(){return n(a).default}});var l=p("./shapes/Ellipse");Object.defineProperty(t,"Ellipse",{enumerable:!0,get:function(){return n(l).default}});var u=p("./shapes/Polygon");Object.defineProperty(t,"Polygon",{enumerable:!0,get:function(){return n(u).default}});var c=p("./shapes/Rectangle");Object.defineProperty(t,"Rectangle",{enumerable:!0,get:function(){return n(c).default}});var h=p("./shapes/RoundedRectangle");Object.defineProperty(t,"RoundedRectangle",{enumerable:!0,get:function(){return n(h).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(a,e,t){t.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(a("./Rectangle")),s=a("../../const"),r=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.x=e,this.y=t,this.radius=n,this.type=s.SHAPES.CIRC}return a.prototype.clone=function(){return new a(this.x,this.y,this.radius)},a.prototype.contains=function(a,e){if(0>=this.radius)return!1;var t=this.radius*this.radius,n=this.x-a,o=this.y-e;return n*=n,o*=o,n+o<=t},a.prototype.getBounds=function(){return new n.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},a}();t.default=r},{"../../const":46,"./Rectangle":74}],72:[function(a,e,t){t.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(a("./Rectangle")),s=a("../../const"),r=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.x=e,this.y=t,this.width=n,this.height=r,this.type=s.SHAPES.ELIP}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.contains=function(a,e){if(0>=this.width||0>=this.height)return!1;var t=(a-this.x)/this.width,i=(e-this.y)/this.height;return t*=t,i*=i,1>=t+i},a.prototype.getBounds=function(){return new n.default(this.x-this.width,this.y-this.height,this.width,this.height)},a}();t.default=r},{"../../const":46,"./Rectangle":74}],73:[function(a,e,t){t.__esModule=!0;var d=function(t){return t&&t.__esModule?t:{default:t}}(a("../Point")),r=a("../../const"),n=function(){function i(){for(var e=arguments.length,t=Array(e),u=0;u<e;u++)t[u]=arguments[u];if(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i),Array.isArray(t[0])&&(t=t[0]),t[0]instanceof d.default){for(var p=[],s=0,c=t.length;s<c;s++)p.push(t[s].x,t[s].y);t=p}this.closed=!0,this.points=t,this.type=r.SHAPES.POLY}return i.prototype.clone=function(){return new i(this.points.slice())},i.prototype.close=function(){var t=this.points;t[0]===t[t.length-2]&&t[1]===t[t.length-1]||t.push(t[0],t[1])},i.prototype.contains=function(d,e){for(var t=!1,p=this.points.length/2,r=0,c=p-1;r<p;c=r++){var h=this.points[2*r],s=this.points[2*r+1],a=this.points[2*c],l=this.points[2*c+1];s>e!=l>e&&d<(e-s)/(l-s)*(a-h)+h&&(t=!t)}return t},i}();t.default=n},{"../../const":46,"../Point":69}],74:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),s=a("../../const"),r=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.x=+e,this.y=+t,this.width=+n,this.height=+r,this.type=s.SHAPES.RECT}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height)},a.prototype.copy=function(t){return this.x=t.x,this.y=t.y,this.width=t.width,this.height=t.height,this},a.prototype.contains=function(n,e){return!(0>=this.width||0>=this.height)&&n>=this.x&&n<this.x+this.width&&e>=this.y&&e<this.y+this.height},a.prototype.pad=function(n,a){n=n||0,a=a||(0===a?0:n),this.x-=n,this.y-=a,this.width+=2*n,this.height+=2*a},a.prototype.fit=function(t){this.x<t.x&&(this.width+=this.x,0>this.width&&(this.width=0),this.x=t.x),this.y<t.y&&(this.height+=this.y,0>this.height&&(this.height=0),this.y=t.y),this.x+this.width>t.x+t.width&&(this.width=t.width-this.x,0>this.width&&(this.width=0)),this.y+this.height>t.y+t.height&&(this.height=t.height-this.y,0>this.height&&(this.height=0))},a.prototype.enlarge=function(a){var e=Math.min(this.x,a.x),t=Math.max(this.x+this.width,a.x+a.width),n=Math.min(this.y,a.y),r=Math.max(this.y+this.height,a.y+a.height);this.x=e,this.width=t-e,this.y=n,this.height=r-n},n(a,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new a(0,0,0,0)}}]),a}();t.default=r},{"../../const":46}],75:[function(a,e,t){t.__esModule=!0;var d=a("../../const"),n=function(){function a(){var e=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,i=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.x=e,this.y=t,this.width=n,this.height=r,this.radius=i,this.type=d.SHAPES.RREC}return a.prototype.clone=function(){return new a(this.x,this.y,this.width,this.height,this.radius)},a.prototype.contains=function(a,e){if(0>=this.width||0>=this.height)return!1;if(a>=this.x&&a<=this.x+this.width&&e>=this.y&&e<=this.y+this.height){if(e>=this.y+this.radius&&e<=this.y+this.height-this.radius||a>=this.x+this.radius&&a<=this.x+this.width-this.radius)return!0;var t=a-(this.x+this.radius),o=e-(this.y+this.radius),s=this.radius*this.radius;if(t*t+o*o<=s)return!0;if((t=a-(this.x+this.width-this.radius))*t+o*o<=s)return!0;if(o=e-(this.y+this.height-this.radius),t*t+o*o<=s)return!0;if((t=a-(this.x+this.radius))*t+o*o<=s)return!0}return!1},a}();t.default=n},{"../../const":46}],76:[function(f,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),g=f("../utils"),o=f("../math"),s=f("../const"),a=n(f("../settings")),l=n(f("../display/Container")),u=n(f("../textures/RenderTexture")),i=n(f("eventemitter3")),c=new o.Matrix,d=function(d){function e(t,n,u,i){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var p=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,d.call(this));return(0,g.sayHello)(t),"number"==typeof n&&(n=Object.assign({width:n,height:u||a.default.RENDER_OPTIONS.height},i)),n=Object.assign({},a.default.RENDER_OPTIONS,n),p.options=n,p.type=s.RENDERER_TYPE.UNKNOWN,p.screen=new o.Rectangle(0,0,n.width,n.height),p.view=n.view||document.createElement("canvas"),p.resolution=n.resolution||a.default.RESOLUTION,p.transparent=n.transparent,p.autoResize=n.autoResize||!1,p.blendModes=null,p.preserveDrawingBuffer=n.preserveDrawingBuffer,p.clearBeforeRender=n.clearBeforeRender,p.roundPixels=n.roundPixels,p._backgroundColor=0,p._backgroundColorRgba=[0,0,0,0],p._backgroundColorString="#000000",p.backgroundColor=n.backgroundColor||p._backgroundColor,p._tempDisplayObjectParent=new l.default,p._lastObjectRendered=p._tempDisplayObjectParent,p}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,d),e.prototype.resize=function(n,e){this.screen.width=n,this.screen.height=e,this.view.width=n*this.resolution,this.view.height=e*this.resolution,this.autoResize&&(this.view.style.width=n+"px",this.view.style.height=e+"px")},e.prototype.generateTexture=function(a,e,t){var n=a.getLocalBounds(),r=u.default.create(0|n.width,0|n.height,e,t);return c.tx=-n.x,c.ty=-n.y,this.render(a,r,!1,c,!0),r},e.prototype.destroy=function(t){t&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=s.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},r(e,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(t){this._backgroundColor=t,this._backgroundColorString=(0,g.hex2string)(t),(0,g.hex2rgb)(t,this._backgroundColorRgba)}}]),e}(i.default);t.default=d},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":124,eventemitter3:3}],77:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=n(d("../SystemRenderer")),p=n(d("./utils/CanvasMaskManager")),f=n(d("./utils/CanvasRenderTarget")),o=n(d("./utils/mapCanvasBlendModesToPixi")),a=d("../../utils"),g=d("../../const"),i=n(d("../../settings")),s=function(a){function e(t,n,r){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,"Canvas",t,n,r));return i.type=g.RENDERER_TYPE.CANVAS,i.rootContext=i.view.getContext("2d",{alpha:i.transparent}),i.context=i.rootContext,i.refresh=!0,i.maskManager=new p.default(i),i.smoothProperty="imageSmoothingEnabled",i.rootContext.imageSmoothingEnabled||(i.rootContext.webkitImageSmoothingEnabled?i.smoothProperty="webkitImageSmoothingEnabled":i.rootContext.mozImageSmoothingEnabled?i.smoothProperty="mozImageSmoothingEnabled":i.rootContext.oImageSmoothingEnabled?i.smoothProperty="oImageSmoothingEnabled":i.rootContext.msImageSmoothingEnabled&&(i.smoothProperty="msImageSmoothingEnabled")),i.initPlugins(),i.blendModes=(0,o.default)(),i._activeBlendMode=null,i.renderingToScreen=!1,i.resize(i.options.width,i.options.height),i}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.render=function(s,e,d,n,r){if(this.view){this.renderingToScreen=!e,this.emit("prerender");var i=this.resolution;e?((e=e.baseTexture||e)._canvasRenderTarget||(e._canvasRenderTarget=new f.default(e.width,e.height,e.resolution),e.source=e._canvasRenderTarget.canvas,e.valid=!0),this.context=e._canvasRenderTarget.context,this.resolution=e._canvasRenderTarget.resolution):this.context=this.rootContext;var o=this.context;if(e||(this._lastObjectRendered=s),!r){var a=s.parent,l=this._tempDisplayObjectParent.transform.worldTransform;n?(n.copy(l),this._tempDisplayObjectParent.transform._worldID=-1):l.identity(),s.parent=this._tempDisplayObjectParent,s.updateTransform(),s.parent=a}o.setTransform(1,0,0,1,0,0),o.globalAlpha=1,this._activeBlendMode=g.BLEND_MODES.NORMAL,o.globalCompositeOperation=this.blendModes[g.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(o.fillStyle="black",o.clear()),(void 0===d?this.clearBeforeRender:d)&&this.renderingToScreen&&(this.transparent?o.clearRect(0,0,this.width,this.height):(o.fillStyle=this._backgroundColorString,o.fillRect(0,0,this.width,this.height)));var u=this.context;this.context=o,s.renderCanvas(this),this.context=u,this.resolution=i,this.emit("postrender")}},e.prototype.clear=function(n){var a=this.context;n=n||this._backgroundColorString,!this.transparent&&n?(a.fillStyle=n,a.fillRect(0,0,this.width,this.height)):a.clearRect(0,0,this.width,this.height)},e.prototype.setBlendMode=function(t){this._activeBlendMode!==t&&(this._activeBlendMode=t,this.context.globalCompositeOperation=this.blendModes[t])},e.prototype.destroy=function(e){this.destroyPlugins(),a.prototype.destroy.call(this,e),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},e.prototype.resize=function(e,t){a.prototype.resize.call(this,e,t),this.smoothProperty&&(this.rootContext[this.smoothProperty]=i.default.SCALE_MODE===g.SCALE_MODES.LINEAR)},e.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},e}(r.default);t.default=s,a.pluginTarget.mixin(s)},{"../../const":46,"../../settings":101,"../../utils":124,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(a,e,t){t.__esModule=!0;var n=a("../../../const"),r=function(){function a(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.renderer=e}return a.prototype.pushMask=function(a){var e=this.renderer;e.context.save();var t=a.alpha,n=a.transform.worldTransform,r=e.resolution;e.context.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),a._texture||(this.renderGraphicsShape(a),e.context.clip()),a.worldAlpha=t},a.prototype.renderGraphicsShape=function(r){var e=this.renderer.context,t=r.graphicsData.length;if(0!==t){e.beginPath();for(var S=0;S<t;S++){var C=r.graphicsData[S],o=C.shape;if(C.type===n.SHAPES.POLY){var s=o.points;e.moveTo(s[0],s[1]);for(var a=1;a<s.length/2;a++)e.lineTo(s[2*a],s[2*a+1]);s[0]===s[s.length-2]&&s[1]===s[s.length-1]&&e.closePath()}else if(C.type===n.SHAPES.RECT)e.rect(o.x,o.y,o.width,o.height),e.closePath();else if(C.type===n.SHAPES.CIRC)e.arc(o.x,o.y,o.radius,0,2*Math.PI),e.closePath();else if(C.type===n.SHAPES.ELIP){var M=2*o.width,u=2*o.height,c=o.x-M/2,h=o.y-u/2,d=.5522848*(M/2),p=.5522848*(u/2),f=c+M,g=h+u,m=c+M/2,v=h+u/2;e.moveTo(c,v),e.bezierCurveTo(c,v-p,m-d,h,m,h),e.bezierCurveTo(m+d,h,f,v-p,f,v),e.bezierCurveTo(f,v+p,m+d,g,m,g),e.bezierCurveTo(m-d,g,c,v+p,c,v),e.closePath()}else if(C.type===n.SHAPES.RREC){var y=o.x,b=o.y,_=o.width,x=o.height,w=o.radius,P=0|Math.min(_,x)/2;w=w>P?P:w,e.moveTo(y,b+w),e.lineTo(y,b+x-w),e.quadraticCurveTo(y,b+x,y+w,b+x),e.lineTo(y+_-w,b+x),e.quadraticCurveTo(y+_,b+x,y+_,b+x-w),e.lineTo(y+_,b+w),e.quadraticCurveTo(y+_,b,y+_-w,b),e.lineTo(y+w,b),e.quadraticCurveTo(y,b,y,b+w),e.closePath()}}}},a.prototype.popMask=function(t){t.context.restore(),t.invalidateBlendMode()},a.prototype.destroy=function(){},a}();t.default=r},{"../../../const":46}],79:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),s=function(t){return t&&t.__esModule?t:{default:t}}(a("../../../settings")),r=function(){function a(e,t,n){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=n||s.default.RESOLUTION,this.resize(e,t)}return a.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},a.prototype.resize=function(n,e){this.canvas.width=n*this.resolution,this.canvas.height=e*this.resolution},a.prototype.destroy=function(){this.context=null,this.canvas=null},n(a,[{key:"width",get:function(){return this.canvas.width},set:function(t){this.canvas.width=t}},{key:"height",get:function(){return this.canvas.height},set:function(t){this.canvas.height=t}}]),a}();t.default=r},{"../../../settings":101}],80:[function(a,e,t){function d(a){var e=document.createElement("canvas");e.width=6,e.height=1;var t=e.getContext("2d");return t.fillStyle=a,t.fillRect(0,0,6,1),e}t.__esModule=!0,t.default=function(){if("undefined"==typeof document)return!1;var a=d("#ff00ff"),e=d("#ffff00"),t=document.createElement("canvas");t.width=6,t.height=1;var n=t.getContext("2d");n.globalCompositeOperation="multiply",n.drawImage(a,0,0),n.drawImage(e,2,0);var r=n.getImageData(2,0,1,1);if(!r)return!1;var i=r.data;return 255===i[0]&&0===i[1]&&0===i[2]}},{}],81:[function(a,e,t){t.__esModule=!0,t.default=function(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,r.default)()?(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="multiply",t[n.BLEND_MODES.SCREEN]="screen",t[n.BLEND_MODES.OVERLAY]="overlay",t[n.BLEND_MODES.DARKEN]="darken",t[n.BLEND_MODES.LIGHTEN]="lighten",t[n.BLEND_MODES.COLOR_DODGE]="color-dodge",t[n.BLEND_MODES.COLOR_BURN]="color-burn",t[n.BLEND_MODES.HARD_LIGHT]="hard-light",t[n.BLEND_MODES.SOFT_LIGHT]="soft-light",t[n.BLEND_MODES.DIFFERENCE]="difference",t[n.BLEND_MODES.EXCLUSION]="exclusion",t[n.BLEND_MODES.HUE]="hue",t[n.BLEND_MODES.SATURATION]="saturate",t[n.BLEND_MODES.COLOR]="color",t[n.BLEND_MODES.LUMINOSITY]="luminosity"):(t[n.BLEND_MODES.NORMAL]="source-over",t[n.BLEND_MODES.ADD]="lighter",t[n.BLEND_MODES.MULTIPLY]="source-over",t[n.BLEND_MODES.SCREEN]="source-over",t[n.BLEND_MODES.OVERLAY]="source-over",t[n.BLEND_MODES.DARKEN]="source-over",t[n.BLEND_MODES.LIGHTEN]="source-over",t[n.BLEND_MODES.COLOR_DODGE]="source-over",t[n.BLEND_MODES.COLOR_BURN]="source-over",t[n.BLEND_MODES.HARD_LIGHT]="source-over",t[n.BLEND_MODES.SOFT_LIGHT]="source-over",t[n.BLEND_MODES.DIFFERENCE]="source-over",t[n.BLEND_MODES.EXCLUSION]="source-over",t[n.BLEND_MODES.HUE]="source-over",t[n.BLEND_MODES.SATURATION]="source-over",t[n.BLEND_MODES.COLOR]="source-over",t[n.BLEND_MODES.LUMINOSITY]="source-over"),t[n.BLEND_MODES.NORMAL_NPM]=t[n.BLEND_MODES.NORMAL],t[n.BLEND_MODES.ADD_NPM]=t[n.BLEND_MODES.ADD],t[n.BLEND_MODES.SCREEN_NPM]=t[n.BLEND_MODES.SCREEN],t};var n=a("../../../const"),r=function(t){return t&&t.__esModule?t:{default:t}}(a("./canUseNewCanvasBlendModes"))},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(a,e,t){t.__esModule=!0;var n=a("../../const"),r=function(t){return t&&t.__esModule?t:{default:t}}(a("../../settings")),i=function(){function a(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.renderer=e,this.count=0,this.checkCount=0,this.maxIdle=r.default.GC_MAX_IDLE,this.checkCountMax=r.default.GC_MAX_CHECK_COUNT,this.mode=r.default.GC_MODE}return a.prototype.update=function(){this.count++,this.mode!==n.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},a.prototype.run=function(){for(var a=this.renderer.textureManager,e=a._managedTextures,t=!1,d=0,l;d<e.length;d++)l=e[d],!l._glRenderTargets&&this.count-l.touched>this.maxIdle&&(a.destroyTexture(l,!0),e[d]=null,t=!0);if(t){for(var u=0,p=0;p<e.length;p++)null!==e[p]&&(e[u++]=e[p]);e.length=u}},a.prototype.unload=function(a){var e=this.renderer.textureManager;a._texture&&a._texture._glRenderTargets&&e.destroyTexture(a._texture,!0);for(var t=a.children.length-1;0<=t;t--)this.unload(a.children[t])},a}();t.default=i},{"../../const":46,"../../settings":101}],83:[function(d,e,t){t.__esModule=!0;var n=d("pixi-gl-core"),r=d("../../const"),i=function(t){return t&&t.__esModule?t:{default:t}}(d("./utils/RenderTarget")),l=d("../../utils"),o=function(){function a(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.renderer=e,this.gl=e.gl,this._managedTextures=[]}return a.prototype.bindTexture=function(){},a.prototype.getTexture=function(){},a.prototype.updateTexture=function(o,e){var d=this.gl,p=!!o._glRenderTargets;if(!o.hasLoaded)return null;var s=this.renderer.boundTextures;if(void 0===e){e=0;for(var a=0;a<s.length;++a)if(s[a]===o){e=a;break}}s[e]=o,d.activeTexture(d.TEXTURE0+e);var h=o._glTextures[this.renderer.CONTEXT_UID];if(h)p?o._glRenderTargets[this.renderer.CONTEXT_UID].resize(o.width,o.height):h.upload(o.source);else{if(p){var f=new i.default(this.gl,o.width,o.height,o.scaleMode,o.resolution);f.resize(o.width,o.height),o._glRenderTargets[this.renderer.CONTEXT_UID]=f,h=f.texture}else(h=new n.GLTexture(this.gl,null,null,null,null)).bind(e),h.premultiplyAlpha=!0,h.upload(o.source);o._glTextures[this.renderer.CONTEXT_UID]=h,o.on("update",this.updateTexture,this),o.on("dispose",this.destroyTexture,this),this._managedTextures.push(o),o.isPowerOfTwo?(o.mipmap&&h.enableMipmap(),o.wrapMode===r.WRAP_MODES.CLAMP?h.enableWrapClamp():o.wrapMode===r.WRAP_MODES.REPEAT?h.enableWrapRepeat():h.enableWrapMirrorRepeat()):h.enableWrapClamp(),o.scaleMode===r.SCALE_MODES.NEAREST?h.enableNearestScaling():h.enableLinearScaling()}return h},a.prototype.destroyTexture=function(a,s){if((a=a.baseTexture||a).hasLoaded){var t=this.renderer.CONTEXT_UID,n=a._glTextures,r=a._glRenderTargets;if(n[t]&&(this.renderer.unbindTexture(a),n[t].destroy(),a.off("update",this.updateTexture,this),a.off("dispose",this.destroyTexture,this),delete n[t],!s)){var i=this._managedTextures.indexOf(a);-1!==i&&(0,l.removeItems)(this._managedTextures,i,1)}r&&r[t]&&(r[t].destroy(),delete r[t])}},a.prototype.removeAll=function(){for(var n=0,a;n<this._managedTextures.length;++n)a=this._managedTextures[n],a._glTextures[this.renderer.CONTEXT_UID]&&delete a._glTextures[this.renderer.CONTEXT_UID]},a.prototype.destroy=function(){for(var n=0,a;n<this._managedTextures.length;++n)a=this._managedTextures[n],this.destroyTexture(a,!0),a.off("update",this.updateTexture,this),a.off("dispose",this.destroyTexture,this);this._managedTextures=null},a}();t.default=o},{"../../const":46,"../../utils":124,"./utils/RenderTarget":96,"pixi-gl-core":12}],84:[function(x,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=n(x("../SystemRenderer")),T=n(x("./managers/MaskManager")),o=n(x("./managers/StencilManager")),s=n(x("./managers/FilterManager")),a=n(x("./utils/RenderTarget")),l=n(x("./utils/ObjectRenderer")),u=n(x("./TextureManager")),c=n(x("../../textures/BaseTexture")),h=n(x("./TextureGarbageCollector")),d=n(x("./WebGLState")),p=n(x("./utils/mapWebGLDrawModesToPixi")),f=n(x("./utils/validateContext")),i=x("../../utils"),g=n(x("pixi-gl-core")),m=x("../../const"),y=0,v=function(_){function e(t,n,r){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,_.call(this,"WebGL",t,n,r));return i.legacy=i.options.legacy,i.legacy&&(g.default.VertexArrayObject.FORCE_NATIVE=!0),i.type=m.RENDERER_TYPE.WEBGL,i.handleContextLost=i.handleContextLost.bind(i),i.handleContextRestored=i.handleContextRestored.bind(i),i.view.addEventListener("webglcontextlost",i.handleContextLost,!1),i.view.addEventListener("webglcontextrestored",i.handleContextRestored,!1),i._contextOptions={alpha:i.transparent,antialias:i.options.antialias,premultipliedAlpha:i.transparent&&"notMultiplied"!==i.transparent,stencil:!0,preserveDrawingBuffer:i.options.preserveDrawingBuffer,powerPreference:i.options.powerPreference},i._backgroundColorRgba[3]=i.transparent?0:1,i.maskManager=new T.default(i),i.stencilManager=new o.default(i),i.emptyRenderer=new l.default(i),i.currentRenderer=i.emptyRenderer,i.textureManager=null,i.filterManager=null,i.initPlugins(),i.options.context&&(0,f.default)(i.options.context),i.gl=i.options.context||g.default.createContext(i.view,i._contextOptions),i.CONTEXT_UID=y++,i.state=new d.default(i.gl),i.renderingToScreen=!0,i.boundTextures=null,i._activeShader=null,i._activeVao=null,i._activeRenderTarget=null,i._initContext(),i.drawModes=(0,p.default)(i.gl),i._nextTextureLocation=0,i.setBlendMode(0),i}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,_),e.prototype._initContext=function(){var d=this.gl;d.isContextLost()&&d.getExtension("WEBGL_lose_context")&&d.getExtension("WEBGL_lose_context").restoreContext();var e=d.getParameter(d.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=Array(e),this.emptyTextures=Array(e),this.textureManager=new u.default(this),this.filterManager=new s.default(this),this.textureGC=new h.default(this),this.state.resetToDefault(),this.rootRenderTarget=new a.default(d,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var t=new g.default.GLTexture.fromData(d,null,1,1),n={_glTextures:{}};n._glTextures[this.CONTEXT_UID]={};for(var r=0,l;r<e;r++)l=new c.default,l._glTextures[this.CONTEXT_UID]=t,this.boundTextures[r]=n,this.emptyTextures[r]=l,this.bindTexture(null,r);this.emit("context",d),this.resize(this.screen.width,this.screen.height)},e.prototype.render=function(a,e,t,n,r){if(this.renderingToScreen=!e,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,e||(this._lastObjectRendered=a),!r){var i=a.parent;a.parent=this._tempDisplayObjectParent,a.updateTransform(),a.parent=i}this.bindRenderTexture(e,n),this.currentRenderer.start(),(void 0===t?this.clearBeforeRender:t)&&this._activeRenderTarget.clear(),a.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},e.prototype.setObjectRenderer=function(t){this.currentRenderer!==t&&(this.currentRenderer.stop(),this.currentRenderer=t,this.currentRenderer.start())},e.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},e.prototype.resize=function(n,e){r.default.prototype.resize.call(this,n,e),this.rootRenderTarget.resize(n,e),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},e.prototype.setBlendMode=function(t){this.state.setBlendMode(t)},e.prototype.clear=function(t){this._activeRenderTarget.clear(t)},e.prototype.setTransform=function(t){this._activeRenderTarget.transform=t},e.prototype.clearRenderTexture=function(a,e){var t=a.baseTexture._glRenderTargets[this.CONTEXT_UID];return t&&t.clear(e),this},e.prototype.bindRenderTexture=function(a,e){var t;if(a){var i=a.baseTexture;i._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(i,0),this.unbindTexture(i),(t=i._glRenderTargets[this.CONTEXT_UID]).setFrame(a.frame)}else t=this.rootRenderTarget;return t.transform=e,this.bindRenderTarget(t),this},e.prototype.bindRenderTarget=function(t){return t!==this._activeRenderTarget&&(this._activeRenderTarget=t,t.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=t.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(t.stencilMaskStack)),this},e.prototype.bindShader=function(n,e){return this._activeShader!==n&&(this._activeShader=n,n.bind(),!1!==e&&(n.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},e.prototype.bindTexture=function(a,s,d){if(a=a||this.emptyTextures[s],a=a.baseTexture||a,a.touched=this.textureGC.count,d)s=s||0;else{for(var n=0;n<this.boundTextures.length;n++)if(this.boundTextures[n]===a)return n;void 0===s&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,s=this.boundTextures.length-this._nextTextureLocation-1)}var l=this.gl,i=a._glTextures[this.CONTEXT_UID];return i?(this.boundTextures[s]=a,l.activeTexture(l.TEXTURE0+s),l.bindTexture(l.TEXTURE_2D,i.texture)):this.textureManager.updateTexture(a,s),s},e.prototype.unbindTexture=function(a){var r=this.gl;a=a.baseTexture||a;for(var t=0;t<this.boundTextures.length;t++)this.boundTextures[t]===a&&(this.boundTextures[t]=this.emptyTextures[t],r.activeTexture(r.TEXTURE0+t),r.bindTexture(r.TEXTURE_2D,this.emptyTextures[t]._glTextures[this.CONTEXT_UID].texture));return this},e.prototype.createVao=function(){return new g.default.VertexArrayObject(this.gl,this.state.attribState)},e.prototype.bindVao=function(t){return this._activeVao===t?this:(t?t.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=t,this)},e.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},e.prototype.handleContextLost=function(t){t.preventDefault()},e.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},e.prototype.destroy=function(e){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),_.prototype.destroy.call(this,e),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},e}(r.default);t.default=v,i.pluginTarget.mixin(v)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":124,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":12}],85:[function(a,e,t){t.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(a("./utils/mapWebGLBlendModesToPixi")),r=function(){function a(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=e,this.maxAttribs=e.getParameter(e.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)},this.blendModes=(0,n.default)(e),this.nativeVaoExtension=e.getExtension("OES_vertex_array_object")||e.getExtension("MOZ_OES_vertex_array_object")||e.getExtension("WEBKIT_OES_vertex_array_object")}return a.prototype.push=function(){var n=this.stack[this.stackIndex];n||(n=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var a=0;a<this.activeState.length;a++)n[a]=this.activeState[a]},a.prototype.pop=function(){var t=this.stack[--this.stackIndex];this.setState(t)},a.prototype.setState=function(t){this.setBlend(t[0]),this.setDepthTest(t[1]),this.setFrontFace(t[2]),this.setCullFace(t[3]),this.setBlendMode(t[4])},a.prototype.setBlend=function(t){t=t?1:0,this.activeState[0]!==t&&(this.activeState[0]=t,this.gl[t?"enable":"disable"](this.gl.BLEND))},a.prototype.setBlendMode=function(n){if(n!==this.activeState[4]){this.activeState[4]=n;var e=this.blendModes[n];2===e.length?this.gl.blendFunc(e[0],e[1]):this.gl.blendFuncSeparate(e[0],e[1],e[2],e[3])}},a.prototype.setDepthTest=function(t){t=t?1:0,this.activeState[1]!==t&&(this.activeState[1]=t,this.gl[t?"enable":"disable"](this.gl.DEPTH_TEST))},a.prototype.setCullFace=function(t){t=t?1:0,this.activeState[3]!==t&&(this.activeState[3]=t,this.gl[t?"enable":"disable"](this.gl.CULL_FACE))},a.prototype.setFrontFace=function(t){t=t?1:0,this.activeState[2]!==t&&(this.activeState[2]=t,this.gl.frontFace(this.gl[t?"CW":"CCW"]))},a.prototype.resetAttributes=function(){for(var a=0;a<this.attribState.tempAttribState.length;a++)this.attribState.tempAttribState[a]=0;for(var r=0;r<this.attribState.attribState.length;r++)this.attribState.attribState[r]=0;for(var i=1;i<this.maxAttribs;i++)this.gl.disableVertexAttribArray(i)},a.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var t=0;t<this.activeState.length;++t)this.activeState[t]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},a}();t.default=r},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),p=n(d("./extractUniformsFromSrc")),o=d("../../../utils"),s=d("../../../const"),a=n(d("../../../settings")),l={},i=function(){function d(e,t,n){for(var r in!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.vertexSrc=e||d.defaultVertexSrc,this.fragmentSrc=t||d.defaultFragmentSrc,this._blendMode=s.BLEND_MODES.NORMAL,this.uniformData=n||(0,p.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[r]=this.uniformData[r].value,this.uniformData[r].type&&(this.uniformData[r].type=this.uniformData[r].type.toLowerCase());this.glShaders={},l[this.vertexSrc+this.fragmentSrc]||(l[this.vertexSrc+this.fragmentSrc]=(0,o.uid)()),this.glShaderKey=l[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=a.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return d.prototype.apply=function(a,e,t,n){a.applyFilter(this,e,t,n)},r(d,[{key:"blendMode",get:function(){return this._blendMode},set:function(t){this._blendMode=t}}],[{key:"defaultVertexSrc",get:function(){return"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nvoid main(void){\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord ;\n}"}},{key:"defaultFragmentSrc",get:function(){return"varying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\nuniform sampler2D uSampler;\nuniform sampler2D filterSampler;\nvoid main(void){\n   vec4 masky = texture2D(filterSampler, vFilterCoord);\n   vec4 sample = texture2D(uSampler, vTextureCoord);\n   vec4 color;\n   if(mod(vFilterCoord.x, 1.0) > 0.5)\n   {\n     color = vec4(1.0, 0.0, 0.0, 1.0);\n   }\n   else\n   {\n     color = vec4(0.0, 1.0, 0.0, 1.0);\n   }\n   gl_FragColor = mix(sample, masky, 0.5);\n   gl_FragColor *= sample.a;\n}"}}]),d}();t.default=i},{"../../../const":46,"../../../settings":101,"../../../utils":124,"./extractUniformsFromSrc":87}],87:[function(a,e,t){function n(t){for(var e={},n=void 0,i=t.replace(/\s+/g," ").split(/\s*;\s*/),d=0,p;d<i.length;d++)if(p=i[d].trim(),-1<p.indexOf("uniform")){var f=p.split(" "),l=f[1],u=f[2],g=1;-1<u.indexOf("[")&&(u=(n=u.split(/\[|]/))[0],g*=+n[1]),u.match(/^(projectionMatrix|uSampler|filterArea|filterClamp)$/)||(e[u]={value:o(l,g),name:u,type:l})}return e}t.__esModule=!0,t.default=function(a,e){var t=n(a),r=n(e);return Object.assign(t,r)};var o=function(t){return t&&t.__esModule?t:{default:t}}(a("pixi-gl-core")).default.shader.defaultValue},{"pixi-gl-core":12}],88:[function(a,e,t){t.__esModule=!0,t.calculateScreenSpaceMatrix=function(a,e,t){var n=a.identity();return n.translate(e.x/t.width,e.y/t.height),n.scale(t.width,t.height),n},t.calculateNormalizedScreenSpaceMatrix=function(a,e,t){var n=a.identity();n.translate(e.x/t.width,e.y/t.height);var r=t.width/e.width,i=t.height/e.height;return n.scale(r,i),n},t.calculateSpriteMatrix=function(r,e,t,n){var i=n._texture.baseTexture,o=r.set(t.width,0,0,t.height,e.x,e.y),s=n.worldTransform.copy(d.Matrix.TEMP_MATRIX);return s.invert(),o.prepend(s),o.scale(1/i.width,1/i.height),o.translate(n.anchor.x,n.anchor.y),o};var d=a("../../../math")},{"../../../math":70}],89:[function(a,e,t){t.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(a("../Filter")),s=a("../../../../math"),r=(a("path"),function(a){function e(t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=new s.Matrix,r=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return t.renderable=!1,r.maskSprite=t,r.maskMatrix=n,r}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.apply=function(a,e,t){var n=this.maskSprite;this.uniforms.mask=n._texture,this.uniforms.otherMatrix=a.calculateSpriteMatrix(this.maskMatrix,n),this.uniforms.alpha=n.worldAlpha,a.applyFilter(this,e,t)},e}(n.default));t.default=r},{"../../../../math":70,"../Filter":86,path:23}],90:[function(f,e,t){function n(t){return t&&t.__esModule?t:{default:t}}function g(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}t.__esModule=!0;var r=n(f("./WebGLManager")),i=n(f("../utils/RenderTarget")),o=n(f("../utils/Quad")),a=f("../../../math"),l=n(f("../../../Shader")),s=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(f("../filters/filterTransforms")),u=n(f("bit-twiddle")),m=function t(){g(this,t),this.renderTarget=null,this.sourceFrame=new a.Rectangle,this.destinationFrame=new a.Rectangle,this.filters=[],this.target=null,this.resolution=1},d=function(a){function e(t){g(this,e);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t));return n.gl=n.renderer.gl,n.quad=new o.default(n.gl,t.state.attribState),n.shaderCache={},n.pool={},n.filterData=null,n.managedFilters=[],n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.pushFilter=function(d,e){var t=this.renderer,n=this.filterData;if(!n){n=this.renderer._activeRenderTarget.filterStack;var p=new m;p.sourceFrame=p.destinationFrame=this.renderer._activeRenderTarget.size,p.renderTarget=t._activeRenderTarget,this.renderer._activeRenderTarget.filterData=n={index:0,stack:[p]},this.filterData=n}var i=n.stack[++n.index];i||(i=n.stack[n.index]=new m);var f=e[0].resolution,s=0|e[0].padding,a=d.filterArea||d.getBounds(!0),l=i.sourceFrame,u=i.destinationFrame;l.x=(0|a.x*f)/f,l.y=(0|a.y*f)/f,l.width=(0|a.width*f)/f,l.height=(0|a.height*f)/f,n.stack[0].renderTarget.transform||e[0].autoFit&&l.fit(n.stack[0].destinationFrame),l.pad(s),u.width=l.width,u.height=l.height;var c=this.getPotRenderTarget(t.gl,l.width,l.height,f);i.target=d,i.filters=e,i.resolution=f,i.renderTarget=c,c.setFrame(u,l),t.bindRenderTarget(c),c.clear()},e.prototype.popFilter=function(){var d=this.filterData,e=d.stack[d.index-1],t=d.stack[d.index];this.quad.map(t.renderTarget.size,t.sourceFrame).upload();var n=t.filters;if(1===n.length)n[0].apply(this,t.renderTarget,e.renderTarget,!1,t),this.freePotRenderTarget(t.renderTarget);else{var r=t.renderTarget,l=this.getPotRenderTarget(this.renderer.gl,t.sourceFrame.width,t.sourceFrame.height,t.resolution);l.setFrame(t.destinationFrame,t.sourceFrame),l.clear();var u=0;for(u=0;u<n.length-1;++u){n[u].apply(this,r,l,!0,t);var p=r;r=l,l=p}n[u].apply(this,r,e.renderTarget,!1,t),this.freePotRenderTarget(r),this.freePotRenderTarget(l)}d.index--,0===d.index&&(this.filterData=null)},e.prototype.applyFilter=function(d,e,t,n){var r=this.renderer,i=r.gl,o=d.glShaders[r.CONTEXT_UID];o||(d.glShaderKey?(o=this.shaderCache[d.glShaderKey])||(o=new l.default(this.gl,d.vertexSrc,d.fragmentSrc),d.glShaders[r.CONTEXT_UID]=this.shaderCache[d.glShaderKey]=o):o=d.glShaders[r.CONTEXT_UID]=new l.default(this.gl,d.vertexSrc,d.fragmentSrc),this.managedFilters.push(d),r.bindVao(null),this.quad.initVao(o)),r.bindVao(this.quad.vao),r.bindRenderTarget(t),n&&(i.disable(i.SCISSOR_TEST),r.clear(),i.enable(i.SCISSOR_TEST)),t===r.maskManager.scissorRenderTarget&&r.maskManager.pushScissorMask(null,r.maskManager.scissorData),r.bindShader(o);var u=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=u,this.syncUniforms(o,d),r.state.setBlendMode(d.blendMode),i.activeTexture(i.TEXTURE0),i.bindTexture(i.TEXTURE_2D,e.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),i.bindTexture(i.TEXTURE_2D,u._glTextures[this.renderer.CONTEXT_UID].texture)},e.prototype.syncUniforms=function(d,e){var t=e.uniformData,n=e.uniforms,r=1,p;if(d.uniforms.filterArea){p=this.filterData.stack[this.filterData.index];var f=d.uniforms.filterArea;f[0]=p.renderTarget.size.width,f[1]=p.renderTarget.size.height,f[2]=p.sourceFrame.x,f[3]=p.sourceFrame.y,d.uniforms.filterArea=f}if(d.uniforms.filterClamp){p=p||this.filterData.stack[this.filterData.index];var s=d.uniforms.filterClamp;s[0]=0,s[1]=0,s[2]=(p.sourceFrame.width-1)/p.renderTarget.size.width,s[3]=(p.sourceFrame.height-1)/p.renderTarget.size.height,d.uniforms.filterClamp=s}for(var a in t){var l=t[a].type;if("sampler2d"===l&&0!==n[a]){if(n[a].baseTexture)d.uniforms[a]=this.renderer.bindTexture(n[a].baseTexture,r);else{d.uniforms[a]=r;var u=this.renderer.gl;this.renderer.boundTextures[r]=this.renderer.emptyTextures[r],u.activeTexture(u.TEXTURE0+r),n[a].texture.bind()}r++}else if("mat3"===l)d.uniforms[a]=void 0===n[a].a?n[a]:n[a].toArray(!0);else if(!("vec2"===l))"float"===l?d.uniforms.data[a].value!==t[a]&&(d.uniforms[a]=n[a]):d.uniforms[a]=n[a];else if(void 0!==n[a].x){var c=d.uniforms[a]||new Float32Array(2);c[0]=n[a].x,c[1]=n[a].y,d.uniforms[a]=c}else d.uniforms[a]=n[a]}},e.prototype.getRenderTarget=function(a,e){var t=this.filterData.stack[this.filterData.index],n=this.getPotRenderTarget(this.renderer.gl,t.sourceFrame.width,t.sourceFrame.height,e||t.resolution);return n.setFrame(t.destinationFrame,t.sourceFrame),n},e.prototype.returnRenderTarget=function(t){this.freePotRenderTarget(t)},e.prototype.calculateScreenSpaceMatrix=function(n){var e=this.filterData.stack[this.filterData.index];return s.calculateScreenSpaceMatrix(n,e.sourceFrame,e.renderTarget.size)},e.prototype.calculateNormalizedScreenSpaceMatrix=function(n){var e=this.filterData.stack[this.filterData.index];return s.calculateNormalizedScreenSpaceMatrix(n,e.sourceFrame,e.renderTarget.size,e.destinationFrame)},e.prototype.calculateSpriteMatrix=function(a,e){var t=this.filterData.stack[this.filterData.index];return s.calculateSpriteMatrix(a,t.sourceFrame,t.renderTarget.size,e)},e.prototype.destroy=function(){for(var a=0<arguments.length&&void 0!==arguments[0]&&arguments[0],e=this.renderer,t=this.managedFilters,n=0;n<t.length;n++)a||t[n].glShaders[e.CONTEXT_UID].destroy(),delete t[n].glShaders[e.CONTEXT_UID];this.shaderCache={},a?this.pool={}:this.emptyPool()},e.prototype.getPotRenderTarget=function(s,e,d,l){var r=(65535&(e=u.default.nextPow2(e*l)))<<16|65535&(d=u.default.nextPow2(d*l));this.pool[r]||(this.pool[r]=[]);var p=this.pool[r].pop();if(!p){var c=this.renderer.boundTextures[0];s.activeTexture(s.TEXTURE0),p=new i.default(s,e,d,null,1),s.bindTexture(s.TEXTURE_2D,c._glTextures[this.renderer.CONTEXT_UID].texture)}return p.resolution=l,p.defaultFrame.width=p.size.width=e/l,p.defaultFrame.height=p.size.height=d/l,p},e.prototype.emptyPool=function(){for(var a in this.pool){var e=this.pool[a];if(e)for(var t=0;t<e.length;t++)e[t].destroy(!0)}this.pool={}},e.prototype.freePotRenderTarget=function(n){var e=(65535&n.size.width*n.resolution)<<16|65535&n.size.height*n.resolution;this.pool[e].push(n)},e}(r.default);t.default=d},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=n(a("./WebGLManager")),i=n(a("../filters/spriteMask/SpriteMaskFilter")),o=function(a){function e(t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t));return n.scissor=!1,n.scissorData=null,n.scissorRenderTarget=null,n.enableScissor=!0,n.alphaMaskPool=[],n.alphaMaskIndex=0,n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.pushMask=function(a,e){if(e.texture)this.pushSpriteMask(a,e);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&e.isFastRect()){var t=e.worldTransform,n=Math.atan2(t.b,t.a);(n=Math.round(n*(180/Math.PI)))%90?this.pushStencilMask(e):this.pushScissorMask(a,e)}else this.pushStencilMask(e)},e.prototype.popMask=function(n,e){e.texture?this.popSpriteMask(n,e):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(n,e):this.popStencilMask(n,e)},e.prototype.pushSpriteMask=function(a,e){var t=this.alphaMaskPool[this.alphaMaskIndex];t||(t=this.alphaMaskPool[this.alphaMaskIndex]=[new i.default(e)]),t[0].resolution=this.renderer.resolution,t[0].maskSprite=e,a.filterArea=e.getBounds(!0),this.renderer.filterManager.pushFilter(a,t),this.alphaMaskIndex++},e.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},e.prototype.pushStencilMask=function(t){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(t)},e.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},e.prototype.pushScissorMask=function(a,e){e.renderable=!0;var t=this.renderer._activeRenderTarget,n=e.getBounds();n.fit(t.size),e.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var r=this.renderer.resolution;this.renderer.gl.scissor(n.x*r,(t.root?t.size.height-n.y-n.height:n.y)*r,n.width*r,n.height*r),this.scissorRenderTarget=t,this.scissorData=e,this.scissor=!0},e.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var t=this.renderer.gl;t.disable(t.SCISSOR_TEST)},e}(r.default);t.default=o},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(a,e,t){t.__esModule=!0;var n=function(t){return t&&t.__esModule?t:{default:t}}(a("./WebGLManager")),r=function(a){function e(t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t));return n.stencilMaskStack=null,n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.setMaskStack=function(n){this.stencilMaskStack=n;var e=this.renderer.gl;0===n.length?e.disable(e.STENCIL_TEST):e.enable(e.STENCIL_TEST)},e.prototype.pushStencil=function(a){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var e=this.renderer.gl,t=this.stencilMaskStack.length;0===t&&e.enable(e.STENCIL_TEST),this.stencilMaskStack.push(a),e.colorMask(!1,!1,!1,!1),e.stencilFunc(e.EQUAL,t,this._getBitwiseMask()),e.stencilOp(e.KEEP,e.KEEP,e.INCR),this.renderer.plugins.graphics.render(a),this._useCurrent()},e.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var n=this.renderer.gl,e=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(n.disable(n.STENCIL_TEST),n.clear(n.STENCIL_BUFFER_BIT),n.clearStencil(0)):(n.colorMask(!1,!1,!1,!1),n.stencilOp(n.KEEP,n.KEEP,n.DECR),this.renderer.plugins.graphics.render(e),this._useCurrent())},e.prototype._useCurrent=function(){var t=this.renderer.gl;t.colorMask(!0,!0,!0,!0),t.stencilFunc(t.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),t.stencilOp(t.KEEP,t.KEEP,t.KEEP)},e.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},e.prototype.destroy=function(){n.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},e}(n.default);t.default=r},{"./WebGLManager":93}],93:[function(a,e,t){t.__esModule=!0;var n=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.renderer=e,this.renderer.on("context",this.onContextChange,this)}return n.prototype.onContextChange=function(){},n.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},n}();t.default=n},{}],94:[function(a,e,t){t.__esModule=!0;var n=function(n){function e(){return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,n.apply(this,arguments))}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,n),e.prototype.start=function(){},e.prototype.stop=function(){this.flush()},e.prototype.flush=function(){},e.prototype.render=function(){},e}(function(t){return t&&t.__esModule?t:{default:t}}(a("../managers/WebGLManager")).default);t.default=n},{"../managers/WebGLManager":93}],95:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var d=n(a("pixi-gl-core")),i=n(a("../../../utils/createIndicesForQuads")),r=function(){function a(e,t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.gl=e,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var n=0;4>n;n++)this.interleaved[4*n]=this.vertices[2*n],this.interleaved[4*n+1]=this.vertices[2*n+1],this.interleaved[4*n+2]=this.uvs[2*n],this.interleaved[4*n+3]=this.uvs[2*n+1];this.indices=(0,i.default)(1),this.vertexBuffer=d.default.GLBuffer.createVertexBuffer(e,this.interleaved,e.STATIC_DRAW),this.indexBuffer=d.default.GLBuffer.createIndexBuffer(e,this.indices,e.STATIC_DRAW),this.vao=new d.default.VertexArrayObject(e,t)}return a.prototype.initVao=function(t){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,t.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,t.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},a.prototype.map=function(a,e){var t=0,i=0;return this.uvs[0]=t,this.uvs[1]=i,this.uvs[2]=t+e.width/a.width,this.uvs[3]=i,this.uvs[4]=t+e.width/a.width,this.uvs[5]=i+e.height/a.height,this.uvs[6]=t,this.uvs[7]=i+e.height/a.height,t=e.x,i=e.y,this.vertices[0]=t,this.vertices[1]=i,this.vertices[2]=t+e.width,this.vertices[3]=i,this.vertices[4]=t+e.width,this.vertices[5]=i+e.height,this.vertices[6]=t,this.vertices[7]=i+e.height,this},a.prototype.upload=function(){for(var t=0;4>t;t++)this.interleaved[4*t]=this.vertices[2*t],this.interleaved[4*t+1]=this.vertices[2*t+1],this.interleaved[4*t+2]=this.uvs[2*t],this.interleaved[4*t+3]=this.uvs[2*t+1];return this.vertexBuffer.upload(this.interleaved),this},a.prototype.destroy=function(){var t=this.gl;t.deleteBuffer(this.vertexBuffer),t.deleteBuffer(this.indexBuffer)},a}();t.default=r},{"../../../utils/createIndicesForQuads":122,"pixi-gl-core":12}],96:[function(d,e,t){t.__esModule=!0;var p=d("../../../math"),r=d("../../../const"),i=function(t){return t&&t.__esModule?t:{default:t}}(d("../../../settings")),o=d("pixi-gl-core"),n=function(){function s(e,t,n,a,d,l){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s),this.gl=e,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new p.Rectangle(0,0,1,1),this.resolution=d||i.default.RESOLUTION,this.projectionMatrix=new p.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new p.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0===a?i.default.SCALE_MODE:a,this.root=l,this.root?(this.frameBuffer=new o.GLFramebuffer(e,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=o.GLFramebuffer.createRGBA(e,100,100),this.scaleMode===r.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(t,n)}return s.prototype.clear=function(n){var e=n||this.clearColor;this.frameBuffer.clear(e[0],e[1],e[2],e[3])},s.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},s.prototype.setFrame=function(n,e){this.destinationFrame=n||this.destinationFrame||this.defaultFrame,this.sourceFrame=e||this.sourceFrame||this.destinationFrame},s.prototype.activate=function(){var t=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame===this.sourceFrame?t.disable(t.SCISSOR_TEST):(t.enable(t.SCISSOR_TEST),t.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)),t.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)},s.prototype.calculateProjection=function(a,e){var r=this.projectionMatrix;e=e||a,r.identity(),this.root?(r.a=2*(1/a.width),r.d=2*(-1/a.height),r.tx=-1-e.x*r.a,r.ty=1-e.y*r.d):(r.a=2*(1/a.width),r.d=2*(1/a.height),r.tx=-1-e.x*r.a,r.ty=-1-e.y*r.d)},s.prototype.resize=function(a,r){if(a|=0,r|=0,this.size.width!==a||this.size.height!==r){this.size.width=a,this.size.height=r,this.defaultFrame.width=a,this.defaultFrame.height=r,this.frameBuffer.resize(a*this.resolution,r*this.resolution);var i=this.frame||this.size;this.calculateProjection(i)}},s.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},s}();t.default=n},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":12}],97:[function(a,e,t){t.__esModule=!0,t.default=function(i,d){var l=!d;if(0===i)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(l){var u=document.createElement("canvas");u.width=1,u.height=1,d=n.default.createContext(u)}for(var o=d.createShader(d.FRAGMENT_SHADER),s;;){if(s=r.replace(/%forloop%/gi,function(a){for(var e="",r=0;r<a;++r)0<r&&(e+="\nelse "),r<a-1&&(e+="if(test == "+r+".0){}");return e}(i)),d.shaderSource(o,s),d.compileShader(o),d.getShaderParameter(o,d.COMPILE_STATUS))break;i=0|i/2}return l&&d.getExtension("WEBGL_lose_context")&&d.getExtension("WEBGL_lose_context").loseContext(),i};var n=function(t){return t&&t.__esModule?t:{default:t}}(a("pixi-gl-core")),r="precision mediump float;\nvoid main(void){\nfloat test = 0.1;\n%forloop%\ngl_FragColor = vec4(0.0);\n}"},{"pixi-gl-core":12}],98:[function(a,e,t){t.__esModule=!0,t.default=function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return e[n.BLEND_MODES.NORMAL]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD]=[a.ONE,a.DST_ALPHA],e[n.BLEND_MODES.MULTIPLY]=[a.DST_COLOR,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SCREEN]=[a.ONE,a.ONE_MINUS_SRC_COLOR],e[n.BLEND_MODES.OVERLAY]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DARKEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LIGHTEN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_DODGE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR_BURN]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HARD_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SOFT_LIGHT]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.DIFFERENCE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.EXCLUSION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.HUE]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.SATURATION]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.COLOR]=[a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.LUMINOSITY]=[a.ZERO,a.SRC_ALPHA],e[n.BLEND_MODES.NORMAL_NPM]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_ALPHA,a.ONE,a.ONE_MINUS_SRC_ALPHA],e[n.BLEND_MODES.ADD_NPM]=[a.SRC_ALPHA,a.DST_ALPHA,a.ONE,a.DST_ALPHA],e[n.BLEND_MODES.SCREEN_NPM]=[a.SRC_ALPHA,a.ONE_MINUS_SRC_COLOR,a.ONE,a.ONE_MINUS_SRC_COLOR],e};var n=a("../../../const")},{"../../../const":46}],99:[function(a,e,t){t.__esModule=!0,t.default=function(a){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return e[n.DRAW_MODES.POINTS]=a.POINTS,e[n.DRAW_MODES.LINES]=a.LINES,e[n.DRAW_MODES.LINE_LOOP]=a.LINE_LOOP,e[n.DRAW_MODES.LINE_STRIP]=a.LINE_STRIP,e[n.DRAW_MODES.TRIANGLES]=a.TRIANGLES,e[n.DRAW_MODES.TRIANGLE_STRIP]=a.TRIANGLE_STRIP,e[n.DRAW_MODES.TRIANGLE_FAN]=a.TRIANGLE_FAN,e};var n=a("../../../const")},{"../../../const":46}],100:[function(a,e,t){t.__esModule=!0,t.default=function(t){t.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=n(a("./utils/maxRecommendedTextures")),i=n(a("./utils/canUploadSameBuffer"));t.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,r.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,i.default)()}},{"./utils/canUploadSameBuffer":121,"./utils/maxRecommendedTextures":126}],102:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),i=d("../math"),o=d("../utils"),s=d("../const"),a=n(d("../textures/Texture")),l=n(d("../display/Container")),u=new i.Point,p=function(d){function l(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var t=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,d.call(this));return t._anchor=new i.ObservablePoint(t._onAnchorUpdate,t),t._texture=null,t._width=0,t._height=0,t._tint=null,t._tintRGB=null,t.tint=16777215,t.blendMode=s.BLEND_MODES.NORMAL,t.shader=null,t.cachedTint=16777215,t.texture=e||a.default.EMPTY,t.vertexData=new Float32Array(8),t.vertexTrimmedData=null,t._transformID=-1,t._textureID=-1,t._transformTrimmedID=-1,t._textureTrimmedID=-1,t.pluginName="sprite",t}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(l,d),l.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,o.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,o.sign)(this.scale.y)*this._height/this._texture.orig.height)},l.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},l.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var m=this._texture,e=this.transform.worldTransform,t=e.a,n=e.b,r=e.c,i=e.d,o=e.tx,s=e.ty,a=this.vertexData,l=m.trim,u=m.orig,c=this._anchor,h=0,y=0,_=0,b=0;l?(h=(y=l.x-c._x*u.width)+l.width,_=(b=l.y-c._y*u.height)+l.height):(h=(y=-c._x*u.width)+u.width,_=(b=-c._y*u.height)+u.height),a[0]=t*y+r*b+o,a[1]=i*b+n*y+s,a[2]=t*h+r*b+o,a[3]=i*b+n*h+s,a[4]=t*h+r*_+o,a[5]=i*_+n*h+s,a[6]=t*y+r*_+o,a[7]=i*_+n*y+s}},l.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var g=this._texture,e=this.vertexTrimmedData,t=g.orig,n=this._anchor,r=this.transform.worldTransform,i=r.a,o=r.b,s=r.c,a=r.d,l=r.tx,u=r.ty,c=-n._x*t.width,h=c+t.width,d=-n._y*t.height,p=d+t.height;e[0]=i*c+s*d+l,e[1]=a*d+o*c+u,e[2]=i*h+s*d+l,e[3]=a*d+o*h+u,e[4]=i*h+s*p+l,e[5]=a*p+o*h+u,e[6]=i*c+s*p+l,e[7]=a*p+o*c+u},l.prototype._renderWebGL=function(t){this.calculateVertices(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},l.prototype._renderCanvas=function(t){t.plugins[this.pluginName].render(this)},l.prototype._calculateBounds=function(){var n=this._texture.trim,e=this._texture.orig;n&&(n.width!==e.width||n.height!==e.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},l.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),e||(this._localBoundsRect||(this._localBoundsRect=new i.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):d.prototype.getLocalBounds.call(this,e)},l.prototype.containsPoint=function(a){this.worldTransform.applyInverse(a,u);var e=this._texture.orig.width,t=this._texture.orig.height,n=-e*this.anchor.x,r=0;return u.x>=n&&u.x<n+e&&(r=-t*this.anchor.y,u.y>=r&&u.y<r+t)},l.prototype.destroy=function(e){if(d.prototype.destroy.call(this,e),this._anchor=null,"boolean"==typeof e?e:e&&e.texture){var t="boolean"==typeof e?e:e&&e.baseTexture;this._texture.destroy(!!t)}this._texture=null,this.shader=null},l.from=function(t){return new l(a.default.from(t))},l.fromFrame=function(t){var e=o.TextureCache[t];if(!e)throw new Error("The frameId \""+t+"\" does not exist in the texture cache");return new l(e)},l.fromImage=function(t,e,n){return new l(a.default.fromImage(t,e,n))},r(l,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function(n){var e=(0,o.sign)(this.scale.x)||1;this.scale.x=e*n/this._texture.orig.width,this._width=n}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function(n){var e=(0,o.sign)(this.scale.y)||1;this.scale.y=e*n/this._texture.orig.height,this._height=n}},{key:"anchor",get:function(){return this._anchor},set:function(t){this._anchor.copy(t)}},{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,this._tintRGB=(t>>16)+(65280&t)+((255&t)<<16)}},{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}}]),l}(l.default);t.default=p},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":124}],103:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=n(d("../../renderers/canvas/CanvasRenderer")),f=d("../../const"),o=d("../../math"),s=n(d("./CanvasTinter")),a=new o.Matrix,i=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.renderer=e}return n.prototype.render=function(l){var e=l._texture,t=this.renderer,n=e._frame.width,r=e._frame.height,i=l.transform.worldTransform,g=0,m=0;if(!(0>=e.orig.width||0>=e.orig.height)&&e.baseTexture.source&&(t.setBlendMode(l.blendMode),e.valid)){t.context.globalAlpha=l.worldAlpha;var y=e.baseTexture.scaleMode===f.SCALE_MODES.LINEAR;t.smoothProperty&&t.context[t.smoothProperty]!==y&&(t.context[t.smoothProperty]=y),e.trim?(g=e.trim.width/2+e.trim.x-l.anchor.x*e.orig.width,m=e.trim.height/2+e.trim.y-l.anchor.y*e.orig.height):(g=(.5-l.anchor.x)*e.orig.width,m=(.5-l.anchor.y)*e.orig.height),e.rotate&&(i.copy(a),i=a,o.GroupD8.matrixAppendRotationInv(i,e.rotate,g,m),g=0,m=0),g-=n/2,m-=r/2,t.roundPixels?(t.context.setTransform(i.a,i.b,i.c,i.d,0|i.tx*t.resolution,0|i.ty*t.resolution),g|=0,m|=0):t.context.setTransform(i.a,i.b,i.c,i.d,i.tx*t.resolution,i.ty*t.resolution);var d=e.baseTexture.resolution;16777215===l.tint?t.context.drawImage(e.baseTexture.source,e._frame.x*d,e._frame.y*d,n*d,r*d,g*t.resolution,m*t.resolution,n*t.resolution,r*t.resolution):(l.cachedTint===l.tint&&l.tintedTexture.tintId===l._texture._updateID||(l.cachedTint=l.tint,l.tintedTexture=s.default.getTintedTexture(l,l.tint)),t.context.drawImage(l.tintedTexture,0,0,n*d,r*d,g*t.resolution,m*t.resolution,n*t.resolution,r*t.resolution))}},n.prototype.destroy=function(){this.renderer=null},n}();t.default=i,r.default.registerPlugin("sprite",i)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(a,e,t){t.__esModule=!0;var s=a("../../utils"),d={getTintedTexture:function(i,e){var l=i._texture,n="#"+("00000"+(0|(e=d.roundColor(e))).toString(16)).substr(-6);l.tintCache=l.tintCache||{};var r=l.tintCache[n],o;if(r){if(r.tintId===l._updateID)return l.tintCache[n];o=l.tintCache[n]}else o=d.canvas||document.createElement("canvas");if(d.tintMethod(l,e,o),o.tintId=l._updateID,d.convertTintToImage){var u=new Image;u.src=o.toDataURL(),l.tintCache[n]=u}else l.tintCache[n]=o,d.canvas=null;return o},tintWithMultiply:function(a,e,t){var n=t.getContext("2d"),r=a._frame.clone(),i=a.baseTexture.resolution;r.x*=i,r.y*=i,r.width*=i,r.height*=i,t.width=Math.ceil(r.width),t.height=Math.ceil(r.height),n.save(),n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="multiply",n.drawImage(a.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(a.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.restore()},tintWithOverlay:function(a,e,t){var n=t.getContext("2d"),r=a._frame.clone(),i=a.baseTexture.resolution;r.x*=i,r.y*=i,r.width*=i,r.height*=i,t.width=Math.ceil(r.width),t.height=Math.ceil(r.height),n.save(),n.globalCompositeOperation="copy",n.fillStyle="#"+("00000"+(0|e).toString(16)).substr(-6),n.fillRect(0,0,r.width,r.height),n.globalCompositeOperation="destination-atop",n.drawImage(a.baseTexture.source,r.x,r.y,r.width,r.height,0,0,r.width,r.height),n.restore()},tintWithPerPixel:function(r,e,t){var n=t.getContext("2d"),i=r._frame.clone(),o=r.baseTexture.resolution;i.x*=o,i.y*=o,i.width*=o,i.height*=o,t.width=Math.ceil(i.width),t.height=Math.ceil(i.height),n.save(),n.globalCompositeOperation="copy",n.drawImage(r.baseTexture.source,i.x,i.y,i.width,i.height,0,0,i.width,i.height),n.restore();for(var f=(0,s.hex2rgb)(e),a=f[0],l=f[1],u=f[2],c=n.getImageData(0,0,i.width,i.height),h=c.data,d=0;d<h.length;d+=4)h[d+0]*=a,h[d+1]*=l,h[d+2]*=u;n.putImageData(c,0,0)},roundColor:function(a){var e=d.cacheStepsPerColorChannel,t=(0,s.hex2rgb)(a);return t[0]=Math.min(255,t[0]/e*e),t[1]=Math.min(255,t[1]/e*e),t[2]=Math.min(255,t[2]/e*e),(0,s.rgb2hex)(t)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,function(t){return t&&t.__esModule?t:{default:t}}(a("../../renderers/canvas/utils/canUseNewCanvasBlendModes")).default)(),tintMethod:0};d.tintMethod=d.canUseMultiply?d.tintWithMultiply:d.tintWithPerPixel,t.default=d},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":124}],105:[function(a,e,t){t.__esModule=!0;var n=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.vertices=new ArrayBuffer(e),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return n.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},n}();t.default=n},{}],106:[function(y,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=n(y("../../renderers/webgl/utils/ObjectRenderer")),i=n(y("../../renderers/webgl/WebGLRenderer")),_=n(y("../../utils/createIndicesForQuads")),o=n(y("./generateMultiTextureShader")),a=n(y("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),s=n(y("./BatchBuffer")),Y=n(y("../../settings")),c=y("../../utils"),l=n(y("pixi-gl-core")),d=n(y("bit-twiddle")),p=0,h=0,u=function(u){function e(t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,u.call(this,t));n.vertSize=5,n.vertByteSize=4*n.vertSize,n.size=Y.default.SPRITE_BATCH_SIZE,n.buffers=[];for(var a=1;a<=d.default.nextPow2(n.size);a*=2)n.buffers.push(new s.default(4*a*n.vertByteSize));n.indices=(0,_.default)(n.size),n.shader=null,n.currentIndex=0,n.groups=[];for(var r=0;r<n.size;r++)n.groups[r]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return n.sprites=[],n.vertexBuffers=[],n.vaos=[],n.vaoMax=2,n.vertexCount=0,n.renderer.on("prerender",n.onPrerender,n),n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,u),e.prototype.onContextChange=function(){var s=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(s.getParameter(s.MAX_TEXTURE_IMAGE_UNITS),Y.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,a.default)(this.MAX_TEXTURES,s)),this.shader=(0,o.default)(s,this.MAX_TEXTURES),this.indexBuffer=l.default.GLBuffer.createIndexBuffer(s,this.indices,s.STATIC_DRAW),this.renderer.bindVao(null);for(var e=this.shader.attributes,t=0;t<this.vaoMax;t++){var d=this.vertexBuffers[t]=l.default.GLBuffer.createVertexBuffer(s,null,s.STREAM_DRAW),r=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(d,e.aVertexPosition,s.FLOAT,!1,this.vertByteSize,0).addAttribute(d,e.aTextureCoord,s.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(d,e.aColor,s.UNSIGNED_BYTE,!0,this.vertByteSize,12);e.aTextureId&&r.addAttribute(d,e.aTextureId,s.FLOAT,!1,this.vertByteSize,16),this.vaos[t]=r}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=Array(this.MAX_TEXTURES)},e.prototype.onPrerender=function(){this.vertexCount=0},e.prototype.render=function(t){this.currentIndex>=this.size&&this.flush(),t._texture._uvs&&(this.sprites[this.currentIndex++]=t)},e.prototype.flush=function(){if(0!==this.currentIndex){var f=this.renderer.gl,e=this.MAX_TEXTURES,t=d.default.nextPow2(this.currentIndex),n=d.default.log2(t),r=this.buffers[n],i=this.sprites,o=this.groups,s=r.float32View,a=r.uint32View,g=this.boundTextures,u=this.renderer.boundTextures,m=this.renderer.textureGC.count,v=0,X=1,H=0,W=o[0],z=c.premultiplyBlendMode[i[0]._texture.baseTexture.premultipliedAlpha?1:0][i[0].blendMode],V,q,K,Z;W.textureCount=0,W.start=0,W.blend=z,p++;var Q;for(Q=0;Q<e;++Q)g[Q]=u[Q],g[Q]._virtalBoundId=Q;for(Q=0;Q<this.currentIndex;++Q){var J=i[Q];V=J._texture.baseTexture;var M=c.premultiplyBlendMode[+V.premultipliedAlpha][J.blendMode];if(z!==M&&(z=M,q=null,H=e,p++),q!==V&&(q=V,V._enabled!==p)){if(H===e&&(p++,W.size=Q-W.start,H=0,(W=o[X++]).blend=z,W.textureCount=0,W.start=Q),V.touched=m,-1===V._virtalBoundId)for(var A=0;A<e;++A){var ee=(A+h)%e,C=g[ee];if(C._enabled!==p){h++,C._virtalBoundId=-1,V._virtalBoundId=ee,g[ee]=V;break}}V._enabled=p,W.textureCount++,W.ids[H]=V._virtalBoundId,W.textures[H++]=V}if(K=J.vertexData,Z=J._texture._uvs.uvsUint32,this.renderer.roundPixels){var R=this.renderer.resolution;s[v]=(0|K[0]*R)/R,s[v+1]=(0|K[1]*R)/R,s[v+5]=(0|K[2]*R)/R,s[v+6]=(0|K[3]*R)/R,s[v+10]=(0|K[4]*R)/R,s[v+11]=(0|K[5]*R)/R,s[v+15]=(0|K[6]*R)/R,s[v+16]=(0|K[7]*R)/R}else s[v]=K[0],s[v+1]=K[1],s[v+5]=K[2],s[v+6]=K[3],s[v+10]=K[4],s[v+11]=K[5],s[v+15]=K[6],s[v+16]=K[7];a[v+2]=Z[0],a[v+7]=Z[1],a[v+12]=Z[2],a[v+17]=Z[3];var D=Math.min(J.worldAlpha,1),k=1>D&&V.premultipliedAlpha?(0,c.premultiplyTint)(J._tintRGB,D):J._tintRGB+(255*D<<24);a[v+3]=a[v+8]=a[v+13]=a[v+18]=k,s[v+4]=s[v+9]=s[v+14]=s[v+19]=V._virtalBoundId,v+=20}if(W.size=Q-W.start,Y.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var L=this.shader.attributes,N=this.vertexBuffers[this.vertexCount]=l.default.GLBuffer.createVertexBuffer(f,null,f.STREAM_DRAW),U=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(N,L.aVertexPosition,f.FLOAT,!1,this.vertByteSize,0).addAttribute(N,L.aTextureCoord,f.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(N,L.aColor,f.UNSIGNED_BYTE,!0,this.vertByteSize,12);L.aTextureId&&U.addAttribute(N,L.aTextureId,f.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=U}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(r.vertices,0,!1),this.vertexCount++}for(Q=0;Q<e;++Q)u[Q]._virtalBoundId=-1;for(Q=0;Q<X;++Q){for(var F=o[Q],B=F.textureCount,j=0;j<B;j++)q=F.textures[j],u[F.ids[j]]!==q&&this.renderer.bindTexture(q,F.ids[j],!0),q._virtalBoundId=-1;this.renderer.state.setBlendMode(F.blend),f.drawElements(f.TRIANGLES,6*F.size,f.UNSIGNED_SHORT,2*(6*F.start))}this.currentIndex=0}},e.prototype.start=function(){this.renderer.bindShader(this.shader),Y.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},e.prototype.stop=function(){this.flush()},e.prototype.destroy=function(){for(var e=0;e<this.vaoMax;e++)this.vertexBuffers[e]&&this.vertexBuffers[e].destroy(),this.vaos[e]&&this.vaos[e].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),u.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var a=0;a<this.buffers.length;++a)this.buffers[a].destroy()},e}(r.default);t.default=u,i.default.registerPlugin("sprite",u)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":124,"../../utils/createIndicesForQuads":122,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":12}],107:[function(a,e,t){t.__esModule=!0,t.default=function(i,e){var t=r;t=(t=t.replace(/%count%/gi,e)).replace(/%forloop%/gi,function(a){var e="";e+="\n",e+="\n";for(var r=0;r<a;r++)0<r&&(e+="\nelse "),r<a-1&&(e+="if(textureId == "+r+".0)"),e+="\n{",e+="\n\tcolor = texture2D(uSamplers["+r+"], vTextureCoord, -1.0);",e+="\n}";return e+="\n",e+="\n"}(e));for(var d=new o.default(i,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",t),l=[],s=0;s<e;s++)l[s]=s;return d.bind(),d.uniforms.uSamplers=l,d};var o=function(t){return t&&t.__esModule?t:{default:t}}(a("../../Shader")),r=(a("path"),"varying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\nuniform sampler2D uSamplers[%count%];\nvoid main(void){\nvec4 color;\nfloat textureId = floor(vTextureId+0.5);\n%forloop%\ngl_FragColor = color * vColor;\n}")},{"../../Shader":44,path:23}],108:[function(m,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),i=n(m("../sprites/Sprite")),y=n(m("../textures/Texture")),s=m("../math"),a=m("../utils"),_=m("../const"),u=n(m("../settings")),o=n(m("./TextStyle")),b=n(m("./TextMetrics")),d=n(m("../utils/trimCanvas")),l={texture:!0,children:!1,baseTexture:!0},p=function(p){function e(t,n,a){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),(a=a||document.createElement("canvas")).width=3,a.height=3;var r=y.default.fromCanvas(a,u.default.SCALE_MODE,"text");r.orig=new s.Rectangle,r.trim=new s.Rectangle;var o=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,p.call(this,r));return y.default.addToCache(o._texture,o._texture.baseTexture.textureCacheIds[0]),o.canvas=a,o.context=o.canvas.getContext("2d"),o.resolution=u.default.RESOLUTION,o._text=null,o._style=null,o._styleListener=null,o._font="",o.text=t,o.style=n,o.localStyleID=-1,o}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,p),e.prototype.updateText=function(d){var e=this._style;if(this.localStyleID!==e.styleID&&(this.dirty=!0,this.localStyleID=e.styleID),this.dirty||!d){this._font=this._style.toFontString();var t=this.context,n=b.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),r=n.width,i=n.height,o=n.lines,s=n.lineHeight,a=n.lineWidths,l=n.maxLineWidth,u=n.fontProperties;this.canvas.width=Math.ceil((r+2*e.padding)*this.resolution),this.canvas.height=Math.ceil((i+2*e.padding)*this.resolution),t.scale(this.resolution,this.resolution),t.clearRect(0,0,this.canvas.width,this.canvas.height),t.font=this._font,t.strokeStyle=e.stroke,t.lineWidth=e.strokeThickness,t.textBaseline=e.textBaseline,t.lineJoin=e.lineJoin,t.miterLimit=e.miterLimit;var c,y;if(e.dropShadow){t.fillStyle=e.dropShadowColor,t.globalAlpha=e.dropShadowAlpha,t.shadowBlur=e.dropShadowBlur,0<e.dropShadowBlur&&(t.shadowColor=e.dropShadowColor);for(var _=Math.cos(e.dropShadowAngle)*e.dropShadowDistance,f=Math.sin(e.dropShadowAngle)*e.dropShadowDistance,g=0;g<o.length;g++)c=e.strokeThickness/2,y=e.strokeThickness/2+g*s+u.ascent,"right"===e.align?c+=l-a[g]:"center"===e.align&&(c+=(l-a[g])/2),e.fill&&(this.drawLetterSpacing(o[g],c+_+e.padding,y+f+e.padding),e.stroke&&e.strokeThickness&&(t.strokeStyle=e.dropShadowColor,this.drawLetterSpacing(o[g],c+_+e.padding,y+f+e.padding,!0),t.strokeStyle=e.stroke))}t.shadowBlur=0,t.globalAlpha=1,t.fillStyle=this._generateFillStyle(e,o);for(var x=0;x<o.length;x++)c=e.strokeThickness/2,y=e.strokeThickness/2+x*s+u.ascent,"right"===e.align?c+=l-a[x]:"center"===e.align&&(c+=(l-a[x])/2),e.stroke&&e.strokeThickness&&this.drawLetterSpacing(o[x],c+e.padding,y+e.padding,!0),e.fill&&this.drawLetterSpacing(o[x],c+e.padding,y+e.padding);this.updateTexture()}},e.prototype.drawLetterSpacing=function(d,e,t){var n=3<arguments.length&&void 0!==arguments[3]&&arguments[3],r=this._style.letterSpacing;if(0!==r)for(var i=String.prototype.split.call(d,""),o=e,u=0,p="";u<d.length;)p=i[u++],n?this.context.strokeText(p,o,t):this.context.fillText(p,o,t),o+=this.context.measureText(p).width+r;else n?this.context.strokeText(d,e,t):this.context.fillText(d,e,t)},e.prototype.updateTexture=function(){var a=this.canvas;if(this._style.trim){var e=(0,d.default)(a);a.width=e.width,a.height=e.height,this.context.putImageData(e.data,0,0)}var t=this._texture,n=this._style,r=n.trim?0:n.padding,i=t.baseTexture;i.hasLoaded=!0,i.resolution=this.resolution,i.realWidth=a.width,i.realHeight=a.height,i.width=a.width/this.resolution,i.height=a.height/this.resolution,t.trim.width=t._frame.width=a.width/this.resolution,t.trim.height=t._frame.height=a.height/this.resolution,t.trim.x=-r,t.trim.y=-r,t.orig.width=t._frame.width-2*r,t.orig.height=t._frame.height-2*r,this._onTextureUpdate(),i.emit("update",i),this.dirty=!1},e.prototype.renderWebGL=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),p.prototype.renderWebGL.call(this,e)},e.prototype._renderCanvas=function(e){this.resolution!==e.resolution&&(this.resolution=e.resolution,this.dirty=!0),this.updateText(!0),p.prototype._renderCanvas.call(this,e)},e.prototype.getLocalBounds=function(e){return this.updateText(!0),p.prototype.getLocalBounds.call(this,e)},e.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},e.prototype._onStyleChange=function(){this.dirty=!0},e.prototype._generateFillStyle=function(u,e){if(!Array.isArray(u.fill))return u.fill;if(navigator.isCocoonJS)return u.fill[0];var t=this.canvas.width/this.resolution,s=this.canvas.height/this.resolution,a=u.fill.slice(),l=u.fillGradientStops.slice(),c,m,y,b;if(!l.length)for(var x=a.length+1,h=1;h<x;++h)l.push(h/x);if(a.unshift(u.fill[0]),l.unshift(0),a.push(u.fill[u.fill.length-1]),l.push(1),u.fillGradientType===_.TEXT_GRADIENT.LINEAR_VERTICAL){c=this.context.createLinearGradient(t/2,0,t/2,s),m=(a.length+1)*e.length,y=0;for(var v=0;v<e.length;v++){y+=1;for(var T=0;T<a.length;T++)b="number"==typeof l[T]?l[T]/e.length+v/e.length:y/m,c.addColorStop(b,a[T]),y++}}else{c=this.context.createLinearGradient(0,s/2,t,s/2),m=a.length+1,y=1;for(var E=0;E<a.length;E++)b="number"==typeof l[E]?l[E]:y/m,c.addColorStop(b,a[E]),y++}return c},e.prototype.destroy=function(e){"boolean"==typeof e&&(e={children:e}),e=Object.assign({},l,e),p.prototype.destroy.call(this,e),this.context=null,this.canvas=null,this._style=null},r(e,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(n){this.updateText(!0);var e=(0,a.sign)(this.scale.x)||1;this.scale.x=e*n/this._texture.orig.width,this._width=n}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(n){this.updateText(!0);var e=(0,a.sign)(this.scale.y)||1;this.scale.y=e*n/this._texture.orig.height,this._height=n}},{key:"style",get:function(){return this._style},set:function(t){this._style=(t=t||{})instanceof o.default?t:new o.default(t),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(t){t=(""===t||null===t||void 0===t?" ":t)+"",this._text!==t&&(this._text=t,this.dirty=!0)}}]),e}(i.default);t.default=p},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":124,"../utils/trimCanvas":129,"./TextMetrics":109,"./TextStyle":110}],109:[function(a,e,t){t.__esModule=!0;var n=function(){function y(e,t,n,r,i,o,s,a,d){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,y),this.text=e,this.style=t,this.width=n,this.height=r,this.lines=i,this.lineWidths=o,this.lineHeight=s,this.maxLineWidth=a,this.fontProperties=d}return y.measureText=function(e,t,n){var m=3<arguments.length&&void 0!==arguments[3]?arguments[3]:y._canvas;n=n||t.wordWrap;var i=t.toFontString(),o=y.measureFont(i),s=m.getContext("2d");s.font=i;for(var a=(n?y.wordWrap(e,t,m):e).split(/(?:\r\n|\r|\n)/),l=Array(a.length),u=0,_=0,b;_<a.length;_++)b=s.measureText(a[_]).width+(a[_].length-1)*t.letterSpacing,l[_]=b,u=Math.max(u,b);var x=u+t.strokeThickness;t.dropShadow&&(x+=t.dropShadowDistance);var v=t.lineHeight||o.fontSize+t.strokeThickness,f=Math.max(v,o.fontSize+t.strokeThickness)+(a.length-1)*(v+t.leading);return t.dropShadow&&(f+=t.dropShadowDistance),new y(e,t,x,f,a,l,v+t.leading,u,o)},y.wordWrap=function(e,t){for(var n=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:y._canvas).getContext("2d"),r="",_=e.split("\n"),o=t.wordWrapWidth,s={},a=0;a<_.length;a++){for(var b=o,x=_[a].split(" "),c=0,T;c<x.length;c++)if(T=n.measureText(x[c]).width,t.breakWords&&T>o)for(var E=x[c].split(""),p=0;p<E.length;p++){var S=E[p],g=s[S];void 0===g&&(g=n.measureText(S).width,s[S]=g),g>b?(r+="\n"+S,b=o-g):(0===p&&(r+=" "),r+=S,b-=g)}else{var w=T+n.measureText(" ").width;0===c||w>b?(0<c&&(r+="\n"),r+=x[c],b=o-T):(b-=w,r+=" "+x[c])}a<_.length-1&&(r+="\n")}return r},y.measureFont=function(e){if(y._fonts[e])return y._fonts[e];var t={},n=y._canvas,r=y._context;r.font=e;var i=Math.ceil(r.measureText("|M\xC9q").width),o=Math.ceil(r.measureText("M").width),m=2*o;o=0|1.4*o,n.width=i,n.height=m,r.fillStyle="#f00",r.fillRect(0,0,i,m),r.font=e,r.textBaseline="alphabetic",r.fillStyle="#000",r.fillText("|M\xC9q",0,o);var a=r.getImageData(0,0,i,m).data,l=a.length,u=4*i,c=0,_=0,b=!1;for(c=0;c<o;++c){for(var x=0;x<u;x+=4)if(255!==a[_+x]){b=!0;break}if(b)break;_+=u}for(t.ascent=o-c,_=l-u,b=!1,c=m;c>o;--c){for(var v=0;v<u;v+=4)if(255!==a[_+v]){b=!0;break}if(b)break;_-=u}return t.descent=c-o,t.fontSize=t.ascent+t.descent,y._fonts[e]=t,t},y}();t.default=n;var r=document.createElement("canvas");r.width=r.height=10,n._canvas=r,n._context=r.getContext("2d"),n._fonts={}},{}],110:[function(d,e,t){function n(t){return"number"==typeof t?(0,s.hex2string)(t):("string"==typeof t&&0===t.indexOf("0x")&&(t=t.replace("0x","#")),t)}function r(a){if(Array.isArray(a)){for(var e=0;e<a.length;++e)a[e]=n(a[e]);return a}return n(a)}t.__esModule=!0;var i=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),o=d("../const"),s=d("../utils"),a={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:o.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},l=function(){function o(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,o),this.styleID=0,Object.assign(this,a,e)}return o.prototype.clone=function(){var e={};for(var t in a)e[t]=this[t];return new o(e)},o.prototype.reset=function(){Object.assign(this,a)},o.prototype.toFontString=function(){var a="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,e=this.fontFamily;Array.isArray(this.fontFamily)||(e=this.fontFamily.split(","));for(var i=e.length-1,o;0<=i;i--)o=e[i].trim(),/([\"\'])[^\'\"]+\1/.test(o)||(o="\""+o+"\""),e[i]=o;return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+a+" "+e.join(",")},i(o,[{key:"align",get:function(){return this._align},set:function(t){this._align!==t&&(this._align=t,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(t){this._breakWords!==t&&(this._breakWords=t,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(t){this._dropShadow!==t&&(this._dropShadow=t,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(t){this._dropShadowAlpha!==t&&(this._dropShadowAlpha=t,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(t){this._dropShadowAngle!==t&&(this._dropShadowAngle=t,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(t){this._dropShadowBlur!==t&&(this._dropShadowBlur=t,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(n){var e=r(n);this._dropShadowColor!==e&&(this._dropShadowColor=e,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(t){this._dropShadowDistance!==t&&(this._dropShadowDistance=t,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(n){var e=r(n);this._fill!==e&&(this._fill=e,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(t){this._fillGradientType!==t&&(this._fillGradientType=t,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(t){(function(a,e){if(!Array.isArray(a)||!Array.isArray(e))return!1;if(a.length!==e.length)return!1;for(var t=0;t<a.length;++t)if(a[t]!==e[t])return!1;return!0})(this._fillGradientStops,t)||(this._fillGradientStops=t,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(t){this.fontFamily!==t&&(this._fontFamily=t,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(t){this._fontSize!==t&&(this._fontSize=t,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(t){this._fontStyle!==t&&(this._fontStyle=t,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(t){this._fontVariant!==t&&(this._fontVariant=t,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(t){this._fontWeight!==t&&(this._fontWeight=t,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(t){this._letterSpacing!==t&&(this._letterSpacing=t,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(t){this._lineHeight!==t&&(this._lineHeight=t,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(t){this._leading!==t&&(this._leading=t,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(t){this._lineJoin!==t&&(this._lineJoin=t,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(t){this._miterLimit!==t&&(this._miterLimit=t,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(t){this._padding!==t&&(this._padding=t,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(n){var e=r(n);this._stroke!==e&&(this._stroke=e,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(t){this._strokeThickness!==t&&(this._strokeThickness=t,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(t){this._textBaseline!==t&&(this._textBaseline=t,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(t){this._trim!==t&&(this._trim=t,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(t){this._wordWrap!==t&&(this._wordWrap=t,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(t){this._wordWrapWidth!==t&&(this._wordWrapWidth=t,this.styleID++)}}]),o}();t.default=l},{"../const":46,"../utils":124}],111:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=n(a("./BaseTexture")),d=n(a("../settings")),i=function(o){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,r=arguments[2],i=arguments[3];!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,o.call(this,null,r));return s.resolution=i||d.default.RESOLUTION,s.width=t,s.height=n,s.realWidth=s.width*s.resolution,s.realHeight=s.height*s.resolution,s.scaleMode=void 0===r?d.default.SCALE_MODE:r,s.hasLoaded=!0,s._glRenderTargets={},s._canvasRenderTarget=null,s.valid=!1,s}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,o),e.prototype.resize=function(n,e){n===this.width&&e===this.height||(this.valid=0<n&&0<e,this.width=n,this.height=e,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},e.prototype.destroy=function(){o.prototype.destroy.call(this,!0),this.renderer=null},e}(r.default);t.default=i},{"../settings":101,"./BaseTexture":112}],112:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var p=d("../utils"),i=n(d("../settings")),r=n(d("eventemitter3")),c=n(d("../utils/determineCrossOrigin")),a=n(d("bit-twiddle")),o=function(o){function d(e,t,n){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d);var r=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,o.call(this));return r.uid=(0,p.uid)(),r.touched=0,r.resolution=n||i.default.RESOLUTION,r.width=100,r.height=100,r.realWidth=100,r.realHeight=100,r.scaleMode=void 0===t?i.default.SCALE_MODE:t,r.hasLoaded=!1,r.isLoading=!1,r.source=null,r.origSource=null,r.imageType=null,r.sourceScale=1,r.premultipliedAlpha=!0,r.imageUrl=null,r.isPowerOfTwo=!1,r.mipmap=i.default.MIPMAP_TEXTURES,r.wrapMode=i.default.WRAP_MODE,r._glTextures={},r._enabled=0,r._virtalBoundId=-1,r._destroyed=!1,r.textureCacheIds=[],e&&r.loadSource(e),r}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(d,o),d.prototype.update=function(t){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),t||this.emit("update",this)},d.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=a.default.isPow2(this.realWidth)&&a.default.isPow2(this.realHeight)},d.prototype.loadSource=function(a){var e=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,e&&this.source&&(this.source.onload=null,this.source.onerror=null);var t=!this.source;if(this.source=a,(a.src&&a.complete||a.getContext)&&a.width&&a.height){this._updateImageType(),"svg"===this.imageType&&this._loadSvgSource();var n=this;t&&(window.createImageBitmap&&!a.getContext?(n.hasLoaded=!0,n.update(!0),window.createImageBitmap(a).then(function(t){n.source=t,n.emit("loaded",n)})):(this._sourceLoaded(),n.emit("loaded",n)))}else if(!a.getContext&&(this.isLoading=!0,n=this,(a.onload=function(){n._updateImageType(),a.onload=null,a.onerror=null,n.isLoading&&(n.isLoading=!1,"svg"===n.imageType?n._loadSvgSource():window.createImageBitmap?(n.hasLoaded=!0,n.update(!0),window.createImageBitmap(a).then(function(t){n.source=t,n.emit("loaded",n)})):(n._sourceLoaded(),n.emit("loaded",n)))},a.onerror=function(){a.onload=null,a.onerror=null,n.isLoading&&(n.isLoading=!1,n.emit("error",n))},a.complete&&a.src))){if(a.onload=null,a.onerror=null,"svg"===n.imageType)return void n._loadSvgSource();this.isLoading=!1,a.width&&a.height?e&&(window.createImageBitmap?(n.hasLoaded=!0,n.update(!0),window.createImageBitmap(a).then(function(t){n.source=t,n.emit("loaded",n)})):(this._sourceLoaded(),n.emit("loaded",n))):e&&this.emit("error",this)}},d.prototype._updateImageType=function(){if(this.imageUrl){var a=(0,p.decomposeDataUri)(this.imageUrl),e;if(a&&"image"===a.mediaType){var r=a.subType.split("+")[0];if(!(e=(0,p.getUrlFileExtension)("."+r)))throw new Error("Invalid image type in data URI.")}else(e=(0,p.getUrlFileExtension)(this.imageUrl))||(e="png");this.imageType=e}},d.prototype._loadSvgSource=function(){if("svg"===this.imageType){var t=(0,p.decomposeDataUri)(this.imageUrl);t?this._loadSvgSourceUsingDataUri(t):this._loadSvgSourceUsingXhr()}},d.prototype._loadSvgSourceUsingDataUri=function(n){var e;if("base64"===n.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");e=atob(n.data)}else e=n.data;this._loadSvgSourceUsingString(e)},d.prototype._loadSvgSourceUsingXhr=function(){var n=this,e=new XMLHttpRequest;e.onload=function(){if(e.readyState!==e.DONE||200!==e.status)throw new Error("Failed to load SVG using XHR.");n._loadSvgSourceUsingString(e.response)},e.onerror=function(){return n.emit("error",n)},e.open("GET",this.imageUrl,!0),e.send()},d.prototype._loadSvgSourceUsingString=function(t){var e=(0,p.getSvgSize)(t),n=e.width,a=e.height;if(!n||!a)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round(n*this.sourceScale),this.realHeight=Math.round(a*this.sourceScale),this._updateDimensions();var r=document.createElement("canvas");r.width=this.realWidth,r.height=this.realHeight,r._pixiId="canvas_"+(0,p.uid)(),r.getContext("2d").drawImage(this.source,0,0,n,a,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=r,d.addToCache(this,r._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},d.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},d.prototype.destroy=function(){this.imageUrl&&(delete p.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),d.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},d.prototype.dispose=function(){this.emit("dispose",this)},d.prototype.updateSourceImage=function(t){this.source.src=t,this.loadSource(this.source)},d.fromImage=function(t,e,n,a){var r=p.BaseTextureCache[t];if(!r){var i=new Image;void 0===e&&0!==t.indexOf("data:")?i.crossOrigin=(0,c.default)(t):e&&(i.crossOrigin="string"==typeof e?e:"anonymous"),(r=new d(i,n)).imageUrl=t,a&&(r.sourceScale=a),r.resolution=(0,p.getResolutionOfUrl)(t),i.src=t,d.addToCache(r,t)}return r},d.fromCanvas=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";t._pixiId||(t._pixiId=n+"_"+(0,p.uid)());var a=p.BaseTextureCache[t._pixiId];return a||(a=new d(t,e),d.addToCache(a,t._pixiId)),a},d.from=function(t,e,n){if("string"==typeof t)return d.fromImage(t,void 0,e,n);if(t instanceof HTMLImageElement){var a=t.src,r=p.BaseTextureCache[a];return r||((r=new d(t,e)).imageUrl=a,n&&(r.sourceScale=n),r.resolution=(0,p.getResolutionOfUrl)(a),d.addToCache(r,a)),r}return t instanceof HTMLCanvasElement?d.fromCanvas(t,e):t},d.addToCache=function(n,e){e&&(-1===n.textureCacheIds.indexOf(e)&&n.textureCacheIds.push(e),p.BaseTextureCache[e]&&console.warn("BaseTexture added to the cache with an id ["+e+"] that already had an entry"),p.BaseTextureCache[e]=n)},d.removeFromCache=function(a){if("string"==typeof a){var e=p.BaseTextureCache[a];if(e){var t=e.textureCacheIds.indexOf(a);return-1<t&&e.textureCacheIds.splice(t,1),delete p.BaseTextureCache[a],e}}else if(a&&a.textureCacheIds){for(var n=0;n<a.textureCacheIds.length;++n)delete p.BaseTextureCache[a.textureCacheIds[n]];return a.textureCacheIds.length=0,a}return null},d}(r.default);t.default=o},{"../settings":101,"../utils":124,"../utils/determineCrossOrigin":123,"bit-twiddle":1,eventemitter3:3}],113:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var d=n(a("./BaseRenderTexture")),r=function(i){function p(e,t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);var h=null;if(!(e instanceof d.default)){var f=arguments[1],s=arguments[2],a=arguments[3],l=arguments[4];console.warn("Please use RenderTexture.create("+f+", "+s+") instead of the ctor directly."),h=arguments[0],t=null,e=new d.default(f,s,a,l)}var u=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,i.call(this,e,t));return u.legacyRenderer=h,u.valid=!0,u._updateUvs(),u}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(p,i),p.prototype.resize=function(a,e,t){this.valid=0<a&&0<e,this._frame.width=this.orig.width=a,this._frame.height=this.orig.height=e,t||this.baseTexture.resize(a,e),this._updateUvs()},p.create=function(t,e,n,a){return new p(new d.default(t,e,n,a))},p}(n(a("./Texture")).default);t.default=r},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=a("../"),i=a("../utils"),o=function(){function d(e,t){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.baseTexture=e,this.textures={},this.data=t,this.resolution=this._updateResolution(n||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return n(d,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),d.prototype._updateResolution=function(a){var e=this.data.meta.scale,t=(0,i.getResolutionOfUrl)(a,null);return null===t&&(t=void 0===e?1:parseFloat(e)),1!==t&&(this.baseTexture.resolution=t,this.baseTexture.update()),t},d.prototype.parse=function(e){this._batchIndex=0,this._callback=e,this._frameKeys.length<=d.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},d.prototype._processFrames=function(e){for(var t=e,i=d.BATCH_SIZE,p=this.baseTexture.sourceScale;t-e<i&&t<this._frameKeys.length;){var o=this._frameKeys[t],s=this._frames[o].frame;if(s){var a=null,h=null,f=new r.Rectangle(0,0,Math.floor(this._frames[o].sourceSize.w*p)/this.resolution,Math.floor(this._frames[o].sourceSize.h*p)/this.resolution);a=this._frames[o].rotated?new r.Rectangle(Math.floor(s.x*p)/this.resolution,Math.floor(s.y*p)/this.resolution,Math.floor(s.h*p)/this.resolution,Math.floor(s.w*p)/this.resolution):new r.Rectangle(Math.floor(s.x*p)/this.resolution,Math.floor(s.y*p)/this.resolution,Math.floor(s.w*p)/this.resolution,Math.floor(s.h*p)/this.resolution),this._frames[o].trimmed&&(h=new r.Rectangle(Math.floor(this._frames[o].spriteSourceSize.x*p)/this.resolution,Math.floor(this._frames[o].spriteSourceSize.y*p)/this.resolution,Math.floor(s.w*p)/this.resolution,Math.floor(s.h*p)/this.resolution)),this.textures[o]=new r.Texture(this.baseTexture,a,f,h,this._frames[o].rotated?2:0),r.Texture.addToCache(this.textures[o],o)}t++}},d.prototype._parseComplete=function(){var t=this._callback;this._callback=null,this._batchIndex=0,t.call(this,this.textures)},d.prototype._nextBatch=function(){var e=this;this._processFrames(this._batchIndex*d.BATCH_SIZE),this._batchIndex++,setTimeout(function(){e._batchIndex*d.BATCH_SIZE<e._frameKeys.length?e._nextBatch():e._parseComplete()},0)},d.prototype.destroy=function(){var n=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(var e in this.textures)this.textures[e].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,n&&this.baseTexture.destroy(),this.baseTexture=null},d}();t.default=o},{"../":65,"../utils":124}],115:[function(f,e,t){function n(t){return t&&t.__esModule?t:{default:t}}function r(t){t.destroy=function(){},t.on=function(){},t.once=function(){},t.emit=function(){}}t.__esModule=!0;var i=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),g=n(f("./BaseTexture")),o=n(f("./VideoBaseTexture")),a=n(f("./TextureUvs")),s=n(f("eventemitter3")),l=f("../math"),u=f("../utils"),c=n(f("../settings")),d=function(d){function p(e,t,u,i,o){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,p);var s=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,d.call(this));if(s.noFrame=!1,t||(s.noFrame=!0,t=new l.Rectangle(0,0,1,1)),e instanceof p&&(e=e.baseTexture),s.baseTexture=e,s._frame=t,s.trim=i,s.valid=!1,s.requiresUpdate=!1,s._uvs=null,s.orig=u||t,s._rotate=+(o||0),!0===o)s._rotate=2;else if(0!=s._rotate%2)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return e.hasLoaded?(s.noFrame&&(t=new l.Rectangle(0,0,e.width,e.height),e.on("update",s.onBaseTextureUpdated,s)),s.frame=t):e.once("loaded",s.onBaseTextureLoaded,s),s._updateID=0,s.transform=null,s.textureCacheIds=[],s}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(p,d),p.prototype.update=function(){this.baseTexture.update()},p.prototype.onBaseTextureLoaded=function(t){this._updateID++,this.frame=this.noFrame?new l.Rectangle(0,0,t.width,t.height):this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},p.prototype.onBaseTextureUpdated=function(t){this._updateID++,this._frame.width=t.width,this._frame.height=t.height,this.emit("update",this)},p.prototype.destroy=function(t){this.baseTexture&&(t&&(u.TextureCache[this.baseTexture.imageUrl]&&p.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,p.removeFromCache(this),this.textureCacheIds=null},p.prototype.clone=function(){return new p(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},p.prototype._updateUvs=function(){this._uvs||(this._uvs=new a.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},p.fromImage=function(t,e,n,a){var r=u.TextureCache[t];return r||(r=new p(g.default.fromImage(t,e,n,a)),p.addToCache(r,t)),r},p.fromFrame=function(n){var e=u.TextureCache[n];if(!e)throw new Error("The frameId \""+n+"\" does not exist in the texture cache");return e},p.fromCanvas=function(t,e){var n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";return new p(g.default.fromCanvas(t,e,n))},p.fromVideo=function(t,e){return"string"==typeof t?p.fromVideoUrl(t,e):new p(o.default.fromVideo(t,e))},p.fromVideoUrl=function(t,e){return new p(o.default.fromUrl(t,e))},p.from=function(t){if("string"==typeof t){var e=u.TextureCache[t];return e?e:null===t.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?p.fromImage(t):p.fromVideoUrl(t)}return t instanceof HTMLImageElement?new p(g.default.from(t)):t instanceof HTMLCanvasElement?p.fromCanvas(t,c.default.SCALE_MODE,"HTMLCanvasElement"):t instanceof HTMLVideoElement?p.fromVideo(t):t instanceof g.default?new p(t):t},p.fromLoader=function(t,e,n){var a=new g.default(t,void 0,(0,u.getResolutionOfUrl)(e)),i=new p(a);return a.imageUrl=e,n||(n=e),g.default.addToCache(i.baseTexture,n),p.addToCache(i,n),n!==e&&(g.default.addToCache(i.baseTexture,e),p.addToCache(i,e)),i},p.addToCache=function(n,e){e&&(-1===n.textureCacheIds.indexOf(e)&&n.textureCacheIds.push(e),u.TextureCache[e]&&console.warn("Texture added to the cache with an id ["+e+"] that already had an entry"),u.TextureCache[e]=n)},p.removeFromCache=function(a){if("string"==typeof a){var e=u.TextureCache[a];if(e){var t=e.textureCacheIds.indexOf(a);return-1<t&&e.textureCacheIds.splice(t,1),delete u.TextureCache[a],e}}else if(a&&a.textureCacheIds){for(var n=0;n<a.textureCacheIds.length;++n)u.TextureCache[a.textureCacheIds[n]]===a&&delete u.TextureCache[a.textureCacheIds[n]];return a.textureCacheIds.length=0,a}return null},i(p,[{key:"frame",get:function(){return this._frame},set:function(d){this._frame=d,this.noFrame=!1;var e=d.x,t=d.y,n=d.width,r=d.height,i=e+n>this.baseTexture.width,o=t+r>this.baseTexture.height;if(i||o){var s=i&&o?"and":"or",a="X: "+e+" + "+n+" = "+(e+n)+" > "+this.baseTexture.width,l="Y: "+t+" + "+r+" = "+(t+r)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+a+" "+s+" "+l)}this.valid=n&&r&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=d),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(t){this._rotate=t,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),p}(s.default);t.default=d,d.EMPTY=new d(new g.default()),r(d.EMPTY),r(d.EMPTY.baseTexture),d.WHITE=function(){var n=document.createElement("canvas");n.width=10,n.height=10;var e=n.getContext("2d");return e.fillStyle="white",e.fillRect(0,0,10,10),new d(new g.default(n))}(),r(d.WHITE),r(d.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":124,"./BaseTexture":112,"./TextureUvs":116,"./VideoBaseTexture":117,eventemitter3:3}],116:[function(a,e,t){t.__esModule=!0;var d=function(t){return t&&t.__esModule?t:{default:t}}(a("../math/GroupD8")),n=function(){function t(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return t.prototype.set=function(r,e,t){var p=e.width,i=e.height;if(t){var o=r.width/2/p,s=r.height/2/i,a=r.x/p+o,l=r.y/i+s;t=d.default.add(t,d.default.NW),this.x0=a+o*d.default.uX(t),this.y0=l+s*d.default.uY(t),t=d.default.add(t,2),this.x1=a+o*d.default.uX(t),this.y1=l+s*d.default.uY(t),t=d.default.add(t,2),this.x2=a+o*d.default.uX(t),this.y2=l+s*d.default.uY(t),t=d.default.add(t,2),this.x3=a+o*d.default.uX(t),this.y3=l+s*d.default.uY(t)}else this.x0=r.x/p,this.y0=r.y/i,this.x1=(r.x+r.width)/p,this.y1=r.y/i,this.x2=(r.x+r.width)/p,this.y2=(r.y+r.height)/i,this.x3=r.x/p,this.y3=(r.y+r.height)/i;this.uvsUint32[0]=(65535&65535*this.y0)<<16|65535&65535*this.x0,this.uvsUint32[1]=(65535&65535*this.y1)<<16|65535&65535*this.x1,this.uvsUint32[2]=(65535&65535*this.y2)<<16|65535&65535*this.x2,this.uvsUint32[3]=(65535&65535*this.y3)<<16|65535&65535*this.x3},t}();t.default=n},{"../math/GroupD8":66}],117:[function(d,e,t){function p(a,e){e||(e="video/"+a.substr(a.lastIndexOf(".")+1));var r=document.createElement("source");return r.src=a,r.type=e,r}t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),i=function(t){return t&&t.__esModule?t:{default:t}}(d("./BaseTexture")),o=d("../utils"),r=d("../ticker"),a=d("../const"),s=function(s){function d(e,t){if(function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),!e)throw new Error("No video source element specified.");(e.readyState===e.HAVE_ENOUGH_DATA||e.readyState===e.HAVE_FUTURE_DATA)&&e.width&&e.height&&(e.complete=!0);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,s.call(this,e,t));return n.width=e.videoWidth,n.height=e.videoHeight,n._autoUpdate=!0,n._isAutoUpdating=!1,n.autoPlay=!0,n.update=n.update.bind(n),n._onCanPlay=n._onCanPlay.bind(n),e.addEventListener("play",n._onPlayStart.bind(n)),e.addEventListener("pause",n._onPlayStop.bind(n)),n.hasLoaded=!1,n.__loaded=!1,n._isSourceReady()?n._onCanPlay():(e.addEventListener("canplay",n._onCanPlay),e.addEventListener("canplaythrough",n._onCanPlay)),n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(d,s),d.prototype._isSourcePlaying=function(){var t=this.source;return 0<t.currentTime&&!1===t.paused&&!1===t.ended&&2<t.readyState},d.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},d.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(r.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},d.prototype._onPlayStop=function(){this._isAutoUpdating&&(r.shared.remove(this.update,this),this._isAutoUpdating=!1)},d.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},d.prototype.destroy=function(){this._isAutoUpdating&&r.shared.remove(this.update,this),this.source&&this.source._pixiId&&(i.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),s.prototype.destroy.call(this)},d.fromVideo=function(t,e){t._pixiId||(t._pixiId="video_"+(0,o.uid)());var n=o.BaseTextureCache[t._pixiId];return n||(n=new d(t,e),i.default.addToCache(n,t._pixiId)),n},d.fromUrl=function(t,e){var n=document.createElement("video");if(n.setAttribute("webkit-playsinline",""),n.setAttribute("playsinline",""),Array.isArray(t))for(var a=0;a<t.length;++a)n.appendChild(p(t[a].src||t[a],t[a].mime));else n.appendChild(p(t.src||t,t.mime));return n.load(),d.fromVideo(n,e)},n(d,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(t){t!==this._autoUpdate&&(this._autoUpdate=t,!this._autoUpdate&&this._isAutoUpdating?(r.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(r.shared.add(this.update,this,a.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),d}(i.default);t.default=s,s.fromUrls=s.fromUrl},{"../const":46,"../ticker":120,"../utils":124,"./BaseTexture":112}],118:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),i=n(d("../settings")),o=d("../const"),s=n(d("./TickerListener")),a=function(){function n(){var a=this;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this._head=new s.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/i.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(t){a._requestId=null,a.started&&(a.update(t),a.started&&null===a._requestId&&a._head.next&&(a._requestId=requestAnimationFrame(a._tick)))}}return n.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},n.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},n.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},n.prototype.add=function(a,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(a,e,t))},n.prototype.addOnce=function(a,e){var t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:o.UPDATE_PRIORITY.NORMAL;return this._addListener(new s.default(a,e,t,!0))},n.prototype._addListener=function(a){var e=this._head.next,r=this._head;if(e){for(;e;){if(a.priority>e.priority){a.connect(r);break}r=e,e=e.next}a.previous||a.connect(r)}else a.connect(r);return this._startIfPossible(),this},n.prototype.remove=function(a,e){for(var t=this._head.next;t;)t=t.match(a,e)?t.destroy():t.next;return this._head.next||this._cancelIfNeeded(),this},n.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},n.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},n.prototype.destroy=function(){this.stop();for(var t=this._head.next;t;)t=t.destroy(!0);this._head.destroy(),this._head=null},n.prototype.update=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),e;if(a>this.lastTime){(e=this.elapsedMS=a-this.lastTime)>this._maxElapsedMS&&(e=this._maxElapsedMS),this.deltaTime=e*i.default.TARGET_FPMS*this.speed;for(var o=this._head,n=o.next;n;)n=n.emit(this.deltaTime);o.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=a},r(n,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(n){var e=Math.min(Math.max(0,n)/1e3,i.default.TARGET_FPMS);this._maxElapsedMS=1/e}}]),n}();t.default=a},{"../const":46,"../settings":101,"./TickerListener":119}],119:[function(a,e,t){t.__esModule=!0;var n=function(){function a(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,r=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.fn=e,this.context=t,this.priority=n,this.once=r,this.next=null,this.previous=null,this._destroyed=!1}return a.prototype.match=function(n,e){return e=e||null,this.fn===n&&this.context===e},a.prototype.emit=function(n){this.fn&&(this.context?this.fn.call(this.context,n):this.fn(n));var e=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),e},a.prototype.connect=function(t){this.previous=t,t.next&&(t.next.previous=this),this.next=t.next,t.next=this},a.prototype.destroy=function(){var n=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var e=this.previous;return this.next=n?null:e,this.previous=null,e},a}();t.default=n},{}],120:[function(a,e,t){t.__esModule=!0,t.Ticker=t.shared=void 0;var n=function(t){return t&&t.__esModule?t:{default:t}}(a("./Ticker")),r=new n.default;r.autoStart=!0,r.destroy=function(){},t.shared=r,t.Ticker=n.default},{"./Ticker":118}],121:[function(a,e,t){t.__esModule=!0,t.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],122:[function(a,e,t){t.__esModule=!0,t.default=function(a){for(var e=6*a,t=new Uint16Array(e),n=0,o=0;n<e;n+=6,o+=4)t[n+0]=o+0,t[n+1]=o+1,t[n+2]=o+2,t[n+3]=o+0,t[n+4]=o+2,t[n+5]=o+3;return t}},{}],123:[function(a,e,t){t.__esModule=!0,t.default=function(a){var i=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===a.indexOf("data:"))return"";i=i||window.location,r||(r=document.createElement("a")),r.href=a;var s=!(a=o.default.parse(r.href)).port&&""===i.port||a.port===i.port;return a.hostname===i.hostname&&s&&a.protocol===i.protocol?"":"anonymous"};var o=function(t){return t&&t.__esModule?t:{default:t}}(a("url")),r=void 0},{url:29}],124:[function(y,e,t){function n(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}function r(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0,t.premultiplyBlendMode=t.BaseTextureCache=t.TextureCache=t.mixins=t.pluginTarget=t.EventEmitter=t.removeItems=t.isMobile=void 0,t.uid=function(){return++d},t.hex2rgb=function(n,e){return e=e||[],e[0]=(255&n>>16)/255,e[1]=(255&n>>8)/255,e[2]=(255&n)/255,e},t.hex2string=function(t){return t=t.toString(16),"#"+(t="000000".substr(0,6-t.length)+t)},t.rgb2hex=function(t){return(255*t[0]<<16)+(255*t[1]<<8)+(0|255*t[2])},t.getResolutionOfUrl=function(a,e){var t=o.default.RETINA_PREFIX.exec(a);return t?parseFloat(t[1]):void 0===e?1:e},t.decomposeDataUri=function(n){var e=i.DATA_URI.exec(n);if(e)return{mediaType:e[1]?e[1].toLowerCase():void 0,subType:e[2]?e[2].toLowerCase():void 0,encoding:e[3]?e[3].toLowerCase():void 0,data:e[4]}},t.getUrlFileExtension=function(n){var e=i.URL_FILE_EXTENSION.exec(n);if(e)return e[1].toLowerCase()},t.getSvgSize=function(a){var e=i.SVG_SIZE.exec(a),t={};return e&&(t[e[1]]=Math.round(parseFloat(e[3])),t[e[5]]=Math.round(parseFloat(e[7]))),t},t.skipHello=function(){_=!0},t.sayHello=function(n){if(!_){if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var e=["\n %c %c %c PixiJS "+i.VERSION+" - \u2730 "+n+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,e)}else window.console&&window.console.log("PixiJS "+i.VERSION+" - "+n+" - http://www.pixijs.com/");_=!0}},t.isWebGLSupported=function(){var a={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var e=document.createElement("canvas"),t=e.getContext("webgl",a)||e.getContext("experimental-webgl",a),o=t&&t.getContextAttributes().stencil;if(t){var r=t.getExtension("WEBGL_lose_context");r&&r.loseContext()}return t=null,o}catch(t){return!1}},t.sign=function(t){return 0===t?0:0>t?-1:1},t.destroyTextureCache=function(){for(var t in b)b[t].destroy();for(t in g)g[t].destroy()},t.clearTextureCache=function(){for(var t in b)delete b[t];for(t in g)delete g[t]},t.correctBlendMode=function(n,e){return m[e?1:0][n]},t.premultiplyTint=function(a,e){if(1===e)return(255*e<<24)+a;if(0===e)return 0;var t=255&a>>16,o=255&a>>8,s=255&a;return t=0|t*e+.5,o=0|o*e+.5,s=0|s*e+.5,(255*e<<24)+(t<<16)+(o<<8)+s},t.premultiplyRgba=function(a,e,t,i){return t=t||new Float32Array(4),i||void 0===i?(t[0]=a[0]*e,t[1]=a[1]*e,t[2]=a[2]*e):(t[0]=a[0],t[1]=a[1],t[2]=a[2]),t[3]=e,t},t.premultiplyTintToRgba=function(a,e,t,i){return t=t||new Float32Array(4),t[0]=(255&a>>16)/255,t[1]=(255&a>>8)/255,t[2]=(255&a)/255,(i||void 0===i)&&(t[0]*=e,t[1]*=e,t[2]*=e),t[3]=e,t};var i=y("../const"),o=r(y("../settings")),s=r(y("eventemitter3")),a=r(y("./pluginTarget")),l=n(y("./mixin")),u=n(y("ismobilejs")),c=r(y("remove-array-items")),h=r(y("./mapPremultipliedBlendModes")),d=0,_=!1;t.isMobile=u,t.removeItems=c.default,t.EventEmitter=s.default,t.pluginTarget=a.default,t.mixins=l;var b=t.TextureCache=Object.create(null),g=t.BaseTextureCache=Object.create(null),m=t.premultiplyBlendMode=(0,h.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":125,"./mixin":127,"./pluginTarget":128,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],125:[function(a,e,t){t.__esModule=!0,t.default=function(){for(var a=[],e=[],t=0;32>t;t++)a[t]=t,e[t]=t;a[o.BLEND_MODES.NORMAL_NPM]=o.BLEND_MODES.NORMAL,a[o.BLEND_MODES.ADD_NPM]=o.BLEND_MODES.ADD,a[o.BLEND_MODES.SCREEN_NPM]=o.BLEND_MODES.SCREEN,e[o.BLEND_MODES.NORMAL]=o.BLEND_MODES.NORMAL_NPM,e[o.BLEND_MODES.ADD]=o.BLEND_MODES.ADD_NPM,e[o.BLEND_MODES.SCREEN]=o.BLEND_MODES.SCREEN_NPM;var r=[];return r.push(e),r.push(a),r};var o=a("../const")},{"../const":46}],126:[function(a,e,t){t.__esModule=!0,t.default=function(t){return n.default.tablet||n.default.phone?4:t};var n=function(t){return t&&t.__esModule?t:{default:t}}(a("ismobilejs"))},{ismobilejs:4}],127:[function(a,e,t){function n(a,e){if(a&&e)for(var t=Object.keys(e),n=0,o;n<t.length;++n)o=t[n],Object.defineProperty(a,o,Object.getOwnPropertyDescriptor(e,o))}t.__esModule=!0,t.mixin=n,t.delayMixin=function(n,e){r.push(n,e)},t.performMixins=function(){for(var t=0;t<r.length;t+=2)n(r[t],r[t+1]);r.length=0};var r=[]},{}],128:[function(a,e,t){t.__esModule=!0,t.default={mixin:function(t){!function(a){a.__plugins={},a.registerPlugin=function(e,t){a.__plugins[e]=t},a.prototype.initPlugins=function(){for(var e in this.plugins=this.plugins||{},a.__plugins)this.plugins[e]=new a.__plugins[e](this)},a.prototype.destroyPlugins=function(){for(var t in this.plugins)this.plugins[t].destroy(),this.plugins[t]=null;this.plugins=null}}(t)}}},{}],129:[function(a,e,t){t.__esModule=!0,t.default=function(d){var e=d.width,p=d.height,c=d.getContext("2d"),r=c.getImageData(0,0,e,p).data,i=r.length,o={top:null,left:null,right:null,bottom:null},s,h,f;for(s=0;s<i;s+=4)0!==r[s+3]&&(h=s/4%e,f=~~(s/4/e),null===o.top&&(o.top=f),null===o.left?o.left=h:h<o.left&&(o.left=h),null===o.right?o.right=h+1:o.right<h&&(o.right=h+1),null===o.bottom?o.bottom=f:o.bottom<f&&(o.bottom=f));return e=o.right-o.left,{height:p=o.bottom-o.top+1,width:e,data:c.getImageData(o.left,o.top,e,p)}}},{}],130:[function(a,e,t){function d(n){var e=new Error().stack;void 0===e?console.warn("Deprecation Warning: ",n):(e=e.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",n),console.warn(e),console.groupEnd()):(console.warn("Deprecation Warning: ",n),console.warn(e)))}t.__esModule=!0,t.default=function(r){var e=r.mesh,t=r.particles,n=r.extras,i=r.filters,o=r.prepare,s=r.loaders,a=r.interaction;Object.defineProperties(r,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return d("You do not need to use a PIXI Stage any more, you can simply render any container."),r.Container}},DisplayObjectContainer:{get:function(){return d("DisplayObjectContainer has been shortened to Container, please use Container from now on."),r.Container}},Strip:{get:function(){return d("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),e.Mesh}},Rope:{get:function(){return d("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),e.Rope}},ParticleContainer:{get:function(){return d("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),t.ParticleContainer}},MovieClip:{get:function(){return d("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),n.AnimatedSprite}},TilingSprite:{get:function(){return d("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),n.TilingSprite}},BitmapText:{get:function(){return d("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),n.BitmapText}},blendModes:{get:function(){return d("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),r.BLEND_MODES}},scaleModes:{get:function(){return d("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),r.SCALE_MODES}},BaseTextureCache:{get:function(){return d("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),r.utils.BaseTextureCache}},TextureCache:{get:function(){return d("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),r.utils.TextureCache}},math:{get:function(){return d("The math namespace is deprecated, please access members already accessible on PIXI."),r}},AbstractFilter:{get:function(){return d("AstractFilter has been renamed to Filter, please use PIXI.Filter"),r.Filter}},TransformManual:{get:function(){return d("TransformManual has been renamed to TransformBase, please update your pixi-spine"),r.TransformBase}},TARGET_FPMS:{get:function(){return d("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),r.settings.TARGET_FPMS},set:function(e){d("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),r.settings.TARGET_FPMS=e}},FILTER_RESOLUTION:{get:function(){return d("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),r.settings.FILTER_RESOLUTION},set:function(e){d("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),r.settings.FILTER_RESOLUTION=e}},RESOLUTION:{get:function(){return d("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),r.settings.RESOLUTION},set:function(e){d("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),r.settings.RESOLUTION=e}},MIPMAP_TEXTURES:{get:function(){return d("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),r.settings.MIPMAP_TEXTURES},set:function(e){d("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),r.settings.MIPMAP_TEXTURES=e}},SPRITE_BATCH_SIZE:{get:function(){return d("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),r.settings.SPRITE_BATCH_SIZE},set:function(e){d("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),r.settings.SPRITE_BATCH_SIZE=e}},SPRITE_MAX_TEXTURES:{get:function(){return d("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),r.settings.SPRITE_MAX_TEXTURES},set:function(e){d("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),r.settings.SPRITE_MAX_TEXTURES=e}},RETINA_PREFIX:{get:function(){return d("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),r.settings.RETINA_PREFIX},set:function(e){d("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),r.settings.RETINA_PREFIX=e}},DEFAULT_RENDER_OPTIONS:{get:function(){return d("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),r.settings.RENDER_OPTIONS}}});for(var l=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],u=function(e){var a=l[e];Object.defineProperty(r[a.parent],"DEFAULT",{get:function(){return d("PIXI."+a.parent+".DEFAULT has been deprecated, please use PIXI.settings."+a.target),r.settings[a.target]},set:function(e){d("PIXI."+a.parent+".DEFAULT has been deprecated, please use PIXI.settings."+a.target),r.settings[a.target]=e}})},c=0;c<l.length;c++)u(c);Object.defineProperties(r.settings,{PRECISION:{get:function(){return d("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),r.settings.PRECISION_FRAGMENT},set:function(e){d("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),r.settings.PRECISION_FRAGMENT=e}}}),n.AnimatedSprite&&Object.defineProperties(n,{MovieClip:{get:function(){return d("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),n.AnimatedSprite}}}),r.DisplayObject.prototype.generateTexture=function(a,e,t){return d("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),a.generateTexture(this,e,t)},r.Graphics.prototype.generateTexture=function(n,e){return d("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(n,e)},r.RenderTexture.prototype.render=function(a,e,t,n){this.legacyRenderer.render(a,this,t,e,!n),d("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},r.RenderTexture.prototype.getImage=function(t){return d("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(t)},r.RenderTexture.prototype.getBase64=function(t){return d("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(t)},r.RenderTexture.prototype.getCanvas=function(t){return d("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(t)},r.RenderTexture.prototype.getPixels=function(t){return d("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(t)},r.Sprite.prototype.setTexture=function(t){this.texture=t,d("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},n.BitmapText&&(n.BitmapText.prototype.setText=function(t){this.text=t,d("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),r.Text.prototype.setText=function(t){this.text=t,d("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},r.Text.calculateFontProperties=function(e){return d("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),r.TextMetrics.measureFont(e)},Object.defineProperties(r.Text,{fontPropertiesCache:{get:function(){return d("Text.fontPropertiesCache is deprecated"),r.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return d("Text.fontPropertiesCanvas is deprecated"),r.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return d("Text.fontPropertiesContext is deprecated"),r.TextMetrics._context}}}),r.Text.prototype.setStyle=function(t){this.style=t,d("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},r.Text.prototype.determineFontProperties=function(e){return d("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),r.TextMetrics.measureFont(e)},r.Text.getFontStyle=function(e){return d("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(e=e||{})instanceof r.TextStyle||(e=new r.TextStyle(e)),e.toFontString()},Object.defineProperties(r.TextStyle.prototype,{font:{get:function(){d("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var t="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+t+" "+this._fontFamily},set:function(a){d("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),this._fontStyle=1<a.indexOf("italic")?"italic":-1<a.indexOf("oblique")?"oblique":"normal",this._fontVariant=-1<a.indexOf("small-caps")?"small-caps":"normal";var e=a.split(" "),t=-1;this._fontSize=26;for(var r=0;r<e.length;++r)if(e[r].match(/(px|pt|em|%)/)){t=r,this._fontSize=e[r];break}this._fontWeight="normal";for(var l=0;l<t;++l)if(e[l].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=e[l];break}if(-1<t&&t<e.length-1){this._fontFamily="";for(var u=t+1;u<e.length;++u)this._fontFamily+=e[u]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),r.Texture.prototype.setFrame=function(t){this.frame=t,d("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},r.Texture.addTextureToCache=function(e,t){r.Texture.addToCache(e,t),d("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},r.Texture.removeTextureFromCache=function(e){return d("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),r.BaseTexture.removeFromCache(e),r.Texture.removeFromCache(e)},Object.defineProperties(i,{AbstractFilter:{get:function(){return d("AstractFilter has been renamed to Filter, please use PIXI.Filter"),r.AbstractFilter}},SpriteMaskFilter:{get:function(){return d("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),r.SpriteMaskFilter}}}),r.utils.uuid=function(){return d("utils.uuid() is deprecated, please use utils.uid() from now on."),r.utils.uid()},r.utils.canUseNewCanvasBlendModes=function(){return d("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),r.CanvasTinter.canUseMultiply};var g=!0;if(Object.defineProperty(r.utils,"_saidHello",{set:function(t){t&&(d("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),g=t},get:function(){return g}}),o.BasePrepare&&(o.BasePrepare.prototype.register=function(n,e){return d("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),n&&this.registerFindHook(n),e&&this.registerUploadHook(e),this}),o.canvas&&Object.defineProperty(o.canvas,"UPLOADS_PER_FRAME",{set:function(){d("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return d("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),o.webgl&&Object.defineProperty(o.webgl,"UPLOADS_PER_FRAME",{set:function(){d("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return d("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),s.Loader){var m=s.Resource,p=s.Loader;Object.defineProperties(m.prototype,{isJson:{get:function(){return d("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===m.TYPE.JSON}},isXml:{get:function(){return d("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===m.TYPE.XML}},isImage:{get:function(){return d("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===m.TYPE.IMAGE}},isAudio:{get:function(){return d("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===m.TYPE.AUDIO}},isVideo:{get:function(){return d("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===m.TYPE.VIDEO}}}),Object.defineProperties(p.prototype,{before:{get:function(){return d("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return d("The after() method is deprecated, please use use()."),this.use}}})}a.interactiveTarget&&Object.defineProperty(a.interactiveTarget,"defaultCursor",{set:function(t){d("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=t},get:function(){return d("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),a.InteractionManager&&(Object.defineProperty(a.InteractionManager,"defaultCursorStyle",{set:function(t){d("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=t},get:function(){return d("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(a.InteractionManager,"currentCursorStyle",{set:function(t){d("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=t},get:function(){return d("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}},{}],131:[function(a,e,t){t.__esModule=!0;var d=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../../core")),r=new d.Rectangle,n=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.renderer=e,e.extract=this}return n.prototype.image=function(n){var e=new Image;return e.src=this.base64(n),e},n.prototype.base64=function(t){return this.canvas(t).toDataURL()},n.prototype.canvas=function(i){var e=this.renderer,t,p,f,g;i&&(g=i instanceof d.RenderTexture?i:e.generateTexture(i)),g?(t=g.baseTexture._canvasRenderTarget.context,p=g.baseTexture._canvasRenderTarget.resolution,f=g.frame):(t=e.rootContext,(f=r).width=this.renderer.width,f.height=this.renderer.height);var m=f.width*p,l=f.height*p,u=new d.CanvasRenderTarget(m,l),c=t.getImageData(f.x*p,f.y*p,m,l);return u.context.putImageData(c,0,0),u.canvas},n.prototype.pixels=function(i){var e=this.renderer,t,l,u,p;return i&&(p=i instanceof d.RenderTexture?i:e.generateTexture(i)),p?(t=p.baseTexture._canvasRenderTarget.context,l=p.baseTexture._canvasRenderTarget.resolution,u=p.frame):(t=e.rootContext,(u=r).width=e.width,u.height=e.height),t.getImageData(0,0,u.width*l,u.height*l).data},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},n}();t.default=n,d.CanvasRenderer.registerPlugin("extract",n)},{"../../core":65}],132:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=a("./webgl/WebGLExtract");Object.defineProperty(t,"webgl",{enumerable:!0,get:function(){return n(r).default}});var i=a("./canvas/CanvasExtract");Object.defineProperty(t,"canvas",{enumerable:!0,get:function(){return n(i).default}})},{"./canvas/CanvasExtract":131,"./webgl/WebGLExtract":133}],133:[function(a,e,t){t.__esModule=!0;var g=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../../core")),r=new g.Rectangle,n=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.renderer=e,e.extract=this}return n.prototype.image=function(n){var e=new Image;return e.src=this.base64(n),e},n.prototype.base64=function(t){return this.canvas(t).toDataURL()},n.prototype.canvas=function(i){var e=this.renderer,t=!1,m,y,_,b;i&&(b=i instanceof g.RenderTexture?i:this.renderer.generateTexture(i)),b?(y=(m=b.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,_=b.frame,t=!1):(y=(m=this.renderer.rootRenderTarget).resolution,t=!0,(_=r).width=m.size.width,_.height=m.size.height);var x=_.width*y,u=_.height*y,c=new g.CanvasRenderTarget(x,u);if(m){e.bindRenderTarget(m);var h=new Uint8Array(4*x*u),d=e.gl;d.readPixels(_.x*y,_.y*y,x,u,d.RGBA,d.UNSIGNED_BYTE,h);var p=c.context.getImageData(0,0,x,u);p.data.set(h),c.context.putImageData(p,0,0),t&&(c.context.scale(1,-1),c.context.drawImage(c.canvas,0,-u))}return c.canvas},n.prototype.pixels=function(i){var e=this.renderer,t,d,p,f;i&&(f=i instanceof g.RenderTexture?i:this.renderer.generateTexture(i)),f?(d=(t=f.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,p=f.frame):(d=(t=this.renderer.rootRenderTarget).resolution,(p=r).width=t.size.width,p.height=t.size.height);var m=p.width*d,l=p.height*d,u=new Uint8Array(4*m*l);if(t){e.bindRenderTarget(t);var c=e.gl;c.readPixels(p.x*d,p.y*d,m,l,c.RGBA,c.UNSIGNED_BYTE,u)}return u},n.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},n}();t.default=n,g.WebGLRenderer.registerPlugin("extract",n)},{"../../core":65}],134:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),s=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../core")),r=function(a){function i(e,t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,i);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,e[0]instanceof s.Texture?e[0]:e[0].texture));return n._textures=null,n._durations=null,n.textures=e,n._autoUpdate=!1!==t,n.animationSpeed=1,n.loop=!0,n.onComplete=null,n.onFrameChange=null,n.onLoop=null,n._currentTime=0,n.playing=!1,n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(i,a),i.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&s.ticker.shared.remove(this.update,this))},i.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&s.ticker.shared.add(this.update,this,s.UPDATE_PRIORITY.HIGH))},i.prototype.gotoAndStop=function(n){this.stop();var e=this.currentFrame;this._currentTime=n,e!==this.currentFrame&&this.updateTexture()},i.prototype.gotoAndPlay=function(n){var e=this.currentFrame;this._currentTime=n,e!==this.currentFrame&&this.updateTexture(),this.play()},i.prototype.update=function(a){var e=this.animationSpeed*a,t=this.currentFrame;if(null!==this._durations){var n=this._currentTime%1*this._durations[this.currentFrame];for(n+=1e3*(e/60);0>n;)this._currentTime--,n+=this._durations[this.currentFrame];var o=Math.sign(this.animationSpeed*a);for(this._currentTime=Math.floor(this._currentTime);n>=this._durations[this.currentFrame];)n-=this._durations[this.currentFrame]*o,this._currentTime+=o;this._currentTime+=n/this._durations[this.currentFrame]}else this._currentTime+=e;0>this._currentTime&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):t!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<t?this.onLoop():0>this.animationSpeed&&this.currentFrame>t&&this.onLoop()),this.updateTexture())},i.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},i.prototype.destroy=function(e){this.stop(),a.prototype.destroy.call(this,e)},i.fromFrames=function(t){for(var e=[],n=0;n<t.length;++n)e.push(s.Texture.fromFrame(t[n]));return new i(e)},i.fromImages=function(t){for(var e=[],n=0;n<t.length;++n)e.push(s.Texture.fromImage(t[n]));return new i(e)},n(i,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(n){if(n[0]instanceof s.Texture)this._textures=n,this._durations=null;else{this._textures=[],this._durations=[];for(var e=0;e<n.length;e++)this._textures.push(n[e].texture),this._durations.push(n[e].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var t=Math.floor(this._currentTime)%this._textures.length;return 0>t&&(t+=this._textures.length),t}}]),i}(s.Sprite);t.default=r},{"../core":65}],135:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),_=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("../core")),o=n(d("../core/math/ObservablePoint")),x=n(d("../core/settings")),a=function(a){function T(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,T);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this));return n._textWidth=0,n._textHeight=0,n._glyphs=[],n._font={tint:void 0===t.tint?16777215:t.tint,align:t.align||"left",name:null,size:0},n.font=t.font,n._text=e,n._maxWidth=0,n._maxLineHeight=0,n._anchor=new o.default(function(){n.dirty=!0},n,0,0),n.dirty=!1,n.updateText(),n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(T,a),T.prototype.updateText=function(){for(var t=T.fonts[this._font.name],e=this._font.size/t.size,n=new _.Point,r=[],i=[],o=null,s=0,C=0,M=0,P=-1,A=0,R=0,D=0,L=0,O;L<this.text.length;L++)if(O=this.text.charCodeAt(L),/(\s)/.test(this.text.charAt(L))&&(P=L,A=s),/(?:\r\n|\r|\n)/.test(this.text.charAt(L)))i.push(s),C=Math.max(C,s),M++,n.x=0,n.y+=t.lineHeight,o=null;else if(-1!==P&&0<this._maxWidth&&n.x*e>this._maxWidth)_.utils.removeItems(r,P-R,L-P),L=P,P=-1,++R,i.push(A),C=Math.max(C,A),M++,n.x=0,n.y+=t.lineHeight,o=null;else{var k=t.chars[O];k&&(o&&k.kerning[o]&&(n.x+=k.kerning[o]),r.push({texture:k.texture,line:M,charCode:O,position:new _.Point(n.x+k.xOffset,n.y+k.yOffset)}),s=n.x+(k.texture.width+k.xOffset),n.x+=k.xAdvance,D=Math.max(D,k.yOffset+k.texture.height),o=O)}i.push(s),C=Math.max(C,s);for(var v=[],y=0,N;y<=M;y++)N=0,"right"===this._font.align?N=C-i[y]:"center"===this._font.align&&(N=(C-i[y])/2),v.push(N);for(var F=r.length,x=this.tint,w=0,B;w<F;w++)B=this._glyphs[w],B?B.texture=r[w].texture:(B=new _.Sprite(r[w].texture),this._glyphs.push(B)),B.position.x=(r[w].position.x+v[r[w].line])*e,B.position.y=r[w].position.y*e,B.scale.x=B.scale.y=e,B.tint=x,B.parent||this.addChild(B);for(var U=F;U<this._glyphs.length;++U)this.removeChild(this._glyphs[U]);if(this._textWidth=C*e,this._textHeight=(n.y+t.lineHeight)*e,0!==this.anchor.x||0!==this.anchor.y)for(var Y=0;Y<F;Y++)this._glyphs[Y].x-=this._textWidth*this.anchor.x,this._glyphs[Y].y-=this._textHeight*this.anchor.y;this._maxLineHeight=D*e},T.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},T.prototype.getLocalBounds=function(){return this.validate(),a.prototype.getLocalBounds.call(this)},T.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},T.registerFont=function(t,e){var n={},a=t.getElementsByTagName("info")[0],r=t.getElementsByTagName("common")[0],i=e.baseTexture.resolution||x.default.RESOLUTION;n.font=a.getAttribute("face"),n.size=parseInt(a.getAttribute("size"),10),n.lineHeight=parseInt(r.getAttribute("lineHeight"),10)/i,n.chars={};for(var o=t.getElementsByTagName("char"),s=0;s<o.length;s++){var l=o[s],u=parseInt(l.getAttribute("id"),10),d=new _.Rectangle(parseInt(l.getAttribute("x"),10)/i+e.frame.x/i,parseInt(l.getAttribute("y"),10)/i+e.frame.y/i,parseInt(l.getAttribute("width"),10)/i,parseInt(l.getAttribute("height"),10)/i);n.chars[u]={xOffset:parseInt(l.getAttribute("xoffset"),10)/i,yOffset:parseInt(l.getAttribute("yoffset"),10)/i,xAdvance:parseInt(l.getAttribute("xadvance"),10)/i,kerning:{},texture:new _.Texture(e.baseTexture,d)}}for(var p=t.getElementsByTagName("kerning"),h=0;h<p.length;h++){var f=p[h],m=parseInt(f.getAttribute("first"),10)/i,v=parseInt(f.getAttribute("second"),10)/i,y=parseInt(f.getAttribute("amount"),10)/i;n.chars[v]&&(n.chars[v].kerning[m]=y)}return T.fonts[n.font]=n,n},r(T,[{key:"tint",get:function(){return this._font.tint},set:function(t){this._font.tint="number"==typeof t&&0<=t?t:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(t){this._font.align=t||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(t){"number"==typeof t?this._anchor.set(t):this._anchor.copy(t)}},{key:"font",get:function(){return this._font},set:function(t){t&&("string"==typeof t?(t=t.split(" "),this._font.name=1===t.length?t[0]:t.slice(1).join(" "),this._font.size=2<=t.length?parseInt(t[0],10):T.fonts[this._font.name].size):(this._font.name=t.name,this._font.size="number"==typeof t.size?t.size:parseInt(t.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(t){t=t.toString()||" ",this._text!==t&&(this._text=t,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(t){this._maxWidth!==t&&(this._maxWidth=t,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),T}(_.Container);t.default=a,a.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101}],136:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(t){return t&&t.__esModule?t:{default:t}}(a("../core/math/Matrix")),d=new r.default,i=function(){function a(e,t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this._texture=e,this.mapCoord=new r.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===t?.5:t}return a.prototype.multiplyUvs=function(a,e){void 0===e&&(e=a);for(var s=this.mapCoord,n=0;n<a.length;n+=2){var d=a[n],i=a[n+1];e[n]=d*s.a+i*s.c+s.tx,e[n+1]=d*s.b+i*s.d+s.ty}return e},a.prototype.update=function(o){var e=this._texture;if(!e||!e.valid)return!1;if(!o&&this._lastTextureID===e._updateID)return!1;this._lastTextureID=e._updateID;var t=e._uvs;this.mapCoord.set(t.x1-t.x0,t.y1-t.y0,t.x3-t.x0,t.y3-t.y0,t.x0,t.y0);var n=e.orig,r=e.trim;r&&(d.set(n.width/r.width,0,0,n.height/r.height,-r.x/r.width,-r.y/r.height),this.mapCoord.append(d));var i=e.baseTexture,s=this.uClampFrame,a=this.clampMargin/i.resolution,l=this.clampOffset;return s[0]=(e._frame.x+a+l)/i.width,s[1]=(e._frame.y+a+l)/i.height,s[2]=(e._frame.x+e._frame.width-a+l)/i.width,s[3]=(e._frame.y+e._frame.height-a+l)/i.height,this.uClampOffset[0]=l/i.realWidth,this.uClampOffset[1]=l/i.realHeight,!0},n(a,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture=t,this._lastTextureID=-1}}]),a}();t.default=i},{"../core/math/Matrix":67}],137:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),p=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("../core")),i=n(d("../core/sprites/canvas/CanvasTinter")),o=n(d("./TextureTransform")),a=new p.Point,s=function(d){function l(e){var t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,n=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,l);var a=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,d.call(this,e));return a.tileTransform=new p.TransformStatic,a._width=t,a._height=n,a._canvasPattern=null,a.uvTransform=e.transform||new o.default(e),a.pluginName="tilingSprite",a.uvRespectAnchor=!1,a}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(l,d),l.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},l.prototype._renderWebGL=function(n){var e=this._texture;e&&e.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),n.setObjectRenderer(n.plugins[this.pluginName]),n.plugins[this.pluginName].render(this))},l.prototype._renderCanvas=function(o){var e=this._texture;if(e.baseTexture.hasLoaded){var t=o.context,n=this.worldTransform,r=o.resolution,s=e.baseTexture,a=s.resolution,l=this.tilePosition.x/this.tileScale.x%e._frame.width*a,u=this.tilePosition.y/this.tileScale.y%e._frame.height*a;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var c=new p.CanvasRenderTarget(e._frame.width,e._frame.height,a);16777215===this.tint?c.context.drawImage(s.source,-e._frame.x*a,-e._frame.y*a):(this.tintedTexture=i.default.getTintedTexture(this,this.tint),c.context.drawImage(this.tintedTexture,0,0)),this.cachedTint=this.tint,this._canvasPattern=c.context.createPattern(c.canvas,"repeat")}t.globalAlpha=this.worldAlpha,t.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),o.setBlendMode(this.blendMode),t.fillStyle=this._canvasPattern,t.scale(this.tileScale.x/a,this.tileScale.y/a);var h=this.anchor.x*-this._width,d=this.anchor.y*-this._height;this.uvRespectAnchor?(t.translate(l,u),t.fillRect(-l+h,-u+d,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a)):(t.translate(l+h,u+d),t.fillRect(-l,-u,this._width/this.tileScale.x*a,this._height/this.tileScale.y*a))}},l.prototype._calculateBounds=function(){var a=this._width*-this._anchor._x,e=this._height*-this._anchor._y,t=this._width*(1-this._anchor._x),n=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,a,e,t,n)},l.prototype.getLocalBounds=function(e){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),e||(this._localBoundsRect||(this._localBoundsRect=new p.Rectangle),e=this._localBoundsRect),this._bounds.getRectangle(e)):d.prototype.getLocalBounds.call(this,e)},l.prototype.containsPoint=function(o){this.worldTransform.applyInverse(o,a);var e=this._width,t=this._height,n=-e*this.anchor._x;if(a.x>=n&&a.x<n+e){var r=-t*this.anchor._y;if(a.y>=r&&a.y<r+t)return!0}return!1},l.prototype.destroy=function(e){d.prototype.destroy.call(this,e),this.tileTransform=null,this.uvTransform=null},l.from=function(t,e,n){return new l(p.Texture.from(t),e,n)},l.fromFrame=function(t,e,n){var a=p.utils.TextureCache[t];if(!a)throw new Error("The frameId \""+t+"\" does not exist in the texture cache "+this);return new l(a,e,n)},l.fromImage=function(t,e,n,a,r){return new l(p.Texture.fromImage(t,a,r),e,n)},r(l,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(t){this.uvTransform.clampMargin=t,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(t){this.tileTransform.scale.copy(t)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(t){this.tileTransform.position.copy(t)}},{key:"width",get:function(){return this._width},set:function(t){this._width=t}},{key:"height",get:function(){return this._height},set:function(t){this._height=t}}]),l}(p.Sprite);t.default=s},{"../core":65,"../core/sprites/canvas/CanvasTinter":104,"./TextureTransform":136}],138:[function(t){function e(t){return t&&t.__esModule?t:{default:t}}var g=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(t("../core")),i=e(t("../core/textures/Texture")),o=e(t("../core/textures/BaseTexture")),s=t("../core/utils"),n=g.DisplayObject,a=new g.Matrix;n.prototype._cacheAsBitmap=!1,n.prototype._cacheData=!1;var r=function t(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(n.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(n){if(this._cacheAsBitmap!==n){this._cacheAsBitmap=n;var e;n?(this._cacheData||(this._cacheData=new r),(e=this._cacheData).originalRenderWebGL=this.renderWebGL,e.originalRenderCanvas=this.renderCanvas,e.originalUpdateTransform=this.updateTransform,e.originalCalculateBounds=this._calculateBounds,e.originalGetLocalBounds=this.getLocalBounds,e.originalDestroy=this.destroy,e.originalContainsPoint=this.containsPoint,e.originalMask=this._mask,e.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((e=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=e.originalRenderWebGL,this.renderCanvas=e.originalRenderCanvas,this._calculateBounds=e.originalCalculateBounds,this.getLocalBounds=e.originalGetLocalBounds,this.destroy=e.originalDestroy,this.updateTransform=e.originalUpdateTransform,this.containsPoint=e.originalContainsPoint,this._mask=e.originalMask,this.filterArea=e.originalFilterArea)}}}}),n.prototype._renderCachedWebGL=function(t){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObject(t),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(t))},n.prototype._initCachedDisplayObject=function(u){if(!this._cacheData||!this._cacheData.sprite){var e=this.alpha;this.alpha=1,u.currentRenderer.flush();var t=this.getLocalBounds().clone();if(this._filters){var n=this._filters[0].padding;t.pad(n)}var r=u._activeRenderTarget,l=u.filterManager.filterStack,c=g.RenderTexture.create(0|t.width,0|t.height),h="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=h,o.default.addToCache(c.baseTexture,h),i.default.addToCache(c,h);var d=a;d.tx=-t.x,d.ty=-t.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,u.render(this,c,!0,d,!0),u.bindRenderTarget(r),u.filterManager.filterStack=l,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var p=new g.Sprite(c);p.transform.worldTransform=this.transform.worldTransform,p.anchor.x=-t.x/t.width,p.anchor.y=-t.y/t.height,p.alpha=e,p._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=p,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=u._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=p.containsPoint.bind(p)}},n.prototype._renderCachedCanvas=function(t){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObjectCanvas(t),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(t))},n.prototype._initCachedDisplayObjectCanvas=function(u){if(!this._cacheData||!this._cacheData.sprite){var e=this.getLocalBounds(),t=this.alpha;this.alpha=1;var n=u.context,r=g.RenderTexture.create(0|e.width,0|e.height),l="cacheAsBitmap_"+(0,s.uid)();this._cacheData.textureCacheId=l,o.default.addToCache(r.baseTexture,l),i.default.addToCache(r,l);var p=a;this.transform.localTransform.copy(p),p.invert(),p.tx-=e.x,p.ty-=e.y,this.renderCanvas=this._cacheData.originalRenderCanvas,u.render(this,r,!0,p,!1),u.context=n,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var c=new g.Sprite(r);c.transform.worldTransform=this.transform.worldTransform,c.anchor.x=-e.x/e.width,c.anchor.y=-e.y/e.height,c._bounds=this._bounds,c.alpha=t,this.parent?this.updateTransform():(this.parent=u._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=c,this.containsPoint=c.containsPoint.bind(c)}},n.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},n.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},n.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,o.default.removeFromCache(this._cacheData.textureCacheId),i.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},n.prototype._cacheAsBitmapDestroy=function(t){this.cacheAsBitmap=!1,this.destroy(t)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":124}],139:[function(t){var e=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(t("../core"));e.DisplayObject.prototype.name=null,e.Container.prototype.getChildByName=function(n){for(var e=0;e<this.children.length;e++)if(this.children[e].name===n)return this.children[e];return null}},{"../core":65}],140:[function(t){var n=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(t("../core"));n.DisplayObject.prototype.getGlobalPosition=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new n.Point,e=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,a,e):(a.x=this.position.x,a.y=this.position.y),a}},{"../core":65}],141:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0,t.BitmapText=t.TilingSpriteRenderer=t.TilingSprite=t.TextureTransform=t.AnimatedSprite=void 0;var r=d("./AnimatedSprite");Object.defineProperty(t,"AnimatedSprite",{enumerable:!0,get:function(){return n(r).default}});var i=d("./TextureTransform");Object.defineProperty(t,"TextureTransform",{enumerable:!0,get:function(){return n(i).default}});var o=d("./TilingSprite");Object.defineProperty(t,"TilingSprite",{enumerable:!0,get:function(){return n(o).default}});var s=d("./webgl/TilingSpriteRenderer");Object.defineProperty(t,"TilingSpriteRenderer",{enumerable:!0,get:function(){return n(s).default}});var a=d("./BitmapText");Object.defineProperty(t,"BitmapText",{enumerable:!0,get:function(){return n(a).default}}),d("./cacheAsBitmap"),d("./getChildByName"),d("./getGlobalPosition")},{"./AnimatedSprite":134,"./BitmapText":135,"./TextureTransform":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(a,e,t){t.__esModule=!0;var y=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../../core")),r=a("../../core/const"),i=(a("path"),new y.Matrix),n=function(a){function e(t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t));return n.shader=null,n.simpleShader=null,n.quad=null,n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new y.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new y.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new y.Quad(t,this.renderer.state.attribState),this.quad.initVao(this.shader)},e.prototype.render=function(o){var e=this.renderer,t=this.quad;e.bindVao(t.vao);var n=t.vertices;n[0]=n[6]=o._width*-o.anchor.x,n[1]=n[3]=o._height*-o.anchor.y,n[2]=n[4]=o._width*(1-o.anchor.x),n[5]=n[7]=o._height*(1-o.anchor.y),o.uvRespectAnchor&&((n=t.uvs)[0]=n[6]=-o.anchor.x,n[1]=n[3]=-o.anchor.y,n[2]=n[4]=1-o.anchor.x,n[5]=n[7]=1-o.anchor.y),t.upload();var _=o._texture,a=_.baseTexture,l=o.tileTransform.localTransform,u=o.uvTransform,c=a.isPowerOfTwo&&_.frame.width===a.width&&_.frame.height===a.height;c&&(a._glTextures[e.CONTEXT_UID]?c=a.wrapMode!==r.WRAP_MODES.CLAMP:a.wrapMode===r.WRAP_MODES.CLAMP&&(a.wrapMode=r.WRAP_MODES.REPEAT));var b=c?this.simpleShader:this.shader;e.bindShader(b);var d=_.width,p=_.height,f=o._width,g=o._height;i.set(l.a*d/f,l.b*d/g,l.c*p/f,l.d*p/g,l.tx/f,l.ty/g),i.invert(),c?i.prepend(u.mapCoord):(b.uniforms.uMapCoord=u.mapCoord.toArray(!0),b.uniforms.uClampFrame=u.uClampFrame,b.uniforms.uClampOffset=u.uClampOffset),b.uniforms.uTransform=i.toArray(!0),b.uniforms.uColor=y.utils.premultiplyTintToRgba(o.tint,o.worldAlpha,b.uniforms.uColor,a.premultipliedAlpha),b.uniforms.translationMatrix=o.transform.worldTransform.toArray(!0),b.uniforms.uSampler=e.bindTexture(_),e.setBlendMode(y.utils.correctBlendMode(o.blendMode,a.premultipliedAlpha)),t.vao.draw(this.renderer.gl.TRIANGLES,6,0)},e}(y.ObjectRenderer);t.default=n,y.WebGLRenderer.registerPlugin("tilingSprite",n)},{"../../core":65,"../../core/const":46,path:23}],143:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),p=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("../../core")),o=n(d("./BlurXFilter")),s=n(d("./BlurYFilter")),a=function(a){function e(t,n,r,i){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var d=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this));return d.blurXFilter=new o.default(t,n,r,i),d.blurYFilter=new s.default(t,n,r,i),d.padding=0,d.resolution=r||p.settings.RESOLUTION,d.quality=n||4,d.blur=t||8,d}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.apply=function(a,e,t){var n=a.getRenderTarget(!0);this.blurXFilter.apply(a,e,n,!0),this.blurYFilter.apply(a,n,t,!1),a.returnRenderTarget(n)},r(e,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(t){this.blurXFilter.quality=this.blurYFilter.quality=t}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(t){this.blurXFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(t){this.blurYFilter.blur=t,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(t){this.blurYFilter._blendMode=t}}]),e}(p.Filter);t.default=a},{"../../core":65,"./BlurXFilter":144,"./BlurYFilter":145}],144:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),p=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("../../core")),f=n(d("./generateBlurVertSource")),s=n(d("./generateBlurFragSource")),a=n(d("./getMaxBlurKernelSize")),i=function(o){function e(t,n,a,r){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||5;var i=(0,f.default)(r,!0),d=(0,s.default)(r),u=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,o.call(this,i,d));return u.resolution=a||p.settings.RESOLUTION,u._quality=0,u.quality=n||4,u.strength=t||8,u.firstRun=!0,u}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,o),e.prototype.apply=function(l,e,t,n){if(this.firstRun){var r=l.renderer.gl,i=(0,a.default)(r);this.vertexSrc=(0,f.default)(i,!0),this.fragmentSrc=(0,s.default)(i),this.firstRun=!1}if(this.uniforms.strength=1/t.size.width*(t.size.width/e.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)l.applyFilter(this,e,t,n);else{for(var o=l.getRenderTarget(!0),u=e,g=o,m=0;m<this.passes-1;m++){l.applyFilter(this,u,g,!0);var y=g;g=u,u=y}l.applyFilter(this,u,t,n),l.returnRenderTarget(o)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(p.Filter);t.default=i},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],145:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),p=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("../../core")),f=n(d("./generateBlurVertSource")),s=n(d("./generateBlurFragSource")),a=n(d("./getMaxBlurKernelSize")),i=function(o){function e(t,n,a,r){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),r=r||5;var i=(0,f.default)(r,!1),d=(0,s.default)(r),u=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,o.call(this,i,d));return u.resolution=a||p.settings.RESOLUTION,u._quality=0,u.quality=n||4,u.strength=t||8,u.firstRun=!0,u}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,o),e.prototype.apply=function(l,e,t,n){if(this.firstRun){var r=l.renderer.gl,i=(0,a.default)(r);this.vertexSrc=(0,f.default)(i,!1),this.fragmentSrc=(0,s.default)(i),this.firstRun=!1}if(this.uniforms.strength=1/t.size.height*(t.size.height/e.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)l.applyFilter(this,e,t,n);else{for(var o=l.getRenderTarget(!0),u=e,g=o,m=0;m<this.passes-1;m++){l.applyFilter(this,u,g,!0);var y=g;g=u,u=y}l.applyFilter(this,u,t,n),l.returnRenderTarget(o)}},r(e,[{key:"blur",get:function(){return this.strength},set:function(t){this.padding=2*Math.abs(t),this.strength=t}},{key:"quality",get:function(){return this._quality},set:function(t){this._quality=t,this.passes=t}}]),e}(p.Filter);t.default=i},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],146:[function(a,e,t){t.__esModule=!0,t.default=function(i){for(var e=o[i],t=e.length,n=r,d="",p=void 0,c=0,h;c<i;c++)h="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",c),p=c,c>=t&&(p=i-c-1),d+=h=h.replace("%value%",e[p]),d+="\n";return n=n.replace("%blur%",d),n=n.replace("%size%",i)};var o={5:[.153388,.221461,.250301],7:[.071303,.131514,.189879,.214607],9:[.028532,.067234,.124009,.179044,.20236],11:[.0093,.028002,.065984,.121703,.175713,.198596],13:[.002406,.009255,.027867,.065666,.121117,.174868,.197641],15:[489e-6,.002403,.009246,.02784,.065602,.120999,.174697,.197448]},r="varying vec2 vBlurTexCoords[%size%];\nuniform sampler2D uSampler;\nvoid main(void)\n{\n    gl_FragColor = vec4(0.0);\n    %blur%\n}"},{}],147:[function(a,e,t){t.__esModule=!0,t.default=function(r,e){var t=Math.ceil(r/2),n=d,u="",p;p=e?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var c=0,h;c<r;c++)h=p.replace("%index%",c),u+=h=h.replace("%sampleIndex%",c-(t-1)+".0"),u+="\n";return n=n.replace("%blur%",u),n=n.replace("%size%",r)};var d="attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nuniform float strength;\nuniform mat3 projectionMatrix;\nvarying vec2 vBlurTexCoords[%size%];\nvoid main(void)\n{\ngl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);\n%blur%\n}"},{}],148:[function(a,e,t){t.__esModule=!0,t.default=function(a){for(var e=a.getParameter(a.MAX_VARYING_VECTORS),t=15;t>e;)t-=2;return t}},{}],149:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../../core")),i=(a("path"),function(a){function e(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return t.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],t.alpha=1,t}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype._loadMatrix=function(n){var e=n;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(e,this.uniforms.m,n),e=this._colorMatrix(e)),this.uniforms.m=e},e.prototype._multiply=function(a,e,t){return a[0]=e[0]*t[0]+e[1]*t[5]+e[2]*t[10]+e[3]*t[15],a[1]=e[0]*t[1]+e[1]*t[6]+e[2]*t[11]+e[3]*t[16],a[2]=e[0]*t[2]+e[1]*t[7]+e[2]*t[12]+e[3]*t[17],a[3]=e[0]*t[3]+e[1]*t[8]+e[2]*t[13]+e[3]*t[18],a[4]=e[0]*t[4]+e[1]*t[9]+e[2]*t[14]+e[3]*t[19]+e[4],a[5]=e[5]*t[0]+e[6]*t[5]+e[7]*t[10]+e[8]*t[15],a[6]=e[5]*t[1]+e[6]*t[6]+e[7]*t[11]+e[8]*t[16],a[7]=e[5]*t[2]+e[6]*t[7]+e[7]*t[12]+e[8]*t[17],a[8]=e[5]*t[3]+e[6]*t[8]+e[7]*t[13]+e[8]*t[18],a[9]=e[5]*t[4]+e[6]*t[9]+e[7]*t[14]+e[8]*t[19]+e[9],a[10]=e[10]*t[0]+e[11]*t[5]+e[12]*t[10]+e[13]*t[15],a[11]=e[10]*t[1]+e[11]*t[6]+e[12]*t[11]+e[13]*t[16],a[12]=e[10]*t[2]+e[11]*t[7]+e[12]*t[12]+e[13]*t[17],a[13]=e[10]*t[3]+e[11]*t[8]+e[12]*t[13]+e[13]*t[18],a[14]=e[10]*t[4]+e[11]*t[9]+e[12]*t[14]+e[13]*t[19]+e[14],a[15]=e[15]*t[0]+e[16]*t[5]+e[17]*t[10]+e[18]*t[15],a[16]=e[15]*t[1]+e[16]*t[6]+e[17]*t[11]+e[18]*t[16],a[17]=e[15]*t[2]+e[16]*t[7]+e[17]*t[12]+e[18]*t[17],a[18]=e[15]*t[3]+e[16]*t[8]+e[17]*t[13]+e[18]*t[18],a[19]=e[15]*t[4]+e[16]*t[9]+e[17]*t[14]+e[18]*t[19]+e[19],a},e.prototype._colorMatrix=function(n){var e=new Float32Array(n);return e[4]/=255,e[9]/=255,e[14]/=255,e[19]/=255,e},e.prototype.brightness=function(n,e){this._loadMatrix([n,0,0,0,0,0,n,0,0,0,0,0,n,0,0,0,0,0,1,0],e)},e.prototype.greyscale=function(n,e){this._loadMatrix([n,n,n,0,0,n,n,n,0,0,n,n,n,0,0,0,0,0,1,0],e)},e.prototype.blackAndWhite=function(t){this._loadMatrix([.3,.6,.1,0,0,.3,.6,.1,0,0,.3,.6,.1,0,0,0,0,0,1,0],t)},e.prototype.hue=function(a,o){a=(a||0)/180*Math.PI;var t=Math.cos(a),n=Math.sin(a),r=(0,Math.sqrt)(1/3);this._loadMatrix([t+1/3*(1-t),1/3*(1-t)-r*n,1/3*(1-t)+r*n,0,0,1/3*(1-t)+r*n,t+1/3*(1-t),1/3*(1-t)-r*n,0,0,1/3*(1-t)-r*n,1/3*(1-t)+r*n,t+1/3*(1-t),0,0,0,0,0,1,0],o)},e.prototype.contrast=function(a,e){var t=(a||0)+1,n=-.5*(t-1);this._loadMatrix([t,0,0,0,n,0,t,0,0,n,0,0,t,0,n,0,0,0,1,0],e)},e.prototype.saturate=function(){var a=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,e=arguments[1],t=2*a/3+1,n=-.5*(t-1);this._loadMatrix([t,n,n,0,0,n,t,n,0,0,n,n,t,0,0,0,0,0,1,0],e)},e.prototype.desaturate=function(){this.saturate(-1)},e.prototype.negative=function(t){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],t)},e.prototype.sepia=function(t){this._loadMatrix([.393,.7689999,.18899999,0,0,.349,.6859999,.16799999,0,0,.272,.5339999,.13099999,0,0,0,0,0,1,0],t)},e.prototype.technicolor=function(t){this._loadMatrix([1.9125277891456083,-.8545344976951645,-.09155508482755585,0,11.793603434377337,-.3087833385928097,1.7658908555458428,-.10601743074722245,0,-70.35205161461398,-.231103377548616,-.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],t)},e.prototype.polaroid=function(t){this._loadMatrix([1.438,-.062,-.062,0,0,-.122,1.378,-.122,0,0,-.016,-.016,1.483,0,0,0,0,0,1,0],t)},e.prototype.toBGR=function(t){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],t)},e.prototype.kodachrome=function(t){this._loadMatrix([1.1285582396593525,-.3967382283601348,-.03992559172921793,0,63.72958762196502,-.16404339962244616,1.0835251566291304,-.05498805115633132,0,24.732407896706203,-.16786010706155763,-.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],t)},e.prototype.browni=function(t){this._loadMatrix([.5997023498159715,.34553243048391263,-.2708298674538042,0,47.43192855600873,-.037703249837783157,.8609577587992641,.15059552388459913,0,-36.96841498319127,.24113635128153335,-.07441037908422492,.44972182064877153,0,-7.562075277591283,0,0,0,1,0],t)},e.prototype.vintage=function(t){this._loadMatrix([.6279345635605994,.3202183420819367,-.03965408211312453,0,9.651285835294123,.02578397704808868,.6441188644374771,.03259127616149294,0,7.462829176470591,.0466055556782719,-.0851232987247891,.5241648018700465,0,5.159190588235296,0,0,0,1,0],t)},e.prototype.colorTone=function(d,p,f,g,m){d=d||.2,p=p||.15;var i=(255&(f=f||16770432)>>16)/255,o=(255&f>>8)/255,s=(255&f)/255,a=(255&(g=g||3375104)>>16)/255,l=(255&g>>8)/255,u=(255&g)/255,c=[.3,.59,.11,0,0,i,o,s,d,0,a,l,u,p,0,i-a,o-l,s-u,0,0];this._loadMatrix(c,m)},e.prototype.night=function(a,r){var t=[-2*(a=a||.1),-a,0,0,0,-a,0,a,0,0,0,a,2*a,0,0,0,0,0,1,0];this._loadMatrix(t,r)},e.prototype.predator=function(n,e){this._loadMatrix([11.224130630493164*n,-4.794486999511719*n,-2.8746118545532227*n,0*n,.40342438220977783*n,-3.6330697536468506*n,9.193157196044922*n,-2.951810836791992*n,0*n,-1.316135048866272*n,-3.2184197902679443*n,-4.2375030517578125*n,7.476448059082031*n,0*n,.8044459223747253*n,0,0,0,1,0],e)},e.prototype.lsd=function(t){this._loadMatrix([2,-.4,.5,0,0,-.5,2,-.4,0,0,-.4,-.5,3,0,0,0,0,0,1,0],t)},e.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},n(e,[{key:"matrix",get:function(){return this.uniforms.m},set:function(t){this.uniforms.m=t}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(t){this.uniforms.uAlpha=t}}]),e}(r.Filter));t.default=i,i.prototype.grayscale=i.prototype.greyscale},{"../../core":65,path:23}],150:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),d=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../../core")),r=(a("path"),function(a){function e(t,n){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=new d.Matrix;t.renderable=!1;var o=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return o.maskSprite=t,o.maskMatrix=i,o.uniforms.mapSampler=t._texture,o.uniforms.filterMatrix=i,o.uniforms.scale={x:1,y:1},null!==n&&void 0!==n||(n=20),o.scale=new d.Point(n,n),o}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.apply=function(a,e,t){var n=1/t.destinationFrame.width*(t.size.width/e.size.width);this.uniforms.filterMatrix=a.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*n,this.uniforms.scale.y=this.scale.y*n,a.applyFilter(this,e,t)},n(e,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(t){this.uniforms.mapSampler=t}}]),e}(d.Filter));t.default=r},{"../../core":65,path:23}],151:[function(a,e,t){t.__esModule=!0;var n=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../../core")),r=(a("path"),function(n){function e(){return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,n.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}","varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it's\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n"))}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,n),e}(n.Filter));t.default=r},{"../../core":65,path:23}],152:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=d("./fxaa/FXAAFilter");Object.defineProperty(t,"FXAAFilter",{enumerable:!0,get:function(){return n(r).default}});var i=d("./noise/NoiseFilter");Object.defineProperty(t,"NoiseFilter",{enumerable:!0,get:function(){return n(i).default}});var o=d("./displacement/DisplacementFilter");Object.defineProperty(t,"DisplacementFilter",{enumerable:!0,get:function(){return n(o).default}});var s=d("./blur/BlurFilter");Object.defineProperty(t,"BlurFilter",{enumerable:!0,get:function(){return n(s).default}});var a=d("./blur/BlurXFilter");Object.defineProperty(t,"BlurXFilter",{enumerable:!0,get:function(){return n(a).default}});var l=d("./blur/BlurYFilter");Object.defineProperty(t,"BlurYFilter",{enumerable:!0,get:function(){return n(l).default}});var u=d("./colormatrix/ColorMatrixFilter");Object.defineProperty(t,"ColorMatrixFilter",{enumerable:!0,get:function(){return n(u).default}});var p=d("./void/VoidFilter");Object.defineProperty(t,"VoidFilter",{enumerable:!0,get:function(){return n(p).default}})},{"./blur/BlurFilter":143,"./blur/BlurXFilter":144,"./blur/BlurYFilter":145,"./colormatrix/ColorMatrixFilter":149,"./displacement/DisplacementFilter":150,"./fxaa/FXAAFilter":151,"./noise/NoiseFilter":153,"./void/VoidFilter":154}],153:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../../core")),i=(a("path"),function(a){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,n=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return r.noise=t,r.seed=n,r}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),n(e,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(t){this.uniforms.uNoise=t}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(t){this.uniforms.uSeed=t}}]),e}(r.Filter));t.default=i},{"../../core":65,path:23}],154:[function(a,e,t){t.__esModule=!0;var n=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../../core")),r=(a("path"),function(a){function e(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var t=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return t.glShaderKey="void",t}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e}(n.Filter));t.default=r},{"../../core":65,path:23}],155:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../core")),i=function(){function t(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.global=new r.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return t.prototype.getLocalPosition=function(a,e,t){return a.worldTransform.applyInverse(t||this.global,e)},t.prototype._copyEvent=function(t){t.isPrimary&&(this.isPrimary=!0),this.button=t.button,this.buttons=t.buttons,this.width=t.width,this.height=t.height,this.tiltX=t.tiltX,this.tiltY=t.tiltY,this.pointerType=t.pointerType,this.pressure=t.pressure,this.rotationAngle=t.rotationAngle,this.twist=t.twist||0,this.tangentialPressure=t.tangentialPressure||0},t.prototype._reset=function(){this.isPrimary=!1},n(t,[{key:"pointerId",get:function(){return this.identifier}}]),t}();t.default=i},{"../core":65}],156:[function(a,e,t){t.__esModule=!0;var n=function(){function t(){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,t),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return t.prototype.stopPropagation=function(){this.stopped=!0},t.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},t}();t.default=n},{}],157:[function(h,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(h("../core")),o=n(h("./InteractionData")),s=n(h("./InteractionEvent")),g=n(h("./InteractionTrackingData")),a=n(h("eventemitter3")),i=n(h("./interactiveTarget"));f.utils.mixins.delayMixin(f.DisplayObject.prototype,i.default);var l={target:null,data:{global:null}},d=function(a){function e(t,n){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var d=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this));return n=n||{},d.renderer=t,d.autoPreventDefault=void 0===n.autoPreventDefault||n.autoPreventDefault,d.interactionFrequency=n.interactionFrequency||10,d.mouse=new o.default,d.mouse.identifier="MOUSE",d.mouse.global.set(-999999),d.activeInteractionData={},d.activeInteractionData.MOUSE=d.mouse,d.interactionDataPool=[],d.eventData=new s.default,d.interactionDOMElement=null,d.moveWhenInside=!1,d.eventsAdded=!1,d.mouseOverRenderer=!1,d.supportsTouchEvents="ontouchstart"in window,d.supportsPointerEvents=!!window.PointerEvent,d.onPointerUp=d.onPointerUp.bind(d),d.processPointerUp=d.processPointerUp.bind(d),d.onPointerCancel=d.onPointerCancel.bind(d),d.processPointerCancel=d.processPointerCancel.bind(d),d.onPointerDown=d.onPointerDown.bind(d),d.processPointerDown=d.processPointerDown.bind(d),d.onPointerMove=d.onPointerMove.bind(d),d.processPointerMove=d.processPointerMove.bind(d),d.onPointerOut=d.onPointerOut.bind(d),d.processPointerOverOut=d.processPointerOverOut.bind(d),d.onPointerOver=d.onPointerOver.bind(d),d.cursorStyles={default:"inherit",pointer:"pointer"},d.currentCursorMode=null,d.cursor=null,d._tempPoint=new f.Point,d.resolution=1,d.setTargetElement(d.renderer.view,d.renderer.resolution),d}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.hitTest=function(n,e){return l.target=null,l.data.global=n,e||(e=this.renderer._lastObjectRendered),this.processInteractive(l,e,null,!0),l.target},e.prototype.setTargetElement=function(n){var e=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=n,this.resolution=e,this.addEvents()},e.prototype.addEvents=function(){this.interactionDOMElement&&(f.ticker.shared.add(this.update,this,f.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},e.prototype.removeEvents=function(){this.interactionDOMElement&&(f.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},e.prototype.update=function(a){if(this._deltaTime+=a,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var e in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(e)){var t=this.activeInteractionData[e];if(t.originalEvent&&"touch"!==t.pointerType){var n=this.configureInteractionEventForDOMEvent(this.eventData,t.originalEvent,t);this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},e.prototype.setCursorMode=function(n){if(n=n||"default",this.currentCursorMode!==n){this.currentCursorMode=n;var a=this.cursorStyles[n];if(a)switch(void 0===a?"undefined":r(a)){case"string":this.interactionDOMElement.style.cursor=a;break;case"function":a(n);break;case"object":Object.assign(this.interactionDOMElement.style,a);}else"string"!=typeof n||Object.prototype.hasOwnProperty.call(this.cursorStyles,n)||(this.interactionDOMElement.style.cursor=n)}},e.prototype.dispatchEvent=function(a,e,t){t.stopped||(t.currentTarget=a,t.type=e,a.emit(e,t),a[e]&&a[e](t))},e.prototype.mapPositionToPoint=function(a,e,t){var n=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var r=navigator.isCocoonJS?this.resolution:1/this.resolution;a.x=(e-n.left)*(this.interactionDOMElement.width/n.width)*r,a.y=(t-n.top)*(this.interactionDOMElement.height/n.height)*r},e.prototype.processInteractive=function(d,e,t,n,p){if(!e||!e.visible)return!1;var f=d.data.global,o=!1,g=p=e.interactive||p;if(e.hitArea?g=!1:n&&e._mask&&(e._mask.containsPoint(f)||(n=!1)),e.interactiveChildren&&e.children)for(var m=e.children,l=m.length-1;0<=l;l--){var y=m[l],c=this.processInteractive(d,y,t,n,g);if(c){if(!y.parent)continue;g=!1,c&&(d.target&&(n=!1),o=!0)}}return p&&(n&&!d.target&&(e.hitArea?(e.worldTransform.applyInverse(f,this._tempPoint),e.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(o=!0)):e.containsPoint&&e.containsPoint(f)&&(o=!0)),e.interactive&&(o&&!d.target&&(d.target=e),t&&t(d,e,!!o))),o},e.prototype.onPointerDown=function(d){if(!this.supportsTouchEvents||"touch"!==d.pointerType){var e=this.normalizeToPointerData(d);this.autoPreventDefault&&e[0].isNormalized&&d.preventDefault();for(var t=e.length,n=0;n<t;n++){var l=e[n],i=this.getInteractionDataForPointerId(l),o=this.configureInteractionEventForDOMEvent(this.eventData,l,i);if(o.data.originalEvent=d,this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",o),"touch"===l.pointerType)this.emit("touchstart",o);else if("mouse"===l.pointerType||"pen"===l.pointerType){var s=2===l.button;this.emit(s?"rightdown":"mousedown",this.eventData)}}}},e.prototype.processPointerDown=function(a,e,t){var n=a.data,r=a.data.identifier;if(t)if(e.trackedPointers[r]||(e.trackedPointers[r]=new g.default(r)),this.dispatchEvent(e,"pointerdown",a),"touch"===n.pointerType)this.dispatchEvent(e,"touchstart",a);else if("mouse"===n.pointerType||"pen"===n.pointerType){var i=2===n.button;i?e.trackedPointers[r].rightDown=!0:e.trackedPointers[r].leftDown=!0,this.dispatchEvent(e,i?"rightdown":"mousedown",a)}},e.prototype.onPointerComplete=function(d,e,t){for(var n=this.normalizeToPointerData(d),r=n.length,i=d.target===this.interactionDOMElement?"":"outside",o=0;o<r;o++){var p=n[o],a=this.getInteractionDataForPointerId(p),l=this.configureInteractionEventForDOMEvent(this.eventData,p,a);if(l.data.originalEvent=d,this.processInteractive(l,this.renderer._lastObjectRendered,t,e||!i),this.emit(e?"pointercancel":"pointerup"+i,l),"mouse"===p.pointerType||"pen"===p.pointerType){var u=2===p.button;this.emit(u?"rightup"+i:"mouseup"+i,l)}else"touch"===p.pointerType&&(this.emit(e?"touchcancel":"touchend"+i,l),this.releaseInteractionDataForPointerId(p.pointerId,a))}},e.prototype.onPointerCancel=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!0,this.processPointerCancel)},e.prototype.processPointerCancel=function(a,e){var t=a.data,n=a.data.identifier;void 0!==e.trackedPointers[n]&&(delete e.trackedPointers[n],this.dispatchEvent(e,"pointercancel",a),"touch"===t.pointerType&&this.dispatchEvent(e,"touchcancel",a))},e.prototype.onPointerUp=function(t){this.supportsTouchEvents&&"touch"===t.pointerType||this.onPointerComplete(t,!1,this.processPointerUp)},e.prototype.processPointerUp=function(d,e,t){var n=d.data,r=d.data.identifier,i=e.trackedPointers[r],o="touch"===n.pointerType;if("mouse"===n.pointerType||"pen"===n.pointerType){var s=2===n.button,a=g.default.FLAGS,l=s?a.RIGHT_DOWN:a.LEFT_DOWN,u=void 0!==i&&i.flags&l;t?(this.dispatchEvent(e,s?"rightup":"mouseup",d),u&&this.dispatchEvent(e,s?"rightclick":"click",d)):u&&this.dispatchEvent(e,s?"rightupoutside":"mouseupoutside",d),i&&(s?i.rightDown=!1:i.leftDown=!1)}t?(this.dispatchEvent(e,"pointerup",d),o&&this.dispatchEvent(e,"touchend",d),i&&(this.dispatchEvent(e,"pointertap",d),o&&(this.dispatchEvent(e,"tap",d),i.over=!1))):i&&(this.dispatchEvent(e,"pointerupoutside",d),o&&this.dispatchEvent(e,"touchendoutside",d)),i&&i.none&&delete e.trackedPointers[r]},e.prototype.onPointerMove=function(d){if(!this.supportsTouchEvents||"touch"!==d.pointerType){var e=this.normalizeToPointerData(d);"mouse"===e[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var t=e.length,n=0;n<t;n++){var l=e[n],i=this.getInteractionDataForPointerId(l),o=this.configureInteractionEventForDOMEvent(this.eventData,l,i);o.data.originalEvent=d;var s="touch"!==l.pointerType||this.moveWhenInside;this.processInteractive(o,this.renderer._lastObjectRendered,this.processPointerMove,s),this.emit("pointermove",o),"touch"===l.pointerType&&this.emit("touchmove",o),"mouse"!==l.pointerType&&"pen"!==l.pointerType||this.emit("mousemove",o)}"mouse"===e[0].pointerType&&this.setCursorMode(this.cursor)}},e.prototype.processPointerMove=function(a,e,t){var n=a.data,r="touch"===n.pointerType,i="mouse"===n.pointerType||"pen"===n.pointerType;i&&this.processPointerOverOut(a,e,t),this.moveWhenInside&&!t||(this.dispatchEvent(e,"pointermove",a),r&&this.dispatchEvent(e,"touchmove",a),i&&this.dispatchEvent(e,"mousemove",a))},e.prototype.onPointerOut=function(a){if(!this.supportsTouchEvents||"touch"!==a.pointerType){var e=this.normalizeToPointerData(a)[0];"mouse"===e.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var t=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,t);n.data.originalEvent=e,this.processInteractive(n,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",n),"mouse"===e.pointerType||"pen"===e.pointerType?this.emit("mouseout",n):this.releaseInteractionDataForPointerId(t.identifier)}},e.prototype.processPointerOverOut=function(a,e,t){var n=a.data,r=a.data.identifier,i="mouse"===n.pointerType||"pen"===n.pointerType,o=e.trackedPointers[r];t&&!o&&(o=e.trackedPointers[r]=new g.default(r)),void 0!==o&&(t&&this.mouseOverRenderer?(o.over||(o.over=!0,this.dispatchEvent(e,"pointerover",a),i&&this.dispatchEvent(e,"mouseover",a)),i&&null===this.cursor&&(this.cursor=e.cursor)):o.over&&(o.over=!1,this.dispatchEvent(e,"pointerout",this.eventData),i&&this.dispatchEvent(e,"mouseout",a),o.none&&delete e.trackedPointers[r]))},e.prototype.onPointerOver=function(a){var e=this.normalizeToPointerData(a)[0],t=this.getInteractionDataForPointerId(e),n=this.configureInteractionEventForDOMEvent(this.eventData,e,t);n.data.originalEvent=e,"mouse"===e.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",n),"mouse"!==e.pointerType&&"pen"!==e.pointerType||this.emit("mouseover",n)},e.prototype.getInteractionDataForPointerId=function(a){var e=a.pointerId,t;return e==="MOUSE"||"mouse"===a.pointerType?t=this.mouse:this.activeInteractionData[e]?t=this.activeInteractionData[e]:((t=this.interactionDataPool.pop()||new o.default).identifier=e,this.activeInteractionData[e]=t),t._copyEvent(a),t},e.prototype.releaseInteractionDataForPointerId=function(n){var e=this.activeInteractionData[n];e&&(delete this.activeInteractionData[n],e._reset(),this.interactionDataPool.push(e))},e.prototype.configureInteractionEventForDOMEvent=function(a,e,t){return a.data=t,this.mapPositionToPoint(t.global,e.clientX,e.clientY),navigator.isCocoonJS&&"touch"===e.pointerType&&(t.global.x/=this.resolution,t.global.y/=this.resolution),"touch"===e.pointerType&&(e.globalX=t.global.x,e.globalY=t.global.y),t.originalEvent=e,a._reset(),a},e.prototype.normalizeToPointerData=function(a){var e=[];if(this.supportsTouchEvents&&a instanceof TouchEvent)for(var t=0,o=a.changedTouches.length,r;t<o;t++)r=a.changedTouches[t],void 0===r.button&&(r.button=a.touches.length?1:0),void 0===r.buttons&&(r.buttons=a.touches.length?1:0),void 0===r.isPrimary&&(r.isPrimary=1===a.touches.length&&"touchstart"===a.type),void 0===r.width&&(r.width=r.radiusX||1),void 0===r.height&&(r.height=r.radiusY||1),void 0===r.tiltX&&(r.tiltX=0),void 0===r.tiltY&&(r.tiltY=0),void 0===r.pointerType&&(r.pointerType="touch"),void 0===r.pointerId&&(r.pointerId=r.identifier||0),void 0===r.pressure&&(r.pressure=r.force||.5),r.twist=0,r.tangentialPressure=0,void 0===r.layerX&&(r.layerX=r.offsetX=r.clientX),void 0===r.layerY&&(r.layerY=r.offsetY=r.clientY),r.isNormalized=!0,e.push(r);else!(a instanceof MouseEvent)||this.supportsPointerEvents&&a instanceof window.PointerEvent?e.push(a):(void 0===a.isPrimary&&(a.isPrimary=!0),void 0===a.width&&(a.width=1),void 0===a.height&&(a.height=1),void 0===a.tiltX&&(a.tiltX=0),void 0===a.tiltY&&(a.tiltY=0),void 0===a.pointerType&&(a.pointerType="mouse"),void 0===a.pointerId&&(a.pointerId="MOUSE"),void 0===a.pressure&&(a.pressure=.5),a.twist=0,a.tangentialPressure=0,a.isNormalized=!0,e.push(a));return e},e.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},e}(a.default);t.default=d,f.WebGLRenderer.registerPlugin("interaction",d),f.CanvasRenderer.registerPlugin("interaction",d)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(){function a(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this._pointerId=e,this._flags=a.FLAGS.NONE}return a.prototype._doSet=function(n,e){this._flags=e?this._flags|n:this._flags&~n},n(a,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(t){this._flags=t}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(t){this._doSet(this.constructor.FLAGS.OVER,t)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,t)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(t){this._doSet(this.constructor.FLAGS.LEFT_DOWN,t)}}]),a}();t.default=r,r.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=d("./InteractionData");Object.defineProperty(t,"InteractionData",{enumerable:!0,get:function(){return n(r).default}});var i=d("./InteractionManager");Object.defineProperty(t,"InteractionManager",{enumerable:!0,get:function(){return n(i).default}});var o=d("./interactiveTarget");Object.defineProperty(t,"interactiveTarget",{enumerable:!0,get:function(){return n(o).default}});var s=d("./InteractionTrackingData");Object.defineProperty(t,"InteractionTrackingData",{enumerable:!0,get:function(){return n(s).default}});var a=d("./InteractionEvent");Object.defineProperty(t,"InteractionEvent",{enumerable:!0,get:function(){return n(a).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(a,e,t){t.__esModule=!0,t.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(t){t?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(d,e,t){function u(a,e){a.bitmapFont=n.BitmapText.registerFont(a.data,e)}t.__esModule=!0,t.parse=u,t.default=function(){return function(s,e){if(!(s.data&&s.type===o.Resource.TYPE.XML))e();else if(0!==s.data.getElementsByTagName("page").length&&0!==s.data.getElementsByTagName("info").length&&null!==s.data.getElementsByTagName("info")[0].getAttribute("face")){var t=s.isDataUrl?"":r.dirname(s.url);s.isDataUrl&&("."===t&&(t=""),this.baseUrl&&t&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(t+="/")),(t=t.replace(this.baseUrl,""))&&"/"!==t.charAt(t.length-1)&&(t+="/");var d=t+s.data.getElementsByTagName("page")[0].getAttribute("file");if(i.utils.TextureCache[d])u(s,i.utils.TextureCache[d]),e();else{var a={crossOrigin:s.crossOrigin,loadType:o.Resource.LOAD_TYPE.IMAGE,metadata:s.metadata.imageMetadata,parentResource:s};this.add(s.name+"_image",d,a,function(t){u(s,t.texture),e()})}}else e()}};var r=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("path")),i=d("../core"),o=d("resource-loader"),n=d("../extras")},{"../core":65,"../extras":141,path:23,"resource-loader":36}],162:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0,t.shared=t.Resource=t.textureParser=t.getResourcePath=t.spritesheetParser=t.parseBitmapFontData=t.bitmapFontParser=t.Loader=void 0;var r=d("./bitmapFontParser");Object.defineProperty(t,"bitmapFontParser",{enumerable:!0,get:function(){return n(r).default}}),Object.defineProperty(t,"parseBitmapFontData",{enumerable:!0,get:function(){return r.parse}});var i=d("./spritesheetParser");Object.defineProperty(t,"spritesheetParser",{enumerable:!0,get:function(){return n(i).default}}),Object.defineProperty(t,"getResourcePath",{enumerable:!0,get:function(){return i.getResourcePath}});var o=d("./textureParser");Object.defineProperty(t,"textureParser",{enumerable:!0,get:function(){return n(o).default}});var s=d("resource-loader");Object.defineProperty(t,"Resource",{enumerable:!0,get:function(){return s.Resource}});var a=n(d("../core/Application")),l=n(d("./loader"));t.Loader=l.default;var u=new l.default;u.destroy=function(){},t.shared=u;var p=a.default.prototype;p._loader=null,Object.defineProperty(p,"loader",{get:function(){if(!this._loader){var t=this._options.sharedLoader;this._loader=t?u:new l.default}return this._loader}}),p._parentDestroy=p.destroy,p.destroy=function(t){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(t)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(p,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=n(p("resource-loader")),i=p("resource-loader/lib/middlewares/parsing/blob"),f=n(p("eventemitter3")),o=n(p("./textureParser")),a=n(p("./spritesheetParser")),s=n(p("./bitmapFontParser")),l=function(a){function s(e,t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,s);var r=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,e,t));f.default.call(r);for(var n=0;n<s._pixiMiddleware.length;++n)r.use(s._pixiMiddleware[n]());return r.onStart.add(function(t){return r.emit("start",t)}),r.onProgress.add(function(n,e){return r.emit("progress",n,e)}),r.onError.add(function(a,e,t){return r.emit("error",a,e,t)}),r.onLoad.add(function(n,e){return r.emit("load",n,e)}),r.onComplete.add(function(n,e){return r.emit("complete",n,e)}),r}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(s,a),s.addPixiMiddleware=function(t){s._pixiMiddleware.push(t)},s.prototype.destroy=function(){this.removeAllListeners(),this.reset()},s}(r.default);for(var u in t.default=l,f.default.prototype)l.prototype[u]=f.default.prototype[u];l._pixiMiddleware=[i.blobMiddlewareFactory,o.default,a.default,s.default];var c=r.default.Resource;c.setExtensionXhrType("fnt",c.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(a,e,t){function d(a,e){return a.isDataUrl?a.data.meta.image:n.default.resolve(a.url.replace(e,""),a.data.meta.image)}t.__esModule=!0,t.default=function(){return function(s,e){var t=s.name+"_image";if(s.data&&s.type===r.Resource.TYPE.JSON&&s.data.frames&&!this.resources[t]){var n={crossOrigin:s.crossOrigin,loadType:r.Resource.LOAD_TYPE.IMAGE,metadata:s.metadata.imageMetadata,parentResource:s},o=d(s,this.baseUrl);this.add(t,o,n,function(t){var n=new i.Spritesheet(t.texture.baseTexture,s.data,s.url);n.parse(function(){s.spritesheet=n,s.textures=n.textures,e()})})}else e()}},t.getResourcePath=d;var r=a("resource-loader"),n=function(t){return t&&t.__esModule?t:{default:t}}(a("url")),i=a("../core")},{"../core":65,"resource-loader":36,url:29}],165:[function(a,e,t){t.__esModule=!0,t.default=function(){return function(a,e){a.data&&a.type===n.Resource.TYPE.IMAGE&&(a.texture=r.default.fromLoader(a.data,a.url,a.name)),e()}};var n=a("resource-loader"),r=function(t){return t&&t.__esModule?t:{default:t}}(a("../core/textures/Texture"))},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(d,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),p=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("../core")),i=function(t){return t&&t.__esModule?t:{default:t}}(d("../extras/TextureTransform")),f=new p.Point,s=new p.Polygon,a=function(o){function e(t,n,r,s,a){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var d=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,o.call(this));return d._texture=t,d.uvs=r||new Float32Array([0,0,1,0,1,1,0,1]),d.vertices=n||new Float32Array([0,0,100,0,100,100,0,100]),d.indices=s||new Uint16Array([0,1,3,2]),d.dirty=0,d.indexDirty=0,d.blendMode=p.BLEND_MODES.NORMAL,d.canvasPadding=0,d.drawMode=a||e.DRAW_MODES.TRIANGLE_MESH,d.shader=null,d.tintRgb=new Float32Array([1,1,1]),d._glDatas={},d._uvTransform=new i.default(t),d.uploadUvTransform=!1,d.pluginName="mesh",d}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,o),e.prototype._renderWebGL=function(t){this.refresh(),t.setObjectRenderer(t.plugins[this.pluginName]),t.plugins[this.pluginName].render(this)},e.prototype._renderCanvas=function(t){this.refresh(),t.plugins[this.pluginName].render(this)},e.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},e.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},e.prototype.refresh=function(t){this._uvTransform.update(t)&&this._refresh()},e.prototype._refresh=function(){},e.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},e.prototype.containsPoint=function(t){if(!this.getBounds().contains(t.x,t.y))return!1;this.worldTransform.applyInverse(t,f);for(var a=this.vertices,n=s.points,r=this.indices,i=this.indices.length,o=this.drawMode===e.DRAW_MODES.TRIANGLES?3:1,l=0;l+2<i;l+=o){var p=2*r[l],c=2*r[l+1],h=2*r[l+2];if(n[0]=a[p],n[1]=a[p+1],n[2]=a[c],n[3]=a[c+1],n[4]=a[h],n[5]=a[h+1],s.contains(f.x,f.y))return!0}return!1},n(e,[{key:"texture",get:function(){return this._texture},set:function(t){this._texture!==t&&(this._texture=t,t&&(t.baseTexture.hasLoaded?this._onTextureUpdate():t.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return p.utils.rgb2hex(this.tintRgb)},set:function(t){this.tintRgb=p.utils.hex2rgb(t,this.tintRgb)}}]),e}(p.Container);t.default=a,a.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../extras/TextureTransform":136}],167:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),r=function(d){function e(t,n,r,i,o){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var a=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,d.call(this,t,4,4));return a._origWidth=t.orig.width,a._origHeight=t.orig.height,a._width=a._origWidth,a._height=a._origHeight,a.leftWidth=void 0===n?10:n,a.rightWidth=void 0===i?10:i,a.topHeight=void 0===r?10:r,a.bottomHeight=void 0===o?10:o,a.refresh(!0),a}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,d),e.prototype.updateHorizontalVertices=function(){var t=this.vertices;t[9]=t[11]=t[13]=t[15]=this._topHeight,t[17]=t[19]=t[21]=t[23]=this._height-this._bottomHeight,t[25]=t[27]=t[29]=t[31]=this._height},e.prototype.updateVerticalVertices=function(){var t=this.vertices;t[2]=t[10]=t[18]=t[26]=this._leftWidth,t[4]=t[12]=t[20]=t[28]=this._width-this._rightWidth,t[6]=t[14]=t[22]=t[30]=this._width},e.prototype._renderCanvas=function(d){var e=d.context;e.globalAlpha=this.worldAlpha;var t=this.worldTransform,n=d.resolution;d.roundPixels?e.setTransform(t.a*n,t.b*n,t.c*n,t.d*n,0|t.tx*n,0|t.ty*n):e.setTransform(t.a*n,t.b*n,t.c*n,t.d*n,t.tx*n,t.ty*n);var r=this._texture.baseTexture,i=r.source,o=r.width,s=r.height;this.drawSegment(e,i,o,s,0,1,10,11),this.drawSegment(e,i,o,s,2,3,12,13),this.drawSegment(e,i,o,s,4,5,14,15),this.drawSegment(e,i,o,s,8,9,18,19),this.drawSegment(e,i,o,s,10,11,20,21),this.drawSegment(e,i,o,s,12,13,22,23),this.drawSegment(e,i,o,s,16,17,26,27),this.drawSegment(e,i,o,s,18,19,28,29),this.drawSegment(e,i,o,s,20,21,30,31)},e.prototype.drawSegment=function(f,e,t,n,r,i,o,s){var a=this.uvs,l=this.vertices,u=(a[o]-a[r])*t,g=(a[s]-a[i])*n,m=l[o]-l[r],y=l[s]-l[i];1>u&&(u=1),1>g&&(g=1),1>m&&(m=1),1>y&&(y=1),f.drawImage(e,a[r]*t,a[i]*n,u,g,l[r],l[i],m,y)},e.prototype._refresh=function(){d.prototype._refresh.call(this);var e=this.uvs,t=this._texture;this._origWidth=t.orig.width,this._origHeight=t.orig.height;var n=1/this._origWidth,a=1/this._origHeight;e[0]=e[8]=e[16]=e[24]=0,e[1]=e[3]=e[5]=e[7]=0,e[6]=e[14]=e[22]=e[30]=1,e[25]=e[27]=e[29]=e[31]=1,e[2]=e[10]=e[18]=e[26]=n*this._leftWidth,e[4]=e[12]=e[20]=e[28]=1-n*this._rightWidth,e[9]=e[11]=e[13]=e[15]=a*this._topHeight,e[17]=e[19]=e[21]=e[23]=1-a*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},n(e,[{key:"width",get:function(){return this._width},set:function(t){this._width=t,this._refresh()}},{key:"height",get:function(){return this._height},set:function(t){this._height=t,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(t){this._leftWidth=t,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(t){this._rightWidth=t,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(t){this._topHeight=t,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(t){this._bottomHeight=t,this._refresh()}}]),e}(function(t){return t&&t.__esModule?t:{default:t}}(a("./Plane")).default);t.default=r},{"./Plane":168}],168:[function(a,e,t){t.__esModule=!0;var d=function(t){return t&&t.__esModule?t:{default:t}}(a("./Mesh")),n=function(a){function e(t,n,r){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var i=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t));return i._ready=!0,i.verticesX=n||10,i.verticesY=r||10,i.drawMode=d.default.DRAW_MODES.TRIANGLES,i.refresh(),i}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype._refresh=function(){for(var d=this._texture,e=this.verticesX*this.verticesY,t=[],n=[],r=[],i=this.verticesX-1,o=this.verticesY-1,s=d.width/i,a=d.height/o,l=0;l<e;l++){var _=l%this.verticesX,c=0|l/this.verticesX;t.push(_*s,c*a),n.push(_/i,c/o)}for(var h=0;h<i*o;h++){var x=h%i,f=0|h/i,g=f*this.verticesX+x,m=f*this.verticesX+x+1,v=(f+1)*this.verticesX+x,y=(f+1)*this.verticesX+x+1;r.push(g,m,v),r.push(m,y,v)}this.vertices=new Float32Array(t),this.uvs=new Float32Array(n),this.colors=new Float32Array([]),this.indices=new Uint16Array(r),this.indexDirty++,this.multiplyUvs()},e.prototype._onTextureUpdate=function(){d.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},e}(d.default);t.default=n},{"./Mesh":166}],169:[function(a,e,t){t.__esModule=!0;var n=function(a){function e(t,n){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var r=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t));return r.points=n,r.vertices=new Float32Array(4*n.length),r.uvs=new Float32Array(4*n.length),r.colors=new Float32Array(2*n.length),r.indices=new Uint16Array(2*n.length),r.autoUpdate=!0,r.refresh(),r}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype._refresh=function(){var d=this.points;if(!(1>d.length)&&this._texture._uvs){this.vertices.length/4!==d.length&&(this.vertices=new Float32Array(4*d.length),this.uvs=new Float32Array(4*d.length),this.colors=new Float32Array(2*d.length),this.indices=new Uint16Array(2*d.length));var e=this.uvs,t=this.indices,n=this.colors;e[0]=0,e[1]=0,e[2]=0,e[3]=1,n[0]=1,n[1]=1,t[0]=0,t[1]=1;for(var r=d.length,i=1;i<r;i++){var l=4*i,u=i/(r-1);e[l]=u,e[l+1]=0,e[l+2]=u,e[l+3]=1,n[l=2*i]=1,n[l+1]=1,t[l=2*i]=l,t[l+1]=l+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},e.prototype.refreshVertices=function(){var p=this.points;if(!(1>p.length))for(var e=p[0],f=void 0,g=0,m=0,y=this.vertices,o=p.length,s=0;s<o;s++){var _=p[s],l=4*s;m=-((f=s<p.length-1?p[s+1]:_).x-e.x),g=f.y-e.y;var u=10*(1-s/(o-1));1<u&&(u=1);var b=Math.sqrt(g*g+m*m),h=this._texture.height/2;g/=b,m/=b,g*=h,m*=h,y[l]=_.x+g,y[l+1]=_.y+m,y[l+2]=_.x-g,y[l+3]=_.y-m,e=_}},e.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},e}(function(t){return t&&t.__esModule?t:{default:t}}(a("./Mesh")).default);t.default=n},{"./Mesh":166}],170:[function(a,e,t){t.__esModule=!0;var n=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../../core")),s=function(t){return t&&t.__esModule?t:{default:t}}(a("../Mesh")),r=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.renderer=e}return n.prototype.render=function(a){var e=this.renderer,t=e.context,n=a.worldTransform,r=e.resolution;e.roundPixels?t.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,0|n.tx*r,0|n.ty*r):t.setTransform(n.a*r,n.b*r,n.c*r,n.d*r,n.tx*r,n.ty*r),e.setBlendMode(a.blendMode),a.drawMode===s.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(a):this._renderTriangles(a)},n.prototype._renderTriangleMesh=function(a){for(var e=a.vertices.length/2,t=0,i;t<e-2;t++)i=2*t,this._renderDrawTriangle(a,i,i+2,i+4)},n.prototype._renderTriangles=function(a){for(var e=a.indices,t=e.length,n=0;n<t;n+=3){var d=2*e[n],i=2*e[n+1],o=2*e[n+2];this._renderDrawTriangle(a,d,i,o)}},n.prototype._renderDrawTriangle=function(B,e,t,n){var r=this.renderer.context,i=B.uvs,o=B.vertices,s=B._texture;if(s.valid){var a=s.baseTexture,l=a.source,u=a.width,c=a.height,h,Y,G,j,X,H;if(B.uploadUvTransform){var W=B._uvTransform.mapCoord;h=(i[e]*W.a+i[e+1]*W.c+W.tx)*a.width,Y=(i[t]*W.a+i[t+1]*W.c+W.tx)*a.width,G=(i[n]*W.a+i[n+1]*W.c+W.tx)*a.width,j=(i[e]*W.b+i[e+1]*W.d+W.ty)*a.height,X=(i[t]*W.b+i[t+1]*W.d+W.ty)*a.height,H=(i[n]*W.b+i[n+1]*W.d+W.ty)*a.height}else h=i[e]*a.width,Y=i[t]*a.width,G=i[n]*a.width,j=i[e+1]*a.height,X=i[t+1]*a.height,H=i[n+1]*a.height;var y=o[e],z=o[t],V=o[n],q=o[e+1],K=o[t+1],Z=o[n+1];if(0<B.canvasPadding){var Q=B.canvasPadding/B.worldTransform.a,S=B.canvasPadding/B.worldTransform.d,I=(y+z+V)/3,P=(q+K+Z)/3,M=y-I,J=q-P,ee=Math.sqrt(M*M+J*J);y=I+M/ee*(ee+Q),q=P+J/ee*(ee+S),J=K-P,z=I+(M=z-I)/(ee=Math.sqrt(M*M+J*J))*(ee+Q),K=P+J/ee*(ee+S),J=Z-P,V=I+(M=V-I)/(ee=Math.sqrt(M*M+J*J))*(ee+Q),Z=P+J/ee*(ee+S)}r.save(),r.beginPath(),r.moveTo(y,q),r.lineTo(z,K),r.lineTo(V,Z),r.closePath(),r.clip();var te=h*X+j*G+Y*H-X*G-j*Y-h*H,R=y*X+j*V+z*H-X*V-j*z-y*H,D=h*z+y*G+Y*V-z*G-y*Y-h*V,k=h*X*V+j*z*G+y*Y*H-y*X*G-j*Y*V-h*z*H,L=q*X+j*Z+K*H-X*Z-j*K-q*H,N=h*K+q*G+Y*Z-K*G-q*Y-h*Z,U=h*X*Z+j*K*G+q*Y*H-q*X*G-j*Y*Z-h*K*H;r.transform(R/te,L/te,D/te,N/te,k/te,U/te),r.drawImage(l,0,0,u*a.resolution,c*a.resolution,0,0,u,c),r.restore(),this.renderer.invalidateBlendMode()}},n.prototype.renderMeshFlat=function(d){var e=this.renderer.context,t=d.vertices,n=t.length/2;e.beginPath();for(var r=1;r<n-2;++r){var p=2*r,o=t[p],s=t[p+1],a=t[p+2],l=t[p+3],u=t[p+4],c=t[p+5];e.moveTo(o,s),e.lineTo(a,l),e.lineTo(u,c)}e.fillStyle="#FF0000",e.fill(),e.closePath()},n.prototype.destroy=function(){this.renderer=null},n}();t.default=r,n.CanvasRenderer.registerPlugin("mesh",r)},{"../../core":65,"../Mesh":166}],171:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=d("./Mesh");Object.defineProperty(t,"Mesh",{enumerable:!0,get:function(){return n(r).default}});var i=d("./webgl/MeshRenderer");Object.defineProperty(t,"MeshRenderer",{enumerable:!0,get:function(){return n(i).default}});var o=d("./canvas/CanvasMeshRenderer");Object.defineProperty(t,"CanvasMeshRenderer",{enumerable:!0,get:function(){return n(o).default}});var s=d("./Plane");Object.defineProperty(t,"Plane",{enumerable:!0,get:function(){return n(s).default}});var a=d("./NineSlicePlane");Object.defineProperty(t,"NineSlicePlane",{enumerable:!0,get:function(){return n(a).default}});var l=d("./Rope");Object.defineProperty(t,"Rope",{enumerable:!0,get:function(){return n(l).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var p=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("../../core")),i=n(d("pixi-gl-core")),o=n(d("../Mesh")),s=(d("path"),p.Matrix.IDENTITY),a=function(a){function e(t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t));return n.shader=null,n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.shader=new p.Shader(t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},e.prototype.render=function(a){var e=this.renderer,t=e.gl,n=a._texture;if(n.valid){var r=a._glDatas[e.CONTEXT_UID];r||(e.bindVao(null),(r={shader:this.shader,vertexBuffer:i.default.GLBuffer.createVertexBuffer(t,a.vertices,t.STREAM_DRAW),uvBuffer:i.default.GLBuffer.createVertexBuffer(t,a.uvs,t.STREAM_DRAW),indexBuffer:i.default.GLBuffer.createIndexBuffer(t,a.indices,t.STATIC_DRAW),vao:null,dirty:a.dirty,indexDirty:a.indexDirty}).vao=new i.default.VertexArrayObject(t).addIndex(r.indexBuffer).addAttribute(r.vertexBuffer,r.shader.attributes.aVertexPosition,t.FLOAT,!1,8,0).addAttribute(r.uvBuffer,r.shader.attributes.aTextureCoord,t.FLOAT,!1,8,0),a._glDatas[e.CONTEXT_UID]=r),e.bindVao(r.vao),a.dirty!==r.dirty&&(r.dirty=a.dirty,r.uvBuffer.upload(a.uvs)),a.indexDirty!==r.indexDirty&&(r.indexDirty=a.indexDirty,r.indexBuffer.upload(a.indices)),r.vertexBuffer.upload(a.vertices),e.bindShader(r.shader),r.shader.uniforms.uSampler=e.bindTexture(n),e.state.setBlendMode(p.utils.correctBlendMode(a.blendMode,n.baseTexture.premultipliedAlpha)),r.shader.uniforms.uTransform&&(a.uploadUvTransform?r.shader.uniforms.uTransform=a._uvTransform.mapCoord.toArray(!0):r.shader.uniforms.uTransform=s.toArray(!0)),r.shader.uniforms.translationMatrix=a.worldTransform.toArray(!0),r.shader.uniforms.uColor=p.utils.premultiplyRgba(a.tintRgb,a.worldAlpha,r.shader.uniforms.uColor,n.baseTexture.premultipliedAlpha);var d=a.drawMode===o.default.DRAW_MODES.TRIANGLE_MESH?t.TRIANGLE_STRIP:t.TRIANGLES;r.vao.draw(d,a.indices.length,0)}},e}(p.ObjectRenderer);t.default=a,p.WebGLRenderer.registerPlugin("mesh",a)},{"../../core":65,"../Mesh":166,path:23,"pixi-gl-core":12}],173:[function(a,e,t){t.__esModule=!0;var n=function(){function a(a,e){for(var t=0,i;t<e.length;t++)i=e[t],i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(a,i.key,i)}return function(e,t,n){return t&&a(e.prototype,t),n&&a(e,n),e}}(),d=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../core")),r=a("../core/utils"),i=function(i){function e(){var t=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,n=arguments[1],r=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,l=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var s=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,i.call(this));return 16384<r&&(r=16384),r>t&&(r=t),s._properties=[!1,!0,!1,!1,!1],s._maxSize=t,s._batchSize=r,s._glBuffers={},s._bufferToUpdate=0,s.interactiveChildren=!1,s.blendMode=d.BLEND_MODES.NORMAL,s.autoResize=l,s.roundPixels=!0,s.baseTexture=null,s.setProperties(n),s._tint=0,s.tintRgb=new Float32Array(4),s.tint=16777215,s}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,i),e.prototype.setProperties=function(t){t&&(this._properties[0]="scale"in t?!!t.scale:this._properties[0],this._properties[1]="position"in t?!!t.position:this._properties[1],this._properties[2]="rotation"in t?!!t.rotation:this._properties[2],this._properties[3]="uvs"in t?!!t.uvs:this._properties[3],this._properties[4]="alpha"in t||"tint"in t?!!t.alpha||!!t.tint:this._properties[4])},e.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},e.prototype.renderWebGL=function(n){var e=this;this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return e.onChildrenChange(0)})),n.setObjectRenderer(n.plugins.particle),n.plugins.particle.render(this))},e.prototype.onChildrenChange=function(n){var e=Math.floor(n/this._batchSize);e<this._bufferToUpdate&&(this._bufferToUpdate=e)},e.prototype.renderCanvas=function(p){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var e=p.context,t=this.worldTransform,n=!0,f=0,g=0,m=0,y=0;p.setBlendMode(this.blendMode),e.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var _=0,b;_<this.children.length;++_)if(b=this.children[_],b.visible){var x=b._texture.frame;if(e.globalAlpha=this.worldAlpha*b.alpha,0==b.rotation%(2*Math.PI))n&&(e.setTransform(t.a,t.b,t.c,t.d,t.tx*p.resolution,t.ty*p.resolution),n=!1),f=b.anchor.x*(-x.width*b.scale.x)+b.position.x+.5,g=b.anchor.y*(-x.height*b.scale.y)+b.position.y+.5,m=x.width*b.scale.x,y=x.height*b.scale.y;else{n||(n=!0),b.displayObjectUpdateTransform();var c=b.worldTransform;p.roundPixels?e.setTransform(c.a,c.b,c.c,c.d,0|c.tx*p.resolution,0|c.ty*p.resolution):e.setTransform(c.a,c.b,c.c,c.d,c.tx*p.resolution,c.ty*p.resolution),f=b.anchor.x*-x.width+.5,g=b.anchor.y*-x.height+.5,m=x.width,y=x.height}var h=b._texture.baseTexture.resolution;e.drawImage(b._texture.baseTexture.source,x.x*h,x.y*h,x.width*h,x.height*h,f*p.resolution,g*p.resolution,m*p.resolution,y*p.resolution)}}},e.prototype.destroy=function(e){if(i.prototype.destroy.call(this,e),this._buffers)for(var t=0;t<this._buffers.length;++t)this._buffers[t].destroy();this._properties=null,this._buffers=null},n(e,[{key:"tint",get:function(){return this._tint},set:function(t){this._tint=t,(0,r.hex2rgb)(t,this.tintRgb)}}]),e}(d.Container);t.default=i},{"../core":65,"../core/utils":124}],174:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=a("./ParticleContainer");Object.defineProperty(t,"ParticleContainer",{enumerable:!0,get:function(){return n(r).default}});var i=a("./webgl/ParticleRenderer");Object.defineProperty(t,"ParticleRenderer",{enumerable:!0,get:function(){return n(i).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(a,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var g=n(a("pixi-gl-core")),i=n(a("../../core/utils/createIndicesForQuads")),r=function(){function a(e,t,n,r){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,a),this.gl=e,this.size=r,this.dynamicProperties=[],this.staticProperties=[];for(var i=0,d;i<t.length;++i)d=t[i],d={attribute:d.attribute,size:d.size,uploadFunction:d.uploadFunction,unsignedByte:d.unsignedByte,offset:d.offset},n[i]?this.dynamicProperties.push(d):this.staticProperties.push(d);this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.initBuffers()}return a.prototype.initBuffers=function(){var o=this.gl,e=0;this.indices=(0,i.default)(this.size),this.indexBuffer=g.default.GLBuffer.createIndexBuffer(o,this.indices,o.STATIC_DRAW),this.dynamicStride=0;for(var m=0,y;m<this.dynamicProperties.length;++m)y=this.dynamicProperties[m],y.offset=e,e+=y.size,this.dynamicStride+=y.size;var _=new ArrayBuffer(4*(4*(this.size*this.dynamicStride)));this.dynamicData=new Float32Array(_),this.dynamicDataUint32=new Uint32Array(_),this.dynamicBuffer=g.default.GLBuffer.createVertexBuffer(o,_,o.STREAM_DRAW);var s=0;this.staticStride=0;for(var b=0,x;b<this.staticProperties.length;++b)x=this.staticProperties[b],x.offset=s,s+=x.size,this.staticStride+=x.size;var v=new ArrayBuffer(4*(4*(this.size*this.staticStride)));this.staticData=new Float32Array(v),this.staticDataUint32=new Uint32Array(v),this.staticBuffer=g.default.GLBuffer.createVertexBuffer(o,v,o.STATIC_DRAW),this.vao=new g.default.VertexArrayObject(o).addIndex(this.indexBuffer);for(var c=0,T;c<this.dynamicProperties.length;++c)T=this.dynamicProperties[c],T.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,T.attribute,o.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*T.offset):this.vao.addAttribute(this.dynamicBuffer,T.attribute,o.FLOAT,!1,4*this.dynamicStride,4*T.offset);for(var E=0,S;E<this.staticProperties.length;++E)S=this.staticProperties[E],S.unsignedByte?this.vao.addAttribute(this.staticBuffer,S.attribute,o.UNSIGNED_BYTE,!0,4*this.staticStride,4*S.offset):this.vao.addAttribute(this.staticBuffer,S.attribute,o.FLOAT,!1,4*this.staticStride,4*S.offset)},a.prototype.uploadDynamic=function(a,e,t){for(var n=0,o;n<this.dynamicProperties.length;n++)o=this.dynamicProperties[n],o.uploadFunction(a,e,t,o.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,o.offset);this.dynamicBuffer.upload()},a.prototype.uploadStatic=function(a,e,t){for(var n=0,o;n<this.staticProperties.length;n++)o=this.staticProperties[n],o.uploadFunction(a,e,t,o.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,o.offset);this.staticBuffer.upload()},a.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},a}();t.default=r},{"../../core/utils/createIndicesForQuads":122,"pixi-gl-core":12}],176:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var g=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("../../core")),r=n(d("./ParticleShader")),u=n(d("./ParticleBuffer")),p=d("../../core/utils"),a=function(a){function e(t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t));return n.shader=null,n.indexBuffer=null,n.properties=null,n.tempMatrix=new g.Matrix,n.CONTEXT_UID=0,n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.onContextChange=function(){var t=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new r.default(t),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},e.prototype.start=function(){this.renderer.bindShader(this.shader)},e.prototype.render=function(i){var e=i.children,t=i._maxSize,n=i._batchSize,r=this.renderer,o=e.length;if(0!==o){o>t&&(o=t);var m=i._glBuffers[r.CONTEXT_UID];m||(m=i._glBuffers[r.CONTEXT_UID]=this.generateBuffers(i));var y=e[0]._texture.baseTexture;this.renderer.setBlendMode(g.utils.correctBlendMode(i.blendMode,y.premultipliedAlpha));var l=r.gl,u=i.worldTransform.copy(this.tempMatrix);u.prepend(r._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=u.toArray(!0),this.shader.uniforms.uColor=g.utils.premultiplyRgba(i.tintRgb,i.worldAlpha,this.shader.uniforms.uColor,y.premultipliedAlpha),this.shader.uniforms.uSampler=r.bindTexture(y);for(var c=0,_=0,b;c<o;c+=n,_+=1){if(b=o-c,b>n&&(b=n),_>=m.length){if(!i.autoResize)break;m.push(this._generateOneMoreBuffer(i))}var x=m[_];x.uploadDynamic(e,c,b),i._bufferToUpdate===_&&(x.uploadStatic(e,c,b),i._bufferToUpdate=_+1),r.bindVao(x.vao),x.vao.draw(l.TRIANGLES,6*b)}}},e.prototype.generateBuffers=function(s){for(var e=this.renderer.gl,t=[],n=s._maxSize,r=s._batchSize,i=s._properties,o=0;o<n;o+=r)t.push(new u.default(e,this.properties,i,r));return t},e.prototype._generateOneMoreBuffer=function(a){var e=this.renderer.gl,t=a._batchSize,n=a._properties;return new u.default(e,this.properties,n,t)},e.prototype.uploadVertices=function(y,e,t,n,r,i){for(var _=0,b=0,x=0,v=0,T=0;T<t;++T){var E=y[e+T],h=E._texture,d=E.scale.x,p=E.scale.y,f=h.trim,g=h.orig;f?(_=(b=f.x-E.anchor.x*g.width)+f.width,x=(v=f.y-E.anchor.y*g.height)+f.height):(_=g.width*(1-E.anchor.x),b=g.width*-E.anchor.x,x=g.height*(1-E.anchor.y),v=g.height*-E.anchor.y),n[i]=b*d,n[i+1]=v*p,n[i+r]=_*d,n[i+r+1]=v*p,n[i+2*r]=_*d,n[i+2*r+1]=x*p,n[i+3*r]=b*d,n[i+3*r+1]=x*p,i+=4*r}},e.prototype.uploadPosition=function(d,e,t,n,r,i){for(var l=0,u;l<t;l++)u=d[e+l].position,n[i]=u.x,n[i+1]=u.y,n[i+r]=u.x,n[i+r+1]=u.y,n[i+2*r]=u.x,n[i+2*r+1]=u.y,n[i+3*r]=u.x,n[i+3*r+1]=u.y,i+=4*r},e.prototype.uploadRotation=function(d,e,t,n,r,i){for(var l=0,u;l<t;l++)u=d[e+l].rotation,n[i]=u,n[i+r]=u,n[i+2*r]=u,n[i+3*r]=u,i+=4*r},e.prototype.uploadUvs=function(d,e,t,n,r,i){for(var l=0,u;l<t;++l)u=d[e+l]._texture._uvs,u?(n[i]=u.x0,n[i+1]=u.y0,n[i+r]=u.x1,n[i+r+1]=u.y1,n[i+2*r]=u.x2,n[i+2*r+1]=u.y2,n[i+3*r]=u.x3,n[i+3*r+1]=u.y3,i+=4*r):(n[i]=0,n[i+1]=0,n[i+r]=0,n[i+r+1]=0,n[i+2*r]=0,n[i+2*r+1]=0,n[i+3*r]=0,n[i+3*r+1]=0,i+=4*r)},e.prototype.uploadTint=function(a,e,t,n,r,i){for(var d=0;d<t;++d){var f=a[e+d],l=f._texture.baseTexture.premultipliedAlpha,u=f.alpha,c=1>u&&l?(0,p.premultiplyTint)(f._tintRGB,u):f._tintRGB+(255*u<<24);n[i]=c,n[i+r]=c,n[i+2*r]=c,n[i+3*r]=c,i+=4*r}},e.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),a.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},e}(g.ObjectRenderer);t.default=a,g.WebGLRenderer.registerPlugin("particle",a)},{"../../core":65,"../../core/utils":124,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(a,e,t){t.__esModule=!0;var n=function(a){function e(t){return function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e),function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute vec2 aPositionCoord;\nattribute vec2 aScale;\nattribute float aRotation;\nuniform mat3 projectionMatrix;\nuniform vec4 uColor;\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvoid main(void){\n   vec2 v = aVertexPosition;\n   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);\n   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);\n   v = v + aPositionCoord;\n   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);\n   vTextureCoord = aTextureCoord;\n   vColor = aColor * uColor;\n}","varying vec2 vTextureCoord;\nvarying vec4 vColor;\nuniform sampler2D uSampler;\nvoid main(void){\n  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;\n  if (color.a == 0.0) discard;\n  gl_FragColor = color;\n}"))}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e}(function(t){return t&&t.__esModule?t:{default:t}}(a("../../core/Shader")).default);t.default=n},{"../../core/Shader":44}],178:[function(){Math.sign||(Math.sign=function(t){return 0===(t=+t)||isNaN(t)?t:0<t?1:-1})},{}],179:[function(t){var e=function(t){return t&&t.__esModule?t:{default:t}}(t("object-assign"));Object.assign||(Object.assign=e.default)},{"object-assign":5}],180:[function(t){t("./Object.assign"),t("./requestAnimationFrame"),t("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Object.assign":179,"./requestAnimationFrame":181}],181:[function(){(function(a){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!a.performance||!a.performance.now){var e=Date.now();a.performance||(a.performance={}),a.performance.now=function(){return Date.now()-e}}for(var s=Date.now(),t=["ms","moz","webkit","o"],r=0,d;r<t.length&&!a.requestAnimationFrame;++r)d=t[r],a.requestAnimationFrame=a[d+"RequestAnimationFrame"],a.cancelAnimationFrame=a[d+"CancelAnimationFrame"]||a[d+"CancelRequestAnimationFrame"];a.requestAnimationFrame||(a.requestAnimationFrame=function(n){if("function"!=typeof n)throw new TypeError(n+"is not a function");var e=Date.now(),t=16+s-e;return 0>t&&(t=0),s=e,setTimeout(function(){s=Date.now(),n(performance.now())},t)}),a.cancelAnimationFrame||(a.cancelAnimationFrame=function(t){return clearTimeout(t)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],182:[function(f,e,t){function g(a,e){var t=!1;if(a&&a._textures&&a._textures.length)for(var o=0;o<a._textures.length;o++)if(a._textures[o]instanceof u.Texture){var s=a._textures[o].baseTexture;-1===e.indexOf(s)&&(e.push(s),t=!0)}return t}function r(n,e){return n instanceof u.BaseTexture&&(-1===e.indexOf(n)&&e.push(n),!0)}function i(a,e){if(a._texture&&a._texture instanceof u.Texture){var t=a._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function o(n,e){return e instanceof u.Text&&(e.updateText(!0),!0)}function s(a,e){if(e instanceof u.TextStyle){var t=e.toFontString();return u.TextMetrics.measureFont(t),!0}return!1}function a(a,e){if(a instanceof u.Text){-1===e.indexOf(a.style)&&e.push(a.style),-1===e.indexOf(a)&&e.push(a);var t=a._texture.baseTexture;return-1===e.indexOf(t)&&e.push(t),!0}return!1}function l(n,e){return n instanceof u.TextStyle&&(-1===e.indexOf(n)&&e.push(n),!0)}t.__esModule=!0;var u=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(f("../core")),c=function(t){return t&&t.__esModule?t:{default:t}}(f("./limiters/CountLimiter")),h=u.ticker.shared;u.settings.UPLOADS_PER_FRAME=4;var n=function(){function d(e){var t=this;!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,d),this.limiter=new c.default(u.settings.UPLOADS_PER_FRAME),this.renderer=e,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){t.queue&&t.prepareItems()},this.registerFindHook(a),this.registerFindHook(l),this.registerFindHook(g),this.registerFindHook(r),this.registerFindHook(i),this.registerUploadHook(o),this.registerUploadHook(s)}return d.prototype.upload=function(n,a){"function"==typeof n&&(a=n,n=null),n&&this.add(n),this.queue.length?(a&&this.completes.push(a),this.ticking||(this.ticking=!0,h.addOnce(this.tick,this,u.UPDATE_PRIORITY.UTILITY))):a&&a()},d.prototype.tick=function(){setTimeout(this.delayedTick,0)},d.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var a=this.queue[0],e=!1;if(a&&!a._destroyed)for(var d=0,l=this.uploadHooks.length;d<l;d++)if(this.uploadHooks[d](this.uploadHookHelper,a)){this.queue.shift(),e=!0;break}e||this.queue.shift()}if(this.queue.length)h.addOnce(this.tick,this,u.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var r=this.completes.slice(0);this.completes.length=0;for(var i=0,p=r.length;i<p;i++)r[i]()}},d.prototype.registerFindHook=function(t){return t&&this.addHooks.push(t),this},d.prototype.registerUploadHook=function(t){return t&&this.uploadHooks.push(t),this},d.prototype.add=function(a){for(var e=0,i=this.addHooks.length;e<i&&!this.addHooks[e](a,this.queue);e++);if(a instanceof u.Container)for(var n=a.children.length-1;0<=n;n--)this.add(a.children[n]);return this},d.prototype.destroy=function(){this.ticking&&h.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},d}();t.default=n},{"../core":65,"./limiters/CountLimiter":185}],183:[function(a,e,t){function o(a,e){if(e instanceof d.BaseTexture){var t=e.source,n=0===t.width?a.canvas.width:Math.min(a.canvas.width,t.width),r=0===t.height?a.canvas.height:Math.min(a.canvas.height,t.height);return a.ctx.drawImage(t,0,0,n,r,0,0,a.canvas.width,a.canvas.height),!0}return!1}t.__esModule=!0;var d=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(a("../../core")),n=function(a){function e(t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t));return n.uploadHookHelper=n,n.canvas=document.createElement("canvas"),n.canvas.width=16,n.canvas.height=16,n.ctx=n.canvas.getContext("2d"),n.registerUploadHook(o),n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e.prototype.destroy=function(){a.prototype.destroy.call(this),this.ctx=null,this.canvas=null},e}(function(t){return t&&t.__esModule?t:{default:t}}(a("../BasePrepare")).default);t.default=n,d.CanvasRenderer.registerPlugin("prepare",n)},{"../../core":65,"../BasePrepare":182}],184:[function(d,e,t){function n(t){return t&&t.__esModule?t:{default:t}}t.__esModule=!0;var r=d("./webgl/WebGLPrepare");Object.defineProperty(t,"webgl",{enumerable:!0,get:function(){return n(r).default}});var i=d("./canvas/CanvasPrepare");Object.defineProperty(t,"canvas",{enumerable:!0,get:function(){return n(i).default}});var o=d("./BasePrepare");Object.defineProperty(t,"BasePrepare",{enumerable:!0,get:function(){return n(o).default}});var s=d("./limiters/CountLimiter");Object.defineProperty(t,"CountLimiter",{enumerable:!0,get:function(){return n(s).default}});var a=d("./limiters/TimeLimiter");Object.defineProperty(t,"TimeLimiter",{enumerable:!0,get:function(){return n(a).default}})},{"./BasePrepare":182,"./canvas/CanvasPrepare":183,"./limiters/CountLimiter":185,"./limiters/TimeLimiter":186,"./webgl/WebGLPrepare":187}],185:[function(a,e,t){t.__esModule=!0;var n=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.maxItemsPerFrame=e,this.itemsLeft=0}return n.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},n.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},n}();t.default=n},{}],186:[function(a,e,t){t.__esModule=!0;var n=function(){function n(e){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,n),this.maxMilliseconds=e,this.frameStart=0}return n.prototype.beginFrame=function(){this.frameStart=Date.now()},n.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},n}();t.default=n},{}],187:[function(d,e,t){function l(a,e){return e instanceof n.BaseTexture&&(e._glTextures[a.CONTEXT_UID]||a.textureManager.updateTexture(e),!0)}function r(a,e){return e instanceof n.Graphics&&((e.dirty||e.clearDirty||!e._webGL[a.plugins.graphics.CONTEXT_UID])&&a.plugins.graphics.updateGraphics(e),!0)}function i(a,e){return a instanceof n.Graphics&&(e.push(a),!0)}t.__esModule=!0;var n=function(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}(d("../../core")),o=function(a){function e(t){!function(n,e){if(!(n instanceof e))throw new TypeError("Cannot call a class as a function")}(this,e);var n=function(n,e){if(!n)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e&&("object"==typeof e||"function"==typeof e)?e:n}(this,a.call(this,t));return n.uploadHookHelper=n.renderer,n.registerFindHook(i),n.registerUploadHook(l),n.registerUploadHook(r),n}return function(n,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);n.prototype=Object.create(e&&e.prototype,{constructor:{value:n,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(n,e):n.__proto__=e)}(e,a),e}(function(t){return t&&t.__esModule?t:{default:t}}(d("../BasePrepare")).default);t.default=o,n.WebGLRenderer.registerPlugin("prepare",o)},{"../../core":65,"../BasePrepare":182}],188:[function(y,e,_){(function(e){function t(a){if(a&&a.__esModule)return a;var e={};if(null!=a)for(var t in a)Object.prototype.hasOwnProperty.call(a,t)&&(e[t]=a[t]);return e.default=a,e}_.__esModule=!0,_.loader=_.prepare=_.particles=_.mesh=_.loaders=_.interaction=_.filters=_.extras=_.extract=_.accessibility=void 0;var n=y("./polyfill");Object.keys(n).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(_,t,{enumerable:!0,get:function(){return n[t]}})});var r=y("./core");Object.keys(r).forEach(function(t){"default"!==t&&"__esModule"!==t&&Object.defineProperty(_,t,{enumerable:!0,get:function(){return r[t]}})});var i=function(t){return t&&t.__esModule?t:{default:t}}(y("./deprecation")),o=t(y("./accessibility")),a=t(y("./extract")),s=t(y("./extras")),l=t(y("./filters")),u=t(y("./interaction")),c=t(y("./loaders")),d=t(y("./mesh")),p=t(y("./particles")),h=t(y("./prepare"));r.utils.mixins.performMixins();var f=c.shared||null;_.accessibility=o,_.extract=a,_.extras=s,_.filters=l,_.interaction=u,_.loaders=c,_.mesh=d,_.particles=p,_.prepare=h,_.loader=f,"function"==typeof i.default&&(0,i.default)(_),e.PIXI=_}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./accessibility":42,"./core":65,"./deprecation":130,"./extract":132,"./extras":141,"./filters":152,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":180,"./prepare":184}]},{},[188])(188)}),function(){var d=function(){this.init()};d.prototype={init:function(){var t=this||y;return t._counter=1e3,t._codecs={},t._howls=[],t._muted=!1,t._volume=1,t._canPlayEvent="canplaythrough",t._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,t.masterGain=null,t.noAudio=!1,t.usingWebAudio=!0,t.autoSuspend=!0,t.ctx=null,t.mobileAutoEnable=!0,t._setup(),t},volume:function(t){var a=this||y;if(t=parseFloat(t),a.ctx||l(),void 0!==t&&0<=t&&1>=t){if(a._volume=t,a._muted)return a;a.usingWebAudio&&(a.masterGain.gain.value=t);for(var n=0;n<a._howls.length;n++)if(!a._howls[n]._webAudio)for(var d=a._howls[n]._getSoundIds(),i=0,u;i<d.length;i++)u=a._howls[n]._soundById(d[i]),u&&u._node&&(u._node.volume=u._volume*t);return a}return a._volume},mute:function(t){var e=this||y;e.ctx||l(),e._muted=t,e.usingWebAudio&&(e.masterGain.gain.value=t?0:e._volume);for(var n=0;n<e._howls.length;n++)if(!e._howls[n]._webAudio)for(var a=e._howls[n]._getSoundIds(),i=0,d;i<a.length;i++)d=e._howls[n]._soundById(a[i]),d&&d._node&&(d._node.muted=!!t||d._muted);return e},unload:function(){for(var t=this||y,e=t._howls.length-1;0<=e;e--)t._howls[e].unload();return t.usingWebAudio&&t.ctx&&void 0!==t.ctx.close&&(t.ctx.close(),t.ctx=null,l()),t},codecs:function(t){return(this||y)._codecs[t.replace(/^x-/,"")]},_setup:function(){var n=this||y;if(n.state=n.ctx?n.ctx.state||"running":"running",n._autoSuspend(),!n.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===new Audio().oncanplaythrough&&(n._canPlayEvent="canplay")}catch(e){n.noAudio=!0}else n.noAudio=!0;try{new Audio().muted&&(n.noAudio=!0)}catch(t){}return n.noAudio||n._setupCodecs(),n},_setupCodecs:function(){var a=this||y,e=null;try{e="undefined"==typeof Audio?null:new Audio}catch(e){return a}if(!e||"function"!=typeof e.canPlayType)return a;var t=e.canPlayType("audio/mpeg;").replace(/^no$/,""),r=a._navigator&&a._navigator.userAgent.match(/OPR\/([0-6].)/g),i=r&&33>parseInt(r[0].split("/")[1],10);return a._codecs={mp3:!i&&(t||e.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!t,opus:!!e.canPlayType("audio/ogg; codecs=\"opus\"").replace(/^no$/,""),ogg:!!e.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/,""),oga:!!e.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/,""),wav:!!e.canPlayType("audio/wav; codecs=\"1\"").replace(/^no$/,""),aac:!!e.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!e.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(e.canPlayType("audio/x-m4a;")||e.canPlayType("audio/m4a;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(e.canPlayType("audio/x-mp4;")||e.canPlayType("audio/mp4;")||e.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!e.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/,""),webm:!!e.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/,""),dolby:!!e.canPlayType("audio/mp4; codecs=\"ec-3\"").replace(/^no$/,""),flac:!!(e.canPlayType("audio/x-flac;")||e.canPlayType("audio/flac;")).replace(/^no$/,"")},a},_enableMobileAudio:function(){var t=this||y,e=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(t._navigator&&t._navigator.userAgent),n=!!("ontouchend"in window||t._navigator&&0<t._navigator.maxTouchPoints||t._navigator&&0<t._navigator.msMaxTouchPoints);if(!t._mobileEnabled&&t.ctx&&(e||n)){t._mobileEnabled=!1,t._mobileUnloaded||44100===t.ctx.sampleRate||(t._mobileUnloaded=!0,t.unload()),t._scratchBuffer=t.ctx.createBuffer(1,1,22050);var a=function(){y._autoResume();var e=t.ctx.createBufferSource();e.buffer=t._scratchBuffer,e.connect(t.ctx.destination),void 0===e.start?e.noteOn(0):e.start(0),"function"==typeof t.ctx.resume&&t.ctx.resume(),e.onended=function(){e.disconnect(0),t._mobileEnabled=!0,t.mobileAutoEnable=!1,document.removeEventListener("touchstart",a,!0),document.removeEventListener("touchend",a,!0)}};return document.addEventListener("touchstart",a,!0),document.addEventListener("touchend",a,!0),t}},_autoSuspend:function(){var t=this;if(t.autoSuspend&&t.ctx&&void 0!==t.ctx.suspend&&y.usingWebAudio){for(var e=0;e<t._howls.length;e++)if(t._howls[e]._webAudio)for(var a=0;a<t._howls[e]._sounds.length;a++)if(!t._howls[e]._sounds[a]._paused)return t;return t._suspendTimer&&clearTimeout(t._suspendTimer),t._suspendTimer=setTimeout(function(){t.autoSuspend&&(t._suspendTimer=null,t.state="suspending",t.ctx.suspend().then(function(){t.state="suspended",t._resumeAfterSuspend&&(delete t._resumeAfterSuspend,t._autoResume())}))},3e4),t}},_autoResume:function(){var n=this;if(n.ctx&&void 0!==n.ctx.resume&&y.usingWebAudio)return"running"===n.state&&n._suspendTimer?(clearTimeout(n._suspendTimer),n._suspendTimer=null):"suspended"===n.state?(n.ctx.resume().then(function(){n.state="running";for(var e=0;e<n._howls.length;e++)n._howls[e]._emit("resume")}),n._suspendTimer&&(clearTimeout(n._suspendTimer),n._suspendTimer=null)):"suspending"===n.state&&(n._resumeAfterSuspend=!0),n}};var y=new d,e=function(t){t.src&&0!==t.src.length?this.init(t):console.error("An array of source files must be passed with any new Howl.")};e.prototype={init:function(t){var e=this;return y.ctx||l(),e._autoplay=t.autoplay||!1,e._format="string"==typeof t.format?[t.format]:t.format,e._html5=t.html5||!1,e._muted=t.mute||!1,e._loop=t.loop||!1,e._pool=t.pool||5,e._preload="boolean"!=typeof t.preload||t.preload,e._rate=t.rate||1,e._sprite=t.sprite||{},e._src="string"==typeof t.src?[t.src]:t.src,e._volume=void 0===t.volume?1:t.volume,e._xhrWithCredentials=t.xhrWithCredentials||!1,e._duration=0,e._state="unloaded",e._sounds=[],e._endTimers={},e._queue=[],e._onend=t.onend?[{fn:t.onend}]:[],e._onfade=t.onfade?[{fn:t.onfade}]:[],e._onload=t.onload?[{fn:t.onload}]:[],e._onloaderror=t.onloaderror?[{fn:t.onloaderror}]:[],e._onplayerror=t.onplayerror?[{fn:t.onplayerror}]:[],e._onpause=t.onpause?[{fn:t.onpause}]:[],e._onplay=t.onplay?[{fn:t.onplay}]:[],e._onstop=t.onstop?[{fn:t.onstop}]:[],e._onmute=t.onmute?[{fn:t.onmute}]:[],e._onvolume=t.onvolume?[{fn:t.onvolume}]:[],e._onrate=t.onrate?[{fn:t.onrate}]:[],e._onseek=t.onseek?[{fn:t.onseek}]:[],e._onresume=[],e._webAudio=y.usingWebAudio&&!e._html5,void 0!==y.ctx&&y.ctx&&y.mobileAutoEnable&&y._enableMobileAudio(),y._howls.push(e),e._autoplay&&e._queue.push({event:"play",action:function(){e.play()}}),e._preload&&e.load(),e},load:function(){var a=null;if(y.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var o=0;o<this._src.length;o++){var d,l;if(this._format&&this._format[o])d=this._format[o];else{if("string"!=typeof(l=this._src[o])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(d=/^data:audio\/([^;,]+);/i.exec(l))||(d=/\.([^.]+)$/.exec(l.split("?",1)[0])),d&&(d=d[1].toLowerCase())}if(d||console.warn("No file extension was found. Consider using the \"format\" property or specify an extension."),d&&y.codecs(d)){a=this._src[o];break}}if(a)return this._src=a,this._state="loading","https:"===window.location.protocol&&"http:"===a.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new t(this),this._webAudio&&r(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(t,_){var n=this,r=null;if("number"==typeof t)r=t,t=null;else{if("string"==typeof t&&"loaded"===n._state&&!n._sprite[t])return null;if(void 0===t){t="__default";for(var b=0,x=0;x<n._sounds.length;x++)n._sounds[x]._paused&&!n._sounds[x]._ended&&(b++,r=n._sounds[x]._id);1==b?t=null:r=null}}var v=r?n._soundById(r):n._inactiveSound();if(!v)return null;if(r&&!t&&(t=v._sprite||"__default"),"loaded"!==n._state){v._sprite=t,v._ended=!1;var a=v._id;return n._queue.push({event:"play",action:function(){n.play(a)}}),a}if(r&&!v._paused)return _||setTimeout(function(){n._emit("play",v._id)},0),v._id;n._webAudio&&y._autoResume();var l=Math.max(0,0<v._seek?v._seek:n._sprite[t][0]/1e3),u=Math.max(0,(n._sprite[t][0]+n._sprite[t][1])/1e3-l),c=1e3*u/Math.abs(v._rate);v._paused=!1,v._ended=!1,v._sprite=t,v._seek=l,v._start=n._sprite[t][0]/1e3,v._stop=(n._sprite[t][0]+n._sprite[t][1])/1e3,v._loop=v._loop||n._sprite[t][2];var h=v._node;if(n._webAudio){var d=function(){n._refreshBuffer(v);var t=v._muted||n._muted?0:v._volume;h.gain.setValueAtTime(t,y.ctx.currentTime),v._playStart=y.ctx.currentTime,void 0===h.bufferSource.start?v._loop?h.bufferSource.noteGrainOn(0,l,86400):h.bufferSource.noteGrainOn(0,l,u):v._loop?h.bufferSource.start(0,l,86400):h.bufferSource.start(0,l,u),c!==1/0&&(n._endTimers[v._id]=setTimeout(n._ended.bind(n,v),c)),_||setTimeout(function(){n._emit("play",v._id)},0)};"running"===y.state?d():(n.once("resume",d),n._clearTimer(v._id))}else{var p=function(){h.currentTime=l,h.muted=v._muted||n._muted||y._muted||h.muted,h.volume=v._volume*y.volume(),h.playbackRate=v._rate;try{if(h.play(),h.paused)return void n._emit("playerror",v._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");c!==1/0&&(n._endTimers[v._id]=setTimeout(n._ended.bind(n,v),c)),_||n._emit("play",v._id)}catch(t){n._emit("playerror",v._id,t)}},f=window&&window.ejecta||!h.readyState&&y._navigator.isCocoonJS;if(4===h.readyState||f)p();else{var g=function(){p(),h.removeEventListener(y._canPlayEvent,g,!1)};h.addEventListener(y._canPlayEvent,g,!1),n._clearTimer(v._id)}}return v._id},pause:function(a){var e=this;if("loaded"!==e._state)return e._queue.push({event:"pause",action:function(){e.pause(a)}}),e;for(var t=e._getSoundIds(a),n=0;n<t.length;n++){e._clearTimer(t[n]);var o=e._soundById(t[n]);if(o&&!o._paused&&(o._seek=e.seek(t[n]),o._rateSeek=0,o._paused=!0,e._stopFade(t[n]),o._node))if(e._webAudio){if(!o._node.bufferSource)continue;void 0===o._node.bufferSource.stop?o._node.bufferSource.noteOff(0):o._node.bufferSource.stop(0),e._cleanBuffer(o._node)}else isNaN(o._node.duration)&&o._node.duration!==1/0||o._node.pause();arguments[1]||e._emit("pause",o?o._id:null)}return e},stop:function(a,e){var t=this;if("loaded"!==t._state)return t._queue.push({event:"stop",action:function(){t.stop(a)}}),t;for(var n=t._getSoundIds(a),r=0;r<n.length;r++){t._clearTimer(n[r]);var s=t._soundById(n[r]);s&&(s._seek=s._start||0,s._rateSeek=0,s._paused=!0,s._ended=!0,t._stopFade(n[r]),s._node&&(t._webAudio?s._node.bufferSource&&(void 0===s._node.bufferSource.stop?s._node.bufferSource.noteOff(0):s._node.bufferSource.stop(0),s._panner&&(s._panner.disconnect(),s._panner=null),t._cleanBuffer(s._node)):isNaN(s._node.duration)&&s._node.duration!==1/0||(s._node.currentTime=s._start||0,s._node.pause())),e||t._emit("stop",s._id))}return t},mute:function(t,e){var n=this;if("loaded"!==n._state)return n._queue.push({event:"mute",action:function(){n.mute(t,e)}}),n;if(void 0===e){if("boolean"!=typeof t)return n._muted;n._muted=t}for(var a=n._getSoundIds(e),r=0,i;r<a.length;r++)i=n._soundById(a[r]),i&&(i._muted=t,n._webAudio&&i._node?i._node.gain.setValueAtTime(t?0:i._volume,y.ctx.currentTime):i._node&&(i._node.muted=!!y._muted||t),n._emit("mute",i._id));return n},volume:function(){var t=this,a=arguments,r,i;if(0===a.length)return t._volume;1===a.length||2===a.length&&void 0===a[1]?0<=t._getSoundIds().indexOf(a[0])?i=parseInt(a[0],10):r=parseFloat(a[0]):2<=a.length&&(r=parseFloat(a[0]),i=parseInt(a[1],10));var d;if(!(void 0!==r&&0<=r&&1>=r))return(d=i?t._soundById(i):t._sounds[0])?d._volume:0;if("loaded"!==t._state)return t._queue.push({event:"volume",action:function(){t.volume.apply(t,a)}}),t;void 0===i&&(t._volume=r),i=t._getSoundIds(i);for(var l=0;l<i.length;l++)(d=t._soundById(i[l]))&&(d._volume=r,a[2]||t._stopFade(i[l]),t._webAudio&&d._node&&!d._muted?d._node.gain.setValueAtTime(r,y.ctx.currentTime):d._node&&!d._muted&&(d._node.volume=r*y.volume()),t._emit("volume",d._id));return t},fade:function(t,e,n,r,i){var o=this;if("loaded"!==o._state)return o._queue.push({event:"fade",action:function(){o.fade(t,e,n,r)}}),o;null==i&&o.volume(t,r);for(var s=o._getSoundIds(r),a=0,d;a<s.length;a++)if(d=o._soundById(s[a]),d&&(r||o._stopFade(s[a]),o._webAudio&&!d._muted)){var p=y.ctx.currentTime;d._volume=t,null==i&&d._node.gain.setValueAtTime(t,p),d._node.gain.linearRampToValueAtTime(e,p+n/1e3)}return o},_startFadeInterval:function(d,e,t,n,r){var i=this,o=e,p=e>t?"out":"in",a=Math.abs(e-t)/.01,c=0<a?n/a:n;4>c&&(a=Math.ceil(a/(4/c)),c=4),d._interval=setInterval(function(){0<a&&(o+="in"===p?.01:-.01),o=Math.max(0,o),o=Math.min(1,o),o=Math.round(100*o)/100,i._webAudio?(void 0===r&&(i._volume=o),d._volume=o):i.volume(o,d._id,!0),(t<e&&o<=t||t>e&&o>=t)&&(clearInterval(d._interval),d._interval=null,i.volume(t,d._id),i._emit("fade",d._id))},c)},_stopFade:function(t){var e=this._soundById(t);return e&&e._interval&&(this._webAudio&&e._node.gain.cancelScheduledValues(y.ctx.currentTime),clearInterval(e._interval),e._interval=null,this._emit("fade",t)),this},loop:function(){var a=arguments,r,s,d;if(0===a.length)return this._loop;if(1===a.length){if("boolean"!=typeof a[0])return!!(d=this._soundById(parseInt(a[0],10)))&&d._loop;r=a[0],this._loop=r}else 2===a.length&&(r=a[0],s=parseInt(a[1],10));for(var l=this._getSoundIds(s),i=0;i<l.length;i++)(d=this._soundById(l[i]))&&(d._loop=r,this._webAudio&&d._node&&d._node.bufferSource&&(d._node.bufferSource.loop=r,r&&(d._node.bufferSource.loopStart=d._start||0,d._node.bufferSource.loopEnd=d._stop)));return this},rate:function(){var t=this,r=arguments,i,d;0===r.length?d=t._sounds[0]._id:1===r.length?0<=t._getSoundIds().indexOf(r[0])?d=parseInt(r[0],10):i=parseFloat(r[0]):2===r.length&&(i=parseFloat(r[0]),d=parseInt(r[1],10));var u;if("number"!=typeof i)return(u=t._soundById(d))?u._rate:t._rate;if("loaded"!==t._state)return t._queue.push({event:"rate",action:function(){t.rate.apply(t,r)}}),t;void 0===d&&(t._rate=i),d=t._getSoundIds(d);for(var p=0;p<d.length;p++)if(u=t._soundById(d[p])){u._rateSeek=t.seek(d[p]),u._playStart=t._webAudio?y.ctx.currentTime:u._playStart,u._rate=i,t._webAudio&&u._node&&u._node.bufferSource?u._node.bufferSource.playbackRate.value=i:u._node&&(u._node.playbackRate=i);var c=t.seek(d[p]),a=1e3*((t._sprite[u._sprite][0]+t._sprite[u._sprite][1])/1e3-c)/Math.abs(u._rate);!t._endTimers[d[p]]&&u._paused||(t._clearTimer(d[p]),t._endTimers[d[p]]=setTimeout(t._ended.bind(t,u),a)),t._emit("rate",u._id)}return t},seek:function(){var t=this,r=arguments,i,d;if(0===r.length?d=t._sounds[0]._id:1===r.length?0<=t._getSoundIds().indexOf(r[0])?d=parseInt(r[0],10):t._sounds.length&&(d=t._sounds[0]._id,i=parseFloat(r[0])):2===r.length&&(i=parseFloat(r[0]),d=parseInt(r[1],10)),void 0===d)return t;if("loaded"!==t._state)return t._queue.push({event:"seek",action:function(){t.seek.apply(t,r)}}),t;var u=t._soundById(d);if(u){if(!("number"==typeof i&&0<=i)){if(t._webAudio){var o=t.playing(d)?y.ctx.currentTime-u._playStart:0,s=u._rateSeek?u._rateSeek-u._seek:0;return u._seek+(s+o*Math.abs(u._rate))}return u._node.currentTime}var a=t.playing(d);a&&t.pause(d,!0),u._seek=i,u._ended=!1,t._clearTimer(d),a&&t.play(d,!0),!t._webAudio&&u._node&&(u._node.currentTime=i),t._emit("seek",d)}return t},playing:function(a){if("number"==typeof a){var e=this._soundById(a);return!!e&&!e._paused}for(var t=0;t<this._sounds.length;t++)if(!this._sounds[t]._paused)return!0;return!1},duration:function(a){var e=this._duration,r=this._soundById(a);return r&&(e=this._sprite[r._sprite][1]/1e3),e},state:function(){return this._state},unload:function(){for(var t=this,a=t._sounds,n=0;n<a.length;n++){(a[n]._paused||t.stop(a[n]._id),!t._webAudio)&&(/MSIE |Trident\//.test(y._navigator&&y._navigator.userAgent)||(a[n]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),a[n]._node.removeEventListener("error",a[n]._errorFn,!1),a[n]._node.removeEventListener(y._canPlayEvent,a[n]._loadFn,!1)),delete a[n]._node,t._clearTimer(a[n]._id);var i=y._howls.indexOf(t);0<=i&&y._howls.splice(i,1)}var o=!0;for(n=0;n<y._howls.length;n++)if(y._howls[n]._src===t._src){o=!1;break}return p&&o&&delete p[t._src],y.noAudio=!1,t._state="unloaded",t._sounds=[],t=null,null},on:function(a,e,t,n){var r=this["_on"+a];return"function"==typeof e&&r.push(n?{id:t,fn:e,once:n}:{id:t,fn:e}),this},off:function(a,e,d){var l=this["_on"+a],r=0;if("number"==typeof e&&(d=e,e=null),e||d)for(r=0;r<l.length;r++){var u=d===l[r].id;if(e===l[r].fn&&u||!e&&u){l.splice(r,1);break}}else if(a)this["_on"+a]=[];else{var o=Object.keys(this);for(r=0;r<o.length;r++)0===o[r].indexOf("_on")&&Array.isArray(this[o[r]])&&(this[o[r]]=[])}return this},once:function(a,e,t){return this.on(a,e,t,1),this},_emit:function(a,o,t){for(var e=this["_on"+a],n=e.length-1;0<=n;n--)e[n].id&&e[n].id!==o&&"load"!==a||(setTimeout(function(n){n.call(this,o,t)}.bind(this,e[n].fn),0),e[n].once&&this.off(a,e[n].fn,e[n].id));return this},_loadQueue:function(){var n=this;if(0<n._queue.length){var e=n._queue[0];n.once(e.event,function(){n._queue.shift(),n._loadQueue()}),e.action()}return n},_ended:function(t){var e=t._sprite;if(!this._webAudio&&t._node&&!t._node.paused)return setTimeout(this._ended.bind(this,t),100),this;var n=t._loop||this._sprite[e][2];if(this._emit("end",t._id),!this._webAudio&&n&&this.stop(t._id,!0).play(t._id),this._webAudio&&n){this._emit("play",t._id),t._seek=t._start||0,t._rateSeek=0,t._playStart=y.ctx.currentTime;var a=1e3*(t._stop-t._start)/Math.abs(t._rate);this._endTimers[t._id]=setTimeout(this._ended.bind(this,t),a)}return this._webAudio&&!n&&(t._paused=!0,t._ended=!0,t._seek=t._start||0,t._rateSeek=0,this._clearTimer(t._id),this._cleanBuffer(t._node),y._autoSuspend()),this._webAudio||n||this.stop(t._id),this},_clearTimer:function(t){return this._endTimers[t]&&(clearTimeout(this._endTimers[t]),delete this._endTimers[t]),this},_soundById:function(n){for(var e=0;e<this._sounds.length;e++)if(n===this._sounds[e]._id)return this._sounds[e];return null},_inactiveSound:function(){this._drain();for(var n=0;n<this._sounds.length;n++)if(this._sounds[n]._ended)return this._sounds[n].reset();return new t(this)},_drain:function(){var a=this._pool,e=0,r=0;if(!(this._sounds.length<a)){for(r=0;r<this._sounds.length;r++)this._sounds[r]._ended&&e++;for(r=this._sounds.length-1;0<=r;r--){if(e<=a)return;this._sounds[r]._ended&&(this._webAudio&&this._sounds[r]._node&&this._sounds[r]._node.disconnect(0),this._sounds.splice(r,1),e--)}}},_getSoundIds:function(a){if(void 0===a){for(var e=[],t=0;t<this._sounds.length;t++)e.push(this._sounds[t]._id);return e}return[a]},_refreshBuffer:function(t){return t._node.bufferSource=y.ctx.createBufferSource(),t._node.bufferSource.buffer=p[this._src],t._panner?t._node.bufferSource.connect(t._panner):t._node.bufferSource.connect(t._node),t._node.bufferSource.loop=t._loop,t._loop&&(t._node.bufferSource.loopStart=t._start||0,t._node.bufferSource.loopEnd=t._stop),t._node.bufferSource.playbackRate.value=t._rate,this},_cleanBuffer:function(t){if(this._scratchBuffer){t.bufferSource.onended=null,t.bufferSource.disconnect(0);try{t.bufferSource.buffer=this._scratchBuffer}catch(t){}}return t.bufferSource=null,this}};var t=function(t){this._parent=t,this.init()};t.prototype={init:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++y._counter,t._sounds.push(this),this.create(),this},create:function(){var t=this._parent,e=y._muted||this._muted||this._parent._muted?0:this._volume;return t._webAudio?(this._node=void 0===y.ctx.createGain?y.ctx.createGainNode():y.ctx.createGain(),this._node.gain.setValueAtTime(e,y.ctx.currentTime),this._node.paused=!0,this._node.connect(y.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(y._canPlayEvent,this._loadFn,!1),this._node.src=t._src,this._node.preload="auto",this._node.volume=e*y.volume(),this._node.load()),this},reset:function(){var t=this._parent;return this._muted=t._muted,this._loop=t._loop,this._volume=t._volume,this._rate=t._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++y._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var t=this._parent;t._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(t._sprite).length&&(t._sprite={__default:[0,1e3*t._duration]}),"loaded"!==t._state&&(t._state="loaded",t._emit("load"),t._loadQueue()),this._node.removeEventListener(y._canPlayEvent,this._loadFn,!1)}};var p={},r=function(s){var e=s._src;if(p[e])return s._duration=p[e].duration,void a(s);if(/^data:[^;]+;base64,/.test(e)){for(var t=atob(e.split(",")[1]),d=new Uint8Array(t.length),r=0;r<t.length;++r)d[r]=t.charCodeAt(r);i(d.buffer,s)}else{var l=new XMLHttpRequest;l.open("GET",e,!0),l.withCredentials=s._xhrWithCredentials,l.responseType="arraybuffer",l.onload=function(){var e=(l.status+"")[0];"0"===e||"2"===e||"3"===e?i(l.response,s):s._emit("loaderror",null,"Failed loading audio file with status: "+l.status+".")},l.onerror=function(){s._webAudio&&(s._html5=!0,s._webAudio=!1,s._sounds=[],delete p[e],s.load())},n(l)}},n=function(n){try{n.send()}catch(e){n.onerror()}},i=function(t,r){y.ctx.decodeAudioData(t,function(t){t&&0<r._sounds.length&&(p[r._src]=t,a(r,t))},function(){r._emit("loaderror",null,"Decoding audio data failed.")})},a=function(n,e){e&&!n._duration&&(n._duration=e.duration),0===Object.keys(n._sprite).length&&(n._sprite={__default:[0,1e3*n._duration]}),"loaded"!==n._state&&(n._state="loaded",n._emit("load"),n._loadQueue())},l=function(){try{"undefined"==typeof AudioContext?"undefined"==typeof webkitAudioContext?y.usingWebAudio=!1:y.ctx=new webkitAudioContext:y.ctx=new AudioContext}catch(t){y.usingWebAudio=!1}var t=/iP(hone|od|ad)/.test(y._navigator&&y._navigator.platform),e=y._navigator&&y._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),n=e?parseInt(e[1],10):null;if(t&&n&&9>n){var a=/safari/.test(y._navigator&&y._navigator.userAgent.toLowerCase());(y._navigator&&y._navigator.standalone&&!a||y._navigator&&!y._navigator.standalone&&!a)&&(y.usingWebAudio=!1)}y.usingWebAudio&&(y.masterGain=void 0===y.ctx.createGain?y.ctx.createGainNode():y.ctx.createGain(),y.masterGain.gain.value=y._muted?0:1,y.masterGain.connect(y.ctx.destination)),y._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:y,Howl:e}}),"undefined"!=typeof exports&&(exports.Howler=y,exports.Howl=e),"undefined"==typeof window?"undefined"!=typeof global&&(global.HowlerGlobal=d,global.Howler=y,global.Howl=e,global.Sound=t):(window.HowlerGlobal=d,window.Howler=y,window.Howl=e,window.Sound=t)}(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(n){if(!this.ctx||!this.ctx.listener)return this;for(var e=this._howls.length-1;0<=e;e--)this._howls[e].stereo(n);return this},HowlerGlobal.prototype.pos=function(a,e,r){return this.ctx&&this.ctx.listener?(e="number"==typeof e?e:this._pos[1],r="number"==typeof r?r:this._pos[2],"number"==typeof a?(this._pos=[a,e,r],this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this):this._pos):this},HowlerGlobal.prototype.orientation=function(a,e,d,l,u,p){if(!this.ctx||!this.ctx.listener)return this;var c=this._orientation;return e="number"==typeof e?e:c[1],d="number"==typeof d?d:c[2],l="number"==typeof l?l:c[3],u="number"==typeof u?u:c[4],p="number"==typeof p?p:c[5],"number"==typeof a?(this._orientation=[a,e,d,l,u,p],this.ctx.listener.setOrientation(a,e,d,l,u,p),this):c},Howl.prototype.init=function(n){return function(e){return this._orientation=e.orientation||[1,0,0],this._stereo=e.stereo||null,this._pos=e.pos||null,this._pannerAttr={coneInnerAngle:void 0===e.coneInnerAngle?360:e.coneInnerAngle,coneOuterAngle:void 0===e.coneOuterAngle?360:e.coneOuterAngle,coneOuterGain:void 0===e.coneOuterGain?0:e.coneOuterGain,distanceModel:void 0===e.distanceModel?"inverse":e.distanceModel,maxDistance:void 0===e.maxDistance?1e4:e.maxDistance,panningModel:void 0===e.panningModel?"HRTF":e.panningModel,refDistance:void 0===e.refDistance?1:e.refDistance,rolloffFactor:void 0===e.rolloffFactor?1:e.rolloffFactor},this._onstereo=e.onstereo?[{fn:e.onstereo}]:[],this._onpos=e.onpos?[{fn:e.onpos}]:[],this._onorientation=e.onorientation?[{fn:e.onorientation}]:[],n.call(this,e)}}(Howl.prototype.init),Howl.prototype.stereo=function(e,t){var n=this;if(!n._webAudio)return n;if("loaded"!==n._state)return n._queue.push({event:"stereo",action:function(){n.stereo(e,t)}}),n;var r=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===t){if("number"!=typeof e)return n._stereo;n._stereo=e,n._pos=[e,0,0]}for(var i=n._getSoundIds(t),o=0,d;o<i.length;o++)if(d=n._soundById(i[o]),d){if("number"!=typeof e)return d._stereo;d._stereo=e,d._pos=[e,0,0],d._node&&(d._pannerAttr.panningModel="equalpower",d._panner&&d._panner.pan||s(d,r),"spatial"===r?d._panner.setPosition(e,0,Math.abs(1-e)):d._panner.pan.value=e),n._emit("stereo",d._id)}return n},Howl.prototype.pos=function(e,t,d,u){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"pos",action:function(){i.pos(e,t,d,u)}}),i;if(t="number"==typeof t?t:0,d="number"==typeof d?d:-.5,void 0===u){if("number"!=typeof e)return i._pos;i._pos=[e,t,d]}for(var o=i._getSoundIds(u),p=0,c;p<o.length;p++)if(c=i._soundById(o[p]),c){if("number"!=typeof e)return c._pos;c._pos=[e,t,d],c._node&&(c._panner&&!c._panner.pan||s(c,"spatial"),c._panner.setPosition(e,t,d)),i._emit("pos",c._id)}return i},Howl.prototype.orientation=function(e,t,d,u){var i=this;if(!i._webAudio)return i;if("loaded"!==i._state)return i._queue.push({event:"orientation",action:function(){i.orientation(e,t,d,u)}}),i;if(t="number"==typeof t?t:i._orientation[1],d="number"==typeof d?d:i._orientation[2],void 0===u){if("number"!=typeof e)return i._orientation;i._orientation=[e,t,d]}for(var o=i._getSoundIds(u),p=0,c;p<o.length;p++)if(c=i._soundById(o[p]),c){if("number"!=typeof e)return c._orientation;c._orientation=[e,t,d],c._node&&(c._panner||(c._pos||(c._pos=i._pos||[0,0,-.5]),s(c,"spatial")),c._panner.setOrientation(e,t,d)),i._emit("orientation",c._id)}return i},Howl.prototype.pannerAttr=function(){var e=arguments,i,d,u;if(!this._webAudio)return this;if(0===e.length)return this._pannerAttr;if(1===e.length){if("object"!=typeof e[0])return(u=this._soundById(parseInt(e[0],10)))?u._pannerAttr:this._pannerAttr;i=e[0],void 0===d&&(i.pannerAttr||(i.pannerAttr={coneInnerAngle:i.coneInnerAngle,coneOuterAngle:i.coneOuterAngle,coneOuterGain:i.coneOuterGain,distanceModel:i.distanceModel,maxDistance:i.maxDistance,refDistance:i.refDistance,rolloffFactor:i.rolloffFactor,panningModel:i.panningModel}),this._pannerAttr={coneInnerAngle:void 0===i.pannerAttr.coneInnerAngle?this._coneInnerAngle:i.pannerAttr.coneInnerAngle,coneOuterAngle:void 0===i.pannerAttr.coneOuterAngle?this._coneOuterAngle:i.pannerAttr.coneOuterAngle,coneOuterGain:void 0===i.pannerAttr.coneOuterGain?this._coneOuterGain:i.pannerAttr.coneOuterGain,distanceModel:void 0===i.pannerAttr.distanceModel?this._distanceModel:i.pannerAttr.distanceModel,maxDistance:void 0===i.pannerAttr.maxDistance?this._maxDistance:i.pannerAttr.maxDistance,refDistance:void 0===i.pannerAttr.refDistance?this._refDistance:i.pannerAttr.refDistance,rolloffFactor:void 0===i.pannerAttr.rolloffFactor?this._rolloffFactor:i.pannerAttr.rolloffFactor,panningModel:void 0===i.pannerAttr.panningModel?this._panningModel:i.pannerAttr.panningModel})}else 2===e.length&&(i=e[0],d=parseInt(e[1],10));for(var p=this._getSoundIds(d),o=0;o<p.length;o++)if(u=this._soundById(p[o])){var c=u._pannerAttr;c={coneInnerAngle:void 0===i.coneInnerAngle?c.coneInnerAngle:i.coneInnerAngle,coneOuterAngle:void 0===i.coneOuterAngle?c.coneOuterAngle:i.coneOuterAngle,coneOuterGain:void 0===i.coneOuterGain?c.coneOuterGain:i.coneOuterGain,distanceModel:void 0===i.distanceModel?c.distanceModel:i.distanceModel,maxDistance:void 0===i.maxDistance?c.maxDistance:i.maxDistance,refDistance:void 0===i.refDistance?c.refDistance:i.refDistance,rolloffFactor:void 0===i.rolloffFactor?c.rolloffFactor:i.rolloffFactor,panningModel:void 0===i.panningModel?c.panningModel:i.panningModel};var h=u._panner;h?(h.coneInnerAngle=c.coneInnerAngle,h.coneOuterAngle=c.coneOuterAngle,h.coneOuterGain=c.coneOuterGain,h.distanceModel=c.distanceModel,h.maxDistance=c.maxDistance,h.refDistance=c.refDistance,h.rolloffFactor=c.rolloffFactor,h.panningModel=c.panningModel):(u._pos||(u._pos=this._pos||[0,0,-.5]),s(u,"spatial"))}return this},Sound.prototype.init=function(n){return function(){var e=this._parent;this._orientation=e._orientation,this._stereo=e._stereo,this._pos=e._pos,this._pannerAttr=e._pannerAttr,n.call(this),this._stereo?e.stereo(this._stereo):this._pos&&e.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(n){return function(){var e=this._parent;return this._orientation=e._orientation,this._pos=e._pos,this._pannerAttr=e._pannerAttr,n.call(this)}}(Sound.prototype.reset);var s=function(n,e){"spatial"===(e=e||"spatial")?(n._panner=Howler.ctx.createPanner(),n._panner.coneInnerAngle=n._pannerAttr.coneInnerAngle,n._panner.coneOuterAngle=n._pannerAttr.coneOuterAngle,n._panner.coneOuterGain=n._pannerAttr.coneOuterGain,n._panner.distanceModel=n._pannerAttr.distanceModel,n._panner.maxDistance=n._pannerAttr.maxDistance,n._panner.refDistance=n._pannerAttr.refDistance,n._panner.rolloffFactor=n._pannerAttr.rolloffFactor,n._panner.panningModel=n._pannerAttr.panningModel,n._panner.setOrientation(n._orientation[0],n._orientation[1],n._orientation[2])):(n._panner=Howler.ctx.createStereoPanner(),n._panner.pan.value=n._stereo),n._panner.connect(n._node),n._paused||n._parent.pause(n._id,!0).play(n._id)}}(),function(t){"object"==typeof exports&&"undefined"!=typeof module?module.exports=t():"function"==typeof define&&define.amd?define([],t):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).nipplejs=t()}(function(){function d(){}function p(t,e){return this.identifier=e.identifier,this.position=e.position,this.frontPosition=e.frontPosition,this.collection=t,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5,mode:"dynamic",zone:document.body},this.config(e),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=p.id,p.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function f(n,e){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=n,this.id=f.id,f.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5},this.config(e),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}function e(a){var r=this;r.ids={},r.index=0,r.collections=[],r.config(a),r.prepareCollections();var e;return g.bindEvt(window,"resize",function(){clearTimeout(e),e=setTimeout(function(){var a=g.getScroll(),n;r.collections.forEach(function(e){e.forEach(function(e){n=e.el.getBoundingClientRect(),e.position={x:a.x+n.left,y:a.y+n.top}})})},100)}),r.collections}var t=!!("ontouchstart"in window),n=!!window.PointerEvent,r=!!window.MSPointerEvent,a={start:"mousedown",move:"mousemove",end:"mouseup"},o={},s;n?s={start:"pointerdown",move:"pointermove",end:"pointerup"}:r?s={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:t?(s={start:"touchstart",move:"touchmove",end:"touchend"},o=a):s=a;var g={};g.distance=function(a,e){var t=e.x-a.x,n=e.y-a.y;return Math.sqrt(t*t+n*n)},g.angle=function(a,e){var t=e.x-a.x,n=e.y-a.y;return g.degrees(Math.atan2(n,t))},g.findCoord=function(a,e,t){var i={x:0,y:0};return t=g.radians(t),i.x=a.x-e*Math.cos(t),i.y=a.y-e*Math.sin(t),i},g.radians=function(t){return t*(Math.PI/180)},g.degrees=function(t){return t*(180/Math.PI)},g.bindEvt=function(a,e,t){a.addEventListener?a.addEventListener(e,t,!1):a.attachEvent&&a.attachEvent(e,t)},g.unbindEvt=function(a,e,t){a.removeEventListener?a.removeEventListener(e,t):a.detachEvent&&a.detachEvent(e,t)},g.trigger=function(a,e,t){var n=new CustomEvent(e,t);a.dispatchEvent(n)},g.prepareEvent=function(t){return"front"!=t.target.className&&"back"!=t.target.className||t.preventDefault(),t.type.match(/^touch/)?t.changedTouches:t},g.getScroll=function(){return{x:void 0===window.pageXOffset?(document.documentElement||document.body.parentNode||document.body).scrollLeft:window.pageXOffset,y:void 0===window.pageYOffset?(document.documentElement||document.body.parentNode||document.body).scrollTop:window.pageYOffset}},g.applyPosition=function(n,e){e.x&&e.y?(n.style.left=e.x+"px",n.style.top=e.y+"px"):(e.top||e.right||e.bottom||e.left)&&(n.style.top=e.top,n.style.right=e.right,n.style.bottom=e.bottom,n.style.left=e.left)},g.getTransitionStyle=function(d,e,t){var n=g.configStylePropertyObject(d);for(var r in n)if(n.hasOwnProperty(r))if("string"==typeof e)n[r]=e+" "+t;else{for(var i="",l=0,u=e.length;l<u;l+=1)i+=e[l]+" "+t+", ";n[r]=i.slice(0,-2)}return n},g.getVendorStyle=function(a,e){var t=g.configStylePropertyObject(a);for(var n in t)t.hasOwnProperty(n)&&(t[n]=e);return t},g.configStylePropertyObject=function(a){var e={};return e[a]="",["webkit","Moz","o"].forEach(function(t){e[t+a.charAt(0).toUpperCase()+a.slice(1)]=""}),e},g.extend=function(a,e){for(var t in e)e.hasOwnProperty(t)&&(a[t]=e[t]);return a},g.safeExtend=function(a,e){var t={};for(var n in a)a.hasOwnProperty(n)&&e.hasOwnProperty(n)?t[n]=e[n]:a.hasOwnProperty(n)&&(t[n]=a[n]);return t},g.map=function(a,e){if(a.length)for(var t=0,i=a.length;t<i;t+=1)e(a[t]);else e(a)},d.prototype.on=function(a,e){var t=a.split(/[ ,]+/g),r;this._handlers_=this._handlers_||{};for(var o=0;o<t.length;o+=1)r=t[o],this._handlers_[r]=this._handlers_[r]||[],this._handlers_[r].push(e);return this},d.prototype.off=function(n,e){return this._handlers_=this._handlers_||{},void 0===n?this._handlers_={}:void 0===e?this._handlers_[n]=null:this._handlers_[n]&&0<=this._handlers_[n].indexOf(e)&&this._handlers_[n].splice(this._handlers_[n].indexOf(e),1),this},d.prototype.trigger=function(a,s){var t=this,e=a.split(/[ ,]+/g),r;t._handlers_=t._handlers_||{};for(var i=0;i<e.length;i+=1)r=e[i],t._handlers_[r]&&t._handlers_[r].length&&t._handlers_[r].forEach(function(n){n.call(t,{type:r,target:t},s)})},d.prototype.config=function(t){this.options=this.defaults||{},t&&(this.options=g.safeExtend(this.options,t))},d.prototype.bindEvt=function(a,e){var t=this;return t._domHandlers_=t._domHandlers_||{},t._domHandlers_[e]=function(){"function"==typeof t["on"+e]?t["on"+e].apply(t,arguments):console.warn("[WARNING] : Missing \"on"+e+"\" handler.")},g.bindEvt(a,s[e],t._domHandlers_[e]),o[e]&&g.bindEvt(a,o[e],t._domHandlers_[e]),t},d.prototype.unbindEvt=function(n,e){return this._domHandlers_=this._domHandlers_||{},g.unbindEvt(n,s[e],this._domHandlers_[e]),o[e]&&g.unbindEvt(n,o[e],this._domHandlers_[e]),delete this._domHandlers_[e],this},p.prototype=new d,p.constructor=p,p.id=0,p.prototype.buildEl=function(){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},p.prototype.stylize=function(){if(this.options.dataOnly)return this;var a=this.options.fadeTime+"ms",e=g.getVendorStyle("borderRadius","50%"),t=g.getTransitionStyle("transition","opacity",a),n={};return n.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},n.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},n.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},g.extend(n.el,t),g.extend(n.back,e),g.extend(n.front,e),this.applyStyles(n),this},p.prototype.applyStyles=function(a){for(var e in this.ui)if(this.ui.hasOwnProperty(e))for(var t in a[e])this.ui[e].style[t]=a[e][t];return this},p.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},p.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},p.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},p.prototype.show=function(n){var e=this;return e.options.dataOnly?e:(clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.addToDom(),e.restCallback(),setTimeout(function(){e.ui.el.style.opacity=1},0),e.showTimeout=setTimeout(function(){e.trigger("shown",e.instance),"function"==typeof n&&n.call(this)},e.options.fadeTime),e)},p.prototype.hide=function(a){var e=this;return e.options.dataOnly?e:(e.ui.el.style.opacity=e.options.restOpacity,clearTimeout(e.removeTimeout),clearTimeout(e.showTimeout),clearTimeout(e.restTimeout),e.removeTimeout=setTimeout(function(){var t="dynamic"===e.options.mode?"none":"block";e.ui.el.style.display=t,"function"==typeof a&&a.call(e),e.trigger("hidden",e.instance)},e.options.fadeTime),e.restPosition(),e)},p.prototype.restPosition=function(a){var e=this;e.frontPosition={x:0,y:0};var t=e.options.fadeTime+"ms",n={};n.front=g.getTransitionStyle("transition",["top","left"],t);var r={front:{}};r.front={left:e.frontPosition.x+"px",top:e.frontPosition.y+"px"},e.applyStyles(n),e.applyStyles(r),e.restTimeout=setTimeout(function(){"function"==typeof a&&a.call(e),e.restCallback()},e.options.fadeTime)},p.prototype.restCallback=function(){var t={};t.front=g.getTransitionStyle("transition","none",""),this.applyStyles(t),this.trigger("rested",this.instance)},p.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},p.prototype.computeDirection=function(d){var e=d.angle.radian,i=Math.PI/4,o=Math.PI/2,s,p,c;if(s=e>i&&e<3*i?"up":e>-i&&e<=i?"left":e>3*-i&&e<=-i?"down":"right",p=e>-o&&e<o?"left":"right",c=0<e?"up":"down",d.force>this.options.threshold){var h={};for(var a in this.direction)this.direction.hasOwnProperty(a)&&(h[a]=this.direction[a]);var f={};for(var a in this.direction={x:p,y:c,angle:s},d.direction=this.direction,h)h[a]===this.direction[a]&&(f[a]=!0);if(f.x&&f.y&&f.angle)return d;f.x&&f.y||this.trigger("plain",d),f.x||this.trigger("plain:"+p,d),f.y||this.trigger("plain:"+c,d),f.angle||this.trigger("dir dir:"+s,d)}return d},f.prototype=new d,f.constructor=f,f.id=0,f.prototype.prepareNipples=function(){var a=this.nipples;a.on=this.on.bind(this),a.off=this.off.bind(this),a.options=this.options,a.destroy=this.destroy.bind(this),a.ids=this.ids,a.id=this.id,a.processOnMove=this.processOnMove.bind(this),a.processOnEnd=this.processOnEnd.bind(this),a.get=function(e){if(void 0===e)return a[0];for(var t=0,i=a.length;t<i;t+=1)if(a[t].identifier===e)return a[t];return!1}},f.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},f.prototype.begin=function(){var n=this.options;if("static"===n.mode){var e=this.createNipple(n.position,this.manager.getIdentifier());e.add(),this.idles.push(e)}},f.prototype.createNipple=function(t,d){var n=g.getScroll(),r={},u=this.options;if(t.x&&t.y)r={x:t.x-(n.x+this.box.left),y:t.y-(n.y+this.box.top)};else if(t.top||t.right||t.bottom||t.left){var o=document.createElement("DIV");o.style.display="hidden",o.style.top=t.top,o.style.right=t.right,o.style.bottom=t.bottom,o.style.left=t.left,o.style.position="absolute",u.zone.appendChild(o);var s=o.getBoundingClientRect();u.zone.removeChild(o),r=t,t={x:s.left+n.x,y:s.top+n.y}}var a=new p(this,{color:u.color,size:u.size,threshold:u.threshold,fadeTime:u.fadeTime,dataOnly:u.dataOnly,restOpacity:u.restOpacity,mode:u.mode,identifier:d,position:t,zone:u.zone,frontPosition:{x:0,y:0}});return u.dataOnly||(g.applyPosition(a.ui.el,r),g.applyPosition(a.ui.front,a.frontPosition)),this.nipples.push(a),this.trigger("added "+a.identifier+":added",a),this.manager.trigger("added "+a.identifier+":added",a),this.bindNipple(a),a},f.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},f.prototype.bindNipple=function(a){var i=this,e=function(t,e){n=t.type+" "+e.id+":"+t.type,i.trigger(n,e)},n;a.on("destroyed",i.onDestroyed.bind(i)),a.on("shown hidden rested dir plain",e),a.on("dir:up dir:right dir:down dir:left",e),a.on("plain:up plain:right plain:down plain:left",e)},f.prototype.pressureFn=function(a,e,t){var o=this,r=0;clearInterval(o.pressureIntervals[t]),o.pressureIntervals[t]=setInterval(function(){var t=a.force||a.pressure||a.webkitForce||0;t!==r&&(e.trigger("pressure",t),o.trigger("pressure "+e.identifier+":pressure",t),r=t)}.bind(o),100)},f.prototype.onstart=function(a){var r=this,t=r.options;return a=g.prepareEvent(a),r.updateBox(),(g.map(a,function(n){r.actives.length<t.maxNumberOfNipples&&r.processOnStart(n)}),r.manager.bindDocument(),!1)},f.prototype.processOnStart=function(d){var e=this,n=e.options,r=e.manager.getIdentifier(d),i=d.force||d.pressure||d.webkitForce||0,o={x:d.pageX,y:d.pageY},s=e.getOrCreate(r,o),a;s.identifier=r;var u=function(n){n.trigger("start",n),e.trigger("start "+n.id+":start",n),n.show(),0<i&&e.pressureFn(d,n,n.identifier),e.processOnMove(d)};if(0<=(a=e.idles.indexOf(s))&&e.idles.splice(a,1),e.actives.push(s),e.ids.push(s.identifier),"semi"!==n.mode)u(s);else{if(!(g.distance(o,s.position)<=n.catchDistance))return s.destroy(),void e.processOnStart(d);u(s)}return s},f.prototype.getOrCreate=function(a,e){var t=this.options,r;return /(semi|static)/.test(t.mode)?(r=this.idles[0])?(this.idles.splice(0,1),r):"semi"===t.mode?this.createNipple(e,a):(console.warn("Coudln't find the needed nipple."),!1):r=this.createNipple(e,a)},f.prototype.processOnMove=function(d){var e=this.options,t=this.manager.getIdentifier(d),n=this.nipples.get(t);if(!n)return console.error("Found zombie joystick with ID "+t),void this.manager.removeIdentifier(t);n.identifier=t;var r=n.options.size/2,i={x:d.pageX,y:d.pageY},p=g.distance(i,n.position),c=g.angle(i,n.position),a=g.radians(c),l=p/r;p>r&&(p=r,i=g.findCoord(n.position,p,c)),n.frontPosition={x:i.x-n.position.x,y:i.y-n.position.y},e.dataOnly||g.applyPosition(n.ui.front,n.frontPosition);var u={identifier:n.identifier,position:i,force:l,pressure:d.force||d.pressure||d.webkitForce||0,distance:p,angle:{radian:a,degree:c},instance:n};(u=n.computeDirection(u)).angle={radian:g.radians(180-c),degree:180-c},n.trigger("move",u),this.trigger("move "+n.id+":move",u)},f.prototype.processOnEnd=function(a){var e=this,t=e.options,n=e.manager.getIdentifier(a),r=e.nipples.get(n),i=e.manager.removeIdentifier(r.identifier);r&&(t.dataOnly||r.hide(function(){"dynamic"===t.mode&&(r.trigger("removed",r),e.trigger("removed "+r.id+":removed",r),e.manager.trigger("removed "+r.id+":removed",r),r.destroy())}),clearInterval(e.pressureIntervals[r.identifier]),r.resetDirection(),r.trigger("end",r),e.trigger("end "+r.id+":end",r),0<=e.ids.indexOf(r.identifier)&&e.ids.splice(e.ids.indexOf(r.identifier),1),0<=e.actives.indexOf(r)&&e.actives.splice(e.actives.indexOf(r),1),/(semi|static)/.test(t.mode)?e.idles.push(r):0<=e.nipples.indexOf(r)&&e.nipples.splice(e.nipples.indexOf(r),1),e.manager.unbindDocument(),/(semi|static)/.test(t.mode)&&(e.manager.ids[i.id]=i.identifier))},f.prototype.onDestroyed=function(n,e){0<=this.nipples.indexOf(e)&&this.nipples.splice(this.nipples.indexOf(e),1),0<=this.actives.indexOf(e)&&this.actives.splice(this.actives.indexOf(e),1),0<=this.idles.indexOf(e)&&this.idles.splice(this.idles.indexOf(e),1),0<=this.ids.indexOf(e.identifier)&&this.ids.splice(this.ids.indexOf(e.identifier),1),this.manager.removeIdentifier(e.identifier),this.manager.unbindDocument()},f.prototype.destroy=function(){for(var t in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(t){t.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(t)&&clearInterval(this.pressureIntervals[t]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()},e.prototype=new d,e.constructor=e,e.prototype.prepareCollections=function(){var a=this;a.collections.create=a.create.bind(a),a.collections.on=a.on.bind(a),a.collections.off=a.off.bind(a),a.collections.destroy=a.destroy.bind(a),a.collections.get=function(r){var t;return a.collections.every(function(n){return!(t=n.get(r))}),t}},e.prototype.create=function(t){return this.createCollection(t)},e.prototype.createCollection=function(n){var e=new f(this,n);return this.bindCollection(e),this.collections.push(e),e},e.prototype.bindCollection=function(a){var i=this,e=function(t,e){n=t.type+" "+e.id+":"+t.type,i.trigger(n,e)},n;a.on("destroyed",i.onDestroyed.bind(i)),a.on("shown hidden rested dir plain",e),a.on("dir:up dir:right dir:down dir:left",e),a.on("plain:up plain:right plain:down plain:left",e)},e.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},e.prototype.unbindDocument=function(t){Object.keys(this.ids).length&&!0!==t||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},e.prototype.getIdentifier=function(n){var e;return n?void 0===(e=void 0===n.identifier?n.pointerId:n.identifier)&&(e=this.latest||0):e=this.index,void 0===this.ids[e]&&(this.ids[e]=this.index,this.index+=1),this.latest=e,this.ids[e]},e.prototype.removeIdentifier=function(a){var e={};for(var t in this.ids)if(this.ids[t]===a){e.id=t,e.identifier=this.ids[t],delete this.ids[t];break}return e},e.prototype.onmove=function(t){return this.onAny("move",t),!1},e.prototype.onend=function(t){return this.onAny("end",t),!1},e.prototype.onAny=function(a,e){var o=this,r="processOn"+a.charAt(0).toUpperCase()+a.slice(1),i;return e=g.prepareEvent(e),g.map(e,function(t){i=o.getIdentifier(t),g.map(o.collections,function(a,e,t){0<=t.ids.indexOf(e)&&(t[r](a),a._found_=!0)}.bind(null,t,i)),t._found_||o.removeIdentifier(i)}),!1},e.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(t){t.destroy()}),this.off()},e.prototype.onDestroyed=function(n,e){return!(0>this.collections.indexOf(e))&&void this.collections.splice(this.collections.indexOf(e),1)};var l=new e;return{create:function(t){return l.create(t)},factory:l}}),function(){window.DEVELOPMENT=!1,window.game={protocol:5,version:"v1.0.2",state:0,focus:!0,screenX:0,screenY:0,halfScreenX:0,halfScreenY:0,scale:1,spectatingID:null,myID:null,myType:null,myTeam:null,myUserID:"",myName:"",myOriginalName:"",myScore:0,myPlace:0,myLevel:0,myToken:"",myFlag:"xx",loggedIn:!1,roomName:"",regionName:"",playRegion:"derp",playRoom:"ffa",playHost:"",playPath:"",playInvited:!1,gameType:null,regionName:"",inviteLink:"",lastFlagSet:"xx",reloading:!1,ping:0,lagging:!1,timeFactor:1,timeFactorUncapped:1,time:0,timeNetwork:0,jitter:0,frames:0,shadowX:0,shadowY:0,graphics:{},debug:{},buckets:[]},window.config={storage:{},settings:{},ships:[{},{name:"raptor",turnFactor:.065,accelFactor:.225,maxSpeed:5.5,minSpeed:.001,brakeFactor:.025,energyLight:.6,collisions:[[0,5,23],[0,-15,15],[0,-25,12]]},{name:"spirit",turnFactor:.04,accelFactor:.15,maxSpeed:3.5,minSpeed:.001,brakeFactor:.015,energyLight:.9,collisions:[[0,0,35],[50,14,16],[74,26,14],[30,8,23],[63,22,15],[-50,14,16],[-74,26,14],[-30,8,23],[-63,22,15]]},{name:"mohawk",turnFactor:.07,accelFactor:.275,maxSpeed:6,minSpeed:.001,brakeFactor:.025,energyLight:.3,collisions:[[0,-12,15],[0,0,17],[0,13,15],[0,26,15]]},{name:"tornado",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.5,collisions:[[0,8,18],[14,12,13],[-14,12,13],[0,-12,16],[0,-26,14],[0,-35,12]]},{name:"prowler",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.75,collisions:[[0,11,25],[0,-8,18],[19,20,10],[-19,20,10],[0,-20,14]]}],mobs:[{},{exhaust:20,thruster:[.2,.4]},{exhaust:30,thruster:[.3,.6]},{exhaust:18,thruster:[.14,.3]},{},{exhaust:20,thruster:[.2,.4]},{exhaust:20,thruster:[.2,.4]},{exhaust:20,thruster:[.2,.4]}],upgrades:{speed:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},defense:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},energy:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},missile:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]}},doodads:[[1009,-2308,1,.9,.2,null,null],[1241,-2490,4,.5,-.2,null,null],[1157,-2379,2,.7,-.1,null,null],[622,-2126,3,.4,null,null,null],[669,-2187,2,.6,null,null,null],[-392,-1669,1,1.1,.1,null,null],[-273,-1746,4,.5,-.1,null,null],[-252,-1504,2,1,null,null,null],[1553,-2016,2,.4,.2,null,null],[1637,-1972,1,.5,.1,null,null],[1736,-1922,2,.5,.7,null,null],[2150,-2406,2,.6,null,null,null],[2238,-2318,3,.9,null,null,null],[2364,-2391,4,.6,0,null,null],[2491,-2682,1,.6,-.1,null,null],[2596,-2671,2,.9,.2,null,null],[-150,-3147,4,.4,-.4,null,null],[-155,-3044,2,.7,0,null,null],[-427,-3600,2,.4,null,null,null],[-259,-2982,2,.5,null,null,null],[-379,-3529,1,.6,.1,1,null],[-665,-3052,2,.5,null,null,null],[20,-1816,4,.5,.3,null,null],[127,-1799,1,.5,null,null,null],[263,-2572,3,.4,.4,null,null],[405,-2570,1,.9,-.2,null,null],[851,-4183,1,1,null,null,null],[754,-3971,2,.9,-.1,1,null],[1757,-5065,4,1.1,null,null,null],[1169,-4453,3,.9,null,null,null],[2054,-5244,3,.9,null,null,null],[1631,-4901,1,.9,0,null,null],[2305,-5281,2,.9,.2,1,null],[1007,-4281,1,.8,.1,null,null],[2766,-5202,1,.8,.1,1,null],[2927,-5204,2,.7,null,1,null],[3206,-5218,2,.3,.6,1,null],[3099,-5193,4,.6,.1,1,null],[1417,-4726,2,1,null,null,null],[2844,-1513,4,.5,.1,null,null],[3206,-1464,1,1,.1,1,null],[2881,-1403,2,.9,null,null,null],[3804,-2025,1,.7,-.1,null,null],[4116,-1778,2,.9,-.3,null,null],[3715,-1508,3,.6,.1,null,null],[4247,-1126,1,.6,.1,1,null],[3860,268,1,.5,.5,1,null],[4334,-1011,2,1.1,-.1,null,null],[3849,349,3,.6,null,null,null],[3956,490,4,.8,-.4,null,null],[4073,667,2,.9,-.5,null,null],[3583,-864,4,.8,.1,.8,15723705],[4135,836,2,1,-.2,null,null],[4785,-743,2,1,.1,null,null],[4993,-839,1,.9,.3,1,null],[5224,-482,3,.7,null,null,null],[5235,-1238,4,1.1,null,1,null],[5419,-1346,2,.6,-.5,.8,null],[6075,-5099,1,.8,null,null,null],[5767,-4953,2,.9,-.3,1,null],[5896,-4967,2,.9,.1,1,null],[5384,-4642,4,.9,null,null,null],[5704,-4857,4,.9,null,null,null],[5563,-4697,2,.9,null,null,null],[5406,-4470,1,1.1,null,null,null],[5352,-3964,3,.9,null,null,null],[5309,-3665,1,1.1,null,null,null],[5247,-3464,4,.9,-.5,null,null],[5300,-3121,1,.9,null,null,null],[3524,-3340,1,1.1,0,null,null],[3661,-3589,2,.9,-.7,null,null],[7236,-1376,2,.6,-.3,null,null],[7624,-1610,2,.8,null,null,null],[7403,-1555,2,.7,null,null,null],[7514,-1568,2,.9,0,null,null],[3660,-2705,1,.9,.2,null,null],[3374,-2813,2,.8,null,null,null],[7347,-1447,1,.9,.1,null,null],[7236,-775,4,.5,-.9,null,null],[7207,-631,2,.9,0,null,null],[7303,-468,1,.9,-.3,null,null],[7262,-1263,4,.9,-.6,null,null],[7404,-350,2,1,.6,null,null],[7589,-305,3,.9,.6,null,null],[7741,-1589,4,1,.2,null,null],[7949,-1594,1,1,-.2,null,null],[8152,-1599,2,1.1,.1,null,null],[8378,-1602,4,1.2,0,null,null],[7873,-321,2,.6,.3,null,null],[8543,-1661,1,.7,0,null,null],[7790,-259,1,1,.1,null,null],[8675,-1573,2,1,.1,null,null],[8163,-245,2,.7,.3,null,null],[8329,-311,2,.7,.5,null,null],[8275,-229,1,1,.1,null,null],[8447,-277,3,1,0,null,null],[8824,-1447,1,.9,-.4,null,null],[7221,-1140,1,.5,-.2,null,null],[8924,-1273,2,.9,-.5,null,null],[6844,-950,3,1,.1,null,null],[8949,-1060,3,1.1,-.3,null,null],[8904,-920,4,.8,-.7,null,null],[8582,-338,2,.7,null,null,null],[8963,-803,1,1,-.4,null,null],[8680,-322,4,.9,0,null,null],[8811,-449,1,.9,-.3,null,null],[8910,-610,2,.9,-.4,null,null],[6855,114,1,.8,null,null,null],[6971,241,2,1,-.1,null,null],[6852,656,2,.5,.3,null,null],[6980,706,1,.9,-.4,null,null],[6946,939,4,1,-.2,null,null],[6027,-560,1,.6,0,null,null],[7521,425,2,.4,.1,null,null],[7599,389,1,.5,-.5,null,null],[5863,-431,2,.9,.1,null,null],[9392,262,2,.9,-.1,null,null],[7521,512,3,.6,null,null,null],[9807,1027,1,.5,-.1,null,null],[9554,237,1,1,-.2,1,null],[9346,392,4,1.2,-.3,null,null],[9789,1142,3,.7,null,null,null],[9747,-532,4,.8,.2,1,null],[8591,347,4,.6,-.2,null,null],[9951,-509,1,1,null,null,null],[9308,2417,1,.5,.1,null,null],[10185,-522,2,.9,null,1,null],[10330,2147,1,.6,0,null,null],[9350,2480,3,.7,null,null,null],[10503,2124,2,.9,null,null,null],[12500,2628,4,.5,.3,null,null],[13188,2864,4,.5,-.1,null,null],[12637,2659,2,.7,.1,null,null],[13262,2899,1,.5,null,null,null],[13777,5168,1,.5,-.3,null,null],[15709,6399,1,.4,null,null,null],[13539,5664,3,.5,null,1,null],[15660,6474,2,.4,-.3,null,null],[13743,5248,2,.7,-.1,null,null],[15482,6600,2,.4,-.1,null,null],[15591,6525,4,.3,null,null,null],[13487,5738,4,.7,null,null,null],[15407,6702,1,.6,.1,null,null],[8171,-2568,2,.5,.1,null,null],[16001,6015,3,.6,null,null,null],[16017,6110,1,.4,null,1,null],[6496,-1491,1,.5,.3,null,null],[6626,-1480,2,.7,null,null,null],[6190,-1022,4,.8,null,null,null],[8325,-2615,2,1,-.3,null,null],[8222,-2412,4,1,null,null,null],[9204,-2288,1,.9,-.1,null,null],[9279,-2216,2,1,null,null,null],[10375,-1558,2,.8,-.3,null,null],[10309,-1421,1,.9,null,null,null],[10247,-1216,4,1.2,-.5,null,null],[10079,-2310,4,.9,.3,null,null],[10320,-2330,3,1,null,null,null],[10942,-2963,2,.9,-.3,null,null],[10807,-2778,4,1.1,-.5,null,null],[12989,-1929,3,.6,null,null,null],[12613,-1181,1,.4,0,1,null],[12559,-1120,2,.5,null,null,null],[11642,-1900,4,.7,-.5,null,null],[11558,-1692,1,.9,-.2,null,null],[11509,-1479,2,.5,null,null,null],[12559,-2673,1,.8,null,null,null],[12446,-2487,4,1,-.5,null,null],[12375,-2303,3,.9,-.2,null,null],[10363,-3514,4,.7,-.4,null,null],[10290,-3340,1,.9,-.2,null,null],[10162,-3207,2,.7,null,null,null],[9003,-3048,4,.9,-.1,null,null],[9161,-3119,1,.6,null,null,null],[14550,-3462,2,.9,-.2,null,null],[14407,-3335,4,.9,-.2,null,null],[14366,-4493,2,.9,.5,null,null],[14477,-4437,3,1,null,null,null],[15305,-4230,4,.9,.1,null,null],[15481,-4283,2,.9,null,null,null],[15349,-5009,4,.4,.3,null,null],[11874,-4879,2,.6,null,null,null],[15453,-4984,1,.7,null,null,null],[11907,-4742,4,.8,-.6,null,null],[12440,-4278,4,.5,.3,null,null],[11980,-4582,2,.9,null,null,null],[12131,-4387,1,1.1,null,null,null],[15681,-4973,4,1,null,null,null],[12591,-4252,1,.8,null,null,null],[12777,-4244,2,.9,.2,null,null],[12969,-4227,3,.9,null,null,null],[15897,-5071,2,.9,-.2,null,null],[13204,-4228,4,1,null,null,null],[11592,-5261,1,.7,.2,null,null],[12743,-4826,1,.4,.3,null,null],[10102,-5078,2,.7,.4,null,null],[12854,-4782,3,.9,.1,null,null],[10191,-5033,1,.7,null,null,null],[10523,-5133,2,1,null,null,null],[10336,-4977,4,1.1,-.3,null,null],[10667,-5250,2,.8,-.1,null,null],[9665,-6403,4,.7,.3,null,null],[10798,-5379,1,.5,null,null,null],[9670,-5547,1,.9,-.1,null,null],[9834,-6369,3,1,null,null,null],[9864,-5572,2,1.1,-.1,null,null],[11362,-3957,2,.9,null,1,null],[11162,-3830,4,1,-.1,null,null],[8922,-6173,4,1,null,null,null],[9003,-5368,1,.5,null,null,null],[8453,-6153,1,.6,.2,null,null],[8954,-5229,3,.9,-.2,null,null],[8905,-5072,1,.8,-.3,null,null],[8704,-3873,3,.9,null,null,null],[8578,-6105,2,.8,.4,null,null],[8508,-3710,1,.7,0,null,null],[8614,-5400,4,.5,null,null,null],[8788,-4922,4,1.1,null,null,null],[8936,-3905,4,.6,.3,null,null],[9701,-4613,4,.9,-.1,null,null],[6973,-4776,2,.6,null,null,null],[7016,-4674,1,.9,null,null,null],[9124,-3853,1,.9,.2,null,null],[7253,-4648,4,.8,.2,null,null],[6602,-4591,1,.6,.2,null,null],[8510,-5322,2,.9,null,null,null],[6687,-3810,4,.7,.3,null,null],[9525,-4492,3,1.1,null,null,null],[7461,-4705,2,.9,null,null,null],[9280,-3812,2,.8,-.3,null,null],[6467,-2811,1,.3,null,null,null],[6842,-3820,1,.8,.3,null,null],[6483,-2725,4,.6,.3,null,null],[7675,-4864,1,1.1,null,null,null],[6991,-2885,4,.9,.2,null,null],[6610,-2664,4,.9,null,null,null],[6822,-2736,2,.9,null,null,null],[6763,-4582,3,.9,null,null,null],[6509,-2490,2,.9,-.3,null,null],[7216,-3865,4,1.1,.2,1,null],[7018,-3708,2,1,.2,null,null],[2254,-3301,1,.8,.5,null,null],[6378,-2310,1,.8,.2,null,null],[7197,-2857,2,.9,null,null,null],[2609,-3483,4,.5,null,null,null],[2449,-3385,2,.9,.3,1,null],[4585,-2889,4,.7,-.2,null,null],[4470,-2768,3,.8,.2,null,null],[4083,-4033,1,.9,.5,1,null],[1568,-2869,1,.4,null,null,null],[4336,-4105,2,1.2,null,null,null],[1977,-1678,2,.5,null,null,null],[1412,-3642,1,.5,0,1,null],[1570,-2792,4,.6,null,null,null],[1932,-1586,1,.6,null,null,null],[1310,-3547,2,.6,0,null,null],[3611,1391,2,1,null,null,null],[3558,2174,2,.9,null,null,null],[3431,1563,1,.9,.3,null,null],[3142,2813,2,.7,null,null,null],[3330,2296,4,1.1,null,null,null],[3001,2818,1,.6,.3,null,null],[3703,2044,1,.4,null,null,null],[2872,3863,1,.9,-.2,null,null],[3125,2942,3,1.1,null,null,null],[2841,4018,4,1.1,.1,null,null],[2402,5140,4,.6,.3,null,null],[2511,5167,3,.8,null,null,null],[-14607,-5112,4,.9,.1,null,null],[-14430,-5180,1,.9,0,null,null],[-14197,-5222,2,1.2,-.1,null,null],[-14895,-4703,4,.5,.2,null,null],[-14797,-4728,2,.4,null,null,null],[-14697,-4739,1,.4,null,null,null],[-13919,-5281,1,1.1,0,null,null],[-13646,-5170,3,.7,null,null,null],[-13400,-5068,2,1.2,.2,null,null],[-13099,-5108,4,1.1,.2,null,null],[-12824,-5092,1,.9,null,null,null],[-12631,-5044,2,.9,-.2,null,null],[-12427,-4914,1,.9,null,null,null],[-12270,-4816,2,.7,-.3,null,null],[-11772,-4983,2,.7,0,null,null],[-11940,-4867,1,.9,null,null,null],[-12091,-4699,3,.9,null,null,null],[-12270,-4529,4,.7,null,null,null],[-12460,-4396,1,.9,.4,null,null],[-13058,-4252,1,.9,null,null,null],[-12894,-4096,4,.7,.2,null,null],[-12738,-4077,2,.7,null,null,null],[-13546,-4341,1,.4,null,null,null],[-13428,-4299,3,.9,null,null,null],[-14679,-4192,1,.7,-.1,null,null],[-14368,-4308,4,.7,-.2,null,null],[-14495,-4133,2,1.1,-.1,null,null],[-12072,-3824,2,.8,-.1,null,null],[-11904,-3648,1,1,0,null,null],[-11654,-3569,3,.7,null,null,null],[-11648,-3357,4,.9,0,null,null],[-11420,-3359,1,.9,null,null,null],[-11296,-3135,2,.7,null,null,null],[-10782,-2838,1,.8,-.1,null,null],[-11410,-3039,1,.3,.6,null,null],[-10581,-2773,2,1.1,.1,null,null],[-11118,-5114,4,.8,.2,null,null],[-10675,-5079,1,.9,null,null,null],[-10205,-4890,1,.8,.1,null,null],[-11543,-4164,4,.8,.3,null,null],[-11287,-4244,2,.5,null,null,null],[-10018,-4747,2,1,-.2,null,null],[-9278,419,3,.5,null,null,null],[-9341,470,4,.5,.3,null,null],[-9180,496,1,.8,.6,null,null],[-11365,-4131,3,1,null,null,null],[-9353,0,3,.6,.3,null,null],[-8975,528,2,1,.1,null,null],[-9413,89,4,.9,null,null,null],[-8230,770,1,.4,null,null,null],[-9231,17,1,.7,0,null,null],[-6808,1667,3,.5,-.2,null,null],[-6694,1622,2,.8,-.4,null,null],[-8285,855,3,.6,null,null,null],[-6793,1796,2,.8,.4,null,null],[-6865,1935,1,.5,-.1,null,null],[-7043,2222,3,.6,-.2,null,null],[-7083,2368,1,.6,-.2,null,null],[-7103,2533,4,.7,-.4,null,null],[-7099,2721,2,.8,-.3,null,null],[-7178,2874,1,.4,null,null,null],[-6964,3110,4,.7,.2,null,null],[-6246,4191,1,.6,-.1,null,null],[-6735,3446,1,.4,.1,null,null],[-6722,3537,4,.7,.4,null,null],[-6396,3388,4,.9,null,null,null],[-6787,3140,2,.9,null,null,null],[-6227,4488,2,.7,-.5,null,null],[-6281,3953,1,.6,.2,null,null],[-6530,3576,1,1.1,null,null,null],[-6147,3994,3,1.1,null,null,null],[-6141,4292,2,1.2,-.3,null,null],[-6377,5578,2,.7,-.5,null,null],[-6152,4569,1,.9,-.2,null,null],[-6222,4769,4,.7,-.5,null,null],[-6266,4956,1,.6,-.2,null,null],[-6233,5414,1,.9,-.4,null,null],[-6347,5646,3,.7,-.1,1,null],[-6400,6066,2,.7,-.2,null,null],[-6411,6261,1,.8,null,null,null],[-6565,7043,1,.6,-.3,null,null],[-6377,6415,4,.9,-.3,null,null],[-6440,6614,1,.7,-.2,null,null],[-5944,1954,3,.5,-.4,null,null],[-6001,2039,1,.8,.2,null,null],[-6467,7070,3,.9,null,null,null],[-4963,3608,1,.6,-.3,1,null],[-4776,3510,2,.4,-.1,1,null],[-5785,1998,2,1.1,-.2,null,null],[-3708,3449,1,.6,-.3,null,null],[-3790,3582,1,.9,null,null,null],[-4031,3697,4,.7,-.1,null,null],[-4859,3634,3,1,null,null,null],[-3850,3730,2,1,.2,null,null],[-4689,4605,4,.9,-.2,null,null],[-3492,2892,1,.6,-.2,null,null],[-4507,4483,1,.6,null,null,null],[-4829,2745,1,.9,-.2,null,null],[-4435,4273,2,.9,-.6,null,null],[-3383,2930,2,.9,null,null,null],[-4888,2821,2,.9,.1,null,null],[-5372,5172,1,.5,null,null,null],[-5036,2981,4,.9,.3,null,null],[-9895,-1942,1,1,.1,null,null],[-9371,-2159,4,.6,null,null,null],[-9995,-1773,4,.9,-.5,null,null],[-5280,5218,4,.9,0,null,null],[-5079,5183,1,.9,-.3,null,null],[-5149,3079,1,.6,.2,null,null],[-9695,-2048,2,1,-.1,null,null],[-5063,5374,2,.9,-.2,null,null],[-9504,-2059,1,1,.2,null,null],[-8948,-2140,4,.7,.3,null,null],[-9262,-2081,2,1.1,.4,null,null],[-9068,-2071,4,1,.2,null,null],[-8861,-2045,2,1.1,0,null,null],[-8654,-2083,1,1,.3,null,null],[-8473,-2048,3,1,0,null,null],[-8283,-1965,1,1,.5,null,null],[-8182,-1863,2,.9,-.2,null,null],[-10037,-1579,1,.9,-.4,null,null],[-10063,-1365,2,.9,-.1,null,null],[-10074,-1190,1,.9,-.4,null,null],[-8167,-1225,1,.5,-.7,null,null],[-8188,-1087,4,.8,-.5,null,null],[-9975,-1022,1,.9,.3,null,null],[-9835,-910,2,1,.1,null,null],[-9709,-848,4,1,.3,null,null],[-9532,-792,2,1,.1,null,null],[-9348,-779,1,1,0,null,null],[-9131,-784,2,1.1,.1,null,null],[-8754,-795,3,.7,null,null,null],[-8587,-797,4,1,0,null,null],[-8424,-856,1,.9,null,null,null],[-8246,-921,2,.9,-.4,null,null],[-8153,-1701,4,.7,-.7,null,null],[-6447,-2137,1,.6,-.2,null,null],[-8153,-1591,1,.5,-.6,null,null],[-7694,-1393,4,1,-.1,null,null],[-6541,-2030,2,.7,null,null,null],[-7135,-1547,2,.7,.1,null,null],[-5885,-2958,1,.6,.3,null,null],[-7171,-1440,1,.8,-.2,null,null],[-5620,-3123,2,.6,-.4,null,null],[-6631,-1866,4,.8,null,null,null],[-5882,-3696,2,.8,-.4,null,null],[-5716,-2944,3,.9,null,null,null],[-5949,-3528,1,.5,-.1,null,null],[-6869,-4052,4,.8,null,null,null],[-7081,-2673,3,.5,null,null,null],[-6725,-4069,1,.6,-.2,null,null],[-10487,-2295,2,.5,.1,1,null],[-7032,-2749,2,.6,-.4,null,null],[-10769,-3817,3,.6,-.2,null,null],[-6607,-4081,2,.5,null,null,null],[-10849,-1824,1,.7,.1,null,null],[-10479,-2146,4,.9,-.1,null,null],[-7003,-2611,4,.9,-.2,null,null],[-10749,-1511,2,.6,-.4,null,null],[-10697,-1953,2,1,.1,null,null],[-10848,-1330,3,.9,null,null,null],[-10912,-1220,4,.5,0,null,null],[-9843,-2685,4,.7,null,null,null],[-10823,-3717,2,.7,null,null,null],[-9697,-2713,1,.6,.3,null,null],[-10080,-3431,2,.4,null,null,null],[-10648,-3844,1,.9,null,null,null],[-9530,-2695,2,1,null,null,null],[-2387,-6791,1,.9,null,null,null],[-8465,-5037,2,.7,null,null,null],[-2550,-6627,2,.9,-.1,null,null],[-9325,-2822,1,.7,-.1,null,null],[-10140,-3346,1,.8,null,null,null],[-8461,-4908,4,.9,null,null,null],[8116,-1076,2,.8,-.3,null,null],[8115,-940,4,.8,-.3,null,null],[-2503,-6359,4,1.4,-.6,null,null],[-9062,-1580,2,.8,-.5,null,null],[8120,-790,1,.8,null,null,null],[-9065,-1444,4,.8,-.3,null,null],[-2615,-6159,1,1,null,null,null],[-2744,-5943,2,1.1,null,null,null],[-3713,-4955,3,.9,null,null,null],[-9061,-1292,1,.8,0,null,null],[-1551,-4718,4,.5,null,null,null],[5251,-6249,1,.5,null,1,null],[5192,-6181,2,.4,-.1,null,null],[-2898,-5732,3,.9,null,null,null],[-1705,-4629,3,.8,null,null,null],[1618,-7035,1,.5,null,null,null],[-3829,-4776,4,.9,null,null,null],[-2851,-5589,4,1.1,-.2,null,null],[-2974,-5399,2,1.1,null,null,null],[-3952,-4568,1,.9,null,null,null],[-4135,-4368,2,1.1,.1,1,null],[-3428,-5104,1,1.1,null,null,null],[-3167,-5254,4,.9,.1,null,null],[-3049,-6916,2,1,null,null,null],[-3097,-6722,1,.9,-.3,null,null],[-3190,-6493,3,1,null,null,null],[-3318,-6284,4,1.1,null,null,null],[-4672,-5861,1,1.1,1,null,null],[-4480,-5668,1,1,null,null,null],[-4294,-5548,2,.9,1.1,null,null],[-3433,-6072,1,1,-.2,null,null],[-3568,-5881,3,1,null,null,null],[-3736,-5698,2,1.2,null,null,null],[-3978,-7517,3,.9,.1,null,null],[-3956,-5572,4,1,null,null,null],[-4103,-5400,1,1,null,null,null],[-4281,-5240,2,1,null,null,null],[-4409,-5034,3,1,null,null,null],[-4475,-4808,4,.9,null,null,null],[-2777,-7546,3,1,.8,null,null],[-2542,-7502,2,.9,.4,null,null],[-2398,-7364,1,.9,-.7,null,null],[-2350,-7151,2,.9,-.4,null,null],[-2315,-6976,4,.8,-.8,null,null],[-3749,-7488,4,1,null,null,null],[-2995,-7596,2,1.2,.5,null,null],[-3253,-7558,3,1.1,.3,null,null],[-3468,-7472,4,1,null,null,null],[-5028,-6473,2,1,.4,null,null],[-3604,-7301,1,1.1,null,null,null],[-3678,-7078,2,1.1,null,null,null],[-3835,-6826,3,1.1,null,null,null],[-3935,-6595,2,1,null,null,null],[-5214,-7381,3,1,null,null,null],[-4065,-6416,3,1.1,null,null,null],[-4174,-6231,4,.7,null,null,null],[-4556,-6940,3,1,null,null,null],[-4663,-6781,4,1,null,null,null],[-4748,-6548,2,1.3,null,null,null],[-4847,-6257,2,1.1,-.4,null,null],[-4806,-6016,4,.9,1.2,null,null],[-4950,-7410,1,1.4,.2,null,null],[-5470,-7251,4,1.3,-.2,null,null],[-5637,-7038,2,1,-.3,null,null],[-5593,-6819,4,1,null,null,null],[-5406,-6727,3,1,.6,null,null],[-5263,-6580,1,1,.4,null,null],[-4636,-7476,2,1,.2,null,null],[-4399,-7496,2,.9,-.2,null,null],[-6769,-7571,2,.9,-.4,null,null],[-6853,-7377,1,.9,null,null,null],[-8273,-7231,4,.5,.4,null,null],[-4182,-7512,4,.9,.1,null,null],[-7525,-5855,2,.9,null,null,null],[-7495,-6329,3,.5,null,null,null],[-7297,-6946,2,.9,null,null,null],[-8148,-7137,1,.7,null,null,null],[-7030,-7301,4,.7,null,null,null]],walls:[[1009,-2308,108],[1241,-2490,60],[1157,-2379,84],[622,-2126,48],[669,-2187,72],[-392,-1669,132],[-273,-1746,60],[-252,-1504,120],[1553,-2016,48],[1637,-1972,60],[1736,-1922,60],[2150,-2406,72],[2238,-2318,108],[2364,-2391,72],[2491,-2682,72],[2596,-2671,108],[-150,-3147,48],[-155,-3044,84],[-427,-3600,48],[-259,-2982,60],[-379,-3529,72],[-665,-3052,60],[20,-1816,60],[127,-1799,60],[263,-2572,48],[405,-2570,108],[851,-4183,120],[754,-3971,108],[1757,-5065,132],[1169,-4453,108],[2054,-5244,108],[1631,-4901,108],[2305,-5281,108],[1007,-4281,96],[2766,-5202,96],[2927,-5204,84],[3206,-5218,36],[3099,-5193,72],[1417,-4726,120],[2844,-1513,60],[3206,-1464,120],[2881,-1403,108],[3804,-2025,84],[4116,-1778,108],[3715,-1508,72],[4247,-1126,72],[3860,268,60],[4334,-1011,132],[3849,349,72],[3956,490,96],[4073,667,108],[3583,-864,96],[4135,836,120],[4785,-743,120],[4993,-839,108],[5224,-482,84],[5235,-1238,132],[5419,-1346,72],[6075,-5099,96],[5767,-4953,108],[5896,-4967,108],[5384,-4642,108],[5704,-4857,108],[5563,-4697,108],[5406,-4470,132],[5352,-3964,108],[5309,-3665,132],[5247,-3464,108],[5300,-3121,108],[3524,-3340,132],[3661,-3589,108],[7236,-1376,72],[7624,-1610,96],[7403,-1555,84],[7514,-1568,108],[3660,-2705,108],[3374,-2813,96],[7347,-1447,108],[7236,-775,60],[7207,-631,108],[7303,-468,108],[7262,-1263,108],[7404,-350,120],[7589,-305,108],[7741,-1589,120],[7949,-1594,120],[8152,-1599,132],[8378,-1602,144],[7873,-321,72],[8543,-1661,84],[7790,-259,120],[8675,-1573,120],[8163,-245,84],[8329,-311,84],[8275,-229,120],[8447,-277,120],[8824,-1447,108],[7221,-1140,60],[8924,-1273,108],[6844,-950,120],[8949,-1060,132],[8904,-920,96],[8582,-338,84],[8963,-803,120],[8680,-322,108],[8811,-449,108],[8910,-610,108],[6855,114,96],[6971,241,120],[6852,656,60],[6980,706,108],[6946,939,120],[6027,-560,72],[7521,425,48],[7599,389,60],[5863,-431,108],[9392,262,108],[7521,512,72],[9807,1027,60],[9554,237,120],[9346,392,144],[9789,1142,84],[9747,-532,96],[8591,347,72],[9951,-509,120],[9308,2417,60],[10185,-522,108],[10330,2147,72],[9350,2480,84],[10503,2124,108],[12500,2628,60],[13188,2864,60],[12637,2659,84],[13262,2899,60],[13777,5168,60],[15709,6399,48],[13539,5664,60],[15660,6474,48],[13743,5248,84],[15482,6600,48],[15591,6525,36],[13487,5738,84],[15407,6702,72],[8171,-2568,60],[16001,6015,72],[16017,6110,48],[6496,-1491,60],[6626,-1480,84],[6190,-1022,96],[8325,-2615,120],[8222,-2412,120],[9204,-2288,108],[9279,-2216,120],[10375,-1558,96],[10309,-1421,108],[10247,-1216,144],[10079,-2310,108],[10320,-2330,120],[10942,-2963,108],[10807,-2778,132],[12989,-1929,72],[12613,-1181,48],[12559,-1120,60],[11642,-1900,84],[11558,-1692,108],[11509,-1479,60],[12559,-2673,96],[12446,-2487,120],[12375,-2303,108],[10363,-3514,84],[10290,-3340,108],[10162,-3207,84],[9003,-3048,108],[9161,-3119,72],[14550,-3462,108],[14407,-3335,108],[14366,-4493,108],[14477,-4437,120],[15305,-4230,108],[15481,-4283,108],[15349,-5009,48],[11874,-4879,72],[15453,-4984,84],[11907,-4742,96],[12440,-4278,60],[11980,-4582,108],[12131,-4387,132],[15681,-4973,120],[12591,-4252,96],[12777,-4244,108],[12969,-4227,108],[15897,-5071,108],[13204,-4228,120],[11592,-5261,84],[12743,-4826,48],[10102,-5078,84],[12854,-4782,108],[10191,-5033,84],[10523,-5133,120],[10336,-4977,132],[10667,-5250,96],[9665,-6403,84],[10798,-5379,60],[9670,-5547,108],[9834,-6369,120],[9864,-5572,132],[11362,-3957,108],[11162,-3830,120],[8922,-6173,120],[9003,-5368,60],[8453,-6153,72],[8954,-5229,108],[8905,-5072,96],[8704,-3873,108],[8578,-6105,96],[8508,-3710,84],[8614,-5400,60],[8788,-4922,132],[8936,-3905,72],[9701,-4613,108],[6973,-4776,72],[7016,-4674,108],[9124,-3853,108],[7253,-4648,96],[6602,-4591,72],[8510,-5322,108],[6687,-3810,84],[9525,-4492,132],[7461,-4705,108],[9280,-3812,96],[6467,-2811,36],[6842,-3820,96],[6483,-2725,72],[7675,-4864,132],[6991,-2885,108],[6610,-2664,108],[6822,-2736,108],[6763,-4582,108],[6509,-2490,108],[7216,-3865,132],[7018,-3708,120],[2254,-3301,96],[6378,-2310,96],[7197,-2857,108],[2609,-3483,60],[2449,-3385,108],[4585,-2889,84],[4470,-2768,96],[4083,-4033,108],[1568,-2869,48],[4336,-4105,144],[1977,-1678,60],[1412,-3642,60],[1570,-2792,72],[1932,-1586,72],[1310,-3547,72],[3611,1391,120],[3558,2174,108],[3431,1563,108],[3142,2813,84],[3330,2296,132],[3001,2818,72],[3703,2044,48],[2872,3863,108],[3125,2942,132],[2841,4018,132],[2402,5140,72],[2511,5167,96],[-14607,-5112,108],[-14430,-5180,108],[-14197,-5222,144],[-14895,-4703,60],[-14797,-4728,48],[-14697,-4739,48],[-13919,-5281,132],[-13646,-5170,84],[-13400,-5068,144],[-13099,-5108,132],[-12824,-5092,108],[-12631,-5044,108],[-12427,-4914,108],[-12270,-4816,84],[-11772,-4983,84],[-11940,-4867,108],[-12091,-4699,108],[-12270,-4529,84],[-12460,-4396,108],[-13058,-4252,108],[-12894,-4096,84],[-12738,-4077,84],[-13546,-4341,48],[-13428,-4299,108],[-14679,-4192,84],[-14368,-4308,84],[-14495,-4133,132],[-12072,-3824,96],[-11904,-3648,120],[-11654,-3569,84],[-11648,-3357,108],[-11420,-3359,108],[-11296,-3135,84],[-10782,-2838,96],[-11410,-3039,36],[-10581,-2773,132],[-11118,-5114,96],[-10675,-5079,108],[-10205,-4890,96],[-11543,-4164,96],[-11287,-4244,60],[-10018,-4747,120],[-9278,419,60],[-9341,470,60],[-9180,496,96],[-11365,-4131,120],[-9353,0,72],[-8975,528,120],[-9413,89,108],[-8230,770,48],[-9231,17,84],[-6808,1667,60],[-6694,1622,96],[-8285,855,72],[-6793,1796,96],[-6865,1935,60],[-7043,2222,72],[-7083,2368,72],[-7103,2533,84],[-7099,2721,96],[-7178,2874,48],[-6964,3110,84],[-6246,4191,72],[-6735,3446,48],[-6722,3537,84],[-6396,3388,108],[-6787,3140,108],[-6227,4488,84],[-6281,3953,72],[-6530,3576,132],[-6147,3994,132],[-6141,4292,144],[-6377,5578,84],[-6152,4569,108],[-6222,4769,84],[-6266,4956,72],[-6233,5414,108],[-6347,5646,84],[-6400,6066,84],[-6411,6261,96],[-6565,7043,72],[-6377,6415,108],[-6440,6614,84],[-5944,1954,60],[-6001,2039,96],[-6467,7070,108],[-4963,3608,72],[-4776,3510,48],[-5785,1998,132],[-3708,3449,72],[-3790,3582,108],[-4031,3697,84],[-4859,3634,120],[-3850,3730,120],[-4689,4605,108],[-3492,2892,72],[-4507,4483,72],[-4829,2745,108],[-4435,4273,108],[-3383,2930,108],[-4888,2821,108],[-5372,5172,60],[-5036,2981,108],[-9895,-1942,120],[-9371,-2159,72],[-9995,-1773,108],[-5280,5218,108],[-5079,5183,108],[-5149,3079,72],[-9695,-2048,120],[-5063,5374,108],[-9504,-2059,120],[-8948,-2140,84],[-9262,-2081,132],[-9068,-2071,120],[-8861,-2045,132],[-8654,-2083,120],[-8473,-2048,120],[-8283,-1965,120],[-8182,-1863,108],[-10037,-1579,108],[-10063,-1365,108],[-10074,-1190,108],[-8167,-1225,60],[-8188,-1087,96],[-9975,-1022,108],[-9835,-910,120],[-9709,-848,120],[-9532,-792,120],[-9348,-779,120],[-9131,-784,132],[-8754,-795,84],[-8587,-797,120],[-8424,-856,108],[-8246,-921,108],[-8153,-1701,84],[-6447,-2137,72],[-8153,-1591,60],[-7694,-1393,120],[-6541,-2030,84],[-7135,-1547,84],[-5885,-2958,72],[-7171,-1440,96],[-5620,-3123,72],[-6631,-1866,96],[-5882,-3696,96],[-5716,-2944,108],[-5949,-3528,60],[-6869,-4052,96],[-7081,-2673,60],[-6725,-4069,72],[-10487,-2295,60],[-7032,-2749,72],[-10769,-3817,72],[-6607,-4081,60],[-10849,-1824,84],[-10479,-2146,108],[-7003,-2611,108],[-10749,-1511,72],[-10697,-1953,120],[-10848,-1330,108],[-10912,-1220,60],[-9843,-2685,84],[-10823,-3717,84],[-9697,-2713,72],[-10080,-3431,48],[-10648,-3844,108],[-9530,-2695,120],[-2387,-6791,108],[-8465,-5037,84],[-2550,-6627,108],[-9325,-2822,84],[-10140,-3346,96],[-8461,-4908,108],[8116,-1076,96],[8115,-940,96],[-2503,-6359,168],[-9062,-1580,96],[8120,-790,96],[-9065,-1444,96],[-2615,-6159,120],[-2744,-5943,132],[-3713,-4955,108],[-9061,-1292,96],[-1551,-4718,60],[5251,-6249,60],[5192,-6181,48],[-2898,-5732,108],[-1705,-4629,96],[1618,-7035,60],[-3829,-4776,108],[-2851,-5589,132],[-2974,-5399,132],[-3952,-4568,108],[-4135,-4368,132],[-3428,-5104,132],[-3167,-5254,108],[-3049,-6916,120],[-3097,-6722,108],[-3190,-6493,120],[-3318,-6284,132],[-4672,-5861,132],[-4480,-5668,120],[-4294,-5548,108],[-3433,-6072,120],[-3568,-5881,120],[-3736,-5698,144],[-3978,-7517,108],[-3956,-5572,120],[-4103,-5400,120],[-4281,-5240,120],[-4409,-5034,120],[-4475,-4808,108],[-2777,-7546,120],[-2542,-7502,108],[-2398,-7364,108],[-2350,-7151,108],[-2315,-6976,96],[-3749,-7488,120],[-2995,-7596,144],[-3253,-7558,132],[-3468,-7472,120],[-5028,-6473,120],[-3604,-7301,132],[-3678,-7078,132],[-3835,-6826,132],[-3935,-6595,120],[-5214,-7381,120],[-4065,-6416,132],[-4174,-6231,84],[-4556,-6940,120],[-4663,-6781,120],[-4748,-6548,156],[-4847,-6257,132],[-4806,-6016,108],[-4950,-7410,168],[-5470,-7251,156],[-5637,-7038,120],[-5593,-6819,120],[-5406,-6727,120],[-5263,-6580,120],[-4636,-7476,120],[-4399,-7496,108],[-6769,-7571,108],[-6853,-7377,108],[-8273,-7231,60],[-4182,-7512,108],[-7525,-5855,108],[-7495,-6329,60],[-7297,-6946,108],[-8148,-7137,84],[-7030,-7301,84]],groundDoodads:[[-9670,-1470,"doodadField",.5,0,null,null],[8600,-940,"doodadField",.5,0,null,null],[920,-2800,"doodadField",.5,0,null,null]],debug:{show:!0,collisions:!1},mobile:!1,ios:!1,phone:!1,tablet:!1,mouse:!1,resolution:1,overdrawOptimize:!0,overdraw:256,scalingFactor:2500,minimapPaddingX:16,minimapPaddingY:16,minimapSize:240,maxChatLines:50,maxScoreboard:8,shadowScaling:2,shadowOffsetX:20,shadowOffsetY:40,ackFrequency:10,bucketSize:512,mapWidth:32768,mapHeight:16384},window.Tools={},window.Textures={},window.Graphics={},window.Network={},window.Input={},window.Players={},window.Mobs={},window.Particles={},window.UI={},window.Games={},window.Sound={};var a=function(n,e){Tools.updateTime(n),Tools.debugStartFrame(),game.state==Network.STATE.PLAYING?(Input.update(),Network.detectConnectivity(),Players.update(),Mobs.update(),Particles.update(),Games.update(),Sound.update()):game.state==Network.STATE.LOGIN?Tools.updateReel():Sound.update(),Graphics.update(),e||Graphics.render(),Tools.debugEndFrame()},e=function(){var e=performance.now()-game.time;450<e&&!game.focus&&a(e/16.666,!0)};window.RunGame=function(){game.state=Network.STATE.LOGIN,Tools.startupMsg(),Tools.loadSettings(),Tools.detectCapabilities(),Tools.setupDebug(),Graphics.setup(),Tools.initBuckets(),Particles.setup(),UI.setup(),Input.setup(),Games.setup(),Sound.setup();var t=new PIXI.ticker.Ticker;t.add(a),t.start(),setInterval(e,500),Graphics.ticker=t}}();class Vector{constructor(n,e){this.x=n,this.y=e}add(t){this.x+=t,this.y+=t}divide(t){this.x/=t,this.y/=t}multiply(t){this.x*=t,this.y*=t}limit(t){this.divide(this.length()),this.multiply(t)}clone(){return new Vector(this.x,this.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}angle(){return Math.atan2(this.y,this.x)-Math.PI/2}ceil(t){this.x>t&&(this.x=t),this.y>t&&(this.y=t)}floor(t){this.x<t&&(this.x=t),this.y<t&&(this.y=t)}both(t){this.x=t,this.y=t}static zero(){return new Vector(0,0)}static diag(t){return new Vector(t,t)}static create(n,e){return new Vector(Math.sin(n)*e,-Math.cos(n)*e)}static createOff(a,e,t){return new Vector(a.x+Math.sin(e)*t,a.y-Math.cos(e)*t)}}function loadGameCode(){!function(){var d={},p=0,h={started:!1,startX:200,startY:-2450,pan:0,dist:100,explosion:4e3,direction:1};Tools.updateReel=function(){if(!h.started){h.pos=Vector.zero();for(var n=[3,1,2,4,5],t=[-270,-150,0,150,270],r=0,d;r<n.length;r++)Players.add({id:r+1,team:1,status:0,reel:!0,name:"",type:n[r],posX:0,posY:0,rot:0,flag:1}),(d=Players.get(r+1)).keystate.UP=!0,d._offset=t[r]}h.started=!0,2e3<h.dist?h.direction=-1:100>h.dist&&(h.direction=1),h.dist+=.5*h.direction*game.timeFactor,h.pan+=1/h.dist*game.timeFactor,h.pos.x=h.startX+Math.sin(h.pan)*h.dist,h.pos.y=h.startY-Math.cos(h.pan)*h.dist,SWAM.debug||Graphics.setCamera(h.pos.x,h.pos.y),Players.update(),Particles.update();for(var l=1,u;5>=l;l++)(u=Players.get(l)).pos.x=h.pos.x+u._offset,u.pos.y=h.pos.y+.24*(game.screenY/game.scale),null==u._prevPos?u._prevPos=u.pos.clone():u.rot=new Vector(u.pos.x-u._prevPos.x,u.pos.y-u._prevPos.y).angle()+Math.PI,u._prevPos=new Vector((19*u._prevPos.x+u.pos.x)/20,(19*u._prevPos.y+u.pos.y)/20);if(game.time>h.explosion){var p=new Vector(Tools.rand(h.pos.x-game.halfScreenX/game.scale,h.pos.x+game.halfScreenX/game.scale),Tools.rand(h.pos.y-game.halfScreenY/game.scale,h.pos.y+game.halfScreenY/game.scale));Particles.explosion(p,Tools.rand(2,2.5),Tools.randInt(4,7)),Particles.explosion(new Vector(p.x+Tools.rand(-100,100),p.y+Tools.rand(-100,100)),Tools.rand(1,1.2)),h.explosion=game.time+Tools.rand(1e3,3e3)}},Tools.wipeReel=function(){Particles.wipe(),Players.wipe()},Tools.startupMsg=function(){console.log("%c\u039BIRM\u039BSH Engine "+game.version+" starting up!","font-size: 20px;"),console.log(""),console.log("%c*** Important message ***","font-size: 16px; color: red;"),console.log("%cDo not paste any commands given by players in this console window","font-size: 14px; color: red;"),console.log("")},Tools.detectCapabilities=function(){n(),config.mobile&&!config.settings.mobileshown&&(UI.popBigMsg(1),config.settings.mobileshown=!0,Tools.setSettings({mobileshown:!0})),config.mobile&&Input.setupLogin()};var n=function(){config.mobile="ontouchstart"in document.documentElement&&void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),config.ios=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,"#forcemobile"==window.location.hash&&(config.mobile=!0),"#nomobile"==window.location.hash&&(config.mobile=!1)};Tools.loadSettings=function(){var t=o();config.storage=t,DEVELOPMENT&&console.log(t),null!=t.id&&(config.settings.id=t.id),null!=t.session&&(config.settings.session=t.session),null!=t.name&&(config.settings.name=t.name),null!=t.region&&(config.settings.region=t.region),null!=t.helpshown&&(config.settings.helpshown=t.helpshown),null!=t.mobileshown&&(config.settings.mobileshown=t.mobileshown),null!=t.flag&&(config.settings.flag=t.flag),null!=t.hidpi&&(config.settings.hidpi=t.hidpi),null!=t.sound&&(config.settings.sound=t.sound),null!=t.keybinds&&(config.settings.keybinds=t.keybinds),null!=t.mousemode&&(config.settings.mousemode=t.mousemode),r()};var r=function(){if(null==config.settings.id){var t=Tools.randomID(16);config.settings.id=t,Tools.setSettings({id:t})}null!=config.settings.name&&$("#playername").val(config.settings.name),null!=config.settings.region&&(game.playRegion=config.settings.region),null!=config.settings.flag&&(game.myFlag=config.settings.flag),null==config.settings.sound&&(config.settings.sound=!0),config.settings.mousemode&&Input.toggleMouse(!0),UI.updateSound(),config.settings.oldhidpi=config.settings.hidpi};Tools.randomID=function(n){var e=new Uint8Array(n);return window.crypto.getRandomValues(e),i(e).substr(0,n)};var i=function(a){for(var e="",i=0,o;i<a.length;i++)e+=o=1===(o=(255&a[i]).toString(16)).length?"0"+o:o;return e};Tools.setSettings=function(n){if(null!=window.localStorage){for(var e in n)config.storage[e]=n[e];try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(t){}}},Tools.removeSetting=function(t){if(null!=window.localStorage){null!=config.storage[t]&&delete config.storage[t];try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(t){}}},Tools.wipeSettings=function(){if(null!=window.localStorage){config.storage={},config.settings={};try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(t){}}};var o=function(){if(null==window.localStorage)return{};var n=null,a={};try{n=localStorage.getItem("settings")}catch(t){}if(null!=n)try{a=JSON.parse(n)}catch(t){}return a};Tools.ajaxPost=function(a,e,t){$.ajax({url:a,method:"POST",data:e,dataType:"json",timeout:1e4,success:function(n){null!=t&&t(null!=n&&1==n.result?n:null)},error:function(){null!=t&&t(null)}})},Tools.length=function(n,e){return Math.sqrt(n*n+e*e)},Tools.oscillator=function(a,e,t){return 1+Math.sin((game.time+(t||0))/e)*a},Tools.converge=function(a,e,t){return .01>Math.abs(a-e)?e:a+t*(e-a)},Tools.rand=function(n,e){return Math.random()*(e-n)+n},Tools.randCircle=function(){return Tools.rand(0,6.28318530718)},Tools.randInt=function(a,e){var t=Math.floor(Math.random()*(e+1-a)+a);return t>=e&&(t=e),t},Tools.clamp=function(a,e,t){return a<=e?e:a>=t?t:a},Tools.lerp=function(a,e,t){return t*(e-a)+a},Tools.colorLerp=function(a,e,t){0>=t&&(t=.001),1<=t&&(t=.999);var s=a>>16,r=255&a>>8,i=255&a;return 0|16777216+(s+t*((e>>16)-s)<<16)+(r+t*((255&e>>8)-r)<<8)+(i+t*((255&e)-i))},Tools.distance=function(a,e,t,n){var r=a-t,i=e-n;return Math.sqrt(r*r+i*i)},Tools.distFastCheck=function(a,e,t,n){return Math.abs(a.x-e.x)<=t&&Math.abs(a.y-e.y)<=n},Tools.distFastCheckFloat=function(a,e,t,n,r){return Math.abs(a-t)<=r&&Math.abs(e-n)<=r},Tools.updateTime=function(t){game.timeFactor=60>t?t:60,game.timeFactorUncapped=game.timeFactor,10<game.timeFactor&&(game.timeFactor=10),game.time=performance.now(),game.frames++},Tools.reducedFactor=function(){var t=(performance.now()-game.time)/16.666;return .1<Math.abs(game.jitter)&&(t+=game.jitter/16.666),t};var s={shockwave:[.1,.1,.11,.12,.12,.13,.14,.14,.15,.16,.17,.18,.2,.21,.22,.24,.26,.29,.31,.35,.38,.42,.47,.52,.58,.64,.71,.78,.84,.9,.95,.98,1,1,1,.98,.97,.94,.9,.85,.78,.7,.62,.52,.43,.34,.26,.18,.11,.05,0],explosionSmoke:[0,0,.02,.06,.13,.26,.45,.71,.91,.99,.99,.97,.94,.92,.89,.86,.83,.8,.77,.74,.71,.68,.65,.63,.6,.57,.54,.51,.48,.45,.42,.4,.37,.34,.31,.29,.26,.24,.21,.19,.16,.14,.12,.1,.08,.06,.04,.02,.01,0,0]};Tools.easing={outElastic:function(a,e){var t=1-(e||.7),n=2*a;if(0===a||1===a)return a;var r=t/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*n)*Math.sin((n-r)*(2*Math.PI)/t)+1},custom:function(a,e){var t=s[e],n=t.length,r=Math.floor(a*(n-1)),i=t[r];return r===n-1?i:Tools.lerp(i,t[r+1],a*(n-1)%1)}},Tools.setupDebug=function(){DEVELOPMENT&&config.debug.show&&(UI.show("#debug"),game.debug={last:performance.now(),ticks:0,frames:game.frames},setInterval(Tools.updateDebug,2123))},Tools.debugLine=function(n,e){return"<div class=\"line\"><span class=\"attr\">"+UI.escapeHTML(n)+"</span><span class=\"val\">"+UI.escapeHTML(e)+"</span></div>"},Tools.updateDebug=function(){var d=performance.now(),e=1e3*(game.frames-game.debug.frames)/(d-game.debug.last),t=Players.count(),n=Mobs.count(),r=Mobs.countDoodads(),i="",l=Players.getMe();null!=l&&(i=Tools.debugLine("Coords",Math.round(l.pos.x)+", "+Math.round(l.pos.y)));var s=Tools.debugLine("FPS",Math.round(e))+Tools.debugLine("Ticks",(100*(game.debug.ticks/(d-game.debug.last))).toFixed(2)+"%")+Tools.debugLine("Ping",game.ping.toFixed(2)+" ms")+Tools.debugLine("Res",game.screenX+" x "+game.screenY)+"<div class=\"spacer\"></div>"+Tools.debugLine("Players",t[0]+" / "+t[1])+Tools.debugLine("Mobs",n[0]+" / "+n[1])+Tools.debugLine("Particles",Particles.count())+Tools.debugLine("Doodads",r[0]+" / "+r[1])+"<div class=\"spacer\"></div>"+i+Tools.debugLine("Scale",game.scale.toFixed(2))+Tools.debugLine("Jitter",game.jitter.toFixed(3))+"<div class=\"close\" onclick=\"Tools.hideDebug()\">x</div>";$("#debug").html(s),game.debug.last=d,game.debug.ticks=0,game.debug.frames=game.frames},Tools.hideDebug=function(){UI.hide("#debug")},Tools.debugStartFrame=function(){DEVELOPMENT&&config.debug.show&&(game.debug.startedFrame=performance.now())},Tools.debugEndFrame=function(){DEVELOPMENT&&config.debug.show&&null!=game.debug.startedFrame&&(game.debug.ticks+=performance.now()-game.debug.startedFrame)},Tools.earningsToRank=function(t){return Math.floor(.0111*Math.pow(t,.5))+1},Tools.rankToEarnings=function(t){return Math.pow((t-1)/.0111,2)},Tools.decodeKeystate=function(n,e){n.keystate.UP=0!=(1&e),n.keystate.DOWN=0!=(2&e),n.keystate.LEFT=0!=(4&e),n.keystate.RIGHT=0!=(8&e),n.boost=0!=(16&e),n.strafe=0!=(32&e),n.stealthed=0!=(64&e),n.flagspeed=0!=(128&e)},Tools.decodeUpgrades=function(n,e){n.speedupgrade=(0==(1&e)?0:1)+(0==(2&e)?0:2)+(0==(4&e)?0:4),n.powerups.shield=0!=(8&e),n.powerups.rampage=0!=(16&e)},Tools.decodeMinimapCoords=function(n,e){return new Vector(128*n-16384+64,Tools.clamp(128*e-16384,-8192,8192)+64)},Tools.decodeSpeed=function(t){return(t-32768)/1638.4},Tools.decodeCoordX=function(t){return(t-32768)/2},Tools.decodeCoordY=function(t){return(t-32768)/4},Tools.decodeCoord24=function(t){return(t-8388608)/512},Tools.decodeAccel=function(t){return(t-32768)/32768},Tools.decodeRotation=function(t){return t/6553.6},Tools.decodeHealthnergy=function(t){return t/255},Tools.decodeRegen=function(t){return(t-32768)/1e6};var a=function(e){return Tools.clamp(Math.floor(e/d.size)+d.bucketsHalfX,0,d.bucketsMaxX)},l=function(e){return Tools.clamp(Math.floor(e/d.size)+d.bucketsHalfY,0,d.bucketsMaxY)};Tools.initBuckets=function(){d={size:config.bucketSize,halfSize:parseInt(config.bucketSize/2),bucketsMaxX:parseInt(config.mapWidth/config.bucketSize)-1,bucketsMaxY:parseInt(config.mapHeight/config.bucketSize)-1,bucketsHalfX:parseInt(config.mapWidth/config.bucketSize/2),bucketsHalfY:parseInt(config.mapHeight/config.bucketSize/2)};for(var e=0;e<=d.bucketsMaxX;e++){game.buckets.push([]);for(var i=0;i<=d.bucketsMaxY;i++)game.buckets[e].push([[]])}for(var o=0;o<config.doodads.length;o++)e=a(config.doodads[o][0]),i=l(config.doodads[o][1]),game.buckets[e][i][0].push(o)},Tools.getBucketBounds=function(e,t,n){return[Tools.clamp(Math.floor((e.x-t)/d.size)+d.bucketsHalfX,0,d.bucketsMaxX),Tools.clamp(Math.floor((e.x+t)/d.size)+d.bucketsHalfX,0,d.bucketsMaxX),Tools.clamp(Math.floor((e.y-n)/d.size)+d.bucketsHalfY,0,d.bucketsMaxY),Tools.clamp(Math.floor((e.y+n)/d.size)+d.bucketsHalfY,0,d.bucketsMaxY)]},Tools.deferUpdate=function(t){setTimeout(t,1)};var u=function(a,r){if(r instanceof Error){var t={};return Object.getOwnPropertyNames(r).forEach(function(n){t[n]=r[n]}),t}return r};Tools.handleError=function(t){5<++p||(null!=t.error&&(t.error=JSON.stringify(t.error,u)),Tools.ajaxPost("/clienterror",{type:"runtime",error:JSON.stringify(t,null,"\t\t")}))},Tools.encodeUTF8=function(a){for(var e=0,s=new Uint8Array(4*a.length),n=0,d;n!=a.length;n++)if(d=a.charCodeAt(n),128>d)s[e++]=d;else{if(2048>d)s[e++]=192|d>>6;else{if(55295<d&&56320>d){if(++n==a.length)throw"UTF-8 encode: incomplete surrogate pair";var l=a.charCodeAt(n);if(56320>l||57343<l)throw"UTF-8 encode: second char code 0x"+l.toString(16)+" at index "+n+" in surrogate pair out of range";d=65536+((1023&d)<<10)+(1023&l),s[e++]=240|d>>18,s[e++]=128|63&d>>12}else s[e++]=224|d>>12;s[e++]=128|63&d>>6}s[e++]=128|63&d}return s.subarray(0,e)},Tools.decodeUTF8=function(a){for(var e="",i=0,o;i<a.length;){if(o=a[i++],127<o){if(191<o&&224>o){if(i>=a.length)throw"UTF-8 decode: incomplete 2-byte sequence";o=(31&o)<<6|63&a[i]}else if(223<o&&240>o){if(i+1>=a.length)throw"UTF-8 decode: incomplete 3-byte sequence";o=(15&o)<<12|(63&a[i])<<6|63&a[++i]}else{if(!(239<o&&248>o))throw"UTF-8 decode: unknown multibyte start 0x"+o.toString(16)+" at index "+(i-1);if(i+2>=a.length)throw"UTF-8 decode: incomplete 4-byte sequence";o=(7&o)<<18|(63&a[i])<<12|(63&a[++i])<<6|63&a[++i]}++i}if(65535>=o)e+=String.fromCharCode(o);else{if(!(1114111>=o))throw"UTF-8 decode: code point 0x"+o.toString(16)+" exceeds UTF-16 reach";o-=65536,e+=String.fromCharCode(55296|o>>10),e+=String.fromCharCode(56320|1023&o)}}return e}}(),function(){var a={map_sea:"assets/map_sea.jpg",map_sea_mask:"assets/map_sea_mask.jpg",map_forest:"assets/map_forest.jpg",map_rock:"assets/map_rock.jpg",map_rock_mask:"assets/map_rock_mask.jpg",map_sand:"assets/map_sand.jpg",map_sand_mask:"assets/map_sand_mask.jpg",mountains:"assets/mountains.png",aircraft:"assets/aircraft.png",shadows:"assets/shadows.png",particles:"assets/particles.png",flags:"assets/flagsbig.png?4",items:"assets/items.png?2",gui:"assets/gui.png"},e={spirit:["aircraft",[4,4,512,256]],tornado:["aircraft",[524,4,256,256]],raptor:["aircraft",[788,4,256,256]],prowler:["aircraft",[1052,4,256,256]],comanche:["aircraft",[1316,4,128,256]],comanche_rotor:["aircraft",[1452,4,128,128]],mountain2:["mountains",[0,512,512,512]],mountain1:["mountains",[512,512,512,512]],mountain4:["mountains",[0,0,512,512]],mountain3:["mountains",[512,0,512,512]],crate_shadow:["shadows",[4,140,64,64]],comanche_rotor_shadow:["shadows",[76,140,64,64]],smokeshadow_8:["shadows",[148,140,32,32]],smokeshadow_7:["shadows",[188,140,32,32]],smokeshadow_6:["shadows",[228,140,32,32]],smokeshadow_5:["shadows",[268,140,32,32]],smokeshadow_4:["shadows",[308,140,32,32]],smokeshadow_3:["shadows",[348,140,32,32]],smokeshadow_2:["shadows",[388,140,32,32]],smokeshadow_15:["shadows",[428,140,32,32]],smokeshadow_14:["shadows",[468,140,32,32]],smokeshadow_13:["shadows",[508,140,32,32]],smokeshadow_12:["shadows",[548,140,32,32]],smokeshadow_11:["shadows",[588,140,32,32]],smokeshadow_10:["shadows",[628,140,32,32]],smokeshadow_1:["shadows",[668,140,32,32]],smokeshadow_16:["shadows",[708,140,32,32]],afterburner_shadow:["shadows",[748,140,32,32]],spirit_shadow:["shadows",[4,4,256,128]],tornado_shadow:["shadows",[268,4,128,128]],screenshade:["shadows",[404,4,128,128]],raptor_shadow:["shadows",[540,4,128,128]],prowler_shadow:["shadows",[676,4,128,128]],comanche_shadow:["shadows",[812,4,64,128]],missile_shadow:["shadows",[884,4,32,128]],smokeshadow_9:["shadows",[924,76,32,32]],ctf_flag_shadow:["shadows",[924,4,64,64]],flash_1:["particles",[0,128,120,120]],glowsmall:["particles",[120,128,64,64]],smoke_9:["particles",[184,128,32,32]],smoke_8:["particles",[216,128,32,32]],smoke_7:["particles",[248,128,32,32]],smoke_6:["particles",[280,128,32,32]],smoke_5:["particles",[312,128,32,32]],smoke_4:["particles",[344,128,32,32]],smoke_3:["particles",[376,128,32,32]],smoke_2:["particles",[408,128,32,32]],smoke_16:["particles",[440,128,32,32]],smoke_15:["particles",[472,128,32,32]],smoke_14:["particles",[504,128,32,32]],smoke_13:["particles",[536,128,32,32]],smoke_12:["particles",[568,128,32,32]],smoke_11:["particles",[600,128,32,32]],smoke_10:["particles",[632,128,32,32]],smoke_1:["particles",[664,128,32,32]],shockwave:["particles",[0,0,128,128]],hotsmoke_4:["particles",[128,0,120,120]],hotsmoke_3:["particles",[248,0,120,120]],hotsmoke_2:["particles",[368,0,120,120]],hotsmoke_1:["particles",[488,0,120,120]],flash_4:["particles",[608,0,120,120]],flash_3:["particles",[728,0,120,120]],spark_4:["particles",[848,120,8,8]],spark_3:["particles",[856,120,8,8]],spark_2:["particles",[864,120,8,8]],spark_1:["particles",[872,120,8,8]],flash_2:["particles",[848,0,120,120]],crate_upgrade:["items",[4,268,128,128]],crate_shield:["items",[140,268,128,128]],crate_rampage:["items",[276,268,128,128]],afterburner:["items",[412,268,128,128]],missile_fat:["items",[548,268,64,128]],missile:["items",[620,268,32,128]],doodad_field:["items",[4,4,256,256]],badge_bronze:["items",[268,140,64,64]],powerup_shield:["items",[268,4,128,128]],badge_gold:["items",[404,140,64,64]],powerup_rampage:["items",[404,4,128,128]],badge_silver:["items",[540,140,64,64]],powerup_circle:["items",[540,4,128,128]],glowdirectional:["items",[676,140,64,64]],ctf_flag_red:["items",[676,4,128,128]],glowsmall_copy:["items",[812,140,64,64]],missile_small:["items",[884,140,16,64]],levelborder:["items",[908,140,32,32]],ctf_flag_blue:["items",[812,4,128,128]],hud_shadow:["gui",[4,268,80,348]],hud_mask:["gui",[92,268,80,348]],hud:["gui",[180,268,80,348]],emote_bro:["gui",[268,548,64,64]],emote_clap:["gui",[268,476,64,64]],ui_minimap_box:["gui",[268,404,64,64]],emote_cry:["gui",[340,548,64,64]],emote_kappa:["gui",[340,476,64,64]],emote_tf:["gui",[340,404,64,64]],emote_lol:["gui",[412,548,64,64]],emote_pepe:["gui",[412,476,64,64]],ui_minimap_blue:["gui",[484,596,16,16]],ui_minimap_base_blue:["gui",[484,556,32,32]],ui_minimap_base_red:["gui",[484,516,32,32]],ui_minimap_flag_blue:["gui",[484,476,32,32]],emote_rage:["gui",[412,404,64,64]],ui_minimap_mob:["gui",[484,444,16,16]],ui_minimap_flag_red:["gui",[484,404,32,32]],ui_minimap:["gui",[4,4,512,256]],chatbubbleleft:["gui",[274,274,16,82]],chatbubblecenter:["gui",[350,274,82,82]],chatbubbleright:["gui",[438,274,16,82]],chatbubblepoint:["gui",[297,352,36,22]]},t={flag_1:["flags",[2,962,80,60]],flag_2:["flags",[2,898,80,60]],flag_3:["flags",[2,834,80,60]],flag_4:["flags",[2,770,80,60]],flag_5:["flags",[2,706,80,60]],flag_6:["flags",[2,642,80,60]],flag_7:["flags",[2,578,80,60]],flag_8:["flags",[2,514,80,60]],flag_9:["flags",[2,450,80,60]],flag_10:["flags",[2,386,80,60]],flag_11:["flags",[2,322,80,60]],flag_12:["flags",[2,258,80,60]],flag_13:["flags",[2,194,80,60]],flag_14:["flags",[2,130,80,60]],flag_15:["flags",[2,66,80,60]],flag_16:["flags",[86,962,80,60]],flag_17:["flags",[86,898,80,60]],flag_18:["flags",[86,834,80,60]],flag_19:["flags",[86,770,80,60]],flag_20:["flags",[86,706,80,60]],flag_21:["flags",[86,642,80,60]],flag_22:["flags",[86,578,80,60]],flag_23:["flags",[86,514,80,60]],flag_24:["flags",[86,450,80,60]],flag_25:["flags",[86,386,80,60]],flag_26:["flags",[86,322,80,60]],flag_27:["flags",[86,258,80,60]],flag_28:["flags",[86,194,80,60]],flag_29:["flags",[86,130,80,60]],flag_30:["flags",[170,962,80,60]],flag_31:["flags",[170,898,80,60]],flag_32:["flags",[170,834,80,60]],flag_33:["flags",[170,770,80,60]],flag_34:["flags",[170,706,80,60]],flag_35:["flags",[170,642,80,60]],flag_36:["flags",[170,578,80,60]],flag_37:["flags",[170,514,80,60]],flag_38:["flags",[170,450,80,60]],flag_39:["flags",[170,386,80,60]],flag_40:["flags",[170,322,80,60]],flag_41:["flags",[170,258,80,60]],flag_42:["flags",[170,194,80,60]],flag_43:["flags",[254,962,80,60]],flag_44:["flags",[254,898,80,60]],flag_45:["flags",[254,834,80,60]],flag_46:["flags",[254,770,80,60]],flag_47:["flags",[254,706,80,60]],flag_48:["flags",[254,642,80,60]],flag_49:["flags",[254,578,80,60]],flag_50:["flags",[254,514,80,60]],flag_51:["flags",[254,450,80,60]],flag_52:["flags",[254,386,80,60]],flag_53:["flags",[254,322,80,60]],flag_54:["flags",[338,962,80,60]],flag_55:["flags",[338,898,80,60]],flag_56:["flags",[338,834,80,60]],flag_57:["flags",[338,770,80,60]],flag_58:["flags",[338,706,80,60]],flag_59:["flags",[338,642,80,60]],flag_60:["flags",[338,578,80,60]],flag_61:["flags",[338,514,80,60]],flag_62:["flags",[338,450,80,60]],flag_63:["flags",[338,386,80,60]],flag_64:["flags",[422,962,80,60]],flag_65:["flags",[422,898,80,60]],flag_66:["flags",[422,834,80,60]],flag_67:["flags",[422,770,80,60]],flag_68:["flags",[422,706,80,60]],flag_69:["flags",[422,642,80,60]],flag_70:["flags",[422,578,80,60]],flag_71:["flags",[422,514,80,60]],flag_72:["flags",[422,450,80,60]],flag_73:["flags",[506,962,80,60]],flag_74:["flags",[506,898,80,60]],flag_75:["flags",[506,834,80,60]],flag_76:["flags",[506,770,80,60]],flag_77:["flags",[506,706,80,60]],flag_78:["flags",[506,642,80,60]],flag_79:["flags",[506,578,80,60]],flag_80:["flags",[590,770,80,60]],flag_81:["flags",[590,706,80,60]],flag_82:["flags",[590,642,80,60]],flag_83:["flags",[590,578,80,60]],flag_84:["flags",[506,514,80,60]],flag_85:["flags",[590,514,80,60]],flag_86:["flags",[506,450,80,60]],flag_87:["flags",[590,450,80,60]],flag_88:["flags",[422,386,80,60]],flag_89:["flags",[506,386,80,60]],flag_90:["flags",[590,386,80,60]],flag_91:["flags",[338,322,80,60]],flag_92:["flags",[422,322,80,60]],flag_93:["flags",[506,322,80,60]],flag_94:["flags",[590,322,80,60]],flag_95:["flags",[254,258,80,60]],flag_96:["flags",[338,258,80,60]],flag_97:["flags",[422,258,80,60]],flag_98:["flags",[506,258,80,60]],flag_99:["flags",[590,258,80,60]],flag_100:["flags",[254,194,80,60]],flag_101:["flags",[338,194,80,60]],flag_102:["flags",[422,194,80,60]],flag_103:["flags",[506,194,80,60]],flag_104:["flags",[590,194,80,60]],flag_105:["flags",[170,130,80,60]],flag_106:["flags",[254,130,80,60]],flag_107:["flags",[338,130,80,60]],flag_108:["flags",[422,130,80,60]],flag_109:["flags",[506,130,80,60]],flag_110:["flags",[590,130,80,60]],flag_111:["flags",[86,66,80,60]],flag_112:["flags",[170,66,80,60]],flag_113:["flags",[254,66,80,60]],flag_114:["flags",[338,66,80,60]],flag_115:["flags",[422,66,80,60]],flag_116:["flags",[506,66,80,60]],flag_117:["flags",[590,66,80,60]],flag_118:["flags",[2,2,80,60]],flag_119:["flags",[86,2,80,60]],flag_120:["flags",[170,2,80,60]],flag_121:["flags",[254,2,80,60]],flag_122:["flags",[338,2,80,60]],flag_123:["flags",[422,2,80,60]],flag_124:["flags",[506,2,80,60]],flag_125:["flags",[590,2,80,60]]},o={hudHealth_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2},hudHealth_mask:{texture:"hud_mask",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudHealth:{texture:"hud",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudEnergy_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2,rotation:Math.PI},hudEnergy_mask:{texture:"hud_mask",layer:"hudEnergy",pivot:[330,174],position:"screencenter",rotation:Math.PI},hudEnergy:{texture:"hud",layer:"hudEnergy",pivot:[330,174],position:"screencenter",tint:3374821},minimap:{texture:"ui_minimap",layer:"ui0",anchor:[1,1],alpha:.25},minimapBox:{texture:"ui_minimap_box",layer:"ui4",anchor:[.5,.5],alpha:.6},minimapMob:{texture:"ui_minimap_mob",layer:"ui1",anchor:[.5,.5],alpha:.5,scale:.8},minimapBlue:{texture:"ui_minimap_blue",layer:"ui1",anchor:[.5,.5],alpha:.5,scale:.8},minimapFlagBlue:{texture:"ui_minimap_flag_blue",layer:"ui3",anchor:[.5,.5],scale:.5},minimapFlagRed:{texture:"ui_minimap_flag_red",layer:"ui3",anchor:[.5,.5],scale:.5},minimapBaseBlue:{texture:"ui_minimap_base_blue",layer:"ui2",anchor:[.5,.5],scale:.5},minimapBaseRed:{texture:"ui_minimap_base_red",layer:"ui2",anchor:[.5,.5],scale:.5},thrusterShadow:{texture:"afterburner_shadow",layer:"shadows",anchor:[.5,.1]},missile:{texture:"missile",layer:"projectiles",anchor:[.5,0],scale:[.2,.15]},missileFat:{texture:"missile_fat",layer:"projectiles",anchor:[.5,0],scale:[.2,.2]},missileSmall:{texture:"missile_small",layer:"projectiles",anchor:[.5,0],scale:[.2,.2]},missileShadow:{texture:"missile_shadow",layer:"shadows",anchor:[.5,.25]},missileThruster:{texture:"afterburner",layer:"thrusters",anchor:[.5,.1],scale:[.15,.15]},thrusterGlowSmall:{texture:"glowsmall_copy",layer:"glows",anchor:[.5,.5],blend:"ADD"},smokeGlow:{texture:"glowdirectional",layer:"glows",anchor:[.5,.3],blend:"ADD"},crateShadow:{texture:"crate_shadow",layer:"shadows",anchor:[.5,.5]},crateUpgrade:{texture:"crate_upgrade",layer:"crates",anchor:[.5,.5]},crateShield:{texture:"crate_shield",layer:"crates",anchor:[.5,.5]},crateRampage:{texture:"crate_rampage",layer:"crates",anchor:[.5,.5]},powerupCircle:{texture:"powerup_circle",layer:"powerups",anchor:[.5,.5],blend:"ADD"},powerupShield:{texture:"powerup_shield",layer:"powerups",anchor:[.5,.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[.5,.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[.5,.5],blend:"ADD"},ctfFlagRed:{texture:"ctf_flag_red",layer:"flags",anchor:[15/128,119/128]},ctfFlagBlue:{texture:"ctf_flag_blue",layer:"flags",anchor:[15/128,119/128]},ctfFlagShadow:{texture:"ctf_flag_shadow",layer:"shadows",anchor:[3/32,23/32]},shipRaptor:{texture:"raptor",layer:"aircraft",anchor:[.5,.6]},shipRaptorShadow:{texture:"raptor_shadow",layer:"shadows",anchor:[.5,.57]},shipRaptorThruster:{texture:"afterburner",layer:"thrusters",anchor:[.5,.1],scale:[.25,.25]},shipSpirit:{texture:"spirit",layer:"aircraft",anchor:[.5,.5]},shipSpiritShadow:{texture:"spirit_shadow",layer:"shadows",anchor:[.5,.5]},shipSpiritThruster:{texture:"afterburner",layer:"thrusters",anchor:[.5,.1],scale:[.25,.25]},shipComanche:{texture:"comanche",layer:"aircraft",anchor:[.5,.4]},shipComancheShadow:{texture:"comanche_shadow",layer:"shadows",anchor:[.5,.43]},shipComancheRotor:{texture:"comanche_rotor",layer:"aircraft",anchor:[.5,.5],scale:[.25,.25]},shipComancheRotorShadow:{texture:"comanche_rotor_shadow",layer:"shadows",anchor:[.5,.5]},shipTornado:{texture:"tornado",layer:"aircraft",anchor:[.5,.65]},shipTornadoShadow:{texture:"tornado_shadow",layer:"shadows",anchor:[.5,.605]},shipProwler:{texture:"prowler",layer:"aircraft",anchor:[.5,.5]},shipProwlerShadow:{texture:"prowler_shadow",layer:"shadows",anchor:[.5,.5]},mountain1:{texture:"mountain1",layer:"doodads",anchor:[.5,.5]},mountain2:{texture:"mountain2",layer:"doodads",anchor:[.5,.5]},mountain3:{texture:"mountain3",layer:"doodads",anchor:[.5,.5]},mountain4:{texture:"mountain4",layer:"doodads",anchor:[.5,.5]},doodadField:{texture:"doodad_field",layer:"fields",anchor:[.5,.5]}},d={};SWAM&&SWAM.injectTextures(a,e,t,o,d),Textures.load=function(){for(var n in a)d[n]=new PIXI.Texture.fromImage(a[n]);var r;for(var i in e)r=e[i],d[i]=new PIXI.Texture(d[r[0]].baseTexture,new PIXI.Rectangle(r[1][0],r[1][1],r[1][2],r[1][3]));for(var i in t)r=t[i],d[i]=new PIXI.Texture(d[r[0]].baseTexture,new PIXI.Rectangle(r[1][0],r[1][1],r[1][2],r[1][3]))},Textures.get=function(t){return d[t]},Textures.getNamed=function(t){return d[o[t].texture]},Textures.init=function(a,e){var t=JSON.parse(JSON.stringify(o[a]));if("screencenter"===t.position&&(t.position=[game.halfScreenX,game.halfScreenY]),e)for(var n in e)t[n]=e[n];return Graphics.initSprite(t.texture,game.graphics.layers[t.layer],t)},Textures.sprite=function(t){return new PIXI.Sprite(d[t])},Textures.tile=function(a,e,t){return new PIXI.extras.TilingSprite(d[a],e,t)}}(),window.loadGraphics_Default=function(){var m={position:Vector.zero(),center:Vector.zero(),lastOverdraw:Vector.zero(),lastOverdrawTime:0,shake:0},y={},_={},b={},n;Graphics.setup=function(){x(window.innerWidth,window.innerHeight),t(),Textures.load(),r(),l(),i(),o(),Mobs.setupDoodads(),UI.setupMinimap(),UI.setupHUD()};var t=function(){PIXI.utils.skipHello(),PIXI.settings.PRECISION_FRAGMENT=PIXI.PRECISION.HIGH;var e={autoResize:!0,clearBeforeRender:!1,preserveDrawingBuffer:!0};config.settings.hidpi&&(e.resolution=2);try{n=new PIXI.WebGLRenderer(game.screenX,game.screenY,e),Graphics.renderer=n}catch(t){return void UI.popBigMsg(2)}document.body.appendChild(n.view)},r=function(){for(var a of["game","ui0","ui1","ui2","ui3","ui4","hudHealth","hudEnergy","flags","doodads","map","sea","objects","groundobjects","fields","shadows","powerups","crates","aircraft","aircraftme","glows","playernames","bubbles","thrusters","projectiles","smoke","explosions"])b[a]=new PIXI.Container;for(var e of["smoke","crates","thrusters","projectiles","aircraft","aircraftme","glows","explosions","powerups","playernames","flags","bubbles"])b.objects.addChild(b[e]);for(var t of["fields"])b.groundobjects.addChild(b[t]);if(game.graphics.layers=b,game.graphics.gui=_,config.debug.collisions){for(var n=new PIXI.Graphics,r=0;r<config.walls.length;r++)n.beginFill(16777215,.2),n.drawCircle(config.walls[r][0],config.walls[r][1],config.walls[r][2]),n.endFill();b.objects.addChild(n)}},i=function(){y.render=PIXI.RenderTexture.create(game.screenX+config.overdraw,game.screenY+config.overdraw,void 0,config.settings.hidpi?2:void 0),y.renderSprite=new PIXI.Sprite(y.render),y.shadows=PIXI.RenderTexture.create(game.shadowX,game.shadowY,void 0,config.settings.hidpi?2:void 0),y.shadowsSprite=new PIXI.Sprite(y.shadows),y.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),y.shadowsSprite.blendMode=PIXI.BLEND_MODES.MULTIPLY,y.shadowsSprite.alpha=.4,b.game.addChild(y.renderSprite),b.game.addChild(b.groundobjects),b.game.addChild(y.shadowsSprite),y.shade=Textures.sprite("screenshade"),y.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale),y.shade.alpha=.825,y.shade.anchor.set(.5,.5),b.shadows.addChild(y.shade),b.game.addChild(b.objects),b.game.addChild(b.ui0),b.game.addChild(b.ui1),b.game.addChild(b.ui2),b.game.addChild(b.ui3),b.game.addChild(b.ui4),_.hudTextureEnergy=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),_.hudSpriteEnergy=new PIXI.Sprite(_.hudTextureEnergy),_.hudSpriteEnergy.pivot.set(-250,174),_.hudTextureHealth=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),_.hudSpriteHealth=new PIXI.Sprite(_.hudTextureHealth),_.hudSpriteHealth.pivot.set(330,174),b.game.addChild(_.hudSpriteEnergy),b.game.addChild(_.hudSpriteHealth)};Graphics.resizeRenderer=function(e,t){var r=e+config.overdraw,i=t+config.overdraw;x(e,t),l(),n.resize(e,t),y.render.resize(r,i),y.shadows.resize(e,t),y.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),y.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale);for(var o of["sea","forest","sand","rock"])y[o].width=r,y[o].height=i;UI.resizeMinimap(),UI.resizeHUD(),u(),v(),Graphics.setCamera(m.center.x,m.center.y),game.state==Network.STATE.PLAYING&&Network.resizeHorizon()},Graphics.toggleHiDPI=function(){config.settings.hidpi=1!=config.settings.hidpi,config.settings.hidpi?Tools.setSettings({hidpi:!0}):Tools.removeSetting("hidpi"),UI.updateMainMenuSettings(),1==config.settings.oldhidpi==config.settings.hidpi?UI.showMessage("alert","",1e3):UI.showMessage("alert","Reload game to apply HiDPI settings<br><span class=\"button\" onclick=\"Games.redirRoot()\">RELOAD</span>",1e4)};var x=function(n,e){game.screenX=n,game.screenY=e,game.halfScreenX=n/2,game.halfScreenY=e/2,game.shadowX=Math.floor(game.screenX/config.shadowScaling),game.shadowY=Math.floor(game.screenY/config.shadowScaling)},l=function(){game.scale=(game.screenX+game.screenY)/config.scalingFactor,b.groundobjects.scale.set(game.scale),b.objects.scale.set(game.scale),b.shadows.scale.set(game.scale),b.doodads.scale.set(game.scale),b.bubbles.scale.set(1/game.scale),a()},a=function(){if(config.mobile){var t=game.screenX>game.screenY?"landscape":"portrait";config.phone=599>=game.screenX&&"portrait"==t||599>=game.screenY&&"landscape"==t,config.tablet=600<=game.screenX&&1024>=game.screenX&&"portrait"==t||600<=game.screenY&&1024>=game.screenY&&1024>=game.screenX&&"landscape"==t,config.maxScoreboard=8,config.phone&&(config.minimapSize=160,config.maxScoreboard=5),config.tablet&&(config.maxScoreboard=7),config.minimapPaddingX=game.screenX/2-config.minimapSize/2}},o=function(){var e=n.width+config.overdraw,t=n.height+config.overdraw;y.sea=Textures.tile("map_sea",e,t),y.sea_mask=Textures.sprite("map_sea_mask"),y.sea_mask.scale.set(8,8),y.sea_mask.blendMode=PIXI.BLEND_MODES.MULTIPLY,y.sea_mask.alpha=.5,y.forest=Textures.tile("map_forest",e,t),y.sand=Textures.tile("map_sand",e,t),y.sand_mask=Textures.sprite("map_sand_mask"),y.sand_mask.scale.set(8,8),y.sand.mask=y.sand_mask,y.rock=Textures.tile("map_rock",e,t),y.rock_mask=Textures.sprite("map_rock_mask"),y.rock_mask.scale.set(8,8),y.rock.mask=y.rock_mask,b.sea.addChild(y.sea),b.sea.addChild(y.sea_mask);for(var a of["forest","sand","sand_mask","rock","rock_mask"])b.map.addChild(y[a]);b.map.addChild(b.doodads),s(),u()},u=function(){var t;for(t of["sea","forest","sand","rock"])y[t].tileScale.set(game.scale,game.scale);for(t of["sea","sand","rock"])y[t+"_mask"].scale.set(8*game.scale,8*game.scale)},v=function(){y.polygons&&(y.polygons.scale.x=game.scale,y.polygons.scale.y=game.scale)},s=function(){$.getJSON("assets/map.json",function(n){y.polygons=new PIXI.Graphics,y.polygons.beginFill();var e=0,i=0,p=0,f,g,m,_,x,T,E;for(T=0;T<n.length;T++)for(m=0,E=0;E<n[T].length;E++){for(_=[],x=0;x<n[T][E].length;x+=2)f=n[T][E][x]+i,g=n[T][E][x+1]+p,_.push(parseFloat(f),-parseFloat(g)),i=f,p=g,e++;y.polygons.drawPolygon(_),0!=m&&y.polygons.addHole(),m++}y.polygons.endFill(),v(),b.map.addChild(y.polygons),b.map.mask=y.polygons})};Graphics.initSprite=function(a,e,t){var n=Textures.sprite(a);return t.position&&n.position.set(t.position[0],t.position[1]),t.anchor&&n.anchor.set(t.anchor[0],t.anchor[1]),t.pivot&&n.pivot.set(t.pivot[0],t.pivot[1]),t.scale&&(Array.isArray(t.scale)?n.scale.set(t.scale[0],t.scale[1]):n.scale.set(t.scale)),t.rotation&&(n.rotation=t.rotation),t.alpha&&(n.alpha=t.alpha),t.blend&&(n.blendMode=PIXI.BLEND_MODES[t.blend]),t.tint&&(n.tint=t.tint),t.mask&&(n.mask=t.mask),t.visible&&(n.visible=t.visible),e.addChild(n),n},Graphics.transform=function(a,e,t,n,r,i,o){a.position.set(e,t),null==i?null!=r&&a.scale.set(r):a.scale.set(r,i),null!=n&&(a.rotation=n),null!=o&&(a.alpha=o)},Graphics.update=function(){y.shade.position.set(m.center.x/config.shadowScaling,m.center.y/config.shadowScaling),y.renderSprite.position.set(game.scale*(-m.position.x+m.lastOverdraw.x)-config.overdraw/2,game.scale*(-m.position.y+m.lastOverdraw.y)-config.overdraw/2),b.objects.position.set(-m.position.x*game.scale,-m.position.y*game.scale),b.groundobjects.position.set(-m.position.x*game.scale,-m.position.y*game.scale),b.doodads.position.set(-m.position.x*game.scale+config.overdraw/2,-m.position.y*game.scale+config.overdraw/2),b.shadows.position.set(-m.position.x*(game.scale/config.shadowScaling),-m.position.y*(game.scale/config.shadowScaling)),_.minimap_box.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-m.center.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-m.center.y)/16384)),config.overdrawOptimize?(Math.abs(m.position.x-m.lastOverdraw.x)>config.overdraw/2/game.scale||Math.abs(m.position.y-m.lastOverdraw.y)>config.overdraw/2/game.scale||2e3<game.time-m.lastOverdrawTime)&&d():d()},Graphics.setCamera=function(t,a){var d=0,l=0;.5<m.shake&&(d=Tools.rand(-m.shake,m.shake),l=Tools.rand(-m.shake,m.shake),m.shake*=1-.06*game.timeFactor);var u=game.halfScreenX/game.scale,o=game.halfScreenY/game.scale;t=Tools.clamp(t,-16384+u,16384-u),a=Tools.clamp(a,-8192+o,8192-o),m.position.x=d+t-game.screenX/2/game.scale,m.position.y=l+a-game.screenY/2/game.scale,m.center.x=d+t,m.center.y=l+a},Graphics.getCamera=function(){return m.center},Graphics.shakeCamera=function(t,e){var n=Tools.length(t.x-m.center.x,t.y-m.center.y),a=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2,r=Tools.clamp(1.3*(1-n/a),0,1);.1>r||(m.shake=r*e)},Graphics.shadowCoords=function(n){var e=Mobs.getClosestDoodad(n);return new Vector((n.x+config.shadowOffsetX*e)/config.shadowScaling,(n.y+config.shadowOffsetY*e)/config.shadowScaling)},Graphics.minimapMob=function(a,e,t){null!=a&&a.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-e)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-t)/16384))},Graphics.toggleFullscreen=function(){(function(){var t=document;return t.fullscreenElement?null!==t.fullscreenElement:t.mozFullScreenElement?null!==t.mozFullScreenElement:t.webkitFullscreenElement?null!==t.webkitFullscreenElement:t.msFullscreenElement?null!==t.msFullscreenElement:void 0})()?function(){var t=document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.msExitFullscreen&&t.msExitFullscreen()}():function(){var t=document.documentElement;if(t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),config.mobile&&null!=window.screen&&null!=window.screen.orientation)try{screen.orientation.lock("landscape")}catch(t){}}()},Graphics.inScreen=function(t,e){return t.x>=m.center.x-game.halfScreenX/game.scale-e&&t.x<=m.center.x+game.halfScreenX/game.scale+e&&t.y>=m.center.y-game.halfScreenY/game.scale-e&&t.y<=m.center.y+game.halfScreenY/game.scale+e};var d=function(){Mobs.updateDoodads(),m.lastOverdraw.x=m.position.x,m.lastOverdraw.y=m.position.y,y.renderSprite.position.set(-config.overdraw/2,-config.overdraw/2);var e=m.position.x-config.overdraw/game.scale/2,t=m.position.y-config.overdraw/game.scale/2,i=-e*game.scale,a=-t*game.scale,o=(-e-16384)*game.scale,s=(-t-8192)*game.scale,d;for(d of["sea","forest","sand","rock"])y[d].tilePosition.set(i,a);for(d of["sea","sand","rock"])y[d+"_mask"].position.set(o,s);null!=y.polygons&&null!=y.polygons.position&&y.polygons.position.set(-e*game.scale,-t*game.scale),m.lastOverdrawTime=game.time,n.render(b.sea,y.render),n.render(b.map,y.render)};Graphics.renderBackground=d,Graphics.render=function(){n.render(b.shadows,y.shadows,!0),n.render(b.hudEnergy,_.hudTextureEnergy,!0),n.render(b.hudHealth,_.hudTextureHealth,!0),n.render(b.game)}},window.loadGraphics_SWAM=function(){var t={position:Vector.zero(),center:Vector.zero(),lastOverdraw:Vector.zero(),lastOverdrawTime:0,shake:0},n={},a={},i={},s;Graphics.setup=function(){p(window.innerWidth,window.innerHeight),d(),Textures.load(),l(),c(),u(),f(),Mobs.setupDoodads(),UI.setupMinimap(),UI.setupHUD()};var d=function(){PIXI.utils.skipHello(),PIXI.settings.PRECISION_FRAGMENT=PIXI.PRECISION.HIGH;var e={autoResize:!0,clearBeforeRender:!1,preserveDrawingBuffer:!0};config.settings.hidpi&&(e.resolution=2);try{s=new PIXI.WebGLRenderer(game.screenX,game.screenY,e),Graphics.renderer=s}catch(t){return void UI.popBigMsg(2)}document.body.appendChild(s.view)},l=function(){for(var r of["game","ui0","ui1","ui2","ui3","ui4","hudHealth","hudEnergy","flags","doodads","map","sea","objects","groundobjects","fields","shadows","powerups","crates","aircraft","aircraftme","glows","playernames","bubbles","thrusters","projectiles","smoke","explosions"])i[r]=new PIXI.Container,i[r].layerName=r;for(var e of["smoke","crates","thrusters","projectiles","aircraft","aircraftme","glows","explosions","powerups","playernames","flags","bubbles"])i.objects.addChild(i[e]);for(var t of["fields"])i.groundobjects.addChild(i[t]);if(game.graphics.layers=i,game.graphics.gui=a,config.debug.collisions){for(var n=new PIXI.Graphics,o=0;o<config.walls.length;o++)if(n.beginFill(16777215,.2),n.drawCircle(config.walls[o][0],config.walls[o][1],config.walls[o][2]),n.endFill(),window.AutoPilot&&AutoPilot.debug){var s=AutoPilot.getGraphBoundingBox(config.walls[o][0],config.walls[o][1],config.walls[o][2]);n.beginFill(16711680,.2),n.drawRect(100*s.p1.x-16384,100*s.p1.y-8192,100*(s.p2.x-s.p1.x+1),100*(s.p2.y-s.p1.y+1)),n.endFill()}if(window.AutoPilot&&AutoPilot.debug){n.lineColor=16777215,n.lineStyle(1,16777215);for(var d=-16383;16383>=d;d+=100)n.moveTo(d,-8192),n.lineTo(d,8192);for(var l=-8192;8192>=l;l+=100)n.moveTo(-16383,l),n.lineTo(16384,l)}i.objects.addChild(n)}},u=function(){n.render=PIXI.RenderTexture.create(game.screenX+config.overdraw,game.screenY+config.overdraw,void 0,config.settings.hidpi?2:void 0),n.renderSprite=new PIXI.Sprite(n.render),n.renderSprite.layerName="renderSprite",n.shadows=PIXI.RenderTexture.create(game.shadowX,game.shadowY,void 0,config.settings.hidpi?2:void 0),n.shadowsSprite=new PIXI.Sprite(n.shadows),n.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),n.shadowsSprite.blendMode=PIXI.BLEND_MODES.MULTIPLY,n.shadowsSprite.alpha=.4,i.game.addChild(n.renderSprite),i.game.addChild(i.groundobjects),n.shade=Textures.sprite("screenshade"),n.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale),n.shade.alpha=.825,n.shade.anchor.set(.5,.5),i.shadows.addChild(n.shade),i.game.addChild(i.objects),i.game.addChild(i.ui0),i.game.addChild(i.ui1),i.game.addChild(i.ui2),i.game.addChild(i.ui3),i.game.addChild(i.ui4),a.hudTextureEnergy=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),a.hudSpriteEnergy=new PIXI.Sprite(a.hudTextureEnergy),a.hudSpriteEnergy.pivot.set(-250,174),a.hudTextureHealth=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),a.hudSpriteHealth=new PIXI.Sprite(a.hudTextureHealth),a.hudSpriteHealth.pivot.set(330,174),i.game.addChild(a.hudSpriteEnergy),i.game.addChild(a.hudSpriteHealth)};Graphics.resizeRenderer=function(e,r){var i=e+config.overdraw,o=r+config.overdraw;p(e,r),c(),s.resize(e,r),n.render.resize(i,o),n.shadows.resize(e,r),n.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),n.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale);for(var d of["sea","forest","sand","rock"])n[d].width=i,n[d].height=o;UI.resizeMinimap(),UI.resizeHUD(),g(),m(),Graphics.setCamera(t.center.x,t.center.y),game.state==Network.STATE.PLAYING&&Network.resizeHorizon()},Graphics.toggleHiDPI=function(){config.settings.hidpi=1!=config.settings.hidpi,config.settings.hidpi?Tools.setSettings({hidpi:!0}):Tools.removeSetting("hidpi"),UI.updateMainMenuSettings(),1==config.settings.oldhidpi==config.settings.hidpi?UI.showMessage("alert","",1e3):UI.showMessage("alert","Reload game to apply HiDPI settings<br><span class=\"button\" onclick=\"Games.redirRoot()\">RELOAD</span>",1e4)};var p=function(e,t){game.screenX=e,game.screenY=t,game.halfScreenX=e/2,game.halfScreenY=t/2,game.shadowX=Math.floor(game.screenX/config.shadowScaling),game.shadowY=Math.floor(game.screenY/config.shadowScaling)},c=function(){game.scale=(game.screenX+game.screenY)/config.scalingFactor,i.groundobjects.scale.set(game.scale),i.objects.scale.set(game.scale),i.shadows.scale.set(game.scale),i.doodads.scale.set(game.scale),i.bubbles.scale.set(1/game.scale),h()},h=function(){if(config.mobile){var t=game.screenX>game.screenY?"landscape":"portrait";config.phone=599>=game.screenX&&"portrait"==t||599>=game.screenY&&"landscape"==t,config.tablet=600<=game.screenX&&1024>=game.screenX&&"portrait"==t||600<=game.screenY&&1024>=game.screenY&&1024>=game.screenX&&"landscape"==t,config.maxScoreboard=8,config.phone&&(config.minimapSize=160,config.maxScoreboard=5),config.tablet&&(config.maxScoreboard=7),config.minimapPaddingX=game.screenX/2-config.minimapSize/2}},f=function(){var e=s.width+config.overdraw,t=s.height+config.overdraw;n.sea=Textures.tile("map_sea",e,t),n.forest=Textures.tile("map_forest",e,t),n.forest_mask=Textures.sprite("map_forest_mask"),n.forest_mask.scale.set(8,8),n.forest.mask=n.forest_mask,n.sand=Textures.tile("map_sand",e,t),n.sand_mask=Textures.sprite("map_sand_mask"),n.sand_mask.scale.set(8,8),n.sand.mask=n.sand_mask,n.rock=Textures.tile("map_rock",e,t),n.rock_mask=Textures.sprite("map_rock_mask"),n.rock_mask.scale.set(8,8),n.rock.mask=n.rock_mask,i.sea.addChild(n.sea);for(var a of["forest","forest_mask","sand","sand_mask","rock","rock_mask"])i.map.addChild(n[a]),n[a].layerName=a;i.map.addChild(i.doodads),g()},g=function(){var t;for(t of["sea","forest","sand","rock"])n[t].tileScale.set(game.scale,game.scale);for(t of["forest","sand","rock"])n[t+"_mask"].scale.set(8*game.scale,8*game.scale)},m=function(){try{n.polygons.scale.x=game.scale,n.polygons.scale.y=game.scale}catch(t){}};Graphics.initSprite=function(e,t,n){var a=Textures.sprite(e);return n.position&&a.position.set(n.position[0],n.position[1]),n.anchor&&a.anchor.set(n.anchor[0],n.anchor[1]),n.pivot&&a.pivot.set(n.pivot[0],n.pivot[1]),n.scale&&(Array.isArray(n.scale)?a.scale.set(n.scale[0],n.scale[1]):a.scale.set(n.scale)),n.rotation&&(a.rotation=n.rotation),n.alpha&&(a.alpha=n.alpha),n.blend&&(a.blendMode=PIXI.BLEND_MODES[n.blend]),n.tint&&(a.tint=n.tint),n.mask&&(a.mask=n.mask),n.visible&&(a.visible=n.visible),t.addChild(a),a},Graphics.transform=function(a,e,t,n,r,i,o){a.position.set(e,t),null==i?null!=r&&a.scale.set(r):a.scale.set(r,i),null!=n&&(a.rotation=n),null!=o&&(a.alpha=o)},Graphics.update=function(){let e=t.position.x,r=t.position.y,o=-e*game.scale,s=-r*game.scale,d=config.overdraw/2;n.shade.position.set(t.center.x/config.shadowScaling,t.center.y/config.shadowScaling),n.renderSprite.position.set(game.scale*(-e+t.lastOverdraw.x)-d,game.scale*(-r+t.lastOverdraw.y)-d),i.objects.position.set(o,s),i.groundobjects.position.set(o,s),i.doodads.position.set(o+d,s+d),i.shadows.position.set(-e*(game.scale/config.shadowScaling),-r*(game.scale/config.shadowScaling)),a.minimap_box.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-t.center.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-t.center.y)/16384)),window.SWAM&&SWAM.updateLayers(o,s,t),config.overdrawOptimize?(Math.abs(e-t.lastOverdraw.x)>d/game.scale||Math.abs(r-t.lastOverdraw.y)>d/game.scale||2e3<game.time-t.lastOverdrawTime)&&y():y()},Graphics.setCamera=function(e,n){var a=0,r=0;.5<t.shake&&(a=Tools.rand(-t.shake,t.shake),r=Tools.rand(-t.shake,t.shake),t.shake*=1-.06*game.timeFactor);var i=game.halfScreenX/game.scale,o=game.halfScreenY/game.scale;t.position.x=a+e-i,t.position.y=r+n-o,t.center.x=a+e,t.center.y=r+n},Graphics.getCamera=function(){return t.center},Graphics.shakeCamera=function(a,e){var n=Tools.length(a.x-t.center.x,a.y-t.center.y),r=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2,i=Tools.clamp(1.3*(1-n/r),0,1);.1>i||(t.shake=i*e)},Graphics.shadowCoords=function(n){var e=Mobs.getClosestDoodad(n);return new Vector((n.x+config.shadowOffsetX*e)/config.shadowScaling,(n.y+config.shadowOffsetY*e)/config.shadowScaling)},Graphics.minimapMob=function(a,e,t){null!=a&&a.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-e)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-t)/16384))},Graphics.toggleFullscreen=function(){(function(){var t=document;return t.fullscreenElement?null!==t.fullscreenElement:t.mozFullScreenElement?null!==t.mozFullScreenElement:t.webkitFullscreenElement?null!==t.webkitFullscreenElement:t.msFullscreenElement?null!==t.msFullscreenElement:void 0})()?function(){var t=document;t.exitFullscreen?t.exitFullscreen():t.mozCancelFullScreen?t.mozCancelFullScreen():t.webkitExitFullscreen?t.webkitExitFullscreen():t.msExitFullscreen&&t.msExitFullscreen()}():function(){var t=document.documentElement;if(t.requestFullscreen?t.requestFullscreen():t.mozRequestFullScreen?t.mozRequestFullScreen():t.webkitRequestFullscreen?t.webkitRequestFullscreen():t.msRequestFullscreen&&t.msRequestFullscreen(),config.mobile&&null!=window.screen&&null!=window.screen.orientation)try{screen.orientation.lock("landscape")}catch(t){}}()},Graphics.inScreen=function(n,e){return n.x>=t.center.x-game.halfScreenX/game.scale-e&&n.x<=t.center.x+game.halfScreenX/game.scale+e&&n.y>=t.center.y-game.halfScreenY/game.scale-e&&n.y<=t.center.y+game.halfScreenY/game.scale+e};var y=function(){Mobs.updateDoodads(),t.lastOverdraw.x=t.position.x,t.lastOverdraw.y=t.position.y,n.renderSprite.position.set(-config.overdraw/2,-config.overdraw/2);var e=t.position.x-config.overdraw/game.scale/2,a=t.position.y-config.overdraw/game.scale/2,o=-e*game.scale,d=-a*game.scale,l=(-e-16384)*game.scale,u=(-a-8192)*game.scale,p=SWAM.BackgroundFactor||1,c;for(c of["sea","forest","sand","rock"])n[c].tilePosition.set(o/p,d/p);if(SWAM&&SWAM.MoveBackgroundTiles)for(c of["forest","sand","rock"])n[c+"_mask"].position.set(l,u);t.lastOverdrawTime=game.time,s.render(i.sea,n.render),s.render(i.map,n.render)};Graphics.renderBackground=y,Graphics.render=function(){s.render(i.shadows,n.shadows,!0),s.render(i.hudEnergy,a.hudTextureEnergy,!0),s.render(i.hudHealth,a.hudTextureHealth,!0),s.render(i.game)}},!function(){var C=null,R=null,D=!1,L="",k=!1,N=null,F=-1,B=-1,U=0,Y={},G=0,j=0,X=0,H=!1,W=2e3,z=2e3;Network.sendKey=function(t,e){if(game.state==Network.STATE.PLAYING){j++;var n={c:I.KEY,seq:j,key:E[t],state:e};null!=game.spectatingID&&e&&("RIGHT"==t?Network.spectatePrev():"LEFT"==t&&Network.spectateNext()),T(n),R&&D&&T(n,!0)}},Network.sendChat=function(t){game.state==Network.STATE.PLAYING&&T({c:I.CHAT,text:t})},Network.sendWhisper=function(n,e){game.state==Network.STATE.PLAYING&&T({c:I.WHISPER,id:n,text:e})},Network.sendSay=function(t){game.state==Network.STATE.PLAYING&&T({c:I.SAY,text:t})},Network.sendTeam=function(t){game.state==Network.STATE.PLAYING&&T({c:I.TEAMCHAT,text:t})},Network.sendCommand=function(n,e){game.state==Network.STATE.PLAYING&&("flag"===n&&(game.lastFlagSet=e),T({c:I.COMMAND,com:n,data:e}))},Network.voteMute=function(t){game.state==Network.STATE.PLAYING&&T({c:I.VOTEMUTE,id:t})},Network.force=function(a){for(var e in Players.network(M.PLAYER_UPDATE,a),a.players)Players.network(M.PLAYER_UPDATE,a.players[e]);for(e in a.mobs)Mobs.network(a.mobs[e]);var r=new Vector(a.posX,a.posY);Particles.spiritShockwave(r),Sound.effectRepel(r)},Network.getScores=function(){game.state==Network.STATE.PLAYING&&T({c:I.SCOREDETAILED})},Network.resizeHorizon=function(){game.state==Network.STATE.PLAYING&&T({c:I.HORIZON,horizonX:Math.ceil(2*game.halfScreenX/game.scale),horizonY:Math.ceil(2*game.halfScreenY/game.scale)})},Network.detectConnectivity=function(){game.lagging=1300<game.timeNetwork-X},Network.shutdown=function(){null!=N&&clearInterval(N),null!=C&&C.close(),null!=R&&R.close(),D=!1,k=!1,F=-1,B=-1,U=0,Y={},G=0,j=0,X=0,H=!1,W=2e3,z=2e3},Network.receivedError=function(t){H=t},Network.spectateNext=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-1")},Network.spectatePrev=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-2")},Network.spectateForce=function(){game.state==Network.STATE.PLAYING&&(Players.amIAlive()?Network.sendCommand("spectate","-3"):Network.spectateNext())};var V=function(){game.lagging||game.state==Network.STATE.PLAYING&&(k?R&&D&&T({c:I.ACK},!0):T({c:I.ACK}),k=!k)},m=function(t){36e5<Math.abs(t-F)&&(F=t,B=performance.now(),U=0)},v=function(n){if(game.state==Network.STATE.PLAYING||n.c==M.LOGIN||n.c==M.ERROR){if((n.c==M.PLAYER_UPDATE||n.c==M.PLAYER_FIRE||n.c==M.EVENT_BOOST||n.c==M.EVENT_BOUNCE)&&n.id==game.myID||n.c==M.PING){if(n.c!=M.PING&&b(n))return;game.timeNetwork=performance.now(),X=game.timeNetwork,function(a){if(game.jitter=0,-1!=F){m(a);var e=game.timeNetwork,t=a-F-(e-B),n=t-(U=.8*U+t/5);100>Math.abs(n)&&(game.jitter=n)}}(n.clock/100)}else game.timeNetwork=performance.now(),X=game.timeNetwork,null!=n.clock&&function(t){-1!=F&&(m(t),game.jitter=t-F-(game.timeNetwork-B)-U)}(n.clock/100);switch(n.c){case M.PLAYER_UPDATE:case M.PLAYER_FIRE:case M.CHAT_SAY:case M.PLAYER_RESPAWN:case M.PLAYER_FLAG:case M.EVENT_BOOST:case M.EVENT_BOUNCE:if(Players.network(n.c,n),n.c===M.PLAYER_FIRE){for(var e=0;e<n.projectiles.length;e++)n.projectiles[e].c=M.PLAYER_FIRE,Mobs.add(n.projectiles[e],!1,n.id);0<n.projectiles.length&&Sound.missileLaunch(new Vector(n.projectiles[0].posX,n.projectiles[0].posY),n.projectiles[0].type)}break;case M.LOGIN:for(!function(t){N=setInterval(V,50),game.myID=t.id,game.myTeam=t.team,game.myToken=t.token,game.state=Network.STATE.PLAYING,game.roomName=t.room,game.gameType=t.type,game.spectatingID=null,game.myLevel=0,Games.prep(),F=t.clock/100,B=performance.now(),_()}(n),UI.loggedIn(n),e=0;e<n.players.length;e++)Players.add(n.players[e],!0);break;case M.ERROR:UI.errorHandler(n);break;case M.PLAYER_NEW:Players.add(n);break;case M.PLAYER_LEAVE:Players.destroy(n.id);break;case M.PLAYER_TYPE:Players.changeType(n);break;case M.PLAYER_HIT:Players.impact(n),200!=n.type&&Mobs.destroy(n);break;case M.PLAYER_KILL:Players.kill(n);break;case M.PLAYER_UPGRADE:UI.updateUpgrades([n.speed,n.defense,n.energy,n.missile],n.upgrades,n.type);break;case M.PLAYER_POWERUP:Players.powerup(n);break;case M.PLAYER_LEVEL:Players.updateLevel(n);break;case M.PLAYER_RETEAM:for(e=0;e<n.players.length;e++)Players.reteam(n.players[e]);break;case M.EVENT_REPEL:Network.force(n);break;case M.EVENT_LEAVEHORIZON:0==n.type?Players.leaveHorizon(n):Mobs.destroy(n);break;case M.EVENT_STEALTH:Players.stealth(n);break;case M.MOB_UPDATE:case M.MOB_UPDATE_STATIONARY:Mobs.network(n);break;case M.MOB_DESPAWN:Mobs.despawn(n);break;case M.MOB_DESPAWN_COORDS:Mobs.destroy(n);break;case M.GAME_FLAG:Games.networkFlag(n);break;case M.GAME_PLAYERSALIVE:Games.playersAlive(n.players);break;case M.SCORE_UPDATE:UI.newScore(n);break;case M.SCORE_BOARD:UI.scoreboardUpdate(n.data,n.rankings,config.maxScoreboard),Players.updateBadges(n.data);break;case M.SCORE_DETAILED:case M.SCORE_DETAILED_CTF:case M.SCORE_DETAILED_BTR:UI.updateScore(n);break;case M.PING:!function(t){setTimeout(()=>{T({c:I.PONG,num:t})},SWAM.spoofLatency?game.fakeExtraLatency:0)}(n.num);break;case M.PING_RESULT:UI.updateStats(n);break;case M.CHAT_PUBLIC:if(config.mobile)return;Players.chat(n);break;case M.CHAT_TEAM:if(config.mobile)return;Players.teamChat(n);break;case M.CHAT_WHISPER:if(config.mobile)return;Players.whisper(n);break;case M.CHAT_VOTEMUTEPASSED:if(config.mobile)return;Players.votemutePass(n);break;case M.CHAT_VOTEMUTED:return config.mobile?void 0:void UI.chatMuted();case M.SERVER_MESSAGE:UI.serverMessage(n);break;case M.SERVER_CUSTOM:y(n);break;case M.GAME_SPECTATE:Games.spectate(n.id);break;case M.GAME_FIREWALL:Games.handleFirewall(n);break;case M.COMMAND_REPLY:UI.showCommandReply(n);}}},y=function(n){try{var e=JSON.parse(n.data)}catch(t){return}1==n.type?Games.showBTRWin(e):2==n.type&&Games.showCTFWin(e)},b=function(a){var e=performance.now(),t=a.c+"_"+a.clock+"_"+a.posX+"_"+a.posY+"_"+a.rot+"_"+a.speedX+"_"+a.speedY;if(15e3<e-G){for(var n in Y)3e4<e-Y[n]&&delete Y[n];G=e}return null!=Y[t]||(Y[t]=e,!1)};Network.reconnectMessage=function(){game.reloading||UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Connection reset<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",6e5)},Network.reconnect=function(){UI.showMessage("alert","",100),Games.switchGame()},Network.setup=function(){L=DEVELOPMENT?-1==document.domain.indexOf("192.168.")?"ws://"+game.playHost+".airmash.devel:8000/"+game.playPath:"ws://"+document.domain+":8010/"+game.playPath:"wss://game-"+game.playHost+".airma.sh/"+game.playPath,R&&D&&R.close(),(C=new WebSocket(L)).binaryType="arraybuffer",C.onopen=function(){T({c:I.LOGIN,protocol:game.protocol,name:game.myName,session:config.settings.session?config.settings.session:"none",horizonX:Math.ceil(16e3/game.scale),horizonY:Math.ceil(8e3/game.scale),flag:game.myFlag})},C.onclose=function(){null!=N&&clearInterval(N),game.state!==Network.STATE.CONNECTING&&(game.state=Network.STATE.CONNECTING,!1===H&&Network.reconnectMessage())},C.onerror=function(){},C.onmessage=function(t){v(w(t.data))}};var _=function(){(R=new WebSocket(L)).binaryType="arraybuffer",R.onopen=function(){T({c:I.BACKUP,token:game.myToken},!0)},R.onclose=function(){D=!1},R.onerror=function(){},R.onmessage=function(n){var e=w(n.data);e.c===M.BACKUP&&(D=!0),e.backup=!0,v(e)}},x=function(t){var e=1,p=[],i=P[t.c],o;if(null==i)return null;for(o=0;o<i.length;o++)switch(i[o][1]){case S.text:var f=Tools.encodeUTF8(t[i[o][0]]);p.push(f),e+=1+f.length;break;case S.array:case S.arraysmall:break;case S.uint8:e+=1;break;case S.uint16:e+=2;break;case S.uint32:case S.float32:e+=4;break;case S.float64:e+=8;break;case S.boolean:e+=1;}var s=new ArrayBuffer(e),a=new DataView(s),l=0,g=1;for(a.setUint8(0,t.c,!0),o=0;o<i.length;o++)switch(i[o][1]){case S.text:var m=p[l].length;a.setUint8(g,m,!0),g+=1;for(var h=0;h<m;h++)a.setUint8(g+h,p[l][h],!0);p[l],l++,g+=m;break;case S.array:case S.arraysmall:break;case S.uint8:a.setUint8(g,t[i[o][0]],!0),g+=1;break;case S.uint16:a.setUint16(g,t[i[o][0]],!0),g+=2;break;case S.uint32:a.setUint32(g,t[i[o][0]],!0),g+=4;break;case S.float32:a.setFloat32(g,t[i[o][0]],!0),g+=4;break;case S.float64:a.setFloat64(g,t[i[o][0]],!0),g+=8;break;case S.boolean:a.setUint8(g,!1===t[i[o][0]]?0:1),g+=1;}return s},w=function(t){var e=new DataView(t),n={c:e.getUint8(0,!0)},r=1,_=A[n.c];if(null==_)return null;for(var o=0,b;o<_.length;o++)switch(b=_[o][0],_[o][1]){case S.text:case S.textbig:if(_[o][1]==S.text){var x=e.getUint8(r,!0);r+=1}else x=e.getUint16(r,!0),r+=2;for(var T=new Uint8Array(x),E=0;E<x;E++)T[E]=e.getUint8(r+E,!0);var w=Tools.decodeUTF8(T);n[b]=w,r+=x;break;case S.array:case S.arraysmall:if(_[o][1]==S.arraysmall){var C=e.getUint8(r,!0);r+=1}else C=e.getUint16(r,!0),r+=2;n[b]=[];for(var M=_[o][2],p=0;p<C;p++){for(var P={},g=0,I;g<M.length;g++)switch(I=M[g][0],M[g][1]){case S.text:case S.textbig:for(M[g][1]==S.text?(x=e.getUint8(r,!0),r+=1):(x=e.getUint16(r,!0),r+=2),T=new Uint8Array(x),E=0;E<x;E++)T[E]=e.getUint8(r+E,!0);w=Tools.decodeUTF8(T),P[I]=w,r+=x;break;case S.uint8:P[I]=e.getUint8(r,!0),r+=1;break;case S.uint16:P[I]=e.getUint16(r,!0),r+=2;break;case S.uint24:var R=256*e.getUint16(r,!0);r+=2,n[I]=R+e.getUint8(r,!0),r+=1;break;case S.uint32:P[I]=e.getUint32(r,!0),r+=4;break;case S.float32:P[I]=e.getFloat32(r,!0),r+=4;break;case S.float64:P[I]=e.getFloat64(r,!0),r+=8;break;case S.boolean:P[I]=0!=e.getUint8(r,!0),r+=1;break;case S.speed:P[I]=Tools.decodeSpeed(e.getUint16(r,!0)),r+=2;break;case S.accel:P[I]=Tools.decodeAccel(e.getUint16(r,!0)),r+=2;break;case S.coordx:P[I]=Tools.decodeCoordX(e.getUint16(r,!0)),r+=2;break;case S.coordy:P[I]=Tools.decodeCoordY(e.getUint16(r,!0)),r+=2;break;case S.coord24:R=256*e.getUint16(r,!0),r+=2,n[I]=Tools.decodeCoord24(R+e.getUint8(r,!0)),r+=1;break;case S.rotation:P[I]=Tools.decodeRotation(e.getUint16(r,!0)),r+=2;break;case S.regen:P[I]=Tools.decodeRegen(e.getUint16(r,!0)),r+=2;break;case S.healthnergy:P[I]=Tools.decodeHealthnergy(e.getUint8(r,!0)),r+=1;}n[b].push(P)}break;case S.uint8:n[b]=e.getUint8(r,!0),r+=1;break;case S.uint16:n[b]=e.getUint16(r,!0),r+=2;break;case S.uint24:R=256*e.getUint16(r,!0),r+=2,n[b]=R+e.getUint8(r,!0),r+=1;break;case S.uint32:n[b]=e.getUint32(r,!0),r+=4;break;case S.float32:n[b]=e.getFloat32(r,!0),r+=4;break;case S.float64:n[b]=e.getFloat64(r,!0),r+=8;break;case S.boolean:n[b]=0!=e.getUint8(r,!0),r+=1;break;case S.speed:n[b]=Tools.decodeSpeed(e.getUint16(r,!0)),r+=2;break;case S.accel:n[b]=Tools.decodeAccel(e.getUint16(r,!0)),r+=2;break;case S.coordx:n[b]=Tools.decodeCoordX(e.getUint16(r,!0)),r+=2;break;case S.coordy:n[b]=Tools.decodeCoordY(e.getUint16(r,!0)),r+=2;break;case S.coord24:R=256*e.getUint16(r,!0),r+=2,n[b]=Tools.decodeCoord24(R+e.getUint8(r,!0)),r+=1;break;case S.rotation:n[b]=Tools.decodeRotation(e.getUint16(r,!0)),r+=2;break;case S.regen:n[b]=Tools.decodeRegen(e.getUint16(r,!0)),r+=2;break;case S.healthnergy:n[b]=Tools.decodeHealthnergy(e.getUint8(r,!0)),r+=1;break;default:return null;}return n},T=function(e,t){t?R.send(x(e)):C.send(x(e))},E={UP:1,DOWN:2,LEFT:3,RIGHT:4,FIRE:5,SPECIAL:6},S={text:1,textbig:2,array:3,arraysmall:4,uint8:5,uint16:6,uint24:7,uint32:8,float32:9,float64:10,boolean:11,speed:12,accel:13,coordx:14,coordy:15,coord24:16,rotation:17,healthnergy:18,regen:19},I={LOGIN:0,BACKUP:1,HORIZON:2,ACK:5,PONG:6,KEY:10,COMMAND:11,SCOREDETAILED:12,CHAT:20,WHISPER:21,SAY:22,TEAMCHAT:23,VOTEMUTE:24,LOCALPING:255},P={[I.LOGIN]:[["protocol",S.uint8],["name",S.text],["session",S.text],["horizonX",S.uint16],["horizonY",S.uint16],["flag",S.text]],[I.BACKUP]:[["token",S.text]],[I.HORIZON]:[["horizonX",S.uint16],["horizonY",S.uint16]],[I.ACK]:[],[I.PONG]:[["num",S.uint32]],[I.KEY]:[["seq",S.uint32],["key",S.uint8],["state",S.boolean]],[I.COMMAND]:[["com",S.text],["data",S.text]],[I.SCOREDETAILED]:[],[I.CHAT]:[["text",S.text]],[I.WHISPER]:[["id",S.uint16],["text",S.text]],[I.SAY]:[["text",S.text]],[I.TEAMCHAT]:[["text",S.text]],[I.VOTEMUTE]:[["id",S.uint16]],[I.LOCALPING]:[["auth",S.uint32]]},M={LOGIN:0,BACKUP:1,PING:5,PING_RESULT:6,ACK:7,ERROR:8,COMMAND_REPLY:9,PLAYER_NEW:10,PLAYER_LEAVE:11,PLAYER_UPDATE:12,PLAYER_FIRE:13,PLAYER_HIT:14,PLAYER_RESPAWN:15,PLAYER_FLAG:16,PLAYER_KILL:17,PLAYER_UPGRADE:18,PLAYER_TYPE:19,PLAYER_POWERUP:20,PLAYER_LEVEL:21,PLAYER_RETEAM:22,GAME_FLAG:30,GAME_SPECTATE:31,GAME_PLAYERSALIVE:32,GAME_FIREWALL:33,EVENT_REPEL:40,EVENT_BOOST:41,EVENT_BOUNCE:42,EVENT_STEALTH:43,EVENT_LEAVEHORIZON:44,MOB_UPDATE:60,MOB_UPDATE_STATIONARY:61,MOB_DESPAWN:62,MOB_DESPAWN_COORDS:63,CHAT_PUBLIC:70,CHAT_TEAM:71,CHAT_SAY:72,CHAT_WHISPER:73,CHAT_VOTEMUTEPASSED:78,CHAT_VOTEMUTED:79,SCORE_UPDATE:80,SCORE_BOARD:81,SCORE_DETAILED:82,SCORE_DETAILED_CTF:83,SCORE_DETAILED_BTR:84,SERVER_MESSAGE:90,SERVER_CUSTOM:91},A={[M.LOGIN]:[["success",S.boolean],["id",S.uint16],["team",S.uint16],["clock",S.uint32],["token",S.text],["type",S.uint8],["room",S.text],["players",S.array,[["id",S.uint16],["status",S.uint8],["level",S.uint8],["name",S.text],["type",S.uint8],["team",S.uint16],["posX",S.coordx],["posY",S.coordy],["rot",S.rotation],["flag",S.uint16],["upgrades",S.uint8]]]],[M.BACKUP]:[],[M.PING]:[["clock",S.uint32],["num",S.uint32]],[M.PING_RESULT]:[["ping",S.uint16],["playerstotal",S.uint32],["playersgame",S.uint32]],[M.ACK]:[],[M.ERROR]:[["error",S.uint8]],[M.COMMAND_REPLY]:[["type",S.uint8],["text",S.textbig]],[M.PLAYER_NEW]:[["id",S.uint16],["status",S.uint8],["name",S.text],["type",S.uint8],["team",S.uint16],["posX",S.coordx],["posY",S.coordy],["rot",S.rotation],["flag",S.uint16],["upgrades",S.uint8]],[M.PLAYER_LEAVE]:[["id",S.uint16]],[M.PLAYER_UPDATE]:[["clock",S.uint32],["id",S.uint16],["keystate",S.uint8],["upgrades",S.uint8],["posX",S.coord24],["posY",S.coord24],["rot",S.rotation],["speedX",S.speed],["speedY",S.speed]],[M.PLAYER_FIRE]:[["clock",S.uint32],["id",S.uint16],["energy",S.healthnergy],["energyRegen",S.regen],["projectiles",S.arraysmall,[["id",S.uint16],["type",S.uint8],["posX",S.coordx],["posY",S.coordy],["speedX",S.speed],["speedY",S.speed],["accelX",S.accel],["accelY",S.accel],["maxSpeed",S.speed]]]],[M.PLAYER_SAY]:[["id",S.uint16],["text",S.text]],[M.PLAYER_RESPAWN]:[["id",S.uint16],["posX",S.coord24],["posY",S.coord24],["rot",S.rotation],["upgrades",S.uint8]],[M.PLAYER_FLAG]:[["id",S.uint16],["flag",S.uint16]],[M.PLAYER_HIT]:[["id",S.uint16],["type",S.uint8],["posX",S.coordx],["posY",S.coordy],["owner",S.uint16],["players",S.arraysmall,[["id",S.uint16],["health",S.healthnergy],["healthRegen",S.regen]]]],[M.PLAYER_KILL]:[["id",S.uint16],["killer",S.uint16],["posX",S.coordx],["posY",S.coordy]],[M.PLAYER_UPGRADE]:[["upgrades",S.uint16],["type",S.uint8],["speed",S.uint8],["defense",S.uint8],["energy",S.uint8],["missile",S.uint8]],[M.PLAYER_TYPE]:[["id",S.uint16],["type",S.uint8]],[M.PLAYER_POWERUP]:[["type",S.uint8],["duration",S.uint32]],[M.PLAYER_LEVEL]:[["id",S.uint16],["type",S.uint8],["level",S.uint8]],[M.PLAYER_RETEAM]:[["players",S.array,[["id",S.uint16],["team",S.uint16]]]],[M.GAME_FLAG]:[["type",S.uint8],["flag",S.uint8],["id",S.uint16],["posX",S.coord24],["posY",S.coord24],["blueteam",S.uint8],["redteam",S.uint8]],[M.GAME_SPECTATE]:[["id",S.uint16]],[M.GAME_PLAYERSALIVE]:[["players",S.uint16]],[M.GAME_FIREWALL]:[["type",S.uint8],["status",S.uint8],["posX",S.coordx],["posY",S.coordy],["radius",S.float32],["speed",S.float32]],[M.EVENT_REPEL]:[["clock",S.uint32],["id",S.uint16],["posX",S.coordx],["posY",S.coordy],["rot",S.rotation],["speedX",S.speed],["speedY",S.speed],["energy",S.healthnergy],["energyRegen",S.regen],["players",S.arraysmall,[["id",S.uint16],["keystate",S.uint8],["posX",S.coordx],["posY",S.coordy],["rot",S.rotation],["speedX",S.speed],["speedY",S.speed],["energy",S.healthnergy],["energyRegen",S.regen],["playerHealth",S.healthnergy],["playerHealthRegen",S.regen]]],["mobs",S.arraysmall,[["id",S.uint16],["type",S.uint8],["posX",S.coordx],["posY",S.coordy],["speedX",S.speed],["speedY",S.speed],["accelX",S.accel],["accelY",S.accel],["maxSpeed",S.speed]]]],[M.EVENT_BOOST]:[["clock",S.uint32],["id",S.uint16],["boost",S.boolean],["posX",S.coord24],["posY",S.coord24],["rot",S.rotation],["speedX",S.speed],["speedY",S.speed],["energy",S.healthnergy],["energyRegen",S.regen]],[M.EVENT_BOUNCE]:[["clock",S.uint32],["id",S.uint16],["keystate",S.uint8],["posX",S.coord24],["posY",S.coord24],["rot",S.rotation],["speedX",S.speed],["speedY",S.speed]],[M.EVENT_STEALTH]:[["id",S.uint16],["state",S.boolean],["energy",S.healthnergy],["energyRegen",S.regen]],[M.EVENT_LEAVEHORIZON]:[["type",S.uint8],["id",S.uint16]],[M.MOB_UPDATE]:[["clock",S.uint32],["id",S.uint16],["type",S.uint8],["posX",S.coordx],["posY",S.coordy],["speedX",S.speed],["speedY",S.speed],["accelX",S.accel],["accelY",S.accel],["maxSpeed",S.speed]],[M.MOB_UPDATE_STATIONARY]:[["id",S.uint16],["type",S.uint8],["posX",S.float32],["posY",S.float32]],[M.MOB_DESPAWN]:[["id",S.uint16],["type",S.uint8]],[M.MOB_DESPAWN_COORDS]:[["id",S.uint16],["type",S.uint8],["posX",S.coordx],["posY",S.coordy]],[M.SCORE_UPDATE]:[["id",S.uint16],["score",S.uint32],["earnings",S.uint32],["upgrades",S.uint16],["totalkills",S.uint32],["totaldeaths",S.uint32]],[M.SCORE_BOARD]:[["data",S.array,[["id",S.uint16],["score",S.uint32],["level",S.uint8]]],["rankings",S.array,[["id",S.uint16],["x",S.uint8],["y",S.uint8]]]],[M.SCORE_DETAILED]:[["scores",S.array,[["id",S.uint16],["level",S.uint8],["score",S.uint32],["kills",S.uint16],["deaths",S.uint16],["damage",S.float32],["ping",S.uint16]]]],[M.SCORE_DETAILED_CTF]:[["scores",S.array,[["id",S.uint16],["level",S.uint8],["captures",S.uint16],["score",S.uint32],["kills",S.uint16],["deaths",S.uint16],["damage",S.float32],["ping",S.uint16]]]],[M.SCORE_DETAILED_BTR]:[["scores",S.array,[["id",S.uint16],["level",S.uint8],["alive",S.boolean],["wins",S.uint16],["score",S.uint32],["kills",S.uint16],["deaths",S.uint16],["damage",S.float32],["ping",S.uint16]]]],[M.CHAT_TEAM]:[["id",S.uint16],["text",S.text]],[M.CHAT_PUBLIC]:[["id",S.uint16],["text",S.text]],[M.CHAT_SAY]:[["id",S.uint16],["text",S.text]],[M.CHAT_WHISPER]:[["from",S.uint16],["to",S.uint16],["text",S.text]],[M.CHAT_VOTEMUTEPASSED]:[["id",S.uint16]],[M.CHAT_VOTEMUTED]:[],[M.SERVER_MESSAGE]:[["type",S.uint8],["duration",S.uint32],["text",S.textbig]],[M.SERVER_CUSTOM]:[["type",S.uint8],["data",S.textbig]]};Network.KEYPACKET=E,Network.KEYLOOKUP={1:"UP",2:"DOWN",3:"LEFT",4:"RIGHT",5:"FIRE",6:"SPECIAL"},Network.CLIENTPACKET=I,Network.SERVERPACKET=M,Network.STATE={LOGIN:1,CONNECTING:2,PLAYING:3}}(),function(){var D={},e={},t={},n=null,L=0,k=2*Math.PI,o=null,N=!1,F={},B=!1,U=null,Y=0,G={LEFT:["LEFT","A"],RIGHT:["RIGHT","D"],UP:["UP","W"],DOWN:["DOWN","S"],STRAFELEFT:["Q"],STRAFERIGHT:["E"],FIRE:["SPACE"],SPECIAL:["CTRL","SHIFT"],SHOWSCORE:["TAB"],MAINMENU:["F1"],SHOWGAMES:["F2"],FULLSCREEN:["F"],MINIMIZECHAT:["PGDOWN"],MAXIMIZECHAT:["PGUP"],SAY:["GRAVE"],TEAM:["T"],REPLY:["R"],SPECTATE:["V"],UPGRADE1:["1"],UPGRADE2:["2"],UPGRADE3:["3"],UPGRADE4:["4"],SOUND:["G"],HELP:["H"],INVITE:["I"],MOUSEMODE:["M"]},j={},X={LEFT:!0,RIGHT:!0,UP:!0,DOWN:!0,FIRE:!0,SPECIAL:!0,STRAFELEFT:!0,STRAFERIGHT:!0},f={},H={MAINMENU:!0,FULLSCREEN:!0,INVITE:!0,SOUND:!0,SHOWSCORE:!0,SHOWGAMES:!0,HELP:!0},m=[["Forward","UP"],["Backward","DOWN"],["Turn Left","LEFT"],["Turn Right","RIGHT"],["Fire","FIRE"],["Special","SPECIAL"],["Strafe Left","STRAFELEFT"],["Strafe Right","STRAFERIGHT"],[""],["Spectate","SPECTATE"],["Upgrade Speed","UPGRADE1"],["Upgrade Defense","UPGRADE2"],["Upgrade Energy","UPGRADE3"],["Upgrade Missiles","UPGRADE4"],["Scoreboard","SHOWSCORE"],["Main Menu","MAINMENU"],["Show Games","SHOWGAMES"],["Fullscreen","FULLSCREEN"],["Maximize Chat","MAXIMIZECHAT"],["Minimize Chat","MINIMIZECHAT"],[""],["In-game Say","SAY"],["Team Chat","TEAM"],["Reply","REPLY"],["Toggle Sound","SOUND"],["Help","HELP"],["Invite Friends","INVITE"],["Mouse Mode","MOUSEMODE"]],v={},y={BACKSPACE:8,TAB:9,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS:20,SPACE:32,PGUP:33,PGDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,WINDOWL:91,WINDOWR:92,SELECT:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,"*":106,"+":107,"-":109,DECIMAL:110,"/":111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL:145,":":186,"=":187,",":188,"-":189,".":190,"/":191,GRAVE:192,"[":219,"\\":220,"]":221,QUOTE:222},b=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"],_=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"];Input.setup=function(){for(var t in y)v[y[t]]=t;j=JSON.parse(JSON.stringify(G)),S(),P(!0),$(window).on("keydown",x),$(window).on("keyup",w),$(window).on("gamepadconnected",function(t){UI.showMessage("alert","<span class=\"info\">GAMEPAD CONNECTED</span>"+UI.escapeHTML(t.originalEvent.gamepad.id),3e3),N=!0,E()}),$(window).on("gamepaddisconnected",function(t){UI.showMessage("alert","<span class=\"info\">GAMEPAD DISCONNECTED</span>"+UI.escapeHTML(t.originalEvent.gamepad.id),3e3),N=!1,E()})};var x=function(n){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var a=n.which;if(72!=a&&UI.hideHelp(),null!=U&&I(a))n.preventDefault();else{var r=Input.getBind(a);if(!T(a))return null==X[r]?(t[a]||(t[a]=!0,UI.controlKey(a,r,!0)),n.preventDefault(),!1):(D[r]||(D[r]=!0,O(r)),e[a]||(e[a]=!0),n.preventDefault(),!1)}}},w=function(n){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var a=n.which,r=Input.getBind(a);if(null==X[r]&&t[a]&&(t[a]=!1),!T(a))return D[r]&&(D[r]=!1,C(r)),e[a]&&(e[a]=!1),n.preventDefault(),!1}},T=function(t){return!!UI.chatBoxOpen()&&9!=t&&27!=t&&13!=t&&38!=t&&40!=t&&37!=t&&39!=t&&112!=t&&113!=t&&114!=t&&115!=t&&116!=t&&117!=t&&118!=t&&119!=t&&120!=t&&121!=t&&122!=t&&123!=t},E=function(){F={forward:!0,left:!1,right:!1,up:!1,down:!1,fire:!1,special:!1,angle:0,force:0}};Input.toggleKeybinds=function(){B?Input.closeKeybinds():Input.openKeybinds()},Input.getBind=function(n){var e=f[n];return null==e?null:e},Input.bindKey=function(a,e,t){null==U&&(U=e,Y=t,$(a.target).html("press key"))},Input.closeBind=function(){null!=U&&(P(),U=null)},Input.resetBinds=function(){G=JSON.parse(JSON.stringify(j)),Tools.removeSetting("keybinds"),U=null,P()};var S=function(){if(null!=config.settings.keybinds)for(var t in config.settings.keybinds)G[t]=JSON.parse(JSON.stringify(config.settings.keybinds[t]))},I=function(a){var e=v[a];if(27==a&&(e=""),null!=e){for(var r in G)G[r][0]==e&&(G[r][0]=""),1<G[r].length&&G[r][1]==e&&(G[r][1]="");for(r in G[U][Y]=e,G)1<G[r].length&&""==G[r][0]&&""!=G[r][1]&&(G[r]=[G[r][1]]),2==G[r].length&&""===G[r][1]&&G[r].splice(-1,1);return P(),function(){var a={},e="";for(var r in G)null!=j[r]&&(e=JSON.stringify(G[r]))!==JSON.stringify(j[r])&&(a[r]=JSON.parse(e));0<Object.keys(a).length?Tools.setSettings({keybinds:a}):Tools.removeSetting("keybinds")}(),U=null,!0}return!1},P=function(d){var e="",l="",u="",p=null;e+="<div class=\"left-binds\">";for(var c=0;c<m.length;c++)null!=m[c][0]&&(""==m[c][0]?e+="<div class=\"item empty\"></div>":(null==(p=G[m[c][1]])?(l="&nbsp;",u="&nbsp;"):(""==(l=p[0])&&(l="&nbsp;"),""==(u=1==p.length?"":p[1])&&(u="&nbsp;")),e+="<div class=\"item\"><div class=\"name\">"+m[c][0]+"</div><div class=\"bind"+("&nbsp;"==l?" blank":"")+"\" onclick=\"Input.bindKey(event,'"+m[c][1]+"',0)\">"+l+"</div><div class=\"bind"+("&nbsp;"==u?" blank":"")+"\" onclick=\"Input.bindKey(event,'"+m[c][1]+"',1)\">"+u+"</div></div>",13==c&&(e+="</div><div class=\"right-binds\">")));e+="</div>",null==d&&$("#keybinds-list").html(e),f={},c=0;var h=0;for(var g in G){for(c=0;c<G[g].length;c++)null!=(h=y[G[g][c]])&&(f[h]=g);null!=H[g]&&$("#keybind-"+g.toLowerCase()).html(""==G[g]?"&nbsp;":"("+G[g]+")")}};Input.openKeybinds=function(){config.mobile||B||(UI.closeAllPanels("keybinds"),P(),UI.showPanel("#keybinds"),B=!0)},Input.closeKeybinds=function(){B&&(UI.hidePanel("#keybinds",B),B=!1,U=null)},Input.update=function(){if(N&&null!=navigator.getGamepads){var a=navigator.getGamepads();if(null!=a&&null!=a.length&&0!=a.length&&null!=a[0]){var e=a[0];if(!(16>e.buttons.length)){var t=e.buttons[12].pressed,n=e.buttons[13].pressed,r=e.buttons[15].pressed,i=e.buttons[14].pressed,o=e.buttons[0].pressed||e.buttons[2].pressed,s=e.buttons[1].pressed||e.buttons[3].pressed;F.up!=t&&(M("UP",t),F.up=t),F.down!=n&&(M("DOWN",n),F.down=n),F.right!=r&&(M("RIGHT",r),F.right=r),F.left!=i&&(M("LEFT",i),F.left=i),F.fire!=o&&(M("FIRE",o),F.fire=o),F.special!=s&&(M("SPECIAL",s),F.special=s);var l=new Vector(e.axes[1],e.axes[0]),u=l.length(),d=-l.angle()+Math.PI/2,c=d=(d%k+k)%k;.2<u?(F.forward=!0,A(c,u)):(F.forward&&!t&&M("UP",!1),F.forward=!1)}}else N=!1}},Input.unpressKey=function(n){delete t[n]},Input.keyState=function(e){return D[e]},Input.clearKeys=function(t){if(game.state===Network.STATE.PLAYING){for(var n of b)if(D[n]){if(t&&(e[38]||e[40]||e[37]||e[39]))continue;D[n]=!1,C(n)}for(var a in e)t&&(38==a||40==a||37==a||39==a)||(e[a]=!1)}},Input.touchCloseAll=function(){game.state==Network.STATE.LOGIN?(Games.closeDropdowns(),UI.closeLogin()):game.state==Network.STATE.PLAYING&&(UI.closeAllPanels(),UI.closeTooltip())},Input.addTouchRejection=function(t){$(t).on("touchstart",function(t){t.stopPropagation()}),$(t).on("touchmove",function(t){t.preventDefault(),t.stopPropagation()})},Input.setupLogin=function(){$(window).on("touchstart",function(t){Input.touchCloseAll(),t.preventDefault()}),Input.addTouchRejection("#logon,#big-message,#loginselector")},Input.setupTouch=function(){$(window).on("touchcancel",function(t){null!=o&&o.processOnEnd(t)}),Input.addTouchRejection("#settings,#sidebar,#roomnamecontainer,#menu,#gameselector,#mainmenu,#scoredetailed,#invitefriends,#msg-alert,#msg-information"),$("body").append("<div id=\"touch-joystick\"></div><div id=\"touch-fire\"><div class=\"circle\"></div></div><div id=\"touch-special\"><div class=\"circle\"></div></div>"),$("#touch-fire").on("touchstart",function(t){M("FIRE",!0),$("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),t.preventDefault()}),$("#touch-fire").on("touchend",function(t){M("FIRE",!1),$("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),t.preventDefault()}),$("#touch-special").on("touchstart",function(t){M("SPECIAL",!0),$("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),t.preventDefault()}),$("#touch-special").on("touchend",function(t){M("SPECIAL",!1),$("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),t.preventDefault()});var t={zone:$("#touch-joystick")[0],mode:"static",position:{bottom:"50%",left:"50%"}};(o=nipplejs.create(t)).on("end",Input.touchEnd),o.on("move",Input.touchMove)},Input.toggleMouse=function(t){if(!config.mobile)if($(window).off("mousedown"),$(window).off("mouseup"),config.mouse=!config.mouse,config.mouse){if($(window).on("mousedown",Input.mouseDown),$(window).on("mouseup",Input.mouseUp),t)return;UI.showMessage("alert","<span class=\"info\">MOUSE MODE</span>Enabled<div class=\"mousemode\"><span class=\"info\">LEFT CLICK</span>Fire&nbsp;&nbsp;&nbsp;<span class=\"info\">RIGHT CLICK</span>Special&nbsp;&nbsp;&nbsp;<span class=\"info\">WASD</span>Move</div>",7e3),Tools.setSettings({mousemode:!0})}else UI.showMessage("alert","<span class=\"info\">MOUSE MODE</span>Disabled",3e3),Tools.removeSetting("mousemode")},Input.mouseDown=function(a){var e=a.originalEvent;if((0==e.button||2==e.button)&&null!=e.target.tagName&&"canvas"==e.target.tagName.toLowerCase()){var t=0==e.button?"FIRE":"SPECIAL";M(t,!0),a.preventDefault()}},Input.mouseUp=function(a){var e=a.originalEvent;if(0==e.button||2==e.button)if(null!=e.target.tagName&&"canvas"==e.target.tagName.toLowerCase()){var t=0==e.button?"FIRE":"SPECIAL";M(t,!1),a.preventDefault()}else M("FIRE",!1),M("SPECIAL",!1)};var M=function(e,t){(D[e]==!t||t&&null==D[e])&&(Network.sendKey(e,t),D[e]=t)},A=function(r,e){var t=Players.getMe();if(null!=t){var i=r-t.rot;i>Math.PI&&(i-=2*Math.PI),i<-Math.PI&&(i+=2*Math.PI);var d=Math.round(1e3*(Math.abs(i)/(60*config.ships[t.type].turnFactor)));if(!(10>(d-=Math.round(game.ping))||100>game.time-L)){null!=n&&clearTimeout(n),L=game.time;var u=0<i?"RIGHT":"LEFT",a=0>=i?"RIGHT":"LEFT";M("UP",!(null!=e&&.5>e)),M(u,!0),M(a,!1),n=setTimeout(function(){M(u,!1)},d)}}};Input.touchMove=function(a,e){var t=-e.angle.radian+Math.PI/2,i=t=(t%k+k)%k;A(i,e.force)},Input.touchEnd=function(){M("UP",!1),M("LEFT",!1),M("RIGHT",!1)},Input.gameFocus=function(){game.focus=!0},Input.gameBlur=function(){game.focus=!1,Input.clearKeys()};var O=function(t){return 3==game.myType&&("STRAFELEFT"===t||"STRAFERIGHT"===t)?(O("SPECIAL"),void O("STRAFELEFT"===t?"LEFT":"RIGHT")):void(-1!==_.indexOf(t)&&Network.sendKey(t,!0))},C=function(e){3!=game.myType||"STRAFELEFT"!==e&&"STRAFERIGHT"!==e?-1!==b.indexOf(e)&&Network.sendKey(e,!1):(C("STRAFELEFT"===e?"LEFT":"RIGHT"),D["STRAFERIGHT"===e?"STRAFELEFT":"STRAFERIGHT"]||C("SPECIAL"))}}();class a{constructor(n,e){this.id=n.id,this.status=n.status,this.level=null==n.level||0==n.level?null:n.level,this.reel=1==n.reel,this.name=n.name,this.type=n.type,this.team=n.team,this.pos=new Vector(n.posX,n.posY),this.lowResPos=new Vector(n.posX,n.posY),this.speed=Vector.zero(),this.speedupgrade=0,this.rot=n.rot,this.flag=n.flag,this.speedLength=0,this.sprites={},this.randomness=Tools.rand(0,1e5),this.keystate={},this.lastTick=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.stealthed=!1,this.alpha=1,this.scale=1,this.powerups={shield:!1,rampage:!1},this.powerupsShown={shield:!1,rampage:!1},this.powerupActive=!1,this.render=!0,this.hidden=!1,this.culled=!1,this.timedout=!1,this.reducedFactor=!1,this.lastPacket=game.timeNetwork,this.state={thrustLevel:0,thrustDir:0,bubble:!1,bubbleProgress:0,bubbleFade:0,bubbleTime:0,bubbleTextWidth:0,hasBadge:!1,badge:0,stealthLevel:0,scaleLevel:1,powerupAngle:0,powerupFade:0,powerupFadeState:0,lastBounceSound:0},this.setupGraphics(),0==this.status?(Tools.decodeUpgrades(this,n.upgrades),this.updatePowerups()):(this.hidden=!0,this.me()&&UI.visibilityHUD(!1)),this.reel?(this._prevPos=null,this._offset=null):this.visibilityUpdate(),(!e&&this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.me()&&(game.myType=n.type,UI.aircraftSelected(n.type))}setupGraphics(a){var e=null;switch(this.me()&&(e={layer:"aircraftme"}),this.sprites.powerup=Textures.init("powerupShield",{visible:!1,alpha:.75}),this.sprites.powerupCircle=Textures.init("powerupCircle",{visible:!1,alpha:.75}),this.type){case 1:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipRaptor",e),this.sprites.shadow=Textures.init("shipRaptorShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster=Textures.init("shipRaptorThruster"),this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall"),this.sprites.thrusterShadow=Textures.init("thrusterShadow");break;case 2:this.state.baseScale=.35,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipSpirit",e),this.sprites.shadow=Textures.init("shipSpiritShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case 3:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipComanche",e),this.sprites.rotor=Textures.init("shipComancheRotor",e),this.sprites.shadow=Textures.init("shipComancheShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.rotorShadow=Textures.init("shipComancheRotorShadow",{scale:2*this.state.baseScale*(2.4/config.shadowScaling)});break;case 4:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipTornado",e),this.sprites.shadow=Textures.init("shipTornadoShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case 5:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipProwler",e),this.sprites.shadow=Textures.init("shipProwlerShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");}if(this.reel||a||(this.setupNameplate(),this.setupChatBubbles(),null!=this.level&&this.setupLevelPlate()),config.debug.collisions){this.col=new PIXI.Graphics;for(var r of config.ships[this.type].collisions)this.col.beginFill(16777215,.2),this.col.drawCircle(r[0],r[1],r[2]),this.col.endFill();game.graphics.layers.explosions.addChild(this.col)}}reteam(t){this.team=t,this.sprites.name.style=new PIXI.TextStyle(this.nameplateTextStyle()),UI.changeMinimapTeam(this.id,this.team)}nameplateTextStyle(){if(2==game.gameType)var t=1==this.team?"#4076E2":"#EA4242";else t=this.team==game.myTeam?"#FFFFFF":"#FFEC52";return{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:config.playerNameSize||"28px",fill:t,dropShadow:!0,dropShadowBlur:10,dropShadowDistance:0,padding:4}}setupNameplate(){var t="";2==game.gameType&&(t="  \u25A0"),this.sprites.name=new PIXI.Text(this.name+t,this.nameplateTextStyle()),this.sprites.name.scale.set(.5,.5),this.sprites.flag=Textures.sprite("flag_"+this.flag),this.sprites.flag.scale.set(.4,.4),this.sprites.flag.anchor.set(.5,.5),this.sprites.badge=Textures.sprite("badge_gold"),this.sprites.badge.scale.set(.3),this.sprites.badge.visible=!1,game.graphics.layers.playernames.addChild(this.sprites.badge),game.graphics.layers.playernames.addChild(this.sprites.flag),game.graphics.layers.playernames.addChild(this.sprites.name)}setupChatBubbles(){this.sprites.bubble=new PIXI.Container,this.sprites.bubbleLeft=Graphics.initSprite("chatbubbleleft",this.sprites.bubble,{scale:.5}),this.sprites.bubbleRight=Graphics.initSprite("chatbubbleright",this.sprites.bubble,{scale:.5}),this.sprites.bubbleCenter=Graphics.initSprite("chatbubblecenter",this.sprites.bubble,{scale:.5}),this.sprites.bubblePoint=Graphics.initSprite("chatbubblepoint",this.sprites.bubble,{scale:.5}),this.sprites.emote=Graphics.initSprite("emote_tf",this.sprites.bubble,{scale:.6,anchor:[.5,.5]}),this.sprites.bubbleText=new PIXI.Text("a",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:"12px",fill:"white"}),this.sprites.bubble.addChild(this.sprites.bubbleText),this.sprites.bubble.visible=!1,this.sprites.bubble.pivot.set(.5,34),game.graphics.layers.bubbles.addChild(this.sprites.bubble)}visibilityUpdate(n){this.culled=!Graphics.inScreen(this.pos,128);var e=!(this.hidden||this.culled||this.timedout);if(n||this.render!=e){switch(this.sprites.sprite.visible=e,this.sprites.shadow.visible=e,this.sprites.flag.visible=e,this.sprites.name.visible=e,null!=this.sprites.level&&(this.sprites.level.visible=e,this.sprites.levelBorder.visible=e),this.sprites.badge.visible=this.state.hasBadge&&e,this.sprites.powerup.visible=this.powerupActive&&e,this.sprites.powerupCircle.visible=this.powerupActive&&e,this.type){case 1:this.sprites.thruster.visible=e,this.sprites.thrusterGlow.visible=e,this.sprites.thrusterShadow.visible=e;break;case 2:case 4:case 5:this.sprites.thruster1.visible=e,this.sprites.thruster1Glow.visible=e,this.sprites.thruster1Shadow.visible=e,this.sprites.thruster2.visible=e,this.sprites.thruster2Glow.visible=e,this.sprites.thruster2Shadow.visible=e;break;case 3:this.sprites.rotor.visible=e,this.sprites.rotorShadow.visible=e;}this.render=e,e||Sound.clearThruster(this.id)}}stealth(t){this.lastPacket=game.timeNetwork,this.energy=t.energy,this.energyRegen=t.energyRegen,t.state?(this.stealthed=!0,this.state.stealthLevel=0,this.team!=game.myTeam&&(this.keystate.LEFT&&delete this.keystate.LEFT,this.keystate.RIGHT&&delete this.keystate.RIGHT)):this.unstealth()}unstealth(){this.stealthed=!1,this.state.stealthLevel=0,this.opacity(1)}opacity(t){this.alpha=t,this.sprites.sprite.alpha=t,this.sprites.shadow.alpha=t,this.sprites.flag.alpha=t,this.sprites.name.alpha=t,this.sprites.badge.alpha=t,this.sprites.powerup.alpha=.75*t,this.sprites.powerupCircle.alpha=.75*t,null!=this.sprites.level&&(this.sprites.level.alpha=t,this.sprites.levelBorder.alpha=.4*t),5==this.type&&(this.sprites.thruster1.alpha=t,this.sprites.thruster1Glow.alpha=t,this.sprites.thruster2.alpha=t,this.sprites.thruster2Glow.alpha=t)}kill(t){if(this.status=1,this.keystate={},this.pos.x=t.posX,this.pos.y=t.posY,this.speed=Vector.zero(),this.me()&&UI.resetPowerups(),this.resetPowerups(),this.hidden=!0,this.visibilityUpdate(),this.stealthed&&this.unstealth(),!this.culled&&!0!==t.spectate){switch(this.type){case 1:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3));break;case 2:Particles.explosion(this.pos.clone(),Tools.rand(2,2.5),Tools.randInt(4,7));break;case 3:case 4:case 5:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3));}Graphics.shakeCamera(this.pos,this.me()?20:10),Sound.clearThruster(this.id),Sound.playerKill(this)}}me(){return game.myID==this.id}destroy(n){var e=this.me()?game.graphics.layers.aircraftme:game.graphics.layers.aircraft;switch(e.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.powerup.destroy(),this.sprites.powerupCircle.destroy(),this.type){case 1:game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.thrusters.removeChild(this.sprites.thrusterGlow),game.graphics.layers.shadows.removeChild(this.sprites.thrusterShadow),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.thrusterShadow.destroy();break;case 2:case 4:case 5:game.graphics.layers.thrusters.removeChild(this.sprites.thruster1,this.sprites.thruster2),game.graphics.layers.thrusters.removeChild(this.sprites.thruster1Glow,this.sprites.thruster2Glow),game.graphics.layers.shadows.removeChild(this.sprites.thruster1Shadow),game.graphics.layers.shadows.removeChild(this.sprites.thruster2Shadow),this.sprites.thruster1.destroy(),this.sprites.thruster2.destroy(),this.sprites.thruster1Glow.destroy(),this.sprites.thruster2Glow.destroy(),this.sprites.thruster1Shadow.destroy(),this.sprites.thruster2Shadow.destroy();break;case 3:e.removeChild(this.sprites.rotor),this.sprites.rotor.destroy(),game.graphics.layers.shadows.removeChild(this.sprites.rotorShadow),this.sprites.rotorShadow.destroy();}n&&!this.reel&&(game.graphics.layers.playernames.removeChild(this.sprites.badge,this.sprites.name,this.sprites.flag),null!=this.sprites.level&&(game.graphics.layers.playernames.removeChild(this.sprites.level,this.sprites.levelBorder),this.sprites.level.destroy(!0),this.sprites.levelBorder.destroy()),game.graphics.layers.bubbles.removeChild(this.sprites.bubble),this.sprites.badge.destroy(),this.sprites.name.destroy(!0),this.sprites.flag.destroy(),this.sprites.bubbleText.destroy(!0),this.sprites.bubble.destroy({children:!0}))}sayBubble(a){this.state.bubbleTime=game.time,this.state.bubbleFade=0,this.state.bubble||(this.state.bubble=!0,this.state.bubbleProgress=0,this.sprites.bubble.visible=!0,this.sprites.bubble.alpha=0,this.sprites.bubble.scale.set(0,0)),this.sprites.bubble.cacheAsBitmap=!1;var e=UI.isEmote(a.text,!0);if(e){this.sprites.bubbleText.visible=!1,this.sprites.emote.texture=Textures.get("emote_"+e),this.sprites.emote.visible=!0;var t=26;this.sprites.emote.position.set(0,0)}else this.sprites.bubbleText.visible=!0,this.sprites.emote.visible=!1,this.sprites.bubbleText.text=a.text,t=this.sprites.bubbleText.width,this.sprites.bubbleText.position.set(-t/2,-7);this.sprites.bubbleLeft.position.set(-t/2-17,-21),this.sprites.bubbleRight.position.set(t/2+9,-21),this.sprites.bubbleCenter.position.set(-t/2-9,-21),this.sprites.bubbleCenter.scale.set(t/82+18/82,.5),this.sprites.bubblePoint.position.set(-9,19),this.state.bubbleTextWidth=t}networkKey(a,e){this.lastPacket=game.timeNetwork,1==this.status&&this.revive(),null!=e.posX&&(this.reducedFactor=Tools.reducedFactor(),this.pos.x=e.posX,this.pos.y=e.posY,this.rot=e.rot,this.speed.x=e.speedX,this.speed.y=e.speedY);var t=this.stealthed;null!=e.keystate&&Tools.decodeKeystate(this,e.keystate),null!=e.upgrades&&(Tools.decodeUpgrades(this,e.upgrades),this.updatePowerups()),null!=e.energy&&(this.energy=e.energy,this.energyRegen=e.energyRegen),null!=e.boost&&(this.boost=e.boost),this.team!=game.myTeam&&(this.stealthed||t&&!this.stealthed)&&this.unstealth(),this.me()||!t||this.stealthed||this.unstealth(),e.c==Network.SERVERPACKET.EVENT_BOUNCE&&300<game.time-this.state.lastBounceSound&&(this.state.lastBounceSound=game.time,Sound.playerImpact(this.pos,this.type,this.speed.length()/config.ships[this.type].maxSpeed))}updateLevel(t){this.me()&&(1==t.type&&Games.showLevelUP(t.level),UI.updateMyLevel(t.level)),this.level=t.level,this.setupLevelPlate()}setupLevelPlate(){null==this.sprites.level?(this.sprites.level=new PIXI.Text(this.level+"",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:config.playerLevelSize||"28px",fill:"rgb(200, 200, 200)",dropShadow:!0,dropShadowBlur:6,dropShadowDistance:0,padding:4}),this.sprites.level.scale.set(.5,.5),this.sprites.levelBorder=Textures.sprite("levelborder"),this.sprites.levelBorder.alpha=.4,game.graphics.layers.playernames.addChild(this.sprites.levelBorder),game.graphics.layers.playernames.addChild(this.sprites.level)):this.sprites.level.text=this.level+"",this.sprites.levelBorder.scale.set((this.sprites.level.width+10)/32,.65),this.sprites.level.visible=this.render,this.sprites.levelBorder.visible=this.render}powerup(t){UI.addPowerup(t.type,t.duration)}resetPowerups(){this.powerupActive&&(this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1),this.powerups.shield=!1,this.powerupsShown.shield=!1,this.powerups.rampage=!1,this.powerupsShown.rampage=!1,this.powerupActive=!1,this.state.powerupFade=0,this.state.powerupFadeState=0}updatePowerups(){var t=!1;this.powerups.shield!=this.powerupsShown.shield&&(this.powerupsShown.shield=this.powerups.shield,this.powerups.shield&&(this.sprites.powerup.texture=Textures.get("powerup_shield"),this.sprites.powerupCircle.tint=16777215),t=!0),this.powerups.rampage!=this.powerupsShown.rampage&&(this.powerupsShown.rampage=this.powerups.rampage,this.powerups.rampage&&(this.sprites.powerup.texture=Textures.get("powerup_rampage"),this.sprites.powerupCircle.tint=16712448),t=!0),t&&(this.powerupActive=this.powerups.shield||this.powerups.rampage,this.powerupActive?(this.state.powerupFade=0,this.state.powerupFadeState=0,this.sprites.powerup.visible=!0,this.sprites.powerupCircle.visible=!0):(this.powerupActive=!0,this.state.powerupFade=0,this.state.powerupFadeState=1))}impact(a,e,t,n){this.health=t,this.healthRegen=n,this.stealthed&&this.unstealth(),200!=a&&Mobs.explosion(e,a),this.me()&&0==this.status&&Graphics.shakeCamera(e,8)}changeType(t){this.type!=t.type&&(this.destroy(!1),this.type=t.type,this.setupGraphics(!0),this.visibilityUpdate(!0))}respawn(t){this.lastPacket=game.timeNetwork,this.status=0,this.keystate={},this.pos.x=t.posX,this.pos.y=t.posY,this.rot=t.rot,this.speed.x=0,this.speed.y=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.state.thrustLevel=0,this.state.thrustDir=0,this.hidden=!1,this.timedout=!1,this.visibilityUpdate(),this.me()&&UI.resetPowerups(),Tools.decodeUpgrades(this,t.upgrades),this.updatePowerups(),(this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.stealthed&&this.unstealth(),this.me()&&(game.myType=this.type,game.spectatingID=null,UI.aircraftSelected(this.type),UI.visibilityHUD(!0),UI.hideSpectator()),this.updateGraphics(1),Sound.playerRespawn(this)}revive(){this.status=0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.hidden=!1,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.stealthed&&this.unstealth()}changeFlag(t){this.flag=t.flag,this.sprites.flag.texture=Textures.get("flag_"+t.flag)}changeBadge(t){this.sprites.badge.texture=Textures.get(t)}updateNameplate(){if(!this.reel){var a=(this.sprites.name.width+this.sprites.flag.width+10)/2,e=this.pos.x-a+(this.state.hasBadge?12:0)-(null==this.level?0:this.sprites.level.width/2+8),t=this.pos.y+this.state.nameplateDist*this.scale;this.sprites.name.position.set(e+40,t),this.sprites.flag.position.set(e+15,t+10),null!=this.level&&(this.sprites.level.position.set(e+2*a+13,t+2),this.sprites.levelBorder.position.set(e+2*a+7.75,t-.5)),this.state.hasBadge&&this.sprites.badge.position.set(e-28,t)}}updateBubble(){this.state.bubbleProgress+=.015*game.timeFactor,1<=this.state.bubbleProgress&&(this.state.bubbleProgress=1),4e3<game.time-this.state.bubbleTime?(this.state.bubbleFade+=.08*game.timeFactor,1<=this.state.bubbleFade&&(this.state.bubbleFade=1),this.sprites.bubble.scale.set(1+.2*this.state.bubbleFade),this.sprites.bubble.alpha=1*(1-this.state.bubbleFade),1<=this.state.bubbleFade&&(this.state.bubble=!1,this.sprites.bubble.visible=!1)):(this.sprites.bubble.scale.set(Tools.easing.outElastic(this.state.bubbleProgress,.5)),this.sprites.bubble.alpha=1);var a=0==(this.state.bubbleTextWidth+game.screenX)%2?.5:0,e=0==game.screenY%2?0:.5,t=this.state.nameplateDist*this.scale;this.powerupActive&&(t+=60),this.sprites.bubble.position.set(this.pos.x*game.scale+a,(this.pos.y-t)*game.scale+e)}detectTimeout(){if(!this.me()){var t=this.timedout;this.timedout=!game.lagging&&3e3<game.timeNetwork-this.lastPacket,this.timedout&&!t&&(this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=Vector.zero(),this.keystate={},this.resetPowerups())}}leaveHorizon(){this.me()||this.timedout||(this.lastPacket=-1e4,this.timedout=!0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=Vector.zero(),this.keystate={},this.resetPowerups())}update(d){if(this.reel)this.clientCalcs(d);else{if(this.detectTimeout(),this.visibilityUpdate(),!this.render)return this.health+=d*this.healthRegen,void(1<=this.health&&(this.health=1));if(!(!1!==this.reducedFactor&&(d-=this.reducedFactor,this.reducedFactor=!1,0>=d))){var p=.51<d?Math.round(d):1,o=d/p,s=2*Math.PI,a=this.boost?1.5:1,l,f,g,m;for(l=0;l<p;l++){this.energy+=o*this.energyRegen,1<=this.energy&&(this.energy=1),this.health+=o*this.healthRegen,1<=this.health&&(this.health=1),m=-999,this.strafe?(this.keystate.LEFT&&(m=this.rot-.5*Math.PI),this.keystate.RIGHT&&(m=this.rot+.5*Math.PI)):(this.keystate.LEFT&&(this.rot+=-o*config.ships[this.type].turnFactor),this.keystate.RIGHT&&(this.rot+=o*config.ships[this.type].turnFactor)),f=this.speed.x,g=this.speed.y,this.keystate.UP?-999==m?m=this.rot:m+=Math.PI*(this.keystate.RIGHT?-.25:.25):this.keystate.DOWN&&(-999==m?m=this.rot+Math.PI:m+=Math.PI*(this.keystate.RIGHT?.25:-.25)),-999!==m&&(this.speed.x+=Math.sin(m)*config.ships[this.type].accelFactor*o*a,this.speed.y-=Math.cos(m)*config.ships[this.type].accelFactor*o*a);var y=this.speed.length(),u=config.ships[this.type].maxSpeed*a*config.upgrades.speed.factor[this.speedupgrade],_=config.ships[this.type].minSpeed;this.powerups.rampage&&(u*=.75),this.flagspeed&&(u=5),y>u?this.speed.multiply(u/y):this.speed.x>_||this.speed.x<-_||this.speed.y>_||this.speed.y<-_?(this.speed.x*=1-config.ships[this.type].brakeFactor*o,this.speed.y*=1-config.ships[this.type].brakeFactor*o):(this.speed.x=0,this.speed.y=0),this.pos.x+=o*f+.5*(this.speed.x-f)*o*o,this.pos.y+=o*g+.5*(this.speed.y-g)*o*o,this.clientCalcs(o)}this.rot=(this.rot%s+s)%s,-1==game.gameType?(-16384>this.pos.x&&(this.pos.x+=32768),16384<this.pos.x&&(this.pos.x-=32768),-8192>this.pos.y&&(this.pos.y+=16384),8192<this.pos.y&&(this.pos.y-=16384)):(-16352>this.pos.x&&(this.pos.x=-16352),16352<this.pos.x&&(this.pos.x=16352),-8160>this.pos.y&&(this.pos.y=-8160),8160<this.pos.y&&(this.pos.y=8160)),Sound.updateThruster(0,this),SWAM&&SWAM.OnPlayerUpdate(this,d)}}}clientCalcs(a){switch(this.type){case 1:case 2:case 4:case 5:var e=!1,i=!1,o=this.boost?1.5:1;!1!==(e=this.keystate.LEFT?.3:this.keystate.RIGHT?-.3:0)&&(this.state.thrustDir=Tools.converge(this.state.thrustDir,e,.1*a)),!1!==(i=this.keystate.UP?1:this.keystate.DOWN?-1:0)&&(this.state.thrustLevel=Tools.converge(this.state.thrustLevel,i*o,.2*a));break;case 3:this.state.thrustDir+=(.2+this.speed.length()/50)*a;}this.culled||this.render&&(!this.stealthed&&.4>this.health&&Particles.planeDamage(this),!this.stealthed&&.2>this.health&&Particles.planeDamage(this),this.boost&&Particles.planeBoost(this,0<=i),5==this.type&&this.stealthed&&(this.state.stealthLevel+=.03*a,this.state.stealthLevel=Tools.clamp(this.state.stealthLevel,0,this.team==game.myTeam?.5:1),this.opacity(1-this.state.stealthLevel)),this.state.scaleLevel+=.005*a,1<=this.state.scaleLevel?(this.state.scaleLevel=1,this.scale=1):this.scale=Tools.easing.outElastic(this.state.scaleLevel,.5),this.powerupActive&&(this.state.powerupAngle+=.075*a,0==this.state.powerupFadeState?(this.state.powerupFade+=.05*a,1<=this.state.powerupFade&&(this.state.powerupFade=1)):(this.state.powerupFade+=.05*a,1<=this.state.powerupFade&&(this.powerupActive=!1,this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1))))}updateGraphics(){var e=Tools.oscillator(.025,1e3,this.randomness)*this.scale,t=1.5*this.state.thrustLevel,n=this.rot,r=Graphics.shadowCoords(this.pos);if(Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,n,e*this.state.baseScale,e*this.state.baseScale),Graphics.transform(this.sprites.shadow,r.x,r.y,n,this.state.baseScale*(2.4/config.shadowScaling)*this.scale,this.state.baseScale*(2.4/config.shadowScaling)*this.scale),this.powerupActive){var i=.35*(0==this.state.powerupFadeState?2*(1-this.state.powerupFade)+1:1-this.state.powerupFade)*Tools.oscillator(.075,100,this.randomness),o=.75*(0==this.state.powerupFadeState?Tools.clamp(2*this.state.powerupFade,0,1):Tools.clamp(1-1.3*this.state.powerupFade,0,1))*this.alpha;Graphics.transform(this.sprites.powerup,this.pos.x,this.pos.y-80,0,i,i,o),Graphics.transform(this.sprites.powerupCircle,this.pos.x,this.pos.y-80,this.state.powerupAngle,1.35*i,1.35*i,o)}var s=Tools.oscillator(.1,.5,this.randomness),d=.01>Math.abs(this.state.thrustLevel)?0:this.state.thrustLevel/2+(0<this.state.thrustLevel?.5:-.5),l=Tools.clamp(2*Math.abs(this.state.thrustLevel)-.1,0,1);switch(this.type){case 1:Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-n)*(20*e),this.pos.y+Math.cos(-n)*(20*e),n+(0<this.state.thrustLevel?this.state.thrustDir:0),.3*s*d*this.scale,.5*s*d*this.scale,l),Graphics.transform(this.sprites.thrusterShadow,r.x+Math.sin(-n)*(20*e)/config.shadowScaling,r.y+Math.cos(-n)*(20*e)/config.shadowScaling,n+(0<this.state.thrustLevel?this.state.thrustDir:0),.4*s*d*this.scale*(4/config.shadowScaling),.5*s*d*this.scale*(4/config.shadowScaling),l/2.5),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-n-.5*this.state.thrustDir)*(40*e),this.pos.y+Math.cos(-n-.5*this.state.thrustDir)*(40*e),null,1.5*t*this.scale,1*t*this.scale,.3*this.state.thrustLevel);break;case 2:0>this.state.thrustLevel&&(s*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-n-.5)*(32*e),this.pos.y+Math.cos(-n-.5)*(32*e),n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*s*d*this.scale,.6*s*d*this.scale,l),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.5-n)*(32*e),this.pos.y+Math.cos(.5-n)*(32*e),n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*s*d*this.scale,.6*s*d*this.scale,l),Graphics.transform(this.sprites.thruster1Shadow,r.x+Math.sin(-n-.5)*(32*e)/config.shadowScaling,r.y+Math.cos(-n-.5)*(32*e)/config.shadowScaling,n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.5*s*d*this.scale*(4/config.shadowScaling),.6*s*d*this.scale*(4/config.shadowScaling),l/2.5),Graphics.transform(this.sprites.thruster2Shadow,r.x+Math.sin(.5-n)*(32*e)/config.shadowScaling,r.y+Math.cos(.5-n)*(32*e)/config.shadowScaling,n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.5*s*d*this.scale*(4/config.shadowScaling),.6*s*d*this.scale*(4/config.shadowScaling),l/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-n-.3)*(50*e),this.pos.y+Math.cos(-n-.3)*(50*e),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.3-n)*(50*e),this.pos.y+Math.cos(.3-n)*(50*e),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel);break;case 3:Graphics.transform(this.sprites.rotor,this.pos.x,this.pos.y,this.state.thrustDir,2*(e*this.state.baseScale),2*(e*this.state.baseScale),.8),Graphics.transform(this.sprites.rotorShadow,r.x,r.y,this.state.thrustDir,2*(this.state.baseScale*(2.4/config.shadowScaling)*this.scale),2*(this.state.baseScale*(2.4/config.shadowScaling)*this.scale));break;case 4:0>this.state.thrustLevel&&(s*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-n-.15)*(28*e),this.pos.y+Math.cos(-n-.15)*(28*e),n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*s*d*this.scale,.5*s*d*this.scale,l),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.15-n)*(28*e),this.pos.y+Math.cos(.15-n)*(28*e),n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*s*d*this.scale,.5*s*d*this.scale,l),Graphics.transform(this.sprites.thruster1Shadow,r.x+Math.sin(-n-.15)*(28*e)/config.shadowScaling,r.y+Math.cos(-n-.15)*(28*e)/config.shadowScaling,n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*s*d*this.scale*(4/config.shadowScaling),.5*s*d*this.scale*(4/config.shadowScaling),l/2.5),Graphics.transform(this.sprites.thruster2Shadow,r.x+Math.sin(.15-n)*(28*e)/config.shadowScaling,r.y+Math.cos(.15-n)*(28*e)/config.shadowScaling,n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*s*d*this.scale*(4/config.shadowScaling),.5*s*d*this.scale*(4/config.shadowScaling),l/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-n-.2)*(45*e),this.pos.y+Math.cos(-n-.2)*(45*e),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-n)*(45*e),this.pos.y+Math.cos(.2-n)*(45*e),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel);break;case 5:0>this.state.thrustLevel&&(s*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-n-.35)*(20*e),this.pos.y+Math.cos(-n-.35)*(20*e),n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*s*d*this.scale,.4*s*d*this.scale,l*this.alpha),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.35-n)*(20*e),this.pos.y+Math.cos(.35-n)*(20*e),n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*s*d*this.scale,.4*s*d*this.scale,l*this.alpha),Graphics.transform(this.sprites.thruster1Shadow,r.x+Math.sin(-n-.35)*(20*e)/config.shadowScaling,r.y+Math.cos(-n-.35)*(20*e)/config.shadowScaling,n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*s*d*this.scale*(4/config.shadowScaling),.4*s*d*this.scale*(4/config.shadowScaling),l*this.alpha/2.5),Graphics.transform(this.sprites.thruster2Shadow,r.x+Math.sin(.35-n)*(20*e)/config.shadowScaling,r.y+Math.cos(.35-n)*(20*e)/config.shadowScaling,n+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*s*d*this.scale*(4/config.shadowScaling),.4*s*d*this.scale*(4/config.shadowScaling),l*this.alpha/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-n-.2-0*this.state.thrustDir)*(35*e),this.pos.y+Math.cos(-n-.2-0*this.state.thrustDir)*(35*e),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-n-0*this.state.thrustDir)*(35*e),this.pos.y+Math.cos(.2-n-0*this.state.thrustDir)*(35*e),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha);}this.updateNameplate(),this.state.bubble&&this.updateBubble(),config.debug.collisions&&this.col&&(this.col.position.set(this.pos.x,this.pos.y),this.col.rotation=this.rot)}}!function(){var d={},e=[-1,-1,-1],l=["badge_gold","badge_silver","badge_bronze"];Players.update=function(){var e,a;for(e in d)0==(a=d[e]).status&&(a.update(game.timeFactor),a.updateGraphics(game.timeFactor));if(null!=game.spectatingID){if(null==(a=d[game.spectatingID]))return;if(3e3<game.timeNetwork-a.lastPacket)return;Graphics.setCamera(a.pos.x,a.pos.y)}else if(null!=game.myID){if(null==(a=d[game.myID]))return;0==a.status&&UI.updateHUD(a.health,a.energy,a),Graphics.setCamera(a.pos.x,a.pos.y)}},Players.add=function(e,t){d[e.id]=new a(e,t)},Players.get=function(e){return d[e]},Players.getMe=function(){return d[game.myID]},Players.amIAlive=function(){var t=Players.getMe();return null!=t&&0==t.status},Players.getIDs=function(){var e={};for(var t in d)e[t]=!0;return e},Players.getByName=function(e){for(var t in d)if(d[t].name===e)return d[t];return null},Players.network=function(e,t){var n=d[t.id];null!=n&&(e===Network.SERVERPACKET.PLAYER_UPDATE||e===Network.SERVERPACKET.PLAYER_FIRE||e===Network.SERVERPACKET.EVENT_BOOST||e===Network.SERVERPACKET.EVENT_BOUNCE?n.networkKey(e,t):e===Network.SERVERPACKET.CHAT_SAY?n.sayBubble(t):e===Network.SERVERPACKET.PLAYER_RESPAWN?n.respawn(t):e===Network.SERVERPACKET.PLAYER_FLAG?(t.id==game.myID&&(game.myFlag=game.lastFlagSet,Tools.setSettings({flag:game.lastFlagSet})),n.changeFlag(t)):void 0)},Players.stealth=function(e){var t=d[e.id];null!=t&&t.stealth(e)},Players.leaveHorizon=function(e){var t=d[e.id];null!=t&&t.leaveHorizon()},Players.updateBadges=function(t){for(var n=Tools.clamp(t.length,0,3),r=[],o=0,s;o<n;o++)null!=(s=d[t[o].id])&&(r.push(s.id),s.state.badge!=o&&(s.state.badge=o,s.changeBadge(l[o])),s.state.hasBadge||(s.state.hasBadge=!0,s.render&&(s.sprites.badge.visible=!0)));for(var u=0;u<e.length;u++)if(-1==r.indexOf(e[u])){if(null==(s=d[e[u]]))continue;s.state.hasBadge&&(s.state.hasBadge=!1,s.sprites.badge.visible=!1)}e=r},Players.chat=function(e){var t=d[e.id];null!=t&&UI.addChatLine(t,e.text,0)},Players.teamChat=function(e){var t=d[e.id];null!=t&&UI.addChatLine(t,e.text,3)},Players.votemutePass=function(e){var t=d[e.id];null!=t&&UI.chatVotemutePass(t)},Players.whisper=function(e){var t;if(e.to==game.myID){if(null==(a=d[e.from]))return;t=2}else{var a;if(null==(a=d[e.to]))return;t=1}UI.addChatLine(a,e.text,t)},Players.impact=function(e){for(var t=0,a;t<e.players.length;t++)a=d[e.players[t].id],null!=a&&a.impact(e.type,new Vector(e.posX,e.posY),e.players[t].health,e.players[t].healthRegen)},Players.powerup=function(t){Players.getMe().powerup(t)},Players.updateLevel=function(e){var t=d[e.id];null!=t&&t.updateLevel(e)},Players.reteam=function(e){var t=d[e.id];null!=t&&t.reteam(e.team)},Players.kill=function(e){var t=d[e.id];if(null!=t)if(0!=e.killer||0!=e.posX||0!=e.posY){if(t.kill(e),t.me()){UI.visibilityHUD(!1);var n=d[e.killer];null!=n&&UI.killedBy(n),UI.showSpectator("<div onclick=\"Network.spectateNext()\" class=\"spectate\">ENTER SPECTATOR MODE</div>")}else e.killer===game.myID&&UI.killed(t);t.me()||t.id!=game.spectatingID||3!=game.gameType||Games.spectatorSwitch(t.id)}else!function(t){t.kill({posX:0,posY:0,spectate:!0}),UI.visibilityHUD(!1)}(t)},Players.destroy=function(e){e==game.spectatingID&&($("#spectator-tag").html("Spectating"),Games.spectatorSwitch(e));var t=d[e];null!=t&&(t.destroy(!0),delete d[e])},Players.changeType=function(e){var t=d[e.id];null!=t&&t.changeType(e)},Players.count=function(){var e=0,a=0,i;for(i in d)e++,d[i].culled&&a++;return[e-a,e]},Players.wipe=function(){for(var e in d)d[e].destroy(!0),delete d[e]}}();class r{constructor(t){this.id=t.id,this.type=t.type,this.pos=new Vector(t.posX,t.posY),this.spriteRot=0,this.missile=1==this.type||2==this.type||3==this.type||5==this.type||6==this.type||7==this.type,this.missile&&t.c!==Network.SERVERPACKET.MOB_UPDATE_STATIONARY?(this.speed=new Vector(t.speedX,t.speedY),this.accel=new Vector(t.accelX,t.accelY),this.maxSpeed=t.maxSpeed,this.exhaust=config.mobs[this.type].exhaust,this.lastAccelX=0,this.lastAccelY=0,this.stationary=!1,this.spriteRot=this.speed.angle()+Math.PI):this.stationary=!0,this.sprites={},this.state={inactive:!1,despawnTicker:0,despawnType:0,baseScale:1,baseScaleShadow:1,luminosity:1},this.randomness=Tools.rand(0,1e5),this.culled=!1,this.visibility=!0,this.reducedFactor=!1,this.forDeletion=!1,this.spawnTime=game.time,this.lastPacket=game.timeNetwork,this.setupSprite()}setupSprite(){switch(4!=this.type&&8!=this.type&&9!=this.type&&(this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall",{layer:"projectiles"}),this.sprites.smokeGlow=Textures.init("smokeGlow",{layer:"projectiles"}),this.sprites.thruster=Textures.init("missileThruster")),this.type){case 1:case 5:case 6:case 7:this.sprites.sprite=Textures.init("missile"),this.sprites.shadow=Textures.init("missileShadow",{scale:[.25,.2]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=.2,this.sprites.smokeGlow.scale.set(1.5,3),this.sprites.smokeGlow.alpha=.75;break;case 2:this.sprites.sprite=Textures.init("missileFat"),this.sprites.shadow=Textures.init("missileShadow",{scale:[.5,.25]}),this.sprites.thrusterGlow.scale.set(4,3),this.sprites.thrusterGlow.alpha=.25,this.sprites.smokeGlow.scale.set(2.5,3),this.sprites.smokeGlow.alpha=.75;break;case 3:this.sprites.sprite=Textures.init("missileSmall",{scale:[.28,.2]}),this.sprites.shadow=Textures.init("missileShadow",{scale:[.18,.14]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=.2,this.sprites.smokeGlow.scale.set(1,2),this.sprites.smokeGlow.alpha=.75;break;case 4:case 8:case 9:var t="crateUpgrade";8==this.type?t="crateShield":9==this.type&&(t="crateRampage"),this.state.baseScale=.33,this.state.baseScaleShadow=.33*(2.4/config.shadowScaling),this.sprites.sprite=Textures.init(t,{scale:this.state.baseScale}),this.sprites.shadow=Textures.init("crateShadow",{scale:this.state.baseScaleShadow});}}despawn(t){return 4==this.type||8==this.type||9==this.type?(this.state.inactive=!0,this.state.despawnTicker=0,this.state.despawnType=t,void(1==t&&4!=this.type&&Sound.powerup(this.type,this.pos))):void(this.state.inactive=!0,this.state.despawnTicker=0,this.sprites.thruster.renderable=!1,this.sprites.thrusterGlow.renderable=!1,this.sprites.smokeGlow.renderable=!1,this.accel.x=0,this.accel.y=0,this.missile&&Sound.updateThruster(1,this,!1))}destroy(t){switch(this.type){case 1:case 2:case 3:case 5:case 6:case 7:game.graphics.layers.projectiles.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.projectiles.removeChild(this.sprites.thrusterGlow),game.graphics.layers.projectiles.removeChild(this.sprites.smokeGlow),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.smokeGlow.destroy();break;case 4:case 8:case 9:game.graphics.layers.crates.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow);}this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),t.c===Network.SERVERPACKET.MOB_DESPAWN_COORDS&&(Mobs.explosion(this.pos,t.type),this.missile&&Sound.updateThruster(1,this,!1))}network(t){this.lastPacket=game.timeNetwork,t.c===Network.SERVERPACKET.MOB_UPDATE&&(this.reducedFactor=Tools.reducedFactor()),this.pos.x=t.posX,this.pos.y=t.posY,null!=t.speedX&&(this.speed.x=t.speedX,this.speed.y=t.speedY),null!=t.accelX&&(this.accel.x=t.accelX,this.accel.y=t.accelY)}visible(t){t==this.visibility&&t!=this.culled||(this.sprites.sprite.visible=t,this.sprites.shadow.visible=t,4!=this.type&&8!=this.type&&9!=this.type&&(this.sprites.thruster.visible=t,this.sprites.thrusterGlow.visible=t),this.visibility=t)}visibilityUpdate(){this.culled=!Graphics.inScreen(this.pos,128),this.visible(!this.culled)}update(a){if(this.visibilityUpdate(),!(!1!==this.reducedFactor&&(a-=this.reducedFactor,this.reducedFactor=!1,0>=a))){var d=.51<a?Math.round(a):1,i=a/d,o,l,u;for(o=0;o<d;o++)if(this.stationary)this.clientCalcs(i);else{l=this.speed.x,u=this.speed.y,this.speed.x+=this.accel.x*i,this.speed.y+=this.accel.y*i;var p=this.speed.length();p>this.maxSpeed&&this.speed.multiply(this.maxSpeed/p),this.state.inactive&&this.speed.multiply(1-.03*i),this.pos.x+=i*l+.5*(this.speed.x-l)*i,this.pos.y+=i*u+.5*(this.speed.y-u)*i,-16384>this.pos.x&&(this.pos.x+=32768),16384<this.pos.x&&(this.pos.x-=32768),-8192>this.pos.y&&(this.pos.y+=16384),8192<this.pos.y&&(this.pos.y-=16384),this.clientCalcs(i)}this.missile&&!this.state.inactive&&Sound.updateThruster(1,this,this.visibility),this.state.inactive&&0<this.sprites.sprite.alpha&&(this.sprites.sprite.alpha-=.2)}}clientCalcs(n){if(!this.forDeletion)switch(this.state.luminosity-=.075*n,0>this.state.luminosity&&(this.state.luminosity=0),this.type){case 1:case 2:case 3:case 5:case 6:case 7:var e=1;if(this.state.inactive){if(this.state.despawnTicker+=.01*n,.75<this.state.despawnTicker,1<this.state.despawnTicker)return void(this.forDeletion=!0);e=Tools.clamp(1-this.state.despawnTicker,.3,1)}if(!this.culled&&.3<e){var a=this.speed.angle()+Math.PI;a-this.spriteRot>=Math.PI?this.spriteRot+=2*Math.PI:this.spriteRot-a>Math.PI&&(this.spriteRot-=2*Math.PI),this.spriteRot=Tools.converge(this.spriteRot,a,.1*n),Particles.missileSmoke(this,this.exhaust,e)}break;case 4:case 8:case 9:if(this.state.inactive&&(this.state.despawnTicker+=.05*n,1<this.state.despawnTicker))return void(this.forDeletion=!0);}}updateGraphics(){switch(this.type){case 1:case 2:case 3:case 5:case 6:case 7:var e=Graphics.shadowCoords(this.pos),a=Tools.oscillator(.1,.5,this.randomness),n=Tools.oscillator(.15,10,this.randomness);Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,this.spriteRot),Graphics.transform(this.sprites.shadow,e.x,e.y,this.spriteRot),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),null,null,null,(.5*this.state.luminosity+.2)*n),Graphics.transform(this.sprites.smokeGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),this.spriteRot),Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-this.spriteRot)*this.exhaust,this.pos.y+Math.cos(-this.spriteRot)*this.exhaust,this.spriteRot,config.mobs[this.type].thruster[0]*a,config.mobs[this.type].thruster[1]*a);break;case 4:case 8:case 9:var r;e=Graphics.shadowCoords(this.pos),r=0==this.state.despawnType?1-this.state.despawnTicker:1+2*this.state.despawnTicker,r*=Tools.oscillator(.08,500,this.randomness),Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y+20*(Tools.oscillator(.08,330,this.randomness)-1.04),null,this.state.baseScale*r,this.state.baseScale*r,1-this.state.despawnTicker),Graphics.transform(this.sprites.shadow,e.x,e.y,null,this.state.baseScaleShadow*r,this.state.baseScaleShadow*r,1-this.state.despawnTicker);}}}!function(){var a={},d=[],t={};Mobs.add=function(e,t){a[e.id]=new r(e),t&&a[e.id].network(e)},Mobs.get=function(e){return a[e]},Mobs.update=function(){var e,r;for(e in a)(r=a[e]).update(game.timeFactor),r.forDeletion?Mobs.destroy(r):r.updateGraphics(game.timeFactor)},Mobs.network=function(e){var t=a[e.id];null==t?Mobs.add(e,!0):t.network(e)},Mobs.despawn=function(e){var t=a[e.id];null!=t&&t.despawn(e.type)},Mobs.destroy=function(e){var t=a[e.id];null!=t&&(t.destroy(e),delete a[e.id])},Mobs.explosion=function(n,e){1===e||5===e||6===e||7===e?Particles.explosion(n,Tools.rand(1,1.2)):2===e?Particles.explosion(n,Tools.rand(1.3,1.6)):3===e?Particles.explosion(n,Tools.rand(.8,1)):void 0;Sound.mobExplosion(n,e)},Mobs.count=function(){var e=0,i=0,o;for(o in a)e++,a[o].culled&&i++;return[e-i,e]},Mobs.wipe=function(){for(var e in a)a[e].destroy({}),delete a[e]},Mobs.countDoodads=function(){return[d.length,config.doodads.length]},Mobs.setupDoodads=function(){config.doodads=config.doodads.concat(config.groundDoodads);for(var t=0;t<config.doodads.length;t++)Mobs.addDoodad(config.doodads[t])},Mobs.addDoodad=function(a){var e=Number.isInteger(a[2]),t=Textures.init((e?"mountain":"")+a[2]);t.scale.set(a[3]),t.position.set(a[0],a[1]),t.visible=!1,a[4]&&(t.rotation=a[4]),a[5]&&(t.alpha=a[5]),a[6]&&(t.tint=a[6]),a[7]=!1,a[8]=t,a[9]=e?0:1},Mobs.getClosestDoodad=function(t){for(var e=2,a=0,s,l;a<d.length;a++)0==(l=d[a])[5]&&Tools.distFastCheckFloat(t.x,t.y,l[0],l[1],256*l[3])&&(s=Tools.distance(t.x,t.y,l[0],l[1])/(256*l[3]))<e&&(e=s);return Tools.clamp(3.333*(e-.5),.2,1)},Mobs.updateDoodads=function(){for(var n=Tools.getBucketBounds(Graphics.getCamera(),512+game.halfScreenX/game.scale,512+game.halfScreenY/game.scale),r=n[0],u;r<=n[1];r++)for(var p=n[2];p<=n[3];p++)for(var c=0;c<game.buckets[r][p][0].length;c++)f=game.buckets[r][p][0][c],u=config.doodads[f],game.state==Network.STATE.LOGIN&&0!=u[9]||Graphics.inScreen(new Vector(u[0],u[1]),256*u[3]+config.overdraw)&&(u[7]||(u[8].visible=!0,u[7]=!0,t[f]||(t[f]=!0,d.push([u[0],u[1],u[2],u[3],f,u[9]]))));for(var h=d.length-1,f;0<=h;h--)f=d[h][4],u=config.doodads[f],Graphics.inScreen(new Vector(u[0],u[1]),256*u[3]+config.overdraw)||u[7]&&(u[8].visible=!1,u[7]=!1,d.splice(h,1),delete t[f])}}(),function(){class e{constructor(e,t,n,a){this.maxParticles=t,this.container=new PIXI.Container,null!=n&&(this.container.blendMode=n),this.particles=[],this.first=-1,this.last=-1,this.emitters={},this.emitterId=0,this.shadow=a,e.addChild(this.container)}addParticle(e,t,n,a,r,i,o,s,d,l,u,p,c,h){if(!(20<game.timeFactorUncapped||this.particles.length>=this.maxParticles)){var y=Textures.sprite(t),f={type:e,sprite:y,speed:n,pos:a,scale:r,alpha:i,rotationSpeed:o,rotation:s,lastRotation:0,time:game.time,tint:d,life:0,data:null==c?0:c,emitter:null==h?null:h,_prev:-1,_next:-1};null!=d&&(y.tint=d),null!=u&&(y.blendMode=u),null!=p&&(f.life=p),null==l?y.anchor.set(.5,.5):y.anchor.set(l.x,l.y),this.container.addChild(y);var g=this.particles.length;0<g?(this.particles[this.last]._next=g,f._prev=this.last,this.last=g):(this.first=g,this.last=g),this.particles.push(f)}}wipe(){this.emitters={},this.emitterId=0;for(var t=0;t<this.particles.length;t++)this.container.removeChild(this.particles[t].sprite),this.particles[t].sprite.destroy();this.particles=[],this.first=-1,this.last=-1}addEmitter(e,t,n,a,r){20<game.timeFactorUncapped||(this.emitters[this.emitterId]={type:e,pos:n,speed:t,life:null==a?0:a,shadowLayer:r},this.emitterId++)}updateEmitters(e){var d,u;for(d in this.emitters){switch((u=this.emitters[d]).type){case n.EMITTER_EXPLOSION_FRAGMENT:u.life+=.02*e,u.speed.multiply(1-.02*e);}if(1<u.life)delete this.emitters[d];else switch(u.pos.x+=u.speed.x*e,u.pos.y+=u.speed.y*e,u.type){case n.EMITTER_EXPLOSION_FRAGMENT:var p=Tools.randInt(1,16),i=.5*(1-u.life),o=1-u.life,s=Tools.rand(-.1,.1),a=Tools.randCircle();this.addParticle(n.FRAGMENT_SMOKE,"smoke_"+p,Vector.zero(),u.pos.clone(),Vector.diag(i),1,s,a,null,null,null,null,o+.2),u.shadowLayer&&u.shadowLayer.addParticle(n.FRAGMENT_SMOKE,"smokeshadow_"+p,Vector.zero(),u.pos.clone(),Vector.diag(i),1,s,a,null,null,null,null,o+.2);}}}destroy(e){var t=this.particles.length;if(0!=t&&!(e>=t)){this.container.removeChild(this.particles[e].sprite),this.particles[e].sprite.destroy();var a=this.particles[e]._prev,n=this.particles[e]._next;return t--,-1==a?this.first=n:this.particles[a]._next=n,-1==n?this.last=a:this.particles[n]._prev=a,e!=t&&(this.particles[e]=this.particles[t],-1==this.particles[e]._prev?this.first=e:this.particles[this.particles[e]._prev]._next=e,-1==this.particles[e]._next?this.last=e:this.particles[this.particles[e]._next]._prev=e),this.particles.splice(t,1),n==t?e:n}}update(e){var t;this.updateEmitters(e);for(var a=this.first;-1!=a;){switch((t=this.particles[a]).type){case n.MISSILE:case n.MISSILE_FAT:case n.MISSILE_SMALL:t.type==n.MISSILE?(t.scale.add(.2*e),t.scale.ceil(2*t.data),t.life+=.05*e):t.type==n.MISSILE_FAT?(t.scale.add(.3*e),t.scale.ceil(3*t.data),t.life+=.05*e):(t.scale.add(.14*e),t.scale.ceil(1.4*t.data),t.life+=.08*e),t.speed.multiply(1-.05*e),t.alpha=.7*(1-t.life),t.sprite.tint=Tools.colorLerp(t.tint,16777215,2*(1-t.life));break;case n.SHOCKWAVE_SMOKE:t.life+=.05*e,t.alpha=.7*Tools.easing.custom(t.life,"shockwave");break;case n.SHOCKWAVE_INNER:case n.SHOCKWAVE_OUTER:t.life+=.05*e;var s=Tools.easing.custom(t.life,"shockwave");t.alpha=.4*s,t.type==n.SHOCKWAVE_OUTER?t.scale.both(4*t.life):t.scale.both(3*t.life);break;case n.EXPLOSION_FLASH:t.life+=.1*e,t.alpha=1-t.life;break;case n.EXPLOSION_FLASH_BIG:t.life+=.04*e,t.alpha=1-t.life;break;case n.EXPLOSION_HOT_SMOKE:t.life+=.035*e,t.alpha=1-t.life,t.scale.add(.05*e),t.speed.multiply(1-.1*e),t.rotationSpeed*=1-.05*e;break;case n.EXPLOSION_SMOKE:t.life+=.01*e,t.alpha=Tools.easing.custom(t.life,"explosionSmoke"),t.scale.add(.05*e),t.speed.multiply(1-.05*e),t.rotationSpeed*=1-.05*e;break;case n.EXPLOSION_SPARK:t.life+=.02*e,t.alpha=2*(1-t.life),t.speed.multiply(1-.05*e),t.rotationSpeed*=1-.05*e;break;case n.FRAGMENT_SMOKE:t.life+=.02*e,t.scale.add(.075*e*t.data),t.scale.ceil(2*t.data),t.rotationSpeed*=1-.05*e,t.alpha=.3*(1-t.life);break;case n.PLANE_DAMAGE:t.life+=.02*e,t.alpha=2*(1-t.life),t.speed.multiply(1-.1*e);}if(1<t.life)a=this.destroy(a);else{if(t.pos.x+=t.speed.x*e,t.pos.y+=t.speed.y*e,t.rotation+=t.rotationSpeed*e,this.shadow){var i=Graphics.shadowCoords(t.pos);t.sprite.position.x=i.x,t.sprite.position.y=i.y,t.sprite.scale.x=t.scale.x/config.shadowScaling,t.sprite.scale.y=t.scale.y/config.shadowScaling,t.sprite.alpha=Tools.clamp(2*t.alpha,0,1)}else t.sprite.position.x=t.pos.x,t.sprite.position.y=t.pos.y,t.sprite.scale.x=t.scale.x,t.sprite.scale.y=t.scale.y,t.sprite.alpha=Tools.clamp(t.alpha,0,1);.03<Math.abs(t.rotation-t.lastRotation)&&(t.sprite.rotation=t.rotation,t.lastRotation=t.rotation),a=this.particles[a]._next}}}}var t={};Math.PI,Particles.setup=function(){t.smoke=new e(game.graphics.layers.smoke,2e4),t.shadows=new e(game.graphics.layers.shadows,2e4,null,!0),t.explosions=new e(game.graphics.layers.explosions,2e4)},Particles.update=function(){for(var a=.51<game.timeFactor?Math.round(game.timeFactor):1,e=game.timeFactor/a,n=0;n<a;n++)t.smoke.update(e),t.explosions.update(e),t.shadows.update(e)},Particles.wipe=function(){t.smoke.wipe(),t.explosions.wipe(),t.shadows.wipe()},Particles.planeDamage=function(e){var a=2==e.type?2:1,r=Tools.randInt(1,4),i=Tools.randCircle(),o=Tools.rand(.5,2),s=Tools.rand(.2,.8),d=Tools.rand(0,.3),l=Vector.createOff(e.pos,i,Tools.rand(0,5*a)),u=Vector.create(i,o);t.explosions.addParticle(n.PLANE_DAMAGE,"spark_"+r,new Vector(u.x+e.speed.x,u.y+e.speed.y),l,Vector.diag(s),0,0,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD,d)},Particles.explosion=function(e,m,r){for(var i=1<m?1+(m-1)/1.5:m,o=0;2>o;o++)t.explosions.addParticle(n.EXPLOSION_FLASH,"flash_"+Tools.randInt(1,4),Vector.zero(),e.clone(),Vector.diag(1.5*m),0,0,Tools.randCircle(),15987628,null,PIXI.BLEND_MODES.ADD);var y,_,b,x,v,T,E,S,w;for(y=Math.round(Tools.rand(20,30)*m),o=0;o<y;o++)_=Tools.randInt(1,4),b=Tools.randCircle(),v=Tools.rand(3,10)*i,T=Tools.rand(-.2,.2),E=Tools.rand(.4,1.5)*i,w=Tools.rand(0,.3),t.explosions.addParticle(n.EXPLOSION_SPARK,"spark_"+_,Vector.create(b,v),e.clone(),Vector.diag(E),0,T,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD,w);for(o=0;o<r;o++)b=Tools.randCircle(),v=Tools.rand(3,7)*i,x=Tools.rand(15,30)*m,t.explosions.addEmitter(n.EMITTER_EXPLOSION_FRAGMENT,Vector.create(b,v),Vector.createOff(e,b,x),Tools.rand(0,.5),t.shadows);for(y=Math.round(Tools.rand(20,30)*m),o=0;o<y;o++)_=Tools.randInt(1,16),b=Tools.randCircle(),x=Tools.rand(0,10)*m,v=Tools.rand(0,3)*m,T=Tools.rand(-.1,.1),E=Tools.rand(.5,.8)*m,S=Tools.randCircle(),config.disableSmoke||t.explosions.addParticle(n.EXPLOSION_SMOKE,"smoke_"+_,Vector.create(b,v),Vector.createOff(e,b,x),Vector.diag(E),0,T,S),config.disableSmoke||t.shadows.addParticle(n.EXPLOSION_SMOKE,"smokeshadow_"+_,Vector.create(b,v),Vector.createOff(e,b,x),Vector.diag(E),0,T,S);for(t.explosions.addParticle(n.EXPLOSION_FLASH_BIG,"glowsmall",Vector.zero(),e.clone(),Vector.diag(6*m),0,0,0,null,null,PIXI.BLEND_MODES.ADD),y=Math.round(Tools.rand(5,10)*m),o=0;o<y;o++)_=Tools.randInt(1,4),b=Tools.randCircle(),v=Tools.rand(1,3)*m,T=Tools.rand(-.1,.1),E=Tools.rand(.1,.3)*m,t.explosions.addParticle(n.EXPLOSION_HOT_SMOKE,"hotsmoke_"+_,Vector.create(b,v),e.clone(),Vector.diag(E),0,T,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD)},Particles.missileSmoke=function(p,e,r){var f=[null,n.MISSILE,n.MISSILE_FAT,n.MISSILE_SMALL,null,n.MISSILE,n.MISSILE,n.MISSILE][p.type],o=p.spriteRot+Math.PI,s=Vector.createOff(p.pos,o,e),a=.2*(r=r||1),l=Tools.rand(-.1,.1),u=Vector.create(o+l,5*r),c=Tools.randInt(1,16),h=Tools.rand(-.1,.1);Tools.randCircle(),t.smoke.addParticle(f,"smoke_"+c,u.clone(),s.clone(),new Vector(1.25*a,4*a),1,h,o,16775590,null,null,null,r),t.shadows.addParticle(f,"smokeshadow_"+c,u.clone(),s.clone(),new Vector(1.25*a,4*a),1,h,o,null,null,null,null,r)},Particles.planeBoost=function(e,r){var i=e.rot+e.state.thrustDir/2+Math.PI,o=Vector.createOff(e.pos,i,r?40:-20),d=Tools.rand(-.1,.1),s=r?0:Math.PI,a=Vector.create(i+d+s,6),l=Tools.randInt(1,16),u=Tools.rand(-.1,.1);Tools.randCircle(),t.smoke.addParticle(n.MISSILE,"smoke_"+l,a.clone(),o.clone(),new Vector(.3,1.2),1,u,i,16775590,null,null,null,1.2),t.shadows.addParticle(n.MISSILE,"smokeshadow_"+l,a.clone(),o.clone(),new Vector(.3,1.2),1,u,i,null,null,null,null,1.2)},Particles.spiritShockwave=function(e){for(var a=0,r,o;40>a;a++)o=2*(a/40)*Math.PI,r=Tools.randInt(1,16),t.explosions.addParticle(n.SHOCKWAVE_SMOKE,"smoke_"+r,Vector.create(o,8),e.clone(),Vector.diag(2),0,.4,Tools.randCircle());t.explosions.addParticle(n.SHOCKWAVE_INNER,"shockwave",Vector.zero(),e.clone(),Vector.zero(),0,0,-.35+Math.PI),t.explosions.addParticle(n.SHOCKWAVE_OUTER,"shockwave",Vector.zero(),e.clone(),Vector.zero(),0,0,-.35)},Particles.count=function(){var a=0;for(var r in t)a+=t[r].particles.length;return a};var n={MISSILE:0,MISSILE_FAT:1,MISSILE_SMALL:2,SHOCKWAVE_SMOKE:3,SHOCKWAVE_INNER:4,SHOCKWAVE_OUTER:5,EXPLOSION_FLASH:6,EXPLOSION_FLASH_BIG:7,EXPLOSION_SMOKE:8,EXPLOSION_HOT_SMOKE:9,EXPLOSION_SPARK:10,FRAGMENT_SMOKE:11,PLANE_DAMAGE:12,EMITTER_EXPLOSION_FRAGMENT:100};Particles.PTYPE=n}(),function(){var W={},z={},V=null,q=!1,K=0,e=!1,Z=-1,Q=0,J=!1,ee=0,te=!1,ne=null,ae=!1,re=null,ie=!1,oe=!1,se=!1,de=null,le=0,ue=!1,pe=!1,ce=null,he=!1,fe=null,ge={x:0,y:0,width:0,height:0},E={alert:null,information:null,default:null,destroyed:null},S={alert:!1,information:!1,default:!1,destroyed:!1},I={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},me=!1,ye={},_e=[],be=0,xe={1:["Predator",80,50,75,60,"BOOST","Temporarily increases speed by burning energy"],2:["Goliath",30,100,30,100,"REPEL","Repels enemy aircraft and missiles"],3:["Mohawk",100,40,100,40,"STRAFE","Enables sideways flight"],4:["Tornado",60,70,50,80,"MULTIFIRE","Launches 3 missiles at the same time"],5:["Prowler",50,70,40,60,"STEALTH","Becomes invisible to enemy aircraft"],101:["Speed"],102:["Defense"],103:["Energy Regen"],104:["Missile Speed"]},R=["tf","pepe","clap","lol","bro","kappa","cry","rage"],D=["","Shield","Inferno"];game.tooltipValues=xe,UI.show=function(n,e){$(n).css({display:e?"inline-block":"block"})},UI.hide=function(t){$(t).css({display:"none"})},UI.isEmote=function(a,e){for(var t=0;t<R.length;t++)if(e){if(a===":"+R[t]+":")return R[t];}else if(a===R[t])return R[t];return!1},UI.serverMessage=function(n){var e="alert";2==n.type&&(e="information"),UI.showMessage(e,n.text,n.duration)},UI.showMessage=function(a,e,t){$("#msg-"+a).removeClass("hidemsg").removeClass("popmsg"),$("#msg-"+a).html(e);var n=$("#msg-"+a).height();"default"!=a&&"destroyed"!=a||$("#msg-"+a).css({"margin-top":"-"+Math.round(n/2)+"px"}),$("#msg-"+a).addClass("popmsg"),S[a]=!0,clearTimeout(E[a]),E[a]=setTimeout(UI.hideMessage,t||2e3,a)},UI.hideMessage=function(n){$("#msg-"+n).addClass("hidemsg"),S[n]=!1,E[n]=setTimeout(function(e){$("#msg-"+n).removeClass("popmsg").removeClass("hidemsg"),$("#msg-"+e).html("")},2500,n)},UI.wipeAllMessages=function(){for(var t in S)S[t]&&UI.showMessage(t,"",100)},UI.updateMyLevel=function(t){game.myLevel=t,$("#score-rank").html(t),$("#lifetime-rank").html(t)},UI.newScore=function(a){if(a.id!=game.myID)return!1;var e=a.score-game.myScore,d="";if(1>Math.abs(e)&&(e=!1),game.myScore=a.score,a.score!=I.score&&(I.score=a.score,$("#score-score").html(a.score)),a.upgrades!=I.upgrades){var l=a.upgrades-I.upgrades,r=-1!=I.upgrades;if(I.upgrades=a.upgrades,$("#score-upgrades").html(a.upgrades),G(),r&&0<l){if(Sound.powerup(4,null),me&&(me.msg+="<br>"),S.default)return d+="&nbsp;&nbsp;<span class=\"upgrade\">+"+l+"</span>",void $("#alert-update").append(d);d+="<span id=\"alert-update\"><span class=\"upgrade\">+"+l+"<span class=\"bold\"> upgrade</span></span></span>"}}if(a.earnings!=I.earnings&&0!=game.myLevel){I.earnings=a.earnings,$("#lifetime-totalbounty").html(a.earnings);var i=Math.ceil(Tools.rankToEarnings(game.myLevel+1)-a.earnings);$("#lifetime-nextbounty").html("+"+i)}if(a.totalkills!=I.kills||a.totaldeaths!=I.deaths){var o=0==a.totalkills||0==a.totaldeaths?"-":(a.totalkills/a.totaldeaths).toFixed(2);$("#lifetime-kdratio").html(o)}a.totalkills!=I.kills&&(I.kills=a.totalkills,$("#lifetime-kills").html(a.totalkills)),a.totaldeaths!=I.deaths&&(I.deaths=a.totaldeaths,$("#lifetime-deaths").html(a.totaldeaths)),e&&(me&&(me.msg+="<br>"),d+=UI.getScoreString(e)),me?(UI.showMessage(me.type,me.msg+d,me.duration),me=!1):""!=d&&UI.showMessage("default",d,3e3)},UI.getScoreString=function(n,e){var t="positive",a="+";return 0>n&&(t="negative",a="-"),e&&(t=e),"<span id=\"alert-update\" class=\""+t+"\">"+a+Math.abs(n)+"</span>"};var k=function(t){t.sprite.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-t.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-t.y)/16384))};UI.wipeAllMinimapMobs=function(){for(var e in W)game.graphics.layers.ui1.removeChild(W[e].sprite),W[e].sprite.destroy(),delete W[e]},UI.showSpectator=function(n){if(!he){var e=config.mobile?" class=\"mobile\"":"";$("body").append("<div id=\"spectator\""+e+"></div>"),he=!0}$("#spectator").html(n),Input.addTouchRejection("#spectator")},UI.hideSpectator=function(){he&&($("#spectator").remove(),he=!1)},UI.addPowerup=function(a,e){null!=ce&&clearTimeout(ce);var t="<div class=\"powerup\" id=\"powerup-"+a+"\"><div class=\"percent "+(1==a?"shield":"rampage")+"\" id=\"powerup-"+a+"-percent\" style=\"transition: width "+e+"ms linear;\"></div><div class=\"name\">"+D[a]+"</div></div>";$("#powerups").html(t),$("#powerup-"+a+"-percent").width(),$("#powerup-"+a+"-percent").css({width:"7%"}),ce=setTimeout(function(){$("#powerup-"+a).remove()},e)},UI.resetPowerups=function(){$("#powerups").html("")},UI.changeMinimapTeam=function(e,t){if(null!=W[e]&&null!=W[e].sprite){var n=1==t?"minimapBlue":"minimapMob";W[e].sprite.texture=Textures.getNamed(n)}},UI.getMinimapMobs=function(){return W},UI.scoreboardUpdate=function(e,t,n){for(var a in W)game.graphics.layers.ui1.removeChild(W[a].sprite),game.graphics.layers.ui2.removeChild(W[a].sprite),game.graphics.layers.ui3.removeChild(W[a].sprite),W[a].sprite.destroy(),delete W[a];var r=0,o="",s={},d=!1,l=0,u={},p="",c="",h="",f=0,g,m,y,_,b;for(f=0;f<t.length;f++)g=Players.get(t[f].id),null!=g&&(u=Tools.decodeMinimapCoords(t[f].x,t[f].y),g.scorePlace=f+1,g.lowResPos.x=u.x,g.lowResPos.y=u.y,g.removedFromMap=0==t[f].x&&0==t[f].y,t[f].id==game.myID?l=f+1:(0!=t[f].x||0!=t[f].y)&&(s[g.id]=!0,null==W[t[f].id]?(h="minimapMob",2==game.gameType&&1==g.team&&(h="minimapBlue"),0==f&&(h="minimap1"),1==f&&(h="minimap2"),2==f&&(h="minimap3"),SWAM.targetedPlayer==g.id&&(h="minimapTarget"),W[t[f].id]={sprite:Textures.init(h),x:u.x,y:u.y}):(W[t[f].id].x=u.x,W[t[f].id].y=u.y),k(W[t[f].id])));for(var x in W)null==s[x]&&(game.graphics.layers.ui1.removeChild(W[x].sprite),W[x].sprite.destroy(),delete W[x]);if(!SWAM.Settings.ui.useExtendedScoreboard&&0!=l){for(n=n?Tools.clamp(n,1,e.length):e.length,f=0;f<n&&!d;f++)g=Players.get(e[f].id),null==g||(r++,m=1==r?"<span class=\"badge scoreboard gold\"></span>":2==r?"<span class=\"badge scoreboard silver\"></span>":3==r?"<span class=\"badge scoreboard bronze\"></span>":r+".",y=g.me()?" sel":"",_=e[f].score,b=e[f].level,l>n&&r==n-1&&(o+="<div class=\"line dottedline\">&middot; &middot; &middot;</div>",g=Players.get(game.myID),m=l+".",_=game.myScore,b=game.myLevel,y=" sel",d=!0),p="",2==game.gameType&&(p=" team-"+g.team),c="",4==(m+"").length&&(c=" bigger"),o+="<div class=\"line"+y+"\" data-playerid=\""+g.id+"\"><span class=\"place"+c+"\">"+m+"</span><span class=\"flag small flag-"+g.flag+"\"></span><span class=\"nick"+p+"\">"+(g.removedFromMap?UI.escapeHTML(g.name).strike():UI.escapeHTML(g.name))+"</span>"+(0==b?"":"<span class=\"holder\">&nbsp;<span class=\"rank\">"+b+"</span></span>")+"<span class=\"score\">"+L(_)+"</span></div>");$("#scoreboard").html(o)}};var L=function(a){var r="";a+="";for(var i=0;i<a.length;i++)r+="<span>"+a[i]+"</span>";return r};UI.toggleChatBox=function(n){if(!config.mobile)if(q){if(q=!1,n){var e=$("#chatinput").val();""!==e&&""!==e.trim()&&(UI.parseCommand(e.trim())||Network.sendChat(e)),N()}UI.hide("#chatinput"),$("#chatinput").val(""),$("#chatinput").blur()}else J&&UI.maximizeChat(),Input.clearKeys(!0),q=!0,UI.show("#chatinput"),$("#chatinput").focus()},UI.shortcutChat=function(t){q||($("#chatinput").val(t),UI.toggleChatBox())};var N=function(){e||(e=!0,$("#chat-0").length&&$("#chat-0").remove())};UI.parseCommand=function(a){if("/"!==a[0])return!1;var e=a.split(" "),t=e[0].substr(1).toLowerCase();if(0==t.length)return!1;if("s"===t){var n=a.indexOf(" "),d=a.substr(n+1);0<d.length&&Network.sendSay(d)}else if("t"===t){n=a.indexOf(" ");var i=a.substr(n+1);0<i.length&&Network.sendTeam(i)}else if("ignore"===t)null==(o=Players.getByName(j(e[1])))?UI.addChatMessage("Unknown player"):UI.chatIgnore(o.id);else if("unignore"===t)null==(o=Players.getByName(j(e[1])))?UI.addChatMessage("Unknown player"):UI.chatUnignore(o);else if("votemute"===t)null==(o=Players.getByName(j(e[1])))?UI.addChatMessage("Unknown player"):UI.chatVotemute(o);else if("w"===t)3<=e.length?UI.chatWhisper(e[1],a.substr(4+e[1].length)):UI.addChatMessage("Usage: /w player message");else if("spectate"===t){var o;null==(o=Players.getByName(j(e[1])))?UI.addChatMessage("Unknown player"):Network.sendCommand("spectate",o.id+"")}else"flag"===t||"flags"===t?2==e.length?Network.sendCommand("flag",a.substr(t.length+2)):UI.addChatMessage("Type /flag XX where XX is the 2-letter ISO code of a country",!0):"emotes"===t?UI.addChatMessage("Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage",!0):"help"===t?UI.toggleHelp():"debug"===t||(UI.isEmote(t)?Network.sendSay(":"+t+":"):Network.sendCommand(t,a.substr(t.length+2)));return!0},UI.addChatLine=function(t,e,i,r=!0){if(!z[t.id]){if(r&&(e=UI.escapeHTML(e)),K++,0==i){var s="";2==game.gameType&&(s="style = 'color: "+(1==t.team?"#4076E2":"#EA4242")+";' ");var d="<div id=\"chat-"+K+"\" class=\"line\"><span class=\"playersel\" data-playerid=\""+t.id+"\"><span class=\"flag small flag-"+t.flag+"\"></span><span class=\"nick\" "+s+" >"+UI.escapeHTML(t.name)+"</span></span><span class=\"text\">"+e+"</span></div>"}else if(1==i||2==i){var l=1==i?"TO":"FROM";2==i&&(fe=B(t.name)),d="<div id=\"chat-"+K+"\" class=\"line\"><span class=\"tag whisper\">"+l+"</span><span class=\"playersel\" data-playerid=\""+t.id+"\"><span class=\"nick green\">"+UI.escapeHTML(t.name)+"</span></span><span class=\"text green\">"+e+"</span></div>",Z=-1}else d="<div id=\"chat-"+K+"\" class=\"line\"><span class=\"tag team\">TEAM</span><span class=\"playersel\" data-playerid=\""+t.id+"\"><span class=\"nick blue\">"+UI.escapeHTML(t.name)+"</span></span><span class=\"text blue\">"+e+"</span></div>",Z=-1;var a="#chat-"+(K-config.maxChatLines);if($(a).length&&$(a).remove(),$("#chatlines").append(d),J)ee++,$("#chatunreadlines").html(ee),1==ee&&UI.show("#chatunreadlines",!0);else{var u=$("#chatbox");1!=i&&2!=i&&t.id!=game.myID&&u.is(":hover")||(u.perfectScrollbar("update"),u.scrollTop(u[0].scrollHeight))}}},UI.addChatMessage=function(a,e){Q=0,Z=-1;var t="<div id=\"chat-"+ ++K+"\" class=\"line\">"+(e?"":"<span class=\"nick\">\u26A0</span>")+"<span class=\"text\">"+a+"</span></div>",n="#chat-"+(K-config.maxChatLines);$(n).length&&$(n).remove(),$("#chatlines").append(t);var r=$("#chatbox");r.perfectScrollbar("update"),r.scrollTop(r[0].scrollHeight)},UI.showChatLevel=function(n){var e=null;2==n?e="Type /flag XX where XX is the 2-letter ISO code of a country":3==n?e="Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage":4==n&&(e="Flag Pack #1: communist confederate imperial rainbow jolly"),null!=e&&UI.addChatMessage(e,!0)},UI.updateStats=function(a){var e=a.playerstotal,t="";t+="<div class=\"item\"><span class=\"icon-container\"><div class=\"icon players\"></div></span><span class=\"greyed\">"+a.playersgame+"&nbsp;/&nbsp;</span>"+e+"<span class=\"icon-container padded\"><div class=\"icon ping\"></div></span>"+a.ping+"<span class=\"millis\">ms</span></div>",$("#gameinfo").html(t),game.ping=a.ping},UI.sayLine=function(t){Players.say(t)},UI.escapeHTML=function(t){return(""+t).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/`/g,"&#x60;")};var U=function(){var n=window.innerWidth,e=window.innerHeight;n==game.screenX&&e==game.screenY||(clearTimeout(V),V=setTimeout(function(){Graphics.resizeRenderer(n,e)},250))};UI.controlKey=function(a,e,t){if(game.state!=Network.STATE.PLAYING)return!0;if(t)if(13!=a){if(27==a)return q&&UI.toggleChatBox(!1),void UI.closeAllPanels();191==a?UI.shortcutChat("/"):75==a?Input.toggleKeybinds():"SHOWSCORE"===e?UI.toggleScore():"MAINMENU"===e?UI.toggleMainMenu():"SHOWGAMES"===e?Games.toggleGames():"FULLSCREEN"===e?(Graphics.toggleFullscreen(),Input.clearKeys()):"MINIMIZECHAT"===e?UI.minimizeChat():"MAXIMIZECHAT"===e?UI.maximizeChat():"SAY"===e?UI.shortcutChat("/s "):"TEAM"===e?UI.shortcutChat("/t "):"REPLY"===e?null!=fe&&UI.shortcutChat("/w "+fe+" "):"SPECTATE"===e?Network.spectateForce():"UPGRADE1"===e?UI.selectUpgrade(1):"UPGRADE2"===e?UI.selectUpgrade(2):"UPGRADE3"===e?UI.selectUpgrade(3):"UPGRADE4"===e?UI.selectUpgrade(4):"SOUND"===e?Sound.toggle():"HELP"===e?UI.toggleHelp():"INVITE"===e?UI.toggleInvite():"MOUSEMODE"===e?Input.toggleMouse():void 0}else UI.toggleChatBox(!0)},UI.chatBoxOpen=function(){return q},UI.setupMinimap=function(){game.graphics.gui.minimap=Textures.init("minimap"),game.graphics.gui.minimap_box=Textures.init("minimapBox"),UI.resizeMinimap(),UI.visibilityMinimap(!1)},UI.visibilityMinimap=function(t){game.graphics.gui.minimap.visible=t,game.graphics.gui.minimap_box.visible=t},UI.resizeMinimap=function(){for(var e in game.graphics.gui.minimap.scale.set(config.minimapSize/512),game.graphics.gui.minimap.position.set(game.screenX-config.minimapPaddingX,game.screenY-config.minimapPaddingY),game.graphics.gui.minimap_box.scale.set(.03+2*config.minimapSize*(game.screenX/game.scale/32768)/64,.03+config.minimapSize*(game.screenY/game.scale/16384)/64),W)k(W[e]);Games.update(!0)},UI.setupHUD=function(){game.graphics.gui.hudHealth_shadow=Textures.init("hudHealth_shadow"),game.graphics.gui.hudHealth=Textures.init("hudHealth"),game.graphics.gui.hudHealth_mask=Textures.init("hudHealth_mask"),game.graphics.gui.hudHealth_mask.blendMode=PIXI.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudHealth.rotation=-1.5,game.graphics.gui.hudHealth.position.set(330,174),game.graphics.gui.hudHealth_mask.position.set(330,174),game.graphics.gui.hudEnergy_shadow=Textures.init("hudEnergy_shadow"),game.graphics.gui.hudEnergy=Textures.init("hudEnergy"),game.graphics.gui.hudEnergy_mask=Textures.init("hudEnergy_mask"),game.graphics.gui.hudEnergy_mask.blendMode=PIXI.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudEnergy.position.set(-250,174),game.graphics.gui.hudEnergy_mask.position.set(-250,174),game.graphics.gui.hudHealth_mask.visible=!1,game.graphics.gui.hudEnergy_mask.visible=!1,UI.resizeHUD(),UI.visibilityHUD(!1)},UI.visibilityHUD=function(t){game.graphics.gui.hudHealth_shadow.visible=t,game.graphics.gui.hudHealth.visible=t,game.graphics.gui.hudEnergy_shadow.visible=t,game.graphics.gui.hudEnergy.visible=t},UI.resizeHUD=function(){var a=.5*game.scale,e=game.halfScreenX-30*game.scale,t=game.halfScreenX+30*game.scale;game.graphics.gui.hudHealth_shadow.scale.set(a),game.graphics.gui.hudEnergy_shadow.scale.set(a),game.graphics.gui.hudHealth_shadow.position.set(e,game.halfScreenY),game.graphics.gui.hudEnergy_shadow.position.set(t,game.halfScreenY),game.graphics.gui.hudSpriteHealth.scale.set(a),game.graphics.gui.hudSpriteHealth.position.set(e,game.halfScreenY),game.graphics.gui.hudSpriteEnergy.scale.set(a),game.graphics.gui.hudSpriteEnergy.position.set(t,game.halfScreenY)},UI.selectAircraft=function(t){Network.sendCommand("respawn",t+"")},UI.aircraftSelected=function(n){n=parseInt(n);for(var a=1;5>=a;a++)a==n?$("#selectaircraft-"+a).addClass("sel"):$("#selectaircraft-"+a).removeClass("sel")},UI.killed=function(a){var e=null==a.level?"":"<span class=\"level\">"+a.level+"</span>";(1500<game.time-be||6<=_e.length)&&(_e=[]),be=game.time,_e.push([a.flag,a.name,e]);for(var t="",o="",s=0;s<_e.length;s++)o=_e[s][1],1!=_e.length&&10<o.length&&(o=o.substr(0,10)+"..."),t+="<span class=\"player\"><span class=\"flag big flag-"+_e[s][0]+"\"></span>"+UI.escapeHTML(o)+_e[s][2]+"</span>";me={type:"default",duration:3e3,msg:"You have destroyed"+t}},UI.killedBy=function(n){var e=null==n.level?"":"<span class=\"level\">"+n.level+"</span>";me={type:"destroyed",duration:3e3,msg:"Destroyed by<span class=\"playerbig\"><span class=\"flag big flag-"+n.flag+"\"></span>"+UI.escapeHTML(n.name)+e+"</span>"}},UI.errorHandler=function(t){switch(t.error){case 1:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Packet flooding detected",2e4),Network.receivedError(t.error);break;case 2:UI.showMessage("alert","<span class=\"info\">BANNED</span>Packet flooding detected",2e4),Network.receivedError(t.error);break;case 3:UI.showMessage("alert","<span class=\"info\">BANNED</span>You have been globally banned",2e4),Network.receivedError(t.error);break;case 4:Network.receivedError(t.error),Games.redirRoot();break;case 5:UI.showMessage("alert","<span class=\"info\">RESPAWN</span>Full health and 2 seconds of inactivity required",3e3);break;case 6:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>AFK for more than 10 minutes<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",72e5),Network.receivedError(t.error);break;case 7:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>You have been kicked out",2e4),Network.receivedError(t.error);break;case 8:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Invalid login data",2e4),Network.receivedError(t.error);break;case 9:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Incorrect protocol level<br>Please clear your browser cache and refresh",2e4),Network.receivedError(t.error);break;case 10:UI.showMessage("alert","<span class=\"info\">BANNED</span>Account banned",2e4),Network.receivedError(t.error);break;case 11:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Account already logged in<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",2e4),Network.receivedError(t.error);break;case 12:UI.showMessage("alert","<span class=\"info\">RESPAWN</span>Cannot respawn or change aircraft in a Battle Royale game",3e3);break;case 13:UI.showMessage("alert","<span class=\"info\">SPECTATE</span>Full health and 2 seconds of inactivity required",3e3);break;case 20:UI.showMessage("information","<span class=\"info\">UPGRADE</span>Not enough upgrade points",3e3);break;case 30:UI.addChatMessage("Chat throttled to prevent spamming");break;case 31:UI.showMessage("alert","<span class=\"info\">THROTTLED</span>Flag change too fast");break;case 100:UI.addChatMessage("Unknown command");}},UI.showCommandReply=function(a){if(0==a.type)UI.addChatMessage(UI.escapeHTML(a.text));else{var e=JSON.stringify(JSON.parse(a.text),null,"    "),t="<div class=\"close\" onclick=\"$(this).parent().remove()\"></div><div class=\"text\"><pre>"+UI.escapeHTML(e)+"</pre></div>";$("body").append("<div id=\"debugpopup\" oncontextmenu=\"event.stopPropagation()\">"+t+"</div>")}},UI.updateHUD=function(a,i,o){a=Tools.clamp(a,0,1),i=Tools.clamp(i,0,1),game.graphics.gui.hudHealth.rotation=-1.1*(1-a),game.graphics.gui.hudEnergy.rotation=Math.PI+1.1*(1-i),game.graphics.gui.hudHealth.tint=.5<a?Tools.colorLerp(13487404,2591785,2*(a-.5)):Tools.colorLerp(12201261,13487404,2*a);var n=3374821;o&&(n=i<config.ships[o.type].energyLight?2841755:3374821),game.graphics.gui.hudEnergy.tint=n},UI.minimizeChat=function(t){J||(q&&UI.toggleChatBox(),J=!0,ee=0,UI.hide("#chatbox"),UI.hide("#chatunreadlines"),UI.show("#maximizechat"),t&&t.stopPropagation())},UI.maximizeChat=function(){if(J){J=!1,UI.hide("#maximizechat"),UI.hide("#chatunreadlines"),UI.show("#chatbox");var t=$("#chatbox");t.scrollTop(t[0].scrollHeight)}},UI.closeScore=function(){te&&(UI.hidePanel("#scoredetailed"),te=!1,clearInterval(ne))},UI.openScore=function(){te||(UI.closeAllPanels("score"),UI.showPanel("#scoredetailed"),te=!0,Network.getScores(),clearInterval(ne),ne=setInterval(Network.getScores,5e3))},UI.toggleScore=function(){te?UI.closeScore():UI.openScore()},UI.openLogin=function(){pe||(UI.showPanel("#loginselector"),pe=!0,Games.closeDropdowns())},UI.closeLogin=function(){pe&&(UI.hidePanel("#loginselector"),pe=!1)},UI.showPanel=function(a){var e=.9,r=1;config.phone&&(e*=.7,r*=.7),$(a).css({display:"block",opacity:"0",transform:"scale("+e+")","pointer-events":"auto"}),$(a).width(),$(a).css({opacity:"1",transform:"scale("+r+")",transition:"all 0.75s cubic-bezier(0.23, 1, 0.32, 1)"}),"#custom-msg"!=a&&Sound.UIClick()},UI.hidePanel=function(a,i,t){if("#custom-msg"!=a||$("#custom-msg").length){var e=.9;config.phone&&(e*=.7),$(a).css({opacity:"0",transform:"scale("+e+")","pointer-events":"none"}),Sound.UIClick(),setTimeout(function(n){if("#mainmenu"===n?!oe:"#scoredetailed"===n?!te:"#howtoplay"===n?!ie:"#invitefriends"===n?!ue:"#loginselector"===n?!pe:!i){if(t)return void $(n).remove();$(n).css({display:"none",transform:"none",transition:"none"})}},800,a)}},UI.openInvite=function(){ue||(UI.closeAllPanels("invite"),game.inviteLink="https://airma.sh/#"+game.playRegion+"-"+game.playRoom,$("#invite-link").html(game.inviteLink),$("#invite-link").attr("href",game.inviteLink),UI.showPanel("#invitefriends"),ue=!0)},UI.closeInvite=function(){ue&&(UI.hidePanel("#invitefriends"),ue=!1)},UI.toggleInvite=function(){ue?UI.closeInvite():UI.openInvite()},UI.closeMainMenu=function(){oe&&(UI.hidePanel("#mainmenu"),oe=!1)},UI.updateMainMenuSettings=function(){config.settings.hidpi?$("#mainmenu-hidpi-tick").addClass("ticked"):$("#mainmenu-hidpi-tick").removeClass("ticked")},UI.openMainMenu=function(){oe||(UI.closeAllPanels("mainmenu"),UI.updateMainMenuSettings(),UI.showPanel("#mainmenu"),oe=!0)},UI.toggleMainMenu=function(){oe?UI.closeMainMenu():UI.openMainMenu()},UI.closeAllPanels=function(t){"mainmenu"!==t&&UI.closeMainMenu(),"score"!==t&&UI.closeScore(),"help"!==t&&UI.hideHelp(),"games"!==t&&Games.closeGames(),"invite"!==t&&UI.closeInvite(),"login"!==t&&UI.closeLogin(),"keybinds"!==t&&Input.closeKeybinds(),$("#custom-msg").length&&UI.hidePanel("#custom-msg",!1,!0)};var F=function(t){return 1e3>(t=Math.round(t))?t:1e5>t?(t/1e3).toFixed(1)+" K":1e6>t?Math.round(t/1e3)+" K":(t/1e6).toFixed(1)+" M"};UI.updateScore=function(c){if(te){var e=c.scores,t=["gold","silver","bronze"];e.sort(function(n,e){return e.score-n.score});var n=[["name","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["damage","Damage"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]];c.c==Network.SERVERPACKET.SCORE_DETAILED_BTR?n=[["name","&nbsp;"],["wins","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]]:c.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(n=[["name","&nbsp;"],["captures","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]]);for(var _="",b=0;b<n.length;b++)_+="<div class=\""+n[b][0]+"\">"+n[b][1]+"</div>";for(var x="",T="",E=-1,S=-1,w=0,C,M,P;w<e.length;w++)null!=(C=Players.get(e[w].id))&&(M=2>=w?"&nbsp;<div class=\"badge detail "+t[w]+"\"></div>":w+1+".",P=C.me()?" sel":"",x=c.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" team-"+C.team:c.c!=Network.SERVERPACKET.SCORE_DETAILED_BTR||e[w].alive?"":" inactive",T+="<div class=\"item"+P+"\" data-playerid=\""+C.id+"\"><div class=\"name\"><div class=\"position\">",T+=M+"</div><div class=\"flag small flag-"+C.flag+"\"></div>",T+="<div class=\"player"+x+"\">"+(C.removedFromMap?UI.escapeHTML(C.name).strike():UI.escapeHTML(C.name))+"</div></div>",c.c==Network.SERVERPACKET.SCORE_DETAILED_BTR&&(0==e[w].wins?T+="<div class=\"wins\">&nbsp;</div>":T+="<div class=\"wins\">"+e[w].wins+"<div class=\"wins-container\">&nbsp;<div class=\"wins-icon\"></div></div></div>"),c.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(0==e[w].captures?T+="<div class=\"captures\">&nbsp;</div>":T+="<div class=\"captures\">"+e[w].captures+"<div class=\"captures-container\">&nbsp;<div class=\"captures-icon\"></div></div></div>"),T+="<div class=\"kills\">"+e[w].kills+"</div>",T+="<div class=\"deaths\">"+e[w].deaths+"</div>",c.c==Network.SERVERPACKET.SCORE_DETAILED&&(T+="<div class=\"damage\">"+F(e[w].damage)+"</div>"),T+="<div class=\"bounty\">"+e[w].score+"</div>",T+="<div class=\"rank\">"+(0==e[w].level?"&nbsp;":e[w].level)+"</div>",T+="<div class=\"ping\">"+e[w].ping+"<span class=\"ms\">ms</span></div>",T+="</div>",c.c==Network.SERVERPACKET.SCORE_DETAILED?e[w].damage>E&&(E=e[w].damage,S=C):c.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?e[w].captures>E&&(E=e[w].captures,S=C):e[w].kills>E&&(E=e[w].kills,S=C));var A="",I="";if(1<e.length&&(A="&bull;&nbsp;&nbsp;"+e.length+" players",0<E)){if(c.c==Network.SERVERPACKET.SCORE_DETAILED)var R=F(E),D=" damage";else R=E+"",D=c.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" capture":" kill",1<E&&(D+="s");I="<div class=\"mvpbadge\">MVP</div><div class=\"flag flag-"+S.flag+"\"></div><div class=\"name\">"+UI.escapeHTML(S.name)+"</div><div class=\"damage\">&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+R+D+"</div>"}$("#scoreplayers").html(A),$("#scoretable").html(_),$("#scorecontainer").html(T),$("#scoremvp").html(I)}},UI.popMenu=function(t,e){function n(e,n){var a={},r={},i={},o={};return i.x=n.outerWidth(),i.y=n.outerHeight(),a.x=e.pageX,a.y=e.pageY,o=$(t.target).parent().offset(),r.x=o.left+i.x>$(window).width()+$(window).scrollLeft()?$(window).width()-i.x:o.left,r.y=a.y+i.y>$(window).height()+$(window).scrollTop()?a.y-i.y:a.y,n.css({top:r.y,left:r.x,zIndex:1e3}),r}if(game.state==Network.STATE.LOGIN)return Games.closeDropdowns(),void UI.closeLogin();e||game.state!=Network.STATE.PLAYING||UI.closeAllPanels();var a=$(t.target).parent().data("playerid");if(null==a&&(a=$(t.target).data("playerid")),$(t.target).parents("#chatlines").length&&(e=!0),null!=a&&a!=game.myID&&e){var i=Players.get(a);if(null==i)return!0;var o={left:"20px",top:$(t.target).parent()[0].getBoundingClientRect().top-166+"px"};ae||(o.display="block",ae=!0);let e=null==z[i.id]?"Ignore":"Unignore",r="<div class=\"header\">"+UI.escapeHTML(i.name)+"</div><div class=\"item\" onclick=\"UI.contextWhisper()\">Whisper</div><div class=\"item\" onclick=\"UI.context"+e+"()\">"+e+"</div><div class=\"item\" onclick=\"UI.contextVotemute()\">Vote mute</div>";return SWAM.PopMenuItems&&(r+=SWAM.PopMenuItems),$("#contextmenu").html(r).css(o),n(t,$("#contextmenu")),re=i.id,t.stopPropagation(),!1}UI.closeMenu()};var B=function(t){return(t+"").replace(/&/g,"&a;").replace(/ /g,"&s;")},j=function(t){return(t+"").replace(/&s;/g," ").replace(/&a;/g,"&")};UI.chatWhisper=function(a,r){a=j(a);var t=Players.getByName(a);null==t?UI.addChatMessage("Unknown player"):Network.sendWhisper(t.id,r)},UI.chatIgnore=function(t){var e=Players.get(t);null!=e&&t!=game.myID&&null==z[e.id]&&(z[e.id]=!0,UI.addChatMessage("Ignoring player "+UI.escapeHTML(e.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;To unignore type /unignore "+UI.escapeHTML(B(e.name)),!0))},UI.chatUnignore=function(t){z[t.id]&&(delete z[t.id],UI.addChatMessage("Removed player "+UI.escapeHTML(t.name)+" from ignore list",!0))},UI.getIgnored=function(){return z},UI.getPopMenuPlayer=function(){return re},UI.chatVotemute=function(n){if(n.id!=game.myID){Network.voteMute(n.id);var e=Math.floor(Math.sqrt(Players.count()[1]))+1;UI.addChatMessage("Voted to mute "+UI.escapeHTML(n.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+e+" total votes are required",!0)}},UI.chatVotemutePass=function(t){UI.addChatMessage("The vote to mute "+UI.escapeHTML(t.name)+" has passed",!0)},UI.chatMuted=function(){UI.addChatMessage("You have been muted")},UI.contextWhisper=function(){if(null!=re){var t=Players.get(re);null!=t&&re!=game.myID&&UI.shortcutChat("/w "+B(t.name)+" ")}},UI.contextIgnore=function(){null!=re&&re!=game.myID&&UI.chatIgnore(re)},UI.contextUnignore=function(){if(null!=re){var t=Players.get(re);null!=t&&re!=game.myID&&UI.chatUnignore(t)}},UI.contextVotemute=function(){if(null!=re){var t=Players.get(re);null!=t&&re!=game.myID&&UI.chatVotemute(t)}},UI.closeMenu=function(){ae&&(UI.hide("#contextmenu"),ae=!1)},UI.nameEntered=function(){var t=$("#playername").val().trim();0<t.length?(game.myOriginalName=t,Games.start(t,!0)):Games.highlightInput("#playername")},UI.selectUpgrade=function(t){Network.sendCommand("upgrade",t+"")};var G=function(){for(var n=["","speed","defense","energy","missile"],e=1;5>e;e++)e-1,5>ye[n[e]]&&0<I.upgrades?$("#selectupgrade-"+e).addClass("lighted"):$("#selectupgrade-"+e).removeClass("lighted")};UI.updateUpgrades=function(s,e,t){for(var n=["","speed","defense","energy","missile"],i=1,d;5>i;i++)d=i-1,"",null!=ye[n[i]]&&ye[n[i]]==s[d]||(ye[n[i]]=s[d],$("#selectupgrade-"+i+"-level").html(s[d]),se&&le-100==i&&UI.popTooltip(null,100+i));if(null!=t){if(0!=t){var l="+"+Math.round(100*(config.upgrades[n[t]].factor[ye[n[t]]]-1))+"% "+["","Speed","Defense","Energy Regen","Missile Speed"][t];UI.showMessage("information","<span class=\"info\">UPGRADE</span>"+l,3e3),Sound.playerUpgrade()}I.upgrades=e,$("#score-upgrades").html(e)}G()},UI.resetUpgrades=function(){UI.updateUpgrades([0,0,0,0])},UI.popBigMsg=function(n){if(1==n)var e="<div id=\"big-message\" onclick=\"UI.closeBigMsg()\"><div class=\"msg\">Mobile mode</div><div class=\"small\">Mobile mode has touch controls and requires latest phone/tablet hardware.</div><div class=\"small nopadtop\">For the full experience please play on a PC with a physical keyboard.</div><div class=\"greyed\">Tap anywhere to close</div></div>";else e="<div id=\"big-message\"><div class=\"msg\">WebGL required</div><div class=\"small\">This game requires a WebGL enabled browser in order to run.<br>Please allow WebGL for this domain to continue.</div>";$("body").append(e)},UI.closeBigMsg=function(){$("#big-message").remove()},UI.showHelp=function(t){ie||(UI.closeAllPanels("help"),!0===t?$("#howtoplay").addClass("hide"):$("#howtoplay").removeClass("hide"),UI.showPanel("#howtoplay"),ie=!0)},UI.hideHelp=function(){ie&&(UI.hidePanel("#howtoplay"),ie=!1)},UI.toggleHelp=function(){ie?UI.hideHelp():UI.showHelp()},UI.updateSound=function(t){config.settings.sound?($("#settings-sound").addClass("soundon"),$("#settings-sound").removeClass("soundoff"),$("#mainmenu-sound-icon").addClass("soundon"),$("#mainmenu-sound-icon").removeClass("soundoff"),$("#mainmenu-sound-text").html("Disable Sound")):($("#settings-sound").addClass("soundoff"),$("#settings-sound").removeClass("soundon"),$("#mainmenu-sound-icon").addClass("soundoff"),$("#mainmenu-sound-icon").removeClass("soundon"),$("#mainmenu-sound-text").html("Enable Sound")),t&&UI.showMessage("alert","<span class=\"info\">SOUND</span>"+(config.settings.sound?"Enabled":"Disabled"),3e3)},UI.gameStart=function(n,e){e&&($("#login-ui").remove(),UI.show("#logosmall"),UI.show("#menu",!0),config.mobile||UI.show("#chatbox"),UI.show("#roomnamecontainer"),UI.show("#scoreboard"),UI.show("#scorebig"),UI.show("#settings"),UI.show("#sidebar"),config.mobile&&X(),config.settings.helpshown||(UI.showHelp(!0),config.settings.helpshown=!0,Tools.setSettings({helpshown:!0}))),UI.hide("#gamespecific"),$("#gameinfo").html("&nbsp;"),$("#gameinfo").addClass("ingame"),ye={},UI.resetUpgrades(),UI.hideSpectator(),UI.resetPowerups(),$("#open-menu").html("Connecting..."),game.myName=n,Network.setup()};var X=function(){H(),Graphics.toggleFullscreen(),Input.setupTouch()},H=function(){$("#howtoplay").addClass("mobile"),$("#howtoplay").html("<div class=\"header\">HOW TO PLAY</div><div class=\"mobile-graphic\"></div><div class=\"commands\">For the best game experience play on a PC</div>")};UI.reconnection=function(){K=0,Z=-1,I={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},me=!1,ye={},z={},UI.resetUpgrades(),UI.resetPowerups(),UI.hideSpectator(),UI.wipeAllMinimapMobs(),UI.wipeAllMessages(),Games.wipe(),$("#gameinfo").html("&nbsp;"),$("#scoreboard").html(""),$("#chatlines").html(""),$("#score-score").html("&nbsp;"),$("#score-upgrades").html("&nbsp;"),$("#score-rank").html("-"),$("#roomname").html("&nbsp;"),$("#open-menu").html("Switching Game...")},UI.loggedIn=function(){$("#roomname").html(game.roomName),$("#scoreheader").html(game.roomName+"&nbsp;&nbsp;"),$("#open-menu").html("<span class=\"arrowdown\"></span>"+game.roomName+"&nbsp;&nbsp;<span class=\"region\">&bull;&nbsp;&nbsp;"+game.regionName+"</span>"),UI.visibilityHUD(!0),UI.visibilityMinimap(!0),UI.updateHUD(1,1)},UI.popTooltip=function(d,e){if(null==e)var t=d.data.t,p=d.currentTarget.getBoundingClientRect();else t=e;var r="";if(100>t){var f=xe[t],o=["","Agility","Defense","Regen","Damage"];r+="<div class=\"header\">"+f[0]+"</div>";for(var s=1;4>=s;s++)r+="<div class=\"item\"><div class=\"name\">"+o[s]+"</div><div class=\"val\">&nbsp;<div class=\"bar\"><div class=\"progress\" style=\"width: "+f[s]+"%\"></div></div></div></div>";r+="<div class=\"item\"><div class=\"special\">"+f[5]+"</div><div class=\"desc\">"+f[6]+"</div></div>",r+="<div class=\"item\"><div class=\"clickto\">Click to respawn</div></div>"}else{var g=["","speed","defense","energy","missile"],l=t-100,u=ye[g[l]],c="+"+Math.round(100*(config.upgrades[g[l]].factor[ye[g[l]]]-1))+"%";(r+="<div class=\"header\">"+xe[t][0]+"</div>",r+="<div class=\"item\"><div class=\"level\">"+u+" / "+(config.upgrades[g[l]].factor.length-1)+"</div>",0<u&&(r+="<div class=\"percent\">"+c+"</div></div>"),u<config.upgrades[g[l]].factor.length-1)?(r+="<div class=\"item smaller\"><div class=\"requires\">Requires 1 upgrade point</div></div>",r+="<div class=\"item smaller\"><div class=\"clickto\">Click to upgrade to "+(c="+"+Math.round(100*(config.upgrades[g[l]].factor[ye[g[l]]+1]-1))+"%")+"</div></div>"):r+="<div class=\"item smaller\"><div class=\"clickto\">Max upgrade reached</div></div>"}r+="<div class=\"arrow\"></div>",null==e&&$("#tooltip").css({left:Math.round(p.left+60)+"px",top:Math.round(p.top-10)+"px"}),$("#tooltip").html(r),le=t,null!=de&&clearTimeout(de),se||(se=!0,UI.show("#tooltip"))},UI.closeTooltip=function(){se&&(null!=de&&clearTimeout(de),de=setTimeout(function(){se&&(UI.hide("#tooltip"),$("#tooltip").html(""),se=!1,de=null)},250))},UI.startDragChat=function(t){ge.x=t.originalEvent.pageX,ge.y=t.originalEvent.pageY,ge.width=$("#chatbox").width()+16,ge.height=$("#chatbox").height()+16,$("#chatbox").addClass("hovered"),$(window).on("mousemove",UI.dragChat),$(window).on("mouseup",UI.endDragChat)},UI.dragChat=function(a){var e=a.originalEvent.pageX,t=a.originalEvent.pageY;if(0!=e&&0!=t){100>game.screenY-t&&(t=game.screenY-100);var o=e-ge.x,r=t-ge.y;$("#chatbox").css({width:ge.width+o+"px",height:ge.height-r+"px"}),$("#minimizechatcontainer").css({width:ge.width+o+"px",bottom:ge.height-r+"px"}),$("#chatinput").css({width:ge.width+o-12+"px",bottom:ge.height-r+20+"px"}),$("#radioPanel").css({bottom:ge.height-r+20+"px"})}},UI.endDragChat=function(){$("#chatbox").removeClass("hovered"),$(window).off("mousemove",UI.dragChat),$(window).off("mouseup",UI.endDragChat)},UI.setup=function(){$(window).resize(U),$(window).on("orientationchange",U),$(window).on("contextmenu",function(t){return UI.popMenu(t,!0),t.preventDefault(),!1}),$(window).on("focus",Input.gameFocus),$(window).on("blur",Input.gameBlur),$(window).on("click",UI.popMenu),$("#minimizechat").on("click",UI.minimizeChat),$("#maximizechat").on("click",UI.maximizeChat),$("#viewscore").on("click",function(t){game.state==Network.STATE.PLAYING&&(UI.openScore(),t.stopPropagation())}),$("#selectaircraft-1").on("click",function(){UI.selectAircraft(1)}),$("#selectaircraft-2").on("click",function(){UI.selectAircraft(2)}),$("#selectaircraft-3").on("click",function(){UI.selectAircraft(3)}),$("#selectaircraft-4").on("click",function(){UI.selectAircraft(4)}),$("#selectaircraft-5").on("click",function(){UI.selectAircraft(5)}),$("#mainmenu-fullscreen").on("click",Graphics.toggleFullscreen),$("#mainmenu-invite").on("click",UI.openInvite),$("#mainmenu-score").on("click",UI.openScore),$("#mainmenu-game").on("click",Games.popGames),$("#mainmenu-hidpi").on("click",Graphics.toggleHiDPI),$("#mainmenu-sound").on("click",Sound.toggle),config.mobile?($("#mainmenu-keybinds-text").html("<br>How To Play"),$("#mainmenu-keybinds").on("click",UI.toggleHelp),$(".keybind").css({display:"none"})):$("#mainmenu-keybinds").on("click",Input.openKeybinds),$("#settings-mainmenu").on("click",function(t){UI.toggleMainMenu(),t.stopPropagation()}),$("#settings-sound").on("click",function(t){Sound.toggle(),t.stopPropagation()}),$("#mainmenu").on("click",function(t){t.stopPropagation()}),$("#scoredetailed").on("click",function(t){t.stopPropagation()}),$("#invitefriends").on("click",function(t){t.stopPropagation()}),$("#keybinds").on("click",function(t){t.stopPropagation()}),$("#invite-link").on("contextmenu",function(t){t.stopPropagation()}),$("#resetbinds").on("click",Input.resetBinds),config.mobile||($("#chatbox").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),$("#chatinput").on("blur",function(){q&&UI.toggleChatBox(!1)}),$("#resizechat").on("mousedown",UI.startDragChat)),$("#scorecontainer").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),$("#selectupgrade-1").on("click",function(){UI.selectUpgrade(1)}),$("#selectupgrade-2").on("click",function(){UI.selectUpgrade(2)}),$("#selectupgrade-3").on("click",function(){UI.selectUpgrade(3)}),$("#selectupgrade-4").on("click",function(){UI.selectUpgrade(4)});var t;for(t=1;5>=t;t++)$("#selectaircraft-"+t).on("mouseenter",{t:t},UI.popTooltip),$("#selectaircraft-"+t).on("mouseleave",UI.closeTooltip);for(t=1;4>=t;t++)$("#selectupgrade-"+t).on("mouseenter",{t:100+t},UI.popTooltip),$("#selectupgrade-"+t).on("mouseleave",UI.closeTooltip);$("#playbutton").on("click",function(){Sound.UIClick(),UI.nameEntered()}),$("#playername").on("keypress",function(t){13===t.which&&UI.nameEntered()}),window.onerror=function(a,e,t,n,r){game.state!==Network.STATE.PLAYING&&game.state!==Network.STATE.CONNECTING||Tools.handleError({msg:a,url:e,lineNo:t,columnNo:n,error:r})}}}(),function(){var N=!1,F=!1,B=!1,U=["","Free For All","Capture The Flag","Battle Royale"],Y=["","ffa","ctf","br"],i=0,G={},j=0,X=null,r=null,H=!1,W=!1,z=null,V=[],q=!1,K={},Z={},Q=null,J=!1,ee={radius:0,pos:Vector.zero(),speed:0},b={2:"Custom country flags",3:"Emotes",4:"Flag Pack #1"};Games.setup=function(){$("#playregion").on("click",function(t){Games.updateRegion(!0,t)}),$("#playtype").on("click",function(t){Games.updateType(!0,t)}),$("#open-menu").on("click",function(t){Games.popGames(),t.stopPropagation()}),$("#gameselector").on("click",function(t){t.stopPropagation()}),$("#invite-copy").on("click",Games.copyInviteLink),$("#loginbutton").on("click",function(t){UI.openLogin(),t.stopPropagation()}),$("#login-facebook").on("click",function(){Games.popupLogin(1)}),$("#login-google").on("click",function(){Games.popupLogin(2)}),$("#login-twitter").on("click",function(){Games.popupLogin(3)}),$("#login-reddit").on("click",function(){Games.popupLogin(4)}),$("#login-twitch").on("click",function(){Games.popupLogin(5)}),$("#loginselector").on("click",function(t){t.stopPropagation()}),$("#gotomainpage").on("click",Games.redirRoot),$("#lifetime-signin").on("click",Games.redirRoot),null==config.settings.session?Games.playerGuest():Games.playerAuth(),x(function(){return(W=!0,w(),DEVELOPMENT&&"#tony"==window.location.hash)?(game.playRegion="eu",game.playRoom="ffa1",game.playInvited=!0,game.myOriginalName=window.location.hash.substr(1),void Games.start(game.myOriginalName,!0)):void(q||(S(),Games.updateRegion(!1),Games.updateType(!1),O()))},!0)},Games.popupLogin=function(t){_("/auth_"+["","facebook","google","twitter","reddit","twitch"][t],"Login",4==t?900:500,500)};var _=function(d,e,t,n){var r=null==window.screenLeft?window.screenX:window.screenLeft,i=null==window.screenTop?window.screenY:window.screenTop,o=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-t/2+r,s=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-n/2+i;window.open(d,e,"width="+t+", height="+n+", top="+s+", left="+o)};window.loginSuccess=function(t){config.settings.session=t,Tools.setSettings({session:t}),Tools.removeSetting("flag"),Games.playerAuth(),UI.closeLogin()},window.loginFailure=function(){},Games.playerGuest=function(){UI.show("#playbutton",!0),UI.show("#loginbutton",!0)},Games.playerAuth=function(){Tools.ajaxPost("/auth",{session:config.settings.session},function(n){if(null!=n){game.loggedIn=!0,game.myUserID=n.user;var e=UI.escapeHTML(n.authName.substr(0,30))+"<span class=\"grey\">("+["","Facebook","Google","Twitter","Reddit","Twitch"][n.authType]+")</span>";null!=n.name&&$("#playername").val(n.name),$("#logout").html(e+"<span class=\"link\" onclick=\"Games.logout()\">Logout</span>"),$("#logout-mainmenu").html("Logged in as "+e+"<span class=\"button\" onclick=\"Games.logout()\">LOG OUT</span>"),$("#loginbutton").remove(),$("#lifetime-account").remove(),$("#playbutton").html("PLAY"),UI.show("#playbutton",!0)}else Games.playerGuest()})},Games.logout=function(){Tools.removeSetting("session"),Tools.removeSetting("name"),Tools.removeSetting("flag"),window.location="/"};var x=function(a,e){var t="/games";e&&(t+="?main=1"),$.ajax({url:t,dataType:"json",cache:!1,success:function(t){try{V=JSON.parse(t.data)}catch(t){return}if("xx"==game.myFlag&&(game.myFlag=t.country),e&&game.protocol!=t.protocol){if("#reload"!==window.location.hash)return void Tools.ajaxPost("/clienterror",{type:"protocol"},function(){UI.showMessage("alert","<span class=\"mainerror\">Protocol update<br>Your client is being updated to the new version</span>",3e4),setTimeout(function(){window.location="/?"+Tools.randomID(10)+"#reload"},5e3)});Tools.ajaxPost("/clienterror",{type:"protocolretry"})}a()},error:function(){}})},w=function(){i=0;for(var a=0,o=0;o<V.length;o++)for(var s=0;s<V[o].games.length;s++)i+=V[o].games[s].players,a++;if(0==a)q=!0,UI.showMessage("alert","<span class=\"mainerror\">We are currently performing server maintenance<br>Please try again in a few minutes</span>",3e4);else{var d="<div class=\"item smallerpad\">"+i+"</div>player"+(1<i?"s":"")+" online";$("#gameinfo").html(d)}},T=function(n){if("closest"===n)return{name:"Closest"};for(var e=0;e<V.length;e++)if(V[e].id===n)return V[e];return game.playRegion="closest",{name:"Closest"}},E=function(a,e){var t=T(a);if(null==t)return null;if(null==t.games)return null;for(var n=0;n<t.games.length;n++)if(t.games[n].id===e)return t.games[n];var r=Y.indexOf(e);if(-1!=r)for(n=0;n<t.games.length;n++)if(t.games[n].type==r)return{name:U[r]};return null},S=function(){var a=window.location.hash;if(history.replaceState(null,null,"/"),"#reload"!==a&&null!=a&&!(4>a.length||20<a.length)){var i=(a=a.substr(1)).indexOf("-");if(-1!=i){var t=a.substr(0,i),n=a.substr(i+1);null!=E(t,n)&&(game.playRegion=t,game.playRoom=n,game.playInvited=!0)}}};Games.selectRegion=function(n,e){n.stopPropagation(),Sound.UIClick(),game.playRegion=e,Games.updateRegion(!1),Games.updateType()},Games.selectGame=function(n,e){n.stopPropagation(),Sound.UIClick(),game.playRoom=e,Games.updateType(!1)},Games.closeDropdowns=function(){F&&Games.updateType(!1),N&&Games.updateRegion(!1)},Games.updateRegion=function(e,t){var u="",p=null;if(W&&!q){if(null!=t&&(t.stopPropagation(),N||Sound.UIClick()),e&&UI.closeLogin(),null==e&&(e=N),e){F&&Games.updateType(!1),u+="<div class=\"item\"><div class=\"region header\">REGION</div><div class=\"players header\">PLAYERS</div><div class=\"ping header\">PING</div><div class=\"clear\"></div></div>";var h="";null!=r&&(h="<span class=\"autoregion\">("+V[r].name+")</span>"),u+="<div class=\"item selectable"+("closest"===game.playRegion?" sel":"")+"\" onclick=\"Games.selectRegion(event, &quot;closest&quot;)\"><div class=\"region chooser\">Closest"+h+"</div><div class=\"clear\"></div></div>";for(var f=0;f<V.length;f++){for(var g=0,m=0;m<V[f].games.length;m++)g+=V[f].games[m].players;var y;y=null==V[f].ping?"&nbsp;":Math.round(V[f].ping)+"<span class=\"ms\">ms</span>",u+="<div class=\"item selectable"+(game.playRegion===V[f].id?" sel":"")+"\" onclick=\"Games.selectRegion(event, &quot;"+V[f].id+"&quot;)\"><div class=\"region chooser\">"+V[f].name+"</div><div class=\"players number\">"+g+"</div><div class=\"ping chooser nopadding\">"+y+"</div><div class=\"clear\"></div></div>"}u+="<div class=\"item\"></div>",p={width:"240px",height:"auto","z-index":"2"},$("#playregion").removeClass("hoverable")}else u+="<div class=\"arrowdown\"></div>",u+="<div class=\"playtop\">REGION</div>",u+="<div class=\"playbottom\">"+T(game.playRegion).name+"</div>",p={width:"130px",height:"40px","z-index":"auto"},$("#playregion").addClass("hoverable");$("#playregion").html(u),$("#playregion").css(p),N=e}};var I=function(){var t=game.playRegion;if("closest"===t){if(null==r)return null;t=V[r].id}return t},P=function(n){var e="<div class=\"infott\">";return 1==n?e+="Everyone versus everyone deathmatch. No teams.":2==n?e+="Players split into 2 teams. 2 flags are placed inside each base. The objective is to move the enemy flag from their base to your base.":3==n&&(e+="Players spawn at random locations all across the map. Destroyed players will not respawn. Last player standing wins."),e+="<div class=\"arrow\"></div></div>"};Games.updateType=function(e,t){var r="",i=null;if(W&&!q){if(null!=t&&(t.stopPropagation(),F||Sound.UIClick()),e&&UI.closeLogin(),null==e&&(e=F),e){if(N&&Games.updateRegion(!1),r+="<div class=\"item\"><div class=\"gametype header\">GAME</div><div class=\"players header\">PLAYERS</div><div class=\"clear\"></div></div>",null==(f=I()))return;null==E(f,game.playRoom)&&(game.playRoom=Y[1]);var o=T(f).games,c=[[],[],[],[],[],[],[],[],[]],d,h;for(d=0;d<o.length;d++)c[o[d].type].push(o[d]);for(d=1;d<c.length;d++)if(0!=c[d].length)for(r+="<div class=\"item selectable"+(Y[d]===game.playRoom?" sel":"")+"\" onclick=\"Games.selectGame(event, &quot;"+Y[d]+"&quot;)\"><div class=\"gametype chooser\">"+U[d]+"<span class=\"infocontainer\">&nbsp;<div class=\"infoicon\">"+P(d)+"</div></span></div><div class=\"clear\"></div></div>",h=0;h<c[d].length;h++)r+="<div class=\"item selectable"+(c[d][h].id===game.playRoom?" sel":"")+"\" onclick=\"Games.selectGame(event, &quot;"+c[d][h].id+"&quot;)\"><div class=\"gametype chooser\">"+c[d][h].nameShort+"</div><div class=\"players number\">"+c[d][h].players+"</div><div class=\"clear\"></div></div>";r+="<div class=\"item\"></div>",i={width:"240px",height:"auto","z-index":"2"},$("#playtype").removeClass("hoverable")}else{r+="<div class=\"arrowdown\"></div>",r+="<div class=\"playtop\">GAME</div>";var f;if(null==(f=I()))return;var m=E(f,game.playRoom);null==m?(name=U[1],game.playRoom=Y[1]):name=m.name,r+="<div class=\"playbottom\">"+name+"</div>",i={width:"190px",height:"40px","z-index":"auto"},$("#playtype").addClass("hoverable")}$("#playtype").html(r),$("#playtype").css(i),F=e}},Games.popGames=function(){if(!B){UI.closeAllPanels("games");var t=M();UI.hide("#menu"),$("#gameselector").html(t),UI.show("#gameselector"),B=!0,A(),Sound.UIClick()}};var M=function(){var r="";r+="<div class=\"header\">"+game.roomName+"<span class=\"region\">&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+game.regionName+"</span></div><div class=\"buttons\"><div class=\"button\" onclick=\"Games.redirRoot()\">CHANGE REGION</div></div>";var d=T(game.playRegion).games,i=[[],[],[],[],[],[],[],[],[]],o,l;for(o=0;o<d.length;o++)i[d[o].type].push(d[o]);var u,p;for(o=1;o<i.length;o++)if(0!=i[o].length)for(r+="<div class=\"item head\"><div class=\"gametype chooser section\">"+U[o]+"<span class=\"infocontainer\">&nbsp;<div class=\"infoicon\">"+P(o)+"</div></span></div><div class=\"clear\"></div></div>",l=0;l<i[o].length;l++)i[o][l].id===game.playRoom?(u=" sel",p=""):(u=" selectable",p=" onclick=\"Games.switchGame(&quot;"+i[o][l].id+"&quot;)\""),r+="<div class=\"item"+u+"\""+p+"><div class=\"gametype chooser\">"+i[o][l].nameShort+"</div><div class=\"players number\">"+i[o][l].players+"</div><div class=\"clear\"></div></div>";return r};Games.redirRoot=function(){game.reloading=!0,window.location="/"};var A=function(){x(function(){var t=M();$("#gameselector").html(t)})};Games.closeGames=function(){B&&(UI.hide("#gameselector"),UI.show("#menu"),B=!1,Sound.UIClick())},Games.toggleGames=function(){B?Games.closeGames():Games.popGames()},Games.switchGame=function(t){Games.closeGames(),null!=t&&(game.playRoom=t),game.myScore=0,game.state=Network.STATE.CONNECTING,Network.shutdown(),Particles.wipe(),Players.wipe(),Mobs.wipe(),UI.reconnection(),Games.start(game.myOriginalName)};var O=function(){G={},j=0;for(var n=0,a;n<V.length;n++)a=V[n].games[Tools.randInt(0,V[n].games.length-1)].host,null==G[a]&&(G[a]={ping:9999,num:0,threshold:0,server:n});Games.performPing(),Games.performPing(),Games.performPing(),X=setInterval(Games.performPing,300)};Games.performPing=function(){if(!(3<j||H)){var a=9999,i=null;for(var o in G)G[o].num<a&&(a=G[o].num,i=o);if(6<a)null!=X&&clearInterval(X);else{G[i].num++;var n;n=DEVELOPMENT?"/ping":"https://game-"+i+".airma.sh/ping",C(i,n,function(){C(i,n)})}}};var C=function(a,e,t){if(null!=G[a]&&!H){j++;var n=performance.now();$.ajax({url:e,dataType:"json",cache:!1,timeout:2e3,success:function(e){if(!H&&(j--,1==e.pong&&null!=G[a])){var r=performance.now()-n;if(Math.abs(G[a].ping-r)<.1*r&&G[a].threshold++,2<=G[a].threshold)return r<G[a].ping&&(V[G[a].server].ping=r,Games.findClosest(),Games.updateRegion()),void delete G[a];r<G[a].ping&&(G[a].ping=r,V[G[a].server].ping=r,Games.findClosest(),Games.updateRegion(),null!=t&&t())}},error:function(){j--}})}};Games.findClosest=function(){for(var a=9999,i=!1,o=0;o<V.length;o++)null!=V[o].ping&&V[o].ping<a&&(a=V[o].ping,r=o,i=!0);i&&"closest"===game.playRegion&&Games.updateType()},Games.highlightInput=function(t){$(t).css({transition:"none",transform:"scale(1.1)","background-color":"rgb(90, 30, 30)"}),$(t).width(),$(t).css({transition:"all 0.5s ease-in-out",transform:"scale(1)","background-color":"rgb(30, 30, 30)"}),setTimeout(function(){$(t).focus()},200)},Games.copyInviteLink=function(){R(game.inviteLink)&&(UI.show("#invite-copied"),null!=z&&clearTimeout(z),z=setTimeout(function(){UI.hide("#invite-copied")},2e3))};var R=function(a){var e=document.createElement("span");e.textContent=a,e.style.whiteSpace="pre";var t=document.createElement("iframe");t.sandbox="allow-same-origin",document.body.appendChild(t);var n=t.contentWindow;n.document.body.appendChild(e);var d=n.getSelection();d||(d=(n=window).getSelection(),document.body.appendChild(e));var l=n.document.createRange();d.removeAllRanges(),l.selectNode(e),d.addRange(l);var o=!1;try{o=n.document.execCommand("copy")}catch(t){}return d.removeAllRanges(),e.remove(),t.remove(),o};Games.start=function(i,e){if(!(q||e&&game.state==Network.STATE.CONNECTING)){var t=game.playRegion,n=I();if(null!=n){game.playRegion=n,null!=X&&clearInterval(X),H=!0;var r=game.playRoom,l=Y.indexOf(r);if(-1!=l){for(var s=T(game.playRegion).games,a=[],u=0;u<s.length;u++)s[u].type==l&&a.push(s[u].id);r=a[Tools.randInt(0,a.length-1)]}var c=E(game.playRegion,r);game.playHost=c.host,game.playPath=c.id,game.regionName=T(game.playRegion).name,game.playRoom=r,game.state==Network.STATE.LOGIN&&Tools.wipeReel(),game.state=Network.STATE.CONNECTING;var d={name:i};game.playInvited||(d.region=t),Tools.setSettings(d),UI.gameStart(i,e),e&&Tools.ajaxPost("/enter",{id:config.settings.id,name:i,game:game.playRegion+"-"+game.playRoom,source:null==document.referrer?"":document.referrer,mode:config.mobile?1:0})}}},Games.prep=function(){(Games.wipe(),2==game.gameType)?($("#gamespecific").html("<div class=\"blueflag\"></div><div id=\"blueflag-name\" class=\"blueflag-player\">&nbsp;</div><div class=\"redflag\"></div><div id=\"redflag-name\" class=\"redflag-player\">&nbsp;</div>"),UI.show("#gamespecific"),K={flagBlue:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:Vector.zero(),basePos:new Vector(-9669,-1471),sprite:Textures.init("ctfFlagBlue",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:1.1*.4,visible:!1}),minimapSprite:Textures.init("minimapFlagBlue"),minimapBase:Textures.init("minimapBaseBlue")},flagRed:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:Vector.zero(),basePos:new Vector(8602,-944),sprite:Textures.init("ctfFlagRed",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:1.1*.4,visible:!1}),minimapSprite:Textures.init("minimapFlagRed"),minimapBase:Textures.init("minimapBaseRed")}},Graphics.minimapMob(K.flagBlue.minimapBase,K.flagBlue.basePos.x,K.flagBlue.basePos.y),Graphics.minimapMob(K.flagRed.minimapBase,K.flagRed.basePos.x,K.flagRed.basePos.y)):3==game.gameType&&($("#gamespecific").html(""),UI.show("#gamespecific"))},Games.wipe=function(){k(),K.flagBlue&&K.flagRed&&(game.graphics.layers.flags.removeChild(K.flagBlue.sprite),game.graphics.layers.flags.removeChild(K.flagRed.sprite),game.graphics.layers.shadows.removeChild(K.flagBlue.spriteShadow),game.graphics.layers.shadows.removeChild(K.flagRed.spriteShadow),game.graphics.layers.ui3.removeChild(K.flagBlue.minimapSprite),game.graphics.layers.ui3.removeChild(K.flagRed.minimapSprite),game.graphics.layers.ui2.removeChild(K.flagBlue.minimapBase),game.graphics.layers.ui2.removeChild(K.flagRed.minimapBase),K.flagBlue.sprite.destroy(),K.flagRed.sprite.destroy(),K.flagBlue.spriteShadow.destroy(),K.flagRed.spriteShadow.destroy(),K.flagBlue.minimapSprite.destroy(),K.flagRed.minimapSprite.destroy(),K.flagBlue.minimapBase.destroy(),K.flagRed.minimapBase.destroy())},Games.networkFlag=function(a){var e=1==a.flag?K.flagBlue:K.flagRed,t=1==a.flag?"#blueflag-name":"#redflag-name",n=1==a.flag?a.blueteam:a.redteam;e.momentum=0,e.direction=1,e.sprite.scale.x=.4,e.sprite.rotation=0,e.spriteShadow.scale.x=1.1*.4,e.spriteShadow.rotation=0;var r="<span class=\"rounds\">"+n+"<span class=\"divider\">/</span>3</span>";if(1==a.type){e.playerId=null,e.position.x=a.posX,e.position.y=a.posY,e.sprite.position.set(a.posX,a.posY);var d=Graphics.shadowCoords(new Vector(a.posX,a.posY));e.spriteShadow.position.set(d.x,d.y),Graphics.minimapMob(e.minimapSprite,a.posX,a.posY),$(t).html(r)}else{e.playerId=a.id;var o=Players.get(a.id);null!=o&&(1==a.flag?r=UI.escapeHTML(o.name)+r:r+=UI.escapeHTML(o.name)),e.diffX=o.pos.x,$(t).html(r)}D(e,!1)};var D=function(a,e){if(e&&(Graphics.minimapMob(a.minimapSprite,a.position.x,a.position.y),Graphics.minimapMob(a.minimapBase,a.basePos.x,a.basePos.y)),null!=a.playerId){var t=Players.get(a.playerId);if(null!=t&&(t.render!=a.visible&&(a.visible=t.render,a.sprite.visible=t.render,a.spriteShadow.visible=t.render,t.render&&(a.momentum=0,a.direction=1,a.diffX=t.pos.x)),t.render?Graphics.minimapMob(a.minimapSprite,t.pos.x,t.pos.y):Graphics.minimapMob(a.minimapSprite,t.lowResPos.x,t.lowResPos.y),a.visible)){a.position.x=t.pos.x,a.position.y=t.pos.y,a.sprite.position.set(t.pos.x,t.pos.y);var n=Graphics.shadowCoords(t.pos);a.spriteShadow.position.set(n.x,n.y),a.momentum=Tools.clamp(a.momentum+(t.pos.x-a.diffX)*game.timeFactor,-40,40);var r=0<a.momentum?.1:-.1;a.direction=Tools.clamp(a.direction-r*game.timeFactor,-.4,.4),a.sprite.scale.x=a.direction,a.spriteShadow.scale.x=1.1*a.direction;var i=.04*-(t.pos.x-a.diffX)*game.timeFactor;a.sprite.rotation=i,a.spriteShadow.rotation=i,a.diffX=t.pos.x}}else{var o=Graphics.inScreen(a.position,128);o!=a.visible&&(a.visible=o,a.sprite.visible=o,a.spriteShadow.visible=o)}};Games.spectate=function(a){null==game.spectatingID&&3!=game.gameType&&UI.showMessage("alert","<span class=\"info\">SPECTATOR MODE</span>Click on Respawn to resume playing",4e3),game.spectatingID=a;var e=Players.get(a),t="<div id=\"spectator-tag\" class=\"spectating\">Spectating "+(null==e?"":UI.escapeHTML(e.name))+"</div><div class=\"buttons\"><div onclick=\"Network.spectateNext()\" class=\"changeplayer left\"><div class=\"arrow\"></div></div><div onclick=\"Network.spectatePrev()\" class=\"changeplayer right\"><div class=\"arrow\"></div></div></div>";UI.showSpectator(t)},Games.spectatorSwitch=function(t){setTimeout(function(){t==game.spectatingID&&Network.spectateNext()},2e3)},Games.playersAlive=function(n){var e="";1<n&&(e="<div class=\"playersalive\">"+n+" players alive</div>"),$("#gamespecific").html(e)},Games.showBTRWin=function(n){if(!$("#custom-msg").length){var e="<div id=\"custom-msg\" class=\"btrwin\"><div class=\"trophy\"></div><div class=\"winner\"><div class=\"player\"><span class=\"flag big flag-"+n.f+"\"></span>"+UI.escapeHTML(n.p)+"</div></div><div class=\"bounty\"><span class=\"stat\">"+n.k+" KILL"+(1==n.k?"":"S")+"</span>+"+n.b+" BOUNTY</div></div>";$("body").append(e),UI.showPanel("#custom-msg"),setTimeout(function(){UI.hidePanel("#custom-msg",!1,!0)},1e3*n.t),Sound.gameComplete()}},Games.showCTFWin=function(n){if(!$("#custom-msg").length){var e="<div id=\"custom-msg\" class=\"ctfwin\"><div class=\"trophy\"></div><div class=\"winner\">"+(1==n.w?"<div class=\"player blue\">BLUE TEAM</div>":"<div class=\"player red\">RED TEAM</div>")+"</div><div class=\"bounty\">+"+n.b+" BOUNTY</div></div>";$("body").append(e),UI.showPanel("#custom-msg"),setTimeout(function(){UI.hidePanel("#custom-msg",!1,!0)},1e3*n.t),Sound.gameComplete()}},Games.showLevelUP=function(a){$("#custom-msg").length&&$("#custom-msg").remove();var e="",i=" lvlsmaller";null!=b[a+""]&&(i="",e="<div class=\"unlocked\">FEATURE UNLOCKED<br><div class=\"unlockedtext\">"+b[a+""]+"</div></div>");var o="<div id=\"custom-msg\" class=\"levelup"+i+"\"><div class=\"leveltext\">NEW LEVEL REACHED</div><div class=\"levelbadge\"></div><div class=\"levelnum\">"+a+"</div>"+e+"</div>";$("body").append(o),UI.showPanel("#custom-msg"),Sound.levelUp(),UI.showChatLevel(a)},Games.popFirewall=function(m,e){0>=e&&(e=0),J||(J=!0,Q=new PIXI.Graphics,game.graphics.gui.minimap.mask=Q),Q.clear(),Q.beginFill(16777215),Q.drawCircle(game.screenX-config.minimapPaddingX-config.minimapSize*(16384-m.x)/32768,game.screenY-config.minimapPaddingY-config.minimapSize/2*(8192-m.y)/16384,2*e/(256*(256/config.minimapSize))),Q.endFill();var y=Graphics.getCamera(),n=Math.ceil((game.halfScreenX+64)/game.scale/64),r=Math.ceil((game.halfScreenY+64)/game.scale/64),i=0,v=0,T="",E={},l=0,S=0,w=new Vector(y.x-game.halfScreenX/game.scale-64,y.y-game.halfScreenY/game.scale-64),h=new Vector(y.x+game.halfScreenX/game.scale+64,y.y-game.halfScreenY/game.scale-64),d=new Vector(y.x-game.halfScreenX/game.scale-64,y.y+game.halfScreenY/game.scale+64),p=new Vector(y.x+game.halfScreenX/game.scale+64,y.y+game.halfScreenY/game.scale+64);if(Tools.distance(m.x,m.y,w.x,w.y)>e||Tools.distance(m.x,m.y,h.x,h.y)>e||Tools.distance(m.x,m.y,d.x,d.y)>e||Tools.distance(m.x,m.y,p.x,p.y)>e)for(var f=-n;f<=n;f++)for(var C=-r;C<=r;C++)if(i=64*(Math.floor(y.x/64)+.5)+64*f,v=64*(Math.floor(y.y/64)+.5)+64*C,!((l=Tools.distance(i,v,m.x,m.y))<e)&&(T=i+"_"+v,E[T]=!0,null==Z[T])){var M=Textures.sprite("hotsmoke_"+Tools.randInt(1,4));M.scale.set(Tools.rand(1.5,2.5)),M.anchor.set(.5,.5),M.position.set(i,v),S=1,.5<Tools.rand(0,1)&&(M.blendMode=PIXI.BLEND_MODES.ADD,S=.5),game.graphics.layers.powerups.addChild(M),Z[T]={sprite:M,rotation:Tools.rand(0,100),rotationSpeed:Tools.rand(-.0025,.0025),opacity:0,maxOpacity:S,opacitySpeed:64<=l-e?.02:.0035,color:Tools.rand(0,1),colorDir:.5>Tools.rand(0,1)?-1:1}}for(var _ in Z)null==E[_]?(game.graphics.layers.powerups.removeChild(Z[_].sprite),Z[_].sprite.destroy(),delete Z[_]):(Z[_].rotation+=Z[_].rotationSpeed*game.timeFactor,Z[_].opacity+=Z[_].opacitySpeed*game.timeFactor,Z[_].opacity>Z[_].maxOpacity&&(Z[_].opacity=Z[_].maxOpacity),Z[_].color+=.005*Z[_].colorDir*game.timeFactor,0>Z[_].color&&(Z[_].colorDir=1),1<Z[_].color&&(Z[_].colorDir=-1),Z[_].sprite.rotation=Z[_].rotation,Z[_].sprite.alpha=Z[_].opacity,Z[_].sprite.tint=Tools.colorLerp(16427014,16404230,Z[_].color))};var k=function(){if(J){for(var t in Z)game.graphics.layers.powerups.removeChild(Z[t].sprite),Z[t].sprite.destroy();Z={},game.graphics.gui.minimap.mask=null,null!=Q&&(Q.destroy(),Q=null),J=!1}};Games.handleFirewall=function(t){0==t.status?k():(ee.radius=t.radius,ee.pos.x=t.posX,ee.pos.y=t.posY,ee.speed=t.speed,Games.popFirewall(ee.pos,ee.radius))},Games.update=function(t){2==game.gameType&&K.flagBlue&&(D(K.flagBlue,t),D(K.flagRed,t)),J&&(ee.radius+=ee.speed/60*game.timeFactor,Games.popFirewall(ee.pos,ee.radius))}}(),window.loadSounds_Default=function(){var h={},u={},f={},n=0,g=0,c={},o=0,m=0,N={},F=.06,d=.08,l=[0,.7,1,.4,0,.7,.4,.7],p=[0,.7,1,.4,0,.7,1,.7],y=[0,.8,.5,1,0,.8,.5,.8],b=[0,.8,1,.7,.8,.8],_=[0,1.5,1.2,.8,1.35,1.7],x=[0,1,1,.35,1,1],v=[0,.8,.5,1,0,.8,.8,.8],T=[0,1.5,.8,2,1,1.5],E={powerup_shield:.5,upgrade:.2,complete:.5,levelup:.5,respawn:.05,click:.5},t={},S={src:["assets/sounds.mp3?4"],volume:0,sprite:{chopper:[0,3206.1451247165533,!0],click:[5e3,374.9886621315195],complete:[7e3,1910.9750566893417],explosion1:[1e4,4137.460317460316],explosion2:[16e3,4155.44217687075],explosion3:[22e3,4168.367346938776],explosion4:[28e3,4580.272108843537],explosion5:[34e3,4144.943310657595],explosion6:[4e4,4191.360544217688],impact:[46e3,3730.7709750566855],launch1:[51e3,1492.4943310657568],launch2:[54e3,1511.2244897959215],levelup:[57e3,1886.4172335600883],missile:[6e4,8335.351473922898,!0],powerup_rampage:[7e4,7423.083900226758],powerup_shield:[79e3,2070.4761904761854],powerup_upgrade:[83e3,1640.8616780045406],repel:[86e3,2e3],respawn:[89e3,1315.9410430838961],thruster:[92e3,9499.841269841269,!0],upgrade:[103e3,2062.517006802722]}};SWAM&&SWAM.injectSounds(S),Sound.setup=function(){var e={};for(var a in t){if(e={src:["/assets/sounds/"+a+".wav"]},0<Object.keys(t[a]).length)for(var r in t[a])e[r]=t[a][r];u[a]=new Howl(e)}h=new Howl(S)},Sound.toggle=function(){config.settings.sound=!config.settings.sound,Tools.setSettings({sound:config.settings.sound}),UI.updateSound(!0),w()};var w=function(){config.settings.sound||h.stop()},M=function(n){var e=E[n];return null==e?1:e};Sound.mobExplosion=function(a,e){var t=l[e]*.3,n=R(a)*t,r="explosion"+Tools.randInt(1,6);.01>n||P("mobexplosions",4)||A(r,n,a,Tools.rand(.8,1.2))},Sound.playerKill=function(a){var e=b[a.type]*1,t=R(a.pos)*e,n="explosion"+Tools.randInt(1,6);.01>t||P("playerkills",3)||A(n,t,a.pos,Tools.rand(.8,1.2))},Sound.playerUpgrade=function(){if(!P("upgrades",1)){var t=M("upgrade");A("upgrade",t)}},Sound.playerRespawn=function(a){var e=M("respawn")*(a.me()?1:R(a.pos)),t=a.me()?null:a.pos;A("respawn",e,t)},Sound.gameComplete=function(){var t=M("complete");A("complete",t)},Sound.levelUp=function(){var t=M("levelup");A("levelup",t)},Sound.UIClick=function(){if(!P("uiclick",1,200)){var t=M("click");A("click",t)}},Sound.effectRepel=function(n){var e=R(n)*.3;A("repel",e,n,1.5)},Sound.powerup=function(a,e){var t=(null==e?1:R(e))*.25,n="";4==a?n="powerup_upgrade":8==a?n="powerup_shield":9==a&&(n="powerup_rampage"),A(n,t*M(n),e)},Sound.missileLaunch=function(a,e){var t=p[e]*.3,n=R(a)*t,r=y[e],i="launch"+Tools.randInt(1,2);.01>n||P("launches",5)||A(i,n,a,r)},Sound.playerImpact=function(a,e,t){var n=.05*Tools.clamp(t,0,1),r=R(a)*n,i=T[e];A("impact",r,a,i)},Sound.update=function(){if(!(100>game.time-m)){var n=game.focus?300:1e3;for(var e in f)game.time-f[e].last>n&&Sound.clearThruster(e);for(var t in c)game.time>=c[t].time&&(I(c[t].id,c[t].sound),delete c[t]);m=game.time}};var P=function(a,e,t){if(null==N[a])return N[a]={num:1,time:game.time},!1;var n=null==t?1e3:t;return game.time-N[a].time>n?(N[a].num=1,N[a].time=game.time,!1):(N[a].num++,N[a].num>e)},A=function(e,t,n,r,i,o){if(config.settings.sound){if(o){if(null==u[e])return;var a=u[e]}else a=h;if(!(null!=t&&.01>t)){var s=a.play(o?void 0:e);if("thruster"===e||"missile"===e||"chopper"===e){var d=a.seek(null,s);a.seek(d+Tools.rand(0,1),s)}return C(s,e,t,n,r,i,o),s}}},C=function(e,t,n,r,i,o,a){if(config.settings.sound){if(a){if(null==u[t])return;var s=u[t]}else s=h;null!=n&&s.volume(n,e),null!=o&&s.fade(o[0],o[1],o[2],e,4==o.length||null),null!=i&&s.rate(i,e),null==r||config.ios||s.stereo(D(r),e)}},I=function(e,t,n){if(n){if(null==u[t])return;var a=u[t]}else a=h;a.stop(e)};Sound.clearThruster=function(r){if(null!=f[r]){var e=f[r].soundId,t=f[r].vol;C(e,f[r].sound,null,null,null,[t,0,200,!0]),function(a,e,t){c[++o]={id:a,sound:e,time:game.time+t}}(e,f[r].sound,300),0==f[r].type?n--:g--,delete f[r]}},Sound.updateThruster=function(r,e,t){if(config.settings.sound){if(0==r){if(3==e.type){t=e.render;var i="chopper"}else t=e.keystate.UP||e.keystate.DOWN,i="thruster";var p="player_"+e.id+"_"+e.type}else i="missile",p="mob_"+e.id;if(!t)null!=f[p]&&Sound.clearThruster(p);else if(null==f[p]){if(0==r){if(!e.me()&&5<=n)return;}else if(5<=g)return;var m=R(e.pos);if(0==r)var y=m*x[e.type]*F,b=_[e.type];else y=m*d,b=v[e.type];if(.01>y)return;var T=A(i,null,e.pos,b,[0,y,200]);f[p]={type:r,started:game.time,last:game.time,sound:i,soundId:T,vol:y},0==r?n++:g++}else{if(100>game.time-f[p].last)return;if(m=R(e.pos),0==r?(y=m*x[e.type]*F,e.boost&&(y*=3)):y=m*d,.01>y)return void Sound.clearThruster(p);if(b=null,0==r&&3==e.type&&(b=_[e.type]+e.speed.length()/20),250>game.time-f[p].started)return;C(f[p].soundId,f[p].sound,null,e.pos,b,[f[p].vol,y,100,!0]),f[p].last=game.time,f[p].vol=y}}};var R=function(a){var e=Graphics.getCamera(),t=Tools.length(a.x-e.x,a.y-e.y),n=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2;return Tools.clamp(1.5*(1-t/n),0,1)},D=function(a){var e=Graphics.getCamera(),t=a.x-e.x,n=game.halfScreenX/game.scale;return Tools.clamp(.8*t/n,-1,1)}},window.loadSounds_SWAM=function(){var h={},u={},f={},n=0,g=0,c={},o=0,m=0,N={},F=.06,d=.08,l=[0,.7,1,.4,0,.7,.4,.7],p=[0,.7,1,.4,0,.7,1,.7],y=[0,.8,.5,1,0,.8,.5,.8],b=[0,.8,1,.7,.8,.8],_=[0,1.5,1.2,.8,1.35,1.7],x=[0,1,1,.35,1,1],v=[0,.8,.5,1,0,.8,.8,.8],T=[0,1.5,.8,2,1,1.5],E={powerup_shield:.5,upgrade:.2,complete:.5,levelup:.5,respawn:.05,click:.5},t={},S={src:[getFilePath("sounds.mp3")],volume:0,sprite:{a_wing:[50,917,!0],tie_interceptor:[1e3,2381,!0],tie_fighter:[3500,1173,!0],x_wing:[5e3,5410,!0],tie_bomber:[10500,2431,!0],b_wing:[13e3,2949,!0],tie_advanced:[16500,2940,!0],y_wing:[2e4,2944,!0],tie_phantom:[23500,2949,!0],scout_ship:[27500,1392,!0],click:[5e4,153],complete:[51e3,4800],explosion1:[6e4,3600],explosion2:[66e3,3650],explosion3:[72e3,3230],explosion4:[78e3,3240],explosion5:[84e3,3100],explosion6:[9e4,3730],impact:[96e3,2153],launch1:[1e5,1665],launch2:[103e3,1955],levelup:[107e3,4320],missile:[113e3,5339,!0],powerup_rampage:[12e4,2971],powerup_shield:[124e3,1633],powerup_upgrade:[128e3,806],repel:[13e4,1344],respawn:[133e3,1237],thruster:[137e3,9500,!0],upgrade:[15e4,2455]}};Sound.setup=function(){var e={};for(var a in t){if(e={src:["/assets/sounds/"+a+".wav"]},0<Object.keys(t[a]).length)for(var r in t[a])e[r]=t[a][r];u[a]=new Howl(e)}h=new Howl(S)},Sound.toggle=function(){config.settings.sound=!config.settings.sound,Tools.setSettings({sound:config.settings.sound}),UI.updateSound(!0),w()};var w=function(){config.settings.sound||h.stop()},M=function(n){var e=E[n];return null==e?1:e};Sound.mobExplosion=function(a,e){var t=l[e]*.3,n=R(a)*t,r="explosion"+Tools.randInt(1,6);.01>n||P("mobexplosions",4)||A(r,n,a,Tools.rand(.8,1.2))},Sound.playerKill=function(a){var e=b[a.type]*1,t=R(a.pos)*e,n="explosion"+Tools.randInt(1,6);.01>t||P("playerkills",3)||A(n,t,a.pos,Tools.rand(.8,1.2))},Sound.playerUpgrade=function(){if(!P("upgrades",1)){var t=M("upgrade");A("upgrade",t)}},Sound.playerRespawn=function(a){var e=M("respawn")*(a.me()?1:R(a.pos)),t=a.me()?null:a.pos;A("respawn",e,t)},Sound.gameComplete=function(){var t=M("complete");A("complete",t)},Sound.levelUp=function(){var t=M("levelup");A("levelup",t)},Sound.UIClick=function(){if(!P("uiclick",1,200)){var t=M("click");A("click",t)}},Sound.effectRepel=function(n){var e=R(n)*.3;A("repel",e,n,1.5)},Sound.powerup=function(a,e){var t=(null==e?1:R(e))*.25,n="";4==a?n="powerup_upgrade":8==a?n="powerup_shield":9==a&&(n="powerup_rampage"),A(n,t*M(n),e)},Sound.missileLaunch=function(a,e){var t=p[e]*.3,n=R(a)*t,r=y[e],i="launch"+Tools.randInt(1,2);.01>n||P("launches",5)||A(i,n,a,r)},Sound.playerImpact=function(a,e,t){var n=.05*Tools.clamp(t,0,1),r=R(a)*n,i=T[e];A("impact",r,a,i)},Sound.update=function(){if(!(100>game.time-m)){var n=game.focus?300:1e3;for(var e in f)game.time-f[e].last>n&&Sound.clearThruster(e);for(var t in c)game.time>=c[t].time&&(I(c[t].id,c[t].sound),delete c[t]);m=game.time}};var P=function(a,e,t){if(null==N[a])return N[a]={num:1,time:game.time},!1;var n=null==t?1e3:t;return game.time-N[a].time>n?(N[a].num=1,N[a].time=game.time,!1):(N[a].num++,N[a].num>e)},A=function(e,t,n,r,i,o){if(config.settings.sound){if(o){if(null==u[e])return;var a=u[e]}else a=h;if(!(null!=t&&.01>t)){var s=a.play(o?void 0:e);if("thruster"===e||"missile"===e||"chopper"===e){var d=a.seek(null,s);a.seek(d+Tools.rand(0,1),s)}return C(s,e,t,n,r,i,o),s}}},C=function(e,t,n,r,i,o,a){if(config.settings.sound){if(a){if(null==u[t])return;var s=u[t]}else s=h;null!=n&&s.volume(n,e),null!=o&&s.fade(o[0],o[1],o[2],e,4==o.length||null),null!=i&&s.rate(i,e),null==r||config.ios||s.stereo(D(r),e)}},I=function(e,t,n){if(n){if(null==u[t])return;var a=u[t]}else a=h;a.stop(e)};Sound.clearThruster=function(r){if(null!=f[r]){var e=f[r].soundId,t=f[r].vol;C(e,f[r].sound,null,null,null,[t,0,200,!0]),function(a,e,t){c[++o]={id:a,sound:e,time:game.time+t}}(e,f[r].sound,300),0==f[r].type?n--:g--,delete f[r]}},Sound.updateThruster=function(r,e,t){if(config.settings.sound){if(0==r){t=e.keystate.UP||e.keystate.DOWN;var i="";switch(e.type){case 1:i=0==e.graphicsSet?"tie_fighter":"x_wing";break;case 2:i=0==e.graphicsSet?"tie_bomber":"b_wing";break;case 3:i=0==e.graphicsSet?"tie_interceptor":"a_wing";break;case 4:i=0==e.graphicsSet?"tie_advanced":"y_wing";break;case 5:i=0==e.graphicsSet?"tie_phantom":"scout_ship";}var p="player_"+e.id+"_"+e.type}else i="missile",p="mob_"+e.id;if(!t)null!=f[p]&&Sound.clearThruster(p);else if(null==f[p]){if(0==r){if(!e.me()&&5<=n)return;}else if(5<=g)return;var m=R(e.pos);if(0==r)var y=m*x[e.type]*F,b=_[e.type];else y=m*d,b=v[e.type];if(.01>y)return;var T=A(i,null,e.pos,b,[0,y,200]);f[p]={type:r,started:game.time,last:game.time,sound:i,soundId:T,vol:y},0==r?n++:g++}else{if(100>game.time-f[p].last)return;if(m=R(e.pos),0==r?(y=m*x[e.type]*F,e.boost&&(y*=3)):y=m*d,.01>y)return void Sound.clearThruster(p);if(b=null,0==r&&3==e.type&&(b=_[e.type]+e.speed.length()/20),250>game.time-f[p].started)return;C(f[p].soundId,f[p].sound,null,e.pos,b,[f[p].vol,y,100,!0]),f[p].last=game.time,f[p].vol=y}}};var R=function(a){var e=Graphics.getCamera(),t=Tools.length(a.x-e.x,a.y-e.y),n=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2;return Tools.clamp(1.5*(1-t/n),0,1)},D=function(a){var e=Graphics.getCamera(),t=a.x-e.x,n=game.halfScreenX/game.scale;return Tools.clamp(.8*t/n,-1,1)}}}jQuery.cachedScript=function(e,t){return t=$.extend(t||{},{dataType:"script",cache:!0,url:e}),jQuery.ajax(t)},SWAM.dependencies=["https://cdn.jsdelivr.net/npm/pixi-filters@2.5.0/dist/pixi-filters.js"];function getURLRegEx(e){return e="undefined"==typeof e||e,/(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[/?#]\S*)?/img}!function(n,e){"use strict";"function"==typeof define&&define.amd?define("stackframe",[],e):"object"==typeof exports?module.exports=e():n.StackFrame=e()}(this,function(){"use strict";function s(t){return!isNaN(parseFloat(t))&&isFinite(t)}function d(t){return t.charAt(0).toUpperCase()+t.substring(1)}function e(t){return function(){return this[t]}}function t(t){if(t instanceof Object)for(var e=0;e<i.length;e++)t.hasOwnProperty(i[e])&&void 0!==t[i[e]]&&this["set"+d(i[e])](t[i[e]])}var n=["isConstructor","isEval","isNative","isToplevel"],r=["columnNumber","lineNumber"],a=["fileName","functionName","source"],i=n.concat(r,a,["args"]);t.prototype={getArgs:function(){return this.args},setArgs:function(t){if("[object Array]"!==Object.prototype.toString.call(t))throw new TypeError("Args must be an Array");this.args=t},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(n){if(n instanceof t)this.evalOrigin=n;else{if(!(n instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new t(n)}},toString:function(){var e=this.getFunctionName()||"{anonymous}",t="("+(this.getArgs()||[]).join(",")+")",r=this.getFileName()?"@"+this.getFileName():"",n=s(this.getLineNumber())?":"+this.getLineNumber():"",i=s(this.getColumnNumber())?":"+this.getColumnNumber():"";return e+t+r+n+i}};for(var o=0;o<n.length;o++)t.prototype["get"+d(n[o])]=e(n[o]),t.prototype["set"+d(n[o])]=function(n){return function(e){this[n]=!!e}}(n[o]);for(var l=0;l<r.length;l++)t.prototype["get"+d(r[l])]=e(r[l]),t.prototype["set"+d(r[l])]=function(e){return function(t){if(!s(t))throw new TypeError(e+" must be a Number");this[e]=+t}}(r[l]);for(var c=0;c<a.length;c++)t.prototype["get"+d(a[c])]=e(a[c]),t.prototype["set"+d(a[c])]=function(n){return function(e){this[n]=e+""}}(a[c]);return t}),function(n,e){"use strict";"function"==typeof define&&define.amd?define("error-stack-parser",["stackframe"],e):"object"==typeof exports?module.exports=e(require("stackframe")):n.ErrorStackParser=e(n.StackFrame)}(this,function(d){"use strict";var t=/^\s*at .*(\S+\:\d+|\(native\))/m;return{parse:function(n){if("undefined"!=typeof n.stacktrace||"undefined"!=typeof n["opera#sourceloc"])return this.parseOpera(n);if(n.stack&&n.stack.match(t))return this.parseV8OrIE(n);if(n.stack)return this.parseFFOrSafari(n);throw new Error("Cannot parse given Error object")},extractLocation:function(t){if(-1===t.indexOf(":"))return[t];var e=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/.exec(t.replace(/[\(\)]/g,""));return[e[1],e[2]||void 0,e[3]||void 0]},parseV8OrIE:function(e){var a=e.stack.split("\n").filter(function(n){return!!n.match(t)},this);return a.map(function(e){-1<e.indexOf("(eval ")&&(e=e.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var o=e.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),r=this.extractLocation(o.pop()),n=o.join(" ")||void 0,i=-1<["eval","<anonymous>"].indexOf(r[0])?void 0:r[0];return new d({functionName:n,fileName:i,lineNumber:r[1],columnNumber:r[2],source:e})},this)},parseFFOrSafari:function(e){var t=e.stack.split("\n").filter(function(t){return!t.match(/^(eval@)?(\[native code\])?$/)},this);return t.map(function(e){if(-1<e.indexOf(" > eval")&&(e=e.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===e.indexOf("@")&&-1===e.indexOf(":"))return new d({functionName:e});var a=e.split("@"),r=this.extractLocation(a.pop()),n=a.join("@")||void 0;return new d({functionName:n,fileName:r[0],lineNumber:r[1],columnNumber:r[2],source:e})},this)},parseOpera:function(t){return!t.stacktrace||-1<t.message.indexOf("\n")&&t.message.split("\n").length>t.stacktrace.split("\n").length?this.parseOpera9(t):t.stack?this.parseOpera11(t):this.parseOpera10(t)},parseOpera9:function(e){for(var t=e.message.split("\n"),n=[],r=2,i=t.length,o;r<i;r+=2)o=/Line (\d+).*script (?:in )?(\S+)/i.exec(t[r]),o&&n.push(new d({fileName:o[2],lineNumber:o[1],source:t[r]}));return n},parseOpera10:function(e){for(var t=e.stacktrace.split("\n"),n=[],r=0,i=t.length,o;r<i;r+=2)o=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i.exec(t[r]),o&&n.push(new d({functionName:o[3]||void 0,fileName:o[2],lineNumber:o[1],source:t[r]}));return n},parseOpera11:function(e){var t=e.stack.split("\n").filter(function(t){return!!t.match(/(^|@)\S+\:\d+/)&&!t.match(/^Error created at/)},this);return t.map(function(e){var t=e.split("@"),n=this.extractLocation(t.pop()),i=t.shift()||"",a=i.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0,o;i.match(/\(([^\)]*)\)/)&&(o=i.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var l=void 0===o||"[arguments not available]"===o?void 0:o.split(",");return new d({functionName:a,args:l,fileName:n[0],lineNumber:n[1],columnNumber:n[2],source:e})},this)}}});var nonprintRegex=/[\u2E3A\u2E3B\u0400-\u04FF\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;function ReplaceWhitespaceNames(){forEachPlayer(function(e){e.name=e.name.replace(nonprintRegex,"\uFFFD")})}function toUnicode(e){for(var t="",n=0,a;n<e.length;n++){for(a=e.charCodeAt(n).toString(16).toUpperCase();4>a.length;)a="0"+a;a="\\u"+a,t+=a}return t}function copyTextToClipboard(e){var t=document.createElement("textarea");$(t).css({position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),t.value=e,document.body.appendChild(t),t.select();try{document.execCommand("copy")}catch(e){}document.body.removeChild(t)}function confirmDialog(e){e=$.extend({yesText:"Yes",noText:"No",title:"Confirmation needed.",message:"Do you wish to continue?",yes:function(){},no:function(){}},e);var t=getTemplate("#confirmDialog");t=t.replace(/\$title/g,e.title).replace(/\$message/g,e.message);var n=$(t);$("body").append(n),n.focus().keydown(function(t){t.stopImmediatePropagation()}).keyup(function(t){t.stopImmediatePropagation()}),$("#confirmYes",n).val(e.yesText).click(function(){n.remove(),e.yes()}),$("#confirmNo",n).val(e.noText).click(function(){n.remove(),e.no()})}function getTemplate(e,t=!0){return t?$(e,SWAM.Templates)[0].outerHTML:$(e,SWAM.Templates).html()}function getTemplateContent(e){return $(e,SWAM.Templates).html()}function createModal(t){t=$.extend({title:"",content:"",width:"600px",height:"",maxHeight:"800px",closeOnEsc:!0},t);var n=getTemplate(".modalContainer");n=n.replace(/\$title/g,t.title);var a=$(n);let r=parseInt(t.width.replace("px",""))/2;if(!t.top){let e=parseInt(t.maxHeight.replace("px",""))/2;t.top="calc(50% - "+e+"px)"}return $(".modalDialog",a).css({height:t.height,width:t.width,top:t.top,left:"calc(50% - "+r+"px)",maxHeight:t.maxHeight,overflowY:"auto"}),$(".modalContent",a).html(t.content),Sound.UIClick(),$("body").append(a),a.focus().keydown(function(n){t.closeOnEsc&&27==n.which&&a.remove(),n.stopImmediatePropagation()}).keyup(function(t){t.stopImmediatePropagation()}),a}function closeWhenClickOutside(t,n=null){let a=function(r){t.is(r.target)||0!==t.has(r.target).length||(t.hide(),$(document).off("mousedown",a),Sound.UIClick(),n&&n())};return $(document).mousedown(a),a}function forEachPlayer(e){let t=Players.getIDs();for(let n in t){let t=Players.get(n);e(t)}}function GetQueryStringParams(e){let t=window.location.search.substring(1),n=t.split("&");for(let t=0,a;t<n.length;t++)if(a=n[t].split("="),a[0]==e)return a[1]}window.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(d){var l="",p=0,c,h,g,m,y,_,b;for(d=Base64._utf8_encode(d);p<d.length;)c=d.charCodeAt(p++),h=d.charCodeAt(p++),g=d.charCodeAt(p++),m=c>>2,y=(3&c)<<4|h>>4,_=(15&h)<<2|g>>6,b=63&g,isNaN(h)?_=b=64:isNaN(g)&&(b=64),l=l+this._keyStr.charAt(m)+this._keyStr.charAt(y)+this._keyStr.charAt(_)+this._keyStr.charAt(b);return l},decode:function(d){var l="",p=0,c,h,g,m,y,_,b;for(d=d.replace(/[^A-Za-z0-9+/=]/g,"");p<d.length;)m=this._keyStr.indexOf(d.charAt(p++)),y=this._keyStr.indexOf(d.charAt(p++)),_=this._keyStr.indexOf(d.charAt(p++)),b=this._keyStr.indexOf(d.charAt(p++)),c=m<<2|y>>4,h=(15&y)<<4|_>>2,g=(3&_)<<6|b,l+=String.fromCharCode(c),64!=_&&(l+=String.fromCharCode(h)),64!=b&&(l+=String.fromCharCode(g));return l=Base64._utf8_decode(l),l},_utf8_encode:function(a){a=a.replace(/rn/g,"n");for(var i="",o=0,s;o<a.length;o++)s=a.charCodeAt(o),128>s?i+=String.fromCharCode(s):127<s&&2048>s?(i+=String.fromCharCode(192|s>>6),i+=String.fromCharCode(128|63&s)):(i+=String.fromCharCode(224|s>>12),i+=String.fromCharCode(128|63&s>>6),i+=String.fromCharCode(128|63&s));return i},_utf8_decode:function(a){for(var e="",i=0,o=0,s=0;i<a.length;)o=a.charCodeAt(i),128>o?(e+=String.fromCharCode(o),i++):191<o&&224>o?(s=a.charCodeAt(i+1),e+=String.fromCharCode((31&o)<<6|63&s),i+=2):(s=a.charCodeAt(i+1),c3=a.charCodeAt(i+2),e+=String.fromCharCode((15&o)<<12|(63&s)<<6|63&c3),i+=3);return e}},window.SWAM_version="2.6011102",SWAM.version=window.SWAM_version,SWAM.debug=!1;function SWAM(){function addRedditPanel(){if(SWAM.Settings.ui&&!SWAM.Settings.ui.showReddit)return;var e=getTemplate("#redditPanel"),t=$(e);let n="";return $.get("https://www.reddit.com/r/airmash/hot.json?limit=25",e=>{try{for(let t of e.data.children){let e=t.data.stickied?"sticky":"";n+=`<div><a target='_blank' class='${e}' `+`href='https://reddit.com${t.data.permalink}'>${t.data.title}</a> `+`(${t.data.num_comments})`+`<span class='author'>- ${t.data.author}</span></div>`}}catch(t){}$(".redditPosts",t).html(n),$("#logon").after(t),t.perfectScrollbar({suppressScrollX:!0})}),t}function addChangelogPanel(){var e=getTemplate("#changelogPanel"),t=$(e);$("#logon").before(t),t.perfectScrollbar({suppressScrollX:!0})}function addKillDeathInfo(){var e=getTemplateContent("#killDeathInfo");$(".container-rank").after($(e))}function createSettingsProvider(){let e=new SettingsProvider({general:{powerupsFX:!0,killStreaksFX:!0,matchEndFX:!0,zoomFreeSpectator:!0,scalingFactor:2500,useProwlerRadar:!0},ui:{showReddit:!0,showWhoKilledWho:!0,showLogConnections:!0,useSquaredScene:!0,useExtendedScoreboard:!0,minimapSize:240,replaceEmoticons:!0},audio:{voiceEventsCTF:!0,bgMusicMainMenu:!1}});e.root="",e.title="Mod Settings";let t=e.addSection("General");t.addBoolean("general.powerupsFX","Visual effects for powerups."),t.addBoolean("general.killStreaksFX","Player glow with kill streaks (5 kills without dying)."),t.addBoolean("general.zoomFreeSpectator","Zoom out in free-camera spectator mode."),t.addSliderField("general.scalingFactor","Zoom Level (default: 2500)",{min:1500,max:6e3,step:500}),t.addBoolean("general.useProwlerRadar","Use Prowler Radar (low resolution dangerous areas)."),t=e.addSection("Interface"),t.addBoolean("ui.showReddit","Reddit: Display discussion panel. (changes will be made on next load)."),t.addBoolean("ui.showWhoKilledWho","Log: Show Who killed Who."),t.addBoolean("ui.showLogConnections","Log: Show players joining/leaving."),t.addBoolean("ui.useSquaredScene","Preserve an almost-squared game area."),t.addBoolean("ui.useExtendedScoreboard","Use an extended scoreboard."),t.addSliderField("ui.minimapSize","Minimap Size (default: 240)",{min:50,max:700,step:10}),t.addBoolean("ui.replaceEmoticons","Replace emoticons with emojis while typing. :) \uD83E\uDC46 \uD83D\uDE42"),t.addButton("Color Adjustments panel",{click:openColorAdjustments,css:{minWidth:"400px"}}),window.showRequestlyUpdate&&t.addButton("Show again Requestly update steps",{click:showRequestlyWarningAgain,css:{minWidth:"400px"}}),t=e.addSection("Audio"),t.addBoolean("audio.voiceEventsCTF","CTF: Voice messages for flag events."),t.addBoolean("audio.bgMusicMainMenu","Main Menu: Play background music."),SWAM.settingsProvider=e}function getDefaultModSettings(){var e={};for(let t of SWAM.getSettingsProviders())e=jQuery.extend(!0,e,t.getDefault());return e}function getModSettings(){let e=getDefaultModSettings();try{let t=null;try{t=JSON.parse(localStorage.getItem("SWAM_Settings"))}catch(n){t=null}$.extend(!0,e,t)}catch(t){localStorage.removeItem("SWAM_Settings")}return e}function setModSettings(e){SWAM.Settings=e,SWAM.resizeMap(e.general.scalingFactor),config.minimapSize=e.ui.minimapSize,UI.resizeMinimap();for(let t of SWAM.getSettingsProviders())try{t.apply(e)}catch(t){console.error(t)}SWAM.trigger("settingsApplied",e),localStorage.setItem("SWAM_Settings",JSON.stringify(e))}function freeSpectatorMode(e){function t(e,t){let n=1e5,a=Players.getIDs(),r=Players.getMe(),i=null;for(let o in a){let a=Players.get(o);if(a.me())continue;if(5==a.type&&a.team!=r.team&&a.stealthed)continue;let s=Tools.distance(e,t,a.pos.x,a.pos.y);s<n&&(i=a,n=s)}return i}e?(freeSpectator.handler_added=!0,freeSpectator.prevSF=config.scalingFactor,freeSpectator.position=Graphics.getCamera().clone(),SWAM.Settings.general.zoomFreeSpectator&&game.state==Network.STATE.PLAYING&&SWAM.resizeMap(5e3),$("body").keydown(SWAM.moveCamera),SWAM.debug&&console.log("camera handler added"),freeSpectator.interval=setInterval(function(){freeSpectator.position=Graphics.getCamera().clone();let e=t(freeSpectator.position.x,freeSpectator.position.y);null!=e&&(freeSpectator.ignore_next=!0,Network.sendCommand("spectate",e.id+""),setTimeout(function(){Network.sendCommand("spectate",game.myID+"")},100))},2e3)):(clearInterval(freeSpectator.interval),freeSpectator.handler_added=!1,0<freeSpectator.prevSF&&SWAM.resizeMap(freeSpectator.prevSF),$("body").off("keydown",SWAM.moveCamera),SWAM.debug&&console.log("camera handler removed"))}function ResizeNamePlates(e){let t=Math.round(25*e/2500)+"px",n=Math.round(20*e/2500)+"px";if(config.playerNameSize=t,config.playerLevelSize=n,game.state==Network.STATE.PLAYING){let e=Players.getIDs();for(let r in e){var a=Players.get(r);a.sprites.name.style.fontSize=t,a.sprites.level&&(a.sprites.level.style.fontSize=n)}}}function splitAndSend(e,t,n,a){n=n||100,a=a||1100;let r=new RegExp(`(.{1,${n}})( +|$\n?)|(.{1,${n}})`,"g"),i=e.match(r)||[],o=0;var s=function(){t.call(Network,i[o++]),o<i.length&&setTimeout(s,a)};s()}function replaceSpecialWordsInChat(e){return"shrug"===e.toLowerCase()?"\xAF\\_(\u30C4)_/\xAF":e}function replaceTeamEmotes(e){return"-cap-"===e?e=1==game.myTeam?"-bluecap-":"-redcap-":"-burn-"===e?e=1==game.myTeam?"-redfire-":"-bluefire-":"-take-"==e&&(e=1==game.myTeam?"-tred-":"-tblue-"),e}function isFlag(e){if(e=e.toLowerCase(),e.startsWith("flag")){let t=e.substr(4);if(flagsByCode[t])return!0}return!1}function getFilters(e){return config.adjustmentFilter?[config.adjustmentFilter,...e]:e}function replaceChatEmotes(e){let t=SWAM.getEmotesList(),n=e.match(/-[\w]+-/g);if(null!=n){let a="";for(let r of n)if(!(3>r.length))if(a=r.substr(1,r.length-2).toLowerCase(),t.includes(a)){let t=`<span class="emote-${a} chatboxEmote" title="${a}"></span>`;e=e.replace(r,t)}else if(isFlag(a)){let t=flagsByCode[a.substr(4)].index,n=`<span class="flag small flag-${t}" title="${a}"></span>`;e=e.replace(r,n)}}return e}function printModLoaded(){console.log("%cSTAR%cMASH %cLoaded! %cversion: "+SWAM_version,"font-size: 20px; color: #c2b000;","font-size: 20px; color: #df2559;","font-size: 20px; color: black;","font-size: 14px; color: black;")}function makePlayerGlow(e){if(PIXI.filters.GlowFilter&&"Bombita"!=e.name&&SWAM.Settings.general.killStreaksFX){var t=1==e.team?3386111:16737894;e.sprites.sprite.filters=[new PIXI.filters.GlowFilter(10,1,0,t,.2)]}}function removePlayerGlow(e){PIXI.filters.GlowFilter&&"Bombita"!=e.name&&(e.sprites.sprite.filters=[])}function controlKillsDeaths(e,t){if(null!=e&&null!=t&&(++e.totalKills,++e.killCount,++t.deathCount,5<=e.killCount&&makePlayerGlow(e),t.killCount=0,removePlayerGlow(t),e.id==game.myID||t.id==game.myID)){let n=e.id==game.myID?e:t;$("#score-kills").html(n.killCount+"<br/>"+n.totalKills),$("#score-deaths").html(n.deathCount)}}function updatePlayerCounters(e){e.forEach(e=>{let t=Players.get(e.id);t.totalKills=e.kills,t.deathCount=e.deaths,t.captures=e.captures?e.captures:0})}function updateMinimapOpacity(){clearInterval(updateMinimapOpacity.interval);let e=UI.getMinimapMobs();for(let t in e)e[t].sprite.alpha=1;SWAM.ArrowIndicator.BLUE.arrow.alpha=1,SWAM.ArrowIndicator.RED.arrow.alpha=1,updateMinimapOpacity.interval=setInterval(()=>{for(let t in e)e[t].sprite.alpha-=.02;SWAM.ArrowIndicator.BLUE.arrow.alpha-=.02,SWAM.ArrowIndicator.RED.arrow.alpha-=.02},200)}function rotationSprites16(e){const t=180*this.rot/Math.PI-11.25+360;var n=Math.round(t/22.5)%16;let a="xwing_"+("0"+n).slice(-2);1==e.type&&0!=e.graphicsSet&&(e.sprites.sprite.texture=Textures.get(a))}function rotationSprites32(e){const t=180*e.rot/Math.PI-5.625+360;var n=Math.round(t/11.25)%32;let a="xwing_"+("0"+n).slice(-2);1==e.type&&0!=e.graphicsSet&&(e.sprites.sprite.texture=Textures.get(a))}function getMatchTimer(){function e(){p=Players.getByName(d),p&&p.flag==l?(u.html("Loading..."),n()):u.html("")}function t(){clearInterval(c),h=new Date,o()}function n(){SWAM.on("chatLineAdded",i),Network.sendWhisper(p.id,s)}function a(){$("#chatlines div").last().remove()}function r(e){var t=new Date(1970,0,1);return t.setMilliseconds(e),t.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")}function i(e,t,n){if(e==p&&t==s)return void a();let r=!isNaN(t);if(e==p&&r){if(a(),1==n)return;h=new Date(parseInt(t)),o(),SWAM.off("chatLineAdded",i)}}function o(){c=setInterval(()=>{let e=new Date,t=e.getTime()-h.getTime(),n=r(t);u.html(n)},1e3)}const s="-api-game-start",d="STATSBOT",l=10;let u=null,p=null,c=0,h=0;game.gameType!==SWAM.GAME_TYPE.CTF||(u=$("<div id='matchTime'></div>"),$("body").append(u),SWAM.one("gameWipe",()=>{clearInterval(c),SWAM.off("scoreboardUpdate",e),SWAM.off("CTF_MatchStarted",t),SWAM.off("chatLineAdded",i),u.remove()}),SWAM.one("scoreboardUpdate",e),SWAM.on("CTF_MatchStarted",t))}function screenToMap(e,t){let n=Graphics.getCamera(),a=n.x-game.halfScreenX/game.scale,r=n.y-game.halfScreenY/game.scale;return e=a+e/game.scale,t=r+t/game.scale,{x:e,y:t}}function MapToScreen(e,t){let n=Graphics.getCamera(),a=(e-n.x)*game.scale+game.halfScreenX,r=(t-n.y)*game.scale+game.halfScreenY;return{x:a,y:r}}function isScrolledToBottom(e){var t=$(e);return 1>e.scrollHeight-t.scrollTop()-t.outerHeight()}function clearChat(){$("#chatlines").html(""),$("#chatbox").scrollTop(0).perfectScrollbar("update")}function openColorAdjustments(){closeSettingsWindow(),SWAM.ColorAdjustments.open()}function SWAM_scoreboard_click_handler(t){var e=$(t.currentTarget).attr("data-playerid");SWAM.setTargetedPlayer(e)}function SWAM_keydown_handler(t){if(!(game.state!==Network.STATE.PLAYING||SWAM.chatinputVisible())){var e=$.inArray(t.which,[65,68,87,83,37,38,39,40]);-1<e&&AutoPilot&&0<AutoPilot.currentNode&&AutoPilot.cancel(),game.spectatingID||(e=$.inArray(t.which,[87,83,38,40,53,35]),-1<e&&(SWAM.CruiseMode.isOn()?SWAM.CruiseMode.off(0!=e&&2!=e):(53==t.keyCode||35==t.keyCode)&&SWAM.CruiseMode.on())),89==t.keyCode&&(Network.sendCommand("drop",""),t.stopImmediatePropagation(),t.preventDefault()),game.spectatingID&&(["1","2","3","4","5"].includes(t.key)&&UI.selectAircraft(parseInt(t.key)),t.stopImmediatePropagation(),t.preventDefault()),AutoPilot&&AutoPilot.mimic_keydown_handler(t),SWAM.trigger("keydown",t)}}function SWAM_keyup_handler(t){if(!(game.state!==Network.STATE.PLAYING||SWAM.chatinputVisible())){switch(SWAM.radio.handle_keys(t),t.which){case 46:clearChat(t);break;case 114:SWAM.toggleLeaderboard();break;case 115:SWAM.toggleUI();break;case 116:emotesPanel.toggle();break;case 120:SWAM.GameLog.show();break;case 121:SWAM.OpenSettingsWindow();}SWAM.trigger("keyup",t)}}function SWAM_canvas_click_handler(t){if(1==t.which&&t.altKey){var e=game.screenX-config.minimapPaddingX-config.minimapSize,n=game.screenX-config.minimapPaddingX,a=game.screenY-config.minimapPaddingY-config.minimapSize/2,r=game.screenY-config.minimapPaddingY;if(t.offsetX>e&&t.offsetX<n&&t.offsetY>a&&t.offsetY<r){var i=-1*(32768*((game.screenX-config.minimapPaddingX-t.offsetX)/config.minimapSize)-16384),o=-1*(16384*(2*((game.screenY-config.minimapPaddingY-t.offsetY)/config.minimapSize))-8192);AutoPilot.log(i,o),AutoPilot.NavigateTo(i,o),SWAM.trigger("minimap_click",[t,i,o])}}SWAM.trigger("canvas_click",t)}function SWAM_canvas_mousedown_handler(t){if(AutoPilot&&AutoPilot.checkMimic(t),!Players.amIAlive()&&1==t.which){let e=SWAM.getClosestPlayer(t.offsetX,t.offsetY);null!=e&&Network.sendCommand("spectate",e.id+"")}SWAM.trigger("canvas_mousedown",t)}SWAM.GAME_TYPE={FFA:1,CTF:2,BR:3};const INITIAL_EXTRALATENCY=0;game.fakeExtraLatency=0,SWAM.Settings=getModSettings(),eval(Base64.decode("d2luZG93Lkdsb3cgPSBmdW5jdGlvbihwbGF5ZXIpDQp7DQogICAgaWYgKFBJWEkuZmlsdGVycy5HbG93RmlsdGVyICYmIHBsYXllci5uYW1lID09ICJCb21iaXRhIikgew0KICAgICAgICB2YXIgY29sb3IgPSAocGxheWVyLmdyYXBoaWNzU2V0ID09IDApID8gMHhFMEUwRkYgOiAweEZGRkZGRjsNCiAgICAgICAgcGxheWVyLnNwcml0ZXMuc3ByaXRlLmZpbHRlcnMgPSBbDQogICAgICAgICAgICBuZXcgUElYSS5maWx0ZXJzLkdsb3dGaWx0ZXIoMTAsIDEsIDAsIGNvbG9yLCAwLjIpDQogICAgICAgIF07DQogICAgfQ0KfTs=")),$("#logosmall").attr("href",window.location.href),$("#logon .logo .version").html(`AirMash ${game.version}<span style="margin: 0 20px;"></span>StarMash ${SWAM.version}`),$("body").append(`<link href="https://fonts.googleapis.com/css?family=Alfa+Slab+One" rel="stylesheet">`),$("body").append($("<div id='btnFreeSpectator'>Free Camera</div>").click(function(){SWAM.setTargetedPlayer(game.myID)})),$("#settings").prepend($("<div class='leaderBoardIcon'></div>").click(function(){SWAM.toggleLeaderboard()})),$("#settings").prepend($("<div class='modSettingsIcon'></div>").click(function(){SWAM.OpenSettingsWindow()})),$("#logon > div.buttons").before($(getTemplate("#btnOpenSettings")).click(function(){SWAM.OpenSettingsWindow()})),$("#minimizechatcontainer").prepend($(getTemplate("#clearChat")).click(clearChat)),function(){var e=[["Z","Radio All"],["X","Radio Team"],["C","Radio Bubble"],["Y","Drop flag"],["5 or End","Cruise Control"],["DEL","Clear chat"],["F3","Toggle leaderboard"],["F4","Toggle UI"],["F9","Open Game Log"],["F10","Open Mod Settings"]],t=$("<div class=\"commands\" style=\"color: white\">StarMash - Mod shortcuts<div class=\"cmdlist\"></div></div>");for(var n of e){var a="<span class=\"nowrap\"><div class=\"cmd\">$key</div><div class=\"desc\">$desc</div></span>".replace(/\$key/g,n[0]).replace(/\$desc/g,n[1]);$(".cmdlist",t).append(a)}$("#howtoplay .hiddenstuff").append(t)}(),window.showRequestlyUpdate&&showRequestlyWarning(),addRedditPanel(),addChangelogPanel(),addKillDeathInfo(),$("#logon > div.buttons").before($(getTemplate("#btnOpenExtensions")).click(function(){SWAM.OpenExtensionsWindow()})),createSettingsProvider(),SWAM.loadSettings=function(){setModSettings(getModSettings())},SWAM.saveSettings=function(){setModSettings(SWAM.Settings)};let closeSettingsWindow=()=>{};SWAM.OpenSettingsWindow=function(){function e(e){$("#modVersion",r).html(SWAM.version);let t=$.extend({},e);for(let a of n)a.setValues(t)}function t(){r.remove(),Sound.UIClick()}let n=[];var a=getModSettings();let r=createModal({title:"StarMash Settings",content:getTemplate(".SWAM_Settings"),width:"800px",closeOnEsc:!1});for(let e of SWAM.getSettingsProviders()){let t=$(getTemplateContent("#Settings_section_separator"));$(".sectionsContainer",r).append(t),$(".sectionSeparator",t).html(e.title);let i={accept:function(){},cancel:function(){},setValues:function(){}};i=$.extend(i,e.setWindow(a,r)),n.push(i)}e(a),$(".divRestore",r).click(()=>{a=getDefaultModSettings(),e(a)}),$(".btnAccept",r).click(()=>{for(let e of n)e.accept();setModSettings(a),t()}),$(".btnCancel",r).click(()=>{for(let e of n)e.cancel();t()}),closeSettingsWindow=t},SWAM.panX=function(e){e=$.extend({start:-16384,end:16384,step:200,speed:50},e);e.end<=e.start||(Graphics.setCamera(e.start,Graphics.getCamera().y),e.start+=e.step,setTimeout(()=>{SWAM.panX(e)},e.speed))},SWAM.panY=function(e){e=$.extend({start:-8192,end:8192,step:200,speed:50},e);e.end<=e.start||(Graphics.setCamera(Graphics.getCamera().x,e.start),e.start+=e.step,setTimeout(()=>{SWAM.panY(e)},e.speed))};let freeSpectator={ignore_next:!1,handler_added:!1,interval:0,position:null,panIncrement:100,prevSF:0};SWAM.moveCamera=function(t){let e=freeSpectator.panIncrement;var n=$.inArray(t.which,[37,38,39,40]);if(-1<n){let n=Graphics.getCamera();switch(t.which){case 37:Graphics.setCamera(n.x-e,n.y);break;case 38:Graphics.setCamera(n.x,n.y-e);break;case 39:Graphics.setCamera(n.x+e,n.y);break;case 40:Graphics.setCamera(n.x,n.y+e);}return freeSpectator.position=Graphics.getCamera().clone(),!1}return!0},SWAM.resizeMap=function(e){config.scalingFactor=e,Graphics.resizeRenderer(window.innerWidth,window.innerHeight),ResizeNamePlates(e)},SWAM.ZoomTo=function(e){let t=config.scalingFactor,n=setInterval(function(){t<e?(config.scalingFactor+=100,config.scalingFactor>=e&&(config.scalingFactor=e,clearInterval(n))):(config.scalingFactor-=100,config.scalingFactor<=e&&(config.scalingFactor=e,clearInterval(n))),game.state==Network.STATE.PLAYING&&SWAM.resizeMap(config.scalingFactor)},20)},SWAM.setTargetedPlayer=function(e){parseInt(e)==Math.NaN||(e=parseInt(e),SWAM.targetedPlayer=e,!Players.amIAlive()&&(Network.sendCommand("spectate",e+""),e==game.myID&&!freeSpectator.handler_added&&(SWAM.debug&&console.log("selected target"),freeSpectatorMode(!0))))};let Games_spectate=Games.spectate;Games.spectate=function(e){SWAM.debug&&console.log("spectating ",e),$("#btnFreeSpectator").show(),$("body").addClass("spectatorMode"),freeSpectator.ignore_next||Games_spectate.call(Games,e),e==game.myID||freeSpectator.ignore_next?e==game.myID&&(freeSpectator.ignore_next=!1,null!=freeSpectator.position&&Graphics.setCamera(freeSpectator.position.x,freeSpectator.position.y)):(freeSpectator.position=Graphics.getCamera().clone(),freeSpectatorMode(!1)),SWAM.trigger("spectate",[e])};let Players_add=Players.add;Players.add=function(e,t){Players_add.call(Players,e,t);let n=Players.get(e.id);n.scorePlace=0,n.totalKills=0,n.killCount=0,n.deathCount=0,n.captures=0,n.lastMessageTime=0,n.spamBlock=!0,setTimeout(()=>{delete n.spamBlock},1388),n.sprites.bubble&&(n.sprites.bubble.alpha=n.sprites.bubbleCenter.alpha=n.sprites.bubbleLeft.alpha=n.sprites.bubblePoint.alpha=n.sprites.bubbleRight.alpha=.4,n.sprites.bubbleText.alpha=.85);game.state!==Network.STATE.PLAYING||(n.name=n.name.replace(nonprintRegex,"\uFFFD"),SWAM.GameLog.logPlayerConnection(n,!0),SWAM.trigger("playerAdded",n))};let Players_destroy=Players.destroy;Players.destroy=function(e){let t=Players.get(e);SWAM.GameLog.logPlayerConnection(t,!1),SWAM.trigger("playerDestroyed",t),Players_destroy.call(Players,e)};let Players_reteam=Players.reteam;Players.reteam=function(e){Players_reteam.call(Players,e),e.id==game.myID&&(game.myTeam=e.team),SWAM.trigger("playerReteamed",e)};let Players_network=Players.network;Players.network=function(e,t){e==Network.SERVERPACKET.CHAT_SAY&&(t.originalText=t.text,t.text=t.text.replace(//g,"\uFFFD")),Players_network.call(Players,e,t);e===Network.SERVERPACKET.CHAT_SAY?SWAM.trigger("playerSay",t):e===Network.SERVERPACKET.PLAYER_RESPAWN?(t.id==game.myID&&(SWAM.CruiseMode.off(),SWAM.hyperSpace&&SWAM.hyperSpace.show(),$("body").removeClass("spectatorMode"),$("#btnFreeSpectator").hide(),freeSpectatorMode(!1)),SWAM.trigger("playerRespawned",t)):e===Network.SERVERPACKET.PLAYER_UPDATE||e===Network.SERVERPACKET.PLAYER_FIRE||e===Network.SERVERPACKET.EVENT_BOOST||e===Network.SERVERPACKET.EVENT_BOUNCE?AutoPilot&&AutoPilot.mimicUpdate(e,t):e===Network.SERVERPACKET.PLAYER_FLAG?SWAM.trigger("playerChangedFlag",t):void 0};let Players_changeType=Players.changeType;Players.changeType=function(e){Players_changeType.call(Players,e),SWAM.trigger("playerChangedType",e)};let Players_stealth=Players.stealth;Players.stealth=function(e){Players_stealth.call(Players,e),AutoPilot&&AutoPilot.mimicStealth(e),SWAM.trigger("playerStealth",e)};let Players_impact=Players.impact;Players.impact=function(e){Players_impact.call(Players,e),SWAM.trigger("playerImpacted",e)};let Players_kill=Players.kill;Players.kill=function(e){var t=Players.get(e.id);if(null!=t)if(t.id==game.myID&&SWAM.CruiseMode.off(),0!=e.killer||0!=e.posX||0!=e.posY){let n=Players.get(e.killer);controlKillsDeaths(n,t),SWAM.GameLog.logKill(n,t),SWAM.trigger("playerKilled",[e,t,n])}else SWAM.debug&&console.log("playerkilled",e);Players_kill.call(Players,e)};let Players_powerup=Players.powerup;Players.powerup=function(e){Players_powerup.call(Players,e),SWAM.trigger("playerPowerUp",e)};let Players_whisper=Players.whisper;Players.whisper=function(e){Players_whisper.call(Players,e)};let Mobs_add=Mobs.add;Mobs.add=function(e,t,n){Mobs_add.call(Mobs,e,t,n),SWAM.trigger("mobAdded",[e,t,n])};let Mobs_despawn=Mobs.despawn;Mobs.despawn=function(e){Mobs_despawn.call(Mobs,e),SWAM.trigger("mobDespawned",e)};let Mobs_destroy=Mobs.destroy;Mobs.destroy=function(e){Mobs_destroy.call(Mobs,e),SWAM.trigger("mobDestroyed",e)};let Network_sendMethods=[Network.sendChat,Network.sendTeam,Network.sendWhisper,Network.sendSay];Network.sendChat=function(e){e=replaceSpecialWordsInChat(e),splitAndSend(e,Network_sendMethods[0])},Network.sendTeam=function(e){e=replaceSpecialWordsInChat(e),splitAndSend(e,Network_sendMethods[1])},Network.sendWhisper=function(e,t){t=replaceSpecialWordsInChat(t),splitAndSend(t,function(t){Network_sendMethods[2].call(Network,e,t)})},Network.sendSay=function(e){e=replaceSpecialWordsInChat(e),e=replaceTeamEmotes(e),splitAndSend(e,Network_sendMethods[3],30,3e3)};let Network_force=Network.force;Network.force=function(e){let t=Network_force.call(Network,e);if(e.c==Network.SERVERPACKET.EVENT_REPEL){let t=Players.get(e.id),n=e.mobs.map(e=>Mobs.get(e.id));SWAM.trigger("mobsRepeled",[t,n])}return t};let Network_reconnect=Network.reconnect;Network.reconnect=function(){game.reconnected=!0,Network_reconnect.call(Network)};let flags=[null,{code:"SY",name:"Syrian Arab Republic"},{code:"TH",name:"Thailand"},{code:"TM",name:"Turkmenistan"},{code:"TN",name:"Tunisia"},{code:"TR",name:"Turkey"},{code:"TT",name:"Trinidad and Tobago"},{code:"TW",name:"Taiwan"},{code:"TZ",name:"Tanzania, United Republic of"},{code:"UA",name:"Ukraine"},{code:"UN",name:"United Nations"},{code:"US",name:"United States"},{code:"UY",name:"Uruguay"},{code:"UZ",name:"Uzbekistan"},{code:"VE",name:"Venezuela"},{code:"VN",name:"Viet Nam"},{code:"PR",name:"Puerto Rico"},{code:"PT",name:"Portugal"},{code:"PY",name:"Paraguay"},{code:"QA",name:"Qatar"},{code:"rainbow",name:"Rainbow"},{code:"RO",name:"Romania"},{code:"RS",name:"Serbia"},{code:"RU",name:"Russian Federation"},{code:"SA",name:"Saudi Arabia"},{code:"SE",name:"Sweden"},{code:"SG",name:"Singapore"},{code:"SI",name:"Slovenia"},{code:"SK",name:"Slovakia"},{code:"SM",name:"San Marino"},{code:"MK",name:"Macedonia, The Former Yugoslav Republic of"},{code:"MO",name:"Macao"},{code:"MT",name:"Malta"},{code:"MX",name:"Mexico"},{code:"MY",name:"Malaysia"},{code:"NG",name:"Nigeria"},{code:"NL",name:"Netherlands"},{code:"NO",name:"Norway"},{code:"NP",name:"Nepal"},{code:"NZ",name:"New Zealand"},{code:"OM",name:"Oman"},{code:"PA",name:"Panama"},{code:"PE",name:"Peru"},{code:"JP",name:"Japan"},{code:"KP",name:"Democratic People's Republic of Korea"},{code:"KR",name:"Korea, Republic of"},{code:"KW",name:"Kuwait"},{code:"KZ",name:"Kazakhstan"},{code:"LB",name:"Lebanon"},{code:"LI",name:"Liechtenstein"},{code:"LK",name:"Sri Lanka"},{code:"LT",name:"Lithuania"},{code:"LU",name:"Luxembourg"},{code:"LV",name:"Latvia"},{code:"HN",name:"Honduras"},{code:"HR",name:"Croatia"},{code:"HU",name:"Hungary"},{code:"ID",name:"Indonesia"},{code:"IE",name:"Ireland"},{code:"IL",name:"Israel"},{code:"IM",name:"Isle of Man"},{code:"imperial",name:"Imperial Japan"},{code:"IN",name:"India"},{code:"IQ",name:"Iraq"},{code:"DE",name:"Germany"},{code:"DK",name:"Denmark"},{code:"DO",name:"Dominican Republic"},{code:"DZ",name:"Algeria"},{code:"EC",name:"Ecuador"},{code:"EE",name:"Estonia"},{code:"EG",name:"Egypt"},{code:"ES",name:"Spain"},{code:"EU",name:"European Union"},{code:"BH",name:"Bahrain"},{code:"BO",name:"Bolivia"},{code:"BR",name:"Brazil"},{code:"BT",name:"Bhutan"},{code:"BY",name:"Belarus"},{code:"CA",name:"Canada"},{code:"CH",name:"Switzerland"},{code:"AD",name:"Andorra"},{code:"AE",name:"United Arab Emirates"},{code:"AL",name:"Albania"},{code:"AM",name:"Armenia"},{code:"CL",name:"Chile"},{code:"AQ",name:"Antarctica"},{code:"CN",name:"China"},{code:"AR",name:"Argentina"},{code:"FI",name:"Finland"},{code:"CO",name:"Colombia"},{code:"AT",name:"Austria"},{code:"IR",name:"Iran, Islamic Republic Of"},{code:"FR",name:"France"},{code:"communist",name:"Communist"},{code:"AU",name:"Australia"},{code:"LY",name:"Libyan Arab Jamahiriya"},{code:"IS",name:"Iceland"},{code:"GB",name:"United Kingdom"},{code:"confederate",name:"Confederate"},{code:"AZ",name:"Azerbaijan"},{code:"MA",name:"Morocco"},{code:"IT",name:"Italy"},{code:"GE",name:"Georgia"},{code:"CR",name:"Costa Rica"},{code:"BA",name:"Bosnia and Herzegovina"},{code:"PH",name:"Philippines"},{code:"MC",name:"Monaco"},{code:"JM",name:"Jamaica"},{code:"GR",name:"Greece"},{code:"CU",name:"Cuba"},{code:"BD",name:"Bangladesh"},{code:"SO",name:"Somalia"},{code:"PK",name:"Pakistan"},{code:"MD",name:"Moldova, Republic of"},{code:"JO",name:"Jordan"},{code:"GT",name:"Guatemala"},{code:"CY",name:"Cyprus"},{code:"BE",name:"Belgium"},{code:"ZA",name:"South Africa"},{code:"SV",name:"El Salvador"},{code:"PL",name:"Poland"},{code:"ME",name:"Montenegro"},{code:"jolly",name:"Jolly Rogers"},{code:"HK",name:"Hong Kong"},{code:"CZ",name:"Czech Republic"},{code:"BG",name:"Bulgaria"}],flagsByCode={};flags.forEach((e,t)=>{e&&(flagsByCode[e.code.toLowerCase()]=e,e.index=t)});let Textures_get=Textures.get;Textures.get=function(e){if(e.startsWith("emote_flag")){let t=e.substr(10).toLowerCase();flagsByCode[t]&&(e="flag_"+flagsByCode[t].index)}return Textures_get(e)},UI.isEmote=function(e,t){if("x"==e)return!1;let a=SWAM.getEmotesList();if(t){let t=e.toLowerCase(),n=t.match(/^-flag([a-zA-Z]{2}|communist|confederate|imperial|rainbow|jolly)-$/);if(n&&isFlag(t.substring(1,t.length-1)))return t.substring(1,t.length-1)}else if(isFlag(e))return e.toLowerCase();for(var r=0;r<a.length;r++)if(t){if(e===":"+a[r]+":"||e==="-"+a[r]+"-")return a[r];}else if(e===a[r])return a[r];return!1},UI.isTeamEmote=function(e){return["cap","burn","take"].includes(e)};let UI_parseCommand=UI.parseCommand;UI.parseCommand=function(e){if("/"!==e[0])return!1;var t=e.split(" "),a=t[0].substr(1).toLowerCase();if(0==a.length)return!1;let n=e.indexOf(" ");if("name"===a)-1==n?UI.addChatMessage("Usage: /name your_name"):Network.reconnectAs(e.substr(n+1));else if("reconnect"===a){let e=$("#chatlines").html();Network.reconnect(),$("#chatlines").html(e);let t=$("#chatbox");t.perfectScrollbar("update").scrollTop(t[0].scrollHeight)}else if("emotes"===a)emotesPanel.show();else if(UI.isTeamEmote(a)||UI.isEmote(a))Network.sendSay("-"+a+"-");else return UI_parseCommand(e);return!0};let UI_aircraftSelected=UI.aircraftSelected;UI.aircraftSelected=function(t){SWAM.trigger("aircraftSelected",t),UI_aircraftSelected.call(UI,t)};let UI_addPowerup=UI.addPowerup;UI.addPowerup=function(e,t){UI_addPowerup.call(UI,e,t);SWAM.Settings.general.powerupsFX&&(game.graphics.layers.game.filters=1==e?getFilters([new PIXI.filters.AdjustmentFilter({gamma:1,saturation:.8,contrast:1,brightness:1,red:1,green:1,blue:1.1,alpha:1.3})]):getFilters([new PIXI.filters.AdjustmentFilter({gamma:1.2,saturation:1,contrast:1,brightness:1,red:1.35,green:.8,blue:.8,alpha:1.2}),new PIXI.filters.CRTFilter({curvature:0,lineWidth:0,lineContrast:0,verticalLine:!1,noise:0,noiseSize:0,seed:0,vignetting:.3,vignettingAlpha:.7,vignettingBlur:.3,time:0})]),SWAM.prevPowerupTimeout&&clearTimeout(SWAM.prevPowerupTimeout),SWAM.prevPowerupTimeout=setTimeout(function(){game.graphics.layers.game.filters=getFilters([]),delete SWAM.prevPowerupTimeout},t))};let UI_resetPowerups=UI.resetPowerups;UI.resetPowerups=function(){UI_resetPowerups.call(UI),game.graphics.layers.game.filters=getFilters([])};let UI_updateUpgrades=UI.updateUpgrades;UI.updateUpgrades=function(e,t,n=0){UI_updateUpgrades.call(UI,e,t,n);const a=["","speed","defense","energy","missile"][n],r=e[n-1];let i=0;0!=n&&(i=Math.round(100*(config.upgrades[a].factor[r]-1))+"%"),SWAM.trigger("playerUpgraded2",[e,t,n,["","Speed","Defense","Energy Regen","Missile Speed"][n],i])},UI.updateStats=function(a){let e="";if(game.gameType==SWAM.GAME_TYPE.CTF){let t=0,n=0;forEachPlayer(e=>{1==e.team?t++:n++}),e="<span class='greyed'>&nbsp;&nbsp;(<span style='color: #4076E2'>"+t+"</span>&nbsp;/&nbsp;<span style='color: #EA4242'>"+n+"</span>)<span class='greyed'>"}if(game.fakeExtraLatency==INITIAL_EXTRALATENCY){let e=Math.max(a.ping,130),t=Math.max(a.ping,300),n=Tools.randInt(e,t);game.fakeExtraLatency=n-a.ping}SWAM.spoofLatency&&(a.ping-=game.fakeExtraLatency);var r=a.playerstotal,t="";t+="<div class=\"item\"><span class=\"icon-container\"><div class=\"icon players\"></div></span><span class=\"greyed\">"+a.playersgame+"&nbsp;/&nbsp;</span>"+r+e+"<span class=\"icon-container padded\"><div class=\"icon ping\"></div></span>"+a.ping+"<span class=\"millis\">ms</span></div>",$("#gameinfo").html(t),game.ping=a.ping};let UI_serverMessage=UI.serverMessage;UI.serverMessage=function(t){UI_serverMessage.call(UI,t);try{SWAM.trigger("serverMessageReceived",[t])}catch(t){}if(game.gameType!==SWAM.GAME_TYPE.CTF)return;const e="<span class=\"info inline\"><span class=\"redflag\"></span></span>";let n=t.text.includes("<span class=\"info inline\"><span class=\"blueflag\"></span></span>"),a=t.text.includes(e);if(2==t.type&&(n||a)){let r,i;n&&(r=t.text.substring("<span class=\"info inline\"><span class=\"blueflag\"></span></span>".length)),a&&(r=t.text.substring(e.length)),i=r.substring(0,r.indexOf(" ")).toLowerCase();let o=r.substring(t.text.indexOf(" by ")+4),s=0,d=Players.getMe().team,l=n?1:2;switch(i){case"taken":s=d==l?SWAM.Audio.Flag.OursTaken:SWAM.Audio.Flag.EnemyTaken;break;case"captured":SWAM.GameLog.logFlag(t.text);s=d==l?SWAM.Audio.Flag.OursCaptured:SWAM.Audio.Flag.EnemyCaptured;break;case"returned":SWAM.GameLog.logFlag(t.text),s=d==l?SWAM.Audio.Flag.OursRecovered:SWAM.Audio.Flag.EnemyRecovered;}SWAM.Settings&&SWAM.Settings.audio&&SWAM.Settings.audio.voiceEventsCTF&&SWAM.Audio.playFlagEvent(s,d),SWAM.trigger("CTF_FlagEvent",[s,l,i,o])}};let UI_selectUpgrade=UI.selectUpgrade;UI.selectUpgrade=function(e){SWAM.radio.visible()||(UI_selectUpgrade.call(UI,e),SWAM.trigger("playerUpgraded",e))};let UI_addChatLine=UI.addChatLine;UI.addChatLine=function(e,t,n){let a=["-SWAM-PONG"];if(e.lastMessageTime=new Date().getTime(),2==n&&e.spamBlock&&"STATSBOT"!=e.name)return void console.log("SPAM BLOCKED: ",t);let r=-1<$.inArray(t.toUpperCase(),["-SWAM-PING"]);for(var i of a)r=r||t.startsWith(i);if(!r){2==n&&e.id!=game.myID&&Sound.DoubleClick();let a=t.match(getURLRegEx());if(null!=a){let e=t.split(getURLRegEx());t="";for(let n=0;n<e.length;n++)t+=replaceChatEmotes(UI.escapeHTML(e[n])),n<a.length&&(t+="<a href='"+a[n]+"' target='_blank' style='text-decoration: underline;'>"+a[n]+"</a>")}else t=replaceChatEmotes(UI.escapeHTML(t));UI_addChatLine.call(UI,e,t,n,!1);let r=UI.getIgnored();if(!r[e.id]){let a=$("#chatlines div").last().find("span.flag");if(0<a.length&&"STATSBOT"==e.name&&10==e.flag){let e=a.attr("class").split(/\s+/);a.removeClass(e[1]).removeClass(e[2]).addClass("emote emote-bot flag-statsbot")}SWAM.trigger("chatLineAdded",[e,t,n])}}else{let a=t;if(t=t.toUpperCase(),"-SWAM-PING"==t){if(e.id!=game.myID&&!window.anonmod){let t="starma.sh"===location.hostname.toLowerCase()?"SM":"AM",n=SWAM.getThemeFunction().themeName;Network.sendWhisper(e.id,`-SWAM-PONG ${t} ${n}`)}return void UI_addChatLine.call(UI,e,t,n)}if(2==n&&e.id!=game.myID&&t.startsWith("-SWAM-PONG")){let t=a.substr(11,2).trim(),r=a.substring(14).trim();UI_addChatLine.call(UI,e,`I'm using STARMASH, ${t}, theme: ${r}`,n)}}};let UI_updateScore=UI.updateScore;UI.updateScore=function(e){UI_updateScore.call(UI,e),ExtendedScoreboard.update(e.scores),updatePlayerCounters(e.scores),SWAM.trigger("detailedScoreUpdate",e)};let UI_scoreboardUpdate=UI.scoreboardUpdate;UI.scoreboardUpdate=function(e,t,n){UI_scoreboardUpdate.call(UI,e,t,n),updateMinimapOpacity(),SWAM.trigger("scoreboardUpdate",[e,t,n])};let Games_performPing=Games.performPing;Games.performPing=function(){"airma.sh"!=window.location.host.toLowerCase()||SWAM.debug||Games_performPing.call(Games)};let games_prep=Games.prep;Games.prep=function(){game.fakeExtraLatency=INITIAL_EXTRALATENCY,SWAM.debug&&console.log("game prepped "+new Date),SWAM.GameLog.logConnected(),games_prep.apply(Games),(game.gameType==SWAM.GAME_TYPE.FFA||game.gameType==SWAM.GAME_TYPE.BTR)&&$("#graphicsSet").show(),$("body").append("<div id='AutoPilotAlert' style='position: absolute; top: 100px; left: calc(50% - 100px); width: 200px; color: white; font-size: 40px; background-color: rgb(7, 185, 7); opacity: 0.6; text-align: center; border-radius: 20px; padding: 10px; display:none;'>AutoPilot</div>"),$("#score-kills").html("0<br>0"),$("#score-deaths").html("0"),game.reconnected?delete game.reconnected:(UI.addChatMessage("Mod:  Press H to check StarMash shortcuts.".bold()),UI.addChatMessage("Right-Click a chat message to copy to clipboard.".bold()),game.gameType==SWAM.GAME_TYPE.CTF&&UI.addChatMessage("Y when carrying the flag, to drop it.".bold())),getMatchTimer(),SWAM.updatePlayerCounters(),SWAM.PlayerInfoTimer=setInterval(SWAM.updatePlayersNamePlate,500),SWAM.hyperSpace&&SWAM.hyperSpace.show(),$(window).keydown(SWAM_keydown_handler),$(window).keyup(SWAM_keyup_handler),$("canvas").click(SWAM_canvas_click_handler),$("canvas").mousedown(SWAM_canvas_mousedown_handler),SWAM.trigger("gamePrep")};let games_wipe=Games.wipe;Games.wipe=function(){games_wipe.apply(Games),clearInterval(SWAM.PlayerInfoTimer),freeSpectatorMode(!1),$("#graphicsSet").hide(),$("#AutoPilotAlert").remove(),$("#btnFreeSpectator").hide(),$(window).off("keydown",SWAM_keydown_handler),$(window).off("keyup",SWAM_keyup_handler),$("canvas").off("click",SWAM_canvas_click_handler),$("canvas").off("mousedown",SWAM_canvas_mousedown_handler),SWAM.trigger("gameWipe")};let games_networkFlag=Games.networkFlag;Games.networkFlag=function(e){games_networkFlag.call(Games,e),SWAM.trigger("CTF_Flag",e)};let games_showBTRWin=Games.showBTRWin;Games.showBTRWin=function(t){games_showBTRWin.call(Games,t),SWAM.trigger("BTR_MatchEnded",t)};let games_showCTFWin=Games.showCTFWin;Games.showCTFWin=function(n,e){n.t=e||5,games_showCTFWin.call(Games,n),$("#custom-msg").last().addClass("customCTFWin").css({"background-image":`url("${getFilePath(game.myTeam==n.w?"ctfvictory.png":"ctfdefeat.png")}")`,"font-family":"'Alfa Slab One', cursive"}),SWAM.trigger("CTF_MatchEnded",n),setTimeout(function(){SWAM.GameLog.logNewMatch(),SWAM.RandomizeBackground&&SWAM.RandomizeBackground(),SWAM.trigger("CTF_MatchStarted")},6e4)};let graphics_resizeRenderer=Graphics.resizeRenderer;Graphics.resizeRenderer=function(e,t){SWAM.Settings.ui.useSquaredScene?(e=e>1.15*t?1.15*t:e,graphics_resizeRenderer.call(Graphics,e,t),$("canvas").css({"margin-left":.5*(window.innerWidth-$("canvas").width())+"px"})):(graphics_resizeRenderer.call(Graphics,e,t),$("canvas").css("margin-left","")),SWAM.resizeLayers(e,t),SWAM.trigger("rendererResized",[e,t])},Network.reconnectAs=function(e){game.myOriginalName=e,Network.reconnect()},Sound.DoubleClick=function(){Sound.UIClick(),setTimeout(()=>{Sound.UIClick()},225)},SWAM.updateLayers=function(){},SWAM.resizeLayers=function(){};let musicManager=new function(){function e(){0==$("#logon").length||0<$("#bgMusicIFrame").length||SWAM.Settings.audio.bgMusicMainMenu&&(console.log("Playing music..."),$("body").append("<iframe id=\"bgMusicIFrame\" width=\"1\" height=\"1\" wmode=\"transparent\" src=\"//www.youtube.com/embed/NoXZZhgUo_0?vq=small&autoplay=1&loop=1&playlist=NoXZZhgUo_0\" frameborder=\"0\" allowfullscreen>"))}function t(){$("#bgMusicIFrame").remove()}SWAM.on("settingsApplied",n=>{n.audio.bgMusicMainMenu?e():t()}),SWAM.on("gamePrep",t)};SWAM.addDebugElements=function(){if(!SWAM.debug)return;$("#logon").append("<div><input class='dgCamUpdates' type='button' value='updates' style='width: 50px; margin-right: 10px;'></div><table><tr><td colspan='3' align='center'><input class='dgCamY' type='button' value='-8192' style='width: 50px; margin-right: 10px;'></td></tr><tr><td><input class='dgCamX' type='button' value='-16384' style='width: 50px; margin-right: 10px;'></td><td><input class='dgCamX' type='button' value='0' style='width: 50px; margin-right: 10px;'><input class='dgCamY' type='button' value='0'    style='width: 50px; margin-right: 10px;'></td><td><input class='dgCamX' type='button' value='16384' style='width: 50px; margin-right: 10px;'></td></tr><tr><td colspan='3' align='center'><input class='dgCamY' type='button' value='8192' style='width: 50px; margin-right: 10px;'></td></tr></table>"),$("#logon input.dgCamX").click(function(t){let e=$(t.target).val();Graphics.setCamera(parseFloat(e),Graphics.getCamera().y)}),$("#logon input.dgCamY").click(function(t){let e=$(t.target).val();Graphics.setCamera(Graphics.getCamera().x,parseFloat(e))}),$("#logon input.dgCamUpdates").click(function(){SWAM.doUpdates=!SWAM.doUpdates});let t=$("#logon")[0];$(window).keydown(function(n){game.state===Network.STATE.PLAYING||"none"==t.style.display||SWAM.moveCamera(n)})},SWAM.updatePlayerCounters=function(){Network.getScores()},SWAM.OnPlayerUpdate=function(){},SWAM.getLeaders=function(){let e={};if(game.gameType==SWAM.GAME_TYPE.CTF){let t=null,n=null;forEachPlayer(e=>{1==e.team?(null==t||e.scorePlace<t.scorePlace)&&(t=e):(null==n||e.scorePlace<n.scorePlace)&&(n=e)}),null!=t&&(e[t.id]=t),null!=n&&(e[n.id]=n)}else{forEachPlayer(t=>{1==t.scorePlace&&(e[t.id]=t)})}return e},SWAM.toggleLeaderboard=function(){game.state!==Network.STATE.PLAYING||($("#scoreboard").toggle(400),$("#roomnamecontainer").toggle(400))},SWAM.toggleUI=function(){if(game.state===Network.STATE.PLAYING){let e="none"==$("#sidebar").css("display");e?($("#scoreboard").show(400),$("#roomnamecontainer").show(400)):($("#scoreboard").hide(400),$("#roomnamecontainer").hide(400)),$("#sidebar").toggle(400),$("#logosmall").toggle(400),$("#menu").toggle(400),$("#gameinfo").toggle(400),$("#scorebig").toggle(400)}},SWAM.showDegubInfo=function(){config.debug.show=!0,window.DEVELOPMENT=!0,Tools.setupDebug()},SWAM.moveMinimap=function(){setTimeout(function(){$("#scorebig").css("right",config.minimapSize+"px"),config.minimapPaddingY=game.screenY-50-config.minimapSize/2,UI.resizeMinimap()},8e3)};class CruiseMode{constructor(){this.cruiseONDataURL="url('data:image/svg+xml;base64,PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzNTkuMjEgMzU5LjIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KPG1ldGFkYXRhPgo8cmRmOlJERj4KPGNjOldvcmsgcmRmOmFib3V0PSIiPgo8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KPGRjOnR5cGUgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIvPgo8ZGM6dGl0bGUvPgo8L2NjOldvcms+CjwvcmRmOlJERj4KPC9tZXRhZGF0YT4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIxMC4wMSAtMzQzLjEzKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuMTE2IC0yLjg1ODgpIiBmaWxsPSIjYzlmZjAwIj4KPHBhdGggZD0ibTM3Ny41IDQzNy4zOGMtNzMuMTc4IDAtMTMyLjUgNTkuMzIyLTEzMi41IDEzMi41IDAgNDAuODM3IDE4LjQ4NCA3Ny4zNTEgNDcuNTMxIDEwMS42NiA4Ljg3NjUtOC44OTQ0IDE3Ljc1MS0xNy43OTEgMjYuNjI1LTI2LjY4OCAxLjk1MjYtMS45NTI2IDAuMzczOTktNi43MTk4LTMuNTMxMi0xMC42MjUtMy45MDUyLTMuOTA1Mi04LjY0MTEtNS40ODM5LTEwLjU5NC0zLjUzMTJsLTEyLjY4OCAxMi42ODhjLTE0LjQ2Ny0xNi43NDgtMjQuMDg4LTM3LjgxNy0yNi42NTYtNjFoMTkuMzEyYzIuNzYxNCAwIDUtNC40NzcyIDUtMTBzLTIuMjM4Ni0xMC01LTEwaC0xOS43NWMxLjU3NTItMjMuOTE0IDEwLjYwNi00NS43OTMgMjQuODEyLTYzLjMxMmwxNC45NjkgMTQuOTY5YzEuOTUyNiAxLjk1MjYgNi42ODg1IDAuMzczOTkgMTAuNTk0LTMuNTMxMiAzLjkwNTItMy45MDUyIDUuNDgzOS04LjY3MjQgMy41MzEyLTEwLjYyNWwtMTUuMTU2LTE1LjE1NmMxNy4zNDgtMTQuOTg1IDM5LjMzMS0yNC43NzMgNjMuNS0yNi45MDZ2MjIuMDYyYzAgMi43NjE0IDQuNDc3MiA1IDEwIDVzMTAtMi4yMzg2IDEwLTV2LTIyLjA2MmMyNC4xOCAyLjEzMDQgNDYuMTQ3IDExLjkxMSA2My41IDI2LjkwNmwtMTUuMTU2IDE1LjE1NmMtMS45NTI2IDEuOTUyNi0wLjM3Mzk5IDYuNzE5OCAzLjUzMTIgMTAuNjI1IDMuOTA1MiAzLjkwNTIgOC42NDExIDUuNDgzOSAxMC41OTQgMy41MzEybDE0Ljk2OS0xNC45NjljMTQuMjAzIDE3LjUyMSAyMy4yNDIgMzkuMzk2IDI0LjgxMiA2My4zMTJoLTE5Ljc1Yy0yLjc2MTQgMC01IDQuNDc3Mi01IDEwczIuMjM4NiAxMCA1IDEwaDE5LjI4MWMtMi41NjMxIDIzLjE4Ni0xMi4xNjUgNDQuMjUtMjYuNjI1IDYxbC0xMi42ODgtMTIuNjg4Yy0xLjk1MjYtMS45NTI2LTYuNjg4NS0wLjM3Mzk5LTEwLjU5NCAzLjUzMTItMy45MDUyIDMuOTA1Mi01LjQ4MzkgOC42NzI0LTMuNTMxMiAxMC42MjUgOC44NzI5IDguOTA4NCAxNy43NjYgMTcuNzk3IDI2LjY1NiAyNi42ODggMjkuMDM3LTI0LjMwNiA0Ny41LTYwLjgyOCA0Ny41LTEwMS42NiAwLTczLjE3OC01OS4zMjItMTMyLjUtMTMyLjUtMTMyLjV6Ii8+CjxwYXRoIHRyYW5zZm9ybT0ibWF0cml4KDEuMTY2NyAwIDAgMS4xNjY3IC02MCAtOTUuMzk0KSIgZD0ibTM5MCA1NzIuMzZjMCA4LjI4NDMtNi43MTU3IDE1LTE1IDE1cy0xNS02LjcxNTctMTUtMTUgNi43MTU3LTE1IDE1LTE1IDE1IDYuNzE1NyAxNSAxNXoiLz4KPHBhdGggZD0ibTM0NS43MyA0OTMuNTNjLTQuNjA2OCAyLjA2NjQtNy40ODQ5IDUuNDk4MS02LjU0NjUgNy45MTA4bDIzLjc4NyA2MS4xNjJjLTMuMDc1MiA0LjU4OTYtMy45MzM5IDEwLjU3Ni0xLjc3OTUgMTYuMTE2IDMuNTAzMiA5LjAwNzcgMTMuNjQ1IDEzLjQ3IDIyLjY1MyA5Ljk2NjhzMTMuNDctMTMuNjQ1IDkuOTY2OC0yMi42NTNjLTIuMTU0NC01LjUzOTUtNi44MzI0LTkuMzczLTEyLjItMTAuNjc5bC0yMy43ODctNjEuMTYyYy0xLjAwMDktMi41NzM2LTUuOTg1LTMuMDM3Mi0xMS4xMzItMS4wMzUzLTAuMzIxNyAwLjEyNTExLTAuNjU0MDEgMC4yMzYtMC45NjExMiAwLjM3Mzc5eiIvPgo8cGF0aCBkPSJtMzAzLjUyIDM4Ni44MiAxOC42NzYtNy4xNTU2IDguOTQ0NSAyMy4zNDUgMTQuMDA3LTUuMzY2Ny0yMC4xNjEgNDUuMjA2LTQ1LjIwNi0yMC4xNjEgMTQuMDA3LTUuMzY2Ny04Ljk0NDUtMjMuMzQ1eiIvPgo8L2c+CjwvZz4KPC9zdmc+Cg==')",this.cruiseOFFDataURL="url('data:image/svg+xml;base64,"+Base64.encode(Base64.decode("PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzNTkuMjEgMzU5LjIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KPG1ldGFkYXRhPgo8cmRmOlJERj4KPGNjOldvcmsgcmRmOmFib3V0PSIiPgo8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KPGRjOnR5cGUgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIvPgo8ZGM6dGl0bGUvPgo8L2NjOldvcms+CjwvcmRmOlJERj4KPC9tZXRhZGF0YT4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIxMC4wMSAtMzQzLjEzKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuMTE2IC0yLjg1ODgpIiBmaWxsPSIjYzlmZjAwIj4KPHBhdGggZD0ibTM3Ny41IDQzNy4zOGMtNzMuMTc4IDAtMTMyLjUgNTkuMzIyLTEzMi41IDEzMi41IDAgNDAuODM3IDE4LjQ4NCA3Ny4zNTEgNDcuNTMxIDEwMS42NiA4Ljg3NjUtOC44OTQ0IDE3Ljc1MS0xNy43OTEgMjYuNjI1LTI2LjY4OCAxLjk1MjYtMS45NTI2IDAuMzczOTktNi43MTk4LTMuNTMxMi0xMC42MjUtMy45MDUyLTMuOTA1Mi04LjY0MTEtNS40ODM5LTEwLjU5NC0zLjUzMTJsLTEyLjY4OCAxMi42ODhjLTE0LjQ2Ny0xNi43NDgtMjQuMDg4LTM3LjgxNy0yNi42NTYtNjFoMTkuMzEyYzIuNzYxNCAwIDUtNC40NzcyIDUtMTBzLTIuMjM4Ni0xMC01LTEwaC0xOS43NWMxLjU3NTItMjMuOTE0IDEwLjYwNi00NS43OTMgMjQuODEyLTYzLjMxMmwxNC45NjkgMTQuOTY5YzEuOTUyNiAxLjk1MjYgNi42ODg1IDAuMzczOTkgMTAuNTk0LTMuNTMxMiAzLjkwNTItMy45MDUyIDUuNDgzOS04LjY3MjQgMy41MzEyLTEwLjYyNWwtMTUuMTU2LTE1LjE1NmMxNy4zNDgtMTQuOTg1IDM5LjMzMS0yNC43NzMgNjMuNS0yNi45MDZ2MjIuMDYyYzAgMi43NjE0IDQuNDc3MiA1IDEwIDVzMTAtMi4yMzg2IDEwLTV2LTIyLjA2MmMyNC4xOCAyLjEzMDQgNDYuMTQ3IDExLjkxMSA2My41IDI2LjkwNmwtMTUuMTU2IDE1LjE1NmMtMS45NTI2IDEuOTUyNi0wLjM3Mzk5IDYuNzE5OCAzLjUzMTIgMTAuNjI1IDMuOTA1MiAzLjkwNTIgOC42NDExIDUuNDgzOSAxMC41OTQgMy41MzEybDE0Ljk2OS0xNC45NjljMTQuMjAzIDE3LjUyMSAyMy4yNDIgMzkuMzk2IDI0LjgxMiA2My4zMTJoLTE5Ljc1Yy0yLjc2MTQgMC01IDQuNDc3Mi01IDEwczIuMjM4NiAxMCA1IDEwaDE5LjI4MWMtMi41NjMxIDIzLjE4Ni0xMi4xNjUgNDQuMjUtMjYuNjI1IDYxbC0xMi42ODgtMTIuNjg4Yy0xLjk1MjYtMS45NTI2LTYuNjg4NS0wLjM3Mzk5LTEwLjU5NCAzLjUzMTItMy45MDUyIDMuOTA1Mi01LjQ4MzkgOC42NzI0LTMuNTMxMiAxMC42MjUgOC44NzI5IDguOTA4NCAxNy43NjYgMTcuNzk3IDI2LjY1NiAyNi42ODggMjkuMDM3LTI0LjMwNiA0Ny41LTYwLjgyOCA0Ny41LTEwMS42NiAwLTczLjE3OC01OS4zMjItMTMyLjUtMTMyLjUtMTMyLjV6Ii8+CjxwYXRoIHRyYW5zZm9ybT0ibWF0cml4KDEuMTY2NyAwIDAgMS4xNjY3IC02MCAtOTUuMzk0KSIgZD0ibTM5MCA1NzIuMzZjMCA4LjI4NDMtNi43MTU3IDE1LTE1IDE1cy0xNS02LjcxNTctMTUtMTUgNi43MTU3LTE1IDE1LTE1IDE1IDYuNzE1NyAxNSAxNXoiLz4KPHBhdGggZD0ibTM0NS43MyA0OTMuNTNjLTQuNjA2OCAyLjA2NjQtNy40ODQ5IDUuNDk4MS02LjU0NjUgNy45MTA4bDIzLjc4NyA2MS4xNjJjLTMuMDc1MiA0LjU4OTYtMy45MzM5IDEwLjU3Ni0xLjc3OTUgMTYuMTE2IDMuNTAzMiA5LjAwNzcgMTMuNjQ1IDEzLjQ3IDIyLjY1MyA5Ljk2NjhzMTMuNDctMTMuNjQ1IDkuOTY2OC0yMi42NTNjLTIuMTU0NC01LjUzOTUtNi44MzI0LTkuMzczLTEyLjItMTAuNjc5bC0yMy43ODctNjEuMTYyYy0xLjAwMDktMi41NzM2LTUuOTg1LTMuMDM3Mi0xMS4xMzItMS4wMzUzLTAuMzIxNyAwLjEyNTExLTAuNjU0MDEgMC4yMzYtMC45NjExMiAwLjM3Mzc5eiIvPgo8cGF0aCBkPSJtMzAzLjUyIDM4Ni44MiAxOC42NzYtNy4xNTU2IDguOTQ0NSAyMy4zNDUgMTQuMDA3LTUuMzY2Ny0yMC4xNjEgNDUuMjA2LTQ1LjIwNi0yMC4xNjEgMTQuMDA3LTUuMzY2Ny04Ljk0NDUtMjMuMzQ1eiIvPgo8L2c+CjwvZz4KPC9zdmc+Cg==").replace(/\#c9ff00/g,"#555555"))+"')",this.append()}append(){let e=$("<div id='CruiseControl' state='OFF' style='display: none; background-color: rgba(0,0,0,.3); width: 44px; height: 44px; background-repeat: no-repeat; background-size: 35px 35px; background-position: center; border-radius: 7px;'></div>").css("background-image",this.cruiseOFFDataURL).show().click(function(){SWAM.CruiseMode.toggle()}.bind(this));$("#sidebar").append(e),$("#CruiseControl").mouseenter(function(t){let e="<div class='header'>Cruise Control</div>";e+="<div class='item'><div class='desc'>Makes the ship advance automatically at full speed.  Toggle with '5' or 'END' keys.</div></div>",e+="<div class=\"arrow\"></div>",$("#tooltip").html(e),UI.show("#tooltip");let n=t.currentTarget.getBoundingClientRect();$("#tooltip").css({left:Math.round(n.left+60)+"px",top:Math.round(n.top-10)+"px"})}).mouseleave(function(){UI.hide("#tooltip"),$("#tooltip").html("")})}on(){$("#CruiseControl").css({borderColor:"#c9ff00","background-size":"44px 44px",backgroundImage:this.cruiseONDataURL}).attr("state","ON"),Network.sendKey("UP",!0)}off(e){"undefined"==typeof e&&(e=!0),$("#CruiseControl").css({borderColor:"#555555","background-size":"35px 35px",backgroundImage:this.cruiseOFFDataURL}).attr("state","OFF"),e&&Network.sendKey("UP",!1)}toggle(){"ON"===$("#CruiseControl").attr("state")?SWAM.CruiseMode.off():SWAM.CruiseMode.on()}isOn(){return"ON"===$("#CruiseControl").attr("state")}}SWAM.CruiseMode=new CruiseMode,SWAM.radio={append:function(){$("body").append(getTemplateContent("#Radio_Panel")),this.loadOptions(),$("#btnRadioConfig").click(function(){SWAM.radio.showConfig(SWAM.radio.currentChannel)})},currentChannel:0,channelMethods:[Network.sendChat,Network.sendTeam,Network.sendSay],visible:function(){return"none"!==$("#radioPanel").css("display")},send:function(e){this.channelMethods[this.currentChannel](e)},sendTo:function(e,t){this.channelMethods[e](t)},channelNames:["* Radio to All *","* Radio to TEAM *","* CLOSE RANGE signal *"],channelKeys:["Z","X","C"],options:[[],[],[]],defaultOptions:[["gg","Hi!","Yes","No","Thanks!","You are welcome!","I'll be right back.","Got to go, cya!","-SWAM-PING","Try StarMash, a mod for Airmash!|How to use:  tiny.cc/starmash or play as guest in:  starma.sh"],["Affirmative","Negative","** I'VE GOT THE FLAG! COVER ME! **","** THE ENEMY HAS OUR FLAG! **","** All wings, protect our flag carrier! **","Defending the base! Need assistance!","Attacking their base!  Need assistance!","On my way!","Cancel that..","Prowler in our base!"],["Hey there!","Stop!","Go Go Go!","Imperial scum!","Rebel scum!","Prowler here!","YEE-HAW!!!",":lol:",":cry:",":clap:"]],loadOptions:function(){var t=localStorage.getItem("radioMessages");if(null!=t)try{SWAM.radio.options=JSON.parse(t)}catch(n){var t=null;localStorage.removeItem("radioMessages")}if(null==t){var t=jQuery.extend(!0,{},SWAM.radio.defaultOptions);SWAM.radio.options=t}},showConfig:function(e){this.hide();var t=getTemplateContent("#Radio_Customization_Title");t=t.replace(/\$channel/g,SWAM.radio.channelNames[e]);let n=createModal({title:t,content:getTemplateContent("#Radio_Customization_Content"),width:"550px",maxHeight:"450px",height:"450px"});for(var a=getTemplateContent("#Radio_Customization_Message"),r=0;10>r;r++){t=a.replace(/\$index/g,9>r?r+1:"0");var o=$(t);$("input",o).val(SWAM.radio.options[e][r]),$(".optionList",n).append(o)}$("body").append(n),n.focus(),$("#radioCustomizeSave",n).click(function(){for(var t=$("input",n),a=0;a<t.length;a++)SWAM.radio.options[e][a]=t[a].value;localStorage.setItem("radioMessages",JSON.stringify(SWAM.radio.options)),n.remove()}),$("#radioCustomizeCancel",n).click(function(){n.remove()}),$("#radioRestoreThis",n).click(function(){confirmDialog({title:"Are you sure? This will delete all customized messages for this panel and restore them to default.",message:SWAM.radio.channelNames[e]+"   -  Confirmation needed",yes:function(){var t=jQuery.extend(!0,[],SWAM.radio.defaultOptions[e]);SWAM.radio.options[e]=t,localStorage.setItem("radioMessages",JSON.stringify(SWAM.radio.options)),SWAM.radio.loadOptions(),n.remove()}})}),$("#radioRestoreAll",n).click(function(){confirmDialog({title:"Are you sure? This will delete all customized messages and restore them to default.",message:"Confirmation needed",yes:function(){localStorage.removeItem("radioMessages"),SWAM.radio.loadOptions(),n.remove()}})}),$(n).keydown(function(t){t.stopImmediatePropagation()}).keyup(function(t){t.stopImmediatePropagation()})},show:function(e){SWAM.radio.currentChannel=e;for(var t=SWAM.radio.options,n="Close Menu - Press "+SWAM.radio.channelKeys[e]+"<div>-----</div>",a=0;a<t[e].length;a++)n+="<div><span style='margin-right: 15px;'>"+(a+1)%10+".</span>"+t[e][a]+"</div>";$("#radioChannel").html(SWAM.radio.channelNames[e]),$("#radioOptions").html(n),$("#radioPanel").show()},hide:function(){$("#radioPanel").hide()},handle_keys:function(t){var e=$.inArray(t.which,[90,88,67]);if(-1<e&&(SWAM.radio.visible()&&e==SWAM.radio.currentChannel?SWAM.radio.hide():SWAM.radio.show(e)),27==t.which&&SWAM.radio.visible()&&SWAM.radio.hide(),48<=t.which&&57>=t.which&&SWAM.radio.visible()){SWAM.radio.hide();let r="";e=t.which-49,-1==e&&(e=9);let i=SWAM.radio.options,o=SWAM.radio.currentChannel;if(0<=e&&e<i[o].length){r=i[o][e];var n=r.split(/\s*\|\s*/);e=0;var a=function(){0<n[e].length&&SWAM.radio.sendTo(o,n[e]),e++,e<n.length&&setTimeout(a,1500)};a()}else SWAM.radio.hide();t.stopImmediatePropagation(),t.stopPropagation(),t.preventDefault()}}},SWAM.radio.append();let ProwlerRadar=new function(){function e(e){if(!i)return;let t=r[e.id];t||(t=new PIXI.Graphics,t.clear(),t.beginFill(16711680,.125),t.drawCircle(0,0,o),t.endFill(),r[e.id]=t,game.graphics.layers.groundobjects.addChild(t)),t.position.set(e.lowResPos.x,e.lowResPos.y),t.renderable=!(e.removedFromMap||1!=game.myType&&4!=game.myType||5!=e.type||e.team==Players.getMe().team||e.hidden||e.render&&!e.stealthed)}function t(){var t=Players.getIDs(),n=Players.getMe();if(d.hide(),!!i)for(var a in t){var r=Players.get(a);if((1==game.myType||4==game.myType)&&5==r.type&&r.team!=n.team){var s=Tools.distance(r.lowResPos.x,r.lowResPos.y,n.pos.x,n.pos.y);s<o&&d.show()}e(r,n)}}function n(){for(let e in r)a(e)}function a(e){let t=r[e];t&&(game.graphics.layers.groundobjects.removeChild(t),t.destroy(),delete r[e])}let r={},i=!0,o=600,s=0,d=$("<div id='prowlerAlert' style='position: absolute; top: 100px; left: calc(50% - 50px); width: 100px; height: 30px; background-color: red; opacity:0.6;display:none;'></div>");this.updateSettings=function(){"undefined"!=typeof SWAM.Settings.general.useProwlerRadar&&(i=SWAM.Settings.general.useProwlerRadar,!i&&(d.hide(),n()))},SWAM.on("settingsApplied",this.updateSettings.bind(this)),SWAM.on("playerChangedType",t=>{e(Players.get(t.id))}),SWAM.on("playerKilled",(t,n)=>{e(n)}),SWAM.on("playerStealth",t=>{let n=Players.get(t.id);e(n)}),SWAM.on("playerDestroyed",e=>{a(e.id)}),SWAM.on("gamePrep",()=>{$("body").append(d),s=setInterval(t,500)}),SWAM.on("gameWipe",()=>{n(),d.remove(),s=clearInterval(s)})},SpectatorOnStart=new function(){function e(){clearTimeout(a),SWAM.off("keydown",e)}function t(){r&&(SWAM.on("keydown",e),a=setTimeout(()=>{Network.spectateForce(),SWAM.off("keydown",e),r=!1,a=0},5e3))}function n(){clearTimeout(a)}let a=0,r=!1;SWAM.on("serverMessageReceived",function(e){game.gameType!=SWAM.GAME_TYPE.CTF||1==e.type&&e.text=="Game starting in a second"&&(r=null!=game.spectatingID,a=0)}),SWAM.on("CTF_MatchStarted",t),SWAM.on("gameWipe",n)};SWAM.chatinputVisible=function(){return"none"!==$("#chatinput").css("display")},SWAM.getClosestPlayer=function(e,t){let n=screenToMap(e,t);e=n.x,t=n.y;let a=1e5,r=Players.getIDs(),i=null;for(let n in r){let r=Players.get(n),o=Tools.distance(e,t,r.pos.x,r.pos.y);o<a&&(i=r,a=o)}return SWAM.debug&&console.log(i.name),i},!function(){const e={BLUE:1,RED:2},t={position:{x:0,y:0},BASE_COORDINATES:{x:-9670,y:-1470},isCarried:!1,player:null},n={position:{x:0,y:0},BASE_COORDINATES:{x:8600,y:-940},isCarried:!1,player:null};let a=e=>e.render?e.pos:e.lowResPos;SWAM.on("CTF_Flag",e=>{let r=1==e.flag?t:n;if(1==e.type)r.isCarried=!1,r.player=null,r.position.x=e.posX,r.position.y=e.posY;else{r.isCarried=!0,r.player=Players.get(e.id);let t=a(r.player);r.position.x=t.x,r.position.y=t.y}});class r{constructor(a){this.flag=a==e.BLUE?t:n}getPosition(){return this.flag.isCarried?a(this.flag.player):this.flag.position}isActive(){return game.gameType==SWAM.GAME_TYPE.CTF}isVisible(){return(this.flag.BASE_COORDINATES.x!=this.flag.position.x||this.flag.BASE_COORDINATES.y!=this.flag.position.y)&&(null==this.flag.player||this.flag.player.id!=game.myID)}}class i{constructor(e,t=16777215){this.setTracker(e),this.color=t,this.arrow=new Textures.sprite("prowler"),this.arrow.texture=PIXI.Texture.fromImage(getFilePath("arrow_indicator.png")),this.arrow.tint=this.color,this.arrow.alpha=.7,this.arrow.position.set(0,0),this.arrow.scale.set(.2,.2),this.arrow.anchor.set(.5,.5),this.arrow.pivot.set(.5,.5),this.frameCounter=0,this.framesToSkip=3,this.ticker=new PIXI.ticker.Ticker,this.ticker.stop(),this.ticker.add(this.update.bind(this)),SWAM.on("gamePrep",function(){this.tracker.isActive()&&this.addToScene()}.bind(this)),SWAM.on("gameWipe",function(){this.tracker.isActive()&&this.removeFromScene()}.bind(this))}setTracker(e){this.tracker="function"==typeof e?{getPosition:e}:e}addToScene(){game.graphics.layers.game.addChild(this.arrow),this.ticker.start()}removeFromScene(){this.ticker.stop(),game.graphics.layers.game.removeChild(this.arrow)}update(){if(!this.tracker.isVisible())return void(this.arrow.visible=!1);let e=this.tracker.getPosition(),t=MapToScreen(e.x,e.y);if(0<t.x&&t.x<game.screenX&&0<t.y&&t.y<game.screenY)return void(this.arrow.visible=!1);this.arrow.visible=!0,t.x-=game.halfScreenX,t.y-=game.halfScreenY;let n=Math.atan2(t.x,-t.y),a=t.y/t.x,r=null,i=30,o=100+i,s={halfwidth:(game.screenX-o)/2,halfheight:(game.screenY-o)/2};r=0>t.y?{x:-s.halfwidth/a,y:-s.halfheight}:{x:s.halfwidth/a,y:s.halfheight},r.x<-s.halfwidth?r={x:-s.halfwidth,y:a*-s.halfheight}:r.x>s.halfwidth&&(r={x:s.halfwidth,y:a*s.halfheight}),r={x:r.x+game.halfScreenX,y:r.y+game.halfScreenY},this.arrow.position.set(r.x+i,r.y),this.arrow.rotation=n}}SWAM.ArrowIndicator=i,SWAM.PlayerTracker=class e{constructor(e){this.player=Players.get(e)}getPosition(){return a(this.player)}isActive(){return!0}isVisible(){return this.player.id!=game.myID}};let o=new r(e.BLUE),s=new r(e.RED);SWAM.ArrowIndicator.BLUE=new i(o,255),SWAM.ArrowIndicator.RED=new i(s,16711680)}(),SWAM.SmallLog=new function(){let e=null;SWAM.on("gamePrep",()=>{e=$(getTemplate("#WhoKilledWho")).click(()=>{SWAM.GameLog.show()}),$("body").append(e)}),SWAM.on("gameWipe",()=>{e&&(e.remove(),e=null)}),this.add=function(t){if(game.state!==Network.STATE.PLAYING)return;if(0==e.length)return;let n=$(t);e.append(n);let a=e[0];a.scrollTop=a.scrollHeight,setTimeout(function(){n.remove()},3e4)}},SWAM.GameLog=new function(){function e(){a=$(getTemplate(".modalContainer .modalDialog").replace(/\$title/g,"Game log")).attr("id","fullLog").css("z-index","30").hide();let e=$(getTemplate("#fullLogTemplate")).removeAttr("id");r=$(".fullLogcontent",e),$(".modalContent",a).append(e),$(".chkFLKills",e).click(()=>{t=!t,$(".flwkw",e).toggle()}),$(".chkFLPlayers",e).click(()=>{n=!n,$(".flplayer",e).toggle()}),$("body").append(a),SWAM.on("keyup",t=>{27==t.which&&SWAM.GameLog.visible()&&SWAM.GameLog.hide()})}let t=!0,n=!1,a=null,r=null;this.visible=()=>"none"!==a.css("display"),this.add=function(e){if(game.state!==Network.STATE.PLAYING)return;let a=$(e);a.hasClass("flwkw")&&!t&&a.hide(),a.hasClass("flplayer")&&!n&&a.hide();let i=r[0],o=isScrolledToBottom(i);r.append(a),500<r.children().length&&r.children().first().remove(),o&&(i.scrollTop=i.scrollHeight)},this.logKill=function(e,t){if(null!=e&&null!=t){let n="<div class=\"flwkw line\"><span class=\"playersel\" data-playerid=\""+e.id+"\"><span class=\"flag small flag-"+e.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==e.team?"#4d7fd5":2==e.team?"#dc4f46":"")+";\">"+UI.escapeHTML(e.name)+"</span></span><span class=\"text\" style=\"margin-left: 10px; margin-right: 10px; opacity: 0.6;\"> killed </span><span class=\"playersel\" data-playerid=\""+t.id+"\"><span class=\"flag small flag-"+t.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==t.team?"#4d7fd5":2==t.team?"#dc4f46":"")+";\">"+UI.escapeHTML(t.name)+"</span></span></div>";this.add(n),SWAM.Settings.ui.showWhoKilledWho&&SWAM.SmallLog.add(n)}},this.logPlayerConnection=function(e,t){if(null!=e){let n="<div class=\"flplayer line\"><span class=\"playersel\" data-playerid=\""+e.id+"\"><span class=\"flag small flag-"+e.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==e.team?"#4d7fd5":2==e.team?"#dc4f46":"")+";\">"+UI.escapeHTML(e.name)+"</span></span><span class=\"text\" style=\"margin-left: 10px; margin-right: 10px; opacity: 0.6;\">"+(t?" joined.":"left.")+"</span></div>";this.add(n),SWAM.Settings.ui.showLogConnections&&(SWAM.SmallLog.add(n),!t&&3e4>new Date().getTime()-e.lastMessageTime&&UI.addChatMessage(n,!0))}},this.logConnected=function(){let e="";switch(game.gameType){case SWAM.GAME_TYPE.FFA:e="Free For All";break;case SWAM.GAME_TYPE.CTF:e="Capture the flag";break;case SWAM.GAME_TYPE.BR:e="Battle Royale";}this.add("<hr/><div style='margin: 20px; font-size: 16px;'>"+new Date().toLocaleString()+"  - Joined to "+e+"</div>")},this.logFlag=function(e){let t="<div class='message' style='position: relative; display: block;'>"+e+"</div>";return this.add(t),t},this.logNewMatch=function(){this.add("<hr/><div style='margin: 20px; font-size: 16px;'>"+new Date().toLocaleString()+"  - New CTF Match started</div>")},this.show=function(){Sound.UIClick(),a.show(),r[0].scrollTop=r[0].scrollHeight,closeWhenClickOutside(a)},this.hide=function(){a.hide(),Sound.UIClick()},e()},SWAM.updatePlayersNamePlate=function(){var e=Players.getIDs(),t=Players.getMe();for(var n in e){var a=Players.get(n);"undefined"!=typeof a.scorePlace&&(a.sprites.name.text=a.scorePlace+". "+a.name+(a.team==t.team?" ["+Math.floor(100*parseFloat(a.health))+"]":""))}};let emotesPanel=new function(){function e(){a=$(getTemplate(".modalContainer .modalDialog").replace(/\$title/g,"Emotes")).attr("id","emotesPanel").css({zIndex:"30",left:"0px",maxHeight:"80%",display:"none"}).hide();let e="",n=0;t().forEach(t=>{e+=`<div class="emoteSample" data-name="${t}"><div class="emote emote-${t}"></div><div>/${t}</div></div>`,n++});let r=$(e);$(".modalContent",a).append(r),$("body").append(a),a.on("click",".emoteSample",t=>{UI.parseCommand("/"+$(t.currentTarget).data("name")),o()}),SWAM.on("keyup",t=>{27==t.which&&i.visible()&&i.hide()})}function t(){let e=SWAM.getEmotesList().slice().filter(t=>"x"!=t).sort();return[...new Set(e)]}function n(){const t={tf:[340,404],pepe:[412,476],clap:[268,476],lol:[412,548],bro:[268,548],kappa:[340,476],cry:[340,548],rage:[412,404]};let n="";for(let a in t)n+=`.emote-${a} { width: 32px; height: 32px; background: url(https://airma.sh/assets/gui.png) -${t[a][0]/2}px  -${t[a][1]/2}px; background-size: 512px; background-repeat: no-repeat; } `;return n}let a=null,r=null,i=this;this.visible=function(){return"none"!==a.css("display")},this.toggle=function(){this.visible()?this.hide():this.show()},this.show=function(){Sound.UIClick(),"none"===a.css("display")&&(a.fadeIn("fast"),r=closeWhenClickOutside(a))};let o=this.hide=function(){a.fadeOut("fast"),$(document).off("mousedown","",r),Sound.UIClick()};e(),function(){let e=SWAM.getEmotesList();const t=getFilePath("emotes.png");let a="";a+=n();for(let n=8;n<e.length;n++){let r=e[n],i=n-8;if("x"==r)continue;let o=100*Math.floor(i/16),s=r.replace(/ /g,"");a+=`.emote-${s} { `+"width: 32px; height: 32px; "+`background: url(${t}) -${100*(i%16)}%  -${o}% ; `+"background-size: 1600%;} "}let r=`<style type='text/css'>${a}</style>`;$("body").append(r)}(),a.css("display","block"),a.css("display","none")};SWAM.emotesPanel=emotesPanel,!function(){function t(e,t,n){var a,r,i;if(0==t)a=r=i=n;else{var o=function(e,t,n){return 0>n&&(n+=1),1<n&&(n-=1),n<1/6?e+6*(t-e)*n:n<1/2?t:n<2/3?e+6*((t-e)*(2/3-n)):e},s=.5>n?n*(1+t):n+t-n*t,d=2*n-s;a=o(d,s,e+1/3),r=o(d,s,e),i=o(d,s,e-1/3)}return[Math.round(255*a),Math.round(255*r),Math.round(255*i)]}const n={x:-9050,y:-1450},e={x:8074,y:-905};let a=[],r=null,i=new PIXI.ticker.Ticker;i.stop(),i.add(function(){if(!window.adding){for(var e=[],t=0;t<a.length;t++)a[t].update(),a[t].exists()?e.push(a[t]):a[t].destroy();a=e}}),i.start();class s{constructor(e,t){this.pos={x:e?e.x:0,y:e?e.y:0},this.vel={x:0,y:0},this.shrink=.97,this.size=2,this.resistance=1,this.gravity=0,this.flick=!1,this.alpha=1,this.fade=0,this.color=t||0,this.createSprite()}createSprite(){this.sprite=new PIXI.Sprite(s.texture),this.sprite.width=this.sprite.height=10;let e=t(this.color/360,1,.5);this.sprite.tint=(e[0]<<16)+(e[1]<<8)+e[2],r.addChild(this.sprite)}destroy(){r.removeChild(this.sprite),this.sprite.destroy()}update(){this.vel.x*=this.resistance,this.vel.y*=this.resistance,this.vel.y+=this.gravity,this.pos.x+=this.vel.x/game.scale,this.pos.y+=this.vel.y/game.scale,this.size*=this.shrink,this.alpha-=this.fade,this.sprite.position.set(this.pos.x,this.pos.y);let e=this.flick?Math.random()*this.size:this.size;this.sprite.scale.set(e/10/game.scale),this.sprite.visible=Graphics.inScreen(this.pos,128)}exists(){return .1<=this.alpha&&1<=this.size}}s.texture=PIXI.Texture.fromImage(getFilePath("sparkbwsmall.png")),window.createExplosion=function(e,t){var n=10*Math.random()+100;t=t||10*Math.floor(360*Math.random()/10);for(var r=0;r<n;r++){var i=new s(e,t),o=2*(Math.random()*Math.PI),d=Math.cos(Math.random()*Math.PI/2)*Tools.randInt(4,12);i.vel.x=Math.cos(o)*d,i.vel.y=Math.sin(o)*d,i.size=12,i.resistance=.92,i.shrink=.05*Math.random()+.93,i.flick=!0,a.push(i)}};let d=0;SWAM.fx={},SWAM.fx.stopFireworks=()=>{SWAM.debug&&console.log("Fireworks stopped"),d=0},SWAM.fx.startFireworks=t=>{function a(){let a,r,i;return t?(a=1==t?n:e,r=700,i=500):(a=Graphics.getCamera(),r=game.halfScreenX/game.scale,i=game.halfScreenY/game.scale),new Vector(Tools.rand(a.x-r,a.x+r),Tools.rand(a.y-i,a.y+i))}function r(){let e=a();createExplosion(e);let t=new Date().getTime();59e3>t-d&&setTimeout(r,Tools.randInt(400,1e3))}d=new Date().getTime(),SWAM.debug&&console.log("Fireworks satarted");let i=Tools.randInt(1,4);for(let e=0;e<i;e++)r()},SWAM.on("CTF_MatchStarted",SWAM.fx.stopFireworks),SWAM.on("gameWipe",SWAM.fx.stopFireworks),SWAM.on("CTF_MatchEnded",e=>{SWAM.Settings.general.matchEndFX&&SWAM.fx.startFireworks(e.w)}),SWAM.one("gameRunning",()=>{r=new PIXI.Container,game.graphics.layers.objects.addChild(r)})}(),SWAM.mapColorizer=new function(){function e(e){for(let t in e)c[t]=(e[t]-1)/p}function t(e,t){n(),h=new Date,l=!0,d=0,s=50,i.scale.set(0),i.alpha=.4,i.tint=t,i.position.set(e.x,e.y),o.addChild(i),u.start(),game.graphics.layers.map.filters=[new PIXI.filters.AdjustmentFilter]}function n(){u.stop()}function a(){if(SWAM.debug){let e=new Date().getTime()-h.getTime();console.log("Steps: "+d+"   Time: "+e/1e3+"ms.")}}function r(){if(l){if(i.width>1.8*config.mapWidth)return a(),l=!1,void Graphics.renderBackground();for(let e in c)game.graphics.layers.map.filters[0][e]+=c[e];.2<i.alpha&&(i.alpha-=.003),i.height=i.width+=s,s+=5}else if(580>d)for(let e in c)game.graphics.layers.map.filters[0][e]-=c[e]/4;else n(),a();d++,Graphics.renderBackground()}let i=new PIXI.Graphics,o=game.graphics.layers.groundobjects,s=0,d=0,l=!1;this.circle=i,i.beginFill(16777215,1),i.drawCircle(0,0,50),i.endFill(),i.blendMode=PIXI.BLEND_MODES.ADD,i.alpha=.3;let u=new PIXI.ticker.Ticker;u.autoStart=!1,u.add(r),u.stop();const p=145;let c={},h=new Date;this.showBlue=function(){e({gamma:1.2,saturation:.8,contrast:1,brightness:1.3,red:.1,green:.3,blue:.7,alpha:1.5}),t(SWAM.ArrowIndicator.BLUE.tracker.flag.BASE_COORDINATES,3355647)},this.showRed=function(){e({gamma:1.7,brightness:1.3,contrast:1.2,saturation:.2,red:.7,green:.3,blue:.3,alpha:1.2}),t(SWAM.ArrowIndicator.RED.tracker.flag.BASE_COORDINATES,16724787)},this.remove=function(){n(),i.scale.set(0),o.removeChild(i),game.graphics.layers.map.filters=[]},SWAM.on("CTF_MatchEnded",t=>{1==t.w?SWAM.mapColorizer.showBlue():SWAM.mapColorizer.showRed()}),SWAM.on("CTF_MatchStarted",this.remove),SWAM.on("gameWipe",this.remove)},SWAM.ColorAdjustments=new function(){function e(){p=$(getTemplate("#adjustmentPanel")),$("body").append(p),$(".toggleAdvanced",p).click(t),$("input",p).change(n),$(".reset",p).click(r),$(".close",p).click(a)}function t(){$(".advancedColorAdjustments",p).toggle(100)}function n(){o(),s(),d()}function a(){p.remove(),Sound.UIClick()}function r(){for(let e in u)u[e]=1;s(),d()}function i(e){return".sdr"+e[0].toUpperCase()+e.substr(1)}function o(){for(let e in u)u[e]=parseInt($(i(e),p).val())/100}function s(){for(let e in u){let t=Math.round(100*u[e]);$(i(e),p).val(t),$("."+e,p).html(t)}}function d(){let e=!1;for(let t in u)1!=u[t]&&(e=!0);if(e){let e=new PIXI.filters.AdjustmentFilter;for(let t in u)e[t]=u[t];config.adjustmentFilter=e,game.graphics.layers.game.filters=[e],localStorage.setItem(l,JSON.stringify(u))}else delete config.adjustmentFilter,game.graphics.layers.game.filters=[],localStorage.removeItem(l)}const l="SWAM_ColorAdjustments";let u={gamma:1,brightness:1,contrast:1,saturation:1,red:1,green:1,blue:1,alpha:1},p;(function(){return $.extend(u,JSON.parse(localStorage.getItem(l)))})(),d(),this.open=function(){if(0==$("#adjustmentPanel").length?e():$("#adjustmentPanel").show(),config.adjustmentFilter){let e=config.adjustmentFilter;for(let t in u)u[t]=e[t];s()}Sound.UIClick()}};let ExtendedScoreboard=new function(){function e(){let e=$("#scoreboard")[0].getBoundingClientRect(),t=$("canvas")[0].getBoundingClientRect(),n="0px";e.left<t.right&&(n=Math.round(parseInt(config.minimapPaddingY)+parseInt(config.minimapSize/2)+5)+"px"),$("#scoreboard").css({bottom:n})}this.update=function(e){if(!SWAM.Settings.ui.useExtendedScoreboard)return;let t=0,n="",a=!1,r=0,o="",s="",d=0,l="",u="",p,c,h,f,g;e.sort(function(n,e){return e.score-n.score}),r=e.findIndex(e=>e.id==game.myID);var m=function(a){var r="";a+="";for(var i=0;i<a.length;i++)r+="<span>"+a[i]+"</span>";return r};let y=100;for(y=y?Tools.clamp(y,1,e.length):e.length,d=0;d<y&&!a;d++)p=Players.get(e[d].id),null==p||(t++,c=4>t?"<span class=\"badge scoreboard "+[,"gold","silver","bronze"][t]+"\"></span>":t+".",h=p.me()?" sel":"",f=e[d].score,g=e[d].level,l=UI.escapeHTML(p.name),u=p.removedFromMap?" spectator":"",r>y&&t==y-1&&r!=y&&(n+="<div class=\"line dottedline\">&middot; &middot; &middot;</div>",p=Players.get(game.myID),c=r+".",f=game.myScore,g=game.myLevel,h=" sel",a=!0),o="",game.gameType==SWAM.GAME_TYPE.CTF&&(o=" team-"+p.team),s="",4==(c+"").length&&(s=" bigger"),n+=`<div class="line ${h}" data-playerid="${p.id}"><span class="place ${s}">`+c+`</span><span class="flag small flag-${p.flag}"></span>`+`<span class="nick ${o+u}">${l}</span>`+(0==g?"":`<span class="holder">&nbsp;<span class="rank">${g}</span></span>`)+"<span class=\"score\">"+m(f)+"</span></div>");$("#scoreboard").html(n).perfectScrollbar()},this.interval=setInterval(()=>Network.getScores(),5e3),SWAM.one("gamePrep",e),SWAM.on("rendererResized",e)};SWAM.on("playerSay",e=>{let t=Players.get(e.id);!t||UI.getIgnored()[t.id]||UI.isEmote(e.text,!0)||!Graphics.inScreen(t.pos,128)||(UI.addChatLine(t,"\uD83D\uDCAC "+e.text,0),$("#chatlines div:last-of-type .text").addClass("chatSay"))});let sentMessages=[],sentMessageIndex=0;$("#chatinput").keydown(function(t){let e=$("#chatinput");if(""==e.val()||e.val()==sentMessages[sentMessageIndex]){if(38==t.which&&0<sentMessageIndex)return sentMessageIndex--,e.val(sentMessages[sentMessageIndex]),t.stopImmediatePropagation(),t.preventDefault(),!1;if(40==t.which&&sentMessageIndex<sentMessages.length)return sentMessageIndex++,sentMessageIndex<sentMessages.length?e.val(sentMessages[sentMessageIndex]):e.val(""),t.stopImmediatePropagation(),t.preventDefault(),!1}if(13==t.which){let t=e.val();""!=t&&(sentMessages.push(t),sentMessageIndex=sentMessages.length,50<sentMessages.length&&sentMessages.shift())}}),$("#chatinput").on("input",function(){if(!SWAM.Settings.ui.replaceEmoticons)return;let e=this.selectionStart,t=this.value,n=t.substr(0,2).toLowerCase();if(!n.startsWith("/s")){if(n.startsWith("/w")){let e=t.indexOf(" ",3)+1;n=t.substr(0,e),t=t.substr(e)}else n="";let a=function(t){const n=[["\uD83D\uDE42",/[:=]-?\)/g],["\uD83D\uDE03",/:D/g],["\uD83D\uDE04",/\^_?\^/g],[" \uD83D\uDE06",/ [xX]-?D/g],["\uD83D\uDE09",/;-?\)/g],["\uD83D\uDE0E",/B-?\)/g],["\uD83D\uDE10",/:-?\|/g],["\uD83D\uDE12",/_?/g],["\uD83D\uDE14",/[:=]-[\/\\]/g],["\uD83D\uDE15",/[:=]-?[sS]/g],["\uD83D\uDE1B",/[:=]-?[pP]/g],["\uD83D\uDE1C",/;-?[pP]/g],["\uD83D\uDE21",/:-?\@/g],["\uD83D\uDE22",/[:=]'-?\(/g],["\uD83D\uDE2D",/[:=]''-?\(/g],["\uD83D\uDE2E",/[:=]-[oO]/g],["\uD83D\uDE33",/[:=]-?\$/g],["\uD83D\uDE41",/[:=]-?\(/g],["\uD83D\uDE43",/\(-?[:=]/g],["\u2764\uFE0F",/<3|&lt;3/g],["\uD83D\uDC94",/<\/3|&lt;&#x2F;3/g]];for(let r of n){var a=new RegExp(r[1],"gim");t=t.replace(a,function(t){return e+=r[0].length-t.length,r[0]})}return t};t=a(t),this.value=n+t,this.setSelectionRange(e,e)}}),$("#chatbox").mousedown(function(t){3==t.which&&t.target.className.includes("text")&&copyTextToClipboard(t.target.innerText)}),$("#scoreboard, #scorecontainer").on("click","div",SWAM_scoreboard_click_handler),SWAM.listLayers=function(e){for(var t=0;t<e.children.length;t++)console.log(e.children[t].layerName)},SWAM.debug,AutoPilot.Load(),SWAM.Audio.initialize(),printModLoaded(),SWAM.Theme&&(SWAM.Theme.start(),setTimeout(()=>{SWAM.loadSettings()},1))}SWAM.injectTextures=function(e,t,n,a,r){$.extend(e,{emotes:getFilePath("emotes.png")});var o={ui_minimap_1:["items",[404,140,64,64]],ui_minimap_2:["items",[540,140,64,64]],ui_minimap_3:["items",[268,140,64,64]]};const s=["tf","pepe","clap","lol","bro","kappa","cry","rage","watchingyou","cool","party","facepalm","hehe","wink","joke","sweeteyes","insult","angry","fury","yell","lol","cry","sad","zzz","mime","salute","lotfl","loser","fgun","fguns","dab","doh","derp","nerd","flushed","rolleyes","drunk","tblue","tred","thief","greedy","blah","stopit","tired","drool","devil","devilfury","king1","king2","king3","old","leader","dog","doglol","dogrr","dogoh","clap","victory","fu","tup","tdown","h5","hs","wave","ass","x","x","x","x","x","x","x","redcap","bluecap","bluefire","redfire","fire","alert","shield","inferno","turtle","turtled","heli","pred","goli","prow","nado","uplove","poo","poosad","pooangry","poobull","bones","jolly","wflag","bomb","heart","bear","bird","chicken","peace","party1","party2","beer","rambo","joker","vader","yoda","godfather","hawkes","monkey","narf","steamr","noob1","noob2","dragon","bot","nobot","noprow","noheli","putin","trump","kim","rip","boom","canttouch","bang","ddd","revenge","rekt","skullpilot","hellpilot","acepilot","pigpilot","ndt","raptor","gg","ggwp","bs","nyan","elon","think","missibis","pluto","shrug","ace","salty","mvp","stop","camp","bananas","mine"];let d={};for(let o=8;o<s.length;o++){let t=s[o],e=o-8;"x"==t||(d["emote_"+t]=["emotes",[64*(e%16),64*Math.floor(e/16),64,64]])}for(let l in SWAM.getEmotesList=()=>s,$.extend(o,d),o)t[l]=o[l];var l={minimap1:{texture:"ui_minimap_1",layer:"ui2",anchor:[.5,.5],alpha:1,scale:.25},minimap2:{texture:"ui_minimap_2",layer:"ui2",anchor:[.5,.5],alpha:1,scale:.25},minimap3:{texture:"ui_minimap_3",layer:"ui2",anchor:[.5,.5],alpha:1,scale:.25},minimapTarget:{texture:"powerup_circle",layer:"ui3",anchor:[.5,.5],alpha:1,scale:.12}};for(let o in l)a[o]=l[o];SWAM.Theme&&SWAM.Theme.injectTextures&&SWAM.Theme.injectTextures(e,t,n,a,r),Christmas2017Theme.loadSnow(e);let u=new PIXI.loaders.Loader;u.add(Object.values(e)),u.load(()=>SWAM.trigger("texturesInjected"))},SWAM.injectSounds=function(e){SWAM.Theme&&SWAM.Theme.injectSounds&&SWAM.Theme.injectSounds(e)},!function(){function e(e){const t=function(){let t=Array.from(arguments);t.shift();try{return e.apply(null,t)}catch(t){console.error(t)}};return t.guid=e.guid=e.guid||$.guid++,t}function t(){let e={StarMashThemes:{url:getFilePath("swam.themes.js"),enabled:!0}};return SWAM.debug&&(e.SWAM_Debug={url:getFilePath("swam.debug.js"),enabled:!0}),e}function n(){return location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+location.pathname+(location.search?location.search:"")}function a(){return new Promise(e=>{SWAM.Templates=document.createElement("div"),$.get(getFilePath("mod_templates.html"),t=>{$(SWAM.Templates).html(t),$("body").append(getTemplate("#ModStyles")),e()})})}function r(){function e(e,t){var n=0;(function a(){n<e.length?(console.log("SWAM: Loading script: "+e[n]),$.cachedScript(e[n]).fail(function(){console.error("SWAM: Load failed: "+e[n])}).always(function(){++n,a()})):t&&t()})()}return new Promise(t=>{let n=[...SWAM.dependencies];for(let e in delete SWAM.dependencies,g)g[e].enabled&&n.push(g[e].url);e(n,function(){n=i().dependencies,e(n,t)})})}function i(){let t={},n={};for(let a in m){let r=m[a];n[r.url]=r.url;for(let e of r.dependencies)t[e]=e}return{extensions:Object.values(n),dependencies:Object.values(t)}}function o(e=2){let t=ErrorStackParser.parse(new Error)[e].fileName;return t}function s(e){let t=$.extend({id:"",themeName:"",description:"",author:"Anonymous",version:"1.0"},e);if($.extend(e,t),"function"!=typeof e)throw"Invalid theme. The object is not a function.";if(e.id=e.name,""==e.themeName)throw"Invalid theme. 'themeName' field not defined.";if(e[e.id])throw"A theme with that name has already been registered!";y[e.id]=e,SWAM.trigger("themeAdded",e)}function d(e,t,n){function a(e){i++,o=e}function r(){SWAM.off("extensionAdded",a),1==i?t(o):0==i?n("File loaded, but no extension registered successfully.<br>Check the console to verify if there were errors when the file was executed."):n("File loaded, but multiple registrations where detected. A file must have only one registration.")}let i=0,o=null;SWAM.on("extensionAdded",a);try{jQuery.ajax({dataType:"script",url:e,cache:!0,timeout:5e3}).done(r).fail(function(){SWAM.off("extensionAdded",a),n("There was an error when trying to load the file.")})}catch(t){SWAM.off("extensionAdded",a),n("There was an error executing the file. "+t),console.error(t)}}function l(){let e={extensionsToLoad:g,selectedTheme:_};window.specialTheme&&(e.lastSpecialTheme=window.specialTheme),localStorage.setItem("SWAM_Extensions",JSON.stringify(e))}function u(e){let t=e.info.id;if(delete g[t],m[t]){for(let e of m[t].themes)delete SWAM.Settings.themes[e.id],delete y[e.id];delete SWAM.Settings.extensions[t],delete m[t]}localStorage.setItem("SWAM_Settings",JSON.stringify(SWAM.Settings))}function p(e,t){t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");let n=t.split(".");for(let a=0,r;a<n.length;++a)if(r=n[a],r in e)e=e[r];else return;return e}function c(e,t,n){t=t.replace(/\[(\w+)\]/g,".$1"),t=t.replace(/^\./,"");let a=t.split(".");for(let r=0,i;r<a.length;++r)if(i=a[r],i in e)r<a.length-1?e=e[i]:e[i]=n;else return}function h(e,t){function n(e){return e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,""),e=e.replace(/\./g,""),e}function a(e){e=$.extend({css:{}},e),this.render=function(t){let n=$("<div><hr class='separator'></div>"),a=$("hr",n).css(e.css);t.append(n)}}function r(e,t){t=$.extend({click:function(){},css:{minWidth:"250px",outline:"none",margin:"5px"}},t),this.render=function(n){let a=$(`<button class='btn'>${e}</button>`).css(t.css).click(t.click);n.append(a)}}function i(e,t,a){a=$.extend({css:{},useToggle:!0},a),this.property=e;let r=n(e),i=null;this.render=function(e){let n=null;n=a.useToggle?`<div><label><label class='switch'><input type='checkbox' class='chk${r}' /><span class="slider round"></span></label> ${t}</label></div>`:`<div><label><input type='checkbox' class='chk${r}' /> ${t}</label></div>`;let o=$(n);i=$(`.chk${r}`,o)[0],$(o).css(a.css),e.append(o)},this.getValue=function(){return i.checked},this.setValue=function(e){i.checked=e}}function o(e,t,a){a=$.extend({css:{},maxLength:null},a),this.property=e;let r=n(e),i=null;this.render=function(e){let n=$(`<div><label><input type='text' class='txt${r}' /> ${t}</label></div>`);i=$(`.txt${r}`,n),i.css(a.css),a.maxLength&&i.attr("maxlength",a.maxLength),e.append(n)},this.getValue=function(){return i.val()},this.setValue=function(e){i.val(e)}}function s(e,t,a){this.property=e;let r=n(e),i=null,o=null;a=$.extend({min:0,max:10,step:1},a),a=$.extend({css:{minWidth:10*(""+a.max).length+20+"px"}},a),this.render=function(e){let n=`<div><label><span class='sliderValue'></span> <input type='range' class='slider${r}' min='${a.min}' max='${a.max}' step='${a.step}' /> ${t}</label></div>`,s=$(n);i=$(`.slider${r}`,s),o=$(".sliderValue",s).css(a.css),i.change(()=>{o.html(i.val())}),e.append(s)},this.getValue=function(){return i.val()},this.setValue=function(e){i.val(e),o.html(e)}}function d(e,t,a,r){r=$.extend({css:{}},r),this.property=e;let i=n(e),o=null;this.render=function(e){let n=$(`<div><label><select class='sel${i}'></select> ${t}</label></div>`);o=$(`.sel${i}`,n).css(r.css);for(let t of Object.keys(a))o.append($("<option>",{value:t,text:a[t]}));e.append(n)},this.getValue=function(){return o.val()},this.setValue=function(e){o.val(e)}}let l=[];this.title=t,this.fields=l,this.setValue=function(t){for(let n of l)if(n.property&&n.setValue){let a=n.property;a=e.root?e.root+"."+n.property:n.property;try{let e=p(t,a);n.setValue(e)}catch(t){console.error(t)}}},this.onAccept=function(t){let n=e.root?p(t,e.root):t;for(let e of l)if(e.property&&e.getValue)try{c(n,e.property,e.getValue())}catch(t){console.error(t)}},this.render=function(e){let n=$(getTemplateContent("#Settings_section"));$(".sectionsContainer",e).append(n),$(".title",n).html(t);let a=$(".values",n);for(let t of l)t.render(a)},this.addSeparator=function(e){l.push(new a(e))},this.addButton=function(e,t){l.push(new r(e,t))},this.addBoolean=function(e,t,n){l.push(new i(e,t,n))},this.addString=function(e,t,n){l.push(new o(e,t,n))},this.addValuesField=function(e,t,n,a){l.push(new d(e,t,n,a))},this.addSliderField=function(e,t,n){l.push(new s(e,t,n))}}let f=$({});SWAM.trigger=f.trigger.bind(f),SWAM.on=function(t,n){f.on(t,e(n))},SWAM.one=function(t,n){f.one(t,e(n))},SWAM.off=f.off.bind(f),SWAM.extend=function(e,t){return e.prototype=Object.create(t.prototype),e.prototype.constructor=e,t.prototype};let g=t(),m={},y={},_="",b;"#clean"==window.location.hash?l():"#noextensions"!=window.location.hash&&function(){try{let e=localStorage.getItem("SWAM_Extensions");null!=e&&(e=JSON.parse(e),e.extensionsToLoad&&(g=$.extend(e.extensionsToLoad,t())),e.selectedTheme&&""!=e.selectedTheme&&(_=e.selectedTheme),e.lastSpecialTheme&&(b=e.lastSpecialTheme))}catch(t){}}(),SWAM.loadTheme=function(){let e=GetQueryStringParams("theme");e&&"function"==typeof y[e]&&(_=e,l()),b!=window.specialTheme&&(window.specialTheme&&(_=window.specialTheme),l()),null!=_&&""!=_&&"function"==typeof y[_]||(_="RealisticSprites"),SWAM.Theme=new y[_];let t=SWAM.Theme.settingsProvider;t&&(t.title=y[_].themeName,t.isTheme=!0,t.root="themes."+y[_].id)},SWAM.getThemeFunction=function(){return y[_]},SWAM.getThemeSettings=function(){let e=SWAM.Settings;return SWAM.Settings||(e=JSON.parse(localStorage.getItem("SWAM_Settings"))),p(e,SWAM.Theme.settingsProvider.root)},SWAM.loadFiles=function(e){a().then(r).then(()=>{e&&(e(),delete SWAM.loadFiles)})};SWAM.getSettingsProviders=function(){let e=[];SWAM.settingsProvider&&e.push(SWAM.settingsProvider),SWAM.Theme&&SWAM.Theme.settingsProvider&&e.push(SWAM.Theme.settingsProvider);for(let t of Object.values(m))t.settingsProvider&&e.push(t.settingsProvider);return e},SWAM.registerExtension=function(t){if(t=$.extend({id:"",name:"",description:"",author:"Anonymous",version:"0.0",dependencies:[],themes:[],settingsProvider:null,url:""},t),""==t.id)throw"Invalid extension. 'id' field not defined.";if(""==t.name)throw"Invalid extension. 'name' field not defined.";if(m[t.id])throw"An extension with that name has already been registered!";let n=[];try{m[t.id]=t;for(let e of t.themes)s(e),n.push(e);let e=t.settingsProvider;e&&(e.title=t.name,e.isExtension=!0,e.root="extensions."+t.id),g[t.id]={url:o(),enabled:!0,info:{id:t.id,name:t.name,description:t.description,author:t.author,version:t.version}},SWAM.trigger("extensionAdded",t)}catch(a){delete m[t.id];for(let e of n)delete y[e.id];throw"There was an error when attempting to load a theme: "+a}};SWAM.OpenExtensionsWindow=function(){function e(){r(),a()}function t(){$(".section",p).slice(2).remove()}function a(){let e=$("#selTheme",p);e.html("");let t=Object.values(y).sort((e,t)=>e.themeName<t.themeName?-1:e.themeName>t.themeName?1:0);$.each(t,function(t,n){e.append($("<option>",{value:n.id,text:n.themeName}))}),e.val(_)}function r(){for(let e in t(),g)"StarMashThemes"!=e&&o(g[e])}function o(t){let n=$(getTemplate("#ExtensionEditPanel",!1));$(".sectionsContainer",p).append(n);let a=$(".modName",n),r=$(".arrows",n);$(".name",n).html(t.info.name),$(".description",n).html(t.info.description),$(".author",n).html(t.info.author),$(".version",n).html(t.info.version),$(".url",n).html(t.url).prop("title",t.url),$(".chkEnabled",n).prop("checked",t.enabled).change(n=>{t.enabled=n.currentTarget.checked}),$(".btnDelete",n).click(()=>{confirmDialog({title:"Confirmation needed",message:"Are you sure? The extension will not be loaded once you restart the game.",yes:function(){u(t),e()}})})}function s(){p.remove(),Sound.UIClick()}let p=createModal({title:"StarMash Themes and Extensions",content:getTemplate(".SWAM_Extensions"),width:"800px",maxHeight:"80%",height:"800px",top:"10%"}),c=$.extend({},g),h=$.extend({},m),f=$.extend({},y);e(),$(".btnNew",p).click(function(){let t=$(getTemplate("#ExtensionEditPanel",!1));$(".sectionsContainer",p).append(t);let n=$(".modName",t),a=$(".scriptURL",t),r=$(".arrows",t),i=$(".newModButtons",t),o=$(".error",t);SWAM.debug||a.val(""),o.hide(),n.hide(),r.hide(),i.show(),a.show(),$(".btnAcceptURL",t).click(function(){i.hide(),o.html("").hide(),d(a.val(),function(){e()},function(e){o.html(e).show(),i.show()})}),$(".btnCancelURL",t).click(function(){t.remove()})}),$(".btnAccept",p).click(()=>{_=$("#selTheme",p).val(),l(),s(),window.location=n()}),$(".btnCancel",p).click(()=>{g=c,m=h,y=f,s()})},window.SettingsProvider=function(e,t){function n(e){let t={},n=t;if(""==e)return t;e=e.replace(/\[(\w+)\]/g,".$1"),e=e.replace(/^\./,"");for(var a=e.split("."),r=0,o;r<a.length;++r)o=a[r],n[o]={},n=n[o];return t}this.title="",this.root=null;let a=[];this.sections=a,this.getDefault=function(){let t=this.root||"";if(""!=t){let a=n(t);return c(a,t,e),a}return e},this.apply=function(e){t&&t(p(e,this.root),e)},this.setWindow=function(e,t){for(let n of a)n.render(t);return{setValues:function(e){for(let t of a)t.setValue(e)},accept:function(){for(let t of a)t.onAccept(e)},cancel:function(){}}},this.addSection=function(e){let t=new h(this,e);return a.push(t),t}},SWAM.replaceCSS=function(e){$("link[href*=\"style.css\"]").replaceWith("<link href=\""+e+"\" type=\"text/css\" rel=\"stylesheet\">")}}(),window.AutoPilot={Matrix:[[]],WALKABLE:0,BLOCKED:1,keystate:{UP:!1,DOWN:!1,LEFT:!1,RIGHT:!1,SPECIAL:!1},zero:{x:0,y:0},topLeft:{x:-16352,y:-8160},greenland:{x:-5284,y:-7092},Load:function(){$.getScript(getFilePath("pathfinding-browser.min.js"),function(){for(var e=window.config.walls,t=Array(164),n=0;164>n;n++){t[n]=Array(328);for(var a=0;328>a;a++)t[n][a]=AutoPilot.WALKABLE}for(var r of e)for(var i=AutoPilot.getGraphBoundingBox(r[0],r[1],r[2]),n=i.p1.y;n<=i.p2.y;n++)for(var a=i.p1.x;a<=i.p2.x;a++)try{t[n][a]=AutoPilot.BLOCKED}catch(t){}AutoPilot.Matrix=t})},angleTo:function(e,t){var n=Math.atan2(-e.x+t.x,e.y-t.y);return 0>n&&(n+=2*Math.PI),n},angleToNeg:function(e,t){return Math.atan2(-e.x+t.x,e.y-t.y)},mapCoordX:function(e,t){return t|=0,Math.floor((e+16384+t)/100)},mapCoordY:function(e,t){return t|=0,Math.floor((e+8192+t)/100)},getGraphBoundingBox:function(e,t,n){return{p1:{x:this.mapCoordX(e,-n),y:this.mapCoordY(t,-n)},p2:{x:this.mapCoordX(e,n),y:this.mapCoordY(t,n)}}},log:function(e){AutoPilot.logMoves&&console.log(e)},right:function(){!0==this.keystate.RIGHT||(this.log("right"),Network.sendKey("RIGHT",!0),this.keystate.RIGHT=!0)},left:function(){!0==this.keystate.LEFT||(this.log("left"),Network.sendKey("LEFT",!0),this.keystate.LEFT=!0)},noSteer:function(){!1==this.keystate.RIGHT&&!1==this.keystate.LEFT||(this.log("nosteer"),this.keystate.RIGHT&&(Network.sendKey("RIGHT",!1),this.keystate.RIGHT=!1),this.keystate.LEFT&&(Network.sendKey("LEFT",!1),this.keystate.LEFT=!1))},forward:function(){!0==this.keystate.UP||(this.log("up"),Network.sendKey("UP",!0),this.keystate.UP=!0)},backwards:function(){!0==this.keystate.DOWN||(this.log("down"),Network.sendKey("DOWN",!0),this.keystate.DOWN=!0)},boost:function(e){this.keystate.SPECIAL==e||(this.log("special"),Network.sendKey("SPECIAL",e),this.keystate.SPECIAL=e)},stop:function(){!1==this.keystate.UP&&!1==this.keystate.DOWN||(this.log("stop"),this.keystate.DOWN&&(Network.sendKey("DOWN",!1),this.keystate.DOWN=!1),this.keystate.UP&&(Network.sendKey("UP",!1),this.keystate.UP=!1))},fullStop:function(){this.log("fullstop"),this.noSteer(),this.stop()},tg:function(){this.moveTo(this.greenland.x,this.greenland.y)},tgs:function(){this.NavigateTo(this.greenland.x,this.greenland.y)},NavigateTo:function(e,t){var n=Players.getMe(),a=this.mapCoordX(n.pos.x),r=this.mapCoordY(n.pos.y),i=this.mapCoordX(e),o=this.mapCoordY(t);return AutoPilot.path=this.SearchPath(a,r,i,o),AutoPilot.path?void(AutoPilot.debug&&(AutoPilot.erasePath(),AutoPilot.drawPath()),AutoPilot.exit=!1,this.currentNode=0,$("#AutoPilotAlert").show(),this.moveNext()):void UI.addChatMessage("Autopilot: Invalid destination.")},erasePath:function(){game.graphics.layers.objects.removeChild(this.drawnPath)},drawnPath:null,drawPath:function(){for(var e=AutoPilot.path,t=new PIXI.Graphics,n=0;n<e.length;n++){var a=e[n][0],r=e[n][1];t.beginFill(65280,.2),t.drawRect(100*a-16384,100*r-8192,100,100),t.endFill()}this.drawnPath=t,game.graphics.layers.objects.addChild(t)},Test:function(){if(window.res=this.SearchPath(111,11,161,46),!0===AutoPilot.debug){for(var e=Array(100),t=0;100>t;t++){e[t]=Array(100);for(var n=0;100>n;n++)e[t][n]=apMatrix[t][n+100]}window.matrixSample=e}},cancel:function(){AutoPilot.exit=!0,AutoPilot.fullStop(),$("#AutoPilotAlert").hide()},currentNode:0,moveNext1:function(){var e=AutoPilot.path[this.currentNode].y,t=AutoPilot.path[this.currentNode].x;this.moveTo(100*e-16384+50,100*t-8192+50,!0)},moveNext:function(){var e=AutoPilot.path[this.currentNode][0],t=AutoPilot.path[this.currentNode][1];this.moveTo(100*e-16384+50,100*t-8192+50,!0)},prevX:0,prevY:0,rotating:!1,rotateTo:function(e,t,n=250,a){var r=e-t.rot;r>Math.PI&&(r-=2*Math.PI),r<-Math.PI&&(r+=2*Math.PI);let i=Math.round(1e3*(Math.abs(r)/(60*config.ships[t.type].turnFactor))),o=0<r?AutoPilot.right:AutoPilot.left,s=0>=r?AutoPilot.right:AutoPilot.left;AutoPilot.rotating=!0,o.call(AutoPilot),setTimeout(function(){AutoPilot.noSteer(),setTimeout(()=>{AutoPilot.rotating=!1,a&&a()},n)},i)},moveTo:function(e,t,n){function a(){if(!AutoPilot.exit){if(r=Players.getMe(),300<Math.abs(AutoPilot.prevX-r.pos.x)||300<Math.abs(AutoPilot.prevY-r.pos.y))return void AutoPilot.cancel();if(AutoPilot.prevX=r.pos.x,AutoPilot.prevY=r.pos.y,0==r.pos.x||0==r.pos.y)return void AutoPilot.cancel();var i=AutoPilot.angleTo(r.pos,{x:e,y:t}),o=Tools.distance(r.pos.x,r.pos.y,e,t),s=!0,d=i-r.rot;if(.3<Math.abs(d)).75<Math.abs(d)&&AutoPilot.fullStop(),AutoPilot.rotateTo(i,r);else{if(AutoPilot.noSteer(),AutoPilot.forward(),s=200>o,AutoPilot.currentNode<AutoPilot.path.length-1){var l=100*AutoPilot.path[AutoPilot.currentNode+1].y-16384+50,u=100*AutoPilot.path[AutoPilot.currentNode+1].x-8192+50;i=AutoPilot.angleTo(r.pos,{x:e,y:t});var p=AutoPilot.angleTo({x:e,y:t},{x:l,y:u});s=.3<=Math.abs(p-i)}s?setTimeout(function(){AutoPilot.stop()},50):1==r.type&&.8<r.energy&&500<o&&(AutoPilot.boost(!0),setTimeout(()=>AutoPilot.boost(!1),1500))}!AutoPilot.exit&&100<o?setTimeout(a,100):!AutoPilot.exit&&n&&AutoPilot.currentNode<AutoPilot.path.length-1?(AutoPilot.currentNode++,AutoPilot.moveNext()):AutoPilot.fullStop()}}AutoPilot.debug&&console.log(this.currentNode),n|=!1,AutoPilot.exit=!1;var r=Players.getMe();this.prevX=r.pos.x,this.prevY=r.pos.y,a()},SearchPath:function(e,t,n,a){let r=new PF.Grid(AutoPilot.Matrix),i=new PF.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0}),o,s;try{o=i.findPath(e,t,n,a,r),s=PF.Util.smoothenPath(r,o)}catch(t){console.log("error pf: ",o,s)}return s},mimicTarget:0,checkMimic:function(t){if(3==t.which&&t.altKey){let e=SWAM.getClosestPlayer(t.offsetX,t.offsetY);if(e.id==game.myID)AutoPilot.mimicTarget=0,Network.sendSay("Mimicking stopped"),Network.sendKey("UP",!1),Network.sendKey("DOWN",!1);else if(Network.sendSay("Mimicking "+e.name+" ..."),AutoPilot.mimicTarget=e.id,AutoPilot.aligned=!1,AutoPilot.mimicPaused=!0,!AutoPilot.aligned)return void AutoPilot.mimicRotation(!0)}},mimic_keydown_handler:function(t){if(this.mimicTarget!=game.myID){if("-"==t.key&&(this.reverseMimic=!this.reverseMimic,this.reverseMimic?Network.sendSay("reverse"):Network.sendSay("normal")),(45==t.keyCode||188==t.keyCode)&&this.mimicRotation(!1),36==t.keyCode||190==t.keyCode)if(AutoPilot.mimicPaused=!AutoPilot.mimicPaused,AutoPilot.mimicPaused){let e=Players.getMe();e.keystate.UP&&Network.sendKey("UP",!1),e.keystate.DOWN&&Network.sendKey("DOWN",!1),e.keystate.LEFT&&Network.sendKey("LEFT",!1),e.keystate.RIGHT&&Network.sendKey("RIGHT",!1),Network.sendSay("paused")}else Network.sendSay("resumed");return t.stopImmediatePropagation(),void t.preventDefault()}},lastState:{boost:!1,stealthed:!1,strafe:!1,flagspeed:!1,keystate:{}},aligned:!1,reverseMimic:!1,mimicRotation:function(e){if(this.mimicTarget==game.myID)return;let t=Players.getMe(),n=Players.get(this.mimicTarget),a=t.rot-n.rot;if(!this.rotating&&.05<Math.abs(a)){console.log(`rotating... delta: ${a}   me.rot: ${t.rot}   player.rot: ${n.rot}`);let r=AutoPilot.reverseMimic?Math.PI:0;AutoPilot.rotateTo(n.rot+r,t,250,function(){AutoPilot.aligned=!0,e&&(AutoPilot.mimicPaused=!1)})}else;},mimicStealth:function(e){e.id==game.myID||e.id!=AutoPilot.mimicTarget||AutoPilot.mimicPaused||(e.state!=this.lastState.stealthed&&(Network.sendKey("SPECIAL",!0),setTimeout(()=>{Network.sendKey("SPECIAL",!1)},250)),this.lastState.stealthed=e.state)},mimicUpdate:function(e,t){function n(e,t){let n=e;AutoPilot.reverseMimic&&("UP"==e?n="DOWN":"DOWN"==e&&(n="UP")),AutoPilot.lastState.keystate[e]!=t[e]&&(console.log("sending key: "+n+" - "+t[e]),Network.sendKey(n,t[e]))}function a(){let e=Players.getMe();3!=e.type&&(r.strafe=!1);let t=r.strafe,n=AutoPilot.lastState.strafe;t!=n&&Network.sendKey("SPECIAL",t)}let r={keystate:{}};if(t.id!=game.myID&&t.id==AutoPilot.mimicTarget&&!AutoPilot.mimicPaused){if(null==t.keystate)return e==Network.SERVERPACKET.PLAYER_FIRE?(Network.sendKey("FIRE",!0),void setTimeout(function(){Network.sendKey("FIRE",!1)},100)):void(e==Network.SERVERPACKET.EVENT_BOOST&&AutoPilot.lastState.boost!=t.boost&&(Network.sendKey("SPECIAL",t.boost),AutoPilot.lastState.boost=t.boost));Tools.decodeKeystate(r,t.keystate);var i={};i[Network.SERVERPACKET.PLAYER_UPDATE]="update",i[Network.SERVERPACKET.PLAYER_FIRE]="fire",i[Network.SERVERPACKET.EVENT_BOOST]="boost",i[Network.SERVERPACKET.EVENT_BOUNCE]="bounce",a(),null!=t.keystate&&(console.log("event: "+e[e]),n("UP",r.keystate),n("DOWN",r.keystate),n("LEFT",r.keystate),n("RIGHT",r.keystate)),AutoPilot.lastkeys=$.extend(AutoPilot.lastState,r)}},debug:!1,logMoves:!1},SWAM.Audio={Flag:{EnemyTaken:0,OursTaken:1,EnemyCaptured:2,OursCaptured:3,EnemyRecovered:4,OursRecovered:5},initialize:function(){var e=new Howl({src:[getFilePath("flag_phrases_1.mp3")],volume:.5,sprite:{EnemyTaken_1:[0,1450],OursTaken_1:[1500,1800],EnemyCaptured_1:[3300,1800],OursCaptured_1:[5200,1900],EnemyRecovered_1:[7300,1600],OursRecovered_1:[9e3,1800],EnemyTaken_2:[11e3,1500],OursTaken_2:[12600,1800],EnemyCaptured_2:[14600,1600],OursCaptured_2:[16400,1800],EnemyRecovered_2:[18400,1600],OursRecovered_2:[20200,1800]}});SWAM.Audio.playFlagEvent=function(e,t){if(config.settings.sound){var n=null;for(let a in 1!=t&&2!=t&&(t=1),SWAM.Audio.Flag)if(SWAM.Audio.Flag[a]==e){n=a+"_"+t;break}null!=n&&SWAM.Audio.play(n)}},SWAM.Audio.play=function(t){if(!config.settings.sound)return;let n=e.play(t);setTimeout(function(){e.stop(n)},e._sprite[t][1])}}};function getFilePath(e){return"https://molesmalo.github.io/StarWarsMod4AirMash/assets/"+e+"?"+SWAM_version}$(function(){(function(){$("body").append($("<div id='LoadingMainScreen' style='position: fixed; top:0px; left:0px; width: 100%; height: 100%; background-color: black; z-index: 1000; '><div id='LoadingText' style='position: absolute; top: calc(50% - 15px); width: 100%; font-size: 30px; color: #555555; text-align: center;  font-family: \"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif; '>Loading...</div></div>")).css("overflow","hidden")})()});function showRequestlyWarningAgain(){localStorage.removeItem("requestlyWarning"),window.location="/"}function showRequestlyWarning(){let e=JSON.parse(localStorage.getItem("requestlyWarning"));if(e&&e.version!=SWAM_version&&(e={},localStorage.removeItem("requestlyWarning")),e=$.extend({version:SWAM_version,accepted:!1},e),e.accepted)return;let t=$(getTemplate("#RequestlyWarning"));$("#btnRequestlyAccept",t).click(function(){e.accepted=!0,localStorage.setItem("requestlyWarning",JSON.stringify(e)),t.remove()}),$("body").append(t).css("overflow","hidden")}SWAM.hideLoadingScreen=function(){let e=config.overdrawOptimize;config.overdrawOptimize=!1,setTimeout(()=>{$("#LoadingMainScreen").fadeOut(1e3)},300),setTimeout(()=>config.overdrawOptimize=e,1e3),delete SWAM.hideLoadingScreen},SWAM.on("gameRunning",()=>{if("starma.sh"==location.hostname.toLowerCase()){if(window.location.hash.toLowerCase().startsWith("#importsettings")){let e=JSON.parse(atob(window.location.hash.replace("#importsettings","")));Tools.setSettings(e),$("#playername").val(e.name),window.location=location.origin}$("#loginbutton").off("click").click(()=>{let e=$(getTemplate("#loginInstructions"));return $("#logon").append(e),e.fadeIn(500),closeWhenClickOutside(e),!1})}}),SWAM.loadFiles(()=>{let e=Date.now();SWAM.trigger("extensionsLoaded"),SWAM.loadTheme(),SWAM.trigger("themeLoaded"),SWAM.one("texturesInjected",function(){SWAM.Theme.loadGameModules(),SWAM.trigger("gameLoaded"),RunGame(),SWAM(),SWAM.hideLoadingScreen(),console.log("loading time: ",Date.now()-e),SWAM.trigger("gameRunning")}),loadGameCode()});