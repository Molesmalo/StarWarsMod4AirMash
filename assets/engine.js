"use strict";!function(Bt,Gt){"object"==typeof module&&"object"==typeof module.exports?module.exports=Bt.document?Gt(Bt,!0):function(Xt){if(!Xt.document)throw new Error("jQuery requires a window with a document");return Gt(Xt)}:Gt(Bt)}("undefined"==typeof window?this:window,function(Bt,Gt){function Xt(wr,Cr){var Pr=(Cr=Cr||kn).createElement("script");Pr.text=wr,Cr.head.appendChild(Pr).parentNode.removeChild(Pr)}function Yt(wr){var Cr=!!wr&&"length"in wr&&wr.length,Pr=Vn.type(wr);return"function"!==Pr&&!Vn.isWindow(wr)&&("array"===Pr||0===Cr||"number"==typeof Cr&&0<Cr&&Cr-1 in wr)}function Ht(wr,Cr){return wr.nodeName&&wr.nodeName.toLowerCase()===Cr.toLowerCase()}function Wt(wr,Cr,Pr){return Vn.isFunction(Cr)?Vn.grep(wr,function(Dr,Mr){return!!Cr.call(Dr,Mr,Dr)!==Pr}):Cr.nodeType?Vn.grep(wr,function(Dr){return Dr===Cr!==Pr}):"string"==typeof Cr?aa.test(Cr)?Vn.filter(Cr,wr,Pr):(Cr=Vn.filter(Cr,wr),Vn.grep(wr,function(Dr){return-1<Gn.call(Cr,Dr)!==Pr&&1===Dr.nodeType})):Vn.grep(wr,function(Dr){return-1<Gn.call(Cr,Dr)!==Pr})}function jt(wr,Cr){for(;(wr=wr[Cr])&&1!==wr.nodeType;);return wr}function zt(wr){return wr}function Vt(wr){throw wr}function qt(wr,Cr,Pr,Dr){var Mr;try{wr&&Vn.isFunction(Mr=wr.promise)?Mr.call(wr).done(Cr).fail(Pr):wr&&Vn.isFunction(Mr=wr.then)?Mr.call(wr,Cr,Pr):Cr.apply(void 0,[wr].slice(Dr))}catch(Rr){Pr.apply(void 0,[Rr])}}function Kt(){kn.removeEventListener("DOMContentLoaded",Kt),Bt.removeEventListener("load",Kt),Vn.ready()}function Qt(){this.expando=Vn.expando+Qt.uid++}function Jt(wr,Cr,Pr){var Dr;if(void 0===Pr&&1===wr.nodeType)if(Dr="data-"+Cr.replace(ma,"-$&").toLowerCase(),"string"==typeof(Pr=wr.getAttribute(Dr))){try{Pr=function(Mr){return"true"===Mr||"false"!==Mr&&("null"===Mr?null:Mr===+Mr+""?+Mr:ga.test(Mr)?JSON.parse(Mr):Mr)}(Pr)}catch(Mr){}fa.set(wr,Cr,Pr)}else Pr=void 0;return Pr}function Zt(wr,Cr,Pr,Dr){var Rr=1,Ir=20,Or=Dr?function(){return Dr.cur()}:function(){return Vn.css(wr,Cr,"")},Lr=Or(),kr=Pr&&Pr[3]||(Vn.cssNumber[Cr]?"":"px"),Nr=(Vn.cssNumber[Cr]||"px"!==kr&&+Lr)&&_a.exec(Vn.css(wr,Cr)),Mr;if(Nr&&Nr[3]!==kr){kr=kr||Nr[3],Pr=Pr||[],Nr=+Lr||1;do Nr/=Rr=Rr||".5",Vn.style(wr,Cr,Nr+kr);while(Rr!=(Rr=Or()/Lr)&&1!=Rr&&--Ir)}return Pr&&(Nr=+Nr||+Lr||0,Mr=Pr[1]?Nr+(Pr[1]+1)*Pr[2]:+Pr[2],Dr&&(Dr.unit=kr,Dr.start=Nr,Dr.end=Mr)),Mr}function $t(wr){var Pr=wr.ownerDocument,Dr=wr.nodeName,Mr=Ta[Dr],Cr;return Mr||(Cr=Pr.body.appendChild(Pr.createElement(Dr)),Mr=Vn.css(Cr,"display"),Cr.parentNode.removeChild(Cr),"none"===Mr&&(Mr="block"),Ta[Dr]=Mr,Mr)}function en(wr,Cr){for(var Mr=[],Rr=0,Ir=wr.length,Pr,Dr;Rr<Ir;Rr++)(Dr=wr[Rr]).style&&(Pr=Dr.style.display,Cr?("none"===Pr&&(Mr[Rr]=ha.get(Dr,"display")||null,Mr[Rr]||(Dr.style.display="")),""===Dr.style.display&&xa(Dr)&&(Mr[Rr]=$t(Dr))):"none"!==Pr&&(Mr[Rr]="none",ha.set(Dr,"display",Pr)));for(Rr=0;Rr<Ir;Rr++)null!=Mr[Rr]&&(wr[Rr].style.display=Mr[Rr]);return wr}function tn(wr,Cr){var Pr;return Pr=void 0===wr.getElementsByTagName?void 0===wr.querySelectorAll?[]:wr.querySelectorAll(Cr||"*"):wr.getElementsByTagName(Cr||"*"),void 0===Cr||Cr&&Ht(wr,Cr)?Vn.merge([wr],Pr):Pr}function nn(wr,Cr){for(var Pr=0,Dr=wr.length;Pr<Dr;Pr++)ha.set(wr[Pr],"globalEval",!Cr||ha.get(Cr[Pr],"globalEval"))}function an(wr,Cr,Pr,Dr,Mr){for(var Fr=Cr.createDocumentFragment(),Br=[],Ur=0,Gr=wr.length,Rr,Ir,Or,Lr,kr,Nr;Ur<Gr;Ur++)if((Rr=wr[Ur])||0===Rr)if("object"===Vn.type(Rr))Vn.merge(Br,Rr.nodeType?[Rr]:Rr);else if(Ca.test(Rr)){for(Ir=Ir||Fr.appendChild(Cr.createElement("div")),Or=(Sa.exec(Rr)||["",""])[1].toLowerCase(),Lr=wa[Or]||wa._default,Ir.innerHTML=Lr[1]+Vn.htmlPrefilter(Rr)+Lr[2],Nr=Lr[0];Nr--;)Ir=Ir.lastChild;Vn.merge(Br,Ir.childNodes),(Ir=Fr.firstChild).textContent=""}else Br.push(Cr.createTextNode(Rr));for(Fr.textContent="",Ur=0;Rr=Br[Ur++];)if(Dr&&-1<Vn.inArray(Rr,Dr))Mr&&Mr.push(Rr);else if(kr=Vn.contains(Rr.ownerDocument,Rr),Ir=tn(Fr.appendChild(Rr),"script"),kr&&nn(Ir),Pr)for(Nr=0;Rr=Ir[Nr++];)Aa.test(Rr.type||"")&&Pr.push(Rr);return Fr}function rn(){return!0}function on(){return!1}function sn(){try{return kn.activeElement}catch(wr){}}function dn(wr,Cr,Pr,Dr,Mr,Rr){var Ir,Or;if("object"==typeof Cr){for(Or in"string"!=typeof Pr&&(Dr=Dr||Pr,Pr=void 0),Cr)dn(wr,Or,Pr,Dr,Cr[Or],Rr);return wr}if(null==Dr&&null==Mr?(Mr=Pr,Dr=Pr=void 0):null==Mr&&("string"==typeof Pr?(Mr=Dr,Dr=void 0):(Mr=Dr,Dr=Pr,Pr=void 0)),!1===Mr)Mr=on;else if(!Mr)return wr;return 1===Rr&&(Ir=Mr,(Mr=function(Lr){return Vn().off(Lr),Ir.apply(this,arguments)}).guid=Ir.guid||(Ir.guid=Vn.guid++)),wr.each(function(){Vn.event.add(this,Cr,Mr,Dr,Pr)})}function ln(wr,Cr){return Ht(wr,"table")&&Ht(11===Cr.nodeType?Cr.firstChild:Cr,"tr")?Vn(">tbody",wr)[0]||wr:wr}function un(wr){return wr.type=(null!==wr.getAttribute("type"))+"/"+wr.type,wr}function pn(wr){var Cr=ka.exec(wr.type);return Cr?wr.type=Cr[1]:wr.removeAttribute("type"),wr}function cn(wr,Cr){var Pr,Dr,Mr,Rr,Ir,Or,Lr,kr;if(1===Cr.nodeType){if(ha.hasData(wr)&&(Rr=ha.access(wr),Ir=ha.set(Cr,Rr),kr=Rr.events))for(Mr in delete Ir.handle,Ir.events={},kr)for(Pr=0,Dr=kr[Mr].length;Pr<Dr;Pr++)Vn.event.add(Cr,Mr,kr[Mr][Pr]);fa.hasData(wr)&&(Or=fa.access(wr),Lr=Vn.extend({},Or),fa.set(Cr,Lr))}}function hn(wr,Cr){var Pr=Cr.nodeName.toLowerCase();"input"===Pr&&Ea.test(wr.type)?Cr.checked=wr.checked:"input"!==Pr&&"textarea"!==Pr||(Cr.defaultValue=wr.defaultValue)}function fn(wr,Cr,Pr,Dr){Cr=Bn.apply([],Cr);var Nr=0,Fr=wr.length,Ur=Cr[0],Gr=Vn.isFunction(Ur),Mr,Rr,Ir,Or,Lr,kr;if(Gr||1<Fr&&"string"==typeof Ur&&!zn.checkClone&&La.test(Ur))return wr.each(function(Xr){var Yr=wr.eq(Xr);Gr&&(Cr[0]=Ur.call(this,Xr,Yr.html())),fn(Yr,Cr,Pr,Dr)});if(Fr&&(Mr=an(Cr,wr[0].ownerDocument,!1,wr,Dr),Rr=Mr.firstChild,1===Mr.childNodes.length&&(Mr=Rr),Rr||Dr)){for(Or=(Ir=Vn.map(tn(Mr,"script"),un)).length;Nr<Fr;Nr++)Lr=Mr,Nr!=Fr-1&&(Lr=Vn.clone(Lr,!0,!0),Or&&Vn.merge(Ir,tn(Lr,"script"))),Pr.call(wr[Nr],Lr,Nr);if(Or)for(kr=Ir[Ir.length-1].ownerDocument,Vn.map(Ir,pn),Nr=0;Nr<Or;Nr++)Lr=Ir[Nr],Aa.test(Lr.type||"")&&!ha.access(Lr,"globalEval")&&Vn.contains(kr,Lr)&&(Lr.src?Vn._evalUrl&&Vn._evalUrl(Lr.src):Xt(Lr.textContent.replace(Na,""),kr))}return wr}function gn(wr,Cr,Pr){for(var Mr=Cr?Vn.filter(Cr,wr):wr,Rr=0,Dr;null!=(Dr=Mr[Rr]);Rr++)Pr||1!==Dr.nodeType||Vn.cleanData(tn(Dr)),Dr.parentNode&&(Pr&&Vn.contains(Dr.ownerDocument,Dr)&&nn(tn(Dr,"script")),Dr.parentNode.removeChild(Dr));return wr}function mn(wr,Cr,Pr){var Or=wr.style,Dr,Mr,Rr,Ir;return(Pr=Pr||Ua(wr))&&(""!==(Ir=Pr.getPropertyValue(Cr)||Pr[Cr])||Vn.contains(wr.ownerDocument,wr)||(Ir=Vn.style(wr,Cr)),!zn.pixelMarginRight()&&Ba.test(Ir)&&Fa.test(Cr)&&(Dr=Or.width,Mr=Or.minWidth,Rr=Or.maxWidth,Or.minWidth=Or.maxWidth=Or.width=Ir,Ir=Pr.width,Or.width=Dr,Or.minWidth=Mr,Or.maxWidth=Rr)),void 0===Ir?Ir:Ir+""}function yn(wr,Cr){return{get:function(){return wr()?void delete this.get:(this.get=Cr).apply(this,arguments)}}}function _n(wr){var Cr=Vn.cssProps[wr];return Cr||(Cr=Vn.cssProps[wr]=function(Pr){if(Pr in ja)return Pr;for(var Dr=Pr[0].toUpperCase()+Pr.slice(1),Mr=Wa.length;Mr--;)if((Pr=Wa[Mr]+Dr)in ja)return Pr}(wr)||wr),Cr}function bn(wr,Cr,Pr){var Dr=_a.exec(Cr);return Dr?Math.max(0,Dr[2]-(Pr||0))+(Dr[3]||"px"):Cr}function xn(wr,Cr,Pr,Dr,Mr){var Ir=0,Rr;for(Rr=Pr===(Dr?"border":"content")?4:"width"===Cr?1:0;4>Rr;Rr+=2)"margin"===Pr&&(Ir+=Vn.css(wr,Pr+ba[Rr],!0,Mr)),Dr?("content"===Pr&&(Ir-=Vn.css(wr,"padding"+ba[Rr],!0,Mr)),"margin"!==Pr&&(Ir-=Vn.css(wr,"border"+ba[Rr]+"Width",!0,Mr))):(Ir+=Vn.css(wr,"padding"+ba[Rr],!0,Mr),"padding"!==Pr&&(Ir+=Vn.css(wr,"border"+ba[Rr]+"Width",!0,Mr)));return Ir}function vn(wr,Cr,Pr){var Mr=Ua(wr),Rr=mn(wr,Cr,Mr),Ir="border-box"===Vn.css(wr,"boxSizing",!1,Mr),Dr;return Ba.test(Rr)?Rr:(Dr=Ir&&(zn.boxSizingReliable()||Rr===wr.style[Cr]),"auto"===Rr&&(Rr=wr["offset"+Cr[0].toUpperCase()+Cr.slice(1)]),(Rr=parseFloat(Rr)||0)+xn(wr,Cr,Pr||(Ir?"border":"content"),Dr,Mr)+"px")}function Tn(wr,Cr,Pr,Dr,Mr){return new Tn.prototype.init(wr,Cr,Pr,Dr,Mr)}function En(){Va&&(!1===kn.hidden&&Bt.requestAnimationFrame?Bt.requestAnimationFrame(En):Bt.setTimeout(En,Vn.fx.interval),Vn.fx.tick())}function Sn(){return Bt.setTimeout(function(){za=void 0}),za=Vn.now()}function An(wr,Cr){var Dr=0,Mr={height:wr},Pr;for(Cr=Cr?1:0;4>Dr;Dr+=2-Cr)Mr["margin"+(Pr=ba[Dr])]=Mr["padding"+Pr]=wr;return Cr&&(Mr.opacity=Mr.width=wr),Mr}function wn(wr,Cr,Pr){for(var Mr=(Cn.tweeners[Cr]||[]).concat(Cn.tweeners["*"]),Rr=0,Ir=Mr.length,Dr;Rr<Ir;Rr++)if(Dr=Mr[Rr].call(Pr,Cr,wr))return Dr}function Cn(wr,Cr,Pr){var Rr=0,Ir=Cn.prefilters.length,Or=Vn.Deferred().always(function(){delete Lr.elem}),Lr=function(){if(Mr)return!1;for(var Fr=za||Sn(),Br=Math.max(0,kr.startTime+kr.duration-Fr),Ur=1-(Br/kr.duration||0),Gr=0,Xr=kr.tweens.length;Gr<Xr;Gr++)kr.tweens[Gr].run(Ur);return Or.notifyWith(wr,[kr,Ur,Br]),1>Ur&&Xr?Br:(Xr||Or.notifyWith(wr,[kr,1,0]),Or.resolveWith(wr,[kr]),!1)},kr=Or.promise({elem:wr,props:Vn.extend({},Cr),opts:Vn.extend(!0,{specialEasing:{},easing:Vn.easing._default},Pr),originalProperties:Cr,originalOptions:Pr,startTime:za||Sn(),duration:Pr.duration,tweens:[],createTween:function(Fr,Br){var Ur=Vn.Tween(wr,kr.opts,Fr,Br,kr.opts.specialEasing[Fr]||kr.opts.easing);return kr.tweens.push(Ur),Ur},stop:function(Fr){var Br=0,Ur=Fr?kr.tweens.length:0;if(Mr)return this;for(Mr=!0;Br<Ur;Br++)kr.tweens[Br].run(1);return Fr?(Or.notifyWith(wr,[kr,1,0]),Or.resolveWith(wr,[kr,Fr])):Or.rejectWith(wr,[kr,Fr]),this}}),Nr=kr.props,Dr,Mr;for(!function(Fr,Br){var Ur,Gr,Xr,Yr,Hr;for(Ur in Fr)if(Gr=Vn.camelCase(Ur),Xr=Br[Gr],Yr=Fr[Ur],Array.isArray(Yr)&&(Xr=Yr[1],Yr=Fr[Ur]=Yr[0]),Ur!==Gr&&(Fr[Gr]=Yr,delete Fr[Ur]),(Hr=Vn.cssHooks[Gr])&&("expand"in Hr))for(Ur in Yr=Hr.expand(Yr),delete Fr[Gr],Yr)(Ur in Fr)||(Fr[Ur]=Yr[Ur],Br[Ur]=Xr);else Br[Gr]=Xr}(Nr,kr.opts.specialEasing);Rr<Ir;Rr++)if(Dr=Cn.prefilters[Rr].call(kr,wr,Nr,kr.opts))return Vn.isFunction(Dr.stop)&&(Vn._queueHooks(kr.elem,kr.opts.queue).stop=Vn.proxy(Dr.stop,Dr)),Dr;return Vn.map(Nr,wn,kr),Vn.isFunction(kr.opts.start)&&kr.opts.start.call(wr,kr),kr.progress(kr.opts.progress).done(kr.opts.done,kr.opts.complete).fail(kr.opts.fail).always(kr.opts.always),Vn.fx.timer(Vn.extend(Lr,{elem:wr,anim:kr,queue:kr.opts.queue})),kr}function Pn(wr){return(wr.match(da)||[]).join(" ")}function Dn(wr){return wr.getAttribute&&wr.getAttribute("class")||""}function Mn(wr,Cr,Pr,Dr){if(Array.isArray(Cr))Vn.each(Cr,function(Rr,Ir){Pr||ir.test(wr)?Dr(wr,Ir):Mn(wr+"["+("object"==typeof Ir&&null!=Ir?Rr:"")+"]",Ir,Pr,Dr)});else if(Pr||"object"!==Vn.type(Cr))Dr(wr,Cr);else for(var Mr in Cr)Mn(wr+"["+Mr+"]",Cr[Mr],Pr,Dr)}function Rn(wr){return function(Cr,Pr){"string"!=typeof Cr&&(Pr=Cr,Cr="*");var Mr=0,Rr=Cr.toLowerCase().match(da)||[],Dr;if(Vn.isFunction(Pr))for(;Dr=Rr[Mr++];)"+"===Dr[0]?(Dr=Dr.slice(1)||"*",(wr[Dr]=wr[Dr]||[]).unshift(Pr)):(wr[Dr]=wr[Dr]||[]).push(Pr)}}function In(wr,Cr,Pr,Dr){function Mr(Or){var Lr;return Rr[Or]=!0,Vn.each(wr[Or]||[],function(kr,Nr){var Fr=Nr(Cr,Pr,Dr);return"string"!=typeof Fr||Ir||Rr[Fr]?Ir?!(Lr=Fr):void 0:(Cr.dataTypes.unshift(Fr),Mr(Fr),!1)}),Lr}var Rr={},Ir=wr===yr;return Mr(Cr.dataTypes[0])||!Rr["*"]&&Mr("*")}function On(wr,Cr){var Mr=Vn.ajaxSettings.flatOptions||{},Pr,Dr;for(Pr in Cr)void 0!==Cr[Pr]&&((Mr[Pr]?wr:Dr||(Dr={}))[Pr]=Cr[Pr]);return Dr&&Vn.extend(!0,wr,Dr),wr}var Ln=[],kn=Bt.document,Nn=Object.getPrototypeOf,Fn=Ln.slice,Bn=Ln.concat,Un=Ln.push,Gn=Ln.indexOf,Xn={},Yn=Xn.toString,Hn=Xn.hasOwnProperty,Wn=Hn.toString,jn=Wn.call(Object),zn={},Vn=function(wr,Cr){return new Vn.fn.init(wr,Cr)},qn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Kn=/^-ms-/,Qn=/-([a-z])/g,Jn=function(wr,Cr){return Cr.toUpperCase()};Vn.fn=Vn.prototype={jquery:"3.2.1",constructor:Vn,length:0,toArray:function(){return Fn.call(this)},get:function(wr){return null==wr?Fn.call(this):0>wr?this[wr+this.length]:this[wr]},pushStack:function(wr){var Cr=Vn.merge(this.constructor(),wr);return Cr.prevObject=this,Cr},each:function(wr){return Vn.each(this,wr)},map:function(wr){return this.pushStack(Vn.map(this,function(Cr,Pr){return wr.call(Cr,Pr,Cr)}))},slice:function(){return this.pushStack(Fn.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(wr){var Cr=this.length,Pr=+wr+(0>wr?Cr:0);return this.pushStack(0<=Pr&&Pr<Cr?[this[Pr]]:[])},end:function(){return this.prevObject||this.constructor()},push:Un,sort:Ln.sort,splice:Ln.splice},Vn.extend=Vn.fn.extend=function(){var Ir=arguments[0]||{},Or=1,Lr=arguments.length,kr=!1,wr,Cr,Pr,Dr,Mr,Rr;for("boolean"==typeof Ir&&(kr=Ir,Ir=arguments[Or]||{},Or++),"object"==typeof Ir||Vn.isFunction(Ir)||(Ir={}),Or===Lr&&(Ir=this,Or--);Or<Lr;Or++)if(null!=(wr=arguments[Or]))for(Cr in wr)Pr=Ir[Cr],Ir!==(Dr=wr[Cr])&&(kr&&Dr&&(Vn.isPlainObject(Dr)||(Mr=Array.isArray(Dr)))?(Mr?(Mr=!1,Rr=Pr&&Array.isArray(Pr)?Pr:[]):Rr=Pr&&Vn.isPlainObject(Pr)?Pr:{},Ir[Cr]=Vn.extend(kr,Rr,Dr)):void 0!=Dr&&(Ir[Cr]=Dr));return Ir},Vn.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(wr){throw new Error(wr)},noop:function(){},isFunction:function(wr){return"function"===Vn.type(wr)},isWindow:function(wr){return null!=wr&&wr===wr.window},isNumeric:function(wr){var Cr=Vn.type(wr);return("number"===Cr||"string"===Cr)&&!isNaN(wr-parseFloat(wr))},isPlainObject:function(wr){var Cr,Pr;return wr&&"[object Object]"===Yn.call(wr)&&(!(Cr=Nn(wr))||"function"==typeof(Pr=Hn.call(Cr,"constructor")&&Cr.constructor)&&Wn.call(Pr)===jn)},isEmptyObject:function(wr){for(var Cr in wr)return!1;return!0},type:function(wr){return null==wr?wr+"":"object"==typeof wr||"function"==typeof wr?Xn[Yn.call(wr)]||"object":typeof wr},globalEval:function(wr){Xt(wr)},camelCase:function(wr){return wr.replace(Kn,"ms-").replace(Qn,Jn)},each:function(wr,Cr){var Dr=0,Pr;if(Yt(wr))for(Pr=wr.length;Dr<Pr&&!1!==Cr.call(wr[Dr],Dr,wr[Dr]);Dr++);else for(Dr in wr)if(!1===Cr.call(wr[Dr],Dr,wr[Dr]))break;return wr},trim:function(wr){return null==wr?"":(wr+"").replace(qn,"")},makeArray:function(wr,Cr){var Pr=Cr||[];return null!=wr&&(Yt(Object(wr))?Vn.merge(Pr,"string"==typeof wr?[wr]:wr):Un.call(Pr,wr)),Pr},inArray:function(wr,Cr,Pr){return null==Cr?-1:Gn.call(Cr,wr,Pr)},merge:function(wr,Cr){for(var Pr=+Cr.length,Dr=0,Mr=wr.length;Dr<Pr;Dr++)wr[Mr++]=Cr[Dr];return wr.length=Mr,wr},grep:function(wr,Cr,Pr){for(var Dr=[],Mr=0,Rr=wr.length;Mr<Rr;Mr++)!Cr(wr[Mr],Mr)!==!Pr&&Dr.push(wr[Mr]);return Dr},map:function(wr,Cr,Pr){var Rr=0,Ir=[],Dr,Mr;if(Yt(wr))for(Dr=wr.length;Rr<Dr;Rr++)null!=(Mr=Cr(wr[Rr],Rr,Pr))&&Ir.push(Mr);else for(Rr in wr)null!=(Mr=Cr(wr[Rr],Rr,Pr))&&Ir.push(Mr);return Bn.apply([],Ir)},guid:1,proxy:function(wr,Cr){var Pr,Dr,Mr;if("string"==typeof Cr&&(Pr=wr[Cr],Cr=wr,wr=Pr),Vn.isFunction(wr))return Dr=Fn.call(arguments,2),Mr=function(){return wr.apply(Cr||this,Dr.concat(Fn.call(arguments)))},Mr.guid=wr.guid=wr.guid||Vn.guid++,Mr},now:Date.now,support:zn}),"function"==typeof Symbol&&(Vn.fn[Symbol.iterator]=Ln[Symbol.iterator]),Vn.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(wr,Cr){Xn["[object "+Cr+"]"]=Cr.toLowerCase()});var Zn=function(wr){function Cr(Ki,Qi,Ji,Zi){var oo=Qi&&Qi.ownerDocument,so=Qi?Qi.nodeType:9,$i,eo,to,no,ao,ro,io;if(Ji=Ji||[],"string"!=typeof Ki||!Ki||1!==so&&9!==so&&11!==so)return Ji;if(!Zi&&((Qi?Qi.ownerDocument||Qi:pi)!==ai&&ni(Qi),Qi=Qi||ai,ii)){if(11!==so&&(ao=Xi.exec(Ki)))if(!($i=ao[1])){if(ao[2])return Ti.apply(Ji,Qi.getElementsByTagName(Ki)),Ji;if(($i=ao[3])&&zr.getElementsByClassName&&Qi.getElementsByClassName)return Ti.apply(Ji,Qi.getElementsByClassName($i)),Ji}else if(9===so){if(!(to=Qi.getElementById($i)))return Ji;if(to.id===$i)return Ji.push(to),Ji}else if(oo&&(to=oo.getElementById($i))&&li(Qi,to)&&to.id===$i)return Ji.push(to),Ji;if(zr.qsa&&!mi[Ki+" "]&&(!oi||!oi.test(Ki))){if(1!==so)oo=Qi,io=Ki;else if("object"!==Qi.nodeName.toLowerCase()){for((no=Qi.getAttribute("id"))?no=no.replace(ji,zi):Qi.setAttribute("id",no=ui),eo=(ro=Qr(Ki)).length;eo--;)ro[eo]="#"+no+" "+Ur(ro[eo]);io=ro.join(","),oo=Yi.test(Ki)&&Fr(Qi.parentNode)||Qi}if(io)try{return Ti.apply(Ji,oo.querySelectorAll(io)),Ji}catch(lo){}finally{no===ui&&Qi.removeAttribute("id")}}}return Zr(Ki.replace(Ri,"$1"),Qi,Ji,Zi)}function Pr(){function Ki(Ji,Zi){return Qi.push(Ji+" ")>Vr.cacheLength&&delete Ki[Qi.shift()],Ki[Ji+" "]=Zi}var Qi=[];return Ki}function Dr(Ki){return Ki[ui]=!0,Ki}function Mr(Ki){var Qi=ai.createElement("fieldset");try{return!!Ki(Qi)}catch(Ji){return!1}finally{Qi.parentNode&&Qi.parentNode.removeChild(Qi),Qi=null}}function Rr(Ki,Qi){for(var Ji=Ki.split("|"),Zi=Ji.length;Zi--;)Vr.attrHandle[Ji[Zi]]=Qi}function Ir(Ki,Qi){var Ji=Qi&&Ki,Zi=Ji&&1===Ki.nodeType&&1===Qi.nodeType&&Ki.sourceIndex-Qi.sourceIndex;if(Zi)return Zi;if(Ji)for(;Ji=Ji.nextSibling;)if(Ji===Qi)return-1;return Ki?1:-1}function Or(Ki){return function(Qi){return"input"===Qi.nodeName.toLowerCase()&&Qi.type===Ki}}function Lr(Ki){return function(Qi){var Ji=Qi.nodeName.toLowerCase();return("input"===Ji||"button"===Ji)&&Qi.type===Ki}}function kr(Ki){return function(Qi){return"form"in Qi?Qi.parentNode&&!1===Qi.disabled?"label"in Qi?"label"in Qi.parentNode?Qi.parentNode.disabled===Ki:Qi.disabled===Ki:Qi.isDisabled===Ki||Qi.isDisabled!==!Ki&&qi(Qi)===Ki:Qi.disabled===Ki:"label"in Qi&&Qi.disabled===Ki}}function Nr(Ki){return Dr(function(Qi){return Qi=+Qi,Dr(function(Ji,Zi){for(var eo=Ki([],Ji.length,Qi),to=eo.length,$i;to--;)Ji[$i=eo[to]]&&(Ji[$i]=!(Zi[$i]=Ji[$i]))})})}function Fr(Ki){return Ki&&void 0!==Ki.getElementsByTagName&&Ki}function Br(){}function Ur(Ki){for(var Qi=0,Ji=Ki.length,Zi="";Qi<Ji;Qi++)Zi+=Ki[Qi].value;return Zi}function Gr(Ki,Qi,Ji){var Zi=Qi.dir,$i=Qi.next,eo=$i||Zi,to=Ji&&"parentNode"===eo,no=hi++;return Qi.first?function(ao,ro,io){for(;ao=ao[Zi];)if(1===ao.nodeType||to)return Ki(ao,ro,io);return!1}:function(ao,ro,io){var uo=[ci,no],oo,so,lo;if(io){for(;ao=ao[Zi];)if((1===ao.nodeType||to)&&Ki(ao,ro,io))return!0;}else for(;ao=ao[Zi];)if(1===ao.nodeType||to)if(lo=ao[ui]||(ao[ui]={}),so=lo[ao.uniqueID]||(lo[ao.uniqueID]={}),$i&&$i===ao.nodeName.toLowerCase())ao=ao[Zi]||ao;else{if((oo=so[eo])&&oo[0]===ci&&oo[1]===no)return uo[2]=oo[2];if(so[eo]=uo,uo[2]=Ki(ao,ro,io))return!0}return!1}}function Xr(Ki){return 1<Ki.length?function(Qi,Ji,Zi){for(var $i=Ki.length;$i--;)if(!Ki[$i](Qi,Ji,Zi))return!1;return!0}:Ki[0]}function Yr(Ki,Qi,Ji,Zi,$i){for(var to=[],no=0,ao=Ki.length,eo;no<ao;no++)(eo=Ki[no])&&(Ji&&!Ji(eo,Zi,$i)||(to.push(eo),null!=Qi&&Qi.push(no)));return to}function Hr(Ki,Qi,Ji,Zi,$i,eo){return Zi&&!Zi[ui]&&(Zi=Hr(Zi)),$i&&!$i[ui]&&($i=Hr($i,eo)),Dr(function(to,no,ao,ro){var lo=[],uo=[],po=no.length,co=to||function(go,mo,yo){for(var _o=0,bo=mo.length;_o<bo;_o++)Cr(go,mo[_o],yo);return yo}(Qi||"*",ao.nodeType?[ao]:ao,[]),ho=Ki&&(to||!Qi)?Yr(co,lo,Ki,ao,ro):co,fo=Ji?$i||(to?Ki:po||Zi)?[]:no:ho,io,oo,so;if(Ji&&Ji(ho,fo,ao,ro),Zi)for(io=Yr(fo,uo),Zi(io,[],ao,ro),oo=io.length;oo--;)(so=io[oo])&&(fo[uo[oo]]=!(ho[uo[oo]]=so));if(!to)fo=Yr(fo===no?fo.splice(po,fo.length):fo),$i?$i(null,no,fo,ro):Ti.apply(no,fo);else if($i||Ki){if($i){for(io=[],oo=fo.length;oo--;)(so=fo[oo])&&io.push(ho[oo]=so);$i(null,fo=[],io,ro)}for(oo=fo.length;oo--;)(so=fo[oo])&&-1<(io=$i?Si(to,so):lo[oo])&&(to[io]=!(no[io]=so))}})}function Wr(Ki){for(var $i=Ki.length,eo=Vr.relative[Ki[0].type],to=eo||Vr.relative[" "],no=eo?1:0,ao=Gr(function(oo){return oo===Qi},to,!0),ro=Gr(function(oo){return-1<Si(Qi,oo)},to,!0),io=[function(oo,so,lo){var uo=!eo&&(lo||so!==$r)||((Qi=so).nodeType?ao(oo,so,lo):ro(oo,so,lo));return Qi=null,uo}],Qi,Ji,Zi;no<$i;no++)if(Ji=Vr.relative[Ki[no].type])io=[Gr(Xr(io),Ji)];else{if((Ji=Vr.filter[Ki[no].type].apply(null,Ki[no].matches))[ui]){for(Zi=++no;Zi<$i&&!Vr.relative[Ki[Zi].type];Zi++);return Hr(1<no&&Xr(io),1<no&&Ur(Ki.slice(0,no-1).concat({value:" "===Ki[no-2].type?"*":""})).replace(Ri,"$1"),Ji,no<Zi&&Wr(Ki.slice(no,Zi)),Zi<$i&&Wr(Ki=Ki.slice(Zi)),Zi<$i&&Ur(Ki))}io.push(Ji)}return Xr(io)}var ui="sizzle"+1*new Date,pi=wr.document,ci=0,hi=0,fi=Pr(),gi=Pr(),mi=Pr(),yi=function(Ki,Qi){return Ki===Qi&&(ti=!0),0},_i={}.hasOwnProperty,bi=[],xi=bi.pop,vi=bi.push,Ti=bi.push,Ei=bi.slice,Si=function(Ki,Qi){for(var Ji=0,Zi=Ki.length;Ji<Zi;Ji++)if(Ki[Ji]===Qi)return Ji;return-1},Ai="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",wi="[\\x20\\t\\r\\n\\f]",Ci="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",Mi=/[\x20\t\r\n\f]+/g,Ri=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Ii=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Oi=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Li=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,ki=/:((?:\\.|[\w-]|[^-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,Ni=/^(?:\\.|[\w-]|[^-\xa0])+$/,Fi={ID:/^#((?:\\.|[\w-]|[^-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Bi=/^(?:input|select|textarea|button)$/i,Ui=/^h\d$/i,Gi=/^[^{]+\{\s*\[native \w/,Xi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Yi=/[+~]/,Hi=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Wi=function(Ki,Qi,Ji){var Zi="0x"+Qi-65536;return Zi!=Zi||Ji?Qi:0>Zi?String.fromCharCode(Zi+65536):String.fromCharCode(55296|Zi>>10,56320|1023&Zi)},ji=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,zi=function(Ki,Qi){return Qi?"\0"===Ki?"\uFFFD":Ki.slice(0,-1)+"\\"+Ki.charCodeAt(Ki.length-1).toString(16)+" ":"\\"+Ki},Vi=function(){ni()},qi=Gr(function(Ki){return!0===Ki.disabled&&("form"in Ki||"label"in Ki)},{dir:"parentNode",next:"legend"}),jr,zr,Vr,qr,Kr,Qr,Jr,Zr,$r,ei,ti,ni,ai,ri,ii,oi,si,di,li;try{Ti.apply(bi=Ei.call(pi.childNodes),pi.childNodes),bi[pi.childNodes.length].nodeType}catch(Ki){Ti={apply:bi.length?function(Qi,Ji){vi.apply(Qi,Ei.call(Ji))}:function(Qi,Ji){for(var Zi=Qi.length,$i=0;Qi[Zi++]=Ji[$i++];);Qi.length=Zi-1}}}for(jr in zr=Cr.support={},Kr=Cr.isXML=function(Ki){var Qi=Ki&&(Ki.ownerDocument||Ki).documentElement;return!!Qi&&"HTML"!==Qi.nodeName},ni=Cr.setDocument=function(Ki){var Zi=Ki?Ki.ownerDocument||Ki:pi,Qi,Ji;return Zi!==ai&&9===Zi.nodeType&&Zi.documentElement?(ai=Zi,ri=ai.documentElement,ii=!Kr(ai),pi!==ai&&(Ji=ai.defaultView)&&Ji.top!==Ji&&(Ji.addEventListener?Ji.addEventListener("unload",Vi,!1):Ji.attachEvent&&Ji.attachEvent("onunload",Vi)),zr.attributes=Mr(function($i){return $i.className="i",!$i.getAttribute("className")}),zr.getElementsByTagName=Mr(function($i){return $i.appendChild(ai.createComment("")),!$i.getElementsByTagName("*").length}),zr.getElementsByClassName=Gi.test(ai.getElementsByClassName),zr.getById=Mr(function($i){return ri.appendChild($i).id=ui,!ai.getElementsByName||!ai.getElementsByName(ui).length}),zr.getById?(Vr.filter.ID=function($i){var eo=$i.replace(Hi,Wi);return function(to){return to.getAttribute("id")===eo}},Vr.find.ID=function($i,eo){if(void 0!==eo.getElementById&&ii){var to=eo.getElementById($i);return to?[to]:[]}}):(Vr.filter.ID=function($i){var eo=$i.replace(Hi,Wi);return function(to){var no=void 0!==to.getAttributeNode&&to.getAttributeNode("id");return no&&no.value===eo}},Vr.find.ID=function($i,eo){if(void 0!==eo.getElementById&&ii){var ro=eo.getElementById($i),to,no,ao;if(ro){if((to=ro.getAttributeNode("id"))&&to.value===$i)return[ro];for(ao=eo.getElementsByName($i),no=0;ro=ao[no++];)if((to=ro.getAttributeNode("id"))&&to.value===$i)return[ro]}return[]}}),Vr.find.TAG=zr.getElementsByTagName?function($i,eo){return void 0===eo.getElementsByTagName?zr.qsa?eo.querySelectorAll($i):void 0:eo.getElementsByTagName($i)}:function($i,eo){var no=[],ao=0,ro=eo.getElementsByTagName($i),to;if("*"===$i){for(;to=ro[ao++];)1===to.nodeType&&no.push(to);return no}return ro},Vr.find.CLASS=zr.getElementsByClassName&&function($i,eo){if(void 0!==eo.getElementsByClassName&&ii)return eo.getElementsByClassName($i)},si=[],oi=[],(zr.qsa=Gi.test(ai.querySelectorAll))&&(Mr(function($i){ri.appendChild($i).innerHTML="<a id='"+ui+"'></a><select id='"+ui+"-\r\\' msallowcapture=''><option selected=''></option></select>",$i.querySelectorAll("[msallowcapture^='']").length&&oi.push("[*^$]="+wi+"*(?:''|\"\")"),$i.querySelectorAll("[selected]").length||oi.push("\\["+wi+"*(?:value|"+Ai+")"),$i.querySelectorAll("[id~="+ui+"-]").length||oi.push("~="),$i.querySelectorAll(":checked").length||oi.push(":checked"),$i.querySelectorAll("a#"+ui+"+*").length||oi.push(".#.+[+~]")}),Mr(function($i){$i.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var eo=ai.createElement("input");eo.setAttribute("type","hidden"),$i.appendChild(eo).setAttribute("name","D"),$i.querySelectorAll("[name=d]").length&&oi.push("name"+wi+"*[*^$|!~]?="),2!==$i.querySelectorAll(":enabled").length&&oi.push(":enabled",":disabled"),ri.appendChild($i).disabled=!0,2!==$i.querySelectorAll(":disabled").length&&oi.push(":enabled",":disabled"),$i.querySelectorAll("*,:x"),oi.push(",.*:")})),(zr.matchesSelector=Gi.test(di=ri.matches||ri.webkitMatchesSelector||ri.mozMatchesSelector||ri.oMatchesSelector||ri.msMatchesSelector))&&Mr(function($i){zr.disconnectedMatch=di.call($i,"*"),di.call($i,"[s!='']:x"),si.push("!=",":("+Ci+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+("\\["+wi+"*("+Ci+")(?:"+wi+"*([*^$|!~]?=)"+wi+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Ci+"))|)"+wi+"*\\]")+")*)|.*)\\)|)")}),oi=oi.length&&new RegExp(oi.join("|")),si=si.length&&new RegExp(si.join("|")),Qi=Gi.test(ri.compareDocumentPosition),li=Qi||Gi.test(ri.contains)?function($i,eo){var to=9===$i.nodeType?$i.documentElement:$i,no=eo&&eo.parentNode;return $i===no||no&&1===no.nodeType&&(to.contains?to.contains(no):$i.compareDocumentPosition&&16&$i.compareDocumentPosition(no))}:function($i,eo){if(eo)for(;eo=eo.parentNode;)if(eo===$i)return!0;return!1},yi=Qi?function($i,eo){if($i===eo)return ti=!0,0;var to=!$i.compareDocumentPosition-!eo.compareDocumentPosition;return to||(1&(to=($i.ownerDocument||$i)===(eo.ownerDocument||eo)?$i.compareDocumentPosition(eo):1)||!zr.sortDetached&&eo.compareDocumentPosition($i)===to?$i===ai||$i.ownerDocument===pi&&li(pi,$i)?-1:eo===ai||eo.ownerDocument===pi&&li(pi,eo)?1:ei?Si(ei,$i)-Si(ei,eo):0:4&to?-1:1)}:function($i,eo){if($i===eo)return ti=!0,0;var no=0,ao=$i.parentNode,ro=eo.parentNode,io=[$i],oo=[eo],to;if(!ao||!ro)return $i===ai?-1:eo===ai?1:ao?-1:ro?1:ei?Si(ei,$i)-Si(ei,eo):0;if(ao===ro)return Ir($i,eo);for(to=$i;to=to.parentNode;)io.unshift(to);for(to=eo;to=to.parentNode;)oo.unshift(to);for(;io[no]===oo[no];)no++;return no?Ir(io[no],oo[no]):io[no]===pi?-1:oo[no]===pi?1:0},ai):ai},Cr.matches=function(Ki,Qi){return Cr(Ki,null,null,Qi)},Cr.matchesSelector=function(Ki,Qi){if((Ki.ownerDocument||Ki)!==ai&&ni(Ki),Qi=Qi.replace(Li,"='$1']"),zr.matchesSelector&&ii&&!mi[Qi+" "]&&(!si||!si.test(Qi))&&(!oi||!oi.test(Qi)))try{var Ji=di.call(Ki,Qi);if(Ji||zr.disconnectedMatch||Ki.document&&11!==Ki.document.nodeType)return Ji}catch(Zi){}return 0<Cr(Qi,ai,null,[Ki]).length},Cr.contains=function(Ki,Qi){return(Ki.ownerDocument||Ki)!==ai&&ni(Ki),li(Ki,Qi)},Cr.attr=function(Ki,Qi){(Ki.ownerDocument||Ki)!==ai&&ni(Ki);var Ji=Vr.attrHandle[Qi.toLowerCase()],Zi=Ji&&_i.call(Vr.attrHandle,Qi.toLowerCase())?Ji(Ki,Qi,!ii):void 0;return void 0===Zi?zr.attributes||!ii?Ki.getAttribute(Qi):(Zi=Ki.getAttributeNode(Qi))&&Zi.specified?Zi.value:null:Zi},Cr.escape=function(Ki){return(Ki+"").replace(ji,zi)},Cr.error=function(Ki){throw new Error("Syntax error, unrecognized expression: "+Ki)},Cr.uniqueSort=function(Ki){var Ji=[],Zi=0,$i=0,Qi;if(ti=!zr.detectDuplicates,ei=!zr.sortStable&&Ki.slice(0),Ki.sort(yi),ti){for(;Qi=Ki[$i++];)Qi===Ki[$i]&&(Zi=Ji.push($i));for(;Zi--;)Ki.splice(Ji[Zi],1)}return ei=null,Ki},qr=Cr.getText=function(Ki){var Ji="",Zi=0,$i=Ki.nodeType,Qi;if(!$i)for(;Qi=Ki[Zi++];)Ji+=qr(Qi);else if(1===$i||9===$i||11===$i){if("string"==typeof Ki.textContent)return Ki.textContent;for(Ki=Ki.firstChild;Ki;Ki=Ki.nextSibling)Ji+=qr(Ki)}else if(3===$i||4===$i)return Ki.nodeValue;return Ji},(Vr=Cr.selectors={cacheLength:50,createPseudo:Dr,match:Fi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ki){return Ki[1]=Ki[1].replace(Hi,Wi),Ki[3]=(Ki[3]||Ki[4]||Ki[5]||"").replace(Hi,Wi),"~="===Ki[2]&&(Ki[3]=" "+Ki[3]+" "),Ki.slice(0,4)},CHILD:function(Ki){return Ki[1]=Ki[1].toLowerCase(),"nth"===Ki[1].slice(0,3)?(Ki[3]||Cr.error(Ki[0]),Ki[4]=+(Ki[4]?Ki[5]+(Ki[6]||1):2*("even"===Ki[3]||"odd"===Ki[3])),Ki[5]=+(Ki[7]+Ki[8]||"odd"===Ki[3])):Ki[3]&&Cr.error(Ki[0]),Ki},PSEUDO:function(Ki){var Ji=!Ki[6]&&Ki[2],Qi;return Fi.CHILD.test(Ki[0])?null:(Ki[3]?Ki[2]=Ki[4]||Ki[5]||"":Ji&&ki.test(Ji)&&(Qi=Qr(Ji,!0))&&(Qi=Ji.indexOf(")",Ji.length-Qi)-Ji.length)&&(Ki[0]=Ki[0].slice(0,Qi),Ki[2]=Ji.slice(0,Qi)),Ki.slice(0,3))}},filter:{TAG:function(Ki){var Qi=Ki.replace(Hi,Wi).toLowerCase();return"*"===Ki?function(){return!0}:function(Ji){return Ji.nodeName&&Ji.nodeName.toLowerCase()===Qi}},CLASS:function(Ki){var Qi=fi[Ki+" "];return Qi||(Qi=new RegExp("(^|"+wi+")"+Ki+"("+wi+"|$)"))&&fi(Ki,function(Ji){return Qi.test("string"==typeof Ji.className&&Ji.className||void 0!==Ji.getAttribute&&Ji.getAttribute("class")||"")})},ATTR:function(Ki,Qi,Ji){return function(Zi){var $i=Cr.attr(Zi,Ki);return null==$i?"!="===Qi:!Qi||($i+="","="===Qi?$i===Ji:"!="===Qi?$i!==Ji:"^="===Qi?Ji&&0===$i.indexOf(Ji):"*="===Qi?Ji&&-1<$i.indexOf(Ji):"$="===Qi?Ji&&$i.slice(-Ji.length)===Ji:"~="===Qi?-1<(" "+$i.replace(Mi," ")+" ").indexOf(Ji):"|="==Qi&&($i===Ji||$i.slice(0,Ji.length+1)===Ji+"-"))}},CHILD:function(Ki,Qi,Ji,Zi,$i){var eo="nth"!==Ki.slice(0,3),to="last"!==Ki.slice(-4),no="of-type"===Qi;return 1===Zi&&0===$i?function(ao){return!!ao.parentNode}:function(ao,ro,io){var ho=eo==to?"previousSibling":"nextSibling",fo=ao.parentNode,go=no&&ao.nodeName.toLowerCase(),mo=!io&&!no,yo=!1,oo,so,lo,uo,po,co;if(fo){if(eo){for(;ho;){for(uo=ao;uo=uo[ho];)if(no?uo.nodeName.toLowerCase()===go:1===uo.nodeType)return!1;co=ho="only"===Ki&&!co&&"nextSibling"}return!0}if(co=[to?fo.firstChild:fo.lastChild],to&&mo){for(yo=(po=(oo=(so=(lo=(uo=fo)[ui]||(uo[ui]={}))[uo.uniqueID]||(lo[uo.uniqueID]={}))[Ki]||[])[0]===ci&&oo[1])&&oo[2],uo=po&&fo.childNodes[po];uo=++po&&uo&&uo[ho]||(yo=po=0)||co.pop();)if(1===uo.nodeType&&++yo&&uo===ao){so[Ki]=[ci,po,yo];break}}else if(mo&&(yo=po=(oo=(so=(lo=(uo=ao)[ui]||(uo[ui]={}))[uo.uniqueID]||(lo[uo.uniqueID]={}))[Ki]||[])[0]===ci&&oo[1]),!1===yo)for(;(uo=++po&&uo&&uo[ho]||(yo=po=0)||co.pop())&&((no?uo.nodeName.toLowerCase()!==go:1!==uo.nodeType)||!++yo||(mo&&((so=(lo=uo[ui]||(uo[ui]={}))[uo.uniqueID]||(lo[uo.uniqueID]={}))[Ki]=[ci,yo]),uo!==ao)););return(yo-=$i)==Zi||0==yo%Zi&&0<=yo/Zi}}},PSEUDO:function(Ki,Qi){var Zi=Vr.pseudos[Ki]||Vr.setFilters[Ki.toLowerCase()]||Cr.error("unsupported pseudo: "+Ki),Ji;return Zi[ui]?Zi(Qi):1<Zi.length?(Ji=[Ki,Ki,"",Qi],Vr.setFilters.hasOwnProperty(Ki.toLowerCase())?Dr(function($i,eo){for(var no=Zi($i,Qi),ao=no.length,to;ao--;)$i[to=Si($i,no[ao])]=!(eo[to]=no[ao])}):function($i){return Zi($i,0,Ji)}):Zi}},pseudos:{not:Dr(function(Ki){var Qi=[],Ji=[],Zi=Jr(Ki.replace(Ri,"$1"));return Zi[ui]?Dr(function($i,eo,to,no){for(var ro=Zi($i,null,no,[]),io=$i.length,ao;io--;)(ao=ro[io])&&($i[io]=!(eo[io]=ao))}):function($i,eo,to){return Qi[0]=$i,Zi(Qi,null,to,Ji),Qi[0]=null,!Ji.pop()}}),has:Dr(function(Ki){return function(Qi){return 0<Cr(Ki,Qi).length}}),contains:Dr(function(Ki){return Ki=Ki.replace(Hi,Wi),function(Qi){return-1<(Qi.textContent||Qi.innerText||qr(Qi)).indexOf(Ki)}}),lang:Dr(function(Ki){return Ni.test(Ki||"")||Cr.error("unsupported lang: "+Ki),Ki=Ki.replace(Hi,Wi).toLowerCase(),function(Qi){var Ji;do if(Ji=ii?Qi.lang:Qi.getAttribute("xml:lang")||Qi.getAttribute("lang"))return(Ji=Ji.toLowerCase())===Ki||0===Ji.indexOf(Ki+"-");while((Qi=Qi.parentNode)&&1===Qi.nodeType);return!1}}),target:function(Ki){var Qi=wr.location&&wr.location.hash;return Qi&&Qi.slice(1)===Ki.id},root:function(Ki){return Ki===ri},focus:function(Ki){return Ki===ai.activeElement&&(!ai.hasFocus||ai.hasFocus())&&!!(Ki.type||Ki.href||~Ki.tabIndex)},enabled:kr(!1),disabled:kr(!0),checked:function(Ki){var Qi=Ki.nodeName.toLowerCase();return"input"===Qi&&!!Ki.checked||"option"===Qi&&!!Ki.selected},selected:function(Ki){return Ki.parentNode&&Ki.parentNode.selectedIndex,!0===Ki.selected},empty:function(Ki){for(Ki=Ki.firstChild;Ki;Ki=Ki.nextSibling)if(6>Ki.nodeType)return!1;return!0},parent:function(Ki){return!Vr.pseudos.empty(Ki)},header:function(Ki){return Ui.test(Ki.nodeName)},input:function(Ki){return Bi.test(Ki.nodeName)},button:function(Ki){var Qi=Ki.nodeName.toLowerCase();return"input"===Qi&&"button"===Ki.type||"button"===Qi},text:function(Ki){var Qi;return"input"===Ki.nodeName.toLowerCase()&&"text"===Ki.type&&(null==(Qi=Ki.getAttribute("type"))||"text"===Qi.toLowerCase())},first:Nr(function(){return[0]}),last:Nr(function(Ki,Qi){return[Qi-1]}),eq:Nr(function(Ki,Qi,Ji){return[0>Ji?Ji+Qi:Ji]}),even:Nr(function(Ki,Qi){for(var Ji=0;Ji<Qi;Ji+=2)Ki.push(Ji);return Ki}),odd:Nr(function(Ki,Qi){for(var Ji=1;Ji<Qi;Ji+=2)Ki.push(Ji);return Ki}),lt:Nr(function(Ki,Qi,Ji){for(var Zi=0>Ji?Ji+Qi:Ji;0<=--Zi;)Ki.push(Zi);return Ki}),gt:Nr(function(Ki,Qi,Ji){for(var Zi=0>Ji?Ji+Qi:Ji;++Zi<Qi;)Ki.push(Zi);return Ki})}}).pseudos.nth=Vr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Vr.pseudos[jr]=Or(jr);for(jr in{submit:!0,reset:!0})Vr.pseudos[jr]=Lr(jr);return Br.prototype=Vr.filters=Vr.pseudos,Vr.setFilters=new Br,Qr=Cr.tokenize=function(Ki,Qi){var ro=gi[Ki+" "],Ji,Zi,$i,eo,to,no,ao;if(ro)return Qi?0:ro.slice(0);for(to=Ki,no=[],ao=Vr.preFilter;to;){for(eo in Ji&&!(Zi=Ii.exec(to))||(Zi&&(to=to.slice(Zi[0].length)||to),no.push($i=[])),Ji=!1,(Zi=Oi.exec(to))&&(Ji=Zi.shift(),$i.push({value:Ji,type:Zi[0].replace(Ri," ")}),to=to.slice(Ji.length)),Vr.filter)(Zi=Fi[eo].exec(to))&&(!ao[eo]||(Zi=ao[eo](Zi)))&&(Ji=Zi.shift(),$i.push({value:Ji,type:eo,matches:Zi}),to=to.slice(Ji.length));if(!Ji)break}return Qi?to.length:to?Cr.error(Ki):gi(Ki,no).slice(0)},Jr=Cr.compile=function(Ki,Qi){var Zi=[],$i=[],eo=mi[Ki+" "],Ji;if(!eo){for(Qi||(Qi=Qr(Ki)),Ji=Qi.length;Ji--;)(eo=Wr(Qi[Ji]))[ui]?Zi.push(eo):$i.push(eo);(eo=mi(Ki,function(to,no){var ao=0<no.length,ro=0<to.length,io=function(oo,so,lo,uo,po){var go=0,mo="0",yo=oo&&[],_o=[],bo=$r,xo=oo||ro&&Vr.find.TAG("*",po),vo=ci+=null==bo?1:Math.random()||.1,To=xo.length,co,ho,fo;for(po&&($r=so===ai||so||po);mo!==To&&null!=(co=xo[mo]);mo++){if(ro&&co){for(ho=0,so||co.ownerDocument===ai||(ni(co),lo=!ii);fo=to[ho++];)if(fo(co,so||ai,lo)){uo.push(co);break}po&&(ci=vo)}ao&&((co=!fo&&co)&&go--,oo&&yo.push(co))}if(go+=mo,ao&&mo!==go){for(ho=0;fo=no[ho++];)fo(yo,_o,so,lo);if(oo){if(0<go)for(;mo--;)yo[mo]||_o[mo]||(_o[mo]=xi.call(uo));_o=Yr(_o)}Ti.apply(uo,_o),po&&!oo&&0<_o.length&&1<go+no.length&&Cr.uniqueSort(uo)}return po&&(ci=vo,$r=bo),yo};return ao?Dr(io):io}($i,Zi))).selector=Ki}return eo},Zr=Cr.select=function(Ki,Qi,Ji,Zi){var ro="function"==typeof Ki&&Ki,io=!Zi&&Qr(Ki=ro.selector||Ki),$i,eo,to,no,ao;if(Ji=Ji||[],1===io.length){if(2<(eo=io[0]=io[0].slice(0)).length&&"ID"===(to=eo[0]).type&&9===Qi.nodeType&&ii&&Vr.relative[eo[1].type]){if(!(Qi=(Vr.find.ID(to.matches[0].replace(Hi,Wi),Qi)||[])[0]))return Ji;ro&&(Qi=Qi.parentNode),Ki=Ki.slice(eo.shift().value.length)}for($i=Fi.needsContext.test(Ki)?0:eo.length;$i--&&(to=eo[$i],!Vr.relative[no=to.type]);)if((ao=Vr.find[no])&&(Zi=ao(to.matches[0].replace(Hi,Wi),Yi.test(eo[0].type)&&Fr(Qi.parentNode)||Qi))){if(eo.splice($i,1),!(Ki=Zi.length&&Ur(eo)))return Ti.apply(Ji,Zi),Ji;break}}return(ro||Jr(Ki,io))(Zi,Qi,!ii,Ji,!Qi||Yi.test(Ki)&&Fr(Qi.parentNode)||Qi),Ji},zr.sortStable=ui.split("").sort(yi).join("")===ui,zr.detectDuplicates=!!ti,ni(),zr.sortDetached=Mr(function(Ki){return 1&Ki.compareDocumentPosition(ai.createElement("fieldset"))}),Mr(function(Ki){return Ki.innerHTML="<a href='#'></a>","#"===Ki.firstChild.getAttribute("href")})||Rr("type|href|height|width",function(Ki,Qi,Ji){if(!Ji)return Ki.getAttribute(Qi,"type"===Qi.toLowerCase()?1:2)}),zr.attributes&&Mr(function(Ki){return Ki.innerHTML="<input/>",Ki.firstChild.setAttribute("value",""),""===Ki.firstChild.getAttribute("value")})||Rr("value",function(Ki,Qi,Ji){if(!Ji&&"input"===Ki.nodeName.toLowerCase())return Ki.defaultValue}),Mr(function(Ki){return null==Ki.getAttribute("disabled")})||Rr(Ai,function(Ki,Qi,Ji){var Zi;if(!Ji)return!0===Ki[Qi]?Qi.toLowerCase():(Zi=Ki.getAttributeNode(Qi))&&Zi.specified?Zi.value:null}),Cr}(Bt);Vn.find=Zn,Vn.expr=Zn.selectors,Vn.expr[":"]=Vn.expr.pseudos,Vn.uniqueSort=Vn.unique=Zn.uniqueSort,Vn.text=Zn.getText,Vn.isXMLDoc=Zn.isXML,Vn.contains=Zn.contains,Vn.escapeSelector=Zn.escape;var $n=function(wr,Cr,Pr){for(var Dr=[];(wr=wr[Cr])&&9!==wr.nodeType;)if(1===wr.nodeType){if(void 0!==Pr&&Vn(wr).is(Pr))break;Dr.push(wr)}return Dr},ea=function(wr,Cr){for(var Pr=[];wr;wr=wr.nextSibling)1===wr.nodeType&&wr!==Cr&&Pr.push(wr);return Pr},ta=Vn.expr.match.needsContext,na=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,aa=/^.[^:#\[\.,]*$/;Vn.filter=function(wr,Cr,Pr){var Dr=Cr[0];return Pr&&(wr=":not("+wr+")"),1===Cr.length&&1===Dr.nodeType?Vn.find.matchesSelector(Dr,wr)?[Dr]:[]:Vn.find.matches(wr,Vn.grep(Cr,function(Mr){return 1===Mr.nodeType}))},Vn.fn.extend({find:function(wr){var Dr=this.length,Mr=this,Cr,Pr;if("string"!=typeof wr)return this.pushStack(Vn(wr).filter(function(){for(Cr=0;Cr<Dr;Cr++)if(Vn.contains(Mr[Cr],this))return!0}));for(Pr=this.pushStack([]),Cr=0;Cr<Dr;Cr++)Vn.find(wr,Mr[Cr],Pr);return 1<Dr?Vn.uniqueSort(Pr):Pr},filter:function(wr){return this.pushStack(Wt(this,wr||[],!1))},not:function(wr){return this.pushStack(Wt(this,wr||[],!0))},is:function(wr){return!!Wt(this,"string"==typeof wr&&ta.test(wr)?Vn(wr):wr||[],!1).length}});var ia=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ra;(Vn.fn.init=function(wr,Cr,Pr){var Dr,Mr;if(!wr)return this;if(Pr=Pr||ra,"string"==typeof wr){if(!(Dr="<"===wr[0]&&">"===wr[wr.length-1]&&3<=wr.length?[null,wr,null]:ia.exec(wr))||!Dr[1]&&Cr)return!Cr||Cr.jquery?(Cr||Pr).find(wr):this.constructor(Cr).find(wr);if(Dr[1]){if(Cr=Cr instanceof Vn?Cr[0]:Cr,Vn.merge(this,Vn.parseHTML(Dr[1],Cr&&Cr.nodeType?Cr.ownerDocument||Cr:kn,!0)),na.test(Dr[1])&&Vn.isPlainObject(Cr))for(Dr in Cr)Vn.isFunction(this[Dr])?this[Dr](Cr[Dr]):this.attr(Dr,Cr[Dr]);return this}return(Mr=kn.getElementById(Dr[2]))&&(this[0]=Mr,this.length=1),this}return wr.nodeType?(this[0]=wr,this.length=1,this):Vn.isFunction(wr)?void 0===Pr.ready?wr(Vn):Pr.ready(wr):Vn.makeArray(wr,this)}).prototype=Vn.fn,ra=Vn(kn);var oa=/^(?:parents|prev(?:Until|All))/,sa={children:!0,contents:!0,next:!0,prev:!0};Vn.fn.extend({has:function(wr){var Cr=Vn(wr,this),Pr=Cr.length;return this.filter(function(){for(var Dr=0;Dr<Pr;Dr++)if(Vn.contains(this,Cr[Dr]))return!0})},closest:function(wr,Cr){var Dr=0,Mr=this.length,Rr=[],Ir="string"!=typeof wr&&Vn(wr),Pr;if(!ta.test(wr))for(;Dr<Mr;Dr++)for(Pr=this[Dr];Pr&&Pr!==Cr;Pr=Pr.parentNode)if(11>Pr.nodeType&&(Ir?-1<Ir.index(Pr):1===Pr.nodeType&&Vn.find.matchesSelector(Pr,wr))){Rr.push(Pr);break}return this.pushStack(1<Rr.length?Vn.uniqueSort(Rr):Rr)},index:function(wr){return wr?"string"==typeof wr?Gn.call(Vn(wr),this[0]):Gn.call(this,wr.jquery?wr[0]:wr):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(wr,Cr){return this.pushStack(Vn.uniqueSort(Vn.merge(this.get(),Vn(wr,Cr))))},addBack:function(wr){return this.add(null==wr?this.prevObject:this.prevObject.filter(wr))}}),Vn.each({parent:function(wr){var Cr=wr.parentNode;return Cr&&11!==Cr.nodeType?Cr:null},parents:function(wr){return $n(wr,"parentNode")},parentsUntil:function(wr,Cr,Pr){return $n(wr,"parentNode",Pr)},next:function(wr){return jt(wr,"nextSibling")},prev:function(wr){return jt(wr,"previousSibling")},nextAll:function(wr){return $n(wr,"nextSibling")},prevAll:function(wr){return $n(wr,"previousSibling")},nextUntil:function(wr,Cr,Pr){return $n(wr,"nextSibling",Pr)},prevUntil:function(wr,Cr,Pr){return $n(wr,"previousSibling",Pr)},siblings:function(wr){return ea((wr.parentNode||{}).firstChild,wr)},children:function(wr){return ea(wr.firstChild)},contents:function(wr){return Ht(wr,"iframe")?wr.contentDocument:(Ht(wr,"template")&&(wr=wr.content||wr),Vn.merge([],wr.childNodes))}},function(wr,Cr){Vn.fn[wr]=function(Pr,Dr){var Mr=Vn.map(this,Cr,Pr);return"Until"!==wr.slice(-5)&&(Dr=Pr),Dr&&"string"==typeof Dr&&(Mr=Vn.filter(Dr,Mr)),1<this.length&&(sa[wr]||Vn.uniqueSort(Mr),oa.test(wr)&&Mr.reverse()),this.pushStack(Mr)}});var da=/[^\x20\t\r\n\f]+/g;Vn.Callbacks=function(wr){wr="string"==typeof wr?function(Nr){var Fr={};return Vn.each(Nr.match(da)||[],function(Br,Ur){Fr[Ur]=!0}),Fr}(wr):Vn.extend({},wr);var Rr=[],Ir=[],Or=-1,Lr=function(){for(Mr=Mr||wr.once,Dr=Cr=!0;Ir.length;Or=-1)for(Pr=Ir.shift();++Or<Rr.length;)!1===Rr[Or].apply(Pr[0],Pr[1])&&wr.stopOnFalse&&(Or=Rr.length,Pr=!1);wr.memory||(Pr=!1),Cr=!1,Mr&&(Rr=Pr?[]:"")},kr={add:function(){return Rr&&(Pr&&!Cr&&(Or=Rr.length-1,Ir.push(Pr)),function Nr(Fr){Vn.each(Fr,function(Br,Ur){Vn.isFunction(Ur)?wr.unique&&kr.has(Ur)||Rr.push(Ur):Ur&&Ur.length&&"string"!==Vn.type(Ur)&&Nr(Ur)})}(arguments),Pr&&!Cr&&Lr()),this},remove:function(){return Vn.each(arguments,function(Nr,Fr){for(var Br;-1<(Br=Vn.inArray(Fr,Rr,Br));)Rr.splice(Br,1),Br<=Or&&Or--}),this},has:function(Nr){return Nr?-1<Vn.inArray(Nr,Rr):0<Rr.length},empty:function(){return Rr&&(Rr=[]),this},disable:function(){return Mr=Ir=[],Rr=Pr="",this},disabled:function(){return!Rr},lock:function(){return Mr=Ir=[],Pr||Cr||(Rr=Pr=""),this},locked:function(){return!!Mr},fireWith:function(Nr,Fr){return Mr||(Fr=[Nr,(Fr=Fr||[]).slice?Fr.slice():Fr],Ir.push(Fr),Cr||Lr()),this},fire:function(){return kr.fireWith(this,arguments),this},fired:function(){return!!Dr}},Cr,Pr,Dr,Mr;return kr},Vn.extend({Deferred:function(wr){var Cr=[["notify","progress",Vn.Callbacks("memory"),Vn.Callbacks("memory"),2],["resolve","done",Vn.Callbacks("once memory"),Vn.Callbacks("once memory"),0,"resolved"],["reject","fail",Vn.Callbacks("once memory"),Vn.Callbacks("once memory"),1,"rejected"]],Pr="pending",Dr={state:function(){return Pr},always:function(){return Mr.done(arguments).fail(arguments),this},catch:function(Rr){return Dr.then(null,Rr)},pipe:function(){var Rr=arguments;return Vn.Deferred(function(Ir){Vn.each(Cr,function(Or,Lr){var kr=Vn.isFunction(Rr[Lr[4]])&&Rr[Lr[4]];Mr[Lr[1]](function(){var Nr=kr&&kr.apply(this,arguments);Nr&&Vn.isFunction(Nr.promise)?Nr.promise().progress(Ir.notify).done(Ir.resolve).fail(Ir.reject):Ir[Lr[0]+"With"](this,kr?[Nr]:arguments)})}),Rr=null}).promise()},then:function(Rr,Ir,Or){function Lr(Nr,Fr,Br,Ur){return function(){var Gr=this,Xr=arguments,Yr=function(){var Wr,jr;if(!(Nr<kr)){if((Wr=Br.apply(Gr,Xr))===Fr.promise())throw new TypeError("Thenable self-resolution");jr=Wr&&("object"==typeof Wr||"function"==typeof Wr)&&Wr.then,Vn.isFunction(jr)?Ur?jr.call(Wr,Lr(kr,Fr,zt,Ur),Lr(kr,Fr,Vt,Ur)):(kr++,jr.call(Wr,Lr(kr,Fr,zt,Ur),Lr(kr,Fr,Vt,Ur),Lr(kr,Fr,zt,Fr.notifyWith))):(Br!==zt&&(Gr=void 0,Xr=[Wr]),(Ur||Fr.resolveWith)(Gr,Xr))}},Hr=Ur?Yr:function(){try{Yr()}catch(Wr){Vn.Deferred.exceptionHook&&Vn.Deferred.exceptionHook(Wr,Hr.stackTrace),Nr+1>=kr&&(Br!==Vt&&(Gr=void 0,Xr=[Wr]),Fr.rejectWith(Gr,Xr))}};Nr?Hr():(Vn.Deferred.getStackHook&&(Hr.stackTrace=Vn.Deferred.getStackHook()),Bt.setTimeout(Hr))}}var kr=0;return Vn.Deferred(function(Nr){Cr[0][3].add(Lr(0,Nr,Vn.isFunction(Or)?Or:zt,Nr.notifyWith)),Cr[1][3].add(Lr(0,Nr,Vn.isFunction(Rr)?Rr:zt)),Cr[2][3].add(Lr(0,Nr,Vn.isFunction(Ir)?Ir:Vt))}).promise()},promise:function(Rr){return null==Rr?Dr:Vn.extend(Rr,Dr)}},Mr={};return Vn.each(Cr,function(Rr,Ir){var Or=Ir[2],Lr=Ir[5];Dr[Ir[1]]=Or.add,Lr&&Or.add(function(){Pr=Lr},Cr[3-Rr][2].disable,Cr[0][2].lock),Or.add(Ir[3].fire),Mr[Ir[0]]=function(){return Mr[Ir[0]+"With"](this===Mr?void 0:this,arguments),this},Mr[Ir[0]+"With"]=Or.fireWith}),Dr.promise(Mr),wr&&wr.call(Mr,Mr),Mr},when:function(wr){var Cr=arguments.length,Pr=Cr,Dr=Array(Pr),Mr=Fn.call(arguments),Rr=Vn.Deferred(),Ir=function(Or){return function(Lr){Dr[Or]=this,Mr[Or]=1<arguments.length?Fn.call(arguments):Lr,--Cr||Rr.resolveWith(Dr,Mr)}};if(1>=Cr&&(qt(wr,Rr.done(Ir(Pr)).resolve,Rr.reject,!Cr),"pending"===Rr.state()||Vn.isFunction(Mr[Pr]&&Mr[Pr].then)))return Rr.then();for(;Pr--;)qt(Mr[Pr],Ir(Pr),Rr.reject);return Rr.promise()}});var la=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Vn.Deferred.exceptionHook=function(wr,Cr){Bt.console&&Bt.console.warn&&wr&&la.test(wr.name)&&Bt.console.warn("jQuery.Deferred exception: "+wr.message,wr.stack,Cr)},Vn.readyException=function(wr){Bt.setTimeout(function(){throw wr})};var ua=Vn.Deferred();Vn.fn.ready=function(wr){return ua.then(wr).catch(function(Cr){Vn.readyException(Cr)}),this},Vn.extend({isReady:!1,readyWait:1,ready:function(wr){(!0===wr?--Vn.readyWait:Vn.isReady)||(Vn.isReady=!0,!0!==wr&&0<--Vn.readyWait||ua.resolveWith(kn,[Vn]))}}),Vn.ready.then=ua.then,"complete"!==kn.readyState&&("loading"===kn.readyState||kn.documentElement.doScroll)?(kn.addEventListener("DOMContentLoaded",Kt),Bt.addEventListener("load",Kt)):Bt.setTimeout(Vn.ready);var pa=function(wr,Cr,Pr,Dr,Mr,Rr,Ir){var Or=0,Lr=wr.length,kr=null==Pr;if("object"===Vn.type(Pr))for(Or in Mr=!0,Pr)pa(wr,Cr,Or,Pr[Or],!0,Rr,Ir);else if(void 0!==Dr&&(Mr=!0,Vn.isFunction(Dr)||(Ir=!0),kr&&(Ir?(Cr.call(wr,Dr),Cr=null):(kr=Cr,Cr=function(Nr,Fr,Br){return kr.call(Vn(Nr),Br)})),Cr))for(;Or<Lr;Or++)Cr(wr[Or],Pr,Ir?Dr:Dr.call(wr[Or],Or,Cr(wr[Or],Pr)));return Mr?wr:kr?Cr.call(wr):Lr?Cr(wr[0],Pr):Rr},ca=function(wr){return 1===wr.nodeType||9===wr.nodeType||!+wr.nodeType};Qt.uid=1,Qt.prototype={cache:function(wr){var Cr=wr[this.expando];return Cr||(Cr={},ca(wr)&&(wr.nodeType?wr[this.expando]=Cr:Object.defineProperty(wr,this.expando,{value:Cr,configurable:!0}))),Cr},set:function(wr,Cr,Pr){var Mr=this.cache(wr),Dr;if("string"==typeof Cr)Mr[Vn.camelCase(Cr)]=Pr;else for(Dr in Cr)Mr[Vn.camelCase(Dr)]=Cr[Dr];return Mr},get:function(wr,Cr){return void 0===Cr?this.cache(wr):wr[this.expando]&&wr[this.expando][Vn.camelCase(Cr)]},access:function(wr,Cr,Pr){return void 0===Cr||Cr&&"string"==typeof Cr&&void 0===Pr?this.get(wr,Cr):(this.set(wr,Cr,Pr),void 0===Pr?Cr:Pr)},remove:function(wr,Cr){var Dr=wr[this.expando],Pr;if(void 0!==Dr){if(void 0!==Cr)for(Pr=(Cr=Array.isArray(Cr)?Cr.map(Vn.camelCase):((Cr=Vn.camelCase(Cr))in Dr)?[Cr]:Cr.match(da)||[]).length;Pr--;)delete Dr[Cr[Pr]];(void 0===Cr||Vn.isEmptyObject(Dr))&&(wr.nodeType?wr[this.expando]=void 0:delete wr[this.expando])}},hasData:function(wr){var Cr=wr[this.expando];return void 0!==Cr&&!Vn.isEmptyObject(Cr)}};var ha=new Qt,fa=new Qt,ga=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ma=/[A-Z]/g;Vn.extend({hasData:function(wr){return fa.hasData(wr)||ha.hasData(wr)},data:function(wr,Cr,Pr){return fa.access(wr,Cr,Pr)},removeData:function(wr,Cr){fa.remove(wr,Cr)},_data:function(wr,Cr,Pr){return ha.access(wr,Cr,Pr)},_removeData:function(wr,Cr){ha.remove(wr,Cr)}}),Vn.fn.extend({data:function(wr,Cr){var Rr=this[0],Ir=Rr&&Rr.attributes,Pr,Dr,Mr;if(void 0===wr){if(this.length&&(Mr=fa.get(Rr),1===Rr.nodeType&&!ha.get(Rr,"hasDataAttrs"))){for(Pr=Ir.length;Pr--;)Ir[Pr]&&0===(Dr=Ir[Pr].name).indexOf("data-")&&(Dr=Vn.camelCase(Dr.slice(5)),Jt(Rr,Dr,Mr[Dr]));ha.set(Rr,"hasDataAttrs",!0)}return Mr}return"object"==typeof wr?this.each(function(){fa.set(this,wr)}):pa(this,function(Or){var Lr;if(Rr&&void 0===Or){if(void 0!==(Lr=fa.get(Rr,wr)))return Lr;if(void 0!==(Lr=Jt(Rr,wr)))return Lr}else this.each(function(){fa.set(this,wr,Or)})},null,Cr,1<arguments.length,null,!0)},removeData:function(wr){return this.each(function(){fa.remove(this,wr)})}}),Vn.extend({queue:function(wr,Cr,Pr){var Dr;if(wr)return Cr=(Cr||"fx")+"queue",Dr=ha.get(wr,Cr),Pr&&(!Dr||Array.isArray(Pr)?Dr=ha.access(wr,Cr,Vn.makeArray(Pr)):Dr.push(Pr)),Dr||[]},dequeue:function(wr,Cr){Cr=Cr||"fx";var Pr=Vn.queue(wr,Cr),Dr=Pr.length,Mr=Pr.shift(),Rr=Vn._queueHooks(wr,Cr);"inprogress"===Mr&&(Mr=Pr.shift(),Dr--),Mr&&("fx"===Cr&&Pr.unshift("inprogress"),delete Rr.stop,Mr.call(wr,function(){Vn.dequeue(wr,Cr)},Rr)),!Dr&&Rr&&Rr.empty.fire()},_queueHooks:function(wr,Cr){var Pr=Cr+"queueHooks";return ha.get(wr,Pr)||ha.access(wr,Pr,{empty:Vn.Callbacks("once memory").add(function(){ha.remove(wr,[Cr+"queue",Pr])})})}}),Vn.fn.extend({queue:function(wr,Cr){var Pr=2;return"string"!=typeof wr&&(Cr=wr,wr="fx",Pr--),arguments.length<Pr?Vn.queue(this[0],wr):void 0===Cr?this:this.each(function(){var Dr=Vn.queue(this,wr,Cr);Vn._queueHooks(this,wr),"fx"===wr&&"inprogress"!==Dr[0]&&Vn.dequeue(this,wr)})},dequeue:function(wr){return this.each(function(){Vn.dequeue(this,wr)})},clearQueue:function(wr){return this.queue(wr||"fx",[])},promise:function(wr,Cr){var Dr=1,Mr=Vn.Deferred(),Rr=this,Ir=this.length,Or=function(){--Dr||Mr.resolveWith(Rr,[Rr])},Pr;for("string"!=typeof wr&&(Cr=wr,wr=void 0),wr=wr||"fx";Ir--;)(Pr=ha.get(Rr[Ir],wr+"queueHooks"))&&Pr.empty&&(Dr++,Pr.empty.add(Or));return Or(),Mr.promise(Cr)}});var ya=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_a=new RegExp("^(?:([+-])=|)("+ya+")([a-z%]*)$","i"),ba=["Top","Right","Bottom","Left"],xa=function(wr,Cr){return"none"===(wr=Cr||wr).style.display||""===wr.style.display&&Vn.contains(wr.ownerDocument,wr)&&"none"===Vn.css(wr,"display")},va=function(wr,Cr,Pr,Dr){var Ir={},Mr,Rr;for(Rr in Cr)Ir[Rr]=wr.style[Rr],wr.style[Rr]=Cr[Rr];for(Rr in Mr=Pr.apply(wr,Dr||[]),Cr)wr.style[Rr]=Ir[Rr];return Mr},Ta={};Vn.fn.extend({show:function(){return en(this,!0)},hide:function(){return en(this)},toggle:function(wr){return"boolean"==typeof wr?wr?this.show():this.hide():this.each(function(){xa(this)?Vn(this).show():Vn(this).hide()})}});var Ea=/^(?:checkbox|radio)$/i,Sa=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,Aa=/^$|\/(?:java|ecma)script/i,wa={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};wa.optgroup=wa.option,wa.tbody=wa.tfoot=wa.colgroup=wa.caption=wa.thead,wa.th=wa.td;var Ca=/<|&#?\w+;/;!function(){var wr=kn.createDocumentFragment().appendChild(kn.createElement("div")),Cr=kn.createElement("input");Cr.setAttribute("type","radio"),Cr.setAttribute("checked","checked"),Cr.setAttribute("name","t"),wr.appendChild(Cr),zn.checkClone=wr.cloneNode(!0).cloneNode(!0).lastChild.checked,wr.innerHTML="<textarea>x</textarea>",zn.noCloneChecked=!!wr.cloneNode(!0).lastChild.defaultValue}();var Pa=kn.documentElement,Da=/^key/,Ma=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ra=/^([^.]*)(?:\.(.+)|)/;Vn.event={global:{},add:function(wr,Cr,Pr,Dr,Mr){var Yr=ha.get(wr),Rr,Ir,Or,Lr,kr,Nr,Fr,Br,Ur,Gr,Xr;if(Yr)for(Pr.handler&&(Pr=(Rr=Pr).handler,Mr=Rr.selector),Mr&&Vn.find.matchesSelector(Pa,Mr),Pr.guid||(Pr.guid=Vn.guid++),(Lr=Yr.events)||(Lr=Yr.events={}),(Ir=Yr.handle)||(Ir=Yr.handle=function(Hr){return void 0!==Vn&&Vn.event.triggered!==Hr.type?Vn.event.dispatch.apply(wr,arguments):void 0}),kr=(Cr=(Cr||"").match(da)||[""]).length;kr--;)Ur=Xr=(Or=Ra.exec(Cr[kr])||[])[1],Gr=(Or[2]||"").split(".").sort(),Ur&&(Fr=Vn.event.special[Ur]||{},Ur=(Mr?Fr.delegateType:Fr.bindType)||Ur,Fr=Vn.event.special[Ur]||{},Nr=Vn.extend({type:Ur,origType:Xr,data:Dr,handler:Pr,guid:Pr.guid,selector:Mr,needsContext:Mr&&Vn.expr.match.needsContext.test(Mr),namespace:Gr.join(".")},Rr),(Br=Lr[Ur])||((Br=Lr[Ur]=[]).delegateCount=0,Fr.setup&&!1!==Fr.setup.call(wr,Dr,Gr,Ir)||wr.addEventListener&&wr.addEventListener(Ur,Ir)),Fr.add&&(Fr.add.call(wr,Nr),Nr.handler.guid||(Nr.handler.guid=Pr.guid)),Mr?Br.splice(Br.delegateCount++,0,Nr):Br.push(Nr),Vn.event.global[Ur]=!0)},remove:function(wr,Cr,Pr,Dr,Mr){var Yr=ha.hasData(wr)&&ha.get(wr),Rr,Ir,Or,Lr,kr,Nr,Fr,Br,Ur,Gr,Xr;if(Yr&&(Lr=Yr.events)){for(kr=(Cr=(Cr||"").match(da)||[""]).length;kr--;)if(Or=Ra.exec(Cr[kr])||[],Ur=Xr=Or[1],Gr=(Or[2]||"").split(".").sort(),Ur){for(Fr=Vn.event.special[Ur]||{},Br=Lr[Ur=(Dr?Fr.delegateType:Fr.bindType)||Ur]||[],Or=Or[2]&&new RegExp("(^|\\.)"+Gr.join("\\.(?:.*\\.|)")+"(\\.|$)"),Ir=Rr=Br.length;Rr--;)Nr=Br[Rr],!Mr&&Xr!==Nr.origType||Pr&&Pr.guid!==Nr.guid||Or&&!Or.test(Nr.namespace)||Dr&&Dr!==Nr.selector&&("**"!==Dr||!Nr.selector)||(Br.splice(Rr,1),Nr.selector&&Br.delegateCount--,Fr.remove&&Fr.remove.call(wr,Nr));Ir&&!Br.length&&(Fr.teardown&&!1!==Fr.teardown.call(wr,Gr,Yr.handle)||Vn.removeEvent(wr,Ur,Yr.handle),delete Lr[Ur])}else for(Ur in Lr)Vn.event.remove(wr,Ur+Cr[kr],Pr,Dr,!0);Vn.isEmptyObject(Lr)&&ha.remove(wr,"handle events")}},dispatch:function(wr){var Or=Vn.event.fix(wr),Lr=Array(arguments.length),kr=(ha.get(this,"events")||{})[Or.type]||[],Nr=Vn.event.special[Or.type]||{},Cr,Pr,Dr,Mr,Rr,Ir;for(Lr[0]=Or,Cr=1;Cr<arguments.length;Cr++)Lr[Cr]=arguments[Cr];if(Or.delegateTarget=this,!Nr.preDispatch||!1!==Nr.preDispatch.call(this,Or)){for(Ir=Vn.event.handlers.call(this,Or,kr),Cr=0;(Mr=Ir[Cr++])&&!Or.isPropagationStopped();)for(Or.currentTarget=Mr.elem,Pr=0;(Rr=Mr.handlers[Pr++])&&!Or.isImmediatePropagationStopped();)Or.rnamespace&&!Or.rnamespace.test(Rr.namespace)||(Or.handleObj=Rr,Or.data=Rr.data,void 0!==(Dr=((Vn.event.special[Rr.origType]||{}).handle||Rr.handler).apply(Mr.elem,Lr))&&!1===(Or.result=Dr)&&(Or.preventDefault(),Or.stopPropagation()));return Nr.postDispatch&&Nr.postDispatch.call(this,Or),Or.result}},handlers:function(wr,Cr){var Or=[],Lr=Cr.delegateCount,kr=wr.target,Pr,Dr,Mr,Rr,Ir;if(Lr&&kr.nodeType&&!("click"===wr.type&&1<=wr.button))for(;kr!==this;kr=kr.parentNode||this)if(1===kr.nodeType&&("click"!==wr.type||!0!==kr.disabled)){for(Rr=[],Ir={},Pr=0;Pr<Lr;Pr++)void 0===Ir[Mr=(Dr=Cr[Pr]).selector+" "]&&(Ir[Mr]=Dr.needsContext?-1<Vn(Mr,this).index(kr):Vn.find(Mr,this,null,[kr]).length),Ir[Mr]&&Rr.push(Dr);Rr.length&&Or.push({elem:kr,handlers:Rr})}return kr=this,Lr<Cr.length&&Or.push({elem:kr,handlers:Cr.slice(Lr)}),Or},addProp:function(wr,Cr){Object.defineProperty(Vn.Event.prototype,wr,{enumerable:!0,configurable:!0,get:Vn.isFunction(Cr)?function(){if(this.originalEvent)return Cr(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[wr]},set:function(Pr){Object.defineProperty(this,wr,{enumerable:!0,configurable:!0,writable:!0,value:Pr})}})},fix:function(wr){return wr[Vn.expando]?wr:new Vn.Event(wr)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==sn()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===sn()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&Ht(this,"input"))return this.click(),!1},_default:function(wr){return Ht(wr.target,"a")}},beforeunload:{postDispatch:function(wr){void 0!==wr.result&&wr.originalEvent&&(wr.originalEvent.returnValue=wr.result)}}}},Vn.removeEvent=function(wr,Cr,Pr){wr.removeEventListener&&wr.removeEventListener(Cr,Pr)},Vn.Event=function(wr,Cr){return this instanceof Vn.Event?void(wr&&wr.type?(this.originalEvent=wr,this.type=wr.type,this.isDefaultPrevented=wr.defaultPrevented||void 0===wr.defaultPrevented&&!1===wr.returnValue?rn:on,this.target=wr.target&&3===wr.target.nodeType?wr.target.parentNode:wr.target,this.currentTarget=wr.currentTarget,this.relatedTarget=wr.relatedTarget):this.type=wr,Cr&&Vn.extend(this,Cr),this.timeStamp=wr&&wr.timeStamp||Vn.now(),this[Vn.expando]=!0):new Vn.Event(wr,Cr)},Vn.Event.prototype={constructor:Vn.Event,isDefaultPrevented:on,isPropagationStopped:on,isImmediatePropagationStopped:on,isSimulated:!1,preventDefault:function(){var wr=this.originalEvent;this.isDefaultPrevented=rn,wr&&!this.isSimulated&&wr.preventDefault()},stopPropagation:function(){var wr=this.originalEvent;this.isPropagationStopped=rn,wr&&!this.isSimulated&&wr.stopPropagation()},stopImmediatePropagation:function(){var wr=this.originalEvent;this.isImmediatePropagationStopped=rn,wr&&!this.isSimulated&&wr.stopImmediatePropagation(),this.stopPropagation()}},Vn.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(wr){var Cr=wr.button;return null==wr.which&&Da.test(wr.type)?null==wr.charCode?wr.keyCode:wr.charCode:!wr.which&&void 0!==Cr&&Ma.test(wr.type)?1&Cr?1:2&Cr?3:4&Cr?2:0:wr.which}},Vn.event.addProp),Vn.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(wr,Cr){Vn.event.special[wr]={delegateType:Cr,bindType:Cr,handle:function(Pr){var Mr=Pr.relatedTarget,Rr=Pr.handleObj,Dr;return Mr&&(Mr===this||Vn.contains(this,Mr))||(Pr.type=Rr.origType,Dr=Rr.handler.apply(this,arguments),Pr.type=Cr),Dr}}}),Vn.fn.extend({on:function(wr,Cr,Pr,Dr){return dn(this,wr,Cr,Pr,Dr)},one:function(wr,Cr,Pr,Dr){return dn(this,wr,Cr,Pr,Dr,1)},off:function(wr,Cr,Pr){var Dr,Mr;if(wr&&wr.preventDefault&&wr.handleObj)return Dr=wr.handleObj,Vn(wr.delegateTarget).off(Dr.namespace?Dr.origType+"."+Dr.namespace:Dr.origType,Dr.selector,Dr.handler),this;if("object"==typeof wr){for(Mr in wr)this.off(Mr,Cr,wr[Mr]);return this}return!1!==Cr&&"function"!=typeof Cr||(Pr=Cr,Cr=void 0),!1===Pr&&(Pr=on),this.each(function(){Vn.event.remove(this,wr,Pr,Cr)})}});var Ia=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Oa=/<script|<style|<link/i,La=/checked\s*(?:[^=]|=\s*.checked.)/i,ka=/^true\/(.*)/,Na=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Vn.extend({htmlPrefilter:function(wr){return wr.replace(Ia,"<$1></$2>")},clone:function(wr,Cr,Pr){var Or=wr.cloneNode(!0),Lr=Vn.contains(wr.ownerDocument,wr),Dr,Mr,Rr,Ir;if(!(zn.noCloneChecked||1!==wr.nodeType&&11!==wr.nodeType||Vn.isXMLDoc(wr)))for(Ir=tn(Or),Dr=0,Mr=(Rr=tn(wr)).length;Dr<Mr;Dr++)hn(Rr[Dr],Ir[Dr]);if(Cr)if(Pr)for(Rr=Rr||tn(wr),Ir=Ir||tn(Or),Dr=0,Mr=Rr.length;Dr<Mr;Dr++)cn(Rr[Dr],Ir[Dr]);else cn(wr,Or);return 0<(Ir=tn(Or,"script")).length&&nn(Ir,!Lr&&tn(wr,"script")),Or},cleanData:function(wr){for(var Mr=Vn.event.special,Rr=0,Cr,Pr,Dr;void 0!==(Pr=wr[Rr]);Rr++)if(ca(Pr)){if(Cr=Pr[ha.expando]){if(Cr.events)for(Dr in Cr.events)Mr[Dr]?Vn.event.remove(Pr,Dr):Vn.removeEvent(Pr,Dr,Cr.handle);Pr[ha.expando]=void 0}Pr[fa.expando]&&(Pr[fa.expando]=void 0)}}}),Vn.fn.extend({detach:function(wr){return gn(this,wr,!0)},remove:function(wr){return gn(this,wr)},text:function(wr){return pa(this,function(Cr){return void 0===Cr?Vn.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=Cr)})},null,wr,arguments.length)},append:function(){return fn(this,arguments,function(wr){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&ln(this,wr).appendChild(wr)})},prepend:function(){return fn(this,arguments,function(wr){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var Cr=ln(this,wr);Cr.insertBefore(wr,Cr.firstChild)}})},before:function(){return fn(this,arguments,function(wr){this.parentNode&&this.parentNode.insertBefore(wr,this)})},after:function(){return fn(this,arguments,function(wr){this.parentNode&&this.parentNode.insertBefore(wr,this.nextSibling)})},empty:function(){for(var Cr=0,wr;null!=(wr=this[Cr]);Cr++)1===wr.nodeType&&(Vn.cleanData(tn(wr,!1)),wr.textContent="");return this},clone:function(wr,Cr){return wr=null!=wr&&wr,Cr=null==Cr?wr:Cr,this.map(function(){return Vn.clone(this,wr,Cr)})},html:function(wr){return pa(this,function(Cr){var Pr=this[0]||{},Dr=0,Mr=this.length;if(void 0===Cr&&1===Pr.nodeType)return Pr.innerHTML;if("string"==typeof Cr&&!Oa.test(Cr)&&!wa[(Sa.exec(Cr)||["",""])[1].toLowerCase()]){Cr=Vn.htmlPrefilter(Cr);try{for(;Dr<Mr;Dr++)1===(Pr=this[Dr]||{}).nodeType&&(Vn.cleanData(tn(Pr,!1)),Pr.innerHTML=Cr);Pr=0}catch(Rr){}}Pr&&this.empty().append(Cr)},null,wr,arguments.length)},replaceWith:function(){var wr=[];return fn(this,arguments,function(Cr){var Pr=this.parentNode;0>Vn.inArray(this,wr)&&(Vn.cleanData(tn(this)),Pr&&Pr.replaceChild(Cr,this))},wr)}}),Vn.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(wr,Cr){Vn.fn[wr]=function(Pr){for(var Mr=[],Rr=Vn(Pr),Ir=Rr.length-1,Or=0,Dr;Or<=Ir;Or++)Dr=Or===Ir?this:this.clone(!0),Vn(Rr[Or])[Cr](Dr),Un.apply(Mr,Dr.get());return this.pushStack(Mr)}});var Fa=/^margin/,Ba=new RegExp("^("+ya+")(?!px)[a-z%]+$","i"),Ua=function(wr){var Cr=wr.ownerDocument.defaultView;return Cr&&Cr.opener||(Cr=Bt),Cr.getComputedStyle(wr)};!function(){function wr(){if(Ir){Ir.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",Ir.innerHTML="",Pa.appendChild(Rr);var Or=Bt.getComputedStyle(Ir);Cr="1%"!==Or.top,Mr="2px"===Or.marginLeft,Pr="4px"===Or.width,Ir.style.marginRight="50%",Dr="4px"===Or.marginRight,Pa.removeChild(Rr),Ir=null}}var Rr=kn.createElement("div"),Ir=kn.createElement("div"),Cr,Pr,Dr,Mr;Ir.style&&(Ir.style.backgroundClip="content-box",Ir.cloneNode(!0).style.backgroundClip="",zn.clearCloneStyle="content-box"===Ir.style.backgroundClip,Rr.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",Rr.appendChild(Ir),Vn.extend(zn,{pixelPosition:function(){return wr(),Cr},boxSizingReliable:function(){return wr(),Pr},pixelMarginRight:function(){return wr(),Dr},reliableMarginLeft:function(){return wr(),Mr}}))}();var Ga=/^(none|table(?!-c[ea]).+)/,Xa=/^--/,Ya={position:"absolute",visibility:"hidden",display:"block"},Ha={letterSpacing:"0",fontWeight:"400"},Wa=["Webkit","Moz","ms"],ja=kn.createElement("div").style;Vn.extend({cssHooks:{opacity:{get:function(wr,Cr){if(Cr){var Pr=mn(wr,"opacity");return""===Pr?"1":Pr}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(wr,Cr,Pr,Dr){if(wr&&3!==wr.nodeType&&8!==wr.nodeType&&wr.style){var Or=Vn.camelCase(Cr),Lr=Xa.test(Cr),kr=wr.style,Mr,Rr,Ir;if(Lr||(Cr=_n(Or)),Ir=Vn.cssHooks[Cr]||Vn.cssHooks[Or],void 0===Pr)return Ir&&"get"in Ir&&void 0!==(Mr=Ir.get(wr,!1,Dr))?Mr:kr[Cr];"string"==(Rr=typeof Pr)&&(Mr=_a.exec(Pr))&&Mr[1]&&(Pr=Zt(wr,Cr,Mr),Rr="number"),null!=Pr&&Pr==Pr&&("number"===Rr&&(Pr+=Mr&&Mr[3]||(Vn.cssNumber[Or]?"":"px")),zn.clearCloneStyle||""!==Pr||0!==Cr.indexOf("background")||(kr[Cr]="inherit"),Ir&&"set"in Ir&&void 0===(Pr=Ir.set(wr,Pr,Dr))||(Lr?kr.setProperty(Cr,Pr):kr[Cr]=Pr))}},css:function(wr,Cr,Pr,Dr){var Or=Vn.camelCase(Cr),Mr,Rr,Ir;return Xa.test(Cr)||(Cr=_n(Or)),(Ir=Vn.cssHooks[Cr]||Vn.cssHooks[Or])&&"get"in Ir&&(Mr=Ir.get(wr,!0,Pr)),void 0===Mr&&(Mr=mn(wr,Cr,Dr)),"normal"===Mr&&Cr in Ha&&(Mr=Ha[Cr]),""===Pr||Pr?(Rr=parseFloat(Mr),!0===Pr||isFinite(Rr)?Rr||0:Mr):Mr}}),Vn.each(["height","width"],function(wr,Cr){Vn.cssHooks[Cr]={get:function(Pr,Dr,Mr){if(Dr)return!Ga.test(Vn.css(Pr,"display"))||Pr.getClientRects().length&&Pr.getBoundingClientRect().width?vn(Pr,Cr,Mr):va(Pr,Ya,function(){return vn(Pr,Cr,Mr)})},set:function(Pr,Dr,Mr){var Ir=Mr&&Ua(Pr),Or=Mr&&xn(Pr,Cr,Mr,"border-box"===Vn.css(Pr,"boxSizing",!1,Ir),Ir),Rr;return Or&&(Rr=_a.exec(Dr))&&"px"!==(Rr[3]||"px")&&(Pr.style[Cr]=Dr,Dr=Vn.css(Pr,Cr)),bn(0,Dr,Or)}}}),Vn.cssHooks.marginLeft=yn(zn.reliableMarginLeft,function(wr,Cr){if(Cr)return(parseFloat(mn(wr,"marginLeft"))||wr.getBoundingClientRect().left-va(wr,{marginLeft:0},function(){return wr.getBoundingClientRect().left}))+"px"}),Vn.each({margin:"",padding:"",border:"Width"},function(wr,Cr){Vn.cssHooks[wr+Cr]={expand:function(Pr){for(var Dr=0,Mr={},Rr="string"==typeof Pr?Pr.split(" "):[Pr];4>Dr;Dr++)Mr[wr+ba[Dr]+Cr]=Rr[Dr]||Rr[Dr-2]||Rr[0];return Mr}},Fa.test(wr)||(Vn.cssHooks[wr+Cr].set=bn)}),Vn.fn.extend({css:function(wr,Cr){return pa(this,function(Pr,Dr,Mr){var Or={},Lr=0,Rr,Ir;if(Array.isArray(Dr)){for(Rr=Ua(Pr),Ir=Dr.length;Lr<Ir;Lr++)Or[Dr[Lr]]=Vn.css(Pr,Dr[Lr],!1,Rr);return Or}return void 0===Mr?Vn.css(Pr,Dr):Vn.style(Pr,Dr,Mr)},wr,Cr,1<arguments.length)}}),Vn.Tween=Tn,(Tn.prototype={constructor:Tn,init:function(wr,Cr,Pr,Dr,Mr,Rr){this.elem=wr,this.prop=Pr,this.easing=Mr||Vn.easing._default,this.options=Cr,this.start=this.now=this.cur(),this.end=Dr,this.unit=Rr||(Vn.cssNumber[Pr]?"":"px")},cur:function(){var wr=Tn.propHooks[this.prop];return wr&&wr.get?wr.get(this):Tn.propHooks._default.get(this)},run:function(wr){var Pr=Tn.propHooks[this.prop],Cr;return this.pos=this.options.duration?Cr=Vn.easing[this.easing](wr,this.options.duration*wr,0,1,this.options.duration):Cr=wr,this.now=(this.end-this.start)*Cr+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),Pr&&Pr.set?Pr.set(this):Tn.propHooks._default.set(this),this}}).init.prototype=Tn.prototype,(Tn.propHooks={_default:{get:function(wr){var Cr;return 1!==wr.elem.nodeType||null!=wr.elem[wr.prop]&&null==wr.elem.style[wr.prop]?wr.elem[wr.prop]:(Cr=Vn.css(wr.elem,wr.prop,""))&&"auto"!==Cr?Cr:0},set:function(wr){Vn.fx.step[wr.prop]?Vn.fx.step[wr.prop](wr):1===wr.elem.nodeType&&(null!=wr.elem.style[Vn.cssProps[wr.prop]]||Vn.cssHooks[wr.prop])?Vn.style(wr.elem,wr.prop,wr.now+wr.unit):wr.elem[wr.prop]=wr.now}}}).scrollTop=Tn.propHooks.scrollLeft={set:function(wr){wr.elem.nodeType&&wr.elem.parentNode&&(wr.elem[wr.prop]=wr.now)}},Vn.easing={linear:function(wr){return wr},swing:function(wr){return .5-Math.cos(wr*Math.PI)/2},_default:"swing"},Vn.fx=Tn.prototype.init,Vn.fx.step={};var qa=/^(?:toggle|show|hide)$/,Ka=/queueHooks$/,za,Va;Vn.Animation=Vn.extend(Cn,{tweeners:{"*":[function(wr,Cr){var Pr=this.createTween(wr,Cr);return Zt(Pr.elem,wr,_a.exec(Cr),Pr),Pr}]},tweener:function(wr,Cr){Vn.isFunction(wr)?(Cr=wr,wr=["*"]):wr=wr.match(da);for(var Dr=0,Mr=wr.length,Pr;Dr<Mr;Dr++)Pr=wr[Dr],Cn.tweeners[Pr]=Cn.tweeners[Pr]||[],Cn.tweeners[Pr].unshift(Cr)},prefilters:[function(wr,Cr,Pr){var Br=this,Ur={},Gr=wr.style,Xr=wr.nodeType&&xa(wr),Yr=ha.get(wr,"fxshow"),Dr,Mr,Rr,Ir,Or,Lr,kr,Nr;for(Dr in Pr.queue||(null==(Ir=Vn._queueHooks(wr,"fx")).unqueued&&(Ir.unqueued=0,Or=Ir.empty.fire,Ir.empty.fire=function(){Ir.unqueued||Or()}),Ir.unqueued++,Br.always(function(){Br.always(function(){Ir.unqueued--,Vn.queue(wr,"fx").length||Ir.empty.fire()})})),Cr)if(Mr=Cr[Dr],qa.test(Mr)){if(delete Cr[Dr],Rr=Rr||"toggle"===Mr,Mr===(Xr?"hide":"show")){if("show"!==Mr||!Yr||void 0===Yr[Dr])continue;Xr=!0}Ur[Dr]=Yr&&Yr[Dr]||Vn.style(wr,Dr)}if((Lr=!Vn.isEmptyObject(Cr))||!Vn.isEmptyObject(Ur))for(Dr in("width"in Cr||"height"in Cr)&&1===wr.nodeType&&(Pr.overflow=[Gr.overflow,Gr.overflowX,Gr.overflowY],null==(kr=Yr&&Yr.display)&&(kr=ha.get(wr,"display")),"none"===(Nr=Vn.css(wr,"display"))&&(kr?Nr=kr:(en([wr],!0),kr=wr.style.display||kr,Nr=Vn.css(wr,"display"),en([wr]))),("inline"===Nr||"inline-block"===Nr&&null!=kr)&&"none"===Vn.css(wr,"float")&&(Lr||(Br.done(function(){Gr.display=kr}),null==kr&&(Nr=Gr.display,kr="none"===Nr?"":Nr)),Gr.display="inline-block")),Pr.overflow&&(Gr.overflow="hidden",Br.always(function(){Gr.overflow=Pr.overflow[0],Gr.overflowX=Pr.overflow[1],Gr.overflowY=Pr.overflow[2]})),Lr=!1,Ur)Lr||(Yr?"hidden"in Yr&&(Xr=Yr.hidden):Yr=ha.access(wr,"fxshow",{display:kr}),Rr&&(Yr.hidden=!Xr),Xr&&en([wr],!0),Br.done(function(){for(Dr in Xr||en([wr]),ha.remove(wr,"fxshow"),Ur)Vn.style(wr,Dr,Ur[Dr])})),Lr=wn(Xr?Yr[Dr]:0,Dr,Br),Dr in Yr||(Yr[Dr]=Lr.start,Xr&&(Lr.end=Lr.start,Lr.start=0))}],prefilter:function(wr,Cr){Cr?Cn.prefilters.unshift(wr):Cn.prefilters.push(wr)}}),Vn.speed=function(wr,Cr,Pr){var Dr=wr&&"object"==typeof wr?Vn.extend({},wr):{complete:Pr||!Pr&&Cr||Vn.isFunction(wr)&&wr,duration:wr,easing:Pr&&Cr||Cr&&!Vn.isFunction(Cr)&&Cr};return Vn.fx.off?Dr.duration=0:"number"!=typeof Dr.duration&&(Dr.duration in Vn.fx.speeds?Dr.duration=Vn.fx.speeds[Dr.duration]:Dr.duration=Vn.fx.speeds._default),null!=Dr.queue&&!0!==Dr.queue||(Dr.queue="fx"),Dr.old=Dr.complete,Dr.complete=function(){Vn.isFunction(Dr.old)&&Dr.old.call(this),Dr.queue&&Vn.dequeue(this,Dr.queue)},Dr},Vn.fn.extend({fadeTo:function(wr,Cr,Pr,Dr){return this.filter(xa).css("opacity",0).show().end().animate({opacity:Cr},wr,Pr,Dr)},animate:function(wr,Cr,Pr,Dr){var Mr=Vn.isEmptyObject(wr),Rr=Vn.speed(Cr,Pr,Dr),Ir=function(){var Or=Cn(this,Vn.extend({},wr),Rr);(Mr||ha.get(this,"finish"))&&Or.stop(!0)};return Ir.finish=Ir,Mr||!1===Rr.queue?this.each(Ir):this.queue(Rr.queue,Ir)},stop:function(wr,Cr,Pr){var Dr=function(Mr){var Rr=Mr.stop;delete Mr.stop,Rr(Pr)};return"string"!=typeof wr&&(Pr=Cr,Cr=wr,wr=void 0),Cr&&!1!==wr&&this.queue(wr||"fx",[]),this.each(function(){var Mr=!0,Rr=null!=wr&&wr+"queueHooks",Ir=Vn.timers,Or=ha.get(this);if(Rr)Or[Rr]&&Or[Rr].stop&&Dr(Or[Rr]);else for(Rr in Or)Or[Rr]&&Or[Rr].stop&&Ka.test(Rr)&&Dr(Or[Rr]);for(Rr=Ir.length;Rr--;)Ir[Rr].elem!==this||null!=wr&&Ir[Rr].queue!==wr||(Ir[Rr].anim.stop(Pr),Mr=!1,Ir.splice(Rr,1));!Mr&&Pr||Vn.dequeue(this,wr)})},finish:function(wr){return!1!==wr&&(wr=wr||"fx"),this.each(function(){var Pr=ha.get(this),Dr=Pr[wr+"queue"],Mr=Pr[wr+"queueHooks"],Rr=Vn.timers,Ir=Dr?Dr.length:0,Cr;for(Pr.finish=!0,Vn.queue(this,wr,[]),Mr&&Mr.stop&&Mr.stop.call(this,!0),Cr=Rr.length;Cr--;)Rr[Cr].elem===this&&Rr[Cr].queue===wr&&(Rr[Cr].anim.stop(!0),Rr.splice(Cr,1));for(Cr=0;Cr<Ir;Cr++)Dr[Cr]&&Dr[Cr].finish&&Dr[Cr].finish.call(this);delete Pr.finish})}}),Vn.each(["toggle","show","hide"],function(wr,Cr){var Pr=Vn.fn[Cr];Vn.fn[Cr]=function(Dr,Mr,Rr){return null==Dr||"boolean"==typeof Dr?Pr.apply(this,arguments):this.animate(An(Cr,!0),Dr,Mr,Rr)}}),Vn.each({slideDown:An("show"),slideUp:An("hide"),slideToggle:An("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(wr,Cr){Vn.fn[wr]=function(Pr,Dr,Mr){return this.animate(Cr,Pr,Dr,Mr)}}),Vn.timers=[],Vn.fx.tick=function(){var Cr=0,Pr=Vn.timers,wr;for(za=Vn.now();Cr<Pr.length;Cr++)(wr=Pr[Cr])()||Pr[Cr]!==wr||Pr.splice(Cr--,1);Pr.length||Vn.fx.stop(),za=void 0},Vn.fx.timer=function(wr){Vn.timers.push(wr),Vn.fx.start()},Vn.fx.interval=13,Vn.fx.start=function(){Va||(Va=!0,En())},Vn.fx.stop=function(){Va=null},Vn.fx.speeds={slow:600,fast:200,_default:400},Vn.fn.delay=function(wr,Cr){return wr=Vn.fx?Vn.fx.speeds[wr]||wr:wr,Cr=Cr||"fx",this.queue(Cr,function(Pr,Dr){var Mr=Bt.setTimeout(Pr,wr);Dr.stop=function(){Bt.clearTimeout(Mr)}})},function(){var wr=kn.createElement("input"),Cr=kn.createElement("select").appendChild(kn.createElement("option"));wr.type="checkbox",zn.checkOn=""!==wr.value,zn.optSelected=Cr.selected,(wr=kn.createElement("input")).value="t",wr.type="radio",zn.radioValue="t"===wr.value}();var Ja=Vn.expr.attrHandle,Qa;Vn.fn.extend({attr:function(wr,Cr){return pa(this,Vn.attr,wr,Cr,1<arguments.length)},removeAttr:function(wr){return this.each(function(){Vn.removeAttr(this,wr)})}}),Vn.extend({attr:function(wr,Cr,Pr){var Rr=wr.nodeType,Dr,Mr;if(3!==Rr&&8!==Rr&&2!==Rr)return void 0===wr.getAttribute?Vn.prop(wr,Cr,Pr):(1===Rr&&Vn.isXMLDoc(wr)||(Mr=Vn.attrHooks[Cr.toLowerCase()]||(Vn.expr.match.bool.test(Cr)?Qa:void 0)),void 0===Pr?Mr&&"get"in Mr&&null!==(Dr=Mr.get(wr,Cr))?Dr:null==(Dr=Vn.find.attr(wr,Cr))?void 0:Dr:null===Pr?void Vn.removeAttr(wr,Cr):Mr&&"set"in Mr&&void 0!==(Dr=Mr.set(wr,Pr,Cr))?Dr:(wr.setAttribute(Cr,Pr+""),Pr))},attrHooks:{type:{set:function(wr,Cr){if(!zn.radioValue&&"radio"===Cr&&Ht(wr,"input")){var Pr=wr.value;return wr.setAttribute("type",Cr),Pr&&(wr.value=Pr),Cr}}}},removeAttr:function(wr,Cr){var Dr=0,Mr=Cr&&Cr.match(da),Pr;if(Mr&&1===wr.nodeType)for(;Pr=Mr[Dr++];)wr.removeAttribute(Pr)}}),Qa={set:function(wr,Cr,Pr){return!1===Cr?Vn.removeAttr(wr,Pr):wr.setAttribute(Pr,Pr),Pr}},Vn.each(Vn.expr.match.bool.source.match(/\w+/g),function(wr,Cr){var Pr=Ja[Cr]||Vn.find.attr;Ja[Cr]=function(Dr,Mr,Rr){var Lr=Mr.toLowerCase(),Ir,Or;return Rr||(Or=Ja[Lr],Ja[Lr]=Ir,Ir=null==Pr(Dr,Mr,Rr)?null:Lr,Ja[Lr]=Or),Ir}});var Za=/^(?:input|select|textarea|button)$/i,$a=/^(?:a|area)$/i;Vn.fn.extend({prop:function(wr,Cr){return pa(this,Vn.prop,wr,Cr,1<arguments.length)},removeProp:function(wr){return this.each(function(){delete this[Vn.propFix[wr]||wr]})}}),Vn.extend({prop:function(wr,Cr,Pr){var Rr=wr.nodeType,Dr,Mr;if(3!==Rr&&8!==Rr&&2!==Rr)return 1===Rr&&Vn.isXMLDoc(wr)||(Cr=Vn.propFix[Cr]||Cr,Mr=Vn.propHooks[Cr]),void 0===Pr?Mr&&"get"in Mr&&null!==(Dr=Mr.get(wr,Cr))?Dr:wr[Cr]:Mr&&"set"in Mr&&void 0!==(Dr=Mr.set(wr,Pr,Cr))?Dr:wr[Cr]=Pr},propHooks:{tabIndex:{get:function(wr){var Cr=Vn.find.attr(wr,"tabindex");return Cr?parseInt(Cr,10):Za.test(wr.nodeName)||$a.test(wr.nodeName)&&wr.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),zn.optSelected||(Vn.propHooks.selected={get:function(wr){var Cr=wr.parentNode;return Cr&&Cr.parentNode&&Cr.parentNode.selectedIndex,null},set:function(wr){var Cr=wr.parentNode;Cr&&(Cr.selectedIndex,Cr.parentNode&&Cr.parentNode.selectedIndex)}}),Vn.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Vn.propFix[this.toLowerCase()]=this}),Vn.fn.extend({addClass:function(wr){var Lr=0,Cr,Pr,Dr,Mr,Rr,Ir,Or;if(Vn.isFunction(wr))return this.each(function(kr){Vn(this).addClass(wr.call(this,kr,Dn(this)))});if("string"==typeof wr&&wr)for(Cr=wr.match(da)||[];Pr=this[Lr++];)if(Mr=Dn(Pr),Dr=1===Pr.nodeType&&" "+Pn(Mr)+" "){for(Ir=0;Rr=Cr[Ir++];)0>Dr.indexOf(" "+Rr+" ")&&(Dr+=Rr+" ");Mr!==(Or=Pn(Dr))&&Pr.setAttribute("class",Or)}return this},removeClass:function(wr){var Lr=0,Cr,Pr,Dr,Mr,Rr,Ir,Or;if(Vn.isFunction(wr))return this.each(function(kr){Vn(this).removeClass(wr.call(this,kr,Dn(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof wr&&wr)for(Cr=wr.match(da)||[];Pr=this[Lr++];)if(Mr=Dn(Pr),Dr=1===Pr.nodeType&&" "+Pn(Mr)+" "){for(Ir=0;Rr=Cr[Ir++];)for(;-1<Dr.indexOf(" "+Rr+" ");)Dr=Dr.replace(" "+Rr+" "," ");Mr!==(Or=Pn(Dr))&&Pr.setAttribute("class",Or)}return this},toggleClass:function(wr,Cr){var Pr=typeof wr;return"boolean"==typeof Cr&&"string"==Pr?Cr?this.addClass(wr):this.removeClass(wr):Vn.isFunction(wr)?this.each(function(Dr){Vn(this).toggleClass(wr.call(this,Dr,Dn(this),Cr),Cr)}):this.each(function(){var Dr,Mr,Rr,Ir;if("string"==Pr)for(Mr=0,Rr=Vn(this),Ir=wr.match(da)||[];Dr=Ir[Mr++];)Rr.hasClass(Dr)?Rr.removeClass(Dr):Rr.addClass(Dr);else void 0!==wr&&"boolean"!=Pr||((Dr=Dn(this))&&ha.set(this,"__className__",Dr),this.setAttribute&&this.setAttribute("class",Dr||!1===wr?"":ha.get(this,"__className__")||""))})},hasClass:function(wr){var Dr=0,Cr,Pr;for(Cr=" "+wr+" ";Pr=this[Dr++];)if(1===Pr.nodeType&&-1<(" "+Pn(Dn(Pr))+" ").indexOf(Cr))return!0;return!1}});var er=/\r/g;Vn.fn.extend({val:function(wr){var Mr=this[0],Cr,Pr,Dr;return arguments.length?(Dr=Vn.isFunction(wr),this.each(function(Rr){var Ir;1===this.nodeType&&(null==(Ir=Dr?wr.call(this,Rr,Vn(this).val()):wr)?Ir="":"number"==typeof Ir?Ir+="":Array.isArray(Ir)&&(Ir=Vn.map(Ir,function(Or){return null==Or?"":Or+""})),(Cr=Vn.valHooks[this.type]||Vn.valHooks[this.nodeName.toLowerCase()])&&"set"in Cr&&void 0!==Cr.set(this,Ir,"value")||(this.value=Ir))})):Mr?(Cr=Vn.valHooks[Mr.type]||Vn.valHooks[Mr.nodeName.toLowerCase()])&&"get"in Cr&&void 0!==(Pr=Cr.get(Mr,"value"))?Pr:"string"==typeof(Pr=Mr.value)?Pr.replace(er,""):null==Pr?"":Pr:void 0}}),Vn.extend({valHooks:{option:{get:function(wr){var Cr=Vn.find.attr(wr,"value");return null==Cr?Pn(Vn.text(wr)):Cr}},select:{get:function(wr){var Mr=wr.options,Rr=wr.selectedIndex,Ir="select-one"===wr.type,Or=Ir?null:[],Lr=Ir?Rr+1:Mr.length,Cr,Pr,Dr;for(Dr=0>Rr?Lr:Ir?Rr:0;Dr<Lr;Dr++)if(((Pr=Mr[Dr]).selected||Dr===Rr)&&!Pr.disabled&&(!Pr.parentNode.disabled||!Ht(Pr.parentNode,"optgroup"))){if(Cr=Vn(Pr).val(),Ir)return Cr;Or.push(Cr)}return Or},set:function(wr,Cr){for(var Mr=wr.options,Rr=Vn.makeArray(Cr),Ir=Mr.length,Pr,Dr;Ir--;)((Dr=Mr[Ir]).selected=-1<Vn.inArray(Vn.valHooks.option.get(Dr),Rr))&&(Pr=!0);return Pr||(wr.selectedIndex=-1),Rr}}}}),Vn.each(["radio","checkbox"],function(){Vn.valHooks[this]={set:function(wr,Cr){if(Array.isArray(Cr))return wr.checked=-1<Vn.inArray(Vn(wr).val(),Cr)}},zn.checkOn||(Vn.valHooks[this].get=function(wr){return null===wr.getAttribute("value")?"on":wr.value})});var tr=/^(?:focusinfocus|focusoutblur)$/;Vn.extend(Vn.event,{trigger:function(wr,Cr,Pr,Dr){var Fr=[Pr||kn],Br=Hn.call(wr,"type")?wr.type:wr,Ur=Hn.call(wr,"namespace")?wr.namespace.split("."):[],Mr,Rr,Ir,Or,Lr,kr,Nr;if(Rr=Ir=Pr=Pr||kn,3!==Pr.nodeType&&8!==Pr.nodeType&&!tr.test(Br+Vn.event.triggered)&&(-1<Br.indexOf(".")&&(Br=(Ur=Br.split(".")).shift(),Ur.sort()),Lr=0>Br.indexOf(":")&&"on"+Br,wr=wr[Vn.expando]?wr:new Vn.Event(Br,"object"==typeof wr&&wr),wr.isTrigger=Dr?2:3,wr.namespace=Ur.join("."),wr.rnamespace=wr.namespace?new RegExp("(^|\\.)"+Ur.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,wr.result=void 0,wr.target||(wr.target=Pr),Cr=null==Cr?[wr]:Vn.makeArray(Cr,[wr]),Nr=Vn.event.special[Br]||{},Dr||!Nr.trigger||!1!==Nr.trigger.apply(Pr,Cr))){if(!Dr&&!Nr.noBubble&&!Vn.isWindow(Pr)){for(Or=Nr.delegateType||Br,tr.test(Or+Br)||(Rr=Rr.parentNode);Rr;Rr=Rr.parentNode)Fr.push(Rr),Ir=Rr;Ir===(Pr.ownerDocument||kn)&&Fr.push(Ir.defaultView||Ir.parentWindow||Bt)}for(Mr=0;(Rr=Fr[Mr++])&&!wr.isPropagationStopped();)wr.type=1<Mr?Or:Nr.bindType||Br,(kr=(ha.get(Rr,"events")||{})[wr.type]&&ha.get(Rr,"handle"))&&kr.apply(Rr,Cr),(kr=Lr&&Rr[Lr])&&kr.apply&&ca(Rr)&&(wr.result=kr.apply(Rr,Cr),!1===wr.result&&wr.preventDefault());return wr.type=Br,Dr||wr.isDefaultPrevented()||Nr._default&&!1!==Nr._default.apply(Fr.pop(),Cr)||!ca(Pr)||Lr&&Vn.isFunction(Pr[Br])&&!Vn.isWindow(Pr)&&((Ir=Pr[Lr])&&(Pr[Lr]=null),Vn.event.triggered=Br,Pr[Br](),Vn.event.triggered=void 0,Ir&&(Pr[Lr]=Ir)),wr.result}},simulate:function(wr,Cr,Pr){var Dr=Vn.extend(new Vn.Event,Pr,{type:wr,isSimulated:!0});Vn.event.trigger(Dr,null,Cr)}}),Vn.fn.extend({trigger:function(wr,Cr){return this.each(function(){Vn.event.trigger(wr,Cr,this)})},triggerHandler:function(wr,Cr){var Pr=this[0];if(Pr)return Vn.event.trigger(wr,Cr,Pr,!0)}}),Vn.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(wr,Cr){Vn.fn[Cr]=function(Pr,Dr){return 0<arguments.length?this.on(Cr,null,Pr,Dr):this.trigger(Cr)}}),Vn.fn.extend({hover:function(wr,Cr){return this.mouseenter(wr).mouseleave(Cr||wr)}}),zn.focusin="onfocusin"in Bt,zn.focusin||Vn.each({focus:"focusin",blur:"focusout"},function(wr,Cr){var Pr=function(Dr){Vn.event.simulate(Cr,Dr.target,Vn.event.fix(Dr))};Vn.event.special[Cr]={setup:function(){var Dr=this.ownerDocument||this,Mr=ha.access(Dr,Cr);Mr||Dr.addEventListener(wr,Pr,!0),ha.access(Dr,Cr,(Mr||0)+1)},teardown:function(){var Dr=this.ownerDocument||this,Mr=ha.access(Dr,Cr)-1;Mr?ha.access(Dr,Cr,Mr):(Dr.removeEventListener(wr,Pr,!0),ha.remove(Dr,Cr))}}});var nr=Bt.location,ar=Vn.now(),rr=/\?/;Vn.parseXML=function(wr){var Cr;if(!wr||"string"!=typeof wr)return null;try{Cr=new Bt.DOMParser().parseFromString(wr,"text/xml")}catch(Pr){Cr=void 0}return Cr&&!Cr.getElementsByTagName("parsererror").length||Vn.error("Invalid XML: "+wr),Cr};var ir=/\[\]$/,or=/\r?\n/g,sr=/^(?:submit|button|image|reset|file)$/i,dr=/^(?:input|select|textarea|keygen)/i;Vn.param=function(wr,Cr){var Dr=[],Mr=function(Rr,Ir){var Or=Vn.isFunction(Ir)?Ir():Ir;Dr[Dr.length]=encodeURIComponent(Rr)+"="+encodeURIComponent(null==Or?"":Or)},Pr;if(Array.isArray(wr)||wr.jquery&&!Vn.isPlainObject(wr))Vn.each(wr,function(){Mr(this.name,this.value)});else for(Pr in wr)Mn(Pr,wr[Pr],Cr,Mr);return Dr.join("&")},Vn.fn.extend({serialize:function(){return Vn.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var wr=Vn.prop(this,"elements");return wr?Vn.makeArray(wr):this}).filter(function(){var wr=this.type;return this.name&&!Vn(this).is(":disabled")&&dr.test(this.nodeName)&&!sr.test(wr)&&(this.checked||!Ea.test(wr))}).map(function(wr,Cr){var Pr=Vn(this).val();return null==Pr?null:Array.isArray(Pr)?Vn.map(Pr,function(Dr){return{name:Cr.name,value:Dr.replace(or,"\r\n")}}):{name:Cr.name,value:Pr.replace(or,"\r\n")}}).get()}});var lr=/%20/g,ur=/#.*$/,pr=/([?&])_=[^&]*/,cr=/^(.*?):[ \t]*([^\r\n]*)$/gm,fr=/^(?:GET|HEAD)$/,gr=/^\/\//,mr={},yr={},_r="*/".concat("*"),br=kn.createElement("a");br.href=nr.href,Vn.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:nr.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(nr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_r,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Vn.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(wr,Cr){return Cr?On(On(wr,Vn.ajaxSettings),Cr):On(Vn.ajaxSettings,wr)},ajaxPrefilter:Rn(mr),ajaxTransport:Rn(yr),ajax:function(wr,Cr){function Pr(Kr,Qr,Jr,Zr){var ri=Qr,$r,ei,ti,ni,ai;kr||(kr=!0,Or&&Bt.clearTimeout(Or),Dr=void 0,Rr=Zr||"",qr.readyState=0<Kr?4:0,$r=200<=Kr&&300>Kr||304===Kr,Jr&&(ni=function(ii,oi,si){for(var ci=ii.contents,hi=ii.dataTypes,di,li,ui,pi;"*"===hi[0];)hi.shift(),void 0===di&&(di=ii.mimeType||oi.getResponseHeader("Content-Type"));if(di)for(li in ci)if(ci[li]&&ci[li].test(di)){hi.unshift(li);break}if(hi[0]in si)ui=hi[0];else{for(li in si){if(!hi[0]||ii.converters[li+" "+hi[0]]){ui=li;break}pi||(pi=li)}ui=ui||pi}return ui?(ui!==hi[0]&&hi.unshift(ui),si[ui]):void 0}(Ur,qr,Jr)),ni=function(ii,oi,si,di){var fi={},gi=ii.dataTypes.slice(),li,ui,pi,ci,hi;if(gi[1])for(pi in ii.converters)fi[pi.toLowerCase()]=ii.converters[pi];for(ui=gi.shift();ui;)if(ii.responseFields[ui]&&(si[ii.responseFields[ui]]=oi),!hi&&di&&ii.dataFilter&&(oi=ii.dataFilter(oi,ii.dataType)),hi=ui,ui=gi.shift())if("*"===ui)ui=hi;else if("*"!==hi&&hi!==ui){if(!(pi=fi[hi+" "+ui]||fi["* "+ui]))for(li in fi)if((ci=li.split(" "))[1]===ui&&(pi=fi[hi+" "+ci[0]]||fi["* "+ci[0]])){!0===pi?pi=fi[li]:!0!==fi[li]&&(ui=ci[0],gi.unshift(ci[1]));break}if(!0!==pi)if(pi&&ii.throws)oi=pi(oi);else try{oi=pi(oi)}catch(mi){return{state:"parsererror",error:pi?mi:"No conversion from "+hi+" to "+ui}}}return{state:"success",data:oi}}(Ur,ni,qr,$r),$r?(Ur.ifModified&&((ai=qr.getResponseHeader("Last-Modified"))&&(Vn.lastModified[Mr]=ai),(ai=qr.getResponseHeader("etag"))&&(Vn.etag[Mr]=ai)),204===Kr||"HEAD"===Ur.type?ri="nocontent":304===Kr?ri="notmodified":(ri=ni.state,ei=ni.data,$r=!(ti=ni.error))):(ti=ri,!Kr&&ri||(ri="error",0>Kr&&(Kr=0))),qr.status=Kr,qr.statusText=(Qr||ri)+"",$r?Yr.resolveWith(Gr,[ei,ri,qr]):Yr.rejectWith(Gr,[qr,ri,ti]),qr.statusCode(Wr),Wr=void 0,Nr&&Xr.trigger($r?"ajaxSuccess":"ajaxError",[qr,Ur,$r?ei:ti]),Hr.fireWith(Gr,[qr,ri]),Nr&&(Xr.trigger("ajaxComplete",[qr,Ur]),--Vn.active||Vn.event.trigger("ajaxStop")))}"object"==typeof wr&&(Cr=wr,wr=void 0),Cr=Cr||{};var Ur=Vn.ajaxSetup({},Cr),Gr=Ur.context||Ur,Xr=Ur.context&&(Gr.nodeType||Gr.jquery)?Vn(Gr):Vn.event,Yr=Vn.Deferred(),Hr=Vn.Callbacks("once memory"),Wr=Ur.statusCode||{},jr={},zr={},Vr="canceled",qr={readyState:0,getResponseHeader:function(Kr){var Qr;if(kr){if(!Ir)for(Ir={};Qr=cr.exec(Rr);)Ir[Qr[1].toLowerCase()]=Qr[2];Qr=Ir[Kr.toLowerCase()]}return null==Qr?null:Qr},getAllResponseHeaders:function(){return kr?Rr:null},setRequestHeader:function(Kr,Qr){return null==kr&&(Kr=zr[Kr.toLowerCase()]=zr[Kr.toLowerCase()]||Kr,jr[Kr]=Qr),this},overrideMimeType:function(Kr){return null==kr&&(Ur.mimeType=Kr),this},statusCode:function(Kr){if(Kr)if(kr)qr.always(Kr[qr.status]);else for(var Qr in Kr)Wr[Qr]=[Wr[Qr],Kr[Qr]];return this},abort:function(Kr){var Qr=Kr||Vr;return Dr&&Dr.abort(Qr),Pr(0,Qr),this}},Dr,Mr,Rr,Ir,Or,Lr,kr,Nr,Fr,Br;if(Yr.promise(qr),Ur.url=((wr||Ur.url||nr.href)+"").replace(gr,nr.protocol+"//"),Ur.type=Cr.method||Cr.type||Ur.method||Ur.type,Ur.dataTypes=(Ur.dataType||"*").toLowerCase().match(da)||[""],null==Ur.crossDomain){Lr=kn.createElement("a");try{Lr.href=Ur.url,Lr.href=Lr.href,Ur.crossDomain=br.protocol+"//"+br.host!=Lr.protocol+"//"+Lr.host}catch(Kr){Ur.crossDomain=!0}}if(Ur.data&&Ur.processData&&"string"!=typeof Ur.data&&(Ur.data=Vn.param(Ur.data,Ur.traditional)),In(mr,Ur,Cr,qr),kr)return qr;for(Fr in(Nr=Vn.event&&Ur.global)&&0==Vn.active++&&Vn.event.trigger("ajaxStart"),Ur.type=Ur.type.toUpperCase(),Ur.hasContent=!fr.test(Ur.type),Mr=Ur.url.replace(ur,""),Ur.hasContent?Ur.data&&Ur.processData&&0===(Ur.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Ur.data=Ur.data.replace(lr,"+")):(Br=Ur.url.slice(Mr.length),Ur.data&&(Mr+=(rr.test(Mr)?"&":"?")+Ur.data,delete Ur.data),!1===Ur.cache&&(Mr=Mr.replace(pr,"$1"),Br=(rr.test(Mr)?"&":"?")+"_="+ar++ +Br),Ur.url=Mr+Br),Ur.ifModified&&(Vn.lastModified[Mr]&&qr.setRequestHeader("If-Modified-Since",Vn.lastModified[Mr]),Vn.etag[Mr]&&qr.setRequestHeader("If-None-Match",Vn.etag[Mr])),(Ur.data&&Ur.hasContent&&!1!==Ur.contentType||Cr.contentType)&&qr.setRequestHeader("Content-Type",Ur.contentType),qr.setRequestHeader("Accept",Ur.dataTypes[0]&&Ur.accepts[Ur.dataTypes[0]]?Ur.accepts[Ur.dataTypes[0]]+("*"===Ur.dataTypes[0]?"":", "+_r+"; q=0.01"):Ur.accepts["*"]),Ur.headers)qr.setRequestHeader(Fr,Ur.headers[Fr]);if(Ur.beforeSend&&(!1===Ur.beforeSend.call(Gr,qr,Ur)||kr))return qr.abort();if(Vr="abort",Hr.add(Ur.complete),qr.done(Ur.success),qr.fail(Ur.error),Dr=In(yr,Ur,Cr,qr)){if(qr.readyState=1,Nr&&Xr.trigger("ajaxSend",[qr,Ur]),kr)return qr;Ur.async&&0<Ur.timeout&&(Or=Bt.setTimeout(function(){qr.abort("timeout")},Ur.timeout));try{kr=!1,Dr.send(jr,Pr)}catch(Kr){if(kr)throw Kr;Pr(-1,Kr)}}else Pr(-1,"No Transport");return qr},getJSON:function(wr,Cr,Pr){return Vn.get(wr,Cr,Pr,"json")},getScript:function(wr,Cr){return Vn.get(wr,void 0,Cr,"script")}}),Vn.each(["get","post"],function(wr,Cr){Vn[Cr]=function(Pr,Dr,Mr,Rr){return Vn.isFunction(Dr)&&(Rr=Rr||Mr,Mr=Dr,Dr=void 0),Vn.ajax(Vn.extend({url:Pr,type:Cr,dataType:Rr,data:Dr,success:Mr},Vn.isPlainObject(Pr)&&Pr))}}),Vn._evalUrl=function(wr){return Vn.ajax({url:wr,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},Vn.fn.extend({wrapAll:function(wr){var Cr;return this[0]&&(Vn.isFunction(wr)&&(wr=wr.call(this[0])),Cr=Vn(wr,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&Cr.insertBefore(this[0]),Cr.map(function(){for(var Pr=this;Pr.firstElementChild;)Pr=Pr.firstElementChild;return Pr}).append(this)),this},wrapInner:function(wr){return Vn.isFunction(wr)?this.each(function(Cr){Vn(this).wrapInner(wr.call(this,Cr))}):this.each(function(){var Cr=Vn(this),Pr=Cr.contents();Pr.length?Pr.wrapAll(wr):Cr.append(wr)})},wrap:function(wr){var Cr=Vn.isFunction(wr);return this.each(function(Pr){Vn(this).wrapAll(Cr?wr.call(this,Pr):wr)})},unwrap:function(wr){return this.parent(wr).not("body").each(function(){Vn(this).replaceWith(this.childNodes)}),this}}),Vn.expr.pseudos.hidden=function(wr){return!Vn.expr.pseudos.visible(wr)},Vn.expr.pseudos.visible=function(wr){return!!(wr.offsetWidth||wr.offsetHeight||wr.getClientRects().length)},Vn.ajaxSettings.xhr=function(){try{return new Bt.XMLHttpRequest}catch(wr){}};var xr={0:200,1223:204},vr=Vn.ajaxSettings.xhr();zn.cors=!!vr&&"withCredentials"in vr,zn.ajax=vr=!!vr,Vn.ajaxTransport(function(wr){var Cr,Pr;if(zn.cors||vr&&!wr.crossDomain)return{send:function(Dr,Mr){var Ir=wr.xhr(),Rr;if(Ir.open(wr.type,wr.url,wr.async,wr.username,wr.password),wr.xhrFields)for(Rr in wr.xhrFields)Ir[Rr]=wr.xhrFields[Rr];for(Rr in wr.mimeType&&Ir.overrideMimeType&&Ir.overrideMimeType(wr.mimeType),wr.crossDomain||Dr["X-Requested-With"]||(Dr["X-Requested-With"]="XMLHttpRequest"),Dr)Ir.setRequestHeader(Rr,Dr[Rr]);Cr=function(Or){return function(){Cr&&(Cr=Pr=Ir.onload=Ir.onerror=Ir.onabort=Ir.onreadystatechange=null,"abort"===Or?Ir.abort():"error"===Or?"number"==typeof Ir.status?Mr(Ir.status,Ir.statusText):Mr(0,"error"):Mr(xr[Ir.status]||Ir.status,Ir.statusText,"text"!==(Ir.responseType||"text")||"string"!=typeof Ir.responseText?{binary:Ir.response}:{text:Ir.responseText},Ir.getAllResponseHeaders()))}},Ir.onload=Cr(),Pr=Ir.onerror=Cr("error"),void 0===Ir.onabort?Ir.onreadystatechange=function(){4===Ir.readyState&&Bt.setTimeout(function(){Cr&&Pr()})}:Ir.onabort=Pr,Cr=Cr("abort");try{Ir.send(wr.hasContent&&wr.data||null)}catch(Or){if(Cr)throw Or}},abort:function(){Cr&&Cr()}}}),Vn.ajaxPrefilter(function(wr){wr.crossDomain&&(wr.contents.script=!1)}),Vn.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(wr){return Vn.globalEval(wr),wr}}}),Vn.ajaxPrefilter("script",function(wr){void 0===wr.cache&&(wr.cache=!1),wr.crossDomain&&(wr.type="GET")}),Vn.ajaxTransport("script",function(wr){if(wr.crossDomain){var Cr,Pr;return{send:function(Dr,Mr){Cr=Vn("<script>").prop({charset:wr.scriptCharset,src:wr.url}).on("load error",Pr=function(Rr){Cr.remove(),Pr=null,Rr&&Mr("error"===Rr.type?404:200,Rr.type)}),kn.head.appendChild(Cr[0])},abort:function(){Pr&&Pr()}}}});var Tr=[],Er=/(=)\?(?=&|$)|\?\?/;Vn.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var wr=Tr.pop()||Vn.expando+"_"+ar++;return this[wr]=!0,wr}}),Vn.ajaxPrefilter("json jsonp",function(wr,Cr,Pr){var Ir=!1!==wr.jsonp&&(Er.test(wr.url)?"url":"string"==typeof wr.data&&0===(wr.contentType||"").indexOf("application/x-www-form-urlencoded")&&Er.test(wr.data)&&"data"),Dr,Mr,Rr;if(Ir||"jsonp"===wr.dataTypes[0])return Dr=wr.jsonpCallback=Vn.isFunction(wr.jsonpCallback)?wr.jsonpCallback():wr.jsonpCallback,Ir?wr[Ir]=wr[Ir].replace(Er,"$1"+Dr):!1!==wr.jsonp&&(wr.url+=(rr.test(wr.url)?"&":"?")+wr.jsonp+"="+Dr),wr.converters["script json"]=function(){return Rr||Vn.error(Dr+" was not called"),Rr[0]},wr.dataTypes[0]="json",Mr=Bt[Dr],Bt[Dr]=function(){Rr=arguments},Pr.always(function(){void 0===Mr?Vn(Bt).removeProp(Dr):Bt[Dr]=Mr,wr[Dr]&&(wr.jsonpCallback=Cr.jsonpCallback,Tr.push(Dr)),Rr&&Vn.isFunction(Mr)&&Mr(Rr[0]),Rr=Mr=void 0}),"script"}),zn.createHTMLDocument=function(){var wr=kn.implementation.createHTMLDocument("").body;return wr.innerHTML="<form></form><form></form>",2===wr.childNodes.length}(),Vn.parseHTML=function(wr,Cr,Pr){if("string"!=typeof wr)return[];"boolean"==typeof Cr&&(Pr=Cr,Cr=!1);var Dr,Mr,Rr;return Cr||(zn.createHTMLDocument?((Dr=(Cr=kn.implementation.createHTMLDocument("")).createElement("base")).href=kn.location.href,Cr.head.appendChild(Dr)):Cr=kn),Mr=na.exec(wr),Rr=!Pr&&[],Mr?[Cr.createElement(Mr[1])]:(Mr=an([wr],Cr,Rr),Rr&&Rr.length&&Vn(Rr).remove(),Vn.merge([],Mr.childNodes))},Vn.fn.load=function(wr,Cr,Pr){var Ir=this,Or=wr.indexOf(" "),Dr,Mr,Rr;return-1<Or&&(Dr=Pn(wr.slice(Or)),wr=wr.slice(0,Or)),Vn.isFunction(Cr)?(Pr=Cr,Cr=void 0):Cr&&"object"==typeof Cr&&(Mr="POST"),0<Ir.length&&Vn.ajax({url:wr,type:Mr||"GET",dataType:"html",data:Cr}).done(function(Lr){Rr=arguments,Ir.html(Dr?Vn("<div>").append(Vn.parseHTML(Lr)).find(Dr):Lr)}).always(Pr&&function(Lr,kr){Ir.each(function(){Pr.apply(this,Rr||[Lr.responseText,kr,Lr])})}),this},Vn.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(wr,Cr){Vn.fn[Cr]=function(Pr){return this.on(Cr,Pr)}}),Vn.expr.pseudos.animated=function(wr){return Vn.grep(Vn.timers,function(Cr){return wr===Cr.elem}).length},Vn.offset={setOffset:function(wr,Cr,Pr){var kr=Vn.css(wr,"position"),Nr=Vn(wr),Fr={},Dr,Mr,Rr,Ir,Or,Lr;"static"===kr&&(wr.style.position="relative"),Or=Nr.offset(),Rr=Vn.css(wr,"top"),Lr=Vn.css(wr,"left"),("absolute"===kr||"fixed"===kr)&&-1<(Rr+Lr).indexOf("auto")?(Ir=(Dr=Nr.position()).top,Mr=Dr.left):(Ir=parseFloat(Rr)||0,Mr=parseFloat(Lr)||0),Vn.isFunction(Cr)&&(Cr=Cr.call(wr,Pr,Vn.extend({},Or))),null!=Cr.top&&(Fr.top=Cr.top-Or.top+Ir),null!=Cr.left&&(Fr.left=Cr.left-Or.left+Mr),"using"in Cr?Cr.using.call(wr,Fr):Nr.css(Fr)}},Vn.fn.extend({offset:function(wr){if(arguments.length)return void 0===wr?this:this.each(function(Ir){Vn.offset.setOffset(this,wr,Ir)});var Rr=this[0],Cr,Pr,Dr,Mr;if(Rr)return Rr.getClientRects().length?(Dr=Rr.getBoundingClientRect(),Cr=Rr.ownerDocument,Pr=Cr.documentElement,Mr=Cr.defaultView,{top:Dr.top+Mr.pageYOffset-Pr.clientTop,left:Dr.left+Mr.pageXOffset-Pr.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var Pr=this[0],Dr={top:0,left:0},wr,Cr;return"fixed"===Vn.css(Pr,"position")?Cr=Pr.getBoundingClientRect():(wr=this.offsetParent(),Cr=this.offset(),Ht(wr[0],"html")||(Dr=wr.offset()),Dr={top:Dr.top+Vn.css(wr[0],"borderTopWidth",!0),left:Dr.left+Vn.css(wr[0],"borderLeftWidth",!0)}),{top:Cr.top-Dr.top-Vn.css(Pr,"marginTop",!0),left:Cr.left-Dr.left-Vn.css(Pr,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var wr=this.offsetParent;wr&&"static"===Vn.css(wr,"position");)wr=wr.offsetParent;return wr||Pa})}}),Vn.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(wr,Cr){var Pr="pageYOffset"===Cr;Vn.fn[wr]=function(Dr){return pa(this,function(Mr,Rr,Ir){var Or;return(Vn.isWindow(Mr)?Or=Mr:9===Mr.nodeType&&(Or=Mr.defaultView),void 0===Ir)?Or?Or[Cr]:Mr[Rr]:void(Or?Or.scrollTo(Pr?Or.pageXOffset:Ir,Pr?Ir:Or.pageYOffset):Mr[Rr]=Ir)},wr,Dr,arguments.length)}}),Vn.each(["top","left"],function(wr,Cr){Vn.cssHooks[Cr]=yn(zn.pixelPosition,function(Pr,Dr){if(Dr)return Dr=mn(Pr,Cr),Ba.test(Dr)?Vn(Pr).position()[Cr]+"px":Dr})}),Vn.each({Height:"height",Width:"width"},function(wr,Cr){Vn.each({padding:"inner"+wr,content:Cr,"":"outer"+wr},function(Pr,Dr){Vn.fn[Dr]=function(Mr,Rr){var Ir=arguments.length&&(Pr||"boolean"!=typeof Mr),Or=Pr||(!0===Mr||!0===Rr?"margin":"border");return pa(this,function(Lr,kr,Nr){var Fr;return Vn.isWindow(Lr)?0===Dr.indexOf("outer")?Lr["inner"+wr]:Lr.document.documentElement["client"+wr]:9===Lr.nodeType?(Fr=Lr.documentElement,Math.max(Lr.body["scroll"+wr],Fr["scroll"+wr],Lr.body["offset"+wr],Fr["offset"+wr],Fr["client"+wr])):void 0===Nr?Vn.css(Lr,kr,Or):Vn.style(Lr,kr,Nr,Or)},Cr,Ir?Mr:void 0,Ir)}})}),Vn.fn.extend({bind:function(wr,Cr,Pr){return this.on(wr,null,Cr,Pr)},unbind:function(wr,Cr){return this.off(wr,null,Cr)},delegate:function(wr,Cr,Pr,Dr){return this.on(Cr,wr,Pr,Dr)},undelegate:function(wr,Cr,Pr){return 1===arguments.length?this.off(wr,"**"):this.off(Cr,wr||"**",Pr)}}),Vn.holdReady=function(wr){wr?Vn.readyWait++:Vn.ready(!0)},Vn.isArray=Array.isArray,Vn.parseJSON=JSON.parse,Vn.nodeName=Ht,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Vn});var Sr=Bt.jQuery,Ar=Bt.$;return Vn.noConflict=function(wr){return Bt.$===Vn&&(Bt.$=Ar),wr&&Bt.jQuery===Vn&&(Bt.jQuery=Sr),Vn},Gt||(Bt.jQuery=Bt.$=Vn),Vn}),function Bt(Gt,Xt,Yt){function Ht(zt,Vt){if(!Xt[zt]){if(!Gt[zt]){var qt="function"==typeof require&&require;if(!Vt&&qt)return qt(zt,!0);if(Wt)return Wt(zt,!0);var Kt=new Error("Cannot find module '"+zt+"'");throw Kt.code="MODULE_NOT_FOUND",Kt}var Qt=Xt[zt]={exports:{}};Gt[zt][0].call(Qt.exports,function(Jt){var Zt=Gt[zt][1][Jt];return Ht(Zt||Jt)},Qt,Qt.exports,Bt,Gt,Xt,Yt)}return Xt[zt].exports}for(var Wt="function"==typeof require&&require,jt=0;jt<Yt.length;jt++)Ht(Yt[jt]);return Ht}({1:[function(Bt,Gt){function Yt(zt){zt.fn.perfectScrollbar=function(Vt){return this.each(function(){if("object"==typeof Vt||void 0===Vt){Wt.get(this)||Ht.initialize(this,Vt)}else{var Kt=Vt;"update"===Kt?Ht.update(this):"destroy"===Kt&&Ht.destroy(this)}})}}var Ht=Bt("../main"),Wt=Bt("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],Yt);else{var jt=window.jQuery?window.jQuery:window.$;void 0!==jt&&Yt(jt)}Gt.exports=Yt},{"../main":6,"../plugin/instances":17}],2:[function(Bt,Gt){var Yt={};Yt.create=function(Ht,Wt){var jt=document.createElement(Ht);return jt.className=Wt,jt},Yt.appendTo=function(Ht,Wt){return Wt.appendChild(Ht),Ht},Yt.css=function(Ht,Wt,jt){return"object"==typeof Wt?function(zt,Vt){for(var qt in Vt){var Kt=Vt[qt];"number"==typeof Kt&&(Kt=Kt.toString()+"px"),zt.style[qt]=Kt}return zt}(Ht,Wt):void 0===jt?function(zt,Vt){return window.getComputedStyle(zt)[Vt]}(Ht,Wt):function(zt,Vt,qt){return"number"==typeof qt&&(qt=qt.toString()+"px"),zt.style[Vt]=qt,zt}(Ht,Wt,jt)},Yt.matches=function(Ht,Wt){return void 0===Ht.matches?Ht.msMatchesSelector(Wt):Ht.matches(Wt)},Yt.remove=function(Ht){void 0===Ht.remove?Ht.parentNode&&Ht.parentNode.removeChild(Ht):Ht.remove()},Yt.queryChildren=function(Ht,Wt){return Array.prototype.filter.call(Ht.childNodes,function(jt){return Yt.matches(jt,Wt)})},Gt.exports=Yt},{}],3:[function(Bt,Gt){var Yt=function(Wt){this.element=Wt,this.events={}};Yt.prototype.bind=function(Wt,jt){void 0===this.events[Wt]&&(this.events[Wt]=[]),this.events[Wt].push(jt),this.element.addEventListener(Wt,jt,!1)},Yt.prototype.unbind=function(Wt,jt){this.events[Wt]=this.events[Wt].filter(function(Vt){return void 0!==jt&&Vt!==jt||(this.element.removeEventListener(Wt,Vt,!1),!1)},this)},Yt.prototype.unbindAll=function(){for(var Wt in this.events)this.unbind(Wt)};var Ht=function(){this.eventElements=[]};Ht.prototype.eventElement=function(Wt){var jt=this.eventElements.filter(function(zt){return zt.element===Wt})[0];return void 0===jt&&(jt=new Yt(Wt),this.eventElements.push(jt)),jt},Ht.prototype.bind=function(Wt,jt,zt){this.eventElement(Wt).bind(jt,zt)},Ht.prototype.unbind=function(Wt,jt,zt){this.eventElement(Wt).unbind(jt,zt)},Ht.prototype.unbindAll=function(){for(var Wt=0;Wt<this.eventElements.length;Wt++)this.eventElements[Wt].unbindAll()},Ht.prototype.once=function(Wt,jt,zt){var Vt=this.eventElement(Wt),qt=function(Kt){Vt.unbind(jt,qt),zt(Kt)};Vt.bind(jt,qt)},Gt.exports=Ht},{}],4:[function(Bt,Gt){Gt.exports=function(){function Yt(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return Yt()+Yt()+"-"+Yt()+"-"+Yt()+"-"+Yt()+"-"+Yt()+Yt()+Yt()}}()},{}],5:[function(Bt,Gt,Xt){function Yt(jt){var zt;return zt=void 0===jt?["ps--x","ps--y"]:["ps--"+jt],["ps--in-scrolling"].concat(zt)}var Ht=Bt("./dom"),Wt=Xt.toInt=function(jt){return parseInt(jt,10)||0};Xt.isEditable=function(jt){return Ht.matches(jt,"input,[contenteditable]")||Ht.matches(jt,"select,[contenteditable]")||Ht.matches(jt,"textarea,[contenteditable]")||Ht.matches(jt,"button,[contenteditable]")},Xt.removePsClasses=function(jt){for(var zt=0,Vt;zt<jt.classList.length;zt++)Vt=jt.classList[zt],0===Vt.indexOf("ps-")&&jt.classList.remove(Vt)},Xt.outerWidth=function(jt){return Wt(Ht.css(jt,"width"))+Wt(Ht.css(jt,"paddingLeft"))+Wt(Ht.css(jt,"paddingRight"))+Wt(Ht.css(jt,"borderLeftWidth"))+Wt(Ht.css(jt,"borderRightWidth"))},Xt.startScrolling=function(jt,zt){for(var Vt=Yt(zt),qt=0;qt<Vt.length;qt++)jt.classList.add(Vt[qt])},Xt.stopScrolling=function(jt,zt){for(var Vt=Yt(zt),qt=0;qt<Vt.length;qt++)jt.classList.remove(Vt[qt])},Xt.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},{"./dom":2}],6:[function(Bt,Gt){var Yt=Bt("./plugin/destroy"),Ht=Bt("./plugin/initialize"),Wt=Bt("./plugin/update");Gt.exports={initialize:Ht,update:Wt,destroy:Yt}},{"./plugin/destroy":8,"./plugin/initialize":16,"./plugin/update":20}],7:[function(Bt,Gt){Gt.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},{}],8:[function(Bt,Gt){var Yt=Bt("../lib/helper"),Ht=Bt("../lib/dom"),Wt=Bt("./instances");Gt.exports=function(jt){var zt=Wt.get(jt);zt&&(zt.event.unbindAll(),Ht.remove(zt.scrollbarX),Ht.remove(zt.scrollbarY),Ht.remove(zt.scrollbarXRail),Ht.remove(zt.scrollbarYRail),Yt.removePsClasses(jt),Wt.remove(jt))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17}],9:[function(Bt,Gt){var Yt=Bt("../instances"),Ht=Bt("../update-geometry"),Wt=Bt("../update-scroll");Gt.exports=function(jt){!function(zt,Vt){function qt(Qt){return Qt.getBoundingClientRect()}var Kt=function(Qt){Qt.stopPropagation()};Vt.event.bind(Vt.scrollbarY,"click",Kt),Vt.event.bind(Vt.scrollbarYRail,"click",function(Qt){var Jt=Qt.pageY-window.pageYOffset-qt(Vt.scrollbarYRail).top>Vt.scrollbarYTop?1:-1;Wt(zt,"top",zt.scrollTop+Jt*Vt.containerHeight),Ht(zt),Qt.stopPropagation()}),Vt.event.bind(Vt.scrollbarX,"click",Kt),Vt.event.bind(Vt.scrollbarXRail,"click",function(Qt){var Jt=Qt.pageX-window.pageXOffset-qt(Vt.scrollbarXRail).left>Vt.scrollbarXLeft?1:-1;Wt(zt,"left",zt.scrollLeft+Jt*Vt.containerWidth),Ht(zt),Qt.stopPropagation()})}(jt,Yt.get(jt))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],10:[function(Bt,Gt){function Yt(Kt,Qt){var Jt=null,Zt=null,$t=function(tn){!function(nn){var an=Jt+nn*Qt.railXRatio,rn=Math.max(0,Qt.scrollbarXRail.getBoundingClientRect().left)+Qt.railXRatio*(Qt.railXWidth-Qt.scrollbarXWidth);Qt.scrollbarXLeft=0>an?0:an>rn?rn:an;var on=Wt.toInt(Qt.scrollbarXLeft*(Qt.contentWidth-Qt.containerWidth)/(Qt.containerWidth-Qt.railXRatio*Qt.scrollbarXWidth))-Qt.negativeScrollAdjustment;qt(Kt,"left",on)}(tn.pageX-Zt),Vt(Kt),tn.stopPropagation(),tn.preventDefault()},en=function(){Wt.stopScrolling(Kt,"x"),Qt.event.unbind(Qt.ownerDocument,"mousemove",$t)};Qt.event.bind(Qt.scrollbarX,"mousedown",function(tn){Zt=tn.pageX,Jt=Wt.toInt(jt.css(Qt.scrollbarX,"left"))*Qt.railXRatio,Wt.startScrolling(Kt,"x"),Qt.event.bind(Qt.ownerDocument,"mousemove",$t),Qt.event.once(Qt.ownerDocument,"mouseup",en),tn.stopPropagation(),tn.preventDefault()})}function Ht(Kt,Qt){var Jt=null,Zt=null,$t=function(tn){!function(nn){var an=Jt+nn*Qt.railYRatio,rn=Math.max(0,Qt.scrollbarYRail.getBoundingClientRect().top)+Qt.railYRatio*(Qt.railYHeight-Qt.scrollbarYHeight);Qt.scrollbarYTop=0>an?0:an>rn?rn:an;var on=Wt.toInt(Qt.scrollbarYTop*(Qt.contentHeight-Qt.containerHeight)/(Qt.containerHeight-Qt.railYRatio*Qt.scrollbarYHeight));qt(Kt,"top",on)}(tn.pageY-Zt),Vt(Kt),tn.stopPropagation(),tn.preventDefault()},en=function(){Wt.stopScrolling(Kt,"y"),Qt.event.unbind(Qt.ownerDocument,"mousemove",$t)};Qt.event.bind(Qt.scrollbarY,"mousedown",function(tn){Zt=tn.pageY,Jt=Wt.toInt(jt.css(Qt.scrollbarY,"top"))*Qt.railYRatio,Wt.startScrolling(Kt,"y"),Qt.event.bind(Qt.ownerDocument,"mousemove",$t),Qt.event.once(Qt.ownerDocument,"mouseup",en),tn.stopPropagation(),tn.preventDefault()})}var Wt=Bt("../../lib/helper"),jt=Bt("../../lib/dom"),zt=Bt("../instances"),Vt=Bt("../update-geometry"),qt=Bt("../update-scroll");Gt.exports=function(Kt){var Qt=zt.get(Kt);Yt(Kt,Qt),Ht(Kt,Qt)}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],11:[function(Bt,Gt){function Yt(qt,Kt){var Qt=!1;Kt.event.bind(qt,"mouseenter",function(){Qt=!0}),Kt.event.bind(qt,"mouseleave",function(){Qt=!1});var Jt=!1;Kt.event.bind(Kt.ownerDocument,"keydown",function(Zt){if(!(Zt.isDefaultPrevented&&Zt.isDefaultPrevented()||Zt.defaultPrevented)){var $t=Wt.matches(Kt.scrollbarX,":focus")||Wt.matches(Kt.scrollbarY,":focus");if(Qt||$t){var en=document.activeElement?document.activeElement:Kt.ownerDocument.activeElement;if(en){if("IFRAME"===en.tagName)en=en.contentDocument.activeElement;else for(;en.shadowRoot;)en=en.shadowRoot.activeElement;if(Ht.isEditable(en))return}var tn=0,nn=0;switch(Zt.which){case 37:tn=Zt.metaKey?-Kt.contentWidth:Zt.altKey?-Kt.containerWidth:-30;break;case 38:nn=Zt.metaKey?Kt.contentHeight:Zt.altKey?Kt.containerHeight:30;break;case 39:tn=Zt.metaKey?Kt.contentWidth:Zt.altKey?Kt.containerWidth:30;break;case 40:nn=Zt.metaKey?-Kt.contentHeight:Zt.altKey?-Kt.containerHeight:-30;break;case 33:nn=90;break;case 32:nn=Zt.shiftKey?90:-90;break;case 34:nn=-90;break;case 35:nn=Zt.ctrlKey?-Kt.contentHeight:-Kt.containerHeight;break;case 36:nn=Zt.ctrlKey?qt.scrollTop:Kt.containerHeight;break;default:return;}Vt(qt,"top",qt.scrollTop-nn),Vt(qt,"left",qt.scrollLeft+tn),zt(qt),(Jt=function(an,rn){var on=qt.scrollTop;if(0===an){if(!Kt.scrollbarYActive)return!1;if(0===on&&0<rn||on>=Kt.contentHeight-Kt.containerHeight&&0>rn)return!Kt.settings.wheelPropagation}var sn=qt.scrollLeft;if(0===rn){if(!Kt.scrollbarXActive)return!1;if(0===sn&&0>an||sn>=Kt.contentWidth-Kt.containerWidth&&0<an)return!Kt.settings.wheelPropagation}return!0}(tn,nn))&&Zt.preventDefault()}}})}var Ht=Bt("../../lib/helper"),Wt=Bt("../../lib/dom"),jt=Bt("../instances"),zt=Bt("../update-geometry"),Vt=Bt("../update-scroll");Gt.exports=function(qt){Yt(qt,jt.get(qt))}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],12:[function(Bt,Gt){function Yt(zt,Vt){function qt(Qt){var Jt=function(en){var tn=en.deltaX,nn=-1*en.deltaY;return void 0!==tn&&void 0!==nn||(tn=-1*en.wheelDeltaX/6,nn=en.wheelDeltaY/6),en.deltaMode&&1===en.deltaMode&&(tn*=10,nn*=10),tn!=tn&&nn!=nn&&(tn=0,nn=en.wheelDelta),en.shiftKey?[-nn,-tn]:[tn,nn]}(Qt),Zt=Jt[0],$t=Jt[1];(function(en,tn){var nn=zt.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(nn){var an=window.getComputedStyle(nn);if(![an.overflow,an.overflowX,an.overflowY].join("").match(/(scroll|auto)/))return!1;var rn=nn.scrollHeight-nn.clientHeight;if(0<rn&&!(0===nn.scrollTop&&0<tn||nn.scrollTop===rn&&0>tn))return!0;var on=nn.scrollLeft-nn.clientWidth;if(0<on&&!(0===nn.scrollLeft&&0>en||nn.scrollLeft===on&&0<en))return!0}return!1})(Zt,$t)||(Kt=!1,Vt.settings.useBothWheelAxes?Vt.scrollbarYActive&&!Vt.scrollbarXActive?($t?jt(zt,"top",zt.scrollTop-$t*Vt.settings.wheelSpeed):jt(zt,"top",zt.scrollTop+Zt*Vt.settings.wheelSpeed),Kt=!0):Vt.scrollbarXActive&&!Vt.scrollbarYActive&&(Zt?jt(zt,"left",zt.scrollLeft+Zt*Vt.settings.wheelSpeed):jt(zt,"left",zt.scrollLeft-$t*Vt.settings.wheelSpeed),Kt=!0):(jt(zt,"top",zt.scrollTop-$t*Vt.settings.wheelSpeed),jt(zt,"left",zt.scrollLeft+Zt*Vt.settings.wheelSpeed)),Wt(zt),(Kt=Kt||function(en,tn){var nn=zt.scrollTop;if(0===en){if(!Vt.scrollbarYActive)return!1;if(0===nn&&0<tn||nn>=Vt.contentHeight-Vt.containerHeight&&0>tn)return!Vt.settings.wheelPropagation}var an=zt.scrollLeft;if(0===tn){if(!Vt.scrollbarXActive)return!1;if(0===an&&0>en||an>=Vt.contentWidth-Vt.containerWidth&&0<en)return!Vt.settings.wheelPropagation}return!0}(Zt,$t))&&(Qt.stopPropagation(),Qt.preventDefault()))}var Kt=!1;void 0===window.onwheel?void 0!==window.onmousewheel&&Vt.event.bind(zt,"mousewheel",qt):Vt.event.bind(zt,"wheel",qt)}var Ht=Bt("../instances"),Wt=Bt("../update-geometry"),jt=Bt("../update-scroll");Gt.exports=function(zt){Yt(zt,Ht.get(zt))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],13:[function(Bt,Gt){var Yt=Bt("../instances"),Ht=Bt("../update-geometry");Gt.exports=function(Wt){!function(jt,zt){zt.event.bind(jt,"scroll",function(){Ht(jt)})}(Wt,Yt.get(Wt))}},{"../instances":17,"../update-geometry":18}],14:[function(Bt,Gt){function Yt(Vt,qt){function Kt(){Qt&&(clearInterval(Qt),Qt=null),Ht.stopScrolling(Vt)}var Qt=null,Jt={top:0,left:0},Zt=!1;qt.event.bind(qt.ownerDocument,"selectionchange",function(){Vt.contains(function(){var $t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===$t.toString().length?null:$t.getRangeAt(0).commonAncestorContainer}())?Zt=!0:(Zt=!1,Kt())}),qt.event.bind(window,"mouseup",function(){Zt&&(Zt=!1,Kt())}),qt.event.bind(window,"keyup",function(){Zt&&(Zt=!1,Kt())}),qt.event.bind(window,"mousemove",function($t){if(Zt){var en={x:$t.pageX,y:$t.pageY},tn={left:Vt.offsetLeft,right:Vt.offsetLeft+Vt.offsetWidth,top:Vt.offsetTop,bottom:Vt.offsetTop+Vt.offsetHeight};en.x<tn.left+3?(Jt.left=-5,Ht.startScrolling(Vt,"x")):en.x>tn.right-3?(Jt.left=5,Ht.startScrolling(Vt,"x")):Jt.left=0,en.y<tn.top+3?(Jt.top=5>tn.top+3-en.y?-5:-20,Ht.startScrolling(Vt,"y")):en.y>tn.bottom-3?(Jt.top=5>en.y-tn.bottom+3?5:20,Ht.startScrolling(Vt,"y")):Jt.top=0,0===Jt.top&&0===Jt.left?Kt():Qt||(Qt=setInterval(function(){Wt.get(Vt)?(zt(Vt,"top",Vt.scrollTop+Jt.top),zt(Vt,"left",Vt.scrollLeft+Jt.left),jt(Vt)):clearInterval(Qt)},50))}})}var Ht=Bt("../../lib/helper"),Wt=Bt("../instances"),jt=Bt("../update-geometry"),zt=Bt("../update-scroll");Gt.exports=function(Vt){Yt(Vt,Wt.get(Vt))}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],15:[function(Bt,Gt){function Yt(Vt,qt,Kt,Qt){function Jt(cn,hn){zt(Vt,"top",Vt.scrollTop-hn),zt(Vt,"left",Vt.scrollLeft-cn),jt(Vt)}function Zt(){un=!0}function $t(){un=!1}function en(cn){return cn.targetTouches?cn.targetTouches[0]:cn}function tn(cn){return(!cn.pointerType||"pen"!==cn.pointerType||0!==cn.buttons)&&(cn.targetTouches&&1===cn.targetTouches.length||cn.pointerType&&"mouse"!==cn.pointerType&&cn.pointerType!==cn.MSPOINTER_TYPE_MOUSE)}function nn(cn){if(tn(cn)){pn=!0;var hn=en(cn);on.pageX=hn.pageX,on.pageY=hn.pageY,sn=new Date().getTime(),null!==ln&&clearInterval(ln),cn.stopPropagation()}}function an(cn){if(!pn&&qt.settings.swipePropagation&&nn(cn),!un&&pn&&tn(cn)){var hn=en(cn),fn={pageX:hn.pageX,pageY:hn.pageY},gn=fn.pageX-on.pageX,mn=fn.pageY-on.pageY;Jt(gn,mn),on=fn;var yn=new Date().getTime(),_n=yn-sn;0<_n&&(dn.x=gn/_n,dn.y=mn/_n,sn=yn),function(bn,xn){var vn=Vt.scrollTop,Tn=Vt.scrollLeft,En=Math.abs(bn),Sn=Math.abs(xn);if(Sn>En){if(0>xn&&vn===qt.contentHeight-qt.containerHeight||0<xn&&0===vn)return!qt.settings.swipePropagation;}else if(En>Sn&&(0>bn&&Tn===qt.contentWidth-qt.containerWidth||0<bn&&0===Tn))return!qt.settings.swipePropagation;return!0}(gn,mn)&&(cn.stopPropagation(),cn.preventDefault())}}function rn(){!un&&pn&&(pn=!1,qt.settings.swipeEasing&&(clearInterval(ln),ln=setInterval(function(){Wt.get(Vt)&&(dn.x||dn.y)?.01>Math.abs(dn.x)&&.01>Math.abs(dn.y)?clearInterval(ln):(Jt(30*dn.x,30*dn.y),dn.x*=.8,dn.y*=.8):clearInterval(ln)},10)))}var on={},sn=0,dn={},ln=null,un=!1,pn=!1;Kt?(qt.event.bind(window,"touchstart",Zt),qt.event.bind(window,"touchend",$t),qt.event.bind(Vt,"touchstart",nn),qt.event.bind(Vt,"touchmove",an),qt.event.bind(Vt,"touchend",rn)):Qt&&(window.PointerEvent?(qt.event.bind(window,"pointerdown",Zt),qt.event.bind(window,"pointerup",$t),qt.event.bind(Vt,"pointerdown",nn),qt.event.bind(Vt,"pointermove",an),qt.event.bind(Vt,"pointerup",rn)):window.MSPointerEvent&&(qt.event.bind(window,"MSPointerDown",Zt),qt.event.bind(window,"MSPointerUp",$t),qt.event.bind(Vt,"MSPointerDown",nn),qt.event.bind(Vt,"MSPointerMove",an),qt.event.bind(Vt,"MSPointerUp",rn)))}var Ht=Bt("../../lib/helper"),Wt=Bt("../instances"),jt=Bt("../update-geometry"),zt=Bt("../update-scroll");Gt.exports=function(Vt){(Ht.env.supportsTouch||Ht.env.supportsIePointer)&&Yt(Vt,Wt.get(Vt),Ht.env.supportsTouch,Ht.env.supportsIePointer)}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],16:[function(Bt,Gt){var Yt=Bt("./instances"),Ht=Bt("./update-geometry"),Wt={"click-rail":Bt("./handler/click-rail"),"drag-scrollbar":Bt("./handler/drag-scrollbar"),keyboard:Bt("./handler/keyboard"),wheel:Bt("./handler/mouse-wheel"),touch:Bt("./handler/touch"),selection:Bt("./handler/selection")},jt=Bt("./handler/native-scroll");Gt.exports=function(zt,Vt){zt.classList.add("ps");var qt=Yt.add(zt,"object"==typeof Vt?Vt:{});zt.classList.add("ps--theme_"+qt.settings.theme),qt.settings.handlers.forEach(function(Kt){Wt[Kt](zt)}),jt(zt),Ht(zt)}},{"./handler/click-rail":9,"./handler/drag-scrollbar":10,"./handler/keyboard":11,"./handler/mouse-wheel":12,"./handler/native-scroll":13,"./handler/selection":14,"./handler/touch":15,"./instances":17,"./update-geometry":18}],17:[function(Bt,Gt,Xt){function Yt(Kt){return Kt.getAttribute("data-ps-id")}var Ht=Bt("../lib/helper"),Wt=Bt("./default-setting"),jt=Bt("../lib/dom"),zt=Bt("../lib/event-manager"),Vt=Bt("../lib/guid"),qt={};Xt.add=function(Kt,Qt){var Jt=Vt();return function(Zt,$t){Zt.setAttribute("data-ps-id",$t)}(Kt,Jt),qt[Jt]=new function(Zt,$t){function en(){Zt.classList.add("ps--focus")}function tn(){Zt.classList.remove("ps--focus")}for(var nn in this.settings=Wt(),$t)this.settings[nn]=$t[nn];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null,this.isRtl="rtl"===jt.css(Zt,"direction"),this.isNegativeScroll=function(){var an=Zt.scrollLeft,rn=null;return Zt.scrollLeft=-1,rn=0>Zt.scrollLeft,Zt.scrollLeft=an,rn}(),this.negativeScrollAdjustment=this.isNegativeScroll?Zt.scrollWidth-Zt.clientWidth:0,this.event=new zt,this.ownerDocument=Zt.ownerDocument||document,this.scrollbarXRail=jt.appendTo(jt.create("div","ps__scrollbar-x-rail"),Zt),this.scrollbarX=jt.appendTo(jt.create("div","ps__scrollbar-x"),this.scrollbarXRail),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",en),this.event.bind(this.scrollbarX,"blur",tn),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null,this.scrollbarXBottom=Ht.toInt(jt.css(this.scrollbarXRail,"bottom")),this.isScrollbarXUsingBottom=this.scrollbarXBottom==this.scrollbarXBottom,this.scrollbarXTop=this.isScrollbarXUsingBottom?null:Ht.toInt(jt.css(this.scrollbarXRail,"top")),this.railBorderXWidth=Ht.toInt(jt.css(this.scrollbarXRail,"borderLeftWidth"))+Ht.toInt(jt.css(this.scrollbarXRail,"borderRightWidth")),jt.css(this.scrollbarXRail,"display","block"),this.railXMarginWidth=Ht.toInt(jt.css(this.scrollbarXRail,"marginLeft"))+Ht.toInt(jt.css(this.scrollbarXRail,"marginRight")),jt.css(this.scrollbarXRail,"display",""),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=jt.appendTo(jt.create("div","ps__scrollbar-y-rail"),Zt),this.scrollbarY=jt.appendTo(jt.create("div","ps__scrollbar-y"),this.scrollbarYRail),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",en),this.event.bind(this.scrollbarY,"blur",tn),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null,this.scrollbarYRight=Ht.toInt(jt.css(this.scrollbarYRail,"right")),this.isScrollbarYUsingRight=this.scrollbarYRight==this.scrollbarYRight,this.scrollbarYLeft=this.isScrollbarYUsingRight?null:Ht.toInt(jt.css(this.scrollbarYRail,"left")),this.scrollbarYOuterWidth=this.isRtl?Ht.outerWidth(this.scrollbarY):null,this.railBorderYWidth=Ht.toInt(jt.css(this.scrollbarYRail,"borderTopWidth"))+Ht.toInt(jt.css(this.scrollbarYRail,"borderBottomWidth")),jt.css(this.scrollbarYRail,"display","block"),this.railYMarginHeight=Ht.toInt(jt.css(this.scrollbarYRail,"marginTop"))+Ht.toInt(jt.css(this.scrollbarYRail,"marginBottom")),jt.css(this.scrollbarYRail,"display",""),this.railYHeight=null,this.railYRatio=null}(Kt,Qt),qt[Jt]},Xt.remove=function(Kt){delete qt[Yt(Kt)],function(Qt){Qt.removeAttribute("data-ps-id")}(Kt)},Xt.get=function(Kt){return qt[Yt(Kt)]}},{"../lib/dom":2,"../lib/event-manager":3,"../lib/guid":4,"../lib/helper":5,"./default-setting":7}],18:[function(Bt,Gt){function Yt(Vt,qt){return Vt.settings.minScrollbarLength&&(qt=Math.max(qt,Vt.settings.minScrollbarLength)),Vt.settings.maxScrollbarLength&&(qt=Math.min(qt,Vt.settings.maxScrollbarLength)),qt}var Ht=Bt("../lib/helper"),Wt=Bt("../lib/dom"),jt=Bt("./instances"),zt=Bt("./update-scroll");Gt.exports=function(Vt){var qt=jt.get(Vt);qt.containerWidth=Vt.clientWidth,qt.containerHeight=Vt.clientHeight,qt.contentWidth=Vt.scrollWidth,qt.contentHeight=Vt.scrollHeight;var Kt;Vt.contains(qt.scrollbarXRail)||(0<(Kt=Wt.queryChildren(Vt,".ps__scrollbar-x-rail")).length&&Kt.forEach(function(Qt){Wt.remove(Qt)}),Wt.appendTo(qt.scrollbarXRail,Vt)),Vt.contains(qt.scrollbarYRail)||(0<(Kt=Wt.queryChildren(Vt,".ps__scrollbar-y-rail")).length&&Kt.forEach(function(Qt){Wt.remove(Qt)}),Wt.appendTo(qt.scrollbarYRail,Vt)),!qt.settings.suppressScrollX&&qt.containerWidth+qt.settings.scrollXMarginOffset<qt.contentWidth?(qt.scrollbarXActive=!0,qt.railXWidth=qt.containerWidth-qt.railXMarginWidth,qt.railXRatio=qt.containerWidth/qt.railXWidth,qt.scrollbarXWidth=Yt(qt,Ht.toInt(qt.railXWidth*qt.containerWidth/qt.contentWidth)),qt.scrollbarXLeft=Ht.toInt((qt.negativeScrollAdjustment+Vt.scrollLeft)*(qt.railXWidth-qt.scrollbarXWidth)/(qt.contentWidth-qt.containerWidth))):qt.scrollbarXActive=!1,!qt.settings.suppressScrollY&&qt.containerHeight+qt.settings.scrollYMarginOffset<qt.contentHeight?(qt.scrollbarYActive=!0,qt.railYHeight=qt.containerHeight-qt.railYMarginHeight,qt.railYRatio=qt.containerHeight/qt.railYHeight,qt.scrollbarYHeight=Yt(qt,Ht.toInt(qt.railYHeight*qt.containerHeight/qt.contentHeight)),qt.scrollbarYTop=Ht.toInt(Vt.scrollTop*(qt.railYHeight-qt.scrollbarYHeight)/(qt.contentHeight-qt.containerHeight))):qt.scrollbarYActive=!1,qt.scrollbarXLeft>=qt.railXWidth-qt.scrollbarXWidth&&(qt.scrollbarXLeft=qt.railXWidth-qt.scrollbarXWidth),qt.scrollbarYTop>=qt.railYHeight-qt.scrollbarYHeight&&(qt.scrollbarYTop=qt.railYHeight-qt.scrollbarYHeight),function(Qt,Jt){var Zt={width:Jt.railXWidth};Zt.left=Jt.isRtl?Jt.negativeScrollAdjustment+Qt.scrollLeft+Jt.containerWidth-Jt.contentWidth:Qt.scrollLeft,Jt.isScrollbarXUsingBottom?Zt.bottom=Jt.scrollbarXBottom-Qt.scrollTop:Zt.top=Jt.scrollbarXTop+Qt.scrollTop,Wt.css(Jt.scrollbarXRail,Zt);var $t={top:Qt.scrollTop,height:Jt.railYHeight};Jt.isScrollbarYUsingRight?Jt.isRtl?$t.right=Jt.contentWidth-(Jt.negativeScrollAdjustment+Qt.scrollLeft)-Jt.scrollbarYRight-Jt.scrollbarYOuterWidth:$t.right=Jt.scrollbarYRight-Qt.scrollLeft:Jt.isRtl?$t.left=Jt.negativeScrollAdjustment+Qt.scrollLeft+2*Jt.containerWidth-Jt.contentWidth-Jt.scrollbarYLeft-Jt.scrollbarYOuterWidth:$t.left=Jt.scrollbarYLeft+Qt.scrollLeft,Wt.css(Jt.scrollbarYRail,$t),Wt.css(Jt.scrollbarX,{left:Jt.scrollbarXLeft,width:Jt.scrollbarXWidth-Jt.railBorderXWidth}),Wt.css(Jt.scrollbarY,{top:Jt.scrollbarYTop,height:Jt.scrollbarYHeight-Jt.railBorderYWidth})}(Vt,qt),qt.scrollbarXActive?Vt.classList.add("ps--active-x"):(Vt.classList.remove("ps--active-x"),qt.scrollbarXWidth=0,qt.scrollbarXLeft=0,zt(Vt,"left",0)),qt.scrollbarYActive?Vt.classList.add("ps--active-y"):(Vt.classList.remove("ps--active-y"),qt.scrollbarYHeight=0,qt.scrollbarYTop=0,zt(Vt,"top",0))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-scroll":19}],19:[function(Bt,Gt){var Yt=Bt("./instances"),Ht=function(Wt){var jt=document.createEvent("Event");return jt.initEvent(Wt,!0,!0),jt};Gt.exports=function(Wt,jt,zt){if(void 0===Wt)throw"You must provide an element to the update-scroll function";if(void 0===jt)throw"You must provide an axis to the update-scroll function";if(void 0===zt)throw"You must provide a value to the update-scroll function";"top"===jt&&0>=zt&&(Wt.scrollTop=zt=0,Wt.dispatchEvent(Ht("ps-y-reach-start"))),"left"===jt&&0>=zt&&(Wt.scrollLeft=zt=0,Wt.dispatchEvent(Ht("ps-x-reach-start")));var Vt=Yt.get(Wt);"top"===jt&&zt>=Vt.contentHeight-Vt.containerHeight&&(2>=(zt=Vt.contentHeight-Vt.containerHeight)-Wt.scrollTop?zt=Wt.scrollTop:Wt.scrollTop=zt,Wt.dispatchEvent(Ht("ps-y-reach-end"))),"left"===jt&&zt>=Vt.contentWidth-Vt.containerWidth&&(2>=(zt=Vt.contentWidth-Vt.containerWidth)-Wt.scrollLeft?zt=Wt.scrollLeft:Wt.scrollLeft=zt,Wt.dispatchEvent(Ht("ps-x-reach-end"))),void 0===Vt.lastTop&&(Vt.lastTop=Wt.scrollTop),void 0===Vt.lastLeft&&(Vt.lastLeft=Wt.scrollLeft),"top"===jt&&zt<Vt.lastTop&&Wt.dispatchEvent(Ht("ps-scroll-up")),"top"===jt&&zt>Vt.lastTop&&Wt.dispatchEvent(Ht("ps-scroll-down")),"left"===jt&&zt<Vt.lastLeft&&Wt.dispatchEvent(Ht("ps-scroll-left")),"left"===jt&&zt>Vt.lastLeft&&Wt.dispatchEvent(Ht("ps-scroll-right")),"top"===jt&&zt!==Vt.lastTop&&(Wt.scrollTop=Vt.lastTop=zt,Wt.dispatchEvent(Ht("ps-scroll-y"))),"left"===jt&&zt!==Vt.lastLeft&&(Wt.scrollLeft=Vt.lastLeft=zt,Wt.dispatchEvent(Ht("ps-scroll-x")))}},{"./instances":17}],20:[function(Bt,Gt){var Yt=Bt("../lib/helper"),Ht=Bt("../lib/dom"),Wt=Bt("./instances"),jt=Bt("./update-geometry"),zt=Bt("./update-scroll");Gt.exports=function(Vt){var qt=Wt.get(Vt);qt&&(qt.negativeScrollAdjustment=qt.isNegativeScroll?Vt.scrollWidth-Vt.clientWidth:0,Ht.css(qt.scrollbarXRail,"display","block"),Ht.css(qt.scrollbarYRail,"display","block"),qt.railXMarginWidth=Yt.toInt(Ht.css(qt.scrollbarXRail,"marginLeft"))+Yt.toInt(Ht.css(qt.scrollbarXRail,"marginRight")),qt.railYMarginHeight=Yt.toInt(Ht.css(qt.scrollbarYRail,"marginTop"))+Yt.toInt(Ht.css(qt.scrollbarYRail,"marginBottom")),Ht.css(qt.scrollbarXRail,"display","none"),Ht.css(qt.scrollbarYRail,"display","none"),jt(Vt),zt(Vt,"top",Vt.scrollTop),zt(Vt,"left",Vt.scrollLeft),Ht.css(qt.scrollbarXRail,"display",""),Ht.css(qt.scrollbarYRail,"display",""))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-geometry":18,"./update-scroll":19}]},{},[1]),function(Bt){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Bt():"function"==typeof define&&define.amd?define([],Bt):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).PIXI=Bt()}(function(){return function Bt(Gt,Xt,Yt){function Ht(zt,Vt){if(!Xt[zt]){if(!Gt[zt]){var qt="function"==typeof require&&require;if(!Vt&&qt)return qt(zt,!0);if(Wt)return Wt(zt,!0);var Kt=new Error("Cannot find module '"+zt+"'");throw Kt.code="MODULE_NOT_FOUND",Kt}var Qt=Xt[zt]={exports:{}};Gt[zt][0].call(Qt.exports,function(Jt){var Zt=Gt[zt][1][Jt];return Ht(Zt||Jt)},Qt,Qt.exports,Bt,Gt,Xt,Yt)}return Xt[zt].exports}for(var Wt="function"==typeof require&&require,jt=0;jt<Yt.length;jt++)Ht(Yt[jt]);return Ht}({1:[function(Bt,Gt,Xt){"use restrict";function Yt(Wt){var jt=32;return(Wt&=-Wt)&&jt--,65535&Wt&&(jt-=16),16711935&Wt&&(jt-=8),252645135&Wt&&(jt-=4),858993459&Wt&&(jt-=2),1431655765&Wt&&(jt-=1),jt}Xt.INT_BITS=32,Xt.INT_MAX=2147483647,Xt.INT_MIN=-2147483648,Xt.sign=function(Wt){return(0<Wt)-(0>Wt)},Xt.abs=function(Wt){var jt=Wt>>31;return(Wt^jt)-jt},Xt.min=function(Wt,jt){return jt^(Wt^jt)&-(Wt<jt)},Xt.max=function(Wt,jt){return Wt^(Wt^jt)&-(Wt<jt)},Xt.isPow2=function(Wt){return!(Wt&Wt-1)&&Wt},Xt.log2=function(Wt){var jt,zt;return jt=(65535<Wt)<<4,Wt>>>=jt,zt=(255<Wt)<<3,Wt>>>=zt,jt|=zt,zt=(15<Wt)<<2,Wt>>>=zt,jt|=zt,zt=(3<Wt)<<1,Wt>>>=zt,(jt|=zt)|Wt>>1},Xt.log10=function(Wt){return 1e9<=Wt?9:1e8<=Wt?8:1e7<=Wt?7:1e6<=Wt?6:1e5<=Wt?5:1e4<=Wt?4:1e3<=Wt?3:100<=Wt?2:10<=Wt?1:0},Xt.popCount=function(Wt){return Wt-=1431655765&Wt>>>1,16843009*(252645135&(Wt=(858993459&Wt)+(858993459&Wt>>>2))+(Wt>>>4))>>>24},Xt.countTrailingZeros=Yt,Xt.nextPow2=function(Wt){return Wt+=0===Wt,--Wt,Wt|=Wt>>>1,Wt|=Wt>>>2,Wt|=Wt>>>4,Wt|=Wt>>>8,(Wt|=Wt>>>16)+1},Xt.prevPow2=function(Wt){return Wt|=Wt>>>1,Wt|=Wt>>>2,Wt|=Wt>>>4,Wt|=Wt>>>8,(Wt|=Wt>>>16)-(Wt>>>1)},Xt.parity=function(Wt){return Wt^=Wt>>>16,Wt^=Wt>>>8,Wt^=Wt>>>4,1&27030>>>(Wt&=15)};var Ht=Array(256);!function(Wt){for(var jt=0;256>jt;++jt){var zt=jt,Vt=jt,qt=7;for(zt>>>=1;zt;zt>>>=1)Vt<<=1,Vt|=1&zt,--qt;Wt[jt]=255&Vt<<qt}}(Ht),Xt.reverse=function(Wt){return Ht[255&Wt]<<24|Ht[255&Wt>>>8]<<16|Ht[255&Wt>>>16]<<8|Ht[255&Wt>>>24]},Xt.interleave2=function(Wt,jt){return Wt&=65535,Wt=16711935&(Wt|Wt<<8),Wt=252645135&(Wt|Wt<<4),Wt=858993459&(Wt|Wt<<2),Wt=1431655765&(Wt|Wt<<1),jt&=65535,jt=16711935&(jt|jt<<8),jt=252645135&(jt|jt<<4),jt=858993459&(jt|jt<<2),jt=1431655765&(jt|jt<<1),Wt|jt<<1},Xt.deinterleave2=function(Wt,jt){return Wt=1431655765&Wt>>>jt,Wt=858993459&(Wt|Wt>>>1),Wt=252645135&(Wt|Wt>>>2),Wt=16711935&(Wt|Wt>>>4),(Wt=65535&(Wt|Wt>>>16))<<16>>16},Xt.interleave3=function(Wt,jt,zt){return Wt&=1023,Wt=4278190335&(Wt|Wt<<16),Wt=251719695&(Wt|Wt<<8),Wt=3272356035&(Wt|Wt<<4),Wt=1227133513&(Wt|Wt<<2),jt&=1023,jt=4278190335&(jt|jt<<16),jt=251719695&(jt|jt<<8),jt=3272356035&(jt|jt<<4),jt=1227133513&(jt|jt<<2),Wt|=jt<<1,zt&=1023,zt=4278190335&(zt|zt<<16),zt=251719695&(zt|zt<<8),zt=3272356035&(zt|zt<<4),zt=1227133513&(zt|zt<<2),Wt|zt<<2},Xt.deinterleave3=function(Wt,jt){return Wt=1227133513&Wt>>>jt,Wt=3272356035&(Wt|Wt>>>2),Wt=251719695&(Wt|Wt>>>4),Wt=4278190335&(Wt|Wt>>>8),(Wt=1023&(Wt|Wt>>>16))<<22>>22},Xt.nextCombination=function(Wt){var jt=Wt|Wt-1;return jt+1|(~jt&-~jt)-1>>>Yt(Wt)+1}},{}],2:[function(Bt,Gt){function Yt(rn,on,sn){sn=sn||2;var dn=on&&on.length,ln=dn?on[0]*sn:rn.length,un=Ht(rn,0,ln,sn,!0),pn=[];if(!un)return pn;var cn,hn,fn,gn,mn,yn,_n;if(dn&&(un=function(xn,vn,Tn,En){var Dn=[],Sn,An,wn,Cn,Pn;for(Sn=0,An=vn.length;Sn<An;Sn++)wn=vn[Sn]*En,Cn=Sn<An-1?vn[Sn+1]*En:xn.length,(Pn=Ht(xn,wn,Cn,En,!1))===Pn.next&&(Pn.steiner=!0),Dn.push(function(Mn){var Rn=Mn,In=Mn;do Rn.x<In.x&&(In=Rn),Rn=Rn.next;while(Rn!==Mn);return In}(Pn));for(Dn.sort(zt),Sn=0;Sn<Dn.length;Sn++)!function(Mn,Rn){if(Rn=function(On,Ln){var Nn=Ln,Fn=On.x,Bn=On.y,Un=-1/0,kn;do{if(Bn<=Nn.y&&Bn>=Nn.next.y){var Gn=Nn.x+(Bn-Nn.y)*(Nn.next.x-Nn.x)/(Nn.next.y-Nn.y);if(Gn<=Fn&&Gn>Un){if(Un=Gn,Gn===Fn){if(Bn===Nn.y)return Nn;if(Bn===Nn.next.y)return Nn.next}kn=Nn.x<Nn.next.x?Nn:Nn.next}}Nn=Nn.next}while(Nn!==Ln);if(!kn)return null;if(Fn===Un)return kn.prev;var Yn=kn,Hn=kn.x,Wn=kn.y,jn=1/0,Xn;for(Nn=kn.next;Nn!==Yn;)Fn>=Nn.x&&Nn.x>=Hn&&qt(Bn<Wn?Fn:Un,Bn,Hn,Wn,Bn<Wn?Un:Fn,Bn,Nn.x,Nn.y)&&((Xn=Math.abs(Bn-Nn.y)/(Fn-Nn.x))<jn||Xn===jn&&Nn.x>kn.x)&&Zt(Nn,On)&&(kn=Nn,jn=Xn),Nn=Nn.next;return kn}(Mn,Rn)){var In=$t(Rn,Mn);Wt(In,In.next)}}(Dn[Sn],Tn),Tn=Wt(Tn,Tn.next);return Tn}(rn,on,un,sn)),rn.length>80*sn){cn=fn=rn[0],hn=gn=rn[1];for(var bn=sn;bn<ln;bn+=sn)mn=rn[bn],yn=rn[bn+1],mn<cn&&(cn=mn),yn<hn&&(hn=yn),mn>fn&&(fn=mn),yn>gn&&(gn=yn);_n=Math.max(fn-cn,gn-hn)}return jt(un,pn,sn,cn,hn,_n),pn}function Ht(rn,on,sn,dn,ln){var un,pn;if(ln===0<an(rn,on,sn,dn))for(un=on;un<sn;un+=dn)pn=en(un,rn[un],rn[un+1],pn);else for(un=sn-dn;un>=on;un-=dn)pn=en(un,rn[un],rn[un+1],pn);return pn&&Qt(pn,pn.next)&&(tn(pn),pn=pn.next),pn}function Wt(rn,on){if(!rn)return rn;on||(on=rn);var dn=rn,sn;do if(sn=!1,dn.steiner||!Qt(dn,dn.next)&&0!==Kt(dn.prev,dn,dn.next))dn=dn.next;else{if(tn(dn),(dn=on=dn.prev)===dn.next)return null;sn=!0}while(sn||dn!==on);return on}function jt(rn,on,sn,dn,ln,un,pn){if(rn){!pn&&un&&function(gn,mn,yn,_n){var bn=gn;do null===bn.z&&(bn.z=Vt(bn.x,bn.y,mn,yn,_n)),bn.prevZ=bn.prev,bn.nextZ=bn.next,bn=bn.next;while(bn!==gn);bn.prevZ.nextZ=null,bn.prevZ=null,function(xn){var Dn=1,vn,Tn,En,Sn,An,wn,Cn,Pn;do{for(Tn=xn,xn=null,An=null,wn=0;Tn;){for(wn++,En=Tn,Cn=0,vn=0;vn<Dn&&(Cn++,En=En.nextZ);vn++);for(Pn=Dn;0<Cn||0<Pn&&En;)0===Cn?(Sn=En,En=En.nextZ,Pn--):0!==Pn&&En?Tn.z<=En.z?(Sn=Tn,Tn=Tn.nextZ,Cn--):(Sn=En,En=En.nextZ,Pn--):(Sn=Tn,Tn=Tn.nextZ,Cn--),An?An.nextZ=Sn:xn=Sn,Sn.prevZ=An,An=Sn;Tn=En}An.nextZ=null,Dn*=2}while(1<wn)}(bn)}(rn,dn,ln,un);for(var fn=rn,cn,hn;rn.prev!==rn.next;)if(cn=rn.prev,hn=rn.next,un?function(gn,mn,yn,_n){var bn=gn.prev,xn=gn,vn=gn.next;if(0<=Kt(bn,xn,vn))return!1;for(var Tn=bn.x<xn.x?bn.x<vn.x?bn.x:vn.x:xn.x<vn.x?xn.x:vn.x,En=bn.y<xn.y?bn.y<vn.y?bn.y:vn.y:xn.y<vn.y?xn.y:vn.y,Sn=bn.x>xn.x?bn.x>vn.x?bn.x:vn.x:xn.x>vn.x?xn.x:vn.x,An=bn.y>xn.y?bn.y>vn.y?bn.y:vn.y:xn.y>vn.y?xn.y:vn.y,wn=Vt(Tn,En,mn,yn,_n),Cn=Vt(Sn,An,mn,yn,_n),Pn=gn.nextZ;Pn&&Pn.z<=Cn;){if(Pn!==gn.prev&&Pn!==gn.next&&qt(bn.x,bn.y,xn.x,xn.y,vn.x,vn.y,Pn.x,Pn.y)&&0<=Kt(Pn.prev,Pn,Pn.next))return!1;Pn=Pn.nextZ}for(Pn=gn.prevZ;Pn&&Pn.z>=wn;){if(Pn!==gn.prev&&Pn!==gn.next&&qt(bn.x,bn.y,xn.x,xn.y,vn.x,vn.y,Pn.x,Pn.y)&&0<=Kt(Pn.prev,Pn,Pn.next))return!1;Pn=Pn.prevZ}return!0}(rn,dn,ln,un):function(gn){var mn=gn.prev,yn=gn,_n=gn.next;if(0<=Kt(mn,yn,_n))return!1;for(var bn=gn.next.next;bn!==gn.prev;){if(qt(mn.x,mn.y,yn.x,yn.y,_n.x,_n.y,bn.x,bn.y)&&0<=Kt(bn.prev,bn,bn.next))return!1;bn=bn.next}return!0}(rn))on.push(cn.i/sn),on.push(rn.i/sn),on.push(hn.i/sn),tn(rn),rn=hn.next,fn=hn.next;else if((rn=hn)===fn){pn?1===pn?jt(rn=function(gn,mn,yn){var _n=gn;do{var bn=_n.prev,xn=_n.next.next;!Qt(bn,xn)&&Jt(bn,_n,_n.next,xn)&&Zt(bn,xn)&&Zt(xn,bn)&&(mn.push(bn.i/yn),mn.push(_n.i/yn),mn.push(xn.i/yn),tn(_n),tn(_n.next),_n=gn=xn),_n=_n.next}while(_n!==gn);return _n}(rn,on,sn),on,sn,dn,ln,un,2):2==pn&&function(gn,mn,yn,_n,bn,xn){var vn=gn;do{for(var Tn=vn.next.next;Tn!==vn.prev;){if(vn.i!==Tn.i&&function(Sn,An){return Sn.next.i!==An.i&&Sn.prev.i!==An.i&&!function(wn,Cn){var Pn=wn;do{if(Pn.i!==wn.i&&Pn.next.i!==wn.i&&Pn.i!==Cn.i&&Pn.next.i!==Cn.i&&Jt(Pn,Pn.next,wn,Cn))return!0;Pn=Pn.next}while(Pn!==wn);return!1}(Sn,An)&&Zt(Sn,An)&&Zt(An,Sn)&&function(wn,Cn){var Pn=wn,Dn=!1,Mn=(wn.x+Cn.x)/2,Rn=(wn.y+Cn.y)/2;do Pn.y>Rn!=Pn.next.y>Rn&&Mn<(Pn.next.x-Pn.x)*(Rn-Pn.y)/(Pn.next.y-Pn.y)+Pn.x&&(Dn=!Dn),Pn=Pn.next;while(Pn!==wn);return Dn}(Sn,An)}(vn,Tn)){var En=$t(vn,Tn);return vn=Wt(vn,vn.next),En=Wt(En,En.next),jt(vn,mn,yn,_n,bn,xn),void jt(En,mn,yn,_n,bn,xn)}Tn=Tn.next}vn=vn.next}while(vn!==gn)}(rn,on,sn,dn,ln,un):jt(Wt(rn),on,sn,dn,ln,un,1);break}}}function zt(rn,on){return rn.x-on.x}function Vt(rn,on,sn,dn,ln){return rn=32767*(rn-sn)/ln,on=32767*(on-dn)/ln,rn=16711935&(rn|rn<<8),rn=252645135&(rn|rn<<4),rn=858993459&(rn|rn<<2),rn=1431655765&(rn|rn<<1),on=16711935&(on|on<<8),on=252645135&(on|on<<4),on=858993459&(on|on<<2),on=1431655765&(on|on<<1),rn|on<<1}function qt(rn,on,sn,dn,ln,un,pn,cn){return 0<=(ln-pn)*(on-cn)-(rn-pn)*(un-cn)&&0<=(rn-pn)*(dn-cn)-(sn-pn)*(on-cn)&&0<=(sn-pn)*(un-cn)-(ln-pn)*(dn-cn)}function Kt(rn,on,sn){return(on.y-rn.y)*(sn.x-on.x)-(on.x-rn.x)*(sn.y-on.y)}function Qt(rn,on){return rn.x===on.x&&rn.y===on.y}function Jt(rn,on,sn,dn){return!!(Qt(rn,on)&&Qt(sn,dn)||Qt(rn,dn)&&Qt(sn,on))||0<Kt(rn,on,sn)!=0<Kt(rn,on,dn)&&0<Kt(sn,dn,rn)!=0<Kt(sn,dn,on)}function Zt(rn,on){return 0>Kt(rn.prev,rn,rn.next)?0<=Kt(rn,on,rn.next)&&0<=Kt(rn,rn.prev,on):0>Kt(rn,on,rn.prev)||0>Kt(rn,rn.next,on)}function $t(rn,on){var sn=new nn(rn.i,rn.x,rn.y),dn=new nn(on.i,on.x,on.y),ln=rn.next,un=on.prev;return rn.next=on,on.prev=rn,sn.next=ln,ln.prev=sn,dn.next=sn,sn.prev=dn,un.next=dn,dn.prev=un,dn}function en(rn,on,sn,dn){var ln=new nn(rn,on,sn);return dn?(ln.next=dn.next,ln.prev=dn,dn.next.prev=ln,dn.next=ln):(ln.prev=ln,ln.next=ln),ln}function tn(rn){rn.next.prev=rn.prev,rn.prev.next=rn.next,rn.prevZ&&(rn.prevZ.nextZ=rn.nextZ),rn.nextZ&&(rn.nextZ.prevZ=rn.prevZ)}function nn(rn,on,sn){this.i=rn,this.x=on,this.y=sn,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function an(rn,on,sn,dn){for(var ln=0,un=on,pn=sn-dn;un<sn;un+=dn)ln+=(rn[pn]-rn[un])*(rn[un+1]+rn[pn+1]),pn=un;return ln}Gt.exports=Yt,Yt.deviation=function(rn,on,sn,dn){var ln=on&&on.length,un=ln?on[0]*sn:rn.length,pn=Math.abs(an(rn,0,un,sn));if(ln)for(var cn=0,hn=on.length;cn<hn;cn++){var fn=on[cn]*sn,gn=cn<hn-1?on[cn+1]*sn:rn.length;pn-=Math.abs(an(rn,fn,gn,sn))}var mn=0;for(cn=0;cn<dn.length;cn+=3){var yn=dn[cn]*sn,_n=dn[cn+1]*sn,bn=dn[cn+2]*sn;mn+=Math.abs((rn[yn]-rn[bn])*(rn[_n+1]-rn[yn+1])-(rn[yn]-rn[_n])*(rn[bn+1]-rn[yn+1]))}return 0===pn&&0===mn?0:Math.abs((mn-pn)/pn)},Yt.flatten=function(rn){for(var on=rn[0][0].length,sn={vertices:[],holes:[],dimensions:on},dn=0,ln=0;ln<rn.length;ln++){for(var un=0;un<rn[ln].length;un++)for(var pn=0;pn<on;pn++)sn.vertices.push(rn[ln][un][pn]);0<ln&&(dn+=rn[ln-1].length,sn.holes.push(dn))}return sn}},{}],3:[function(Bt,Gt){function Yt(){}function Ht(Vt,qt,Kt){this.fn=Vt,this.context=qt,this.once=Kt||!1}function Wt(){this._events=new Yt,this._eventsCount=0}var jt=Object.prototype.hasOwnProperty,zt="~";Object.create&&(Yt.prototype=Object.create(null),new Yt().__proto__||(zt=!1)),Wt.prototype.eventNames=function(){var Kt=[],Vt,qt;if(0===this._eventsCount)return Kt;for(qt in Vt=this._events)jt.call(Vt,qt)&&Kt.push(zt?qt.slice(1):qt);return Object.getOwnPropertySymbols?Kt.concat(Object.getOwnPropertySymbols(Vt)):Kt},Wt.prototype.listeners=function(Vt,qt){var Kt=zt?zt+Vt:Vt,Qt=this._events[Kt];if(qt)return!!Qt;if(!Qt)return[];if(Qt.fn)return[Qt.fn];for(var Jt=0,Zt=Qt.length,$t=Array(Zt);Jt<Zt;Jt++)$t[Jt]=Qt[Jt].fn;return $t},Wt.prototype.emit=function(Vt,qt,Kt,Qt,Jt,Zt){var $t=zt?zt+Vt:Vt;if(!this._events[$t])return!1;var nn=this._events[$t],an=arguments.length,en,tn;if(nn.fn){switch(nn.once&&this.removeListener(Vt,nn.fn,void 0,!0),an){case 1:return nn.fn.call(nn.context),!0;case 2:return nn.fn.call(nn.context,qt),!0;case 3:return nn.fn.call(nn.context,qt,Kt),!0;case 4:return nn.fn.call(nn.context,qt,Kt,Qt),!0;case 5:return nn.fn.call(nn.context,qt,Kt,Qt,Jt),!0;case 6:return nn.fn.call(nn.context,qt,Kt,Qt,Jt,Zt),!0;}for(tn=1,en=Array(an-1);tn<an;tn++)en[tn-1]=arguments[tn];nn.fn.apply(nn.context,en)}else{var on=nn.length,rn;for(tn=0;tn<on;tn++)switch(nn[tn].once&&this.removeListener(Vt,nn[tn].fn,void 0,!0),an){case 1:nn[tn].fn.call(nn[tn].context);break;case 2:nn[tn].fn.call(nn[tn].context,qt);break;case 3:nn[tn].fn.call(nn[tn].context,qt,Kt);break;case 4:nn[tn].fn.call(nn[tn].context,qt,Kt,Qt);break;default:if(!en)for(rn=1,en=Array(an-1);rn<an;rn++)en[rn-1]=arguments[rn];nn[tn].fn.apply(nn[tn].context,en);}}return!0},Wt.prototype.on=function(Vt,qt,Kt){var Qt=new Ht(qt,Kt||this),Jt=zt?zt+Vt:Vt;return this._events[Jt]?this._events[Jt].fn?this._events[Jt]=[this._events[Jt],Qt]:this._events[Jt].push(Qt):(this._events[Jt]=Qt,this._eventsCount++),this},Wt.prototype.once=function(Vt,qt,Kt){var Qt=new Ht(qt,Kt||this,!0),Jt=zt?zt+Vt:Vt;return this._events[Jt]?this._events[Jt].fn?this._events[Jt]=[this._events[Jt],Qt]:this._events[Jt].push(Qt):(this._events[Jt]=Qt,this._eventsCount++),this},Wt.prototype.removeListener=function(Vt,qt,Kt,Qt){var Jt=zt?zt+Vt:Vt;if(!this._events[Jt])return this;if(!qt)return 0==--this._eventsCount?this._events=new Yt:delete this._events[Jt],this;var Zt=this._events[Jt];if(Zt.fn)Zt.fn!==qt||Qt&&!Zt.once||Kt&&Zt.context!==Kt||(0==--this._eventsCount?this._events=new Yt:delete this._events[Jt]);else{for(var $t=0,en=[],tn=Zt.length;$t<tn;$t++)(Zt[$t].fn!==qt||Qt&&!Zt[$t].once||Kt&&Zt[$t].context!==Kt)&&en.push(Zt[$t]);en.length?this._events[Jt]=1===en.length?en[0]:en:0==--this._eventsCount?this._events=new Yt:delete this._events[Jt]}return this},Wt.prototype.removeAllListeners=function(Vt){var qt;return Vt?(qt=zt?zt+Vt:Vt,this._events[qt]&&(0==--this._eventsCount?this._events=new Yt:delete this._events[qt])):(this._events=new Yt,this._eventsCount=0),this},Wt.prototype.off=Wt.prototype.removeListener,Wt.prototype.addListener=Wt.prototype.on,Wt.prototype.setMaxListeners=function(){return this},Wt.prefixed=zt,Wt.EventEmitter=Wt,void 0!==Gt&&(Gt.exports=Wt)},{}],4:[function(Bt,Gt){!function(Yt){var Ht=/iPhone/i,Wt=/iPod/i,jt=/iPad/i,zt=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,Vt=/Android/i,qt=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,Kt=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,Qt=/Windows Phone/i,Jt=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,Zt=/BlackBerry/i,$t=/BB10/i,en=/Opera Mini/i,tn=/(CriOS|Chrome)(?=.*\bMobile\b)/i,nn=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,an=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,rn=function(dn,ln){return dn.test(ln)},on=function(dn){var ln=dn||navigator.userAgent,un=ln.split("[FBAN");if(void 0!==un[1]&&(ln=un[0]),void 0!==(un=ln.split("Twitter"))[1]&&(ln=un[0]),this.apple={phone:rn(Ht,ln),ipod:rn(Wt,ln),tablet:!rn(Ht,ln)&&rn(jt,ln),device:rn(Ht,ln)||rn(Wt,ln)||rn(jt,ln)},this.amazon={phone:rn(qt,ln),tablet:!rn(qt,ln)&&rn(Kt,ln),device:rn(qt,ln)||rn(Kt,ln)},this.android={phone:rn(qt,ln)||rn(zt,ln),tablet:!rn(qt,ln)&&!rn(zt,ln)&&(rn(Kt,ln)||rn(Vt,ln)),device:rn(qt,ln)||rn(Kt,ln)||rn(zt,ln)||rn(Vt,ln)},this.windows={phone:rn(Qt,ln),tablet:rn(Jt,ln),device:rn(Qt,ln)||rn(Jt,ln)},this.other={blackberry:rn(Zt,ln),blackberry10:rn($t,ln),opera:rn(en,ln),firefox:rn(nn,ln),chrome:rn(tn,ln),device:rn(Zt,ln)||rn($t,ln)||rn(en,ln)||rn(nn,ln)||rn(tn,ln)},this.seven_inch=rn(an,ln),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},sn=function(){var dn=new on;return dn.Class=on,dn};void 0!==Gt&&Gt.exports&&"undefined"==typeof window?Gt.exports=on:void 0!==Gt&&Gt.exports&&"undefined"!=typeof window?Gt.exports=sn():Yt.isMobile=sn()}(this)},{}],5:[function(Bt,Gt){var Yt=Object.getOwnPropertySymbols,Ht=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable;Gt.exports=function(){try{if(!Object.assign)return!1;var jt=new String("abc");if(jt[5]="de","5"===Object.getOwnPropertyNames(jt)[0])return!1;for(var zt={},Vt=0;10>Vt;Vt++)zt["_"+String.fromCharCode(Vt)]=Vt;if("0123456789"!==Object.getOwnPropertyNames(zt).map(function(Kt){return zt[Kt]}).join(""))return!1;var qt={};return"abcdefghijklmnopqrst".split("").forEach(function(Kt){qt[Kt]=Kt}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},qt)).join("")}catch(Kt){return!1}}()?Object.assign:function(jt){for(var Kt=function($t){if(null===$t||void 0===$t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object($t)}(jt),Qt=1,Vt,qt;Qt<arguments.length;Qt++){for(var Jt in Vt=Object(arguments[Qt]),Vt)Ht.call(Vt,Jt)&&(Kt[Jt]=Vt[Jt]);if(Yt){qt=Yt(Vt);for(var Zt=0;Zt<qt.length;Zt++)Wt.call(Vt,qt[Zt])&&(Kt[qt[Zt]]=Vt[qt[Zt]])}}return Kt}},{}],6:[function(Bt,Gt){var Yt=new ArrayBuffer(0),Ht=function(Wt,jt,zt,Vt){this.gl=Wt,this.buffer=Wt.createBuffer(),this.type=jt||Wt.ARRAY_BUFFER,this.drawType=Vt||Wt.STATIC_DRAW,this.data=Yt,zt&&this.upload(zt),this._updateID=0};Ht.prototype.upload=function(Wt,jt,zt){zt||this.bind();var Vt=this.gl;Wt=Wt||this.data,jt=jt||0,this.data.byteLength>=Wt.byteLength?Vt.bufferSubData(this.type,jt,Wt):Vt.bufferData(this.type,Wt,this.drawType),this.data=Wt},Ht.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},Ht.createVertexBuffer=function(Wt,jt,zt){return new Ht(Wt,Wt.ARRAY_BUFFER,jt,zt)},Ht.createIndexBuffer=function(Wt,jt,zt){return new Ht(Wt,Wt.ELEMENT_ARRAY_BUFFER,jt,zt)},Ht.create=function(Wt,jt,zt,Vt){return new Ht(Wt,jt,zt,Vt)},Ht.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},Gt.exports=Ht},{}],7:[function(Bt,Gt){var Yt=Bt("./GLTexture"),Ht=function(Wt,jt,zt){this.gl=Wt,this.framebuffer=Wt.createFramebuffer(),this.stencil=null,this.texture=null,this.width=jt||100,this.height=zt||100};Ht.prototype.enableTexture=function(Wt){var jt=this.gl;this.texture=Wt||new Yt(jt),this.texture.bind(),this.bind(),jt.framebufferTexture2D(jt.FRAMEBUFFER,jt.COLOR_ATTACHMENT0,jt.TEXTURE_2D,this.texture.texture,0)},Ht.prototype.enableStencil=function(){if(!this.stencil){var Wt=this.gl;this.stencil=Wt.createRenderbuffer(),Wt.bindRenderbuffer(Wt.RENDERBUFFER,this.stencil),Wt.framebufferRenderbuffer(Wt.FRAMEBUFFER,Wt.DEPTH_STENCIL_ATTACHMENT,Wt.RENDERBUFFER,this.stencil),Wt.renderbufferStorage(Wt.RENDERBUFFER,Wt.DEPTH_STENCIL,this.width,this.height)}},Ht.prototype.clear=function(Wt,jt,zt,Vt){this.bind();var qt=this.gl;qt.clearColor(Wt,jt,zt,Vt),qt.clear(qt.COLOR_BUFFER_BIT|qt.DEPTH_BUFFER_BIT)},Ht.prototype.bind=function(){var Wt=this.gl;Wt.bindFramebuffer(Wt.FRAMEBUFFER,this.framebuffer)},Ht.prototype.unbind=function(){var Wt=this.gl;Wt.bindFramebuffer(Wt.FRAMEBUFFER,null)},Ht.prototype.resize=function(Wt,jt){var zt=this.gl;this.width=Wt,this.height=jt,this.texture&&this.texture.uploadData(null,Wt,jt),this.stencil&&(zt.bindRenderbuffer(zt.RENDERBUFFER,this.stencil),zt.renderbufferStorage(zt.RENDERBUFFER,zt.DEPTH_STENCIL,Wt,jt))},Ht.prototype.destroy=function(){var Wt=this.gl;this.texture&&this.texture.destroy(),Wt.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},Ht.createRGBA=function(Wt,jt,zt){var qt=Yt.fromData(Wt,null,jt,zt);qt.enableNearestScaling(),qt.enableWrapClamp();var Kt=new Ht(Wt,jt,zt);return Kt.enableTexture(qt),Kt.unbind(),Kt},Ht.createFloat32=function(Wt,jt,zt,Vt){var qt=new Yt.fromData(Wt,Vt,jt,zt);qt.enableNearestScaling(),qt.enableWrapClamp();var Kt=new Ht(Wt,jt,zt);return Kt.enableTexture(qt),Kt.unbind(),Kt},Gt.exports=Ht},{"./GLTexture":9}],8:[function(Bt,Gt){var Yt=Bt("./shader/compileProgram"),Ht=Bt("./shader/extractAttributes"),Wt=Bt("./shader/extractUniforms"),jt=Bt("./shader/setPrecision"),zt=Bt("./shader/generateUniformAccessObject"),Vt=function(qt,Kt,Qt,Jt,Zt){this.gl=qt,Jt&&(Kt=jt(Kt,Jt),Qt=jt(Qt,Jt)),this.program=Yt(qt,Kt,Qt,Zt),this.attributes=Ht(qt,this.program),this.uniformData=Wt(qt,this.program),this.uniforms=zt(qt,this.uniformData)};Vt.prototype.bind=function(){this.gl.useProgram(this.program)},Vt.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},Gt.exports=Vt},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18,"./shader/setPrecision":22}],9:[function(Bt,Gt){var Yt=function(Wt,jt,zt,Vt,qt){this.gl=Wt,this.texture=Wt.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=jt||-1,this.height=zt||-1,this.format=Vt||Wt.RGBA,this.type=qt||Wt.UNSIGNED_BYTE};Yt.prototype.upload=function(Wt){this.bind();var jt=this.gl;jt.pixelStorei(jt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var zt=Wt.videoWidth||Wt.width,Vt=Wt.videoHeight||Wt.height;Vt!==this.height||zt!==this.width?jt.texImage2D(jt.TEXTURE_2D,0,this.format,this.format,this.type,Wt):jt.texSubImage2D(jt.TEXTURE_2D,0,0,0,this.format,this.type,Wt),this.width=zt,this.height=Vt};var Ht=!1;Yt.prototype.uploadData=function(Wt,jt,zt){this.bind();var Vt=this.gl;if(Wt instanceof Float32Array){if(!Ht){if(!Vt.getExtension("OES_texture_float"))throw new Error("floating point textures not available");Ht=!0}this.type=Vt.FLOAT}else this.type=this.type||Vt.UNSIGNED_BYTE;Vt.pixelStorei(Vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),jt!==this.width||zt!==this.height?Vt.texImage2D(Vt.TEXTURE_2D,0,this.format,jt,zt,0,this.format,this.type,Wt||null):Vt.texSubImage2D(Vt.TEXTURE_2D,0,0,0,jt,zt,this.format,this.type,Wt||null),this.width=jt,this.height=zt},Yt.prototype.bind=function(Wt){var jt=this.gl;void 0!==Wt&&jt.activeTexture(jt.TEXTURE0+Wt),jt.bindTexture(jt.TEXTURE_2D,this.texture)},Yt.prototype.unbind=function(){var Wt=this.gl;Wt.bindTexture(Wt.TEXTURE_2D,null)},Yt.prototype.minFilter=function(Wt){var jt=this.gl;this.bind(),this.mipmap?jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MIN_FILTER,Wt?jt.LINEAR_MIPMAP_LINEAR:jt.NEAREST_MIPMAP_NEAREST):jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MIN_FILTER,Wt?jt.LINEAR:jt.NEAREST)},Yt.prototype.magFilter=function(Wt){var jt=this.gl;this.bind(),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MAG_FILTER,Wt?jt.LINEAR:jt.NEAREST)},Yt.prototype.enableMipmap=function(){var Wt=this.gl;this.bind(),this.mipmap=!0,Wt.generateMipmap(Wt.TEXTURE_2D)},Yt.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},Yt.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},Yt.prototype.enableWrapClamp=function(){var Wt=this.gl;this.bind(),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_S,Wt.CLAMP_TO_EDGE),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_T,Wt.CLAMP_TO_EDGE)},Yt.prototype.enableWrapRepeat=function(){var Wt=this.gl;this.bind(),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_S,Wt.REPEAT),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_T,Wt.REPEAT)},Yt.prototype.enableWrapMirrorRepeat=function(){var Wt=this.gl;this.bind(),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_S,Wt.MIRRORED_REPEAT),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_T,Wt.MIRRORED_REPEAT)},Yt.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},Yt.fromSource=function(Wt,jt,zt){var Vt=new Yt(Wt);return Vt.premultiplyAlpha=zt||!1,Vt.upload(jt),Vt},Yt.fromData=function(Wt,jt,zt,Vt){var qt=new Yt(Wt);return qt.uploadData(jt,zt,Vt),qt},Gt.exports=Yt},{}],10:[function(Bt,Gt){function Yt(Wt,jt){if(this.nativeVaoExtension=null,Yt.FORCE_NATIVE||(this.nativeVaoExtension=Wt.getExtension("OES_vertex_array_object")||Wt.getExtension("MOZ_OES_vertex_array_object")||Wt.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=jt,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var zt=Wt.getParameter(Wt.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:Array(zt),attribState:Array(zt)}}this.gl=Wt,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var Ht=Bt("./setVertexAttribArrays");Yt.prototype.constructor=Yt,Gt.exports=Yt,Yt.FORCE_NATIVE=!1,Yt.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},Yt.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},Yt.prototype.activate=function(){for(var Wt=this.gl,jt=null,zt=0,Vt;zt<this.attributes.length;zt++)Vt=this.attributes[zt],jt!==Vt.buffer&&(Vt.buffer.bind(),jt=Vt.buffer),Wt.vertexAttribPointer(Vt.attribute.location,Vt.attribute.size,Vt.type||Wt.FLOAT,Vt.normalized||!1,Vt.stride||0,Vt.start||0);return Ht(Wt,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},Yt.prototype.addAttribute=function(Wt,jt,zt,Vt,qt,Kt){return this.attributes.push({buffer:Wt,attribute:jt,location:jt.location,type:zt||this.gl.FLOAT,normalized:Vt||!1,stride:qt||0,start:Kt||0}),this.dirty=!0,this},Yt.prototype.addIndex=function(Wt){return this.indexBuffer=Wt,this.dirty=!0,this},Yt.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},Yt.prototype.draw=function(Wt,jt,zt){var Vt=this.gl;return this.indexBuffer?Vt.drawElements(Wt,jt||this.indexBuffer.data.length,Vt.UNSIGNED_SHORT,2*(zt||0)):Vt.drawArrays(Wt,zt,jt||this.getSize()),this},Yt.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},Yt.prototype.getSize=function(){var Wt=this.attributes[0];return Wt.buffer.data.length/(Wt.stride/4||Wt.attribute.size)}},{"./setVertexAttribArrays":13}],11:[function(Bt,Gt){Gt.exports=function(Yt,Ht){var Wt=Yt.getContext("webgl",Ht)||Yt.getContext("experimental-webgl",Ht);if(!Wt)throw new Error("This browser does not support webGL. Try using the canvas renderer");return Wt}},{}],12:[function(Bt,Gt){var Yt={createContext:Bt("./createContext"),setVertexAttribArrays:Bt("./setVertexAttribArrays"),GLBuffer:Bt("./GLBuffer"),GLFramebuffer:Bt("./GLFramebuffer"),GLShader:Bt("./GLShader"),GLTexture:Bt("./GLTexture"),VertexArrayObject:Bt("./VertexArrayObject"),shader:Bt("./shader")};void 0!==Gt&&Gt.exports&&(Gt.exports=Yt),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=Yt)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(Bt,Gt){Gt.exports=function(Yt,Ht,Wt){var jt;if(Wt){var zt=Wt.tempAttribState,Vt=Wt.attribState;for(jt=0;jt<zt.length;jt++)zt[jt]=!1;for(jt=0;jt<Ht.length;jt++)zt[Ht[jt].attribute.location]=!0;for(jt=0;jt<Vt.length;jt++)Vt[jt]!==zt[jt]&&(Vt[jt]=zt[jt],Wt.attribState[jt]?Yt.enableVertexAttribArray(jt):Yt.disableVertexAttribArray(jt))}else for(jt=0;jt<Ht.length;jt++){var qt=Ht[jt];Yt.enableVertexAttribArray(qt.attribute.location)}}},{}],14:[function(Bt,Gt){var Yt=function(Ht,Wt,jt){var zt=Ht.createShader(Wt);return Ht.shaderSource(zt,jt),Ht.compileShader(zt),Ht.getShaderParameter(zt,Ht.COMPILE_STATUS)?zt:(console.log(Ht.getShaderInfoLog(zt)),null)};Gt.exports=function(Ht,Wt,jt,zt){var Vt=Yt(Ht,Ht.VERTEX_SHADER,Wt),qt=Yt(Ht,Ht.FRAGMENT_SHADER,jt),Kt=Ht.createProgram();if(Ht.attachShader(Kt,Vt),Ht.attachShader(Kt,qt),zt)for(var Qt in zt)Ht.bindAttribLocation(Kt,zt[Qt],Qt);return Ht.linkProgram(Kt),Ht.getProgramParameter(Kt,Ht.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",Ht.getProgramParameter(Kt,Ht.VALIDATE_STATUS)),console.error("gl.getError()",Ht.getError()),""!==Ht.getProgramInfoLog(Kt)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",Ht.getProgramInfoLog(Kt)),Ht.deleteProgram(Kt),Kt=null),Ht.deleteShader(Vt),Ht.deleteShader(qt),Kt}},{}],15:[function(Bt,Gt){var Yt=function(Ht){for(var Wt=Array(Ht),jt=0;jt<Wt.length;jt++)Wt[jt]=!1;return Wt};Gt.exports=function(Ht,Wt){return"float"===Ht?0:"vec2"===Ht?new Float32Array(2*Wt):"vec3"===Ht?new Float32Array(3*Wt):"vec4"===Ht?new Float32Array(4*Wt):"int"===Ht||"sampler2D"===Ht?0:"ivec2"===Ht?new Int32Array(2*Wt):"ivec3"===Ht?new Int32Array(3*Wt):"ivec4"===Ht?new Int32Array(4*Wt):"bool"!=Ht&&("bvec2"===Ht?Yt(2*Wt):"bvec3"===Ht?Yt(3*Wt):"bvec4"===Ht?Yt(4*Wt):"mat2"===Ht?new Float32Array([1,0,0,1]):"mat3"===Ht?new Float32Array([1,0,0,0,1,0,0,0,1]):"mat4"===Ht?new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):void 0)}},{}],16:[function(Bt,Gt){var Yt=Bt("./mapType"),Ht=Bt("./mapSize"),Wt=function(jt,zt,Vt,qt){gl.vertexAttribPointer(this.location,this.size,jt||gl.FLOAT,zt||!1,Vt||0,qt||0)};Gt.exports=function(jt,zt){for(var Vt={},qt=jt.getProgramParameter(zt,jt.ACTIVE_ATTRIBUTES),Kt=0;Kt<qt;Kt++){var Qt=jt.getActiveAttrib(zt,Kt),Jt=Yt(jt,Qt.type);Vt[Qt.name]={type:Jt,size:Ht(Jt),location:jt.getAttribLocation(zt,Qt.name),pointer:Wt}}return Vt}},{"./mapSize":20,"./mapType":21}],17:[function(Bt,Gt){var Yt=Bt("./mapType"),Ht=Bt("./defaultValue");Gt.exports=function(Wt,jt){for(var zt={},Vt=Wt.getProgramParameter(jt,Wt.ACTIVE_UNIFORMS),qt=0;qt<Vt;qt++){var Kt=Wt.getActiveUniform(jt,qt),Qt=Kt.name.replace(/\[.*?\]/,""),Jt=Yt(Wt,Kt.type);zt[Qt]={type:Jt,size:Kt.size,location:Wt.getUniformLocation(jt,Qt),value:Ht(Jt,Kt.size)}}return zt}},{"./defaultValue":15,"./mapType":21}],18:[function(Bt,Gt){var Yt=function(Kt){var Qt=jt.replace("%%",Kt);return new Function(Qt)},Ht=function(Kt,Qt){var Zt=zt.replace(/%%/g,Kt),Jt;return(Jt=1===Qt.size?Vt[Qt.type]:qt[Qt.type])&&(Zt+="\nthis.gl."+Jt+";"),new Function("value",Zt)},Wt=function(Kt,Qt){for(var Jt=Qt,Zt=0,$t;Zt<Kt.length-1;Zt++)$t=Jt[Kt[Zt]]||{data:{}},Jt[Kt[Zt]]=$t,Jt=$t;return Jt},jt=["return this.data.%%.value;"].join("\n"),zt=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),Vt={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},qt={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};Gt.exports=function(Kt,Qt){for(var Jt={data:{},gl:Kt},Zt=Object.keys(Qt),$t=0;$t<Zt.length;$t++){var en=Zt[$t],tn=en.split("."),nn=tn[tn.length-1],an=Wt(tn,Jt),rn=Qt[en];an.data[nn]=rn,an.gl=Kt,Object.defineProperty(an,nn,{get:Yt(nn),set:Ht(nn,rn)})}return Jt}},{}],19:[function(Bt,Gt){Gt.exports={compileProgram:Bt("./compileProgram"),defaultValue:Bt("./defaultValue"),extractAttributes:Bt("./extractAttributes"),extractUniforms:Bt("./extractUniforms"),generateUniformAccessObject:Bt("./generateUniformAccessObject"),setPrecision:Bt("./setPrecision"),mapSize:Bt("./mapSize"),mapType:Bt("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21,"./setPrecision":22}],20:[function(Bt,Gt){var Yt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};Gt.exports=function(Ht){return Yt[Ht]}},{}],21:[function(Bt,Gt){var Yt=null,Ht={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};Gt.exports=function(Wt,jt){if(!Yt){var zt=Object.keys(Ht);Yt={};for(var Vt=0,qt;Vt<zt.length;++Vt)qt=zt[Vt],Yt[Wt[qt]]=Ht[qt]}return Yt[jt]}},{}],22:[function(Bt,Gt){Gt.exports=function(Yt,Ht){return"precision"===Yt.substring(0,9)?Yt:"precision "+Ht+" float;\n"+Yt}},{}],23:[function(Bt,Gt,Xt){(function(Yt){function Ht(qt,Kt){for(var Qt=0,Jt=qt.length-1,Zt;0<=Jt;Jt--)Zt=qt[Jt],"."===Zt?qt.splice(Jt,1):".."===Zt?(qt.splice(Jt,1),Qt++):Qt&&(qt.splice(Jt,1),Qt--);if(Kt)for(;Qt--;Qt)qt.unshift("..");return qt}function Wt(qt,Kt){if(qt.filter)return qt.filter(Kt);for(var Qt=[],Jt=0;Jt<qt.length;Jt++)Kt(qt[Jt],Jt,qt)&&Qt.push(qt[Jt]);return Qt}var jt=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,zt=function(qt){return jt.exec(qt).slice(1)};Xt.resolve=function(){for(var qt="",Kt=!1,Qt=arguments.length-1,Jt;-1<=Qt&&!Kt;Qt--){if(Jt=0<=Qt?arguments[Qt]:Yt.cwd(),"string"!=typeof Jt)throw new TypeError("Arguments to path.resolve must be strings");Jt&&(qt=Jt+"/"+qt,Kt="/"===Jt.charAt(0))}return qt=Ht(Wt(qt.split("/"),function(Zt){return!!Zt}),!Kt).join("/"),(Kt?"/":"")+qt||"."},Xt.normalize=function(qt){var Kt=Xt.isAbsolute(qt),Qt="/"===Vt(qt,-1);return(qt=Ht(Wt(qt.split("/"),function(Jt){return!!Jt}),!Kt).join("/"))||Kt||(qt="."),qt&&Qt&&(qt+="/"),(Kt?"/":"")+qt},Xt.isAbsolute=function(qt){return"/"===qt.charAt(0)},Xt.join=function(){var qt=Array.prototype.slice.call(arguments,0);return Xt.normalize(Wt(qt,function(Kt){if("string"!=typeof Kt)throw new TypeError("Arguments to path.join must be strings");return Kt}).join("/"))},Xt.relative=function(qt,Kt){function Qt(an){for(var rn=0;rn<an.length&&""===an[rn];rn++);for(var on=an.length-1;0<=on&&""===an[on];on--);return rn>on?[]:an.slice(rn,on-rn+1)}qt=Xt.resolve(qt).substr(1),Kt=Xt.resolve(Kt).substr(1);for(var Jt=Qt(qt.split("/")),Zt=Qt(Kt.split("/")),$t=Math.min(Jt.length,Zt.length),en=$t,tn=0;tn<$t;tn++)if(Jt[tn]!==Zt[tn]){en=tn;break}var nn=[];for(tn=en;tn<Jt.length;tn++)nn.push("..");return(nn=nn.concat(Zt.slice(en))).join("/")},Xt.sep="/",Xt.delimiter=":",Xt.dirname=function(qt){var Kt=zt(qt),Qt=Kt[0],Jt=Kt[1];return Qt||Jt?(Jt&&(Jt=Jt.substr(0,Jt.length-1)),Qt+Jt):"."},Xt.basename=function(qt,Kt){var Qt=zt(qt)[2];return Kt&&Qt.substr(-1*Kt.length)===Kt&&(Qt=Qt.substr(0,Qt.length-Kt.length)),Qt},Xt.extname=function(qt){return zt(qt)[3]};var Vt=function(qt,Kt,Qt){return qt.substr(Kt,Qt)}}).call(this,Bt("_process"))},{_process:24}],24:[function(Bt,Gt){function Yt(){throw new Error("setTimeout has not been defined")}function Ht(){throw new Error("clearTimeout has not been defined")}function Wt(nn){if(Kt===setTimeout)return setTimeout(nn,0);if((Kt===Yt||!Kt)&&setTimeout)return Kt=setTimeout,setTimeout(nn,0);try{return Kt(nn,0)}catch(an){try{return Kt.call(null,nn,0)}catch(rn){return Kt.call(this,nn,0)}}}function jt(){en&&Zt&&(en=!1,Zt.length?$t=Zt.concat($t):tn=-1,$t.length&&zt())}function zt(){if(!en){var nn=Wt(jt);en=!0;for(var an=$t.length;an;){for(Zt=$t,$t=[];++tn<an;)Zt&&Zt[tn].run();tn=-1,an=$t.length}Zt=null,en=!1,function(rn){if(Qt===clearTimeout)return clearTimeout(rn);if((Qt===Ht||!Qt)&&clearTimeout)return Qt=clearTimeout,clearTimeout(rn);try{Qt(rn)}catch(on){try{return Qt.call(null,rn)}catch(sn){return Qt.call(this,rn)}}}(nn)}}function Vt(nn,an){this.fun=nn,this.array=an}function qt(){}var Jt=Gt.exports={},Kt,Qt;!function(){try{Kt="function"==typeof setTimeout?setTimeout:Yt}catch(nn){Kt=Yt}try{Qt="function"==typeof clearTimeout?clearTimeout:Ht}catch(nn){Qt=Ht}}();var $t=[],en=!1,tn=-1,Zt;Jt.nextTick=function(nn){var an=Array(arguments.length-1);if(1<arguments.length)for(var rn=1;rn<arguments.length;rn++)an[rn-1]=arguments[rn];$t.push(new Vt(nn,an)),1!==$t.length||en||Wt(zt)},Vt.prototype.run=function(){this.fun.apply(null,this.array)},Jt.title="browser",Jt.browser=!0,Jt.env={},Jt.argv=[],Jt.version="",Jt.versions={},Jt.on=qt,Jt.addListener=qt,Jt.once=qt,Jt.off=qt,Jt.removeListener=qt,Jt.removeAllListeners=qt,Jt.emit=qt,Jt.prependListener=qt,Jt.prependOnceListener=qt,Jt.listeners=function(){return[]},Jt.binding=function(){throw new Error("process.binding is not supported")},Jt.cwd=function(){return"/"},Jt.chdir=function(){throw new Error("process.chdir is not supported")},Jt.umask=function(){return 0}},{}],25:[function(Bt,Gt,Xt){(function(Yt){!function(Ht){function Wt(Tn){throw new RangeError(_n[Tn])}function jt(Tn,En){for(var Sn=Tn.length,An=[];Sn--;)An[Sn]=En(Tn[Sn]);return An}function zt(Tn,En){var Sn=Tn.split("@"),An="";return 1<Sn.length&&(An=Sn[0]+"@",Tn=Sn[1]),An+jt((Tn=Tn.replace(yn,".")).split("."),En).join(".")}function Vt(Tn){for(var An=[],wn=0,Cn=Tn.length,En,Sn;wn<Cn;)55296<=(En=Tn.charCodeAt(wn++))&&56319>=En&&wn<Cn?56320==(64512&(Sn=Tn.charCodeAt(wn++)))?An.push(((1023&En)<<10)+(1023&Sn)+65536):(An.push(En),wn--):An.push(En);return An}function qt(Tn){return jt(Tn,function(En){var Sn="";return 65535<En&&(Sn+=vn(55296|1023&(En-=65536)>>>10),En=56320|1023&En),Sn+=vn(En)}).join("")}function Kt(Tn){return 10>Tn-48?Tn-22:26>Tn-65?Tn-65:26>Tn-97?Tn-97:sn}function Qt(Tn,En){return Tn+22+75*(26>Tn)-((0!=En)<<5)}function Jt(Tn,En,Sn){var An=0;for(Tn=Sn?xn(Tn/700):Tn>>1,Tn+=xn(Tn/En);Tn>bn*ln>>1;An+=sn)Tn=xn(Tn/bn);return xn(An+(bn+1)*Tn/(Tn+38))}function Zt(Tn){var On=[],Ln=Tn.length,kn=0,Nn=hn,Fn=cn,En,Sn,An,wn,Cn,Pn,Dn,Mn,Rn,In;for(0>(Sn=Tn.lastIndexOf(fn))&&(Sn=0),An=0;An<Sn;++An)128<=Tn.charCodeAt(An)&&Wt("not-basic"),On.push(Tn.charCodeAt(An));for(wn=0<Sn?Sn+1:0;wn<Ln;){for(Cn=kn,Pn=1,Dn=sn;wn>=Ln&&Wt("invalid-input"),((Mn=Kt(Tn.charCodeAt(wn++)))>=sn||Mn>xn((on-kn)/Pn))&&Wt("overflow"),kn+=Mn*Pn,Rn=Dn<=Fn?dn:Dn>=Fn+ln?ln:Dn-Fn,!(Mn<Rn);Dn+=sn)Pn>xn(on/(In=sn-Rn))&&Wt("overflow"),Pn*=In;Fn=Jt(kn-Cn,En=On.length+1,0==Cn),xn(kn/En)>on-Nn&&Wt("overflow"),Nn+=xn(kn/En),kn%=En,On.splice(kn++,0,Nn)}return qt(On)}function $t(Tn){var Bn=[],En,Sn,An,wn,Cn,Pn,Dn,Mn,Rn,In,On,Ln,kn,Nn,Fn;for(Ln=(Tn=Vt(Tn)).length,En=hn,Sn=0,Cn=cn,Pn=0;Pn<Ln;++Pn)128>(On=Tn[Pn])&&Bn.push(vn(On));for(An=wn=Bn.length,wn&&Bn.push(fn);An<Ln;){for(Dn=on,Pn=0;Pn<Ln;++Pn)(On=Tn[Pn])>=En&&On<Dn&&(Dn=On);for(Dn-En>xn((on-Sn)/(kn=An+1))&&Wt("overflow"),Sn+=(Dn-En)*kn,En=Dn,Pn=0;Pn<Ln;++Pn)if((On=Tn[Pn])<En&&++Sn>on&&Wt("overflow"),On==En){for(Mn=Sn,Rn=sn;In=Rn<=Cn?dn:Rn>=Cn+ln?ln:Rn-Cn,!(Mn<In);Rn+=sn)Fn=Mn-In,Nn=sn-In,Bn.push(vn(Qt(In+Fn%Nn,0))),Mn=xn(Fn/Nn);Bn.push(vn(Qt(Mn,0))),Cn=Jt(Sn,kn,An==wn),Sn=0,++An}++Sn,++En}return Bn.join("")}var en="object"==typeof Xt&&Xt&&!Xt.nodeType&&Xt,tn="object"==typeof Gt&&Gt&&!Gt.nodeType&&Gt,nn="object"==typeof Yt&&Yt;nn.global!==nn&&nn.window!==nn&&nn.self!==nn||(Ht=nn);var on=2147483647,sn=36,dn=1,ln=26,cn=72,hn=128,fn="-",gn=/^xn--/,mn=/[^\x20-\x7E]/,yn=/[\x2E\u3002\uFF0E\uFF61]/g,_n={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},bn=sn-dn,xn=Math.floor,vn=String.fromCharCode,an,rn;if(!(an={version:"1.4.1",ucs2:{decode:Vt,encode:qt},decode:Zt,encode:$t,toASCII:function(Tn){return zt(Tn,function(En){return mn.test(En)?"xn--"+$t(En):En})},toUnicode:function(Tn){return zt(Tn,function(En){return gn.test(En)?Zt(En.slice(4).toLowerCase()):En})}},en&&tn))Ht.punycode=an;else if(Gt.exports==en)tn.exports=an;else for(rn in an)an.hasOwnProperty(rn)&&(en[rn]=an[rn])}(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],26:[function(Bt,Gt){function Yt(Wt,jt){return Object.prototype.hasOwnProperty.call(Wt,jt)}Gt.exports=function(Wt,jt,zt,Vt){jt=jt||"&",zt=zt||"=";var qt={};if("string"!=typeof Wt||0===Wt.length)return qt;var Kt=/\+/g;Wt=Wt.split(jt);var Qt=1e3;Vt&&"number"==typeof Vt.maxKeys&&(Qt=Vt.maxKeys);var Jt=Wt.length;0<Qt&&Jt>Qt&&(Jt=Qt);for(var Zt=0;Zt<Jt;++Zt){var an=Wt[Zt].replace(Kt,"%20"),rn=an.indexOf(zt),$t,en,tn,nn;0<=rn?($t=an.substr(0,rn),en=an.substr(rn+1)):($t=an,en=""),tn=decodeURIComponent($t),nn=decodeURIComponent(en),Yt(qt,tn)?Ht(qt[tn])?qt[tn].push(nn):qt[tn]=[qt[tn],nn]:qt[tn]=nn}return qt};var Ht=Array.isArray||function(Wt){return"[object Array]"===Object.prototype.toString.call(Wt)}},{}],27:[function(Bt,Gt){function Yt(zt,Vt){if(zt.map)return zt.map(Vt);for(var qt=[],Kt=0;Kt<zt.length;Kt++)qt.push(Vt(zt[Kt],Kt));return qt}var Ht=function(zt){switch(typeof zt){case"string":return zt;case"boolean":return zt?"true":"false";case"number":return isFinite(zt)?zt:"";default:return"";}};Gt.exports=function(zt,Vt,qt,Kt){return Vt=Vt||"&",qt=qt||"=",null===zt&&(zt=void 0),"object"==typeof zt?Yt(jt(zt),function(Qt){var Jt=encodeURIComponent(Ht(Qt))+qt;return Wt(zt[Qt])?Yt(zt[Qt],function(Zt){return Jt+encodeURIComponent(Ht(Zt))}).join(Vt):Jt+encodeURIComponent(Ht(zt[Qt]))}).join(Vt):Kt?encodeURIComponent(Ht(Kt))+qt+encodeURIComponent(Ht(zt)):""};var Wt=Array.isArray||function(zt){return"[object Array]"===Object.prototype.toString.call(zt)},jt=Object.keys||function(zt){var Vt=[];for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&Vt.push(qt);return Vt}},{}],28:[function(Bt,Gt,Xt){Xt.decode=Xt.parse=Bt("./decode"),Xt.encode=Xt.stringify=Bt("./encode")},{"./decode":26,"./encode":27}],29:[function(Bt,Gt,Xt){function Yt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Ht(on,sn,dn){if(on&&jt.isObject(on)&&on instanceof Yt)return on;var ln=new Yt;return ln.parse(on,sn,dn),ln}var Wt=Bt("punycode"),jt=Bt("./util");Xt.parse=Ht,Xt.resolve=function(on,sn){return Ht(on,!1,!0).resolve(sn)},Xt.resolveObject=function(on,sn){return on?Ht(on,!1,!0).resolveObject(sn):sn},Xt.format=function(on){return jt.isString(on)&&(on=Ht(on)),on instanceof Yt?on.format():Yt.prototype.format.call(on)},Xt.Url=Yt;var zt=/^([a-z0-9.+-]+:)/i,Vt=/:[0-9]*$/,qt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Kt=["{","}","|","\\","^","`"].concat(["<",">","\"","`"," ","\r","\n","\t"]),Qt=["'"].concat(Kt),Jt=["%","/","?",";","#"].concat(Qt),Zt=["/","?","#"],$t=/^[+a-z0-9A-Z_-]{0,63}$/,en=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,tn={javascript:!0,"javascript:":!0},nn={javascript:!0,"javascript:":!0},an={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},rn=Bt("querystring");Yt.prototype.parse=function(on,sn,dn){if(!jt.isString(on))throw new TypeError("Parameter 'url' must be a string, not "+typeof on);var ln=on.indexOf("?"),un=-1!==ln&&ln<on.indexOf("#")?"?":"#",pn=on.split(un);pn[0]=pn[0].replace(/\\/g,"/");var cn=on=pn.join(un);if(cn=cn.trim(),!dn&&1===on.split("#").length){var hn=qt.exec(cn);if(hn)return this.path=cn,this.href=cn,this.pathname=hn[1],hn[2]?(this.search=hn[2],this.query=sn?rn.parse(this.search.substr(1)):this.search.substr(1)):sn&&(this.search="",this.query={}),this}var fn=zt.exec(cn);if(fn){var gn=(fn=fn[0]).toLowerCase();this.protocol=gn,cn=cn.substr(fn.length)}if(dn||fn||cn.match(/^\/\/[^@\/]+@[^@\/]+/)){var mn="//"===cn.substr(0,2);!mn||fn&&nn[fn]||(cn=cn.substr(2),this.slashes=!0)}if(!nn[fn]&&(mn||fn&&!an[fn])){for(var yn=-1,_n=0;_n<Zt.length;_n++)-1!==(vn=cn.indexOf(Zt[_n]))&&(-1===yn||vn<yn)&&(yn=vn);var bn,xn;for(-1!==(xn=-1===yn?cn.lastIndexOf("@"):cn.lastIndexOf("@",yn))&&(bn=cn.slice(0,xn),cn=cn.slice(xn+1),this.auth=decodeURIComponent(bn)),yn=-1,_n=0;_n<Jt.length;_n++){var vn;-1!==(vn=cn.indexOf(Jt[_n]))&&(-1===yn||vn<yn)&&(yn=vn)}-1===yn&&(yn=cn.length),this.host=cn.slice(0,yn),cn=cn.slice(yn),this.parseHost(),this.hostname=this.hostname||"";var Tn="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Tn)for(var En=this.hostname.split(/\./),Sn=(_n=0,En.length),An;_n<Sn;_n++)if(An=En[_n],An&&!An.match($t)){for(var wn="",Cn=0,Pn=An.length;Cn<Pn;Cn++)wn+=127<An.charCodeAt(Cn)?"x":An[Cn];if(!wn.match($t)){var Dn=En.slice(0,_n),Mn=En.slice(_n+1),Rn=An.match(en);Rn&&(Dn.push(Rn[1]),Mn.unshift(Rn[2])),Mn.length&&(cn="/"+Mn.join(".")+cn),this.hostname=Dn.join(".");break}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),Tn||(this.hostname=Wt.toASCII(this.hostname));var In=this.port?":"+this.port:"",On=this.hostname||"";this.host=On+In,this.href+=this.host,Tn&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==cn[0]&&(cn="/"+cn))}if(!tn[gn])for(_n=0,Sn=Qt.length;_n<Sn;_n++){var Ln=Qt[_n];if(-1!==cn.indexOf(Ln)){var kn=encodeURIComponent(Ln);kn===Ln&&(kn=escape(Ln)),cn=cn.split(Ln).join(kn)}}var Nn=cn.indexOf("#");-1!==Nn&&(this.hash=cn.substr(Nn),cn=cn.slice(0,Nn));var Fn=cn.indexOf("?");if(-1===Fn?sn&&(this.search="",this.query={}):(this.search=cn.substr(Fn),this.query=cn.substr(Fn+1),sn&&(this.query=rn.parse(this.query)),cn=cn.slice(0,Fn)),cn&&(this.pathname=cn),an[gn]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){In=this.pathname||"";var Bn=this.search||"";this.path=In+Bn}return this.href=this.format(),this},Yt.prototype.format=function(){var on=this.auth||"";on&&(on=(on=encodeURIComponent(on)).replace(/%3A/i,":"),on+="@");var sn=this.protocol||"",dn=this.pathname||"",ln=this.hash||"",un=!1,pn="";this.host?un=on+this.host:this.hostname&&(un=on+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(un+=":"+this.port)),this.query&&jt.isObject(this.query)&&Object.keys(this.query).length&&(pn=rn.stringify(this.query));var cn=this.search||pn&&"?"+pn||"";return sn&&":"!==sn.substr(-1)&&(sn+=":"),this.slashes||(!sn||an[sn])&&!1!==un?(un="//"+(un||""),dn&&"/"!==dn.charAt(0)&&(dn="/"+dn)):un||(un=""),ln&&"#"!==ln.charAt(0)&&(ln="#"+ln),cn&&"?"!==cn.charAt(0)&&(cn="?"+cn),dn=dn.replace(/[?#]/g,function(hn){return encodeURIComponent(hn)}),cn=cn.replace("#","%23"),sn+un+dn+cn+ln},Yt.prototype.resolve=function(on){return this.resolveObject(Ht(on,!1,!0)).format()},Yt.prototype.resolveObject=function(on){if(jt.isString(on)){var sn=new Yt;sn.parse(on,!1,!0),on=sn}for(var dn=new Yt,ln=Object.keys(this),un=0,pn;un<ln.length;un++)pn=ln[un],dn[pn]=this[pn];if(dn.hash=on.hash,""===on.href)return dn.href=dn.format(),dn;if(on.slashes&&!on.protocol){for(var cn=Object.keys(on),hn=0,fn;hn<cn.length;hn++)fn=cn[hn],"protocol"!==fn&&(dn[fn]=on[fn]);return an[dn.protocol]&&dn.hostname&&!dn.pathname&&(dn.path=dn.pathname="/"),dn.href=dn.format(),dn}if(on.protocol&&on.protocol!==dn.protocol){if(!an[on.protocol]){for(var gn=Object.keys(on),mn=0,yn;mn<gn.length;mn++)yn=gn[mn],dn[yn]=on[yn];return dn.href=dn.format(),dn}if(dn.protocol=on.protocol,on.host||nn[on.protocol])dn.pathname=on.pathname;else{for(var _n=(on.pathname||"").split("/");_n.length&&!(on.host=_n.shift()););on.host||(on.host=""),on.hostname||(on.hostname=""),""!==_n[0]&&_n.unshift(""),2>_n.length&&_n.unshift(""),dn.pathname=_n.join("/")}if(dn.search=on.search,dn.query=on.query,dn.host=on.host||"",dn.auth=on.auth,dn.hostname=on.hostname||on.host,dn.port=on.port,dn.pathname||dn.search){var bn=dn.pathname||"",xn=dn.search||"";dn.path=bn+xn}return dn.slashes=dn.slashes||on.slashes,dn.href=dn.format(),dn}var vn=dn.pathname&&"/"===dn.pathname.charAt(0),Tn=on.host||on.pathname&&"/"===on.pathname.charAt(0),En=Tn||vn||dn.host&&on.pathname,Sn=En,An=dn.pathname&&dn.pathname.split("/")||[],wn=(_n=on.pathname&&on.pathname.split("/")||[],dn.protocol&&!an[dn.protocol]);if(wn&&(dn.hostname="",dn.port=null,dn.host&&(""===An[0]?An[0]=dn.host:An.unshift(dn.host)),dn.host="",on.protocol&&(on.hostname=null,on.port=null,on.host&&(""===_n[0]?_n[0]=on.host:_n.unshift(on.host)),on.host=null),En=En&&(""===_n[0]||""===An[0])),Tn)dn.host=on.host||""===on.host?on.host:dn.host,dn.hostname=on.hostname||""===on.hostname?on.hostname:dn.hostname,dn.search=on.search,dn.query=on.query,An=_n;else if(_n.length)An||(An=[]),An.pop(),An=An.concat(_n),dn.search=on.search,dn.query=on.query;else if(!jt.isNullOrUndefined(on.search))return wn&&(dn.hostname=dn.host=An.shift(),(In=!!(dn.host&&0<dn.host.indexOf("@"))&&dn.host.split("@"))&&(dn.auth=In.shift(),dn.host=dn.hostname=In.shift())),dn.search=on.search,dn.query=on.query,jt.isNull(dn.pathname)&&jt.isNull(dn.search)||(dn.path=(dn.pathname?dn.pathname:"")+(dn.search?dn.search:"")),dn.href=dn.format(),dn;if(!An.length)return dn.pathname=null,dn.path=dn.search?"/"+dn.search:null,dn.href=dn.format(),dn;for(var Cn=An.slice(-1)[0],Pn=(dn.host||on.host||1<An.length)&&("."===Cn||".."===Cn)||""===Cn,Dn=0,Mn=An.length;0<=Mn;Mn--)"."===(Cn=An[Mn])?An.splice(Mn,1):".."===Cn?(An.splice(Mn,1),Dn++):Dn&&(An.splice(Mn,1),Dn--);if(!En&&!Sn)for(;Dn--;Dn)An.unshift("..");!En||""===An[0]||An[0]&&"/"===An[0].charAt(0)||An.unshift(""),Pn&&"/"!==An.join("/").substr(-1)&&An.push("");var Rn=""===An[0]||An[0]&&"/"===An[0].charAt(0);if(wn){dn.hostname=dn.host=Rn?"":An.length?An.shift():"";var In;(In=!!(dn.host&&0<dn.host.indexOf("@"))&&dn.host.split("@"))&&(dn.auth=In.shift(),dn.host=dn.hostname=In.shift())}return(En=En||dn.host&&An.length)&&!Rn&&An.unshift(""),An.length?dn.pathname=An.join("/"):(dn.pathname=null,dn.path=null),jt.isNull(dn.pathname)&&jt.isNull(dn.search)||(dn.path=(dn.pathname?dn.pathname:"")+(dn.search?dn.search:"")),dn.auth=on.auth||dn.auth,dn.slashes=dn.slashes||on.slashes,dn.href=dn.format(),dn},Yt.prototype.parseHost=function(){var on=this.host,sn=Vt.exec(on);sn&&(":"!==(sn=sn[0])&&(this.port=sn.substr(1)),on=on.substr(0,on.length-sn.length)),on&&(this.hostname=on)}},{"./util":30,punycode:25,querystring:28}],30:[function(Bt,Gt){Gt.exports={isString:function(Yt){return"string"==typeof Yt},isObject:function(Yt){return"object"==typeof Yt&&null!==Yt},isNull:function(Yt){return null===Yt},isNullOrUndefined:function(Yt){return null==Yt}}},{}],31:[function(Bt,Gt){Gt.exports=function(Yt,Ht,Wt){var zt=Yt.length,jt;if(!(Ht>=zt||0===Wt)){var Vt=zt-(Wt=Ht+Wt>zt?zt-Ht:Wt);for(jt=Ht;jt<Vt;++jt)Yt[jt]=Yt[jt+Wt];Yt.length=Vt}}},{}],32:[function(Bt,Gt,Xt){function Yt(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Xt.__esModule=!0;var Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Qt){return typeof Qt}:function(Qt){return Qt&&"function"==typeof Symbol&&Qt.constructor===Symbol&&Qt!==Symbol.prototype?"symbol":typeof Qt},Wt=Yt(Bt("mini-signals")),jt=Yt(Bt("parse-uri")),zt=function(Qt){if(Qt&&Qt.__esModule)return Qt;var Jt={};if(null!=Qt)for(var Zt in Qt)Object.prototype.hasOwnProperty.call(Qt,Zt)&&(Jt[Zt]=Qt[Zt]);return Jt.default=Qt,Jt}(Bt("./async")),Vt=Yt(Bt("./Resource")),qt=/(#[\w-]+)?$/,Kt=function(){function Qt(){var Jt=this,Zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",$t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Qt),this.baseUrl=Zt,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(en,tn){return Jt._loadResource(en,tn)},this._queue=zt.queue(this._boundLoadResource,$t),this._queue.pause(),this.resources={},this.onProgress=new Wt.default,this.onError=new Wt.default,this.onLoad=new Wt.default,this.onStart=new Wt.default,this.onComplete=new Wt.default}return Qt.prototype.add=function(Jt,Zt,$t,en){if(Array.isArray(Jt)){for(var tn=0;tn<Jt.length;++tn)this.add(Jt[tn]);return this}if("object"===(void 0===Jt?"undefined":Ht(Jt))&&(en=Zt||Jt.callback||Jt.onComplete,$t=Jt,Zt=Jt.url,Jt=Jt.name||Jt.key||Jt.url),"string"!=typeof Zt&&(en=$t,$t=Zt,Zt=Jt),"string"!=typeof Zt)throw new Error("No url passed to add resource to loader.");if("function"==typeof $t&&(en=$t,$t=null),this.loading&&(!$t||!$t.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[Jt])throw new Error("Resource named \""+Jt+"\" already exists.");if(Zt=this._prepareUrl(Zt),this.resources[Jt]=new Vt.default(Jt,Zt,$t),"function"==typeof en&&this.resources[Jt].onAfterMiddleware.once(en),this.loading){for(var nn=$t.parentResource,an=[],rn=0;rn<nn.children.length;++rn)nn.children[rn].isComplete||an.push(nn.children[rn]);var on=nn.progressChunk*(an.length+1)/(an.length+2);nn.children.push(this.resources[Jt]),nn.progressChunk=on;for(var sn=0;sn<an.length;++sn)an[sn].progressChunk=on;this.resources[Jt].progressChunk=on}return this._queue.push(this.resources[Jt]),this},Qt.prototype.pre=function(Jt){return this._beforeMiddleware.push(Jt),this},Qt.prototype.use=function(Jt){return this._afterMiddleware.push(Jt),this},Qt.prototype.reset=function(){for(var Jt in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var Zt=this.resources[Jt];Zt._onLoadBinding&&Zt._onLoadBinding.detach(),Zt.isLoading&&Zt.abort()}return this.resources={},this},Qt.prototype.load=function(Jt){if("function"==typeof Jt&&this.onComplete.once(Jt),this.loading)return this;for(var Zt=100/this._queue._tasks.length,$t=0;$t<this._queue._tasks.length;++$t)this._queue._tasks[$t].data.progressChunk=Zt;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},Qt.prototype._prepareUrl=function(Jt){var Zt=(0,jt.default)(Jt,{strictMode:!0}),$t;if($t=Zt.protocol||!Zt.path||0===Jt.indexOf("//")?Jt:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==Jt.charAt(0)?this.baseUrl+"/"+Jt:this.baseUrl+Jt,this.defaultQueryString){var en=qt.exec($t)[0];$t+=-1===($t=$t.substr(0,$t.length-en.length)).indexOf("?")?"?"+this.defaultQueryString:"&"+this.defaultQueryString,$t+=en}return $t},Qt.prototype._loadResource=function(Jt,Zt){var $t=this;Jt._dequeue=Zt,zt.eachSeries(this._beforeMiddleware,function(en,tn){en.call($t,Jt,function(){tn(Jt.isComplete?{}:null)})},function(){Jt.isComplete?$t._onLoad(Jt):(Jt._onLoadBinding=Jt.onComplete.once($t._onLoad,$t),Jt.load())},!0)},Qt.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},Qt.prototype._onLoad=function(Jt){var Zt=this;Jt._onLoadBinding=null,this._resourcesParsing.push(Jt),Jt._dequeue(),zt.eachSeries(this._afterMiddleware,function($t,en){$t.call(Zt,Jt,en)},function(){Jt.onAfterMiddleware.dispatch(Jt),Zt.progress+=Jt.progressChunk,Zt.onProgress.dispatch(Zt,Jt),Jt.error?Zt.onError.dispatch(Jt.error,Zt,Jt):Zt.onLoad.dispatch(Zt,Jt),Zt._resourcesParsing.splice(Zt._resourcesParsing.indexOf(Jt),1),Zt._queue.idle()&&0===Zt._resourcesParsing.length&&(Zt.progress=100,Zt._onComplete())},!0)},Qt}();Xt.default=Kt},{"./Resource":33,"./async":34,"mini-signals":38,"parse-uri":39}],33:[function(Bt,Gt,Xt){function Yt(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}function Ht(){}function Wt(Zt,$t,en){$t&&0===$t.indexOf(".")&&($t=$t.substring(1)),$t&&(Zt[$t]=en)}function jt(Zt){return Zt.toString().replace("object ","")}Xt.__esModule=!0;var zt=function(){function Zt($t,en){for(var tn=0,nn;tn<en.length;tn++)nn=en[tn],nn.enumerable=nn.enumerable||!1,nn.configurable=!0,"value"in nn&&(nn.writable=!0),Object.defineProperty($t,nn.key,nn)}return function($t,en,tn){return en&&Zt($t.prototype,en),tn&&Zt($t,tn),$t}}(),Vt=Yt(Bt("parse-uri")),qt=Yt(Bt("mini-signals")),Kt=window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest),Qt=null,Jt=function(){function Zt($t,en,tn){if(function(nn,an){if(!(nn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,Zt),"string"!=typeof $t||"string"!=typeof en)throw new Error("Both name and url are required for constructing a resource.");tn=tn||{},this._flags=0,this._setFlag(Zt.STATUS_FLAGS.DATA_URL,0===en.indexOf("data:")),this.name=$t,this.url=en,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===tn.crossOrigin?"anonymous":tn.crossOrigin,this.loadType=tn.loadType||this._determineLoadType(),this.xhrType=tn.xhrType,this.metadata=tn.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=Zt.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Ht,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new qt.default,this.onProgress=new qt.default,this.onComplete=new qt.default,this.onAfterMiddleware=new qt.default}return Zt.setExtensionLoadType=function($t,en){Wt(Zt._loadTypeMap,$t,en)},Zt.setExtensionXhrType=function($t,en){Wt(Zt._xhrTypeMap,$t,en)},Zt.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(Zt.STATUS_FLAGS.COMPLETE,!0),this._setFlag(Zt.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},Zt.prototype.abort=function($t){if(!this.error){if(this.error=new Error($t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=Zt.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},Zt.prototype.load=function($t){var en=this;if(!this.isLoading)if(this.isComplete)$t&&setTimeout(function(){return $t(en)},1);else switch($t&&this.onComplete.once($t),this._setFlag(Zt.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Zt.LOAD_TYPE.IMAGE:this.type=Zt.TYPE.IMAGE,this._loadElement("image");break;case Zt.LOAD_TYPE.AUDIO:this.type=Zt.TYPE.AUDIO,this._loadSourceElement("audio");break;case Zt.LOAD_TYPE.VIDEO:this.type=Zt.TYPE.VIDEO,this._loadSourceElement("video");break;case Zt.LOAD_TYPE.XHR:default:Kt&&this.crossOrigin?this._loadXdr():this._loadXhr();}},Zt.prototype._hasFlag=function($t){return!!(this._flags&$t)},Zt.prototype._setFlag=function($t,en){this._flags=en?this._flags|$t:this._flags&~$t},Zt.prototype._loadElement=function($t){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===$t&&void 0!==window.Image?new Image:document.createElement($t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},Zt.prototype._loadSourceElement=function($t){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===$t&&void 0!==window.Audio?new Audio:document.createElement($t),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var en=this.metadata.mimeType,tn=0;tn<this.url.length;++tn)this.data.appendChild(this._createSource($t,this.url[tn],Array.isArray(en)?en[tn]:en));else{var nn=this.metadata.mimeType;this.data.appendChild(this._createSource($t,this.url,Array.isArray(nn)?nn[0]:nn))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+$t)},Zt.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var $t=this.xhr=new XMLHttpRequest;$t.open("GET",this.url,!0),$t.responseType=this.xhrType===Zt.XHR_RESPONSE_TYPE.JSON||this.xhrType===Zt.XHR_RESPONSE_TYPE.DOCUMENT?Zt.XHR_RESPONSE_TYPE.TEXT:this.xhrType,$t.addEventListener("error",this._boundXhrOnError,!1),$t.addEventListener("abort",this._boundXhrOnAbort,!1),$t.addEventListener("progress",this._boundOnProgress,!1),$t.addEventListener("load",this._boundXhrOnLoad,!1),$t.send()},Zt.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var $t=this.xhr=new XDomainRequest;$t.timeout=5e3,$t.onerror=this._boundXhrOnError,$t.ontimeout=this._boundXdrOnTimeout,$t.onprogress=this._boundOnProgress,$t.onload=this._boundXhrOnLoad,$t.open("GET",this.url,!0),setTimeout(function(){return $t.send()},1)},Zt.prototype._createSource=function($t,en,tn){tn||(tn=$t+"/"+this._getExtension(en));var nn=document.createElement("source");return nn.src=en,nn.type=tn,nn},Zt.prototype._onError=function($t){this.abort("Failed to load element using: "+$t.target.nodeName)},Zt.prototype._onProgress=function($t){$t&&$t.lengthComputable&&this.onProgress.dispatch(this,$t.loaded/$t.total)},Zt.prototype._xhrOnError=function(){var $t=this.xhr;this.abort(jt($t)+" Request failed. Status: "+$t.status+", text: \""+$t.statusText+"\"")},Zt.prototype._xhrOnAbort=function(){this.abort(jt(this.xhr)+" Request was aborted by the user.")},Zt.prototype._xdrOnTimeout=function(){this.abort(jt(this.xhr)+" Request timed out.")},Zt.prototype._xhrOnLoad=function(){var $t=this.xhr,en="",tn=void 0===$t.status?200:$t.status;if(""!==$t.responseType&&"text"!==$t.responseType&&void 0!==$t.responseType||(en=$t.responseText),0===tn&&0<en.length?tn=200:1223==tn&&(tn=204),2==(0|tn/100)){if(this.xhrType===Zt.XHR_RESPONSE_TYPE.TEXT)this.data=en,this.type=Zt.TYPE.TEXT;else if(this.xhrType===Zt.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(en),this.type=Zt.TYPE.JSON}catch(rn){return void this.abort("Error trying to parse loaded json: "+rn)}else if(this.xhrType===Zt.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var nn=new DOMParser;this.data=nn.parseFromString(en,"text/xml")}else{var an=document.createElement("div");an.innerHTML=en,this.data=an}this.type=Zt.TYPE.XML}catch(rn){return void this.abort("Error trying to parse loaded xml: "+rn)}else this.data=$t.response||en;this.complete()}else this.abort("["+$t.status+"] "+$t.statusText+": "+$t.responseURL)},Zt.prototype._determineCrossOrigin=function($t,en){if(0===$t.indexOf("data:"))return"";en=en||window.location,Qt||(Qt=document.createElement("a")),Qt.href=$t;var tn=!($t=(0,Vt.default)(Qt.href,{strictMode:!0})).port&&""===en.port||$t.port===en.port,nn=$t.protocol?$t.protocol+":":"";return $t.host===en.hostname&&tn&&nn===en.protocol?"":"anonymous"},Zt.prototype._determineXhrType=function(){return Zt._xhrTypeMap[this.extension]||Zt.XHR_RESPONSE_TYPE.TEXT},Zt.prototype._determineLoadType=function(){return Zt._loadTypeMap[this.extension]||Zt.LOAD_TYPE.XHR},Zt.prototype._getExtension=function(){var $t=this.url,en="";if(this.isDataUrl){var tn=$t.indexOf("/");en=$t.substring(tn+1,$t.indexOf(";",tn))}else{var nn=$t.indexOf("?"),an=$t.indexOf("#"),rn=Math.min(-1<nn?nn:$t.length,-1<an?an:$t.length);en=($t=$t.substring(0,rn)).substring($t.lastIndexOf(".")+1)}return en.toLowerCase()},Zt.prototype._getMimeFromXhrType=function($t){switch($t){case Zt.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Zt.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Zt.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Zt.XHR_RESPONSE_TYPE.JSON:return"application/json";case Zt.XHR_RESPONSE_TYPE.DEFAULT:case Zt.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain";}},zt(Zt,[{key:"isDataUrl",get:function(){return this._hasFlag(Zt.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(Zt.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(Zt.STATUS_FLAGS.LOADING)}}]),Zt}();Xt.default=Jt,Jt.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Jt.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Jt.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Jt.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Jt._loadTypeMap={gif:Jt.LOAD_TYPE.IMAGE,png:Jt.LOAD_TYPE.IMAGE,bmp:Jt.LOAD_TYPE.IMAGE,jpg:Jt.LOAD_TYPE.IMAGE,jpeg:Jt.LOAD_TYPE.IMAGE,tif:Jt.LOAD_TYPE.IMAGE,tiff:Jt.LOAD_TYPE.IMAGE,webp:Jt.LOAD_TYPE.IMAGE,tga:Jt.LOAD_TYPE.IMAGE,svg:Jt.LOAD_TYPE.IMAGE,"svg+xml":Jt.LOAD_TYPE.IMAGE,mp3:Jt.LOAD_TYPE.AUDIO,ogg:Jt.LOAD_TYPE.AUDIO,wav:Jt.LOAD_TYPE.AUDIO,mp4:Jt.LOAD_TYPE.VIDEO,webm:Jt.LOAD_TYPE.VIDEO},Jt._xhrTypeMap={xhtml:Jt.XHR_RESPONSE_TYPE.DOCUMENT,html:Jt.XHR_RESPONSE_TYPE.DOCUMENT,htm:Jt.XHR_RESPONSE_TYPE.DOCUMENT,xml:Jt.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Jt.XHR_RESPONSE_TYPE.DOCUMENT,svg:Jt.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Jt.XHR_RESPONSE_TYPE.DOCUMENT,gif:Jt.XHR_RESPONSE_TYPE.BLOB,png:Jt.XHR_RESPONSE_TYPE.BLOB,bmp:Jt.XHR_RESPONSE_TYPE.BLOB,jpg:Jt.XHR_RESPONSE_TYPE.BLOB,jpeg:Jt.XHR_RESPONSE_TYPE.BLOB,tif:Jt.XHR_RESPONSE_TYPE.BLOB,tiff:Jt.XHR_RESPONSE_TYPE.BLOB,webp:Jt.XHR_RESPONSE_TYPE.BLOB,tga:Jt.XHR_RESPONSE_TYPE.BLOB,json:Jt.XHR_RESPONSE_TYPE.JSON,text:Jt.XHR_RESPONSE_TYPE.TEXT,txt:Jt.XHR_RESPONSE_TYPE.TEXT,ttf:Jt.XHR_RESPONSE_TYPE.BUFFER,otf:Jt.XHR_RESPONSE_TYPE.BUFFER},Jt.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":38,"parse-uri":39}],34:[function(Bt,Gt,Xt){function Yt(){}function Ht(Wt){return function(){if(null===Wt)throw new Error("Callback was already called.");var jt=Wt;Wt=null,jt.apply(this,arguments)}}Xt.__esModule=!0,Xt.eachSeries=function(Wt,jt,zt,Vt){var qt=0,Kt=Wt.length;!function Qt(Jt){Jt||qt===Kt?zt&&zt(Jt):Vt?setTimeout(function(){jt(Wt[qt++],Qt)},1):jt(Wt[qt++],Qt)}()},Xt.queue=function(Wt,jt){function zt(Kt,Qt,Jt){if(null!=Jt&&"function"!=typeof Jt)throw new Error("task callback must be a function");if(qt.started=!0,null==Kt&&qt.idle())setTimeout(function(){return qt.drain()},1);else{var Zt={data:Kt,callback:"function"==typeof Jt?Jt:Yt};Qt?qt._tasks.unshift(Zt):qt._tasks.push(Zt),setTimeout(function(){return qt.process()},1)}}if(null==jt)jt=1;else if(0===jt)throw new Error("Concurrency must not be zero");var Vt=0,qt={_tasks:[],concurrency:jt,saturated:Yt,unsaturated:Yt,buffer:jt/4,empty:Yt,drain:Yt,error:Yt,started:!1,paused:!1,push:function(Kt,Qt){zt(Kt,!1,Qt)},kill:function(){Vt=0,qt.drain=Yt,qt.started=!1,qt._tasks=[]},unshift:function(Kt,Qt){zt(Kt,!0,Qt)},process:function(){for(;!qt.paused&&Vt<qt.concurrency&&qt._tasks.length;){var Kt=qt._tasks.shift();0===qt._tasks.length&&qt.empty(),(Vt+=1)===qt.concurrency&&qt.saturated(),Wt(Kt.data,Ht(function(Qt){return function(){Vt-=1,Qt.callback.apply(Qt,arguments),null!=arguments[0]&&qt.error(arguments[0],Qt.data),Vt<=qt.concurrency-qt.buffer&&qt.unsaturated(),qt.idle()&&qt.drain(),qt.process()}}(Kt)))}},length:function(){return qt._tasks.length},running:function(){return Vt},idle:function(){return 0===qt._tasks.length+Vt},pause:function(){!0!==qt.paused&&(qt.paused=!0)},resume:function(){if(!1!==qt.paused){qt.paused=!1;for(var Kt=1;Kt<=qt.concurrency;Kt++)qt.process()}}};return qt}},{}],35:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.encodeBinary=function(Ht){for(var Wt="",jt=0;jt<Ht.length;){for(var zt=[0,0,0],Vt=[0,0,0,0],qt=0;qt<zt.length;++qt)zt[qt]=jt<Ht.length?255&Ht.charCodeAt(jt++):0;switch(Vt[0]=zt[0]>>2,Vt[1]=(3&zt[0])<<4|zt[1]>>4,Vt[2]=(15&zt[1])<<2|zt[2]>>6,Vt[3]=63&zt[2],jt-(Ht.length-1)){case 2:Vt[3]=64,Vt[2]=64;break;case 1:Vt[3]=64;}for(var Kt=0;Kt<Vt.length;++Kt)Wt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(Vt[Kt])}return Wt}},{}],36:[function(Bt,Gt){var Yt=Bt("./Loader").default,Ht=Bt("./Resource").default,Wt=Bt("./async"),jt=Bt("./b64");Yt.Resource=Ht,Yt.async=Wt,Yt.base64=jt,Gt.exports=Yt,Gt.exports.default=Yt},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(Bt,Gt,Xt){function Yt(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}Xt.__esModule=!0;var Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Vt){return typeof Vt}:function(Vt){return Vt&&"function"==typeof Symbol&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt};Xt.blobMiddlewareFactory=function(){return function(Vt,qt){if(Vt.data){if(Vt.xhr&&Vt.xhrType===Wt.default.XHR_RESPONSE_TYPE.BLOB)if(!(window.Blob&&"string"!=typeof Vt.data)){var Qt=Vt.xhr.getResponseHeader("content-type");if(Qt&&0===Qt.indexOf("image"))return Vt.data=new Image,Vt.data.src="data:"+Qt+";base64,"+jt.default.encodeBinary(Vt.xhr.responseText),Vt.type=Wt.default.TYPE.IMAGE,void(Vt.data.onload=function(){Vt.data.onload=null,qt()})}else if(0===Vt.data.type.indexOf("image")){var Kt=function(){var Jt=zt.createObjectURL(Vt.data);return Vt.blob=Vt.data,Vt.data=new Image,Vt.data.src=Jt,Vt.type=Wt.default.TYPE.IMAGE,Vt.data.onload=function(){zt.revokeObjectURL(Jt),Vt.data.onload=null,qt()},{v:void 0}}();if("object"===(void 0===Kt?"undefined":Ht(Kt)))return Kt.v}qt()}else qt()}};var Wt=Yt(Bt("../../Resource")),jt=Yt(Bt("../../b64")),zt=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(Bt,Gt,Xt){function Yt(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}function Ht(Vt,qt){return Vt._head?(Vt._tail._next=qt,qt._prev=Vt._tail,Vt._tail=qt):(Vt._head=qt,Vt._tail=qt),qt._owner=Vt,qt}Object.defineProperty(Xt,"__esModule",{value:!0});var Wt=function(){function Vt(qt,Kt){for(var Qt=0,Jt;Qt<Kt.length;Qt++)Jt=Kt[Qt],Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(qt,Jt.key,Jt)}return function(qt,Kt,Qt){return Kt&&Vt(qt.prototype,Kt),Qt&&Vt(qt,Qt),qt}}(),jt=function(){function Vt(qt,Kt,Qt){void 0===Kt&&(Kt=!1),Yt(this,Vt),this._fn=qt,this._once=Kt,this._thisArg=Qt,this._next=this._prev=this._owner=null}return Wt(Vt,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),Vt}(),zt=function(){function Vt(){Yt(this,Vt),this._head=this._tail=void 0}return Wt(Vt,[{key:"handlers",value:function(){var qt=!(0>=arguments.length||void 0===arguments[0])&&arguments[0],Kt=this._head;if(qt)return!!Kt;for(var Qt=[];Kt;)Qt.push(Kt),Kt=Kt._next;return Qt}},{key:"has",value:function(qt){if(!(qt instanceof jt))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return qt._owner===this}},{key:"dispatch",value:function(){var qt=this._head;if(!qt)return!1;for(;qt;)qt._once&&this.detach(qt),qt._fn.apply(qt._thisArg,arguments),qt=qt._next;return!0}},{key:"add",value:function(qt){var Kt=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!=typeof qt)throw new Error("MiniSignal#add(): First arg must be a Function.");return Ht(this,new jt(qt,!1,Kt))}},{key:"once",value:function(qt){var Kt=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!=typeof qt)throw new Error("MiniSignal#once(): First arg must be a Function.");return Ht(this,new jt(qt,!0,Kt))}},{key:"detach",value:function(qt){if(!(qt instanceof jt))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return qt._owner===this?(qt._prev&&(qt._prev._next=qt._next),qt._next&&(qt._next._prev=qt._prev),qt===this._head?(this._head=qt._next,null===qt._next&&(this._tail=null)):qt===this._tail&&(this._tail=qt._prev,this._tail._next=null),qt._owner=null,this):this}},{key:"detachAll",value:function(){var qt=this._head;if(!qt)return this;for(this._head=this._tail=null;qt;)qt._owner=null,qt=qt._next;return this}}]),Vt}();zt.MiniSignalBinding=jt,Xt.default=zt,Gt.exports=Xt.default},{}],39:[function(Bt,Gt){Gt.exports=function(Yt,Ht){Ht=Ht||{};for(var Wt={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},jt=Wt.parser[Ht.strictMode?"strict":"loose"].exec(Yt),zt={},Vt=14;Vt--;)zt[Wt.key[Vt]]=jt[Vt]||"";return zt[Wt.q.name]={},zt[Wt.key[12]].replace(Wt.q.parser,function(qt,Kt,Qt){Kt&&(zt[Wt.q.name][Kt]=Qt)}),zt}},{}],40:[function(Bt,Gt,Xt){function Yt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Xt.__esModule=!0;var Ht=function(Jt){if(Jt&&Jt.__esModule)return Jt;var Zt={};if(null!=Jt)for(var $t in Jt)Object.prototype.hasOwnProperty.call(Jt,$t)&&(Zt[$t]=Jt[$t]);return Zt.default=Jt,Zt}(Bt("../core")),Wt=Yt(Bt("ismobilejs")),jt=Yt(Bt("./accessibleTarget"));Ht.utils.mixins.delayMixin(Ht.DisplayObject.prototype,jt.default);var zt=100,Kt=2,Qt=function(){function Jt(Zt){!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Jt),(Wt.default.tablet||Wt.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var $t=document.createElement("div");$t.style.width=zt+"px",$t.style.height=zt+"px",$t.style.position="absolute",$t.style.top=0+"px",$t.style.left=0+"px",$t.style.zIndex=Kt,this.div=$t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=Zt,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return Jt.prototype.createTouchHook=function(){var Zt=this,$t=document.createElement("button");$t.style.width="1px",$t.style.height="1px",$t.style.position="absolute",$t.style.top="-1000px",$t.style.left="-1000px",$t.style.zIndex=2,$t.style.backgroundColor="#FF0000",$t.title="HOOK DIV",$t.addEventListener("focus",function(){Zt.isMobileAccessabillity=!0,Zt.activate(),document.body.removeChild($t)}),document.body.appendChild($t)},Jt.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},Jt.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},Jt.prototype.updateAccessibleObjects=function(Zt){if(Zt.visible){Zt.accessible&&Zt.interactive&&(Zt._accessibleActive||this.addChild(Zt),Zt.renderId=this.renderId);for(var $t=Zt.children,en=$t.length-1;0<=en;en--)this.updateAccessibleObjects($t[en])}},Jt.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var Zt=this.renderer.view.getBoundingClientRect(),$t=Zt.width/this.renderer.width,en=Zt.height/this.renderer.height,tn=this.div;tn.style.left=Zt.left+"px",tn.style.top=Zt.top+"px",tn.style.width=this.renderer.width+"px",tn.style.height=this.renderer.height+"px";for(var nn=0,an;nn<this.children.length;nn++)if(an=this.children[nn],an.renderId!==this.renderId)an._accessibleActive=!1,Ht.utils.removeItems(this.children,nn,1),this.div.removeChild(an._accessibleDiv),this.pool.push(an._accessibleDiv),an._accessibleDiv=null,nn--,0===this.children.length&&this.deactivate();else{tn=an._accessibleDiv;var rn=an.hitArea,on=an.worldTransform;an.hitArea?(tn.style.left=(on.tx+rn.x*on.a)*$t+"px",tn.style.top=(on.ty+rn.y*on.d)*en+"px",tn.style.width=rn.width*on.a*$t+"px",tn.style.height=rn.height*on.d*en+"px"):(rn=an.getBounds(),this.capHitArea(rn),tn.style.left=rn.x*$t+"px",tn.style.top=rn.y*en+"px",tn.style.width=rn.width*$t+"px",tn.style.height=rn.height*en+"px")}this.renderId++}},Jt.prototype.capHitArea=function(Zt){0>Zt.x&&(Zt.width+=Zt.x,Zt.x=0),0>Zt.y&&(Zt.height+=Zt.y,Zt.y=0),Zt.x+Zt.width>this.renderer.width&&(Zt.width=this.renderer.width-Zt.x),Zt.y+Zt.height>this.renderer.height&&(Zt.height=this.renderer.height-Zt.y)},Jt.prototype.addChild=function(Zt){var $t=this.pool.pop();$t||(($t=document.createElement("button")).style.width=zt+"px",$t.style.height=zt+"px",$t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",$t.style.position="absolute",$t.style.zIndex=Kt,$t.style.borderStyle="none",$t.addEventListener("click",this._onClick.bind(this)),$t.addEventListener("focus",this._onFocus.bind(this)),$t.addEventListener("focusout",this._onFocusOut.bind(this))),Zt.accessibleTitle?$t.title=Zt.accessibleTitle:Zt.accessibleTitle||Zt.accessibleHint||($t.title="displayObject "+this.tabIndex),Zt.accessibleHint&&$t.setAttribute("aria-label",Zt.accessibleHint),Zt._accessibleActive=!0,Zt._accessibleDiv=$t,$t.displayObject=Zt,this.children.push(Zt),this.div.appendChild(Zt._accessibleDiv),Zt._accessibleDiv.tabIndex=Zt.tabIndex},Jt.prototype._onClick=function(Zt){var $t=this.renderer.plugins.interaction;$t.dispatchEvent(Zt.target.displayObject,"click",$t.eventData)},Jt.prototype._onFocus=function(Zt){var $t=this.renderer.plugins.interaction;$t.dispatchEvent(Zt.target.displayObject,"mouseover",$t.eventData)},Jt.prototype._onFocusOut=function(Zt){var $t=this.renderer.plugins.interaction;$t.dispatchEvent(Zt.target.displayObject,"mouseout",$t.eventData)},Jt.prototype._onKeyDown=function(Zt){9===Zt.keyCode&&this.activate()},Jt.prototype._onMouseMove=function(){this.deactivate()},Jt.prototype.destroy=function(){this.div=null;for(var Zt=0;Zt<this.children.length;Zt++)this.children[Zt].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},Jt}();Xt.default=Qt,Ht.WebGLRenderer.registerPlugin("accessibility",Qt),Ht.CanvasRenderer.registerPlugin("accessibility",Qt)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(Bt,Gt,Xt){function Yt(jt){return jt&&jt.__esModule?jt:{default:jt}}Xt.__esModule=!0;var Ht=Bt("./accessibleTarget");Object.defineProperty(Xt,"accessibleTarget",{enumerable:!0,get:function(){return Yt(Ht).default}});var Wt=Bt("./AccessibilityManager");Object.defineProperty(Xt,"AccessibilityManager",{enumerable:!0,get:function(){return Yt(Wt).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(Bt,Gt,Xt){function Yt(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Xt.__esModule=!0;var Ht=function(){function Qt(Jt,Zt){for(var $t=0,en;$t<Zt.length;$t++)en=Zt[$t],en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Jt,en.key,en)}return function(Jt,Zt,$t){return Zt&&Qt(Jt.prototype,Zt),$t&&Qt(Jt,$t),Jt}}(),Wt=Bt("./autoDetectRenderer"),jt=Yt(Bt("./display/Container")),zt=Bt("./ticker"),Vt=Yt(Bt("./settings")),qt=Bt("./const"),Kt=function(){function Qt(Jt,Zt,$t,en,tn){!function(nn,an){if(!(nn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,Qt),"number"==typeof Jt&&(Jt=Object.assign({width:Jt,height:Zt||Vt.default.RENDER_OPTIONS.height,forceCanvas:!!en,sharedTicker:!!tn},$t)),this._options=Jt=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},Jt),this.renderer=(0,Wt.autoDetectRenderer)(Jt),this.stage=new jt.default,this._ticker=null,this.ticker=Jt.sharedTicker?zt.shared:new zt.Ticker,Jt.autoStart&&this.start()}return Qt.prototype.render=function(){this.renderer.render(this.stage)},Qt.prototype.stop=function(){this._ticker.stop()},Qt.prototype.start=function(){this._ticker.start()},Qt.prototype.destroy=function(Jt){var Zt=this._ticker;this.ticker=null,Zt.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(Jt),this.renderer=null,this._options=null},Ht(Qt,[{key:"ticker",set:function(Jt){this._ticker&&this._ticker.remove(this.render,this),this._ticker=Jt,Jt&&Jt.add(this.render,this,qt.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),Qt}();Xt.default=Kt},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":120}],44:[function(Bt,Gt,Xt){function Yt(zt,Vt){if(zt instanceof Array){if("precision"!==zt[0].substring(0,9)){var qt=zt.slice(0);return qt.unshift("precision "+Vt+" float;"),qt}}else if("precision"!==zt.substring(0,9))return"precision "+Vt+" float;\n"+zt;return zt}Xt.__esModule=!0;var Ht=Bt("pixi-gl-core"),Wt=function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("./settings")),jt=function(zt){function Vt(qt,Kt,Qt){return function(Jt,Zt){if(!(Jt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Vt),function(Jt,Zt){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&("object"==typeof Zt||"function"==typeof Zt)?Zt:Jt}(this,zt.call(this,qt,Yt(Kt,Wt.default.PRECISION_VERTEX),Yt(Qt,Wt.default.PRECISION_FRAGMENT)))}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt}(Ht.GLShader);Xt.default=jt},{"./settings":101,"pixi-gl-core":12}],45:[function(Bt,Gt,Xt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0,Xt.autoDetectRenderer=function(zt,Vt,qt,Kt){var Qt=zt&&zt.forceCanvas;return void 0!==Kt&&(Qt=Kt),!Qt&&Ht.isWebGLSupported()?new jt.default(zt,Vt,qt):new Wt.default(zt,Vt,qt)};var Ht=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("./utils")),Wt=Yt(Bt("./renderers/canvas/CanvasRenderer")),jt=Yt(Bt("./renderers/webgl/WebGLRenderer"))},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":124}],46:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.VERSION="4.5.6",Xt.PI_2=2*Math.PI,Xt.RAD_TO_DEG=180/Math.PI,Xt.DEG_TO_RAD=Math.PI/180,Xt.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},Xt.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},Xt.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Xt.SCALE_MODES={LINEAR:0,NEAREST:1},Xt.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},Xt.GC_MODES={AUTO:0,MANUAL:1},Xt.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,Xt.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,Xt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,Xt.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},Xt.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},Xt.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},Xt.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},Xt.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=Bt("../math"),Ht=function(){function Wt(){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return Wt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Wt.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Wt.prototype.getRectangle=function(jt){return this.minX>this.maxX||this.minY>this.maxY?Yt.Rectangle.EMPTY:(jt=jt||new Yt.Rectangle(0,0,1,1),jt.x=this.minX,jt.y=this.minY,jt.width=this.maxX-this.minX,jt.height=this.maxY-this.minY,jt)},Wt.prototype.addPoint=function(jt){this.minX=Math.min(this.minX,jt.x),this.maxX=Math.max(this.maxX,jt.x),this.minY=Math.min(this.minY,jt.y),this.maxY=Math.max(this.maxY,jt.y)},Wt.prototype.addQuad=function(jt){var zt=this.minX,Vt=this.minY,qt=this.maxX,Kt=this.maxY,Qt=jt[0],Jt=jt[1];zt=Qt<zt?Qt:zt,Vt=Jt<Vt?Jt:Vt,qt=Qt>qt?Qt:qt,Kt=Jt>Kt?Jt:Kt,Qt=jt[2],Jt=jt[3],zt=Qt<zt?Qt:zt,Vt=Jt<Vt?Jt:Vt,qt=Qt>qt?Qt:qt,Kt=Jt>Kt?Jt:Kt,Qt=jt[4],Jt=jt[5],zt=Qt<zt?Qt:zt,Vt=Jt<Vt?Jt:Vt,qt=Qt>qt?Qt:qt,Kt=Jt>Kt?Jt:Kt,Qt=jt[6],Jt=jt[7],zt=Qt<zt?Qt:zt,Vt=Jt<Vt?Jt:Vt,qt=Qt>qt?Qt:qt,Kt=Jt>Kt?Jt:Kt,this.minX=zt,this.minY=Vt,this.maxX=qt,this.maxY=Kt},Wt.prototype.addFrame=function(jt,zt,Vt,qt,Kt){var Qt=jt.worldTransform,Jt=Qt.a,Zt=Qt.b,$t=Qt.c,en=Qt.d,tn=Qt.tx,nn=Qt.ty,an=this.minX,rn=this.minY,on=this.maxX,sn=this.maxY,dn=Jt*zt+$t*Vt+tn,ln=Zt*zt+en*Vt+nn;an=dn<an?dn:an,rn=ln<rn?ln:rn,on=dn>on?dn:on,sn=ln>sn?ln:sn,ln=Zt*qt+en*Vt+nn,an=(dn=Jt*qt+$t*Vt+tn)<an?dn:an,rn=ln<rn?ln:rn,on=dn>on?dn:on,sn=ln>sn?ln:sn,ln=Zt*zt+en*Kt+nn,an=(dn=Jt*zt+$t*Kt+tn)<an?dn:an,rn=ln<rn?ln:rn,on=dn>on?dn:on,sn=ln>sn?ln:sn,ln=Zt*qt+en*Kt+nn,an=(dn=Jt*qt+$t*Kt+tn)<an?dn:an,rn=ln<rn?ln:rn,on=dn>on?dn:on,sn=ln>sn?ln:sn,this.minX=an,this.minY=rn,this.maxX=on,this.maxY=sn},Wt.prototype.addVertices=function(jt,zt,Vt,qt){for(var Kt=jt.worldTransform,Qt=Kt.a,Jt=Kt.b,Zt=Kt.c,$t=Kt.d,en=Kt.tx,tn=Kt.ty,nn=this.minX,an=this.minY,rn=this.maxX,on=this.maxY,sn=Vt;sn<qt;sn+=2){var dn=zt[sn],ln=zt[sn+1],un=Qt*dn+Zt*ln+en,pn=$t*ln+Jt*dn+tn;nn=un<nn?un:nn,an=pn<an?pn:an,rn=un>rn?un:rn,on=pn>on?pn:on}this.minX=nn,this.minY=an,this.maxX=rn,this.maxY=on},Wt.prototype.addBounds=function(jt){var zt=this.minX,Vt=this.minY,qt=this.maxX,Kt=this.maxY;this.minX=jt.minX<zt?jt.minX:zt,this.minY=jt.minY<Vt?jt.minY:Vt,this.maxX=jt.maxX>qt?jt.maxX:qt,this.maxY=jt.maxY>Kt?jt.maxY:Kt},Wt.prototype.addBoundsMask=function(jt,zt){var Vt=jt.minX>zt.minX?jt.minX:zt.minX,qt=jt.minY>zt.minY?jt.minY:zt.minY,Kt=jt.maxX<zt.maxX?jt.maxX:zt.maxX,Qt=jt.maxY<zt.maxY?jt.maxY:zt.maxY;if(Vt<=Kt&&qt<=Qt){var Jt=this.minX,Zt=this.minY,$t=this.maxX,en=this.maxY;this.minX=Vt<Jt?Vt:Jt,this.minY=qt<Zt?qt:Zt,this.maxX=Kt>$t?Kt:$t,this.maxY=Qt>en?Qt:en}},Wt.prototype.addBoundsArea=function(jt,zt){var Vt=jt.minX>zt.x?jt.minX:zt.x,qt=jt.minY>zt.y?jt.minY:zt.y,Kt=jt.maxX<zt.x+zt.width?jt.maxX:zt.x+zt.width,Qt=jt.maxY<zt.y+zt.height?jt.maxY:zt.y+zt.height;if(Vt<=Kt&&qt<=Qt){var Jt=this.minX,Zt=this.minY,$t=this.maxX,en=this.maxY;this.minX=Vt<Jt?Vt:Jt,this.minY=qt<Zt?qt:Zt,this.maxX=Kt>$t?Kt:$t,this.maxY=Qt>en?Qt:en}},Wt}();Xt.default=Ht},{"../math":70}],48:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=Bt("../utils"),Wt=function(jt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,jt.call(this));return Vt.children=[],Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.onChildrenChange=function(){},zt.prototype.addChild=function(Vt){var qt=arguments.length;if(1<qt)for(var Kt=0;Kt<qt;Kt++)this.addChild(arguments[Kt]);else Vt.parent&&Vt.parent.removeChild(Vt),Vt.parent=this,Vt.transform._parentID=-1,this.children.push(Vt),this._boundsID++,this.onChildrenChange(this.children.length-1),Vt.emit("added",this);return Vt},zt.prototype.addChildAt=function(Vt,qt){if(0>qt||qt>this.children.length)throw new Error(Vt+"addChildAt: The index "+qt+" supplied is out of bounds "+this.children.length);return Vt.parent&&Vt.parent.removeChild(Vt),Vt.parent=this,Vt.transform._parentID=-1,this.children.splice(qt,0,Vt),this._boundsID++,this.onChildrenChange(qt),Vt.emit("added",this),Vt},zt.prototype.swapChildren=function(Vt,qt){if(Vt!==qt){var Kt=this.getChildIndex(Vt),Qt=this.getChildIndex(qt);this.children[Kt]=qt,this.children[Qt]=Vt,this.onChildrenChange(Kt<Qt?Kt:Qt)}},zt.prototype.getChildIndex=function(Vt){var qt=this.children.indexOf(Vt);if(-1===qt)throw new Error("The supplied DisplayObject must be a child of the caller");return qt},zt.prototype.setChildIndex=function(Vt,qt){if(0>qt||qt>=this.children.length)throw new Error("The supplied index is out of bounds");var Kt=this.getChildIndex(Vt);(0,Ht.removeItems)(this.children,Kt,1),this.children.splice(qt,0,Vt),this.onChildrenChange(qt)},zt.prototype.getChildAt=function(Vt){if(0>Vt||Vt>=this.children.length)throw new Error("getChildAt: Index ("+Vt+") does not exist.");return this.children[Vt]},zt.prototype.removeChild=function(Vt){var qt=arguments.length;if(1<qt)for(var Kt=0;Kt<qt;Kt++)this.removeChild(arguments[Kt]);else{var Qt=this.children.indexOf(Vt);if(-1===Qt)return null;Vt.parent=null,Vt.transform._parentID=-1,(0,Ht.removeItems)(this.children,Qt,1),this._boundsID++,this.onChildrenChange(Qt),Vt.emit("removed",this)}return Vt},zt.prototype.removeChildAt=function(Vt){var qt=this.getChildAt(Vt);return qt.parent=null,qt.transform._parentID=-1,(0,Ht.removeItems)(this.children,Vt,1),this._boundsID++,this.onChildrenChange(Vt),qt.emit("removed",this),qt},zt.prototype.removeChildren=function(){var Vt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,qt=arguments[1],Kt=Vt,Qt="number"==typeof qt?qt:this.children.length,Jt=Qt-Kt,Zt;if(0<Jt&&Jt<=Qt){Zt=this.children.splice(Kt,Jt);for(var $t=0;$t<Zt.length;++$t)Zt[$t].parent=null,Zt[$t].transform&&(Zt[$t].transform._parentID=-1);this._boundsID++,this.onChildrenChange(Vt);for(var en=0;en<Zt.length;++en)Zt[en].emit("removed",this);return Zt}if(0==Jt&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},zt.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var Vt=0,qt=this.children.length,Kt;Vt<qt;++Vt)Kt=this.children[Vt],Kt.visible&&Kt.updateTransform()},zt.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var Vt=0,qt;Vt<this.children.length;Vt++)qt=this.children[Vt],qt.visible&&qt.renderable&&(qt.calculateBounds(),qt._mask?(qt._mask.calculateBounds(),this._bounds.addBoundsMask(qt._bounds,qt._mask._bounds)):qt.filterArea?this._bounds.addBoundsArea(qt._bounds,qt.filterArea):this._bounds.addBounds(qt._bounds));this._lastBoundsID=this._boundsID},zt.prototype._calculateBounds=function(){},zt.prototype.renderWebGL=function(Vt){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(Vt);else{this._renderWebGL(Vt);for(var qt=0,Kt=this.children.length;qt<Kt;++qt)this.children[qt].renderWebGL(Vt)}},zt.prototype.renderAdvancedWebGL=function(Vt){Vt.flush();var qt=this._filters,Kt=this._mask;if(qt){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var Qt=0;Qt<qt.length;Qt++)qt[Qt].enabled&&this._enabledFilters.push(qt[Qt]);this._enabledFilters.length&&Vt.filterManager.pushFilter(this,this._enabledFilters)}Kt&&Vt.maskManager.pushMask(this,this._mask),this._renderWebGL(Vt);for(var Jt=0,Zt=this.children.length;Jt<Zt;Jt++)this.children[Jt].renderWebGL(Vt);Vt.flush(),Kt&&Vt.maskManager.popMask(this,this._mask),qt&&this._enabledFilters&&this._enabledFilters.length&&Vt.filterManager.popFilter()},zt.prototype._renderWebGL=function(){},zt.prototype._renderCanvas=function(){},zt.prototype.renderCanvas=function(Vt){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable){this._mask&&Vt.maskManager.pushMask(this._mask),this._renderCanvas(Vt);for(var qt=0,Kt=this.children.length;qt<Kt;++qt)this.children[qt].renderCanvas(Vt);this._mask&&Vt.maskManager.popMask(Vt)}},zt.prototype.destroy=function(Vt){jt.prototype.destroy.call(this);var qt="boolean"==typeof Vt?Vt:Vt&&Vt.children,Kt=this.removeChildren(0,this.children.length);if(qt)for(var Qt=0;Qt<Kt.length;++Qt)Kt[Qt].destroy(Vt)},Yt(zt,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(Vt){var qt=this.getLocalBounds().width;this.scale.x=0===qt?1:Vt/qt,this._width=Vt}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(Vt){var qt=this.getLocalBounds().height;this.scale.y=0===qt?1:Vt/qt,this._height=Vt}}]),zt}(function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./DisplayObject")).default);Xt.default=Wt,Wt.prototype.containerUpdateTransform=Wt.prototype.updateTransform},{"../utils":124,"./DisplayObject":49}],49:[function(Bt,Gt,Xt){function Yt(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Xt.__esModule=!0;var Ht=function(){function Zt($t,en){for(var tn=0,nn;tn<en.length;tn++)nn=en[tn],nn.enumerable=nn.enumerable||!1,nn.configurable=!0,"value"in nn&&(nn.writable=!0),Object.defineProperty($t,nn.key,nn)}return function($t,en,tn){return en&&Zt($t.prototype,en),tn&&Zt($t,tn),$t}}(),Wt=Yt(Bt("eventemitter3")),jt=Bt("../const"),zt=Yt(Bt("../settings")),Vt=Yt(Bt("./TransformStatic")),qt=Yt(Bt("./Transform")),Kt=Yt(Bt("./Bounds")),Qt=Bt("../math"),Jt=function(Zt){function $t(){!function(nn,an){if(!(nn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,$t);var en=function(nn,an){if(!nn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an&&("object"==typeof an||"function"==typeof an)?an:nn}(this,Zt.call(this)),tn=zt.default.TRANSFORM_MODE===jt.TRANSFORM_MODE.STATIC?Vt.default:qt.default;return en.tempDisplayObjectParent=null,en.transform=new tn,en.alpha=1,en.visible=!0,en.renderable=!0,en.parent=null,en.worldAlpha=1,en.filterArea=null,en._filters=null,en._enabledFilters=null,en._bounds=new Kt.default,en._boundsID=0,en._lastBoundsID=-1,en._boundsRect=null,en._localBoundsRect=null,en._mask=null,en._destroyed=!1,en}return function(en,tn){if("function"!=typeof tn&&null!==tn)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);en.prototype=Object.create(tn&&tn.prototype,{constructor:{value:en,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(en,tn):en.__proto__=tn)}($t,Zt),$t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},$t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},$t.prototype.getBounds=function(en,tn){return en||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),tn||(this._boundsRect||(this._boundsRect=new Qt.Rectangle),tn=this._boundsRect),this._bounds.getRectangle(tn)},$t.prototype.getLocalBounds=function(en){var tn=this.transform,nn=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,en||(this._localBoundsRect||(this._localBoundsRect=new Qt.Rectangle),en=this._localBoundsRect);var an=this.getBounds(!1,en);return this.parent=nn,this.transform=tn,an},$t.prototype.toGlobal=function(en,tn){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(en,tn)},$t.prototype.toLocal=function(en,tn,nn,an){return tn&&(en=tn.toGlobal(en,nn,an)),an||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(en,nn)},$t.prototype.renderWebGL=function(){},$t.prototype.renderCanvas=function(){},$t.prototype.setParent=function(en){if(!en||!en.addChild)throw new Error("setParent: Argument must be a Container");return en.addChild(this),en},$t.prototype.setTransform=function(){var en=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,tn=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,nn=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,an=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,rn=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,on=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,sn=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,dn=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,ln=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=en,this.position.y=tn,this.scale.x=nn||1,this.scale.y=an||1,this.rotation=rn,this.skew.x=on,this.skew.y=sn,this.pivot.x=dn,this.pivot.y=ln,this},$t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Ht($t,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new $t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(en){this.transform.position.x=en}},{key:"y",get:function(){return this.position.y},set:function(en){this.transform.position.y=en}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(en){this.transform.position.copy(en)}},{key:"scale",get:function(){return this.transform.scale},set:function(en){this.transform.scale.copy(en)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(en){this.transform.pivot.copy(en)}},{key:"skew",get:function(){return this.transform.skew},set:function(en){this.transform.skew.copy(en)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(en){this.transform.rotation=en}},{key:"worldVisible",get:function(){var en=this;do{if(!en.visible)return!1;en=en.parent}while(en);return!0}},{key:"mask",get:function(){return this._mask},set:function(en){this._mask&&(this._mask.renderable=!0),this._mask=en,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(en){this._filters=en&&en.slice()}}]),$t}(Wt.default);Xt.default=Jt,Jt.prototype.displayObjectUpdateTransform=Jt.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=Bt("../math"),Wt=function(jt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,jt.call(this));return Vt.position=new Ht.Point(0,0),Vt.scale=new Ht.Point(1,1),Vt.skew=new Ht.ObservablePoint(Vt.updateSkew,Vt,0,0),Vt.pivot=new Ht.Point(0,0),Vt._rotation=0,Vt._cx=1,Vt._sx=0,Vt._cy=0,Vt._sy=1,Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},zt.prototype.updateLocalTransform=function(){var Vt=this.localTransform;Vt.a=this._cx*this.scale.x,Vt.b=this._sx*this.scale.x,Vt.c=this._cy*this.scale.y,Vt.d=this._sy*this.scale.y,Vt.tx=this.position.x-(this.pivot.x*Vt.a+this.pivot.y*Vt.c),Vt.ty=this.position.y-(this.pivot.x*Vt.b+this.pivot.y*Vt.d)},zt.prototype.updateTransform=function(Vt){var qt=this.localTransform;qt.a=this._cx*this.scale.x,qt.b=this._sx*this.scale.x,qt.c=this._cy*this.scale.y,qt.d=this._sy*this.scale.y,qt.tx=this.position.x-(this.pivot.x*qt.a+this.pivot.y*qt.c),qt.ty=this.position.y-(this.pivot.x*qt.b+this.pivot.y*qt.d);var Kt=Vt.worldTransform,Qt=this.worldTransform;Qt.a=qt.a*Kt.a+qt.b*Kt.c,Qt.b=qt.a*Kt.b+qt.b*Kt.d,Qt.c=qt.c*Kt.a+qt.d*Kt.c,Qt.d=qt.c*Kt.b+qt.d*Kt.d,Qt.tx=qt.tx*Kt.a+qt.ty*Kt.c+Kt.tx,Qt.ty=qt.tx*Kt.b+qt.ty*Kt.d+Kt.ty,this._worldID++},zt.prototype.setFromMatrix=function(Vt){Vt.decompose(this)},Yt(zt,[{key:"rotation",get:function(){return this._rotation},set:function(Vt){this._rotation=Vt,this.updateSkew()}}]),zt}(function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./TransformBase")).default);Xt.default=Wt},{"../math":70,"./TransformBase":51}],51:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=Bt("../math"),Ht=function(){function Wt(){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.worldTransform=new Yt.Matrix,this.localTransform=new Yt.Matrix,this._worldID=0,this._parentID=0}return Wt.prototype.updateLocalTransform=function(){},Wt.prototype.updateTransform=function(jt){var zt=jt.worldTransform,Vt=this.worldTransform,qt=this.localTransform;Vt.a=qt.a*zt.a+qt.b*zt.c,Vt.b=qt.a*zt.b+qt.b*zt.d,Vt.c=qt.c*zt.a+qt.d*zt.c,Vt.d=qt.c*zt.b+qt.d*zt.d,Vt.tx=qt.tx*zt.a+qt.ty*zt.c+zt.tx,Vt.ty=qt.tx*zt.b+qt.ty*zt.d+zt.ty,this._worldID++},Wt}();Xt.default=Ht,Ht.prototype.updateWorldTransform=Ht.prototype.updateTransform,Ht.IDENTITY=new Ht},{"../math":70}],52:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=Bt("../math"),Wt=function(jt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,jt.call(this));return Vt.position=new Ht.ObservablePoint(Vt.onChange,Vt,0,0),Vt.scale=new Ht.ObservablePoint(Vt.onChange,Vt,1,1),Vt.pivot=new Ht.ObservablePoint(Vt.onChange,Vt,0,0),Vt.skew=new Ht.ObservablePoint(Vt.updateSkew,Vt,0,0),Vt._rotation=0,Vt._cx=1,Vt._sx=0,Vt._cy=0,Vt._sy=1,Vt._localID=0,Vt._currentLocalID=0,Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.onChange=function(){this._localID++},zt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},zt.prototype.updateLocalTransform=function(){var Vt=this.localTransform;this._localID!==this._currentLocalID&&(Vt.a=this._cx*this.scale._x,Vt.b=this._sx*this.scale._x,Vt.c=this._cy*this.scale._y,Vt.d=this._sy*this.scale._y,Vt.tx=this.position._x-(this.pivot._x*Vt.a+this.pivot._y*Vt.c),Vt.ty=this.position._y-(this.pivot._x*Vt.b+this.pivot._y*Vt.d),this._currentLocalID=this._localID,this._parentID=-1)},zt.prototype.updateTransform=function(Vt){var qt=this.localTransform;if(this._localID!==this._currentLocalID&&(qt.a=this._cx*this.scale._x,qt.b=this._sx*this.scale._x,qt.c=this._cy*this.scale._y,qt.d=this._sy*this.scale._y,qt.tx=this.position._x-(this.pivot._x*qt.a+this.pivot._y*qt.c),qt.ty=this.position._y-(this.pivot._x*qt.b+this.pivot._y*qt.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==Vt._worldID){var Kt=Vt.worldTransform,Qt=this.worldTransform;Qt.a=qt.a*Kt.a+qt.b*Kt.c,Qt.b=qt.a*Kt.b+qt.b*Kt.d,Qt.c=qt.c*Kt.a+qt.d*Kt.c,Qt.d=qt.c*Kt.b+qt.d*Kt.d,Qt.tx=qt.tx*Kt.a+qt.ty*Kt.c+Kt.tx,Qt.ty=qt.tx*Kt.b+qt.ty*Kt.d+Kt.ty,this._parentID=Vt._worldID,this._worldID++}},zt.prototype.setFromMatrix=function(Vt){Vt.decompose(this),this._localID++},Yt(zt,[{key:"rotation",get:function(){return this._rotation},set:function(Vt){this._rotation=Vt,this.updateSkew()}}]),zt}(function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./TransformBase")).default);Xt.default=Wt},{"../math":70,"./TransformBase":51}],53:[function(Bt,Gt,Xt){function Yt(sn){return sn&&sn.__esModule?sn:{default:sn}}Xt.__esModule=!0;var Ht=Yt(Bt("../display/Container")),Wt=Yt(Bt("../textures/RenderTexture")),jt=Yt(Bt("../textures/Texture")),zt=Yt(Bt("./GraphicsData")),Vt=Yt(Bt("../sprites/Sprite")),qt=Bt("../math"),Kt=Bt("../utils"),Qt=Bt("../const"),Jt=Yt(Bt("../display/Bounds")),Zt=Yt(Bt("./utils/bezierCurveTo")),$t=Yt(Bt("../renderers/canvas/CanvasRenderer")),en,tn=new qt.Matrix,nn=new qt.Point,an=new Float32Array(4),rn=new Float32Array(4),on=function(sn){function dn(){var ln=0<arguments.length&&void 0!==arguments[0]&&arguments[0];!function(pn,cn){if(!(pn instanceof cn))throw new TypeError("Cannot call a class as a function")}(this,dn);var un=function(pn,cn){if(!pn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return cn&&("object"==typeof cn||"function"==typeof cn)?cn:pn}(this,sn.call(this));return un.fillAlpha=1,un.lineWidth=0,un.nativeLines=ln,un.lineColor=0,un.graphicsData=[],un.tint=16777215,un._prevTint=16777215,un.blendMode=Qt.BLEND_MODES.NORMAL,un.currentPath=null,un._webGL={},un.isMask=!1,un.boundsPadding=0,un._localBounds=new Jt.default,un.dirty=0,un.fastRectDirty=-1,un.clearDirty=0,un.boundsDirty=-1,un.cachedSpriteDirty=!1,un._spriteRect=null,un._fastRect=!1,un}return function(ln,un){if("function"!=typeof un&&null!==un)throw new TypeError("Super expression must either be null or a function, not "+typeof un);ln.prototype=Object.create(un&&un.prototype,{constructor:{value:ln,enumerable:!1,writable:!0,configurable:!0}}),un&&(Object.setPrototypeOf?Object.setPrototypeOf(ln,un):ln.__proto__=un)}(dn,sn),dn.prototype.clone=function(){var ln=new dn;ln.renderable=this.renderable,ln.fillAlpha=this.fillAlpha,ln.lineWidth=this.lineWidth,ln.lineColor=this.lineColor,ln.tint=this.tint,ln.blendMode=this.blendMode,ln.isMask=this.isMask,ln.boundsPadding=this.boundsPadding,ln.dirty=0,ln.cachedSpriteDirty=this.cachedSpriteDirty;for(var un=0;un<this.graphicsData.length;++un)ln.graphicsData.push(this.graphicsData[un].clone());return ln.currentPath=ln.graphicsData[ln.graphicsData.length-1],ln.updateLocalBounds(),ln},dn.prototype.lineStyle=function(){var ln=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,un=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,pn=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=ln,this.lineColor=un,this.lineAlpha=pn,this.currentPath)if(this.currentPath.shape.points.length){var cn=new qt.Polygon(this.currentPath.shape.points.slice(-2));cn.closed=!1,this.drawShape(cn)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},dn.prototype.moveTo=function(ln,un){var pn=new qt.Polygon([ln,un]);return pn.closed=!1,this.drawShape(pn),this},dn.prototype.lineTo=function(ln,un){return this.currentPath.shape.points.push(ln,un),this.dirty++,this},dn.prototype.quadraticCurveTo=function(ln,un,pn,cn){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var hn=this.currentPath.shape.points,fn=0,gn=0;0===hn.length&&this.moveTo(0,0);for(var mn=hn[hn.length-2],yn=hn[hn.length-1],_n=1,bn;20>=_n;++_n)bn=_n/20,fn=mn+(ln-mn)*bn,gn=yn+(un-yn)*bn,hn.push(fn+(ln+(pn-ln)*bn-fn)*bn,gn+(un+(cn-un)*bn-gn)*bn);return this.dirty++,this},dn.prototype.bezierCurveTo=function(ln,un,pn,cn,hn,fn){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var gn=this.currentPath.shape.points,mn=gn[gn.length-2],yn=gn[gn.length-1];return gn.length-=2,(0,Zt.default)(mn,yn,ln,un,pn,cn,hn,fn,gn),this.dirty++,this},dn.prototype.arcTo=function(ln,un,pn,cn,hn){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(ln,un):this.moveTo(ln,un);var fn=this.currentPath.shape.points,gn=fn[fn.length-2],mn=fn[fn.length-1]-un,yn=gn-ln,_n=cn-un,bn=pn-ln,xn=Math.abs(mn*bn-yn*_n);if(1e-8>xn||0===hn)fn[fn.length-2]===ln&&fn[fn.length-1]===un||fn.push(ln,un);else{var vn=mn*mn+yn*yn,Tn=_n*_n+bn*bn,En=mn*_n+yn*bn,Sn=hn*Math.sqrt(vn)/xn,An=hn*Math.sqrt(Tn)/xn,wn=Sn*En/vn,Cn=An*En/Tn,Pn=Sn*bn+An*yn,Dn=Sn*_n+An*mn,Ln=Math.atan2(mn*(An+wn)-Dn,yn*(An+wn)-Pn),kn=Math.atan2(_n*(Sn+Cn)-Dn,bn*(Sn+Cn)-Pn);this.arc(Pn+ln,Dn+un,hn,Ln,kn,yn*_n>bn*mn)}return this.dirty++,this},dn.prototype.arc=function(ln,un,pn,cn,hn){var fn=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(cn===hn)return this;!fn&&hn<=cn?hn+=2*Math.PI:fn&&cn<=hn&&(cn+=2*Math.PI);var gn=hn-cn,mn=40*Math.ceil(Math.abs(gn)/(2*Math.PI));if(0==gn)return this;var yn=ln+Math.cos(cn)*pn,_n=un+Math.sin(cn)*pn,bn=this.currentPath?this.currentPath.shape.points:null;bn?bn[bn.length-2]===yn&&bn[bn.length-1]===_n||bn.push(yn,_n):(this.moveTo(yn,_n),bn=this.currentPath.shape.points);for(var xn=gn/(2*mn),Tn=Math.cos(xn),En=Math.sin(xn),Sn=mn-1,wn=0;wn<=Sn;++wn){var Cn=xn+cn+2*xn*(wn+Sn%1/Sn*wn),Pn=Math.cos(Cn),Dn=-Math.sin(Cn);bn.push((Tn*Pn+En*Dn)*pn+ln,(Tn*-Dn+En*Pn)*pn+un)}return this.dirty++,this},dn.prototype.beginFill=function(){var ln=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,un=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=ln,this.fillAlpha=un,this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},dn.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},dn.prototype.drawRect=function(ln,un,pn,cn){return this.drawShape(new qt.Rectangle(ln,un,pn,cn)),this},dn.prototype.drawRoundedRect=function(ln,un,pn,cn,hn){return this.drawShape(new qt.RoundedRectangle(ln,un,pn,cn,hn)),this},dn.prototype.drawCircle=function(ln,un,pn){return this.drawShape(new qt.Circle(ln,un,pn)),this},dn.prototype.drawEllipse=function(ln,un,pn,cn){return this.drawShape(new qt.Ellipse(ln,un,pn,cn)),this},dn.prototype.drawPolygon=function(ln){var un=ln,pn=!0;if(un instanceof qt.Polygon&&(pn=un.closed,un=un.points),!Array.isArray(un)){un=Array(arguments.length);for(var cn=0;cn<un.length;++cn)un[cn]=arguments[cn]}var hn=new qt.Polygon(un);return hn.closed=pn,this.drawShape(hn),this},dn.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},dn.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===Qt.SHAPES.RECT&&!this.graphicsData[0].lineWidth},dn.prototype._renderWebGL=function(ln){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(ln):(ln.setObjectRenderer(ln.plugins.graphics),ln.plugins.graphics.render(this))},dn.prototype._renderSpriteRect=function(ln){var un=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new Vt.default(new jt.default(jt.default.WHITE)));var pn=this._spriteRect;if(16777215===this.tint)pn.tint=this.graphicsData[0].fillColor;else{var cn=an,hn=rn;(0,Kt.hex2rgb)(this.graphicsData[0].fillColor,cn),(0,Kt.hex2rgb)(this.tint,hn),cn[0]*=hn[0],cn[1]*=hn[1],cn[2]*=hn[2],pn.tint=(0,Kt.rgb2hex)(cn)}pn.alpha=this.graphicsData[0].fillAlpha,pn.worldAlpha=this.worldAlpha*pn.alpha,pn.blendMode=this.blendMode,pn._texture._frame.width=un.width,pn._texture._frame.height=un.height,pn.transform.worldTransform=this.transform.worldTransform,pn.anchor.set(-un.x/un.width,-un.y/un.height),pn._onAnchorUpdate(),pn._renderWebGL(ln)},dn.prototype._renderCanvas=function(ln){!0!==this.isMask&&ln.plugins.graphics.render(this)},dn.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var ln=this._localBounds;this._bounds.addFrame(this.transform,ln.minX,ln.minY,ln.maxX,ln.maxY)},dn.prototype.containsPoint=function(ln){this.worldTransform.applyInverse(ln,nn);for(var un=this.graphicsData,pn=0,cn;pn<un.length;++pn)if(cn=un[pn],cn.fill&&cn.shape&&cn.shape.contains(nn.x,nn.y)){if(cn.holes)for(var hn=0;hn<cn.holes.length;hn++)if(cn.holes[hn].contains(nn.x,nn.y))return!1;return!0}return!1},dn.prototype.updateLocalBounds=function(){var ln=1/0,un=-1/0,pn=1/0,cn=-1/0;if(this.graphicsData.length)for(var hn=0,fn=0,gn=0,mn=0,yn=0,_n=0;_n<this.graphicsData.length;_n++){var bn=this.graphicsData[_n],xn=bn.type,vn=bn.lineWidth;if(hn=bn.shape,xn===Qt.SHAPES.RECT||xn===Qt.SHAPES.RREC)fn=hn.x-vn/2,gn=hn.y-vn/2,mn=hn.width+vn,yn=hn.height+vn,ln=fn<ln?fn:ln,un=fn+mn>un?fn+mn:un,pn=gn<pn?gn:pn,cn=gn+yn>cn?gn+yn:cn;else if(xn===Qt.SHAPES.CIRC)fn=hn.x,gn=hn.y,mn=hn.radius+vn/2,yn=hn.radius+vn/2,ln=fn-mn<ln?fn-mn:ln,un=fn+mn>un?fn+mn:un,pn=gn-yn<pn?gn-yn:pn,cn=gn+yn>cn?gn+yn:cn;else if(xn===Qt.SHAPES.ELIP)fn=hn.x,gn=hn.y,mn=hn.width+vn/2,yn=hn.height+vn/2,ln=fn-mn<ln?fn-mn:ln,un=fn+mn>un?fn+mn:un,pn=gn-yn<pn?gn-yn:pn,cn=gn+yn>cn?gn+yn:cn;else for(var Tn=hn.points,En=0,Sn=0,An=0,wn=0,Cn=0,Pn=0,Dn=0,Mn=0,Rn=0;Rn+2<Tn.length;Rn+=2)fn=Tn[Rn],gn=Tn[Rn+1],En=Tn[Rn+2],Sn=Tn[Rn+3],An=Math.abs(En-fn),wn=Math.abs(Sn-gn),yn=vn,1e-9>(mn=Math.sqrt(An*An+wn*wn))||(Pn=(yn/mn*An+wn)/2,Mn=(Sn+gn)/2,ln=(Dn=(En+fn)/2)-(Cn=(yn/mn*wn+An)/2)<ln?Dn-Cn:ln,un=Dn+Cn>un?Dn+Cn:un,pn=Mn-Pn<pn?Mn-Pn:pn,cn=Mn+Pn>cn?Mn+Pn:cn)}else ln=0,un=0,pn=0,cn=0;var In=this.boundsPadding;this._localBounds.minX=ln-In,this._localBounds.maxX=un+In,this._localBounds.minY=pn-In,this._localBounds.maxY=cn+In},dn.prototype.drawShape=function(ln){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop(),this.currentPath=null;var un=new zt.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,ln);return this.graphicsData.push(un),un.type===Qt.SHAPES.POLY&&(un.shape.closed=un.shape.closed||this.filling,this.currentPath=un),this.dirty++,un},dn.prototype.generateCanvasTexture=function(ln){var un=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,pn=this.getLocalBounds(),cn=Wt.default.create(pn.width,pn.height,ln,un);en||(en=new $t.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(tn),tn.invert(),tn.tx-=pn.x,tn.ty-=pn.y,en.render(this,cn,!0,tn);var hn=jt.default.fromCanvas(cn.baseTexture._canvasRenderTarget.canvas,ln,"graphics");return hn.baseTexture.resolution=un,hn.baseTexture.update(),hn},dn.prototype.closePath=function(){var ln=this.currentPath;return ln&&ln.shape&&ln.shape.close(),this},dn.prototype.addHole=function(){var ln=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(ln.shape),this.currentPath=null,this},dn.prototype.destroy=function(ln){sn.prototype.destroy.call(this,ln);for(var un=0;un<this.graphicsData.length;++un)this.graphicsData[un].destroy();for(var pn in this._webgl)for(var cn=0;cn<this._webgl[pn].data.length;++cn)this._webgl[pn].data[cn].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},dn}(Ht.default);Xt.default=on,on._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":124,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Ht(Wt,jt,zt,Vt,qt,Kt,Qt,Jt){!function(Zt,$t){if(!(Zt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.lineWidth=Wt,this.nativeLines=Qt,this.lineColor=jt,this.lineAlpha=zt,this._lineTint=jt,this.fillColor=Vt,this.fillAlpha=qt,this._fillTint=Vt,this.fill=Kt,this.holes=[],this.shape=Jt,this.type=Jt.type}return Ht.prototype.clone=function(){return new Ht(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},Ht.prototype.addHole=function(Wt){this.holes.push(Wt)},Ht.prototype.destroy=function(){this.shape=null,this.holes=null},Ht}();Xt.default=Yt},{}],55:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../../renderers/canvas/CanvasRenderer")),Ht=Bt("../../const"),Wt=function(){function jt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=zt}return jt.prototype.render=function(zt){var Vt=this.renderer,qt=Vt.context,Kt=zt.worldAlpha,Qt=zt.transform.worldTransform,Jt=Vt.resolution;this._prevTint!==this.tint&&(this.dirty=!0),qt.setTransform(Qt.a*Jt,Qt.b*Jt,Qt.c*Jt,Qt.d*Jt,Qt.tx*Jt,Qt.ty*Jt),zt.dirty&&(this.updateGraphicsTint(zt),zt.dirty=!1),Vt.setBlendMode(zt.blendMode);for(var Zt=0;Zt<zt.graphicsData.length;Zt++){var $t=zt.graphicsData[Zt],en=$t.shape,tn=$t._fillTint,nn=$t._lineTint;if(qt.lineWidth=$t.lineWidth,$t.type===Ht.SHAPES.POLY){qt.beginPath(),this.renderPolygon(en.points,en.closed,qt);for(var an=0;an<$t.holes.length;an++)this.renderPolygon($t.holes[an].points,!0,qt);$t.fill&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke())}else if($t.type===Ht.SHAPES.RECT)($t.fillColor||0===$t.fillColor)&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fillRect(en.x,en.y,en.width,en.height)),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.strokeRect(en.x,en.y,en.width,en.height));else if($t.type===Ht.SHAPES.CIRC)qt.beginPath(),qt.arc(en.x,en.y,en.radius,0,2*Math.PI),qt.closePath(),$t.fill&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke());else if($t.type===Ht.SHAPES.ELIP){var rn=2*en.width,on=2*en.height,sn=en.x-rn/2,dn=en.y-on/2;qt.beginPath();var ln=.5522848*(rn/2),un=.5522848*(on/2),pn=sn+rn,cn=dn+on,hn=sn+rn/2,fn=dn+on/2;qt.moveTo(sn,fn),qt.bezierCurveTo(sn,fn-un,hn-ln,dn,hn,dn),qt.bezierCurveTo(hn+ln,dn,pn,fn-un,pn,fn),qt.bezierCurveTo(pn,fn+un,hn+ln,cn,hn,cn),qt.bezierCurveTo(hn-ln,cn,sn,fn+un,sn,fn),qt.closePath(),$t.fill&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke())}else if($t.type===Ht.SHAPES.RREC){var gn=en.x,mn=en.y,yn=en.width,_n=en.height,bn=en.radius,xn=0|Math.min(yn,_n)/2;bn=bn>xn?xn:bn,qt.beginPath(),qt.moveTo(gn,mn+bn),qt.lineTo(gn,mn+_n-bn),qt.quadraticCurveTo(gn,mn+_n,gn+bn,mn+_n),qt.lineTo(gn+yn-bn,mn+_n),qt.quadraticCurveTo(gn+yn,mn+_n,gn+yn,mn+_n-bn),qt.lineTo(gn+yn,mn+bn),qt.quadraticCurveTo(gn+yn,mn,gn+yn-bn,mn),qt.lineTo(gn+bn,mn),qt.quadraticCurveTo(gn,mn,gn,mn+bn),qt.closePath(),($t.fillColor||0===$t.fillColor)&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke())}}},jt.prototype.updateGraphicsTint=function(zt){zt._prevTint=zt.tint;for(var Vt=(255&zt.tint>>16)/255,qt=(255&zt.tint>>8)/255,Kt=(255&zt.tint)/255,Qt=0;Qt<zt.graphicsData.length;++Qt){var Jt=zt.graphicsData[Qt],Zt=0|Jt.fillColor,$t=0|Jt.lineColor;Jt._fillTint=(255*((255&Zt>>16)/255*Vt)<<16)+(255*((255&Zt>>8)/255*qt)<<8)+255*((255&Zt)/255*Kt),Jt._lineTint=(255*((255&$t>>16)/255*Vt)<<16)+(255*((255&$t>>8)/255*qt)<<8)+255*((255&$t)/255*Kt)}},jt.prototype.renderPolygon=function(zt,Vt,qt){qt.moveTo(zt[0],zt[1]);for(var Kt=1;Kt<zt.length/2;++Kt)qt.lineTo(zt[2*Kt],zt[2*Kt+1]);Vt&&qt.closePath()},jt.prototype.destroy=function(){this.renderer=null},jt}();Xt.default=Wt,Yt.default.registerPlugin("graphics",Wt)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Yt,Ht,Wt,jt,zt,Vt,qt,Kt){var Qt=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],Jt=0,Zt=0,$t=0,en=0,tn=0;Qt.push(Yt,Ht);for(var nn=1,an=0;20>=nn;++nn)$t=(Zt=(Jt=1-(an=nn/20))*Jt)*Jt,tn=(en=an*an)*an,Qt.push($t*Yt+3*Zt*an*Wt+3*Jt*en*zt+tn*qt,$t*Ht+3*Zt*an*jt+3*Jt*en*Vt+tn*Kt);return Qt}},{}],57:[function(Bt,Gt,Xt){function Yt(en){return en&&en.__esModule?en:{default:en}}Xt.__esModule=!0;var Ht=Bt("../../utils"),Wt=Bt("../../const"),jt=Yt(Bt("../../renderers/webgl/utils/ObjectRenderer")),zt=Yt(Bt("../../renderers/webgl/WebGLRenderer")),Vt=Yt(Bt("./WebGLGraphicsData")),qt=Yt(Bt("./shaders/PrimitiveShader")),Kt=Yt(Bt("./utils/buildPoly")),Qt=Yt(Bt("./utils/buildRectangle")),Jt=Yt(Bt("./utils/buildRoundedRectangle")),Zt=Yt(Bt("./utils/buildCircle")),$t=function(en){function tn(nn){!function(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}(this,tn);var an=function(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:rn}(this,en.call(this,nn));return an.graphicsDataPool=[],an.primitiveShader=null,an.gl=nn.gl,an.CONTEXT_UID=0,an}return function(nn,an){if("function"!=typeof an&&null!==an)throw new TypeError("Super expression must either be null or a function, not "+typeof an);nn.prototype=Object.create(an&&an.prototype,{constructor:{value:nn,enumerable:!1,writable:!0,configurable:!0}}),an&&(Object.setPrototypeOf?Object.setPrototypeOf(nn,an):nn.__proto__=an)}(tn,en),tn.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new qt.default(this.gl)},tn.prototype.destroy=function(){jt.default.prototype.destroy.call(this);for(var nn=0;nn<this.graphicsDataPool.length;++nn)this.graphicsDataPool[nn].destroy();this.graphicsDataPool=null},tn.prototype.render=function(nn){var an=this.renderer,rn=an.gl,on,sn=nn._webGL[this.CONTEXT_UID];sn&&nn.dirty===sn.dirty||(this.updateGraphics(nn),sn=nn._webGL[this.CONTEXT_UID]);var dn=this.primitiveShader;an.bindShader(dn),an.state.setBlendMode(nn.blendMode);for(var ln=0,un=sn.data.length,pn;ln<un;ln++)pn=(on=sn.data[ln]).shader,an.bindShader(pn),pn.uniforms.translationMatrix=nn.transform.worldTransform.toArray(!0),pn.uniforms.tint=(0,Ht.hex2rgb)(nn.tint),pn.uniforms.alpha=nn.worldAlpha,an.bindVao(on.vao),on.nativeLines?rn.drawArrays(rn.LINES,0,on.points.length/6):on.vao.draw(rn.TRIANGLE_STRIP,on.indices.length)},tn.prototype.updateGraphics=function(nn){var an=this.renderer.gl,rn=nn._webGL[this.CONTEXT_UID];if(rn||(rn=nn._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:an,clearDirty:-1,dirty:-1}),rn.dirty=nn.dirty,nn.clearDirty!==rn.clearDirty){rn.clearDirty=nn.clearDirty;for(var on=0;on<rn.data.length;on++)this.graphicsDataPool.push(rn.data[on]);rn.data.length=0,rn.lastIndex=0}for(var sn=void 0,dn=void 0,ln=rn.lastIndex,un;ln<nn.graphicsData.length;ln++)un=nn.graphicsData[ln],sn=this.getWebGLData(rn,0),un.nativeLines&&un.lineWidth&&(dn=this.getWebGLData(rn,0,!0),rn.lastIndex++),un.type===Wt.SHAPES.POLY&&(0,Kt.default)(un,sn,dn),un.type===Wt.SHAPES.RECT?(0,Qt.default)(un,sn,dn):un.type===Wt.SHAPES.CIRC||un.type===Wt.SHAPES.ELIP?(0,Zt.default)(un,sn,dn):un.type===Wt.SHAPES.RREC&&(0,Jt.default)(un,sn,dn),rn.lastIndex++;this.renderer.bindVao(null);for(var pn=0;pn<rn.data.length;pn++)(sn=rn.data[pn]).dirty&&sn.upload()},tn.prototype.getWebGLData=function(nn,an,rn){var on=nn.data[nn.data.length-1];return(!on||on.nativeLines!==rn||32e4<on.points.length)&&((on=this.graphicsDataPool.pop()||new Vt.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=rn,on.reset(an),nn.data.push(on)),on.dirty=!0,on},tn}(jt.default);Xt.default=$t,zt.default.registerPlugin("graphics",$t)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":124,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("pixi-gl-core")),Ht=function(){function Wt(jt,zt,Vt){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.gl=jt,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=Yt.default.GLBuffer.createVertexBuffer(jt),this.indexBuffer=Yt.default.GLBuffer.createIndexBuffer(jt),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=zt,this.vao=new Yt.default.VertexArrayObject(jt,Vt).addIndex(this.indexBuffer).addAttribute(this.buffer,zt.attributes.aVertexPosition,jt.FLOAT,!1,24,0).addAttribute(this.buffer,zt.attributes.aColor,jt.FLOAT,!1,24,8)}return Wt.prototype.reset=function(){this.points.length=0,this.indices.length=0},Wt.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},Wt.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},Wt}();Xt.default=Ht},{"pixi-gl-core":12}],59:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Ht){function Wt(jt){return function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),function(zt,Vt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&("object"==typeof Vt||"function"==typeof Vt)?Vt:zt}(this,Ht.call(this,jt,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(jt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);jt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,zt):jt.__proto__=zt)}(Wt,Ht),Wt}(function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("../../../Shader")).default);Xt.default=Yt},{"../../../Shader":44}],60:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(jt,zt,Vt){var qt=jt.shape,Kt=qt.x,Qt=qt.y,Jt,Zt;if(jt.type===Ht.SHAPES.CIRC?(Jt=qt.radius,Zt=qt.radius):(Jt=qt.width,Zt=qt.height),0!==Jt&&0!==Zt){var $t=Math.floor(30*Math.sqrt(qt.radius))||Math.floor(15*Math.sqrt(qt.width+qt.height)),en=2*Math.PI/$t;if(jt.fill){var tn=(0,Wt.hex2rgb)(jt.fillColor),nn=jt.fillAlpha,an=tn[0]*nn,rn=tn[1]*nn,on=tn[2]*nn,sn=zt.points,dn=zt.indices,ln=sn.length/6;dn.push(ln);for(var un=0;un<$t+1;un++)sn.push(Kt,Qt,an,rn,on,nn),sn.push(Kt+Math.sin(en*un)*Jt,Qt+Math.cos(en*un)*Zt,an,rn,on,nn),dn.push(ln++,ln++);dn.push(ln-1)}if(jt.lineWidth){var pn=jt.points;jt.points=[];for(var cn=0;cn<$t+1;cn++)jt.points.push(Kt+Math.sin(en*cn)*Jt,Qt+Math.cos(en*cn)*Zt);(0,Yt.default)(jt,zt,Vt),jt.points=pn}}};var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./buildLine")),Ht=Bt("../../../const"),Wt=Bt("../../../utils")},{"../../../const":46,"../../../utils":124,"./buildLine":61}],61:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt,jt,zt){Wt.nativeLines?function(Vt,qt){var Kt=0,Qt=Vt.points;if(0!==Qt.length){var Jt=qt.points,Zt=Qt.length/2,$t=(0,Ht.hex2rgb)(Vt.lineColor),en=Vt.lineAlpha,tn=$t[0]*en,nn=$t[1]*en,an=$t[2]*en;for(Kt=1;Kt<Zt;Kt++){var rn=Qt[2*(Kt-1)],on=Qt[2*(Kt-1)+1],sn=Qt[2*Kt],dn=Qt[2*Kt+1];Jt.push(rn,on),Jt.push(tn,nn,an,en),Jt.push(sn,dn),Jt.push(tn,nn,an,en)}}}(Wt,zt):function(Vt,qt){var Kt=Vt.points;if(0!==Kt.length){var Qt=new Yt.Point(Kt[0],Kt[1]),Jt=new Yt.Point(Kt[Kt.length-2],Kt[Kt.length-1]);if(Qt.x===Jt.x&&Qt.y===Jt.y){(Kt=Kt.slice()).pop(),Kt.pop();var Zt=(Jt=new Yt.Point(Kt[Kt.length-2],Kt[Kt.length-1])).x+.5*(Qt.x-Jt.x),$t=Jt.y+.5*(Qt.y-Jt.y);Kt.unshift(Zt,$t),Kt.push(Zt,$t)}var en=qt.points,tn=qt.indices,nn=Kt.length/2,an=Kt.length,rn=en.length/6,on=Vt.lineWidth/2,sn=(0,Ht.hex2rgb)(Vt.lineColor),dn=Vt.lineAlpha,ln=sn[0]*dn,un=sn[1]*dn,pn=sn[2]*dn,cn=Kt[0],hn=Kt[1],fn=Kt[2],gn=Kt[3],mn=0,yn=0,_n=-(hn-gn),bn=cn-fn,xn=0,vn=0,Tn=0,En=0,Sn=Math.sqrt(_n*_n+bn*bn);_n/=Sn,bn/=Sn,_n*=on,bn*=on,en.push(cn-_n,hn-bn,ln,un,pn,dn),en.push(cn+_n,hn+bn,ln,un,pn,dn);for(var An=1;An<nn-1;++An){cn=Kt[2*(An-1)],hn=Kt[2*(An-1)+1],fn=Kt[2*An],gn=Kt[2*An+1],mn=Kt[2*(An+1)],yn=Kt[2*(An+1)+1],_n=-(hn-gn),bn=cn-fn,_n/=Sn=Math.sqrt(_n*_n+bn*bn),bn/=Sn,_n*=on,bn*=on,xn=-(gn-yn),vn=fn-mn,xn/=Sn=Math.sqrt(xn*xn+vn*vn),vn/=Sn;var wn=-bn+hn-(-bn+gn),Cn=-_n+fn-(-_n+cn),Pn=(-_n+cn)*(-bn+gn)-(-_n+fn)*(-bn+hn),Dn=-(vn*=on)+yn-(-vn+gn),Mn=-(xn*=on)+fn-(-xn+mn),Rn=(-xn+mn)*(-vn+gn)-(-xn+fn)*(-vn+yn),In=wn*Mn-Dn*Cn;if(.1>Math.abs(In))In+=10.1,en.push(fn-_n,gn-bn,ln,un,pn,dn),en.push(fn+_n,gn+bn,ln,un,pn,dn);else{var On=(Cn*Rn-Mn*Pn)/In,Ln=(Dn*Pn-wn*Rn)/In;(On-fn)*(On-fn)+(Ln-gn)*(Ln-gn)>196*on*on?(Tn=_n-xn,En=bn-vn,Tn/=Sn=Math.sqrt(Tn*Tn+En*En),En/=Sn,Tn*=on,En*=on,en.push(fn-Tn,gn-En),en.push(ln,un,pn,dn),en.push(fn+Tn,gn+En),en.push(ln,un,pn,dn),en.push(fn-Tn,gn-En),en.push(ln,un,pn,dn),an++):(en.push(On,Ln),en.push(ln,un,pn,dn),en.push(fn-(On-fn),gn-(Ln-gn)),en.push(ln,un,pn,dn))}}cn=Kt[2*(nn-2)],hn=Kt[2*(nn-2)+1],fn=Kt[2*(nn-1)],_n=-(hn-(gn=Kt[2*(nn-1)+1])),bn=cn-fn,_n/=Sn=Math.sqrt(_n*_n+bn*bn),bn/=Sn,_n*=on,bn*=on,en.push(fn-_n,gn-bn),en.push(ln,un,pn,dn),en.push(fn+_n,gn+bn),en.push(ln,un,pn,dn),tn.push(rn);for(var kn=0;kn<an;++kn)tn.push(rn++);tn.push(rn-1)}}(Wt,jt)};var Yt=Bt("../../../math"),Ht=Bt("../../../utils")},{"../../../math":70,"../../../utils":124}],62:[function(Bt,Gt,Xt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0,Xt.default=function(zt,Vt,qt){zt.points=zt.shape.points.slice();var Kt=zt.points;if(zt.fill&&6<=Kt.length){for(var Qt=[],Jt=zt.holes,Zt=0,$t;Zt<Jt.length;Zt++)$t=Jt[Zt],Qt.push(Kt.length/2),Kt=Kt.concat($t.points);var en=Vt.points,tn=Vt.indices,nn=Kt.length/2,an=(0,Wt.hex2rgb)(zt.fillColor),rn=zt.fillAlpha,on=an[0]*rn,sn=an[1]*rn,dn=an[2]*rn,ln=(0,jt.default)(Kt,Qt,2);if(!ln)return;for(var un=en.length/6,pn=0;pn<ln.length;pn+=3)tn.push(ln[pn]+un),tn.push(ln[pn]+un),tn.push(ln[pn+1]+un),tn.push(ln[pn+2]+un),tn.push(ln[pn+2]+un);for(var cn=0;cn<nn;cn++)en.push(Kt[2*cn],Kt[2*cn+1],on,sn,dn,rn)}0<zt.lineWidth&&(0,Ht.default)(zt,Vt,qt)};var Ht=Yt(Bt("./buildLine")),Wt=Bt("../../../utils"),jt=Yt(Bt("earcut"))},{"../../../utils":124,"./buildLine":61,earcut:2}],63:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt,jt,zt){var Vt=Wt.shape,qt=Vt.x,Kt=Vt.y,Qt=Vt.width,Jt=Vt.height;if(Wt.fill){var Zt=(0,Ht.hex2rgb)(Wt.fillColor),$t=Wt.fillAlpha,en=Zt[0]*$t,tn=Zt[1]*$t,nn=Zt[2]*$t,an=jt.points,rn=jt.indices,on=an.length/6;an.push(qt,Kt),an.push(en,tn,nn,$t),an.push(qt+Qt,Kt),an.push(en,tn,nn,$t),an.push(qt,Kt+Jt),an.push(en,tn,nn,$t),an.push(qt+Qt,Kt+Jt),an.push(en,tn,nn,$t),rn.push(on,on,on+1,on+2,on+3,on+3)}if(Wt.lineWidth){var sn=Wt.points;Wt.points=[qt,Kt,qt+Qt,Kt,qt+Qt,Kt+Jt,qt,Kt+Jt,qt,Kt],(0,Yt.default)(Wt,jt,zt),Wt.points=sn}};var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./buildLine")),Ht=Bt("../../../utils")},{"../../../utils":124,"./buildLine":61}],64:[function(Bt,Gt,Xt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}function Ht(qt,Kt,Qt){return qt+(Kt-qt)*Qt}function Wt(qt,Kt,Qt,Jt,Zt,$t){for(var en=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],tn=0,nn=0,an=0,rn=0,on=0,sn=0,dn=0,ln=0;20>=dn;++dn)tn=Ht(qt,Qt,ln=dn/20),nn=Ht(Kt,Jt,ln),an=Ht(Qt,Zt,ln),rn=Ht(Jt,$t,ln),on=Ht(tn,an,ln),sn=Ht(nn,rn,ln),en.push(on,sn);return en}Xt.__esModule=!0,Xt.default=function(qt,Kt,Qt){var Jt=qt.shape,Zt=Jt.x,$t=Jt.y,en=Jt.width,tn=Jt.height,nn=Jt.radius,an=[];if(an.push(Zt,$t+nn),Wt(Zt,$t+tn-nn,Zt,$t+tn,Zt+nn,$t+tn,an),Wt(Zt+en-nn,$t+tn,Zt+en,$t+tn,Zt+en,$t+tn-nn,an),Wt(Zt+en,$t+nn,Zt+en,$t,Zt+en-nn,$t,an),Wt(Zt+nn,$t,Zt,$t,Zt,$t+nn+1e-10,an),qt.fill){for(var rn=(0,Vt.hex2rgb)(qt.fillColor),on=qt.fillAlpha,sn=rn[0]*on,dn=rn[1]*on,ln=rn[2]*on,un=Kt.points,pn=Kt.indices,cn=un.length/6,hn=(0,jt.default)(an,null,2),fn=0,gn=hn.length;fn<gn;fn+=3)pn.push(hn[fn]+cn),pn.push(hn[fn]+cn),pn.push(hn[fn+1]+cn),pn.push(hn[fn+2]+cn),pn.push(hn[fn+2]+cn);for(var mn=0,yn=an.length;mn<yn;mn++)un.push(an[mn],an[++mn],sn,dn,ln,on)}if(qt.lineWidth){var _n=qt.points;qt.points=an,(0,zt.default)(qt,Kt,Qt),qt.points=_n}};var jt=Yt(Bt("earcut")),zt=Yt(Bt("./buildLine")),Vt=Bt("../../../utils")},{"../../../utils":124,"./buildLine":61,earcut:2}],65:[function(Bt,Gt,Xt){function Yt(On){if(On&&On.__esModule)return On;var Ln={};if(null!=On)for(var kn in On)Object.prototype.hasOwnProperty.call(On,kn)&&(Ln[kn]=On[kn]);return Ln.default=On,Ln}function Ht(On){return On&&On.__esModule?On:{default:On}}Xt.__esModule=!0,Xt.autoDetectRenderer=Xt.Application=Xt.Filter=Xt.SpriteMaskFilter=Xt.Quad=Xt.RenderTarget=Xt.ObjectRenderer=Xt.WebGLManager=Xt.Shader=Xt.CanvasRenderTarget=Xt.TextureUvs=Xt.VideoBaseTexture=Xt.BaseRenderTexture=Xt.RenderTexture=Xt.BaseTexture=Xt.Texture=Xt.Spritesheet=Xt.CanvasGraphicsRenderer=Xt.GraphicsRenderer=Xt.GraphicsData=Xt.Graphics=Xt.TextMetrics=Xt.TextStyle=Xt.Text=Xt.SpriteRenderer=Xt.CanvasTinter=Xt.CanvasSpriteRenderer=Xt.Sprite=Xt.TransformBase=Xt.TransformStatic=Xt.Transform=Xt.Container=Xt.DisplayObject=Xt.Bounds=Xt.glCore=Xt.WebGLRenderer=Xt.CanvasRenderer=Xt.ticker=Xt.utils=Xt.settings=void 0;var Wt=Bt("./const");Object.keys(Wt).forEach(function(On){"default"!==On&&"__esModule"!==On&&Object.defineProperty(Xt,On,{enumerable:!0,get:function(){return Wt[On]}})});var jt=Bt("./math");Object.keys(jt).forEach(function(On){"default"!==On&&"__esModule"!==On&&Object.defineProperty(Xt,On,{enumerable:!0,get:function(){return jt[On]}})});var zt=Bt("pixi-gl-core");Object.defineProperty(Xt,"glCore",{enumerable:!0,get:function(){return Ht(zt).default}});var Vt=Bt("./display/Bounds");Object.defineProperty(Xt,"Bounds",{enumerable:!0,get:function(){return Ht(Vt).default}});var qt=Bt("./display/DisplayObject");Object.defineProperty(Xt,"DisplayObject",{enumerable:!0,get:function(){return Ht(qt).default}});var Kt=Bt("./display/Container");Object.defineProperty(Xt,"Container",{enumerable:!0,get:function(){return Ht(Kt).default}});var Qt=Bt("./display/Transform");Object.defineProperty(Xt,"Transform",{enumerable:!0,get:function(){return Ht(Qt).default}});var Jt=Bt("./display/TransformStatic");Object.defineProperty(Xt,"TransformStatic",{enumerable:!0,get:function(){return Ht(Jt).default}});var Zt=Bt("./display/TransformBase");Object.defineProperty(Xt,"TransformBase",{enumerable:!0,get:function(){return Ht(Zt).default}});var $t=Bt("./sprites/Sprite");Object.defineProperty(Xt,"Sprite",{enumerable:!0,get:function(){return Ht($t).default}});var en=Bt("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(Xt,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return Ht(en).default}});var tn=Bt("./sprites/canvas/CanvasTinter");Object.defineProperty(Xt,"CanvasTinter",{enumerable:!0,get:function(){return Ht(tn).default}});var nn=Bt("./sprites/webgl/SpriteRenderer");Object.defineProperty(Xt,"SpriteRenderer",{enumerable:!0,get:function(){return Ht(nn).default}});var an=Bt("./text/Text");Object.defineProperty(Xt,"Text",{enumerable:!0,get:function(){return Ht(an).default}});var rn=Bt("./text/TextStyle");Object.defineProperty(Xt,"TextStyle",{enumerable:!0,get:function(){return Ht(rn).default}});var on=Bt("./text/TextMetrics");Object.defineProperty(Xt,"TextMetrics",{enumerable:!0,get:function(){return Ht(on).default}});var sn=Bt("./graphics/Graphics");Object.defineProperty(Xt,"Graphics",{enumerable:!0,get:function(){return Ht(sn).default}});var dn=Bt("./graphics/GraphicsData");Object.defineProperty(Xt,"GraphicsData",{enumerable:!0,get:function(){return Ht(dn).default}});var ln=Bt("./graphics/webgl/GraphicsRenderer");Object.defineProperty(Xt,"GraphicsRenderer",{enumerable:!0,get:function(){return Ht(ln).default}});var un=Bt("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(Xt,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return Ht(un).default}});var pn=Bt("./textures/Spritesheet");Object.defineProperty(Xt,"Spritesheet",{enumerable:!0,get:function(){return Ht(pn).default}});var cn=Bt("./textures/Texture");Object.defineProperty(Xt,"Texture",{enumerable:!0,get:function(){return Ht(cn).default}});var hn=Bt("./textures/BaseTexture");Object.defineProperty(Xt,"BaseTexture",{enumerable:!0,get:function(){return Ht(hn).default}});var fn=Bt("./textures/RenderTexture");Object.defineProperty(Xt,"RenderTexture",{enumerable:!0,get:function(){return Ht(fn).default}});var gn=Bt("./textures/BaseRenderTexture");Object.defineProperty(Xt,"BaseRenderTexture",{enumerable:!0,get:function(){return Ht(gn).default}});var mn=Bt("./textures/VideoBaseTexture");Object.defineProperty(Xt,"VideoBaseTexture",{enumerable:!0,get:function(){return Ht(mn).default}});var yn=Bt("./textures/TextureUvs");Object.defineProperty(Xt,"TextureUvs",{enumerable:!0,get:function(){return Ht(yn).default}});var _n=Bt("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(Xt,"CanvasRenderTarget",{enumerable:!0,get:function(){return Ht(_n).default}});var bn=Bt("./Shader");Object.defineProperty(Xt,"Shader",{enumerable:!0,get:function(){return Ht(bn).default}});var xn=Bt("./renderers/webgl/managers/WebGLManager");Object.defineProperty(Xt,"WebGLManager",{enumerable:!0,get:function(){return Ht(xn).default}});var vn=Bt("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(Xt,"ObjectRenderer",{enumerable:!0,get:function(){return Ht(vn).default}});var Tn=Bt("./renderers/webgl/utils/RenderTarget");Object.defineProperty(Xt,"RenderTarget",{enumerable:!0,get:function(){return Ht(Tn).default}});var En=Bt("./renderers/webgl/utils/Quad");Object.defineProperty(Xt,"Quad",{enumerable:!0,get:function(){return Ht(En).default}});var Sn=Bt("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(Xt,"SpriteMaskFilter",{enumerable:!0,get:function(){return Ht(Sn).default}});var An=Bt("./renderers/webgl/filters/Filter");Object.defineProperty(Xt,"Filter",{enumerable:!0,get:function(){return Ht(An).default}});var wn=Bt("./Application");Object.defineProperty(Xt,"Application",{enumerable:!0,get:function(){return Ht(wn).default}});var Cn=Bt("./autoDetectRenderer");Object.defineProperty(Xt,"autoDetectRenderer",{enumerable:!0,get:function(){return Cn.autoDetectRenderer}});var Pn=Yt(Bt("./utils")),Dn=Yt(Bt("./ticker")),Mn=Ht(Bt("./settings")),Rn=Ht(Bt("./renderers/canvas/CanvasRenderer")),In=Ht(Bt("./renderers/webgl/WebGLRenderer"));Xt.settings=Mn.default,Xt.utils=Pn,Xt.ticker=Dn,Xt.CanvasRenderer=Rn.default,Xt.WebGLRenderer=In.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureUvs":116,"./textures/VideoBaseTexture":117,"./ticker":120,"./utils":124,"pixi-gl-core":12}],66:[function(Bt,Gt,Xt){function Yt(Jt){return 0>Jt?-1:0<Jt?1:0}Xt.__esModule=!0;var Ht=function(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}(Bt("./Matrix")),Wt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],jt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Vt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],qt=[],Kt=[];!function(){for(var Jt=0,Zt;16>Jt;Jt++){Zt=[],Kt.push(Zt);for(var $t=0;16>$t;$t++)for(var en=Yt(Wt[Jt]*Wt[$t]+zt[Jt]*jt[$t]),tn=Yt(jt[Jt]*Wt[$t]+Vt[Jt]*jt[$t]),nn=Yt(Wt[Jt]*zt[$t]+zt[Jt]*Vt[$t]),an=Yt(jt[Jt]*zt[$t]+Vt[Jt]*Vt[$t]),rn=0;16>rn;rn++)if(Wt[rn]===en&&jt[rn]===tn&&zt[rn]===nn&&Vt[rn]===an){Zt.push(rn);break}}for(var on=0,sn;16>on;on++)sn=new Ht.default,sn.set(Wt[on],jt[on],zt[on],Vt[on],0,0),qt.push(sn)}();var Qt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(Jt){return Wt[Jt]},uY:function(Jt){return jt[Jt]},vX:function(Jt){return zt[Jt]},vY:function(Jt){return Vt[Jt]},inv:function(Jt){return 8&Jt?15&Jt:7&-Jt},add:function(Jt,Zt){return Kt[Jt][Zt]},sub:function(Jt,Zt){return Kt[Jt][Qt.inv(Zt)]},rotate180:function(Jt){return 4^Jt},isSwapWidthHeight:function(Jt){return 2==(3&Jt)},byDirection:function(Jt,Zt){return 2*Math.abs(Jt)<=Math.abs(Zt)?0<=Zt?Qt.S:Qt.N:2*Math.abs(Zt)<=Math.abs(Jt)?0<Jt?Qt.E:Qt.W:0<Zt?0<Jt?Qt.SE:Qt.SW:0<Jt?Qt.NE:Qt.NW},matrixAppendRotationInv:function(Jt,Zt){var $t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,en=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,tn=qt[Qt.inv(Zt)];tn.tx=$t,tn.ty=en,Jt.append(tn)}};Xt.default=Qt},{"./Matrix":67}],67:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./Point")),Wt=function(){function jt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Kt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,Qt=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,Jt=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;!function(Zt,$t){if(!(Zt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,jt),this.a=zt,this.b=Vt,this.c=qt,this.d=Kt,this.tx=Qt,this.ty=Jt,this.array=null}return jt.prototype.fromArray=function(zt){this.a=zt[0],this.b=zt[1],this.c=zt[3],this.d=zt[4],this.tx=zt[2],this.ty=zt[5]},jt.prototype.set=function(zt,Vt,qt,Kt,Qt,Jt){return this.a=zt,this.b=Vt,this.c=qt,this.d=Kt,this.tx=Qt,this.ty=Jt,this},jt.prototype.toArray=function(zt,Vt){this.array||(this.array=new Float32Array(9));var qt=Vt||this.array;return zt?(qt[0]=this.a,qt[1]=this.b,qt[2]=0,qt[3]=this.c,qt[4]=this.d,qt[5]=0,qt[6]=this.tx,qt[7]=this.ty,qt[8]=1):(qt[0]=this.a,qt[1]=this.c,qt[2]=this.tx,qt[3]=this.b,qt[4]=this.d,qt[5]=this.ty,qt[6]=0,qt[7]=0,qt[8]=1),qt},jt.prototype.apply=function(zt,Vt){Vt=Vt||new Ht.default;var qt=zt.x,Kt=zt.y;return Vt.x=this.a*qt+this.c*Kt+this.tx,Vt.y=this.b*qt+this.d*Kt+this.ty,Vt},jt.prototype.applyInverse=function(zt,Vt){Vt=Vt||new Ht.default;var qt=1/(this.a*this.d+this.c*-this.b),Kt=zt.x,Qt=zt.y;return Vt.x=this.d*qt*Kt+-this.c*qt*Qt+(this.ty*this.c-this.tx*this.d)*qt,Vt.y=this.a*qt*Qt+-this.b*qt*Kt+(-this.ty*this.a+this.tx*this.b)*qt,Vt},jt.prototype.translate=function(zt,Vt){return this.tx+=zt,this.ty+=Vt,this},jt.prototype.scale=function(zt,Vt){return this.a*=zt,this.d*=Vt,this.c*=zt,this.b*=Vt,this.tx*=zt,this.ty*=Vt,this},jt.prototype.rotate=function(zt){var Vt=Math.cos(zt),qt=Math.sin(zt),Kt=this.a,Qt=this.c,Jt=this.tx;return this.a=Kt*Vt-this.b*qt,this.b=Kt*qt+this.b*Vt,this.c=Qt*Vt-this.d*qt,this.d=Qt*qt+this.d*Vt,this.tx=Jt*Vt-this.ty*qt,this.ty=Jt*qt+this.ty*Vt,this},jt.prototype.append=function(zt){var Vt=this.a,qt=this.b,Kt=this.c,Qt=this.d;return this.a=zt.a*Vt+zt.b*Kt,this.b=zt.a*qt+zt.b*Qt,this.c=zt.c*Vt+zt.d*Kt,this.d=zt.c*qt+zt.d*Qt,this.tx=zt.tx*Vt+zt.ty*Kt+this.tx,this.ty=zt.tx*qt+zt.ty*Qt+this.ty,this},jt.prototype.setTransform=function(zt,Vt,qt,Kt,Qt,Jt,Zt,$t,en){var tn=Math.sin(Zt),nn=Math.cos(Zt),an=Math.cos(en),rn=Math.sin(en),on=-Math.sin($t),sn=Math.cos($t),dn=nn*Qt,ln=tn*Qt,un=-tn*Jt,pn=nn*Jt;return this.a=an*dn+rn*un,this.b=an*ln+rn*pn,this.c=on*dn+sn*un,this.d=on*ln+sn*pn,this.tx=zt+(qt*dn+Kt*un),this.ty=Vt+(qt*ln+Kt*pn),this},jt.prototype.prepend=function(zt){var Vt=this.tx;if(1!==zt.a||0!==zt.b||0!==zt.c||1!==zt.d){var qt=this.a,Kt=this.c;this.a=qt*zt.a+this.b*zt.c,this.b=qt*zt.b+this.b*zt.d,this.c=Kt*zt.a+this.d*zt.c,this.d=Kt*zt.b+this.d*zt.d}return this.tx=Vt*zt.a+this.ty*zt.c+zt.tx,this.ty=Vt*zt.b+this.ty*zt.d+zt.ty,this},jt.prototype.decompose=function(zt){var Vt=this.a,qt=this.b,Kt=this.c,Qt=this.d,Jt=-Math.atan2(-Kt,Qt),Zt=Math.atan2(qt,Vt);return 1e-5>Math.abs(Jt+Zt)?(zt.rotation=Zt,0>Vt&&0<=Qt&&(zt.rotation+=0>=zt.rotation?Math.PI:-Math.PI),zt.skew.x=zt.skew.y=0):(zt.skew.x=Jt,zt.skew.y=Zt),zt.scale.x=Math.sqrt(Vt*Vt+qt*qt),zt.scale.y=Math.sqrt(Kt*Kt+Qt*Qt),zt.position.x=this.tx,zt.position.y=this.ty,zt},jt.prototype.invert=function(){var zt=this.a,Vt=this.b,qt=this.c,Kt=this.d,Qt=this.tx,Jt=zt*Kt-Vt*qt;return this.a=Kt/Jt,this.b=-Vt/Jt,this.c=-qt/Jt,this.d=zt/Jt,this.tx=(qt*this.ty-Kt*Qt)/Jt,this.ty=-(zt*this.ty-Vt*Qt)/Jt,this},jt.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},jt.prototype.clone=function(){var zt=new jt;return zt.a=this.a,zt.b=this.b,zt.c=this.c,zt.d=this.d,zt.tx=this.tx,zt.ty=this.ty,zt},jt.prototype.copy=function(zt){return zt.a=this.a,zt.b=this.b,zt.c=this.c,zt.d=this.d,zt.tx=this.tx,zt.ty=this.ty,zt},Yt(jt,null,[{key:"IDENTITY",get:function(){return new jt}},{key:"TEMP_MATRIX",get:function(){return new jt}}]),jt}();Xt.default=Wt},{"./Point":69}],68:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Wt(jt,zt){for(var Vt=0,qt;Vt<zt.length;Vt++)qt=zt[Vt],qt.enumerable=qt.enumerable||!1,qt.configurable=!0,"value"in qt&&(qt.writable=!0),Object.defineProperty(jt,qt.key,qt)}return function(jt,zt,Vt){return zt&&Wt(jt.prototype,zt),Vt&&Wt(jt,Vt),jt}}(),Ht=function(){function Wt(jt,zt){var Vt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,qt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(Kt,Qt){if(!(Kt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this._x=Vt,this._y=qt,this.cb=jt,this.scope=zt}return Wt.prototype.set=function(jt,zt){var Vt=jt||0,qt=zt||(0===zt?0:Vt);this._x===Vt&&this._y===qt||(this._x=Vt,this._y=qt,this.cb.call(this.scope))},Wt.prototype.copy=function(jt){this._x===jt.x&&this._y===jt.y||(this._x=jt.x,this._y=jt.y,this.cb.call(this.scope))},Yt(Wt,[{key:"x",get:function(){return this._x},set:function(jt){this._x!==jt&&(this._x=jt,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(jt){this._y!==jt&&(this._y=jt,this.cb.call(this.scope))}}]),Wt}();Xt.default=Ht},{}],69:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Ht(){var Wt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.x=Wt,this.y=jt}return Ht.prototype.clone=function(){return new Ht(this.x,this.y)},Ht.prototype.copy=function(Wt){this.set(Wt.x,Wt.y)},Ht.prototype.equals=function(Wt){return Wt.x===this.x&&Wt.y===this.y},Ht.prototype.set=function(Wt,jt){this.x=Wt||0,this.y=jt||(0===jt?0:this.x)},Ht}();Xt.default=Yt},{}],70:[function(Bt,Gt,Xt){function Yt(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Xt.__esModule=!0;var Ht=Bt("./Point");Object.defineProperty(Xt,"Point",{enumerable:!0,get:function(){return Yt(Ht).default}});var Wt=Bt("./ObservablePoint");Object.defineProperty(Xt,"ObservablePoint",{enumerable:!0,get:function(){return Yt(Wt).default}});var jt=Bt("./Matrix");Object.defineProperty(Xt,"Matrix",{enumerable:!0,get:function(){return Yt(jt).default}});var zt=Bt("./GroupD8");Object.defineProperty(Xt,"GroupD8",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./shapes/Circle");Object.defineProperty(Xt,"Circle",{enumerable:!0,get:function(){return Yt(Vt).default}});var qt=Bt("./shapes/Ellipse");Object.defineProperty(Xt,"Ellipse",{enumerable:!0,get:function(){return Yt(qt).default}});var Kt=Bt("./shapes/Polygon");Object.defineProperty(Xt,"Polygon",{enumerable:!0,get:function(){return Yt(Kt).default}});var Qt=Bt("./shapes/Rectangle");Object.defineProperty(Xt,"Rectangle",{enumerable:!0,get:function(){return Yt(Qt).default}});var Jt=Bt("./shapes/RoundedRectangle");Object.defineProperty(Xt,"RoundedRectangle",{enumerable:!0,get:function(){return Yt(Jt).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./Rectangle")),Ht=Bt("../../const"),Wt=function(){function jt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(Kt,Qt){if(!(Kt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.x=zt,this.y=Vt,this.radius=qt,this.type=Ht.SHAPES.CIRC}return jt.prototype.clone=function(){return new jt(this.x,this.y,this.radius)},jt.prototype.contains=function(zt,Vt){if(0>=this.radius)return!1;var qt=this.radius*this.radius,Kt=this.x-zt,Qt=this.y-Vt;return Kt*=Kt,Qt*=Qt,Kt+Qt<=qt},jt.prototype.getBounds=function(){return new Yt.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},jt}();Xt.default=Wt},{"../../const":46,"./Rectangle":74}],72:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./Rectangle")),Ht=Bt("../../const"),Wt=function(){function jt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Kt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.x=zt,this.y=Vt,this.width=qt,this.height=Kt,this.type=Ht.SHAPES.ELIP}return jt.prototype.clone=function(){return new jt(this.x,this.y,this.width,this.height)},jt.prototype.contains=function(zt,Vt){if(0>=this.width||0>=this.height)return!1;var qt=(zt-this.x)/this.width,Kt=(Vt-this.y)/this.height;return qt*=qt,Kt*=Kt,1>=qt+Kt},jt.prototype.getBounds=function(){return new Yt.default(this.x-this.width,this.y-this.height,this.width,this.height)},jt}();Xt.default=Wt},{"../../const":46,"./Rectangle":74}],73:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../Point")),Ht=Bt("../../const"),Wt=function(){function jt(){for(var zt=arguments.length,Vt=Array(zt),qt=0;qt<zt;qt++)Vt[qt]=arguments[qt];if(function(Zt,$t){if(!(Zt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,jt),Array.isArray(Vt[0])&&(Vt=Vt[0]),Vt[0]instanceof Yt.default){for(var Kt=[],Qt=0,Jt=Vt.length;Qt<Jt;Qt++)Kt.push(Vt[Qt].x,Vt[Qt].y);Vt=Kt}this.closed=!0,this.points=Vt,this.type=Ht.SHAPES.POLY}return jt.prototype.clone=function(){return new jt(this.points.slice())},jt.prototype.close=function(){var zt=this.points;zt[0]===zt[zt.length-2]&&zt[1]===zt[zt.length-1]||zt.push(zt[0],zt[1])},jt.prototype.contains=function(zt,Vt){for(var qt=!1,Kt=this.points.length/2,Qt=0,Jt=Kt-1;Qt<Kt;Jt=Qt++){var Zt=this.points[2*Qt],$t=this.points[2*Qt+1],en=this.points[2*Jt],tn=this.points[2*Jt+1];$t>Vt!=tn>Vt&&zt<(Vt-$t)/(tn-$t)*(en-Zt)+Zt&&(qt=!qt)}return qt},jt}();Xt.default=Wt},{"../../const":46,"../Point":69}],74:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=Bt("../../const"),Wt=function(){function jt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Kt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.x=+zt,this.y=+Vt,this.width=+qt,this.height=+Kt,this.type=Ht.SHAPES.RECT}return jt.prototype.clone=function(){return new jt(this.x,this.y,this.width,this.height)},jt.prototype.copy=function(zt){return this.x=zt.x,this.y=zt.y,this.width=zt.width,this.height=zt.height,this},jt.prototype.contains=function(zt,Vt){return!(0>=this.width||0>=this.height)&&zt>=this.x&&zt<this.x+this.width&&Vt>=this.y&&Vt<this.y+this.height},jt.prototype.pad=function(zt,Vt){zt=zt||0,Vt=Vt||(0===Vt?0:zt),this.x-=zt,this.y-=Vt,this.width+=2*zt,this.height+=2*Vt},jt.prototype.fit=function(zt){this.x<zt.x&&(this.width+=this.x,0>this.width&&(this.width=0),this.x=zt.x),this.y<zt.y&&(this.height+=this.y,0>this.height&&(this.height=0),this.y=zt.y),this.x+this.width>zt.x+zt.width&&(this.width=zt.width-this.x,0>this.width&&(this.width=0)),this.y+this.height>zt.y+zt.height&&(this.height=zt.height-this.y,0>this.height&&(this.height=0))},jt.prototype.enlarge=function(zt){var Vt=Math.min(this.x,zt.x),qt=Math.max(this.x+this.width,zt.x+zt.width),Kt=Math.min(this.y,zt.y),Qt=Math.max(this.y+this.height,zt.y+zt.height);this.x=Vt,this.width=qt-Vt,this.y=Kt,this.height=Qt-Kt},Yt(jt,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new jt(0,0,0,0)}}]),jt}();Xt.default=Wt},{"../../const":46}],75:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=Bt("../../const"),Ht=function(){function Wt(){var jt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,zt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,Vt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,qt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,Kt=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.x=jt,this.y=zt,this.width=Vt,this.height=qt,this.radius=Kt,this.type=Yt.SHAPES.RREC}return Wt.prototype.clone=function(){return new Wt(this.x,this.y,this.width,this.height,this.radius)},Wt.prototype.contains=function(jt,zt){if(0>=this.width||0>=this.height)return!1;if(jt>=this.x&&jt<=this.x+this.width&&zt>=this.y&&zt<=this.y+this.height){if(zt>=this.y+this.radius&&zt<=this.y+this.height-this.radius||jt>=this.x+this.radius&&jt<=this.x+this.width-this.radius)return!0;var Vt=jt-(this.x+this.radius),qt=zt-(this.y+this.radius),Kt=this.radius*this.radius;if(Vt*Vt+qt*qt<=Kt)return!0;if((Vt=jt-(this.x+this.width-this.radius))*Vt+qt*qt<=Kt)return!0;if(qt=zt-(this.y+this.height-this.radius),Vt*Vt+qt*qt<=Kt)return!0;if((Vt=jt-(this.x+this.radius))*Vt+qt*qt<=Kt)return!0}return!1},Wt}();Xt.default=Ht},{"../../const":46}],76:[function(Bt,Gt,Xt){function Yt($t){return $t&&$t.__esModule?$t:{default:$t}}Xt.__esModule=!0;var Ht=function(){function $t(en,tn){for(var nn=0,an;nn<tn.length;nn++)an=tn[nn],an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(en,an.key,an)}return function(en,tn,nn){return tn&&$t(en.prototype,tn),nn&&$t(en,nn),en}}(),Wt=Bt("../utils"),jt=Bt("../math"),zt=Bt("../const"),Vt=Yt(Bt("../settings")),qt=Yt(Bt("../display/Container")),Kt=Yt(Bt("../textures/RenderTexture")),Qt=Yt(Bt("eventemitter3")),Jt=new jt.Matrix,Zt=function($t){function en(tn,nn,an,rn){!function(sn,dn){if(!(sn instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,en);var on=function(sn,dn){if(!sn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dn&&("object"==typeof dn||"function"==typeof dn)?dn:sn}(this,$t.call(this));return(0,Wt.sayHello)(tn),"number"==typeof nn&&(nn=Object.assign({width:nn,height:an||Vt.default.RENDER_OPTIONS.height},rn)),nn=Object.assign({},Vt.default.RENDER_OPTIONS,nn),on.options=nn,on.type=zt.RENDERER_TYPE.UNKNOWN,on.screen=new jt.Rectangle(0,0,nn.width,nn.height),on.view=nn.view||document.createElement("canvas"),on.resolution=nn.resolution||Vt.default.RESOLUTION,on.transparent=nn.transparent,on.autoResize=nn.autoResize||!1,on.blendModes=null,on.preserveDrawingBuffer=nn.preserveDrawingBuffer,on.clearBeforeRender=nn.clearBeforeRender,on.roundPixels=nn.roundPixels,on._backgroundColor=0,on._backgroundColorRgba=[0,0,0,0],on._backgroundColorString="#000000",on.backgroundColor=nn.backgroundColor||on._backgroundColor,on._tempDisplayObjectParent=new qt.default,on._lastObjectRendered=on._tempDisplayObjectParent,on}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.resize=function(tn,nn){this.screen.width=tn,this.screen.height=nn,this.view.width=tn*this.resolution,this.view.height=nn*this.resolution,this.autoResize&&(this.view.style.width=tn+"px",this.view.style.height=nn+"px")},en.prototype.generateTexture=function(tn,nn,an){var rn=tn.getLocalBounds(),on=Kt.default.create(0|rn.width,0|rn.height,nn,an);return Jt.tx=-rn.x,Jt.ty=-rn.y,this.render(tn,on,!1,Jt,!0),on},en.prototype.destroy=function(tn){tn&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=zt.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},Ht(en,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(tn){this._backgroundColor=tn,this._backgroundColorString=(0,Wt.hex2string)(tn),(0,Wt.hex2rgb)(tn,this._backgroundColorRgba)}}]),en}(Qt.default);Xt.default=Zt},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":124,eventemitter3:3}],77:[function(Bt,Gt,Xt){function Yt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Xt.__esModule=!0;var Ht=Yt(Bt("../SystemRenderer")),Wt=Yt(Bt("./utils/CanvasMaskManager")),jt=Yt(Bt("./utils/CanvasRenderTarget")),zt=Yt(Bt("./utils/mapCanvasBlendModesToPixi")),Vt=Bt("../../utils"),qt=Bt("../../const"),Kt=Yt(Bt("../../settings")),Qt=function(Jt){function Zt($t,en,tn){!function(an,rn){if(!(an instanceof rn))throw new TypeError("Cannot call a class as a function")}(this,Zt);var nn=function(an,rn){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rn&&("object"==typeof rn||"function"==typeof rn)?rn:an}(this,Jt.call(this,"Canvas",$t,en,tn));return nn.type=qt.RENDERER_TYPE.CANVAS,nn.rootContext=nn.view.getContext("2d",{alpha:nn.transparent}),nn.context=nn.rootContext,nn.refresh=!0,nn.maskManager=new Wt.default(nn),nn.smoothProperty="imageSmoothingEnabled",nn.rootContext.imageSmoothingEnabled||(nn.rootContext.webkitImageSmoothingEnabled?nn.smoothProperty="webkitImageSmoothingEnabled":nn.rootContext.mozImageSmoothingEnabled?nn.smoothProperty="mozImageSmoothingEnabled":nn.rootContext.oImageSmoothingEnabled?nn.smoothProperty="oImageSmoothingEnabled":nn.rootContext.msImageSmoothingEnabled&&(nn.smoothProperty="msImageSmoothingEnabled")),nn.initPlugins(),nn.blendModes=(0,zt.default)(),nn._activeBlendMode=null,nn.renderingToScreen=!1,nn.resize(nn.options.width,nn.options.height),nn}return function($t,en){if("function"!=typeof en&&null!==en)throw new TypeError("Super expression must either be null or a function, not "+typeof en);$t.prototype=Object.create(en&&en.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),en&&(Object.setPrototypeOf?Object.setPrototypeOf($t,en):$t.__proto__=en)}(Zt,Jt),Zt.prototype.render=function($t,en,tn,nn,an){if(this.view){this.renderingToScreen=!en,this.emit("prerender");var rn=this.resolution;en?((en=en.baseTexture||en)._canvasRenderTarget||(en._canvasRenderTarget=new jt.default(en.width,en.height,en.resolution),en.source=en._canvasRenderTarget.canvas,en.valid=!0),this.context=en._canvasRenderTarget.context,this.resolution=en._canvasRenderTarget.resolution):this.context=this.rootContext;var on=this.context;if(en||(this._lastObjectRendered=$t),!an){var sn=$t.parent,dn=this._tempDisplayObjectParent.transform.worldTransform;nn?(nn.copy(dn),this._tempDisplayObjectParent.transform._worldID=-1):dn.identity(),$t.parent=this._tempDisplayObjectParent,$t.updateTransform(),$t.parent=sn}on.setTransform(1,0,0,1,0,0),on.globalAlpha=1,this._activeBlendMode=qt.BLEND_MODES.NORMAL,on.globalCompositeOperation=this.blendModes[qt.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(on.fillStyle="black",on.clear()),(void 0===tn?this.clearBeforeRender:tn)&&this.renderingToScreen&&(this.transparent?on.clearRect(0,0,this.width,this.height):(on.fillStyle=this._backgroundColorString,on.fillRect(0,0,this.width,this.height)));var ln=this.context;this.context=on,$t.renderCanvas(this),this.context=ln,this.resolution=rn,this.emit("postrender")}},Zt.prototype.clear=function($t){var en=this.context;$t=$t||this._backgroundColorString,!this.transparent&&$t?(en.fillStyle=$t,en.fillRect(0,0,this.width,this.height)):en.clearRect(0,0,this.width,this.height)},Zt.prototype.setBlendMode=function($t){this._activeBlendMode!==$t&&(this._activeBlendMode=$t,this.context.globalCompositeOperation=this.blendModes[$t])},Zt.prototype.destroy=function($t){this.destroyPlugins(),Jt.prototype.destroy.call(this,$t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},Zt.prototype.resize=function($t,en){Jt.prototype.resize.call(this,$t,en),this.smoothProperty&&(this.rootContext[this.smoothProperty]=Kt.default.SCALE_MODE===qt.SCALE_MODES.LINEAR)},Zt.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},Zt}(Ht.default);Xt.default=Qt,Vt.pluginTarget.mixin(Qt)},{"../../const":46,"../../settings":101,"../../utils":124,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=Bt("../../../const"),Ht=function(){function Wt(jt){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.renderer=jt}return Wt.prototype.pushMask=function(jt){var zt=this.renderer;zt.context.save();var Vt=jt.alpha,qt=jt.transform.worldTransform,Kt=zt.resolution;zt.context.setTransform(qt.a*Kt,qt.b*Kt,qt.c*Kt,qt.d*Kt,qt.tx*Kt,qt.ty*Kt),jt._texture||(this.renderGraphicsShape(jt),zt.context.clip()),jt.worldAlpha=Vt},Wt.prototype.renderGraphicsShape=function(jt){var zt=this.renderer.context,Vt=jt.graphicsData.length;if(0!==Vt){zt.beginPath();for(var qt=0;qt<Vt;qt++){var Kt=jt.graphicsData[qt],Qt=Kt.shape;if(Kt.type===Yt.SHAPES.POLY){var Jt=Qt.points;zt.moveTo(Jt[0],Jt[1]);for(var Zt=1;Zt<Jt.length/2;Zt++)zt.lineTo(Jt[2*Zt],Jt[2*Zt+1]);Jt[0]===Jt[Jt.length-2]&&Jt[1]===Jt[Jt.length-1]&&zt.closePath()}else if(Kt.type===Yt.SHAPES.RECT)zt.rect(Qt.x,Qt.y,Qt.width,Qt.height),zt.closePath();else if(Kt.type===Yt.SHAPES.CIRC)zt.arc(Qt.x,Qt.y,Qt.radius,0,2*Math.PI),zt.closePath();else if(Kt.type===Yt.SHAPES.ELIP){var $t=2*Qt.width,en=2*Qt.height,tn=Qt.x-$t/2,nn=Qt.y-en/2,an=.5522848*($t/2),rn=.5522848*(en/2),on=tn+$t,sn=nn+en,dn=tn+$t/2,ln=nn+en/2;zt.moveTo(tn,ln),zt.bezierCurveTo(tn,ln-rn,dn-an,nn,dn,nn),zt.bezierCurveTo(dn+an,nn,on,ln-rn,on,ln),zt.bezierCurveTo(on,ln+rn,dn+an,sn,dn,sn),zt.bezierCurveTo(dn-an,sn,tn,ln+rn,tn,ln),zt.closePath()}else if(Kt.type===Yt.SHAPES.RREC){var un=Qt.x,pn=Qt.y,cn=Qt.width,hn=Qt.height,fn=Qt.radius,gn=0|Math.min(cn,hn)/2;fn=fn>gn?gn:fn,zt.moveTo(un,pn+fn),zt.lineTo(un,pn+hn-fn),zt.quadraticCurveTo(un,pn+hn,un+fn,pn+hn),zt.lineTo(un+cn-fn,pn+hn),zt.quadraticCurveTo(un+cn,pn+hn,un+cn,pn+hn-fn),zt.lineTo(un+cn,pn+fn),zt.quadraticCurveTo(un+cn,pn,un+cn-fn,pn),zt.lineTo(un+fn,pn),zt.quadraticCurveTo(un,pn,un,pn+fn),zt.closePath()}}}},Wt.prototype.popMask=function(jt){jt.context.restore(),jt.invalidateBlendMode()},Wt.prototype.destroy=function(){},Wt}();Xt.default=Ht},{"../../../const":46}],79:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../../../settings")),Wt=function(){function jt(zt,Vt,qt){!function(Kt,Qt){if(!(Kt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=qt||Ht.default.RESOLUTION,this.resize(zt,Vt)}return jt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},jt.prototype.resize=function(zt,Vt){this.canvas.width=zt*this.resolution,this.canvas.height=Vt*this.resolution},jt.prototype.destroy=function(){this.context=null,this.canvas=null},Yt(jt,[{key:"width",get:function(){return this.canvas.width},set:function(zt){this.canvas.width=zt}},{key:"height",get:function(){return this.canvas.height},set:function(zt){this.canvas.height=zt}}]),jt}();Xt.default=Wt},{"../../../settings":101}],80:[function(Bt,Gt,Xt){function Yt(Ht){var Wt=document.createElement("canvas");Wt.width=6,Wt.height=1;var jt=Wt.getContext("2d");return jt.fillStyle=Ht,jt.fillRect(0,0,6,1),Wt}Xt.__esModule=!0,Xt.default=function(){if("undefined"==typeof document)return!1;var Ht=Yt("#ff00ff"),Wt=Yt("#ffff00"),jt=document.createElement("canvas");jt.width=6,jt.height=1;var zt=jt.getContext("2d");zt.globalCompositeOperation="multiply",zt.drawImage(Ht,0,0),zt.drawImage(Wt,2,0);var Vt=zt.getImageData(2,0,1,1);if(!Vt)return!1;var qt=Vt.data;return 255===qt[0]&&0===qt[1]&&0===qt[2]}},{}],81:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(){var Wt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,Ht.default)()?(Wt[Yt.BLEND_MODES.NORMAL]="source-over",Wt[Yt.BLEND_MODES.ADD]="lighter",Wt[Yt.BLEND_MODES.MULTIPLY]="multiply",Wt[Yt.BLEND_MODES.SCREEN]="screen",Wt[Yt.BLEND_MODES.OVERLAY]="overlay",Wt[Yt.BLEND_MODES.DARKEN]="darken",Wt[Yt.BLEND_MODES.LIGHTEN]="lighten",Wt[Yt.BLEND_MODES.COLOR_DODGE]="color-dodge",Wt[Yt.BLEND_MODES.COLOR_BURN]="color-burn",Wt[Yt.BLEND_MODES.HARD_LIGHT]="hard-light",Wt[Yt.BLEND_MODES.SOFT_LIGHT]="soft-light",Wt[Yt.BLEND_MODES.DIFFERENCE]="difference",Wt[Yt.BLEND_MODES.EXCLUSION]="exclusion",Wt[Yt.BLEND_MODES.HUE]="hue",Wt[Yt.BLEND_MODES.SATURATION]="saturate",Wt[Yt.BLEND_MODES.COLOR]="color",Wt[Yt.BLEND_MODES.LUMINOSITY]="luminosity"):(Wt[Yt.BLEND_MODES.NORMAL]="source-over",Wt[Yt.BLEND_MODES.ADD]="lighter",Wt[Yt.BLEND_MODES.MULTIPLY]="source-over",Wt[Yt.BLEND_MODES.SCREEN]="source-over",Wt[Yt.BLEND_MODES.OVERLAY]="source-over",Wt[Yt.BLEND_MODES.DARKEN]="source-over",Wt[Yt.BLEND_MODES.LIGHTEN]="source-over",Wt[Yt.BLEND_MODES.COLOR_DODGE]="source-over",Wt[Yt.BLEND_MODES.COLOR_BURN]="source-over",Wt[Yt.BLEND_MODES.HARD_LIGHT]="source-over",Wt[Yt.BLEND_MODES.SOFT_LIGHT]="source-over",Wt[Yt.BLEND_MODES.DIFFERENCE]="source-over",Wt[Yt.BLEND_MODES.EXCLUSION]="source-over",Wt[Yt.BLEND_MODES.HUE]="source-over",Wt[Yt.BLEND_MODES.SATURATION]="source-over",Wt[Yt.BLEND_MODES.COLOR]="source-over",Wt[Yt.BLEND_MODES.LUMINOSITY]="source-over"),Wt[Yt.BLEND_MODES.NORMAL_NPM]=Wt[Yt.BLEND_MODES.NORMAL],Wt[Yt.BLEND_MODES.ADD_NPM]=Wt[Yt.BLEND_MODES.ADD],Wt[Yt.BLEND_MODES.SCREEN_NPM]=Wt[Yt.BLEND_MODES.SCREEN],Wt};var Yt=Bt("../../../const"),Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./canUseNewCanvasBlendModes"))},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=Bt("../../const"),Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../../settings")),Wt=function(){function jt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=zt,this.count=0,this.checkCount=0,this.maxIdle=Ht.default.GC_MAX_IDLE,this.checkCountMax=Ht.default.GC_MAX_CHECK_COUNT,this.mode=Ht.default.GC_MODE}return jt.prototype.update=function(){this.count++,this.mode!==Yt.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},jt.prototype.run=function(){for(var zt=this.renderer.textureManager,Vt=zt._managedTextures,qt=!1,Kt=0,Qt;Kt<Vt.length;Kt++)Qt=Vt[Kt],!Qt._glRenderTargets&&this.count-Qt.touched>this.maxIdle&&(zt.destroyTexture(Qt,!0),Vt[Kt]=null,qt=!0);if(qt){for(var Jt=0,Zt=0;Zt<Vt.length;Zt++)null!==Vt[Zt]&&(Vt[Jt++]=Vt[Zt]);Vt.length=Jt}},jt.prototype.unload=function(zt){var Vt=this.renderer.textureManager;zt._texture&&zt._texture._glRenderTargets&&Vt.destroyTexture(zt._texture,!0);for(var qt=zt.children.length-1;0<=qt;qt--)this.unload(zt.children[qt])},jt}();Xt.default=Wt},{"../../const":46,"../../settings":101}],83:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=Bt("pixi-gl-core"),Ht=Bt("../../const"),Wt=function(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}(Bt("./utils/RenderTarget")),jt=Bt("../../utils"),zt=function(){function Vt(qt){!function(Kt,Qt){if(!(Kt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Vt),this.renderer=qt,this.gl=qt.gl,this._managedTextures=[]}return Vt.prototype.bindTexture=function(){},Vt.prototype.getTexture=function(){},Vt.prototype.updateTexture=function(qt,Kt){var Qt=this.gl,Jt=!!qt._glRenderTargets;if(!qt.hasLoaded)return null;var Zt=this.renderer.boundTextures;if(void 0===Kt){Kt=0;for(var $t=0;$t<Zt.length;++$t)if(Zt[$t]===qt){Kt=$t;break}}Zt[Kt]=qt,Qt.activeTexture(Qt.TEXTURE0+Kt);var en=qt._glTextures[this.renderer.CONTEXT_UID];if(en)Jt?qt._glRenderTargets[this.renderer.CONTEXT_UID].resize(qt.width,qt.height):en.upload(qt.source);else{if(Jt){var tn=new Wt.default(this.gl,qt.width,qt.height,qt.scaleMode,qt.resolution);tn.resize(qt.width,qt.height),qt._glRenderTargets[this.renderer.CONTEXT_UID]=tn,en=tn.texture}else(en=new Yt.GLTexture(this.gl,null,null,null,null)).bind(Kt),en.premultiplyAlpha=!0,en.upload(qt.source);qt._glTextures[this.renderer.CONTEXT_UID]=en,qt.on("update",this.updateTexture,this),qt.on("dispose",this.destroyTexture,this),this._managedTextures.push(qt),qt.isPowerOfTwo?(qt.mipmap&&en.enableMipmap(),qt.wrapMode===Ht.WRAP_MODES.CLAMP?en.enableWrapClamp():qt.wrapMode===Ht.WRAP_MODES.REPEAT?en.enableWrapRepeat():en.enableWrapMirrorRepeat()):en.enableWrapClamp(),qt.scaleMode===Ht.SCALE_MODES.NEAREST?en.enableNearestScaling():en.enableLinearScaling()}return en},Vt.prototype.destroyTexture=function(qt,Kt){if((qt=qt.baseTexture||qt).hasLoaded){var Qt=this.renderer.CONTEXT_UID,Jt=qt._glTextures,Zt=qt._glRenderTargets;if(Jt[Qt]&&(this.renderer.unbindTexture(qt),Jt[Qt].destroy(),qt.off("update",this.updateTexture,this),qt.off("dispose",this.destroyTexture,this),delete Jt[Qt],!Kt)){var $t=this._managedTextures.indexOf(qt);-1!==$t&&(0,jt.removeItems)(this._managedTextures,$t,1)}Zt&&Zt[Qt]&&(Zt[Qt].destroy(),delete Zt[Qt])}},Vt.prototype.removeAll=function(){for(var qt=0,Kt;qt<this._managedTextures.length;++qt)Kt=this._managedTextures[qt],Kt._glTextures[this.renderer.CONTEXT_UID]&&delete Kt._glTextures[this.renderer.CONTEXT_UID]},Vt.prototype.destroy=function(){for(var qt=0,Kt;qt<this._managedTextures.length;++qt)Kt=this._managedTextures[qt],this.destroyTexture(Kt,!0),Kt.off("update",this.updateTexture,this),Kt.off("dispose",this.destroyTexture,this);this._managedTextures=null},Vt}();Xt.default=zt},{"../../const":46,"../../utils":124,"./utils/RenderTarget":96,"pixi-gl-core":12}],84:[function(Bt,Gt,Xt){function Yt(sn){return sn&&sn.__esModule?sn:{default:sn}}Xt.__esModule=!0;var Ht=Yt(Bt("../SystemRenderer")),Wt=Yt(Bt("./managers/MaskManager")),jt=Yt(Bt("./managers/StencilManager")),zt=Yt(Bt("./managers/FilterManager")),Vt=Yt(Bt("./utils/RenderTarget")),qt=Yt(Bt("./utils/ObjectRenderer")),Kt=Yt(Bt("./TextureManager")),Qt=Yt(Bt("../../textures/BaseTexture")),Jt=Yt(Bt("./TextureGarbageCollector")),Zt=Yt(Bt("./WebGLState")),$t=Yt(Bt("./utils/mapWebGLDrawModesToPixi")),en=Yt(Bt("./utils/validateContext")),tn=Bt("../../utils"),nn=Yt(Bt("pixi-gl-core")),an=Bt("../../const"),rn=0,on=function(sn){function dn(ln,un,pn){!function(hn,fn){if(!(hn instanceof fn))throw new TypeError("Cannot call a class as a function")}(this,dn);var cn=function(hn,fn){if(!hn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fn&&("object"==typeof fn||"function"==typeof fn)?fn:hn}(this,sn.call(this,"WebGL",ln,un,pn));return cn.legacy=cn.options.legacy,cn.legacy&&(nn.default.VertexArrayObject.FORCE_NATIVE=!0),cn.type=an.RENDERER_TYPE.WEBGL,cn.handleContextLost=cn.handleContextLost.bind(cn),cn.handleContextRestored=cn.handleContextRestored.bind(cn),cn.view.addEventListener("webglcontextlost",cn.handleContextLost,!1),cn.view.addEventListener("webglcontextrestored",cn.handleContextRestored,!1),cn._contextOptions={alpha:cn.transparent,antialias:cn.options.antialias,premultipliedAlpha:cn.transparent&&"notMultiplied"!==cn.transparent,stencil:!0,preserveDrawingBuffer:cn.options.preserveDrawingBuffer,powerPreference:cn.options.powerPreference},cn._backgroundColorRgba[3]=cn.transparent?0:1,cn.maskManager=new Wt.default(cn),cn.stencilManager=new jt.default(cn),cn.emptyRenderer=new qt.default(cn),cn.currentRenderer=cn.emptyRenderer,cn.textureManager=null,cn.filterManager=null,cn.initPlugins(),cn.options.context&&(0,en.default)(cn.options.context),cn.gl=cn.options.context||nn.default.createContext(cn.view,cn._contextOptions),cn.CONTEXT_UID=rn++,cn.state=new Zt.default(cn.gl),cn.renderingToScreen=!0,cn.boundTextures=null,cn._activeShader=null,cn._activeVao=null,cn._activeRenderTarget=null,cn._initContext(),cn.drawModes=(0,$t.default)(cn.gl),cn._nextTextureLocation=0,cn.setBlendMode(0),cn}return function(ln,un){if("function"!=typeof un&&null!==un)throw new TypeError("Super expression must either be null or a function, not "+typeof un);ln.prototype=Object.create(un&&un.prototype,{constructor:{value:ln,enumerable:!1,writable:!0,configurable:!0}}),un&&(Object.setPrototypeOf?Object.setPrototypeOf(ln,un):ln.__proto__=un)}(dn,sn),dn.prototype._initContext=function(){var ln=this.gl;ln.isContextLost()&&ln.getExtension("WEBGL_lose_context")&&ln.getExtension("WEBGL_lose_context").restoreContext();var un=ln.getParameter(ln.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=Array(un),this.emptyTextures=Array(un),this.textureManager=new Kt.default(this),this.filterManager=new zt.default(this),this.textureGC=new Jt.default(this),this.state.resetToDefault(),this.rootRenderTarget=new Vt.default(ln,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var pn=new nn.default.GLTexture.fromData(ln,null,1,1),cn={_glTextures:{}};cn._glTextures[this.CONTEXT_UID]={};for(var hn=0,fn;hn<un;hn++)fn=new Qt.default,fn._glTextures[this.CONTEXT_UID]=pn,this.boundTextures[hn]=cn,this.emptyTextures[hn]=fn,this.bindTexture(null,hn);this.emit("context",ln),this.resize(this.screen.width,this.screen.height)},dn.prototype.render=function(ln,un,pn,cn,hn){if(this.renderingToScreen=!un,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,un||(this._lastObjectRendered=ln),!hn){var fn=ln.parent;ln.parent=this._tempDisplayObjectParent,ln.updateTransform(),ln.parent=fn}this.bindRenderTexture(un,cn),this.currentRenderer.start(),(void 0===pn?this.clearBeforeRender:pn)&&this._activeRenderTarget.clear(),ln.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},dn.prototype.setObjectRenderer=function(ln){this.currentRenderer!==ln&&(this.currentRenderer.stop(),this.currentRenderer=ln,this.currentRenderer.start())},dn.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},dn.prototype.resize=function(ln,un){Ht.default.prototype.resize.call(this,ln,un),this.rootRenderTarget.resize(ln,un),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},dn.prototype.setBlendMode=function(ln){this.state.setBlendMode(ln)},dn.prototype.clear=function(ln){this._activeRenderTarget.clear(ln)},dn.prototype.setTransform=function(ln){this._activeRenderTarget.transform=ln},dn.prototype.clearRenderTexture=function(ln,un){var pn=ln.baseTexture._glRenderTargets[this.CONTEXT_UID];return pn&&pn.clear(un),this},dn.prototype.bindRenderTexture=function(ln,un){var pn;if(ln){var cn=ln.baseTexture;cn._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(cn,0),this.unbindTexture(cn),(pn=cn._glRenderTargets[this.CONTEXT_UID]).setFrame(ln.frame)}else pn=this.rootRenderTarget;return pn.transform=un,this.bindRenderTarget(pn),this},dn.prototype.bindRenderTarget=function(ln){return ln!==this._activeRenderTarget&&(this._activeRenderTarget=ln,ln.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=ln.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(ln.stencilMaskStack)),this},dn.prototype.bindShader=function(ln,un){return this._activeShader!==ln&&(this._activeShader=ln,ln.bind(),!1!==un&&(ln.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},dn.prototype.bindTexture=function(ln,un,pn){if(ln=ln||this.emptyTextures[un],ln=ln.baseTexture||ln,ln.touched=this.textureGC.count,pn)un=un||0;else{for(var cn=0;cn<this.boundTextures.length;cn++)if(this.boundTextures[cn]===ln)return cn;void 0===un&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,un=this.boundTextures.length-this._nextTextureLocation-1)}var hn=this.gl,fn=ln._glTextures[this.CONTEXT_UID];return fn?(this.boundTextures[un]=ln,hn.activeTexture(hn.TEXTURE0+un),hn.bindTexture(hn.TEXTURE_2D,fn.texture)):this.textureManager.updateTexture(ln,un),un},dn.prototype.unbindTexture=function(ln){var un=this.gl;ln=ln.baseTexture||ln;for(var pn=0;pn<this.boundTextures.length;pn++)this.boundTextures[pn]===ln&&(this.boundTextures[pn]=this.emptyTextures[pn],un.activeTexture(un.TEXTURE0+pn),un.bindTexture(un.TEXTURE_2D,this.emptyTextures[pn]._glTextures[this.CONTEXT_UID].texture));return this},dn.prototype.createVao=function(){return new nn.default.VertexArrayObject(this.gl,this.state.attribState)},dn.prototype.bindVao=function(ln){return this._activeVao===ln?this:(ln?ln.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=ln,this)},dn.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},dn.prototype.handleContextLost=function(ln){ln.preventDefault()},dn.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},dn.prototype.destroy=function(ln){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),sn.prototype.destroy.call(this,ln),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},dn}(Ht.default);Xt.default=on,tn.pluginTarget.mixin(on)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":124,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":12}],85:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./utils/mapWebGLBlendModesToPixi")),Ht=function(){function Wt(jt){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=jt,this.maxAttribs=jt.getParameter(jt.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)},this.blendModes=(0,Yt.default)(jt),this.nativeVaoExtension=jt.getExtension("OES_vertex_array_object")||jt.getExtension("MOZ_OES_vertex_array_object")||jt.getExtension("WEBKIT_OES_vertex_array_object")}return Wt.prototype.push=function(){var jt=this.stack[this.stackIndex];jt||(jt=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var zt=0;zt<this.activeState.length;zt++)jt[zt]=this.activeState[zt]},Wt.prototype.pop=function(){var jt=this.stack[--this.stackIndex];this.setState(jt)},Wt.prototype.setState=function(jt){this.setBlend(jt[0]),this.setDepthTest(jt[1]),this.setFrontFace(jt[2]),this.setCullFace(jt[3]),this.setBlendMode(jt[4])},Wt.prototype.setBlend=function(jt){jt=jt?1:0,this.activeState[0]!==jt&&(this.activeState[0]=jt,this.gl[jt?"enable":"disable"](this.gl.BLEND))},Wt.prototype.setBlendMode=function(jt){if(jt!==this.activeState[4]){this.activeState[4]=jt;var zt=this.blendModes[jt];2===zt.length?this.gl.blendFunc(zt[0],zt[1]):this.gl.blendFuncSeparate(zt[0],zt[1],zt[2],zt[3])}},Wt.prototype.setDepthTest=function(jt){jt=jt?1:0,this.activeState[1]!==jt&&(this.activeState[1]=jt,this.gl[jt?"enable":"disable"](this.gl.DEPTH_TEST))},Wt.prototype.setCullFace=function(jt){jt=jt?1:0,this.activeState[3]!==jt&&(this.activeState[3]=jt,this.gl[jt?"enable":"disable"](this.gl.CULL_FACE))},Wt.prototype.setFrontFace=function(jt){jt=jt?1:0,this.activeState[2]!==jt&&(this.activeState[2]=jt,this.gl.frontFace(this.gl[jt?"CW":"CCW"]))},Wt.prototype.resetAttributes=function(){for(var jt=0;jt<this.attribState.tempAttribState.length;jt++)this.attribState.tempAttribState[jt]=0;for(var zt=0;zt<this.attribState.attribState.length;zt++)this.attribState.attribState[zt]=0;for(var Vt=1;Vt<this.maxAttribs;Vt++)this.gl.disableVertexAttribArray(Vt)},Wt.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var jt=0;jt<this.activeState.length;++jt)this.activeState[jt]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},Wt}();Xt.default=Ht},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(Bt,Gt,Xt){function Yt(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Xt.__esModule=!0;var Ht=function(){function Qt(Jt,Zt){for(var $t=0,en;$t<Zt.length;$t++)en=Zt[$t],en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Jt,en.key,en)}return function(Jt,Zt,$t){return Zt&&Qt(Jt.prototype,Zt),$t&&Qt(Jt,$t),Jt}}(),Wt=Yt(Bt("./extractUniformsFromSrc")),jt=Bt("../../../utils"),zt=Bt("../../../const"),Vt=Yt(Bt("../../../settings")),qt={},Kt=function(){function Qt(Jt,Zt,$t){for(var en in!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Qt),this.vertexSrc=Jt||Qt.defaultVertexSrc,this.fragmentSrc=Zt||Qt.defaultFragmentSrc,this._blendMode=zt.BLEND_MODES.NORMAL,this.uniformData=$t||(0,Wt.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[en]=this.uniformData[en].value,this.uniformData[en].type&&(this.uniformData[en].type=this.uniformData[en].type.toLowerCase());this.glShaders={},qt[this.vertexSrc+this.fragmentSrc]||(qt[this.vertexSrc+this.fragmentSrc]=(0,jt.uid)()),this.glShaderKey=qt[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=Vt.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return Qt.prototype.apply=function(Jt,Zt,$t,en){Jt.applyFilter(this,Zt,$t,en)},Ht(Qt,[{key:"blendMode",get:function(){return this._blendMode},set:function(Jt){this._blendMode=Jt}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),Qt}();Xt.default=Kt},{"../../../const":46,"../../../settings":101,"../../../utils":124,"./extractUniformsFromSrc":87}],87:[function(Bt,Gt,Xt){function Yt(Wt){for(var jt=/^(projectionMatrix|uSampler|filterArea|filterClamp)$/,zt={},Vt=void 0,qt=Wt.replace(/\s+/g," ").split(/\s*;\s*/),Kt=0,Qt;Kt<qt.length;Kt++)if(Qt=qt[Kt].trim(),-1<Qt.indexOf("uniform")){var Jt=Qt.split(" "),Zt=Jt[1],$t=Jt[2],en=1;-1<$t.indexOf("[")&&($t=(Vt=$t.split(/\[|]/))[0],en*=+Vt[1]),$t.match(jt)||(zt[$t]={value:Ht(Zt,en),name:$t,type:Zt})}return zt}Xt.__esModule=!0,Xt.default=function(Wt,jt){var Vt=Yt(Wt),qt=Yt(jt);return Object.assign(Vt,qt)};var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("pixi-gl-core")).default.shader.defaultValue},{"pixi-gl-core":12}],88:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.calculateScreenSpaceMatrix=function(Ht,Wt,jt){var zt=Ht.identity();return zt.translate(Wt.x/jt.width,Wt.y/jt.height),zt.scale(jt.width,jt.height),zt},Xt.calculateNormalizedScreenSpaceMatrix=function(Ht,Wt,jt){var zt=Ht.identity();zt.translate(Wt.x/jt.width,Wt.y/jt.height);var Vt=jt.width/Wt.width,qt=jt.height/Wt.height;return zt.scale(Vt,qt),zt},Xt.calculateSpriteMatrix=function(Ht,Wt,jt,zt){var Vt=zt._texture.baseTexture,qt=Ht.set(jt.width,0,0,jt.height,Wt.x,Wt.y),Kt=zt.worldTransform.copy(Yt.Matrix.TEMP_MATRIX);return Kt.invert(),qt.prepend(Kt),qt.scale(1/Vt.width,1/Vt.height),qt.translate(zt.anchor.x,zt.anchor.y),qt};var Yt=Bt("../../../math")},{"../../../math":70}],89:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../Filter")),Ht=Bt("../../../../math"),Wt=(Bt("path"),function(jt){function zt(Vt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,zt);var qt=new Ht.Matrix,Kt=function(Qt,Jt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Qt}(this,jt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return Vt.renderable=!1,Kt.maskSprite=Vt,Kt.maskMatrix=qt,Kt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.apply=function(Vt,qt,Kt){var Qt=this.maskSprite;this.uniforms.mask=Qt._texture,this.uniforms.otherMatrix=Vt.calculateSpriteMatrix(this.maskMatrix,Qt),this.uniforms.alpha=Qt.worldAlpha,Vt.applyFilter(this,qt,Kt)},zt}(Yt.default));Xt.default=Wt},{"../../../../math":70,"../Filter":86,path:23}],90:[function(Bt,Gt,Xt){function Yt($t){return $t&&$t.__esModule?$t:{default:$t}}function Ht($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}Xt.__esModule=!0;var Wt=Yt(Bt("./WebGLManager")),jt=Yt(Bt("../utils/RenderTarget")),zt=Yt(Bt("../utils/Quad")),Vt=Bt("../../../math"),qt=Yt(Bt("../../../Shader")),Kt=function($t){if($t&&$t.__esModule)return $t;var en={};if(null!=$t)for(var tn in $t)Object.prototype.hasOwnProperty.call($t,tn)&&(en[tn]=$t[tn]);return en.default=$t,en}(Bt("../filters/filterTransforms")),Qt=Yt(Bt("bit-twiddle")),Jt=function $t(){Ht(this,$t),this.renderTarget=null,this.sourceFrame=new Vt.Rectangle,this.destinationFrame=new Vt.Rectangle,this.filters=[],this.target=null,this.resolution=1},Zt=function($t){function en(tn){Ht(this,en);var nn=function(an,rn){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rn&&("object"==typeof rn||"function"==typeof rn)?rn:an}(this,$t.call(this,tn));return nn.gl=nn.renderer.gl,nn.quad=new zt.default(nn.gl,tn.state.attribState),nn.shaderCache={},nn.pool={},nn.filterData=null,nn.managedFilters=[],nn}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.pushFilter=function(tn,nn){var an=this.renderer,rn=this.filterData;if(!rn){rn=this.renderer._activeRenderTarget.filterStack;var on=new Jt;on.sourceFrame=on.destinationFrame=this.renderer._activeRenderTarget.size,on.renderTarget=an._activeRenderTarget,this.renderer._activeRenderTarget.filterData=rn={index:0,stack:[on]},this.filterData=rn}var sn=rn.stack[++rn.index];sn||(sn=rn.stack[rn.index]=new Jt);var dn=nn[0].resolution,ln=0|nn[0].padding,un=tn.filterArea||tn.getBounds(!0),pn=sn.sourceFrame,cn=sn.destinationFrame;pn.x=(0|un.x*dn)/dn,pn.y=(0|un.y*dn)/dn,pn.width=(0|un.width*dn)/dn,pn.height=(0|un.height*dn)/dn,rn.stack[0].renderTarget.transform||nn[0].autoFit&&pn.fit(rn.stack[0].destinationFrame),pn.pad(ln),cn.width=pn.width,cn.height=pn.height;var hn=this.getPotRenderTarget(an.gl,pn.width,pn.height,dn);sn.target=tn,sn.filters=nn,sn.resolution=dn,sn.renderTarget=hn,hn.setFrame(cn,pn),an.bindRenderTarget(hn),hn.clear()},en.prototype.popFilter=function(){var tn=this.filterData,nn=tn.stack[tn.index-1],an=tn.stack[tn.index];this.quad.map(an.renderTarget.size,an.sourceFrame).upload();var rn=an.filters;if(1===rn.length)rn[0].apply(this,an.renderTarget,nn.renderTarget,!1,an),this.freePotRenderTarget(an.renderTarget);else{var on=an.renderTarget,sn=this.getPotRenderTarget(this.renderer.gl,an.sourceFrame.width,an.sourceFrame.height,an.resolution);sn.setFrame(an.destinationFrame,an.sourceFrame),sn.clear();var dn=0;for(dn=0;dn<rn.length-1;++dn){rn[dn].apply(this,on,sn,!0,an);var ln=on;on=sn,sn=ln}rn[dn].apply(this,on,nn.renderTarget,!1,an),this.freePotRenderTarget(on),this.freePotRenderTarget(sn)}tn.index--,0===tn.index&&(this.filterData=null)},en.prototype.applyFilter=function(tn,nn,an,rn){var on=this.renderer,sn=on.gl,dn=tn.glShaders[on.CONTEXT_UID];dn||(tn.glShaderKey?(dn=this.shaderCache[tn.glShaderKey])||(dn=new qt.default(this.gl,tn.vertexSrc,tn.fragmentSrc),tn.glShaders[on.CONTEXT_UID]=this.shaderCache[tn.glShaderKey]=dn):dn=tn.glShaders[on.CONTEXT_UID]=new qt.default(this.gl,tn.vertexSrc,tn.fragmentSrc),this.managedFilters.push(tn),on.bindVao(null),this.quad.initVao(dn)),on.bindVao(this.quad.vao),on.bindRenderTarget(an),rn&&(sn.disable(sn.SCISSOR_TEST),on.clear(),sn.enable(sn.SCISSOR_TEST)),an===on.maskManager.scissorRenderTarget&&on.maskManager.pushScissorMask(null,on.maskManager.scissorData),on.bindShader(dn);var ln=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=ln,this.syncUniforms(dn,tn),on.state.setBlendMode(tn.blendMode),sn.activeTexture(sn.TEXTURE0),sn.bindTexture(sn.TEXTURE_2D,nn.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),sn.bindTexture(sn.TEXTURE_2D,ln._glTextures[this.renderer.CONTEXT_UID].texture)},en.prototype.syncUniforms=function(tn,nn){var an=nn.uniformData,rn=nn.uniforms,on=1,sn;if(tn.uniforms.filterArea){sn=this.filterData.stack[this.filterData.index];var dn=tn.uniforms.filterArea;dn[0]=sn.renderTarget.size.width,dn[1]=sn.renderTarget.size.height,dn[2]=sn.sourceFrame.x,dn[3]=sn.sourceFrame.y,tn.uniforms.filterArea=dn}if(tn.uniforms.filterClamp){sn=sn||this.filterData.stack[this.filterData.index];var ln=tn.uniforms.filterClamp;ln[0]=0,ln[1]=0,ln[2]=(sn.sourceFrame.width-1)/sn.renderTarget.size.width,ln[3]=(sn.sourceFrame.height-1)/sn.renderTarget.size.height,tn.uniforms.filterClamp=ln}for(var un in an){var pn=an[un].type;if("sampler2d"===pn&&0!==rn[un]){if(rn[un].baseTexture)tn.uniforms[un]=this.renderer.bindTexture(rn[un].baseTexture,on);else{tn.uniforms[un]=on;var cn=this.renderer.gl;this.renderer.boundTextures[on]=this.renderer.emptyTextures[on],cn.activeTexture(cn.TEXTURE0+on),rn[un].texture.bind()}on++}else if("mat3"===pn)tn.uniforms[un]=void 0===rn[un].a?rn[un]:rn[un].toArray(!0);else if(!("vec2"===pn))"float"===pn?tn.uniforms.data[un].value!==an[un]&&(tn.uniforms[un]=rn[un]):tn.uniforms[un]=rn[un];else if(void 0!==rn[un].x){var hn=tn.uniforms[un]||new Float32Array(2);hn[0]=rn[un].x,hn[1]=rn[un].y,tn.uniforms[un]=hn}else tn.uniforms[un]=rn[un]}},en.prototype.getRenderTarget=function(tn,nn){var an=this.filterData.stack[this.filterData.index],rn=this.getPotRenderTarget(this.renderer.gl,an.sourceFrame.width,an.sourceFrame.height,nn||an.resolution);return rn.setFrame(an.destinationFrame,an.sourceFrame),rn},en.prototype.returnRenderTarget=function(tn){this.freePotRenderTarget(tn)},en.prototype.calculateScreenSpaceMatrix=function(tn){var nn=this.filterData.stack[this.filterData.index];return Kt.calculateScreenSpaceMatrix(tn,nn.sourceFrame,nn.renderTarget.size)},en.prototype.calculateNormalizedScreenSpaceMatrix=function(tn){var nn=this.filterData.stack[this.filterData.index];return Kt.calculateNormalizedScreenSpaceMatrix(tn,nn.sourceFrame,nn.renderTarget.size,nn.destinationFrame)},en.prototype.calculateSpriteMatrix=function(tn,nn){var an=this.filterData.stack[this.filterData.index];return Kt.calculateSpriteMatrix(tn,an.sourceFrame,an.renderTarget.size,nn)},en.prototype.destroy=function(){for(var tn=0<arguments.length&&void 0!==arguments[0]&&arguments[0],nn=this.renderer,an=this.managedFilters,rn=0;rn<an.length;rn++)tn||an[rn].glShaders[nn.CONTEXT_UID].destroy(),delete an[rn].glShaders[nn.CONTEXT_UID];this.shaderCache={},tn?this.pool={}:this.emptyPool()},en.prototype.getPotRenderTarget=function(tn,nn,an,rn){var on=(65535&(nn=Qt.default.nextPow2(nn*rn)))<<16|65535&(an=Qt.default.nextPow2(an*rn));this.pool[on]||(this.pool[on]=[]);var sn=this.pool[on].pop();if(!sn){var dn=this.renderer.boundTextures[0];tn.activeTexture(tn.TEXTURE0),sn=new jt.default(tn,nn,an,null,1),tn.bindTexture(tn.TEXTURE_2D,dn._glTextures[this.renderer.CONTEXT_UID].texture)}return sn.resolution=rn,sn.defaultFrame.width=sn.size.width=nn/rn,sn.defaultFrame.height=sn.size.height=an/rn,sn},en.prototype.emptyPool=function(){for(var tn in this.pool){var nn=this.pool[tn];if(nn)for(var an=0;an<nn.length;an++)nn[an].destroy(!0)}this.pool={}},en.prototype.freePotRenderTarget=function(tn){var nn=(65535&tn.size.width*tn.resolution)<<16|65535&tn.size.height*tn.resolution;this.pool[nn].push(tn)},en}(Wt.default);Xt.default=Zt},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(Bt,Gt,Xt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0;var Ht=Yt(Bt("./WebGLManager")),Wt=Yt(Bt("../filters/spriteMask/SpriteMaskFilter")),jt=function(zt){function Vt(qt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Kt=function(Qt,Jt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Qt}(this,zt.call(this,qt));return Kt.scissor=!1,Kt.scissorData=null,Kt.scissorRenderTarget=null,Kt.enableScissor=!0,Kt.alphaMaskPool=[],Kt.alphaMaskIndex=0,Kt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.pushMask=function(qt,Kt){if(Kt.texture)this.pushSpriteMask(qt,Kt);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&Kt.isFastRect()){var Qt=Kt.worldTransform,Jt=Math.atan2(Qt.b,Qt.a);(Jt=Math.round(Jt*(180/Math.PI)))%90?this.pushStencilMask(Kt):this.pushScissorMask(qt,Kt)}else this.pushStencilMask(Kt)},Vt.prototype.popMask=function(qt,Kt){Kt.texture?this.popSpriteMask(qt,Kt):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(qt,Kt):this.popStencilMask(qt,Kt)},Vt.prototype.pushSpriteMask=function(qt,Kt){var Qt=this.alphaMaskPool[this.alphaMaskIndex];Qt||(Qt=this.alphaMaskPool[this.alphaMaskIndex]=[new Wt.default(Kt)]),Qt[0].resolution=this.renderer.resolution,Qt[0].maskSprite=Kt,qt.filterArea=Kt.getBounds(!0),this.renderer.filterManager.pushFilter(qt,Qt),this.alphaMaskIndex++},Vt.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},Vt.prototype.pushStencilMask=function(qt){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(qt)},Vt.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},Vt.prototype.pushScissorMask=function(qt,Kt){Kt.renderable=!0;var Qt=this.renderer._activeRenderTarget,Jt=Kt.getBounds();Jt.fit(Qt.size),Kt.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var Zt=this.renderer.resolution;this.renderer.gl.scissor(Jt.x*Zt,(Qt.root?Qt.size.height-Jt.y-Jt.height:Jt.y)*Zt,Jt.width*Zt,Jt.height*Zt),this.scissorRenderTarget=Qt,this.scissorData=Kt,this.scissor=!0},Vt.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var qt=this.renderer.gl;qt.disable(qt.SCISSOR_TEST)},Vt}(Ht.default);Xt.default=jt},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./WebGLManager")),Ht=function(Wt){function jt(zt){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,jt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,Wt.call(this,zt));return Vt.stencilMaskStack=null,Vt}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(jt,Wt),jt.prototype.setMaskStack=function(zt){this.stencilMaskStack=zt;var Vt=this.renderer.gl;0===zt.length?Vt.disable(Vt.STENCIL_TEST):Vt.enable(Vt.STENCIL_TEST)},jt.prototype.pushStencil=function(zt){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var Vt=this.renderer.gl,qt=this.stencilMaskStack.length;0===qt&&Vt.enable(Vt.STENCIL_TEST),this.stencilMaskStack.push(zt),Vt.colorMask(!1,!1,!1,!1),Vt.stencilFunc(Vt.EQUAL,qt,this._getBitwiseMask()),Vt.stencilOp(Vt.KEEP,Vt.KEEP,Vt.INCR),this.renderer.plugins.graphics.render(zt),this._useCurrent()},jt.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var zt=this.renderer.gl,Vt=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(zt.disable(zt.STENCIL_TEST),zt.clear(zt.STENCIL_BUFFER_BIT),zt.clearStencil(0)):(zt.colorMask(!1,!1,!1,!1),zt.stencilOp(zt.KEEP,zt.KEEP,zt.DECR),this.renderer.plugins.graphics.render(Vt),this._useCurrent())},jt.prototype._useCurrent=function(){var zt=this.renderer.gl;zt.colorMask(!0,!0,!0,!0),zt.stencilFunc(zt.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),zt.stencilOp(zt.KEEP,zt.KEEP,zt.KEEP)},jt.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},jt.prototype.destroy=function(){Yt.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},jt}(Yt.default);Xt.default=Ht},{"./WebGLManager":93}],93:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Ht(Wt){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.renderer=Wt,this.renderer.on("context",this.onContextChange,this)}return Ht.prototype.onContextChange=function(){},Ht.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},Ht}();Xt.default=Yt},{}],94:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Ht){function Wt(){return function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),function(jt,zt){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&("object"==typeof zt||"function"==typeof zt)?zt:jt}(this,Ht.apply(this,arguments))}return function(jt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);jt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,zt):jt.__proto__=zt)}(Wt,Ht),Wt.prototype.start=function(){},Wt.prototype.stop=function(){this.flush()},Wt.prototype.flush=function(){},Wt.prototype.render=function(){},Wt}(function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("../managers/WebGLManager")).default);Xt.default=Yt},{"../managers/WebGLManager":93}],95:[function(Bt,Gt,Xt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0;var Ht=Yt(Bt("pixi-gl-core")),Wt=Yt(Bt("../../../utils/createIndicesForQuads")),jt=function(){function zt(Vt,qt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,zt),this.gl=Vt,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var Kt=0;4>Kt;Kt++)this.interleaved[4*Kt]=this.vertices[2*Kt],this.interleaved[4*Kt+1]=this.vertices[2*Kt+1],this.interleaved[4*Kt+2]=this.uvs[2*Kt],this.interleaved[4*Kt+3]=this.uvs[2*Kt+1];this.indices=(0,Wt.default)(1),this.vertexBuffer=Ht.default.GLBuffer.createVertexBuffer(Vt,this.interleaved,Vt.STATIC_DRAW),this.indexBuffer=Ht.default.GLBuffer.createIndexBuffer(Vt,this.indices,Vt.STATIC_DRAW),this.vao=new Ht.default.VertexArrayObject(Vt,qt)}return zt.prototype.initVao=function(Vt){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,Vt.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,Vt.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},zt.prototype.map=function(Vt,qt){var Kt=0,Qt=0;return this.uvs[0]=Kt,this.uvs[1]=Qt,this.uvs[2]=Kt+qt.width/Vt.width,this.uvs[3]=Qt,this.uvs[4]=Kt+qt.width/Vt.width,this.uvs[5]=Qt+qt.height/Vt.height,this.uvs[6]=Kt,this.uvs[7]=Qt+qt.height/Vt.height,Kt=qt.x,Qt=qt.y,this.vertices[0]=Kt,this.vertices[1]=Qt,this.vertices[2]=Kt+qt.width,this.vertices[3]=Qt,this.vertices[4]=Kt+qt.width,this.vertices[5]=Qt+qt.height,this.vertices[6]=Kt,this.vertices[7]=Qt+qt.height,this},zt.prototype.upload=function(){for(var Vt=0;4>Vt;Vt++)this.interleaved[4*Vt]=this.vertices[2*Vt],this.interleaved[4*Vt+1]=this.vertices[2*Vt+1],this.interleaved[4*Vt+2]=this.uvs[2*Vt],this.interleaved[4*Vt+3]=this.uvs[2*Vt+1];return this.vertexBuffer.upload(this.interleaved),this},zt.prototype.destroy=function(){var Vt=this.gl;Vt.deleteBuffer(this.vertexBuffer),Vt.deleteBuffer(this.indexBuffer)},zt}();Xt.default=jt},{"../../../utils/createIndicesForQuads":122,"pixi-gl-core":12}],96:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=Bt("../../../math"),Ht=Bt("../../../const"),Wt=function(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}(Bt("../../../settings")),jt=Bt("pixi-gl-core"),zt=function(){function Vt(qt,Kt,Qt,Jt,Zt,$t){!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Vt),this.gl=qt,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new Yt.Rectangle(0,0,1,1),this.resolution=Zt||Wt.default.RESOLUTION,this.projectionMatrix=new Yt.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new Yt.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0===Jt?Wt.default.SCALE_MODE:Jt,this.root=$t,this.root?(this.frameBuffer=new jt.GLFramebuffer(qt,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=jt.GLFramebuffer.createRGBA(qt,100,100),this.scaleMode===Ht.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(Kt,Qt)}return Vt.prototype.clear=function(qt){var Kt=qt||this.clearColor;this.frameBuffer.clear(Kt[0],Kt[1],Kt[2],Kt[3])},Vt.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},Vt.prototype.setFrame=function(qt,Kt){this.destinationFrame=qt||this.destinationFrame||this.defaultFrame,this.sourceFrame=Kt||this.sourceFrame||this.destinationFrame},Vt.prototype.activate=function(){var qt=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame===this.sourceFrame?qt.disable(qt.SCISSOR_TEST):(qt.enable(qt.SCISSOR_TEST),qt.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)),qt.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)},Vt.prototype.calculateProjection=function(qt,Kt){var Qt=this.projectionMatrix;Kt=Kt||qt,Qt.identity(),this.root?(Qt.a=2*(1/qt.width),Qt.d=2*(-1/qt.height),Qt.tx=-1-Kt.x*Qt.a,Qt.ty=1-Kt.y*Qt.d):(Qt.a=2*(1/qt.width),Qt.d=2*(1/qt.height),Qt.tx=-1-Kt.x*Qt.a,Qt.ty=-1-Kt.y*Qt.d)},Vt.prototype.resize=function(qt,Kt){if(qt|=0,Kt|=0,this.size.width!==qt||this.size.height!==Kt){this.size.width=qt,this.size.height=Kt,this.defaultFrame.width=qt,this.defaultFrame.height=Kt,this.frameBuffer.resize(qt*this.resolution,Kt*this.resolution);var Qt=this.frame||this.size;this.calculateProjection(Qt)}},Vt.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},Vt}();Xt.default=zt},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":12}],97:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt,jt){var zt=!jt;if(0===Wt)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(zt){var Vt=document.createElement("canvas");Vt.width=1,Vt.height=1,jt=Yt.default.createContext(Vt)}for(var qt=jt.createShader(jt.FRAGMENT_SHADER),Kt;;){if(Kt=Ht.replace(/%forloop%/gi,function(Qt){for(var Jt="",Zt=0;Zt<Qt;++Zt)0<Zt&&(Jt+="\nelse "),Zt<Qt-1&&(Jt+="if(test == "+Zt+".0){}");return Jt}(Wt)),jt.shaderSource(qt,Kt),jt.compileShader(qt),jt.getShaderParameter(qt,jt.COMPILE_STATUS))break;Wt=0|Wt/2}return zt&&jt.getExtension("WEBGL_lose_context")&&jt.getExtension("WEBGL_lose_context").loseContext(),Wt};var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("pixi-gl-core")),Ht=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":12}],98:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Ht){var Wt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Wt[Yt.BLEND_MODES.NORMAL]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.ADD]=[Ht.ONE,Ht.DST_ALPHA],Wt[Yt.BLEND_MODES.MULTIPLY]=[Ht.DST_COLOR,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.SCREEN]=[Ht.ONE,Ht.ONE_MINUS_SRC_COLOR],Wt[Yt.BLEND_MODES.OVERLAY]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.DARKEN]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.LIGHTEN]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.COLOR_DODGE]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.COLOR_BURN]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.HARD_LIGHT]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.SOFT_LIGHT]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.DIFFERENCE]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.EXCLUSION]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.HUE]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.SATURATION]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.COLOR]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.LUMINOSITY]=[Ht.ZERO,Ht.SRC_ALPHA],Wt[Yt.BLEND_MODES.NORMAL_NPM]=[Ht.SRC_ALPHA,Ht.ONE_MINUS_SRC_ALPHA,Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],Wt[Yt.BLEND_MODES.ADD_NPM]=[Ht.SRC_ALPHA,Ht.DST_ALPHA,Ht.ONE,Ht.DST_ALPHA],Wt[Yt.BLEND_MODES.SCREEN_NPM]=[Ht.SRC_ALPHA,Ht.ONE_MINUS_SRC_COLOR,Ht.ONE,Ht.ONE_MINUS_SRC_COLOR],Wt};var Yt=Bt("../../../const")},{"../../../const":46}],99:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Ht){var Wt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Wt[Yt.DRAW_MODES.POINTS]=Ht.POINTS,Wt[Yt.DRAW_MODES.LINES]=Ht.LINES,Wt[Yt.DRAW_MODES.LINE_LOOP]=Ht.LINE_LOOP,Wt[Yt.DRAW_MODES.LINE_STRIP]=Ht.LINE_STRIP,Wt[Yt.DRAW_MODES.TRIANGLES]=Ht.TRIANGLES,Wt[Yt.DRAW_MODES.TRIANGLE_STRIP]=Ht.TRIANGLE_STRIP,Wt[Yt.DRAW_MODES.TRIANGLE_FAN]=Ht.TRIANGLE_FAN,Wt};var Yt=Bt("../../../const")},{"../../../const":46}],100:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Yt){Yt.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(Bt,Gt,Xt){function Yt(jt){return jt&&jt.__esModule?jt:{default:jt}}Xt.__esModule=!0;var Ht=Yt(Bt("./utils/maxRecommendedTextures")),Wt=Yt(Bt("./utils/canUploadSameBuffer"));Xt.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,Ht.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,Wt.default)()}},{"./utils/canUploadSameBuffer":121,"./utils/maxRecommendedTextures":126}],102:[function(Bt,Gt,Xt){function Yt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Xt.__esModule=!0;var Ht=function(){function Jt(Zt,$t){for(var en=0,tn;en<$t.length;en++)tn=$t[en],tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Zt,tn.key,tn)}return function(Zt,$t,en){return $t&&Jt(Zt.prototype,$t),en&&Jt(Zt,en),Zt}}(),Wt=Bt("../math"),jt=Bt("../utils"),zt=Bt("../const"),Vt=Yt(Bt("../textures/Texture")),qt=Yt(Bt("../display/Container")),Kt=new Wt.Point,Qt=function(Jt){function Zt($t){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Zt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,Jt.call(this));return en._anchor=new Wt.ObservablePoint(en._onAnchorUpdate,en),en._texture=null,en._width=0,en._height=0,en._tint=null,en._tintRGB=null,en.tint=16777215,en.blendMode=zt.BLEND_MODES.NORMAL,en.shader=null,en.cachedTint=16777215,en.texture=$t||Vt.default.EMPTY,en.vertexData=new Float32Array(8),en.vertexTrimmedData=null,en._transformID=-1,en._textureID=-1,en._transformTrimmedID=-1,en._textureTrimmedID=-1,en.pluginName="sprite",en}return function($t,en){if("function"!=typeof en&&null!==en)throw new TypeError("Super expression must either be null or a function, not "+typeof en);$t.prototype=Object.create(en&&en.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),en&&(Object.setPrototypeOf?Object.setPrototypeOf($t,en):$t.__proto__=en)}(Zt,Jt),Zt.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,jt.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,jt.sign)(this.scale.y)*this._height/this._texture.orig.height)},Zt.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Zt.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var $t=this._texture,en=this.transform.worldTransform,tn=en.a,nn=en.b,an=en.c,rn=en.d,on=en.tx,sn=en.ty,dn=this.vertexData,ln=$t.trim,un=$t.orig,pn=this._anchor,cn=0,hn=0,fn=0,gn=0;ln?(cn=(hn=ln.x-pn._x*un.width)+ln.width,fn=(gn=ln.y-pn._y*un.height)+ln.height):(cn=(hn=-pn._x*un.width)+un.width,fn=(gn=-pn._y*un.height)+un.height),dn[0]=tn*hn+an*gn+on,dn[1]=rn*gn+nn*hn+sn,dn[2]=tn*cn+an*gn+on,dn[3]=rn*gn+nn*cn+sn,dn[4]=tn*cn+an*fn+on,dn[5]=rn*fn+nn*cn+sn,dn[6]=tn*hn+an*fn+on,dn[7]=rn*fn+nn*hn+sn}},Zt.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var $t=this._texture,en=this.vertexTrimmedData,tn=$t.orig,nn=this._anchor,an=this.transform.worldTransform,rn=an.a,on=an.b,sn=an.c,dn=an.d,ln=an.tx,un=an.ty,pn=-nn._x*tn.width,cn=pn+tn.width,hn=-nn._y*tn.height,fn=hn+tn.height;en[0]=rn*pn+sn*hn+ln,en[1]=dn*hn+on*pn+un,en[2]=rn*cn+sn*hn+ln,en[3]=dn*hn+on*cn+un,en[4]=rn*cn+sn*fn+ln,en[5]=dn*fn+on*cn+un,en[6]=rn*pn+sn*fn+ln,en[7]=dn*fn+on*pn+un},Zt.prototype._renderWebGL=function($t){this.calculateVertices(),$t.setObjectRenderer($t.plugins[this.pluginName]),$t.plugins[this.pluginName].render(this)},Zt.prototype._renderCanvas=function($t){$t.plugins[this.pluginName].render(this)},Zt.prototype._calculateBounds=function(){var $t=this._texture.trim,en=this._texture.orig;$t&&($t.width!==en.width||$t.height!==en.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},Zt.prototype.getLocalBounds=function($t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),$t||(this._localBoundsRect||(this._localBoundsRect=new Wt.Rectangle),$t=this._localBoundsRect),this._bounds.getRectangle($t)):Jt.prototype.getLocalBounds.call(this,$t)},Zt.prototype.containsPoint=function($t){this.worldTransform.applyInverse($t,Kt);var en=this._texture.orig.width,tn=this._texture.orig.height,nn=-en*this.anchor.x,an=0;return Kt.x>=nn&&Kt.x<nn+en&&(an=-tn*this.anchor.y,Kt.y>=an&&Kt.y<an+tn)},Zt.prototype.destroy=function($t){if(Jt.prototype.destroy.call(this,$t),this._anchor=null,"boolean"==typeof $t?$t:$t&&$t.texture){var en="boolean"==typeof $t?$t:$t&&$t.baseTexture;this._texture.destroy(!!en)}this._texture=null,this.shader=null},Zt.from=function($t){return new Zt(Vt.default.from($t))},Zt.fromFrame=function($t){var en=jt.TextureCache[$t];if(!en)throw new Error("The frameId \""+$t+"\" does not exist in the texture cache");return new Zt(en)},Zt.fromImage=function($t,en,tn){return new Zt(Vt.default.fromImage($t,en,tn))},Ht(Zt,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function($t){var en=(0,jt.sign)(this.scale.x)||1;this.scale.x=en*$t/this._texture.orig.width,this._width=$t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function($t){var en=(0,jt.sign)(this.scale.y)||1;this.scale.y=en*$t/this._texture.orig.height,this._height=$t}},{key:"anchor",get:function(){return this._anchor},set:function($t){this._anchor.copy($t)}},{key:"tint",get:function(){return this._tint},set:function($t){this._tint=$t,this._tintRGB=($t>>16)+(65280&$t)+((255&$t)<<16)}},{key:"texture",get:function(){return this._texture},set:function($t){this._texture!==$t&&(this._texture=$t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,$t&&($t.baseTexture.hasLoaded?this._onTextureUpdate():$t.once("update",this._onTextureUpdate,this)))}}]),Zt}(qt.default);Xt.default=Qt},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":124}],103:[function(Bt,Gt,Xt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Ht=Yt(Bt("../../renderers/canvas/CanvasRenderer")),Wt=Bt("../../const"),jt=Bt("../../math"),zt=Yt(Bt("./CanvasTinter")),Vt=new jt.Matrix,qt=function(){function Kt(Qt){!function(Jt,Zt){if(!(Jt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Kt),this.renderer=Qt}return Kt.prototype.render=function(Qt){var Jt=Qt._texture,Zt=this.renderer,$t=Jt._frame.width,en=Jt._frame.height,tn=Qt.transform.worldTransform,nn=0,an=0;if(!(0>=Jt.orig.width||0>=Jt.orig.height)&&Jt.baseTexture.source&&(Zt.setBlendMode(Qt.blendMode),Jt.valid)){Zt.context.globalAlpha=Qt.worldAlpha;var rn=Jt.baseTexture.scaleMode===Wt.SCALE_MODES.LINEAR;Zt.smoothProperty&&Zt.context[Zt.smoothProperty]!==rn&&(Zt.context[Zt.smoothProperty]=rn),Jt.trim?(nn=Jt.trim.width/2+Jt.trim.x-Qt.anchor.x*Jt.orig.width,an=Jt.trim.height/2+Jt.trim.y-Qt.anchor.y*Jt.orig.height):(nn=(.5-Qt.anchor.x)*Jt.orig.width,an=(.5-Qt.anchor.y)*Jt.orig.height),Jt.rotate&&(tn.copy(Vt),tn=Vt,jt.GroupD8.matrixAppendRotationInv(tn,Jt.rotate,nn,an),nn=0,an=0),nn-=$t/2,an-=en/2,Zt.roundPixels?(Zt.context.setTransform(tn.a,tn.b,tn.c,tn.d,0|tn.tx*Zt.resolution,0|tn.ty*Zt.resolution),nn|=0,an|=0):Zt.context.setTransform(tn.a,tn.b,tn.c,tn.d,tn.tx*Zt.resolution,tn.ty*Zt.resolution);var on=Jt.baseTexture.resolution;16777215===Qt.tint?Zt.context.drawImage(Jt.baseTexture.source,Jt._frame.x*on,Jt._frame.y*on,$t*on,en*on,nn*Zt.resolution,an*Zt.resolution,$t*Zt.resolution,en*Zt.resolution):(Qt.cachedTint===Qt.tint&&Qt.tintedTexture.tintId===Qt._texture._updateID||(Qt.cachedTint=Qt.tint,Qt.tintedTexture=zt.default.getTintedTexture(Qt,Qt.tint)),Zt.context.drawImage(Qt.tintedTexture,0,0,$t*on,en*on,nn*Zt.resolution,an*Zt.resolution,$t*Zt.resolution,en*Zt.resolution))}},Kt.prototype.destroy=function(){this.renderer=null},Kt}();Xt.default=qt,Ht.default.registerPlugin("sprite",qt)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=Bt("../../utils"),Ht={getTintedTexture:function(Wt,jt){var zt=Wt._texture,Vt="#"+("00000"+(0|(jt=Ht.roundColor(jt))).toString(16)).substr(-6);zt.tintCache=zt.tintCache||{};var qt=zt.tintCache[Vt],Kt;if(qt){if(qt.tintId===zt._updateID)return zt.tintCache[Vt];Kt=zt.tintCache[Vt]}else Kt=Ht.canvas||document.createElement("canvas");if(Ht.tintMethod(zt,jt,Kt),Kt.tintId=zt._updateID,Ht.convertTintToImage){var Qt=new Image;Qt.src=Kt.toDataURL(),zt.tintCache[Vt]=Qt}else zt.tintCache[Vt]=Kt,Ht.canvas=null;return Kt},tintWithMultiply:function(Wt,jt,zt){var Vt=zt.getContext("2d"),qt=Wt._frame.clone(),Kt=Wt.baseTexture.resolution;qt.x*=Kt,qt.y*=Kt,qt.width*=Kt,qt.height*=Kt,zt.width=Math.ceil(qt.width),zt.height=Math.ceil(qt.height),Vt.save(),Vt.fillStyle="#"+("00000"+(0|jt).toString(16)).substr(-6),Vt.fillRect(0,0,qt.width,qt.height),Vt.globalCompositeOperation="multiply",Vt.drawImage(Wt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.globalCompositeOperation="destination-atop",Vt.drawImage(Wt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.restore()},tintWithOverlay:function(Wt,jt,zt){var Vt=zt.getContext("2d"),qt=Wt._frame.clone(),Kt=Wt.baseTexture.resolution;qt.x*=Kt,qt.y*=Kt,qt.width*=Kt,qt.height*=Kt,zt.width=Math.ceil(qt.width),zt.height=Math.ceil(qt.height),Vt.save(),Vt.globalCompositeOperation="copy",Vt.fillStyle="#"+("00000"+(0|jt).toString(16)).substr(-6),Vt.fillRect(0,0,qt.width,qt.height),Vt.globalCompositeOperation="destination-atop",Vt.drawImage(Wt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.restore()},tintWithPerPixel:function(Wt,jt,zt){var Vt=zt.getContext("2d"),qt=Wt._frame.clone(),Kt=Wt.baseTexture.resolution;qt.x*=Kt,qt.y*=Kt,qt.width*=Kt,qt.height*=Kt,zt.width=Math.ceil(qt.width),zt.height=Math.ceil(qt.height),Vt.save(),Vt.globalCompositeOperation="copy",Vt.drawImage(Wt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.restore();for(var Qt=(0,Yt.hex2rgb)(jt),Jt=Qt[0],Zt=Qt[1],$t=Qt[2],en=Vt.getImageData(0,0,qt.width,qt.height),tn=en.data,nn=0;nn<tn.length;nn+=4)tn[nn+0]*=Jt,tn[nn+1]*=Zt,tn[nn+2]*=$t;Vt.putImageData(en,0,0)},roundColor:function(Wt){var jt=Ht.cacheStepsPerColorChannel,zt=(0,Yt.hex2rgb)(Wt);return zt[0]=Math.min(255,zt[0]/jt*jt),zt[1]=Math.min(255,zt[1]/jt*jt),zt[2]=Math.min(255,zt[2]/jt*jt),(0,Yt.rgb2hex)(zt)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../../renderers/canvas/utils/canUseNewCanvasBlendModes")).default)(),tintMethod:0};Ht.tintMethod=Ht.canUseMultiply?Ht.tintWithMultiply:Ht.tintWithPerPixel,Xt.default=Ht},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":124}],105:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Ht(Wt){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.vertices=new ArrayBuffer(Wt),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return Ht.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},Ht}();Xt.default=Yt},{}],106:[function(Bt,Gt,Xt){function Yt(nn){return nn&&nn.__esModule?nn:{default:nn}}Xt.__esModule=!0;var Ht=Yt(Bt("../../renderers/webgl/utils/ObjectRenderer")),Wt=Yt(Bt("../../renderers/webgl/WebGLRenderer")),jt=Yt(Bt("../../utils/createIndicesForQuads")),zt=Yt(Bt("./generateMultiTextureShader")),Vt=Yt(Bt("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),qt=Yt(Bt("./BatchBuffer")),Kt=Yt(Bt("../../settings")),Qt=Bt("../../utils"),Jt=Yt(Bt("pixi-gl-core")),Zt=Yt(Bt("bit-twiddle")),$t=0,en=0,tn=function(nn){function an(rn){!function(ln,un){if(!(ln instanceof un))throw new TypeError("Cannot call a class as a function")}(this,an);var on=function(ln,un){if(!ln)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return un&&("object"==typeof un||"function"==typeof un)?un:ln}(this,nn.call(this,rn));on.vertSize=5,on.vertByteSize=4*on.vertSize,on.size=Kt.default.SPRITE_BATCH_SIZE,on.buffers=[];for(var sn=1;sn<=Zt.default.nextPow2(on.size);sn*=2)on.buffers.push(new qt.default(4*sn*on.vertByteSize));on.indices=(0,jt.default)(on.size),on.shader=null,on.currentIndex=0,on.groups=[];for(var dn=0;dn<on.size;dn++)on.groups[dn]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return on.sprites=[],on.vertexBuffers=[],on.vaos=[],on.vaoMax=2,on.vertexCount=0,on.renderer.on("prerender",on.onPrerender,on),on}return function(rn,on){if("function"!=typeof on&&null!==on)throw new TypeError("Super expression must either be null or a function, not "+typeof on);rn.prototype=Object.create(on&&on.prototype,{constructor:{value:rn,enumerable:!1,writable:!0,configurable:!0}}),on&&(Object.setPrototypeOf?Object.setPrototypeOf(rn,on):rn.__proto__=on)}(an,nn),an.prototype.onContextChange=function(){var rn=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(rn.getParameter(rn.MAX_TEXTURE_IMAGE_UNITS),Kt.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,Vt.default)(this.MAX_TEXTURES,rn)),this.shader=(0,zt.default)(rn,this.MAX_TEXTURES),this.indexBuffer=Jt.default.GLBuffer.createIndexBuffer(rn,this.indices,rn.STATIC_DRAW),this.renderer.bindVao(null);for(var on=this.shader.attributes,sn=0;sn<this.vaoMax;sn++){var dn=this.vertexBuffers[sn]=Jt.default.GLBuffer.createVertexBuffer(rn,null,rn.STREAM_DRAW),ln=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(dn,on.aVertexPosition,rn.FLOAT,!1,this.vertByteSize,0).addAttribute(dn,on.aTextureCoord,rn.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(dn,on.aColor,rn.UNSIGNED_BYTE,!0,this.vertByteSize,12);on.aTextureId&&ln.addAttribute(dn,on.aTextureId,rn.FLOAT,!1,this.vertByteSize,16),this.vaos[sn]=ln}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=Array(this.MAX_TEXTURES)},an.prototype.onPrerender=function(){this.vertexCount=0},an.prototype.render=function(rn){this.currentIndex>=this.size&&this.flush(),rn._texture._uvs&&(this.sprites[this.currentIndex++]=rn)},an.prototype.flush=function(){if(0!==this.currentIndex){var rn=this.renderer.gl,on=this.MAX_TEXTURES,sn=Zt.default.nextPow2(this.currentIndex),dn=Zt.default.log2(sn),ln=this.buffers[dn],un=this.sprites,pn=this.groups,cn=ln.float32View,hn=ln.uint32View,fn=this.boundTextures,gn=this.renderer.boundTextures,mn=this.renderer.textureGC.count,yn=0,_n,bn,xn=1,vn=0,Tn=pn[0],En,Sn,An=Qt.premultiplyBlendMode[un[0]._texture.baseTexture.premultipliedAlpha?1:0][un[0].blendMode];Tn.textureCount=0,Tn.start=0,Tn.blend=An,$t++;var wn;for(wn=0;wn<on;++wn)fn[wn]=gn[wn],fn[wn]._virtalBoundId=wn;for(wn=0;wn<this.currentIndex;++wn){var Cn=un[wn];_n=Cn._texture.baseTexture;var Pn=Qt.premultiplyBlendMode[+_n.premultipliedAlpha][Cn.blendMode];if(An!==Pn&&(An=Pn,bn=null,vn=on,$t++),bn!==_n&&(bn=_n,_n._enabled!==$t)){if(vn===on&&($t++,Tn.size=wn-Tn.start,vn=0,(Tn=pn[xn++]).blend=An,Tn.textureCount=0,Tn.start=wn),_n.touched=mn,-1===_n._virtalBoundId)for(var Dn=0;Dn<on;++Dn){var Mn=(Dn+en)%on,Rn=fn[Mn];if(Rn._enabled!==$t){en++,Rn._virtalBoundId=-1,_n._virtalBoundId=Mn,fn[Mn]=_n;break}}_n._enabled=$t,Tn.textureCount++,Tn.ids[vn]=_n._virtalBoundId,Tn.textures[vn++]=_n}if(En=Cn.vertexData,Sn=Cn._texture._uvs.uvsUint32,this.renderer.roundPixels){var In=this.renderer.resolution;cn[yn]=(0|En[0]*In)/In,cn[yn+1]=(0|En[1]*In)/In,cn[yn+5]=(0|En[2]*In)/In,cn[yn+6]=(0|En[3]*In)/In,cn[yn+10]=(0|En[4]*In)/In,cn[yn+11]=(0|En[5]*In)/In,cn[yn+15]=(0|En[6]*In)/In,cn[yn+16]=(0|En[7]*In)/In}else cn[yn]=En[0],cn[yn+1]=En[1],cn[yn+5]=En[2],cn[yn+6]=En[3],cn[yn+10]=En[4],cn[yn+11]=En[5],cn[yn+15]=En[6],cn[yn+16]=En[7];hn[yn+2]=Sn[0],hn[yn+7]=Sn[1],hn[yn+12]=Sn[2],hn[yn+17]=Sn[3];var On=Math.min(Cn.worldAlpha,1),Ln=1>On&&_n.premultipliedAlpha?(0,Qt.premultiplyTint)(Cn._tintRGB,On):Cn._tintRGB+(255*On<<24);hn[yn+3]=hn[yn+8]=hn[yn+13]=hn[yn+18]=Ln,cn[yn+4]=cn[yn+9]=cn[yn+14]=cn[yn+19]=_n._virtalBoundId,yn+=20}if(Tn.size=wn-Tn.start,Kt.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(ln.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var kn=this.shader.attributes,Nn=this.vertexBuffers[this.vertexCount]=Jt.default.GLBuffer.createVertexBuffer(rn,null,rn.STREAM_DRAW),Fn=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(Nn,kn.aVertexPosition,rn.FLOAT,!1,this.vertByteSize,0).addAttribute(Nn,kn.aTextureCoord,rn.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(Nn,kn.aColor,rn.UNSIGNED_BYTE,!0,this.vertByteSize,12);kn.aTextureId&&Fn.addAttribute(Nn,kn.aTextureId,rn.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=Fn}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(ln.vertices,0,!1),this.vertexCount++}for(wn=0;wn<on;++wn)gn[wn]._virtalBoundId=-1;for(wn=0;wn<xn;++wn){for(var Bn=pn[wn],Un=Bn.textureCount,Gn=0;Gn<Un;Gn++)bn=Bn.textures[Gn],gn[Bn.ids[Gn]]!==bn&&this.renderer.bindTexture(bn,Bn.ids[Gn],!0),bn._virtalBoundId=-1;this.renderer.state.setBlendMode(Bn.blend),rn.drawElements(rn.TRIANGLES,6*Bn.size,rn.UNSIGNED_SHORT,2*(6*Bn.start))}this.currentIndex=0}},an.prototype.start=function(){this.renderer.bindShader(this.shader),Kt.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},an.prototype.stop=function(){this.flush()},an.prototype.destroy=function(){for(var rn=0;rn<this.vaoMax;rn++)this.vertexBuffers[rn]&&this.vertexBuffers[rn].destroy(),this.vaos[rn]&&this.vaos[rn].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),nn.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var on=0;on<this.buffers.length;++on)this.buffers[on].destroy()},an}(Ht.default);Xt.default=tn,Wt.default.registerPlugin("sprite",tn)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":124,"../../utils/createIndicesForQuads":122,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":12}],107:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt,jt){var zt=Ht;zt=(zt=zt.replace(/%count%/gi,jt)).replace(/%forloop%/gi,function(Qt){var Jt="";Jt+="\n",Jt+="\n";for(var Zt=0;Zt<Qt;Zt++)0<Zt&&(Jt+="\nelse "),Zt<Qt-1&&(Jt+="if(textureId == "+Zt+".0)"),Jt+="\n{",Jt+="\n\tcolor = texture2D(uSamplers["+Zt+"], vTextureCoord, -1.0);",Jt+="\n}";return Jt+="\n",Jt+="\n"}(jt));for(var Vt=new Yt.default(Wt,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",zt),qt=[],Kt=0;Kt<jt;Kt++)qt[Kt]=Kt;return Vt.bind(),Vt.uniforms.uSamplers=qt,Vt};var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../../Shader")),Ht=(Bt("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":44,path:23}],108:[function(Bt,Gt,Xt){function Yt(tn){return tn&&tn.__esModule?tn:{default:tn}}Xt.__esModule=!0;var Ht=function(){function tn(nn,an){for(var rn=0,on;rn<an.length;rn++)on=an[rn],on.enumerable=on.enumerable||!1,on.configurable=!0,"value"in on&&(on.writable=!0),Object.defineProperty(nn,on.key,on)}return function(nn,an,rn){return an&&tn(nn.prototype,an),rn&&tn(nn,rn),nn}}(),Wt=Yt(Bt("../sprites/Sprite")),jt=Yt(Bt("../textures/Texture")),zt=Bt("../math"),Vt=Bt("../utils"),qt=Bt("../const"),Kt=Yt(Bt("../settings")),Qt=Yt(Bt("./TextStyle")),Jt=Yt(Bt("./TextMetrics")),Zt=Yt(Bt("../utils/trimCanvas")),$t={texture:!0,children:!1,baseTexture:!0},en=function(tn){function nn(an,rn,on){!function(ln,un){if(!(ln instanceof un))throw new TypeError("Cannot call a class as a function")}(this,nn),(on=on||document.createElement("canvas")).width=3,on.height=3;var sn=jt.default.fromCanvas(on,Kt.default.SCALE_MODE,"text");sn.orig=new zt.Rectangle,sn.trim=new zt.Rectangle;var dn=function(ln,un){if(!ln)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return un&&("object"==typeof un||"function"==typeof un)?un:ln}(this,tn.call(this,sn));return jt.default.addToCache(dn._texture,dn._texture.baseTexture.textureCacheIds[0]),dn.canvas=on,dn.context=dn.canvas.getContext("2d"),dn.resolution=Kt.default.RESOLUTION,dn._text=null,dn._style=null,dn._styleListener=null,dn._font="",dn.text=an,dn.style=rn,dn.localStyleID=-1,dn}return function(an,rn){if("function"!=typeof rn&&null!==rn)throw new TypeError("Super expression must either be null or a function, not "+typeof rn);an.prototype=Object.create(rn&&rn.prototype,{constructor:{value:an,enumerable:!1,writable:!0,configurable:!0}}),rn&&(Object.setPrototypeOf?Object.setPrototypeOf(an,rn):an.__proto__=rn)}(nn,tn),nn.prototype.updateText=function(an){var rn=this._style;if(this.localStyleID!==rn.styleID&&(this.dirty=!0,this.localStyleID=rn.styleID),this.dirty||!an){this._font=this._style.toFontString();var on=this.context,sn=Jt.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),dn=sn.width,ln=sn.height,un=sn.lines,pn=sn.lineHeight,cn=sn.lineWidths,hn=sn.maxLineWidth,fn=sn.fontProperties;this.canvas.width=Math.ceil((dn+2*rn.padding)*this.resolution),this.canvas.height=Math.ceil((ln+2*rn.padding)*this.resolution),on.scale(this.resolution,this.resolution),on.clearRect(0,0,this.canvas.width,this.canvas.height),on.font=this._font,on.strokeStyle=rn.stroke,on.lineWidth=rn.strokeThickness,on.textBaseline=rn.textBaseline,on.lineJoin=rn.lineJoin,on.miterLimit=rn.miterLimit;var gn,mn;if(rn.dropShadow){on.fillStyle=rn.dropShadowColor,on.globalAlpha=rn.dropShadowAlpha,on.shadowBlur=rn.dropShadowBlur,0<rn.dropShadowBlur&&(on.shadowColor=rn.dropShadowColor);for(var yn=Math.cos(rn.dropShadowAngle)*rn.dropShadowDistance,_n=Math.sin(rn.dropShadowAngle)*rn.dropShadowDistance,bn=0;bn<un.length;bn++)gn=rn.strokeThickness/2,mn=rn.strokeThickness/2+bn*pn+fn.ascent,"right"===rn.align?gn+=hn-cn[bn]:"center"===rn.align&&(gn+=(hn-cn[bn])/2),rn.fill&&(this.drawLetterSpacing(un[bn],gn+yn+rn.padding,mn+_n+rn.padding),rn.stroke&&rn.strokeThickness&&(on.strokeStyle=rn.dropShadowColor,this.drawLetterSpacing(un[bn],gn+yn+rn.padding,mn+_n+rn.padding,!0),on.strokeStyle=rn.stroke))}on.shadowBlur=0,on.globalAlpha=1,on.fillStyle=this._generateFillStyle(rn,un);for(var xn=0;xn<un.length;xn++)gn=rn.strokeThickness/2,mn=rn.strokeThickness/2+xn*pn+fn.ascent,"right"===rn.align?gn+=hn-cn[xn]:"center"===rn.align&&(gn+=(hn-cn[xn])/2),rn.stroke&&rn.strokeThickness&&this.drawLetterSpacing(un[xn],gn+rn.padding,mn+rn.padding,!0),rn.fill&&this.drawLetterSpacing(un[xn],gn+rn.padding,mn+rn.padding);this.updateTexture()}},nn.prototype.drawLetterSpacing=function(an,rn,on){var sn=3<arguments.length&&void 0!==arguments[3]&&arguments[3],dn=this._style.letterSpacing;if(0!==dn)for(var ln=String.prototype.split.call(an,""),un=rn,pn=0,cn="";pn<an.length;)cn=ln[pn++],sn?this.context.strokeText(cn,un,on):this.context.fillText(cn,un,on),un+=this.context.measureText(cn).width+dn;else sn?this.context.strokeText(an,rn,on):this.context.fillText(an,rn,on)},nn.prototype.updateTexture=function(){var an=this.canvas;if(this._style.trim){var rn=(0,Zt.default)(an);an.width=rn.width,an.height=rn.height,this.context.putImageData(rn.data,0,0)}var on=this._texture,sn=this._style,dn=sn.trim?0:sn.padding,ln=on.baseTexture;ln.hasLoaded=!0,ln.resolution=this.resolution,ln.realWidth=an.width,ln.realHeight=an.height,ln.width=an.width/this.resolution,ln.height=an.height/this.resolution,on.trim.width=on._frame.width=an.width/this.resolution,on.trim.height=on._frame.height=an.height/this.resolution,on.trim.x=-dn,on.trim.y=-dn,on.orig.width=on._frame.width-2*dn,on.orig.height=on._frame.height-2*dn,this._onTextureUpdate(),ln.emit("update",ln),this.dirty=!1},nn.prototype.renderWebGL=function(an){this.resolution!==an.resolution&&(this.resolution=an.resolution,this.dirty=!0),this.updateText(!0),tn.prototype.renderWebGL.call(this,an)},nn.prototype._renderCanvas=function(an){this.resolution!==an.resolution&&(this.resolution=an.resolution,this.dirty=!0),this.updateText(!0),tn.prototype._renderCanvas.call(this,an)},nn.prototype.getLocalBounds=function(an){return this.updateText(!0),tn.prototype.getLocalBounds.call(this,an)},nn.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},nn.prototype._onStyleChange=function(){this.dirty=!0},nn.prototype._generateFillStyle=function(an,rn){if(!Array.isArray(an.fill))return an.fill;if(navigator.isCocoonJS)return an.fill[0];var on,sn,dn,ln,un=this.canvas.width/this.resolution,pn=this.canvas.height/this.resolution,cn=an.fill.slice(),hn=an.fillGradientStops.slice();if(!hn.length)for(var fn=cn.length+1,gn=1;gn<fn;++gn)hn.push(gn/fn);if(cn.unshift(an.fill[0]),hn.unshift(0),cn.push(an.fill[an.fill.length-1]),hn.push(1),an.fillGradientType===qt.TEXT_GRADIENT.LINEAR_VERTICAL){on=this.context.createLinearGradient(un/2,0,un/2,pn),sn=(cn.length+1)*rn.length,dn=0;for(var mn=0;mn<rn.length;mn++){dn+=1;for(var yn=0;yn<cn.length;yn++)ln="number"==typeof hn[yn]?hn[yn]/rn.length+mn/rn.length:dn/sn,on.addColorStop(ln,cn[yn]),dn++}}else{on=this.context.createLinearGradient(0,pn/2,un,pn/2),sn=cn.length+1,dn=1;for(var _n=0;_n<cn.length;_n++)ln="number"==typeof hn[_n]?hn[_n]:dn/sn,on.addColorStop(ln,cn[_n]),dn++}return on},nn.prototype.destroy=function(an){"boolean"==typeof an&&(an={children:an}),an=Object.assign({},$t,an),tn.prototype.destroy.call(this,an),this.context=null,this.canvas=null,this._style=null},Ht(nn,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(an){this.updateText(!0);var rn=(0,Vt.sign)(this.scale.x)||1;this.scale.x=rn*an/this._texture.orig.width,this._width=an}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(an){this.updateText(!0);var rn=(0,Vt.sign)(this.scale.y)||1;this.scale.y=rn*an/this._texture.orig.height,this._height=an}},{key:"style",get:function(){return this._style},set:function(an){this._style=(an=an||{})instanceof Qt.default?an:new Qt.default(an),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(an){an=(""===an||null===an||void 0===an?" ":an)+"",this._text!==an&&(this._text=an,this.dirty=!0)}}]),nn}(Wt.default);Xt.default=en},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":124,"../utils/trimCanvas":129,"./TextMetrics":109,"./TextStyle":110}],109:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Wt(jt,zt,Vt,qt,Kt,Qt,Jt,Zt,$t){!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.text=jt,this.style=zt,this.width=Vt,this.height=qt,this.lines=Kt,this.lineWidths=Qt,this.lineHeight=Jt,this.maxLineWidth=Zt,this.fontProperties=$t}return Wt.measureText=function(jt,zt,Vt){var qt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Wt._canvas;Vt=Vt||zt.wordWrap;var Kt=zt.toFontString(),Qt=Wt.measureFont(Kt),Jt=qt.getContext("2d");Jt.font=Kt;for(var Zt=(Vt?Wt.wordWrap(jt,zt,qt):jt).split(/(?:\r\n|\r|\n)/),$t=Array(Zt.length),en=0,tn=0,nn;tn<Zt.length;tn++)nn=Jt.measureText(Zt[tn]).width+(Zt[tn].length-1)*zt.letterSpacing,$t[tn]=nn,en=Math.max(en,nn);var an=en+zt.strokeThickness;zt.dropShadow&&(an+=zt.dropShadowDistance);var rn=zt.lineHeight||Qt.fontSize+zt.strokeThickness,on=Math.max(rn,Qt.fontSize+zt.strokeThickness)+(Zt.length-1)*(rn+zt.leading);return zt.dropShadow&&(on+=zt.dropShadowDistance),new Wt(jt,zt,an,on,Zt,$t,rn+zt.leading,en,Qt)},Wt.wordWrap=function(jt,zt){for(var Vt=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:Wt._canvas).getContext("2d"),qt="",Kt=jt.split("\n"),Qt=zt.wordWrapWidth,Jt={},Zt=0;Zt<Kt.length;Zt++){for(var $t=Qt,en=Kt[Zt].split(" "),tn=0,nn;tn<en.length;tn++)if(nn=Vt.measureText(en[tn]).width,zt.breakWords&&nn>Qt)for(var an=en[tn].split(""),rn=0;rn<an.length;rn++){var on=an[rn],sn=Jt[on];void 0===sn&&(sn=Vt.measureText(on).width,Jt[on]=sn),sn>$t?(qt+="\n"+on,$t=Qt-sn):(0===rn&&(qt+=" "),qt+=on,$t-=sn)}else{var dn=nn+Vt.measureText(" ").width;0===tn||dn>$t?(0<tn&&(qt+="\n"),qt+=en[tn],$t=Qt-nn):($t-=dn,qt+=" "+en[tn])}Zt<Kt.length-1&&(qt+="\n")}return qt},Wt.measureFont=function(jt){if(Wt._fonts[jt])return Wt._fonts[jt];var zt={},Vt=Wt._canvas,qt=Wt._context;qt.font=jt;var Kt=Math.ceil(qt.measureText("|M\xC9q").width),Qt=Math.ceil(qt.measureText("M").width),Jt=2*Qt;Qt=0|1.4*Qt,Vt.width=Kt,Vt.height=Jt,qt.fillStyle="#f00",qt.fillRect(0,0,Kt,Jt),qt.font=jt,qt.textBaseline="alphabetic",qt.fillStyle="#000",qt.fillText("|M\xC9q",0,Qt);var Zt=qt.getImageData(0,0,Kt,Jt).data,$t=Zt.length,en=4*Kt,tn=0,nn=0,an=!1;for(tn=0;tn<Qt;++tn){for(var rn=0;rn<en;rn+=4)if(255!==Zt[nn+rn]){an=!0;break}if(an)break;nn+=en}for(zt.ascent=Qt-tn,nn=$t-en,an=!1,tn=Jt;tn>Qt;--tn){for(var on=0;on<en;on+=4)if(255!==Zt[nn+on]){an=!0;break}if(an)break;nn-=en}return zt.descent=tn-Qt,zt.fontSize=zt.ascent+zt.descent,Wt._fonts[jt]=zt,zt},Wt}();Xt.default=Yt;var Ht=document.createElement("canvas");Ht.width=Ht.height=10,Yt._canvas=Ht,Yt._context=Ht.getContext("2d"),Yt._fonts={}},{}],110:[function(Bt,Gt,Xt){function Yt(Kt){return"number"==typeof Kt?(0,zt.hex2string)(Kt):("string"==typeof Kt&&0===Kt.indexOf("0x")&&(Kt=Kt.replace("0x","#")),Kt)}function Ht(Kt){if(Array.isArray(Kt)){for(var Qt=0;Qt<Kt.length;++Qt)Kt[Qt]=Yt(Kt[Qt]);return Kt}return Yt(Kt)}Xt.__esModule=!0;var Wt=function(){function Kt(Qt,Jt){for(var Zt=0,$t;Zt<Jt.length;Zt++)$t=Jt[Zt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qt,$t.key,$t)}return function(Qt,Jt,Zt){return Jt&&Kt(Qt.prototype,Jt),Zt&&Kt(Qt,Zt),Qt}}(),jt=Bt("../const"),zt=Bt("../utils"),Vt={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:jt.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},qt=function(){function Kt(Qt){!function(Jt,Zt){if(!(Jt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Kt),this.styleID=0,Object.assign(this,Vt,Qt)}return Kt.prototype.clone=function(){var Qt={};for(var Jt in Vt)Qt[Jt]=this[Jt];return new Kt(Qt)},Kt.prototype.reset=function(){Object.assign(this,Vt)},Kt.prototype.toFontString=function(){var Qt="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,Jt=this.fontFamily;Array.isArray(this.fontFamily)||(Jt=this.fontFamily.split(","));for(var Zt=Jt.length-1,$t;0<=Zt;Zt--)$t=Jt[Zt].trim(),/([\"\'])[^\'\"]+\1/.test($t)||($t="\""+$t+"\""),Jt[Zt]=$t;return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+Qt+" "+Jt.join(",")},Wt(Kt,[{key:"align",get:function(){return this._align},set:function(Qt){this._align!==Qt&&(this._align=Qt,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(Qt){this._breakWords!==Qt&&(this._breakWords=Qt,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(Qt){this._dropShadow!==Qt&&(this._dropShadow=Qt,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(Qt){this._dropShadowAlpha!==Qt&&(this._dropShadowAlpha=Qt,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(Qt){this._dropShadowAngle!==Qt&&(this._dropShadowAngle=Qt,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(Qt){this._dropShadowBlur!==Qt&&(this._dropShadowBlur=Qt,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(Qt){var Jt=Ht(Qt);this._dropShadowColor!==Jt&&(this._dropShadowColor=Jt,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(Qt){this._dropShadowDistance!==Qt&&(this._dropShadowDistance=Qt,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(Qt){var Jt=Ht(Qt);this._fill!==Jt&&(this._fill=Jt,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(Qt){this._fillGradientType!==Qt&&(this._fillGradientType=Qt,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(Qt){(function(Jt,Zt){if(!Array.isArray(Jt)||!Array.isArray(Zt))return!1;if(Jt.length!==Zt.length)return!1;for(var $t=0;$t<Jt.length;++$t)if(Jt[$t]!==Zt[$t])return!1;return!0})(this._fillGradientStops,Qt)||(this._fillGradientStops=Qt,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(Qt){this.fontFamily!==Qt&&(this._fontFamily=Qt,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(Qt){this._fontSize!==Qt&&(this._fontSize=Qt,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(Qt){this._fontStyle!==Qt&&(this._fontStyle=Qt,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(Qt){this._fontVariant!==Qt&&(this._fontVariant=Qt,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(Qt){this._fontWeight!==Qt&&(this._fontWeight=Qt,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(Qt){this._letterSpacing!==Qt&&(this._letterSpacing=Qt,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(Qt){this._lineHeight!==Qt&&(this._lineHeight=Qt,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(Qt){this._leading!==Qt&&(this._leading=Qt,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(Qt){this._lineJoin!==Qt&&(this._lineJoin=Qt,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(Qt){this._miterLimit!==Qt&&(this._miterLimit=Qt,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(Qt){this._padding!==Qt&&(this._padding=Qt,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(Qt){var Jt=Ht(Qt);this._stroke!==Jt&&(this._stroke=Jt,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(Qt){this._strokeThickness!==Qt&&(this._strokeThickness=Qt,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(Qt){this._textBaseline!==Qt&&(this._textBaseline=Qt,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(Qt){this._trim!==Qt&&(this._trim=Qt,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(Qt){this._wordWrap!==Qt&&(this._wordWrap=Qt,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(Qt){this._wordWrapWidth!==Qt&&(this._wordWrapWidth=Qt,this.styleID++)}}]),Kt}();Xt.default=qt},{"../const":46,"../utils":124}],111:[function(Bt,Gt,Xt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0;var Ht=Yt(Bt("./BaseTexture")),Wt=Yt(Bt("../settings")),jt=function(zt){function Vt(){var qt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,Kt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,Qt=arguments[2],Jt=arguments[3];!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Zt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,zt.call(this,null,Qt));return Zt.resolution=Jt||Wt.default.RESOLUTION,Zt.width=qt,Zt.height=Kt,Zt.realWidth=Zt.width*Zt.resolution,Zt.realHeight=Zt.height*Zt.resolution,Zt.scaleMode=void 0===Qt?Wt.default.SCALE_MODE:Qt,Zt.hasLoaded=!0,Zt._glRenderTargets={},Zt._canvasRenderTarget=null,Zt.valid=!1,Zt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.resize=function(qt,Kt){qt===this.width&&Kt===this.height||(this.valid=0<qt&&0<Kt,this.width=qt,this.height=Kt,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},Vt.prototype.destroy=function(){zt.prototype.destroy.call(this,!0),this.renderer=null},Vt}(Ht.default);Xt.default=jt},{"../settings":101,"./BaseTexture":112}],112:[function(Bt,Gt,Xt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Ht=Bt("../utils"),Wt=Yt(Bt("../settings")),jt=Yt(Bt("eventemitter3")),zt=Yt(Bt("../utils/determineCrossOrigin")),Vt=Yt(Bt("bit-twiddle")),qt=function(Kt){function Qt(Jt,Zt,$t){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Qt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,Kt.call(this));return en.uid=(0,Ht.uid)(),en.touched=0,en.resolution=$t||Wt.default.RESOLUTION,en.width=100,en.height=100,en.realWidth=100,en.realHeight=100,en.scaleMode=void 0===Zt?Wt.default.SCALE_MODE:Zt,en.hasLoaded=!1,en.isLoading=!1,en.source=null,en.origSource=null,en.imageType=null,en.sourceScale=1,en.premultipliedAlpha=!0,en.imageUrl=null,en.isPowerOfTwo=!1,en.mipmap=Wt.default.MIPMAP_TEXTURES,en.wrapMode=Wt.default.WRAP_MODE,en._glTextures={},en._enabled=0,en._virtalBoundId=-1,en._destroyed=!1,en.textureCacheIds=[],Jt&&en.loadSource(Jt),en}return function(Jt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Jt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Jt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Jt,Zt):Jt.__proto__=Zt)}(Qt,Kt),Qt.prototype.update=function(Jt){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),Jt||this.emit("update",this)},Qt.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=Vt.default.isPow2(this.realWidth)&&Vt.default.isPow2(this.realHeight)},Qt.prototype.loadSource=function(Jt){var Zt=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,Zt&&this.source&&(this.source.onload=null,this.source.onerror=null);var $t=!this.source;if(this.source=Jt,(Jt.src&&Jt.complete||Jt.getContext)&&Jt.width&&Jt.height){this._updateImageType(),"svg"===this.imageType&&this._loadSvgSource();var en=this;$t&&(window.createImageBitmap&&!Jt.getContext?(en.hasLoaded=!0,en.update(!0),window.createImageBitmap(Jt).then(function(tn){en.source=tn,en.emit("loaded",en)})):(this._sourceLoaded(),en.emit("loaded",en)))}else if(!Jt.getContext&&(this.isLoading=!0,en=this,(Jt.onload=function(){en._updateImageType(),Jt.onload=null,Jt.onerror=null,en.isLoading&&(en.isLoading=!1,"svg"===en.imageType?en._loadSvgSource():window.createImageBitmap?(en.hasLoaded=!0,en.update(!0),window.createImageBitmap(Jt).then(function(tn){en.source=tn,en.emit("loaded",en)})):(en._sourceLoaded(),en.emit("loaded",en)))},Jt.onerror=function(){Jt.onload=null,Jt.onerror=null,en.isLoading&&(en.isLoading=!1,en.emit("error",en))},Jt.complete&&Jt.src))){if(Jt.onload=null,Jt.onerror=null,"svg"===en.imageType)return void en._loadSvgSource();this.isLoading=!1,Jt.width&&Jt.height?Zt&&(window.createImageBitmap?(en.hasLoaded=!0,en.update(!0),window.createImageBitmap(Jt).then(function(tn){en.source=tn,en.emit("loaded",en)})):(this._sourceLoaded(),en.emit("loaded",en))):Zt&&this.emit("error",this)}},Qt.prototype._updateImageType=function(){if(this.imageUrl){var Jt=(0,Ht.decomposeDataUri)(this.imageUrl),Zt;if(Jt&&"image"===Jt.mediaType){var $t=Jt.subType.split("+")[0];if(!(Zt=(0,Ht.getUrlFileExtension)("."+$t)))throw new Error("Invalid image type in data URI.")}else(Zt=(0,Ht.getUrlFileExtension)(this.imageUrl))||(Zt="png");this.imageType=Zt}},Qt.prototype._loadSvgSource=function(){if("svg"===this.imageType){var Jt=(0,Ht.decomposeDataUri)(this.imageUrl);Jt?this._loadSvgSourceUsingDataUri(Jt):this._loadSvgSourceUsingXhr()}},Qt.prototype._loadSvgSourceUsingDataUri=function(Jt){var Zt;if("base64"===Jt.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");Zt=atob(Jt.data)}else Zt=Jt.data;this._loadSvgSourceUsingString(Zt)},Qt.prototype._loadSvgSourceUsingXhr=function(){var Jt=this,Zt=new XMLHttpRequest;Zt.onload=function(){if(Zt.readyState!==Zt.DONE||200!==Zt.status)throw new Error("Failed to load SVG using XHR.");Jt._loadSvgSourceUsingString(Zt.response)},Zt.onerror=function(){return Jt.emit("error",Jt)},Zt.open("GET",this.imageUrl,!0),Zt.send()},Qt.prototype._loadSvgSourceUsingString=function(Jt){var Zt=(0,Ht.getSvgSize)(Jt),$t=Zt.width,en=Zt.height;if(!$t||!en)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round($t*this.sourceScale),this.realHeight=Math.round(en*this.sourceScale),this._updateDimensions();var tn=document.createElement("canvas");tn.width=this.realWidth,tn.height=this.realHeight,tn._pixiId="canvas_"+(0,Ht.uid)(),tn.getContext("2d").drawImage(this.source,0,0,$t,en,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=tn,Qt.addToCache(this,tn._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},Qt.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},Qt.prototype.destroy=function(){this.imageUrl&&(delete Ht.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),Qt.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},Qt.prototype.dispose=function(){this.emit("dispose",this)},Qt.prototype.updateSourceImage=function(Jt){this.source.src=Jt,this.loadSource(this.source)},Qt.fromImage=function(Jt,Zt,$t,en){var tn=Ht.BaseTextureCache[Jt];if(!tn){var nn=new Image;void 0===Zt&&0!==Jt.indexOf("data:")?nn.crossOrigin=(0,zt.default)(Jt):Zt&&(nn.crossOrigin="string"==typeof Zt?Zt:"anonymous"),(tn=new Qt(nn,$t)).imageUrl=Jt,en&&(tn.sourceScale=en),tn.resolution=(0,Ht.getResolutionOfUrl)(Jt),nn.src=Jt,Qt.addToCache(tn,Jt)}return tn},Qt.fromCanvas=function(Jt,Zt){var $t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";Jt._pixiId||(Jt._pixiId=$t+"_"+(0,Ht.uid)());var en=Ht.BaseTextureCache[Jt._pixiId];return en||(en=new Qt(Jt,Zt),Qt.addToCache(en,Jt._pixiId)),en},Qt.from=function(Jt,Zt,$t){if("string"==typeof Jt)return Qt.fromImage(Jt,void 0,Zt,$t);if(Jt instanceof HTMLImageElement){var en=Jt.src,tn=Ht.BaseTextureCache[en];return tn||((tn=new Qt(Jt,Zt)).imageUrl=en,$t&&(tn.sourceScale=$t),tn.resolution=(0,Ht.getResolutionOfUrl)(en),Qt.addToCache(tn,en)),tn}return Jt instanceof HTMLCanvasElement?Qt.fromCanvas(Jt,Zt):Jt},Qt.addToCache=function(Jt,Zt){Zt&&(-1===Jt.textureCacheIds.indexOf(Zt)&&Jt.textureCacheIds.push(Zt),Ht.BaseTextureCache[Zt]&&console.warn("BaseTexture added to the cache with an id ["+Zt+"] that already had an entry"),Ht.BaseTextureCache[Zt]=Jt)},Qt.removeFromCache=function(Jt){if("string"==typeof Jt){var Zt=Ht.BaseTextureCache[Jt];if(Zt){var $t=Zt.textureCacheIds.indexOf(Jt);return-1<$t&&Zt.textureCacheIds.splice($t,1),delete Ht.BaseTextureCache[Jt],Zt}}else if(Jt&&Jt.textureCacheIds){for(var en=0;en<Jt.textureCacheIds.length;++en)delete Ht.BaseTextureCache[Jt.textureCacheIds[en]];return Jt.textureCacheIds.length=0,Jt}return null},Qt}(jt.default);Xt.default=qt},{"../settings":101,"../utils":124,"../utils/determineCrossOrigin":123,"bit-twiddle":1,eventemitter3:3}],113:[function(Bt,Gt,Xt){function Yt(jt){return jt&&jt.__esModule?jt:{default:jt}}Xt.__esModule=!0;var Ht=Yt(Bt("./BaseRenderTexture")),Wt=function(jt){function zt(Vt,qt){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=null;if(!(Vt instanceof Ht.default)){var Qt=arguments[1],Jt=arguments[2],Zt=arguments[3],$t=arguments[4];console.warn("Please use RenderTexture.create("+Qt+", "+Jt+") instead of the ctor directly."),Kt=arguments[0],qt=null,Vt=new Ht.default(Qt,Jt,Zt,$t)}var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,jt.call(this,Vt,qt));return en.legacyRenderer=Kt,en.valid=!0,en._updateUvs(),en}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.resize=function(Vt,qt,Kt){this.valid=0<Vt&&0<qt,this._frame.width=this.orig.width=Vt,this._frame.height=this.orig.height=qt,Kt||this.baseTexture.resize(Vt,qt),this._updateUvs()},zt.create=function(Vt,qt,Kt,Qt){return new zt(new Ht.default(Vt,qt,Kt,Qt))},zt}(Yt(Bt("./Texture")).default);Xt.default=Wt},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function zt(Vt,qt){for(var Kt=0,Qt;Kt<qt.length;Kt++)Qt=qt[Kt],Qt.enumerable=Qt.enumerable||!1,Qt.configurable=!0,"value"in Qt&&(Qt.writable=!0),Object.defineProperty(Vt,Qt.key,Qt)}return function(Vt,qt,Kt){return qt&&zt(Vt.prototype,qt),Kt&&zt(Vt,Kt),Vt}}(),Ht=Bt("../"),Wt=Bt("../utils"),jt=function(){function zt(Vt,qt){var Kt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,zt),this.baseTexture=Vt,this.textures={},this.data=qt,this.resolution=this._updateResolution(Kt||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return Yt(zt,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),zt.prototype._updateResolution=function(Vt){var qt=this.data.meta.scale,Kt=(0,Wt.getResolutionOfUrl)(Vt,null);return null===Kt&&(Kt=void 0===qt?1:parseFloat(qt)),1!==Kt&&(this.baseTexture.resolution=Kt,this.baseTexture.update()),Kt},zt.prototype.parse=function(Vt){this._batchIndex=0,this._callback=Vt,this._frameKeys.length<=zt.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},zt.prototype._processFrames=function(Vt){for(var qt=Vt,Kt=zt.BATCH_SIZE,Qt=this.baseTexture.sourceScale;qt-Vt<Kt&&qt<this._frameKeys.length;){var Jt=this._frameKeys[qt],Zt=this._frames[Jt].frame;if(Zt){var $t=null,en=null,tn=new Ht.Rectangle(0,0,Math.floor(this._frames[Jt].sourceSize.w*Qt)/this.resolution,Math.floor(this._frames[Jt].sourceSize.h*Qt)/this.resolution);$t=this._frames[Jt].rotated?new Ht.Rectangle(Math.floor(Zt.x*Qt)/this.resolution,Math.floor(Zt.y*Qt)/this.resolution,Math.floor(Zt.h*Qt)/this.resolution,Math.floor(Zt.w*Qt)/this.resolution):new Ht.Rectangle(Math.floor(Zt.x*Qt)/this.resolution,Math.floor(Zt.y*Qt)/this.resolution,Math.floor(Zt.w*Qt)/this.resolution,Math.floor(Zt.h*Qt)/this.resolution),this._frames[Jt].trimmed&&(en=new Ht.Rectangle(Math.floor(this._frames[Jt].spriteSourceSize.x*Qt)/this.resolution,Math.floor(this._frames[Jt].spriteSourceSize.y*Qt)/this.resolution,Math.floor(Zt.w*Qt)/this.resolution,Math.floor(Zt.h*Qt)/this.resolution)),this.textures[Jt]=new Ht.Texture(this.baseTexture,$t,tn,en,this._frames[Jt].rotated?2:0),Ht.Texture.addToCache(this.textures[Jt],Jt)}qt++}},zt.prototype._parseComplete=function(){var Vt=this._callback;this._callback=null,this._batchIndex=0,Vt.call(this,this.textures)},zt.prototype._nextBatch=function(){var Vt=this;this._processFrames(this._batchIndex*zt.BATCH_SIZE),this._batchIndex++,setTimeout(function(){Vt._batchIndex*zt.BATCH_SIZE<Vt._frameKeys.length?Vt._nextBatch():Vt._parseComplete()},0)},zt.prototype.destroy=function(){var Vt=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(var qt in this.textures)this.textures[qt].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,Vt&&this.baseTexture.destroy(),this.baseTexture=null},zt}();Xt.default=jt},{"../":65,"../utils":124}],115:[function(Bt,Gt,Xt){function Yt($t){return $t&&$t.__esModule?$t:{default:$t}}function Ht($t){$t.destroy=function(){},$t.on=function(){},$t.once=function(){},$t.emit=function(){}}Xt.__esModule=!0;var Wt=function(){function $t(en,tn){for(var nn=0,an;nn<tn.length;nn++)an=tn[nn],an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(en,an.key,an)}return function(en,tn,nn){return tn&&$t(en.prototype,tn),nn&&$t(en,nn),en}}(),jt=Yt(Bt("./BaseTexture")),zt=Yt(Bt("./VideoBaseTexture")),Vt=Yt(Bt("./TextureUvs")),qt=Yt(Bt("eventemitter3")),Kt=Bt("../math"),Qt=Bt("../utils"),Jt=Yt(Bt("../settings")),Zt=function($t){function en(tn,nn,an,rn,on){!function(dn,ln){if(!(dn instanceof ln))throw new TypeError("Cannot call a class as a function")}(this,en);var sn=function(dn,ln){if(!dn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ln&&("object"==typeof ln||"function"==typeof ln)?ln:dn}(this,$t.call(this));if(sn.noFrame=!1,nn||(sn.noFrame=!0,nn=new Kt.Rectangle(0,0,1,1)),tn instanceof en&&(tn=tn.baseTexture),sn.baseTexture=tn,sn._frame=nn,sn.trim=rn,sn.valid=!1,sn.requiresUpdate=!1,sn._uvs=null,sn.orig=an||nn,sn._rotate=+(on||0),!0===on)sn._rotate=2;else if(0!=sn._rotate%2)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return tn.hasLoaded?(sn.noFrame&&(nn=new Kt.Rectangle(0,0,tn.width,tn.height),tn.on("update",sn.onBaseTextureUpdated,sn)),sn.frame=nn):tn.once("loaded",sn.onBaseTextureLoaded,sn),sn._updateID=0,sn.transform=null,sn.textureCacheIds=[],sn}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.update=function(){this.baseTexture.update()},en.prototype.onBaseTextureLoaded=function(tn){this._updateID++,this.frame=this.noFrame?new Kt.Rectangle(0,0,tn.width,tn.height):this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},en.prototype.onBaseTextureUpdated=function(tn){this._updateID++,this._frame.width=tn.width,this._frame.height=tn.height,this.emit("update",this)},en.prototype.destroy=function(tn){this.baseTexture&&(tn&&(Qt.TextureCache[this.baseTexture.imageUrl]&&en.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,en.removeFromCache(this),this.textureCacheIds=null},en.prototype.clone=function(){return new en(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},en.prototype._updateUvs=function(){this._uvs||(this._uvs=new Vt.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},en.fromImage=function(tn,nn,an,rn){var on=Qt.TextureCache[tn];return on||(on=new en(jt.default.fromImage(tn,nn,an,rn)),en.addToCache(on,tn)),on},en.fromFrame=function(tn){var nn=Qt.TextureCache[tn];if(!nn)throw new Error("The frameId \""+tn+"\" does not exist in the texture cache");return nn},en.fromCanvas=function(tn,nn){var an=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";return new en(jt.default.fromCanvas(tn,nn,an))},en.fromVideo=function(tn,nn){return"string"==typeof tn?en.fromVideoUrl(tn,nn):new en(zt.default.fromVideo(tn,nn))},en.fromVideoUrl=function(tn,nn){return new en(zt.default.fromUrl(tn,nn))},en.from=function(tn){if("string"==typeof tn){var nn=Qt.TextureCache[tn];return nn?nn:null===tn.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?en.fromImage(tn):en.fromVideoUrl(tn)}return tn instanceof HTMLImageElement?new en(jt.default.from(tn)):tn instanceof HTMLCanvasElement?en.fromCanvas(tn,Jt.default.SCALE_MODE,"HTMLCanvasElement"):tn instanceof HTMLVideoElement?en.fromVideo(tn):tn instanceof jt.default?new en(tn):tn},en.fromLoader=function(tn,nn,an){var rn=new jt.default(tn,void 0,(0,Qt.getResolutionOfUrl)(nn)),on=new en(rn);return rn.imageUrl=nn,an||(an=nn),jt.default.addToCache(on.baseTexture,an),en.addToCache(on,an),an!==nn&&(jt.default.addToCache(on.baseTexture,nn),en.addToCache(on,nn)),on},en.addToCache=function(tn,nn){nn&&(-1===tn.textureCacheIds.indexOf(nn)&&tn.textureCacheIds.push(nn),Qt.TextureCache[nn]&&console.warn("Texture added to the cache with an id ["+nn+"] that already had an entry"),Qt.TextureCache[nn]=tn)},en.removeFromCache=function(tn){if("string"==typeof tn){var nn=Qt.TextureCache[tn];if(nn){var an=nn.textureCacheIds.indexOf(tn);return-1<an&&nn.textureCacheIds.splice(an,1),delete Qt.TextureCache[tn],nn}}else if(tn&&tn.textureCacheIds){for(var rn=0;rn<tn.textureCacheIds.length;++rn)Qt.TextureCache[tn.textureCacheIds[rn]]===tn&&delete Qt.TextureCache[tn.textureCacheIds[rn]];return tn.textureCacheIds.length=0,tn}return null},Wt(en,[{key:"frame",get:function(){return this._frame},set:function(tn){this._frame=tn,this.noFrame=!1;var nn=tn.x,an=tn.y,rn=tn.width,on=tn.height,sn=nn+rn>this.baseTexture.width,dn=an+on>this.baseTexture.height;if(sn||dn){var ln=sn&&dn?"and":"or",un="X: "+nn+" + "+rn+" = "+(nn+rn)+" > "+this.baseTexture.width,pn="Y: "+an+" + "+on+" = "+(an+on)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+un+" "+ln+" "+pn)}this.valid=rn&&on&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=tn),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(tn){this._rotate=tn,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),en}(qt.default);Xt.default=Zt,Zt.EMPTY=new Zt(new jt.default()),Ht(Zt.EMPTY),Ht(Zt.EMPTY.baseTexture),Zt.WHITE=function(){var $t=document.createElement("canvas");$t.width=10,$t.height=10;var en=$t.getContext("2d");return en.fillStyle="white",en.fillRect(0,0,10,10),new Zt(new jt.default($t))}(),Ht(Zt.WHITE),Ht(Zt.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":124,"./BaseTexture":112,"./TextureUvs":116,"./VideoBaseTexture":117,eventemitter3:3}],116:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../math/GroupD8")),Ht=function(){function Wt(){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return Wt.prototype.set=function(jt,zt,Vt){var qt=zt.width,Kt=zt.height;if(Vt){var Qt=jt.width/2/qt,Jt=jt.height/2/Kt,Zt=jt.x/qt+Qt,$t=jt.y/Kt+Jt;Vt=Yt.default.add(Vt,Yt.default.NW),this.x0=Zt+Qt*Yt.default.uX(Vt),this.y0=$t+Jt*Yt.default.uY(Vt),Vt=Yt.default.add(Vt,2),this.x1=Zt+Qt*Yt.default.uX(Vt),this.y1=$t+Jt*Yt.default.uY(Vt),Vt=Yt.default.add(Vt,2),this.x2=Zt+Qt*Yt.default.uX(Vt),this.y2=$t+Jt*Yt.default.uY(Vt),Vt=Yt.default.add(Vt,2),this.x3=Zt+Qt*Yt.default.uX(Vt),this.y3=$t+Jt*Yt.default.uY(Vt)}else this.x0=jt.x/qt,this.y0=jt.y/Kt,this.x1=(jt.x+jt.width)/qt,this.y1=jt.y/Kt,this.x2=(jt.x+jt.width)/qt,this.y2=(jt.y+jt.height)/Kt,this.x3=jt.x/qt,this.y3=(jt.y+jt.height)/Kt;this.uvsUint32[0]=(65535&65535*this.y0)<<16|65535&65535*this.x0,this.uvsUint32[1]=(65535&65535*this.y1)<<16|65535&65535*this.x1,this.uvsUint32[2]=(65535&65535*this.y2)<<16|65535&65535*this.x2,this.uvsUint32[3]=(65535&65535*this.y3)<<16|65535&65535*this.x3},Wt}();Xt.default=Ht},{"../math/GroupD8":66}],117:[function(Bt,Gt,Xt){function Yt(Kt,Qt){Qt||(Qt="video/"+Kt.substr(Kt.lastIndexOf(".")+1));var Jt=document.createElement("source");return Jt.src=Kt,Jt.type=Qt,Jt}Xt.__esModule=!0;var Ht=function(){function Kt(Qt,Jt){for(var Zt=0,$t;Zt<Jt.length;Zt++)$t=Jt[Zt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qt,$t.key,$t)}return function(Qt,Jt,Zt){return Jt&&Kt(Qt.prototype,Jt),Zt&&Kt(Qt,Zt),Qt}}(),Wt=function(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}(Bt("./BaseTexture")),jt=Bt("../utils"),zt=Bt("../ticker"),Vt=Bt("../const"),qt=function(Kt){function Qt(Jt,Zt){if(function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Qt),!Jt)throw new Error("No video source element specified.");(Jt.readyState===Jt.HAVE_ENOUGH_DATA||Jt.readyState===Jt.HAVE_FUTURE_DATA)&&Jt.width&&Jt.height&&(Jt.complete=!0);var $t=function(en,tn){if(!en)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tn&&("object"==typeof tn||"function"==typeof tn)?tn:en}(this,Kt.call(this,Jt,Zt));return $t.width=Jt.videoWidth,$t.height=Jt.videoHeight,$t._autoUpdate=!0,$t._isAutoUpdating=!1,$t.autoPlay=!0,$t.update=$t.update.bind($t),$t._onCanPlay=$t._onCanPlay.bind($t),Jt.addEventListener("play",$t._onPlayStart.bind($t)),Jt.addEventListener("pause",$t._onPlayStop.bind($t)),$t.hasLoaded=!1,$t.__loaded=!1,$t._isSourceReady()?$t._onCanPlay():(Jt.addEventListener("canplay",$t._onCanPlay),Jt.addEventListener("canplaythrough",$t._onCanPlay)),$t}return function(Jt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Jt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Jt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Jt,Zt):Jt.__proto__=Zt)}(Qt,Kt),Qt.prototype._isSourcePlaying=function(){var Jt=this.source;return 0<Jt.currentTime&&!1===Jt.paused&&!1===Jt.ended&&2<Jt.readyState},Qt.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},Qt.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(zt.shared.add(this.update,this,Vt.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},Qt.prototype._onPlayStop=function(){this._isAutoUpdating&&(zt.shared.remove(this.update,this),this._isAutoUpdating=!1)},Qt.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},Qt.prototype.destroy=function(){this._isAutoUpdating&&zt.shared.remove(this.update,this),this.source&&this.source._pixiId&&(Wt.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),Kt.prototype.destroy.call(this)},Qt.fromVideo=function(Jt,Zt){Jt._pixiId||(Jt._pixiId="video_"+(0,jt.uid)());var $t=jt.BaseTextureCache[Jt._pixiId];return $t||($t=new Qt(Jt,Zt),Wt.default.addToCache($t,Jt._pixiId)),$t},Qt.fromUrl=function(Jt,Zt){var $t=document.createElement("video");if($t.setAttribute("webkit-playsinline",""),$t.setAttribute("playsinline",""),Array.isArray(Jt))for(var en=0;en<Jt.length;++en)$t.appendChild(Yt(Jt[en].src||Jt[en],Jt[en].mime));else $t.appendChild(Yt(Jt.src||Jt,Jt.mime));return $t.load(),Qt.fromVideo($t,Zt)},Ht(Qt,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(Jt){Jt!==this._autoUpdate&&(this._autoUpdate=Jt,!this._autoUpdate&&this._isAutoUpdating?(zt.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(zt.shared.add(this.update,this,Vt.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),Qt}(Wt.default);Xt.default=qt,qt.fromUrls=qt.fromUrl},{"../const":46,"../ticker":120,"../utils":124,"./BaseTexture":112}],118:[function(Bt,Gt,Xt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Ht=function(){function qt(Kt,Qt){for(var Jt=0,Zt;Jt<Qt.length;Jt++)Zt=Qt[Jt],Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Kt,Zt.key,Zt)}return function(Kt,Qt,Jt){return Qt&&qt(Kt.prototype,Qt),Jt&&qt(Kt,Jt),Kt}}(),Wt=Yt(Bt("../settings")),jt=Bt("../const"),zt=Yt(Bt("./TickerListener")),Vt=function(){function qt(){var Kt=this;!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,qt),this._head=new zt.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/Wt.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(Qt){Kt._requestId=null,Kt.started&&(Kt.update(Qt),Kt.started&&null===Kt._requestId&&Kt._head.next&&(Kt._requestId=requestAnimationFrame(Kt._tick)))}}return qt.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},qt.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},qt.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},qt.prototype.add=function(Kt,Qt){var Jt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:jt.UPDATE_PRIORITY.NORMAL;return this._addListener(new zt.default(Kt,Qt,Jt))},qt.prototype.addOnce=function(Kt,Qt){var Jt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:jt.UPDATE_PRIORITY.NORMAL;return this._addListener(new zt.default(Kt,Qt,Jt,!0))},qt.prototype._addListener=function(Kt){var Qt=this._head.next,Jt=this._head;if(Qt){for(;Qt;){if(Kt.priority>Qt.priority){Kt.connect(Jt);break}Jt=Qt,Qt=Qt.next}Kt.previous||Kt.connect(Jt)}else Kt.connect(Jt);return this._startIfPossible(),this},qt.prototype.remove=function(Kt,Qt){for(var Jt=this._head.next;Jt;)Jt=Jt.match(Kt,Qt)?Jt.destroy():Jt.next;return this._head.next||this._cancelIfNeeded(),this},qt.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},qt.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},qt.prototype.destroy=function(){this.stop();for(var Kt=this._head.next;Kt;)Kt=Kt.destroy(!0);this._head.destroy(),this._head=null},qt.prototype.update=function(){var Kt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),Qt;if(Kt>this.lastTime){(Qt=this.elapsedMS=Kt-this.lastTime)>this._maxElapsedMS&&(Qt=this._maxElapsedMS),this.deltaTime=Qt*Wt.default.TARGET_FPMS*this.speed;for(var Jt=this._head,Zt=Jt.next;Zt;)Zt=Zt.emit(this.deltaTime);Jt.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=Kt},Ht(qt,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(Kt){var Qt=Math.min(Math.max(0,Kt)/1e3,Wt.default.TARGET_FPMS);this._maxElapsedMS=1/Qt}}]),qt}();Xt.default=Vt},{"../const":46,"../settings":101,"./TickerListener":119}],119:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Ht(Wt){var jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,zt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Vt=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.fn=Wt,this.context=jt,this.priority=zt,this.once=Vt,this.next=null,this.previous=null,this._destroyed=!1}return Ht.prototype.match=function(Wt,jt){return jt=jt||null,this.fn===Wt&&this.context===jt},Ht.prototype.emit=function(Wt){this.fn&&(this.context?this.fn.call(this.context,Wt):this.fn(Wt));var jt=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),jt},Ht.prototype.connect=function(Wt){this.previous=Wt,Wt.next&&(Wt.next.previous=this),this.next=Wt.next,Wt.next=this},Ht.prototype.destroy=function(){var Wt=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var jt=this.previous;return this.next=Wt?null:jt,this.previous=null,jt},Ht}();Xt.default=Yt},{}],120:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.Ticker=Xt.shared=void 0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./Ticker")),Ht=new Yt.default;Ht.autoStart=!0,Ht.destroy=function(){},Xt.shared=Ht,Xt.Ticker=Yt.default},{"./Ticker":118}],121:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],122:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Yt){for(var Ht=6*Yt,Wt=new Uint16Array(Ht),jt=0,zt=0;jt<Ht;jt+=6,zt+=4)Wt[jt+0]=zt+0,Wt[jt+1]=zt+1,Wt[jt+2]=zt+2,Wt[jt+3]=zt+0,Wt[jt+4]=zt+2,Wt[jt+5]=zt+3;return Wt}},{}],123:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt){var jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===Wt.indexOf("data:"))return"";jt=jt||window.location,Ht||(Ht=document.createElement("a")),Ht.href=Wt;var zt=!(Wt=Yt.default.parse(Ht.href)).port&&""===jt.port||Wt.port===jt.port;return Wt.hostname===jt.hostname&&zt&&Wt.protocol===jt.protocol?"":"anonymous"};var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("url")),Ht=void 0},{url:29}],124:[function(Bt,Gt,Xt){function Yt(an){if(an&&an.__esModule)return an;var rn={};if(null!=an)for(var on in an)Object.prototype.hasOwnProperty.call(an,on)&&(rn[on]=an[on]);return rn.default=an,rn}function Ht(an){return an&&an.__esModule?an:{default:an}}Xt.__esModule=!0,Xt.premultiplyBlendMode=Xt.BaseTextureCache=Xt.TextureCache=Xt.mixins=Xt.pluginTarget=Xt.EventEmitter=Xt.removeItems=Xt.isMobile=void 0,Xt.uid=function(){return++Zt},Xt.hex2rgb=function(an,rn){return rn=rn||[],rn[0]=(255&an>>16)/255,rn[1]=(255&an>>8)/255,rn[2]=(255&an)/255,rn},Xt.hex2string=function(an){return an=an.toString(16),"#"+(an="000000".substr(0,6-an.length)+an)},Xt.rgb2hex=function(an){return(255*an[0]<<16)+(255*an[1]<<8)+(0|255*an[2])},Xt.getResolutionOfUrl=function(an,rn){var on=jt.default.RETINA_PREFIX.exec(an);return on?parseFloat(on[1]):void 0===rn?1:rn},Xt.decomposeDataUri=function(an){var rn=Wt.DATA_URI.exec(an);if(rn)return{mediaType:rn[1]?rn[1].toLowerCase():void 0,subType:rn[2]?rn[2].toLowerCase():void 0,encoding:rn[3]?rn[3].toLowerCase():void 0,data:rn[4]}},Xt.getUrlFileExtension=function(an){var rn=Wt.URL_FILE_EXTENSION.exec(an);if(rn)return rn[1].toLowerCase()},Xt.getSvgSize=function(an){var rn=Wt.SVG_SIZE.exec(an),on={};return rn&&(on[rn[1]]=Math.round(parseFloat(rn[3])),on[rn[5]]=Math.round(parseFloat(rn[7]))),on},Xt.skipHello=function(){$t=!0},Xt.sayHello=function(an){if(!$t){if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var rn=["\n %c %c %c PixiJS "+Wt.VERSION+" - \u2730 "+an+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,rn)}else window.console&&window.console.log("PixiJS "+Wt.VERSION+" - "+an+" - http://www.pixijs.com/");$t=!0}},Xt.isWebGLSupported=function(){var an={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var rn=document.createElement("canvas"),on=rn.getContext("webgl",an)||rn.getContext("experimental-webgl",an),sn=on&&on.getContextAttributes().stencil;if(on){var dn=on.getExtension("WEBGL_lose_context");dn&&dn.loseContext()}return on=null,sn}catch(ln){return!1}},Xt.sign=function(an){return 0===an?0:0>an?-1:1},Xt.destroyTextureCache=function(){for(var an in en)en[an].destroy();for(an in tn)tn[an].destroy()},Xt.clearTextureCache=function(){for(var an in en)delete en[an];for(an in tn)delete tn[an]},Xt.correctBlendMode=function(an,rn){return nn[rn?1:0][an]},Xt.premultiplyTint=function(an,rn){if(1===rn)return(255*rn<<24)+an;if(0===rn)return 0;var on=255&an>>16,sn=255&an>>8,dn=255&an;return on=0|on*rn+.5,sn=0|sn*rn+.5,dn=0|dn*rn+.5,(255*rn<<24)+(on<<16)+(sn<<8)+dn},Xt.premultiplyRgba=function(an,rn,on,sn){return on=on||new Float32Array(4),sn||void 0===sn?(on[0]=an[0]*rn,on[1]=an[1]*rn,on[2]=an[2]*rn):(on[0]=an[0],on[1]=an[1],on[2]=an[2]),on[3]=rn,on},Xt.premultiplyTintToRgba=function(an,rn,on,sn){return on=on||new Float32Array(4),on[0]=(255&an>>16)/255,on[1]=(255&an>>8)/255,on[2]=(255&an)/255,(sn||void 0===sn)&&(on[0]*=rn,on[1]*=rn,on[2]*=rn),on[3]=rn,on};var Wt=Bt("../const"),jt=Ht(Bt("../settings")),zt=Ht(Bt("eventemitter3")),Vt=Ht(Bt("./pluginTarget")),qt=Yt(Bt("./mixin")),Kt=Yt(Bt("ismobilejs")),Qt=Ht(Bt("remove-array-items")),Jt=Ht(Bt("./mapPremultipliedBlendModes")),Zt=0,$t=!1;Xt.isMobile=Kt,Xt.removeItems=Qt.default,Xt.EventEmitter=zt.default,Xt.pluginTarget=Vt.default,Xt.mixins=qt;var en=Xt.TextureCache=Object.create(null),tn=Xt.BaseTextureCache=Object.create(null),nn=Xt.premultiplyBlendMode=(0,Jt.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":125,"./mixin":127,"./pluginTarget":128,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],125:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(){for(var Ht=[],Wt=[],jt=0;32>jt;jt++)Ht[jt]=jt,Wt[jt]=jt;Ht[Yt.BLEND_MODES.NORMAL_NPM]=Yt.BLEND_MODES.NORMAL,Ht[Yt.BLEND_MODES.ADD_NPM]=Yt.BLEND_MODES.ADD,Ht[Yt.BLEND_MODES.SCREEN_NPM]=Yt.BLEND_MODES.SCREEN,Wt[Yt.BLEND_MODES.NORMAL]=Yt.BLEND_MODES.NORMAL_NPM,Wt[Yt.BLEND_MODES.ADD]=Yt.BLEND_MODES.ADD_NPM,Wt[Yt.BLEND_MODES.SCREEN]=Yt.BLEND_MODES.SCREEN_NPM;var zt=[];return zt.push(Wt),zt.push(Ht),zt};var Yt=Bt("../const")},{"../const":46}],126:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Ht){return Yt.default.tablet||Yt.default.phone?4:Ht};var Yt=function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("ismobilejs"))},{ismobilejs:4}],127:[function(Bt,Gt,Xt){function Yt(Wt,jt){if(Wt&&jt)for(var zt=Object.keys(jt),Vt=0,qt;Vt<zt.length;++Vt)qt=zt[Vt],Object.defineProperty(Wt,qt,Object.getOwnPropertyDescriptor(jt,qt))}Xt.__esModule=!0,Xt.mixin=Yt,Xt.delayMixin=function(Wt,jt){Ht.push(Wt,jt)},Xt.performMixins=function(){for(var Wt=0;Wt<Ht.length;Wt+=2)Yt(Ht[Wt],Ht[Wt+1]);Ht.length=0};var Ht=[]},{}],128:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default={mixin:function(Yt){!function(Ht){Ht.__plugins={},Ht.registerPlugin=function(Wt,jt){Ht.__plugins[Wt]=jt},Ht.prototype.initPlugins=function(){for(var Wt in this.plugins=this.plugins||{},Ht.__plugins)this.plugins[Wt]=new Ht.__plugins[Wt](this)},Ht.prototype.destroyPlugins=function(){for(var Wt in this.plugins)this.plugins[Wt].destroy(),this.plugins[Wt]=null;this.plugins=null}}(Yt)}}},{}],129:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Yt){var Ht=Yt.width,Wt=Yt.height,jt=Yt.getContext("2d"),zt=jt.getImageData(0,0,Ht,Wt).data,Vt=zt.length,qt={top:null,left:null,right:null,bottom:null},Kt,Qt,Jt;for(Kt=0;Kt<Vt;Kt+=4)0!==zt[Kt+3]&&(Qt=Kt/4%Ht,Jt=~~(Kt/4/Ht),null===qt.top&&(qt.top=Jt),null===qt.left?qt.left=Qt:Qt<qt.left&&(qt.left=Qt),null===qt.right?qt.right=Qt+1:qt.right<Qt&&(qt.right=Qt+1),null===qt.bottom?qt.bottom=Jt:qt.bottom<Jt&&(qt.bottom=Jt));return Ht=qt.right-qt.left,{height:Wt=qt.bottom-qt.top+1,width:Ht,data:jt.getImageData(qt.left,qt.top,Ht,Wt)}}},{}],130:[function(Bt,Gt,Xt){function Yt(Ht){var Wt=new Error().stack;void 0===Wt?console.warn("Deprecation Warning: ",Ht):(Wt=Wt.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",Ht),console.warn(Wt),console.groupEnd()):(console.warn("Deprecation Warning: ",Ht),console.warn(Wt)))}Xt.__esModule=!0,Xt.default=function(Ht){var Wt=Ht.mesh,jt=Ht.particles,zt=Ht.extras,Vt=Ht.filters,qt=Ht.prepare,Kt=Ht.loaders,Qt=Ht.interaction;Object.defineProperties(Ht,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return Yt("You do not need to use a PIXI Stage any more, you can simply render any container."),Ht.Container}},DisplayObjectContainer:{get:function(){return Yt("DisplayObjectContainer has been shortened to Container, please use Container from now on."),Ht.Container}},Strip:{get:function(){return Yt("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),Wt.Mesh}},Rope:{get:function(){return Yt("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),Wt.Rope}},ParticleContainer:{get:function(){return Yt("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),jt.ParticleContainer}},MovieClip:{get:function(){return Yt("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),zt.AnimatedSprite}},TilingSprite:{get:function(){return Yt("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),zt.TilingSprite}},BitmapText:{get:function(){return Yt("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),zt.BitmapText}},blendModes:{get:function(){return Yt("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),Ht.BLEND_MODES}},scaleModes:{get:function(){return Yt("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),Ht.SCALE_MODES}},BaseTextureCache:{get:function(){return Yt("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),Ht.utils.BaseTextureCache}},TextureCache:{get:function(){return Yt("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),Ht.utils.TextureCache}},math:{get:function(){return Yt("The math namespace is deprecated, please access members already accessible on PIXI."),Ht}},AbstractFilter:{get:function(){return Yt("AstractFilter has been renamed to Filter, please use PIXI.Filter"),Ht.Filter}},TransformManual:{get:function(){return Yt("TransformManual has been renamed to TransformBase, please update your pixi-spine"),Ht.TransformBase}},TARGET_FPMS:{get:function(){return Yt("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),Ht.settings.TARGET_FPMS},set:function(an){Yt("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),Ht.settings.TARGET_FPMS=an}},FILTER_RESOLUTION:{get:function(){return Yt("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),Ht.settings.FILTER_RESOLUTION},set:function(an){Yt("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),Ht.settings.FILTER_RESOLUTION=an}},RESOLUTION:{get:function(){return Yt("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),Ht.settings.RESOLUTION},set:function(an){Yt("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),Ht.settings.RESOLUTION=an}},MIPMAP_TEXTURES:{get:function(){return Yt("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),Ht.settings.MIPMAP_TEXTURES},set:function(an){Yt("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),Ht.settings.MIPMAP_TEXTURES=an}},SPRITE_BATCH_SIZE:{get:function(){return Yt("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),Ht.settings.SPRITE_BATCH_SIZE},set:function(an){Yt("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),Ht.settings.SPRITE_BATCH_SIZE=an}},SPRITE_MAX_TEXTURES:{get:function(){return Yt("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),Ht.settings.SPRITE_MAX_TEXTURES},set:function(an){Yt("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),Ht.settings.SPRITE_MAX_TEXTURES=an}},RETINA_PREFIX:{get:function(){return Yt("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),Ht.settings.RETINA_PREFIX},set:function(an){Yt("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),Ht.settings.RETINA_PREFIX=an}},DEFAULT_RENDER_OPTIONS:{get:function(){return Yt("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),Ht.settings.RENDER_OPTIONS}}});for(var Jt=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],Zt=function(an){var rn=Jt[an];Object.defineProperty(Ht[rn.parent],"DEFAULT",{get:function(){return Yt("PIXI."+rn.parent+".DEFAULT has been deprecated, please use PIXI.settings."+rn.target),Ht.settings[rn.target]},set:function(on){Yt("PIXI."+rn.parent+".DEFAULT has been deprecated, please use PIXI.settings."+rn.target),Ht.settings[rn.target]=on}})},$t=0;$t<Jt.length;$t++)Zt($t);Object.defineProperties(Ht.settings,{PRECISION:{get:function(){return Yt("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),Ht.settings.PRECISION_FRAGMENT},set:function(an){Yt("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),Ht.settings.PRECISION_FRAGMENT=an}}}),zt.AnimatedSprite&&Object.defineProperties(zt,{MovieClip:{get:function(){return Yt("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),zt.AnimatedSprite}}}),Ht.DisplayObject.prototype.generateTexture=function(an,rn,on){return Yt("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),an.generateTexture(this,rn,on)},Ht.Graphics.prototype.generateTexture=function(an,rn){return Yt("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(an,rn)},Ht.RenderTexture.prototype.render=function(an,rn,on,sn){this.legacyRenderer.render(an,this,on,rn,!sn),Yt("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},Ht.RenderTexture.prototype.getImage=function(an){return Yt("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(an)},Ht.RenderTexture.prototype.getBase64=function(an){return Yt("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(an)},Ht.RenderTexture.prototype.getCanvas=function(an){return Yt("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(an)},Ht.RenderTexture.prototype.getPixels=function(an){return Yt("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(an)},Ht.Sprite.prototype.setTexture=function(an){this.texture=an,Yt("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},zt.BitmapText&&(zt.BitmapText.prototype.setText=function(an){this.text=an,Yt("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),Ht.Text.prototype.setText=function(an){this.text=an,Yt("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},Ht.Text.calculateFontProperties=function(an){return Yt("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),Ht.TextMetrics.measureFont(an)},Object.defineProperties(Ht.Text,{fontPropertiesCache:{get:function(){return Yt("Text.fontPropertiesCache is deprecated"),Ht.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return Yt("Text.fontPropertiesCanvas is deprecated"),Ht.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return Yt("Text.fontPropertiesContext is deprecated"),Ht.TextMetrics._context}}}),Ht.Text.prototype.setStyle=function(an){this.style=an,Yt("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},Ht.Text.prototype.determineFontProperties=function(an){return Yt("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),Ht.TextMetrics.measureFont(an)},Ht.Text.getFontStyle=function(an){return Yt("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(an=an||{})instanceof Ht.TextStyle||(an=new Ht.TextStyle(an)),an.toFontString()},Object.defineProperties(Ht.TextStyle.prototype,{font:{get:function(){Yt("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var an="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+an+" "+this._fontFamily},set:function(an){Yt("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),this._fontStyle=1<an.indexOf("italic")?"italic":-1<an.indexOf("oblique")?"oblique":"normal",this._fontVariant=-1<an.indexOf("small-caps")?"small-caps":"normal";var rn=an.split(" "),on=-1;this._fontSize=26;for(var sn=0;sn<rn.length;++sn)if(rn[sn].match(/(px|pt|em|%)/)){on=sn,this._fontSize=rn[sn];break}this._fontWeight="normal";for(var dn=0;dn<on;++dn)if(rn[dn].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=rn[dn];break}if(-1<on&&on<rn.length-1){this._fontFamily="";for(var ln=on+1;ln<rn.length;++ln)this._fontFamily+=rn[ln]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),Ht.Texture.prototype.setFrame=function(an){this.frame=an,Yt("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},Ht.Texture.addTextureToCache=function(an,rn){Ht.Texture.addToCache(an,rn),Yt("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},Ht.Texture.removeTextureFromCache=function(an){return Yt("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),Ht.BaseTexture.removeFromCache(an),Ht.Texture.removeFromCache(an)},Object.defineProperties(Vt,{AbstractFilter:{get:function(){return Yt("AstractFilter has been renamed to Filter, please use PIXI.Filter"),Ht.AbstractFilter}},SpriteMaskFilter:{get:function(){return Yt("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),Ht.SpriteMaskFilter}}}),Ht.utils.uuid=function(){return Yt("utils.uuid() is deprecated, please use utils.uid() from now on."),Ht.utils.uid()},Ht.utils.canUseNewCanvasBlendModes=function(){return Yt("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),Ht.CanvasTinter.canUseMultiply};var en=!0;if(Object.defineProperty(Ht.utils,"_saidHello",{set:function(an){an&&(Yt("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),en=an},get:function(){return en}}),qt.BasePrepare&&(qt.BasePrepare.prototype.register=function(an,rn){return Yt("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),an&&this.registerFindHook(an),rn&&this.registerUploadHook(rn),this}),qt.canvas&&Object.defineProperty(qt.canvas,"UPLOADS_PER_FRAME",{set:function(){Yt("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return Yt("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),qt.webgl&&Object.defineProperty(qt.webgl,"UPLOADS_PER_FRAME",{set:function(){Yt("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return Yt("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Kt.Loader){var tn=Kt.Resource,nn=Kt.Loader;Object.defineProperties(tn.prototype,{isJson:{get:function(){return Yt("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===tn.TYPE.JSON}},isXml:{get:function(){return Yt("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===tn.TYPE.XML}},isImage:{get:function(){return Yt("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===tn.TYPE.IMAGE}},isAudio:{get:function(){return Yt("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===tn.TYPE.AUDIO}},isVideo:{get:function(){return Yt("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===tn.TYPE.VIDEO}}}),Object.defineProperties(nn.prototype,{before:{get:function(){return Yt("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return Yt("The after() method is deprecated, please use use()."),this.use}}})}Qt.interactiveTarget&&Object.defineProperty(Qt.interactiveTarget,"defaultCursor",{set:function(an){Yt("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=an},get:function(){return Yt("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),Qt.InteractionManager&&(Object.defineProperty(Qt.InteractionManager,"defaultCursorStyle",{set:function(an){Yt("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=an},get:function(){return Yt("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(Qt.InteractionManager,"currentCursorStyle",{set:function(an){Yt("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=an},get:function(){return Yt("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}},{}],131:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Ht=new Yt.Rectangle,Wt=function(){function jt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=zt,zt.extract=this}return jt.prototype.image=function(zt){var Vt=new Image;return Vt.src=this.base64(zt),Vt},jt.prototype.base64=function(zt){return this.canvas(zt).toDataURL()},jt.prototype.canvas=function(zt){var Vt=this.renderer,qt,Kt,Qt,Jt;zt&&(Jt=zt instanceof Yt.RenderTexture?zt:Vt.generateTexture(zt)),Jt?(qt=Jt.baseTexture._canvasRenderTarget.context,Kt=Jt.baseTexture._canvasRenderTarget.resolution,Qt=Jt.frame):(qt=Vt.rootContext,(Qt=Ht).width=this.renderer.width,Qt.height=this.renderer.height);var Zt=Qt.width*Kt,$t=Qt.height*Kt,en=new Yt.CanvasRenderTarget(Zt,$t),tn=qt.getImageData(Qt.x*Kt,Qt.y*Kt,Zt,$t);return en.context.putImageData(tn,0,0),en.canvas},jt.prototype.pixels=function(zt){var Vt=this.renderer,qt,Kt,Qt,Jt;return zt&&(Jt=zt instanceof Yt.RenderTexture?zt:Vt.generateTexture(zt)),Jt?(qt=Jt.baseTexture._canvasRenderTarget.context,Kt=Jt.baseTexture._canvasRenderTarget.resolution,Qt=Jt.frame):(qt=Vt.rootContext,(Qt=Ht).width=Vt.width,Qt.height=Vt.height),qt.getImageData(0,0,Qt.width*Kt,Qt.height*Kt).data},jt.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},jt}();Xt.default=Wt,Yt.CanvasRenderer.registerPlugin("extract",Wt)},{"../../core":65}],132:[function(Bt,Gt,Xt){function Yt(jt){return jt&&jt.__esModule?jt:{default:jt}}Xt.__esModule=!0;var Ht=Bt("./webgl/WebGLExtract");Object.defineProperty(Xt,"webgl",{enumerable:!0,get:function(){return Yt(Ht).default}});var Wt=Bt("./canvas/CanvasExtract");Object.defineProperty(Xt,"canvas",{enumerable:!0,get:function(){return Yt(Wt).default}})},{"./canvas/CanvasExtract":131,"./webgl/WebGLExtract":133}],133:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Ht=new Yt.Rectangle,Wt=function(){function jt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=zt,zt.extract=this}return jt.prototype.image=function(zt){var Vt=new Image;return Vt.src=this.base64(zt),Vt},jt.prototype.base64=function(zt){return this.canvas(zt).toDataURL()},jt.prototype.canvas=function(zt){var Vt=this.renderer,qt,Kt,Qt,Jt=!1,Zt;zt&&(Zt=zt instanceof Yt.RenderTexture?zt:this.renderer.generateTexture(zt)),Zt?(Kt=(qt=Zt.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,Qt=Zt.frame,Jt=!1):(Kt=(qt=this.renderer.rootRenderTarget).resolution,Jt=!0,(Qt=Ht).width=qt.size.width,Qt.height=qt.size.height);var $t=Qt.width*Kt,en=Qt.height*Kt,tn=new Yt.CanvasRenderTarget($t,en);if(qt){Vt.bindRenderTarget(qt);var nn=new Uint8Array(4*$t*en),an=Vt.gl;an.readPixels(Qt.x*Kt,Qt.y*Kt,$t,en,an.RGBA,an.UNSIGNED_BYTE,nn);var rn=tn.context.getImageData(0,0,$t,en);rn.data.set(nn),tn.context.putImageData(rn,0,0),Jt&&(tn.context.scale(1,-1),tn.context.drawImage(tn.canvas,0,-en))}return tn.canvas},jt.prototype.pixels=function(zt){var Vt=this.renderer,qt,Kt,Qt,Jt;zt&&(Jt=zt instanceof Yt.RenderTexture?zt:this.renderer.generateTexture(zt)),Jt?(Kt=(qt=Jt.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,Qt=Jt.frame):(Kt=(qt=this.renderer.rootRenderTarget).resolution,(Qt=Ht).width=qt.size.width,Qt.height=qt.size.height);var Zt=Qt.width*Kt,$t=Qt.height*Kt,en=new Uint8Array(4*Zt*$t);if(qt){Vt.bindRenderTarget(qt);var tn=Vt.gl;tn.readPixels(Qt.x*Kt,Qt.y*Kt,Zt,$t,tn.RGBA,tn.UNSIGNED_BYTE,en)}return en},jt.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},jt}();Xt.default=Wt,Yt.WebGLRenderer.registerPlugin("extract",Wt)},{"../../core":65}],134:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../core")),Wt=function(jt){function zt(Vt,qt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=function(Qt,Jt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Qt}(this,jt.call(this,Vt[0]instanceof Ht.Texture?Vt[0]:Vt[0].texture));return Kt._textures=null,Kt._durations=null,Kt.textures=Vt,Kt._autoUpdate=!1!==qt,Kt.animationSpeed=1,Kt.loop=!0,Kt.onComplete=null,Kt.onFrameChange=null,Kt.onLoop=null,Kt._currentTime=0,Kt.playing=!1,Kt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&Ht.ticker.shared.remove(this.update,this))},zt.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&Ht.ticker.shared.add(this.update,this,Ht.UPDATE_PRIORITY.HIGH))},zt.prototype.gotoAndStop=function(Vt){this.stop();var qt=this.currentFrame;this._currentTime=Vt,qt!==this.currentFrame&&this.updateTexture()},zt.prototype.gotoAndPlay=function(Vt){var qt=this.currentFrame;this._currentTime=Vt,qt!==this.currentFrame&&this.updateTexture(),this.play()},zt.prototype.update=function(Vt){var qt=this.animationSpeed*Vt,Kt=this.currentFrame;if(null!==this._durations){var Qt=this._currentTime%1*this._durations[this.currentFrame];for(Qt+=1e3*(qt/60);0>Qt;)this._currentTime--,Qt+=this._durations[this.currentFrame];var Jt=Math.sign(this.animationSpeed*Vt);for(this._currentTime=Math.floor(this._currentTime);Qt>=this._durations[this.currentFrame];)Qt-=this._durations[this.currentFrame]*Jt,this._currentTime+=Jt;this._currentTime+=Qt/this._durations[this.currentFrame]}else this._currentTime+=qt;0>this._currentTime&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):Kt!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<Kt?this.onLoop():0>this.animationSpeed&&this.currentFrame>Kt&&this.onLoop()),this.updateTexture())},zt.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},zt.prototype.destroy=function(Vt){this.stop(),jt.prototype.destroy.call(this,Vt)},zt.fromFrames=function(Vt){for(var qt=[],Kt=0;Kt<Vt.length;++Kt)qt.push(Ht.Texture.fromFrame(Vt[Kt]));return new zt(qt)},zt.fromImages=function(Vt){for(var qt=[],Kt=0;Kt<Vt.length;++Kt)qt.push(Ht.Texture.fromImage(Vt[Kt]));return new zt(qt)},Yt(zt,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(Vt){if(Vt[0]instanceof Ht.Texture)this._textures=Vt,this._durations=null;else{this._textures=[],this._durations=[];for(var qt=0;qt<Vt.length;qt++)this._textures.push(Vt[qt].texture),this._durations.push(Vt[qt].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var Vt=Math.floor(this._currentTime)%this._textures.length;return 0>Vt&&(Vt+=this._textures.length),Vt}}]),zt}(Ht.Sprite);Xt.default=Wt},{"../core":65}],135:[function(Bt,Gt,Xt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Ht=function(){function qt(Kt,Qt){for(var Jt=0,Zt;Jt<Qt.length;Jt++)Zt=Qt[Jt],Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Kt,Zt.key,Zt)}return function(Kt,Qt,Jt){return Qt&&qt(Kt.prototype,Qt),Jt&&qt(Kt,Jt),Kt}}(),Wt=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Qt in qt)Object.prototype.hasOwnProperty.call(qt,Qt)&&(Kt[Qt]=qt[Qt]);return Kt.default=qt,Kt}(Bt("../core")),jt=Yt(Bt("../core/math/ObservablePoint")),zt=Yt(Bt("../core/settings")),Vt=function(qt){function Kt(Qt){var Jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Kt);var Zt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,qt.call(this));return Zt._textWidth=0,Zt._textHeight=0,Zt._glyphs=[],Zt._font={tint:void 0===Jt.tint?16777215:Jt.tint,align:Jt.align||"left",name:null,size:0},Zt.font=Jt.font,Zt._text=Qt,Zt._maxWidth=0,Zt._maxLineHeight=0,Zt._anchor=new jt.default(function(){Zt.dirty=!0},Zt,0,0),Zt.dirty=!1,Zt.updateText(),Zt}return function(Qt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Qt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Jt):Qt.__proto__=Jt)}(Kt,qt),Kt.prototype.updateText=function(){for(var Qt=Kt.fonts[this._font.name],Jt=this._font.size/Qt.size,Zt=new Wt.Point,$t=[],en=[],tn=null,nn=0,an=0,rn=0,on=-1,sn=0,dn=0,ln=0,un=0,pn;un<this.text.length;un++)if(pn=this.text.charCodeAt(un),/(\s)/.test(this.text.charAt(un))&&(on=un,sn=nn),/(?:\r\n|\r|\n)/.test(this.text.charAt(un)))en.push(nn),an=Math.max(an,nn),rn++,Zt.x=0,Zt.y+=Qt.lineHeight,tn=null;else if(-1!==on&&0<this._maxWidth&&Zt.x*Jt>this._maxWidth)Wt.utils.removeItems($t,on-dn,un-on),un=on,on=-1,++dn,en.push(sn),an=Math.max(an,sn),rn++,Zt.x=0,Zt.y+=Qt.lineHeight,tn=null;else{var cn=Qt.chars[pn];cn&&(tn&&cn.kerning[tn]&&(Zt.x+=cn.kerning[tn]),$t.push({texture:cn.texture,line:rn,charCode:pn,position:new Wt.Point(Zt.x+cn.xOffset,Zt.y+cn.yOffset)}),nn=Zt.x+(cn.texture.width+cn.xOffset),Zt.x+=cn.xAdvance,ln=Math.max(ln,cn.yOffset+cn.texture.height),tn=pn)}en.push(nn),an=Math.max(an,nn);for(var hn=[],fn=0,gn;fn<=rn;fn++)gn=0,"right"===this._font.align?gn=an-en[fn]:"center"===this._font.align&&(gn=(an-en[fn])/2),hn.push(gn);for(var mn=$t.length,yn=this.tint,_n=0,bn;_n<mn;_n++)bn=this._glyphs[_n],bn?bn.texture=$t[_n].texture:(bn=new Wt.Sprite($t[_n].texture),this._glyphs.push(bn)),bn.position.x=($t[_n].position.x+hn[$t[_n].line])*Jt,bn.position.y=$t[_n].position.y*Jt,bn.scale.x=bn.scale.y=Jt,bn.tint=yn,bn.parent||this.addChild(bn);for(var xn=mn;xn<this._glyphs.length;++xn)this.removeChild(this._glyphs[xn]);if(this._textWidth=an*Jt,this._textHeight=(Zt.y+Qt.lineHeight)*Jt,0!==this.anchor.x||0!==this.anchor.y)for(var vn=0;vn<mn;vn++)this._glyphs[vn].x-=this._textWidth*this.anchor.x,this._glyphs[vn].y-=this._textHeight*this.anchor.y;this._maxLineHeight=ln*Jt},Kt.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},Kt.prototype.getLocalBounds=function(){return this.validate(),qt.prototype.getLocalBounds.call(this)},Kt.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Kt.registerFont=function(Qt,Jt){var Zt={},$t=Qt.getElementsByTagName("info")[0],en=Qt.getElementsByTagName("common")[0],tn=Jt.baseTexture.resolution||zt.default.RESOLUTION;Zt.font=$t.getAttribute("face"),Zt.size=parseInt($t.getAttribute("size"),10),Zt.lineHeight=parseInt(en.getAttribute("lineHeight"),10)/tn,Zt.chars={};for(var nn=Qt.getElementsByTagName("char"),an=0;an<nn.length;an++){var rn=nn[an],on=parseInt(rn.getAttribute("id"),10),sn=new Wt.Rectangle(parseInt(rn.getAttribute("x"),10)/tn+Jt.frame.x/tn,parseInt(rn.getAttribute("y"),10)/tn+Jt.frame.y/tn,parseInt(rn.getAttribute("width"),10)/tn,parseInt(rn.getAttribute("height"),10)/tn);Zt.chars[on]={xOffset:parseInt(rn.getAttribute("xoffset"),10)/tn,yOffset:parseInt(rn.getAttribute("yoffset"),10)/tn,xAdvance:parseInt(rn.getAttribute("xadvance"),10)/tn,kerning:{},texture:new Wt.Texture(Jt.baseTexture,sn)}}for(var dn=Qt.getElementsByTagName("kerning"),ln=0;ln<dn.length;ln++){var un=dn[ln],pn=parseInt(un.getAttribute("first"),10)/tn,cn=parseInt(un.getAttribute("second"),10)/tn,hn=parseInt(un.getAttribute("amount"),10)/tn;Zt.chars[cn]&&(Zt.chars[cn].kerning[pn]=hn)}return Kt.fonts[Zt.font]=Zt,Zt},Ht(Kt,[{key:"tint",get:function(){return this._font.tint},set:function(Qt){this._font.tint="number"==typeof Qt&&0<=Qt?Qt:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(Qt){this._font.align=Qt||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(Qt){"number"==typeof Qt?this._anchor.set(Qt):this._anchor.copy(Qt)}},{key:"font",get:function(){return this._font},set:function(Qt){Qt&&("string"==typeof Qt?(Qt=Qt.split(" "),this._font.name=1===Qt.length?Qt[0]:Qt.slice(1).join(" "),this._font.size=2<=Qt.length?parseInt(Qt[0],10):Kt.fonts[this._font.name].size):(this._font.name=Qt.name,this._font.size="number"==typeof Qt.size?Qt.size:parseInt(Qt.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(Qt){Qt=Qt.toString()||" ",this._text!==Qt&&(this._text=Qt,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(Qt){this._maxWidth!==Qt&&(this._maxWidth=Qt,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),Kt}(Wt.Container);Xt.default=Vt,Vt.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101}],136:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function zt(Vt,qt){for(var Kt=0,Qt;Kt<qt.length;Kt++)Qt=qt[Kt],Qt.enumerable=Qt.enumerable||!1,Qt.configurable=!0,"value"in Qt&&(Qt.writable=!0),Object.defineProperty(Vt,Qt.key,Qt)}return function(Vt,qt,Kt){return qt&&zt(Vt.prototype,qt),Kt&&zt(Vt,Kt),Vt}}(),Ht=function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("../core/math/Matrix")),Wt=new Ht.default,jt=function(){function zt(Vt,qt){!function(Kt,Qt){if(!(Kt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,zt),this._texture=Vt,this.mapCoord=new Ht.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===qt?.5:qt}return zt.prototype.multiplyUvs=function(Vt,qt){void 0===qt&&(qt=Vt);for(var Kt=this.mapCoord,Qt=0;Qt<Vt.length;Qt+=2){var Jt=Vt[Qt],Zt=Vt[Qt+1];qt[Qt]=Jt*Kt.a+Zt*Kt.c+Kt.tx,qt[Qt+1]=Jt*Kt.b+Zt*Kt.d+Kt.ty}return qt},zt.prototype.update=function(Vt){var qt=this._texture;if(!qt||!qt.valid)return!1;if(!Vt&&this._lastTextureID===qt._updateID)return!1;this._lastTextureID=qt._updateID;var Kt=qt._uvs;this.mapCoord.set(Kt.x1-Kt.x0,Kt.y1-Kt.y0,Kt.x3-Kt.x0,Kt.y3-Kt.y0,Kt.x0,Kt.y0);var Qt=qt.orig,Jt=qt.trim;Jt&&(Wt.set(Qt.width/Jt.width,0,0,Qt.height/Jt.height,-Jt.x/Jt.width,-Jt.y/Jt.height),this.mapCoord.append(Wt));var Zt=qt.baseTexture,$t=this.uClampFrame,en=this.clampMargin/Zt.resolution,tn=this.clampOffset;return $t[0]=(qt._frame.x+en+tn)/Zt.width,$t[1]=(qt._frame.y+en+tn)/Zt.height,$t[2]=(qt._frame.x+qt._frame.width-en+tn)/Zt.width,$t[3]=(qt._frame.y+qt._frame.height-en+tn)/Zt.height,this.uClampOffset[0]=tn/Zt.realWidth,this.uClampOffset[1]=tn/Zt.realHeight,!0},Yt(zt,[{key:"texture",get:function(){return this._texture},set:function(Vt){this._texture=Vt,this._lastTextureID=-1}}]),zt}();Xt.default=jt},{"../core/math/Matrix":67}],137:[function(Bt,Gt,Xt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Ht=function(){function Kt(Qt,Jt){for(var Zt=0,$t;Zt<Jt.length;Zt++)$t=Jt[Zt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qt,$t.key,$t)}return function(Qt,Jt,Zt){return Jt&&Kt(Qt.prototype,Jt),Zt&&Kt(Qt,Zt),Qt}}(),Wt=function(Kt){if(Kt&&Kt.__esModule)return Kt;var Qt={};if(null!=Kt)for(var Jt in Kt)Object.prototype.hasOwnProperty.call(Kt,Jt)&&(Qt[Jt]=Kt[Jt]);return Qt.default=Kt,Qt}(Bt("../core")),jt=Yt(Bt("../core/sprites/canvas/CanvasTinter")),zt=Yt(Bt("./TextureTransform")),Vt=new Wt.Point,qt=function(Kt){function Qt(Jt){var Zt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,$t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Qt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,Kt.call(this,Jt));return en.tileTransform=new Wt.TransformStatic,en._width=Zt,en._height=$t,en._canvasPattern=null,en.uvTransform=Jt.transform||new zt.default(Jt),en.pluginName="tilingSprite",en.uvRespectAnchor=!1,en}return function(Jt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Jt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Jt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Jt,Zt):Jt.__proto__=Zt)}(Qt,Kt),Qt.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},Qt.prototype._renderWebGL=function(Jt){var Zt=this._texture;Zt&&Zt.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),Jt.setObjectRenderer(Jt.plugins[this.pluginName]),Jt.plugins[this.pluginName].render(this))},Qt.prototype._renderCanvas=function(Jt){var Zt=this._texture;if(Zt.baseTexture.hasLoaded){var $t=Jt.context,en=this.worldTransform,tn=Jt.resolution,nn=Zt.baseTexture,an=nn.resolution,rn=this.tilePosition.x/this.tileScale.x%Zt._frame.width*an,on=this.tilePosition.y/this.tileScale.y%Zt._frame.height*an;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var sn=new Wt.CanvasRenderTarget(Zt._frame.width,Zt._frame.height,an);16777215===this.tint?sn.context.drawImage(nn.source,-Zt._frame.x*an,-Zt._frame.y*an):(this.tintedTexture=jt.default.getTintedTexture(this,this.tint),sn.context.drawImage(this.tintedTexture,0,0)),this.cachedTint=this.tint,this._canvasPattern=sn.context.createPattern(sn.canvas,"repeat")}$t.globalAlpha=this.worldAlpha,$t.setTransform(en.a*tn,en.b*tn,en.c*tn,en.d*tn,en.tx*tn,en.ty*tn),Jt.setBlendMode(this.blendMode),$t.fillStyle=this._canvasPattern,$t.scale(this.tileScale.x/an,this.tileScale.y/an);var dn=this.anchor.x*-this._width,ln=this.anchor.y*-this._height;this.uvRespectAnchor?($t.translate(rn,on),$t.fillRect(-rn+dn,-on+ln,this._width/this.tileScale.x*an,this._height/this.tileScale.y*an)):($t.translate(rn+dn,on+ln),$t.fillRect(-rn,-on,this._width/this.tileScale.x*an,this._height/this.tileScale.y*an))}},Qt.prototype._calculateBounds=function(){var Jt=this._width*-this._anchor._x,Zt=this._height*-this._anchor._y,$t=this._width*(1-this._anchor._x),en=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,Jt,Zt,$t,en)},Qt.prototype.getLocalBounds=function(Jt){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),Jt||(this._localBoundsRect||(this._localBoundsRect=new Wt.Rectangle),Jt=this._localBoundsRect),this._bounds.getRectangle(Jt)):Kt.prototype.getLocalBounds.call(this,Jt)},Qt.prototype.containsPoint=function(Jt){this.worldTransform.applyInverse(Jt,Vt);var Zt=this._width,$t=this._height,en=-Zt*this.anchor._x;if(Vt.x>=en&&Vt.x<en+Zt){var tn=-$t*this.anchor._y;if(Vt.y>=tn&&Vt.y<tn+$t)return!0}return!1},Qt.prototype.destroy=function(Jt){Kt.prototype.destroy.call(this,Jt),this.tileTransform=null,this.uvTransform=null},Qt.from=function(Jt,Zt,$t){return new Qt(Wt.Texture.from(Jt),Zt,$t)},Qt.fromFrame=function(Jt,Zt,$t){var en=Wt.utils.TextureCache[Jt];if(!en)throw new Error("The frameId \""+Jt+"\" does not exist in the texture cache "+this);return new Qt(en,Zt,$t)},Qt.fromImage=function(Jt,Zt,$t,en,tn){return new Qt(Wt.Texture.fromImage(Jt,en,tn),Zt,$t)},Ht(Qt,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(Jt){this.uvTransform.clampMargin=Jt,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(Jt){this.tileTransform.scale.copy(Jt)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(Jt){this.tileTransform.position.copy(Jt)}},{key:"width",get:function(){return this._width},set:function(Jt){this._width=Jt}},{key:"height",get:function(){return this._height},set:function(Jt){this._height=Jt}}]),Qt}(Wt.Sprite);Xt.default=qt},{"../core":65,"../core/sprites/canvas/CanvasTinter":104,"./TextureTransform":136}],138:[function(Bt){function Yt(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}var Ht=function(Qt){if(Qt&&Qt.__esModule)return Qt;var Jt={};if(null!=Qt)for(var Zt in Qt)Object.prototype.hasOwnProperty.call(Qt,Zt)&&(Jt[Zt]=Qt[Zt]);return Jt.default=Qt,Jt}(Bt("../core")),Wt=Yt(Bt("../core/textures/Texture")),jt=Yt(Bt("../core/textures/BaseTexture")),zt=Bt("../core/utils"),Vt=Ht.DisplayObject,qt=new Ht.Matrix;Vt.prototype._cacheAsBitmap=!1,Vt.prototype._cacheData=!1;var Kt=function Qt(){!function(Jt,Zt){if(!(Jt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Qt),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(Vt.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(Qt){if(this._cacheAsBitmap!==Qt){this._cacheAsBitmap=Qt;var Jt;Qt?(this._cacheData||(this._cacheData=new Kt),(Jt=this._cacheData).originalRenderWebGL=this.renderWebGL,Jt.originalRenderCanvas=this.renderCanvas,Jt.originalUpdateTransform=this.updateTransform,Jt.originalCalculateBounds=this._calculateBounds,Jt.originalGetLocalBounds=this.getLocalBounds,Jt.originalDestroy=this.destroy,Jt.originalContainsPoint=this.containsPoint,Jt.originalMask=this._mask,Jt.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((Jt=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=Jt.originalRenderWebGL,this.renderCanvas=Jt.originalRenderCanvas,this._calculateBounds=Jt.originalCalculateBounds,this.getLocalBounds=Jt.originalGetLocalBounds,this.destroy=Jt.originalDestroy,this.updateTransform=Jt.originalUpdateTransform,this.containsPoint=Jt.originalContainsPoint,this._mask=Jt.originalMask,this.filterArea=Jt.originalFilterArea)}}}}),Vt.prototype._renderCachedWebGL=function(Qt){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObject(Qt),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(Qt))},Vt.prototype._initCachedDisplayObject=function(Qt){if(!this._cacheData||!this._cacheData.sprite){var Jt=this.alpha;this.alpha=1,Qt.currentRenderer.flush();var Zt=this.getLocalBounds().clone();if(this._filters){var $t=this._filters[0].padding;Zt.pad($t)}var en=Qt._activeRenderTarget,tn=Qt.filterManager.filterStack,nn=Ht.RenderTexture.create(0|Zt.width,0|Zt.height),an="cacheAsBitmap_"+(0,zt.uid)();this._cacheData.textureCacheId=an,jt.default.addToCache(nn.baseTexture,an),Wt.default.addToCache(nn,an);var rn=qt;rn.tx=-Zt.x,rn.ty=-Zt.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,Qt.render(this,nn,!0,rn,!0),Qt.bindRenderTarget(en),Qt.filterManager.filterStack=tn,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var on=new Ht.Sprite(nn);on.transform.worldTransform=this.transform.worldTransform,on.anchor.x=-Zt.x/Zt.width,on.anchor.y=-Zt.y/Zt.height,on.alpha=Jt,on._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=on,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=Qt._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=on.containsPoint.bind(on)}},Vt.prototype._renderCachedCanvas=function(Qt){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObjectCanvas(Qt),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(Qt))},Vt.prototype._initCachedDisplayObjectCanvas=function(Qt){if(!this._cacheData||!this._cacheData.sprite){var Jt=this.getLocalBounds(),Zt=this.alpha;this.alpha=1;var $t=Qt.context,en=Ht.RenderTexture.create(0|Jt.width,0|Jt.height),tn="cacheAsBitmap_"+(0,zt.uid)();this._cacheData.textureCacheId=tn,jt.default.addToCache(en.baseTexture,tn),Wt.default.addToCache(en,tn);var nn=qt;this.transform.localTransform.copy(nn),nn.invert(),nn.tx-=Jt.x,nn.ty-=Jt.y,this.renderCanvas=this._cacheData.originalRenderCanvas,Qt.render(this,en,!0,nn,!1),Qt.context=$t,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var an=new Ht.Sprite(en);an.transform.worldTransform=this.transform.worldTransform,an.anchor.x=-Jt.x/Jt.width,an.anchor.y=-Jt.y/Jt.height,an._bounds=this._bounds,an.alpha=Zt,this.parent?this.updateTransform():(this.parent=Qt._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=an,this.containsPoint=an.containsPoint.bind(an)}},Vt.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},Vt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},Vt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,jt.default.removeFromCache(this._cacheData.textureCacheId),Wt.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Vt.prototype._cacheAsBitmapDestroy=function(Qt){this.cacheAsBitmap=!1,this.destroy(Qt)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":124}],139:[function(Bt){var Yt=function(Ht){if(Ht&&Ht.__esModule)return Ht;var Wt={};if(null!=Ht)for(var jt in Ht)Object.prototype.hasOwnProperty.call(Ht,jt)&&(Wt[jt]=Ht[jt]);return Wt.default=Ht,Wt}(Bt("../core"));Yt.DisplayObject.prototype.name=null,Yt.Container.prototype.getChildByName=function(Ht){for(var Wt=0;Wt<this.children.length;Wt++)if(this.children[Wt].name===Ht)return this.children[Wt];return null}},{"../core":65}],140:[function(Bt){var Yt=function(Ht){if(Ht&&Ht.__esModule)return Ht;var Wt={};if(null!=Ht)for(var jt in Ht)Object.prototype.hasOwnProperty.call(Ht,jt)&&(Wt[jt]=Ht[jt]);return Wt.default=Ht,Wt}(Bt("../core"));Yt.DisplayObject.prototype.getGlobalPosition=function(){var Ht=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Yt.Point,Wt=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,Ht,Wt):(Ht.x=this.position.x,Ht.y=this.position.y),Ht}},{"../core":65}],141:[function(Bt,Gt,Xt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0,Xt.BitmapText=Xt.TilingSpriteRenderer=Xt.TilingSprite=Xt.TextureTransform=Xt.AnimatedSprite=void 0;var Ht=Bt("./AnimatedSprite");Object.defineProperty(Xt,"AnimatedSprite",{enumerable:!0,get:function(){return Yt(Ht).default}});var Wt=Bt("./TextureTransform");Object.defineProperty(Xt,"TextureTransform",{enumerable:!0,get:function(){return Yt(Wt).default}});var jt=Bt("./TilingSprite");Object.defineProperty(Xt,"TilingSprite",{enumerable:!0,get:function(){return Yt(jt).default}});var zt=Bt("./webgl/TilingSpriteRenderer");Object.defineProperty(Xt,"TilingSpriteRenderer",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./BitmapText");Object.defineProperty(Xt,"BitmapText",{enumerable:!0,get:function(){return Yt(Vt).default}}),Bt("./cacheAsBitmap"),Bt("./getChildByName"),Bt("./getGlobalPosition")},{"./AnimatedSprite":134,"./BitmapText":135,"./TextureTransform":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("../../core")),Ht=Bt("../../core/const"),Wt=(Bt("path"),new Yt.Matrix),jt=function(zt){function Vt(qt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Kt=function(Qt,Jt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Qt}(this,zt.call(this,qt));return Kt.shader=null,Kt.simpleShader=null,Kt.quad=null,Kt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.onContextChange=function(){var qt=this.renderer.gl;this.shader=new Yt.Shader(qt,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new Yt.Shader(qt,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new Yt.Quad(qt,this.renderer.state.attribState),this.quad.initVao(this.shader)},Vt.prototype.render=function(qt){var Kt=this.renderer,Qt=this.quad;Kt.bindVao(Qt.vao);var Jt=Qt.vertices;Jt[0]=Jt[6]=qt._width*-qt.anchor.x,Jt[1]=Jt[3]=qt._height*-qt.anchor.y,Jt[2]=Jt[4]=qt._width*(1-qt.anchor.x),Jt[5]=Jt[7]=qt._height*(1-qt.anchor.y),qt.uvRespectAnchor&&((Jt=Qt.uvs)[0]=Jt[6]=-qt.anchor.x,Jt[1]=Jt[3]=-qt.anchor.y,Jt[2]=Jt[4]=1-qt.anchor.x,Jt[5]=Jt[7]=1-qt.anchor.y),Qt.upload();var Zt=qt._texture,$t=Zt.baseTexture,en=qt.tileTransform.localTransform,tn=qt.uvTransform,nn=$t.isPowerOfTwo&&Zt.frame.width===$t.width&&Zt.frame.height===$t.height;nn&&($t._glTextures[Kt.CONTEXT_UID]?nn=$t.wrapMode!==Ht.WRAP_MODES.CLAMP:$t.wrapMode===Ht.WRAP_MODES.CLAMP&&($t.wrapMode=Ht.WRAP_MODES.REPEAT));var an=nn?this.simpleShader:this.shader;Kt.bindShader(an);var rn=Zt.width,on=Zt.height,sn=qt._width,dn=qt._height;Wt.set(en.a*rn/sn,en.b*rn/dn,en.c*on/sn,en.d*on/dn,en.tx/sn,en.ty/dn),Wt.invert(),nn?Wt.prepend(tn.mapCoord):(an.uniforms.uMapCoord=tn.mapCoord.toArray(!0),an.uniforms.uClampFrame=tn.uClampFrame,an.uniforms.uClampOffset=tn.uClampOffset),an.uniforms.uTransform=Wt.toArray(!0),an.uniforms.uColor=Yt.utils.premultiplyTintToRgba(qt.tint,qt.worldAlpha,an.uniforms.uColor,$t.premultipliedAlpha),an.uniforms.translationMatrix=qt.transform.worldTransform.toArray(!0),an.uniforms.uSampler=Kt.bindTexture(Zt),Kt.setBlendMode(Yt.utils.correctBlendMode(qt.blendMode,$t.premultipliedAlpha)),Qt.vao.draw(this.renderer.gl.TRIANGLES,6,0)},Vt}(Yt.ObjectRenderer);Xt.default=jt,Yt.WebGLRenderer.registerPlugin("tilingSprite",jt)},{"../../core":65,"../../core/const":46,path:23}],143:[function(Bt,Gt,Xt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Ht=function(){function qt(Kt,Qt){for(var Jt=0,Zt;Jt<Qt.length;Jt++)Zt=Qt[Jt],Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Kt,Zt.key,Zt)}return function(Kt,Qt,Jt){return Qt&&qt(Kt.prototype,Qt),Jt&&qt(Kt,Jt),Kt}}(),Wt=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Qt in qt)Object.prototype.hasOwnProperty.call(qt,Qt)&&(Kt[Qt]=qt[Qt]);return Kt.default=qt,Kt}(Bt("../../core")),jt=Yt(Bt("./BlurXFilter")),zt=Yt(Bt("./BlurYFilter")),Vt=function(qt){function Kt(Qt,Jt,Zt,$t){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Kt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,qt.call(this));return en.blurXFilter=new jt.default(Qt,Jt,Zt,$t),en.blurYFilter=new zt.default(Qt,Jt,Zt,$t),en.padding=0,en.resolution=Zt||Wt.settings.RESOLUTION,en.quality=Jt||4,en.blur=Qt||8,en}return function(Qt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Qt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Jt):Qt.__proto__=Jt)}(Kt,qt),Kt.prototype.apply=function(Qt,Jt,Zt){var $t=Qt.getRenderTarget(!0);this.blurXFilter.apply(Qt,Jt,$t,!0),this.blurYFilter.apply(Qt,$t,Zt,!1),Qt.returnRenderTarget($t)},Ht(Kt,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(Qt){this.blurXFilter.blur=this.blurYFilter.blur=Qt,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(Qt){this.blurXFilter.quality=this.blurYFilter.quality=Qt}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(Qt){this.blurXFilter.blur=Qt,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(Qt){this.blurYFilter.blur=Qt,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(Qt){this.blurYFilter._blendMode=Qt}}]),Kt}(Wt.Filter);Xt.default=Vt},{"../../core":65,"./BlurXFilter":144,"./BlurYFilter":145}],144:[function(Bt,Gt,Xt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Ht=function(){function Kt(Qt,Jt){for(var Zt=0,$t;Zt<Jt.length;Zt++)$t=Jt[Zt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qt,$t.key,$t)}return function(Qt,Jt,Zt){return Jt&&Kt(Qt.prototype,Jt),Zt&&Kt(Qt,Zt),Qt}}(),Wt=function(Kt){if(Kt&&Kt.__esModule)return Kt;var Qt={};if(null!=Kt)for(var Jt in Kt)Object.prototype.hasOwnProperty.call(Kt,Jt)&&(Qt[Jt]=Kt[Jt]);return Qt.default=Kt,Qt}(Bt("../../core")),jt=Yt(Bt("./generateBlurVertSource")),zt=Yt(Bt("./generateBlurFragSource")),Vt=Yt(Bt("./getMaxBlurKernelSize")),qt=function(Kt){function Qt(Jt,Zt,$t,en){!function(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}(this,Qt),en=en||5;var tn=(0,jt.default)(en,!0),nn=(0,zt.default)(en),an=function(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:rn}(this,Kt.call(this,tn,nn));return an.resolution=$t||Wt.settings.RESOLUTION,an._quality=0,an.quality=Zt||4,an.strength=Jt||8,an.firstRun=!0,an}return function(Jt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Jt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Jt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Jt,Zt):Jt.__proto__=Zt)}(Qt,Kt),Qt.prototype.apply=function(Jt,Zt,$t,en){if(this.firstRun){var tn=Jt.renderer.gl,nn=(0,Vt.default)(tn);this.vertexSrc=(0,jt.default)(nn,!0),this.fragmentSrc=(0,zt.default)(nn),this.firstRun=!1}if(this.uniforms.strength=1/$t.size.width*($t.size.width/Zt.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)Jt.applyFilter(this,Zt,$t,en);else{for(var an=Jt.getRenderTarget(!0),rn=Zt,on=an,sn=0;sn<this.passes-1;sn++){Jt.applyFilter(this,rn,on,!0);var dn=on;on=rn,rn=dn}Jt.applyFilter(this,rn,$t,en),Jt.returnRenderTarget(an)}},Ht(Qt,[{key:"blur",get:function(){return this.strength},set:function(Jt){this.padding=2*Math.abs(Jt),this.strength=Jt}},{key:"quality",get:function(){return this._quality},set:function(Jt){this._quality=Jt,this.passes=Jt}}]),Qt}(Wt.Filter);Xt.default=qt},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],145:[function(Bt,Gt,Xt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Ht=function(){function Kt(Qt,Jt){for(var Zt=0,$t;Zt<Jt.length;Zt++)$t=Jt[Zt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qt,$t.key,$t)}return function(Qt,Jt,Zt){return Jt&&Kt(Qt.prototype,Jt),Zt&&Kt(Qt,Zt),Qt}}(),Wt=function(Kt){if(Kt&&Kt.__esModule)return Kt;var Qt={};if(null!=Kt)for(var Jt in Kt)Object.prototype.hasOwnProperty.call(Kt,Jt)&&(Qt[Jt]=Kt[Jt]);return Qt.default=Kt,Qt}(Bt("../../core")),jt=Yt(Bt("./generateBlurVertSource")),zt=Yt(Bt("./generateBlurFragSource")),Vt=Yt(Bt("./getMaxBlurKernelSize")),qt=function(Kt){function Qt(Jt,Zt,$t,en){!function(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}(this,Qt),en=en||5;var tn=(0,jt.default)(en,!1),nn=(0,zt.default)(en),an=function(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:rn}(this,Kt.call(this,tn,nn));return an.resolution=$t||Wt.settings.RESOLUTION,an._quality=0,an.quality=Zt||4,an.strength=Jt||8,an.firstRun=!0,an}return function(Jt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Jt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Jt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Jt,Zt):Jt.__proto__=Zt)}(Qt,Kt),Qt.prototype.apply=function(Jt,Zt,$t,en){if(this.firstRun){var tn=Jt.renderer.gl,nn=(0,Vt.default)(tn);this.vertexSrc=(0,jt.default)(nn,!1),this.fragmentSrc=(0,zt.default)(nn),this.firstRun=!1}if(this.uniforms.strength=1/$t.size.height*($t.size.height/Zt.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)Jt.applyFilter(this,Zt,$t,en);else{for(var an=Jt.getRenderTarget(!0),rn=Zt,on=an,sn=0;sn<this.passes-1;sn++){Jt.applyFilter(this,rn,on,!0);var dn=on;on=rn,rn=dn}Jt.applyFilter(this,rn,$t,en),Jt.returnRenderTarget(an)}},Ht(Qt,[{key:"blur",get:function(){return this.strength},set:function(Jt){this.padding=2*Math.abs(Jt),this.strength=Jt}},{key:"quality",get:function(){return this._quality},set:function(Jt){this._quality=Jt,this.passes=Jt}}]),Qt}(Wt.Filter);Xt.default=qt},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],146:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt){for(var jt=Yt[Wt],zt=jt.length,Vt=Ht,qt="",Kt=void 0,Qt=0,Jt;Qt<Wt;Qt++)Jt="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",Qt),Kt=Qt,Qt>=zt&&(Kt=Wt-Qt-1),qt+=Jt=Jt.replace("%value%",jt[Kt]),qt+="\n";return Vt=Vt.replace("%blur%",qt),Vt=Vt.replace("%size%",Wt)};var Yt={5:[0.153388,0.221461,0.250301],7:[0.071303,0.131514,0.189879,0.214607],9:[0.028532,0.067234,0.124009,0.179044,0.20236],11:[0.0093,0.028002,0.065984,0.121703,0.175713,0.198596],13:[0.002406,0.009255,0.027867,0.065666,0.121117,0.174868,0.197641],15:[0.000489,0.002403,0.009246,0.02784,0.065602,0.120999,0.174697,0.197448]},Ht=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],147:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Ht,Wt){var jt=Math.ceil(Ht/2),zt=Yt,Vt="",qt;qt=Wt?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var Kt=0,Qt;Kt<Ht;Kt++)Qt=qt.replace("%index%",Kt),Vt+=Qt=Qt.replace("%sampleIndex%",Kt-(jt-1)+".0"),Vt+="\n";return zt=zt.replace("%blur%",Vt),zt=zt.replace("%size%",Ht)};var Yt=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],148:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Yt){for(var Ht=Yt.getParameter(Yt.MAX_VARYING_VECTORS),Wt=15;Wt>Ht;)Wt-=2;return Wt}},{}],149:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Wt=(Bt("path"),function(jt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,jt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return Vt.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Vt.alpha=1,Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype._loadMatrix=function(Vt){var qt=Vt;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(qt,this.uniforms.m,Vt),qt=this._colorMatrix(qt)),this.uniforms.m=qt},zt.prototype._multiply=function(Vt,qt,Kt){return Vt[0]=qt[0]*Kt[0]+qt[1]*Kt[5]+qt[2]*Kt[10]+qt[3]*Kt[15],Vt[1]=qt[0]*Kt[1]+qt[1]*Kt[6]+qt[2]*Kt[11]+qt[3]*Kt[16],Vt[2]=qt[0]*Kt[2]+qt[1]*Kt[7]+qt[2]*Kt[12]+qt[3]*Kt[17],Vt[3]=qt[0]*Kt[3]+qt[1]*Kt[8]+qt[2]*Kt[13]+qt[3]*Kt[18],Vt[4]=qt[0]*Kt[4]+qt[1]*Kt[9]+qt[2]*Kt[14]+qt[3]*Kt[19]+qt[4],Vt[5]=qt[5]*Kt[0]+qt[6]*Kt[5]+qt[7]*Kt[10]+qt[8]*Kt[15],Vt[6]=qt[5]*Kt[1]+qt[6]*Kt[6]+qt[7]*Kt[11]+qt[8]*Kt[16],Vt[7]=qt[5]*Kt[2]+qt[6]*Kt[7]+qt[7]*Kt[12]+qt[8]*Kt[17],Vt[8]=qt[5]*Kt[3]+qt[6]*Kt[8]+qt[7]*Kt[13]+qt[8]*Kt[18],Vt[9]=qt[5]*Kt[4]+qt[6]*Kt[9]+qt[7]*Kt[14]+qt[8]*Kt[19]+qt[9],Vt[10]=qt[10]*Kt[0]+qt[11]*Kt[5]+qt[12]*Kt[10]+qt[13]*Kt[15],Vt[11]=qt[10]*Kt[1]+qt[11]*Kt[6]+qt[12]*Kt[11]+qt[13]*Kt[16],Vt[12]=qt[10]*Kt[2]+qt[11]*Kt[7]+qt[12]*Kt[12]+qt[13]*Kt[17],Vt[13]=qt[10]*Kt[3]+qt[11]*Kt[8]+qt[12]*Kt[13]+qt[13]*Kt[18],Vt[14]=qt[10]*Kt[4]+qt[11]*Kt[9]+qt[12]*Kt[14]+qt[13]*Kt[19]+qt[14],Vt[15]=qt[15]*Kt[0]+qt[16]*Kt[5]+qt[17]*Kt[10]+qt[18]*Kt[15],Vt[16]=qt[15]*Kt[1]+qt[16]*Kt[6]+qt[17]*Kt[11]+qt[18]*Kt[16],Vt[17]=qt[15]*Kt[2]+qt[16]*Kt[7]+qt[17]*Kt[12]+qt[18]*Kt[17],Vt[18]=qt[15]*Kt[3]+qt[16]*Kt[8]+qt[17]*Kt[13]+qt[18]*Kt[18],Vt[19]=qt[15]*Kt[4]+qt[16]*Kt[9]+qt[17]*Kt[14]+qt[18]*Kt[19]+qt[19],Vt},zt.prototype._colorMatrix=function(Vt){var qt=new Float32Array(Vt);return qt[4]/=255,qt[9]/=255,qt[14]/=255,qt[19]/=255,qt},zt.prototype.brightness=function(Vt,qt){this._loadMatrix([Vt,0,0,0,0,0,Vt,0,0,0,0,0,Vt,0,0,0,0,0,1,0],qt)},zt.prototype.greyscale=function(Vt,qt){this._loadMatrix([Vt,Vt,Vt,0,0,Vt,Vt,Vt,0,0,Vt,Vt,Vt,0,0,0,0,0,1,0],qt)},zt.prototype.blackAndWhite=function(Vt){this._loadMatrix([0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0,0,0,1,0],Vt)},zt.prototype.hue=function(Vt,qt){Vt=(Vt||0)/180*Math.PI;var Kt=Math.cos(Vt),Qt=Math.sin(Vt),Jt=(0,Math.sqrt)(1/3);this._loadMatrix([Kt+1/3*(1-Kt),1/3*(1-Kt)-Jt*Qt,1/3*(1-Kt)+Jt*Qt,0,0,1/3*(1-Kt)+Jt*Qt,Kt+1/3*(1-Kt),1/3*(1-Kt)-Jt*Qt,0,0,1/3*(1-Kt)-Jt*Qt,1/3*(1-Kt)+Jt*Qt,Kt+1/3*(1-Kt),0,0,0,0,0,1,0],qt)},zt.prototype.contrast=function(Vt,qt){var Kt=(Vt||0)+1,Qt=-.5*(Kt-1);this._loadMatrix([Kt,0,0,0,Qt,0,Kt,0,0,Qt,0,0,Kt,0,Qt,0,0,0,1,0],qt)},zt.prototype.saturate=function(){var Vt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,qt=arguments[1],Kt=2*Vt/3+1,Qt=-.5*(Kt-1);this._loadMatrix([Kt,Qt,Qt,0,0,Qt,Kt,Qt,0,0,Qt,Qt,Kt,0,0,0,0,0,1,0],qt)},zt.prototype.desaturate=function(){this.saturate(-1)},zt.prototype.negative=function(Vt){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],Vt)},zt.prototype.sepia=function(Vt){this._loadMatrix([0.393,0.7689999,0.18899999,0,0,0.349,0.6859999,0.16799999,0,0,0.272,0.5339999,0.13099999,0,0,0,0,0,1,0],Vt)},zt.prototype.technicolor=function(Vt){this._loadMatrix([1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],Vt)},zt.prototype.polaroid=function(Vt){this._loadMatrix([1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0],Vt)},zt.prototype.toBGR=function(Vt){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],Vt)},zt.prototype.kodachrome=function(Vt){this._loadMatrix([1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],Vt)},zt.prototype.browni=function(Vt){this._loadMatrix([0.5997023498159715,0.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,0.8609577587992641,0.15059552388459913,0,-36.96841498319127,0.24113635128153335,-0.07441037908422492,0.44972182064877153,0,-7.562075277591283,0,0,0,1,0],Vt)},zt.prototype.vintage=function(Vt){this._loadMatrix([0.6279345635605994,0.3202183420819367,-0.03965408211312453,0,9.651285835294123,0.02578397704808868,0.6441188644374771,0.03259127616149294,0,7.462829176470591,0.0466055556782719,-0.0851232987247891,0.5241648018700465,0,5.159190588235296,0,0,0,1,0],Vt)},zt.prototype.colorTone=function(Vt,qt,Kt,Qt,Jt){Vt=Vt||.2,qt=qt||.15;var Zt=(255&(Kt=Kt||16770432)>>16)/255,$t=(255&Kt>>8)/255,en=(255&Kt)/255,tn=(255&(Qt=Qt||3375104)>>16)/255,nn=(255&Qt>>8)/255,an=(255&Qt)/255,rn=[.3,.59,.11,0,0,Zt,$t,en,Vt,0,tn,nn,an,qt,0,Zt-tn,$t-nn,en-an,0,0];this._loadMatrix(rn,Jt)},zt.prototype.night=function(Vt,qt){var Kt=[-2*(Vt=Vt||.1),-Vt,0,0,0,-Vt,0,Vt,0,0,0,Vt,2*Vt,0,0,0,0,0,1,0];this._loadMatrix(Kt,qt)},zt.prototype.predator=function(Vt,qt){this._loadMatrix([11.224130630493164*Vt,-4.794486999511719*Vt,-2.8746118545532227*Vt,0*Vt,.40342438220977783*Vt,-3.6330697536468506*Vt,9.193157196044922*Vt,-2.951810836791992*Vt,0*Vt,-1.316135048866272*Vt,-3.2184197902679443*Vt,-4.2375030517578125*Vt,7.476448059082031*Vt,0*Vt,.8044459223747253*Vt,0,0,0,1,0],qt)},zt.prototype.lsd=function(Vt){this._loadMatrix([2,-0.4,0.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0],Vt)},zt.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Yt(zt,[{key:"matrix",get:function(){return this.uniforms.m},set:function(Vt){this.uniforms.m=Vt}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(Vt){this.uniforms.uAlpha=Vt}}]),zt}(Ht.Filter));Xt.default=Wt,Wt.prototype.grayscale=Wt.prototype.greyscale},{"../../core":65,path:23}],150:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Wt=(Bt("path"),function(jt){function zt(Vt,qt){!function(Jt,Zt){if(!(Jt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=new Ht.Matrix;Vt.renderable=!1;var Qt=function(Jt,Zt){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&("object"==typeof Zt||"function"==typeof Zt)?Zt:Jt}(this,jt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return Qt.maskSprite=Vt,Qt.maskMatrix=Kt,Qt.uniforms.mapSampler=Vt._texture,Qt.uniforms.filterMatrix=Kt,Qt.uniforms.scale={x:1,y:1},null!==qt&&void 0!==qt||(qt=20),Qt.scale=new Ht.Point(qt,qt),Qt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.apply=function(Vt,qt,Kt){var Qt=1/Kt.destinationFrame.width*(Kt.size.width/qt.size.width);this.uniforms.filterMatrix=Vt.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*Qt,this.uniforms.scale.y=this.scale.y*Qt,Vt.applyFilter(this,qt,Kt)},Yt(zt,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(Vt){this.uniforms.mapSampler=Vt}}]),zt}(Ht.Filter));Xt.default=Wt},{"../../core":65,path:23}],151:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Wt){if(Wt&&Wt.__esModule)return Wt;var jt={};if(null!=Wt)for(var zt in Wt)Object.prototype.hasOwnProperty.call(Wt,zt)&&(jt[zt]=Wt[zt]);return jt.default=Wt,jt}(Bt("../../core")),Ht=(Bt("path"),function(Wt){function jt(){return function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,jt),function(zt,Vt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&("object"==typeof Vt||"function"==typeof Vt)?Vt:zt}(this,Wt.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}","varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it's\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n"))}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(jt,Wt),jt}(Yt.Filter));Xt.default=Ht},{"../../core":65,path:23}],152:[function(Bt,Gt,Xt){function Yt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Xt.__esModule=!0;var Ht=Bt("./fxaa/FXAAFilter");Object.defineProperty(Xt,"FXAAFilter",{enumerable:!0,get:function(){return Yt(Ht).default}});var Wt=Bt("./noise/NoiseFilter");Object.defineProperty(Xt,"NoiseFilter",{enumerable:!0,get:function(){return Yt(Wt).default}});var jt=Bt("./displacement/DisplacementFilter");Object.defineProperty(Xt,"DisplacementFilter",{enumerable:!0,get:function(){return Yt(jt).default}});var zt=Bt("./blur/BlurFilter");Object.defineProperty(Xt,"BlurFilter",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./blur/BlurXFilter");Object.defineProperty(Xt,"BlurXFilter",{enumerable:!0,get:function(){return Yt(Vt).default}});var qt=Bt("./blur/BlurYFilter");Object.defineProperty(Xt,"BlurYFilter",{enumerable:!0,get:function(){return Yt(qt).default}});var Kt=Bt("./colormatrix/ColorMatrixFilter");Object.defineProperty(Xt,"ColorMatrixFilter",{enumerable:!0,get:function(){return Yt(Kt).default}});var Qt=Bt("./void/VoidFilter");Object.defineProperty(Xt,"VoidFilter",{enumerable:!0,get:function(){return Yt(Qt).default}})},{"./blur/BlurFilter":143,"./blur/BlurXFilter":144,"./blur/BlurYFilter":145,"./colormatrix/ColorMatrixFilter":149,"./displacement/DisplacementFilter":150,"./fxaa/FXAAFilter":151,"./noise/NoiseFilter":153,"./void/VoidFilter":154}],153:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Wt=(Bt("path"),function(jt){function zt(){var Vt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,qt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=function(Qt,Jt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Qt}(this,jt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return Kt.noise=Vt,Kt.seed=qt,Kt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),Yt(zt,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(Vt){this.uniforms.uNoise=Vt}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(Vt){this.uniforms.uSeed=Vt}}]),zt}(Ht.Filter));Xt.default=Wt},{"../../core":65,path:23}],154:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Wt){if(Wt&&Wt.__esModule)return Wt;var jt={};if(null!=Wt)for(var zt in Wt)Object.prototype.hasOwnProperty.call(Wt,zt)&&(jt[zt]=Wt[zt]);return jt.default=Wt,jt}(Bt("../../core")),Ht=(Bt("path"),function(Wt){function jt(){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt);var zt=function(Vt,qt){if(!Vt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return qt&&("object"==typeof qt||"function"==typeof qt)?qt:Vt}(this,Wt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return zt.glShaderKey="void",zt}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(jt,Wt),jt}(Yt.Filter));Xt.default=Ht},{"../../core":65,path:23}],155:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../core")),Wt=function(){function jt(){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.global=new Ht.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return jt.prototype.getLocalPosition=function(zt,Vt,qt){return zt.worldTransform.applyInverse(qt||this.global,Vt)},jt.prototype._copyEvent=function(zt){zt.isPrimary&&(this.isPrimary=!0),this.button=zt.button,this.buttons=zt.buttons,this.width=zt.width,this.height=zt.height,this.tiltX=zt.tiltX,this.tiltY=zt.tiltY,this.pointerType=zt.pointerType,this.pressure=zt.pressure,this.rotationAngle=zt.rotationAngle,this.twist=zt.twist||0,this.tangentialPressure=zt.tangentialPressure||0},jt.prototype._reset=function(){this.isPrimary=!1},Yt(jt,[{key:"pointerId",get:function(){return this.identifier}}]),jt}();Xt.default=Wt},{"../core":65}],156:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Ht(){!function(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return Ht.prototype.stopPropagation=function(){this.stopped=!0},Ht.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},Ht}();Xt.default=Yt},{}],157:[function(Bt,Gt,Xt){function Yt($t){return $t&&$t.__esModule?$t:{default:$t}}Xt.__esModule=!0;var Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($t){return typeof $t}:function($t){return $t&&"function"==typeof Symbol&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Wt=function($t){if($t&&$t.__esModule)return $t;var en={};if(null!=$t)for(var tn in $t)Object.prototype.hasOwnProperty.call($t,tn)&&(en[tn]=$t[tn]);return en.default=$t,en}(Bt("../core")),jt=Yt(Bt("./InteractionData")),zt=Yt(Bt("./InteractionEvent")),Vt=Yt(Bt("./InteractionTrackingData")),qt=Yt(Bt("eventemitter3")),Kt=Yt(Bt("./interactiveTarget"));Wt.utils.mixins.delayMixin(Wt.DisplayObject.prototype,Kt.default);var Qt="MOUSE",Jt={target:null,data:{global:null}},Zt=function($t){function en(tn,nn){!function(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}(this,en);var an=function(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:rn}(this,$t.call(this));return nn=nn||{},an.renderer=tn,an.autoPreventDefault=void 0===nn.autoPreventDefault||nn.autoPreventDefault,an.interactionFrequency=nn.interactionFrequency||10,an.mouse=new jt.default,an.mouse.identifier=Qt,an.mouse.global.set(-999999),an.activeInteractionData={},an.activeInteractionData[Qt]=an.mouse,an.interactionDataPool=[],an.eventData=new zt.default,an.interactionDOMElement=null,an.moveWhenInside=!1,an.eventsAdded=!1,an.mouseOverRenderer=!1,an.supportsTouchEvents="ontouchstart"in window,an.supportsPointerEvents=!!window.PointerEvent,an.onPointerUp=an.onPointerUp.bind(an),an.processPointerUp=an.processPointerUp.bind(an),an.onPointerCancel=an.onPointerCancel.bind(an),an.processPointerCancel=an.processPointerCancel.bind(an),an.onPointerDown=an.onPointerDown.bind(an),an.processPointerDown=an.processPointerDown.bind(an),an.onPointerMove=an.onPointerMove.bind(an),an.processPointerMove=an.processPointerMove.bind(an),an.onPointerOut=an.onPointerOut.bind(an),an.processPointerOverOut=an.processPointerOverOut.bind(an),an.onPointerOver=an.onPointerOver.bind(an),an.cursorStyles={default:"inherit",pointer:"pointer"},an.currentCursorMode=null,an.cursor=null,an._tempPoint=new Wt.Point,an.resolution=1,an.setTargetElement(an.renderer.view,an.renderer.resolution),an}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.hitTest=function(tn,nn){return Jt.target=null,Jt.data.global=tn,nn||(nn=this.renderer._lastObjectRendered),this.processInteractive(Jt,nn,null,!0),Jt.target},en.prototype.setTargetElement=function(tn){var nn=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=tn,this.resolution=nn,this.addEvents()},en.prototype.addEvents=function(){this.interactionDOMElement&&(Wt.ticker.shared.add(this.update,this,Wt.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},en.prototype.removeEvents=function(){this.interactionDOMElement&&(Wt.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},en.prototype.update=function(tn){if(this._deltaTime+=tn,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var nn in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(nn)){var an=this.activeInteractionData[nn];if(an.originalEvent&&"touch"!==an.pointerType){var rn=this.configureInteractionEventForDOMEvent(this.eventData,an.originalEvent,an);this.processInteractive(rn,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},en.prototype.setCursorMode=function(tn){if(tn=tn||"default",this.currentCursorMode!==tn){this.currentCursorMode=tn;var nn=this.cursorStyles[tn];if(nn)switch(void 0===nn?"undefined":Ht(nn)){case"string":this.interactionDOMElement.style.cursor=nn;break;case"function":nn(tn);break;case"object":Object.assign(this.interactionDOMElement.style,nn);}else"string"!=typeof tn||Object.prototype.hasOwnProperty.call(this.cursorStyles,tn)||(this.interactionDOMElement.style.cursor=tn)}},en.prototype.dispatchEvent=function(tn,nn,an){an.stopped||(an.currentTarget=tn,an.type=nn,tn.emit(nn,an),tn[nn]&&tn[nn](an))},en.prototype.mapPositionToPoint=function(tn,nn,an){var rn=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var on=navigator.isCocoonJS?this.resolution:1/this.resolution;tn.x=(nn-rn.left)*(this.interactionDOMElement.width/rn.width)*on,tn.y=(an-rn.top)*(this.interactionDOMElement.height/rn.height)*on},en.prototype.processInteractive=function(tn,nn,an,rn,on){if(!nn||!nn.visible)return!1;var sn=tn.data.global,dn=!1,ln=on=nn.interactive||on;if(nn.hitArea?ln=!1:rn&&nn._mask&&(nn._mask.containsPoint(sn)||(rn=!1)),nn.interactiveChildren&&nn.children)for(var un=nn.children,pn=un.length-1;0<=pn;pn--){var cn=un[pn],hn=this.processInteractive(tn,cn,an,rn,ln);if(hn){if(!cn.parent)continue;ln=!1,hn&&(tn.target&&(rn=!1),dn=!0)}}return on&&(rn&&!tn.target&&(nn.hitArea?(nn.worldTransform.applyInverse(sn,this._tempPoint),nn.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(dn=!0)):nn.containsPoint&&nn.containsPoint(sn)&&(dn=!0)),nn.interactive&&(dn&&!tn.target&&(tn.target=nn),an&&an(tn,nn,!!dn))),dn},en.prototype.onPointerDown=function(tn){if(!this.supportsTouchEvents||"touch"!==tn.pointerType){var nn=this.normalizeToPointerData(tn);this.autoPreventDefault&&nn[0].isNormalized&&tn.preventDefault();for(var an=nn.length,rn=0;rn<an;rn++){var on=nn[rn],sn=this.getInteractionDataForPointerId(on),dn=this.configureInteractionEventForDOMEvent(this.eventData,on,sn);if(dn.data.originalEvent=tn,this.processInteractive(dn,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",dn),"touch"===on.pointerType)this.emit("touchstart",dn);else if("mouse"===on.pointerType||"pen"===on.pointerType){var ln=2===on.button;this.emit(ln?"rightdown":"mousedown",this.eventData)}}}},en.prototype.processPointerDown=function(tn,nn,an){var rn=tn.data,on=tn.data.identifier;if(an)if(nn.trackedPointers[on]||(nn.trackedPointers[on]=new Vt.default(on)),this.dispatchEvent(nn,"pointerdown",tn),"touch"===rn.pointerType)this.dispatchEvent(nn,"touchstart",tn);else if("mouse"===rn.pointerType||"pen"===rn.pointerType){var sn=2===rn.button;sn?nn.trackedPointers[on].rightDown=!0:nn.trackedPointers[on].leftDown=!0,this.dispatchEvent(nn,sn?"rightdown":"mousedown",tn)}},en.prototype.onPointerComplete=function(tn,nn,an){for(var rn=this.normalizeToPointerData(tn),on=rn.length,sn=tn.target===this.interactionDOMElement?"":"outside",dn=0;dn<on;dn++){var ln=rn[dn],un=this.getInteractionDataForPointerId(ln),pn=this.configureInteractionEventForDOMEvent(this.eventData,ln,un);if(pn.data.originalEvent=tn,this.processInteractive(pn,this.renderer._lastObjectRendered,an,nn||!sn),this.emit(nn?"pointercancel":"pointerup"+sn,pn),"mouse"===ln.pointerType||"pen"===ln.pointerType){var cn=2===ln.button;this.emit(cn?"rightup"+sn:"mouseup"+sn,pn)}else"touch"===ln.pointerType&&(this.emit(nn?"touchcancel":"touchend"+sn,pn),this.releaseInteractionDataForPointerId(ln.pointerId,un))}},en.prototype.onPointerCancel=function(tn){this.supportsTouchEvents&&"touch"===tn.pointerType||this.onPointerComplete(tn,!0,this.processPointerCancel)},en.prototype.processPointerCancel=function(tn,nn){var an=tn.data,rn=tn.data.identifier;void 0!==nn.trackedPointers[rn]&&(delete nn.trackedPointers[rn],this.dispatchEvent(nn,"pointercancel",tn),"touch"===an.pointerType&&this.dispatchEvent(nn,"touchcancel",tn))},en.prototype.onPointerUp=function(tn){this.supportsTouchEvents&&"touch"===tn.pointerType||this.onPointerComplete(tn,!1,this.processPointerUp)},en.prototype.processPointerUp=function(tn,nn,an){var rn=tn.data,on=tn.data.identifier,sn=nn.trackedPointers[on],dn="touch"===rn.pointerType;if("mouse"===rn.pointerType||"pen"===rn.pointerType){var ln=2===rn.button,un=Vt.default.FLAGS,pn=ln?un.RIGHT_DOWN:un.LEFT_DOWN,cn=void 0!==sn&&sn.flags&pn;an?(this.dispatchEvent(nn,ln?"rightup":"mouseup",tn),cn&&this.dispatchEvent(nn,ln?"rightclick":"click",tn)):cn&&this.dispatchEvent(nn,ln?"rightupoutside":"mouseupoutside",tn),sn&&(ln?sn.rightDown=!1:sn.leftDown=!1)}an?(this.dispatchEvent(nn,"pointerup",tn),dn&&this.dispatchEvent(nn,"touchend",tn),sn&&(this.dispatchEvent(nn,"pointertap",tn),dn&&(this.dispatchEvent(nn,"tap",tn),sn.over=!1))):sn&&(this.dispatchEvent(nn,"pointerupoutside",tn),dn&&this.dispatchEvent(nn,"touchendoutside",tn)),sn&&sn.none&&delete nn.trackedPointers[on]},en.prototype.onPointerMove=function(tn){if(!this.supportsTouchEvents||"touch"!==tn.pointerType){var nn=this.normalizeToPointerData(tn);"mouse"===nn[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var an=nn.length,rn=0;rn<an;rn++){var on=nn[rn],sn=this.getInteractionDataForPointerId(on),dn=this.configureInteractionEventForDOMEvent(this.eventData,on,sn);dn.data.originalEvent=tn;var ln="touch"!==on.pointerType||this.moveWhenInside;this.processInteractive(dn,this.renderer._lastObjectRendered,this.processPointerMove,ln),this.emit("pointermove",dn),"touch"===on.pointerType&&this.emit("touchmove",dn),"mouse"!==on.pointerType&&"pen"!==on.pointerType||this.emit("mousemove",dn)}"mouse"===nn[0].pointerType&&this.setCursorMode(this.cursor)}},en.prototype.processPointerMove=function(tn,nn,an){var rn=tn.data,on="touch"===rn.pointerType,sn="mouse"===rn.pointerType||"pen"===rn.pointerType;sn&&this.processPointerOverOut(tn,nn,an),this.moveWhenInside&&!an||(this.dispatchEvent(nn,"pointermove",tn),on&&this.dispatchEvent(nn,"touchmove",tn),sn&&this.dispatchEvent(nn,"mousemove",tn))},en.prototype.onPointerOut=function(tn){if(!this.supportsTouchEvents||"touch"!==tn.pointerType){var nn=this.normalizeToPointerData(tn)[0];"mouse"===nn.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var an=this.getInteractionDataForPointerId(nn),rn=this.configureInteractionEventForDOMEvent(this.eventData,nn,an);rn.data.originalEvent=nn,this.processInteractive(rn,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",rn),"mouse"===nn.pointerType||"pen"===nn.pointerType?this.emit("mouseout",rn):this.releaseInteractionDataForPointerId(an.identifier)}},en.prototype.processPointerOverOut=function(tn,nn,an){var rn=tn.data,on=tn.data.identifier,sn="mouse"===rn.pointerType||"pen"===rn.pointerType,dn=nn.trackedPointers[on];an&&!dn&&(dn=nn.trackedPointers[on]=new Vt.default(on)),void 0!==dn&&(an&&this.mouseOverRenderer?(dn.over||(dn.over=!0,this.dispatchEvent(nn,"pointerover",tn),sn&&this.dispatchEvent(nn,"mouseover",tn)),sn&&null===this.cursor&&(this.cursor=nn.cursor)):dn.over&&(dn.over=!1,this.dispatchEvent(nn,"pointerout",this.eventData),sn&&this.dispatchEvent(nn,"mouseout",tn),dn.none&&delete nn.trackedPointers[on]))},en.prototype.onPointerOver=function(tn){var nn=this.normalizeToPointerData(tn)[0],an=this.getInteractionDataForPointerId(nn),rn=this.configureInteractionEventForDOMEvent(this.eventData,nn,an);rn.data.originalEvent=nn,"mouse"===nn.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",rn),"mouse"!==nn.pointerType&&"pen"!==nn.pointerType||this.emit("mouseover",rn)},en.prototype.getInteractionDataForPointerId=function(tn){var nn=tn.pointerId,an;return nn===Qt||"mouse"===tn.pointerType?an=this.mouse:this.activeInteractionData[nn]?an=this.activeInteractionData[nn]:((an=this.interactionDataPool.pop()||new jt.default).identifier=nn,this.activeInteractionData[nn]=an),an._copyEvent(tn),an},en.prototype.releaseInteractionDataForPointerId=function(tn){var nn=this.activeInteractionData[tn];nn&&(delete this.activeInteractionData[tn],nn._reset(),this.interactionDataPool.push(nn))},en.prototype.configureInteractionEventForDOMEvent=function(tn,nn,an){return tn.data=an,this.mapPositionToPoint(an.global,nn.clientX,nn.clientY),navigator.isCocoonJS&&"touch"===nn.pointerType&&(an.global.x/=this.resolution,an.global.y/=this.resolution),"touch"===nn.pointerType&&(nn.globalX=an.global.x,nn.globalY=an.global.y),an.originalEvent=nn,tn._reset(),tn},en.prototype.normalizeToPointerData=function(tn){var nn=[];if(this.supportsTouchEvents&&tn instanceof TouchEvent)for(var an=0,rn=tn.changedTouches.length,on;an<rn;an++)on=tn.changedTouches[an],void 0===on.button&&(on.button=tn.touches.length?1:0),void 0===on.buttons&&(on.buttons=tn.touches.length?1:0),void 0===on.isPrimary&&(on.isPrimary=1===tn.touches.length&&"touchstart"===tn.type),void 0===on.width&&(on.width=on.radiusX||1),void 0===on.height&&(on.height=on.radiusY||1),void 0===on.tiltX&&(on.tiltX=0),void 0===on.tiltY&&(on.tiltY=0),void 0===on.pointerType&&(on.pointerType="touch"),void 0===on.pointerId&&(on.pointerId=on.identifier||0),void 0===on.pressure&&(on.pressure=on.force||.5),on.twist=0,on.tangentialPressure=0,void 0===on.layerX&&(on.layerX=on.offsetX=on.clientX),void 0===on.layerY&&(on.layerY=on.offsetY=on.clientY),on.isNormalized=!0,nn.push(on);else!(tn instanceof MouseEvent)||this.supportsPointerEvents&&tn instanceof window.PointerEvent?nn.push(tn):(void 0===tn.isPrimary&&(tn.isPrimary=!0),void 0===tn.width&&(tn.width=1),void 0===tn.height&&(tn.height=1),void 0===tn.tiltX&&(tn.tiltX=0),void 0===tn.tiltY&&(tn.tiltY=0),void 0===tn.pointerType&&(tn.pointerType="mouse"),void 0===tn.pointerId&&(tn.pointerId=Qt),void 0===tn.pressure&&(tn.pressure=.5),tn.twist=0,tn.tangentialPressure=0,tn.isNormalized=!0,nn.push(tn));return nn},en.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},en}(qt.default);Xt.default=Zt,Wt.WebGLRenderer.registerPlugin("interaction",Zt),Wt.CanvasRenderer.registerPlugin("interaction",Zt)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Wt(jt,zt){for(var Vt=0,qt;Vt<zt.length;Vt++)qt=zt[Vt],qt.enumerable=qt.enumerable||!1,qt.configurable=!0,"value"in qt&&(qt.writable=!0),Object.defineProperty(jt,qt.key,qt)}return function(jt,zt,Vt){return zt&&Wt(jt.prototype,zt),Vt&&Wt(jt,Vt),jt}}(),Ht=function(){function Wt(jt){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this._pointerId=jt,this._flags=Wt.FLAGS.NONE}return Wt.prototype._doSet=function(jt,zt){this._flags=zt?this._flags|jt:this._flags&~jt},Yt(Wt,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(jt){this._flags=jt}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(jt){this._doSet(this.constructor.FLAGS.OVER,jt)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(jt){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,jt)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(jt){this._doSet(this.constructor.FLAGS.LEFT_DOWN,jt)}}]),Wt}();Xt.default=Ht,Ht.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(Bt,Gt,Xt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Ht=Bt("./InteractionData");Object.defineProperty(Xt,"InteractionData",{enumerable:!0,get:function(){return Yt(Ht).default}});var Wt=Bt("./InteractionManager");Object.defineProperty(Xt,"InteractionManager",{enumerable:!0,get:function(){return Yt(Wt).default}});var jt=Bt("./interactiveTarget");Object.defineProperty(Xt,"interactiveTarget",{enumerable:!0,get:function(){return Yt(jt).default}});var zt=Bt("./InteractionTrackingData");Object.defineProperty(Xt,"InteractionTrackingData",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./InteractionEvent");Object.defineProperty(Xt,"InteractionEvent",{enumerable:!0,get:function(){return Yt(Vt).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(Yt){Yt?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(Bt,Gt,Xt){function Yt(Vt,qt){Vt.bitmapFont=zt.BitmapText.registerFont(Vt.data,qt)}Xt.__esModule=!0,Xt.parse=Yt,Xt.default=function(){return function(Vt,qt){if(!(Vt.data&&Vt.type===jt.Resource.TYPE.XML))qt();else if(0!==Vt.data.getElementsByTagName("page").length&&0!==Vt.data.getElementsByTagName("info").length&&null!==Vt.data.getElementsByTagName("info")[0].getAttribute("face")){var Kt=Vt.isDataUrl?"":Ht.dirname(Vt.url);Vt.isDataUrl&&("."===Kt&&(Kt=""),this.baseUrl&&Kt&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(Kt+="/")),(Kt=Kt.replace(this.baseUrl,""))&&"/"!==Kt.charAt(Kt.length-1)&&(Kt+="/");var Qt=Kt+Vt.data.getElementsByTagName("page")[0].getAttribute("file");if(Wt.utils.TextureCache[Qt])Yt(Vt,Wt.utils.TextureCache[Qt]),qt();else{var Jt={crossOrigin:Vt.crossOrigin,loadType:jt.Resource.LOAD_TYPE.IMAGE,metadata:Vt.metadata.imageMetadata,parentResource:Vt};this.add(Vt.name+"_image",Qt,Jt,function(Zt){Yt(Vt,Zt.texture),qt()})}}else qt()}};var Ht=function(Vt){if(Vt&&Vt.__esModule)return Vt;var qt={};if(null!=Vt)for(var Kt in Vt)Object.prototype.hasOwnProperty.call(Vt,Kt)&&(qt[Kt]=Vt[Kt]);return qt.default=Vt,qt}(Bt("path")),Wt=Bt("../core"),jt=Bt("resource-loader"),zt=Bt("../extras")},{"../core":65,"../extras":141,path:23,"resource-loader":36}],162:[function(Bt,Gt,Xt){function Yt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Xt.__esModule=!0,Xt.shared=Xt.Resource=Xt.textureParser=Xt.getResourcePath=Xt.spritesheetParser=Xt.parseBitmapFontData=Xt.bitmapFontParser=Xt.Loader=void 0;var Ht=Bt("./bitmapFontParser");Object.defineProperty(Xt,"bitmapFontParser",{enumerable:!0,get:function(){return Yt(Ht).default}}),Object.defineProperty(Xt,"parseBitmapFontData",{enumerable:!0,get:function(){return Ht.parse}});var Wt=Bt("./spritesheetParser");Object.defineProperty(Xt,"spritesheetParser",{enumerable:!0,get:function(){return Yt(Wt).default}}),Object.defineProperty(Xt,"getResourcePath",{enumerable:!0,get:function(){return Wt.getResourcePath}});var jt=Bt("./textureParser");Object.defineProperty(Xt,"textureParser",{enumerable:!0,get:function(){return Yt(jt).default}});var zt=Bt("resource-loader");Object.defineProperty(Xt,"Resource",{enumerable:!0,get:function(){return zt.Resource}});var Vt=Yt(Bt("../core/Application")),qt=Yt(Bt("./loader"));Xt.Loader=qt.default;var Kt=new qt.default;Kt.destroy=function(){},Xt.shared=Kt;var Qt=Vt.default.prototype;Qt._loader=null,Object.defineProperty(Qt,"loader",{get:function(){if(!this._loader){var Jt=this._options.sharedLoader;this._loader=Jt?Kt:new qt.default}return this._loader}}),Qt._parentDestroy=Qt.destroy,Qt.destroy=function(Jt){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(Jt)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(Bt,Gt,Xt){function Yt(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Xt.__esModule=!0;var Ht=Yt(Bt("resource-loader")),Wt=Bt("resource-loader/lib/middlewares/parsing/blob"),jt=Yt(Bt("eventemitter3")),zt=Yt(Bt("./textureParser")),Vt=Yt(Bt("./spritesheetParser")),qt=Yt(Bt("./bitmapFontParser")),Kt=function(Zt){function $t(en,tn){!function(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}(this,$t);var nn=function(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:rn}(this,Zt.call(this,en,tn));jt.default.call(nn);for(var an=0;an<$t._pixiMiddleware.length;++an)nn.use($t._pixiMiddleware[an]());return nn.onStart.add(function(rn){return nn.emit("start",rn)}),nn.onProgress.add(function(rn,on){return nn.emit("progress",rn,on)}),nn.onError.add(function(rn,on,sn){return nn.emit("error",rn,on,sn)}),nn.onLoad.add(function(rn,on){return nn.emit("load",rn,on)}),nn.onComplete.add(function(rn,on){return nn.emit("complete",rn,on)}),nn}return function(en,tn){if("function"!=typeof tn&&null!==tn)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);en.prototype=Object.create(tn&&tn.prototype,{constructor:{value:en,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(en,tn):en.__proto__=tn)}($t,Zt),$t.addPixiMiddleware=function(en){$t._pixiMiddleware.push(en)},$t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},$t}(Ht.default);for(var Qt in Xt.default=Kt,jt.default.prototype)Kt.prototype[Qt]=jt.default.prototype[Qt];Kt._pixiMiddleware=[Wt.blobMiddlewareFactory,zt.default,Vt.default,qt.default];var Jt=Ht.default.Resource;Jt.setExtensionXhrType("fnt",Jt.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(Bt,Gt,Xt){function Yt(zt,Vt){return zt.isDataUrl?zt.data.meta.image:Wt.default.resolve(zt.url.replace(Vt,""),zt.data.meta.image)}Xt.__esModule=!0,Xt.default=function(){return function(zt,Vt){var qt=zt.name+"_image";if(zt.data&&zt.type===Ht.Resource.TYPE.JSON&&zt.data.frames&&!this.resources[qt]){var Kt={crossOrigin:zt.crossOrigin,loadType:Ht.Resource.LOAD_TYPE.IMAGE,metadata:zt.metadata.imageMetadata,parentResource:zt},Qt=Yt(zt,this.baseUrl);this.add(qt,Qt,Kt,function(Jt){var Zt=new jt.Spritesheet(Jt.texture.baseTexture,zt.data,zt.url);Zt.parse(function(){zt.spritesheet=Zt,zt.textures=Zt.textures,Vt()})})}else Vt()}},Xt.getResourcePath=Yt;var Ht=Bt("resource-loader"),Wt=function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("url")),jt=Bt("../core")},{"../core":65,"resource-loader":36,url:29}],165:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(){return function(Wt,jt){Wt.data&&Wt.type===Yt.Resource.TYPE.IMAGE&&(Wt.texture=Ht.default.fromLoader(Wt.data,Wt.url,Wt.name)),jt()}};var Yt=Bt("resource-loader"),Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../core/textures/Texture"))},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function qt(Kt,Qt){for(var Jt=0,Zt;Jt<Qt.length;Jt++)Zt=Qt[Jt],Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Kt,Zt.key,Zt)}return function(Kt,Qt,Jt){return Qt&&qt(Kt.prototype,Qt),Jt&&qt(Kt,Jt),Kt}}(),Ht=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Qt in qt)Object.prototype.hasOwnProperty.call(qt,Qt)&&(Kt[Qt]=qt[Qt]);return Kt.default=qt,Kt}(Bt("../core")),Wt=function(qt){return qt&&qt.__esModule?qt:{default:qt}}(Bt("../extras/TextureTransform")),jt=new Ht.Point,zt=new Ht.Polygon,Vt=function(qt){function Kt(Qt,Jt,Zt,$t,en){!function(nn,an){if(!(nn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,Kt);var tn=function(nn,an){if(!nn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an&&("object"==typeof an||"function"==typeof an)?an:nn}(this,qt.call(this));return tn._texture=Qt,tn.uvs=Zt||new Float32Array([0,0,1,0,1,1,0,1]),tn.vertices=Jt||new Float32Array([0,0,100,0,100,100,0,100]),tn.indices=$t||new Uint16Array([0,1,3,2]),tn.dirty=0,tn.indexDirty=0,tn.blendMode=Ht.BLEND_MODES.NORMAL,tn.canvasPadding=0,tn.drawMode=en||Kt.DRAW_MODES.TRIANGLE_MESH,tn.shader=null,tn.tintRgb=new Float32Array([1,1,1]),tn._glDatas={},tn._uvTransform=new Wt.default(Qt),tn.uploadUvTransform=!1,tn.pluginName="mesh",tn}return function(Qt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Qt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Jt):Qt.__proto__=Jt)}(Kt,qt),Kt.prototype._renderWebGL=function(Qt){this.refresh(),Qt.setObjectRenderer(Qt.plugins[this.pluginName]),Qt.plugins[this.pluginName].render(this)},Kt.prototype._renderCanvas=function(Qt){this.refresh(),Qt.plugins[this.pluginName].render(this)},Kt.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},Kt.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},Kt.prototype.refresh=function(Qt){this._uvTransform.update(Qt)&&this._refresh()},Kt.prototype._refresh=function(){},Kt.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},Kt.prototype.containsPoint=function(Qt){if(!this.getBounds().contains(Qt.x,Qt.y))return!1;this.worldTransform.applyInverse(Qt,jt);for(var Jt=this.vertices,Zt=zt.points,$t=this.indices,en=this.indices.length,tn=this.drawMode===Kt.DRAW_MODES.TRIANGLES?3:1,nn=0;nn+2<en;nn+=tn){var an=2*$t[nn],rn=2*$t[nn+1],on=2*$t[nn+2];if(Zt[0]=Jt[an],Zt[1]=Jt[an+1],Zt[2]=Jt[rn],Zt[3]=Jt[rn+1],Zt[4]=Jt[on],Zt[5]=Jt[on+1],zt.contains(jt.x,jt.y))return!0}return!1},Yt(Kt,[{key:"texture",get:function(){return this._texture},set:function(Qt){this._texture!==Qt&&(this._texture=Qt,Qt&&(Qt.baseTexture.hasLoaded?this._onTextureUpdate():Qt.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return Ht.utils.rgb2hex(this.tintRgb)},set:function(Qt){this.tintRgb=Ht.utils.hex2rgb(Qt,this.tintRgb)}}]),Kt}(Ht.Container);Xt.default=Vt,Vt.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../extras/TextureTransform":136}],167:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Ht=10,Wt=function(jt){function zt(Vt,qt,Kt,Qt,Jt){!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,zt);var Zt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,jt.call(this,Vt,4,4));return Zt._origWidth=Vt.orig.width,Zt._origHeight=Vt.orig.height,Zt._width=Zt._origWidth,Zt._height=Zt._origHeight,Zt.leftWidth=void 0===qt?Ht:qt,Zt.rightWidth=void 0===Qt?Ht:Qt,Zt.topHeight=void 0===Kt?Ht:Kt,Zt.bottomHeight=void 0===Jt?Ht:Jt,Zt.refresh(!0),Zt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.updateHorizontalVertices=function(){var Vt=this.vertices;Vt[9]=Vt[11]=Vt[13]=Vt[15]=this._topHeight,Vt[17]=Vt[19]=Vt[21]=Vt[23]=this._height-this._bottomHeight,Vt[25]=Vt[27]=Vt[29]=Vt[31]=this._height},zt.prototype.updateVerticalVertices=function(){var Vt=this.vertices;Vt[2]=Vt[10]=Vt[18]=Vt[26]=this._leftWidth,Vt[4]=Vt[12]=Vt[20]=Vt[28]=this._width-this._rightWidth,Vt[6]=Vt[14]=Vt[22]=Vt[30]=this._width},zt.prototype._renderCanvas=function(Vt){var qt=Vt.context;qt.globalAlpha=this.worldAlpha;var Kt=this.worldTransform,Qt=Vt.resolution;Vt.roundPixels?qt.setTransform(Kt.a*Qt,Kt.b*Qt,Kt.c*Qt,Kt.d*Qt,0|Kt.tx*Qt,0|Kt.ty*Qt):qt.setTransform(Kt.a*Qt,Kt.b*Qt,Kt.c*Qt,Kt.d*Qt,Kt.tx*Qt,Kt.ty*Qt);var Jt=this._texture.baseTexture,Zt=Jt.source,$t=Jt.width,en=Jt.height;this.drawSegment(qt,Zt,$t,en,0,1,10,11),this.drawSegment(qt,Zt,$t,en,2,3,12,13),this.drawSegment(qt,Zt,$t,en,4,5,14,15),this.drawSegment(qt,Zt,$t,en,8,9,18,19),this.drawSegment(qt,Zt,$t,en,10,11,20,21),this.drawSegment(qt,Zt,$t,en,12,13,22,23),this.drawSegment(qt,Zt,$t,en,16,17,26,27),this.drawSegment(qt,Zt,$t,en,18,19,28,29),this.drawSegment(qt,Zt,$t,en,20,21,30,31)},zt.prototype.drawSegment=function(Vt,qt,Kt,Qt,Jt,Zt,$t,en){var tn=this.uvs,nn=this.vertices,an=(tn[$t]-tn[Jt])*Kt,rn=(tn[en]-tn[Zt])*Qt,on=nn[$t]-nn[Jt],sn=nn[en]-nn[Zt];1>an&&(an=1),1>rn&&(rn=1),1>on&&(on=1),1>sn&&(sn=1),Vt.drawImage(qt,tn[Jt]*Kt,tn[Zt]*Qt,an,rn,nn[Jt],nn[Zt],on,sn)},zt.prototype._refresh=function(){jt.prototype._refresh.call(this);var Vt=this.uvs,qt=this._texture;this._origWidth=qt.orig.width,this._origHeight=qt.orig.height;var Kt=1/this._origWidth,Qt=1/this._origHeight;Vt[0]=Vt[8]=Vt[16]=Vt[24]=0,Vt[1]=Vt[3]=Vt[5]=Vt[7]=0,Vt[6]=Vt[14]=Vt[22]=Vt[30]=1,Vt[25]=Vt[27]=Vt[29]=Vt[31]=1,Vt[2]=Vt[10]=Vt[18]=Vt[26]=Kt*this._leftWidth,Vt[4]=Vt[12]=Vt[20]=Vt[28]=1-Kt*this._rightWidth,Vt[9]=Vt[11]=Vt[13]=Vt[15]=Qt*this._topHeight,Vt[17]=Vt[19]=Vt[21]=Vt[23]=1-Qt*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},Yt(zt,[{key:"width",get:function(){return this._width},set:function(Vt){this._width=Vt,this._refresh()}},{key:"height",get:function(){return this._height},set:function(Vt){this._height=Vt,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(Vt){this._leftWidth=Vt,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(Vt){this._rightWidth=Vt,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(Vt){this._topHeight=Vt,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(Vt){this._bottomHeight=Vt,this._refresh()}}]),zt}(function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./Plane")).default);Xt.default=Wt},{"./Plane":168}],168:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./Mesh")),Ht=function(Wt){function jt(zt,Vt,qt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,jt);var Kt=function(Qt,Jt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Qt}(this,Wt.call(this,zt));return Kt._ready=!0,Kt.verticesX=Vt||10,Kt.verticesY=qt||10,Kt.drawMode=Yt.default.DRAW_MODES.TRIANGLES,Kt.refresh(),Kt}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(jt,Wt),jt.prototype._refresh=function(){for(var zt=this._texture,Vt=this.verticesX*this.verticesY,qt=[],Kt=[],Qt=[],Jt=this.verticesX-1,Zt=this.verticesY-1,$t=zt.width/Jt,en=zt.height/Zt,tn=0;tn<Vt;tn++){var nn=tn%this.verticesX,an=0|tn/this.verticesX;qt.push(nn*$t,an*en),Kt.push(nn/Jt,an/Zt)}for(var on=0;on<Jt*Zt;on++){var sn=on%Jt,dn=0|on/Jt,ln=dn*this.verticesX+sn,un=dn*this.verticesX+sn+1,pn=(dn+1)*this.verticesX+sn,cn=(dn+1)*this.verticesX+sn+1;Qt.push(ln,un,pn),Qt.push(un,cn,pn)}this.vertices=new Float32Array(qt),this.uvs=new Float32Array(Kt),this.colors=new Float32Array([]),this.indices=new Uint16Array(Qt),this.indexDirty++,this.multiplyUvs()},jt.prototype._onTextureUpdate=function(){Yt.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},jt}(Yt.default);Xt.default=Ht},{"./Mesh":166}],169:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Ht){function Wt(jt,zt){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,Wt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,Ht.call(this,jt));return Vt.points=zt,Vt.vertices=new Float32Array(4*zt.length),Vt.uvs=new Float32Array(4*zt.length),Vt.colors=new Float32Array(2*zt.length),Vt.indices=new Uint16Array(2*zt.length),Vt.autoUpdate=!0,Vt.refresh(),Vt}return function(jt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);jt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,zt):jt.__proto__=zt)}(Wt,Ht),Wt.prototype._refresh=function(){var jt=this.points;if(!(1>jt.length)&&this._texture._uvs){this.vertices.length/4!==jt.length&&(this.vertices=new Float32Array(4*jt.length),this.uvs=new Float32Array(4*jt.length),this.colors=new Float32Array(2*jt.length),this.indices=new Uint16Array(2*jt.length));var zt=this.uvs,Vt=this.indices,qt=this.colors;zt[0]=0,zt[1]=0,zt[2]=0,zt[3]=1,qt[0]=1,qt[1]=1,Vt[0]=0,Vt[1]=1;for(var Kt=jt.length,Qt=1;Qt<Kt;Qt++){var Jt=4*Qt,Zt=Qt/(Kt-1);zt[Jt]=Zt,zt[Jt+1]=0,zt[Jt+2]=Zt,zt[Jt+3]=1,qt[Jt=2*Qt]=1,qt[Jt+1]=1,Vt[Jt=2*Qt]=Jt,Vt[Jt+1]=Jt+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},Wt.prototype.refreshVertices=function(){var jt=this.points;if(!(1>jt.length))for(var zt=jt[0],Vt=void 0,qt=0,Kt=0,Qt=this.vertices,Jt=jt.length,Zt=0;Zt<Jt;Zt++){var $t=jt[Zt],en=4*Zt;Kt=-((Vt=Zt<jt.length-1?jt[Zt+1]:$t).x-zt.x),qt=Vt.y-zt.y;var tn=10*(1-Zt/(Jt-1));1<tn&&(tn=1);var nn=Math.sqrt(qt*qt+Kt*Kt),an=this._texture.height/2;qt/=nn,Kt/=nn,qt*=an,Kt*=an,Qt[en]=$t.x+qt,Qt[en+1]=$t.y+Kt,Qt[en+2]=$t.x-qt,Qt[en+3]=$t.y-Kt,zt=$t}},Wt.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},Wt}(function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("./Mesh")).default);Xt.default=Yt},{"./Mesh":166}],170:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../Mesh")),Wt=function(){function jt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=zt}return jt.prototype.render=function(zt){var Vt=this.renderer,qt=Vt.context,Kt=zt.worldTransform,Qt=Vt.resolution;Vt.roundPixels?qt.setTransform(Kt.a*Qt,Kt.b*Qt,Kt.c*Qt,Kt.d*Qt,0|Kt.tx*Qt,0|Kt.ty*Qt):qt.setTransform(Kt.a*Qt,Kt.b*Qt,Kt.c*Qt,Kt.d*Qt,Kt.tx*Qt,Kt.ty*Qt),Vt.setBlendMode(zt.blendMode),zt.drawMode===Ht.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(zt):this._renderTriangles(zt)},jt.prototype._renderTriangleMesh=function(zt){for(var Vt=zt.vertices.length/2,qt=0,Kt;qt<Vt-2;qt++)Kt=2*qt,this._renderDrawTriangle(zt,Kt,Kt+2,Kt+4)},jt.prototype._renderTriangles=function(zt){for(var Vt=zt.indices,qt=Vt.length,Kt=0;Kt<qt;Kt+=3){var Qt=2*Vt[Kt],Jt=2*Vt[Kt+1],Zt=2*Vt[Kt+2];this._renderDrawTriangle(zt,Qt,Jt,Zt)}},jt.prototype._renderDrawTriangle=function(zt,Vt,qt,Kt){var Qt=this.renderer.context,Jt=zt.uvs,Zt=zt.vertices,$t=zt._texture;if($t.valid){var en=$t.baseTexture,tn=en.source,nn=en.width,an=en.height,rn,on,sn,dn,ln,un;if(zt.uploadUvTransform){var pn=zt._uvTransform.mapCoord;rn=(Jt[Vt]*pn.a+Jt[Vt+1]*pn.c+pn.tx)*en.width,on=(Jt[qt]*pn.a+Jt[qt+1]*pn.c+pn.tx)*en.width,sn=(Jt[Kt]*pn.a+Jt[Kt+1]*pn.c+pn.tx)*en.width,dn=(Jt[Vt]*pn.b+Jt[Vt+1]*pn.d+pn.ty)*en.height,ln=(Jt[qt]*pn.b+Jt[qt+1]*pn.d+pn.ty)*en.height,un=(Jt[Kt]*pn.b+Jt[Kt+1]*pn.d+pn.ty)*en.height}else rn=Jt[Vt]*en.width,on=Jt[qt]*en.width,sn=Jt[Kt]*en.width,dn=Jt[Vt+1]*en.height,ln=Jt[qt+1]*en.height,un=Jt[Kt+1]*en.height;var cn=Zt[Vt],hn=Zt[qt],fn=Zt[Kt],gn=Zt[Vt+1],mn=Zt[qt+1],yn=Zt[Kt+1];if(0<zt.canvasPadding){var _n=zt.canvasPadding/zt.worldTransform.a,bn=zt.canvasPadding/zt.worldTransform.d,xn=(cn+hn+fn)/3,vn=(gn+mn+yn)/3,Tn=cn-xn,En=gn-vn,Sn=Math.sqrt(Tn*Tn+En*En);cn=xn+Tn/Sn*(Sn+_n),gn=vn+En/Sn*(Sn+bn),En=mn-vn,hn=xn+(Tn=hn-xn)/(Sn=Math.sqrt(Tn*Tn+En*En))*(Sn+_n),mn=vn+En/Sn*(Sn+bn),En=yn-vn,fn=xn+(Tn=fn-xn)/(Sn=Math.sqrt(Tn*Tn+En*En))*(Sn+_n),yn=vn+En/Sn*(Sn+bn)}Qt.save(),Qt.beginPath(),Qt.moveTo(cn,gn),Qt.lineTo(hn,mn),Qt.lineTo(fn,yn),Qt.closePath(),Qt.clip();var An=rn*ln+dn*sn+on*un-ln*sn-dn*on-rn*un,wn=cn*ln+dn*fn+hn*un-ln*fn-dn*hn-cn*un,Cn=rn*hn+cn*sn+on*fn-hn*sn-cn*on-rn*fn,Pn=rn*ln*fn+dn*hn*sn+cn*on*un-cn*ln*sn-dn*on*fn-rn*hn*un,Dn=gn*ln+dn*yn+mn*un-ln*yn-dn*mn-gn*un,Mn=rn*mn+gn*sn+on*yn-mn*sn-gn*on-rn*yn,Rn=rn*ln*yn+dn*mn*sn+gn*on*un-gn*ln*sn-dn*on*yn-rn*mn*un;Qt.transform(wn/An,Dn/An,Cn/An,Mn/An,Pn/An,Rn/An),Qt.drawImage(tn,0,0,nn*en.resolution,an*en.resolution,0,0,nn,an),Qt.restore(),this.renderer.invalidateBlendMode()}},jt.prototype.renderMeshFlat=function(zt){var Vt=this.renderer.context,qt=zt.vertices,Kt=qt.length/2;Vt.beginPath();for(var Qt=1;Qt<Kt-2;++Qt){var Jt=2*Qt,Zt=qt[Jt],$t=qt[Jt+1],en=qt[Jt+2],tn=qt[Jt+3],nn=qt[Jt+4],an=qt[Jt+5];Vt.moveTo(Zt,$t),Vt.lineTo(en,tn),Vt.lineTo(nn,an)}Vt.fillStyle="#FF0000",Vt.fill(),Vt.closePath()},jt.prototype.destroy=function(){this.renderer=null},jt}();Xt.default=Wt,Yt.CanvasRenderer.registerPlugin("mesh",Wt)},{"../../core":65,"../Mesh":166}],171:[function(Bt,Gt,Xt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Ht=Bt("./Mesh");Object.defineProperty(Xt,"Mesh",{enumerable:!0,get:function(){return Yt(Ht).default}});var Wt=Bt("./webgl/MeshRenderer");Object.defineProperty(Xt,"MeshRenderer",{enumerable:!0,get:function(){return Yt(Wt).default}});var jt=Bt("./canvas/CanvasMeshRenderer");Object.defineProperty(Xt,"CanvasMeshRenderer",{enumerable:!0,get:function(){return Yt(jt).default}});var zt=Bt("./Plane");Object.defineProperty(Xt,"Plane",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./NineSlicePlane");Object.defineProperty(Xt,"NineSlicePlane",{enumerable:!0,get:function(){return Yt(Vt).default}});var qt=Bt("./Rope");Object.defineProperty(Xt,"Rope",{enumerable:!0,get:function(){return Yt(qt).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(Bt,Gt,Xt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Ht=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Qt in qt)Object.prototype.hasOwnProperty.call(qt,Qt)&&(Kt[Qt]=qt[Qt]);return Kt.default=qt,Kt}(Bt("../../core")),Wt=Yt(Bt("pixi-gl-core")),jt=Yt(Bt("../Mesh")),zt=(Bt("path"),Ht.Matrix.IDENTITY),Vt=function(qt){function Kt(Qt){!function(Zt,$t){if(!(Zt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Kt);var Jt=function(Zt,$t){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&("object"==typeof $t||"function"==typeof $t)?$t:Zt}(this,qt.call(this,Qt));return Jt.shader=null,Jt}return function(Qt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Qt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Jt):Qt.__proto__=Jt)}(Kt,qt),Kt.prototype.onContextChange=function(){var Qt=this.renderer.gl;this.shader=new Ht.Shader(Qt,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},Kt.prototype.render=function(Qt){var Jt=this.renderer,Zt=Jt.gl,$t=Qt._texture;if($t.valid){var en=Qt._glDatas[Jt.CONTEXT_UID];en||(Jt.bindVao(null),(en={shader:this.shader,vertexBuffer:Wt.default.GLBuffer.createVertexBuffer(Zt,Qt.vertices,Zt.STREAM_DRAW),uvBuffer:Wt.default.GLBuffer.createVertexBuffer(Zt,Qt.uvs,Zt.STREAM_DRAW),indexBuffer:Wt.default.GLBuffer.createIndexBuffer(Zt,Qt.indices,Zt.STATIC_DRAW),vao:null,dirty:Qt.dirty,indexDirty:Qt.indexDirty}).vao=new Wt.default.VertexArrayObject(Zt).addIndex(en.indexBuffer).addAttribute(en.vertexBuffer,en.shader.attributes.aVertexPosition,Zt.FLOAT,!1,8,0).addAttribute(en.uvBuffer,en.shader.attributes.aTextureCoord,Zt.FLOAT,!1,8,0),Qt._glDatas[Jt.CONTEXT_UID]=en),Jt.bindVao(en.vao),Qt.dirty!==en.dirty&&(en.dirty=Qt.dirty,en.uvBuffer.upload(Qt.uvs)),Qt.indexDirty!==en.indexDirty&&(en.indexDirty=Qt.indexDirty,en.indexBuffer.upload(Qt.indices)),en.vertexBuffer.upload(Qt.vertices),Jt.bindShader(en.shader),en.shader.uniforms.uSampler=Jt.bindTexture($t),Jt.state.setBlendMode(Ht.utils.correctBlendMode(Qt.blendMode,$t.baseTexture.premultipliedAlpha)),en.shader.uniforms.uTransform&&(Qt.uploadUvTransform?en.shader.uniforms.uTransform=Qt._uvTransform.mapCoord.toArray(!0):en.shader.uniforms.uTransform=zt.toArray(!0)),en.shader.uniforms.translationMatrix=Qt.worldTransform.toArray(!0),en.shader.uniforms.uColor=Ht.utils.premultiplyRgba(Qt.tintRgb,Qt.worldAlpha,en.shader.uniforms.uColor,$t.baseTexture.premultipliedAlpha);var tn=Qt.drawMode===jt.default.DRAW_MODES.TRIANGLE_MESH?Zt.TRIANGLE_STRIP:Zt.TRIANGLES;en.vao.draw(tn,Qt.indices.length,0)}},Kt}(Ht.ObjectRenderer);Xt.default=Vt,Ht.WebGLRenderer.registerPlugin("mesh",Vt)},{"../../core":65,"../Mesh":166,path:23,"pixi-gl-core":12}],173:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function zt(Vt,qt){for(var Kt=0,Qt;Kt<qt.length;Kt++)Qt=qt[Kt],Qt.enumerable=Qt.enumerable||!1,Qt.configurable=!0,"value"in Qt&&(Qt.writable=!0),Object.defineProperty(Vt,Qt.key,Qt)}return function(Vt,qt,Kt){return qt&&zt(Vt.prototype,qt),Kt&&zt(Vt,Kt),Vt}}(),Ht=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("../core")),Wt=Bt("../core/utils"),jt=function(zt){function Vt(){var qt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,Kt=arguments[1],Qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,Jt=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Zt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,zt.call(this));return 16384<Qt&&(Qt=16384),Qt>qt&&(Qt=qt),Zt._properties=[!1,!0,!1,!1,!1],Zt._maxSize=qt,Zt._batchSize=Qt,Zt._glBuffers={},Zt._bufferToUpdate=0,Zt.interactiveChildren=!1,Zt.blendMode=Ht.BLEND_MODES.NORMAL,Zt.autoResize=Jt,Zt.roundPixels=!0,Zt.baseTexture=null,Zt.setProperties(Kt),Zt._tint=0,Zt.tintRgb=new Float32Array(4),Zt.tint=16777215,Zt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.setProperties=function(qt){qt&&(this._properties[0]="scale"in qt?!!qt.scale:this._properties[0],this._properties[1]="position"in qt?!!qt.position:this._properties[1],this._properties[2]="rotation"in qt?!!qt.rotation:this._properties[2],this._properties[3]="uvs"in qt?!!qt.uvs:this._properties[3],this._properties[4]="alpha"in qt||"tint"in qt?!!qt.alpha||!!qt.tint:this._properties[4])},Vt.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Vt.prototype.renderWebGL=function(qt){var Kt=this;this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return Kt.onChildrenChange(0)})),qt.setObjectRenderer(qt.plugins.particle),qt.plugins.particle.render(this))},Vt.prototype.onChildrenChange=function(qt){var Kt=Math.floor(qt/this._batchSize);Kt<this._bufferToUpdate&&(this._bufferToUpdate=Kt)},Vt.prototype.renderCanvas=function(qt){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var Kt=qt.context,Qt=this.worldTransform,Jt=!0,Zt=0,$t=0,en=0,tn=0;qt.setBlendMode(this.blendMode),Kt.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var nn=0,an;nn<this.children.length;++nn)if(an=this.children[nn],an.visible){var rn=an._texture.frame;if(Kt.globalAlpha=this.worldAlpha*an.alpha,0==an.rotation%(2*Math.PI))Jt&&(Kt.setTransform(Qt.a,Qt.b,Qt.c,Qt.d,Qt.tx*qt.resolution,Qt.ty*qt.resolution),Jt=!1),Zt=an.anchor.x*(-rn.width*an.scale.x)+an.position.x+.5,$t=an.anchor.y*(-rn.height*an.scale.y)+an.position.y+.5,en=rn.width*an.scale.x,tn=rn.height*an.scale.y;else{Jt||(Jt=!0),an.displayObjectUpdateTransform();var on=an.worldTransform;qt.roundPixels?Kt.setTransform(on.a,on.b,on.c,on.d,0|on.tx*qt.resolution,0|on.ty*qt.resolution):Kt.setTransform(on.a,on.b,on.c,on.d,on.tx*qt.resolution,on.ty*qt.resolution),Zt=an.anchor.x*-rn.width+.5,$t=an.anchor.y*-rn.height+.5,en=rn.width,tn=rn.height}var sn=an._texture.baseTexture.resolution;Kt.drawImage(an._texture.baseTexture.source,rn.x*sn,rn.y*sn,rn.width*sn,rn.height*sn,Zt*qt.resolution,$t*qt.resolution,en*qt.resolution,tn*qt.resolution)}}},Vt.prototype.destroy=function(qt){if(zt.prototype.destroy.call(this,qt),this._buffers)for(var Kt=0;Kt<this._buffers.length;++Kt)this._buffers[Kt].destroy();this._properties=null,this._buffers=null},Yt(Vt,[{key:"tint",get:function(){return this._tint},set:function(qt){this._tint=qt,(0,Wt.hex2rgb)(qt,this.tintRgb)}}]),Vt}(Ht.Container);Xt.default=jt},{"../core":65,"../core/utils":124}],174:[function(Bt,Gt,Xt){function Yt(jt){return jt&&jt.__esModule?jt:{default:jt}}Xt.__esModule=!0;var Ht=Bt("./ParticleContainer");Object.defineProperty(Xt,"ParticleContainer",{enumerable:!0,get:function(){return Yt(Ht).default}});var Wt=Bt("./webgl/ParticleRenderer");Object.defineProperty(Xt,"ParticleRenderer",{enumerable:!0,get:function(){return Yt(Wt).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(Bt,Gt,Xt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0;var Ht=Yt(Bt("pixi-gl-core")),Wt=Yt(Bt("../../core/utils/createIndicesForQuads")),jt=function(){function zt(Vt,qt,Kt,Qt){!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,zt),this.gl=Vt,this.size=Qt,this.dynamicProperties=[],this.staticProperties=[];for(var Jt=0,Zt;Jt<qt.length;++Jt)Zt=qt[Jt],Zt={attribute:Zt.attribute,size:Zt.size,uploadFunction:Zt.uploadFunction,unsignedByte:Zt.unsignedByte,offset:Zt.offset},Kt[Jt]?this.dynamicProperties.push(Zt):this.staticProperties.push(Zt);this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.initBuffers()}return zt.prototype.initBuffers=function(){var Vt=this.gl,qt=0;this.indices=(0,Wt.default)(this.size),this.indexBuffer=Ht.default.GLBuffer.createIndexBuffer(Vt,this.indices,Vt.STATIC_DRAW),this.dynamicStride=0;for(var Kt=0,Qt;Kt<this.dynamicProperties.length;++Kt)Qt=this.dynamicProperties[Kt],Qt.offset=qt,qt+=Qt.size,this.dynamicStride+=Qt.size;var Jt=new ArrayBuffer(4*(4*(this.size*this.dynamicStride)));this.dynamicData=new Float32Array(Jt),this.dynamicDataUint32=new Uint32Array(Jt),this.dynamicBuffer=Ht.default.GLBuffer.createVertexBuffer(Vt,Jt,Vt.STREAM_DRAW);var Zt=0;this.staticStride=0;for(var $t=0,en;$t<this.staticProperties.length;++$t)en=this.staticProperties[$t],en.offset=Zt,Zt+=en.size,this.staticStride+=en.size;var tn=new ArrayBuffer(4*(4*(this.size*this.staticStride)));this.staticData=new Float32Array(tn),this.staticDataUint32=new Uint32Array(tn),this.staticBuffer=Ht.default.GLBuffer.createVertexBuffer(Vt,tn,Vt.STATIC_DRAW),this.vao=new Ht.default.VertexArrayObject(Vt).addIndex(this.indexBuffer);for(var nn=0,an;nn<this.dynamicProperties.length;++nn)an=this.dynamicProperties[nn],an.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,an.attribute,Vt.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*an.offset):this.vao.addAttribute(this.dynamicBuffer,an.attribute,Vt.FLOAT,!1,4*this.dynamicStride,4*an.offset);for(var rn=0,on;rn<this.staticProperties.length;++rn)on=this.staticProperties[rn],on.unsignedByte?this.vao.addAttribute(this.staticBuffer,on.attribute,Vt.UNSIGNED_BYTE,!0,4*this.staticStride,4*on.offset):this.vao.addAttribute(this.staticBuffer,on.attribute,Vt.FLOAT,!1,4*this.staticStride,4*on.offset)},zt.prototype.uploadDynamic=function(Vt,qt,Kt){for(var Qt=0,Jt;Qt<this.dynamicProperties.length;Qt++)Jt=this.dynamicProperties[Qt],Jt.uploadFunction(Vt,qt,Kt,Jt.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,Jt.offset);this.dynamicBuffer.upload()},zt.prototype.uploadStatic=function(Vt,qt,Kt){for(var Qt=0,Jt;Qt<this.staticProperties.length;Qt++)Jt=this.staticProperties[Qt],Jt.uploadFunction(Vt,qt,Kt,Jt.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,Jt.offset);this.staticBuffer.upload()},zt.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},zt}();Xt.default=jt},{"../../core/utils/createIndicesForQuads":122,"pixi-gl-core":12}],176:[function(Bt,Gt,Xt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Ht=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Qt in qt)Object.prototype.hasOwnProperty.call(qt,Qt)&&(Kt[Qt]=qt[Qt]);return Kt.default=qt,Kt}(Bt("../../core")),Wt=Yt(Bt("./ParticleShader")),jt=Yt(Bt("./ParticleBuffer")),zt=Bt("../../core/utils"),Vt=function(qt){function Kt(Qt){!function(Zt,$t){if(!(Zt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Kt);var Jt=function(Zt,$t){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&("object"==typeof $t||"function"==typeof $t)?$t:Zt}(this,qt.call(this,Qt));return Jt.shader=null,Jt.indexBuffer=null,Jt.properties=null,Jt.tempMatrix=new Ht.Matrix,Jt.CONTEXT_UID=0,Jt}return function(Qt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Qt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Jt):Qt.__proto__=Jt)}(Kt,qt),Kt.prototype.onContextChange=function(){var Qt=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new Wt.default(Qt),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},Kt.prototype.start=function(){this.renderer.bindShader(this.shader)},Kt.prototype.render=function(Qt){var Jt=Qt.children,Zt=Qt._maxSize,$t=Qt._batchSize,en=this.renderer,tn=Jt.length;if(0!==tn){tn>Zt&&(tn=Zt);var nn=Qt._glBuffers[en.CONTEXT_UID];nn||(nn=Qt._glBuffers[en.CONTEXT_UID]=this.generateBuffers(Qt));var an=Jt[0]._texture.baseTexture;this.renderer.setBlendMode(Ht.utils.correctBlendMode(Qt.blendMode,an.premultipliedAlpha));var rn=en.gl,on=Qt.worldTransform.copy(this.tempMatrix);on.prepend(en._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=on.toArray(!0),this.shader.uniforms.uColor=Ht.utils.premultiplyRgba(Qt.tintRgb,Qt.worldAlpha,this.shader.uniforms.uColor,an.premultipliedAlpha),this.shader.uniforms.uSampler=en.bindTexture(an);for(var sn=0,dn=0,ln;sn<tn;sn+=$t,dn+=1){if(ln=tn-sn,ln>$t&&(ln=$t),dn>=nn.length){if(!Qt.autoResize)break;nn.push(this._generateOneMoreBuffer(Qt))}var un=nn[dn];un.uploadDynamic(Jt,sn,ln),Qt._bufferToUpdate===dn&&(un.uploadStatic(Jt,sn,ln),Qt._bufferToUpdate=dn+1),en.bindVao(un.vao),un.vao.draw(rn.TRIANGLES,6*ln)}}},Kt.prototype.generateBuffers=function(Qt){for(var Jt=this.renderer.gl,Zt=[],$t=Qt._maxSize,en=Qt._batchSize,tn=Qt._properties,nn=0;nn<$t;nn+=en)Zt.push(new jt.default(Jt,this.properties,tn,en));return Zt},Kt.prototype._generateOneMoreBuffer=function(Qt){var Jt=this.renderer.gl,Zt=Qt._batchSize,$t=Qt._properties;return new jt.default(Jt,this.properties,$t,Zt)},Kt.prototype.uploadVertices=function(Qt,Jt,Zt,$t,en,tn){for(var nn=0,an=0,rn=0,on=0,sn=0;sn<Zt;++sn){var dn=Qt[Jt+sn],ln=dn._texture,un=dn.scale.x,pn=dn.scale.y,cn=ln.trim,hn=ln.orig;cn?(nn=(an=cn.x-dn.anchor.x*hn.width)+cn.width,rn=(on=cn.y-dn.anchor.y*hn.height)+cn.height):(nn=hn.width*(1-dn.anchor.x),an=hn.width*-dn.anchor.x,rn=hn.height*(1-dn.anchor.y),on=hn.height*-dn.anchor.y),$t[tn]=an*un,$t[tn+1]=on*pn,$t[tn+en]=nn*un,$t[tn+en+1]=on*pn,$t[tn+2*en]=nn*un,$t[tn+2*en+1]=rn*pn,$t[tn+3*en]=an*un,$t[tn+3*en+1]=rn*pn,tn+=4*en}},Kt.prototype.uploadPosition=function(Qt,Jt,Zt,$t,en,tn){for(var nn=0,an;nn<Zt;nn++)an=Qt[Jt+nn].position,$t[tn]=an.x,$t[tn+1]=an.y,$t[tn+en]=an.x,$t[tn+en+1]=an.y,$t[tn+2*en]=an.x,$t[tn+2*en+1]=an.y,$t[tn+3*en]=an.x,$t[tn+3*en+1]=an.y,tn+=4*en},Kt.prototype.uploadRotation=function(Qt,Jt,Zt,$t,en,tn){for(var nn=0,an;nn<Zt;nn++)an=Qt[Jt+nn].rotation,$t[tn]=an,$t[tn+en]=an,$t[tn+2*en]=an,$t[tn+3*en]=an,tn+=4*en},Kt.prototype.uploadUvs=function(Qt,Jt,Zt,$t,en,tn){for(var nn=0,an;nn<Zt;++nn)an=Qt[Jt+nn]._texture._uvs,an?($t[tn]=an.x0,$t[tn+1]=an.y0,$t[tn+en]=an.x1,$t[tn+en+1]=an.y1,$t[tn+2*en]=an.x2,$t[tn+2*en+1]=an.y2,$t[tn+3*en]=an.x3,$t[tn+3*en+1]=an.y3,tn+=4*en):($t[tn]=0,$t[tn+1]=0,$t[tn+en]=0,$t[tn+en+1]=0,$t[tn+2*en]=0,$t[tn+2*en+1]=0,$t[tn+3*en]=0,$t[tn+3*en+1]=0,tn+=4*en)},Kt.prototype.uploadTint=function(Qt,Jt,Zt,$t,en,tn){for(var nn=0;nn<Zt;++nn){var an=Qt[Jt+nn],rn=an._texture.baseTexture.premultipliedAlpha,on=an.alpha,sn=1>on&&rn?(0,zt.premultiplyTint)(an._tintRGB,on):an._tintRGB+(255*on<<24);$t[tn]=sn,$t[tn+en]=sn,$t[tn+2*en]=sn,$t[tn+3*en]=sn,tn+=4*en}},Kt.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),qt.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},Kt}(Ht.ObjectRenderer);Xt.default=Vt,Ht.WebGLRenderer.registerPlugin("particle",Vt)},{"../../core":65,"../../core/utils":124,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(Ht){function Wt(jt){return function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),function(zt,Vt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&("object"==typeof Vt||"function"==typeof Vt)?Vt:zt}(this,Ht.call(this,jt,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return function(jt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);jt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,zt):jt.__proto__=zt)}(Wt,Ht),Wt}(function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("../../core/Shader")).default);Xt.default=Yt},{"../../core/Shader":44}],178:[function(){Math.sign||(Math.sign=function(Yt){return 0===(Yt=+Yt)||isNaN(Yt)?Yt:0<Yt?1:-1})},{}],179:[function(Bt){var Yt=function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("object-assign"));Object.assign||(Object.assign=Yt.default)},{"object-assign":5}],180:[function(Bt){Bt("./Object.assign"),Bt("./requestAnimationFrame"),Bt("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Object.assign":179,"./requestAnimationFrame":181}],181:[function(){(function(Yt){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!Yt.performance||!Yt.performance.now){var Ht=Date.now();Yt.performance||(Yt.performance={}),Yt.performance.now=function(){return Date.now()-Ht}}for(var Wt=Date.now(),jt=["ms","moz","webkit","o"],zt=0,Vt;zt<jt.length&&!Yt.requestAnimationFrame;++zt)Vt=jt[zt],Yt.requestAnimationFrame=Yt[Vt+"RequestAnimationFrame"],Yt.cancelAnimationFrame=Yt[Vt+"CancelAnimationFrame"]||Yt[Vt+"CancelRequestAnimationFrame"];Yt.requestAnimationFrame||(Yt.requestAnimationFrame=function(qt){if("function"!=typeof qt)throw new TypeError(qt+"is not a function");var Kt=Date.now(),Qt=16+Wt-Kt;return 0>Qt&&(Qt=0),Wt=Kt,setTimeout(function(){Wt=Date.now(),qt(performance.now())},Qt)}),Yt.cancelAnimationFrame||(Yt.cancelAnimationFrame=function(qt){return clearTimeout(qt)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],182:[function(Bt,Gt,Xt){function Yt($t,en){var tn=!1;if($t&&$t._textures&&$t._textures.length)for(var nn=0;nn<$t._textures.length;nn++)if($t._textures[nn]instanceof Kt.Texture){var an=$t._textures[nn].baseTexture;-1===en.indexOf(an)&&(en.push(an),tn=!0)}return tn}function Ht($t,en){return $t instanceof Kt.BaseTexture&&(-1===en.indexOf($t)&&en.push($t),!0)}function Wt($t,en){if($t._texture&&$t._texture instanceof Kt.Texture){var tn=$t._texture.baseTexture;return-1===en.indexOf(tn)&&en.push(tn),!0}return!1}function jt($t,en){return en instanceof Kt.Text&&(en.updateText(!0),!0)}function zt($t,en){if(en instanceof Kt.TextStyle){var tn=en.toFontString();return Kt.TextMetrics.measureFont(tn),!0}return!1}function Vt($t,en){if($t instanceof Kt.Text){-1===en.indexOf($t.style)&&en.push($t.style),-1===en.indexOf($t)&&en.push($t);var tn=$t._texture.baseTexture;return-1===en.indexOf(tn)&&en.push(tn),!0}return!1}function qt($t,en){return $t instanceof Kt.TextStyle&&(-1===en.indexOf($t)&&en.push($t),!0)}Xt.__esModule=!0;var Kt=function($t){if($t&&$t.__esModule)return $t;var en={};if(null!=$t)for(var tn in $t)Object.prototype.hasOwnProperty.call($t,tn)&&(en[tn]=$t[tn]);return en.default=$t,en}(Bt("../core")),Qt=function($t){return $t&&$t.__esModule?$t:{default:$t}}(Bt("./limiters/CountLimiter")),Jt=Kt.ticker.shared;Kt.settings.UPLOADS_PER_FRAME=4;var Zt=function(){function $t(en){var tn=this;!function(nn,an){if(!(nn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,$t),this.limiter=new Qt.default(Kt.settings.UPLOADS_PER_FRAME),this.renderer=en,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){tn.queue&&tn.prepareItems()},this.registerFindHook(Vt),this.registerFindHook(qt),this.registerFindHook(Yt),this.registerFindHook(Ht),this.registerFindHook(Wt),this.registerUploadHook(jt),this.registerUploadHook(zt)}return $t.prototype.upload=function(en,tn){"function"==typeof en&&(tn=en,en=null),en&&this.add(en),this.queue.length?(tn&&this.completes.push(tn),this.ticking||(this.ticking=!0,Jt.addOnce(this.tick,this,Kt.UPDATE_PRIORITY.UTILITY))):tn&&tn()},$t.prototype.tick=function(){setTimeout(this.delayedTick,0)},$t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var en=this.queue[0],tn=!1;if(en&&!en._destroyed)for(var nn=0,an=this.uploadHooks.length;nn<an;nn++)if(this.uploadHooks[nn](this.uploadHookHelper,en)){this.queue.shift(),tn=!0;break}tn||this.queue.shift()}if(this.queue.length)Jt.addOnce(this.tick,this,Kt.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var rn=this.completes.slice(0);this.completes.length=0;for(var on=0,sn=rn.length;on<sn;on++)rn[on]()}},$t.prototype.registerFindHook=function(en){return en&&this.addHooks.push(en),this},$t.prototype.registerUploadHook=function(en){return en&&this.uploadHooks.push(en),this},$t.prototype.add=function(en){for(var tn=0,nn=this.addHooks.length;tn<nn&&!this.addHooks[tn](en,this.queue);tn++);if(en instanceof Kt.Container)for(var an=en.children.length-1;0<=an;an--)this.add(en.children[an]);return this},$t.prototype.destroy=function(){this.ticking&&Jt.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},$t}();Xt.default=Zt},{"../core":65,"./limiters/CountLimiter":185}],183:[function(Bt,Gt,Xt){function Yt(zt,Vt){if(Vt instanceof Ht.BaseTexture){var qt=Vt.source,Kt=0===qt.width?zt.canvas.width:Math.min(zt.canvas.width,qt.width),Qt=0===qt.height?zt.canvas.height:Math.min(zt.canvas.height,qt.height);return zt.ctx.drawImage(qt,0,0,Kt,Qt,0,0,zt.canvas.width,zt.canvas.height),!0}return!1}Xt.__esModule=!0;var Ht=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("../../core")),Wt=16,jt=function(zt){function Vt(qt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Kt=function(Qt,Jt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Qt}(this,zt.call(this,qt));return Kt.uploadHookHelper=Kt,Kt.canvas=document.createElement("canvas"),Kt.canvas.width=Wt,Kt.canvas.height=Wt,Kt.ctx=Kt.canvas.getContext("2d"),Kt.registerUploadHook(Yt),Kt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.destroy=function(){zt.prototype.destroy.call(this),this.ctx=null,this.canvas=null},Vt}(function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("../BasePrepare")).default);Xt.default=jt,Ht.CanvasRenderer.registerPlugin("prepare",jt)},{"../../core":65,"../BasePrepare":182}],184:[function(Bt,Gt,Xt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Ht=Bt("./webgl/WebGLPrepare");Object.defineProperty(Xt,"webgl",{enumerable:!0,get:function(){return Yt(Ht).default}});var Wt=Bt("./canvas/CanvasPrepare");Object.defineProperty(Xt,"canvas",{enumerable:!0,get:function(){return Yt(Wt).default}});var jt=Bt("./BasePrepare");Object.defineProperty(Xt,"BasePrepare",{enumerable:!0,get:function(){return Yt(jt).default}});var zt=Bt("./limiters/CountLimiter");Object.defineProperty(Xt,"CountLimiter",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./limiters/TimeLimiter");Object.defineProperty(Xt,"TimeLimiter",{enumerable:!0,get:function(){return Yt(Vt).default}})},{"./BasePrepare":182,"./canvas/CanvasPrepare":183,"./limiters/CountLimiter":185,"./limiters/TimeLimiter":186,"./webgl/WebGLPrepare":187}],185:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Ht(Wt){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.maxItemsPerFrame=Wt,this.itemsLeft=0}return Ht.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},Ht.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},Ht}();Xt.default=Yt},{}],186:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Yt=function(){function Ht(Wt){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.maxMilliseconds=Wt,this.frameStart=0}return Ht.prototype.beginFrame=function(){this.frameStart=Date.now()},Ht.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},Ht}();Xt.default=Yt},{}],187:[function(Bt,Gt,Xt){function Yt(Vt,qt){return qt instanceof jt.BaseTexture&&(qt._glTextures[Vt.CONTEXT_UID]||Vt.textureManager.updateTexture(qt),!0)}function Ht(Vt,qt){return qt instanceof jt.Graphics&&((qt.dirty||qt.clearDirty||!qt._webGL[Vt.plugins.graphics.CONTEXT_UID])&&Vt.plugins.graphics.updateGraphics(qt),!0)}function Wt(Vt,qt){return Vt instanceof jt.Graphics&&(qt.push(Vt),!0)}Xt.__esModule=!0;var jt=function(Vt){if(Vt&&Vt.__esModule)return Vt;var qt={};if(null!=Vt)for(var Kt in Vt)Object.prototype.hasOwnProperty.call(Vt,Kt)&&(qt[Kt]=Vt[Kt]);return qt.default=Vt,qt}(Bt("../../core")),zt=function(Vt){function qt(Kt){!function(Jt,Zt){if(!(Jt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,qt);var Qt=function(Jt,Zt){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&("object"==typeof Zt||"function"==typeof Zt)?Zt:Jt}(this,Vt.call(this,Kt));return Qt.uploadHookHelper=Qt.renderer,Qt.registerFindHook(Wt),Qt.registerUploadHook(Yt),Qt.registerUploadHook(Ht),Qt}return function(Kt,Qt){if("function"!=typeof Qt&&null!==Qt)throw new TypeError("Super expression must either be null or a function, not "+typeof Qt);Kt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Qt):Kt.__proto__=Qt)}(qt,Vt),qt}(function(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}(Bt("../BasePrepare")).default);Xt.default=zt,jt.WebGLRenderer.registerPlugin("prepare",zt)},{"../../core":65,"../BasePrepare":182}],188:[function(Bt,Gt,Xt){(function(Yt){function Ht(an){if(an&&an.__esModule)return an;var rn={};if(null!=an)for(var on in an)Object.prototype.hasOwnProperty.call(an,on)&&(rn[on]=an[on]);return rn.default=an,rn}Xt.__esModule=!0,Xt.loader=Xt.prepare=Xt.particles=Xt.mesh=Xt.loaders=Xt.interaction=Xt.filters=Xt.extras=Xt.extract=Xt.accessibility=void 0;var Wt=Bt("./polyfill");Object.keys(Wt).forEach(function(an){"default"!==an&&"__esModule"!==an&&Object.defineProperty(Xt,an,{enumerable:!0,get:function(){return Wt[an]}})});var jt=Bt("./core");Object.keys(jt).forEach(function(an){"default"!==an&&"__esModule"!==an&&Object.defineProperty(Xt,an,{enumerable:!0,get:function(){return jt[an]}})});var zt=function(an){return an&&an.__esModule?an:{default:an}}(Bt("./deprecation")),Vt=Ht(Bt("./accessibility")),qt=Ht(Bt("./extract")),Kt=Ht(Bt("./extras")),Qt=Ht(Bt("./filters")),Jt=Ht(Bt("./interaction")),Zt=Ht(Bt("./loaders")),$t=Ht(Bt("./mesh")),en=Ht(Bt("./particles")),tn=Ht(Bt("./prepare"));jt.utils.mixins.performMixins();var nn=Zt.shared||null;Xt.accessibility=Vt,Xt.extract=qt,Xt.extras=Kt,Xt.filters=Qt,Xt.interaction=Jt,Xt.loaders=Zt,Xt.mesh=$t,Xt.particles=en,Xt.prepare=tn,Xt.loader=nn,"function"==typeof zt.default&&(0,zt.default)(Xt),Yt.PIXI=Xt}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./accessibility":42,"./core":65,"./deprecation":130,"./extract":132,"./extras":141,"./filters":152,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":180,"./prepare":184}]},{},[188])(188)}),function(){var Bt=function(){this.init()};Bt.prototype={init:function(){var Kt=this||Gt;return Kt._counter=1e3,Kt._codecs={},Kt._howls=[],Kt._muted=!1,Kt._volume=1,Kt._canPlayEvent="canplaythrough",Kt._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,Kt.masterGain=null,Kt.noAudio=!1,Kt.usingWebAudio=!0,Kt.autoSuspend=!0,Kt.ctx=null,Kt.mobileAutoEnable=!0,Kt._setup(),Kt},volume:function(Kt){var Qt=this||Gt;if(Kt=parseFloat(Kt),Qt.ctx||qt(),void 0!==Kt&&0<=Kt&&1>=Kt){if(Qt._volume=Kt,Qt._muted)return Qt;Qt.usingWebAudio&&(Qt.masterGain.gain.value=Kt);for(var Jt=0;Jt<Qt._howls.length;Jt++)if(!Qt._howls[Jt]._webAudio)for(var Zt=Qt._howls[Jt]._getSoundIds(),$t=0,en;$t<Zt.length;$t++)en=Qt._howls[Jt]._soundById(Zt[$t]),en&&en._node&&(en._node.volume=en._volume*Kt);return Qt}return Qt._volume},mute:function(Kt){var Qt=this||Gt;Qt.ctx||qt(),Qt._muted=Kt,Qt.usingWebAudio&&(Qt.masterGain.gain.value=Kt?0:Qt._volume);for(var Jt=0;Jt<Qt._howls.length;Jt++)if(!Qt._howls[Jt]._webAudio)for(var Zt=Qt._howls[Jt]._getSoundIds(),$t=0,en;$t<Zt.length;$t++)en=Qt._howls[Jt]._soundById(Zt[$t]),en&&en._node&&(en._node.muted=!!Kt||en._muted);return Qt},unload:function(){for(var Kt=this||Gt,Qt=Kt._howls.length-1;0<=Qt;Qt--)Kt._howls[Qt].unload();return Kt.usingWebAudio&&Kt.ctx&&void 0!==Kt.ctx.close&&(Kt.ctx.close(),Kt.ctx=null,qt()),Kt},codecs:function(Kt){return(this||Gt)._codecs[Kt.replace(/^x-/,"")]},_setup:function(){var Kt=this||Gt;if(Kt.state=Kt.ctx?Kt.ctx.state||"running":"running",Kt._autoSuspend(),!Kt.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===new Audio().oncanplaythrough&&(Kt._canPlayEvent="canplay")}catch(Qt){Kt.noAudio=!0}else Kt.noAudio=!0;try{new Audio().muted&&(Kt.noAudio=!0)}catch(Qt){}return Kt.noAudio||Kt._setupCodecs(),Kt},_setupCodecs:function(){var Kt=this||Gt,Qt=null;try{Qt="undefined"==typeof Audio?null:new Audio}catch(en){return Kt}if(!Qt||"function"!=typeof Qt.canPlayType)return Kt;var Jt=Qt.canPlayType("audio/mpeg;").replace(/^no$/,""),Zt=Kt._navigator&&Kt._navigator.userAgent.match(/OPR\/([0-6].)/g),$t=Zt&&33>parseInt(Zt[0].split("/")[1],10);return Kt._codecs={mp3:!$t&&(Jt||Qt.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!Jt,opus:!!Qt.canPlayType("audio/ogg; codecs=\"opus\"").replace(/^no$/,""),ogg:!!Qt.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/,""),oga:!!Qt.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/,""),wav:!!Qt.canPlayType("audio/wav; codecs=\"1\"").replace(/^no$/,""),aac:!!Qt.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!Qt.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(Qt.canPlayType("audio/x-m4a;")||Qt.canPlayType("audio/m4a;")||Qt.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(Qt.canPlayType("audio/x-mp4;")||Qt.canPlayType("audio/mp4;")||Qt.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!Qt.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/,""),webm:!!Qt.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/,""),dolby:!!Qt.canPlayType("audio/mp4; codecs=\"ec-3\"").replace(/^no$/,""),flac:!!(Qt.canPlayType("audio/x-flac;")||Qt.canPlayType("audio/flac;")).replace(/^no$/,"")},Kt},_enableMobileAudio:function(){var Kt=this||Gt,Qt=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(Kt._navigator&&Kt._navigator.userAgent),Jt=!!("ontouchend"in window||Kt._navigator&&0<Kt._navigator.maxTouchPoints||Kt._navigator&&0<Kt._navigator.msMaxTouchPoints);if(!Kt._mobileEnabled&&Kt.ctx&&(Qt||Jt)){Kt._mobileEnabled=!1,Kt._mobileUnloaded||44100===Kt.ctx.sampleRate||(Kt._mobileUnloaded=!0,Kt.unload()),Kt._scratchBuffer=Kt.ctx.createBuffer(1,1,22050);var Zt=function(){Gt._autoResume();var $t=Kt.ctx.createBufferSource();$t.buffer=Kt._scratchBuffer,$t.connect(Kt.ctx.destination),void 0===$t.start?$t.noteOn(0):$t.start(0),"function"==typeof Kt.ctx.resume&&Kt.ctx.resume(),$t.onended=function(){$t.disconnect(0),Kt._mobileEnabled=!0,Kt.mobileAutoEnable=!1,document.removeEventListener("touchstart",Zt,!0),document.removeEventListener("touchend",Zt,!0)}};return document.addEventListener("touchstart",Zt,!0),document.addEventListener("touchend",Zt,!0),Kt}},_autoSuspend:function(){var Kt=this;if(Kt.autoSuspend&&Kt.ctx&&void 0!==Kt.ctx.suspend&&Gt.usingWebAudio){for(var Qt=0;Qt<Kt._howls.length;Qt++)if(Kt._howls[Qt]._webAudio)for(var Jt=0;Jt<Kt._howls[Qt]._sounds.length;Jt++)if(!Kt._howls[Qt]._sounds[Jt]._paused)return Kt;return Kt._suspendTimer&&clearTimeout(Kt._suspendTimer),Kt._suspendTimer=setTimeout(function(){Kt.autoSuspend&&(Kt._suspendTimer=null,Kt.state="suspending",Kt.ctx.suspend().then(function(){Kt.state="suspended",Kt._resumeAfterSuspend&&(delete Kt._resumeAfterSuspend,Kt._autoResume())}))},3e4),Kt}},_autoResume:function(){var Kt=this;if(Kt.ctx&&void 0!==Kt.ctx.resume&&Gt.usingWebAudio)return"running"===Kt.state&&Kt._suspendTimer?(clearTimeout(Kt._suspendTimer),Kt._suspendTimer=null):"suspended"===Kt.state?(Kt.ctx.resume().then(function(){Kt.state="running";for(var Qt=0;Qt<Kt._howls.length;Qt++)Kt._howls[Qt]._emit("resume")}),Kt._suspendTimer&&(clearTimeout(Kt._suspendTimer),Kt._suspendTimer=null)):"suspending"===Kt.state&&(Kt._resumeAfterSuspend=!0),Kt}};var Gt=new Bt,Xt=function(Kt){Kt.src&&0!==Kt.src.length?this.init(Kt):console.error("An array of source files must be passed with any new Howl.")};Xt.prototype={init:function(Kt){var Qt=this;return Gt.ctx||qt(),Qt._autoplay=Kt.autoplay||!1,Qt._format="string"==typeof Kt.format?[Kt.format]:Kt.format,Qt._html5=Kt.html5||!1,Qt._muted=Kt.mute||!1,Qt._loop=Kt.loop||!1,Qt._pool=Kt.pool||5,Qt._preload="boolean"!=typeof Kt.preload||Kt.preload,Qt._rate=Kt.rate||1,Qt._sprite=Kt.sprite||{},Qt._src="string"==typeof Kt.src?[Kt.src]:Kt.src,Qt._volume=void 0===Kt.volume?1:Kt.volume,Qt._xhrWithCredentials=Kt.xhrWithCredentials||!1,Qt._duration=0,Qt._state="unloaded",Qt._sounds=[],Qt._endTimers={},Qt._queue=[],Qt._onend=Kt.onend?[{fn:Kt.onend}]:[],Qt._onfade=Kt.onfade?[{fn:Kt.onfade}]:[],Qt._onload=Kt.onload?[{fn:Kt.onload}]:[],Qt._onloaderror=Kt.onloaderror?[{fn:Kt.onloaderror}]:[],Qt._onplayerror=Kt.onplayerror?[{fn:Kt.onplayerror}]:[],Qt._onpause=Kt.onpause?[{fn:Kt.onpause}]:[],Qt._onplay=Kt.onplay?[{fn:Kt.onplay}]:[],Qt._onstop=Kt.onstop?[{fn:Kt.onstop}]:[],Qt._onmute=Kt.onmute?[{fn:Kt.onmute}]:[],Qt._onvolume=Kt.onvolume?[{fn:Kt.onvolume}]:[],Qt._onrate=Kt.onrate?[{fn:Kt.onrate}]:[],Qt._onseek=Kt.onseek?[{fn:Kt.onseek}]:[],Qt._onresume=[],Qt._webAudio=Gt.usingWebAudio&&!Qt._html5,void 0!==Gt.ctx&&Gt.ctx&&Gt.mobileAutoEnable&&Gt._enableMobileAudio(),Gt._howls.push(Qt),Qt._autoplay&&Qt._queue.push({event:"play",action:function(){Qt.play()}}),Qt._preload&&Qt.load(),Qt},load:function(){var Kt=null;if(Gt.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var Qt=0;Qt<this._src.length;Qt++){var Jt,Zt;if(this._format&&this._format[Qt])Jt=this._format[Qt];else{if("string"!=typeof(Zt=this._src[Qt])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(Jt=/^data:audio\/([^;,]+);/i.exec(Zt))||(Jt=/\.([^.]+)$/.exec(Zt.split("?",1)[0])),Jt&&(Jt=Jt[1].toLowerCase())}if(Jt||console.warn("No file extension was found. Consider using the \"format\" property or specify an extension."),Jt&&Gt.codecs(Jt)){Kt=this._src[Qt];break}}if(Kt)return this._src=Kt,this._state="loading","https:"===window.location.protocol&&"http:"===Kt.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new Yt(this),this._webAudio&&Wt(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(Kt,Qt){var Jt=this,Zt=null;if("number"==typeof Kt)Zt=Kt,Kt=null;else{if("string"==typeof Kt&&"loaded"===Jt._state&&!Jt._sprite[Kt])return null;if(void 0===Kt){Kt="__default";for(var $t=0,en=0;en<Jt._sounds.length;en++)Jt._sounds[en]._paused&&!Jt._sounds[en]._ended&&($t++,Zt=Jt._sounds[en]._id);1===$t?Kt=null:Zt=null}}var tn=Zt?Jt._soundById(Zt):Jt._inactiveSound();if(!tn)return null;if(Zt&&!Kt&&(Kt=tn._sprite||"__default"),"loaded"!==Jt._state){tn._sprite=Kt,tn._ended=!1;var nn=tn._id;return Jt._queue.push({event:"play",action:function(){Jt.play(nn)}}),nn}if(Zt&&!tn._paused)return Qt||setTimeout(function(){Jt._emit("play",tn._id)},0),tn._id;Jt._webAudio&&Gt._autoResume();var an=Math.max(0,0<tn._seek?tn._seek:Jt._sprite[Kt][0]/1e3),rn=Math.max(0,(Jt._sprite[Kt][0]+Jt._sprite[Kt][1])/1e3-an),on=1e3*rn/Math.abs(tn._rate);tn._paused=!1,tn._ended=!1,tn._sprite=Kt,tn._seek=an,tn._start=Jt._sprite[Kt][0]/1e3,tn._stop=(Jt._sprite[Kt][0]+Jt._sprite[Kt][1])/1e3,tn._loop=tn._loop||Jt._sprite[Kt][2];var sn=tn._node;if(Jt._webAudio){var dn=function(){Jt._refreshBuffer(tn);var cn=tn._muted||Jt._muted?0:tn._volume;sn.gain.setValueAtTime(cn,Gt.ctx.currentTime),tn._playStart=Gt.ctx.currentTime,void 0===sn.bufferSource.start?tn._loop?sn.bufferSource.noteGrainOn(0,an,86400):sn.bufferSource.noteGrainOn(0,an,rn):tn._loop?sn.bufferSource.start(0,an,86400):sn.bufferSource.start(0,an,rn),on!=1/0&&(Jt._endTimers[tn._id]=setTimeout(Jt._ended.bind(Jt,tn),on)),Qt||setTimeout(function(){Jt._emit("play",tn._id)},0)};"running"===Gt.state?dn():(Jt.once("resume",dn),Jt._clearTimer(tn._id))}else{var ln=function(){sn.currentTime=an,sn.muted=tn._muted||Jt._muted||Gt._muted||sn.muted,sn.volume=tn._volume*Gt.volume(),sn.playbackRate=tn._rate;try{if(sn.play(),sn.paused)return void Jt._emit("playerror",tn._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");on!=1/0&&(Jt._endTimers[tn._id]=setTimeout(Jt._ended.bind(Jt,tn),on)),Qt||Jt._emit("play",tn._id)}catch(cn){Jt._emit("playerror",tn._id,cn)}},un=window&&window.ejecta||!sn.readyState&&Gt._navigator.isCocoonJS;if(4===sn.readyState||un)ln();else{var pn=function(){ln(),sn.removeEventListener(Gt._canPlayEvent,pn,!1)};sn.addEventListener(Gt._canPlayEvent,pn,!1),Jt._clearTimer(tn._id)}}return tn._id},pause:function(Kt){var Qt=this;if("loaded"!==Qt._state)return Qt._queue.push({event:"pause",action:function(){Qt.pause(Kt)}}),Qt;for(var Jt=Qt._getSoundIds(Kt),Zt=0;Zt<Jt.length;Zt++){Qt._clearTimer(Jt[Zt]);var $t=Qt._soundById(Jt[Zt]);if($t&&!$t._paused&&($t._seek=Qt.seek(Jt[Zt]),$t._rateSeek=0,$t._paused=!0,Qt._stopFade(Jt[Zt]),$t._node))if(Qt._webAudio){if(!$t._node.bufferSource)continue;void 0===$t._node.bufferSource.stop?$t._node.bufferSource.noteOff(0):$t._node.bufferSource.stop(0),Qt._cleanBuffer($t._node)}else isNaN($t._node.duration)&&$t._node.duration!==1/0||$t._node.pause();arguments[1]||Qt._emit("pause",$t?$t._id:null)}return Qt},stop:function(Kt,Qt){var Jt=this;if("loaded"!==Jt._state)return Jt._queue.push({event:"stop",action:function(){Jt.stop(Kt)}}),Jt;for(var Zt=Jt._getSoundIds(Kt),$t=0;$t<Zt.length;$t++){Jt._clearTimer(Zt[$t]);var en=Jt._soundById(Zt[$t]);en&&(en._seek=en._start||0,en._rateSeek=0,en._paused=!0,en._ended=!0,Jt._stopFade(Zt[$t]),en._node&&(Jt._webAudio?en._node.bufferSource&&(void 0===en._node.bufferSource.stop?en._node.bufferSource.noteOff(0):en._node.bufferSource.stop(0),en._panner&&(en._panner.disconnect(),en._panner=null),Jt._cleanBuffer(en._node)):isNaN(en._node.duration)&&en._node.duration!==1/0||(en._node.currentTime=en._start||0,en._node.pause())),Qt||Jt._emit("stop",en._id))}return Jt},mute:function(Kt,Qt){var Jt=this;if("loaded"!==Jt._state)return Jt._queue.push({event:"mute",action:function(){Jt.mute(Kt,Qt)}}),Jt;if(void 0===Qt){if("boolean"!=typeof Kt)return Jt._muted;Jt._muted=Kt}for(var Zt=Jt._getSoundIds(Qt),$t=0,en;$t<Zt.length;$t++)en=Jt._soundById(Zt[$t]),en&&(en._muted=Kt,Jt._webAudio&&en._node?en._node.gain.setValueAtTime(Kt?0:en._volume,Gt.ctx.currentTime):en._node&&(en._node.muted=!!Gt._muted||Kt),Jt._emit("mute",en._id));return Jt},volume:function(){var Jt=this,Zt=arguments,Kt,Qt;if(0===Zt.length)return Jt._volume;1===Zt.length||2===Zt.length&&void 0===Zt[1]?0<=Jt._getSoundIds().indexOf(Zt[0])?Qt=parseInt(Zt[0],10):Kt=parseFloat(Zt[0]):2<=Zt.length&&(Kt=parseFloat(Zt[0]),Qt=parseInt(Zt[1],10));var $t;if(!(void 0!==Kt&&0<=Kt&&1>=Kt))return($t=Qt?Jt._soundById(Qt):Jt._sounds[0])?$t._volume:0;if("loaded"!==Jt._state)return Jt._queue.push({event:"volume",action:function(){Jt.volume.apply(Jt,Zt)}}),Jt;void 0===Qt&&(Jt._volume=Kt),Qt=Jt._getSoundIds(Qt);for(var en=0;en<Qt.length;en++)($t=Jt._soundById(Qt[en]))&&($t._volume=Kt,Zt[2]||Jt._stopFade(Qt[en]),Jt._webAudio&&$t._node&&!$t._muted?$t._node.gain.setValueAtTime(Kt,Gt.ctx.currentTime):$t._node&&!$t._muted&&($t._node.volume=Kt*Gt.volume()),Jt._emit("volume",$t._id));return Jt},fade:function(Kt,Qt,Jt,Zt,$t){var en=this;if("loaded"!==en._state)return en._queue.push({event:"fade",action:function(){en.fade(Kt,Qt,Jt,Zt)}}),en;null==$t&&en.volume(Kt,Zt);for(var tn=en._getSoundIds(Zt),nn=0,an;nn<tn.length;nn++)if(an=en._soundById(tn[nn]),an&&(Zt||en._stopFade(tn[nn]),en._webAudio&&!an._muted)){var rn=Gt.ctx.currentTime;an._volume=Kt,null==$t&&an._node.gain.setValueAtTime(Kt,rn),an._node.gain.linearRampToValueAtTime(Qt,rn+Jt/1e3)}return en},_startFadeInterval:function(Kt,Qt,Jt,Zt,$t){var en=this,tn=Qt,nn=Qt>Jt?"out":"in",an=Math.abs(Qt-Jt)/.01,rn=0<an?Zt/an:Zt;4>rn&&(an=Math.ceil(an/(4/rn)),rn=4),Kt._interval=setInterval(function(){0<an&&(tn+="in"==nn?.01:-.01),tn=Math.max(0,tn),tn=Math.min(1,tn),tn=Math.round(100*tn)/100,en._webAudio?(void 0===$t&&(en._volume=tn),Kt._volume=tn):en.volume(tn,Kt._id,!0),(Jt<Qt&&tn<=Jt||Jt>Qt&&tn>=Jt)&&(clearInterval(Kt._interval),Kt._interval=null,en.volume(Jt,Kt._id),en._emit("fade",Kt._id))},rn)},_stopFade:function(Kt){var Qt=this._soundById(Kt);return Qt&&Qt._interval&&(this._webAudio&&Qt._node.gain.cancelScheduledValues(Gt.ctx.currentTime),clearInterval(Qt._interval),Qt._interval=null,this._emit("fade",Kt)),this},loop:function(){var Zt=arguments,Kt,Qt,Jt;if(0===Zt.length)return this._loop;if(1===Zt.length){if("boolean"!=typeof Zt[0])return!!(Jt=this._soundById(parseInt(Zt[0],10)))&&Jt._loop;Kt=Zt[0],this._loop=Kt}else 2===Zt.length&&(Kt=Zt[0],Qt=parseInt(Zt[1],10));for(var $t=this._getSoundIds(Qt),en=0;en<$t.length;en++)(Jt=this._soundById($t[en]))&&(Jt._loop=Kt,this._webAudio&&Jt._node&&Jt._node.bufferSource&&(Jt._node.bufferSource.loop=Kt,Kt&&(Jt._node.bufferSource.loopStart=Jt._start||0,Jt._node.bufferSource.loopEnd=Jt._stop)));return this},rate:function(){var Jt=this,Zt=arguments,Kt,Qt;0===Zt.length?Qt=Jt._sounds[0]._id:1===Zt.length?0<=Jt._getSoundIds().indexOf(Zt[0])?Qt=parseInt(Zt[0],10):Kt=parseFloat(Zt[0]):2===Zt.length&&(Kt=parseFloat(Zt[0]),Qt=parseInt(Zt[1],10));var $t;if("number"!=typeof Kt)return($t=Jt._soundById(Qt))?$t._rate:Jt._rate;if("loaded"!==Jt._state)return Jt._queue.push({event:"rate",action:function(){Jt.rate.apply(Jt,Zt)}}),Jt;void 0===Qt&&(Jt._rate=Kt),Qt=Jt._getSoundIds(Qt);for(var en=0;en<Qt.length;en++)if($t=Jt._soundById(Qt[en])){$t._rateSeek=Jt.seek(Qt[en]),$t._playStart=Jt._webAudio?Gt.ctx.currentTime:$t._playStart,$t._rate=Kt,Jt._webAudio&&$t._node&&$t._node.bufferSource?$t._node.bufferSource.playbackRate.value=Kt:$t._node&&($t._node.playbackRate=Kt);var tn=Jt.seek(Qt[en]),nn=1e3*((Jt._sprite[$t._sprite][0]+Jt._sprite[$t._sprite][1])/1e3-tn)/Math.abs($t._rate);!Jt._endTimers[Qt[en]]&&$t._paused||(Jt._clearTimer(Qt[en]),Jt._endTimers[Qt[en]]=setTimeout(Jt._ended.bind(Jt,$t),nn)),Jt._emit("rate",$t._id)}return Jt},seek:function(){var Jt=this,Zt=arguments,Kt,Qt;if(0===Zt.length?Qt=Jt._sounds[0]._id:1===Zt.length?0<=Jt._getSoundIds().indexOf(Zt[0])?Qt=parseInt(Zt[0],10):Jt._sounds.length&&(Qt=Jt._sounds[0]._id,Kt=parseFloat(Zt[0])):2===Zt.length&&(Kt=parseFloat(Zt[0]),Qt=parseInt(Zt[1],10)),void 0===Qt)return Jt;if("loaded"!==Jt._state)return Jt._queue.push({event:"seek",action:function(){Jt.seek.apply(Jt,Zt)}}),Jt;var $t=Jt._soundById(Qt);if($t){if(!("number"==typeof Kt&&0<=Kt)){if(Jt._webAudio){var en=Jt.playing(Qt)?Gt.ctx.currentTime-$t._playStart:0,tn=$t._rateSeek?$t._rateSeek-$t._seek:0;return $t._seek+(tn+en*Math.abs($t._rate))}return $t._node.currentTime}var nn=Jt.playing(Qt);nn&&Jt.pause(Qt,!0),$t._seek=Kt,$t._ended=!1,Jt._clearTimer(Qt),nn&&Jt.play(Qt,!0),!Jt._webAudio&&$t._node&&($t._node.currentTime=Kt),Jt._emit("seek",Qt)}return Jt},playing:function(Kt){if("number"==typeof Kt){var Qt=this._soundById(Kt);return!!Qt&&!Qt._paused}for(var Jt=0;Jt<this._sounds.length;Jt++)if(!this._sounds[Jt]._paused)return!0;return!1},duration:function(Kt){var Qt=this._duration,Jt=this._soundById(Kt);return Jt&&(Qt=this._sprite[Jt._sprite][1]/1e3),Qt},state:function(){return this._state},unload:function(){for(var Kt=this,Qt=Kt._sounds,Jt=0;Jt<Qt.length;Jt++){(Qt[Jt]._paused||Kt.stop(Qt[Jt]._id),!Kt._webAudio)&&(/MSIE |Trident\//.test(Gt._navigator&&Gt._navigator.userAgent)||(Qt[Jt]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),Qt[Jt]._node.removeEventListener("error",Qt[Jt]._errorFn,!1),Qt[Jt]._node.removeEventListener(Gt._canPlayEvent,Qt[Jt]._loadFn,!1)),delete Qt[Jt]._node,Kt._clearTimer(Qt[Jt]._id);var Zt=Gt._howls.indexOf(Kt);0<=Zt&&Gt._howls.splice(Zt,1)}var $t=!0;for(Jt=0;Jt<Gt._howls.length;Jt++)if(Gt._howls[Jt]._src===Kt._src){$t=!1;break}return Ht&&$t&&delete Ht[Kt._src],Gt.noAudio=!1,Kt._state="unloaded",Kt._sounds=[],Kt=null,null},on:function(Kt,Qt,Jt,Zt){var $t=this["_on"+Kt];return"function"==typeof Qt&&$t.push(Zt?{id:Jt,fn:Qt,once:Zt}:{id:Jt,fn:Qt}),this},off:function(Kt,Qt,Jt){var Zt=this["_on"+Kt],$t=0;if("number"==typeof Qt&&(Jt=Qt,Qt=null),Qt||Jt)for($t=0;$t<Zt.length;$t++){var en=Jt===Zt[$t].id;if(Qt===Zt[$t].fn&&en||!Qt&&en){Zt.splice($t,1);break}}else if(Kt)this["_on"+Kt]=[];else{var tn=Object.keys(this);for($t=0;$t<tn.length;$t++)0===tn[$t].indexOf("_on")&&Array.isArray(this[tn[$t]])&&(this[tn[$t]]=[])}return this},once:function(Kt,Qt,Jt){return this.on(Kt,Qt,Jt,1),this},_emit:function(Kt,Qt,Jt){for(var Zt=this["_on"+Kt],$t=Zt.length-1;0<=$t;$t--)Zt[$t].id&&Zt[$t].id!==Qt&&"load"!==Kt||(setTimeout(function(en){en.call(this,Qt,Jt)}.bind(this,Zt[$t].fn),0),Zt[$t].once&&this.off(Kt,Zt[$t].fn,Zt[$t].id));return this},_loadQueue:function(){var Kt=this;if(0<Kt._queue.length){var Qt=Kt._queue[0];Kt.once(Qt.event,function(){Kt._queue.shift(),Kt._loadQueue()}),Qt.action()}return Kt},_ended:function(Kt){var Qt=Kt._sprite;if(!this._webAudio&&Kt._node&&!Kt._node.paused)return setTimeout(this._ended.bind(this,Kt),100),this;var Jt=Kt._loop||this._sprite[Qt][2];if(this._emit("end",Kt._id),!this._webAudio&&Jt&&this.stop(Kt._id,!0).play(Kt._id),this._webAudio&&Jt){this._emit("play",Kt._id),Kt._seek=Kt._start||0,Kt._rateSeek=0,Kt._playStart=Gt.ctx.currentTime;var Zt=1e3*(Kt._stop-Kt._start)/Math.abs(Kt._rate);this._endTimers[Kt._id]=setTimeout(this._ended.bind(this,Kt),Zt)}return this._webAudio&&!Jt&&(Kt._paused=!0,Kt._ended=!0,Kt._seek=Kt._start||0,Kt._rateSeek=0,this._clearTimer(Kt._id),this._cleanBuffer(Kt._node),Gt._autoSuspend()),this._webAudio||Jt||this.stop(Kt._id),this},_clearTimer:function(Kt){return this._endTimers[Kt]&&(clearTimeout(this._endTimers[Kt]),delete this._endTimers[Kt]),this},_soundById:function(Kt){for(var Qt=0;Qt<this._sounds.length;Qt++)if(Kt===this._sounds[Qt]._id)return this._sounds[Qt];return null},_inactiveSound:function(){this._drain();for(var Kt=0;Kt<this._sounds.length;Kt++)if(this._sounds[Kt]._ended)return this._sounds[Kt].reset();return new Yt(this)},_drain:function(){var Kt=this._pool,Qt=0,Jt=0;if(!(this._sounds.length<Kt)){for(Jt=0;Jt<this._sounds.length;Jt++)this._sounds[Jt]._ended&&Qt++;for(Jt=this._sounds.length-1;0<=Jt;Jt--){if(Qt<=Kt)return;this._sounds[Jt]._ended&&(this._webAudio&&this._sounds[Jt]._node&&this._sounds[Jt]._node.disconnect(0),this._sounds.splice(Jt,1),Qt--)}}},_getSoundIds:function(Kt){if(void 0===Kt){for(var Qt=[],Jt=0;Jt<this._sounds.length;Jt++)Qt.push(this._sounds[Jt]._id);return Qt}return[Kt]},_refreshBuffer:function(Kt){return Kt._node.bufferSource=Gt.ctx.createBufferSource(),Kt._node.bufferSource.buffer=Ht[this._src],Kt._panner?Kt._node.bufferSource.connect(Kt._panner):Kt._node.bufferSource.connect(Kt._node),Kt._node.bufferSource.loop=Kt._loop,Kt._loop&&(Kt._node.bufferSource.loopStart=Kt._start||0,Kt._node.bufferSource.loopEnd=Kt._stop),Kt._node.bufferSource.playbackRate.value=Kt._rate,this},_cleanBuffer:function(Kt){if(this._scratchBuffer){Kt.bufferSource.onended=null,Kt.bufferSource.disconnect(0);try{Kt.bufferSource.buffer=this._scratchBuffer}catch(Qt){}}return Kt.bufferSource=null,this}};var Yt=function(Kt){this._parent=Kt,this.init()};Yt.prototype={init:function(){var Kt=this._parent;return this._muted=Kt._muted,this._loop=Kt._loop,this._volume=Kt._volume,this._rate=Kt._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++Gt._counter,Kt._sounds.push(this),this.create(),this},create:function(){var Kt=this._parent,Qt=Gt._muted||this._muted||this._parent._muted?0:this._volume;return Kt._webAudio?(this._node=void 0===Gt.ctx.createGain?Gt.ctx.createGainNode():Gt.ctx.createGain(),this._node.gain.setValueAtTime(Qt,Gt.ctx.currentTime),this._node.paused=!0,this._node.connect(Gt.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(Gt._canPlayEvent,this._loadFn,!1),this._node.src=Kt._src,this._node.preload="auto",this._node.volume=Qt*Gt.volume(),this._node.load()),this},reset:function(){var Kt=this._parent;return this._muted=Kt._muted,this._loop=Kt._loop,this._volume=Kt._volume,this._rate=Kt._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++Gt._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var Kt=this._parent;Kt._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(Kt._sprite).length&&(Kt._sprite={__default:[0,1e3*Kt._duration]}),"loaded"!==Kt._state&&(Kt._state="loaded",Kt._emit("load"),Kt._loadQueue()),this._node.removeEventListener(Gt._canPlayEvent,this._loadFn,!1)}};var Ht={},Wt=function(Kt){var Qt=Kt._src;if(Ht[Qt])return Kt._duration=Ht[Qt].duration,void Vt(Kt);if(/^data:[^;]+;base64,/.test(Qt)){for(var Jt=atob(Qt.split(",")[1]),Zt=new Uint8Array(Jt.length),$t=0;$t<Jt.length;++$t)Zt[$t]=Jt.charCodeAt($t);zt(Zt.buffer,Kt)}else{var en=new XMLHttpRequest;en.open("GET",Qt,!0),en.withCredentials=Kt._xhrWithCredentials,en.responseType="arraybuffer",en.onload=function(){var tn=(en.status+"")[0];"0"===tn||"2"===tn||"3"===tn?zt(en.response,Kt):Kt._emit("loaderror",null,"Failed loading audio file with status: "+en.status+".")},en.onerror=function(){Kt._webAudio&&(Kt._html5=!0,Kt._webAudio=!1,Kt._sounds=[],delete Ht[Qt],Kt.load())},jt(en)}},jt=function(Kt){try{Kt.send()}catch(Qt){Kt.onerror()}},zt=function(Kt,Qt){Gt.ctx.decodeAudioData(Kt,function(Jt){Jt&&0<Qt._sounds.length&&(Ht[Qt._src]=Jt,Vt(Qt,Jt))},function(){Qt._emit("loaderror",null,"Decoding audio data failed.")})},Vt=function(Kt,Qt){Qt&&!Kt._duration&&(Kt._duration=Qt.duration),0===Object.keys(Kt._sprite).length&&(Kt._sprite={__default:[0,1e3*Kt._duration]}),"loaded"!==Kt._state&&(Kt._state="loaded",Kt._emit("load"),Kt._loadQueue())},qt=function(){try{"undefined"==typeof AudioContext?"undefined"==typeof webkitAudioContext?Gt.usingWebAudio=!1:Gt.ctx=new webkitAudioContext:Gt.ctx=new AudioContext}catch($t){Gt.usingWebAudio=!1}var Kt=/iP(hone|od|ad)/.test(Gt._navigator&&Gt._navigator.platform),Qt=Gt._navigator&&Gt._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),Jt=Qt?parseInt(Qt[1],10):null;if(Kt&&Jt&&9>Jt){var Zt=/safari/.test(Gt._navigator&&Gt._navigator.userAgent.toLowerCase());(Gt._navigator&&Gt._navigator.standalone&&!Zt||Gt._navigator&&!Gt._navigator.standalone&&!Zt)&&(Gt.usingWebAudio=!1)}Gt.usingWebAudio&&(Gt.masterGain=void 0===Gt.ctx.createGain?Gt.ctx.createGainNode():Gt.ctx.createGain(),Gt.masterGain.gain.value=Gt._muted?0:1,Gt.masterGain.connect(Gt.ctx.destination)),Gt._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:Gt,Howl:Xt}}),"undefined"!=typeof exports&&(exports.Howler=Gt,exports.Howl=Xt),"undefined"==typeof window?"undefined"!=typeof global&&(global.HowlerGlobal=Bt,global.Howler=Gt,global.Howl=Xt,global.Sound=Yt):(window.HowlerGlobal=Bt,window.Howler=Gt,window.Howl=Xt,window.Sound=Yt)}(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(Gt){if(!this.ctx||!this.ctx.listener)return this;for(var Xt=this._howls.length-1;0<=Xt;Xt--)this._howls[Xt].stereo(Gt);return this},HowlerGlobal.prototype.pos=function(Gt,Xt,Yt){return this.ctx&&this.ctx.listener?(Xt="number"==typeof Xt?Xt:this._pos[1],Yt="number"==typeof Yt?Yt:this._pos[2],"number"==typeof Gt?(this._pos=[Gt,Xt,Yt],this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this):this._pos):this},HowlerGlobal.prototype.orientation=function(Gt,Xt,Yt,Ht,Wt,jt){if(!this.ctx||!this.ctx.listener)return this;var zt=this._orientation;return Xt="number"==typeof Xt?Xt:zt[1],Yt="number"==typeof Yt?Yt:zt[2],Ht="number"==typeof Ht?Ht:zt[3],Wt="number"==typeof Wt?Wt:zt[4],jt="number"==typeof jt?jt:zt[5],"number"==typeof Gt?(this._orientation=[Gt,Xt,Yt,Ht,Wt,jt],this.ctx.listener.setOrientation(Gt,Xt,Yt,Ht,Wt,jt),this):zt},Howl.prototype.init=function(Gt){return function(Xt){return this._orientation=Xt.orientation||[1,0,0],this._stereo=Xt.stereo||null,this._pos=Xt.pos||null,this._pannerAttr={coneInnerAngle:void 0===Xt.coneInnerAngle?360:Xt.coneInnerAngle,coneOuterAngle:void 0===Xt.coneOuterAngle?360:Xt.coneOuterAngle,coneOuterGain:void 0===Xt.coneOuterGain?0:Xt.coneOuterGain,distanceModel:void 0===Xt.distanceModel?"inverse":Xt.distanceModel,maxDistance:void 0===Xt.maxDistance?1e4:Xt.maxDistance,panningModel:void 0===Xt.panningModel?"HRTF":Xt.panningModel,refDistance:void 0===Xt.refDistance?1:Xt.refDistance,rolloffFactor:void 0===Xt.rolloffFactor?1:Xt.rolloffFactor},this._onstereo=Xt.onstereo?[{fn:Xt.onstereo}]:[],this._onpos=Xt.onpos?[{fn:Xt.onpos}]:[],this._onorientation=Xt.onorientation?[{fn:Xt.onorientation}]:[],Gt.call(this,Xt)}}(Howl.prototype.init),Howl.prototype.stereo=function(Gt,Xt){var Yt=this;if(!Yt._webAudio)return Yt;if("loaded"!==Yt._state)return Yt._queue.push({event:"stereo",action:function(){Yt.stereo(Gt,Xt)}}),Yt;var Ht=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===Xt){if("number"!=typeof Gt)return Yt._stereo;Yt._stereo=Gt,Yt._pos=[Gt,0,0]}for(var Wt=Yt._getSoundIds(Xt),jt=0,zt;jt<Wt.length;jt++)if(zt=Yt._soundById(Wt[jt]),zt){if("number"!=typeof Gt)return zt._stereo;zt._stereo=Gt,zt._pos=[Gt,0,0],zt._node&&(zt._pannerAttr.panningModel="equalpower",zt._panner&&zt._panner.pan||Bt(zt,Ht),"spatial"==Ht?zt._panner.setPosition(Gt,0,Math.abs(1-Gt)):zt._panner.pan.value=Gt),Yt._emit("stereo",zt._id)}return Yt},Howl.prototype.pos=function(Gt,Xt,Yt,Ht){var Wt=this;if(!Wt._webAudio)return Wt;if("loaded"!==Wt._state)return Wt._queue.push({event:"pos",action:function(){Wt.pos(Gt,Xt,Yt,Ht)}}),Wt;if(Xt="number"==typeof Xt?Xt:0,Yt="number"==typeof Yt?Yt:-.5,void 0===Ht){if("number"!=typeof Gt)return Wt._pos;Wt._pos=[Gt,Xt,Yt]}for(var jt=Wt._getSoundIds(Ht),zt=0,Vt;zt<jt.length;zt++)if(Vt=Wt._soundById(jt[zt]),Vt){if("number"!=typeof Gt)return Vt._pos;Vt._pos=[Gt,Xt,Yt],Vt._node&&(Vt._panner&&!Vt._panner.pan||Bt(Vt,"spatial"),Vt._panner.setPosition(Gt,Xt,Yt)),Wt._emit("pos",Vt._id)}return Wt},Howl.prototype.orientation=function(Gt,Xt,Yt,Ht){var Wt=this;if(!Wt._webAudio)return Wt;if("loaded"!==Wt._state)return Wt._queue.push({event:"orientation",action:function(){Wt.orientation(Gt,Xt,Yt,Ht)}}),Wt;if(Xt="number"==typeof Xt?Xt:Wt._orientation[1],Yt="number"==typeof Yt?Yt:Wt._orientation[2],void 0===Ht){if("number"!=typeof Gt)return Wt._orientation;Wt._orientation=[Gt,Xt,Yt]}for(var jt=Wt._getSoundIds(Ht),zt=0,Vt;zt<jt.length;zt++)if(Vt=Wt._soundById(jt[zt]),Vt){if("number"!=typeof Gt)return Vt._orientation;Vt._orientation=[Gt,Xt,Yt],Vt._node&&(Vt._panner||(Vt._pos||(Vt._pos=Wt._pos||[0,0,-0.5]),Bt(Vt,"spatial")),Vt._panner.setOrientation(Gt,Xt,Yt)),Wt._emit("orientation",Vt._id)}return Wt},Howl.prototype.pannerAttr=function(){var Ht=arguments,Gt,Xt,Yt;if(!this._webAudio)return this;if(0===Ht.length)return this._pannerAttr;if(1===Ht.length){if("object"!=typeof Ht[0])return(Yt=this._soundById(parseInt(Ht[0],10)))?Yt._pannerAttr:this._pannerAttr;Gt=Ht[0],void 0==Xt&&(Gt.pannerAttr||(Gt.pannerAttr={coneInnerAngle:Gt.coneInnerAngle,coneOuterAngle:Gt.coneOuterAngle,coneOuterGain:Gt.coneOuterGain,distanceModel:Gt.distanceModel,maxDistance:Gt.maxDistance,refDistance:Gt.refDistance,rolloffFactor:Gt.rolloffFactor,panningModel:Gt.panningModel}),this._pannerAttr={coneInnerAngle:void 0===Gt.pannerAttr.coneInnerAngle?this._coneInnerAngle:Gt.pannerAttr.coneInnerAngle,coneOuterAngle:void 0===Gt.pannerAttr.coneOuterAngle?this._coneOuterAngle:Gt.pannerAttr.coneOuterAngle,coneOuterGain:void 0===Gt.pannerAttr.coneOuterGain?this._coneOuterGain:Gt.pannerAttr.coneOuterGain,distanceModel:void 0===Gt.pannerAttr.distanceModel?this._distanceModel:Gt.pannerAttr.distanceModel,maxDistance:void 0===Gt.pannerAttr.maxDistance?this._maxDistance:Gt.pannerAttr.maxDistance,refDistance:void 0===Gt.pannerAttr.refDistance?this._refDistance:Gt.pannerAttr.refDistance,rolloffFactor:void 0===Gt.pannerAttr.rolloffFactor?this._rolloffFactor:Gt.pannerAttr.rolloffFactor,panningModel:void 0===Gt.pannerAttr.panningModel?this._panningModel:Gt.pannerAttr.panningModel})}else 2===Ht.length&&(Gt=Ht[0],Xt=parseInt(Ht[1],10));for(var Wt=this._getSoundIds(Xt),jt=0;jt<Wt.length;jt++)if(Yt=this._soundById(Wt[jt])){var zt=Yt._pannerAttr;zt={coneInnerAngle:void 0===Gt.coneInnerAngle?zt.coneInnerAngle:Gt.coneInnerAngle,coneOuterAngle:void 0===Gt.coneOuterAngle?zt.coneOuterAngle:Gt.coneOuterAngle,coneOuterGain:void 0===Gt.coneOuterGain?zt.coneOuterGain:Gt.coneOuterGain,distanceModel:void 0===Gt.distanceModel?zt.distanceModel:Gt.distanceModel,maxDistance:void 0===Gt.maxDistance?zt.maxDistance:Gt.maxDistance,refDistance:void 0===Gt.refDistance?zt.refDistance:Gt.refDistance,rolloffFactor:void 0===Gt.rolloffFactor?zt.rolloffFactor:Gt.rolloffFactor,panningModel:void 0===Gt.panningModel?zt.panningModel:Gt.panningModel};var Vt=Yt._panner;Vt?(Vt.coneInnerAngle=zt.coneInnerAngle,Vt.coneOuterAngle=zt.coneOuterAngle,Vt.coneOuterGain=zt.coneOuterGain,Vt.distanceModel=zt.distanceModel,Vt.maxDistance=zt.maxDistance,Vt.refDistance=zt.refDistance,Vt.rolloffFactor=zt.rolloffFactor,Vt.panningModel=zt.panningModel):(Yt._pos||(Yt._pos=this._pos||[0,0,-0.5]),Bt(Yt,"spatial"))}return this},Sound.prototype.init=function(Gt){return function(){var Xt=this._parent;this._orientation=Xt._orientation,this._stereo=Xt._stereo,this._pos=Xt._pos,this._pannerAttr=Xt._pannerAttr,Gt.call(this),this._stereo?Xt.stereo(this._stereo):this._pos&&Xt.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(Gt){return function(){var Xt=this._parent;return this._orientation=Xt._orientation,this._pos=Xt._pos,this._pannerAttr=Xt._pannerAttr,Gt.call(this)}}(Sound.prototype.reset);var Bt=function(Gt,Xt){"spatial"===(Xt=Xt||"spatial")?(Gt._panner=Howler.ctx.createPanner(),Gt._panner.coneInnerAngle=Gt._pannerAttr.coneInnerAngle,Gt._panner.coneOuterAngle=Gt._pannerAttr.coneOuterAngle,Gt._panner.coneOuterGain=Gt._pannerAttr.coneOuterGain,Gt._panner.distanceModel=Gt._pannerAttr.distanceModel,Gt._panner.maxDistance=Gt._pannerAttr.maxDistance,Gt._panner.refDistance=Gt._pannerAttr.refDistance,Gt._panner.rolloffFactor=Gt._pannerAttr.rolloffFactor,Gt._panner.panningModel=Gt._pannerAttr.panningModel,Gt._panner.setOrientation(Gt._orientation[0],Gt._orientation[1],Gt._orientation[2])):(Gt._panner=Howler.ctx.createStereoPanner(),Gt._panner.pan.value=Gt._stereo),Gt._panner.connect(Gt._node),Gt._paused||Gt._parent.pause(Gt._id,!0).play(Gt._id)}}(),function(Bt){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Bt():"function"==typeof define&&define.amd?define([],Bt):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).nipplejs=Bt()}(function(){function Bt(){}function Gt(Jt,Zt){return this.identifier=Zt.identifier,this.position=Zt.position,this.frontPosition=Zt.frontPosition,this.collection=Jt,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5,mode:"dynamic",zone:document.body},this.config(Zt),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=Gt.id,Gt.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function Xt(Jt,Zt){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=Jt,this.id=Xt.id,Xt.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5},this.config(Zt),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}function Yt(Jt){var Zt=this;Zt.ids={},Zt.index=0,Zt.collections=[],Zt.config(Jt),Zt.prepareCollections();var $t;return Kt.bindEvt(window,"resize",function(){clearTimeout($t),$t=setTimeout(function(){var nn=Kt.getScroll(),tn;Zt.collections.forEach(function(an){an.forEach(function(rn){tn=rn.el.getBoundingClientRect(),rn.position={x:nn.x+tn.left,y:nn.y+tn.top}})})},100)}),Zt.collections}var Wt=!!("ontouchstart"in window),jt=!!window.PointerEvent,zt=!!window.MSPointerEvent,Vt={start:"mousedown",move:"mousemove",end:"mouseup"},qt={},Ht;jt?Ht={start:"pointerdown",move:"pointermove",end:"pointerup"}:zt?Ht={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:Wt?(Ht={start:"touchstart",move:"touchmove",end:"touchend"},qt=Vt):Ht=Vt;var Kt={};Kt.distance=function(Jt,Zt){var $t=Zt.x-Jt.x,en=Zt.y-Jt.y;return Math.sqrt($t*$t+en*en)},Kt.angle=function(Jt,Zt){var $t=Zt.x-Jt.x,en=Zt.y-Jt.y;return Kt.degrees(Math.atan2(en,$t))},Kt.findCoord=function(Jt,Zt,$t){var en={x:0,y:0};return $t=Kt.radians($t),en.x=Jt.x-Zt*Math.cos($t),en.y=Jt.y-Zt*Math.sin($t),en},Kt.radians=function(Jt){return Jt*(Math.PI/180)},Kt.degrees=function(Jt){return Jt*(180/Math.PI)},Kt.bindEvt=function(Jt,Zt,$t){Jt.addEventListener?Jt.addEventListener(Zt,$t,!1):Jt.attachEvent&&Jt.attachEvent(Zt,$t)},Kt.unbindEvt=function(Jt,Zt,$t){Jt.removeEventListener?Jt.removeEventListener(Zt,$t):Jt.detachEvent&&Jt.detachEvent(Zt,$t)},Kt.trigger=function(Jt,Zt,$t){var en=new CustomEvent(Zt,$t);Jt.dispatchEvent(en)},Kt.prepareEvent=function(Jt){return"front"!=Jt.target.className&&"back"!=Jt.target.className||Jt.preventDefault(),Jt.type.match(/^touch/)?Jt.changedTouches:Jt},Kt.getScroll=function(){return{x:void 0===window.pageXOffset?(document.documentElement||document.body.parentNode||document.body).scrollLeft:window.pageXOffset,y:void 0===window.pageYOffset?(document.documentElement||document.body.parentNode||document.body).scrollTop:window.pageYOffset}},Kt.applyPosition=function(Jt,Zt){Zt.x&&Zt.y?(Jt.style.left=Zt.x+"px",Jt.style.top=Zt.y+"px"):(Zt.top||Zt.right||Zt.bottom||Zt.left)&&(Jt.style.top=Zt.top,Jt.style.right=Zt.right,Jt.style.bottom=Zt.bottom,Jt.style.left=Zt.left)},Kt.getTransitionStyle=function(Jt,Zt,$t){var en=Kt.configStylePropertyObject(Jt);for(var tn in en)if(en.hasOwnProperty(tn))if("string"==typeof Zt)en[tn]=Zt+" "+$t;else{for(var nn="",an=0,rn=Zt.length;an<rn;an+=1)nn+=Zt[an]+" "+$t+", ";en[tn]=nn.slice(0,-2)}return en},Kt.getVendorStyle=function(Jt,Zt){var $t=Kt.configStylePropertyObject(Jt);for(var en in $t)$t.hasOwnProperty(en)&&($t[en]=Zt);return $t},Kt.configStylePropertyObject=function(Jt){var Zt={};return Zt[Jt]="",["webkit","Moz","o"].forEach(function($t){Zt[$t+Jt.charAt(0).toUpperCase()+Jt.slice(1)]=""}),Zt},Kt.extend=function(Jt,Zt){for(var $t in Zt)Zt.hasOwnProperty($t)&&(Jt[$t]=Zt[$t]);return Jt},Kt.safeExtend=function(Jt,Zt){var $t={};for(var en in Jt)Jt.hasOwnProperty(en)&&Zt.hasOwnProperty(en)?$t[en]=Zt[en]:Jt.hasOwnProperty(en)&&($t[en]=Jt[en]);return $t},Kt.map=function(Jt,Zt){if(Jt.length)for(var $t=0,en=Jt.length;$t<en;$t+=1)Zt(Jt[$t]);else Zt(Jt)},Bt.prototype.on=function(Jt,Zt){var en=Jt.split(/[ ,]+/g),$t;this._handlers_=this._handlers_||{};for(var tn=0;tn<en.length;tn+=1)$t=en[tn],this._handlers_[$t]=this._handlers_[$t]||[],this._handlers_[$t].push(Zt);return this},Bt.prototype.off=function(Jt,Zt){return this._handlers_=this._handlers_||{},void 0===Jt?this._handlers_={}:void 0===Zt?this._handlers_[Jt]=null:this._handlers_[Jt]&&0<=this._handlers_[Jt].indexOf(Zt)&&this._handlers_[Jt].splice(this._handlers_[Jt].indexOf(Zt),1),this},Bt.prototype.trigger=function(Jt,Zt){var en=this,tn=Jt.split(/[ ,]+/g),$t;en._handlers_=en._handlers_||{};for(var nn=0;nn<tn.length;nn+=1)$t=tn[nn],en._handlers_[$t]&&en._handlers_[$t].length&&en._handlers_[$t].forEach(function(an){an.call(en,{type:$t,target:en},Zt)})},Bt.prototype.config=function(Jt){this.options=this.defaults||{},Jt&&(this.options=Kt.safeExtend(this.options,Jt))},Bt.prototype.bindEvt=function(Jt,Zt){var $t=this;return $t._domHandlers_=$t._domHandlers_||{},$t._domHandlers_[Zt]=function(){"function"==typeof $t["on"+Zt]?$t["on"+Zt].apply($t,arguments):console.warn("[WARNING] : Missing \"on"+Zt+"\" handler.")},Kt.bindEvt(Jt,Ht[Zt],$t._domHandlers_[Zt]),qt[Zt]&&Kt.bindEvt(Jt,qt[Zt],$t._domHandlers_[Zt]),$t},Bt.prototype.unbindEvt=function(Jt,Zt){return this._domHandlers_=this._domHandlers_||{},Kt.unbindEvt(Jt,Ht[Zt],this._domHandlers_[Zt]),qt[Zt]&&Kt.unbindEvt(Jt,qt[Zt],this._domHandlers_[Zt]),delete this._domHandlers_[Zt],this},Gt.prototype=new Bt,Gt.constructor=Gt,Gt.id=0,Gt.prototype.buildEl=function(){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},Gt.prototype.stylize=function(){if(this.options.dataOnly)return this;var Jt=this.options.fadeTime+"ms",Zt=Kt.getVendorStyle("borderRadius","50%"),$t=Kt.getTransitionStyle("transition","opacity",Jt),en={};return en.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},en.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},en.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},Kt.extend(en.el,$t),Kt.extend(en.back,Zt),Kt.extend(en.front,Zt),this.applyStyles(en),this},Gt.prototype.applyStyles=function(Jt){for(var Zt in this.ui)if(this.ui.hasOwnProperty(Zt))for(var $t in Jt[Zt])this.ui[Zt].style[$t]=Jt[Zt][$t];return this},Gt.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},Gt.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},Gt.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},Gt.prototype.show=function(Jt){var Zt=this;return Zt.options.dataOnly?Zt:(clearTimeout(Zt.removeTimeout),clearTimeout(Zt.showTimeout),clearTimeout(Zt.restTimeout),Zt.addToDom(),Zt.restCallback(),setTimeout(function(){Zt.ui.el.style.opacity=1},0),Zt.showTimeout=setTimeout(function(){Zt.trigger("shown",Zt.instance),"function"==typeof Jt&&Jt.call(this)},Zt.options.fadeTime),Zt)},Gt.prototype.hide=function(Jt){var Zt=this;return Zt.options.dataOnly?Zt:(Zt.ui.el.style.opacity=Zt.options.restOpacity,clearTimeout(Zt.removeTimeout),clearTimeout(Zt.showTimeout),clearTimeout(Zt.restTimeout),Zt.removeTimeout=setTimeout(function(){var $t="dynamic"===Zt.options.mode?"none":"block";Zt.ui.el.style.display=$t,"function"==typeof Jt&&Jt.call(Zt),Zt.trigger("hidden",Zt.instance)},Zt.options.fadeTime),Zt.restPosition(),Zt)},Gt.prototype.restPosition=function(Jt){var Zt=this;Zt.frontPosition={x:0,y:0};var $t=Zt.options.fadeTime+"ms",en={};en.front=Kt.getTransitionStyle("transition",["top","left"],$t);var tn={front:{}};tn.front={left:Zt.frontPosition.x+"px",top:Zt.frontPosition.y+"px"},Zt.applyStyles(en),Zt.applyStyles(tn),Zt.restTimeout=setTimeout(function(){"function"==typeof Jt&&Jt.call(Zt),Zt.restCallback()},Zt.options.fadeTime)},Gt.prototype.restCallback=function(){var Jt={};Jt.front=Kt.getTransitionStyle("transition","none",""),this.applyStyles(Jt),this.trigger("rested",this.instance)},Gt.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},Gt.prototype.computeDirection=function(Jt){var tn=Jt.angle.radian,nn=Math.PI/4,an=Math.PI/2,Zt,$t,en;if(Zt=tn>nn&&tn<3*nn?"up":tn>-nn&&tn<=nn?"left":tn>3*-nn&&tn<=-nn?"down":"right",$t=tn>-an&&tn<an?"left":"right",en=0<tn?"up":"down",Jt.force>this.options.threshold){var rn={};for(var on in this.direction)this.direction.hasOwnProperty(on)&&(rn[on]=this.direction[on]);var sn={};for(var on in this.direction={x:$t,y:en,angle:Zt},Jt.direction=this.direction,rn)rn[on]===this.direction[on]&&(sn[on]=!0);if(sn.x&&sn.y&&sn.angle)return Jt;sn.x&&sn.y||this.trigger("plain",Jt),sn.x||this.trigger("plain:"+$t,Jt),sn.y||this.trigger("plain:"+en,Jt),sn.angle||this.trigger("dir dir:"+Zt,Jt)}return Jt},Xt.prototype=new Bt,Xt.constructor=Xt,Xt.id=0,Xt.prototype.prepareNipples=function(){var Jt=this.nipples;Jt.on=this.on.bind(this),Jt.off=this.off.bind(this),Jt.options=this.options,Jt.destroy=this.destroy.bind(this),Jt.ids=this.ids,Jt.id=this.id,Jt.processOnMove=this.processOnMove.bind(this),Jt.processOnEnd=this.processOnEnd.bind(this),Jt.get=function(Zt){if(void 0===Zt)return Jt[0];for(var $t=0,en=Jt.length;$t<en;$t+=1)if(Jt[$t].identifier===Zt)return Jt[$t];return!1}},Xt.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},Xt.prototype.begin=function(){var Jt=this.options;if("static"===Jt.mode){var Zt=this.createNipple(Jt.position,this.manager.getIdentifier());Zt.add(),this.idles.push(Zt)}},Xt.prototype.createNipple=function(Jt,Zt){var $t=Kt.getScroll(),en={},tn=this.options;if(Jt.x&&Jt.y)en={x:Jt.x-($t.x+this.box.left),y:Jt.y-($t.y+this.box.top)};else if(Jt.top||Jt.right||Jt.bottom||Jt.left){var nn=document.createElement("DIV");nn.style.display="hidden",nn.style.top=Jt.top,nn.style.right=Jt.right,nn.style.bottom=Jt.bottom,nn.style.left=Jt.left,nn.style.position="absolute",tn.zone.appendChild(nn);var an=nn.getBoundingClientRect();tn.zone.removeChild(nn),en=Jt,Jt={x:an.left+$t.x,y:an.top+$t.y}}var rn=new Gt(this,{color:tn.color,size:tn.size,threshold:tn.threshold,fadeTime:tn.fadeTime,dataOnly:tn.dataOnly,restOpacity:tn.restOpacity,mode:tn.mode,identifier:Zt,position:Jt,zone:tn.zone,frontPosition:{x:0,y:0}});return tn.dataOnly||(Kt.applyPosition(rn.ui.el,en),Kt.applyPosition(rn.ui.front,rn.frontPosition)),this.nipples.push(rn),this.trigger("added "+rn.identifier+":added",rn),this.manager.trigger("added "+rn.identifier+":added",rn),this.bindNipple(rn),rn},Xt.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},Xt.prototype.bindNipple=function(Jt){var $t=this,en=function(tn,nn){Zt=tn.type+" "+nn.id+":"+tn.type,$t.trigger(Zt,nn)},Zt;Jt.on("destroyed",$t.onDestroyed.bind($t)),Jt.on("shown hidden rested dir plain",en),Jt.on("dir:up dir:right dir:down dir:left",en),Jt.on("plain:up plain:right plain:down plain:left",en)},Xt.prototype.pressureFn=function(Jt,Zt,$t){var en=this,tn=0;clearInterval(en.pressureIntervals[$t]),en.pressureIntervals[$t]=setInterval(function(){var nn=Jt.force||Jt.pressure||Jt.webkitForce||0;nn!==tn&&(Zt.trigger("pressure",nn),en.trigger("pressure "+Zt.identifier+":pressure",nn),tn=nn)}.bind(en),100)},Xt.prototype.onstart=function(Jt){var Zt=this,$t=Zt.options;return Jt=Kt.prepareEvent(Jt),Zt.updateBox(),(Kt.map(Jt,function(en){Zt.actives.length<$t.maxNumberOfNipples&&Zt.processOnStart(en)}),Zt.manager.bindDocument(),!1)},Xt.prototype.processOnStart=function(Jt){var $t=this,en=$t.options,tn=$t.manager.getIdentifier(Jt),nn=Jt.force||Jt.pressure||Jt.webkitForce||0,an={x:Jt.pageX,y:Jt.pageY},rn=$t.getOrCreate(tn,an),Zt;rn.identifier=tn;var on=function(sn){sn.trigger("start",sn),$t.trigger("start "+sn.id+":start",sn),sn.show(),0<nn&&$t.pressureFn(Jt,sn,sn.identifier),$t.processOnMove(Jt)};if(0<=(Zt=$t.idles.indexOf(rn))&&$t.idles.splice(Zt,1),$t.actives.push(rn),$t.ids.push(rn.identifier),"semi"!==en.mode)on(rn);else{if(!(Kt.distance(an,rn.position)<=en.catchDistance))return rn.destroy(),void $t.processOnStart(Jt);on(rn)}return rn},Xt.prototype.getOrCreate=function(Jt,Zt){var en=this.options,$t;return /(semi|static)/.test(en.mode)?($t=this.idles[0])?(this.idles.splice(0,1),$t):"semi"===en.mode?this.createNipple(Zt,Jt):(console.warn("Coudln't find the needed nipple."),!1):$t=this.createNipple(Zt,Jt)},Xt.prototype.processOnMove=function(Jt){var Zt=this.options,$t=this.manager.getIdentifier(Jt),en=this.nipples.get($t);if(!en)return console.error("Found zombie joystick with ID "+$t),void this.manager.removeIdentifier($t);en.identifier=$t;var tn=en.options.size/2,nn={x:Jt.pageX,y:Jt.pageY},an=Kt.distance(nn,en.position),rn=Kt.angle(nn,en.position),on=Kt.radians(rn),sn=an/tn;an>tn&&(an=tn,nn=Kt.findCoord(en.position,an,rn)),en.frontPosition={x:nn.x-en.position.x,y:nn.y-en.position.y},Zt.dataOnly||Kt.applyPosition(en.ui.front,en.frontPosition);var dn={identifier:en.identifier,position:nn,force:sn,pressure:Jt.force||Jt.pressure||Jt.webkitForce||0,distance:an,angle:{radian:on,degree:rn},instance:en};(dn=en.computeDirection(dn)).angle={radian:Kt.radians(180-rn),degree:180-rn},en.trigger("move",dn),this.trigger("move "+en.id+":move",dn)},Xt.prototype.processOnEnd=function(Jt){var Zt=this,$t=Zt.options,en=Zt.manager.getIdentifier(Jt),tn=Zt.nipples.get(en),nn=Zt.manager.removeIdentifier(tn.identifier);tn&&($t.dataOnly||tn.hide(function(){"dynamic"===$t.mode&&(tn.trigger("removed",tn),Zt.trigger("removed "+tn.id+":removed",tn),Zt.manager.trigger("removed "+tn.id+":removed",tn),tn.destroy())}),clearInterval(Zt.pressureIntervals[tn.identifier]),tn.resetDirection(),tn.trigger("end",tn),Zt.trigger("end "+tn.id+":end",tn),0<=Zt.ids.indexOf(tn.identifier)&&Zt.ids.splice(Zt.ids.indexOf(tn.identifier),1),0<=Zt.actives.indexOf(tn)&&Zt.actives.splice(Zt.actives.indexOf(tn),1),/(semi|static)/.test($t.mode)?Zt.idles.push(tn):0<=Zt.nipples.indexOf(tn)&&Zt.nipples.splice(Zt.nipples.indexOf(tn),1),Zt.manager.unbindDocument(),/(semi|static)/.test($t.mode)&&(Zt.manager.ids[nn.id]=nn.identifier))},Xt.prototype.onDestroyed=function(Jt,Zt){0<=this.nipples.indexOf(Zt)&&this.nipples.splice(this.nipples.indexOf(Zt),1),0<=this.actives.indexOf(Zt)&&this.actives.splice(this.actives.indexOf(Zt),1),0<=this.idles.indexOf(Zt)&&this.idles.splice(this.idles.indexOf(Zt),1),0<=this.ids.indexOf(Zt.identifier)&&this.ids.splice(this.ids.indexOf(Zt.identifier),1),this.manager.removeIdentifier(Zt.identifier),this.manager.unbindDocument()},Xt.prototype.destroy=function(){for(var Jt in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(Zt){Zt.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(Jt)&&clearInterval(this.pressureIntervals[Jt]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()},Yt.prototype=new Bt,Yt.constructor=Yt,Yt.prototype.prepareCollections=function(){var Jt=this;Jt.collections.create=Jt.create.bind(Jt),Jt.collections.on=Jt.on.bind(Jt),Jt.collections.off=Jt.off.bind(Jt),Jt.collections.destroy=Jt.destroy.bind(Jt),Jt.collections.get=function(Zt){var $t;return Jt.collections.every(function(en){return!($t=en.get(Zt))}),$t}},Yt.prototype.create=function(Jt){return this.createCollection(Jt)},Yt.prototype.createCollection=function(Jt){var Zt=new Xt(this,Jt);return this.bindCollection(Zt),this.collections.push(Zt),Zt},Yt.prototype.bindCollection=function(Jt){var $t=this,en=function(tn,nn){Zt=tn.type+" "+nn.id+":"+tn.type,$t.trigger(Zt,nn)},Zt;Jt.on("destroyed",$t.onDestroyed.bind($t)),Jt.on("shown hidden rested dir plain",en),Jt.on("dir:up dir:right dir:down dir:left",en),Jt.on("plain:up plain:right plain:down plain:left",en)},Yt.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},Yt.prototype.unbindDocument=function(Jt){Object.keys(this.ids).length&&!0!==Jt||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},Yt.prototype.getIdentifier=function(Jt){var Zt;return Jt?void 0===(Zt=void 0===Jt.identifier?Jt.pointerId:Jt.identifier)&&(Zt=this.latest||0):Zt=this.index,void 0===this.ids[Zt]&&(this.ids[Zt]=this.index,this.index+=1),this.latest=Zt,this.ids[Zt]},Yt.prototype.removeIdentifier=function(Jt){var Zt={};for(var $t in this.ids)if(this.ids[$t]===Jt){Zt.id=$t,Zt.identifier=this.ids[$t],delete this.ids[$t];break}return Zt},Yt.prototype.onmove=function(Jt){return this.onAny("move",Jt),!1},Yt.prototype.onend=function(Jt){return this.onAny("end",Jt),!1},Yt.prototype.onAny=function(Jt,Zt){var en=this,tn="processOn"+Jt.charAt(0).toUpperCase()+Jt.slice(1),$t;return Zt=Kt.prepareEvent(Zt),Kt.map(Zt,function(nn){$t=en.getIdentifier(nn),Kt.map(en.collections,function(an,rn,on){0<=on.ids.indexOf(rn)&&(on[tn](an),an._found_=!0)}.bind(null,nn,$t)),nn._found_||en.removeIdentifier($t)}),!1},Yt.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(Jt){Jt.destroy()}),this.off()},Yt.prototype.onDestroyed=function(Jt,Zt){return!(0>this.collections.indexOf(Zt))&&void this.collections.splice(this.collections.indexOf(Zt),1)};var Qt=new Yt;return{create:function(Jt){return Qt.create(Jt)},factory:Qt}}),function(){window.DEVELOPMENT=!1,window.game={protocol:5,version:"v1.0.2",state:0,focus:!0,screenX:0,screenY:0,halfScreenX:0,halfScreenY:0,scale:1,spectatingID:null,myID:null,myType:null,myTeam:null,myUserID:"",myName:"",myOriginalName:"",myScore:0,myPlace:0,myLevel:0,myToken:"",myFlag:"xx",loggedIn:!1,roomName:"",regionName:"",playRegion:"derp",playRoom:"ffa",playHost:"",playPath:"",playInvited:!1,gameType:null,regionName:"",inviteLink:"",lastFlagSet:"xx",reloading:!1,ping:0,lagging:!1,timeFactor:1,timeFactorUncapped:1,time:0,timeNetwork:0,jitter:0,frames:0,shadowX:0,shadowY:0,graphics:{},debug:{},buckets:[]},window.config={storage:{},settings:{},ships:[{},{name:"raptor",turnFactor:.065,accelFactor:.225,maxSpeed:5.5,minSpeed:.001,brakeFactor:.025,energyLight:.6,collisions:[[0,5,23],[0,-15,15],[0,-25,12]]},{name:"spirit",turnFactor:.04,accelFactor:.15,maxSpeed:3.5,minSpeed:.001,brakeFactor:.015,energyLight:.9,collisions:[[0,0,35],[50,14,16],[74,26,14],[30,8,23],[63,22,15],[-50,14,16],[-74,26,14],[-30,8,23],[-63,22,15]]},{name:"mohawk",turnFactor:.07,accelFactor:.275,maxSpeed:6,minSpeed:.001,brakeFactor:.025,energyLight:.3,collisions:[[0,-12,15],[0,0,17],[0,13,15],[0,26,15]]},{name:"tornado",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.5,collisions:[[0,8,18],[14,12,13],[-14,12,13],[0,-12,16],[0,-26,14],[0,-35,12]]},{name:"prowler",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.75,collisions:[[0,11,25],[0,-8,18],[19,20,10],[-19,20,10],[0,-20,14]]}],mobs:[{},{exhaust:20,thruster:[0.2,0.4]},{exhaust:30,thruster:[0.3,0.6]},{exhaust:18,thruster:[0.14,0.3]},{},{exhaust:20,thruster:[0.2,0.4]},{exhaust:20,thruster:[0.2,0.4]},{exhaust:20,thruster:[0.2,0.4]}],upgrades:{speed:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},defense:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},energy:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},missile:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]}},doodads:[[1009,-2308,1,0.9,0.2,null,null],[1241,-2490,4,0.5,-0.2,null,null],[1157,-2379,2,0.7,-0.1,null,null],[622,-2126,3,0.4,null,null,null],[669,-2187,2,0.6,null,null,null],[-392,-1669,1,1.1,0.1,null,null],[-273,-1746,4,0.5,-0.1,null,null],[-252,-1504,2,1,null,null,null],[1553,-2016,2,0.4,0.2,null,null],[1637,-1972,1,0.5,0.1,null,null],[1736,-1922,2,0.5,0.7,null,null],[2150,-2406,2,0.6,null,null,null],[2238,-2318,3,0.9,null,null,null],[2364,-2391,4,0.6,0,null,null],[2491,-2682,1,0.6,-0.1,null,null],[2596,-2671,2,0.9,0.2,null,null],[-150,-3147,4,0.4,-0.4,null,null],[-155,-3044,2,0.7,0,null,null],[-427,-3600,2,0.4,null,null,null],[-259,-2982,2,0.5,null,null,null],[-379,-3529,1,0.6,0.1,1,null],[-665,-3052,2,0.5,null,null,null],[20,-1816,4,0.5,0.3,null,null],[127,-1799,1,0.5,null,null,null],[263,-2572,3,0.4,0.4,null,null],[405,-2570,1,0.9,-0.2,null,null],[851,-4183,1,1,null,null,null],[754,-3971,2,0.9,-0.1,1,null],[1757,-5065,4,1.1,null,null,null],[1169,-4453,3,0.9,null,null,null],[2054,-5244,3,0.9,null,null,null],[1631,-4901,1,0.9,0,null,null],[2305,-5281,2,0.9,0.2,1,null],[1007,-4281,1,0.8,0.1,null,null],[2766,-5202,1,0.8,0.1,1,null],[2927,-5204,2,0.7,null,1,null],[3206,-5218,2,0.3,0.6,1,null],[3099,-5193,4,0.6,0.1,1,null],[1417,-4726,2,1,null,null,null],[2844,-1513,4,0.5,0.1,null,null],[3206,-1464,1,1,0.1,1,null],[2881,-1403,2,0.9,null,null,null],[3804,-2025,1,0.7,-0.1,null,null],[4116,-1778,2,0.9,-0.3,null,null],[3715,-1508,3,0.6,0.1,null,null],[4247,-1126,1,0.6,0.1,1,null],[3860,268,1,0.5,0.5,1,null],[4334,-1011,2,1.1,-0.1,null,null],[3849,349,3,0.6,null,null,null],[3956,490,4,0.8,-0.4,null,null],[4073,667,2,0.9,-0.5,null,null],[3583,-864,4,0.8,0.1,0.8,15723705],[4135,836,2,1,-0.2,null,null],[4785,-743,2,1,0.1,null,null],[4993,-839,1,0.9,0.3,1,null],[5224,-482,3,0.7,null,null,null],[5235,-1238,4,1.1,null,1,null],[5419,-1346,2,0.6,-0.5,0.8,null],[6075,-5099,1,0.8,null,null,null],[5767,-4953,2,0.9,-0.3,1,null],[5896,-4967,2,0.9,0.1,1,null],[5384,-4642,4,0.9,null,null,null],[5704,-4857,4,0.9,null,null,null],[5563,-4697,2,0.9,null,null,null],[5406,-4470,1,1.1,null,null,null],[5352,-3964,3,0.9,null,null,null],[5309,-3665,1,1.1,null,null,null],[5247,-3464,4,0.9,-0.5,null,null],[5300,-3121,1,0.9,null,null,null],[3524,-3340,1,1.1,0,null,null],[3661,-3589,2,0.9,-0.7,null,null],[7236,-1376,2,0.6,-0.3,null,null],[7624,-1610,2,0.8,null,null,null],[7403,-1555,2,0.7,null,null,null],[7514,-1568,2,0.9,0,null,null],[3660,-2705,1,0.9,0.2,null,null],[3374,-2813,2,0.8,null,null,null],[7347,-1447,1,0.9,0.1,null,null],[7236,-775,4,0.5,-0.9,null,null],[7207,-631,2,0.9,0,null,null],[7303,-468,1,0.9,-0.3,null,null],[7262,-1263,4,0.9,-0.6,null,null],[7404,-350,2,1,0.6,null,null],[7589,-305,3,0.9,0.6,null,null],[7741,-1589,4,1,0.2,null,null],[7949,-1594,1,1,-0.2,null,null],[8152,-1599,2,1.1,0.1,null,null],[8378,-1602,4,1.2,0,null,null],[7873,-321,2,0.6,0.3,null,null],[8543,-1661,1,0.7,0,null,null],[7790,-259,1,1,0.1,null,null],[8675,-1573,2,1,0.1,null,null],[8163,-245,2,0.7,0.3,null,null],[8329,-311,2,0.7,0.5,null,null],[8275,-229,1,1,0.1,null,null],[8447,-277,3,1,0,null,null],[8824,-1447,1,0.9,-0.4,null,null],[7221,-1140,1,0.5,-0.2,null,null],[8924,-1273,2,0.9,-0.5,null,null],[6844,-950,3,1,0.1,null,null],[8949,-1060,3,1.1,-0.3,null,null],[8904,-920,4,0.8,-0.7,null,null],[8582,-338,2,0.7,null,null,null],[8963,-803,1,1,-0.4,null,null],[8680,-322,4,0.9,0,null,null],[8811,-449,1,0.9,-0.3,null,null],[8910,-610,2,0.9,-0.4,null,null],[6855,114,1,0.8,null,null,null],[6971,241,2,1,-0.1,null,null],[6852,656,2,0.5,0.3,null,null],[6980,706,1,0.9,-0.4,null,null],[6946,939,4,1,-0.2,null,null],[6027,-560,1,0.6,0,null,null],[7521,425,2,0.4,0.1,null,null],[7599,389,1,0.5,-0.5,null,null],[5863,-431,2,0.9,0.1,null,null],[9392,262,2,0.9,-0.1,null,null],[7521,512,3,0.6,null,null,null],[9807,1027,1,0.5,-0.1,null,null],[9554,237,1,1,-0.2,1,null],[9346,392,4,1.2,-0.3,null,null],[9789,1142,3,0.7,null,null,null],[9747,-532,4,0.8,0.2,1,null],[8591,347,4,0.6,-0.2,null,null],[9951,-509,1,1,null,null,null],[9308,2417,1,0.5,0.1,null,null],[10185,-522,2,0.9,null,1,null],[10330,2147,1,0.6,0,null,null],[9350,2480,3,0.7,null,null,null],[10503,2124,2,0.9,null,null,null],[12500,2628,4,0.5,0.3,null,null],[13188,2864,4,0.5,-0.1,null,null],[12637,2659,2,0.7,0.1,null,null],[13262,2899,1,0.5,null,null,null],[13777,5168,1,0.5,-0.3,null,null],[15709,6399,1,0.4,null,null,null],[13539,5664,3,0.5,null,1,null],[15660,6474,2,0.4,-0.3,null,null],[13743,5248,2,0.7,-0.1,null,null],[15482,6600,2,0.4,-0.1,null,null],[15591,6525,4,0.3,null,null,null],[13487,5738,4,0.7,null,null,null],[15407,6702,1,0.6,0.1,null,null],[8171,-2568,2,0.5,0.1,null,null],[16001,6015,3,0.6,null,null,null],[16017,6110,1,0.4,null,1,null],[6496,-1491,1,0.5,0.3,null,null],[6626,-1480,2,0.7,null,null,null],[6190,-1022,4,0.8,null,null,null],[8325,-2615,2,1,-0.3,null,null],[8222,-2412,4,1,null,null,null],[9204,-2288,1,0.9,-0.1,null,null],[9279,-2216,2,1,null,null,null],[10375,-1558,2,0.8,-0.3,null,null],[10309,-1421,1,0.9,null,null,null],[10247,-1216,4,1.2,-0.5,null,null],[10079,-2310,4,0.9,0.3,null,null],[10320,-2330,3,1,null,null,null],[10942,-2963,2,0.9,-0.3,null,null],[10807,-2778,4,1.1,-0.5,null,null],[12989,-1929,3,0.6,null,null,null],[12613,-1181,1,0.4,0,1,null],[12559,-1120,2,0.5,null,null,null],[11642,-1900,4,0.7,-0.5,null,null],[11558,-1692,1,0.9,-0.2,null,null],[11509,-1479,2,0.5,null,null,null],[12559,-2673,1,0.8,null,null,null],[12446,-2487,4,1,-0.5,null,null],[12375,-2303,3,0.9,-0.2,null,null],[10363,-3514,4,0.7,-0.4,null,null],[10290,-3340,1,0.9,-0.2,null,null],[10162,-3207,2,0.7,null,null,null],[9003,-3048,4,0.9,-0.1,null,null],[9161,-3119,1,0.6,null,null,null],[14550,-3462,2,0.9,-0.2,null,null],[14407,-3335,4,0.9,-0.2,null,null],[14366,-4493,2,0.9,0.5,null,null],[14477,-4437,3,1,null,null,null],[15305,-4230,4,0.9,0.1,null,null],[15481,-4283,2,0.9,null,null,null],[15349,-5009,4,0.4,0.3,null,null],[11874,-4879,2,0.6,null,null,null],[15453,-4984,1,0.7,null,null,null],[11907,-4742,4,0.8,-0.6,null,null],[12440,-4278,4,0.5,0.3,null,null],[11980,-4582,2,0.9,null,null,null],[12131,-4387,1,1.1,null,null,null],[15681,-4973,4,1,null,null,null],[12591,-4252,1,0.8,null,null,null],[12777,-4244,2,0.9,0.2,null,null],[12969,-4227,3,0.9,null,null,null],[15897,-5071,2,0.9,-0.2,null,null],[13204,-4228,4,1,null,null,null],[11592,-5261,1,0.7,0.2,null,null],[12743,-4826,1,0.4,0.3,null,null],[10102,-5078,2,0.7,0.4,null,null],[12854,-4782,3,0.9,0.1,null,null],[10191,-5033,1,0.7,null,null,null],[10523,-5133,2,1,null,null,null],[10336,-4977,4,1.1,-0.3,null,null],[10667,-5250,2,0.8,-0.1,null,null],[9665,-6403,4,0.7,0.3,null,null],[10798,-5379,1,0.5,null,null,null],[9670,-5547,1,0.9,-0.1,null,null],[9834,-6369,3,1,null,null,null],[9864,-5572,2,1.1,-0.1,null,null],[11362,-3957,2,0.9,null,1,null],[11162,-3830,4,1,-0.1,null,null],[8922,-6173,4,1,null,null,null],[9003,-5368,1,0.5,null,null,null],[8453,-6153,1,0.6,0.2,null,null],[8954,-5229,3,0.9,-0.2,null,null],[8905,-5072,1,0.8,-0.3,null,null],[8704,-3873,3,0.9,null,null,null],[8578,-6105,2,0.8,0.4,null,null],[8508,-3710,1,0.7,0,null,null],[8614,-5400,4,0.5,null,null,null],[8788,-4922,4,1.1,null,null,null],[8936,-3905,4,0.6,0.3,null,null],[9701,-4613,4,0.9,-0.1,null,null],[6973,-4776,2,0.6,null,null,null],[7016,-4674,1,0.9,null,null,null],[9124,-3853,1,0.9,0.2,null,null],[7253,-4648,4,0.8,0.2,null,null],[6602,-4591,1,0.6,0.2,null,null],[8510,-5322,2,0.9,null,null,null],[6687,-3810,4,0.7,0.3,null,null],[9525,-4492,3,1.1,null,null,null],[7461,-4705,2,0.9,null,null,null],[9280,-3812,2,0.8,-0.3,null,null],[6467,-2811,1,0.3,null,null,null],[6842,-3820,1,0.8,0.3,null,null],[6483,-2725,4,0.6,0.3,null,null],[7675,-4864,1,1.1,null,null,null],[6991,-2885,4,0.9,0.2,null,null],[6610,-2664,4,0.9,null,null,null],[6822,-2736,2,0.9,null,null,null],[6763,-4582,3,0.9,null,null,null],[6509,-2490,2,0.9,-0.3,null,null],[7216,-3865,4,1.1,0.2,1,null],[7018,-3708,2,1,0.2,null,null],[2254,-3301,1,0.8,0.5,null,null],[6378,-2310,1,0.8,0.2,null,null],[7197,-2857,2,0.9,null,null,null],[2609,-3483,4,0.5,null,null,null],[2449,-3385,2,0.9,0.3,1,null],[4585,-2889,4,0.7,-0.2,null,null],[4470,-2768,3,0.8,0.2,null,null],[4083,-4033,1,0.9,0.5,1,null],[1568,-2869,1,0.4,null,null,null],[4336,-4105,2,1.2,null,null,null],[1977,-1678,2,0.5,null,null,null],[1412,-3642,1,0.5,0,1,null],[1570,-2792,4,0.6,null,null,null],[1932,-1586,1,0.6,null,null,null],[1310,-3547,2,0.6,0,null,null],[3611,1391,2,1,null,null,null],[3558,2174,2,0.9,null,null,null],[3431,1563,1,0.9,0.3,null,null],[3142,2813,2,0.7,null,null,null],[3330,2296,4,1.1,null,null,null],[3001,2818,1,0.6,0.3,null,null],[3703,2044,1,0.4,null,null,null],[2872,3863,1,0.9,-0.2,null,null],[3125,2942,3,1.1,null,null,null],[2841,4018,4,1.1,0.1,null,null],[2402,5140,4,0.6,0.3,null,null],[2511,5167,3,0.8,null,null,null],[-14607,-5112,4,0.9,0.1,null,null],[-14430,-5180,1,0.9,0,null,null],[-14197,-5222,2,1.2,-0.1,null,null],[-14895,-4703,4,0.5,0.2,null,null],[-14797,-4728,2,0.4,null,null,null],[-14697,-4739,1,0.4,null,null,null],[-13919,-5281,1,1.1,0,null,null],[-13646,-5170,3,0.7,null,null,null],[-13400,-5068,2,1.2,0.2,null,null],[-13099,-5108,4,1.1,0.2,null,null],[-12824,-5092,1,0.9,null,null,null],[-12631,-5044,2,0.9,-0.2,null,null],[-12427,-4914,1,0.9,null,null,null],[-12270,-4816,2,0.7,-0.3,null,null],[-11772,-4983,2,0.7,0,null,null],[-11940,-4867,1,0.9,null,null,null],[-12091,-4699,3,0.9,null,null,null],[-12270,-4529,4,0.7,null,null,null],[-12460,-4396,1,0.9,0.4,null,null],[-13058,-4252,1,0.9,null,null,null],[-12894,-4096,4,0.7,0.2,null,null],[-12738,-4077,2,0.7,null,null,null],[-13546,-4341,1,0.4,null,null,null],[-13428,-4299,3,0.9,null,null,null],[-14679,-4192,1,0.7,-0.1,null,null],[-14368,-4308,4,0.7,-0.2,null,null],[-14495,-4133,2,1.1,-0.1,null,null],[-12072,-3824,2,0.8,-0.1,null,null],[-11904,-3648,1,1,0,null,null],[-11654,-3569,3,0.7,null,null,null],[-11648,-3357,4,0.9,0,null,null],[-11420,-3359,1,0.9,null,null,null],[-11296,-3135,2,0.7,null,null,null],[-10782,-2838,1,0.8,-0.1,null,null],[-11410,-3039,1,0.3,0.6,null,null],[-10581,-2773,2,1.1,0.1,null,null],[-11118,-5114,4,0.8,0.2,null,null],[-10675,-5079,1,0.9,null,null,null],[-10205,-4890,1,0.8,0.1,null,null],[-11543,-4164,4,0.8,0.3,null,null],[-11287,-4244,2,0.5,null,null,null],[-10018,-4747,2,1,-0.2,null,null],[-9278,419,3,0.5,null,null,null],[-9341,470,4,0.5,0.3,null,null],[-9180,496,1,0.8,0.6,null,null],[-11365,-4131,3,1,null,null,null],[-9353,0,3,0.6,0.3,null,null],[-8975,528,2,1,0.1,null,null],[-9413,89,4,0.9,null,null,null],[-8230,770,1,0.4,null,null,null],[-9231,17,1,0.7,0,null,null],[-6808,1667,3,0.5,-0.2,null,null],[-6694,1622,2,0.8,-0.4,null,null],[-8285,855,3,0.6,null,null,null],[-6793,1796,2,0.8,0.4,null,null],[-6865,1935,1,0.5,-0.1,null,null],[-7043,2222,3,0.6,-0.2,null,null],[-7083,2368,1,0.6,-0.2,null,null],[-7103,2533,4,0.7,-0.4,null,null],[-7099,2721,2,0.8,-0.3,null,null],[-7178,2874,1,0.4,null,null,null],[-6964,3110,4,0.7,0.2,null,null],[-6246,4191,1,0.6,-0.1,null,null],[-6735,3446,1,0.4,0.1,null,null],[-6722,3537,4,0.7,0.4,null,null],[-6396,3388,4,0.9,null,null,null],[-6787,3140,2,0.9,null,null,null],[-6227,4488,2,0.7,-0.5,null,null],[-6281,3953,1,0.6,0.2,null,null],[-6530,3576,1,1.1,null,null,null],[-6147,3994,3,1.1,null,null,null],[-6141,4292,2,1.2,-0.3,null,null],[-6377,5578,2,0.7,-0.5,null,null],[-6152,4569,1,0.9,-0.2,null,null],[-6222,4769,4,0.7,-0.5,null,null],[-6266,4956,1,0.6,-0.2,null,null],[-6233,5414,1,0.9,-0.4,null,null],[-6347,5646,3,0.7,-0.1,1,null],[-6400,6066,2,0.7,-0.2,null,null],[-6411,6261,1,0.8,null,null,null],[-6565,7043,1,0.6,-0.3,null,null],[-6377,6415,4,0.9,-0.3,null,null],[-6440,6614,1,0.7,-0.2,null,null],[-5944,1954,3,0.5,-0.4,null,null],[-6001,2039,1,0.8,0.2,null,null],[-6467,7070,3,0.9,null,null,null],[-4963,3608,1,0.6,-0.3,1,null],[-4776,3510,2,0.4,-0.1,1,null],[-5785,1998,2,1.1,-0.2,null,null],[-3708,3449,1,0.6,-0.3,null,null],[-3790,3582,1,0.9,null,null,null],[-4031,3697,4,0.7,-0.1,null,null],[-4859,3634,3,1,null,null,null],[-3850,3730,2,1,0.2,null,null],[-4689,4605,4,0.9,-0.2,null,null],[-3492,2892,1,0.6,-0.2,null,null],[-4507,4483,1,0.6,null,null,null],[-4829,2745,1,0.9,-0.2,null,null],[-4435,4273,2,0.9,-0.6,null,null],[-3383,2930,2,0.9,null,null,null],[-4888,2821,2,0.9,0.1,null,null],[-5372,5172,1,0.5,null,null,null],[-5036,2981,4,0.9,0.3,null,null],[-9895,-1942,1,1,0.1,null,null],[-9371,-2159,4,0.6,null,null,null],[-9995,-1773,4,0.9,-0.5,null,null],[-5280,5218,4,0.9,0,null,null],[-5079,5183,1,0.9,-0.3,null,null],[-5149,3079,1,0.6,0.2,null,null],[-9695,-2048,2,1,-0.1,null,null],[-5063,5374,2,0.9,-0.2,null,null],[-9504,-2059,1,1,0.2,null,null],[-8948,-2140,4,0.7,0.3,null,null],[-9262,-2081,2,1.1,0.4,null,null],[-9068,-2071,4,1,0.2,null,null],[-8861,-2045,2,1.1,0,null,null],[-8654,-2083,1,1,0.3,null,null],[-8473,-2048,3,1,0,null,null],[-8283,-1965,1,1,0.5,null,null],[-8182,-1863,2,0.9,-0.2,null,null],[-10037,-1579,1,0.9,-0.4,null,null],[-10063,-1365,2,0.9,-0.1,null,null],[-10074,-1190,1,0.9,-0.4,null,null],[-8167,-1225,1,0.5,-0.7,null,null],[-8188,-1087,4,0.8,-0.5,null,null],[-9975,-1022,1,0.9,0.3,null,null],[-9835,-910,2,1,0.1,null,null],[-9709,-848,4,1,0.3,null,null],[-9532,-792,2,1,0.1,null,null],[-9348,-779,1,1,0,null,null],[-9131,-784,2,1.1,0.1,null,null],[-8754,-795,3,0.7,null,null,null],[-8587,-797,4,1,0,null,null],[-8424,-856,1,0.9,null,null,null],[-8246,-921,2,0.9,-0.4,null,null],[-8153,-1701,4,0.7,-0.7,null,null],[-6447,-2137,1,0.6,-0.2,null,null],[-8153,-1591,1,0.5,-0.6,null,null],[-7694,-1393,4,1,-0.1,null,null],[-6541,-2030,2,0.7,null,null,null],[-7135,-1547,2,0.7,0.1,null,null],[-5885,-2958,1,0.6,0.3,null,null],[-7171,-1440,1,0.8,-0.2,null,null],[-5620,-3123,2,0.6,-0.4,null,null],[-6631,-1866,4,0.8,null,null,null],[-5882,-3696,2,0.8,-0.4,null,null],[-5716,-2944,3,0.9,null,null,null],[-5949,-3528,1,0.5,-0.1,null,null],[-6869,-4052,4,0.8,null,null,null],[-7081,-2673,3,0.5,null,null,null],[-6725,-4069,1,0.6,-0.2,null,null],[-10487,-2295,2,0.5,0.1,1,null],[-7032,-2749,2,0.6,-0.4,null,null],[-10769,-3817,3,0.6,-0.2,null,null],[-6607,-4081,2,0.5,null,null,null],[-10849,-1824,1,0.7,0.1,null,null],[-10479,-2146,4,0.9,-0.1,null,null],[-7003,-2611,4,0.9,-0.2,null,null],[-10749,-1511,2,0.6,-0.4,null,null],[-10697,-1953,2,1,0.1,null,null],[-10848,-1330,3,0.9,null,null,null],[-10912,-1220,4,0.5,0,null,null],[-9843,-2685,4,0.7,null,null,null],[-10823,-3717,2,0.7,null,null,null],[-9697,-2713,1,0.6,0.3,null,null],[-10080,-3431,2,0.4,null,null,null],[-10648,-3844,1,0.9,null,null,null],[-9530,-2695,2,1,null,null,null],[-2387,-6791,1,0.9,null,null,null],[-8465,-5037,2,0.7,null,null,null],[-2550,-6627,2,0.9,-0.1,null,null],[-9325,-2822,1,0.7,-0.1,null,null],[-10140,-3346,1,0.8,null,null,null],[-8461,-4908,4,0.9,null,null,null],[8116,-1076,2,0.8,-0.3,null,null],[8115,-940,4,0.8,-0.3,null,null],[-2503,-6359,4,1.4,-0.6,null,null],[-9062,-1580,2,0.8,-0.5,null,null],[8120,-790,1,0.8,null,null,null],[-9065,-1444,4,0.8,-0.3,null,null],[-2615,-6159,1,1,null,null,null],[-2744,-5943,2,1.1,null,null,null],[-3713,-4955,3,0.9,null,null,null],[-9061,-1292,1,0.8,0,null,null],[-1551,-4718,4,0.5,null,null,null],[5251,-6249,1,0.5,null,1,null],[5192,-6181,2,0.4,-0.1,null,null],[-2898,-5732,3,0.9,null,null,null],[-1705,-4629,3,0.8,null,null,null],[1618,-7035,1,0.5,null,null,null],[-3829,-4776,4,0.9,null,null,null],[-2851,-5589,4,1.1,-0.2,null,null],[-2974,-5399,2,1.1,null,null,null],[-3952,-4568,1,0.9,null,null,null],[-4135,-4368,2,1.1,0.1,1,null],[-3428,-5104,1,1.1,null,null,null],[-3167,-5254,4,0.9,0.1,null,null],[-3049,-6916,2,1,null,null,null],[-3097,-6722,1,0.9,-0.3,null,null],[-3190,-6493,3,1,null,null,null],[-3318,-6284,4,1.1,null,null,null],[-4672,-5861,1,1.1,1,null,null],[-4480,-5668,1,1,null,null,null],[-4294,-5548,2,0.9,1.1,null,null],[-3433,-6072,1,1,-0.2,null,null],[-3568,-5881,3,1,null,null,null],[-3736,-5698,2,1.2,null,null,null],[-3978,-7517,3,0.9,0.1,null,null],[-3956,-5572,4,1,null,null,null],[-4103,-5400,1,1,null,null,null],[-4281,-5240,2,1,null,null,null],[-4409,-5034,3,1,null,null,null],[-4475,-4808,4,0.9,null,null,null],[-2777,-7546,3,1,0.8,null,null],[-2542,-7502,2,0.9,0.4,null,null],[-2398,-7364,1,0.9,-0.7,null,null],[-2350,-7151,2,0.9,-0.4,null,null],[-2315,-6976,4,0.8,-0.8,null,null],[-3749,-7488,4,1,null,null,null],[-2995,-7596,2,1.2,0.5,null,null],[-3253,-7558,3,1.1,0.3,null,null],[-3468,-7472,4,1,null,null,null],[-5028,-6473,2,1,0.4,null,null],[-3604,-7301,1,1.1,null,null,null],[-3678,-7078,2,1.1,null,null,null],[-3835,-6826,3,1.1,null,null,null],[-3935,-6595,2,1,null,null,null],[-5214,-7381,3,1,null,null,null],[-4065,-6416,3,1.1,null,null,null],[-4174,-6231,4,0.7,null,null,null],[-4556,-6940,3,1,null,null,null],[-4663,-6781,4,1,null,null,null],[-4748,-6548,2,1.3,null,null,null],[-4847,-6257,2,1.1,-0.4,null,null],[-4806,-6016,4,0.9,1.2,null,null],[-4950,-7410,1,1.4,0.2,null,null],[-5470,-7251,4,1.3,-0.2,null,null],[-5637,-7038,2,1,-0.3,null,null],[-5593,-6819,4,1,null,null,null],[-5406,-6727,3,1,0.6,null,null],[-5263,-6580,1,1,0.4,null,null],[-4636,-7476,2,1,0.2,null,null],[-4399,-7496,2,0.9,-0.2,null,null],[-6769,-7571,2,0.9,-0.4,null,null],[-6853,-7377,1,0.9,null,null,null],[-8273,-7231,4,0.5,0.4,null,null],[-4182,-7512,4,0.9,0.1,null,null],[-7525,-5855,2,0.9,null,null,null],[-7495,-6329,3,0.5,null,null,null],[-7297,-6946,2,0.9,null,null,null],[-8148,-7137,1,0.7,null,null,null],[-7030,-7301,4,0.7,null,null,null]],walls:[[1009,-2308,108],[1241,-2490,60],[1157,-2379,84],[622,-2126,48],[669,-2187,72],[-392,-1669,132],[-273,-1746,60],[-252,-1504,120],[1553,-2016,48],[1637,-1972,60],[1736,-1922,60],[2150,-2406,72],[2238,-2318,108],[2364,-2391,72],[2491,-2682,72],[2596,-2671,108],[-150,-3147,48],[-155,-3044,84],[-427,-3600,48],[-259,-2982,60],[-379,-3529,72],[-665,-3052,60],[20,-1816,60],[127,-1799,60],[263,-2572,48],[405,-2570,108],[851,-4183,120],[754,-3971,108],[1757,-5065,132],[1169,-4453,108],[2054,-5244,108],[1631,-4901,108],[2305,-5281,108],[1007,-4281,96],[2766,-5202,96],[2927,-5204,84],[3206,-5218,36],[3099,-5193,72],[1417,-4726,120],[2844,-1513,60],[3206,-1464,120],[2881,-1403,108],[3804,-2025,84],[4116,-1778,108],[3715,-1508,72],[4247,-1126,72],[3860,268,60],[4334,-1011,132],[3849,349,72],[3956,490,96],[4073,667,108],[3583,-864,96],[4135,836,120],[4785,-743,120],[4993,-839,108],[5224,-482,84],[5235,-1238,132],[5419,-1346,72],[6075,-5099,96],[5767,-4953,108],[5896,-4967,108],[5384,-4642,108],[5704,-4857,108],[5563,-4697,108],[5406,-4470,132],[5352,-3964,108],[5309,-3665,132],[5247,-3464,108],[5300,-3121,108],[3524,-3340,132],[3661,-3589,108],[7236,-1376,72],[7624,-1610,96],[7403,-1555,84],[7514,-1568,108],[3660,-2705,108],[3374,-2813,96],[7347,-1447,108],[7236,-775,60],[7207,-631,108],[7303,-468,108],[7262,-1263,108],[7404,-350,120],[7589,-305,108],[7741,-1589,120],[7949,-1594,120],[8152,-1599,132],[8378,-1602,144],[7873,-321,72],[8543,-1661,84],[7790,-259,120],[8675,-1573,120],[8163,-245,84],[8329,-311,84],[8275,-229,120],[8447,-277,120],[8824,-1447,108],[7221,-1140,60],[8924,-1273,108],[6844,-950,120],[8949,-1060,132],[8904,-920,96],[8582,-338,84],[8963,-803,120],[8680,-322,108],[8811,-449,108],[8910,-610,108],[6855,114,96],[6971,241,120],[6852,656,60],[6980,706,108],[6946,939,120],[6027,-560,72],[7521,425,48],[7599,389,60],[5863,-431,108],[9392,262,108],[7521,512,72],[9807,1027,60],[9554,237,120],[9346,392,144],[9789,1142,84],[9747,-532,96],[8591,347,72],[9951,-509,120],[9308,2417,60],[10185,-522,108],[10330,2147,72],[9350,2480,84],[10503,2124,108],[12500,2628,60],[13188,2864,60],[12637,2659,84],[13262,2899,60],[13777,5168,60],[15709,6399,48],[13539,5664,60],[15660,6474,48],[13743,5248,84],[15482,6600,48],[15591,6525,36],[13487,5738,84],[15407,6702,72],[8171,-2568,60],[16001,6015,72],[16017,6110,48],[6496,-1491,60],[6626,-1480,84],[6190,-1022,96],[8325,-2615,120],[8222,-2412,120],[9204,-2288,108],[9279,-2216,120],[10375,-1558,96],[10309,-1421,108],[10247,-1216,144],[10079,-2310,108],[10320,-2330,120],[10942,-2963,108],[10807,-2778,132],[12989,-1929,72],[12613,-1181,48],[12559,-1120,60],[11642,-1900,84],[11558,-1692,108],[11509,-1479,60],[12559,-2673,96],[12446,-2487,120],[12375,-2303,108],[10363,-3514,84],[10290,-3340,108],[10162,-3207,84],[9003,-3048,108],[9161,-3119,72],[14550,-3462,108],[14407,-3335,108],[14366,-4493,108],[14477,-4437,120],[15305,-4230,108],[15481,-4283,108],[15349,-5009,48],[11874,-4879,72],[15453,-4984,84],[11907,-4742,96],[12440,-4278,60],[11980,-4582,108],[12131,-4387,132],[15681,-4973,120],[12591,-4252,96],[12777,-4244,108],[12969,-4227,108],[15897,-5071,108],[13204,-4228,120],[11592,-5261,84],[12743,-4826,48],[10102,-5078,84],[12854,-4782,108],[10191,-5033,84],[10523,-5133,120],[10336,-4977,132],[10667,-5250,96],[9665,-6403,84],[10798,-5379,60],[9670,-5547,108],[9834,-6369,120],[9864,-5572,132],[11362,-3957,108],[11162,-3830,120],[8922,-6173,120],[9003,-5368,60],[8453,-6153,72],[8954,-5229,108],[8905,-5072,96],[8704,-3873,108],[8578,-6105,96],[8508,-3710,84],[8614,-5400,60],[8788,-4922,132],[8936,-3905,72],[9701,-4613,108],[6973,-4776,72],[7016,-4674,108],[9124,-3853,108],[7253,-4648,96],[6602,-4591,72],[8510,-5322,108],[6687,-3810,84],[9525,-4492,132],[7461,-4705,108],[9280,-3812,96],[6467,-2811,36],[6842,-3820,96],[6483,-2725,72],[7675,-4864,132],[6991,-2885,108],[6610,-2664,108],[6822,-2736,108],[6763,-4582,108],[6509,-2490,108],[7216,-3865,132],[7018,-3708,120],[2254,-3301,96],[6378,-2310,96],[7197,-2857,108],[2609,-3483,60],[2449,-3385,108],[4585,-2889,84],[4470,-2768,96],[4083,-4033,108],[1568,-2869,48],[4336,-4105,144],[1977,-1678,60],[1412,-3642,60],[1570,-2792,72],[1932,-1586,72],[1310,-3547,72],[3611,1391,120],[3558,2174,108],[3431,1563,108],[3142,2813,84],[3330,2296,132],[3001,2818,72],[3703,2044,48],[2872,3863,108],[3125,2942,132],[2841,4018,132],[2402,5140,72],[2511,5167,96],[-14607,-5112,108],[-14430,-5180,108],[-14197,-5222,144],[-14895,-4703,60],[-14797,-4728,48],[-14697,-4739,48],[-13919,-5281,132],[-13646,-5170,84],[-13400,-5068,144],[-13099,-5108,132],[-12824,-5092,108],[-12631,-5044,108],[-12427,-4914,108],[-12270,-4816,84],[-11772,-4983,84],[-11940,-4867,108],[-12091,-4699,108],[-12270,-4529,84],[-12460,-4396,108],[-13058,-4252,108],[-12894,-4096,84],[-12738,-4077,84],[-13546,-4341,48],[-13428,-4299,108],[-14679,-4192,84],[-14368,-4308,84],[-14495,-4133,132],[-12072,-3824,96],[-11904,-3648,120],[-11654,-3569,84],[-11648,-3357,108],[-11420,-3359,108],[-11296,-3135,84],[-10782,-2838,96],[-11410,-3039,36],[-10581,-2773,132],[-11118,-5114,96],[-10675,-5079,108],[-10205,-4890,96],[-11543,-4164,96],[-11287,-4244,60],[-10018,-4747,120],[-9278,419,60],[-9341,470,60],[-9180,496,96],[-11365,-4131,120],[-9353,0,72],[-8975,528,120],[-9413,89,108],[-8230,770,48],[-9231,17,84],[-6808,1667,60],[-6694,1622,96],[-8285,855,72],[-6793,1796,96],[-6865,1935,60],[-7043,2222,72],[-7083,2368,72],[-7103,2533,84],[-7099,2721,96],[-7178,2874,48],[-6964,3110,84],[-6246,4191,72],[-6735,3446,48],[-6722,3537,84],[-6396,3388,108],[-6787,3140,108],[-6227,4488,84],[-6281,3953,72],[-6530,3576,132],[-6147,3994,132],[-6141,4292,144],[-6377,5578,84],[-6152,4569,108],[-6222,4769,84],[-6266,4956,72],[-6233,5414,108],[-6347,5646,84],[-6400,6066,84],[-6411,6261,96],[-6565,7043,72],[-6377,6415,108],[-6440,6614,84],[-5944,1954,60],[-6001,2039,96],[-6467,7070,108],[-4963,3608,72],[-4776,3510,48],[-5785,1998,132],[-3708,3449,72],[-3790,3582,108],[-4031,3697,84],[-4859,3634,120],[-3850,3730,120],[-4689,4605,108],[-3492,2892,72],[-4507,4483,72],[-4829,2745,108],[-4435,4273,108],[-3383,2930,108],[-4888,2821,108],[-5372,5172,60],[-5036,2981,108],[-9895,-1942,120],[-9371,-2159,72],[-9995,-1773,108],[-5280,5218,108],[-5079,5183,108],[-5149,3079,72],[-9695,-2048,120],[-5063,5374,108],[-9504,-2059,120],[-8948,-2140,84],[-9262,-2081,132],[-9068,-2071,120],[-8861,-2045,132],[-8654,-2083,120],[-8473,-2048,120],[-8283,-1965,120],[-8182,-1863,108],[-10037,-1579,108],[-10063,-1365,108],[-10074,-1190,108],[-8167,-1225,60],[-8188,-1087,96],[-9975,-1022,108],[-9835,-910,120],[-9709,-848,120],[-9532,-792,120],[-9348,-779,120],[-9131,-784,132],[-8754,-795,84],[-8587,-797,120],[-8424,-856,108],[-8246,-921,108],[-8153,-1701,84],[-6447,-2137,72],[-8153,-1591,60],[-7694,-1393,120],[-6541,-2030,84],[-7135,-1547,84],[-5885,-2958,72],[-7171,-1440,96],[-5620,-3123,72],[-6631,-1866,96],[-5882,-3696,96],[-5716,-2944,108],[-5949,-3528,60],[-6869,-4052,96],[-7081,-2673,60],[-6725,-4069,72],[-10487,-2295,60],[-7032,-2749,72],[-10769,-3817,72],[-6607,-4081,60],[-10849,-1824,84],[-10479,-2146,108],[-7003,-2611,108],[-10749,-1511,72],[-10697,-1953,120],[-10848,-1330,108],[-10912,-1220,60],[-9843,-2685,84],[-10823,-3717,84],[-9697,-2713,72],[-10080,-3431,48],[-10648,-3844,108],[-9530,-2695,120],[-2387,-6791,108],[-8465,-5037,84],[-2550,-6627,108],[-9325,-2822,84],[-10140,-3346,96],[-8461,-4908,108],[8116,-1076,96],[8115,-940,96],[-2503,-6359,168],[-9062,-1580,96],[8120,-790,96],[-9065,-1444,96],[-2615,-6159,120],[-2744,-5943,132],[-3713,-4955,108],[-9061,-1292,96],[-1551,-4718,60],[5251,-6249,60],[5192,-6181,48],[-2898,-5732,108],[-1705,-4629,96],[1618,-7035,60],[-3829,-4776,108],[-2851,-5589,132],[-2974,-5399,132],[-3952,-4568,108],[-4135,-4368,132],[-3428,-5104,132],[-3167,-5254,108],[-3049,-6916,120],[-3097,-6722,108],[-3190,-6493,120],[-3318,-6284,132],[-4672,-5861,132],[-4480,-5668,120],[-4294,-5548,108],[-3433,-6072,120],[-3568,-5881,120],[-3736,-5698,144],[-3978,-7517,108],[-3956,-5572,120],[-4103,-5400,120],[-4281,-5240,120],[-4409,-5034,120],[-4475,-4808,108],[-2777,-7546,120],[-2542,-7502,108],[-2398,-7364,108],[-2350,-7151,108],[-2315,-6976,96],[-3749,-7488,120],[-2995,-7596,144],[-3253,-7558,132],[-3468,-7472,120],[-5028,-6473,120],[-3604,-7301,132],[-3678,-7078,132],[-3835,-6826,132],[-3935,-6595,120],[-5214,-7381,120],[-4065,-6416,132],[-4174,-6231,84],[-4556,-6940,120],[-4663,-6781,120],[-4748,-6548,156],[-4847,-6257,132],[-4806,-6016,108],[-4950,-7410,168],[-5470,-7251,156],[-5637,-7038,120],[-5593,-6819,120],[-5406,-6727,120],[-5263,-6580,120],[-4636,-7476,120],[-4399,-7496,108],[-6769,-7571,108],[-6853,-7377,108],[-8273,-7231,60],[-4182,-7512,108],[-7525,-5855,108],[-7495,-6329,60],[-7297,-6946,108],[-8148,-7137,84],[-7030,-7301,84]],groundDoodads:[[-9670,-1470,"doodadField",0.5,0,null,null],[8600,-940,"doodadField",0.5,0,null,null],[920,-2800,"doodadField",0.5,0,null,null]],debug:{show:!0,collisions:!1},mobile:!1,ios:!1,phone:!1,tablet:!1,mouse:!1,resolution:1,overdrawOptimize:!0,overdraw:256,scalingFactor:2500,minimapPaddingX:16,minimapPaddingY:16,minimapSize:240,maxChatLines:50,maxScoreboard:8,shadowScaling:2,shadowOffsetX:20,shadowOffsetY:40,ackFrequency:10,bucketSize:512,mapWidth:32768,mapHeight:16384},window.Tools={},window.Textures={},window.Graphics={},window.Network={},window.Input={},window.Players={},window.Mobs={},window.Particles={},window.UI={},window.Games={},window.Sound={};var Bt=function(Xt,Yt){Tools.updateTime(Xt),Tools.debugStartFrame(),game.state==Network.STATE.PLAYING?(Input.update(),Network.detectConnectivity(),Players.update(),Mobs.update(),Particles.update(),Games.update(),Sound.update()):game.state==Network.STATE.LOGIN?Tools.updateReel():Sound.update(),Graphics.update(),Yt||Graphics.render(),Tools.debugEndFrame()},Gt=function(){var Xt=performance.now()-game.time;450<Xt&&!game.focus&&Bt(Xt/16.666,!0)};window.RunGame=function(){game.state=Network.STATE.LOGIN,Tools.startupMsg(),Tools.loadSettings(),Tools.detectCapabilities(),Tools.setupDebug(),Graphics.setup(),Tools.initBuckets(),Particles.setup(),UI.setup(),Input.setup(),Games.setup(),Sound.setup();var Xt=new PIXI.ticker.Ticker;Xt.add(Bt),Xt.start(),setInterval(Gt,500)}}();class Vector{constructor(Bt,Gt){this.x=Bt,this.y=Gt}add(Bt){this.x+=Bt,this.y+=Bt}divide(Bt){this.x/=Bt,this.y/=Bt}multiply(Bt){this.x*=Bt,this.y*=Bt}limit(Bt){this.divide(this.length()),this.multiply(Bt)}clone(){return new Vector(this.x,this.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}angle(){return Math.atan2(this.y,this.x)-Math.PI/2}ceil(Bt){this.x>Bt&&(this.x=Bt),this.y>Bt&&(this.y=Bt)}floor(Bt){this.x<Bt&&(this.x=Bt),this.y<Bt&&(this.y=Bt)}both(Bt){this.x=Bt,this.y=Bt}static zero(){return new Vector(0,0)}static diag(Bt){return new Vector(Bt,Bt)}static create(Bt,Gt){return new Vector(Math.sin(Bt)*Gt,-Math.cos(Bt)*Gt)}static createOff(Bt,Gt,Xt){return new Vector(Bt.x+Math.sin(Gt)*Xt,Bt.y-Math.cos(Gt)*Xt)}}function loadGameCode(){!function(){var Xt={},Yt=0,Ht={started:!1,startX:200,startY:-2450,pan:0,dist:100,explosion:4e3,direction:1};Tools.updateReel=function(){if(!Ht.started){Ht.pos=Vector.zero();for(var $t=[3,1,2,4,5],en=[-270,-150,0,150,270],tn=0,Zt;tn<$t.length;tn++)Players.add({id:tn+1,team:1,status:0,reel:!0,name:"",type:$t[tn],posX:0,posY:0,rot:0,flag:1}),(Zt=Players.get(tn+1)).keystate.UP=!0,Zt._offset=en[tn]}Ht.started=!0,2e3<Ht.dist?Ht.direction=-1:100>Ht.dist&&(Ht.direction=1),Ht.dist+=.5*Ht.direction*game.timeFactor,Ht.pan+=1/Ht.dist*game.timeFactor,Ht.pos.x=Ht.startX+Math.sin(Ht.pan)*Ht.dist,Ht.pos.y=Ht.startY-Math.cos(Ht.pan)*Ht.dist,Players.update(),Particles.update();for(var an=1,nn;5>=an;an++)(nn=Players.get(an)).pos.x=Ht.pos.x+nn._offset,nn.pos.y=Ht.pos.y+.24*(game.screenY/game.scale),null==nn._prevPos?nn._prevPos=nn.pos.clone():nn.rot=new Vector(nn.pos.x-nn._prevPos.x,nn.pos.y-nn._prevPos.y).angle()+Math.PI,nn._prevPos=new Vector((19*nn._prevPos.x+nn.pos.x)/20,(19*nn._prevPos.y+nn.pos.y)/20);if(game.time>Ht.explosion){var rn=new Vector(Tools.rand(Ht.pos.x-game.halfScreenX/game.scale,Ht.pos.x+game.halfScreenX/game.scale),Tools.rand(Ht.pos.y-game.halfScreenY/game.scale,Ht.pos.y+game.halfScreenY/game.scale));Particles.explosion(rn,Tools.rand(2,2.5),Tools.randInt(4,7)),Particles.explosion(new Vector(rn.x+Tools.rand(-100,100),rn.y+Tools.rand(-100,100)),Tools.rand(1,1.2)),Ht.explosion=game.time+Tools.rand(1e3,3e3)}},Tools.wipeReel=function(){Particles.wipe(),Players.wipe()},Tools.startupMsg=function(){console.log("%c\u039BIRM\u039BSH Engine "+game.version+" starting up!","font-size: 20px;"),console.log(""),console.log("%c*** Important message ***","font-size: 16px; color: red;"),console.log("%cDo not paste any commands given by players in this console window","font-size: 14px; color: red;"),console.log("")},Tools.detectCapabilities=function(){Wt(),config.mobile&&!config.settings.mobileshown&&(UI.popBigMsg(1),config.settings.mobileshown=!0,Tools.setSettings({mobileshown:!0})),config.mobile&&Input.setupLogin()};var Wt=function(){config.mobile="ontouchstart"in document.documentElement&&void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),config.ios=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,"#forcemobile"==window.location.hash&&(config.mobile=!0),"#nomobile"==window.location.hash&&(config.mobile=!1)};Tools.loadSettings=function(){var Zt=Vt();config.storage=Zt,DEVELOPMENT&&console.log(Zt),null!=Zt.id&&(config.settings.id=Zt.id),null!=Zt.session&&(config.settings.session=Zt.session),null!=Zt.name&&(config.settings.name=Zt.name),null!=Zt.region&&(config.settings.region=Zt.region),null!=Zt.helpshown&&(config.settings.helpshown=Zt.helpshown),null!=Zt.mobileshown&&(config.settings.mobileshown=Zt.mobileshown),null!=Zt.flag&&(config.settings.flag=Zt.flag),null!=Zt.hidpi&&(config.settings.hidpi=Zt.hidpi),null!=Zt.sound&&(config.settings.sound=Zt.sound),null!=Zt.keybinds&&(config.settings.keybinds=Zt.keybinds),null!=Zt.mousemode&&(config.settings.mousemode=Zt.mousemode),jt()};var jt=function(){if(null==config.settings.id){var Zt=Tools.randomID(16);config.settings.id=Zt,Tools.setSettings({id:Zt})}null!=config.settings.name&&$("#playername").val(config.settings.name),null!=config.settings.region&&(game.playRegion=config.settings.region),null!=config.settings.flag&&(game.myFlag=config.settings.flag),null==config.settings.sound&&(config.settings.sound=!0),config.settings.mousemode&&Input.toggleMouse(!0),UI.updateSound(),config.settings.oldhidpi=config.settings.hidpi};Tools.randomID=function(Zt){var $t=new Uint8Array(Zt);return window.crypto.getRandomValues($t),zt($t).substr(0,Zt)};var zt=function(Zt){for(var en="",tn=0,$t;tn<Zt.length;tn++)en+=$t=1===($t=(255&Zt[tn]).toString(16)).length?"0"+$t:$t;return en};Tools.setSettings=function(Zt){if(null!=window.localStorage){for(var $t in Zt)config.storage[$t]=Zt[$t];try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(en){}}},Tools.removeSetting=function(Zt){if(null!=window.localStorage){null!=config.storage[Zt]&&delete config.storage[Zt];try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch($t){}}},Tools.wipeSettings=function(){if(null!=window.localStorage){config.storage={},config.settings={};try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(Zt){}}};var Vt=function(){if(null==window.localStorage)return{};var Zt=null,$t={};try{Zt=localStorage.getItem("settings")}catch(en){}if(null!=Zt)try{$t=JSON.parse(Zt)}catch(en){}return $t};Tools.ajaxPost=function(Zt,$t,en){$.ajax({url:Zt,method:"POST",data:$t,dataType:"json",timeout:1e4,success:function(tn){null!=en&&en(null!=tn&&1==tn.result?tn:null)},error:function(){null!=en&&en(null)}})},Tools.length=function(Zt,$t){return Math.sqrt(Zt*Zt+$t*$t)},Tools.oscillator=function(Zt,$t,en){return 1+Math.sin((game.time+(en||0))/$t)*Zt},Tools.converge=function(Zt,$t,en){return .01>Math.abs(Zt-$t)?$t:Zt+en*($t-Zt)},Tools.rand=function(Zt,$t){return Math.random()*($t-Zt)+Zt},Tools.randCircle=function(){return Tools.rand(0,6.28318530718)},Tools.randInt=function(Zt,$t){var en=Math.floor(Math.random()*($t+1-Zt)+Zt);return en>=$t&&(en=$t),en},Tools.clamp=function(Zt,$t,en){return Zt<=$t?$t:Zt>=en?en:Zt},Tools.lerp=function(Zt,$t,en){return en*($t-Zt)+Zt},Tools.colorLerp=function(Zt,$t,en){0>=en&&(en=.001),1<=en&&(en=.999);var tn=Zt>>16,nn=255&Zt>>8,an=255&Zt;return 0|16777216+(tn+en*(($t>>16)-tn)<<16)+(nn+en*((255&$t>>8)-nn)<<8)+(an+en*((255&$t)-an))},Tools.distance=function(Zt,$t,en,tn){var nn=Zt-en,an=$t-tn;return Math.sqrt(nn*nn+an*an)},Tools.distFastCheck=function(Zt,$t,en,tn){return Math.abs(Zt.x-$t.x)<=en&&Math.abs(Zt.y-$t.y)<=tn},Tools.distFastCheckFloat=function(Zt,$t,en,tn,nn){return Math.abs(Zt-en)<=nn&&Math.abs($t-tn)<=nn},Tools.updateTime=function(Zt){game.timeFactor=60>Zt?Zt:60,game.timeFactorUncapped=game.timeFactor,10<game.timeFactor&&(game.timeFactor=10),game.time=performance.now(),game.frames++},Tools.reducedFactor=function(){var Zt=(performance.now()-game.time)/16.666;return .1<Math.abs(game.jitter)&&(Zt+=game.jitter/16.666),Zt};var qt={shockwave:[0.1,0.1,0.11,0.12,0.12,0.13,0.14,0.14,0.15,0.16,0.17,0.18,0.2,0.21,0.22,0.24,0.26,0.29,0.31,0.35,0.38,0.42,0.47,0.52,0.58,0.64,0.71,0.78,0.84,0.9,0.95,0.98,1,1,1,0.98,0.97,0.94,0.9,0.85,0.78,0.7,0.62,0.52,0.43,0.34,0.26,0.18,0.11,0.05,0],explosionSmoke:[0,0,0.02,0.06,0.13,0.26,0.45,0.71,0.91,0.99,0.99,0.97,0.94,0.92,0.89,0.86,0.83,0.8,0.77,0.74,0.71,0.68,0.65,0.63,0.6,0.57,0.54,0.51,0.48,0.45,0.42,0.4,0.37,0.34,0.31,0.29,0.26,0.24,0.21,0.19,0.16,0.14,0.12,0.1,0.08,0.06,0.04,0.02,0.01,0,0]};Tools.easing={outElastic:function(Zt,$t){var en=1-($t||.7),tn=2*Zt;if(0===Zt||1===Zt)return Zt;var nn=en/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*tn)*Math.sin((tn-nn)*(2*Math.PI)/en)+1},custom:function(Zt,$t){var en=qt[$t],tn=en.length,nn=Math.floor(Zt*(tn-1)),an=en[nn];return nn===tn-1?an:Tools.lerp(an,en[nn+1],Zt*(tn-1)%1)}},Tools.setupDebug=function(){DEVELOPMENT&&config.debug.show&&(UI.show("#debug"),game.debug={last:performance.now(),ticks:0,frames:game.frames},setInterval(Tools.updateDebug,2123))},Tools.debugLine=function(Zt,$t){return"<div class=\"line\"><span class=\"attr\">"+UI.escapeHTML(Zt)+"</span><span class=\"val\">"+UI.escapeHTML($t)+"</span></div>"},Tools.updateDebug=function(){var Zt=performance.now(),$t=1e3*(game.frames-game.debug.frames)/(Zt-game.debug.last),en=Players.count(),tn=Mobs.count(),nn=Mobs.countDoodads(),an="",rn=Players.getMe();null!=rn&&(an=Tools.debugLine("Coords",Math.round(rn.pos.x)+", "+Math.round(rn.pos.y)));var on=Tools.debugLine("FPS",Math.round($t))+Tools.debugLine("Ticks",(100*(game.debug.ticks/(Zt-game.debug.last))).toFixed(2)+"%")+Tools.debugLine("Ping",game.ping.toFixed(2)+" ms")+Tools.debugLine("Res",game.screenX+" x "+game.screenY)+"<div class=\"spacer\"></div>"+Tools.debugLine("Players",en[0]+" / "+en[1])+Tools.debugLine("Mobs",tn[0]+" / "+tn[1])+Tools.debugLine("Particles",Particles.count())+Tools.debugLine("Doodads",nn[0]+" / "+nn[1])+"<div class=\"spacer\"></div>"+an+Tools.debugLine("Scale",game.scale.toFixed(2))+Tools.debugLine("Jitter",game.jitter.toFixed(3))+"<div class=\"close\" onclick=\"Tools.hideDebug()\">x</div>";$("#debug").html(on),game.debug.last=Zt,game.debug.ticks=0,game.debug.frames=game.frames},Tools.hideDebug=function(){UI.hide("#debug")},Tools.debugStartFrame=function(){DEVELOPMENT&&config.debug.show&&(game.debug.startedFrame=performance.now())},Tools.debugEndFrame=function(){DEVELOPMENT&&config.debug.show&&null!=game.debug.startedFrame&&(game.debug.ticks+=performance.now()-game.debug.startedFrame)},Tools.earningsToRank=function(Zt){return Math.floor(.0111*Math.pow(Zt,.5))+1},Tools.rankToEarnings=function(Zt){return Math.pow((Zt-1)/.0111,2)},Tools.decodeKeystate=function(Zt,$t){Zt.keystate.UP=0!=(1&$t),Zt.keystate.DOWN=0!=(2&$t),Zt.keystate.LEFT=0!=(4&$t),Zt.keystate.RIGHT=0!=(8&$t),Zt.boost=0!=(16&$t),Zt.strafe=0!=(32&$t),Zt.stealthed=0!=(64&$t),Zt.flagspeed=0!=(128&$t)},Tools.decodeUpgrades=function(Zt,$t){Zt.speedupgrade=(0==(1&$t)?0:1)+(0==(2&$t)?0:2)+(0==(4&$t)?0:4),Zt.powerups.shield=0!=(8&$t),Zt.powerups.rampage=0!=(16&$t)},Tools.decodeMinimapCoords=function(Zt,$t){return new Vector(128*Zt-16384+64,Tools.clamp(128*$t-16384,-8192,8192)+64)},Tools.decodeSpeed=function(Zt){return(Zt-32768)/1638.4},Tools.decodeCoordX=function(Zt){return(Zt-32768)/2},Tools.decodeCoordY=function(Zt){return(Zt-32768)/4},Tools.decodeCoord24=function(Zt){return(Zt-8388608)/512},Tools.decodeAccel=function(Zt){return(Zt-32768)/32768},Tools.decodeRotation=function(Zt){return Zt/6553.6},Tools.decodeHealthnergy=function(Zt){return Zt/255},Tools.decodeRegen=function(Zt){return(Zt-32768)/1e6};var Kt=function(Zt){return Tools.clamp(Math.floor(Zt/Xt.size)+Xt.bucketsHalfX,0,Xt.bucketsMaxX)},Qt=function(Zt){return Tools.clamp(Math.floor(Zt/Xt.size)+Xt.bucketsHalfY,0,Xt.bucketsMaxY)};Tools.initBuckets=function(){Xt={size:config.bucketSize,halfSize:parseInt(config.bucketSize/2),bucketsMaxX:parseInt(config.mapWidth/config.bucketSize)-1,bucketsMaxY:parseInt(config.mapHeight/config.bucketSize)-1,bucketsHalfX:parseInt(config.mapWidth/config.bucketSize/2),bucketsHalfY:parseInt(config.mapHeight/config.bucketSize/2)};for(var Zt=0;Zt<=Xt.bucketsMaxX;Zt++){game.buckets.push([]);for(var $t=0;$t<=Xt.bucketsMaxY;$t++)game.buckets[Zt].push([[]])}for(var en=0;en<config.doodads.length;en++)Zt=Kt(config.doodads[en][0]),$t=Qt(config.doodads[en][1]),game.buckets[Zt][$t][0].push(en)},Tools.getBucketBounds=function(Zt,$t,en){return[Tools.clamp(Math.floor((Zt.x-$t)/Xt.size)+Xt.bucketsHalfX,0,Xt.bucketsMaxX),Tools.clamp(Math.floor((Zt.x+$t)/Xt.size)+Xt.bucketsHalfX,0,Xt.bucketsMaxX),Tools.clamp(Math.floor((Zt.y-en)/Xt.size)+Xt.bucketsHalfY,0,Xt.bucketsMaxY),Tools.clamp(Math.floor((Zt.y+en)/Xt.size)+Xt.bucketsHalfY,0,Xt.bucketsMaxY)]},Tools.deferUpdate=function(Zt){setTimeout(Zt,1)};var Jt=function(Zt,$t){if($t instanceof Error){var en={};return Object.getOwnPropertyNames($t).forEach(function(tn){en[tn]=$t[tn]}),en}return $t};Tools.handleError=function(Zt){5<++Yt||(null!=Zt.error&&(Zt.error=JSON.stringify(Zt.error,Jt)),Tools.ajaxPost("/clienterror",{type:"runtime",error:JSON.stringify(Zt,null,"\t\t")}))},Tools.encodeUTF8=function(Zt){for(var $t=0,en=new Uint8Array(4*Zt.length),tn=0,nn;tn!=Zt.length;tn++)if(nn=Zt.charCodeAt(tn),128>nn)en[$t++]=nn;else{if(2048>nn)en[$t++]=192|nn>>6;else{if(55295<nn&&56320>nn){if(++tn==Zt.length)throw"UTF-8 encode: incomplete surrogate pair";var an=Zt.charCodeAt(tn);if(56320>an||57343<an)throw"UTF-8 encode: second char code 0x"+an.toString(16)+" at index "+tn+" in surrogate pair out of range";nn=65536+((1023&nn)<<10)+(1023&an),en[$t++]=240|nn>>18,en[$t++]=128|63&nn>>12}else en[$t++]=224|nn>>12;en[$t++]=128|63&nn>>6}en[$t++]=128|63&nn}return en.subarray(0,$t)},Tools.decodeUTF8=function(Zt){for(var $t="",en=0,tn;en<Zt.length;){if(tn=Zt[en++],127<tn){if(191<tn&&224>tn){if(en>=Zt.length)throw"UTF-8 decode: incomplete 2-byte sequence";tn=(31&tn)<<6|63&Zt[en]}else if(223<tn&&240>tn){if(en+1>=Zt.length)throw"UTF-8 decode: incomplete 3-byte sequence";tn=(15&tn)<<12|(63&Zt[en])<<6|63&Zt[++en]}else{if(!(239<tn&&248>tn))throw"UTF-8 decode: unknown multibyte start 0x"+tn.toString(16)+" at index "+(en-1);if(en+2>=Zt.length)throw"UTF-8 decode: incomplete 4-byte sequence";tn=(7&tn)<<18|(63&Zt[en])<<12|(63&Zt[++en])<<6|63&Zt[++en]}++en}if(65535>=tn)$t+=String.fromCharCode(tn);else{if(!(1114111>=tn))throw"UTF-8 decode: code point 0x"+tn.toString(16)+" exceeds UTF-16 reach";tn-=65536,$t+=String.fromCharCode(55296|tn>>10),$t+=String.fromCharCode(56320|1023&tn)}}return $t}}(),function(){var Xt={map_sea:"assets/map_sea.jpg",map_sea_mask:"assets/map_sea_mask.jpg",map_forest:"assets/map_forest.jpg",map_rock:"assets/map_rock.jpg",map_rock_mask:"assets/map_rock_mask.jpg",map_sand:"assets/map_sand.jpg",map_sand_mask:"assets/map_sand_mask.jpg",mountains:"assets/mountains.png",aircraft:"assets/aircraft.png",shadows:"assets/shadows.png",particles:"assets/particles.png",flags:"assets/flagsbig.png?4",items:"assets/items.png?2",gui:"assets/gui.png"},Yt={spirit:["aircraft",[4,4,512,256]],tornado:["aircraft",[524,4,256,256]],raptor:["aircraft",[788,4,256,256]],prowler:["aircraft",[1052,4,256,256]],comanche:["aircraft",[1316,4,128,256]],comanche_rotor:["aircraft",[1452,4,128,128]],mountain2:["mountains",[0,512,512,512]],mountain1:["mountains",[512,512,512,512]],mountain4:["mountains",[0,0,512,512]],mountain3:["mountains",[512,0,512,512]],crate_shadow:["shadows",[4,140,64,64]],comanche_rotor_shadow:["shadows",[76,140,64,64]],smokeshadow_8:["shadows",[148,140,32,32]],smokeshadow_7:["shadows",[188,140,32,32]],smokeshadow_6:["shadows",[228,140,32,32]],smokeshadow_5:["shadows",[268,140,32,32]],smokeshadow_4:["shadows",[308,140,32,32]],smokeshadow_3:["shadows",[348,140,32,32]],smokeshadow_2:["shadows",[388,140,32,32]],smokeshadow_15:["shadows",[428,140,32,32]],smokeshadow_14:["shadows",[468,140,32,32]],smokeshadow_13:["shadows",[508,140,32,32]],smokeshadow_12:["shadows",[548,140,32,32]],smokeshadow_11:["shadows",[588,140,32,32]],smokeshadow_10:["shadows",[628,140,32,32]],smokeshadow_1:["shadows",[668,140,32,32]],smokeshadow_16:["shadows",[708,140,32,32]],afterburner_shadow:["shadows",[748,140,32,32]],spirit_shadow:["shadows",[4,4,256,128]],tornado_shadow:["shadows",[268,4,128,128]],screenshade:["shadows",[404,4,128,128]],raptor_shadow:["shadows",[540,4,128,128]],prowler_shadow:["shadows",[676,4,128,128]],comanche_shadow:["shadows",[812,4,64,128]],missile_shadow:["shadows",[884,4,32,128]],smokeshadow_9:["shadows",[924,76,32,32]],ctf_flag_shadow:["shadows",[924,4,64,64]],flash_1:["particles",[0,128,120,120]],glowsmall:["particles",[120,128,64,64]],smoke_9:["particles",[184,128,32,32]],smoke_8:["particles",[216,128,32,32]],smoke_7:["particles",[248,128,32,32]],smoke_6:["particles",[280,128,32,32]],smoke_5:["particles",[312,128,32,32]],smoke_4:["particles",[344,128,32,32]],smoke_3:["particles",[376,128,32,32]],smoke_2:["particles",[408,128,32,32]],smoke_16:["particles",[440,128,32,32]],smoke_15:["particles",[472,128,32,32]],smoke_14:["particles",[504,128,32,32]],smoke_13:["particles",[536,128,32,32]],smoke_12:["particles",[568,128,32,32]],smoke_11:["particles",[600,128,32,32]],smoke_10:["particles",[632,128,32,32]],smoke_1:["particles",[664,128,32,32]],shockwave:["particles",[0,0,128,128]],hotsmoke_4:["particles",[128,0,120,120]],hotsmoke_3:["particles",[248,0,120,120]],hotsmoke_2:["particles",[368,0,120,120]],hotsmoke_1:["particles",[488,0,120,120]],flash_4:["particles",[608,0,120,120]],flash_3:["particles",[728,0,120,120]],spark_4:["particles",[848,120,8,8]],spark_3:["particles",[856,120,8,8]],spark_2:["particles",[864,120,8,8]],spark_1:["particles",[872,120,8,8]],flash_2:["particles",[848,0,120,120]],crate_upgrade:["items",[4,268,128,128]],crate_shield:["items",[140,268,128,128]],crate_rampage:["items",[276,268,128,128]],afterburner:["items",[412,268,128,128]],missile_fat:["items",[548,268,64,128]],missile:["items",[620,268,32,128]],doodad_field:["items",[4,4,256,256]],badge_bronze:["items",[268,140,64,64]],powerup_shield:["items",[268,4,128,128]],badge_gold:["items",[404,140,64,64]],powerup_rampage:["items",[404,4,128,128]],badge_silver:["items",[540,140,64,64]],powerup_circle:["items",[540,4,128,128]],glowdirectional:["items",[676,140,64,64]],ctf_flag_red:["items",[676,4,128,128]],glowsmall_copy:["items",[812,140,64,64]],missile_small:["items",[884,140,16,64]],levelborder:["items",[908,140,32,32]],ctf_flag_blue:["items",[812,4,128,128]],hud_shadow:["gui",[4,268,80,348]],hud_mask:["gui",[92,268,80,348]],hud:["gui",[180,268,80,348]],emote_bro:["gui",[268,548,64,64]],emote_clap:["gui",[268,476,64,64]],ui_minimap_box:["gui",[268,404,64,64]],emote_cry:["gui",[340,548,64,64]],emote_kappa:["gui",[340,476,64,64]],emote_tf:["gui",[340,404,64,64]],emote_lol:["gui",[412,548,64,64]],emote_pepe:["gui",[412,476,64,64]],ui_minimap_blue:["gui",[484,596,16,16]],ui_minimap_base_blue:["gui",[484,556,32,32]],ui_minimap_base_red:["gui",[484,516,32,32]],ui_minimap_flag_blue:["gui",[484,476,32,32]],emote_rage:["gui",[412,404,64,64]],ui_minimap_mob:["gui",[484,444,16,16]],ui_minimap_flag_red:["gui",[484,404,32,32]],ui_minimap:["gui",[4,4,512,256]],chatbubbleleft:["gui",[274,274,16,82]],chatbubblecenter:["gui",[350,274,82,82]],chatbubbleright:["gui",[438,274,16,82]],chatbubblepoint:["gui",[297,352,36,22]]},Ht={flag_1:["flags",[2,962,80,60]],flag_2:["flags",[2,898,80,60]],flag_3:["flags",[2,834,80,60]],flag_4:["flags",[2,770,80,60]],flag_5:["flags",[2,706,80,60]],flag_6:["flags",[2,642,80,60]],flag_7:["flags",[2,578,80,60]],flag_8:["flags",[2,514,80,60]],flag_9:["flags",[2,450,80,60]],flag_10:["flags",[2,386,80,60]],flag_11:["flags",[2,322,80,60]],flag_12:["flags",[2,258,80,60]],flag_13:["flags",[2,194,80,60]],flag_14:["flags",[2,130,80,60]],flag_15:["flags",[2,66,80,60]],flag_16:["flags",[86,962,80,60]],flag_17:["flags",[86,898,80,60]],flag_18:["flags",[86,834,80,60]],flag_19:["flags",[86,770,80,60]],flag_20:["flags",[86,706,80,60]],flag_21:["flags",[86,642,80,60]],flag_22:["flags",[86,578,80,60]],flag_23:["flags",[86,514,80,60]],flag_24:["flags",[86,450,80,60]],flag_25:["flags",[86,386,80,60]],flag_26:["flags",[86,322,80,60]],flag_27:["flags",[86,258,80,60]],flag_28:["flags",[86,194,80,60]],flag_29:["flags",[86,130,80,60]],flag_30:["flags",[170,962,80,60]],flag_31:["flags",[170,898,80,60]],flag_32:["flags",[170,834,80,60]],flag_33:["flags",[170,770,80,60]],flag_34:["flags",[170,706,80,60]],flag_35:["flags",[170,642,80,60]],flag_36:["flags",[170,578,80,60]],flag_37:["flags",[170,514,80,60]],flag_38:["flags",[170,450,80,60]],flag_39:["flags",[170,386,80,60]],flag_40:["flags",[170,322,80,60]],flag_41:["flags",[170,258,80,60]],flag_42:["flags",[170,194,80,60]],flag_43:["flags",[254,962,80,60]],flag_44:["flags",[254,898,80,60]],flag_45:["flags",[254,834,80,60]],flag_46:["flags",[254,770,80,60]],flag_47:["flags",[254,706,80,60]],flag_48:["flags",[254,642,80,60]],flag_49:["flags",[254,578,80,60]],flag_50:["flags",[254,514,80,60]],flag_51:["flags",[254,450,80,60]],flag_52:["flags",[254,386,80,60]],flag_53:["flags",[254,322,80,60]],flag_54:["flags",[338,962,80,60]],flag_55:["flags",[338,898,80,60]],flag_56:["flags",[338,834,80,60]],flag_57:["flags",[338,770,80,60]],flag_58:["flags",[338,706,80,60]],flag_59:["flags",[338,642,80,60]],flag_60:["flags",[338,578,80,60]],flag_61:["flags",[338,514,80,60]],flag_62:["flags",[338,450,80,60]],flag_63:["flags",[338,386,80,60]],flag_64:["flags",[422,962,80,60]],flag_65:["flags",[422,898,80,60]],flag_66:["flags",[422,834,80,60]],flag_67:["flags",[422,770,80,60]],flag_68:["flags",[422,706,80,60]],flag_69:["flags",[422,642,80,60]],flag_70:["flags",[422,578,80,60]],flag_71:["flags",[422,514,80,60]],flag_72:["flags",[422,450,80,60]],flag_73:["flags",[506,962,80,60]],flag_74:["flags",[506,898,80,60]],flag_75:["flags",[506,834,80,60]],flag_76:["flags",[506,770,80,60]],flag_77:["flags",[506,706,80,60]],flag_78:["flags",[506,642,80,60]],flag_79:["flags",[506,578,80,60]],flag_80:["flags",[590,770,80,60]],flag_81:["flags",[590,706,80,60]],flag_82:["flags",[590,642,80,60]],flag_83:["flags",[590,578,80,60]],flag_84:["flags",[506,514,80,60]],flag_85:["flags",[590,514,80,60]],flag_86:["flags",[506,450,80,60]],flag_87:["flags",[590,450,80,60]],flag_88:["flags",[422,386,80,60]],flag_89:["flags",[506,386,80,60]],flag_90:["flags",[590,386,80,60]],flag_91:["flags",[338,322,80,60]],flag_92:["flags",[422,322,80,60]],flag_93:["flags",[506,322,80,60]],flag_94:["flags",[590,322,80,60]],flag_95:["flags",[254,258,80,60]],flag_96:["flags",[338,258,80,60]],flag_97:["flags",[422,258,80,60]],flag_98:["flags",[506,258,80,60]],flag_99:["flags",[590,258,80,60]],flag_100:["flags",[254,194,80,60]],flag_101:["flags",[338,194,80,60]],flag_102:["flags",[422,194,80,60]],flag_103:["flags",[506,194,80,60]],flag_104:["flags",[590,194,80,60]],flag_105:["flags",[170,130,80,60]],flag_106:["flags",[254,130,80,60]],flag_107:["flags",[338,130,80,60]],flag_108:["flags",[422,130,80,60]],flag_109:["flags",[506,130,80,60]],flag_110:["flags",[590,130,80,60]],flag_111:["flags",[86,66,80,60]],flag_112:["flags",[170,66,80,60]],flag_113:["flags",[254,66,80,60]],flag_114:["flags",[338,66,80,60]],flag_115:["flags",[422,66,80,60]],flag_116:["flags",[506,66,80,60]],flag_117:["flags",[590,66,80,60]],flag_118:["flags",[2,2,80,60]],flag_119:["flags",[86,2,80,60]],flag_120:["flags",[170,2,80,60]],flag_121:["flags",[254,2,80,60]],flag_122:["flags",[338,2,80,60]],flag_123:["flags",[422,2,80,60]],flag_124:["flags",[506,2,80,60]],flag_125:["flags",[590,2,80,60]]},Wt={hudHealth_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2},hudHealth_mask:{texture:"hud_mask",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudHealth:{texture:"hud",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudEnergy_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2,rotation:Math.PI},hudEnergy_mask:{texture:"hud_mask",layer:"hudEnergy",pivot:[330,174],position:"screencenter",rotation:Math.PI},hudEnergy:{texture:"hud",layer:"hudEnergy",pivot:[330,174],position:"screencenter",tint:3374821},minimap:{texture:"ui_minimap",layer:"ui0",anchor:[1,1],alpha:.25},minimapBox:{texture:"ui_minimap_box",layer:"ui4",anchor:[0.5,0.5],alpha:.6},minimapMob:{texture:"ui_minimap_mob",layer:"ui1",anchor:[0.5,0.5],alpha:.5,scale:.8},minimapBlue:{texture:"ui_minimap_blue",layer:"ui1",anchor:[0.5,0.5],alpha:.5,scale:.8},minimapFlagBlue:{texture:"ui_minimap_flag_blue",layer:"ui3",anchor:[0.5,0.5],scale:.5},minimapFlagRed:{texture:"ui_minimap_flag_red",layer:"ui3",anchor:[0.5,0.5],scale:.5},minimapBaseBlue:{texture:"ui_minimap_base_blue",layer:"ui2",anchor:[0.5,0.5],scale:.5},minimapBaseRed:{texture:"ui_minimap_base_red",layer:"ui2",anchor:[0.5,0.5],scale:.5},thrusterShadow:{texture:"afterburner_shadow",layer:"shadows",anchor:[0.5,0.1]},missile:{texture:"missile",layer:"projectiles",anchor:[0.5,0],scale:[0.2,0.15]},missileFat:{texture:"missile_fat",layer:"projectiles",anchor:[0.5,0],scale:[0.2,0.2]},missileSmall:{texture:"missile_small",layer:"projectiles",anchor:[0.5,0],scale:[0.2,0.2]},missileShadow:{texture:"missile_shadow",layer:"shadows",anchor:[0.5,0.25]},missileThruster:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.15,0.15]},thrusterGlowSmall:{texture:"glowsmall_copy",layer:"glows",anchor:[0.5,0.5],blend:"ADD"},smokeGlow:{texture:"glowdirectional",layer:"glows",anchor:[0.5,0.3],blend:"ADD"},crateShadow:{texture:"crate_shadow",layer:"shadows",anchor:[0.5,0.5]},crateUpgrade:{texture:"crate_upgrade",layer:"crates",anchor:[0.5,0.5]},crateShield:{texture:"crate_shield",layer:"crates",anchor:[0.5,0.5]},crateRampage:{texture:"crate_rampage",layer:"crates",anchor:[0.5,0.5]},powerupCircle:{texture:"powerup_circle",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},powerupShield:{texture:"powerup_shield",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},ctfFlagRed:{texture:"ctf_flag_red",layer:"flags",anchor:[0.1171875,0.9296875]},ctfFlagBlue:{texture:"ctf_flag_blue",layer:"flags",anchor:[0.1171875,0.9296875]},ctfFlagShadow:{texture:"ctf_flag_shadow",layer:"shadows",anchor:[0.09375,0.71875]},shipRaptor:{texture:"raptor",layer:"aircraft",anchor:[0.5,0.6]},shipRaptorShadow:{texture:"raptor_shadow",layer:"shadows",anchor:[0.5,0.57]},shipRaptorThruster:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.25,0.25]},shipSpirit:{texture:"spirit",layer:"aircraft",anchor:[0.5,0.5]},shipSpiritShadow:{texture:"spirit_shadow",layer:"shadows",anchor:[0.5,0.5]},shipSpiritThruster:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.25,0.25]},shipComanche:{texture:"comanche",layer:"aircraft",anchor:[0.5,0.4]},shipComancheShadow:{texture:"comanche_shadow",layer:"shadows",anchor:[0.5,0.43]},shipComancheRotor:{texture:"comanche_rotor",layer:"aircraft",anchor:[0.5,0.5],scale:[0.25,0.25]},shipComancheRotorShadow:{texture:"comanche_rotor_shadow",layer:"shadows",anchor:[0.5,0.5]},shipTornado:{texture:"tornado",layer:"aircraft",anchor:[0.5,0.65]},shipTornadoShadow:{texture:"tornado_shadow",layer:"shadows",anchor:[0.5,0.605]},shipProwler:{texture:"prowler",layer:"aircraft",anchor:[0.5,0.5]},shipProwlerShadow:{texture:"prowler_shadow",layer:"shadows",anchor:[0.5,0.5]},mountain1:{texture:"mountain1",layer:"doodads",anchor:[0.5,0.5]},mountain2:{texture:"mountain2",layer:"doodads",anchor:[0.5,0.5]},mountain3:{texture:"mountain3",layer:"doodads",anchor:[0.5,0.5]},mountain4:{texture:"mountain4",layer:"doodads",anchor:[0.5,0.5]},doodadField:{texture:"doodad_field",layer:"fields",anchor:[0.5,0.5]}},jt={};SWAM&&SWAM.injectTextures(Xt,Yt,Ht,Wt,jt),Textures.load=function(){for(var zt in Xt)jt[zt]=new PIXI.Texture.fromImage(Xt[zt]);var Vt;for(var qt in Yt)Vt=Yt[qt],jt[qt]=new PIXI.Texture(jt[Vt[0]].baseTexture,new PIXI.Rectangle(Vt[1][0],Vt[1][1],Vt[1][2],Vt[1][3]));for(var qt in Ht)Vt=Ht[qt],jt[qt]=new PIXI.Texture(jt[Vt[0]].baseTexture,new PIXI.Rectangle(Vt[1][0],Vt[1][1],Vt[1][2],Vt[1][3]))},Textures.get=function(zt){return jt[zt]},Textures.getNamed=function(zt){return jt[Wt[zt].texture]},Textures.init=function(zt,Vt){var qt=JSON.parse(JSON.stringify(Wt[zt]));if("screencenter"===qt.position&&(qt.position=[game.halfScreenX,game.halfScreenY]),Vt)for(var Kt in Vt)qt[Kt]=Vt[Kt];return Graphics.initSprite(qt.texture,game.graphics.layers[qt.layer],qt)},Textures.sprite=function(zt){return new PIXI.Sprite(jt[zt])},Textures.tile=function(zt,Vt,qt){return new PIXI.extras.TilingSprite(jt[zt],Vt,qt)}}(),window.loadGraphics_Default=function(){var Yt={position:Vector.zero(),center:Vector.zero(),lastOverdraw:Vector.zero(),lastOverdrawTime:0,shake:0},Ht={},Wt={},jt={},Xt;Graphics.setup=function(){Kt(window.innerWidth,window.innerHeight),zt(),Textures.load(),Vt(),Qt(),qt(),Zt(),Mobs.setupDoodads(),UI.setupMinimap(),UI.setupHUD()};var zt=function(){PIXI.utils.skipHello(),PIXI.settings.PRECISION_FRAGMENT=PIXI.PRECISION.HIGH;var an={autoResize:!0,clearBeforeRender:!1,preserveDrawingBuffer:!0};config.settings.hidpi&&(an.resolution=2);try{Xt=new PIXI.WebGLRenderer(game.screenX,game.screenY,an),Graphics.renderer=Xt}catch(rn){return void UI.popBigMsg(2)}document.body.appendChild(Xt.view)},Vt=function(){for(var an of["game","ui0","ui1","ui2","ui3","ui4","hudHealth","hudEnergy","flags","doodads","map","sea","objects","groundobjects","fields","shadows","powerups","crates","aircraft","aircraftme","glows","playernames","bubbles","thrusters","projectiles","smoke","explosions"])jt[an]=new PIXI.Container;for(var rn of["smoke","crates","thrusters","projectiles","aircraft","aircraftme","glows","explosions","powerups","playernames","flags","bubbles"])jt.objects.addChild(jt[rn]);for(var on of["fields"])jt.groundobjects.addChild(jt[on]);if(game.graphics.layers=jt,game.graphics.gui=Wt,config.debug.collisions){for(var sn=new PIXI.Graphics,dn=0;dn<config.walls.length;dn++)sn.beginFill(16777215,.2),sn.drawCircle(config.walls[dn][0],config.walls[dn][1],config.walls[dn][2]),sn.endFill();jt.objects.addChild(sn)}},qt=function(){Ht.render=PIXI.RenderTexture.create(game.screenX+config.overdraw,game.screenY+config.overdraw,void 0,config.settings.hidpi?2:void 0),Ht.renderSprite=new PIXI.Sprite(Ht.render),Ht.shadows=PIXI.RenderTexture.create(game.shadowX,game.shadowY,void 0,config.settings.hidpi?2:void 0),Ht.shadowsSprite=new PIXI.Sprite(Ht.shadows),Ht.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),Ht.shadowsSprite.blendMode=PIXI.BLEND_MODES.MULTIPLY,Ht.shadowsSprite.alpha=.4,jt.game.addChild(Ht.renderSprite),jt.game.addChild(jt.groundobjects),jt.game.addChild(Ht.shadowsSprite),Ht.shade=Textures.sprite("screenshade"),Ht.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale),Ht.shade.alpha=.825,Ht.shade.anchor.set(.5,.5),jt.shadows.addChild(Ht.shade),jt.game.addChild(jt.objects),jt.game.addChild(jt.ui0),jt.game.addChild(jt.ui1),jt.game.addChild(jt.ui2),jt.game.addChild(jt.ui3),jt.game.addChild(jt.ui4),Wt.hudTextureEnergy=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),Wt.hudSpriteEnergy=new PIXI.Sprite(Wt.hudTextureEnergy),Wt.hudSpriteEnergy.pivot.set(-250,174),Wt.hudTextureHealth=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),Wt.hudSpriteHealth=new PIXI.Sprite(Wt.hudTextureHealth),Wt.hudSpriteHealth.pivot.set(330,174),jt.game.addChild(Wt.hudSpriteEnergy),jt.game.addChild(Wt.hudSpriteHealth)};Graphics.resizeRenderer=function(an,rn){var on=an+config.overdraw,sn=rn+config.overdraw;Kt(an,rn),Qt(),Xt.resize(an,rn),Ht.render.resize(on,sn),Ht.shadows.resize(an,rn),Ht.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),Ht.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale);for(var dn of["sea","forest","sand","rock"])Ht[dn].width=on,Ht[dn].height=sn;UI.resizeMinimap(),UI.resizeHUD(),$t(),en(),Graphics.setCamera(Yt.center.x,Yt.center.y),game.state==Network.STATE.PLAYING&&Network.resizeHorizon()},Graphics.toggleHiDPI=function(){config.settings.hidpi=1!=config.settings.hidpi,config.settings.hidpi?Tools.setSettings({hidpi:!0}):Tools.removeSetting("hidpi"),UI.updateMainMenuSettings(),1==config.settings.oldhidpi==config.settings.hidpi?UI.showMessage("alert","",1e3):UI.showMessage("alert","Reload game to apply HiDPI settings<br><span class=\"button\" onclick=\"Games.redirRoot()\">RELOAD</span>",1e4)};var Kt=function(an,rn){game.screenX=an,game.screenY=rn,game.halfScreenX=an/2,game.halfScreenY=rn/2,game.shadowX=Math.floor(game.screenX/config.shadowScaling),game.shadowY=Math.floor(game.screenY/config.shadowScaling)},Qt=function(){game.scale=(game.screenX+game.screenY)/config.scalingFactor,jt.groundobjects.scale.set(game.scale),jt.objects.scale.set(game.scale),jt.shadows.scale.set(game.scale),jt.doodads.scale.set(game.scale),jt.bubbles.scale.set(1/game.scale),Jt()},Jt=function(){if(config.mobile){var an=game.screenX>game.screenY?"landscape":"portrait";config.phone=599>=game.screenX&&"portrait"==an||599>=game.screenY&&"landscape"==an,config.tablet=600<=game.screenX&&1024>=game.screenX&&"portrait"==an||600<=game.screenY&&1024>=game.screenY&&1024>=game.screenX&&"landscape"==an,config.maxScoreboard=8,config.phone&&(config.minimapSize=160,config.maxScoreboard=5),config.tablet&&(config.maxScoreboard=7),config.minimapPaddingX=game.screenX/2-config.minimapSize/2}},Zt=function(){var an=Xt.width+config.overdraw,rn=Xt.height+config.overdraw;Ht.sea=Textures.tile("map_sea",an,rn),Ht.sea_mask=Textures.sprite("map_sea_mask"),Ht.sea_mask.scale.set(8,8),Ht.sea_mask.blendMode=PIXI.BLEND_MODES.MULTIPLY,Ht.sea_mask.alpha=.5,Ht.forest=Textures.tile("map_forest",an,rn),Ht.sand=Textures.tile("map_sand",an,rn),Ht.sand_mask=Textures.sprite("map_sand_mask"),Ht.sand_mask.scale.set(8,8),Ht.sand.mask=Ht.sand_mask,Ht.rock=Textures.tile("map_rock",an,rn),Ht.rock_mask=Textures.sprite("map_rock_mask"),Ht.rock_mask.scale.set(8,8),Ht.rock.mask=Ht.rock_mask,jt.sea.addChild(Ht.sea),jt.sea.addChild(Ht.sea_mask);for(var on of["forest","sand","sand_mask","rock","rock_mask"])jt.map.addChild(Ht[on]);jt.map.addChild(jt.doodads),tn(),$t()},$t=function(){var an;for(an of["sea","forest","sand","rock"])Ht[an].tileScale.set(game.scale,game.scale);for(an of["sea","sand","rock"])Ht[an+"_mask"].scale.set(8*game.scale,8*game.scale)},en=function(){Ht.polygons&&(Ht.polygons.scale.x=game.scale,Ht.polygons.scale.y=game.scale)},tn=function(){$.getJSON("assets/map.json",function(an){Ht.polygons=new PIXI.Graphics,Ht.polygons.beginFill();var cn=0,hn=0,fn=0,rn,on,sn,dn,ln,un,pn;for(un=0;un<an.length;un++)for(sn=0,pn=0;pn<an[un].length;pn++){for(dn=[],ln=0;ln<an[un][pn].length;ln+=2)rn=an[un][pn][ln]+hn,on=an[un][pn][ln+1]+fn,dn.push(parseFloat(rn),-parseFloat(on)),hn=rn,fn=on,cn++;Ht.polygons.drawPolygon(dn),0!=sn&&Ht.polygons.addHole(),sn++}Ht.polygons.endFill(),en(),jt.map.addChild(Ht.polygons),jt.map.mask=Ht.polygons})};Graphics.initSprite=function(an,rn,on){var sn=Textures.sprite(an);return on.position&&sn.position.set(on.position[0],on.position[1]),on.anchor&&sn.anchor.set(on.anchor[0],on.anchor[1]),on.pivot&&sn.pivot.set(on.pivot[0],on.pivot[1]),on.scale&&(Array.isArray(on.scale)?sn.scale.set(on.scale[0],on.scale[1]):sn.scale.set(on.scale)),on.rotation&&(sn.rotation=on.rotation),on.alpha&&(sn.alpha=on.alpha),on.blend&&(sn.blendMode=PIXI.BLEND_MODES[on.blend]),on.tint&&(sn.tint=on.tint),on.mask&&(sn.mask=on.mask),on.visible&&(sn.visible=on.visible),rn.addChild(sn),sn},Graphics.transform=function(an,rn,on,sn,dn,ln,un){an.position.set(rn,on),null==ln?null!=dn&&an.scale.set(dn):an.scale.set(dn,ln),null!=sn&&(an.rotation=sn),null!=un&&(an.alpha=un)},Graphics.update=function(){Ht.shade.position.set(Yt.center.x/config.shadowScaling,Yt.center.y/config.shadowScaling),Ht.renderSprite.position.set(game.scale*(-Yt.position.x+Yt.lastOverdraw.x)-config.overdraw/2,game.scale*(-Yt.position.y+Yt.lastOverdraw.y)-config.overdraw/2),jt.objects.position.set(-Yt.position.x*game.scale,-Yt.position.y*game.scale),jt.groundobjects.position.set(-Yt.position.x*game.scale,-Yt.position.y*game.scale),jt.doodads.position.set(-Yt.position.x*game.scale+config.overdraw/2,-Yt.position.y*game.scale+config.overdraw/2),jt.shadows.position.set(-Yt.position.x*(game.scale/config.shadowScaling),-Yt.position.y*(game.scale/config.shadowScaling)),Wt.minimap_box.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-Yt.center.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-Yt.center.y)/16384)),config.overdrawOptimize?(Math.abs(Yt.position.x-Yt.lastOverdraw.x)>config.overdraw/2/game.scale||Math.abs(Yt.position.y-Yt.lastOverdraw.y)>config.overdraw/2/game.scale||2e3<game.time-Yt.lastOverdrawTime)&&nn():nn()},Graphics.setCamera=function(an,rn){var on=0,sn=0;.5<Yt.shake&&(on=Tools.rand(-Yt.shake,Yt.shake),sn=Tools.rand(-Yt.shake,Yt.shake),Yt.shake*=1-.06*game.timeFactor);var dn=game.halfScreenX/game.scale,ln=game.halfScreenY/game.scale;an=Tools.clamp(an,-16384+dn,16384-dn),rn=Tools.clamp(rn,-8192+ln,8192-ln),Yt.position.x=on+an-game.screenX/2/game.scale,Yt.position.y=sn+rn-game.screenY/2/game.scale,Yt.center.x=on+an,Yt.center.y=sn+rn},Graphics.getCamera=function(){return Yt.center},Graphics.shakeCamera=function(an,rn){var on=Tools.length(an.x-Yt.center.x,an.y-Yt.center.y),sn=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2,dn=Tools.clamp(1.3*(1-on/sn),0,1);.1>dn||(Yt.shake=dn*rn)},Graphics.shadowCoords=function(an){var rn=Mobs.getClosestDoodad(an);return new Vector((an.x+config.shadowOffsetX*rn)/config.shadowScaling,(an.y+config.shadowOffsetY*rn)/config.shadowScaling)},Graphics.minimapMob=function(an,rn,on){null!=an&&an.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-rn)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-on)/16384))},Graphics.toggleFullscreen=function(){(function(){var an=document;return an.fullscreenElement?null!==an.fullscreenElement:an.mozFullScreenElement?null!==an.mozFullScreenElement:an.webkitFullscreenElement?null!==an.webkitFullscreenElement:an.msFullscreenElement?null!==an.msFullscreenElement:void 0})()?function(){var an=document;an.exitFullscreen?an.exitFullscreen():an.mozCancelFullScreen?an.mozCancelFullScreen():an.webkitExitFullscreen?an.webkitExitFullscreen():an.msExitFullscreen&&an.msExitFullscreen()}():function(){var an=document.documentElement;if(an.requestFullscreen?an.requestFullscreen():an.mozRequestFullScreen?an.mozRequestFullScreen():an.webkitRequestFullscreen?an.webkitRequestFullscreen():an.msRequestFullscreen&&an.msRequestFullscreen(),config.mobile&&null!=window.screen&&null!=window.screen.orientation)try{screen.orientation.lock("landscape")}catch(rn){}}()},Graphics.inScreen=function(an,rn){return an.x>=Yt.center.x-game.halfScreenX/game.scale-rn&&an.x<=Yt.center.x+game.halfScreenX/game.scale+rn&&an.y>=Yt.center.y-game.halfScreenY/game.scale-rn&&an.y<=Yt.center.y+game.halfScreenY/game.scale+rn};var nn=function(){Mobs.updateDoodads(),Yt.lastOverdraw.x=Yt.position.x,Yt.lastOverdraw.y=Yt.position.y,Ht.renderSprite.position.set(-config.overdraw/2,-config.overdraw/2);var rn=Yt.position.x-config.overdraw/game.scale/2,on=Yt.position.y-config.overdraw/game.scale/2,sn=-rn*game.scale,dn=-on*game.scale,ln=(-rn-16384)*game.scale,un=(-on-8192)*game.scale,an;for(an of["sea","forest","sand","rock"])Ht[an].tilePosition.set(sn,dn);for(an of["sea","sand","rock"])Ht[an+"_mask"].position.set(ln,un);null!=Ht.polygons&&null!=Ht.polygons.position&&Ht.polygons.position.set(-rn*game.scale,-on*game.scale),Yt.lastOverdrawTime=game.time,Xt.render(jt.sea,Ht.render),Xt.render(jt.map,Ht.render)};Graphics.render=function(){Xt.render(jt.shadows,Ht.shadows,!0),Xt.render(jt.hudEnergy,Wt.hudTextureEnergy,!0),Xt.render(jt.hudHealth,Wt.hudTextureHealth,!0),Xt.render(jt.game)}},window.loadGraphics_SWAM=function(){var Yt={position:Vector.zero(),center:Vector.zero(),lastOverdraw:Vector.zero(),lastOverdrawTime:0,shake:0},Ht={},Wt={},jt={},Xt;Graphics.setup=function(){Kt(window.innerWidth,window.innerHeight),zt(),Textures.load(),Vt(),Qt(),qt(),Zt(),Mobs.setupDoodads(),UI.setupMinimap(),UI.setupHUD()};var zt=function(){PIXI.utils.skipHello(),PIXI.settings.PRECISION_FRAGMENT=PIXI.PRECISION.HIGH;var an={autoResize:!0,clearBeforeRender:!1,preserveDrawingBuffer:!0};config.settings.hidpi&&(an.resolution=2);try{Xt=new PIXI.WebGLRenderer(game.screenX,game.screenY,an),Graphics.renderer=Xt}catch(rn){return void UI.popBigMsg(2)}document.body.appendChild(Xt.view)},Vt=function(){for(var an of["game","ui0","ui1","ui2","ui3","ui4","hudHealth","hudEnergy","flags","doodads","map","sea","objects","groundobjects","fields","shadows","powerups","crates","aircraft","aircraftme","glows","playernames","bubbles","thrusters","projectiles","smoke","explosions"])jt[an]=new PIXI.Container,jt[an].layerName=an;for(var rn of["smoke","crates","thrusters","projectiles","aircraft","aircraftme","glows","explosions","powerups","playernames","flags","bubbles"])jt.objects.addChild(jt[rn]);for(var on of["fields"])jt.groundobjects.addChild(jt[on]);if(game.graphics.layers=jt,game.graphics.gui=Wt,config.debug.collisions){for(var sn=new PIXI.Graphics,dn=0;dn<config.walls.length;dn++)if(sn.beginFill(16777215,.2),sn.drawCircle(config.walls[dn][0],config.walls[dn][1],config.walls[dn][2]),sn.endFill(),window.AutoPilot&&AutoPilot.debug){var ln=AutoPilot.getGraphBoundingBox(config.walls[dn][0],config.walls[dn][1],config.walls[dn][2]);sn.beginFill(16711680,.2),sn.drawRect(100*ln.p1.x-16384,100*ln.p1.y-8192,100*(ln.p2.x-ln.p1.x+1),100*(ln.p2.y-ln.p1.y+1)),sn.endFill()}if(window.AutoPilot&&AutoPilot.debug){sn.lineColor=16777215,sn.lineStyle(1,16777215);for(var un=-16383;16383>=un;un+=100)sn.moveTo(un,-8192),sn.lineTo(un,8192);for(var pn=-8192;8192>=pn;pn+=100)sn.moveTo(-16383,pn),sn.lineTo(16384,pn)}jt.objects.addChild(sn)}},qt=function(){Ht.render=PIXI.RenderTexture.create(game.screenX+config.overdraw,game.screenY+config.overdraw,void 0,config.settings.hidpi?2:void 0),Ht.renderSprite=new PIXI.Sprite(Ht.render),Ht.renderSprite.layerName="renderSprite",Ht.shadows=PIXI.RenderTexture.create(game.shadowX,game.shadowY,void 0,config.settings.hidpi?2:void 0),Ht.shadowsSprite=new PIXI.Sprite(Ht.shadows),Ht.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),Ht.shadowsSprite.blendMode=PIXI.BLEND_MODES.MULTIPLY,Ht.shadowsSprite.alpha=.4,jt.game.addChild(Ht.renderSprite),jt.game.addChild(jt.groundobjects),Ht.shade=Textures.sprite("screenshade"),Ht.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale),Ht.shade.alpha=.825,Ht.shade.anchor.set(.5,.5),jt.shadows.addChild(Ht.shade),jt.game.addChild(jt.objects),jt.game.addChild(jt.ui0),jt.game.addChild(jt.ui1),jt.game.addChild(jt.ui2),jt.game.addChild(jt.ui3),jt.game.addChild(jt.ui4),Wt.hudTextureEnergy=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),Wt.hudSpriteEnergy=new PIXI.Sprite(Wt.hudTextureEnergy),Wt.hudSpriteEnergy.pivot.set(-250,174),Wt.hudTextureHealth=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),Wt.hudSpriteHealth=new PIXI.Sprite(Wt.hudTextureHealth),Wt.hudSpriteHealth.pivot.set(330,174),jt.game.addChild(Wt.hudSpriteEnergy),jt.game.addChild(Wt.hudSpriteHealth)};Graphics.resizeRenderer=function(an,rn){var on=an+config.overdraw,sn=rn+config.overdraw;Kt(an,rn),Qt(),Xt.resize(an,rn),Ht.render.resize(on,sn),Ht.shadows.resize(an,rn),Ht.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),Ht.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale);for(var dn of["sea","forest","sand","rock"])Ht[dn].width=on,Ht[dn].height=sn;UI.resizeMinimap(),UI.resizeHUD(),$t(),en(),Graphics.setCamera(Yt.center.x,Yt.center.y),game.state==Network.STATE.PLAYING&&Network.resizeHorizon()},Graphics.toggleHiDPI=function(){config.settings.hidpi=1!=config.settings.hidpi,config.settings.hidpi?Tools.setSettings({hidpi:!0}):Tools.removeSetting("hidpi"),UI.updateMainMenuSettings(),1==config.settings.oldhidpi==config.settings.hidpi?UI.showMessage("alert","",1e3):UI.showMessage("alert","Reload game to apply HiDPI settings<br><span class=\"button\" onclick=\"Games.redirRoot()\">RELOAD</span>",1e4)};var Kt=function(an,rn){game.screenX=an,game.screenY=rn,game.halfScreenX=an/2,game.halfScreenY=rn/2,game.shadowX=Math.floor(game.screenX/config.shadowScaling),game.shadowY=Math.floor(game.screenY/config.shadowScaling)},Qt=function(){game.scale=(game.screenX+game.screenY)/config.scalingFactor,jt.groundobjects.scale.set(game.scale),jt.objects.scale.set(game.scale),jt.shadows.scale.set(game.scale),jt.doodads.scale.set(game.scale),jt.bubbles.scale.set(1/game.scale),Jt()},Jt=function(){if(config.mobile){var an=game.screenX>game.screenY?"landscape":"portrait";config.phone=599>=game.screenX&&"portrait"==an||599>=game.screenY&&"landscape"==an,config.tablet=600<=game.screenX&&1024>=game.screenX&&"portrait"==an||600<=game.screenY&&1024>=game.screenY&&1024>=game.screenX&&"landscape"==an,config.maxScoreboard=8,config.phone&&(config.minimapSize=160,config.maxScoreboard=5),config.tablet&&(config.maxScoreboard=7),config.minimapPaddingX=game.screenX/2-config.minimapSize/2}},Zt=function(){var an=Xt.width+config.overdraw,rn=Xt.height+config.overdraw;Ht.sea=Textures.tile("map_sea",an,rn),Ht.forest=Textures.tile("map_forest",an,rn),Ht.forest_mask=Textures.sprite("map_forest_mask"),Ht.forest_mask.scale.set(8,8),Ht.forest.mask=Ht.forest_mask,Ht.sand=Textures.tile("map_sand",an,rn),Ht.sand_mask=Textures.sprite("map_sand_mask"),Ht.sand_mask.scale.set(8,8),Ht.sand.mask=Ht.sand_mask,Ht.rock=Textures.tile("map_rock",an,rn),Ht.rock_mask=Textures.sprite("map_rock_mask"),Ht.rock_mask.scale.set(8,8),Ht.rock.mask=Ht.rock_mask,jt.sea.addChild(Ht.sea);for(var on of["forest","forest_mask","sand","sand_mask","rock","rock_mask"])jt.map.addChild(Ht[on]),Ht[on].layerName=on;jt.map.addChild(jt.doodads),$t()},$t=function(){var an;for(an of["sea","forest","sand","rock"])Ht[an].tileScale.set(game.scale,game.scale);for(an of["forest","sand","rock"])Ht[an+"_mask"].scale.set(8*game.scale,8*game.scale)},en=function(){try{Ht.polygons.scale.x=game.scale,Ht.polygons.scale.y=game.scale}catch(an){}};Graphics.initSprite=function(an,rn,on){var sn=Textures.sprite(an);return on.position&&sn.position.set(on.position[0],on.position[1]),on.anchor&&sn.anchor.set(on.anchor[0],on.anchor[1]),on.pivot&&sn.pivot.set(on.pivot[0],on.pivot[1]),on.scale&&(Array.isArray(on.scale)?sn.scale.set(on.scale[0],on.scale[1]):sn.scale.set(on.scale)),on.rotation&&(sn.rotation=on.rotation),on.alpha&&(sn.alpha=on.alpha),on.blend&&(sn.blendMode=PIXI.BLEND_MODES[on.blend]),on.tint&&(sn.tint=on.tint),on.mask&&(sn.mask=on.mask),on.visible&&(sn.visible=on.visible),rn.addChild(sn),sn},Graphics.transform=function(an,rn,on,sn,dn,ln,un){an.position.set(rn,on),null==ln?null!=dn&&an.scale.set(dn):an.scale.set(dn,ln),null!=sn&&(an.rotation=sn),null!=un&&(an.alpha=un)},Graphics.update=function(){let an=Yt.position.x,rn=Yt.position.y,on=-an*game.scale,sn=-rn*game.scale,dn=config.overdraw/2;Ht.shade.position.set(Yt.center.x/config.shadowScaling,Yt.center.y/config.shadowScaling),Ht.renderSprite.position.set(game.scale*(-an+Yt.lastOverdraw.x)-dn,game.scale*(-rn+Yt.lastOverdraw.y)-dn),jt.objects.position.set(on,sn),jt.groundobjects.position.set(on,sn),jt.doodads.position.set(on+dn,sn+dn),jt.shadows.position.set(-an*(game.scale/config.shadowScaling),-rn*(game.scale/config.shadowScaling)),Wt.minimap_box.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-Yt.center.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-Yt.center.y)/16384)),window.SWAM&&SWAM.updateLayers(on,sn,Yt),config.overdrawOptimize?(Math.abs(an-Yt.lastOverdraw.x)>dn/game.scale||Math.abs(rn-Yt.lastOverdraw.y)>dn/game.scale||2e3<game.time-Yt.lastOverdrawTime)&&nn():nn()},Graphics.setCamera=function(an,rn){var on=0,sn=0;.5<Yt.shake&&(on=Tools.rand(-Yt.shake,Yt.shake),sn=Tools.rand(-Yt.shake,Yt.shake),Yt.shake*=1-.06*game.timeFactor);var dn=game.halfScreenX/game.scale,ln=game.halfScreenY/game.scale;an=Tools.clamp(an,-16384+dn,16384-dn),rn=Tools.clamp(rn,-8192+ln,8192-ln),Yt.position.x=on+an-dn,Yt.position.y=sn+rn-ln,Yt.center.x=on+an,Yt.center.y=sn+rn},Graphics.getCamera=function(){return Yt.center},Graphics.shakeCamera=function(an,rn){var on=Tools.length(an.x-Yt.center.x,an.y-Yt.center.y),sn=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2,dn=Tools.clamp(1.3*(1-on/sn),0,1);.1>dn||(Yt.shake=dn*rn)},Graphics.shadowCoords=function(an){var rn=Mobs.getClosestDoodad(an);return new Vector((an.x+config.shadowOffsetX*rn)/config.shadowScaling,(an.y+config.shadowOffsetY*rn)/config.shadowScaling)},Graphics.minimapMob=function(an,rn,on){null!=an&&an.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-rn)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-on)/16384))},Graphics.toggleFullscreen=function(){(function(){var an=document;return an.fullscreenElement?null!==an.fullscreenElement:an.mozFullScreenElement?null!==an.mozFullScreenElement:an.webkitFullscreenElement?null!==an.webkitFullscreenElement:an.msFullscreenElement?null!==an.msFullscreenElement:void 0})()?function(){var an=document;an.exitFullscreen?an.exitFullscreen():an.mozCancelFullScreen?an.mozCancelFullScreen():an.webkitExitFullscreen?an.webkitExitFullscreen():an.msExitFullscreen&&an.msExitFullscreen()}():function(){var an=document.documentElement;if(an.requestFullscreen?an.requestFullscreen():an.mozRequestFullScreen?an.mozRequestFullScreen():an.webkitRequestFullscreen?an.webkitRequestFullscreen():an.msRequestFullscreen&&an.msRequestFullscreen(),config.mobile&&null!=window.screen&&null!=window.screen.orientation)try{screen.orientation.lock("landscape")}catch(rn){}}()},Graphics.inScreen=function(an,rn){return an.x>=Yt.center.x-game.halfScreenX/game.scale-rn&&an.x<=Yt.center.x+game.halfScreenX/game.scale+rn&&an.y>=Yt.center.y-game.halfScreenY/game.scale-rn&&an.y<=Yt.center.y+game.halfScreenY/game.scale+rn};var nn=function(){Mobs.updateDoodads(),Yt.lastOverdraw.x=Yt.position.x,Yt.lastOverdraw.y=Yt.position.y,Ht.renderSprite.position.set(-config.overdraw/2,-config.overdraw/2);var rn=Yt.position.x-config.overdraw/game.scale/2,on=Yt.position.y-config.overdraw/game.scale/2,sn=-rn*game.scale,dn=-on*game.scale,ln=(-rn-16384)*game.scale,un=(-on-8192)*game.scale,an,pn=SWAM.BackgroundFactor||1;for(an of["sea","forest","sand","rock"])Ht[an].tilePosition.set(sn/pn,dn/pn);if(SWAM&&SWAM.MoveBackgroundTiles)for(an of["forest","sand","rock"])Ht[an+"_mask"].position.set(ln,un);Yt.lastOverdrawTime=game.time,Xt.render(jt.sea,Ht.render),Xt.render(jt.map,Ht.render)};Graphics.renderbackground=nn,Graphics.render=function(){Xt.render(jt.shadows,Ht.shadows,!0),Xt.render(jt.hudEnergy,Wt.hudTextureEnergy,!0),Xt.render(jt.hudHealth,Wt.hudTextureHealth,!0),Xt.render(jt.game)}},!function(){var Xt=null,Yt=null,Ht=!1,Wt="",jt=!1,zt=null,Vt=-1,qt=-1,Kt=0,Qt={},Jt=0,Zt=0,$t=0,en=!1,tn=2e3,nn=2e3;Network.sendKey=function(bn,xn){if(game.state==Network.STATE.PLAYING){Zt++;var vn={c:gn.KEY,seq:Zt,key:hn[bn],state:xn};null!=game.spectatingID&&xn&&("RIGHT"==bn?Network.spectatePrev():"LEFT"==bn&&Network.spectateNext()),cn(vn),Yt&&Ht&&cn(vn,!0)}},Network.sendChat=function(bn){game.state==Network.STATE.PLAYING&&cn({c:gn.CHAT,text:bn})},Network.sendWhisper=function(bn,xn){game.state==Network.STATE.PLAYING&&cn({c:gn.WHISPER,id:bn,text:xn})},Network.sendSay=function(bn){game.state==Network.STATE.PLAYING&&cn({c:gn.SAY,text:bn})},Network.sendTeam=function(bn){game.state==Network.STATE.PLAYING&&cn({c:gn.TEAMCHAT,text:bn})},Network.sendCommand=function(bn,xn){game.state==Network.STATE.PLAYING&&("flag"===bn&&(game.lastFlagSet=xn),cn({c:gn.COMMAND,com:bn,data:xn}))},Network.voteMute=function(bn){game.state==Network.STATE.PLAYING&&cn({c:gn.VOTEMUTE,id:bn})},Network.force=function(bn){for(var xn in Players.network(yn.PLAYER_UPDATE,bn),bn.players)Players.network(yn.PLAYER_UPDATE,bn.players[xn]);for(xn in bn.mobs)Mobs.network(bn.mobs[xn]);var vn=new Vector(bn.posX,bn.posY);Particles.spiritShockwave(vn),Sound.effectRepel(vn)},Network.getScores=function(){game.state==Network.STATE.PLAYING&&cn({c:gn.SCOREDETAILED})},Network.resizeHorizon=function(){game.state==Network.STATE.PLAYING&&cn({c:gn.HORIZON,horizonX:Math.ceil(game.halfScreenX/game.scale),horizonY:Math.ceil(game.halfScreenY/game.scale)})},Network.detectConnectivity=function(){game.lagging=1300<game.timeNetwork-$t},Network.shutdown=function(){null!=zt&&clearInterval(zt),null!=Xt&&Xt.close(),null!=Yt&&Yt.close(),Ht=!1,jt=!1,Vt=-1,qt=-1,Kt=0,Qt={},Jt=0,Zt=0,$t=0,en=!1,tn=2e3,nn=2e3},Network.receivedError=function(bn){en=bn},Network.spectateNext=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-1")},Network.spectatePrev=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-2")},Network.spectateForce=function(){game.state==Network.STATE.PLAYING&&(Players.amIAlive()?Network.sendCommand("spectate","-3"):Network.spectateNext())};var an=function(){game.lagging||game.state==Network.STATE.PLAYING&&(jt?Yt&&Ht&&cn({c:gn.ACK},!0):cn({c:gn.ACK}),jt=!jt)},rn=function(bn){36e5<Math.abs(bn-Vt)&&(Vt=bn,qt=performance.now(),Kt=0)},on=function(bn){if(game.state==Network.STATE.PLAYING||bn.c==yn.LOGIN||bn.c==yn.ERROR){if((bn.c==yn.PLAYER_UPDATE||bn.c==yn.PLAYER_FIRE||bn.c==yn.EVENT_BOOST||bn.c==yn.EVENT_BOUNCE)&&bn.id==game.myID||bn.c==yn.PING){if(bn.c!=yn.PING&&dn(bn))return;game.timeNetwork=performance.now(),$t=game.timeNetwork,function(vn){if(game.jitter=0,-1!=Vt){rn(vn);var Tn=game.timeNetwork,En=vn-Vt-(Tn-qt),Sn=En-(Kt=.8*Kt+En/5);100>Math.abs(Sn)&&(game.jitter=Sn)}}(bn.clock/100)}else game.timeNetwork=performance.now(),$t=game.timeNetwork,null!=bn.clock&&function(vn){-1!=Vt&&(rn(vn),game.jitter=vn-Vt-(game.timeNetwork-qt)-Kt)}(bn.clock/100);switch(bn.c){case yn.PLAYER_UPDATE:case yn.PLAYER_FIRE:case yn.CHAT_SAY:case yn.PLAYER_RESPAWN:case yn.PLAYER_FLAG:case yn.EVENT_BOOST:case yn.EVENT_BOUNCE:if(Players.network(bn.c,bn),bn.c===yn.PLAYER_FIRE){for(var xn=0;xn<bn.projectiles.length;xn++)bn.projectiles[xn].c=yn.PLAYER_FIRE,Mobs.add(bn.projectiles[xn],!1,bn.id);0<bn.projectiles.length&&Sound.missileLaunch(new Vector(bn.projectiles[0].posX,bn.projectiles[0].posY),bn.projectiles[0].type)}break;case yn.LOGIN:for(!function(vn){zt=setInterval(an,50),game.myID=vn.id,game.myTeam=vn.team,game.myToken=vn.token,game.state=Network.STATE.PLAYING,game.roomName=vn.room,game.gameType=vn.type,game.spectatingID=null,game.myLevel=0,Games.prep(),Vt=vn.clock/100,qt=performance.now(),ln()}(bn),UI.loggedIn(bn),xn=0;xn<bn.players.length;xn++)Players.add(bn.players[xn],!0);break;case yn.ERROR:UI.errorHandler(bn);break;case yn.PLAYER_NEW:Players.add(bn);break;case yn.PLAYER_LEAVE:Players.destroy(bn.id);break;case yn.PLAYER_TYPE:Players.changeType(bn);break;case yn.PLAYER_HIT:Players.impact(bn),200!=bn.type&&Mobs.destroy(bn);break;case yn.PLAYER_KILL:Players.kill(bn);break;case yn.PLAYER_UPGRADE:UI.updateUpgrades([bn.speed,bn.defense,bn.energy,bn.missile],bn.upgrades,bn.type);break;case yn.PLAYER_POWERUP:Players.powerup(bn);break;case yn.PLAYER_LEVEL:Players.updateLevel(bn);break;case yn.PLAYER_RETEAM:for(xn=0;xn<bn.players.length;xn++)Players.reteam(bn.players[xn]);break;case yn.EVENT_REPEL:Network.force(bn);break;case yn.EVENT_LEAVEHORIZON:0==bn.type?Players.leaveHorizon(bn):Mobs.destroy(bn);break;case yn.EVENT_STEALTH:Players.stealth(bn);break;case yn.MOB_UPDATE:case yn.MOB_UPDATE_STATIONARY:Mobs.network(bn);break;case yn.MOB_DESPAWN:Mobs.despawn(bn);break;case yn.MOB_DESPAWN_COORDS:Mobs.destroy(bn);break;case yn.GAME_FLAG:Games.networkFlag(bn);break;case yn.GAME_PLAYERSALIVE:Games.playersAlive(bn.players);break;case yn.SCORE_UPDATE:UI.newScore(bn);break;case yn.SCORE_BOARD:UI.scoreboardUpdate(bn.data,bn.rankings,config.maxScoreboard),Players.updateBadges(bn.data);break;case yn.SCORE_DETAILED:case yn.SCORE_DETAILED_CTF:case yn.SCORE_DETAILED_BTR:UI.updateScore(bn);break;case yn.PING:!function(vn){cn({c:gn.PONG,num:vn})}(bn.num);break;case yn.PING_RESULT:UI.updateStats(bn);break;case yn.CHAT_PUBLIC:if(config.mobile)return;Players.chat(bn);break;case yn.CHAT_TEAM:if(config.mobile)return;Players.teamChat(bn);break;case yn.CHAT_WHISPER:if(config.mobile)return;Players.whisper(bn);break;case yn.CHAT_VOTEMUTEPASSED:if(config.mobile)return;Players.votemutePass(bn);break;case yn.CHAT_VOTEMUTED:return config.mobile?void 0:void UI.chatMuted();case yn.SERVER_MESSAGE:UI.serverMessage(bn);break;case yn.SERVER_CUSTOM:sn(bn);break;case yn.GAME_SPECTATE:Games.spectate(bn.id);break;case yn.GAME_FIREWALL:Games.handleFirewall(bn);break;case yn.COMMAND_REPLY:UI.showCommandReply(bn);}}},sn=function(bn){try{var xn=JSON.parse(bn.data)}catch(vn){return}1==bn.type?Games.showBTRWin(xn):2==bn.type&&Games.showCTFWin(xn)},dn=function(bn){var xn=performance.now(),vn=bn.c+"_"+bn.clock+"_"+bn.posX+"_"+bn.posY+"_"+bn.rot+"_"+bn.speedX+"_"+bn.speedY;if(15e3<xn-Jt){for(var Tn in Qt)3e4<xn-Qt[Tn]&&delete Qt[Tn];Jt=xn}return null!=Qt[vn]||(Qt[vn]=xn,!1)};Network.reconnectMessage=function(){game.reloading||UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Connection reset<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",6e5)},Network.reconnect=function(){UI.showMessage("alert","",100),Games.switchGame()},Network.setup=function(){Wt=DEVELOPMENT?-1==document.domain.indexOf("192.168.")?"ws://"+game.playHost+".airmash.devel:8000/"+game.playPath:"ws://"+document.domain+":8010/"+game.playPath:"wss://game-"+game.playHost+".airma.sh/"+game.playPath,Yt&&Ht&&Yt.close(),(Xt=new WebSocket(Wt)).binaryType="arraybuffer",Xt.onopen=function(){cn({c:gn.LOGIN,protocol:game.protocol,name:game.myName,session:config.settings.session?config.settings.session:"none",horizonX:Math.ceil(game.halfScreenX/game.scale),horizonY:Math.ceil(game.halfScreenY/game.scale),flag:game.myFlag})},Xt.onclose=function(){null!=zt&&clearInterval(zt),game.state!==Network.STATE.CONNECTING&&(game.state=Network.STATE.CONNECTING,!1===en&&Network.reconnectMessage())},Xt.onerror=function(){},Xt.onmessage=function(bn){on(pn(bn.data))}};var ln=function(){(Yt=new WebSocket(Wt)).binaryType="arraybuffer",Yt.onopen=function(){cn({c:gn.BACKUP,token:game.myToken},!0)},Yt.onclose=function(){Ht=!1},Yt.onerror=function(){},Yt.onmessage=function(bn){var xn=pn(bn.data);xn.c===yn.BACKUP&&(Ht=!0),xn.backup=!0,on(xn)}},un=function(bn){var Tn=1,En=[],Sn=mn[bn.c],vn;if(null==Sn)return null;for(vn=0;vn<Sn.length;vn++)switch(Sn[vn][1]){case fn.text:var An=Tools.encodeUTF8(bn[Sn[vn][0]]);En.push(An),Tn+=1+An.length;break;case fn.array:case fn.arraysmall:break;case fn.uint8:Tn+=1;break;case fn.uint16:Tn+=2;break;case fn.uint32:case fn.float32:Tn+=4;break;case fn.float64:Tn+=8;break;case fn.boolean:Tn+=1;}var wn=new ArrayBuffer(Tn),Cn=new DataView(wn),Pn=0,Dn=1;for(Cn.setUint8(0,bn.c,!0),vn=0;vn<Sn.length;vn++)switch(Sn[vn][1]){case fn.text:var Mn=En[Pn].length;Cn.setUint8(Dn,Mn,!0),Dn+=1;for(var Rn=0;Rn<Mn;Rn++)Cn.setUint8(Dn+Rn,En[Pn][Rn],!0);En[Pn],Pn++,Dn+=Mn;break;case fn.array:case fn.arraysmall:break;case fn.uint8:Cn.setUint8(Dn,bn[Sn[vn][0]],!0),Dn+=1;break;case fn.uint16:Cn.setUint16(Dn,bn[Sn[vn][0]],!0),Dn+=2;break;case fn.uint32:Cn.setUint32(Dn,bn[Sn[vn][0]],!0),Dn+=4;break;case fn.float32:Cn.setFloat32(Dn,bn[Sn[vn][0]],!0),Dn+=4;break;case fn.float64:Cn.setFloat64(Dn,bn[Sn[vn][0]],!0),Dn+=8;break;case fn.boolean:Cn.setUint8(Dn,!1===bn[Sn[vn][0]]?0:1),Dn+=1;}return wn},pn=function(bn){var vn=new DataView(bn),Tn={c:vn.getUint8(0,!0)},En=1,Sn=_n[Tn.c];if(null==Sn)return null;for(var An=0,wn;An<Sn.length;An++)switch(wn=Sn[An][0],Sn[An][1]){case fn.text:case fn.textbig:if(Sn[An][1]==fn.text){var Cn=vn.getUint8(En,!0);En+=1}else Cn=vn.getUint16(En,!0),En+=2;for(var Pn=new Uint8Array(Cn),Dn=0;Dn<Cn;Dn++)Pn[Dn]=vn.getUint8(En+Dn,!0);var Mn=Tools.decodeUTF8(Pn);Tn[wn]=Mn,En+=Cn;break;case fn.array:case fn.arraysmall:if(Sn[An][1]==fn.arraysmall){var Rn=vn.getUint8(En,!0);En+=1}else Rn=vn.getUint16(En,!0),En+=2;Tn[wn]=[];for(var In=Sn[An][2],On=0;On<Rn;On++){for(var Ln={},kn=0,Nn;kn<In.length;kn++)switch(Nn=In[kn][0],In[kn][1]){case fn.text:case fn.textbig:for(In[kn][1]==fn.text?(Cn=vn.getUint8(En,!0),En+=1):(Cn=vn.getUint16(En,!0),En+=2),Pn=new Uint8Array(Cn),Dn=0;Dn<Cn;Dn++)Pn[Dn]=vn.getUint8(En+Dn,!0);Mn=Tools.decodeUTF8(Pn),Ln[Nn]=Mn,En+=Cn;break;case fn.uint8:Ln[Nn]=vn.getUint8(En,!0),En+=1;break;case fn.uint16:Ln[Nn]=vn.getUint16(En,!0),En+=2;break;case fn.uint24:var Fn=256*vn.getUint16(En,!0);En+=2,Tn[Nn]=Fn+vn.getUint8(En,!0),En+=1;break;case fn.uint32:Ln[Nn]=vn.getUint32(En,!0),En+=4;break;case fn.float32:Ln[Nn]=vn.getFloat32(En,!0),En+=4;break;case fn.float64:Ln[Nn]=vn.getFloat64(En,!0),En+=8;break;case fn.boolean:Ln[Nn]=0!=vn.getUint8(En,!0),En+=1;break;case fn.speed:Ln[Nn]=Tools.decodeSpeed(vn.getUint16(En,!0)),En+=2;break;case fn.accel:Ln[Nn]=Tools.decodeAccel(vn.getUint16(En,!0)),En+=2;break;case fn.coordx:Ln[Nn]=Tools.decodeCoordX(vn.getUint16(En,!0)),En+=2;break;case fn.coordy:Ln[Nn]=Tools.decodeCoordY(vn.getUint16(En,!0)),En+=2;break;case fn.coord24:Fn=256*vn.getUint16(En,!0),En+=2,Tn[Nn]=Tools.decodeCoord24(Fn+vn.getUint8(En,!0)),En+=1;break;case fn.rotation:Ln[Nn]=Tools.decodeRotation(vn.getUint16(En,!0)),En+=2;break;case fn.regen:Ln[Nn]=Tools.decodeRegen(vn.getUint16(En,!0)),En+=2;break;case fn.healthnergy:Ln[Nn]=Tools.decodeHealthnergy(vn.getUint8(En,!0)),En+=1;}Tn[wn].push(Ln)}break;case fn.uint8:Tn[wn]=vn.getUint8(En,!0),En+=1;break;case fn.uint16:Tn[wn]=vn.getUint16(En,!0),En+=2;break;case fn.uint24:Fn=256*vn.getUint16(En,!0),En+=2,Tn[wn]=Fn+vn.getUint8(En,!0),En+=1;break;case fn.uint32:Tn[wn]=vn.getUint32(En,!0),En+=4;break;case fn.float32:Tn[wn]=vn.getFloat32(En,!0),En+=4;break;case fn.float64:Tn[wn]=vn.getFloat64(En,!0),En+=8;break;case fn.boolean:Tn[wn]=0!=vn.getUint8(En,!0),En+=1;break;case fn.speed:Tn[wn]=Tools.decodeSpeed(vn.getUint16(En,!0)),En+=2;break;case fn.accel:Tn[wn]=Tools.decodeAccel(vn.getUint16(En,!0)),En+=2;break;case fn.coordx:Tn[wn]=Tools.decodeCoordX(vn.getUint16(En,!0)),En+=2;break;case fn.coordy:Tn[wn]=Tools.decodeCoordY(vn.getUint16(En,!0)),En+=2;break;case fn.coord24:Fn=256*vn.getUint16(En,!0),En+=2,Tn[wn]=Tools.decodeCoord24(Fn+vn.getUint8(En,!0)),En+=1;break;case fn.rotation:Tn[wn]=Tools.decodeRotation(vn.getUint16(En,!0)),En+=2;break;case fn.regen:Tn[wn]=Tools.decodeRegen(vn.getUint16(En,!0)),En+=2;break;case fn.healthnergy:Tn[wn]=Tools.decodeHealthnergy(vn.getUint8(En,!0)),En+=1;break;default:return null;}return Tn},cn=function(bn,xn){xn?Yt.send(un(bn)):Xt.send(un(bn))},hn={UP:1,DOWN:2,LEFT:3,RIGHT:4,FIRE:5,SPECIAL:6},fn={text:1,textbig:2,array:3,arraysmall:4,uint8:5,uint16:6,uint24:7,uint32:8,float32:9,float64:10,boolean:11,speed:12,accel:13,coordx:14,coordy:15,coord24:16,rotation:17,healthnergy:18,regen:19},gn={LOGIN:0,BACKUP:1,HORIZON:2,ACK:5,PONG:6,KEY:10,COMMAND:11,SCOREDETAILED:12,CHAT:20,WHISPER:21,SAY:22,TEAMCHAT:23,VOTEMUTE:24,LOCALPING:255},mn={[gn.LOGIN]:[["protocol",fn.uint8],["name",fn.text],["session",fn.text],["horizonX",fn.uint16],["horizonY",fn.uint16],["flag",fn.text]],[gn.BACKUP]:[["token",fn.text]],[gn.HORIZON]:[["horizonX",fn.uint16],["horizonY",fn.uint16]],[gn.ACK]:[],[gn.PONG]:[["num",fn.uint32]],[gn.KEY]:[["seq",fn.uint32],["key",fn.uint8],["state",fn.boolean]],[gn.COMMAND]:[["com",fn.text],["data",fn.text]],[gn.SCOREDETAILED]:[],[gn.CHAT]:[["text",fn.text]],[gn.WHISPER]:[["id",fn.uint16],["text",fn.text]],[gn.SAY]:[["text",fn.text]],[gn.TEAMCHAT]:[["text",fn.text]],[gn.VOTEMUTE]:[["id",fn.uint16]],[gn.LOCALPING]:[["auth",fn.uint32]]},yn={LOGIN:0,BACKUP:1,PING:5,PING_RESULT:6,ACK:7,ERROR:8,COMMAND_REPLY:9,PLAYER_NEW:10,PLAYER_LEAVE:11,PLAYER_UPDATE:12,PLAYER_FIRE:13,PLAYER_HIT:14,PLAYER_RESPAWN:15,PLAYER_FLAG:16,PLAYER_KILL:17,PLAYER_UPGRADE:18,PLAYER_TYPE:19,PLAYER_POWERUP:20,PLAYER_LEVEL:21,PLAYER_RETEAM:22,GAME_FLAG:30,GAME_SPECTATE:31,GAME_PLAYERSALIVE:32,GAME_FIREWALL:33,EVENT_REPEL:40,EVENT_BOOST:41,EVENT_BOUNCE:42,EVENT_STEALTH:43,EVENT_LEAVEHORIZON:44,MOB_UPDATE:60,MOB_UPDATE_STATIONARY:61,MOB_DESPAWN:62,MOB_DESPAWN_COORDS:63,CHAT_PUBLIC:70,CHAT_TEAM:71,CHAT_SAY:72,CHAT_WHISPER:73,CHAT_VOTEMUTEPASSED:78,CHAT_VOTEMUTED:79,SCORE_UPDATE:80,SCORE_BOARD:81,SCORE_DETAILED:82,SCORE_DETAILED_CTF:83,SCORE_DETAILED_BTR:84,SERVER_MESSAGE:90,SERVER_CUSTOM:91},_n={[yn.LOGIN]:[["success",fn.boolean],["id",fn.uint16],["team",fn.uint16],["clock",fn.uint32],["token",fn.text],["type",fn.uint8],["room",fn.text],["players",fn.array,[["id",fn.uint16],["status",fn.uint8],["level",fn.uint8],["name",fn.text],["type",fn.uint8],["team",fn.uint16],["posX",fn.coordx],["posY",fn.coordy],["rot",fn.rotation],["flag",fn.uint16],["upgrades",fn.uint8]]]],[yn.BACKUP]:[],[yn.PING]:[["clock",fn.uint32],["num",fn.uint32]],[yn.PING_RESULT]:[["ping",fn.uint16],["playerstotal",fn.uint32],["playersgame",fn.uint32]],[yn.ACK]:[],[yn.ERROR]:[["error",fn.uint8]],[yn.COMMAND_REPLY]:[["type",fn.uint8],["text",fn.textbig]],[yn.PLAYER_NEW]:[["id",fn.uint16],["status",fn.uint8],["name",fn.text],["type",fn.uint8],["team",fn.uint16],["posX",fn.coordx],["posY",fn.coordy],["rot",fn.rotation],["flag",fn.uint16],["upgrades",fn.uint8]],[yn.PLAYER_LEAVE]:[["id",fn.uint16]],[yn.PLAYER_UPDATE]:[["clock",fn.uint32],["id",fn.uint16],["keystate",fn.uint8],["upgrades",fn.uint8],["posX",fn.coord24],["posY",fn.coord24],["rot",fn.rotation],["speedX",fn.speed],["speedY",fn.speed]],[yn.PLAYER_FIRE]:[["clock",fn.uint32],["id",fn.uint16],["energy",fn.healthnergy],["energyRegen",fn.regen],["projectiles",fn.arraysmall,[["id",fn.uint16],["type",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["speedX",fn.speed],["speedY",fn.speed],["accelX",fn.accel],["accelY",fn.accel],["maxSpeed",fn.speed]]]],[yn.PLAYER_SAY]:[["id",fn.uint16],["text",fn.text]],[yn.PLAYER_RESPAWN]:[["id",fn.uint16],["posX",fn.coord24],["posY",fn.coord24],["rot",fn.rotation],["upgrades",fn.uint8]],[yn.PLAYER_FLAG]:[["id",fn.uint16],["flag",fn.uint16]],[yn.PLAYER_HIT]:[["id",fn.uint16],["type",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["owner",fn.uint16],["players",fn.arraysmall,[["id",fn.uint16],["health",fn.healthnergy],["healthRegen",fn.regen]]]],[yn.PLAYER_KILL]:[["id",fn.uint16],["killer",fn.uint16],["posX",fn.coordx],["posY",fn.coordy]],[yn.PLAYER_UPGRADE]:[["upgrades",fn.uint16],["type",fn.uint8],["speed",fn.uint8],["defense",fn.uint8],["energy",fn.uint8],["missile",fn.uint8]],[yn.PLAYER_TYPE]:[["id",fn.uint16],["type",fn.uint8]],[yn.PLAYER_POWERUP]:[["type",fn.uint8],["duration",fn.uint32]],[yn.PLAYER_LEVEL]:[["id",fn.uint16],["type",fn.uint8],["level",fn.uint8]],[yn.PLAYER_RETEAM]:[["players",fn.array,[["id",fn.uint16],["team",fn.uint16]]]],[yn.GAME_FLAG]:[["type",fn.uint8],["flag",fn.uint8],["id",fn.uint16],["posX",fn.coord24],["posY",fn.coord24],["blueteam",fn.uint8],["redteam",fn.uint8]],[yn.GAME_SPECTATE]:[["id",fn.uint16]],[yn.GAME_PLAYERSALIVE]:[["players",fn.uint16]],[yn.GAME_FIREWALL]:[["type",fn.uint8],["status",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["radius",fn.float32],["speed",fn.float32]],[yn.EVENT_REPEL]:[["clock",fn.uint32],["id",fn.uint16],["posX",fn.coordx],["posY",fn.coordy],["rot",fn.rotation],["speedX",fn.speed],["speedY",fn.speed],["energy",fn.healthnergy],["energyRegen",fn.regen],["players",fn.arraysmall,[["id",fn.uint16],["keystate",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["rot",fn.rotation],["speedX",fn.speed],["speedY",fn.speed],["energy",fn.healthnergy],["energyRegen",fn.regen],["playerHealth",fn.healthnergy],["playerHealthRegen",fn.regen]]],["mobs",fn.arraysmall,[["id",fn.uint16],["type",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["speedX",fn.speed],["speedY",fn.speed],["accelX",fn.accel],["accelY",fn.accel],["maxSpeed",fn.speed]]]],[yn.EVENT_BOOST]:[["clock",fn.uint32],["id",fn.uint16],["boost",fn.boolean],["posX",fn.coord24],["posY",fn.coord24],["rot",fn.rotation],["speedX",fn.speed],["speedY",fn.speed],["energy",fn.healthnergy],["energyRegen",fn.regen]],[yn.EVENT_BOUNCE]:[["clock",fn.uint32],["id",fn.uint16],["keystate",fn.uint8],["posX",fn.coord24],["posY",fn.coord24],["rot",fn.rotation],["speedX",fn.speed],["speedY",fn.speed]],[yn.EVENT_STEALTH]:[["id",fn.uint16],["state",fn.boolean],["energy",fn.healthnergy],["energyRegen",fn.regen]],[yn.EVENT_LEAVEHORIZON]:[["type",fn.uint8],["id",fn.uint16]],[yn.MOB_UPDATE]:[["clock",fn.uint32],["id",fn.uint16],["type",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["speedX",fn.speed],["speedY",fn.speed],["accelX",fn.accel],["accelY",fn.accel],["maxSpeed",fn.speed]],[yn.MOB_UPDATE_STATIONARY]:[["id",fn.uint16],["type",fn.uint8],["posX",fn.float32],["posY",fn.float32]],[yn.MOB_DESPAWN]:[["id",fn.uint16],["type",fn.uint8]],[yn.MOB_DESPAWN_COORDS]:[["id",fn.uint16],["type",fn.uint8],["posX",fn.coordx],["posY",fn.coordy]],[yn.SCORE_UPDATE]:[["id",fn.uint16],["score",fn.uint32],["earnings",fn.uint32],["upgrades",fn.uint16],["totalkills",fn.uint32],["totaldeaths",fn.uint32]],[yn.SCORE_BOARD]:[["data",fn.array,[["id",fn.uint16],["score",fn.uint32],["level",fn.uint8]]],["rankings",fn.array,[["id",fn.uint16],["x",fn.uint8],["y",fn.uint8]]]],[yn.SCORE_DETAILED]:[["scores",fn.array,[["id",fn.uint16],["level",fn.uint8],["score",fn.uint32],["kills",fn.uint16],["deaths",fn.uint16],["damage",fn.float32],["ping",fn.uint16]]]],[yn.SCORE_DETAILED_CTF]:[["scores",fn.array,[["id",fn.uint16],["level",fn.uint8],["captures",fn.uint16],["score",fn.uint32],["kills",fn.uint16],["deaths",fn.uint16],["damage",fn.float32],["ping",fn.uint16]]]],[yn.SCORE_DETAILED_BTR]:[["scores",fn.array,[["id",fn.uint16],["level",fn.uint8],["alive",fn.boolean],["wins",fn.uint16],["score",fn.uint32],["kills",fn.uint16],["deaths",fn.uint16],["damage",fn.float32],["ping",fn.uint16]]]],[yn.CHAT_TEAM]:[["id",fn.uint16],["text",fn.text]],[yn.CHAT_PUBLIC]:[["id",fn.uint16],["text",fn.text]],[yn.CHAT_SAY]:[["id",fn.uint16],["text",fn.text]],[yn.CHAT_WHISPER]:[["from",fn.uint16],["to",fn.uint16],["text",fn.text]],[yn.CHAT_VOTEMUTEPASSED]:[["id",fn.uint16]],[yn.CHAT_VOTEMUTED]:[],[yn.SERVER_MESSAGE]:[["type",fn.uint8],["duration",fn.uint32],["text",fn.textbig]],[yn.SERVER_CUSTOM]:[["type",fn.uint8],["data",fn.textbig]]};Network.KEYPACKET=hn,Network.KEYLOOKUP={1:"UP",2:"DOWN",3:"LEFT",4:"RIGHT",5:"FIRE",6:"SPECIAL"},Network.CLIENTPACKET=gn,Network.SERVERPACKET=yn,Network.STATE={LOGIN:1,CONNECTING:2,PLAYING:3}}(),function(){var Xt={},Yt={},Ht={},Wt=null,jt=0,zt=2*Math.PI,Vt=null,qt=!1,Kt={},Qt=!1,Jt=null,Zt=0,$t={LEFT:["LEFT","A"],RIGHT:["RIGHT","D"],UP:["UP","W"],DOWN:["DOWN","S"],STRAFELEFT:["Q"],STRAFERIGHT:["E"],FIRE:["SPACE"],SPECIAL:["CTRL","SHIFT"],SHOWSCORE:["TAB"],MAINMENU:["F1"],SHOWGAMES:["F2"],FULLSCREEN:["F"],MINIMIZECHAT:["PGDOWN"],MAXIMIZECHAT:["PGUP"],SAY:["GRAVE"],TEAM:["T"],REPLY:["R"],SPECTATE:["V"],UPGRADE1:["1"],UPGRADE2:["2"],UPGRADE3:["3"],UPGRADE4:["4"],SOUND:["G"],HELP:["H"],INVITE:["I"],MOUSEMODE:["M"]},en={},tn={LEFT:!0,RIGHT:!0,UP:!0,DOWN:!0,FIRE:!0,SPECIAL:!0,STRAFELEFT:!0,STRAFERIGHT:!0},nn={},an={MAINMENU:!0,FULLSCREEN:!0,INVITE:!0,SOUND:!0,SHOWSCORE:!0,SHOWGAMES:!0,HELP:!0},rn=[["Forward","UP"],["Backward","DOWN"],["Turn Left","LEFT"],["Turn Right","RIGHT"],["Fire","FIRE"],["Special","SPECIAL"],["Strafe Left","STRAFELEFT"],["Strafe Right","STRAFERIGHT"],[""],["Spectate","SPECTATE"],["Upgrade Speed","UPGRADE1"],["Upgrade Defense","UPGRADE2"],["Upgrade Energy","UPGRADE3"],["Upgrade Missiles","UPGRADE4"],["Scoreboard","SHOWSCORE"],["Main Menu","MAINMENU"],["Show Games","SHOWGAMES"],["Fullscreen","FULLSCREEN"],["Maximize Chat","MAXIMIZECHAT"],["Minimize Chat","MINIMIZECHAT"],[""],["In-game Say","SAY"],["Team Chat","TEAM"],["Reply","REPLY"],["Toggle Sound","SOUND"],["Help","HELP"],["Invite Friends","INVITE"],["Mouse Mode","MOUSEMODE"]],on={},sn={BACKSPACE:8,TAB:9,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS:20,SPACE:32,PGUP:33,PGDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,WINDOWL:91,WINDOWR:92,SELECT:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,"*":106,"+":107,"-":109,DECIMAL:110,"/":111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL:145,":":186,"=":187,",":188,"-":189,".":190,"/":191,GRAVE:192,"[":219,"\\":220,"]":221,QUOTE:222},dn=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"],ln=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"];Input.setup=function(){for(var vn in sn)on[sn[vn]]=vn;en=JSON.parse(JSON.stringify($t)),fn(),mn(!0),$(window).on("keydown",un),$(window).on("keyup",pn),$(window).on("gamepadconnected",function(Tn){UI.showMessage("alert","<span class=\"info\">GAMEPAD CONNECTED</span>"+UI.escapeHTML(Tn.originalEvent.gamepad.id),3e3),qt=!0,hn()}),$(window).on("gamepaddisconnected",function(Tn){UI.showMessage("alert","<span class=\"info\">GAMEPAD DISCONNECTED</span>"+UI.escapeHTML(Tn.originalEvent.gamepad.id),3e3),qt=!1,hn()})};var un=function(vn){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var Tn=vn.which;if(72!=Tn&&UI.hideHelp(),null!=Jt&&gn(Tn))vn.preventDefault();else{var En=Input.getBind(Tn);if(!cn(Tn))return null==tn[En]?(Ht[Tn]||(Ht[Tn]=!0,UI.controlKey(Tn,En,!0)),vn.preventDefault(),!1):(Xt[En]||(Xt[En]=!0,bn(En)),Yt[Tn]||(Yt[Tn]=!0),vn.preventDefault(),!1)}}},pn=function(vn){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var Tn=vn.which,En=Input.getBind(Tn);if(null==tn[En]&&Ht[Tn]&&(Ht[Tn]=!1),!cn(Tn))return Xt[En]&&(Xt[En]=!1,xn(En)),Yt[Tn]&&(Yt[Tn]=!1),vn.preventDefault(),!1}},cn=function(vn){return!!UI.chatBoxOpen()&&9!=vn&&27!=vn&&13!=vn&&38!=vn&&40!=vn&&37!=vn&&39!=vn&&112!=vn&&113!=vn&&114!=vn&&115!=vn&&116!=vn&&117!=vn&&118!=vn&&119!=vn&&120!=vn&&121!=vn&&122!=vn&&123!=vn},hn=function(){Kt={forward:!0,left:!1,right:!1,up:!1,down:!1,fire:!1,special:!1,angle:0,force:0}};Input.toggleKeybinds=function(){Qt?Input.closeKeybinds():Input.openKeybinds()},Input.getBind=function(vn){var Tn=nn[vn];return null==Tn?null:Tn},Input.bindKey=function(vn,Tn,En){null==Jt&&(Jt=Tn,Zt=En,$(vn.target).html("press key"))},Input.closeBind=function(){null!=Jt&&(mn(),Jt=null)},Input.resetBinds=function(){$t=JSON.parse(JSON.stringify(en)),Tools.removeSetting("keybinds"),Jt=null,mn()};var fn=function(){if(null!=config.settings.keybinds)for(var vn in config.settings.keybinds)$t[vn]=JSON.parse(JSON.stringify(config.settings.keybinds[vn]))},gn=function(vn){var Tn=on[vn];if(27==vn&&(Tn=""),null!=Tn){for(var En in $t)$t[En][0]==Tn&&($t[En][0]=""),1<$t[En].length&&$t[En][1]==Tn&&($t[En][1]="");for(En in $t[Jt][Zt]=Tn,$t)1<$t[En].length&&""==$t[En][0]&&""!=$t[En][1]&&($t[En]=[$t[En][1]]),2==$t[En].length&&""===$t[En][1]&&$t[En].splice(-1,1);return mn(),function(){var Sn={},An="";for(var wn in $t)null!=en[wn]&&(An=JSON.stringify($t[wn]))!==JSON.stringify(en[wn])&&(Sn[wn]=JSON.parse(An));0<Object.keys(Sn).length?Tools.setSettings({keybinds:Sn}):Tools.removeSetting("keybinds")}(),Jt=null,!0}return!1},mn=function(vn){var Tn="",En="",Sn="",An=null;Tn+="<div class=\"left-binds\">";for(var wn=0;wn<rn.length;wn++)null!=rn[wn][0]&&(""==rn[wn][0]?Tn+="<div class=\"item empty\"></div>":(null==(An=$t[rn[wn][1]])?(En="&nbsp;",Sn="&nbsp;"):(""==(En=An[0])&&(En="&nbsp;"),""==(Sn=1==An.length?"":An[1])&&(Sn="&nbsp;")),Tn+="<div class=\"item\"><div class=\"name\">"+rn[wn][0]+"</div><div class=\"bind"+("&nbsp;"==En?" blank":"")+"\" onclick=\"Input.bindKey(event,'"+rn[wn][1]+"',0)\">"+En+"</div><div class=\"bind"+("&nbsp;"==Sn?" blank":"")+"\" onclick=\"Input.bindKey(event,'"+rn[wn][1]+"',1)\">"+Sn+"</div></div>",13==wn&&(Tn+="</div><div class=\"right-binds\">")));Tn+="</div>",null==vn&&$("#keybinds-list").html(Tn),nn={},wn=0;var Cn=0;for(var Pn in $t){for(wn=0;wn<$t[Pn].length;wn++)null!=(Cn=sn[$t[Pn][wn]])&&(nn[Cn]=Pn);null!=an[Pn]&&$("#keybind-"+Pn.toLowerCase()).html(""==$t[Pn]?"&nbsp;":"("+$t[Pn]+")")}};Input.openKeybinds=function(){config.mobile||Qt||(UI.closeAllPanels("keybinds"),mn(),UI.showPanel("#keybinds"),Qt=!0)},Input.closeKeybinds=function(){Qt&&(UI.hidePanel("#keybinds",Qt),Qt=!1,Jt=null)},Input.update=function(){if(qt&&null!=navigator.getGamepads){var vn=navigator.getGamepads();if(null!=vn&&null!=vn.length&&0!=vn.length&&null!=vn[0]){var Tn=vn[0];if(!(16>Tn.buttons.length)){var En=Tn.buttons[12].pressed,Sn=Tn.buttons[13].pressed,An=Tn.buttons[15].pressed,wn=Tn.buttons[14].pressed,Cn=Tn.buttons[0].pressed||Tn.buttons[2].pressed,Pn=Tn.buttons[1].pressed||Tn.buttons[3].pressed;Kt.up!=En&&(yn("UP",En),Kt.up=En),Kt.down!=Sn&&(yn("DOWN",Sn),Kt.down=Sn),Kt.right!=An&&(yn("RIGHT",An),Kt.right=An),Kt.left!=wn&&(yn("LEFT",wn),Kt.left=wn),Kt.fire!=Cn&&(yn("FIRE",Cn),Kt.fire=Cn),Kt.special!=Pn&&(yn("SPECIAL",Pn),Kt.special=Pn);var Dn=new Vector(Tn.axes[1],Tn.axes[0]),Mn=Dn.length(),Rn=-Dn.angle()+Math.PI/2,In=Rn=(Rn%zt+zt)%zt;.2<Mn?(Kt.forward=!0,_n(In,Mn)):(Kt.forward&&!En&&yn("UP",!1),Kt.forward=!1)}}else qt=!1}},Input.unpressKey=function(vn){delete Ht[vn]},Input.keyState=function(vn){return Xt[vn]},Input.clearKeys=function(vn){if(game.state===Network.STATE.PLAYING){for(var Tn of dn)if(Xt[Tn]){if(vn&&(Yt[38]||Yt[40]||Yt[37]||Yt[39]))continue;Xt[Tn]=!1,xn(Tn)}for(var En in Yt)vn&&(38==En||40==En||37==En||39==En)||(Yt[En]=!1)}},Input.touchCloseAll=function(){game.state==Network.STATE.LOGIN?(Games.closeDropdowns(),UI.closeLogin()):game.state==Network.STATE.PLAYING&&(UI.closeAllPanels(),UI.closeTooltip())},Input.addTouchRejection=function(vn){$(vn).on("touchstart",function(Tn){Tn.stopPropagation()}),$(vn).on("touchmove",function(Tn){Tn.preventDefault(),Tn.stopPropagation()})},Input.setupLogin=function(){$(window).on("touchstart",function(vn){Input.touchCloseAll(),vn.preventDefault()}),Input.addTouchRejection("#logon,#big-message,#loginselector")},Input.setupTouch=function(){$(window).on("touchcancel",function(Tn){null!=Vt&&Vt.processOnEnd(Tn)}),Input.addTouchRejection("#settings,#sidebar,#roomnamecontainer,#menu,#gameselector,#mainmenu,#scoredetailed,#invitefriends,#msg-alert,#msg-information"),$("body").append("<div id=\"touch-joystick\"></div><div id=\"touch-fire\"><div class=\"circle\"></div></div><div id=\"touch-special\"><div class=\"circle\"></div></div>"),$("#touch-fire").on("touchstart",function(Tn){yn("FIRE",!0),$("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),Tn.preventDefault()}),$("#touch-fire").on("touchend",function(Tn){yn("FIRE",!1),$("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),Tn.preventDefault()}),$("#touch-special").on("touchstart",function(Tn){yn("SPECIAL",!0),$("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),Tn.preventDefault()}),$("#touch-special").on("touchend",function(Tn){yn("SPECIAL",!1),$("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),Tn.preventDefault()});var vn={zone:$("#touch-joystick")[0],mode:"static",position:{bottom:"50%",left:"50%"}};(Vt=nipplejs.create(vn)).on("end",Input.touchEnd),Vt.on("move",Input.touchMove)},Input.toggleMouse=function(vn){if(!config.mobile)if($(window).off("mousedown"),$(window).off("mouseup"),config.mouse=!config.mouse,config.mouse){if($(window).on("mousedown",Input.mouseDown),$(window).on("mouseup",Input.mouseUp),vn)return;UI.showMessage("alert","<span class=\"info\">MOUSE MODE</span>Enabled<div class=\"mousemode\"><span class=\"info\">LEFT CLICK</span>Fire&nbsp;&nbsp;&nbsp;<span class=\"info\">RIGHT CLICK</span>Special&nbsp;&nbsp;&nbsp;<span class=\"info\">WASD</span>Move</div>",7e3),Tools.setSettings({mousemode:!0})}else UI.showMessage("alert","<span class=\"info\">MOUSE MODE</span>Disabled",3e3),Tools.removeSetting("mousemode")},Input.mouseDown=function(vn){var Tn=vn.originalEvent;if((0==Tn.button||2==Tn.button)&&null!=Tn.target.tagName&&"canvas"==Tn.target.tagName.toLowerCase()){var En=0==Tn.button?"FIRE":"SPECIAL";yn(En,!0),vn.preventDefault()}},Input.mouseUp=function(vn){var Tn=vn.originalEvent;if(0==Tn.button||2==Tn.button)if(null!=Tn.target.tagName&&"canvas"==Tn.target.tagName.toLowerCase()){var En=0==Tn.button?"FIRE":"SPECIAL";yn(En,!1),vn.preventDefault()}else yn("FIRE",!1),yn("SPECIAL",!1)};var yn=function(vn,Tn){(Xt[vn]==!Tn||Tn&&null==Xt[vn])&&(Network.sendKey(vn,Tn),Xt[vn]=Tn)},_n=function(vn,Tn){var En=Players.getMe();if(null!=En){var Sn=vn-En.rot;Sn>Math.PI&&(Sn-=2*Math.PI),Sn<-Math.PI&&(Sn+=2*Math.PI);var An=Math.round(1e3*(Math.abs(Sn)/(60*config.ships[En.type].turnFactor)));if(!(10>(An-=Math.round(game.ping))||100>game.time-jt)){null!=Wt&&clearTimeout(Wt),jt=game.time;var wn=0<Sn?"RIGHT":"LEFT",Cn=0>=Sn?"RIGHT":"LEFT";yn("UP",!(null!=Tn&&.5>Tn)),yn(wn,!0),yn(Cn,!1),Wt=setTimeout(function(){yn(wn,!1)},An)}}};Input.touchMove=function(vn,Tn){var En=-Tn.angle.radian+Math.PI/2,Sn=En=(En%zt+zt)%zt;_n(Sn,Tn.force)},Input.touchEnd=function(){yn("UP",!1),yn("LEFT",!1),yn("RIGHT",!1)},Input.gameFocus=function(){game.focus=!0},Input.gameBlur=function(){game.focus=!1,Input.clearKeys()};var bn=function(vn){return 3==game.myType&&("STRAFELEFT"===vn||"STRAFERIGHT"===vn)?(bn("SPECIAL"),void bn("STRAFELEFT"===vn?"LEFT":"RIGHT")):void(-1!==ln.indexOf(vn)&&Network.sendKey(vn,!0))},xn=function(vn){3!=game.myType||"STRAFELEFT"!==vn&&"STRAFERIGHT"!==vn?-1!==dn.indexOf(vn)&&Network.sendKey(vn,!1):(xn("STRAFELEFT"===vn?"LEFT":"RIGHT"),Xt["STRAFERIGHT"===vn?"STRAFELEFT":"STRAFERIGHT"]||xn("SPECIAL"))}}();class Bt{constructor(Xt,Yt){this.id=Xt.id,this.status=Xt.status,this.level=null==Xt.level||0==Xt.level?null:Xt.level,this.reel=1==Xt.reel,this.name=Xt.name,this.type=Xt.type,this.team=Xt.team,this.pos=new Vector(Xt.posX,Xt.posY),this.lowResPos=new Vector(Xt.posX,Xt.posY),this.speed=Vector.zero(),this.speedupgrade=0,this.rot=Xt.rot,this.flag=Xt.flag,this.speedLength=0,this.sprites={},this.randomness=Tools.rand(0,1e5),this.keystate={},this.lastTick=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.stealthed=!1,this.alpha=1,this.scale=1,this.powerups={shield:!1,rampage:!1},this.powerupsShown={shield:!1,rampage:!1},this.powerupActive=!1,this.render=!0,this.hidden=!1,this.culled=!1,this.timedout=!1,this.reducedFactor=!1,this.lastPacket=game.timeNetwork,this.state={thrustLevel:0,thrustDir:0,bubble:!1,bubbleProgress:0,bubbleFade:0,bubbleTime:0,bubbleTextWidth:0,hasBadge:!1,badge:0,stealthLevel:0,scaleLevel:1,powerupAngle:0,powerupFade:0,powerupFadeState:0,lastBounceSound:0},this.setupGraphics(),0==this.status?(Tools.decodeUpgrades(this,Xt.upgrades),this.updatePowerups()):(this.hidden=!0,this.me()&&UI.visibilityHUD(!1)),this.reel?(this._prevPos=null,this._offset=null):this.visibilityUpdate(),(!Yt&&this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.me()&&(game.myType=Xt.type,UI.aircraftSelected(Xt.type))}setupGraphics(Xt){var Yt=null;switch(this.me()&&(Yt={layer:"aircraftme"}),this.sprites.powerup=Textures.init("powerupShield",{visible:!1,alpha:.75}),this.sprites.powerupCircle=Textures.init("powerupCircle",{visible:!1,alpha:.75}),this.type){case 1:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipRaptor",Yt),this.sprites.shadow=Textures.init("shipRaptorShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster=Textures.init("shipRaptorThruster"),this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall"),this.sprites.thrusterShadow=Textures.init("thrusterShadow");break;case 2:this.state.baseScale=.35,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipSpirit",Yt),this.sprites.shadow=Textures.init("shipSpiritShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case 3:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipComanche",Yt),this.sprites.rotor=Textures.init("shipComancheRotor",Yt),this.sprites.shadow=Textures.init("shipComancheShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.rotorShadow=Textures.init("shipComancheRotorShadow",{scale:2*this.state.baseScale*(2.4/config.shadowScaling)});break;case 4:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipTornado",Yt),this.sprites.shadow=Textures.init("shipTornadoShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case 5:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipProwler",Yt),this.sprites.shadow=Textures.init("shipProwlerShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");}if(this.reel||Xt||(this.setupNameplate(),this.setupChatBubbles(),null!=this.level&&this.setupLevelPlate()),config.debug.collisions){this.col=new PIXI.Graphics;for(var Ht of config.ships[this.type].collisions)this.col.beginFill(16777215,.2),this.col.drawCircle(Ht[0],Ht[1],Ht[2]),this.col.endFill();game.graphics.layers.explosions.addChild(this.col)}}reteam(Xt){this.team=Xt,this.sprites.name.style=new PIXI.TextStyle(this.nameplateTextStyle()),UI.changeMinimapTeam(this.id,this.team)}nameplateTextStyle(){if(2==game.gameType)var Xt=1==this.team?"#4076E2":"#EA4242";else Xt=this.team==game.myTeam?"#FFFFFF":"#FFEC52";return{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:config.playerNameSize||"28px",fill:Xt,dropShadow:!0,dropShadowBlur:10,dropShadowDistance:0,padding:4}}setupNameplate(){var Xt="";2==game.gameType&&(Xt="  \u25A0"),this.sprites.name=new PIXI.Text(this.name+Xt,this.nameplateTextStyle()),this.sprites.name.scale.set(.5,.5),this.sprites.flag=Textures.sprite("flag_"+this.flag),this.sprites.flag.scale.set(.4,.4),this.sprites.flag.anchor.set(.5,.5),this.sprites.badge=Textures.sprite("badge_gold"),this.sprites.badge.scale.set(.3),this.sprites.badge.visible=!1,game.graphics.layers.playernames.addChild(this.sprites.badge),game.graphics.layers.playernames.addChild(this.sprites.flag),game.graphics.layers.playernames.addChild(this.sprites.name)}setupChatBubbles(){this.sprites.bubble=new PIXI.Container,this.sprites.bubbleLeft=Graphics.initSprite("chatbubbleleft",this.sprites.bubble,{scale:.5}),this.sprites.bubbleRight=Graphics.initSprite("chatbubbleright",this.sprites.bubble,{scale:.5}),this.sprites.bubbleCenter=Graphics.initSprite("chatbubblecenter",this.sprites.bubble,{scale:.5}),this.sprites.bubblePoint=Graphics.initSprite("chatbubblepoint",this.sprites.bubble,{scale:.5}),this.sprites.emote=Graphics.initSprite("emote_tf",this.sprites.bubble,{scale:.6,anchor:[0.5,0.5]}),this.sprites.bubbleText=new PIXI.Text("a",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:"12px",fill:"white"}),this.sprites.bubble.addChild(this.sprites.bubbleText),this.sprites.bubble.visible=!1,this.sprites.bubble.pivot.set(.5,34),game.graphics.layers.bubbles.addChild(this.sprites.bubble)}visibilityUpdate(Xt){this.culled=!Graphics.inScreen(this.pos,128);var Yt=!(this.hidden||this.culled||this.timedout);if(Xt||this.render!=Yt){switch(this.sprites.sprite.visible=Yt,this.sprites.shadow.visible=Yt,this.sprites.flag.visible=Yt,this.sprites.name.visible=Yt,null!=this.sprites.level&&(this.sprites.level.visible=Yt,this.sprites.levelBorder.visible=Yt),this.sprites.badge.visible=this.state.hasBadge&&Yt,this.sprites.powerup.visible=this.powerupActive&&Yt,this.sprites.powerupCircle.visible=this.powerupActive&&Yt,this.type){case 1:this.sprites.thruster.visible=Yt,this.sprites.thrusterGlow.visible=Yt,this.sprites.thrusterShadow.visible=Yt;break;case 2:case 4:case 5:this.sprites.thruster1.visible=Yt,this.sprites.thruster1Glow.visible=Yt,this.sprites.thruster1Shadow.visible=Yt,this.sprites.thruster2.visible=Yt,this.sprites.thruster2Glow.visible=Yt,this.sprites.thruster2Shadow.visible=Yt;break;case 3:this.sprites.rotor.visible=Yt,this.sprites.rotorShadow.visible=Yt;}this.render=Yt,Yt||Sound.clearThruster(this.id)}}stealth(Xt){this.lastPacket=game.timeNetwork,this.energy=Xt.energy,this.energyRegen=Xt.energyRegen,Xt.state?(this.stealthed=!0,this.state.stealthLevel=0,this.team!=game.myTeam&&(this.keystate.LEFT&&delete this.keystate.LEFT,this.keystate.RIGHT&&delete this.keystate.RIGHT)):this.unstealth()}unstealth(){this.stealthed=!1,this.state.stealthLevel=0,this.opacity(1)}opacity(Xt){this.alpha=Xt,this.sprites.sprite.alpha=Xt,this.sprites.shadow.alpha=Xt,this.sprites.flag.alpha=Xt,this.sprites.name.alpha=Xt,this.sprites.badge.alpha=Xt,this.sprites.powerup.alpha=.75*Xt,this.sprites.powerupCircle.alpha=.75*Xt,null!=this.sprites.level&&(this.sprites.level.alpha=Xt,this.sprites.levelBorder.alpha=.4*Xt),5==this.type&&(this.sprites.thruster1.alpha=Xt,this.sprites.thruster1Glow.alpha=Xt,this.sprites.thruster2.alpha=Xt,this.sprites.thruster2Glow.alpha=Xt)}kill(Xt){if(this.status=1,this.keystate={},this.pos.x=Xt.posX,this.pos.y=Xt.posY,this.speed=Vector.zero(),this.me()&&UI.resetPowerups(),this.resetPowerups(),this.hidden=!0,this.visibilityUpdate(),this.stealthed&&this.unstealth(),!this.culled&&!0!==Xt.spectate){switch(this.type){case 1:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3));break;case 2:Particles.explosion(this.pos.clone(),Tools.rand(2,2.5),Tools.randInt(4,7));break;case 3:case 4:case 5:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3));}Graphics.shakeCamera(this.pos,this.me()?20:10),Sound.clearThruster(this.id),Sound.playerKill(this)}}me(){return game.myID==this.id}destroy(Xt){var Yt=this.me()?game.graphics.layers.aircraftme:game.graphics.layers.aircraft;switch(Yt.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.powerup.destroy(),this.sprites.powerupCircle.destroy(),this.type){case 1:game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.thrusters.removeChild(this.sprites.thrusterGlow),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.thrusterShadow.destroy();break;case 2:case 4:case 5:game.graphics.layers.thrusters.removeChild(this.sprites.thruster1,this.sprites.thruster2),game.graphics.layers.thrusters.removeChild(this.sprites.thruster1Glow,this.sprites.thruster2Glow),this.sprites.thruster1.destroy(),this.sprites.thruster2.destroy(),this.sprites.thruster1Glow.destroy(),this.sprites.thruster2Glow.destroy(),this.sprites.thruster1Shadow.destroy(),this.sprites.thruster2Shadow.destroy();break;case 3:Yt.removeChild(this.sprites.rotor),this.sprites.rotor.destroy(),game.graphics.layers.shadows.removeChild(this.sprites.rotorShadow),this.sprites.rotorShadow.destroy();}Xt&&!this.reel&&(game.graphics.layers.playernames.removeChild(this.sprites.badge,this.sprites.name,this.sprites.flag),null!=this.sprites.level&&(game.graphics.layers.playernames.removeChild(this.sprites.level,this.sprites.levelBorder),this.sprites.level.destroy(),this.sprites.levelBorder.destroy()),game.graphics.layers.bubbles.removeChild(this.sprites.bubble),this.sprites.badge.destroy(),this.sprites.name.destroy(),this.sprites.flag.destroy(),this.sprites.bubble.destroy({children:!0}))}sayBubble(Xt){this.state.bubbleTime=game.time,this.state.bubbleFade=0,this.state.bubble||(this.state.bubble=!0,this.state.bubbleProgress=0,this.sprites.bubble.visible=!0,this.sprites.bubble.alpha=0,this.sprites.bubble.scale.set(0,0)),this.sprites.bubble.cacheAsBitmap=!1;var Yt=UI.isEmote(Xt.text,!0);if(Yt){this.sprites.bubbleText.visible=!1,this.sprites.emote.texture=Textures.get("emote_"+Yt),this.sprites.emote.visible=!0;var Ht=26;this.sprites.emote.position.set(0,0)}else this.sprites.bubbleText.visible=!0,this.sprites.emote.visible=!1,this.sprites.bubbleText.text=Xt.text,Ht=this.sprites.bubbleText.width,this.sprites.bubbleText.position.set(-Ht/2,-7);this.sprites.bubbleLeft.position.set(-Ht/2-16,-21),this.sprites.bubbleRight.position.set(Ht/2+8,-21),this.sprites.bubbleCenter.position.set(-Ht/2-9,-21),this.sprites.bubbleCenter.scale.set(Ht/82+18/82,.5),this.sprites.bubblePoint.position.set(-9,18),this.sprites.bubble.cacheAsBitmap=!0,this.state.bubbleTextWidth=Ht}networkKey(Xt,Yt){this.lastPacket=game.timeNetwork,1==this.status&&this.revive(),null!=Yt.posX&&(this.reducedFactor=Tools.reducedFactor(),this.pos.x=Yt.posX,this.pos.y=Yt.posY,this.rot=Yt.rot,this.speed.x=Yt.speedX,this.speed.y=Yt.speedY);var Ht=this.stealthed;null!=Yt.keystate&&Tools.decodeKeystate(this,Yt.keystate),null!=Yt.upgrades&&(Tools.decodeUpgrades(this,Yt.upgrades),this.updatePowerups()),null!=Yt.energy&&(this.energy=Yt.energy,this.energyRegen=Yt.energyRegen),null!=Yt.boost&&(this.boost=Yt.boost),this.team!=game.myTeam&&(this.stealthed||Ht&&!this.stealthed)&&this.unstealth(),this.me()||!Ht||this.stealthed||this.unstealth(),Yt.c==Network.SERVERPACKET.EVENT_BOUNCE&&300<game.time-this.state.lastBounceSound&&(this.state.lastBounceSound=game.time,Sound.playerImpact(this.pos,this.type,this.speed.length()/config.ships[this.type].maxSpeed))}updateLevel(Xt){this.me()&&(1==Xt.type&&Games.showLevelUP(Xt.level),UI.updateMyLevel(Xt.level)),this.level=Xt.level,this.setupLevelPlate()}setupLevelPlate(){null==this.sprites.level?(this.sprites.level=new PIXI.Text(this.level+"",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:"28px",fill:"rgb(200, 200, 200)",dropShadow:!0,dropShadowBlur:6,dropShadowDistance:0,padding:4}),this.sprites.level.scale.set(.5,.5),this.sprites.levelBorder=Textures.sprite("levelborder"),this.sprites.levelBorder.alpha=.4,game.graphics.layers.playernames.addChild(this.sprites.levelBorder),game.graphics.layers.playernames.addChild(this.sprites.level)):this.sprites.level.text=this.level+"",this.sprites.levelBorder.scale.set((this.sprites.level.width+10)/32,.65),this.sprites.level.visible=this.render,this.sprites.levelBorder.visible=this.render}powerup(Xt){UI.addPowerup(Xt.type,Xt.duration)}resetPowerups(){this.powerupActive&&(this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1),this.powerups.shield=!1,this.powerupsShown.shield=!1,this.powerups.rampage=!1,this.powerupsShown.rampage=!1,this.powerupActive=!1,this.state.powerupFade=0,this.state.powerupFadeState=0}updatePowerups(){var Xt=!1;this.powerups.shield!=this.powerupsShown.shield&&(this.powerupsShown.shield=this.powerups.shield,this.powerups.shield&&(this.sprites.powerup.texture=Textures.get("powerup_shield"),this.sprites.powerupCircle.tint=16777215),Xt=!0),this.powerups.rampage!=this.powerupsShown.rampage&&(this.powerupsShown.rampage=this.powerups.rampage,this.powerups.rampage&&(this.sprites.powerup.texture=Textures.get("powerup_rampage"),this.sprites.powerupCircle.tint=16712448),Xt=!0),Xt&&(this.powerupActive=this.powerups.shield||this.powerups.rampage,this.powerupActive?(this.state.powerupFade=0,this.state.powerupFadeState=0,this.sprites.powerup.visible=!0,this.sprites.powerupCircle.visible=!0):(this.powerupActive=!0,this.state.powerupFade=0,this.state.powerupFadeState=1))}impact(Xt,Yt,Ht,Wt){this.health=Ht,this.healthRegen=Wt,this.stealthed&&this.unstealth(),200!=Xt&&Mobs.explosion(Yt,Xt),this.me()&&0==this.status&&Graphics.shakeCamera(Yt,8)}changeType(Xt){this.type!=Xt.type&&(this.destroy(!1),this.type=Xt.type,this.setupGraphics(!0),this.visibilityUpdate(!0))}respawn(Xt){this.lastPacket=game.timeNetwork,this.status=0,this.keystate={},this.pos.x=Xt.posX,this.pos.y=Xt.posY,this.rot=Xt.rot,this.speed.x=0,this.speed.y=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.state.thrustLevel=0,this.state.thrustDir=0,this.hidden=!1,this.timedout=!1,this.visibilityUpdate(),this.me()&&UI.resetPowerups(),Tools.decodeUpgrades(this,Xt.upgrades),this.updatePowerups(),(this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.stealthed&&this.unstealth(),this.me()&&(game.myType=this.type,game.spectatingID=null,UI.aircraftSelected(this.type),UI.visibilityHUD(!0),UI.hideSpectator()),this.updateGraphics(1),Sound.playerRespawn(this)}revive(){this.status=0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.hidden=!1,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.stealthed&&this.unstealth()}changeFlag(Xt){this.flag=Xt.flag,this.sprites.flag.texture=Textures.get("flag_"+Xt.flag)}changeBadge(Xt){this.sprites.badge.texture=Textures.get(Xt)}updateNameplate(){if(!this.reel){var Xt=(this.sprites.name.width+this.sprites.flag.width+10)/2,Yt=this.pos.x-Xt+(this.state.hasBadge?12:0)-(null==this.level?0:this.sprites.level.width/2+8),Ht=this.pos.y+this.state.nameplateDist*this.scale;this.sprites.name.position.set(Yt+40,Ht),this.sprites.flag.position.set(Yt+15,Ht+10),null!=this.level&&(this.sprites.level.position.set(Yt+2*Xt+13,Ht+2),this.sprites.levelBorder.position.set(Yt+2*Xt+7.75,Ht-.5)),this.state.hasBadge&&this.sprites.badge.position.set(Yt-28,Ht)}}updateBubble(){this.state.bubbleProgress+=.015*game.timeFactor,1<=this.state.bubbleProgress&&(this.state.bubbleProgress=1),4e3<game.time-this.state.bubbleTime?(this.state.bubbleFade+=.08*game.timeFactor,1<=this.state.bubbleFade&&(this.state.bubbleFade=1),this.sprites.bubble.scale.set(1+.2*this.state.bubbleFade),this.sprites.bubble.alpha=1*(1-this.state.bubbleFade),1<=this.state.bubbleFade&&(this.state.bubble=!1,this.sprites.bubble.visible=!1)):(this.sprites.bubble.scale.set(Tools.easing.outElastic(this.state.bubbleProgress,.5)),this.sprites.bubble.alpha=1);var Xt=0==(this.state.bubbleTextWidth+game.screenX)%2?.5:0,Yt=0==game.screenY%2?0:.5,Ht=this.state.nameplateDist*this.scale;this.powerupActive&&(Ht+=60),this.sprites.bubble.position.set(this.pos.x*game.scale+Xt,(this.pos.y-Ht)*game.scale+Yt)}detectTimeout(){if(!this.me()){var Xt=this.timedout;this.timedout=!game.lagging&&3e3<game.timeNetwork-this.lastPacket,this.timedout&&!Xt&&(this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=Vector.zero(),this.keystate={},this.resetPowerups())}}leaveHorizon(){this.me()||this.timedout||(this.lastPacket=-1e4,this.timedout=!0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=Vector.zero(),this.keystate={},this.resetPowerups())}update(Xt){if(this.reel)this.clientCalcs(Xt);else{if(this.detectTimeout(),this.visibilityUpdate(),!this.render)return this.health+=Xt*this.healthRegen,void(1<=this.health&&(this.health=1));if(!(!1!==this.reducedFactor&&(Xt-=this.reducedFactor,this.reducedFactor=!1,0>=Xt))){var zt=.51<Xt?Math.round(Xt):1,Vt=Xt/zt,qt=2*Math.PI,Kt=this.boost?1.5:1,Yt,Ht,Wt,jt;for(Yt=0;Yt<zt;Yt++){this.energy+=Vt*this.energyRegen,1<=this.energy&&(this.energy=1),this.health+=Vt*this.healthRegen,1<=this.health&&(this.health=1),jt=-999,this.strafe?(this.keystate.LEFT&&(jt=this.rot-.5*Math.PI),this.keystate.RIGHT&&(jt=this.rot+.5*Math.PI)):(this.keystate.LEFT&&(this.rot+=-Vt*config.ships[this.type].turnFactor),this.keystate.RIGHT&&(this.rot+=Vt*config.ships[this.type].turnFactor)),Ht=this.speed.x,Wt=this.speed.y,this.keystate.UP?-999==jt?jt=this.rot:jt+=Math.PI*(this.keystate.RIGHT?-.25:.25):this.keystate.DOWN&&(-999==jt?jt=this.rot+Math.PI:jt+=Math.PI*(this.keystate.RIGHT?.25:-.25)),-999!==jt&&(this.speed.x+=Math.sin(jt)*config.ships[this.type].accelFactor*Vt*Kt,this.speed.y-=Math.cos(jt)*config.ships[this.type].accelFactor*Vt*Kt);var Qt=this.speed.length(),Jt=config.ships[this.type].maxSpeed*Kt*config.upgrades.speed.factor[this.speedupgrade],Zt=config.ships[this.type].minSpeed;this.powerups.rampage&&(Jt*=.75),this.flagspeed&&(Jt=5),Qt>Jt?this.speed.multiply(Jt/Qt):this.speed.x>Zt||this.speed.x<-Zt||this.speed.y>Zt||this.speed.y<-Zt?(this.speed.x*=1-config.ships[this.type].brakeFactor*Vt,this.speed.y*=1-config.ships[this.type].brakeFactor*Vt):(this.speed.x=0,this.speed.y=0),this.pos.x+=Vt*Ht+.5*(this.speed.x-Ht)*Vt*Vt,this.pos.y+=Vt*Wt+.5*(this.speed.y-Wt)*Vt*Vt,this.clientCalcs(Vt)}this.rot=(this.rot%qt+qt)%qt,-1==game.gameType?(-16384>this.pos.x&&(this.pos.x+=32768),16384<this.pos.x&&(this.pos.x-=32768),-8192>this.pos.y&&(this.pos.y+=16384),8192<this.pos.y&&(this.pos.y-=16384)):(-16352>this.pos.x&&(this.pos.x=-16352),16352<this.pos.x&&(this.pos.x=16352),-8160>this.pos.y&&(this.pos.y=-8160),8160<this.pos.y&&(this.pos.y=8160)),Sound.updateThruster(0,this),SWAM&&SWAM.OnPlayerUpdate(this,Xt)}}}clientCalcs(Xt){switch(this.type){case 1:case 2:case 4:case 5:var Yt=!1,Ht=!1,Wt=this.boost?1.5:1;!1!==(Yt=this.keystate.LEFT?.3:this.keystate.RIGHT?-.3:0)&&(this.state.thrustDir=Tools.converge(this.state.thrustDir,Yt,.1*Xt)),!1!==(Ht=this.keystate.UP?1:this.keystate.DOWN?-1:0)&&(this.state.thrustLevel=Tools.converge(this.state.thrustLevel,Ht*Wt,.2*Xt));break;case 3:this.state.thrustDir+=(.2+this.speed.length()/50)*Xt;}this.culled||this.render&&(!this.stealthed&&.4>this.health&&Particles.planeDamage(this),!this.stealthed&&.2>this.health&&Particles.planeDamage(this),this.boost&&Particles.planeBoost(this,0<=Ht),5==this.type&&this.stealthed&&(this.state.stealthLevel+=.03*Xt,this.state.stealthLevel=Tools.clamp(this.state.stealthLevel,0,this.team==game.myTeam?.5:1),this.opacity(1-this.state.stealthLevel)),this.state.scaleLevel+=.005*Xt,1<=this.state.scaleLevel?(this.state.scaleLevel=1,this.scale=1):this.scale=Tools.easing.outElastic(this.state.scaleLevel,.5),this.powerupActive&&(this.state.powerupAngle+=.075*Xt,0==this.state.powerupFadeState?(this.state.powerupFade+=.05*Xt,1<=this.state.powerupFade&&(this.state.powerupFade=1)):(this.state.powerupFade+=.05*Xt,1<=this.state.powerupFade&&(this.powerupActive=!1,this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1))))}updateGraphics(){var Yt=Tools.oscillator(.025,1e3,this.randomness)*this.scale,Ht=1.5*this.state.thrustLevel,Wt=this.rot,jt=Graphics.shadowCoords(this.pos);if(Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,Wt,Yt*this.state.baseScale,Yt*this.state.baseScale),Graphics.transform(this.sprites.shadow,jt.x,jt.y,Wt,this.state.baseScale*(2.4/config.shadowScaling)*this.scale,this.state.baseScale*(2.4/config.shadowScaling)*this.scale),this.powerupActive){var zt=.35*(0==this.state.powerupFadeState?2*(1-this.state.powerupFade)+1:1-this.state.powerupFade)*Tools.oscillator(.075,100,this.randomness),Vt=.75*(0==this.state.powerupFadeState?Tools.clamp(2*this.state.powerupFade,0,1):Tools.clamp(1-1.3*this.state.powerupFade,0,1))*this.alpha;Graphics.transform(this.sprites.powerup,this.pos.x,this.pos.y-80,0,zt,zt,Vt),Graphics.transform(this.sprites.powerupCircle,this.pos.x,this.pos.y-80,this.state.powerupAngle,1.35*zt,1.35*zt,Vt)}var qt=Tools.oscillator(.1,.5,this.randomness),Kt=.01>Math.abs(this.state.thrustLevel)?0:this.state.thrustLevel/2+(0<this.state.thrustLevel?.5:-.5),Qt=Tools.clamp(2*Math.abs(this.state.thrustLevel)-.1,0,1);switch(this.type){case 1:Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-Wt)*(20*Yt),this.pos.y+Math.cos(-Wt)*(20*Yt),Wt+(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale,.5*qt*Kt*this.scale,Qt),Graphics.transform(this.sprites.thrusterShadow,jt.x+Math.sin(-Wt)*(20*Yt)/config.shadowScaling,jt.y+Math.cos(-Wt)*(20*Yt)/config.shadowScaling,Wt+(0<this.state.thrustLevel?this.state.thrustDir:0),.4*qt*Kt*this.scale*(4/config.shadowScaling),.5*qt*Kt*this.scale*(4/config.shadowScaling),Qt/2.5),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-Wt-.5*this.state.thrustDir)*(40*Yt),this.pos.y+Math.cos(-Wt-.5*this.state.thrustDir)*(40*Yt),null,1.5*Ht*this.scale,1*Ht*this.scale,.3*this.state.thrustLevel);break;case 2:0>this.state.thrustLevel&&(qt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-Wt-.5)*(32*Yt),this.pos.y+Math.cos(-Wt-.5)*(32*Yt),Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*qt*Kt*this.scale,.6*qt*Kt*this.scale,Qt),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.5-Wt)*(32*Yt),this.pos.y+Math.cos(.5-Wt)*(32*Yt),Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*qt*Kt*this.scale,.6*qt*Kt*this.scale,Qt),Graphics.transform(this.sprites.thruster1Shadow,jt.x+Math.sin(-Wt-.5)*(32*Yt)/config.shadowScaling,jt.y+Math.cos(-Wt-.5)*(32*Yt)/config.shadowScaling,Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.5*qt*Kt*this.scale*(4/config.shadowScaling),.6*qt*Kt*this.scale*(4/config.shadowScaling),Qt/2.5),Graphics.transform(this.sprites.thruster2Shadow,jt.x+Math.sin(.5-Wt)*(32*Yt)/config.shadowScaling,jt.y+Math.cos(.5-Wt)*(32*Yt)/config.shadowScaling,Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.5*qt*Kt*this.scale*(4/config.shadowScaling),.6*qt*Kt*this.scale*(4/config.shadowScaling),Qt/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-Wt-.3)*(50*Yt),this.pos.y+Math.cos(-Wt-.3)*(50*Yt),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.3-Wt)*(50*Yt),this.pos.y+Math.cos(.3-Wt)*(50*Yt),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel);break;case 3:Graphics.transform(this.sprites.rotor,this.pos.x,this.pos.y,this.state.thrustDir,2*(Yt*this.state.baseScale),2*(Yt*this.state.baseScale),.8),Graphics.transform(this.sprites.rotorShadow,jt.x,jt.y,this.state.thrustDir,2*(this.state.baseScale*(2.4/config.shadowScaling)*this.scale),2*(this.state.baseScale*(2.4/config.shadowScaling)*this.scale));break;case 4:0>this.state.thrustLevel&&(qt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-Wt-.15)*(28*Yt),this.pos.y+Math.cos(-Wt-.15)*(28*Yt),Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale,.5*qt*Kt*this.scale,Qt),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.15-Wt)*(28*Yt),this.pos.y+Math.cos(.15-Wt)*(28*Yt),Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale,.5*qt*Kt*this.scale,Qt),Graphics.transform(this.sprites.thruster1Shadow,jt.x+Math.sin(-Wt-.15)*(28*Yt)/config.shadowScaling,jt.y+Math.cos(-Wt-.15)*(28*Yt)/config.shadowScaling,Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale*(4/config.shadowScaling),.5*qt*Kt*this.scale*(4/config.shadowScaling),Qt/2.5),Graphics.transform(this.sprites.thruster2Shadow,jt.x+Math.sin(.15-Wt)*(28*Yt)/config.shadowScaling,jt.y+Math.cos(.15-Wt)*(28*Yt)/config.shadowScaling,Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale*(4/config.shadowScaling),.5*qt*Kt*this.scale*(4/config.shadowScaling),Qt/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-Wt-.2)*(45*Yt),this.pos.y+Math.cos(-Wt-.2)*(45*Yt),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-Wt)*(45*Yt),this.pos.y+Math.cos(.2-Wt)*(45*Yt),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel);break;case 5:0>this.state.thrustLevel&&(qt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-Wt-.35)*(20*Yt),this.pos.y+Math.cos(-Wt-.35)*(20*Yt),Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale,.4*qt*Kt*this.scale,Qt*this.alpha),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.35-Wt)*(20*Yt),this.pos.y+Math.cos(.35-Wt)*(20*Yt),Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale,.4*qt*Kt*this.scale,Qt*this.alpha),Graphics.transform(this.sprites.thruster1Shadow,jt.x+Math.sin(-Wt-.35)*(20*Yt)/config.shadowScaling,jt.y+Math.cos(-Wt-.35)*(20*Yt)/config.shadowScaling,Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*qt*Kt*this.scale*(4/config.shadowScaling),.4*qt*Kt*this.scale*(4/config.shadowScaling),Qt*this.alpha/2.5),Graphics.transform(this.sprites.thruster2Shadow,jt.x+Math.sin(.35-Wt)*(20*Yt)/config.shadowScaling,jt.y+Math.cos(.35-Wt)*(20*Yt)/config.shadowScaling,Wt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*qt*Kt*this.scale*(4/config.shadowScaling),.4*qt*Kt*this.scale*(4/config.shadowScaling),Qt*this.alpha/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-Wt-.2-0*this.state.thrustDir)*(35*Yt),this.pos.y+Math.cos(-Wt-.2-0*this.state.thrustDir)*(35*Yt),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-Wt-0*this.state.thrustDir)*(35*Yt),this.pos.y+Math.cos(.2-Wt-0*this.state.thrustDir)*(35*Yt),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha);}this.updateNameplate(),this.state.bubble&&this.updateBubble(),config.debug.collisions&&this.col&&(this.col.position.set(this.pos.x,this.pos.y),this.col.rotation=this.rot)}}!function(){var Xt={},Yt=[-1,-1,-1],Ht=["badge_gold","badge_silver","badge_bronze"];Players.update=function(){var Wt,jt;for(Wt in Xt)0==(jt=Xt[Wt]).status&&(jt.update(game.timeFactor),jt.updateGraphics(game.timeFactor));if(null!=game.spectatingID){if(null==(jt=Xt[game.spectatingID]))return;if(3e3<game.timeNetwork-jt.lastPacket)return;Graphics.setCamera(jt.pos.x,jt.pos.y)}else if(null!=game.myID){if(null==(jt=Xt[game.myID]))return;0==jt.status&&UI.updateHUD(jt.health,jt.energy,jt),Graphics.setCamera(jt.pos.x,jt.pos.y)}},Players.add=function(Wt,jt){Xt[Wt.id]=new Bt(Wt,jt)},Players.get=function(Wt){return Xt[Wt]},Players.getMe=function(){return Xt[game.myID]},Players.amIAlive=function(){var Wt=Players.getMe();return null!=Wt&&0==Wt.status},Players.getIDs=function(){var Wt={};for(var jt in Xt)Wt[jt]=!0;return Wt},Players.getByName=function(Wt){for(var jt in Xt)if(Xt[jt].name===Wt)return Xt[jt];return null},Players.network=function(Wt,jt){var zt=Xt[jt.id];null!=zt&&(Wt===Network.SERVERPACKET.PLAYER_UPDATE||Wt===Network.SERVERPACKET.PLAYER_FIRE||Wt===Network.SERVERPACKET.EVENT_BOOST||Wt===Network.SERVERPACKET.EVENT_BOUNCE?zt.networkKey(Wt,jt):Wt===Network.SERVERPACKET.CHAT_SAY?zt.sayBubble(jt):Wt===Network.SERVERPACKET.PLAYER_RESPAWN?zt.respawn(jt):Wt===Network.SERVERPACKET.PLAYER_FLAG?(jt.id==game.myID&&(game.myFlag=game.lastFlagSet,Tools.setSettings({flag:game.lastFlagSet})),zt.changeFlag(jt)):void 0)},Players.stealth=function(Wt){var jt=Xt[Wt.id];null!=jt&&jt.stealth(Wt)},Players.leaveHorizon=function(Wt){var jt=Xt[Wt.id];null!=jt&&jt.leaveHorizon()},Players.updateBadges=function(Wt){for(var zt=Tools.clamp(Wt.length,0,3),Vt=[],qt=0,jt;qt<zt;qt++)null!=(jt=Xt[Wt[qt].id])&&(Vt.push(jt.id),jt.state.badge!=qt&&(jt.state.badge=qt,jt.changeBadge(Ht[qt])),jt.state.hasBadge||(jt.state.hasBadge=!0,jt.render&&(jt.sprites.badge.visible=!0)));for(var Kt=0;Kt<Yt.length;Kt++)if(-1==Vt.indexOf(Yt[Kt])){if(null==(jt=Xt[Yt[Kt]]))continue;jt.state.hasBadge&&(jt.state.hasBadge=!1,jt.sprites.badge.visible=!1)}Yt=Vt},Players.chat=function(Wt){var jt=Xt[Wt.id];null!=jt&&UI.addChatLine(jt,Wt.text,0)},Players.teamChat=function(Wt){var jt=Xt[Wt.id];null!=jt&&UI.addChatLine(jt,Wt.text,3)},Players.votemutePass=function(Wt){var jt=Xt[Wt.id];null!=jt&&UI.chatVotemutePass(jt)},Players.whisper=function(Wt){var jt;if(Wt.to==game.myID){if(null==(zt=Xt[Wt.from]))return;jt=2}else{var zt;if(null==(zt=Xt[Wt.to]))return;jt=1}UI.addChatLine(zt,Wt.text,jt)},Players.impact=function(Wt){for(var jt=0,zt;jt<Wt.players.length;jt++)zt=Xt[Wt.players[jt].id],null!=zt&&zt.impact(Wt.type,new Vector(Wt.posX,Wt.posY),Wt.players[jt].health,Wt.players[jt].healthRegen)},Players.powerup=function(Wt){Players.getMe().powerup(Wt)},Players.updateLevel=function(Wt){var jt=Xt[Wt.id];null!=jt&&jt.updateLevel(Wt)},Players.reteam=function(Wt){var jt=Xt[Wt.id];null!=jt&&jt.reteam(Wt.team)},Players.kill=function(Wt){var jt=Xt[Wt.id];if(null!=jt)if(0!=Wt.killer||0!=Wt.posX||0!=Wt.posY){if(jt.kill(Wt),jt.me()){UI.visibilityHUD(!1);var zt=Xt[Wt.killer];null!=zt&&UI.killedBy(zt),UI.showSpectator("<div onclick=\"Network.spectateNext()\" class=\"spectate\">ENTER SPECTATOR MODE</div>")}else Wt.killer===game.myID&&UI.killed(jt);jt.me()||jt.id!=game.spectatingID||3!=game.gameType||Games.spectatorSwitch(jt.id)}else!function(Vt){Vt.kill({posX:0,posY:0,spectate:!0}),UI.visibilityHUD(!1)}(jt)},Players.destroy=function(Wt){Wt==game.spectatingID&&($("#spectator-tag").html("Spectating"),Games.spectatorSwitch(Wt));var jt=Xt[Wt];null!=jt&&(jt.destroy(!0),delete Xt[Wt])},Players.changeType=function(Wt){var jt=Xt[Wt.id];null!=jt&&jt.changeType(Wt)},Players.count=function(){var jt=0,zt=0,Wt;for(Wt in Xt)jt++,Xt[Wt].culled&&zt++;return[jt-zt,jt]},Players.wipe=function(){for(var Wt in Xt)Xt[Wt].destroy(!0),delete Xt[Wt]}}();class Gt{constructor(Xt){this.id=Xt.id,this.type=Xt.type,this.pos=new Vector(Xt.posX,Xt.posY),this.spriteRot=0,this.missile=1==this.type||2==this.type||3==this.type||5==this.type||6==this.type||7==this.type,this.missile&&Xt.c!==Network.SERVERPACKET.MOB_UPDATE_STATIONARY?(this.speed=new Vector(Xt.speedX,Xt.speedY),this.accel=new Vector(Xt.accelX,Xt.accelY),this.maxSpeed=Xt.maxSpeed,this.exhaust=config.mobs[this.type].exhaust,this.lastAccelX=0,this.lastAccelY=0,this.stationary=!1,this.spriteRot=this.speed.angle()+Math.PI):this.stationary=!0,this.sprites={},this.state={inactive:!1,despawnTicker:0,despawnType:0,baseScale:1,baseScaleShadow:1,luminosity:1},this.randomness=Tools.rand(0,1e5),this.culled=!1,this.visibility=!0,this.reducedFactor=!1,this.forDeletion=!1,this.spawnTime=game.time,this.lastPacket=game.timeNetwork,this.setupSprite()}setupSprite(){switch(4!=this.type&&8!=this.type&&9!=this.type&&(this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall",{layer:"projectiles"}),this.sprites.smokeGlow=Textures.init("smokeGlow",{layer:"projectiles"}),this.sprites.thruster=Textures.init("missileThruster")),this.type){case 1:case 5:case 6:case 7:this.sprites.sprite=Textures.init("missile"),this.sprites.shadow=Textures.init("missileShadow",{scale:[0.25,0.2]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=.2,this.sprites.smokeGlow.scale.set(1.5,3),this.sprites.smokeGlow.alpha=.75;break;case 2:this.sprites.sprite=Textures.init("missileFat"),this.sprites.shadow=Textures.init("missileShadow",{scale:[0.5,0.25]}),this.sprites.thrusterGlow.scale.set(4,3),this.sprites.thrusterGlow.alpha=.25,this.sprites.smokeGlow.scale.set(2.5,3),this.sprites.smokeGlow.alpha=.75;break;case 3:this.sprites.sprite=Textures.init("missileSmall",{scale:[0.28,0.2]}),this.sprites.shadow=Textures.init("missileShadow",{scale:[0.18,0.14]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=.2,this.sprites.smokeGlow.scale.set(1,2),this.sprites.smokeGlow.alpha=.75;break;case 4:case 8:case 9:var Xt="crateUpgrade";8==this.type?Xt="crateShield":9==this.type&&(Xt="crateRampage"),this.state.baseScale=.33,this.state.baseScaleShadow=.33*(2.4/config.shadowScaling),this.sprites.sprite=Textures.init(Xt,{scale:this.state.baseScale}),this.sprites.shadow=Textures.init("crateShadow",{scale:this.state.baseScaleShadow});}}despawn(Xt){return 4==this.type||8==this.type||9==this.type?(this.state.inactive=!0,this.state.despawnTicker=0,this.state.despawnType=Xt,void(1==Xt&&4!=this.type&&Sound.powerup(this.type,this.pos))):void(this.state.inactive=!0,this.state.despawnTicker=0,this.sprites.thruster.renderable=!1,this.sprites.thrusterGlow.renderable=!1,this.sprites.smokeGlow.renderable=!1,this.accel.x=0,this.accel.y=0,this.missile&&Sound.updateThruster(1,this,!1))}destroy(Xt){switch(this.type){case 1:case 2:case 3:case 5:case 6:case 7:game.graphics.layers.projectiles.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.projectiles.removeChild(this.sprites.thrusterGlow),game.graphics.layers.projectiles.removeChild(this.sprites.smokeGlow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.smokeGlow.destroy();break;case 4:case 8:case 9:game.graphics.layers.crates.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow);}Xt.c===Network.SERVERPACKET.MOB_DESPAWN_COORDS&&(Mobs.explosion(this.pos,Xt.type),this.missile&&Sound.updateThruster(1,this,!1))}network(Xt){this.lastPacket=game.timeNetwork,Xt.c===Network.SERVERPACKET.MOB_UPDATE&&(this.reducedFactor=Tools.reducedFactor()),this.pos.x=Xt.posX,this.pos.y=Xt.posY,null!=Xt.speedX&&(this.speed.x=Xt.speedX,this.speed.y=Xt.speedY),null!=Xt.accelX&&(this.accel.x=Xt.accelX,this.accel.y=Xt.accelY)}visible(Xt){Xt==this.visibility&&Xt!=this.culled||(this.sprites.sprite.visible=Xt,this.sprites.shadow.visible=Xt,4!=this.type&&8!=this.type&&9!=this.type&&(this.sprites.thruster.visible=Xt,this.sprites.thrusterGlow.visible=Xt),this.visibility=Xt)}visibilityUpdate(){this.culled=!Graphics.inScreen(this.pos,128),this.visible(!this.culled)}update(Xt){if(this.visibilityUpdate(),!(!1!==this.reducedFactor&&(Xt-=this.reducedFactor,this.reducedFactor=!1,0>=Xt))){var jt=.51<Xt?Math.round(Xt):1,zt=Xt/jt,Yt,Ht,Wt;for(Yt=0;Yt<jt;Yt++)if(this.stationary)this.clientCalcs(zt);else{Ht=this.speed.x,Wt=this.speed.y,this.speed.x+=this.accel.x*zt,this.speed.y+=this.accel.y*zt;var Vt=this.speed.length();Vt>this.maxSpeed&&this.speed.multiply(this.maxSpeed/Vt),this.state.inactive&&this.speed.multiply(1-.03*zt),this.pos.x+=zt*Ht+.5*(this.speed.x-Ht)*zt,this.pos.y+=zt*Wt+.5*(this.speed.y-Wt)*zt,-16384>this.pos.x&&(this.pos.x+=32768),16384<this.pos.x&&(this.pos.x-=32768),-8192>this.pos.y&&(this.pos.y+=16384),8192<this.pos.y&&(this.pos.y-=16384),this.clientCalcs(zt)}this.missile&&!this.state.inactive&&Sound.updateThruster(1,this,this.visibility),this.state.inactive&&0<this.sprites.sprite.alpha&&(this.sprites.sprite.alpha-=0.2)}}clientCalcs(Xt){if(!this.forDeletion)switch(this.state.luminosity-=.075*Xt,0>this.state.luminosity&&(this.state.luminosity=0),this.type){case 1:case 2:case 3:case 5:case 6:case 7:var Yt=1;if(this.state.inactive){if(this.state.despawnTicker+=.01*Xt,.75<this.state.despawnTicker,1<this.state.despawnTicker)return void(this.forDeletion=!0);Yt=Tools.clamp(1-this.state.despawnTicker,.3,1)}if(!this.culled&&.3<Yt){var Ht=this.speed.angle()+Math.PI;Ht-this.spriteRot>=Math.PI?this.spriteRot+=2*Math.PI:this.spriteRot-Ht>Math.PI&&(this.spriteRot-=2*Math.PI),this.spriteRot=Tools.converge(this.spriteRot,Ht,.1*Xt),Particles.missileSmoke(this,this.exhaust,Yt)}break;case 4:case 8:case 9:if(this.state.inactive&&(this.state.despawnTicker+=.05*Xt,1<this.state.despawnTicker))return void(this.forDeletion=!0);}}updateGraphics(){switch(this.type){case 1:case 2:case 3:case 5:case 6:case 7:var Yt=Graphics.shadowCoords(this.pos),Ht=Tools.oscillator(.1,.5,this.randomness),Wt=Tools.oscillator(.15,10,this.randomness);Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,this.spriteRot),Graphics.transform(this.sprites.shadow,Yt.x,Yt.y,this.spriteRot),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),null,null,null,(.5*this.state.luminosity+.2)*Wt),Graphics.transform(this.sprites.smokeGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),this.spriteRot),Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-this.spriteRot)*this.exhaust,this.pos.y+Math.cos(-this.spriteRot)*this.exhaust,this.spriteRot,config.mobs[this.type].thruster[0]*Ht,config.mobs[this.type].thruster[1]*Ht);break;case 4:case 8:case 9:var jt;Yt=Graphics.shadowCoords(this.pos),jt=0==this.state.despawnType?1-this.state.despawnTicker:1+2*this.state.despawnTicker,jt*=Tools.oscillator(.08,500,this.randomness),Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y+20*(Tools.oscillator(.08,330,this.randomness)-1.04),null,this.state.baseScale*jt,this.state.baseScale*jt,1-this.state.despawnTicker),Graphics.transform(this.sprites.shadow,Yt.x,Yt.y,null,this.state.baseScaleShadow*jt,this.state.baseScaleShadow*jt,1-this.state.despawnTicker);}}}!function(){var Xt={},Yt=[],Ht={};Mobs.add=function(Wt,jt){Xt[Wt.id]=new Gt(Wt),jt&&Xt[Wt.id].network(Wt)},Mobs.get=function(Wt){return Xt[Wt]},Mobs.update=function(){var Wt,jt;for(Wt in Xt)(jt=Xt[Wt]).update(game.timeFactor),jt.forDeletion?Mobs.destroy(jt):jt.updateGraphics(game.timeFactor)},Mobs.network=function(Wt){var jt=Xt[Wt.id];null==jt?Mobs.add(Wt,!0):jt.network(Wt)},Mobs.despawn=function(Wt){var jt=Xt[Wt.id];null!=jt&&jt.despawn(Wt.type)},Mobs.destroy=function(Wt){var jt=Xt[Wt.id];null!=jt&&(jt.destroy(Wt),delete Xt[Wt.id])},Mobs.explosion=function(Wt,jt){1===jt||5===jt||6===jt||7===jt?Particles.explosion(Wt,Tools.rand(1,1.2)):2===jt?Particles.explosion(Wt,Tools.rand(1.3,1.6)):3===jt?Particles.explosion(Wt,Tools.rand(.8,1)):void 0;Sound.mobExplosion(Wt,jt)},Mobs.count=function(){var jt=0,zt=0,Wt;for(Wt in Xt)jt++,Xt[Wt].culled&&zt++;return[jt-zt,jt]},Mobs.wipe=function(){for(var Wt in Xt)Xt[Wt].destroy({}),delete Xt[Wt]},Mobs.countDoodads=function(){return[Yt.length,config.doodads.length]},Mobs.setupDoodads=function(){config.doodads=config.doodads.concat(config.groundDoodads);for(var Wt=0;Wt<config.doodads.length;Wt++)Mobs.addDoodad(config.doodads[Wt])},Mobs.addDoodad=function(Wt){var jt=Number.isInteger(Wt[2]),zt=Textures.init((jt?"mountain":"")+Wt[2]);zt.scale.set(Wt[3]),zt.position.set(Wt[0],Wt[1]),zt.visible=!1,Wt[4]&&(zt.rotation=Wt[4]),Wt[5]&&(zt.alpha=Wt[5]),Wt[6]&&(zt.tint=Wt[6]),Wt[7]=!1,Wt[8]=zt,Wt[9]=jt?0:1},Mobs.getClosestDoodad=function(Wt){for(var Vt=2,qt=0,jt,zt;qt<Yt.length;qt++)0==(zt=Yt[qt])[5]&&Tools.distFastCheckFloat(Wt.x,Wt.y,zt[0],zt[1],256*zt[3])&&(jt=Tools.distance(Wt.x,Wt.y,zt[0],zt[1])/(256*zt[3]))<Vt&&(Vt=jt);return Tools.clamp(3.333*(Vt-.5),.2,1)},Mobs.updateDoodads=function(){for(var jt=Tools.getBucketBounds(Graphics.getCamera(),512+game.halfScreenX/game.scale,512+game.halfScreenY/game.scale),zt=jt[0],Wt;zt<=jt[1];zt++)for(var Vt=jt[2];Vt<=jt[3];Vt++)for(var qt=0;qt<game.buckets[zt][Vt][0].length;qt++)Kt=game.buckets[zt][Vt][0][qt],Wt=config.doodads[Kt],game.state==Network.STATE.LOGIN&&0!=Wt[9]||Graphics.inScreen(new Vector(Wt[0],Wt[1]),256*Wt[3]+config.overdraw)&&(Wt[7]||(Wt[8].visible=!0,Wt[7]=!0,Ht[Kt]||(Ht[Kt]=!0,Yt.push([Wt[0],Wt[1],Wt[2],Wt[3],Kt,Wt[9]]))));for(var Qt=Yt.length-1,Kt;0<=Qt;Qt--)Kt=Yt[Qt][4],Wt=config.doodads[Kt],Graphics.inScreen(new Vector(Wt[0],Wt[1]),256*Wt[3]+config.overdraw)||Wt[7]&&(Wt[8].visible=!1,Wt[7]=!1,Yt.splice(Qt,1),delete Ht[Kt])}}(),function(){class Xt{constructor(Wt,jt,zt,Vt){this.maxParticles=jt,this.container=new PIXI.Container,null!=zt&&(this.container.blendMode=zt),this.particles=[],this.first=-1,this.last=-1,this.emitters={},this.emitterId=0,this.shadow=Vt,Wt.addChild(this.container)}addParticle(Wt,jt,zt,Vt,qt,Kt,Qt,Jt,Zt,$t,en,tn,nn,an){if(!(20<game.timeFactorUncapped||this.particles.length>=this.maxParticles)){var rn=Textures.sprite(jt),on={type:Wt,sprite:rn,speed:zt,pos:Vt,scale:qt,alpha:Kt,rotationSpeed:Qt,rotation:Jt,lastRotation:0,time:game.time,tint:Zt,life:0,data:null==nn?0:nn,emitter:null==an?null:an,_prev:-1,_next:-1};null!=Zt&&(rn.tint=Zt),null!=en&&(rn.blendMode=en),null!=tn&&(on.life=tn),null==$t?rn.anchor.set(.5,.5):rn.anchor.set($t.x,$t.y),this.container.addChild(rn);var sn=this.particles.length;0<sn?(this.particles[this.last]._next=sn,on._prev=this.last,this.last=sn):(this.first=sn,this.last=sn),this.particles.push(on)}}wipe(){this.emitters={},this.emitterId=0;for(var Wt=0;Wt<this.particles.length;Wt++)this.container.removeChild(this.particles[Wt].sprite),this.particles[Wt].sprite.destroy();this.particles=[],this.first=-1,this.last=-1}addEmitter(Wt,jt,zt,Vt,qt){20<game.timeFactorUncapped||(this.emitters[this.emitterId]={type:Wt,pos:zt,speed:jt,life:null==Vt?0:Vt,shadowLayer:qt},this.emitterId++)}updateEmitters(Wt){var jt,zt;for(jt in this.emitters){switch((zt=this.emitters[jt]).type){case Ht.EMITTER_EXPLOSION_FRAGMENT:zt.life+=.02*Wt,zt.speed.multiply(1-.02*Wt);}if(1<zt.life)delete this.emitters[jt];else switch(zt.pos.x+=zt.speed.x*Wt,zt.pos.y+=zt.speed.y*Wt,zt.type){case Ht.EMITTER_EXPLOSION_FRAGMENT:var Vt=Tools.randInt(1,16),qt=.5*(1-zt.life),Kt=1-zt.life,Qt=Tools.rand(-.1,.1),Jt=Tools.randCircle();this.addParticle(Ht.FRAGMENT_SMOKE,"smoke_"+Vt,Vector.zero(),zt.pos.clone(),Vector.diag(qt),1,Qt,Jt,null,null,null,null,Kt+.2),zt.shadowLayer&&zt.shadowLayer.addParticle(Ht.FRAGMENT_SMOKE,"smokeshadow_"+Vt,Vector.zero(),zt.pos.clone(),Vector.diag(qt),1,Qt,Jt,null,null,null,null,Kt+.2);}}}destroy(Wt){var jt=this.particles.length;if(0!=jt&&!(Wt>=jt)){this.container.removeChild(this.particles[Wt].sprite),this.particles[Wt].sprite.destroy();var zt=this.particles[Wt]._prev,Vt=this.particles[Wt]._next;return jt--,-1==zt?this.first=Vt:this.particles[zt]._next=Vt,-1==Vt?this.last=zt:this.particles[Vt]._prev=zt,Wt!=jt&&(this.particles[Wt]=this.particles[jt],-1==this.particles[Wt]._prev?this.first=Wt:this.particles[this.particles[Wt]._prev]._next=Wt,-1==this.particles[Wt]._next?this.last=Wt:this.particles[this.particles[Wt]._next]._prev=Wt),this.particles.splice(jt,1),Vt==jt?Wt:Vt}}update(Wt){var jt;this.updateEmitters(Wt);for(var zt=this.first;-1!=zt;){switch((jt=this.particles[zt]).type){case Ht.MISSILE:case Ht.MISSILE_FAT:case Ht.MISSILE_SMALL:jt.type==Ht.MISSILE?(jt.scale.add(.2*Wt),jt.scale.ceil(2*jt.data),jt.life+=.05*Wt):jt.type==Ht.MISSILE_FAT?(jt.scale.add(.3*Wt),jt.scale.ceil(3*jt.data),jt.life+=.05*Wt):(jt.scale.add(.14*Wt),jt.scale.ceil(1.4*jt.data),jt.life+=.08*Wt),jt.speed.multiply(1-.05*Wt),jt.alpha=.7*(1-jt.life),jt.sprite.tint=Tools.colorLerp(jt.tint,16777215,2*(1-jt.life));break;case Ht.SHOCKWAVE_SMOKE:jt.life+=.05*Wt,jt.alpha=.7*Tools.easing.custom(jt.life,"shockwave");break;case Ht.SHOCKWAVE_INNER:case Ht.SHOCKWAVE_OUTER:jt.life+=.05*Wt;var Vt=Tools.easing.custom(jt.life,"shockwave");jt.alpha=.4*Vt,jt.type==Ht.SHOCKWAVE_OUTER?jt.scale.both(4*jt.life):jt.scale.both(3*jt.life);break;case Ht.EXPLOSION_FLASH:jt.life+=.1*Wt,jt.alpha=1-jt.life;break;case Ht.EXPLOSION_FLASH_BIG:jt.life+=.04*Wt,jt.alpha=1-jt.life;break;case Ht.EXPLOSION_HOT_SMOKE:jt.life+=.035*Wt,jt.alpha=1-jt.life,jt.scale.add(.05*Wt),jt.speed.multiply(1-.1*Wt),jt.rotationSpeed*=1-.05*Wt;break;case Ht.EXPLOSION_SMOKE:jt.life+=.01*Wt,jt.alpha=Tools.easing.custom(jt.life,"explosionSmoke"),jt.scale.add(.05*Wt),jt.speed.multiply(1-.05*Wt),jt.rotationSpeed*=1-.05*Wt;break;case Ht.EXPLOSION_SPARK:jt.life+=.02*Wt,jt.alpha=2*(1-jt.life),jt.speed.multiply(1-.05*Wt),jt.rotationSpeed*=1-.05*Wt;break;case Ht.FRAGMENT_SMOKE:jt.life+=.02*Wt,jt.scale.add(.075*Wt*jt.data),jt.scale.ceil(2*jt.data),jt.rotationSpeed*=1-.05*Wt,jt.alpha=.3*(1-jt.life);break;case Ht.PLANE_DAMAGE:jt.life+=.02*Wt,jt.alpha=2*(1-jt.life),jt.speed.multiply(1-.1*Wt);}if(1<jt.life)zt=this.destroy(zt);else{if(jt.pos.x+=jt.speed.x*Wt,jt.pos.y+=jt.speed.y*Wt,jt.rotation+=jt.rotationSpeed*Wt,this.shadow){var qt=Graphics.shadowCoords(jt.pos);jt.sprite.position.x=qt.x,jt.sprite.position.y=qt.y,jt.sprite.scale.x=jt.scale.x/config.shadowScaling,jt.sprite.scale.y=jt.scale.y/config.shadowScaling,jt.sprite.alpha=Tools.clamp(2*jt.alpha,0,1)}else jt.sprite.position.x=jt.pos.x,jt.sprite.position.y=jt.pos.y,jt.sprite.scale.x=jt.scale.x,jt.sprite.scale.y=jt.scale.y,jt.sprite.alpha=Tools.clamp(jt.alpha,0,1);.03<Math.abs(jt.rotation-jt.lastRotation)&&(jt.sprite.rotation=jt.rotation,jt.lastRotation=jt.rotation),zt=this.particles[zt]._next}}}}var Yt={};Math.PI,Particles.setup=function(){Yt.smoke=new Xt(game.graphics.layers.smoke,2e3),Yt.shadows=new Xt(game.graphics.layers.shadows,2e3,null,!0),Yt.explosions=new Xt(game.graphics.layers.explosions,2e3)},Particles.update=function(){for(var Wt=.51<game.timeFactor?Math.round(game.timeFactor):1,jt=game.timeFactor/Wt,zt=0;zt<Wt;zt++)Yt.smoke.update(jt),Yt.explosions.update(jt),Yt.shadows.update(jt)},Particles.wipe=function(){Yt.smoke.wipe(),Yt.explosions.wipe(),Yt.shadows.wipe()},Particles.planeDamage=function(Wt){var jt=2==Wt.type?2:1,zt=Tools.randInt(1,4),Vt=Tools.randCircle(),qt=Tools.rand(.5,2),Kt=Tools.rand(.2,.8),Qt=Tools.rand(0,.3),Jt=Vector.createOff(Wt.pos,Vt,Tools.rand(0,5*jt)),Zt=Vector.create(Vt,qt);Yt.explosions.addParticle(Ht.PLANE_DAMAGE,"spark_"+zt,new Vector(Zt.x+Wt.speed.x,Zt.y+Wt.speed.y),Jt,Vector.diag(Kt),0,0,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD,Qt)},Particles.explosion=function(Wt,jt,zt){for(var Vt=1<jt?1+(jt-1)/1.5:jt,qt=0;2>qt;qt++)Yt.explosions.addParticle(Ht.EXPLOSION_FLASH,"flash_"+Tools.randInt(1,4),Vector.zero(),Wt.clone(),Vector.diag(1.5*jt),0,0,Tools.randCircle(),15987628,null,PIXI.BLEND_MODES.ADD);var Kt,Qt,Jt,Zt,$t,en,tn,nn,an;for(Kt=Math.round(Tools.rand(20,30)*jt),qt=0;qt<Kt;qt++)Qt=Tools.randInt(1,4),Jt=Tools.randCircle(),$t=Tools.rand(3,10)*Vt,en=Tools.rand(-.2,.2),tn=Tools.rand(.4,1.5)*Vt,an=Tools.rand(0,.3),Yt.explosions.addParticle(Ht.EXPLOSION_SPARK,"spark_"+Qt,Vector.create(Jt,$t),Wt.clone(),Vector.diag(tn),0,en,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD,an);for(qt=0;qt<zt;qt++)Jt=Tools.randCircle(),$t=Tools.rand(3,7)*Vt,Zt=Tools.rand(15,30)*jt,Yt.explosions.addEmitter(Ht.EMITTER_EXPLOSION_FRAGMENT,Vector.create(Jt,$t),Vector.createOff(Wt,Jt,Zt),Tools.rand(0,.5),Yt.shadows);for(Kt=Math.round(Tools.rand(20,30)*jt),qt=0;qt<Kt;qt++)Qt=Tools.randInt(1,16),Jt=Tools.randCircle(),Zt=Tools.rand(0,10)*jt,$t=Tools.rand(0,3)*jt,en=Tools.rand(-.1,.1),tn=Tools.rand(.5,.8)*jt,nn=Tools.randCircle(),Yt.explosions.addParticle(Ht.EXPLOSION_SMOKE,"smoke_"+Qt,Vector.create(Jt,$t),Vector.createOff(Wt,Jt,Zt),Vector.diag(tn),0,en,nn),Yt.shadows.addParticle(Ht.EXPLOSION_SMOKE,"smokeshadow_"+Qt,Vector.create(Jt,$t),Vector.createOff(Wt,Jt,Zt),Vector.diag(tn),0,en,nn);for(Yt.explosions.addParticle(Ht.EXPLOSION_FLASH_BIG,"glowsmall",Vector.zero(),Wt.clone(),Vector.diag(6*jt),0,0,0,null,null,PIXI.BLEND_MODES.ADD),Kt=Math.round(Tools.rand(5,10)*jt),qt=0;qt<Kt;qt++)Qt=Tools.randInt(1,4),Jt=Tools.randCircle(),$t=Tools.rand(1,3)*jt,en=Tools.rand(-.1,.1),tn=Tools.rand(.1,.3)*jt,Yt.explosions.addParticle(Ht.EXPLOSION_HOT_SMOKE,"hotsmoke_"+Qt,Vector.create(Jt,$t),Wt.clone(),Vector.diag(tn),0,en,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD)},Particles.missileSmoke=function(Wt,jt,zt){var Vt=[null,Ht.MISSILE,Ht.MISSILE_FAT,Ht.MISSILE_SMALL,null,Ht.MISSILE,Ht.MISSILE,Ht.MISSILE][Wt.type],qt=Wt.spriteRot+Math.PI,Kt=Vector.createOff(Wt.pos,qt,jt),Qt=.2*(zt=zt||1),Jt=Tools.rand(-.1,.1),Zt=Vector.create(qt+Jt,5*zt),$t=Tools.randInt(1,16),en=Tools.rand(-.1,.1);Tools.randCircle(),Yt.smoke.addParticle(Vt,"smoke_"+$t,Zt.clone(),Kt.clone(),new Vector(1.25*Qt,4*Qt),1,en,qt,16775590,null,null,null,zt),Yt.shadows.addParticle(Vt,"smokeshadow_"+$t,Zt.clone(),Kt.clone(),new Vector(1.25*Qt,4*Qt),1,en,qt,null,null,null,null,zt)},Particles.planeBoost=function(Wt,jt){var zt=Wt.rot+Wt.state.thrustDir/2+Math.PI,Vt=Vector.createOff(Wt.pos,zt,jt?40:-20),qt=Tools.rand(-.1,.1),Kt=jt?0:Math.PI,Qt=Vector.create(zt+qt+Kt,6),Jt=Tools.randInt(1,16),Zt=Tools.rand(-.1,.1);Tools.randCircle(),Yt.smoke.addParticle(Ht.MISSILE,"smoke_"+Jt,Qt.clone(),Vt.clone(),new Vector(.3,1.2),1,Zt,zt,16775590,null,null,null,1.2),Yt.shadows.addParticle(Ht.MISSILE,"smokeshadow_"+Jt,Qt.clone(),Vt.clone(),new Vector(.3,1.2),1,Zt,zt,null,null,null,null,1.2)},Particles.spiritShockwave=function(Wt){for(var Vt=0,jt,zt;40>Vt;Vt++)zt=2*(Vt/40)*Math.PI,jt=Tools.randInt(1,16),Yt.explosions.addParticle(Ht.SHOCKWAVE_SMOKE,"smoke_"+jt,Vector.create(zt,8),Wt.clone(),Vector.diag(2),0,.4,Tools.randCircle());Yt.explosions.addParticle(Ht.SHOCKWAVE_INNER,"shockwave",Vector.zero(),Wt.clone(),Vector.zero(),0,0,-.35+Math.PI),Yt.explosions.addParticle(Ht.SHOCKWAVE_OUTER,"shockwave",Vector.zero(),Wt.clone(),Vector.zero(),0,0,-.35)},Particles.count=function(){var Wt=0;for(var jt in Yt)Wt+=Yt[jt].particles.length;return Wt};var Ht={MISSILE:0,MISSILE_FAT:1,MISSILE_SMALL:2,SHOCKWAVE_SMOKE:3,SHOCKWAVE_INNER:4,SHOCKWAVE_OUTER:5,EXPLOSION_FLASH:6,EXPLOSION_FLASH_BIG:7,EXPLOSION_SMOKE:8,EXPLOSION_HOT_SMOKE:9,EXPLOSION_SPARK:10,FRAGMENT_SMOKE:11,PLANE_DAMAGE:12,EMITTER_EXPLOSION_FRAGMENT:100};Particles.PTYPE=Ht}(),function(){var Xt={},Yt={},Ht=null,Wt=!1,jt=0,zt=!1,Vt=-1,qt=0,Kt=!1,Qt=0,Jt=!1,Zt=null,$t=!1,en=null,tn=!1,nn=!1,an=!1,rn=null,on=0,sn=!1,dn=!1,ln=null,un=!1,pn=null,cn={x:0,y:0,width:0,height:0},hn={alert:null,information:null,default:null,destroyed:null},fn={alert:!1,information:!1,default:!1,destroyed:!1},gn={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},mn=!1,yn={},_n=[],bn=0,xn={1:["Predator",80,50,75,60,"BOOST","Temporarily increases speed by burning energy"],2:["Goliath",30,100,30,100,"REPEL","Repels enemy aircraft and missiles"],3:["Mohawk",100,40,100,40,"STRAFE","Enables sideways flight"],4:["Tornado",60,70,50,80,"MULTIFIRE","Launches 3 missiles at the same time"],5:["Prowler",50,70,40,60,"STEALTH","Becomes invisible to enemy aircraft"],101:["Speed"],102:["Defense"],103:["Energy Regen"],104:["Missile Speed"]},vn=["tf","pepe","clap","lol","bro","kappa","cry","rage"],Tn=["","Shield","Inferno"];game.tooltipValues=xn,UI.show=function(On,Ln){$(On).css({display:Ln?"inline-block":"block"})},UI.hide=function(On){$(On).css({display:"none"})},UI.isEmote=function(On,Ln){for(var kn=0;kn<vn.length;kn++)if(Ln){if(On===":"+vn[kn]+":")return vn[kn];}else if(On===vn[kn])return vn[kn];return!1},UI.serverMessage=function(On){var Ln="alert";2==On.type&&(Ln="information"),UI.showMessage(Ln,On.text,On.duration)},UI.showMessage=function(On,Ln,kn){$("#msg-"+On).removeClass("hidemsg").removeClass("popmsg"),$("#msg-"+On).html(Ln);var Nn=$("#msg-"+On).height();"default"!=On&&"destroyed"!=On||$("#msg-"+On).css({"margin-top":"-"+Math.round(Nn/2)+"px"}),$("#msg-"+On).addClass("popmsg"),fn[On]=!0,clearTimeout(hn[On]),hn[On]=setTimeout(UI.hideMessage,kn||2e3,On)},UI.hideMessage=function(On){$("#msg-"+On).addClass("hidemsg"),fn[On]=!1,hn[On]=setTimeout(function(Ln){$("#msg-"+On).removeClass("popmsg").removeClass("hidemsg"),$("#msg-"+Ln).html("")},2500,On)},UI.wipeAllMessages=function(){for(var On in fn)fn[On]&&UI.showMessage(On,"",100)},UI.updateMyLevel=function(On){game.myLevel=On,$("#score-rank").html(On),$("#lifetime-rank").html(On)},UI.newScore=function(On){if(On.id!=game.myID)return!1;var Ln=On.score-game.myScore,kn="";if(1>Math.abs(Ln)&&(Ln=!1),game.myScore=On.score,On.score!=gn.score&&(gn.score=On.score,$("#score-score").html(On.score)),On.upgrades!=gn.upgrades){var Nn=On.upgrades-gn.upgrades,Fn=-1!=gn.upgrades;if(gn.upgrades=On.upgrades,$("#score-upgrades").html(On.upgrades),Mn(),Fn&&0<Nn){if(Sound.powerup(4,null),mn&&(mn.msg+="<br>"),fn.default)return kn+="&nbsp;&nbsp;<span class=\"upgrade\">+"+Nn+"</span>",void $("#alert-update").append(kn);kn+="<span id=\"alert-update\"><span class=\"upgrade\">+"+Nn+"<span class=\"bold\"> upgrade</span></span></span>"}}if(On.earnings!=gn.earnings&&0!=game.myLevel){gn.earnings=On.earnings,$("#lifetime-totalbounty").html(On.earnings);var Bn=Math.ceil(Tools.rankToEarnings(game.myLevel+1)-On.earnings);$("#lifetime-nextbounty").html("+"+Bn)}if(On.totalkills!=gn.kills||On.totaldeaths!=gn.deaths){var Un=0==On.totalkills||0==On.totaldeaths?"-":(On.totalkills/On.totaldeaths).toFixed(2);$("#lifetime-kdratio").html(Un)}On.totalkills!=gn.kills&&(gn.kills=On.totalkills,$("#lifetime-kills").html(On.totalkills)),On.totaldeaths!=gn.deaths&&(gn.deaths=On.totaldeaths,$("#lifetime-deaths").html(On.totaldeaths)),Ln&&(mn&&(mn.msg+="<br>"),kn+=UI.getScoreString(Ln)),mn?(UI.showMessage(mn.type,mn.msg+kn,mn.duration),mn=!1):""!=kn&&UI.showMessage("default",kn,3e3)},UI.getScoreString=function(On,Ln){var Nn="positive",Fn="+";return 0>On&&(Nn="negative",Fn="-"),Ln&&(Nn=Ln),"<span id=\"alert-update\" class=\""+Nn+"\">"+Fn+Math.abs(On)+"</span>"};var En=function(On){On.sprite.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-On.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-On.y)/16384))};UI.wipeAllMinimapMobs=function(){for(var On in Xt)game.graphics.layers.ui1.removeChild(Xt[On].sprite),Xt[On].sprite.destroy(),delete Xt[On]},UI.showSpectator=function(On){if(!un){var Ln=config.mobile?" class=\"mobile\"":"";$("body").append("<div id=\"spectator\""+Ln+"></div>"),un=!0}$("#spectator").html(On),Input.addTouchRejection("#spectator")},UI.hideSpectator=function(){un&&($("#spectator").remove(),un=!1)},UI.addPowerup=function(On,Ln){null!=ln&&clearTimeout(ln);var kn="<div class=\"powerup\" id=\"powerup-"+On+"\"><div class=\"percent "+(1==On?"shield":"rampage")+"\" id=\"powerup-"+On+"-percent\" style=\"transition: width "+Ln+"ms linear;\"></div><div class=\"name\">"+Tn[On]+"</div></div>";$("#powerups").html(kn),$("#powerup-"+On+"-percent").width(),$("#powerup-"+On+"-percent").css({width:"7%"}),ln=setTimeout(function(){$("#powerup-"+On).remove()},Ln)},UI.resetPowerups=function(){$("#powerups").html("")},UI.changeMinimapTeam=function(On,Ln){if(null!=Xt[On]&&null!=Xt[On].sprite){var kn=1==Ln?"minimapBlue":"minimapMob";Xt[On].sprite.texture=Textures.getNamed(kn)}},UI.scoreboardUpdate=function(On,Ln,kn){for(var Nn in Xt)game.graphics.layers.ui1.removeChild(Xt[Nn].sprite),game.graphics.layers.ui2.removeChild(Xt[Nn].sprite),game.graphics.layers.ui3.removeChild(Xt[Nn].sprite),Xt[Nn].sprite.destroy(),delete Xt[Nn];for(var Yn=0,Hn="",Wn={},jn=!1,zn=0,Vn={},qn="",Kn="",Qn="",Jn=0,Fn,Bn,Un,Gn,Xn;Jn<Ln.length;Jn++)null!=(Fn=Players.get(Ln[Jn].id))&&(Vn=Tools.decodeMinimapCoords(Ln[Jn].x,Ln[Jn].y),Fn.scorePlace=Jn+1,Fn.lowResPos.x=Vn.x,Fn.lowResPos.y=Vn.y,Fn.removedFromMap=0==Ln[Jn].x&&0==Ln[Jn].y,Ln[Jn].id==game.myID?zn=Jn+1:0==Ln[Jn].x&&0==Ln[Jn].y||(Wn[Fn.id]=!0,null==Xt[Ln[Jn].id]?(Qn="minimapMob",2==game.gameType&&1==Fn.team&&(Qn="minimapBlue"),0<Ln.length&&Fn.id==Ln[0].id&&(Qn="minimap1"),1<Ln.length&&Fn.id==Ln[1].id&&(Qn="minimap2"),2<Ln.length&&Fn.id==Ln[2].id&&(Qn="minimap3"),SWAM.targetedPlayer==Fn.id&&(Qn="minimapTarget"),Xt[Ln[Jn].id]={sprite:Textures.init(Qn),x:Vn.x,y:Vn.y}):(Xt[Ln[Jn].id].x=Vn.x,Xt[Ln[Jn].id].y=Vn.y),En(Xt[Ln[Jn].id])));for(var Zn in Xt)null==Wn[Zn]&&(game.graphics.layers.ui1.removeChild(Xt[Zn].sprite),Xt[Zn].sprite.destroy(),delete Xt[Zn]);if(0!=zn){for(kn=kn?Tools.clamp(kn,1,On.length):On.length,Jn=0;Jn<kn&&(null==(Fn=Players.get(On[Jn].id))||(Yn++,Bn=1==Yn?"<span class=\"badge scoreboard gold\"></span>":2==Yn?"<span class=\"badge scoreboard silver\"></span>":3==Yn?"<span class=\"badge scoreboard bronze\"></span>":Yn+".",Un=Fn.me()?" sel":"",Gn=On[Jn].score,Xn=On[Jn].level,zn>kn&&Yn==kn-1&&(Hn+="<div class=\"line dottedline\">&middot; &middot; &middot;</div>",!0,Fn=Players.get(game.myID),Bn=zn+".",Gn=game.myScore,Xn=game.myLevel,Un=" sel",jn=!0),qn="",2==game.gameType&&(qn=" team-"+Fn.team),Kn="",4==(Bn+"").length&&(Kn=" bigger"),Hn+="<div class=\"line"+Un+"\" player-id=\""+Fn.id+"\"><span class=\"place"+Kn+"\">"+Bn+"</span><span class=\"flag small flag-"+Fn.flag+"\"></span><span class=\"nick"+qn+"\">"+(Fn.removedFromMap?UI.escapeHTML(Fn.name).strike():UI.escapeHTML(Fn.name))+"</span>"+(0==Xn?"":"<span class=\"holder\">&nbsp;<span class=\"rank\">"+Xn+"</span></span>")+"<span class=\"score\">"+Sn(Gn)+"</span></div>",!jn));Jn++);$("#scoreboard").html(Hn),$("#scoreboard div").click(SWAM.scoreboard_click_handler)}SWAM&&SWAM.OnScoreboardUpdate(On,Ln,kn)};var Sn=function(On){var Ln="";On+="";for(var kn=0;kn<On.length;kn++)Ln+="<span>"+On[kn]+"</span>";return Ln};UI.toggleChatBox=function(On){if(!config.mobile)if(Wt){if(Wt=!1,On){var Ln=$("#chatinput").val();""!==Ln&&""!==Ln.trim()&&(UI.parseCommand(Ln.trim())||Network.sendChat(Ln)),An()}UI.hide("#chatinput"),$("#chatinput").val(""),$("#chatinput").blur()}else Kt&&UI.maximizeChat(),Input.clearKeys(!0),Wt=!0,UI.show("#chatinput"),$("#chatinput").focus()},UI.shortcutChat=function(On){Wt||($("#chatinput").val(On),UI.toggleChatBox())};var An=function(){zt||(zt=!0,$("#chat-0").length&&$("#chat-0").remove())};UI.parseCommand=function(On){if("/"!==On[0])return!1;var Ln=On.split(" "),kn=Ln[0].substr(1).toLowerCase();if(0==kn.length)return!1;if("s"===kn){var Nn=On.indexOf(" "),Fn=On.substr(Nn+1);0<Fn.length&&Network.sendSay(Fn)}else if("t"===kn){Nn=On.indexOf(" ");var Bn=On.substr(Nn+1);0<Bn.length&&Network.sendTeam(Bn)}else if("ignore"===kn)null==(Un=Players.getByName(Dn(Ln[1])))?UI.addChatMessage("Unknown player"):UI.chatIgnore(Un.id);else if("unignore"===kn)null==(Un=Players.getByName(Dn(Ln[1])))?UI.addChatMessage("Unknown player"):UI.chatUnignore(Un);else if("votemute"===kn)null==(Un=Players.getByName(Dn(Ln[1])))?UI.addChatMessage("Unknown player"):UI.chatVotemute(Un);else if("w"===kn)3<=Ln.length?UI.chatWhisper(Ln[1],On.substr(4+Ln[1].length)):UI.addChatMessage("Usage: /w player message");else if("spectate"===kn){var Un;null==(Un=Players.getByName(Dn(Ln[1])))?UI.addChatMessage("Unknown player"):Network.sendCommand("spectate",Un.id+"")}else"flag"===kn||"flags"===kn?2==Ln.length?Network.sendCommand("flag",On.substr(kn.length+2)):UI.addChatMessage("Type /flag XX where XX is the 2-letter ISO code of a country",!0):"emotes"===kn?UI.addChatMessage("Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage",!0):"help"===kn?UI.toggleHelp():"debug"===kn||(UI.isEmote(kn)?Network.sendSay(":"+kn+":"):Network.sendCommand(kn,On.substr(kn.length+2)));return!0},UI.addChatLine=function(On,Ln,kn,Nn=!0){if(!Yt[On.id]){if(Nn&&(Ln=UI.escapeHTML(Ln)),jt++,0==kn){var Fn="";2==game.gameType&&(Fn="style = 'color: "+(1==On.team?"#4076E2":"#EA4242")+";' ");var Bn="<div id=\"chat-"+jt+"\" class=\"line\"><span class=\"playersel\" data-playerid=\""+On.id+"\"><span class=\"flag small flag-"+On.flag+"\"></span><span class=\"nick\" "+Fn+" >"+UI.escapeHTML(On.name)+"</span></span><span class=\"text\">"+Ln+"</span></div>"}else if(1==kn||2==kn){var Un=1==kn?"TO":"FROM";2==kn&&(pn=Pn(On.name)),Bn="<div id=\"chat-"+jt+"\" class=\"line\"><span class=\"tag whisper\">"+Un+"</span><span class=\"playersel\" data-playerid=\""+On.id+"\"><span class=\"nick green\">"+UI.escapeHTML(On.name)+"</span></span><span class=\"text green\">"+Ln+"</span></div>",Vt=-1}else Bn="<div id=\"chat-"+jt+"\" class=\"line\"><span class=\"tag team\">TEAM</span><span class=\"playersel\" data-playerid=\""+On.id+"\"><span class=\"nick blue\">"+UI.escapeHTML(On.name)+"</span></span><span class=\"text blue\">"+Ln+"</span></div>",Vt=-1;var Gn="#chat-"+(jt-config.maxChatLines);if($(Gn).length&&$(Gn).remove(),$("#chatlines").append(Bn),Kt)Qt++,$("#chatunreadlines").html(Qt),1==Qt&&UI.show("#chatunreadlines",!0);else{var Xn=$("#chatbox");1!=kn&&2!=kn&&On.id!=game.myID&&Xn.is(":hover")||(Xn.perfectScrollbar("update"),Xn.scrollTop(Xn[0].scrollHeight))}}},UI.addChatMessage=function(On,Ln){qt=0,Vt=-1;var kn="<div id=\"chat-"+ ++jt+"\" class=\"line\">"+(Ln?"":"<span class=\"nick\">\u26A0</span>")+"<span class=\"text\">"+On+"</span></div>",Nn="#chat-"+(jt-config.maxChatLines);$(Nn).length&&$(Nn).remove(),$("#chatlines").append(kn);var Fn=$("#chatbox");Fn.perfectScrollbar("update"),Fn.scrollTop(Fn[0].scrollHeight)},UI.showChatLevel=function(On){var Ln=null;2==On?Ln="Type /flag XX where XX is the 2-letter ISO code of a country":3==On?Ln="Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage":4==On&&(Ln="Flag Pack #1: communist confederate imperial rainbow jolly"),null!=Ln&&UI.addChatMessage(Ln,!0)},UI.updateStats=function(On){var Ln=On.playerstotal,kn="";kn+="<div class=\"item\"><span class=\"icon-container\"><div class=\"icon players\"></div></span><span class=\"greyed\">"+On.playersgame+"&nbsp;/&nbsp;</span>"+Ln+"<span class=\"icon-container padded\"><div class=\"icon ping\"></div></span>"+On.ping+"<span class=\"millis\">ms</span></div>",$("#gameinfo").html(kn),game.ping=On.ping},UI.sayLine=function(On){Players.say(On)},UI.escapeHTML=function(On){return(""+On).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/`/g,"&#x60;")};var wn=function(){var On=window.innerWidth,Ln=window.innerHeight;On==game.screenX&&Ln==game.screenY||(clearTimeout(Ht),Ht=setTimeout(function(){Graphics.resizeRenderer(On,Ln)},250))};UI.controlKey=function(On,Ln,kn){if(game.state!=Network.STATE.PLAYING)return!0;if(kn)if(13!=On){if(27==On)return Wt&&UI.toggleChatBox(!1),void UI.closeAllPanels();191==On?UI.shortcutChat("/"):75==On?Input.toggleKeybinds():"SHOWSCORE"===Ln?UI.toggleScore():"MAINMENU"===Ln?UI.toggleMainMenu():"SHOWGAMES"===Ln?Games.toggleGames():"FULLSCREEN"===Ln?(Graphics.toggleFullscreen(),Input.clearKeys()):"MINIMIZECHAT"===Ln?UI.minimizeChat():"MAXIMIZECHAT"===Ln?UI.maximizeChat():"SAY"===Ln?UI.shortcutChat("/s "):"TEAM"===Ln?UI.shortcutChat("/t "):"REPLY"===Ln?null!=pn&&UI.shortcutChat("/w "+pn+" "):"SPECTATE"===Ln?Network.spectateForce():"UPGRADE1"===Ln?UI.selectUpgrade(1):"UPGRADE2"===Ln?UI.selectUpgrade(2):"UPGRADE3"===Ln?UI.selectUpgrade(3):"UPGRADE4"===Ln?UI.selectUpgrade(4):"SOUND"===Ln?Sound.toggle():"HELP"===Ln?UI.toggleHelp():"INVITE"===Ln?UI.toggleInvite():"MOUSEMODE"===Ln?Input.toggleMouse():void 0}else UI.toggleChatBox(!0)},UI.chatBoxOpen=function(){return Wt},UI.setupMinimap=function(){game.graphics.gui.minimap=Textures.init("minimap"),game.graphics.gui.minimap_box=Textures.init("minimapBox"),UI.resizeMinimap(),UI.visibilityMinimap(!1)},UI.visibilityMinimap=function(On){game.graphics.gui.minimap.visible=On,game.graphics.gui.minimap_box.visible=On},UI.resizeMinimap=function(){for(var On in game.graphics.gui.minimap.scale.set(config.minimapSize/512),game.graphics.gui.minimap.position.set(game.screenX-config.minimapPaddingX,game.screenY-config.minimapPaddingY),game.graphics.gui.minimap_box.scale.set(.03+2*config.minimapSize*(game.screenX/game.scale/32768)/64,.03+config.minimapSize*(game.screenY/game.scale/16384)/64),Xt)En(Xt[On]);Games.update(!0)},UI.setupHUD=function(){game.graphics.gui.hudHealth_shadow=Textures.init("hudHealth_shadow"),game.graphics.gui.hudHealth=Textures.init("hudHealth"),game.graphics.gui.hudHealth_mask=Textures.init("hudHealth_mask"),game.graphics.gui.hudHealth_mask.blendMode=PIXI.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudHealth.rotation=-1.5,game.graphics.gui.hudHealth.position.set(330,174),game.graphics.gui.hudHealth_mask.position.set(330,174),game.graphics.gui.hudEnergy_shadow=Textures.init("hudEnergy_shadow"),game.graphics.gui.hudEnergy=Textures.init("hudEnergy"),game.graphics.gui.hudEnergy_mask=Textures.init("hudEnergy_mask"),game.graphics.gui.hudEnergy_mask.blendMode=PIXI.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudEnergy.position.set(-250,174),game.graphics.gui.hudEnergy_mask.position.set(-250,174),UI.resizeHUD(),UI.visibilityHUD(!1)},UI.visibilityHUD=function(On){game.graphics.gui.hudHealth_shadow.visible=On,game.graphics.gui.hudHealth.visible=On,game.graphics.gui.hudEnergy_shadow.visible=On,game.graphics.gui.hudEnergy.visible=On},UI.resizeHUD=function(){var On=.5*game.scale,Ln=game.halfScreenX-30*game.scale,kn=game.halfScreenX+30*game.scale;game.graphics.gui.hudHealth_shadow.scale.set(On),game.graphics.gui.hudEnergy_shadow.scale.set(On),game.graphics.gui.hudHealth_shadow.position.set(Ln,game.halfScreenY),game.graphics.gui.hudEnergy_shadow.position.set(kn,game.halfScreenY),game.graphics.gui.hudSpriteHealth.scale.set(On),game.graphics.gui.hudSpriteHealth.position.set(Ln,game.halfScreenY),game.graphics.gui.hudSpriteEnergy.scale.set(On),game.graphics.gui.hudSpriteEnergy.position.set(kn,game.halfScreenY)},UI.selectAircraft=function(On){Network.sendCommand("respawn",On+"")},UI.aircraftSelected=function(On){On=parseInt(On);for(var Ln=1;5>=Ln;Ln++)Ln==On?$("#selectaircraft-"+Ln).addClass("sel"):$("#selectaircraft-"+Ln).removeClass("sel")},UI.killed=function(On){var Ln=null==On.level?"":"<span class=\"level\">"+On.level+"</span>";(1500<game.time-bn||6<=_n.length)&&(_n=[]),bn=game.time,_n.push([On.flag,On.name,Ln]);for(var kn="",Nn="",Fn=0;Fn<_n.length;Fn++)Nn=_n[Fn][1],1!=_n.length&&10<Nn.length&&(Nn=Nn.substr(0,10)+"..."),kn+="<span class=\"player\"><span class=\"flag big flag-"+_n[Fn][0]+"\"></span>"+UI.escapeHTML(Nn)+_n[Fn][2]+"</span>";mn={type:"default",duration:3e3,msg:"You have destroyed"+kn}},UI.killedBy=function(On){var Ln=null==On.level?"":"<span class=\"level\">"+On.level+"</span>";mn={type:"destroyed",duration:3e3,msg:"Destroyed by<span class=\"playerbig\"><span class=\"flag big flag-"+On.flag+"\"></span>"+UI.escapeHTML(On.name)+Ln+"</span>"}},UI.errorHandler=function(On){switch(On.error){case 1:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Packet flooding detected",2e4),Network.receivedError(On.error);break;case 2:UI.showMessage("alert","<span class=\"info\">BANNED</span>Packet flooding detected",2e4),Network.receivedError(On.error);break;case 3:UI.showMessage("alert","<span class=\"info\">BANNED</span>You have been globally banned",2e4),Network.receivedError(On.error);break;case 4:Network.receivedError(On.error),Games.redirRoot();break;case 5:UI.showMessage("alert","<span class=\"info\">RESPAWN</span>Full health and 2 seconds of inactivity required",3e3);break;case 6:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>AFK for more than 10 minutes<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",72e5),Network.receivedError(On.error);break;case 7:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>You have been kicked out",2e4),Network.receivedError(On.error);break;case 8:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Invalid login data",2e4),Network.receivedError(On.error);break;case 9:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Incorrect protocol level<br>Please clear your browser cache and refresh",2e4),Network.receivedError(On.error);break;case 10:UI.showMessage("alert","<span class=\"info\">BANNED</span>Account banned",2e4),Network.receivedError(On.error);break;case 11:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Account already logged in<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",2e4),Network.receivedError(On.error);break;case 12:UI.showMessage("alert","<span class=\"info\">RESPAWN</span>Cannot respawn or change aircraft in a Battle Royale game",3e3);break;case 13:UI.showMessage("alert","<span class=\"info\">SPECTATE</span>Full health and 2 seconds of inactivity required",3e3);break;case 20:UI.showMessage("information","<span class=\"info\">UPGRADE</span>Not enough upgrade points",3e3);break;case 30:UI.addChatMessage("Chat throttled to prevent spamming");break;case 31:UI.showMessage("alert","<span class=\"info\">THROTTLED</span>Flag change too fast");break;case 100:UI.addChatMessage("Unknown command");}},UI.showCommandReply=function(On){if(0==On.type)UI.addChatMessage(UI.escapeHTML(On.text));else{var Ln=JSON.stringify(JSON.parse(On.text),null,"    "),kn="<div class=\"close\" onclick=\"$(this).parent().remove()\"></div><div class=\"text\"><pre>"+UI.escapeHTML(Ln)+"</pre></div>";$("body").append("<div id=\"debugpopup\" oncontextmenu=\"event.stopPropagation()\">"+kn+"</div>")}},UI.updateHUD=function(On,Ln,kn){On=Tools.clamp(On,0,1),Ln=Tools.clamp(Ln,0,1),game.graphics.gui.hudHealth.rotation=-1.1*(1-On),game.graphics.gui.hudEnergy.rotation=Math.PI+1.1*(1-Ln),game.graphics.gui.hudHealth.tint=.5<On?Tools.colorLerp(13487404,2591785,2*(On-.5)):Tools.colorLerp(12201261,13487404,2*On);var Nn=3374821;kn&&(Nn=Ln<config.ships[kn.type].energyLight?2841755:3374821),game.graphics.gui.hudEnergy.tint=Nn},UI.minimizeChat=function(On){Kt||(Wt&&UI.toggleChatBox(),Kt=!0,Qt=0,UI.hide("#chatbox"),UI.hide("#chatunreadlines"),UI.show("#maximizechat"),On&&On.stopPropagation())},UI.maximizeChat=function(){if(Kt){Kt=!1,UI.hide("#maximizechat"),UI.hide("#chatunreadlines"),UI.show("#chatbox");var On=$("#chatbox");On.scrollTop(On[0].scrollHeight)}},UI.closeScore=function(){Jt&&(UI.hidePanel("#scoredetailed"),Jt=!1,clearInterval(Zt))},UI.openScore=function(){Jt||(UI.closeAllPanels("score"),UI.showPanel("#scoredetailed"),Jt=!0,Network.getScores(),clearInterval(Zt),Zt=setInterval(Network.getScores,5e3))},UI.toggleScore=function(){Jt?UI.closeScore():UI.openScore()},UI.openLogin=function(){dn||(UI.showPanel("#loginselector"),dn=!0,Games.closeDropdowns())},UI.closeLogin=function(){dn&&(UI.hidePanel("#loginselector"),dn=!1)},UI.showPanel=function(On){var Ln=.9,kn=1;config.phone&&(Ln*=.7,kn*=.7),$(On).css({display:"block",opacity:"0",transform:"scale("+Ln+")","pointer-events":"auto"}),$(On).width(),$(On).css({opacity:"1",transform:"scale("+kn+")",transition:"all 0.75s cubic-bezier(0.23, 1, 0.32, 1)"}),"#custom-msg"!=On&&Sound.UIClick()},UI.hidePanel=function(On,Ln,kn){if("#custom-msg"!=On||$("#custom-msg").length){var Nn=.9;config.phone&&(Nn*=.7),$(On).css({opacity:"0",transform:"scale("+Nn+")","pointer-events":"none"}),Sound.UIClick(),setTimeout(function(Fn){if("#mainmenu"===Fn?!nn:"#scoredetailed"===Fn?!Jt:"#howtoplay"===Fn?!tn:"#invitefriends"===Fn?!sn:"#loginselector"===Fn?!dn:!Ln){if(kn)return void $(Fn).remove();$(Fn).css({display:"none",transform:"none",transition:"none"})}},800,On)}},UI.openInvite=function(){sn||(UI.closeAllPanels("invite"),game.inviteLink="https://airma.sh/#"+game.playRegion+"-"+game.playRoom,$("#invite-link").html(game.inviteLink),$("#invite-link").attr("href",game.inviteLink),UI.showPanel("#invitefriends"),sn=!0)},UI.closeInvite=function(){sn&&(UI.hidePanel("#invitefriends"),sn=!1)},UI.toggleInvite=function(){sn?UI.closeInvite():UI.openInvite()},UI.closeMainMenu=function(){nn&&(UI.hidePanel("#mainmenu"),nn=!1)},UI.updateMainMenuSettings=function(){config.settings.hidpi?$("#mainmenu-hidpi-tick").addClass("ticked"):$("#mainmenu-hidpi-tick").removeClass("ticked")},UI.openMainMenu=function(){nn||(UI.closeAllPanels("mainmenu"),UI.updateMainMenuSettings(),UI.showPanel("#mainmenu"),nn=!0)},UI.toggleMainMenu=function(){nn?UI.closeMainMenu():UI.openMainMenu()},UI.closeAllPanels=function(On){"mainmenu"!==On&&UI.closeMainMenu(),"score"!==On&&UI.closeScore(),"help"!==On&&UI.hideHelp(),"games"!==On&&Games.closeGames(),"invite"!==On&&UI.closeInvite(),"login"!==On&&UI.closeLogin(),"keybinds"!==On&&Input.closeKeybinds(),$("#custom-msg").length&&UI.hidePanel("#custom-msg",!1,!0)};var Cn=function(On){return 1e3>(On=Math.round(On))?On:1e5>On?(On/1e3).toFixed(1)+" K":1e6>On?Math.round(On/1e3)+" K":(On/1e6).toFixed(1)+" M"};UI.updateScore=function(On){if(Jt){var Ln=On.scores,kn=["gold","silver","bronze"];Ln.sort(function(Jn,Zn){return Zn.score-Jn.score});var Nn=[["name","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["damage","Damage"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]];On.c==Network.SERVERPACKET.SCORE_DETAILED_BTR?Nn=[["name","&nbsp;"],["wins","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]]:On.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(Nn=[["name","&nbsp;"],["captures","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]]);for(var Fn="",Bn=0;Bn<Nn.length;Bn++)Fn+="<div class=\""+Nn[Bn][0]+"\">"+Nn[Bn][1]+"</div>";for(var Yn="",Hn="",Wn=-1,jn=-1,zn=0,Un,Gn,Xn;zn<Ln.length;zn++)null!=(Un=Players.get(Ln[zn].id))&&(Gn=2>=zn?"&nbsp;<div class=\"badge detail "+kn[zn]+"\"></div>":zn+1+".",Xn=Un.me()?" sel":"",Yn=On.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" team-"+Un.team:On.c!=Network.SERVERPACKET.SCORE_DETAILED_BTR||Ln[zn].alive?"":" inactive",Hn+="<div class=\"item"+Xn+"\" player-id=\""+Un.id+"\"><div class=\"name\"><div class=\"position\">",Hn+=Gn+"</div><div class=\"flag small flag-"+Un.flag+"\"></div>",Hn+="<div class=\"player"+Yn+"\">"+(Un.removedFromMap?UI.escapeHTML(Un.name).strike():UI.escapeHTML(Un.name))+"</div></div>",On.c==Network.SERVERPACKET.SCORE_DETAILED_BTR&&(0==Ln[zn].wins?Hn+="<div class=\"wins\">&nbsp;</div>":Hn+="<div class=\"wins\">"+Ln[zn].wins+"<div class=\"wins-container\">&nbsp;<div class=\"wins-icon\"></div></div></div>"),On.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(0==Ln[zn].captures?Hn+="<div class=\"captures\">&nbsp;</div>":Hn+="<div class=\"captures\">"+Ln[zn].captures+"<div class=\"captures-container\">&nbsp;<div class=\"captures-icon\"></div></div></div>"),Hn+="<div class=\"kills\">"+Ln[zn].kills+"</div>",Hn+="<div class=\"deaths\">"+Ln[zn].deaths+"</div>",On.c==Network.SERVERPACKET.SCORE_DETAILED&&(Hn+="<div class=\"damage\">"+Cn(Ln[zn].damage)+"</div>"),Hn+="<div class=\"bounty\">"+Ln[zn].score+"</div>",Hn+="<div class=\"rank\">"+(0==Ln[zn].level?"&nbsp;":Ln[zn].level)+"</div>",Hn+="<div class=\"ping\">"+Ln[zn].ping+"<span class=\"ms\">ms</span></div>",Hn+="</div>",On.c==Network.SERVERPACKET.SCORE_DETAILED?Ln[zn].damage>Wn&&(Wn=Ln[zn].damage,jn=Un):On.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?Ln[zn].captures>Wn&&(Wn=Ln[zn].captures,jn=Un):Ln[zn].kills>Wn&&(Wn=Ln[zn].kills,jn=Un));var Vn="",qn="";if(1<Ln.length&&(Vn="&bull;&nbsp;&nbsp;"+Ln.length+" players",0<Wn)){if(On.c==Network.SERVERPACKET.SCORE_DETAILED)var Kn=Cn(Wn),Qn=" damage";else Kn=Wn+"",Qn=On.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" capture":" kill",1<Wn&&(Qn+="s");qn="<div class=\"mvpbadge\">MVP</div><div class=\"flag flag-"+jn.flag+"\"></div><div class=\"name\">"+UI.escapeHTML(jn.name)+"</div><div class=\"damage\">&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+Kn+Qn+"</div>"}$("#scoreplayers").html(Vn),$("#scoretable").html(Fn),$("#scorecontainer").html(Hn),$("#scoremvp").html(qn),$("#scorecontainer div").click(SWAM.scoreboard_click_handler)}},UI.popMenu=function(On,Ln){if(game.state==Network.STATE.LOGIN)return Games.closeDropdowns(),void UI.closeLogin();Ln||game.state!=Network.STATE.PLAYING||UI.closeAllPanels();var kn=$(On.target).parent().data("playerid");if(null==kn&&(kn=$(On.target).data("playerid")),null!=kn&&kn!=game.myID){var Nn=Players.get(kn);if(null==Nn)return!0;var Fn={left:"20px",top:$(On.target).parent()[0].getBoundingClientRect().top-166+"px"};$t||(Fn.display="block",$t=!0);var Bn=null==Yt[Nn.id]?"Ignore":"Unignore",Un="<div class=\"header\">"+UI.escapeHTML(Nn.name)+"</div><div class=\"item\" onclick=\"UI.contextWhisper()\">Whisper</div><div class=\"item\" onclick=\"UI.context"+Bn+"()\">"+Bn+"</div><div class=\"item\" onclick=\"UI.contextVotemute()\">Vote mute</div><div class=\"arrow\"></div>";return $("#contextmenu").html(Un),$("#contextmenu").css(Fn),en=Nn.id,On.stopPropagation(),!1}UI.closeMenu()};var Pn=function(On){return(On+"").replace(/&/g,"&a;").replace(/ /g,"&s;")},Dn=function(On){return(On+"").replace(/&s;/g," ").replace(/&a;/g,"&")};UI.chatWhisper=function(On,Ln){On=Dn(On);var kn=Players.getByName(On);null==kn?UI.addChatMessage("Unknown player"):Network.sendWhisper(kn.id,Ln)},UI.chatIgnore=function(On){var Ln=Players.get(On);null!=Ln&&On!=game.myID&&null==Yt[Ln.id]&&(Yt[Ln.id]=!0,UI.addChatMessage("Ignoring player "+UI.escapeHTML(Ln.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;To unignore type /unignore "+UI.escapeHTML(Pn(Ln.name)),!0))},UI.chatUnignore=function(On){Yt[On.id]&&(delete Yt[On.id],UI.addChatMessage("Removed player "+UI.escapeHTML(On.name)+" from ignore list",!0))},UI.chatVotemute=function(On){if(On.id!=game.myID){Network.voteMute(On.id);var Ln=Math.floor(Math.sqrt(Players.count()[1]))+1;UI.addChatMessage("Voted to mute "+UI.escapeHTML(On.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+Ln+" total votes are required",!0)}},UI.chatVotemutePass=function(On){UI.addChatMessage("The vote to mute "+UI.escapeHTML(On.name)+" has passed",!0)},UI.chatMuted=function(){UI.addChatMessage("You have been muted")},UI.contextWhisper=function(){if(null!=en){var On=Players.get(en);null!=On&&en!=game.myID&&UI.shortcutChat("/w "+Pn(On.name)+" ")}},UI.contextIgnore=function(){null!=en&&en!=game.myID&&UI.chatIgnore(en)},UI.contextUnignore=function(){if(null!=en){var On=Players.get(en);null!=On&&en!=game.myID&&UI.chatUnignore(On)}},UI.contextVotemute=function(){if(null!=en){var On=Players.get(en);null!=On&&en!=game.myID&&UI.chatVotemute(On)}},UI.closeMenu=function(){$t&&(UI.hide("#contextmenu"),$t=!1)},UI.nameEntered=function(){var On=$("#playername").val().trim();0<On.length?(game.myOriginalName=On,Games.start(On,!0)):Games.highlightInput("#playername")},UI.selectUpgrade=function(On){Network.sendCommand("upgrade",On+"")};var Mn=function(){for(var On=["","speed","defense","energy","missile"],Ln=1;5>Ln;Ln++)Ln-1,5>yn[On[Ln]]&&0<gn.upgrades?$("#selectupgrade-"+Ln).addClass("lighted"):$("#selectupgrade-"+Ln).removeClass("lighted")};UI.updateUpgrades=function(On,Ln,kn){for(var Fn=["","speed","defense","energy","missile"],Bn=1,Nn;5>Bn;Bn++)Nn=Bn-1,"",null!=yn[Fn[Bn]]&&yn[Fn[Bn]]==On[Nn]||(yn[Fn[Bn]]=On[Nn],$("#selectupgrade-"+Bn+"-level").html(On[Nn]),an&&on-100==Bn&&UI.popTooltip(null,100+Bn));if(null!=kn){if(0!=kn){var Gn="+"+Math.round(100*(config.upgrades[Fn[kn]].factor[yn[Fn[kn]]]-1))+"% "+["","Speed","Defense","Energy Regen","Missile Speed"][kn];UI.showMessage("information","<span class=\"info\">UPGRADE</span>"+Gn,3e3),Sound.playerUpgrade()}gn.upgrades=Ln,$("#score-upgrades").html(Ln)}Mn()},UI.resetUpgrades=function(){UI.updateUpgrades([0,0,0,0])},UI.popBigMsg=function(On){if(1==On)var Ln="<div id=\"big-message\" onclick=\"UI.closeBigMsg()\"><div class=\"msg\">Mobile mode</div><div class=\"small\">Mobile mode has touch controls and requires latest phone/tablet hardware.</div><div class=\"small nopadtop\">For the full experience please play on a PC with a physical keyboard.</div><div class=\"greyed\">Tap anywhere to close</div></div>";else Ln="<div id=\"big-message\"><div class=\"msg\">WebGL required</div><div class=\"small\">This game requires a WebGL enabled browser in order to run.<br>Please allow WebGL for this domain to continue.</div>";$("body").append(Ln)},UI.closeBigMsg=function(){$("#big-message").remove()},UI.showHelp=function(On){tn||(UI.closeAllPanels("help"),!0===On?$("#howtoplay").addClass("hide"):$("#howtoplay").removeClass("hide"),UI.showPanel("#howtoplay"),tn=!0)},UI.hideHelp=function(){tn&&(UI.hidePanel("#howtoplay"),tn=!1)},UI.toggleHelp=function(){tn?UI.hideHelp():UI.showHelp()},UI.updateSound=function(On){config.settings.sound?($("#settings-sound").addClass("soundon"),$("#settings-sound").removeClass("soundoff"),$("#mainmenu-sound-icon").addClass("soundon"),$("#mainmenu-sound-icon").removeClass("soundoff"),$("#mainmenu-sound-text").html("Disable Sound")):($("#settings-sound").addClass("soundoff"),$("#settings-sound").removeClass("soundon"),$("#mainmenu-sound-icon").addClass("soundoff"),$("#mainmenu-sound-icon").removeClass("soundon"),$("#mainmenu-sound-text").html("Enable Sound")),On&&UI.showMessage("alert","<span class=\"info\">SOUND</span>"+(config.settings.sound?"Enabled":"Disabled"),3e3)},UI.gameStart=function(On,Ln){Ln&&($("#login-ui").remove(),UI.show("#logosmall"),UI.show("#menu",!0),config.mobile||UI.show("#chatbox"),UI.show("#roomnamecontainer"),UI.show("#scoreboard"),UI.show("#scorebig"),UI.show("#settings"),UI.show("#sidebar"),config.mobile&&Rn(),config.settings.helpshown||(UI.showHelp(!0),config.settings.helpshown=!0,Tools.setSettings({helpshown:!0}))),UI.hide("#gamespecific"),$("#gameinfo").html("&nbsp;"),$("#gameinfo").addClass("ingame"),yn={},UI.resetUpgrades(),UI.hideSpectator(),UI.resetPowerups(),$("#open-menu").html("Connecting..."),game.myName=On,Network.setup()};var Rn=function(){In(),Graphics.toggleFullscreen(),Input.setupTouch()},In=function(){$("#howtoplay").addClass("mobile"),$("#howtoplay").html("<div class=\"header\">HOW TO PLAY</div><div class=\"mobile-graphic\"></div><div class=\"commands\">For the best game experience play on a PC</div>")};UI.reconnection=function(){jt=0,Vt=-1,gn={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},mn=!1,yn={},Yt={},UI.resetUpgrades(),UI.resetPowerups(),UI.hideSpectator(),UI.wipeAllMinimapMobs(),UI.wipeAllMessages(),Games.wipe(),$("#gameinfo").html("&nbsp;"),$("#scoreboard").html(""),$("#chatlines").html(""),$("#score-score").html("&nbsp;"),$("#score-upgrades").html("&nbsp;"),$("#score-rank").html("-"),$("#roomname").html("&nbsp;"),$("#open-menu").html("Switching Game...")},UI.loggedIn=function(){$("#roomname").html(game.roomName),$("#scoreheader").html(game.roomName+"&nbsp;&nbsp;"),$("#open-menu").html("<span class=\"arrowdown\"></span>"+game.roomName+"&nbsp;&nbsp;<span class=\"region\">&bull;&nbsp;&nbsp;"+game.regionName+"</span>"),UI.visibilityHUD(!0),UI.visibilityMinimap(!0),UI.updateHUD(1,1)},UI.popTooltip=function(On,Ln){if(null==Ln)var kn=On.data.t,Nn=On.currentTarget.getBoundingClientRect();else kn=Ln;var Fn="";if(100>kn){var Bn=xn[kn],Un=["","Agility","Defense","Regen","Damage"];Fn+="<div class=\"header\">"+Bn[0]+"</div>";for(var Gn=1;4>=Gn;Gn++)Fn+="<div class=\"item\"><div class=\"name\">"+Un[Gn]+"</div><div class=\"val\">&nbsp;<div class=\"bar\"><div class=\"progress\" style=\"width: "+Bn[Gn]+"%\"></div></div></div></div>";Fn+="<div class=\"item\"><div class=\"special\">"+Bn[5]+"</div><div class=\"desc\">"+Bn[6]+"</div></div>",Fn+="<div class=\"item\"><div class=\"clickto\">Click to respawn</div></div>"}else{var Xn=["","speed","defense","energy","missile"],Yn=kn-100,Hn=yn[Xn[Yn]],Wn="+"+Math.round(100*(config.upgrades[Xn[Yn]].factor[yn[Xn[Yn]]]-1))+"%";(Fn+="<div class=\"header\">"+xn[kn][0]+"</div>",Fn+="<div class=\"item\"><div class=\"level\">"+Hn+" / "+(config.upgrades[Xn[Yn]].factor.length-1)+"</div>",0<Hn&&(Fn+="<div class=\"percent\">"+Wn+"</div></div>"),Hn<config.upgrades[Xn[Yn]].factor.length-1)?(Fn+="<div class=\"item smaller\"><div class=\"requires\">Requires 1 upgrade point</div></div>",Fn+="<div class=\"item smaller\"><div class=\"clickto\">Click to upgrade to "+(Wn="+"+Math.round(100*(config.upgrades[Xn[Yn]].factor[yn[Xn[Yn]]+1]-1))+"%")+"</div></div>"):Fn+="<div class=\"item smaller\"><div class=\"clickto\">Max upgrade reached</div></div>"}Fn+="<div class=\"arrow\"></div>",null==Ln&&$("#tooltip").css({left:Math.round(Nn.left+60)+"px",top:Math.round(Nn.top-10)+"px"}),$("#tooltip").html(Fn),on=kn,null!=rn&&clearTimeout(rn),an||(an=!0,UI.show("#tooltip"))},UI.closeTooltip=function(){an&&(null!=rn&&clearTimeout(rn),rn=setTimeout(function(){an&&(UI.hide("#tooltip"),$("#tooltip").html(""),an=!1,rn=null)},250))},UI.startDragChat=function(On){cn.x=On.originalEvent.pageX,cn.y=On.originalEvent.pageY,cn.width=$("#chatbox").width()+16,cn.height=$("#chatbox").height()+16,$("#chatbox").addClass("hovered"),$(window).on("mousemove",UI.dragChat),$(window).on("mouseup",UI.endDragChat)},UI.dragChat=function(On){var Ln=On.originalEvent.pageX,kn=On.originalEvent.pageY;if(0!=Ln&&0!=kn){100>game.screenY-kn&&(kn=game.screenY-100);var Nn=Ln-cn.x,Fn=kn-cn.y;$("#chatbox").css({width:cn.width+Nn+"px",height:cn.height-Fn+"px"}),$("#minimizechatcontainer").css({width:cn.width+Nn+"px",bottom:cn.height-Fn+"px"}),$("#chatinput").css({width:cn.width+Nn-12+"px",bottom:cn.height-Fn+20+"px"}),$("#radioPanel").css({bottom:cn.height-Fn+20+"px"})}},UI.endDragChat=function(){$("#chatbox").removeClass("hovered"),$(window).off("mousemove",UI.dragChat),$(window).off("mouseup",UI.endDragChat)},UI.setup=function(){$(window).resize(wn),$(window).on("orientationchange",wn),$(window).on("contextmenu",function(Ln){return UI.popMenu(Ln,!0),Ln.preventDefault(),!1}),$(window).on("focus",Input.gameFocus),$(window).on("blur",Input.gameBlur),$(window).on("click",UI.popMenu),$("#minimizechat").on("click",UI.minimizeChat),$("#maximizechat").on("click",UI.maximizeChat),$("#viewscore").on("click",function(Ln){game.state==Network.STATE.PLAYING&&(UI.openScore(),Ln.stopPropagation())}),$("#selectaircraft-1").on("click",function(){UI.selectAircraft(1)}),$("#selectaircraft-2").on("click",function(){UI.selectAircraft(2)}),$("#selectaircraft-3").on("click",function(){UI.selectAircraft(3)}),$("#selectaircraft-4").on("click",function(){UI.selectAircraft(4)}),$("#selectaircraft-5").on("click",function(){UI.selectAircraft(5)}),$("#mainmenu-fullscreen").on("click",Graphics.toggleFullscreen),$("#mainmenu-invite").on("click",UI.openInvite),$("#mainmenu-score").on("click",UI.openScore),$("#mainmenu-game").on("click",Games.popGames),$("#mainmenu-hidpi").on("click",Graphics.toggleHiDPI),$("#mainmenu-sound").on("click",Sound.toggle),config.mobile?($("#mainmenu-keybinds-text").html("<br>How To Play"),$("#mainmenu-keybinds").on("click",UI.toggleHelp),$(".keybind").css({display:"none"})):$("#mainmenu-keybinds").on("click",Input.openKeybinds),$("#settings-mainmenu").on("click",function(Ln){UI.toggleMainMenu(),Ln.stopPropagation()}),$("#settings-sound").on("click",function(Ln){Sound.toggle(),Ln.stopPropagation()}),$("#mainmenu").on("click",function(Ln){Ln.stopPropagation()}),$("#scoredetailed").on("click",function(Ln){Ln.stopPropagation()}),$("#invitefriends").on("click",function(Ln){Ln.stopPropagation()}),$("#keybinds").on("click",function(Ln){Ln.stopPropagation()}),$("#invite-link").on("contextmenu",function(Ln){Ln.stopPropagation()}),$("#resetbinds").on("click",Input.resetBinds),config.mobile||($("#chatbox").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),$("#chatinput").on("blur",function(){Wt&&UI.toggleChatBox(!1)}),$("#resizechat").on("mousedown",UI.startDragChat)),$("#scorecontainer").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),$("#selectupgrade-1").on("click",function(){UI.selectUpgrade(1)}),$("#selectupgrade-2").on("click",function(){UI.selectUpgrade(2)}),$("#selectupgrade-3").on("click",function(){UI.selectUpgrade(3)}),$("#selectupgrade-4").on("click",function(){UI.selectUpgrade(4)});var On;for(On=1;5>=On;On++)$("#selectaircraft-"+On).on("mouseenter",{t:On},UI.popTooltip),$("#selectaircraft-"+On).on("mouseleave",UI.closeTooltip);for(On=1;4>=On;On++)$("#selectupgrade-"+On).on("mouseenter",{t:100+On},UI.popTooltip),$("#selectupgrade-"+On).on("mouseleave",UI.closeTooltip);$("#playbutton").on("click",function(){Sound.UIClick(),UI.nameEntered()}),$("#playername").on("keypress",function(Ln){13===Ln.which&&UI.nameEntered()}),window.onerror=function(Ln,kn,Nn,Fn,Bn){game.state!==Network.STATE.PLAYING&&game.state!==Network.STATE.CONNECTING||Tools.handleError({msg:Ln,url:kn,lineNo:Nn,columnNo:Fn,error:Bn})}}}(),function(){var Xt=!1,Yt=!1,Ht=!1,Wt=["","Free For All","Capture The Flag","Battle Royale"],jt=["","ffa","ctf","br"],zt=0,Vt={},qt=0,Kt=null,Qt=null,Jt=!1,Zt=!1,$t=null,en=[],tn=!1,nn={},an={},rn=null,on=!1,sn={radius:0,pos:Vector.zero(),speed:0},dn={2:"Custom country flags",3:"Emotes",4:"Flag Pack #1"};Games.setup=function(){$("#playregion").on("click",function(Sn){Games.updateRegion(!0,Sn)}),$("#playtype").on("click",function(Sn){Games.updateType(!0,Sn)}),$("#open-menu").on("click",function(Sn){Games.popGames(),Sn.stopPropagation()}),$("#gameselector").on("click",function(Sn){Sn.stopPropagation()}),$("#invite-copy").on("click",Games.copyInviteLink),$("#loginbutton").on("click",function(Sn){UI.openLogin(),Sn.stopPropagation()}),$("#login-facebook").on("click",function(){Games.popupLogin(1)}),$("#login-google").on("click",function(){Games.popupLogin(2)}),$("#login-twitter").on("click",function(){Games.popupLogin(3)}),$("#login-reddit").on("click",function(){Games.popupLogin(4)}),$("#login-twitch").on("click",function(){Games.popupLogin(5)}),$("#loginselector").on("click",function(Sn){Sn.stopPropagation()}),$("#gotomainpage").on("click",Games.redirRoot),$("#lifetime-signin").on("click",Games.redirRoot),null==config.settings.session?Games.playerGuest():Games.playerAuth(),un(function(){return(Zt=!0,pn(),DEVELOPMENT&&"#tony"==window.location.hash)?(game.playRegion="eu",game.playRoom="ffa1",game.playInvited=!0,game.myOriginalName=window.location.hash.substr(1),void Games.start(game.myOriginalName,!0)):void(tn||(fn(),Games.updateRegion(!1),Games.updateType(!1),bn()))},!0)},Games.popupLogin=function(Sn){ln("/auth_"+["","facebook","google","twitter","reddit","twitch"][Sn],"Login",4==Sn?900:500,500)};var ln=function(Sn,An,wn,Cn){var Pn=void 0==window.screenLeft?window.screenX:window.screenLeft,Dn=void 0==window.screenTop?window.screenY:window.screenTop,Mn=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-wn/2+Pn,Rn=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-Cn/2+Dn;window.open(Sn,An,"width="+wn+", height="+Cn+", top="+Rn+", left="+Mn)};window.loginSuccess=function(Sn){config.settings.session=Sn,Tools.setSettings({session:Sn}),Tools.removeSetting("flag"),Games.playerAuth(),UI.closeLogin()},window.loginFailure=function(){},Games.playerGuest=function(){UI.show("#playbutton",!0),UI.show("#loginbutton",!0)},Games.playerAuth=function(){Tools.ajaxPost("/auth",{session:config.settings.session},function(Sn){if(null!=Sn){game.loggedIn=!0,game.myUserID=Sn.user;var An=UI.escapeHTML(Sn.authName.substr(0,30))+"<span class=\"grey\">("+["","Facebook","Google","Twitter","Reddit","Twitch"][Sn.authType]+")</span>";null!=Sn.name&&$("#playername").val(Sn.name),$("#logout").html(An+"<span class=\"link\" onclick=\"Games.logout()\">Logout</span>"),$("#logout-mainmenu").html("Logged in as "+An+"<span class=\"button\" onclick=\"Games.logout()\">LOG OUT</span>"),$("#loginbutton").remove(),$("#lifetime-account").remove(),$("#playbutton").html("PLAY"),UI.show("#playbutton",!0)}else Games.playerGuest()})},Games.logout=function(){Tools.removeSetting("session"),Tools.removeSetting("name"),Tools.removeSetting("flag"),window.location="/"};var un=function(Sn,An){var wn="/games";An&&(wn+="?main=1"),$.ajax({url:wn,dataType:"json",cache:!1,success:function(Cn){try{en=JSON.parse(Cn.data)}catch(Pn){return}if("xx"==game.myFlag&&(game.myFlag=Cn.country),An&&game.protocol!=Cn.protocol){if("#reload"!==window.location.hash)return void Tools.ajaxPost("/clienterror",{type:"protocol"},function(){UI.showMessage("alert","<span class=\"mainerror\">Protocol update<br>Your client is being updated to the new version</span>",3e4),setTimeout(function(){window.location="/?"+Tools.randomID(10)+"#reload"},5e3)});Tools.ajaxPost("/clienterror",{type:"protocolretry"})}Sn()},error:function(){}})},pn=function(){zt=0;for(var Sn=0,An=0;An<en.length;An++)for(var wn=0;wn<en[An].games.length;wn++)zt+=en[An].games[wn].players,Sn++;if(0==Sn)tn=!0,UI.showMessage("alert","<span class=\"mainerror\">We are currently performing server maintenance<br>Please try again in a few minutes</span>",3e4);else{var Cn="<div class=\"item smallerpad\">"+zt+"</div>player"+(1<zt?"s":"")+" online";$("#gameinfo").html(Cn)}},cn=function(Sn){if("closest"===Sn)return{name:"Closest"};for(var An=0;An<en.length;An++)if(en[An].id===Sn)return en[An];return game.playRegion="closest",{name:"Closest"}},hn=function(Sn,An){var wn=cn(Sn);if(null==wn)return null;if(null==wn.games)return null;for(var Cn=0;Cn<wn.games.length;Cn++)if(wn.games[Cn].id===An)return wn.games[Cn];var Pn=jt.indexOf(An);if(-1!=Pn)for(Cn=0;Cn<wn.games.length;Cn++)if(wn.games[Cn].type==Pn)return{name:Wt[Pn]};return null},fn=function(){var Sn=window.location.hash;if(history.replaceState(null,null,"/"),"#reload"!==Sn&&null!=Sn&&!(4>Sn.length||20<Sn.length)){var An=(Sn=Sn.substr(1)).indexOf("-");if(-1!=An){var wn=Sn.substr(0,An),Cn=Sn.substr(An+1);null!=hn(wn,Cn)&&(game.playRegion=wn,game.playRoom=Cn,game.playInvited=!0)}}};Games.selectRegion=function(Sn,An){Sn.stopPropagation(),Sound.UIClick(),game.playRegion=An,Games.updateRegion(!1),Games.updateType()},Games.selectGame=function(Sn,An){Sn.stopPropagation(),Sound.UIClick(),game.playRoom=An,Games.updateType(!1)},Games.closeDropdowns=function(){Yt&&Games.updateType(!1),Xt&&Games.updateRegion(!1)},Games.updateRegion=function(Sn,An){var wn="",Cn=null;if(Zt&&!tn){if(null!=An&&(An.stopPropagation(),Xt||Sound.UIClick()),Sn&&UI.closeLogin(),null==Sn&&(Sn=Xt),Sn){Yt&&Games.updateType(!1),wn+="<div class=\"item\"><div class=\"region header\">REGION</div><div class=\"players header\">PLAYERS</div><div class=\"ping header\">PING</div><div class=\"clear\"></div></div>";var Pn="";null!=Qt&&(Pn="<span class=\"autoregion\">("+en[Qt].name+")</span>"),wn+="<div class=\"item selectable"+("closest"===game.playRegion?" sel":"")+"\" onclick=\"Games.selectRegion(event, &quot;closest&quot;)\"><div class=\"region chooser\">Closest"+Pn+"</div><div class=\"clear\"></div></div>";for(var Dn=0;Dn<en.length;Dn++){for(var Mn=0,Rn=0;Rn<en[Dn].games.length;Rn++)Mn+=en[Dn].games[Rn].players;var In;In=null==en[Dn].ping?"&nbsp;":Math.round(en[Dn].ping)+"<span class=\"ms\">ms</span>",wn+="<div class=\"item selectable"+(game.playRegion===en[Dn].id?" sel":"")+"\" onclick=\"Games.selectRegion(event, &quot;"+en[Dn].id+"&quot;)\"><div class=\"region chooser\">"+en[Dn].name+"</div><div class=\"players number\">"+Mn+"</div><div class=\"ping chooser nopadding\">"+In+"</div><div class=\"clear\"></div></div>"}wn+="<div class=\"item\"></div>",Cn={width:"240px",height:"auto","z-index":"2"},$("#playregion").removeClass("hoverable")}else wn+="<div class=\"arrowdown\"></div>",wn+="<div class=\"playtop\">REGION</div>",wn+="<div class=\"playbottom\">"+cn(game.playRegion).name+"</div>",Cn={width:"130px",height:"40px","z-index":"auto"},$("#playregion").addClass("hoverable");$("#playregion").html(wn),$("#playregion").css(Cn),Xt=Sn}};var gn=function(){var Sn=game.playRegion;if("closest"===Sn){if(null==Qt)return null;Sn=en[Qt].id}return Sn},mn=function(Sn){var An="<div class=\"infott\">";return 1==Sn?An+="Everyone versus everyone deathmatch. No teams.":2==Sn?An+="Players split into 2 teams. 2 flags are placed inside each base. The objective is to move the enemy flag from their base to your base.":3==Sn&&(An+="Players spawn at random locations all across the map. Destroyed players will not respawn. Last player standing wins."),An+="<div class=\"arrow\"></div></div>"};Games.updateType=function(Sn,An){var wn="",Cn=null;if(Zt&&!tn){if(null!=An&&(An.stopPropagation(),Yt||Sound.UIClick()),Sn&&UI.closeLogin(),null==Sn&&(Sn=Yt),Sn){if(Xt&&Games.updateRegion(!1),wn+="<div class=\"item\"><div class=\"gametype header\">GAME</div><div class=\"players header\">PLAYERS</div><div class=\"clear\"></div></div>",null==(In=gn()))return;null==hn(In,game.playRoom)&&(game.playRoom=jt[1]);var Mn=cn(In).games,Rn=[[],[],[],[],[],[],[],[],[]],Pn,Dn;for(Pn=0;Pn<Mn.length;Pn++)Rn[Mn[Pn].type].push(Mn[Pn]);for(Pn=1;Pn<Rn.length;Pn++)if(0!=Rn[Pn].length)for(wn+="<div class=\"item selectable"+(jt[Pn]===game.playRoom?" sel":"")+"\" onclick=\"Games.selectGame(event, &quot;"+jt[Pn]+"&quot;)\"><div class=\"gametype chooser\">"+Wt[Pn]+"<span class=\"infocontainer\">&nbsp;<div class=\"infoicon\">"+mn(Pn)+"</div></span></div><div class=\"clear\"></div></div>",Dn=0;Dn<Rn[Pn].length;Dn++)wn+="<div class=\"item selectable"+(Rn[Pn][Dn].id===game.playRoom?" sel":"")+"\" onclick=\"Games.selectGame(event, &quot;"+Rn[Pn][Dn].id+"&quot;)\"><div class=\"gametype chooser\">"+Rn[Pn][Dn].nameShort+"</div><div class=\"players number\">"+Rn[Pn][Dn].players+"</div><div class=\"clear\"></div></div>";wn+="<div class=\"item\"></div>",Cn={width:"240px",height:"auto","z-index":"2"},$("#playtype").removeClass("hoverable")}else{wn+="<div class=\"arrowdown\"></div>",wn+="<div class=\"playtop\">GAME</div>";var In;if(null==(In=gn()))return;var On=hn(In,game.playRoom);null==On?(name=Wt[1],game.playRoom=jt[1]):name=On.name,wn+="<div class=\"playbottom\">"+name+"</div>",Cn={width:"190px",height:"40px","z-index":"auto"},$("#playtype").addClass("hoverable")}$("#playtype").html(wn),$("#playtype").css(Cn),Yt=Sn}},Games.popGames=function(){if(!Ht){UI.closeAllPanels("games");var Sn=yn();UI.hide("#menu"),$("#gameselector").html(Sn),UI.show("#gameselector"),Ht=!0,_n(),Sound.UIClick()}};var yn=function(){var Sn="";Sn+="<div class=\"header\">"+game.roomName+"<span class=\"region\">&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+game.regionName+"</span></div><div class=\"buttons\"><div class=\"button\" onclick=\"Games.redirRoot()\">CHANGE REGION</div></div>";var Cn=cn(game.playRegion).games,Pn=[[],[],[],[],[],[],[],[],[]],An,wn;for(An=0;An<Cn.length;An++)Pn[Cn[An].type].push(Cn[An]);var Dn,Mn;for(An=1;An<Pn.length;An++)if(0!=Pn[An].length)for(Sn+="<div class=\"item head\"><div class=\"gametype chooser section\">"+Wt[An]+"<span class=\"infocontainer\">&nbsp;<div class=\"infoicon\">"+mn(An)+"</div></span></div><div class=\"clear\"></div></div>",wn=0;wn<Pn[An].length;wn++)Pn[An][wn].id===game.playRoom?(Dn=" sel",Mn=""):(Dn=" selectable",Mn=" onclick=\"Games.switchGame(&quot;"+Pn[An][wn].id+"&quot;)\""),Sn+="<div class=\"item"+Dn+"\""+Mn+"><div class=\"gametype chooser\">"+Pn[An][wn].nameShort+"</div><div class=\"players number\">"+Pn[An][wn].players+"</div><div class=\"clear\"></div></div>";return Sn};Games.redirRoot=function(){game.reloading=!0,window.location="/"};var _n=function(){un(function(){var Sn=yn();$("#gameselector").html(Sn)})};Games.closeGames=function(){Ht&&(UI.hide("#gameselector"),UI.show("#menu"),Ht=!1,Sound.UIClick())},Games.toggleGames=function(){Ht?Games.closeGames():Games.popGames()},Games.switchGame=function(Sn){Games.closeGames(),null!=Sn&&(game.playRoom=Sn),game.myScore=0,game.state=Network.STATE.CONNECTING,Network.shutdown(),Particles.wipe(),Players.wipe(),Mobs.wipe(),UI.reconnection(),Games.start(game.myOriginalName)};var bn=function(){Vt={},qt=0;for(var An=0,Sn;An<en.length;An++)Sn=en[An].games[Tools.randInt(0,en[An].games.length-1)].host,null==Vt[Sn]&&(Vt[Sn]={ping:9999,num:0,threshold:0,server:An});Games.performPing(),Games.performPing(),Games.performPing(),Kt=setInterval(Games.performPing,300)};Games.performPing=function(){if(!(3<qt||Jt)){var Sn=9999,An=null;for(var wn in Vt)Vt[wn].num<Sn&&(Sn=Vt[wn].num,An=wn);if(6<Sn)null!=Kt&&clearInterval(Kt);else{Vt[An].num++;var Cn;Cn=DEVELOPMENT?"/ping":"https://game-"+An+".airma.sh/ping",xn(An,Cn,function(){xn(An,Cn)})}}};var xn=function(Sn,An,wn){if(null!=Vt[Sn]&&!Jt){qt++;var Cn=performance.now();$.ajax({url:An,dataType:"json",cache:!1,timeout:2e3,success:function(Pn){if(!Jt&&(qt--,1==Pn.pong&&null!=Vt[Sn])){var Dn=performance.now()-Cn;if(Math.abs(Vt[Sn].ping-Dn)<.1*Dn&&Vt[Sn].threshold++,2<=Vt[Sn].threshold)return Dn<Vt[Sn].ping&&(en[Vt[Sn].server].ping=Dn,Games.findClosest(),Games.updateRegion()),void delete Vt[Sn];Dn<Vt[Sn].ping&&(Vt[Sn].ping=Dn,en[Vt[Sn].server].ping=Dn,Games.findClosest(),Games.updateRegion(),null!=wn&&wn())}},error:function(){qt--}})}};Games.findClosest=function(){for(var Sn=9999,An=!1,wn=0;wn<en.length;wn++)null!=en[wn].ping&&en[wn].ping<Sn&&(Sn=en[wn].ping,Qt=wn,An=!0);An&&"closest"===game.playRegion&&Games.updateType()},Games.highlightInput=function(Sn){$(Sn).css({transition:"none",transform:"scale(1.1)","background-color":"rgb(90, 30, 30)"}),$(Sn).width(),$(Sn).css({transition:"all 0.5s ease-in-out",transform:"scale(1)","background-color":"rgb(30, 30, 30)"}),setTimeout(function(){$(Sn).focus()},200)},Games.copyInviteLink=function(){vn(game.inviteLink)&&(UI.show("#invite-copied"),null!=$t&&clearTimeout($t),$t=setTimeout(function(){UI.hide("#invite-copied")},2e3))};var vn=function(Sn){var An=document.createElement("span");An.textContent=Sn,An.style.whiteSpace="pre";var wn=document.createElement("iframe");wn.sandbox="allow-same-origin",document.body.appendChild(wn);var Cn=wn.contentWindow;Cn.document.body.appendChild(An);var Pn=Cn.getSelection();Pn||(Pn=(Cn=window).getSelection(),document.body.appendChild(An));var Dn=Cn.document.createRange();Pn.removeAllRanges(),Dn.selectNode(An),Pn.addRange(Dn);var Mn=!1;try{Mn=Cn.document.execCommand("copy")}catch(Rn){}return Pn.removeAllRanges(),An.remove(),wn.remove(),Mn};Games.start=function(Sn,An){if(!(tn||An&&game.state==Network.STATE.CONNECTING)){var wn=game.playRegion,Cn=gn();if(null!=Cn){game.playRegion=Cn,null!=Kt&&clearInterval(Kt),Jt=!0;var Pn=game.playRoom,Dn=jt.indexOf(Pn);if(-1!=Dn){for(var Mn=cn(game.playRegion).games,Rn=[],In=0;In<Mn.length;In++)Mn[In].type==Dn&&Rn.push(Mn[In].id);Pn=Rn[Tools.randInt(0,Rn.length-1)]}var On=hn(game.playRegion,Pn);game.playHost=On.host,game.playPath=On.id,game.regionName=cn(game.playRegion).name,game.playRoom=Pn,game.state==Network.STATE.LOGIN&&Tools.wipeReel(),game.state=Network.STATE.CONNECTING;var Ln={name:Sn};game.playInvited||(Ln.region=wn),Tools.setSettings(Ln),UI.gameStart(Sn,An),An&&Tools.ajaxPost("/enter",{id:config.settings.id,name:Sn,game:game.playRegion+"-"+game.playRoom,source:null==document.referrer?"":document.referrer,mode:config.mobile?1:0})}}},Games.prep=function(){(Games.wipe(),2==game.gameType)?($("#gamespecific").html("<div class=\"blueflag\"></div><div id=\"blueflag-name\" class=\"blueflag-player\">&nbsp;</div><div class=\"redflag\"></div><div id=\"redflag-name\" class=\"redflag-player\">&nbsp;</div>"),UI.show("#gamespecific"),nn={flagBlue:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:Vector.zero(),basePos:new Vector(-9669,-1471),sprite:Textures.init("ctfFlagBlue",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:1.1*.4,visible:!1}),minimapSprite:Textures.init("minimapFlagBlue"),minimapBase:Textures.init("minimapBaseBlue")},flagRed:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:Vector.zero(),basePos:new Vector(8602,-944),sprite:Textures.init("ctfFlagRed",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:1.1*.4,visible:!1}),minimapSprite:Textures.init("minimapFlagRed"),minimapBase:Textures.init("minimapBaseRed")}},Graphics.minimapMob(nn.flagBlue.minimapBase,nn.flagBlue.basePos.x,nn.flagBlue.basePos.y),Graphics.minimapMob(nn.flagRed.minimapBase,nn.flagRed.basePos.x,nn.flagRed.basePos.y)):3==game.gameType&&($("#gamespecific").html(""),UI.show("#gamespecific"))},Games.wipe=function(){En(),nn.flagBlue&&nn.flagRed&&(game.graphics.layers.flags.removeChild(nn.flagBlue.sprite),game.graphics.layers.flags.removeChild(nn.flagRed.sprite),game.graphics.layers.shadows.removeChild(nn.flagBlue.spriteShadow),game.graphics.layers.shadows.removeChild(nn.flagRed.spriteShadow),game.graphics.layers.ui3.removeChild(nn.flagBlue.minimapSprite),game.graphics.layers.ui3.removeChild(nn.flagRed.minimapSprite),game.graphics.layers.ui2.removeChild(nn.flagBlue.minimapBase),game.graphics.layers.ui2.removeChild(nn.flagRed.minimapBase),nn.flagBlue.sprite.destroy(),nn.flagRed.sprite.destroy(),nn.flagBlue.spriteShadow.destroy(),nn.flagRed.spriteShadow.destroy(),nn.flagBlue.minimapSprite.destroy(),nn.flagRed.minimapSprite.destroy(),nn.flagBlue.minimapBase.destroy(),nn.flagRed.minimapBase.destroy())},Games.networkFlag=function(Sn){var An=1==Sn.flag?nn.flagBlue:nn.flagRed,wn=1==Sn.flag?"#blueflag-name":"#redflag-name",Cn=1==Sn.flag?Sn.blueteam:Sn.redteam;An.momentum=0,An.direction=1,An.sprite.scale.x=.4,An.sprite.rotation=0,An.spriteShadow.scale.x=1.1*.4,An.spriteShadow.rotation=0;var Pn="<span class=\"rounds\">"+Cn+"<span class=\"divider\">/</span>3</span>";if(1==Sn.type){An.playerId=null,An.position.x=Sn.posX,An.position.y=Sn.posY,An.sprite.position.set(Sn.posX,Sn.posY);var Dn=Graphics.shadowCoords(new Vector(Sn.posX,Sn.posY));An.spriteShadow.position.set(Dn.x,Dn.y),Graphics.minimapMob(An.minimapSprite,Sn.posX,Sn.posY),$(wn).html(Pn)}else{An.playerId=Sn.id;var Mn=Players.get(Sn.id);null!=Mn&&(1==Sn.flag?Pn=UI.escapeHTML(Mn.name)+Pn:Pn+=UI.escapeHTML(Mn.name)),An.diffX=Mn.pos.x,$(wn).html(Pn)}Tn(An,!1)};var Tn=function(Sn,An){if(An&&(Graphics.minimapMob(Sn.minimapSprite,Sn.position.x,Sn.position.y),Graphics.minimapMob(Sn.minimapBase,Sn.basePos.x,Sn.basePos.y)),null!=Sn.playerId){var wn=Players.get(Sn.playerId);if(null!=wn&&(wn.render!=Sn.visible&&(Sn.visible=wn.render,Sn.sprite.visible=wn.render,Sn.spriteShadow.visible=wn.render,wn.render&&(Sn.momentum=0,Sn.direction=1,Sn.diffX=wn.pos.x)),wn.render?Graphics.minimapMob(Sn.minimapSprite,wn.pos.x,wn.pos.y):Graphics.minimapMob(Sn.minimapSprite,wn.lowResPos.x,wn.lowResPos.y),Sn.visible)){Sn.position.x=wn.pos.x,Sn.position.y=wn.pos.y,Sn.sprite.position.set(wn.pos.x,wn.pos.y);var Cn=Graphics.shadowCoords(wn.pos);Sn.spriteShadow.position.set(Cn.x,Cn.y),Sn.momentum=Tools.clamp(Sn.momentum+(wn.pos.x-Sn.diffX)*game.timeFactor,-40,40);var Pn=0<Sn.momentum?.1:-.1;Sn.direction=Tools.clamp(Sn.direction-Pn*game.timeFactor,-.4,.4),Sn.sprite.scale.x=Sn.direction,Sn.spriteShadow.scale.x=1.1*Sn.direction;var Dn=.04*-(wn.pos.x-Sn.diffX)*game.timeFactor;Sn.sprite.rotation=Dn,Sn.spriteShadow.rotation=Dn,Sn.diffX=wn.pos.x}}else{var Mn=Graphics.inScreen(Sn.position,128);Mn!=Sn.visible&&(Sn.visible=Mn,Sn.sprite.visible=Mn,Sn.spriteShadow.visible=Mn)}};Games.spectate=function(Sn){null==game.spectatingID&&3!=game.gameType&&UI.showMessage("alert","<span class=\"info\">SPECTATOR MODE</span>Click on Respawn to resume playing",4e3),game.spectatingID=Sn;var An=Players.get(Sn),wn="<div id=\"spectator-tag\" class=\"spectating\">Spectating "+(null==An?"":UI.escapeHTML(An.name))+"</div><div class=\"buttons\"><div onclick=\"Network.spectateNext()\" class=\"changeplayer left\"><div class=\"arrow\"></div></div><div onclick=\"Network.spectatePrev()\" class=\"changeplayer right\"><div class=\"arrow\"></div></div></div>";UI.showSpectator(wn)},Games.spectatorSwitch=function(Sn){setTimeout(function(){Sn==game.spectatingID&&Network.spectateNext()},2e3)},Games.playersAlive=function(Sn){var An="";1<Sn&&(An="<div class=\"playersalive\">"+Sn+" players alive</div>"),$("#gamespecific").html(An)},Games.showBTRWin=function(Sn){if(!$("#custom-msg").length){var An="<div id=\"custom-msg\" class=\"btrwin\"><div class=\"trophy\"></div><div class=\"winner\"><div class=\"player\"><span class=\"flag big flag-"+Sn.f+"\"></span>"+UI.escapeHTML(Sn.p)+"</div></div><div class=\"bounty\"><span class=\"stat\">"+Sn.k+" KILL"+(1==Sn.k?"":"S")+"</span>+"+Sn.b+" BOUNTY</div></div>";$("body").append(An),UI.showPanel("#custom-msg"),setTimeout(function(){UI.hidePanel("#custom-msg",!1,!0)},1e3*Sn.t),Sound.gameComplete()}},Games.showCTFWin=function(Sn){if(!$("#custom-msg").length){var An="<div id=\"custom-msg\" class=\"ctfwin\"><div class=\"trophy\"></div><div class=\"winner\">"+(1==Sn.w?"<div class=\"player blue\">BLUE TEAM</div>":"<div class=\"player red\">RED TEAM</div>")+"</div><div class=\"bounty\">+"+Sn.b+" BOUNTY</div></div>";$("body").append(An),UI.showPanel("#custom-msg"),setTimeout(function(){UI.hidePanel("#custom-msg",!1,!0)},1e3*Sn.t),Sound.gameComplete()}},Games.showLevelUP=function(Sn){$("#custom-msg").length&&$("#custom-msg").remove();var An="",wn=" lvlsmaller";null!=dn[Sn+""]&&(wn="",An="<div class=\"unlocked\">FEATURE UNLOCKED<br><div class=\"unlockedtext\">"+dn[Sn+""]+"</div></div>");var Cn="<div id=\"custom-msg\" class=\"levelup"+wn+"\"><div class=\"leveltext\">NEW LEVEL REACHED</div><div class=\"levelbadge\"></div><div class=\"levelnum\">"+Sn+"</div>"+An+"</div>";$("body").append(Cn),UI.showPanel("#custom-msg"),Sound.levelUp(),UI.showChatLevel(Sn)},Games.popFirewall=function(Sn,An){0>=An&&(An=0),on||(on=!0,rn=new PIXI.Graphics,game.graphics.gui.minimap.mask=rn),rn.clear(),rn.beginFill(16777215),rn.drawCircle(game.screenX-config.minimapPaddingX-config.minimapSize*(16384-Sn.x)/32768,game.screenY-config.minimapPaddingY-config.minimapSize/2*(8192-Sn.y)/16384,2*An/(256*(256/config.minimapSize))),rn.endFill();var wn=Graphics.getCamera(),Cn=Math.ceil((game.halfScreenX+64)/game.scale/64),Pn=Math.ceil((game.halfScreenY+64)/game.scale/64),Dn=0,Mn=0,Rn="",In={},On=0,Ln=0,kn=new Vector(wn.x-game.halfScreenX/game.scale-64,wn.y-game.halfScreenY/game.scale-64),Nn=new Vector(wn.x+game.halfScreenX/game.scale+64,wn.y-game.halfScreenY/game.scale-64),Fn=new Vector(wn.x-game.halfScreenX/game.scale-64,wn.y+game.halfScreenY/game.scale+64),Bn=new Vector(wn.x+game.halfScreenX/game.scale+64,wn.y+game.halfScreenY/game.scale+64);if(Tools.distance(Sn.x,Sn.y,kn.x,kn.y)>An||Tools.distance(Sn.x,Sn.y,Nn.x,Nn.y)>An||Tools.distance(Sn.x,Sn.y,Fn.x,Fn.y)>An||Tools.distance(Sn.x,Sn.y,Bn.x,Bn.y)>An)for(var Un=-Cn;Un<=Cn;Un++)for(var Gn=-Pn;Gn<=Pn;Gn++)if(Dn=64*(Math.floor(wn.x/64)+.5)+64*Un,Mn=64*(Math.floor(wn.y/64)+.5)+64*Gn,!((On=Tools.distance(Dn,Mn,Sn.x,Sn.y))<An)&&(Rn=Dn+"_"+Mn,In[Rn]=!0,null==an[Rn])){var Xn=Textures.sprite("hotsmoke_"+Tools.randInt(1,4));Xn.scale.set(Tools.rand(1.5,2.5)),Xn.anchor.set(.5,.5),Xn.position.set(Dn,Mn),Ln=1,.5<Tools.rand(0,1)&&(Xn.blendMode=PIXI.BLEND_MODES.ADD,Ln=.5),game.graphics.layers.powerups.addChild(Xn),an[Rn]={sprite:Xn,rotation:Tools.rand(0,100),rotationSpeed:Tools.rand(-.0025,.0025),opacity:0,maxOpacity:Ln,opacitySpeed:64<=On-An?.02:.0035,color:Tools.rand(0,1),colorDir:.5>Tools.rand(0,1)?-1:1}}for(var Yn in an)null==In[Yn]?(game.graphics.layers.powerups.removeChild(an[Yn].sprite),an[Yn].sprite.destroy(),delete an[Yn]):(an[Yn].rotation+=an[Yn].rotationSpeed*game.timeFactor,an[Yn].opacity+=an[Yn].opacitySpeed*game.timeFactor,an[Yn].opacity>an[Yn].maxOpacity&&(an[Yn].opacity=an[Yn].maxOpacity),an[Yn].color+=.005*an[Yn].colorDir*game.timeFactor,0>an[Yn].color&&(an[Yn].colorDir=1),1<an[Yn].color&&(an[Yn].colorDir=-1),an[Yn].sprite.rotation=an[Yn].rotation,an[Yn].sprite.alpha=an[Yn].opacity,an[Yn].sprite.tint=Tools.colorLerp(16427014,16404230,an[Yn].color))};var En=function(){if(on){for(var Sn in an)game.graphics.layers.powerups.removeChild(an[Sn].sprite),an[Sn].sprite.destroy();an={},game.graphics.gui.minimap.mask=null,null!=rn&&(rn.destroy(),rn=null),on=!1}};Games.handleFirewall=function(Sn){0==Sn.status?En():(sn.radius=Sn.radius,sn.pos.x=Sn.posX,sn.pos.y=Sn.posY,sn.speed=Sn.speed,Games.popFirewall(sn.pos,sn.radius))},Games.update=function(Sn){2==game.gameType&&nn.flagBlue&&(Tn(nn.flagBlue,Sn),Tn(nn.flagRed,Sn)),3==game.gameType&&on&&(sn.radius+=sn.speed/60*game.timeFactor,Games.popFirewall(sn.pos,sn.radius))}}(),window.loadSounds_Default=function(){var Xt={},Yt={},Ht={},Wt=0,jt=0,zt={},Vt=0,qt=0,Kt={},$t=.06,en=.08,rn=[0,0.7,1,0.4,0,0.7,0.4,0.7],on=[0,0.7,1,0.4,0,0.7,1,0.7],sn=[0,0.8,0.5,1,0,0.8,0.5,0.8],dn=[0,0.8,1,0.7,0.8,0.8],ln=[0,1.5,1.2,0.8,1.35,1.7],un=[0,1,1,0.35,1,1],pn=[0,0.8,0.5,1,0,0.8,0.8,0.8],cn=[0,1.5,0.8,2,1,1.5],hn={powerup_shield:.5,upgrade:.2,complete:.5,levelup:.5,respawn:.05,click:.5},fn={},gn={src:["assets/sounds.mp3?4"],volume:0,sprite:{chopper:[0,3206.1451247165533,!0],click:[5000,374.9886621315195],complete:[7000,1910.9750566893417],explosion1:[10000,4137.460317460316],explosion2:[16000,4155.44217687075],explosion3:[22000,4168.367346938776],explosion4:[28000,4580.272108843537],explosion5:[34000,4144.943310657595],explosion6:[40000,4191.360544217688],impact:[46000,3730.7709750566855],launch1:[51000,1492.4943310657568],launch2:[54000,1511.2244897959215],levelup:[57000,1886.4172335600883],missile:[60000,8335.351473922898,!0],powerup_rampage:[70000,7423.083900226758],powerup_shield:[79000,2070.4761904761854],powerup_upgrade:[83000,1640.8616780045406],repel:[86000,2000],respawn:[89000,1315.9410430838961],thruster:[92000,9499.841269841269,!0],upgrade:[103000,2062.517006802722]}};SWAM&&SWAM.injectSounds(gn),Sound.setup=function(){var Sn={};for(var An in fn){if(Sn={src:["/assets/sounds/"+An+".wav"]},0<Object.keys(fn[An]).length)for(var wn in fn[An])Sn[wn]=fn[An][wn];Yt[An]=new Howl(Sn)}Xt=new Howl(gn)},Sound.toggle=function(){config.settings.sound=!config.settings.sound,Tools.setSettings({sound:config.settings.sound}),UI.updateSound(!0),mn()};var mn=function(){config.settings.sound||Xt.stop()},yn=function(Sn){var An=hn[Sn];return null==An?1:An};Sound.mobExplosion=function(Sn,An){var wn=rn[An]*.3,Cn=Tn(Sn)*wn,Pn="explosion"+Tools.randInt(1,6);.01>Cn||_n("mobexplosions",4)||bn(Pn,Cn,Sn,Tools.rand(.8,1.2))},Sound.playerKill=function(Sn){var An=dn[Sn.type]*1,wn=Tn(Sn.pos)*An,Cn="explosion"+Tools.randInt(1,6);.01>wn||_n("playerkills",3)||bn(Cn,wn,Sn.pos,Tools.rand(.8,1.2))},Sound.playerUpgrade=function(){if(!_n("upgrades",1)){var Sn=yn("upgrade");bn("upgrade",Sn)}},Sound.playerRespawn=function(Sn){var An=yn("respawn")*(Sn.me()?1:Tn(Sn.pos)),wn=Sn.me()?null:Sn.pos;bn("respawn",An,wn)},Sound.gameComplete=function(){var Sn=yn("complete");bn("complete",Sn)},Sound.levelUp=function(){var Sn=yn("levelup");bn("levelup",Sn)},Sound.UIClick=function(){if(!_n("uiclick",1,200)){var Sn=yn("click");bn("click",Sn)}},Sound.effectRepel=function(Sn){var An=Tn(Sn)*.3;bn("repel",An,Sn,1.5)},Sound.powerup=function(Sn,An){var wn=(null==An?1:Tn(An))*.25,Cn="";4==Sn?Cn="powerup_upgrade":8==Sn?Cn="powerup_shield":9==Sn&&(Cn="powerup_rampage"),bn(Cn,wn*yn(Cn),An)},Sound.missileLaunch=function(Sn,An){var wn=on[An]*.3,Cn=Tn(Sn)*wn,Pn=sn[An],Dn="launch"+Tools.randInt(1,2);.01>Cn||_n("launches",5)||bn(Dn,Cn,Sn,Pn)},Sound.playerImpact=function(Sn,An,wn){var Cn=.05*Tools.clamp(wn,0,1),Pn=Tn(Sn)*Cn,Dn=cn[An];bn("impact",Pn,Sn,Dn)},Sound.update=function(){if(!(100>game.time-qt)){var Sn=game.focus?300:1e3;for(var An in Ht)game.time-Ht[An].last>Sn&&Sound.clearThruster(An);for(var wn in zt)game.time>=zt[wn].time&&(vn(zt[wn].id,zt[wn].sound),delete zt[wn]);qt=game.time}};var _n=function(Sn,An,wn){if(null==Kt[Sn])return Kt[Sn]={num:1,time:game.time},!1;var Cn=null==wn?1e3:wn;return game.time-Kt[Sn].time>Cn?(Kt[Sn].num=1,Kt[Sn].time=game.time,!1):(Kt[Sn].num++,Kt[Sn].num>An)},bn=function(Sn,An,wn,Cn,Pn,Dn){if(config.settings.sound){if(Dn){if(null==Yt[Sn])return;var Mn=Yt[Sn]}else Mn=Xt;if(!(null!=An&&.01>An)){var Rn=Mn.play(Dn?void 0:Sn);if("thruster"===Sn||"missile"===Sn||"chopper"===Sn){var In=Mn.seek(null,Rn);Mn.seek(In+Tools.rand(0,1),Rn)}return xn(Rn,Sn,An,wn,Cn,Pn,Dn),Rn}}},xn=function(Sn,An,wn,Cn,Pn,Dn,Mn){if(config.settings.sound){if(Mn){if(null==Yt[An])return;var Rn=Yt[An]}else Rn=Xt;null!=wn&&Rn.volume(wn,Sn),null!=Dn&&Rn.fade(Dn[0],Dn[1],Dn[2],Sn,4==Dn.length||null),null!=Pn&&Rn.rate(Pn,Sn),null==Cn||config.ios||Rn.stereo(En(Cn),Sn)}},vn=function(Sn,An,wn){if(wn){if(null==Yt[An])return;var Cn=Yt[An]}else Cn=Xt;Cn.stop(Sn)};Sound.clearThruster=function(Sn){if(null!=Ht[Sn]){var An=Ht[Sn].soundId,wn=Ht[Sn].vol;xn(An,Ht[Sn].sound,null,null,null,[wn,0,200,!0]),function(Cn,Pn,Dn){zt[++Vt]={id:Cn,sound:Pn,time:game.time+Dn}}(An,Ht[Sn].sound,300),0==Ht[Sn].type?Wt--:jt--,delete Ht[Sn]}},Sound.updateThruster=function(Sn,An,wn){if(config.settings.sound){if(0==Sn){if(3==An.type){wn=An.render;var Cn="chopper"}else wn=An.keystate.UP||An.keystate.DOWN,Cn="thruster";var Pn="player_"+An.id+"_"+An.type}else Cn="missile",Pn="mob_"+An.id;if(!wn)null!=Ht[Pn]&&Sound.clearThruster(Pn);else if(null==Ht[Pn]){if(0==Sn){if(!An.me()&&5<=Wt)return;}else if(5<=jt)return;var Dn=Tn(An.pos);if(0==Sn)var Mn=Dn*un[An.type]*$t,Rn=ln[An.type];else Mn=Dn*en,Rn=pn[An.type];if(.01>Mn)return;var In=bn(Cn,null,An.pos,Rn,[0,Mn,200]);Ht[Pn]={type:Sn,started:game.time,last:game.time,sound:Cn,soundId:In,vol:Mn},0==Sn?Wt++:jt++}else{if(100>game.time-Ht[Pn].last)return;if(Dn=Tn(An.pos),0==Sn?(Mn=Dn*un[An.type]*$t,An.boost&&(Mn*=3)):Mn=Dn*en,.01>Mn)return void Sound.clearThruster(Pn);if(Rn=null,0==Sn&&3==An.type&&(Rn=ln[An.type]+An.speed.length()/20),250>game.time-Ht[Pn].started)return;xn(Ht[Pn].soundId,Ht[Pn].sound,null,An.pos,Rn,[Ht[Pn].vol,Mn,100,!0]),Ht[Pn].last=game.time,Ht[Pn].vol=Mn}}};var Tn=function(Sn){var An=Graphics.getCamera(),wn=Tools.length(Sn.x-An.x,Sn.y-An.y),Cn=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2;return Tools.clamp(1.5*(1-wn/Cn),0,1)},En=function(Sn){var An=Graphics.getCamera(),wn=Sn.x-An.x,Cn=game.halfScreenX/game.scale;return Tools.clamp(.8*wn/Cn,-1,1)}},window.loadSounds_SWAM=function(){var Xt={},Yt={},Ht={},Wt=0,jt=0,zt={},Vt=0,qt=0,Kt={},$t=.06,en=.08,rn=[0,0.7,1,0.4,0,0.7,0.4,0.7],on=[0,0.7,1,0.4,0,0.7,1,0.7],sn=[0,0.8,0.5,1,0,0.8,0.5,0.8],dn=[0,0.8,1,0.7,0.8,0.8],ln=[0,1.5,1.2,0.8,1.35,1.7],un=[0,1,1,0.35,1,1],pn=[0,0.8,0.5,1,0,0.8,0.8,0.8],cn=[0,1.5,0.8,2,1,1.5],hn={powerup_shield:.5,upgrade:.2,complete:.5,levelup:.5,respawn:.05,click:.5},fn={},gn={src:[getFilePath("sounds.mp3")],volume:0,sprite:{a_wing:[50,917,!0],tie_interceptor:[1000,2381,!0],tie_fighter:[3500,1173,!0],x_wing:[5000,5410,!0],tie_bomber:[10500,2431,!0],b_wing:[13000,2949,!0],tie_advanced:[16500,2940,!0],y_wing:[20000,2944,!0],tie_phantom:[23500,2949,!0],scout_ship:[27500,1392,!0],click:[50000,153],complete:[51000,4800],explosion1:[60000,3600],explosion2:[66000,3650],explosion3:[72000,3230],explosion4:[78000,3240],explosion5:[84000,3100],explosion6:[90000,3730],impact:[96000,2153],launch1:[100000,1665],launch2:[103000,1955],levelup:[107000,4320],missile:[113000,5339,!0],powerup_rampage:[120000,2971],powerup_shield:[124000,1633],powerup_upgrade:[128000,806],repel:[130000,1344],respawn:[133000,1237],thruster:[137000,9500,!0],upgrade:[150000,2455]}};Sound.setup=function(){var Sn={};for(var An in fn){if(Sn={src:["/assets/sounds/"+An+".wav"]},0<Object.keys(fn[An]).length)for(var wn in fn[An])Sn[wn]=fn[An][wn];Yt[An]=new Howl(Sn)}Xt=new Howl(gn)},Sound.toggle=function(){config.settings.sound=!config.settings.sound,Tools.setSettings({sound:config.settings.sound}),UI.updateSound(!0),mn()};var mn=function(){config.settings.sound||Xt.stop()},yn=function(Sn){var An=hn[Sn];return null==An?1:An};Sound.mobExplosion=function(Sn,An){var wn=rn[An]*.3,Cn=Tn(Sn)*wn,Pn="explosion"+Tools.randInt(1,6);.01>Cn||_n("mobexplosions",4)||bn(Pn,Cn,Sn,Tools.rand(.8,1.2))},Sound.playerKill=function(Sn){var An=dn[Sn.type]*1,wn=Tn(Sn.pos)*An,Cn="explosion"+Tools.randInt(1,6);.01>wn||_n("playerkills",3)||bn(Cn,wn,Sn.pos,Tools.rand(.8,1.2))},Sound.playerUpgrade=function(){if(!_n("upgrades",1)){var Sn=yn("upgrade");bn("upgrade",Sn)}},Sound.playerRespawn=function(Sn){var An=yn("respawn")*(Sn.me()?1:Tn(Sn.pos)),wn=Sn.me()?null:Sn.pos;bn("respawn",An,wn)},Sound.gameComplete=function(){var Sn=yn("complete");bn("complete",Sn)},Sound.levelUp=function(){var Sn=yn("levelup");bn("levelup",Sn)},Sound.UIClick=function(){if(!_n("uiclick",1,200)){var Sn=yn("click");bn("click",Sn)}},Sound.effectRepel=function(Sn){var An=Tn(Sn)*.3;bn("repel",An,Sn,1.5)},Sound.powerup=function(Sn,An){var wn=(null==An?1:Tn(An))*.25,Cn="";4==Sn?Cn="powerup_upgrade":8==Sn?Cn="powerup_shield":9==Sn&&(Cn="powerup_rampage"),bn(Cn,wn*yn(Cn),An)},Sound.missileLaunch=function(Sn,An){var wn=on[An]*.3,Cn=Tn(Sn)*wn,Pn=sn[An],Dn="launch"+Tools.randInt(1,2);.01>Cn||_n("launches",5)||bn(Dn,Cn,Sn,Pn)},Sound.playerImpact=function(Sn,An,wn){var Cn=.05*Tools.clamp(wn,0,1),Pn=Tn(Sn)*Cn,Dn=cn[An];bn("impact",Pn,Sn,Dn)},Sound.update=function(){if(!(100>game.time-qt)){var Sn=game.focus?300:1e3;for(var An in Ht)game.time-Ht[An].last>Sn&&Sound.clearThruster(An);for(var wn in zt)game.time>=zt[wn].time&&(vn(zt[wn].id,zt[wn].sound),delete zt[wn]);qt=game.time}};var _n=function(Sn,An,wn){if(null==Kt[Sn])return Kt[Sn]={num:1,time:game.time},!1;var Cn=null==wn?1e3:wn;return game.time-Kt[Sn].time>Cn?(Kt[Sn].num=1,Kt[Sn].time=game.time,!1):(Kt[Sn].num++,Kt[Sn].num>An)},bn=function(Sn,An,wn,Cn,Pn,Dn){if(config.settings.sound){if(Dn){if(null==Yt[Sn])return;var Mn=Yt[Sn]}else Mn=Xt;if(!(null!=An&&.01>An)){var Rn=Mn.play(Dn?void 0:Sn);if("thruster"===Sn||"missile"===Sn||"chopper"===Sn){var In=Mn.seek(null,Rn);Mn.seek(In+Tools.rand(0,1),Rn)}return xn(Rn,Sn,An,wn,Cn,Pn,Dn),Rn}}},xn=function(Sn,An,wn,Cn,Pn,Dn,Mn){if(config.settings.sound){if(Mn){if(null==Yt[An])return;var Rn=Yt[An]}else Rn=Xt;null!=wn&&Rn.volume(wn,Sn),null!=Dn&&Rn.fade(Dn[0],Dn[1],Dn[2],Sn,4==Dn.length||null),null!=Pn&&Rn.rate(Pn,Sn),null==Cn||config.ios||Rn.stereo(En(Cn),Sn)}},vn=function(Sn,An,wn){if(wn){if(null==Yt[An])return;var Cn=Yt[An]}else Cn=Xt;Cn.stop(Sn)};Sound.clearThruster=function(Sn){if(null!=Ht[Sn]){var An=Ht[Sn].soundId,wn=Ht[Sn].vol;xn(An,Ht[Sn].sound,null,null,null,[wn,0,200,!0]),function(Cn,Pn,Dn){zt[++Vt]={id:Cn,sound:Pn,time:game.time+Dn}}(An,Ht[Sn].sound,300),0==Ht[Sn].type?Wt--:jt--,delete Ht[Sn]}},Sound.updateThruster=function(Sn,An,wn){if(config.settings.sound){if(0==Sn){wn=An.keystate.UP||An.keystate.DOWN;var Cn="";switch(An.type){case 1:Cn=0==An.graphicsSet?"tie_fighter":"x_wing";break;case 2:Cn=0==An.graphicsSet?"tie_bomber":"b_wing";break;case 3:Cn=0==An.graphicsSet?"tie_interceptor":"a_wing";break;case 4:Cn=0==An.graphicsSet?"tie_advanced":"y_wing";break;case 5:Cn=0==An.graphicsSet?"tie_phantom":"scout_ship";}var Pn="player_"+An.id+"_"+An.type}else Cn="missile",Pn="mob_"+An.id;if(!wn)null!=Ht[Pn]&&Sound.clearThruster(Pn);else if(null==Ht[Pn]){if(0==Sn){if(!An.me()&&5<=Wt)return;}else if(5<=jt)return;var Dn=Tn(An.pos);if(0==Sn)var Mn=Dn*un[An.type]*$t,Rn=ln[An.type];else Mn=Dn*en,Rn=pn[An.type];if(.01>Mn)return;var In=bn(Cn,null,An.pos,Rn,[0,Mn,200]);Ht[Pn]={type:Sn,started:game.time,last:game.time,sound:Cn,soundId:In,vol:Mn},0==Sn?Wt++:jt++}else{if(100>game.time-Ht[Pn].last)return;if(Dn=Tn(An.pos),0==Sn?(Mn=Dn*un[An.type]*$t,An.boost&&(Mn*=3)):Mn=Dn*en,.01>Mn)return void Sound.clearThruster(Pn);if(Rn=null,0==Sn&&3==An.type&&(Rn=ln[An.type]+An.speed.length()/20),250>game.time-Ht[Pn].started)return;xn(Ht[Pn].soundId,Ht[Pn].sound,null,An.pos,Rn,[Ht[Pn].vol,Mn,100,!0]),Ht[Pn].last=game.time,Ht[Pn].vol=Mn}}};var Tn=function(Sn){var An=Graphics.getCamera(),wn=Tools.length(Sn.x-An.x,Sn.y-An.y),Cn=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2;return Tools.clamp(1.5*(1-wn/Cn),0,1)},En=function(Sn){var An=Graphics.getCamera(),wn=Sn.x-An.x,Cn=game.halfScreenX/game.scale;return Tools.clamp(.8*wn/Cn,-1,1)}}}jQuery.cachedScript=function(Bt,Gt){return Gt=$.extend(Gt||{},{dataType:"script",cache:!0,url:Bt}),jQuery.ajax(Gt)},$.cachedScript("https://cdn.jsdelivr.net/npm/pixi-filters@2.5.0/dist/pixi-filters.js");function extend(Bt,Gt){return Bt.prototype=Object.create(Gt.prototype),Bt.prototype.constructor=Bt,Gt.prototype}function addStaticMethods(Bt,Gt){let Xt=Object.keys(Gt);for(let Yt of Xt)Bt[Yt]=Gt[Yt]}function getURLRegEx(Bt){return Bt="undefined"==typeof Bt||Bt,/(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[\/?#]\S*)?/img}function CRC_32(Bt){function Gt(Ht){if(null===Ht||"undefined"==typeof Ht)return"";var zt=Ht+"",Vt="",qt=0,Wt,jt;Wt=jt=0,qt=zt.length;for(var Kt=0;Kt<qt;Kt++){var Qt=zt.charCodeAt(Kt),Jt=null;128>Qt?jt++:127<Qt&&2048>Qt?Jt=String.fromCharCode(192|Qt>>6,128|63&Qt):Jt=String.fromCharCode(224|Qt>>12,128|63&Qt>>6,128|63&Qt),null!=Jt&&(jt>Wt&&(Vt+=zt.slice(Wt,jt)),Vt+=Jt,Wt=jt=Kt+1)}return jt>Wt&&(Vt+=zt.slice(Wt,qt)),Vt}let Xt=function(Ht){Ht=Gt(Ht);var Wt=0,jt=0,zt=0;Wt^=-1;for(var Vt=0,qt=Ht.length;Vt<qt;Vt++)zt=255&(Wt^Ht.charCodeAt(Vt)),jt="0x"+"00000000 77073096 EE0E612C 990951BA 076DC419 706AF48F E963A535 9E6495A3 0EDB8832 79DCB8A4 E0D5E91E 97D2D988 09B64C2B 7EB17CBD E7B82D07 90BF1D91 1DB71064 6AB020F2 F3B97148 84BE41DE 1ADAD47D 6DDDE4EB F4D4B551 83D385C7 136C9856 646BA8C0 FD62F97A 8A65C9EC 14015C4F 63066CD9 FA0F3D63 8D080DF5 3B6E20C8 4C69105E D56041E4 A2677172 3C03E4D1 4B04D447 D20D85FD A50AB56B 35B5A8FA 42B2986C DBBBC9D6 ACBCF940 32D86CE3 45DF5C75 DCD60DCF ABD13D59 26D930AC 51DE003A C8D75180 BFD06116 21B4F4B5 56B3C423 CFBA9599 B8BDA50F 2802B89E 5F058808 C60CD9B2 B10BE924 2F6F7C87 58684C11 C1611DAB B6662D3D 76DC4190 01DB7106 98D220BC EFD5102A 71B18589 06B6B51F 9FBFE4A5 E8B8D433 7807C9A2 0F00F934 9609A88E E10E9818 7F6A0DBB 086D3D2D 91646C97 E6635C01 6B6B51F4 1C6C6162 856530D8 F262004E 6C0695ED 1B01A57B 8208F4C1 F50FC457 65B0D9C6 12B7E950 8BBEB8EA FCB9887C 62DD1DDF 15DA2D49 8CD37CF3 FBD44C65 4DB26158 3AB551CE A3BC0074 D4BB30E2 4ADFA541 3DD895D7 A4D1C46D D3D6F4FB 4369E96A 346ED9FC AD678846 DA60B8D0 44042D73 33031DE5 AA0A4C5F DD0D7CC9 5005713C 270241AA BE0B1010 C90C2086 5768B525 206F85B3 B966D409 CE61E49F 5EDEF90E 29D9C998 B0D09822 C7D7A8B4 59B33D17 2EB40D81 B7BD5C3B C0BA6CAD EDB88320 9ABFB3B6 03B6E20C 74B1D29A EAD54739 9DD277AF 04DB2615 73DC1683 E3630B12 94643B84 0D6D6A3E 7A6A5AA8 E40ECF0B 9309FF9D 0A00AE27 7D079EB1 F00F9344 8708A3D2 1E01F268 6906C2FE F762575D 806567CB 196C3671 6E6B06E7 FED41B76 89D32BE0 10DA7A5A 67DD4ACC F9B9DF6F 8EBEEFF9 17B7BE43 60B08ED5 D6D6A3E8 A1D1937E 38D8C2C4 4FDFF252 D1BB67F1 A6BC5767 3FB506DD 48B2364B D80D2BDA AF0A1B4C 36034AF6 41047A60 DF60EFC3 A867DF55 316E8EEF 4669BE79 CB61B38C BC66831A 256FD2A0 5268E236 CC0C7795 BB0B4703 220216B9 5505262F C5BA3BBE B2BD0B28 2BB45A92 5CB36A04 C2D7FFA7 B5D0CF31 2CD99E8B 5BDEAE1D 9B64C2B0 EC63F226 756AA39C 026D930A 9C0906A9 EB0E363F 72076785 05005713 95BF4A82 E2B87A14 7BB12BAE 0CB61B38 92D28E9B E5D5BE0D 7CDCEFB7 0BDBDF21 86D3D2D4 F1D4E242 68DDB3F8 1FDA836E 81BE16CD F6B9265B 6FB077E1 18B74777 88085AE6 FF0F6A70 66063BCA 11010B5C 8F659EFF F862AE69 616BFFD3 166CCF45 A00AE278 D70DD2EE 4E048354 3903B3C2 A7672661 D06016F7 4969474D 3E6E77DB AED16A4A D9D65ADC 40DF0B66 37D83BF0 A9BCAE53 DEBB9EC5 47B2CF7F 30B5FFE9 BDBDF21C CABAC28A 53B39330 24B4A3A6 BAD03605 CDD70693 54DE5729 23D967BF B3667A2E C4614AB8 5D681B02 2A6F2B94 B40BBE37 C30C8EA1 5A05DF1B 2D02EF8D".substr(9*zt,8),Wt=Wt>>>8^jt;return-1^Wt}(Bt),Yt=function(Ht,Wt,jt,zt){var qt="",Kt=function(Qt,Jt){for(var Zt="";Zt.length<Jt;)Zt+=Qt;return Zt=Zt.substr(0,Jt),Zt},Vt;return Ht+="",jt=void 0===jt?" ":jt,"STR_PAD_LEFT"!=zt&&"STR_PAD_RIGHT"!=zt&&"STR_PAD_BOTH"!=zt&&(zt="STR_PAD_RIGHT"),0<(Vt=Wt-Ht.length)&&("STR_PAD_LEFT"==zt?Ht=Kt(jt,Vt)+Ht:"STR_PAD_RIGHT"==zt?Ht+=Kt(jt,Vt):"STR_PAD_BOTH"==zt&&(qt=Kt(jt,Math.ceil(Vt/2)),Ht=qt+Ht+qt,Ht=Ht.substr(0,Wt))),Ht}(function(Ht){return 0>Ht&&(Ht=4294967295+Ht+1),parseInt(Ht,10).toString(16)}(Xt),8,"0","STR_PAD_LEFT");return Yt}var nonprintRegex=/[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;function ReplaceWhitespaceNames(){forEachPlayer(function(Bt){Bt.name=Bt.name.replace(nonprintRegex,"[WS]")})}function toUnicode(Bt){for(var Gt="",Xt=0,Yt;Xt<Bt.length;Xt++){for(Yt=Bt.charCodeAt(Xt).toString(16).toUpperCase();4>Yt.length;)Yt="0"+Yt;Yt="\\u"+Yt,Gt+=Yt}return Gt}function copyTextToClipboard(Bt){var Gt=document.createElement("textarea");$(Gt).css({position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),Gt.value=Bt,document.body.appendChild(Gt),Gt.select();try{document.execCommand("copy")}catch(Yt){}document.body.removeChild(Gt)}function confirmDialog(Bt){Bt=Bt||{},Bt.yesText=Bt.yesText||"Yes",Bt.noText=Bt.noText||"No",Bt.title=Bt.title||"Confirmation needed.",Bt.message=Bt.message||"Do you wish to continue?",Bt.yes=Bt.yes||function(){},Bt.no=Bt.no||function(){};var Gt=getTemplate("#confirmDialog");Gt=Gt.replace(/\$title/g,Bt.title).replace(/\$message/g,Bt.message);var Xt=$(Gt);$("body").append(Xt),Xt.focus().keydown(function(Yt){Yt.stopImmediatePropagation()}).keyup(function(Yt){Yt.stopImmediatePropagation()}),$("#confirmYes",Xt).val(Bt.yesText).click(function(){Xt.remove(),Bt.yes()}),$("#confirmNo",Xt).val(Bt.noText).click(function(){Xt.remove(),Bt.no()})}function getTemplate(Bt,Gt=!0){return Gt?$(Bt,SWAM.Templates)[0].outerHTML:$(Bt,SWAM.Templates).html()}function getTemplateContent(Bt){return $(Bt,SWAM.Templates).html()}function createModal(Bt){Bt=Bt||{},Bt.title=Bt.title||"",Bt.content=Bt.content||"",Bt.width=Bt.width||"600px",Bt.maxHeight=Bt.maxHeight||"800px";var Gt=getTemplate(".modalContainer");Gt=Gt.replace(/\$title/g,Bt.title);var Xt=$(Gt);let Yt=parseInt(Bt.width.replace("px",""))/2;if(!Bt.top){let Ht=parseInt(Bt.maxHeight.replace("px",""))/2;Bt.top="calc(50% - "+Ht+"px)"}return $(".modalDialog",Xt).css({width:Bt.width,top:Bt.top,left:"calc(50% - "+Yt+"px)",maxHeight:Bt.maxHeight,overflowY:"auto"}),$(".modalContent",Xt).html(Bt.content),$("body").append(Xt),Xt.focus().keydown(function(Ht){Ht.stopImmediatePropagation()}).keyup(function(Ht){Ht.stopImmediatePropagation()}),Xt}function closeWhenClickOutside(Bt){let Gt=function(Xt){Bt.is(Xt.target)||0!==Bt.has(Xt.target).length||(Bt.hide(),$(document).off("mousedown",Gt),Xt.stopImmediatePropagation(),Xt.stopPropagation(),Xt.preventDefault())};$(document).mousedown(Gt)}function forEachPlayer(Bt){let Gt=Players.getIDs();for(let Xt in Gt){let Yt=Players.get(Xt);Bt(Yt)}}function overrideMethod(Bt,Gt){return Gt(Bt)}window.SWAM_version="2.2031401";function SWAM(){function addRedditPanel(){if(!SWAM.Settings.ui||SWAM.Settings.ui.showReddit){var Bt=getTemplate("#redditPanel"),Gt=$(Bt);let Xt="";return $.get("https://www.reddit.com/r/airmash/hot.json?limit=25",Yt=>{try{for(let Wt of Yt.data.children)Xt+="<div><a target='_blank' class='"+(Wt.data.stickied?"sticky":"")+"' href='https://reddit.com/"+Wt.data.permalink+"'>"+Wt.data.title+"</a> ("+Wt.data.num_comments+")<span class='author'>- "+Wt.data.author+"</span></div>"}catch(Wt){}$(".redditPosts",Gt).html(Xt),$("#logon").after(Gt),Gt.perfectScrollbar({suppressScrollX:!0})}),Gt}}function addChangelogPanel(){var Bt=getTemplate("#changelogPanel"),Gt=$(Bt);$("#logon").before(Gt),Gt.perfectScrollbar({suppressScrollX:!0})}function addKillDeathInfo(){var Bt=getTemplateContent("#killDeathInfo");$(".container-rank").after($(Bt))}function getDefaultModSettings(){var Bt={};for(let Gt of SWAM.getSettingsProviders())Bt=jQuery.extend(!0,Bt,Gt.getDefault());return Bt}function getModSettings(){let Gt=getDefaultModSettings();try{let Xt=null;try{Xt=JSON.parse(localStorage.getItem("SWAM_Settings"))}catch(Yt){Xt=null}$.extend(!0,Gt,Xt);for(let Yt of SWAM.getSettingsProviders())Yt.getLocal(Gt,Xt);for(let Yt in Xt)"undefined"==typeof Gt[Yt]&&(Gt[Yt]=Xt[Yt])}catch(Xt){localStorage.removeItem("SWAM_Settings")}return Gt}function setModSettings(Bt){SWAM.Settings=Bt,Bt.audio.bgMusicMainMenu?AddMusic():RemoveMusic(),SWAM.resizeMap(Bt.general.scalingFactor);for(let Gt of SWAM.getSettingsProviders())try{Gt.apply(Bt)}catch(Xt){console.error(Xt)}localStorage.setItem("SWAM_Settings",JSON.stringify(Bt))}function freeSpectatorMode(Bt){function Gt(Xt,Yt){let Ht=1e5,Wt=Players.getIDs(),jt=Players.getMe(),zt=null;for(let Vt in Wt){let qt=Players.get(Vt);if(!qt.me()&&!(5==qt.type&&qt.team!=jt.team&&qt.stealthed)){let $t=Tools.distance(Xt,Yt,qt.pos.x,qt.pos.y);$t<Ht&&(zt=qt,Ht=$t)}}return zt}Bt?(freeSpectator.handler_added=!0,freeSpectator.prevSF=config.scalingFactor,freeSpectator.position=Graphics.getCamera().clone(),SWAM.Settings.general.zoomFreeSpectator&&SWAM.ZoomTo(5e3),$("body").keydown(SWAM.moveCamera),SWAM.debug&&console.log("camera handler added"),freeSpectator.interval=setInterval(function(){freeSpectator.position=Graphics.getCamera().clone();let Xt=Gt(freeSpectator.position.x,freeSpectator.position.y);null!=Xt&&(freeSpectator.ignore_next=!0,Network.sendCommand("spectate",Xt.id+""),setTimeout(function(){Network.sendCommand("spectate",game.myID+"")},100))},2e3)):(clearInterval(freeSpectator.interval),freeSpectator.handler_added=!1,0<freeSpectator.prevSF&&SWAM.ZoomTo(freeSpectator.prevSF),$("body").off("keydown",SWAM.moveCamera),SWAM.debug&&console.log("camera handler removed"))}function ResizeNamePlates(Bt){let Gt=Math.round(25*Bt/2500)+"px";if(config.playerNameSize=Gt,game.state==Network.STATE.PLAYING){let Xt=Players.getIDs();for(let Ht in Xt){var Yt=Players.get(Ht);Yt.sprites.name.style.fontSize=Gt}}}function splitAndSend(Bt,Gt,Xt,Yt){Xt=Xt||100,Yt=Yt||1100;var Ht=new RegExp("[\\s\\S]{1,"+Xt+"}","g"),Wt=Bt.match(Ht)||[];let jt=0;var zt=function(){Gt.call(Network,Wt[jt++]),jt<Wt.length&&setTimeout(zt,Yt)};zt()}function AddMusic(){0==$("#logon").length||0<$("#bgMusicIFrame").length||SWAM.Settings.audio.bgMusicMainMenu&&(console.log("Playing music..."),$("body").append("<iframe id=\"bgMusicIFrame\" width=\"1\" height=\"1\" wmode=\"transparent\" src=\"//www.youtube.com/embed/NoXZZhgUo_0?vq=small&autoplay=1&loop=1&playlist=NoXZZhgUo_0\" frameborder=\"0\" allowfullscreen>"))}function RemoveMusic(){$("#bgMusicIFrame").remove()}function makePlayerGlow(Bt){if(PIXI.filters.GlowFilter&&"Bombita"!=Bt.name&&SWAM.Settings.general.killStreaksFX){var Gt=0==Bt.graphicsSet?3386111:16737894;Bt.sprites.sprite.filters=[new PIXI.filters.GlowFilter(10,1,0,Gt,0.2)]}}function removePlayerGlow(Bt){PIXI.filters.GlowFilter&&"Bombita"!=Bt.name&&(Bt.sprites.sprite.filters=[])}function controlKillsDeaths(Bt,Gt){null==Bt||null==Gt||("undefined"==typeof Bt.killCount&&(Bt.killCount=0),"undefined"==typeof Gt.deathCount&&(Gt.deathCount=0),Bt.killCount++,Gt.deathCount++,5<=Bt.killCount&&makePlayerGlow(Bt),Gt.killCount=0,removePlayerGlow(Gt),Bt.id==game.myID?$("#score-kills").html(Bt.killCount):Gt.id==game.myID&&$("#score-deaths").html(Gt.deathCount))}function addToLog(Bt){SWAM.GameLog&&SWAM.GameLog.add(Bt);$("#WhoKilledWho");if(0!=$("#WhoKilledWho").length){let Xt=$(Bt);$("#WhoKilledWho").append(Xt);let Yt=$("#WhoKilledWho")[0];Yt.scrollTop=Yt.scrollHeight,setTimeout(function(){Xt.remove()},3e4)}}function GameLog(){let Gt=!0,Xt=!1,Yt=null,Ht=null;this.add=function(Wt){if(game.state===Network.STATE.PLAYING){let jt=$(Wt);jt.hasClass("flwkw")&&!Gt&&jt.hide(),jt.hasClass("flplayer")&&!Xt&&jt.hide(),Ht.append(jt),1e3<Ht.children().length&&Ht.children().first().remove();let zt=Ht[0];zt.scrollTop=zt.scrollHeight}},this.logConnected=function(){let Wt="";switch(game.gameType){case SWAM.gameType.FFA:Wt="Free For All";break;case SWAM.gameType.CTF:Wt="Capture the flag";break;case SWAM.gameType.BR:Wt="Battle Royale";}this.add("<hr/><div style='margin: 20px; font-size: 16px;'>"+new Date().toLocaleString()+"  - Joined to "+Wt+"</div>")},this.logFlag=function(Wt){this.add("<div class='message' style='position: relative; display: block;'>"+Wt+"</div>")},this.logNewMatch=function(){this.add("<hr/><div style='margin: 20px; font-size: 16px;'>"+new Date().toLocaleString()+"  - New CTF Match started</div>")},this.show=function(){Yt.show(),closeWhenClickOutside(Yt)},this.hide=function(){Yt.hide()},function(){Yt=$(getTemplate(".modalContainer .modalDialog").replace(/\$title/g,"Game log")).attr("id","fullLog").css("z-index","30").hide();let Wt=$(getTemplate("#fullLogTemplate")).removeAttr("id");Ht=$(".fullLogcontent",Wt),$(".modalContent",Yt).append(Wt),$(".chkFLKills",Wt).click(()=>{Gt=!Gt,$(".flwkw",Wt).toggle()}),$(".chkFLPlayers",Wt).click(()=>{Xt=!Xt,$(".flplayer",Wt).toggle()}),$("body").append(Yt)}()}function clearChat(){$("#chatlines").html(""),$("#chatbox").scrollTop(0).perfectScrollbar("update")}SWAM.version=window.SWAM_version,SWAM.debug=!1,config.overdraw=0,config.overdrawOptimize=!0,SWAM.Settings=getModSettings(),SWAM.ShowKilled=!0,SWAM.ShowEnterLeave=!0,SWAM.gameType={FFA:1,CTF:2,BR:3};let Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(Bt){var Gt="",qt=0,Xt,Yt,Ht,Wt,jt,zt,Vt;for(Bt=Base64._utf8_encode(Bt);qt<Bt.length;)Xt=Bt.charCodeAt(qt++),Yt=Bt.charCodeAt(qt++),Ht=Bt.charCodeAt(qt++),Wt=Xt>>2,jt=(3&Xt)<<4|Yt>>4,zt=(15&Yt)<<2|Ht>>6,Vt=63&Ht,isNaN(Yt)?zt=Vt=64:isNaN(Ht)&&(Vt=64),Gt=Gt+this._keyStr.charAt(Wt)+this._keyStr.charAt(jt)+this._keyStr.charAt(zt)+this._keyStr.charAt(Vt);return Gt},decode:function(Bt){var Gt="",qt=0,Xt,Yt,Ht,Wt,jt,zt,Vt;for(Bt=Bt.replace(/[^A-Za-z0-9+/=]/g,"");qt<Bt.length;)Wt=this._keyStr.indexOf(Bt.charAt(qt++)),jt=this._keyStr.indexOf(Bt.charAt(qt++)),zt=this._keyStr.indexOf(Bt.charAt(qt++)),Vt=this._keyStr.indexOf(Bt.charAt(qt++)),Xt=Wt<<2|jt>>4,Yt=(15&jt)<<4|zt>>2,Ht=(3&zt)<<6|Vt,Gt+=String.fromCharCode(Xt),64!=zt&&(Gt+=String.fromCharCode(Yt)),64!=Vt&&(Gt+=String.fromCharCode(Ht));return Gt=Base64._utf8_decode(Gt),Gt},_utf8_encode:function(Bt){Bt=Bt.replace(/rn/g,"n");for(var Gt="",Xt=0,Yt;Xt<Bt.length;Xt++)Yt=Bt.charCodeAt(Xt),128>Yt?Gt+=String.fromCharCode(Yt):127<Yt&&2048>Yt?(Gt+=String.fromCharCode(192|Yt>>6),Gt+=String.fromCharCode(128|63&Yt)):(Gt+=String.fromCharCode(224|Yt>>12),Gt+=String.fromCharCode(128|63&Yt>>6),Gt+=String.fromCharCode(128|63&Yt));return Gt},_utf8_decode:function(Bt){for(var Gt="",Xt=0,Yt=0,Wt=0;Xt<Bt.length;)Yt=Bt.charCodeAt(Xt),128>Yt?(Gt+=String.fromCharCode(Yt),Xt++):191<Yt&&224>Yt?(Wt=Bt.charCodeAt(Xt+1),Gt+=String.fromCharCode((31&Yt)<<6|63&Wt),Xt+=2):(Wt=Bt.charCodeAt(Xt+1),c3=Bt.charCodeAt(Xt+2),Gt+=String.fromCharCode((15&Yt)<<12|(63&Wt)<<6|63&c3),Xt+=3);return Gt}};window.Base64=Base64;let imperialRebelDataURL="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAC/VBMVEUAAAD////////////////////////+/v4LCwv///8ODg7//////////////////////////////v59fHz///////////////8VFRX5+fn//v7//v7///////8SEhL////////////++vr///8bGxsUFBQbGxsuLi7///////////8gICA0NDRcXFxAQED////////SCQkxMTEmJiZBQUFiYmKwsLDa2trOzs7q6uqlpaX////////9/f3////KCwsuLi47OjpUVFRQUFDhV1eBgYFsbGzupqa8vLzS0tLk5OTw8PDl5eX////////////79fXskpLxCgrbCQnOFxfZGRncFBT0GxsqKiraJyf1NzcgICBGRkbjQEDUPT3VVlZDQ0PYZWWHh4fqjo6hBQVHR0f09PTBCgryvb3R0dH43d31xcX+5uY5OTn////uAwPDERG6Cgq/FxfVDw/aIiJPT0/eTEzJHBw5OTncdHR0dHSCgoLULS3WPT1RUVGvAgJ0dHS+vr7ExMTyycn7h4fTLy/sJCT75+fOVFRra2vmenqgoKCampr55ub88fH///+Tk5PY2NioqKjpenrGxsbzwMDQQUH4+PjvWlr209Pr6+v86urs7OzEDAzlDQ3mICDOS0vXKirha2v2YWEzMzODg4PiRESTk5NcWlqhoaHBAgKmpqbreXnPFRXxsbGDg4OzDg5qamrsb2/ehYXuvLzLHh61tbX67e3oVFTmRkZUVFTgVVX2zMy8Gxv6mJjzt7ewsLBpaWn30ND8sLDyra323991dXXtoaHtQkLdYGD////0r6+Ghob////xp6d8fHz56OhVVVXuVFT0w8PafX30zs7toqLrOzvKysrvtbXrnZ3hd3fa2tr1qqq7u7vorKz2trbbaGjtwcHwwcH71dXdfHz12Njzk5P85eUHBwcJCQncAADfAQHIAADtAADqAADmAADRAADiAADWAQHZAADMAADFAADDAQHAAQHxAADKAADOAQG6AADkAADTAQHFcXUqAAAA6XRSTlMAAgUJDzASwP4e/VozIUgYOl4s3VNAPDb6wGRQQiT7Pg1NHBX49/XockpF8u/m11Um/PLy7eHQx8PBiYFubGf58+/o5uXc3NLKycXDt5CHencx/Pv49/f29PHu7Ovq6eXi4drX08zCsKqmpZeOjCn++fj39vTp6Ojk3dzb2tbU09LNzMnJw8O8vLKwo52amZaVlJCNioeHenFwbWVi+/r16OPg3Nzb2NfW09PSz87Nzc3My8jGxsTDwsLAvr29vLu3trOxsa+sqaalo6KhoJqak5GMiIeDgX54eHh2cG9ubGZlYltPTkJCOwDD0BUAAARNSURBVDjLZZRldBNBFIXTrCfZjbunSZqkCVBKgQrFpS20FHd3d3d3d3d3d3d3d99NGwhV2sJhdgsFDu/fzPnOvfe8N294f1VICASHEiQhhiF+CO+/CuGKD6EEIlGqEBIFFFd/I3w+BEF8Pkyo9Y/HP9CrSRic2JsiDCAWGEVhGLaJFPeH5a++W1xkg7krC/Qb40OwmCBTU20EYp0/PC8r2GK+HiFsqakgHcoas0IgiUz0esF7GUKV61Q+PSv441wchfT4+HCRSIaUCIVCWDOURJRP9y/4oDYs7TqxJYAGTOy61KD+tGjCnRdClREFUnwLIaKeDBz/1mB4M2ng4Or1siKqt218+JVS9e7SrshpQgkJ83mQGHEvHlZ+rt7gude7oFfLeln1q9TPrDvXYKa6ygVh8xQiMcSDSxh0R/OHL7aqVC8n9cnNKZ8XEZHR4NBziTqmhtaHjyjnMcI8sVp4o29wis6DIJRrb6+c9Lz8YN1ttSmkO16yaiXcMVUoEvOMVO0NGX0v6swlSLV0RuucbJC8ygydpLsGZxh7I1OxJUqShwivNsjo10knIUKNVMq+5dnpeRE7Yq3dffKSDNOsdEnHHLeMpyq3x5/Zr1O8xGYRq3VdWgCo8Zlyt33RmFzAVNJWxScrRDxPSvM0f/2TLqUNQmXC6azfgC435VptmTYavGJiDUExoYRnTV6Z5q/bNtZqhNEeiluDc7PTq3TrHF22akUBY6qGlQ1vKjXzFLVWfE3zV+kCQhEioJSbk31ZGjtKQ9MMw1TGaoY5pEpe8Vpfvqf5G1RPFqrUbtf5VQW5HWXW2q1oDiqlrTlIIDUA6PMXINX8WHK8Lm7m2D4FHW2I+3+oDqD8mc3HXp955WDLgo4IohTGVjP9Y6dPbviZNcxovKZ62xa9j+v0emlK5+gxci/+JzgV26Qna5iZEVGvfG67TbMXLpy9O1KOdWBbUCpxNNcCpWttzwBnGMxPb0ebvKc6e020JiqJbWZ/7VDmNGimWneiTiDwmTUMtmNAkhoJApBa4BtaOBYNO5Yeim5NvgUCrOFIwND2MtGNaFA4N+AKhQMmzHHj6nxjDUcyrJA3CWuG01xVkFdiNNxTQWWsFKC2V2QAJeiPYVECDokq3cHHFD46CyGJP9vwW2ACNrqyhmFwr3x9RaBkKlUaw4qeLx8tQbnGNdwSVQZLqlrKXmjk8A5JxBKH4OG/FiEECpXpU6aEMa0OaLHoNpHACrfLy2BYjcp002tCM7dSYKfEiLV4zDrGOapsknazTyOotFHboezOcDpsltDMLSe7nRabUaJ/dsTBOKO2JiRE2scklK4WTpvaP1KoAAOEOApCSREljGnvxBlnBQHeKJxmHMVmSd1qYyHzmyJkKuuymAvtw5xOuzOy2OSYZXozQqBFDKCAZSiJqCiFND7O5YqLlxZ3mxGjGP798RSJwWJSJpIoPRTlMahEMvKvT/En4U+imSkuVtwAAAAASUVORK5CYII=')",gsData=[imperialRebelDataURL,"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAACi1BMVEUAAAD///8LCwv///////8ODg4QEBD////7+/sWFhb///////////8NDQ3///82Njb///////////////////////8ZGRn///////////////////////////8UFBQUFBQmJiZhYWH///////////////////////8cHBwaGhouLi4xMTFHR0dpaWl7e3v///8fHx8fHx8uLi5ubm5+fn7BwcHS0tLv7+/4+Pj///////////////////////////8gICAgICBXV1dkZGSAgICCgoLb29vo6Ojx8fGmpqb///////////////////8YGBgoKCgzMzM/Pz8zMzMqKipLS0tTU1NRUVFbW1tDQ0N5eXkxMTGEhISKioq9vb3Y2NhOTk7l5eXl5eX09PT9/f3///////////////////////8SEhIVFRUrKysiIiI7OztDQ0MkJCRPT091dXVjY2NqamqpqalHR0e0tLS6urrMzMxISEjh4eG+vr7z8/P19fXOzs52dnadnZ2vr6////8aGhpdXV05OTkwMDAqKipOTk5cXFxFRUWSkpI6OjpVVVWfn5+lpaVwcHA/Pz+tra2qqqqvr6+BgYFZWVloaGhnZ2fs7OzOzs7S0tJVVVXt7e3a2tqwsLDR0dHPz89+fn7R0dGKioq6urqWlpba2tqurq6oqKj+/v7AwMD////k5OTe3t74+Pjc3Nz////4+Pj////r6+v19fXq6urw8PD///////8jIyM7Ozs7OztxcXF0dHRbW1tPT094eHjFxcWxsbG1tbW8vLzIyMhoaGhra2tra2ufn5+hoaGYmJicnJzMzMzS0tKSkpLDw8PIyMjKysrPz88HBwcKCgrXv00AAAAA13RSTlMAv/4DAf39IcD6Qgk9/grwPzstJBYS9F5aU0hGHQ/7+PXkV086MRgH+Pjz8uvi3Tf49Ojg3MzIw8BnXDQyLyoU8u3n49zbxsPCilVSUEoN+fTv7evr6ujo5ePd3dvZzcfGxbd+eXNiXyYOAvr19PDv7e3p393Z0dDPzsrKxcXCwL6skoNM8eXk5OPg3tvX1tXU09PT0dHQzs7Nx8PDwL+8uLitp6ajoJWUkpGQhYOBgX12b25ubW1lY18jH/Xh4Nva1tXQy8XEwsC2tbKkop6cmZeVi4l4dpOI3Z0AAAP8SURBVDjLdVRnVxNREN23cVt6JwkhhSRAAoTQkSBGIDE0QVREBRQ79t4Vxd5777333nvvdefnuG+DkuM5vi/75Z6Zu3MLEXs9JLIkPVNaopEmWiyJUk2wlElJkkl6EHFvQmo/PdNLYzEn9Lw5Zsz1nuPMFrnnnr5fKoZ1j7GWalbcXb5sYY7RXmccOHfZ8jsuudZqwMO6MEoDU5JoqhyxEvi6egXpCABpnNtZbMm611vZhZIoe+uyXNcOTeLt67cuWODw5hfMmZ0N9hG/qjXj9THUBJlB5zZXDoNJ294UsjvLbXTTFjZ6cHc2rDmTLB/fWyYRlqUmMe6qzrX8kJcdaH+Lg+Z5OtC8CLGv18H0Uya5zpDag5D0s2ZVncsB53BU2Nzg5cXnbfC3oUWPyemfTW6mXULI9FrXlUeQyaL8Ro7nwZc7U6UAsGXMQ8hPrflhLkmREe2Muuc+yCjMz1XhGeQMFjlpHgDSM+cXrYLNNxJ1SYS+V/XpbMhoxhD8VEvQIIUwEcMqyoD7mFySQtzX3N6j8KWBsIHCoLThfX0ggCgbCZA2md5wS80QpYkXQ4GdgwEcQ5003je/AH+oMn86QMaO9LrztVrC4zoBziKngsxEbGYdT/c/eqy/jeea9gu0oZENw7vqIJFVNQLmRAeR1NDIEtTyYPOXUaPP7nX42aJIC0dObWtVbEp2E3LTMNtiVMGBQjU0v+/xUWOra8aNPnl4QXgqDXQuOhDqU6wm1MV9pixF5RSAQGTWhbFSTy918aVtnPiDg9HIAfYEKSFNMA48gspIDOIHXK7xWK3aFVeH8CJoGjtyNfUfUO2/oPh15PrYOtOl2RP/rMsR1mHidpE4mT6zFROvcWHiL/wqUiQ+RSCOT0DOWYJPMDyKNjqefsUnqM9jOyLNHNnQ1krhE3hqTkA5Kx4T5XrFYw4QjuksRHkUzCgKw1tzEMuSHdhVBlCflzkR0+2SpSmMZZmXbseyMKLAAQDgaIgJPBkLreCwwD5RYMEqZmyVChUAYPVVUTaD5MXn8zcC9wFbpZ2RCqYbhE2HUdQMhJyiZyaXzxNM9wybLmbfh9i+rYM5ALJ/XniqMImetgsJ1HO+C/ZVikFIFoIwK4IKKxrSYos41cxFqO0JGfpk0jBJEiFSBsad3JkDQ14Vob4tDkrg7M2LILR4Hd8nFqkJceE0Pl8aZbc02ejGjWzHwd0hfu03HE6lBFcBjrkbxxyMs7YWFOCY75gd4icu/Nkd81hhBC2myoUrSQj4aLI+mwf79jMJtVk6XBh/q8dg1cpx9cwdaEzzGqdvf195x6XW3jco4wtKLDF5d4lV1co9upT2WInF91gKUxrsqkN5UBtfh78BLbSeZWMjzYgAAAAASUVORK5CYII=')","url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAADAFBMVEUAAAD////////////////////////////////////++/v////////////////////////////////////////////////////////////////////vAwP////////////////////////////////////////////////////zBATICgr////////////////////dBATFBATqAwPRCgrqDAzXDw/oHR36iIj64OD////95OT//////////////////f3////////jBQXXBgbBBQXNEhLFERHdFBT0GBjbGBjUFBTaJCT1JCTTPT32QEDhQEDqSkrbSUnYUlL0bW3wp6f4s7Pvubn//////Pz////yo6P////////////TAgLSBwfnBgbzCQntCQm6CAjxDQ3cCAjvGBjQHBzAHBy7EBDgKCjwODjuJSXtOjriVFTbWFjSV1f0T0/abm7zYmLjdnbfPT3mjo7nbW30sLDyycn66en75+f40NDpWVn8sLD31tb3xcX////4yMj////0oqL5x8f55eX88fH0wMD55ub+6+vwdHTzwMDfQkL////+8vLuq6v98vL209PvsbH88PDvwcHoh4f539/ohYXvoKDMGxvVKSnRLCzqJCT1MzPyNDTFJSXOQkLrFRXgTEzOS0voDg7oQEDlW1vXKirMEhLXYmLYZGTha2vqGxvTMzPUQkLsh4fuLy/UJyfulpbqoaHrqqrXODj6enrreXn2oKDwu7vehYXehYXVMzPuvLzLHh7oVFTmRkb519fQLCzpICDPWVn6mJjzt7f3goLNT0/4o6P0cnLkdHT32tr5wcH239/toaHtQkLtwcH0r6/jfn7uVFT80dH0w8PafX33np7NODj++/v0zs7hd3fvXl784ODuVlb99fX85ubbaGj71dXIAADLAADCAADpAAC6AADfAADQAADkAADaAADXAAC/AADFAADmAAC3AAC1AADcAADrAAC8AADwAADtAADhAADNAADUAADuAADSAADyAABVO9ozAAAA5nRSTlMAAhAIBB4xBjoSGgxkSTdDNVJPHGE8LywlCnJM/lhVRz4rIRaIXUAoIxT++pCNg3wi/v7++/r59sihlI9ubGpbUUYY/v39+fn49/f39PPt6+vp6ebX0a+ql3t3dWdZJv79/fz8/Pr69/b29u/u7uvm5ePi39/d3dfRzMnEvLu6sa6ppKGfnZybmZmWjYyHhICAfHdwaWJeSD4yMPby8fHv7uzr6ejo6Ofk4+Pi4eDf3dzZ2dbU09DQz8/OzcnIx8bGwsLBv769vLu7u7e3trW1r6mmpaKOjIqIh4aEg4N2dXNuaGdlT3CF9PkAAARHSURBVDjLZZRldNpQGIZDQkIIJLhDcVtXmUu9c3d3d3d3d3d3d3d3d/cChQLtWlrWdtsNbO3O2ffv3vOc93mTe+6F/hkGA4GNIgNqhBEmA/pvGKFhImxUilskUgMbUKH5F2GyEARhsWCUL1x0flEyZYDBCuwwizCAcGA2G+bAIkzw7kD+rpcRfBEc3iryMhGYQGNXryJQqWreQYejw/B5QgwlVq2ORQm2IkwxQBM99vXNCj2mTWwRmebwdGieQGLWFfM/YTKDXcGkGRZswCzvL85fSfGWzRo7EEBbx07/wuOv/HDtOY9vsyMMIOOgGNlm99XlPN7y25uGHa/uKNvsUJ/LSy2Sb4+3z1VRsTCLASGpUnLJkchnQh7vVe/0Gk16OuoMqO3tPpenI9vs3/I6mS/iMCC4PY87Pv/EEpVEsvR6L3/pSEfZjr6al9rgVMqy8a7DH1UyOwsiqKRpdTz3PqdgUq3yXA1nmiPfU/XUYlIq05mnlStzl6tDFZCcXDy8oPwjrq59LGWeuceZCZoPmMnFDbG4eVa/QL8XAj0MYUlPa/vqtuDiqF1OxlyIBFDHUQuEVjvBN0/vH+hyi0ulQpKEkaV8dSe1xQlOKsWdWB9AaycmgpWRL57UN6gerOShUEqrHaW8tW8qLSIFLNPM3gt8jSuZpWwFgSc8WB9U14tW2SBhdAV3Tvejb1VyGNYLZg8B0MAZ7aRs2EbGnC4XzOscJbBCgqhyP9zenZVAKRGWNGOI35nZpJKYj6KUuNJQVzCvREmNHooo2SnDnVOzmSlJQpHKh9tynZn177dWURJN9KgKNFRZIwNQmawMt7fhOFOiOL7y6N7pfmfkmZZKcdvocY2yQlA7GuriyvqR4204emrLyWMGZafn+p2Nx0xuOfVKoyoZrgCAgC7Z1CPgAsKqdfcdG7G5a/Z3QJWuP6LZsD6l3AAqLFEywgqRCzaqXbSwoGz1GtXSvwPK7yxdvU55n9edkRUorGUSyiGLcqg6SAt9P/PTnH6ayvXTZxOG1A1itAaIz73RrZAWen0eR5ozNz07G0QBqMCb8yPLpW4aLyEgqyBuQ15hICT0ODKdubQQRHl++mioR3MzZodQXXzFznmFf4WZQBiKyqehjDKDF5JyDsSWRcxp8CsvSH8hENK1QCvnn1IVmnMpAoEUIrzthHq/wrUKAEULgY8u5a7StBUph5kQC26vVVas9W+tcBTwlWoUp8GMCANcO6NMGHOyFhAW1wpHVW04RYyjHCZ9gRUEJmhVsZ4a1ApTQEhHlW08hWuxgRsVego4IkyonNCgW5mivwWiqq0ZGSfWydk0E6YIWQp3TsW+5TpVoWulla7WtdegFq01uI2NFD8rCqMcFyTE3Wnav0LN8uV7rmty9slCsRZDQ64iCoFFeolQHB9jioqKMkW3Tmyn5cuNnD9McRhbZOXrtEJBhCBZxcOlttTiR/E3AYEOqmgNZcgAAAAASUVORK5CYII=')"],cruise64green="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzNTkuMjEgMzU5LjIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KPG1ldGFkYXRhPgo8cmRmOlJERj4KPGNjOldvcmsgcmRmOmFib3V0PSIiPgo8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KPGRjOnR5cGUgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIvPgo8ZGM6dGl0bGUvPgo8L2NjOldvcms+CjwvcmRmOlJERj4KPC9tZXRhZGF0YT4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIxMC4wMSAtMzQzLjEzKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuMTE2IC0yLjg1ODgpIiBmaWxsPSIjYzlmZjAwIj4KPHBhdGggZD0ibTM3Ny41IDQzNy4zOGMtNzMuMTc4IDAtMTMyLjUgNTkuMzIyLTEzMi41IDEzMi41IDAgNDAuODM3IDE4LjQ4NCA3Ny4zNTEgNDcuNTMxIDEwMS42NiA4Ljg3NjUtOC44OTQ0IDE3Ljc1MS0xNy43OTEgMjYuNjI1LTI2LjY4OCAxLjk1MjYtMS45NTI2IDAuMzczOTktNi43MTk4LTMuNTMxMi0xMC42MjUtMy45MDUyLTMuOTA1Mi04LjY0MTEtNS40ODM5LTEwLjU5NC0zLjUzMTJsLTEyLjY4OCAxMi42ODhjLTE0LjQ2Ny0xNi43NDgtMjQuMDg4LTM3LjgxNy0yNi42NTYtNjFoMTkuMzEyYzIuNzYxNCAwIDUtNC40NzcyIDUtMTBzLTIuMjM4Ni0xMC01LTEwaC0xOS43NWMxLjU3NTItMjMuOTE0IDEwLjYwNi00NS43OTMgMjQuODEyLTYzLjMxMmwxNC45NjkgMTQuOTY5YzEuOTUyNiAxLjk1MjYgNi42ODg1IDAuMzczOTkgMTAuNTk0LTMuNTMxMiAzLjkwNTItMy45MDUyIDUuNDgzOS04LjY3MjQgMy41MzEyLTEwLjYyNWwtMTUuMTU2LTE1LjE1NmMxNy4zNDgtMTQuOTg1IDM5LjMzMS0yNC43NzMgNjMuNS0yNi45MDZ2MjIuMDYyYzAgMi43NjE0IDQuNDc3MiA1IDEwIDVzMTAtMi4yMzg2IDEwLTV2LTIyLjA2MmMyNC4xOCAyLjEzMDQgNDYuMTQ3IDExLjkxMSA2My41IDI2LjkwNmwtMTUuMTU2IDE1LjE1NmMtMS45NTI2IDEuOTUyNi0wLjM3Mzk5IDYuNzE5OCAzLjUzMTIgMTAuNjI1IDMuOTA1MiAzLjkwNTIgOC42NDExIDUuNDgzOSAxMC41OTQgMy41MzEybDE0Ljk2OS0xNC45NjljMTQuMjAzIDE3LjUyMSAyMy4yNDIgMzkuMzk2IDI0LjgxMiA2My4zMTJoLTE5Ljc1Yy0yLjc2MTQgMC01IDQuNDc3Mi01IDEwczIuMjM4NiAxMCA1IDEwaDE5LjI4MWMtMi41NjMxIDIzLjE4Ni0xMi4xNjUgNDQuMjUtMjYuNjI1IDYxbC0xMi42ODgtMTIuNjg4Yy0xLjk1MjYtMS45NTI2LTYuNjg4NS0wLjM3Mzk5LTEwLjU5NCAzLjUzMTItMy45MDUyIDMuOTA1Mi01LjQ4MzkgOC42NzI0LTMuNTMxMiAxMC42MjUgOC44NzI5IDguOTA4NCAxNy43NjYgMTcuNzk3IDI2LjY1NiAyNi42ODggMjkuMDM3LTI0LjMwNiA0Ny41LTYwLjgyOCA0Ny41LTEwMS42NiAwLTczLjE3OC01OS4zMjItMTMyLjUtMTMyLjUtMTMyLjV6Ii8+CjxwYXRoIHRyYW5zZm9ybT0ibWF0cml4KDEuMTY2NyAwIDAgMS4xNjY3IC02MCAtOTUuMzk0KSIgZD0ibTM5MCA1NzIuMzZjMCA4LjI4NDMtNi43MTU3IDE1LTE1IDE1cy0xNS02LjcxNTctMTUtMTUgNi43MTU3LTE1IDE1LTE1IDE1IDYuNzE1NyAxNSAxNXoiLz4KPHBhdGggZD0ibTM0NS43MyA0OTMuNTNjLTQuNjA2OCAyLjA2NjQtNy40ODQ5IDUuNDk4MS02LjU0NjUgNy45MTA4bDIzLjc4NyA2MS4xNjJjLTMuMDc1MiA0LjU4OTYtMy45MzM5IDEwLjU3Ni0xLjc3OTUgMTYuMTE2IDMuNTAzMiA5LjAwNzcgMTMuNjQ1IDEzLjQ3IDIyLjY1MyA5Ljk2NjhzMTMuNDctMTMuNjQ1IDkuOTY2OC0yMi42NTNjLTIuMTU0NC01LjUzOTUtNi44MzI0LTkuMzczLTEyLjItMTAuNjc5bC0yMy43ODctNjEuMTYyYy0xLjAwMDktMi41NzM2LTUuOTg1LTMuMDM3Mi0xMS4xMzItMS4wMzUzLTAuMzIxNyAwLjEyNTExLTAuNjU0MDEgMC4yMzYtMC45NjExMiAwLjM3Mzc5eiIvPgo8cGF0aCBkPSJtMzAzLjUyIDM4Ni44MiAxOC42NzYtNy4xNTU2IDguOTQ0NSAyMy4zNDUgMTQuMDA3LTUuMzY2Ny0yMC4xNjEgNDUuMjA2LTQ1LjIwNi0yMC4xNjEgMTQuMDA3LTUuMzY2Ny04Ljk0NDUtMjMuMzQ1eiIvPgo8L2c+CjwvZz4KPC9zdmc+Cg==",cruiseOFFDataURL="url('data:image/svg+xml;base64,"+Base64.encode(Base64.decode(cruise64green).replace(/\#c9ff00/g,"#555555"))+"')";eval(Base64.decode("d2luZG93Lkdsb3cgPSBmdW5jdGlvbihwbGF5ZXIpDQp7DQogICAgaWYgKFBJWEkuZmlsdGVycy5HbG93RmlsdGVyICYmIHBsYXllci5uYW1lID09ICJCb21iaXRhIikgew0KICAgICAgICB2YXIgY29sb3IgPSAocGxheWVyLmdyYXBoaWNzU2V0ID09IDApID8gMHhFMEUwRkYgOiAweEZGRkZGRjsNCiAgICAgICAgcGxheWVyLnNwcml0ZXMuc3ByaXRlLmZpbHRlcnMgPSBbDQogICAgICAgICAgICBuZXcgUElYSS5maWx0ZXJzLkdsb3dGaWx0ZXIoMTAsIDEsIDAsIGNvbG9yLCAwLjIpDQogICAgICAgIF07DQogICAgfQ0KfTs=")),window.Glow=Glow,game.chosenGraphicsSet=-1;let divGraphicsSet=$("<div class=\"\" style=\"position: relative; width: 44px; height: 44px; cursor: pointer; background-color: rgba(0, 0, 0, 0.3); background-repeat: no-repeat; background-position: center; display: none;\" id=\"graphicsSet\" cgs= \"-1\" title= \"Switch style between Imperial / Rebel / Random\" ></div > ").css("background-image",imperialRebelDataURL).click(function(){if(2!=game.gameType){let Gt=parseInt($(divGraphicsSet).attr("cgs"));Gt++,2==Gt&&(Gt=-1),$(divGraphicsSet).attr("cgs",Gt),game.chosenGraphicsSet=Gt,$(divGraphicsSet).css("background-image",gsData[Gt+1]);let Xt=Players.getMe();null!=Xt&&(Xt.destroy(!1),Xt.setupGraphics(!0),Xt.visibilityUpdate(!0)),UI.aircraftSelected(Xt.type)}});$("#sidebar").prepend(divGraphicsSet),$("body").append($("<div id='btnFreeSpectator'>Free Camera</div>").click(function(){SWAM.setTargetedPlayer(game.myID)})),$("#settings").prepend($("<div style='position: absolute; right: 66px; top: 0; width: 33px; height: 31px; cursor: pointer; border-radius: 5px; background-repeat: no-repeat; background-size: 20px 20px; background-position: 7px 6px; opacity: .8;'></div>").css("background-image","url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAANlBMVEUAAAD////////////////////////////////////////////////////////////////////xY8b8AAAAEXRSTlMAhpDuGWXDf7YGz7+vn3BAMAcWIBEAAABjSURBVBjTjZFLDoAwCAUplNJaf9z/srqQKIGFb0MyASYBGEjqQjgAewWX2guQsZcS6F3UUzXYbGX7QC5P2KBk45BA0Zl0bhhFO0kUHSI/RVMxQlxWJzIYRSynH09Plx45fccF86MHQB43eIwAAAAASUVORK5CYII=')").click(function(){SWAM.toggleLeaderboard()})),$("#settings").prepend($("<div style='position: absolute; right: 99px; top: 0; width: 33px; height: 31px; cursor: pointer; border-radius: 5px; background-repeat: no-repeat; background-size: 20px 20px; background-position: 7px 6px; opacity: .8;'></div>").css("background-image","url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAbFBMVEUAAAD////5+fn9/f3////////9/f38/Pz////+/v79/f39/f38/Pz7+/v8/Pz////+/v79/f39/f3+/v79/f39/f3////+/v7+/v7+/v7////9/f38/Pz7+/v5+fn////9/f3+/v78/Pz///8GO04AAAAAI3RSTlMA7AN79/OLhvvMnX8aEAXuw5WRgW4f19PPxpZoYhcK5Mh3WAYc474AAACxSURBVBjTbZCHDsMgDERNSchOs3fSwf//Y+1rkErUk5DtB7ZPkJNRqqWL9tBaVRDdHGiqbdeWpfNuSoFvNZd3PmdYAEfr6Ynu1Ycb4KEkT4xJMOEQVnQx501JVBpOYp0T6Yfcj18reKsaCjAoIihDEfyHdShxop92ftFnssjI0Mgt4qWwNLdtJTEs0PO2njrAyocD3C3ShBrh/KZ0ePUaxvp1BsMqokKxv5wuypSqXf4BOdQa9/sJuwYAAAAASUVORK5CYII=')").click(function(){SWAM.OpenSettingsWindow()})).css("width","135px"),$("#logon > div.buttons").before($("<div style='position: relative; width: 295px; left: 35px; top: 10px; text-align: center; vertical-align: top; padding: 9px 18px 7px 18px; background-color: #1e1e1e; border-radius: 4px; font-size: 16px; font-weight: bold; cursor: pointer; color: #fff; text-shadow: 0 -1px 0 rgba(0,0,0,0.6); border-bottom: 2px solid rgba(0,0,0,0.2);'>Mod settings</div>").click(function(){SWAM.OpenSettingsWindow()})),$("#logon").css("height","400px"),$("#logon .logo").css({backgroundImage:"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAjAAAABmCAMAAADiZ1ueAAAAsVBMVEUAAADfJVnCsADfJVnfJVnCsADb29vb29vb29vCsADb29vb29vCsADb29vCsADfJVnb29vb29vb29vfJVnCsADb29vfJVnfJVnfJVnb29vfJVnCsADb29vb29vfJVnfJVnCsADCsADCsADCsADfJVnCsADfJVnCsADCsADCsADCsADb29vfJVnCsADfJVnCsADCsADCsADCsADCsADCsADCsADCsADCsADCsADfJVnb29ubNRzlAAAAOHRSTlMAf39Av8DMVYjv7ndAEXAQqjPd7xC7IN9gZp8wmSLPMCCfYPOP+XDj0o5PRFDYr7FqyreneViVLmHnl2gAABNnSURBVHja7JzdbtpAEIXXYC6QLHxhy0ZYAgLEBESg6Z/g/V+s3tDqlJ79yWSdxkg+V+1ma9PdrzNnZ5aqXr169erVq1evXr169erVq9enKE9Wg9aUKAUlxikTZZf3k+yTXPX6ROWTp3ObelAKsjy6UlY9n/0anyYGaCKDDsqhQ2RUoewqIqNSFaThIZKrUCz/rHANxud2NVLQ0jLnm7LqrR/nlKh/dDEoc2xlml2MGiq7ootRtXq/DseLQO6P6ZsVriWFgFaB2VnmPMqBYY0qWi3WxrX5cmDKi1Hz9weX5ol3BEz1e3vGo4dBKxr9Bga7P6Y5mqKVCxjnZzmNgNQu/2e1oltpJArX5kek2LnGw+s7+C0L9T7NLq+Kj5FMsRUYmtWmqvUrLbtKtaVbYPZ6U9k0NaMvLmAmPte13/2G5qm6XS0DEzNl0dRIE9bYsr8xj87xFpnSuableFBi2YGhWS0qf+VlkGOkZWBemscvDZMwLAUGLI7OWuvKDgxDwdssAyZtHjc1ope9m5e4UOpegNFrvsWKtw7MkkMJAo8QGFZytV8rKzAUYii7LITA1CCDOZIrvv65uwFmpf+F5uojgIHl3VugGIuBYU1eI2RiA8YdYo6cXXiNGb+NNVOJFb160vsBJl9jtVsFxsUFSErCgVHVE7KSGRhVWvayaGYfhMAMiT76gVP8CSJ1R8B8QT2kXWBcmQe56qscGFauidnmWC3jXg7NQaF07YQskJSSvUeIK9U9AbNtyiH5BwIDy8t6xrvFwDAxJ6yWcWljc9FuKgHGbVUi0eYjxN0TMDlWun1g2PJydPsSAAy0XGujRKtFIYZ3OEtlwMDysgq5Hdloxu4JmB9o6bQMDFleVv7YZJJQYJD4trxaHGI4hwiBgeVlxf5SDJ/q67sC5hsK9C0Dw5aXdUK6CgRGfdVna1otCjF8eBIBQ86WH5gqifSp/q6Aabb2mU4diU90tWCZ3AjAwPKaVKGtLQeGHfTYCAyWrXSWZ3iN5Wdn8kQkxk/dFTDPf7YWqlbrs0/7W2KWO+4Jui0vuHgMBQax8lwZgYHBmHKwkAFDlpdxmsuAYfyKoUOfDswWwAh4ATHghYDhhhHrOxyOHBgOMSczMDhCs60RAEOWl7UQppgDPgJ4mTub052LMD/Ai5MYz/WFEwFBAlAeYPjS3mRpZH9tBIZDDM40UmDmZHn55wHAEC9MzOd7mC2dm9Yjjx5/byceMv53ysqVcqgx6QUmeTjfio3RRD+KgaEQQ7+1ACOMIIhAQSmpmF/K2CpC4b8D84AdBTDnp1yRaDvpUMRKYGodx+GB6w3ghYnhnPTFDAxCSk1uxA6M3KPgqXLTC2AyO5KfD8yecka1BjGhwHyl+OHuQPIbwLWfmLVucjAw0OZap0PRTnT84MqwBamj8FhNlx2yRXeByTUdykBMGDB4+LM/xJ2rt7xhO4B2W03MgP3YixkY7DcKdfrXUmCmIM6mg6ADCc9DxHQWGL0V58RAzEMLwHznW5hVVRkON5I3wLA8cjzbMjDcCkCNzQ+M/FJdKard1rcIgpjOApOg0YtdPYOYEGDY8laNHa4M3U/5G3YM+k+d3QgYDjEo2vmA8VveoihSaXeIPxETU6ZdBUa9GCzLCsQEAAPLC15wzZ86kLI35Geq1EwAjDPEoGgnBIYtb1E3SkM6kKa740XWvCh9GzBz4VkqXMs16rJETBAwbHk1LyAGHchn0RswQxBh8A96g6KdDBhYXvBSluW8TkM6kKYEtAAxTmAWsbhaEy5YFiZGCgxbXvIrW1zYIq4CIwx7GFatIwvCgAgYtrx1eSmzy7y2T/MrdRPDwBAx4npwuI2xEbMLAYYt70Cf4bVn4cwV7GH8pyR4FxTtPMCw5eWrDhudpzgQSYgBHB5i+C+3EHSc2tPKSsxKBgxbXq65MEd6OPyU5K/D4EoDugRuYNjy0khBw8IOJMPBgwxMeE+7fWImIEYMDAIHjVzbRxR4RHWYAeowgkovQgzuUnrWmDngER14mKNWiJl1FRgzMQ8gRgoMrAmPjPAD7PQoqNLr7yVB04aY7FJGojVGpuER7Vk4U6kAYhALZ10F5krMxEKMHBgcfniE20f6ZJ8H95Ke0a32ENMoSkVrDC/LI9w+qhHAgonpKjCwLEyMBBgur/CI9iz07u9h3Wp8acW/ptMoilLBGuO0zCNoH9FXAcTExMpETFeBUTsrMXsBMFzA5S+VcPsIl8Hd92GgpfHGXfK2NU3TVLrGOIjzCLePjkBI0reeGYnpKjDqwUbMupIAg+7CiSMA2kd8vbL1O73AQ0wQrzFX/OGcqX10EF8GBxw82FVgzMScQIwEmBMQoMIJRR/GSw7MN9u3BtLNZsObx1M8a5wBCljbiGDi2eHETLsKjJGYHF9cltRhjUlmbPA3QCgImOQaYLCmgCGOYzMxmNL8GUyhNebmNrpRlK4IoUBiZpqYrgKDBMTECIBhJPB9E5yXaP4qAJh8e30Ar2nDS5llG8+3D3WLidaYDC5/34R/CoQWLRLTVWDUNzsxImDY8qL6gooM953kwCADvpgbunGm75zU7pv+tbPByzEEh2k6clMbQUhMbSSmq8AADhrMBcCwJ7mt7yYIN4SQDBj4o/XSDEx2GeoQUrjaxXNlBYZTDBixFPWAkFgbwEHEGIGZRiYFANMeMU8CYNjy7m9zzhjPI4TkwAxw+DfeHkpLxzG31tnDAQxMLIUQzk+EkFQzFzEMzNTcrY4CgQknZo06sBsYWF6q2z8m0AkZiDyxFJhc44nZpq0/2CtpxdW+WIGB5aUW8+L26yIpW5wWickK/OWIF1L04cBwAqIcs/YDw5YXwNwKwNCpWwhMskUfzAaMOtouPV5/YgWGTS2AyYZ/KQMwdIgKJ0aHyNj8l5tFLE+4/ABi+NLmT6QUHzCwvPx/F0LbX+ydUU/bQBCE69h+QLLwQyxAjdQkQBJiASlCoeb//7Fy4Grqzp43m5XcWMq8FeXurPVXe25v77wUMvt2YKptA16iwLTPEVb77JFbseWFyuyfDYpZVgppGj8xwC89kZpeVoWdSWRaFWDY8oIY4oW/LlBZganemqCJEq3Wqcglm8/RVmx5mRjw4jiOil9Ac2El62SBaXcm8bRYBYYT/VCR/62luPr50wAMeLmo1Wi1cyF5a1tfjGF5mZiOSudhZFy0yYnDkwXmk5i7XzTNKVRgsJRoEZrpwPBjK1/o0WqzLdKK37qvlX1lCHqG8fEQA2gfhwRmm5v08gFM0e0B814FGBQrqOK5uA2Y/UOzesq7ikULyZjO3DjTY6yvPfuPo2JLPSf8kiGB2TRWPRXUw04FBmbEIlifVyMwrw0pFi0kY2hPkBxjx7uF32Q3mUkMTBKufkBgLsy87BfdHh5AhQwMT3fsUK9swMxumRh5Uw4mRN0UTKLE2ONew34CdGLTNJ3zSTKnDAx4we0EB33ALO0ni/O+FAamqqrDiIltyuFkTIZ/SzF2zI95m0Hi4SUoHR6Yy8KiheBJ3w4BZoWUrVGYujMw1Xa7rSVi6MKjm3KQjMETJ1VibD2OgZcPAEySGgRe0MHgwBibcGJt3wOMw/LSijZGAC/5anVXuw6aRDIGKZi+GDssLy9QJvSYsidnklEBM8HNFIFxWF46jopH+OAlLE7UHmCQjEEKRomxw/KiBMIJDF6MN6MCZoM3jQiMw/LyCiSPsGo+iZk5gEEyBikYJcYey4v9BE5gsDluTMAUmPPKwHgtL1rHRqDqYhswSMYgBaPE2GN54X+8wGDGNSZgwptmpgEjW95ZE5e8AimPQIUXNmCQjEEKRomxx/ICNx8wMFzrMQEzwQSmBxi2vMwLE8N7l+QRqPDCCAySMUjBKDGWLe/0PaprYQXSCQwM14iAKfAd+ygwsLzEi04M747kEajwwgoMkjFIwSgxJstLvBAxvNnNBwwM13iAub3D9CUOjGx5d42iimv15BGo8MIKDJIxSMEoMSbLS7wQMVyW4AIG9VOjAWaR49sBCjAom1OXrvEGI74W8RFmIMYODJIxSMEoMYbl1ZYUMQfnnzuBmV8Hqz4SYKo63ELcpH5gMC3mKheIceIP4sgjtMTsjMBQ/jU4AjXGXGepFy2w5QnF4DZgeJsdih0GBWY5sWqbB9NAvFBvf25nHZ5E3S7I1PA+qG6DwFxsBBAziUsFZh6AWesx5kpu2dTQpmo6dMgBTPp9Cl5OefGxq2Wl9Za357yQOI+nW+I6NkJLZa+SroRo3QcMOMbcqgx/7UrL402pRXhIfQFjVpZ9GaYfV32XSaJfDQ3MBrakF5iF3Lww1+m8iCPgLderd1JKHpJTK2Kr9QGbfhhG1n0A5mhN18plQsqvbIm3I3Wxqw/pbRn9v7/RPpvNepJHIGJswECPyWExvua/anm8K/GWO4DJbspv/wOY28kxuixmB/ZWhPeL2Efdb6rFNrERWtWTHiUkvsM8zZFalYkk5RiPdZJIfaXJMUrTUr9MqO9XZ5111lm/2zO7FDtCIAr7pKIIKvgg6Ap6B2f/CwtlldfptHOTkAzpgT4Q0qOl5c83Veo8evTo0aNHj75IweHgrwStpgyALt8ZMLPUqaluASBWRdJI0htbSCGafFZI30sXnxZWvVe3BQDKtAsAqnw3/Nw8wqg/0/uGxatmlXIYclb9UgZr0n4ML/mzhUekFfhW8kDcAyOTO/ACpnAhG4jiO2DyXOx/AUzElFgGcU9yXw2M16HmTo5E+s+BMYjfH5jsMvpmrhllbqSDmbuLPJshUivv4D8HJuOQKOb+GpiugTZw9RGIAkx2r9j3xcBEr2wjMtlj0vC/D4zoDAzPRdXvBYxB9LC7uWrhKGsNI1vqi3wecy0qyufANDQxan8NjEYJSiS7FYAmOam59tXAwIwROjcnHv8emKC9Kk3dS7XMlGsQTQG0Oa9DR16b50EmxkB7VEbDT2CyC3OZDhQ19TkwxnHPxcnaUd+wgcelAXsGpmZOLF5Aa2vrLBX1CJTeUEN2YQBjxNIV4c1nIPu1770BiGmMzQLQfvTvjQa8CtThqExkh9ZXw8gNPwemqZMZ1TQan6JpeAYmFUgohuWc6j/68kUlHdSt5MGKHLeHFjEDloK6gIEGkAx0ZyYaugAzYHHoKyX9EpiGYzhpDIzFUO6v7/IRmAySHilMyRaIOhUnN1pTCjXwA5iQHQ+tMjAFQ2Xue/owYw3IjnlEkOooIvYOsPJsaLAaLq0xGV6UZUY1w7uuIFmqzG446Cdglq87qsMZvkQEZQb/XaOdz2IVegEDeImm2gUioygBZqSjGflTJghtmmxMnYExEjCOAcwB8pz02HzZuY/AUNIxmco501S0VXmokBFHkzyGxcDYMbboOKN5OK9UdbCy7xoxUHEes5RPOehbQCeaSCX+/XAIww1DpqUKhWg6ywEv8M5mDtmozkGykRszHPSC8uHQe/J1XwUGxgUlfIgy0liEYwGjZ/r1qCMjCTBpbNTxIoLvuLm+A0aNnFQyp/OGNi/yEzyLBcz0nOfRJuJQopzJoHBuoP+05kkdo08XGZiMKkdg3vdj7BADWKElJsokO3CMOr+GLMCQsRT4PTADubMZ3w0aCv+eqrnewaFvbkn6tsAEa61jYFYk2VyOBZg2gelU2lyQqVmI/PlhxL9JSaohqQ7LrrUAEOFV4e8DCxjp2CFIh0SbyDWqSNNuATNQqjAEzPTOprTvHiKqdPMNh3ePrZdfb62GALMKEfcpqReqOZnRwGdRYGCKmqF5ATN93TXCmAzSHpgCkQtcLmspG+w49DMw+wcIA/cOGANPGYn7c0gTjdkifQJMhR3/RB1+RDhSw8EEMTCUrKLjS1aa3rUAY7GAUYln23bAdK57ARNlMGYHDCujL7M9MNI4noERXzcFpjsUa33YAtPhwgypG2A86oEqwFTo9TIswUKS2htgVM6UkbYR5g0w3I47ZTP/Wv7s1BiaAJPQiJ7PIsz5zmqJIL8BRkNba4P+7QhzMdsDs4sw4uumKemVYtCvwFiq5Oq8AaajNTd3XqNKo5GpxtQlQb8DpoFOQdczjN2cYaIMhX+qnJGk28YRRk4yyWk5mBFaFYfan2Eqt1liuwsw0ndwqNszzD7CpJPZDpisLmeYk68bykN3vlunKzAZ6fVVr8Co4nLjnZdpcnP0EbgqP6ZE9Q6YAxld+jPnW5K93JLiuOF4Dn7ysQ69GY0fTpSHSy9gPKiSgbE/35IySpI7sEUJ48HY74BxRvH7CTcMbl1/dsBQVVYnsx0wVJtoiSYwRZ183VDBQXRcgKHxL642wHh5wJDgKyo8d5EOb4FRefR0eodxnfq+vsMULpoRn0BblVVV9geAllyAmeip0zuMPr/DDBRDnnXblCTy53eYaxRwWAt6Mtseeod1DuLyIAfT102B4aNerBH+AkyBWVwhXYHpyK/7Mf+qraQRbJaH07fAyK1VXNe3L72+Oji/ED5x78YLaq6hAK337LoAI3HyzUuvjDJYfvLeARMioeo9ymyY1hPuFpjGVctse4ZJGmjh5bIB7aOvR/9OEf6cWl1dP9WbHgAe/TcZ5MufOLI1HCnKXcP5o/+kuMnwRuMlfcsb6aP/JrsNIcYyM/ZJR48ePXr06NHt9QNpwSeiZigbUwAAAABJRU5ErkJggg==')",marginLeft:"-154px",width:"308px",height:"90px"}),$("#logosmall").css("backgroundImage","url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAANAAAAAqCAMAAAD1cyU5AAAC/VBMVEUAAADfJVnCsADCsADfJVnfJVnCsADCsADCsADfJVnCsADfJVnCsADfJVnCsADaQkvCsADfJVnCsADfJVnfJVn////////////CsADCsADfJVnfJVnfJVnfJVn////CsAD////fJVnfJVn////fJVn////fJVnCsADCsADfJVnfJVnCsADfJVnfJVnfJVnfJVnfJVnfJVnCsAD///86CRTCsAAJAwPCsADCsADfJVnCsADfJVnCsADfJVnCsAAYCQvfJVnfJVnCsADCsADfJVnCsAAVCAr////yL1PfJVnfJVnfJVnfJVnfJVnCsADCsADfJVnCsADCsADCsADCsADfJVnCsADfJVkQAwXc3uXfJVnfJVnCsAB1d37///8KAgQWBgjTYDPCsAA/QEU0DBUbBQkSDA7CsAATDA3CsAARBwjqKVHNIEiRGzTCsADCsADCsACTk5ffJVliFCIxCRD///8GBAXgIVvmM0/////jME61uMLGKETCsADfJVnTXzSKGjCGGi7CsADCsABvESRTDx3CsAA+ChbCsADfJVnfJVnfJVnfJVnfJVniLE7wOFTk5+7CsADBHEDExsy3IT+vHj3fJVmZHzXCsABsFSV4EiVcDRzfJVlYEB45OT01ChIyNDjfJVnCsADCsADfJVnCtADUJ0rV2+LNKEfM0NGlqK+pHTvfJVmWmaa+JEKdoKzIMke2Kz+goaSIHy5sFyRaW19GEBdDREf///8xHSIPBgdBNTffJVnfJVnCsAD09fjs7u/aKUvYJkvm5+fRai2hHTi4t72/v7+xt7+wKzymLUCzurr///9VVFvfJVk3ChNbEx3fJVndJU3GytvcL0vTMkvCwsafoKe0t8SkQlp+iJCgJzeFhYjCsADfJVnYI0vgIlrGnQzRaS7TI0rMfyDR0tXUIk7RNE7HlxDfJVnfJVlkFSPRZy/////CsADfJVn/OVr/QmL/LVz7/f7+MFj9NFb3L1X3+PrwKVTx9v7iJU7l6vP4JEf/H1LCsgBXOEq4AAAA7XRSTlMA8PDu8/b59FP9P1D2+/0Cm0GD+dW7It2aFJecP/6Z8mbtoxEIzMjIkqdI4r+GJOpaHAx3aBYM6Pjg0cSNTEo7Eq2Kh4I8NTP+t7GQiV0zHgz7rKiXjU8uF/Xmz6KeiB0I29dsYUIvLyklI/viz8y/ubafildEEvn07u7k3t7Z1L60tJ2ajXVtRTIXFRAG+/r17Ojn4s7KvrGwpZqUfnd0XEQ+Kyn67Orq5OLf3tvW1dXNvqGTfWpmVU1NRz04Evv6+fTy6NbV0dDGxMCqk4yAdSz99enl4dvZ1rizomcU/fv5+Pb15+PfoXBWLBN8+9SfAAALrklEQVRo3uyWOW8TQRSA38zO7LCwu05sCuJDKxBKHGKOWIp8JCASkiIYCLEDSIQGmogmiWioCBI0nAUNoqDh6vgJQEWNxB9AlNDM/gPE7Js9bK8ToAOJr7B2XmZX78u8eTPwn3+OtYu7tucEIOGUi5Bwvfu1hSn4WygbdEeWQVGLRnWIyArahWHfKmP4G3esAHYGIh5etjR8HGL2hrEcxtIcH2VWCqcBmkoOh1uQZpPKOjW2x6TnVPK0rkeeXU6EhJEgpBS1JRW+6hOkxA9CSMUnGn8vRJxhjCBW7hGkOT9NHEZSMLIHEB8/yck76KctRK18YmH3thiB0LqcwCkLG7KWCJnxay/vZdsGlWJOCTmFYUXRyeVB85qQQ8MBLZ4INazxIs7judYAn70OW5wf7qcYCWVKwSeLFilCH1nD7sBO3AuEXlGVKnKRGvdioWXo4ZQpvetK6ACOWtx6BMhs6S0g+URomJDPgNxwLkOKA44/CQPgXUIAjwcIbUojAzuBK9RxJYRQuRkLudDL1BNpfoiEYL+lH07m2OGU0KK/mqzfMCREr8zDr4UODhCy3RX93x3aFzO0oh2zQWwlEHJlG0KGTLO6nRAsCXfodiR0mPEHegkIxEJxxiTOeLV0GmKiV51w3pGIyd8T+lDXtTTk2WaCbWSDGMWBpGtZoaTinO2ZXqFywClArrgmCiFv/SDTjMUvpIRaOd6d/XlI0BO3dLHmWMz4bwllpInpXZOGaUfUjfoKFpfA4YT66zWIGZMTPUK3cJZXw3PoHKW3b0ZCx9U+wb0EKaGjzg2IcdC4m+ccd919QjjTcCzMXwtBU+d6hYrOSMSHmjmkYsKcw6HKUuACXF9CD2osdAnNCCoUNNQ033xEIWTVnwbY7xRSQocIOwIx41YDepkn/ItWrUyG7GdnVSBHjgNiqYeBQnPUGwLFXU/cgQhDC6lfpC1NLC1P4Gra8lmXUNk2lxRZg+KVYqJb6B0hxXnGT6aEKv4oFtvWol6I1HGy3zqt83amw3Jk7Jj6JZxEDKeFkA3TwKOyQ+3NwUIZ6V7RItKs4j6RmR4hXD2P7sJXEyFM/OmqPwv9QpMcW0LG4QyNtqzZ/iViDL9yvuSMnu8Ses5ISAW2Eaqum8YKVp0n2gOFZoR3PeiDHnUxgodSUnI2rSmWpYtfM8XVLqEjjKjiSgkVnP36pMoRNom3Bj+TKrrQyHcqjxMhmNyjeQGRUNpozDRmwjvDs0FCt+S63m3NtjTCfZcIZaWmnsWY52FTiCgQMg4pIaIvEZed1lF8ypTY4VTnJqyARmofHYyFEhKhtFFThlXniU5aaMHwslhT9twJihvlFHbxUAiyY+tjY+sbU1r+RzNs2wUtcgkzzczmu4T26HUpEnKp4BzVd4m9kDYi2sjKLf6ZEIw0XQOL6Jnw2imhO1Jg13DdKjyRG6BYlp3BB2tZ0BP6plBgZBRipjkpJEKjfgUUp5WFqslDunvch37OhEYPOF/MxEJfTiKZnYSgek3SGUxeeHf7hKrmchAC6nbW1k7Z2BY6rjtQaI66G6CFphlh+eRmTVAFhSKJx1aQYsWqhFdVGLRGzyOjUChzmecCeCm/kxCMKKMsGrliqVeobAcRqC5LqjDpGoA+mNJCm4ac+BAJ8VmmCgt5WOIHIqHkNvqekK1Go8Fx8Ik7kKZFSF73FjZPUKjBiYaxI71CI71MrZu4RlUp7/YK1eSYPowMoaAboC8WzbRQ0xbNqZGR21+1UP6pvxo177ffc4lQjrcwPEqYItr66bag7+QF3RYbR1HIIXsuBXwu9R6s1Z/MmMtO20AUhmecGRsj26E4C3qJkCtESkmKiuQSWkIKgUik6SVqgAqQYAUVi6pi0R1dVlBgwQax5dLH4BV4AxatuqqqySt0fGYysYkVpK74pCjjOYnlX55z5p/jWNfQNXYsMmY7JAhODwsImJ0ulaZ75doytLOIIKgaTKvxO/1KC0FDTwmZlytnt9oSNEOaJ7pctVq9fBJy39Xs4NFgmBcp24bSggkX1MH6fKs5+jWs2gTkPusPCYLjBYqg9lolqKf5hrTA4P74aeaEIP785l5grHl+zLcELTfmUDsnGJ9zL0qvQbBwDA3sdRak99f7ovT0CuPAnocF+Rb41DaOmdXch/IG82WN64Eb/UVSUHK8kQ1KMt4PCVoE09LOErerFbp8P8qWWJ3nhNwk6BDF4lt6PSyorlt3EaeeUayIzUnrldbHMJjjoyggCEzaDN9tTlBLkHKii68V0mBTLmgOxTJPR0b+S9DoJ+aMBoL6pKAE+yzMOFMIEzvMMldGDayPbrG8HyMITtJ4vFFBYUEmvYTnx0RB94JSSPGfKZpFceyn3Vf4BkFjMW2RrpW8Ay4ooT867Z7V9D7eQYAWiMPGhptY2imfKhnGFTRJSpbj68zY4ZOCDZHkIOidZ9v2Hgg6CqoATc0QW2wtZKQJFdVwysw+pBXUzsscNccPCA4EESnoIB2892QD31E5lGhHc5gGGX7IoGOlT2SYAREG9lTAGEzl9fcGBBlDfp61bqIRD2PPtIdkrudgzdiuhz1iH6UaZhDGpheuzR7mH5dsuWk+iuIRl7hL+4jY8D/1hqi4lII2tDgSxvYbUa8SGnA2lpCRDFLwdpUgY4jYMEK+ril+EwyIY10lK22MoOJiyT2kSGHJFI4lPcT99lcM0O+yhmDAHujU/N15iyST0PU944NJ1Q5WdIupSeQvqNhoVwuw94ULFGEXZvm6f1yAUSRcEMFzdCFGUR6EflQQetTlALrdJAPPuVouf1wvFouba2i1WP6QRPAloxBf/4KelYurybXNIh/eYv41Vy6taURRAD7/wNXVnQRkfoHDbN3p/ARd2Ag+EB8LUYNaFwqKOxWjiIqPVZMmNO93Fm0T8k5I6PsFXZS2i3JhXhqTttDrDJk2tBQKs+i3OHPmcg+cj8u5l9neJnH1ZMkZOTg4WNq2XywcXTDAtBeO1wBg0wIE7/Li4nJs62hhzWWPLrzdBK0wY0rNDXiMxDGMSIwjjLHRBKDHWMkUlF8cB72RfJBNLiOYQcUfOWEA3uFHM/cx4cTd5Lm0FayLfClKdN8uj4POd1zieX6xUeJXmECdT6yBVlAY234KoZtow8gEccpgIgZjRJIy6EFG/iWYDJQN9GhUbDACmOVlhfVHu1YiJO7OTD6MLJVxJNvnuDZzkeATRMj7PBUDl4fj5uqfnzcSfF5nz/KpAmiEDVP4jiqEcBw2khQingale7NiQPpHt4XuYL1SoggBJkEhEMG7qy5wXjpeTjq2tvbxi9ffBtyRp85xqSi4VkrcMuNaK/Uz5ysr5wmu9WU7wz+jQSNIX1RSFTKeIkB3EAITMRlBUbKBvNF0S4hY3ywTIblAQbf+EV/u+xWhcqczKe4ff2PZYni63ydClrk+l46BJd1n0026W+xXs5lpTjuhpJHMzIYqFMdmrEdIbRsZblKy/ssMmWULZVlOUVKvHpB4JT5anSBCD+6K5fLl1FlTKlaDbPExm4oyucRgwGYZXawmSex0eCcoSdKAvaeV0IY8A6eqECBshH8+IWKYVAfRPSXencevLM6HROjqq4jfbOWEx417UmU2mMp709JsVUjHGLqb32PZx0V2L9esSpoJnWIZkyq0gfWA/jhDxr/N0Jg6QvaIOHXWubrqOMtEyHH2SjzstISd87CQaQzvtVrBQT4fDGa7c/VG+HowfDJs+S0ZYVojIXIQStuq0Aj077ecaqRzO/CS3/cUzzx4+HXmqcPrnsLz4e/BbqFeyAnX4YpQsVhrwvu9oXD9ZPhh9loY3XLCTkGrR8gkG1C3hX5/h5Ikuy2kvkNKGTGiRlsY5/3JVZhw3r87/+Lwzfyhf5S+rszF7AF7O1QNV0LRCV07FMo0a6FQLdedDbVd47lPtRj8pzCb7l4AXL5197q7t9nrTYCv5/bQHr8OwFqgPTTt04Gfpr3jXg/ttY97aKuO8RY8AYAf742tTMTK5nMAAAAASUVORK5CYII=')"),$("#minimizechatcontainer").prepend("<div id='clearChat' style='position: absolute; right: 70px; color: #c9c9c9; opacity: 0.8; cursor: pointer;'>Clear chat</div>"),$("#clearChat").click(clearChat),(SWAM.appendHelp=function(){var Bt=[["Z","Radio All"],["X","Radio Team"],["C","Radio Bubble"],["Y","Drop flag"],["5 or End","Cruise Control"],["DEL","Clear chat"],["F3","Toggle leaderboard"],["F4","Toggle UI"],["F9","Open Game Log"],["F10","Open Mod Settings"]],Gt=$("<div class=\"commands\" style=\"color: white\">StarMash - Mod shortcuts<div class=\"cmdlist\"></div></div>");for(var Yt of Bt){var Ht="<span class=\"nowrap\"><div class=\"cmd\">$key</div><div class=\"desc\">$desc</div></span>".replace(/\$key/g,Yt[0]).replace(/\$desc/g,Yt[1]);$(".cmdlist",Gt).append(Ht)}$("#howtoplay .hiddenstuff").append(Gt)})(),SWAM.Templates=document.createElement("div"),$.get(getFilePath("mod_templates.html"),Bt=>{$(SWAM.Templates).html(Bt),$("body").append(getTemplate("#ModStyles")),window.showRequestlyUpdate&&showRequestlyWarning(),addRedditPanel(),addChangelogPanel(),addKillDeathInfo(),SWAM.GameLog=new GameLog,$("#logon > div.buttons").before($(getTemplate("#btnOpenExtensions")).click(function(){SWAM.OpenExtensionsWindow()}))}),function(){let Gt=new SettingsProvider({general:{powerupsFX:!0,killStreaksFX:!0,zoomFreeSpectator:!0,scalingFactor:2500},ui:{showReddit:!0,showWhoKilledWho:!0,showLogConnections:!0},audio:{voiceEventsCTF:!0,bgMusicMainMenu:!1}});Gt.root="",Gt.title="Mod Settings";let Xt=Gt.addSection("General");Xt.addBoolean("general.powerupsFX","Visual effects for powerups."),Xt.addBoolean("general.killStreaksFX","Player glow with kill streaks (5 kills without dying)."),Xt.addBoolean("general.zoomFreeSpectator","Zoom out in free-camera spectator mode."),Xt.addSliderField("general.scalingFactor","Zoom Level (default: 2500)",{min:2e3,max:6e3,step:500}),Xt=Gt.addSection("Interface"),Xt.addBoolean("ui.showReddit","Reddit: Display discussion panel. (changes will be made on next load)."),Xt.addBoolean("ui.showWhoKilledWho","Log: Show Who killed Who."),Xt.addBoolean("ui.showLogConnections","Log: Show players joining/leaving."),window.showRequestlyUpdate&&Xt.addButton("Show again Requestly update steps",{click:showAgainRequestlyWarning,css:{minWidth:"400px"}}),Xt=Gt.addSection("Audio"),Xt.addBoolean("audio.voiceEventsCTF","CTF: Voice messages for flag events."),Xt.addBoolean("audio.bgMusicMainMenu","Main Menu: Play background music."),SWAM.settingsProvider=Gt}(),SWAM.loadSettings=function(){setModSettings(getModSettings())},SWAM.OpenSettingsWindow=function(){function Bt(Ht){$("#modVersion",Yt).html(SWAM.version);for(let Wt of Gt)Wt.setValues(Ht)}let Gt=[];var Xt=getModSettings();let Yt=createModal({title:"StarMash Mod Settings",content:getTemplate(".SWAM_Settings"),width:"800px"});for(let Ht of SWAM.getSettingsProviders()){let Wt=$(getTemplateContent("#Settings_section_separator"));$(".sectionsContainer",Yt).append(Wt),$(".sectionSeparator",Wt).html(Ht.title);let jt={accept:function(){},cancel:function(){},setValues:function(){}};jt=$.extend(jt,Ht.setWindow(Xt,Yt)),Gt.push(jt)}Bt(Xt),$(".divRestore",Yt).click(()=>{Xt=getDefaultModSettings(),Bt(Xt)}),$(".btnAccept",Yt).click(()=>{for(let Ht of Gt)Ht.accept();setModSettings(Xt),Yt.remove()}),$(".btnCancel",Yt).click(()=>{for(let Ht of Gt)Ht.cancel();Yt.remove()})},SWAM.panX=function(Bt){Bt=Bt||{};let Gt="undefined"==typeof Bt.start?-16384:Bt.start,Xt="undefined"==typeof Bt.end?16384:Bt.end,Yt="undefined"==typeof Bt.step?200:Bt.step,Ht="undefined"==typeof Bt.speed?50:Bt.speed;Xt<=Gt||(Graphics.setCamera(Gt,Graphics.getCamera().y),Gt+=Yt,setTimeout(()=>{SWAM.panX({start:Gt,end:Xt,step:Yt,speed:Ht})},Ht))},SWAM.panY=function(Bt){Bt=Bt||{};let Gt="undefined"==typeof Bt.start?-8192:Bt.start,Xt="undefined"==typeof Bt.end?8192:Bt.end,Yt="undefined"==typeof Bt.step?200:Bt.step,Ht="undefined"==typeof Bt.speed?50:Bt.speed;Xt<=Gt||(Graphics.setCamera(Graphics.getCamera().x,Gt),Gt+=Yt,setTimeout(()=>{SWAM.panY({start:Gt,end:Xt,step:Yt,speed:Ht})},Ht))};let freeSpectator={ignore_next:!1,handler_added:!1,interval:0,position:null,panIncrement:100,prevSF:0};SWAM.moveCamera=function(Bt){let Gt=freeSpectator.panIncrement;var Xt=$.inArray(Bt.which,[37,38,39,40]);if(-1<Xt){let Yt=Graphics.getCamera();switch(Bt.which){case 37:Graphics.setCamera(Yt.x-Gt,Yt.y);break;case 38:Graphics.setCamera(Yt.x,Yt.y-Gt);break;case 39:Graphics.setCamera(Yt.x+Gt,Yt.y);break;case 40:Graphics.setCamera(Yt.x,Yt.y+Gt);}return freeSpectator.position=Graphics.getCamera().clone(),!1}return!0},SWAM.resizeMap=function(Bt){config.scalingFactor=Bt,Graphics.resizeRenderer(game.screenX,game.screenY),ResizeNamePlates(Bt)},SWAM.ZoomTo=function(Bt){let Gt=config.scalingFactor,Xt=setInterval(function(){Gt<Bt?(config.scalingFactor+=100,config.scalingFactor>=Bt&&(config.scalingFactor=Bt,clearInterval(Xt))):(config.scalingFactor-=100,config.scalingFactor<=Bt&&(config.scalingFactor=Bt,clearInterval(Xt))),SWAM.resizeMap(config.scalingFactor)},20)},SWAM.setTargetedPlayer=function(Bt){parseInt(Bt)==Math.NaN||(Bt=parseInt(Bt),SWAM.targetedPlayer=Bt,!Players.amIAlive()&&(Network.sendCommand("spectate",Bt+""),Bt==game.myID&&!freeSpectator.handler_added&&(console.log("selected target"),freeSpectatorMode(!0))))};let Games_spectate=Games.spectate;Games.spectate=function(Bt){$("#btnFreeSpectator").show(),freeSpectator.ignore_next||Games_spectate.call(Games,Bt),Bt==game.myID||freeSpectator.ignore_next?Bt==game.myID&&(freeSpectator.ignore_next=!1,null!=freeSpectator.position&&Graphics.setCamera(freeSpectator.position.x,freeSpectator.position.y)):(freeSpectator.position=Graphics.getCamera().clone(),freeSpectatorMode(!1))};let Players_add=Players.add;Players.add=function(Bt,Gt){Players_add.call(Players,Bt,Gt);let Xt=Players.get(Bt.id);Xt.scorePlace=0,Xt.name=Xt.name.replace(nonprintRegex,"[WS]"),SWAM.addPlayerLogLine(Xt,!0),SWAM.trigger("playerAdded",Xt)};let Players_destroy=Players.destroy;Players.destroy=function(Bt){let Gt=Players.get(Bt);SWAM.addPlayerLogLine(Gt,!1),SWAM.trigger("playerDestroyed",Gt),Players_destroy.call(Players,Bt)};let Players_reteam=Players.reteam;Players.reteam=function(Bt){Players_reteam.call(Players,Bt),Bt.id==game.myID&&(game.myTeam=Bt.team),SWAM.trigger("playerReteam",Bt)};let Players_network=Players.network;Players.network=function(Bt,Gt){Players_network.call(Players,Bt,Gt),Bt===Network.SERVERPACKET.PLAYER_RESPAWN?(Gt.id==game.myID&&(SWAM.CruiseMode.off(),SWAM.hyperSpace&&SWAM.hyperSpace.show(),$("#btnFreeSpectator").hide(),freeSpectatorMode(!1)),SWAM.trigger("playerRespawn",Gt)):Bt===Network.SERVERPACKET.PLAYER_UPDATE||Bt===Network.SERVERPACKET.PLAYER_FIRE||Bt===Network.SERVERPACKET.EVENT_BOOST||Bt===Network.SERVERPACKET.EVENT_BOUNCE?AutoPilot&&AutoPilot.mimicUpdate(Bt,Gt):void 0};let Players_stealth=Players.stealth;Players.stealth=function(Bt){Players_stealth.call(Players,Bt),AutoPilot&&AutoPilot.mimicStealth(Bt)};let Players_impact=Players.impact;Players.impact=function(Bt){Players_impact.call(Players,Bt),SWAM.trigger("playerImpact",Bt)};let Players_kill=Players.kill;Players.kill=function(Bt){var Gt=Players.get(Bt.id);if(null!=Gt&&(0!=Bt.killer||0!=Bt.posX||0!=Bt.posY)){let Xt=Players.get(Bt.killer);controlKillsDeaths(Xt,Gt),SWAM.addKilledLine(Xt,Gt),SWAM.trigger("playerKilled",[Bt,Gt,Xt])}Players_kill.call(Players,Bt)};let Players_whisper=Players.whisper;Players.whisper=function(Bt){Players_whisper.call(Players,Bt),Bt.from!=game.myID&&(Sound.UIClick(),setTimeout(()=>{Sound.UIClick()},200))};let Mobs_add=Mobs.add;Mobs.add=function(Bt,Gt,Xt){Mobs_add.call(Mobs,Bt,Gt,Xt),SWAM.trigger("mobAdded",[Bt,Gt,Xt])};let Network_sendMethods=[Network.sendChat,Network.sendTeam,Network.sendWhisper,Network.sendSay];Network.sendChat=function(Bt){splitAndSend(Bt,Network_sendMethods[0])},Network.sendTeam=function(Bt){splitAndSend(Bt,Network_sendMethods[1])},Network.sendWhisper=function(Bt,Gt){splitAndSend(Gt,function(Xt){Network_sendMethods[2].call(Network,Bt,Xt)})},Network.sendSay=function(Bt){splitAndSend(Bt,Network_sendMethods[3],30,3e3)};let UI_aircraftSelected=UI.aircraftSelected;UI.aircraftSelected=function(Bt){var Gt=0==game.myGraphicsSet?"teamImperial":"teamRebel";console.log("prev: "+game.myGraphicsSet);for(var Xt=1;5>=Xt;Xt++)$("#selectaircraft-"+Xt).removeClass("teamImperial").removeClass("teamRebel").addClass(Gt);SWAM.updateShipNames(),UI_aircraftSelected.call(UI,Bt),console.log("post: "+game.myGraphicsSet),console.log("-------------------")};let UI_addPowerup=UI.addPowerup;UI.addPowerup=function(Bt,Gt){UI_addPowerup.call(UI,Bt,Gt),SWAM.Settings.general.powerupsFX&&(game.graphics.layers.game.filters=1==Bt?[new PIXI.filters.AdjustmentFilter({gamma:1,saturation:0.8,contrast:1,brightness:1,red:1,green:1,blue:1.1,alpha:1.3})]:[new PIXI.filters.AdjustmentFilter({gamma:1.2,saturation:1,contrast:1,brightness:1,red:1.35,green:0.8,blue:0.8,alpha:1.2}),new PIXI.filters.CRTFilter({curvature:0,lineWidth:0,lineContrast:0,verticalLine:!1,noise:0,noiseSize:0,seed:0,vignetting:0.3,vignettingAlpha:0.7,vignettingBlur:0.3,time:0})],SWAM.prevPowerupTimeout&&clearTimeout(SWAM.prevPowerupTimeout),SWAM.prevPowerupTimeout=setTimeout(function(){game.graphics.layers.game.filters=[],delete SWAM.prevPowerupTimeout},Gt))};let UI_resetPowerups=UI.resetPowerups;UI.resetPowerups=function(){UI_resetPowerups.call(UI),game.graphics.layers.game.filters=[]},UI.updateStats=function(Bt){let Gt="";if(2==game.gameType){let Ht=0,Wt=0;forEachPlayer(jt=>{1==jt.team?Ht++:Wt++}),Gt="<span class='greyed'>&nbsp;&nbsp;(<span style='color: #4076E2'>"+Ht+"</span>&nbsp;/&nbsp;<span style='color: #EA4242'>"+Wt+"</span>)<span class='greyed'>"}var Xt=Bt.playerstotal,Yt="";Yt+="<div class=\"item\"><span class=\"icon-container\"><div class=\"icon players\"></div></span><span class=\"greyed\">"+Bt.playersgame+"&nbsp;/&nbsp;</span>"+Xt+Gt+"<span class=\"icon-container padded\"><div class=\"icon ping\"></div></span>"+Bt.ping+"<span class=\"millis\">ms</span></div>",$("#gameinfo").html(Yt),game.ping=Bt.ping};let UI_serverMessage=UI.serverMessage;UI.serverMessage=function(Bt){if((UI_serverMessage.call(UI,Bt),2===game.gameType)&&!(SWAM.Settings&&SWAM.Settings.audio&&!SWAM.Settings.audio.voiceEventsCTF)){let Gt="<span class=\"info inline\"><span class=\"blueflag\"></span></span>",Xt="<span class=\"info inline\"><span class=\"redflag\"></span></span>",Yt=Bt.text.includes(Gt),Ht=Bt.text.includes(Xt);if(2==Bt.type&&(Yt||Ht)){let Wt="";Yt&&(Wt=Bt.text.substring(Gt.length)),Ht&&(Wt=Bt.text.substring(Xt.length)),Wt=Wt.substring(0,Wt.indexOf(" ")).toLowerCase();let jt=Players.getMe().team,zt=0,Vt=Yt?1:2;"taken"==Wt?zt=jt==Vt?SWAM.Audio.Flag.OursTaken:SWAM.Audio.Flag.EnemyTaken:"captured"==Wt?(SWAM.GameLog.logFlag(Bt.text),zt=jt==Vt?SWAM.Audio.Flag.OursCaptured:SWAM.Audio.Flag.EnemyCaptured):"returned"==Wt?zt=jt==Vt?SWAM.Audio.Flag.OursRecovered:SWAM.Audio.Flag.EnemyRecovered:void 0,SWAM.Audio.playFlagEvent(zt,jt)}}};let UI_selectUpgrade=UI.selectUpgrade;UI.selectUpgrade=function(Bt){SWAM.radio.visible()||(UI_selectUpgrade.call(UI,Bt),SWAM.trigger("playerUpgraded",Bt))};let UI_addChatLine=UI.addChatLine;UI.addChatLine=function(Bt,Gt,Xt){let Yt=["-SWAM-PONG"],Wt=-1<$.inArray(Gt.toUpperCase(),["-SWAM-PING"]);for(var jt of Yt)Wt=Wt||Gt.startsWith(jt);if(!Wt){let zt=Gt.match(getURLRegEx());if(null!=zt){let Vt=Gt.split(getURLRegEx());Gt="";for(let qt=0;qt<Vt.length;qt++)Gt+=UI.escapeHTML(Vt[qt]),qt<zt.length&&(Gt+="<a href='"+zt[qt]+"' target='_blank' style='text-decoration: underline;'>"+zt[qt]+"</a>")}UI_addChatLine.call(UI,Bt,Gt,Xt,!1)}else{let zt=Gt;if(Gt=Gt.toUpperCase(),"-SWAM-PING"==Gt)return Bt.id==game.myID||window.anonmod||Network.sendWhisper(Bt.id,"-SWAM-PONG "+SWAM.getThemeFunction().themeName),void UI_addChatLine.call(UI,Bt,Gt,Xt);2==Xt&&Bt.id!=game.myID&&Gt.startsWith("-SWAM-PONG")&&(zt=zt.substring(10).trim(),UI_addChatLine.call(UI,Bt,"I'm using STARMASH, theme: "+zt,Xt))}};let games_prep=Games.prep;Games.prep=function(){RemoveMusic(),SWAM.GameLog.logConnected(),console.log("game prepped "+new Date),games_prep.apply(Games),(1==game.gameType||3==game.gameType)&&$("#graphicsSet").show(),$("body").append("<div id='AutoPilotAlert' style='position: absolute; top: 100px; left: calc(50% - 100px); width: 200px; color: white; font-size: 40px; background-color: rgb(7, 185, 7); opacity: 0.6; text-align: center; border-radius: 20px; padding: 10px; display:none;'>AutoPilot</div>"),$("#score-kills").html("0"),$("#score-deaths").html("0");let Bt=$("<div id='WhoKilledWho' style='position: absolute; top: 40px; left: 60px; width: 400px; height: 100px; opacity:0.9; overflow: hidden; padding: 8px; font-size: 12px; color: white; cursor: pointer;'></div>").click(()=>{SWAM.GameLog.show()});$("body").append(Bt),UI.addChatMessage("Mod:  Press H to check StarMash shortcuts.".bold()),UI.addChatMessage("Alt-Click the minimap for autopilot (experimental).".bold()),2==game.gameType&&UI.addChatMessage("Y when carrying the flag, to drop it.".bold()),SWAM.PlayerInfoTimer=setInterval(function(){var Gt=Players.getIDs(),Xt=Players.getMe();for(var Yt in Gt){var Ht=Players.get(Yt);"undefined"!=typeof Ht.scorePlace&&(Ht.sprites.name.text=Ht.scorePlace+". "+Ht.name+(Ht.team==Xt.team?" ["+Math.floor(100*parseFloat(Ht.health))+"]":""))}},500),SWAM.hyperSpace&&SWAM.hyperSpace.show(),$(window).keydown(SWAM.keydown_handler),$(window).keyup(SWAM.keyup_handler),$("canvas").click(SWAM.canvas_click_handler),$("canvas").mousedown(SWAM.canvas_mousedown_handler)};let games_wipe=Games.wipe;Games.wipe=function(){games_wipe.apply(Games),clearInterval(SWAM.PlayerInfoTimer),freeSpectatorMode(!1),$("#graphicsSet").hide(),$("body").remove("#WhoKilledWho"),$("#btnFreeSpectator").hide(),$(window).off("keydown",SWAM.keydown_handler),$(window).off("keyup",SWAM.keyup_handler),$("canvas").off("click",SWAM.canvas_click_handler),$("canvas").off("mousedown",SWAM.canvas_mousedown_handler)};let games_showCTFWin=Games.showCTFWin;Games.showCTFWin=function(Bt){games_showCTFWin.call(Games,Bt),setTimeout(function(){SWAM.GameLog.logNewMatch(),SWAM.RandomizeBackground&&SWAM.RandomizeBackground()},6e4)};let graphics_resizeRenderer=Graphics.resizeRenderer;Graphics.resizeRenderer=function(Bt,Gt){graphics_resizeRenderer.call(Graphics,Bt,Gt),SWAM.resizeLayers(Bt,Gt)},SWAM.updateLayers=function(){},SWAM.resizeLayers=function(){},SWAM.addDebugElements=function(){SWAM.debug&&($("#logon").append("<div><input class='dgCamUpdates' type='button' value='updates' style='width: 50px; margin-right: 10px;'></div><table><tr><td colspan='3' align='center'><input class='dgCamY' type='button' value='-8192' style='width: 50px; margin-right: 10px;'></td></tr><tr><td><input class='dgCamX' type='button' value='-16384' style='width: 50px; margin-right: 10px;'></td><td><input class='dgCamX' type='button' value='0' style='width: 50px; margin-right: 10px;'><input class='dgCamY' type='button' value='0'    style='width: 50px; margin-right: 10px;'></td><td><input class='dgCamX' type='button' value='16384' style='width: 50px; margin-right: 10px;'></td></tr><tr><td colspan='3' align='center'><input class='dgCamY' type='button' value='8192' style='width: 50px; margin-right: 10px;'></td></tr></table>"),$("#logon input.dgCamX").click(function(Bt){let Gt=$(Bt.target).val();Graphics.setCamera(parseFloat(Gt),Graphics.getCamera().y)}),$("#logon input.dgCamY").click(function(Bt){let Gt=$(Bt.target).val();Graphics.setCamera(Graphics.getCamera().x,parseFloat(Gt))}),$("#logon input.dgCamUpdates").click(function(){SWAM.doUpdates=!SWAM.doUpdates}))},SWAM.addKilledLine=function(Bt,Gt){if(!0==SWAM.ShowKilled&&!0==SWAM.Settings.ui.showWhoKilledWho){if(null!=Bt&&null!=Gt){let Yt="<div class=\"flwkw line\"><span class=\"playersel\" data-playerid=\""+Bt.id+"\"><span class=\"flag small flag-"+Bt.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==Bt.team?"#4d7fd5":2==Bt.team?"#dc4f46":"")+";\">"+UI.escapeHTML(Bt.name)+"</span></span><span class=\"text\" style=\"margin-left: 10px; margin-right: 10px; opacity: 0.6;\"> killed </span><span class=\"playersel\" data-playerid=\""+Gt.id+"\"><span class=\"flag small flag-"+Gt.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==Gt.team?"#4d7fd5":2==Gt.team?"#dc4f46":"")+";\">"+UI.escapeHTML(Gt.name)+"</span></span></div>";addToLog(Yt)}}},SWAM.addPlayerLogLine=function(Bt,Gt){if(!0==SWAM.ShowEnterLeave&&!0==SWAM.Settings.ui.showLogConnections){if(null!=Bt){let Yt="<div class=\"flplayer line\"><span class=\"playersel\" data-playerid=\""+Bt.id+"\"><span class=\"flag small flag-"+Bt.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==Bt.team?"#4d7fd5":2==Bt.team?"#dc4f46":"")+";\">"+UI.escapeHTML(Bt.name)+"</span></span><span class=\"text\" style=\"margin-left: 10px; margin-right: 10px; opacity: 0.6;\">"+(Gt?" joined.":"left.")+"</span></div>";addToLog(Yt)}}},SWAM.laser=null,SWAM.OnPlayerUpdate=function(){},SWAM.getLeaders=function(){let Bt={};if(game.gameType==SWAM.gameType.CTF){let Gt=null,Xt=null;forEachPlayer(Yt=>{1==Yt.team?(null==Gt||Yt.scorePlace<Gt.scorePlace)&&(Gt=Yt):(null==Xt||Yt.scorePlace<Xt.scorePlace)&&(Xt=Yt)}),null!=Gt&&(Bt[Gt.id]=Gt),null!=Xt&&(Bt[Xt.id]=Xt)}else{forEachPlayer(Xt=>{1==Xt.scorePlace&&(Bt[Xt.id]=Xt)})}return Bt},SWAM.OnScoreboardUpdate=function(Bt,Gt,Xt){SWAM.trigger("scoreboardUpdate",[Bt,Gt,Xt])},SWAM.toggleLeaderboard=function(){game.state!==Network.STATE.PLAYING||($("#scoreboard").toggle(400),$("#roomnamecontainer").toggle(400))},SWAM.toggleUI=function(){if(game.state===Network.STATE.PLAYING){let Bt="none"==$("#sidebar").css("display");Bt?($("#scoreboard").show(400),$("#roomnamecontainer").show(400)):($("#scoreboard").hide(400),$("#roomnamecontainer").hide(400)),$("#sidebar").toggle(400),$("#logosmall").toggle(400),$("#menu").toggle(400),$("#gameinfo").toggle(400),$("#scorebig").toggle(400)}},SWAM.showDegubInfo=function(){config.debug.show=!0,window.DEVELOPMENT=!0,Tools.setupDebug()},SWAM.moveMinimap=function(){setTimeout(function(){$("#scorebig").css("right",config.minimapSize+"px"),config.minimapPaddingY=game.screenY-50-config.minimapSize/2,UI.resizeMinimap()},8e3)},SWAM.updateShipNames=function(){let Bt={1:["X-Wing"],2:["B-Wing"],3:["A-Wing"],4:["Y-Wing"],5:["Scout ship"],101:["Speed"],102:["Deflector Shields"],103:["Energy Regen"],104:["Laser Speed"]},Gt={1:["Tie Fighter"],2:["Tie Bomber"],3:["Tie Interceptor"],4:["Tie Advanced"],5:["Tie Phantom"],101:["Speed"],102:["Deflector Shields"],103:["Energy Regen"],104:["Laser Speed"]};for(var Xt in game.tooltipValues)game.tooltipValues[Xt][0]=0==game.myGraphicsSet?Gt[Xt][0]:Bt[Xt][0]},SWAM.CruiseMode={append:function(){let Bt=$("<div id='CruiseControl' state='OFF' style='display: none; background-color: rgba(0,0,0,.3); width: 44px; height: 44px; background-repeat: no-repeat; background-size: 35px 35px; background-position: center; border-radius: 7px;'></div>").css("background-image",cruiseOFFDataURL).show().click(function(){SWAM.CruiseMode.toggle()});$("#sidebar").append(Bt),$("#CruiseControl").mouseenter(function(Gt){let Xt="<div class='header'>Cruise Control</div></div><div class='desc'>Makes the ship advance automatically at full speed.  Can be activated with '5' or 'END' keys.</div>";Xt+="<div class=\"arrow\"></div>",$("#tooltip").html(Xt),UI.show("#tooltip");let Yt=Gt.currentTarget.getBoundingClientRect();$("#tooltip").css({left:Math.round(Yt.left+60)+"px",top:Math.round(Yt.top-10)+"px"})}).mouseleave(function(){UI.hide("#tooltip"),$("#tooltip").html("")})},on:function(){$("#CruiseControl").css({borderColor:"#c9ff00","background-size":"44px 44px",backgroundImage:"url('data:image/svg+xml;base64,"+cruise64green+"')"}).attr("state","ON"),Network.sendKey("UP",!0)},off:function(Bt){"undefined"==typeof Bt&&(Bt=!0),$("#CruiseControl").css({borderColor:"#555555","background-size":"35px 35px",backgroundImage:cruiseOFFDataURL}).attr("state","OFF"),Bt&&Network.sendKey("UP",!1)},toggle:function(){"ON"===$("#CruiseControl").attr("state")?SWAM.CruiseMode.off():SWAM.CruiseMode.on()},isOn:function(){return"ON"===$("#CruiseControl").attr("state")}},SWAM.CruiseMode.append(),SWAM.radio={append:function(){$("body").append("<div id='radioPanel' style='display: none; position: absolute; bottom: 180px; left: 60px; width: 300px; height: auto; max-width: 700px; opacity:0.9; overflow: hidden; padding: 8px; font-size: 12px; color: white; text-shadow: 0 0 3px rgba(0, 0, 0, 0.8); background-color: rgba(0,0,0,0.5); border: 1px solid #555555; border-radius: 3px;' ><div id='radioChannel' style='color: yellow;'>* Radio not available *</div><div id='btnRadioConfig' style='color: #888888; text-decoration: underline; position: absolute; top: 6px; right: 10px; cursor: pointer;'>[Customize Messages]</div><hr/><div id='radioOptions'></div></div>"),this.loadOptions(),$("#btnRadioConfig").click(function(){SWAM.radio.showConfig(SWAM.radio.currentChannel)})},currentChannel:0,channelMethods:[Network.sendChat,Network.sendTeam,Network.sendSay],visible:function(){return"none"!==$("#radioPanel").css("display")},send:function(Bt){this.channelMethods[this.currentChannel](Bt)},sendTo:function(Bt,Gt){this.channelMethods[Bt](Gt)},channelNames:["* Radio to All *","* Radio to TEAM *","* CLOSE RANGE signal *"],channelKeys:["Z","X","C"],options:[[],[],[]],defaultOptions:[["gg","Hi!","Yes","No","Thanks!","You are welcome!","I'll be right back.","Got to go, cya!","Great work, team!","Try the STAR WARS MOD for AirMash! More info in:  reddit.com/r/airmash"],["Affirmative","Negative","** I'VE GOT THE FLAG! COVER ME! **","** THE ENEMY HAS OUR FLAG! **","** All wings, protect our flag carrier! **","Defending the base! Need assistance!","Attacking their base!  Need assistance!","On my way!","Cancel that..","Stick together, team!"],["Hey there!","Stop!","Go Go Go!","Imperial scum!","Rebel scum!","%@*#$!!","YEE-HAW!!!",":lol:",":cry:",":clap:"]],loadOptions:function(){var Bt=localStorage.getItem("radioMessages");if(null!=Bt)try{SWAM.radio.options=JSON.parse(Bt)}catch(Gt){var Bt=null;localStorage.removeItem("radioMessages")}if(null==Bt){var Bt=jQuery.extend(!0,{},SWAM.radio.defaultOptions);SWAM.radio.options=Bt}},showConfig:function(Bt){this.hide();var Gt="<div id='radioCustomization' tabindex='1' style='position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0,0,0,.5)'><div style='position: absolute; width: 550px; height: 450px; left: calc(50% - 275px); top: calc(50% - 225px);background-color: rgba(0,0,0,0.75); box-shadow: 0 10px 59px -9px rgba(0,0,0,0.7); border-radius: 9px; border-bottom: 2px solid rgba(0,0,0,0.3); border-top: 2px solid rgba(255,255,255,0.08); box-sizing: border-box; padding: 18px 18px 0 18px; cursor: default; font-family: verdana,arial,helvetica,sans-serif'><div style='font-size: 20px; color: white; margin-bottom: 10px;'>Customize messages for: <span style='color: yellow'>$channel</span></div><div style='color: #AAAAAA'>Enter the messages below. Use '|' character to separate multiple lines in the same meesage.</div><div class='optionList'></div><div style='color: #888888; text-decoration: underline; cursor: pointer; margin: 10px;'><hr/><span id='radioRestoreThis'>[Restore THIS panel to default]</span><span id='radioRestoreAll' style='margin-left: 30px;'>[Restore ALL messages to default]</span></div><div style='width: 200px; position: absolute; left: calc(50% - 100px); margin-top: 20px;'><input id='radioCustomizeSave' type='button' value='Save' style='width: 80px; height: 25px; background-color: #228a12; color: white; border-radius: 4px; font-size=16px; text-shadow: 0 -1px 0 rgba(0,0,0,0.6); border: 2px solid rgba(0,0,0,.2)'><span style='margin-left: 40px'></span><input id='radioCustomizeCancel' type='button' value='Cancel' style='width: 80px; height: 25px; background-color: #555555; color: white; border-radius: 4px; font-size=16px; text-shadow: 0 -1px 0 rgba(0,0,0,0.6); border: 2px solid rgba(0,0,0,.2)'></div></div></div>";Gt=Gt.replace(/\$channel/g,SWAM.radio.channelNames[Bt]);for(var Xt=$(Gt),Ht=0;10>Ht;Ht++){Gt="<div style='margin: 5px;'><span style='margin-right: 10px; color:white;'>$index</span><input type='text' maxlength: '150' style='font-size: 13px; font-family: MontserratWeb,Helvetica,sans-serif;width: 450px;background-color: rgba(0,0,0,0.5); color: #dcdcdc; text-shadow: 0 0 3px rgba(0,0,0,0.8);border: 1px solid #555555; border-radius: 3px;padding-left: 12px;' value = ''></div>".replace(/\$index/g,9>Ht?Ht+1:"0");var Wt=$(Gt);$("input",Wt).val(SWAM.radio.options[Bt][Ht]),$(".optionList",Xt).append(Wt)}$("body").append(Xt),Xt.focus(),$("#radioCustomizeSave",Xt).click(function(){for(var jt=$("input",Xt),zt=0;zt<jt.length;zt++)SWAM.radio.options[Bt][zt]=jt[zt].value;localStorage.setItem("radioMessages",JSON.stringify(SWAM.radio.options)),Xt.remove()}),$("#radioCustomizeCancel",Xt).click(function(){Xt.remove()}),$("#radioRestoreThis",Xt).click(function(){confirmDialog({title:"Are you sure? This will delete all customized messages for this panel and restore them to default.",message:SWAM.radio.channelNames[Bt]+"   -  Confirmation needed",yes:function(){var jt=jQuery.extend(!0,[],SWAM.radio.defaultOptions[Bt]);SWAM.radio.options[Bt]=jt,localStorage.setItem("radioMessages",JSON.stringify(SWAM.radio.options)),SWAM.radio.loadOptions(),Xt.remove()}})}),$("#radioRestoreAll",Xt).click(function(){confirmDialog({title:"Are you sure? This will delete all customized messages and restore them to default.",message:"Confirmation needed",yes:function(){localStorage.removeItem("radioMessages"),SWAM.radio.loadOptions(),Xt.remove()}})}),$(Xt).keydown(function(jt){jt.stopImmediatePropagation()}).keyup(function(jt){jt.stopImmediatePropagation()})},show:function(Bt){SWAM.radio.currentChannel=Bt;for(var Gt=SWAM.radio.options,Xt="Close Menu - Press "+SWAM.radio.channelKeys[Bt]+"<div>-----</div>",Yt=0;Yt<Gt[Bt].length;Yt++)Xt+="<div><span style='margin-right: 15px;'>"+(Yt+1)%10+".</span>"+Gt[Bt][Yt]+"</div>";$("#radioChannel").html(SWAM.radio.channelNames[Bt]),$("#radioOptions").html(Xt),$("#radioPanel").show()},hide:function(){$("#radioPanel").hide()},handle_keys:function(Bt){var Gt=$.inArray(Bt.which,[90,88,67]);if(-1<Gt&&(SWAM.radio.visible()&&Gt==SWAM.radio.currentChannel?SWAM.radio.hide():SWAM.radio.show(Gt)),48<=Bt.which&&57>=Bt.which&&SWAM.radio.visible()){SWAM.radio.hide();var Xt="";Gt=Bt.which-49,-1==Gt&&(Gt=9);var Yt=SWAM.radio.options,Ht=SWAM.radio.currentChannel;if(0<=Gt&&Gt<Yt[Ht].length){Xt=Yt[Ht][Gt];var Wt=Xt.split(/\s*\|\s*/);Gt=0;var jt=function(){SWAM.radio.sendTo(Ht,Wt[Gt++]),Gt<Wt.length&&setTimeout(jt,1500)};jt()}else SWAM.radio.hide();Bt.stopImmediatePropagation(),Bt.stopPropagation(),Bt.preventDefault()}}},SWAM.radio.append(),SWAM.chatinputVisible=function(){return"none"!==$("#chatinput").css("display")},SWAM.getClosestPlayer=function(Bt,Gt){let Xt=Graphics.getCamera(),Yt=Xt.x-game.halfScreenX/game.scale,Ht=Xt.y-game.halfScreenY/game.scale;Bt=Yt+Bt/game.scale,Gt=Ht+Gt/game.scale;let Wt=1e5,jt=Players.getIDs(),zt=null;for(let Vt in jt){let qt=Players.get(Vt),Kt=Tools.distance(Bt,Gt,qt.pos.x,qt.pos.y);Kt<Wt&&(zt=qt,Wt=Kt)}return SWAM.debug&&console.log(zt.name),zt};let sentMessages=[],sentMessageIndex=0;if($("#chatinput").keydown(function(Bt){let Gt=$("#chatinput");if(""==Gt.val()||Gt.val()==sentMessages[sentMessageIndex]){if(38==Bt.which&&0<sentMessageIndex)return sentMessageIndex--,Gt.val(sentMessages[sentMessageIndex]),Bt.stopImmediatePropagation(),Bt.preventDefault(),!1;if(40==Bt.which&&sentMessageIndex<sentMessages.length)return sentMessageIndex++,sentMessageIndex<sentMessages.length?Gt.val(sentMessages[sentMessageIndex]):Gt.val(""),Bt.stopImmediatePropagation(),Bt.preventDefault(),!1}if(13==Bt.which){let Xt=Gt.val();""!=Xt&&(sentMessages.push(Xt),sentMessageIndex=sentMessages.length,50<sentMessages.length&&sentMessages.shift())}}),$("#chatbox").mousedown(function(Bt){3==Bt.which&&Bt.target.className.includes("text")&&copyTextToClipboard(Bt.target.innerText)}),SWAM.scoreboard_click_handler=function(Bt){var Gt=$(Bt.currentTarget).attr("player-id");SWAM.setTargetedPlayer(Gt)},SWAM.keydown_handler=function(Bt){if(!(game.state!==Network.STATE.PLAYING||SWAM.chatinputVisible())){var Gt=$.inArray(Bt.which,[65,68,87,83,37,38,39,40]);-1<Gt&&AutoPilot&&0<AutoPilot.currentNode&&AutoPilot.cancel(),Gt=$.inArray(Bt.which,[87,83,38,40,53,35]),-1<Gt&&(SWAM.CruiseMode.isOn()?SWAM.CruiseMode.off(0!=Gt&&2!=Gt):(53==Bt.keyCode||35==Bt.keyCode)&&SWAM.CruiseMode.on()),89==Bt.keyCode&&(Network.sendCommand("drop",""),Bt.stopImmediatePropagation(),Bt.preventDefault()),AutoPilot&&AutoPilot.mimic_keydown_handler(Bt),SWAM.trigger("keydown",Bt)}},SWAM.keyup_handler=function(Bt){if(!(game.state!==Network.STATE.PLAYING||SWAM.chatinputVisible())){switch(SWAM.radio.handle_keys(Bt),Bt.which){case 46:clearChat(Bt);break;case 114:SWAM.toggleLeaderboard();break;case 115:SWAM.toggleUI();break;case 120:SWAM.GameLog.show();break;case 121:SWAM.OpenSettingsWindow();}SWAM.trigger("keyup",Bt)}},SWAM.canvas_click_handler=function(Bt){if(1==Bt.which&&Bt.altKey){var Gt=game.screenX-config.minimapPaddingX-config.minimapSize,Xt=game.screenX-config.minimapPaddingX,Yt=game.screenY-config.minimapPaddingY-config.minimapSize/2,Ht=game.screenY-config.minimapPaddingY;if(Bt.pageX>Gt&&Bt.pageX<Xt&&Bt.pageY>Yt&&Bt.pageY<Ht){var Wt=-1*(32768*((game.screenX-config.minimapPaddingX-Bt.pageX)/config.minimapSize)-16384),jt=-1*(16384*(2*((game.screenY-config.minimapPaddingY-Bt.pageY)/config.minimapSize))-8192);AutoPilot.log(Wt,jt),AutoPilot.NavigateTo(Wt,jt)}}SWAM.trigger("canvas_click",Bt)},SWAM.canvas_mousedown_handler=function(Bt){if(AutoPilot&&AutoPilot.checkMimic(Bt),!Players.amIAlive()&&1==Bt.which){let Gt=SWAM.getClosestPlayer(Bt.pageX,Bt.pageY);null!=Gt&&Network.sendCommand("spectate",Gt.id+"")}SWAM.trigger("canvas_mousedown",Bt)},SWAM.listLayers=function(Bt){for(var Gt=0;Gt<Bt.children.length;Gt++)console.log(Bt.children[Gt].layerName)},SWAM.debug){setTimeout(function(){let Gt=new Textures.sprite("ui_minimap_target");Gt.position.set(0,0),Gt.anchor.set(.5,.5),game.graphics.layers.doodads.addChild(Gt);let Xt=Graphics.setCamera;Graphics.setCamera=function(Yt,Ht){Xt.call(Graphics,Yt,Ht),null!=Gt&&Gt.position.set(Yt,Ht)}},2e3),SWAM.addDebugElements();let Bt=$("#logon")[0];$(window).keydown(function(Gt){game.state===Network.STATE.PLAYING||"none"==Bt.style.display||SWAM.moveCamera(Gt)}),SWAM.saveSprite=function(Gt,Xt=0){let jt=new PIXI.CanvasRenderer({width:800,height:800}),zt=new PIXI.Container,Vt=["","shipRaptor","shipSpirit","shipComanche","shipTornado","shipProwler"][Gt]+(0==Xt?"":"_2"),qt=Textures.init(Vt,null);qt.position.set(qt.width*qt.anchor.x,256*qt.anchor.y);let Kt=[1,0.25,0.35,0.25,0.28,0.28][Gt];zt.width=qt.width,zt.height=qt.height,zt.addChild(qt);let Qt=new PIXI.Graphics;for(var Jt of config.ships[Gt].collisions)Qt.beginFill(16777215,.2),Qt.drawCircle(Jt[0]/Kt,Jt[1]/Kt,Jt[2]/Kt),Qt.endFill();zt.addChild(Qt),Qt.position.set(qt.width/2,256*qt.anchor.y),function(Zt,$t,en){Zt.extract.canvas($t).toBlob(function(tn){var nn=document.createElement("a");document.body.append(nn),nn.download=en,nn.href=URL.createObjectURL(tn),nn.click(),nn.remove()},"image/png")}(jt,zt,Vt+"-cols.png"),jt.destroy()},SWAM.saveSprites=function(){for(let Gt=1;6>Gt;Gt++)SWAM.saveSprite(Gt,0)}}AutoPilot.Load(),SWAM.Audio.initialize(),function(){console.log("%cSTAR%cMASH %cLoaded! %cversion: "+SWAM_version,"font-size: 20px; color: #c2b000;","font-size: 20px; color: #df2559;","font-size: 20px; color: black;","font-size: 14px; color: black;")}(),SWAM.Theme&&(SWAM.Theme.start(),setTimeout(()=>{SWAM.loadSettings()},1))}SWAM.injectTextures=function(Bt,Gt,Xt,Yt,Ht){var Wt={ui_minimap_1:["items",[404,140,64,64]],ui_minimap_2:["items",[540,140,64,64]],ui_minimap_3:["items",[268,140,64,64]]};for(let zt in Wt)Gt[zt]=Wt[zt];var jt={minimap1:{texture:"ui_minimap_1",layer:"ui2",anchor:[0.5,0.5],alpha:1,scale:.25},minimap2:{texture:"ui_minimap_2",layer:"ui2",anchor:[0.5,0.5],alpha:1,scale:.25},minimap3:{texture:"ui_minimap_3",layer:"ui2",anchor:[0.5,0.5],alpha:1,scale:.25},minimapTarget:{texture:"powerup_circle",layer:"ui3",anchor:[0.5,0.5],alpha:1,scale:.12}};for(let zt in jt)Yt[zt]=jt[zt];SWAM.Theme&&SWAM.Theme.injectTextures&&SWAM.Theme.injectTextures(Bt,Gt,Xt,Yt,Ht)},SWAM.injectSounds=function(Bt){SWAM.Theme&&SWAM.Theme.injectSounds&&SWAM.Theme.injectSounds(Bt)},!function(){function Bt(){return{StarMashThemes:{url:getFilePath("swam.themes.js"),enabled:!0}}}function Gt(){return location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+location.pathname+(location.search?location.search:"")}function Xt(){let rn={},on={};for(let sn in en){let dn=en[sn];on[dn.url]=dn.url;for(let ln of dn.dependencies)rn[ln]=ln}return{extensions:Object.values(on),dependencies:Object.values(rn)}}function Yt(){var rn=document.getElementsByTagName("script"),on=rn[rn.length-1];return on.src}function Ht(rn){let on=$.extend({id:"",themeName:"",description:"",author:"Anonymous",version:"0.0",object:null},rn);if($.extend(rn,on),"function"!=typeof rn)throw"Invalid theme. The object is not a function.";if(rn.id=rn.name,""==rn.themeName)throw"Invalid theme. 'themeName' field not defined.";if(rn[rn.id])throw"A theme with that name has already been registered!";tn[rn.id]=rn,SWAM.trigger("themeAdded",rn)}function Wt(rn,on,sn){function dn(cn){un++,pn=cn}function ln(){SWAM.off("extensionAdded",dn),1==un?on(pn):0==un?sn("File loaded, but no extension registered successfully.<br>Check the console to verify if there were errors when the file was executed."):sn("File loaded, but multiple registrations where detected. A file must have only one registration.")}let un=0,pn=null;SWAM.on("extensionAdded",dn);try{jQuery.ajax({dataType:"script",url:rn,cache:!0,timeout:5e3}).done(ln).fail(function(){SWAM.off("extensionAdded",dn),sn("There was an error when trying to load the file.")})}catch(cn){SWAM.off("extensionAdded",dn),sn("There was an error executing the file. "+cn),console.error(cn)}}function jt(){let rn={extensionsToLoad:$t,selectedTheme:nn};localStorage.setItem("SWAM_Extensions",JSON.stringify(rn))}function Vt(rn){let on=rn.info.id;if(delete $t[on],en[on]){for(let sn of en[on].themes)delete SWAM.Settings.themes[sn.id],delete tn[sn.id];delete SWAM.Settings.extensions[on],delete en[on]}localStorage.setItem("SWAM_Settings",JSON.stringify(SWAM.Settings))}function qt(rn,on){on=on.replace(/\[(\w+)\]/g,".$1"),on=on.replace(/^\./,"");for(var sn=on.split("."),dn=0,ln;dn<sn.length;++dn)if(ln=sn[dn],ln in rn)rn=rn[ln];else return;return rn}function Kt(rn,on,sn){on=on.replace(/\[(\w+)\]/g,".$1"),on=on.replace(/^\./,"");let dn=on.split(".");for(let ln=0,un;ln<dn.length;++ln)if(un=dn[ln],un in rn)ln<dn.length-1?rn=rn[un]:rn[un]=sn;else return}function Jt(rn,on){function sn(gn){return gn=gn.replace(/\[(\w+)\]/g,".$1"),gn=gn.replace(/^\./,""),gn=gn.replace(/\./g,""),gn}function dn(gn){gn=$.extend({css:{}},gn),this.render=function(mn){let _n=$("<div><hr class='separator'></div>"),bn=$("hr",_n).css(gn.css);mn.append(_n)}}function ln(gn,mn){mn=$.extend({click:function(){},css:{minWidth:"250px",outline:"none",margin:"5px"}},mn),this.render=function(yn){let _n=`<button class='btn'>${gn}</button>`,bn=$(_n).css(mn.css).click(mn.click);yn.append(bn)}}function un(gn,mn,yn){yn=$.extend({css:{},useToggle:!0},yn),this.property=gn;let _n=sn(gn),bn=null;this.render=function(xn){let vn=null;vn=yn.useToggle?`<div><label><label class='switch'><input type='checkbox' class='chk${_n}' /><span class="slider round"></span></label> ${mn}</label></div>`:`<div><label><input type='checkbox' class='chk${_n}' /> ${mn}</label></div>`;let Tn=$(vn);bn=$(`.chk${_n}`,Tn)[0],$(Tn).css(yn.css),xn.append(Tn)},this.getValue=function(){return bn.checked},this.setValue=function(xn){bn.checked=xn}}function pn(gn,mn,yn){yn=$.extend({css:{},maxLength:null},yn),this.property=gn;let _n=sn(gn),bn=null;this.render=function(xn){let vn=`<div><label><input type='text' class='txt${_n}' /> ${mn}</label></div>`,Tn=$(vn);bn=$(`.txt${_n}`,Tn),bn.css(yn.css),yn.maxLength&&bn.attr("maxlength",yn.maxLength),xn.append(Tn)},this.getValue=function(){return bn.val()},this.setValue=function(xn){bn.val(xn)}}function cn(gn,mn,yn){this.property=gn;let _n=sn(gn),bn=null,xn=null;yn=$.extend({min:0,max:10,step:1},yn),this.render=function(vn){let Tn=`<div><label><span class='sliderValue'></span> <input type='range' class='slider${_n}' min='${yn.min}' max='${yn.max}' step='${yn.step}' /> ${mn}</label></div>`,En=$(Tn);bn=$(`.slider${_n}`,En),xn=$(".sliderValue",En).css({minWidth:10*(""+yn.max).length+20+"px"}),bn.change(()=>{xn.html(bn.val())}),vn.append(En)},this.getValue=function(){return bn.val()},this.setValue=function(vn){bn.val(vn),xn.html(vn)}}function hn(gn,mn,yn){this.property=gn;let bn=sn(gn),xn=null;this.render=function(vn){let Tn=`<div><label><select class='sel${bn}'></select> ${mn}</label></div>`,En=$(Tn);xn=$(`.sel${bn}`,En);for(let Sn of Object.keys(yn))xn.append($("<option>",{value:Sn,text:yn[Sn]}));vn.append(En)},this.getValue=function(){return xn.val()},this.setValue=function(vn){xn.val(vn)}}let fn=[];this.setValue=function(gn){for(let mn of fn)if(mn.property&&mn.setValue){let yn=mn.property;yn=rn.root?rn.root+"."+mn.property:mn.property;try{let _n=qt(gn,yn);mn.setValue(_n)}catch(_n){console.error(_n)}}},this.onAccept=function(gn){let mn=rn.root?qt(gn,rn.root):gn;for(let yn of fn)if(yn.property&&yn.getValue)try{Kt(mn,yn.property,yn.getValue())}catch(_n){console.error(_n)}},this.render=function(gn){let mn=$(getTemplateContent("#Settings_section"));$(".sectionsContainer",gn).append(mn),$(".title",mn).html(on);let yn=$(".values",mn);for(let _n of fn)_n.render(yn)},this.addSeparator=function(gn){fn.push(new dn(gn))},this.addButton=function(gn,mn){fn.push(new ln(gn,mn))},this.addBoolean=function(gn,mn,yn){fn.push(new un(gn,mn,yn))},this.addString=function(gn,mn,yn){fn.push(new pn(gn,mn,yn))},this.addValuesField=function(gn,mn,yn,_n){fn.push(new hn(gn,mn,yn,_n))},this.addSliderField=function(gn,mn,yn){fn.push(new cn(gn,mn,yn))}}let Zt=$({});SWAM.trigger=Zt.trigger.bind(Zt),SWAM.on=function(rn,on){Zt.on(rn,function(){let ln=Array.from(arguments);ln.shift(),on.apply(null,ln)})},SWAM.off=Zt.off.bind(Zt);let $t=Bt(),en={},tn={},nn="";"#clean"==window.location.hash?jt():"#noextensions"!=window.location.hash&&function(){try{let rn=localStorage.getItem("SWAM_Extensions");null!=rn&&(rn=JSON.parse(rn),rn.extensionsToLoad&&($t=$.extend(rn.extensionsToLoad,Bt())),rn.selectedTheme&&null!=rn.selectedTheme&&(nn=rn.selectedTheme))}catch(rn){}}(),SWAM.loadTheme=function(){null!=nn&&""!=nn&&"function"==typeof tn[nn]||(nn="StarMash_2"),SWAM.Theme=new tn[nn];let rn=SWAM.Theme.settingsProvider;rn&&(rn.title=tn[nn].themeName,rn.isTheme=!0,rn.root="themes."+tn[nn].id)},SWAM.getThemeFunction=function(){return tn[nn]},SWAM.loadExtensions=function(rn){function on(dn,ln){var un=0;(function pn(){un<dn.length?(console.log("SWAM: Loading script: "+dn[un]),$.cachedScript(dn[un]).fail(function(){console.error("SWAM: Load failed: "+dn[un])}).always(function(){++un,pn()})):ln&&ln()})()}let sn=[];for(let dn in $t)$t[dn].enabled&&sn.push($t[dn].url);on(sn,function(){sn=Xt().dependencies,on(sn,function(){rn&&rn()})})},SWAM.getSettingsProviders=function(){let rn=[];SWAM.settingsProvider&&rn.push(SWAM.settingsProvider),SWAM.Theme&&SWAM.Theme.settingsProvider&&rn.push(SWAM.Theme.settingsProvider);for(let on of Object.values(en))on.settingsProvider&&rn.push(on.settingsProvider);return rn},SWAM.registerExtension=function(rn){if(rn=$.extend({id:"",name:"",description:"",author:"Anonymous",version:"0.0",dependencies:[],themes:[],settingsProvider:null,url:""},rn),""==rn.id)throw"Invalid extension. 'id' field not defined.";if(""==rn.name)throw"Invalid extension. 'name' field not defined.";if(en[rn.id])throw"An extension with that name has already been registered!";let on=[];try{"StarMashThemes"!==rn.id&&(en[rn.id]=rn);for(let dn of rn.themes)Ht(dn),on.push(dn);let sn=rn.settingsProvider;sn&&(sn.title=rn.name,sn.isExtension=!0,sn.root="extensions."+rn.id),$t[rn.id]={url:Yt(),enabled:!0,info:{id:rn.id,name:rn.name,description:rn.description,author:rn.author,version:rn.version}},SWAM.trigger("extensionAdded",rn)}catch(sn){delete en[rn.id];for(let dn of on)delete tn[dn.id];throw"There was an error when attempting to load a theme: "+sn}};SWAM.OpenExtensionsWindow=function(){function rn(){dn(),sn()}function on(){$(".section",cn).slice(2).remove()}function sn(){let mn=$("#selTheme",cn);mn.html(""),$.each(tn,function(yn,_n){mn.append($("<option>",{value:_n.id,text:_n.themeName}))}),mn.val(nn)}function dn(){for(let mn in on(),$t)"StarMashThemes"!=mn&&ln($t[mn])}function ln(mn){let yn=$(getTemplate("#ExtensionEditPanel",!1));$(".sectionsContainer",cn).append(yn);let _n=$(".modName",yn),bn=$(".arrows",yn);$(".name",yn).html(mn.info.name),$(".description",yn).html(mn.info.description),$(".author",yn).html(mn.info.author),$(".version",yn).html(mn.info.version),$(".url",yn).html(mn.url).prop("title",mn.url),$(".chkEnabled",yn).prop("checked",mn.enabled).change(xn=>{mn.enabled=xn.currentTarget.checked}),$(".btnDelete",yn).click(()=>{confirmDialog({title:"Confirmation needed",message:"Are you sure? The extension will not be loaded once you restart the game.",yes:function(){Vt(mn),rn()}})})}function pn(){cn.remove()}let cn=createModal({title:"StarMash Themes and Extensions",content:getTemplate(".SWAM_Extensions"),width:"800px",maxHeight:"650px",top:"200px"}),hn=$.extend({},$t),fn=$.extend({},en),gn=$.extend({},tn);rn(),$(".btnNew",cn).click(function(){let mn=$(getTemplate("#ExtensionEditPanel",!1));$(".sectionsContainer",cn).append(mn);let yn=$(".modName",mn),_n=$(".scriptURL",mn),bn=$(".arrows",mn),xn=$(".newModButtons",mn),vn=$(".error",mn);SWAM.debug||_n.val(""),vn.hide(),yn.hide(),bn.hide(),xn.show(),_n.show(),$(".btnAcceptURL",mn).click(function(){xn.hide(),vn.html("").hide(),Wt(_n.val(),function(){rn()},function(Tn){vn.html(Tn).show(),xn.show()})}),$(".btnCancelURL",mn).click(function(){mn.remove()})}),$(".btnAccept",cn).click(()=>{nn=$("#selTheme",cn).val(),jt(),pn(),window.location=Gt()}),$(".btnCancel",cn).click(()=>{$t=hn,en=fn,tn=gn,pn()})},window.SettingsProvider=function(rn,on){function sn(ln){let un={},pn=un;if(""==ln)return un;ln=ln.replace(/\[(\w+)\]/g,".$1"),ln=ln.replace(/^\./,"");for(var cn=ln.split("."),hn=0,fn;hn<cn.length;++hn)fn=cn[hn],pn[fn]={},pn=pn[fn];return un}this.title="";let dn=[];this.getDefault=function(){let ln=this.root||"";if(""!=ln){let un=sn(ln);return Kt(un,ln,rn),un}return rn},this.getLocal=function(){},this.apply=function(ln){on&&on(qt(ln,this.root),ln)},this.setWindow=function(ln,un){for(let cn of dn)cn.render(un);return{setValues:function(cn){for(let hn of dn)hn.setValue(cn)},accept:function(){for(let cn of dn)cn.onAccept(ln)},cancel:function(){}}},this.addSection=function(ln){let un=new Jt(this,ln);return dn.push(un),un}},SWAM.replaceCSS=function(rn){$("link[href*=\"style.css\"]").replaceWith("<link href=\""+rn+"\" type=\"text/css\" rel=\"stylesheet\">")}}(),window.AutoPilot={Matrix:[[]],WALKABLE:0,BLOCKED:1,keystate:{UP:!1,DOWN:!1,LEFT:!1,RIGHT:!1},zero:{x:0,y:0},topLeft:{x:-16352,y:-8160},greenland:{x:-5284,y:-7092},Load:function(){$.getScript(getFilePath("pathfinding-browser.min.js"),function(){for(var Ht=window.config.walls,zt=Array(164),Vt=0;164>Vt;Vt++){zt[Vt]=Array(328);for(var qt=0;328>qt;qt++)zt[Vt][qt]=AutoPilot.WALKABLE}for(var Kt of Ht)for(var Qt=AutoPilot.getGraphBoundingBox(Kt[0],Kt[1],Kt[2]),Vt=Qt.p1.y;Vt<=Qt.p2.y;Vt++)for(var qt=Qt.p1.x;qt<=Qt.p2.x;qt++)try{zt[Vt][qt]=AutoPilot.BLOCKED}catch(Jt){}AutoPilot.Matrix=zt})},angleTo:function(Bt,Gt){var Xt=Math.atan2(-Bt.x+Gt.x,Bt.y-Gt.y);return 0>Xt&&(Xt+=2*Math.PI),Xt},angleToNeg:function(Bt,Gt){return Math.atan2(-Bt.x+Gt.x,Bt.y-Gt.y)},mapCoordX:function(Bt,Gt){return Gt|=0,Math.floor((Bt+16384+Gt)/100)},mapCoordY:function(Bt,Gt){return Gt|=0,Math.floor((Bt+8192+Gt)/100)},getGraphBoundingBox:function(Bt,Gt,Xt){return{p1:{x:this.mapCoordX(Bt,-Xt),y:this.mapCoordY(Gt,-Xt)},p2:{x:this.mapCoordX(Bt,Xt),y:this.mapCoordY(Gt,Xt)}}},log:function(Bt){AutoPilot.logMoves&&console.log(Bt)},right:function(){!0==this.keystate.RIGHT||(this.log("right"),Network.sendKey("RIGHT",!0),this.keystate.RIGHT=!0)},left:function(){!0==this.keystate.LEFT||(this.log("left"),Network.sendKey("LEFT",!0),this.keystate.LEFT=!0)},noSteer:function(){!1==this.keystate.RIGHT&&!1==this.keystate.LEFT||(this.log("nosteer"),this.keystate.RIGHT&&(Network.sendKey("RIGHT",!1),this.keystate.RIGHT=!1),this.keystate.LEFT&&(Network.sendKey("LEFT",!1),this.keystate.LEFT=!1))},forward:function(){!0==this.keystate.UP||(this.log("up"),Network.sendKey("UP",!0),this.keystate.UP=!0)},backwards:function(){!0==this.keystate.DOWN||(this.log("down"),Network.sendKey("DOWN",!0),this.keystate.DOWN=!0)},stop:function(){!1==this.keystate.UP&&!1==this.keystate.DOWN||(this.log("stop"),this.keystate.DOWN&&(Network.sendKey("DOWN",!1),this.keystate.DOWN=!1),this.keystate.UP&&(Network.sendKey("UP",!1),this.keystate.UP=!1))},fullStop:function(){this.log("fullstop"),this.noSteer(),this.stop()},tg:function(){this.moveTo(this.greenland.x,this.greenland.y)},tgs:function(){this.NavigateTo(this.greenland.x,this.greenland.y)},NavigateTo:function(Bt,Gt){var Xt=Players.getMe(),Yt=this.mapCoordX(Xt.pos.x),Ht=this.mapCoordY(Xt.pos.y),Wt=this.mapCoordX(Bt),jt=this.mapCoordY(Gt);AutoPilot.path=this.SearchPath(Yt,Ht,Wt,jt),AutoPilot.debug&&(AutoPilot.erasePath(),AutoPilot.drawPath()),AutoPilot.exit=!1,this.currentNode=0,$("#AutoPilotAlert").show(),this.moveNext()},erasePath:function(){game.graphics.layers.objects.removeChild(this.drawnPath)},drawnPath:null,drawPath:function(){for(var Bt=AutoPilot.path,Gt=new PIXI.Graphics,Xt=0;Xt<Bt.length;Xt++){var Yt=Bt[Xt][0],Ht=Bt[Xt][1];Gt.beginFill(65280,.2),Gt.drawRect(100*Yt-16384,100*Ht-8192,100,100),Gt.endFill()}this.drawnPath=Gt,game.graphics.layers.objects.addChild(Gt)},Test:function(){if(window.res=this.SearchPath(111,11,161,46),!0===AutoPilot.debug){for(var Ht=Array(100),Wt=0;100>Wt;Wt++){Ht[Wt]=Array(100);for(var jt=0;100>jt;jt++)Ht[Wt][jt]=apMatrix[Wt][jt+100]}window.matrixSample=Ht}},cancel:function(){AutoPilot.exit=!0,AutoPilot.fullStop(),$("#AutoPilotAlert").hide()},currentNode:0,moveNext1:function(){var Bt=AutoPilot.path[this.currentNode].y,Gt=AutoPilot.path[this.currentNode].x;this.moveTo(100*Bt-16384+50,100*Gt-8192+50,!0)},moveNext:function(){var Bt=AutoPilot.path[this.currentNode][0],Gt=AutoPilot.path[this.currentNode][1];this.moveTo(100*Bt-16384+50,100*Gt-8192+50,!0)},prevX:0,prevY:0,rotating:!1,rotateTo:function(Bt,Gt,Xt=250,Yt){var Ht=Bt-Gt.rot;Ht>Math.PI&&(Ht-=2*Math.PI),Ht<-Math.PI&&(Ht+=2*Math.PI);let Wt=Math.round(1e3*(Math.abs(Ht)/(60*config.ships[Gt.type].turnFactor))),jt=0<Ht?AutoPilot.right:AutoPilot.left,zt=0>=Ht?AutoPilot.right:AutoPilot.left;AutoPilot.rotating=!0,jt.call(AutoPilot),setTimeout(function(){AutoPilot.noSteer(),setTimeout(()=>{AutoPilot.rotating=!1,Yt&&Yt()},Xt)},Wt)},moveTo:function(Bt,Gt,Xt){function Yt(){if(!AutoPilot.exit){if(Ht=Players.getMe(),300<Math.abs(AutoPilot.prevX-Ht.pos.x)||300<Math.abs(AutoPilot.prevY-Ht.pos.y))return void AutoPilot.cancel();if(AutoPilot.prevX=Ht.pos.x,AutoPilot.prevY=Ht.pos.y,0==Ht.pos.x||0==Ht.pos.y)return void AutoPilot.cancel();var Wt=AutoPilot.angleTo(Ht.pos,{x:Bt,y:Gt}),jt=!0,zt=Wt-Ht.rot;if(0.3<Math.abs(zt))AutoPilot.fullStop(),AutoPilot.rotateTo(Wt,Ht);else{if(AutoPilot.noSteer(),AutoPilot.forward(),jt=!0,AutoPilot.currentNode<AutoPilot.path.length-1){var Vt=100*AutoPilot.path[AutoPilot.currentNode+1].y-16384+50,qt=100*AutoPilot.path[AutoPilot.currentNode+1].x-8192+50;Wt=AutoPilot.angleTo(Ht.pos,{x:Bt,y:Gt});var Kt=AutoPilot.angleTo({x:Bt,y:Gt},{x:Vt,y:qt});jt=0.3<=Math.abs(Kt-Wt)}jt&&setTimeout(function(){AutoPilot.stop()},50)}!AutoPilot.exit&&100<Tools.distance(Ht.pos.x,Ht.pos.y,Bt,Gt)?setTimeout(Yt,100):!AutoPilot.exit&&Xt&&AutoPilot.currentNode<AutoPilot.path.length-1?(AutoPilot.currentNode++,AutoPilot.moveNext()):AutoPilot.fullStop()}}AutoPilot.debug&&console.log(this.currentNode),Xt|=!1,AutoPilot.exit=!1;var Ht=Players.getMe();this.prevX=Ht.pos.x,this.prevY=Ht.pos.y,Yt()},SearchPath:function(Bt,Gt,Xt,Yt){let Ht=new PF.Grid(AutoPilot.Matrix),Wt=new PF.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0});var jt=Wt.findPath(Bt,Gt,Xt,Yt,Ht);return PF.Util.smoothenPath(Ht,jt)},mimicTarget:0,checkMimic:function(Bt){if(3==Bt.which&&Bt.altKey){let Gt=SWAM.getClosestPlayer(Bt.pageX,Bt.pageY);if(Gt.id==game.myID)AutoPilot.mimicTarget=0,Network.sendSay("Mimicking stopped"),Network.sendKey("UP",!1),Network.sendKey("DOWN",!1);else if(Network.sendSay("Mimicking "+Gt.name+" ..."),AutoPilot.mimicTarget=Gt.id,AutoPilot.aligned=!1,AutoPilot.mimicPaused=!0,!AutoPilot.aligned)return void AutoPilot.mimicRotation(!0)}},mimic_keydown_handler:function(Bt){if(this.mimicTarget!=game.myID){if(189==Bt.keyCode&&(this.reverseMimic=!this.reverseMimic,this.reverseMimic?Network.sendSay("reverse"):Network.sendSay("normal")),45==Bt.keyCode&&this.mimicRotation(!1),36==Bt.keyCode||190==Bt.keyCode)if(AutoPilot.mimicPaused=!AutoPilot.mimicPaused,AutoPilot.mimicPaused){let Gt=Players.getMe();Gt.keystate.UP&&Network.sendKey("UP",!1),Gt.keystate.DOWN&&Network.sendKey("DOWN",!1),Gt.keystate.LEFT&&Network.sendKey("LEFT",!1),Gt.keystate.RIGHT&&Network.sendKey("RIGHT",!1),Network.sendSay("paused")}else Network.sendSay("resumed");return Bt.stopImmediatePropagation(),void Bt.preventDefault()}},lastState:{boost:!1,stealthed:!1,strafe:!1,flagspeed:!1,keystate:{}},aligned:!1,reverseMimic:!1,mimicRotation:function(Bt){if(this.mimicTarget!=game.myID){let Gt=Players.getMe(),Xt=Players.get(this.mimicTarget),Yt=Gt.rot-Xt.rot;if(!this.rotating&&0.05<Math.abs(Yt)){console.log(`rotating... delta: ${Yt}   me.rot: ${Gt.rot}   player.rot: ${Xt.rot}`);let Ht=AutoPilot.reverseMimic?Math.PI:0;AutoPilot.rotateTo(Xt.rot+Ht,Gt,250,function(){AutoPilot.aligned=!0,Bt&&(AutoPilot.mimicPaused=!1)})}else;}},mimicStealth:function(Bt){Bt.id==game.myID||Bt.id!=AutoPilot.mimicTarget||(Bt.state!=this.lastState.stealthed&&(Network.sendKey("SPECIAL",!0),setTimeout(()=>{Network.sendKey("SPECIAL",!1)},250)),this.lastState.stealthed=Bt.state)},mimicUpdate:function(Bt,Gt){function Xt(jt,zt){let Vt=jt;AutoPilot.reverseMimic&&("UP"==jt?Vt="DOWN":"DOWN"==jt&&(Vt="UP")),AutoPilot.lastState.keystate[jt]!=zt[jt]&&Network.sendKey(Vt,zt[jt])}function Yt(){let jt=Players.getMe();3!=jt.type&&(Ht.strafe=!1);let zt=Ht.strafe,Vt=AutoPilot.lastState.strafe;zt!=Vt&&Network.sendKey("SPECIAL",zt)}let Ht={keystate:{}};if(Gt.id!=game.myID&&Gt.id==AutoPilot.mimicTarget&&!AutoPilot.mimicPaused){if(null==Gt.keystate)return void(Bt==Network.SERVERPACKET.EVENT_BOOST&&AutoPilot.lastState.boost!=Gt.boost&&(Network.sendKey("SPECIAL",Gt.boost),AutoPilot.lastState.boost=Gt.boost));Tools.decodeKeystate(Ht,Gt.keystate);var Wt={};Wt[Network.SERVERPACKET.PLAYER_UPDATE]="update",Wt[Network.SERVERPACKET.PLAYER_FIRE]="fire",Wt[Network.SERVERPACKET.EVENT_BOOST]="boost",Wt[Network.SERVERPACKET.EVENT_BOUNCE]="bounce",Yt(),null!=Gt.keystate&&(Xt("UP",Ht.keystate),Xt("DOWN",Ht.keystate),Xt("LEFT",Ht.keystate),Xt("RIGHT",Ht.keystate)),AutoPilot.lastkeys=$.extend(AutoPilot.lastState,Ht)}},debug:!1,logMoves:!1},SWAM.Audio={Flag:{EnemyTaken:0,OursTaken:1,EnemyCaptured:2,OursCaptured:3,EnemyRecovered:4,OursRecovered:5},initialize:function(){var Bt=new Howl({src:[getFilePath("flag_phrases_1.mp3")],volume:0.5,sprite:{EnemyTaken_1:[0,1450],OursTaken_1:[1500,1800],EnemyCaptured_1:[3300,1800],OursCaptured_1:[5200,1900],EnemyRecovered_1:[7300,1600],OursRecovered_1:[9000,1800],EnemyTaken_2:[11000,1500],OursTaken_2:[12600,1800],EnemyCaptured_2:[14600,1600],OursCaptured_2:[16400,1800],EnemyRecovered_2:[18400,1600],OursRecovered_2:[20200,1800]}});SWAM.Audio.playFlagEvent=function(Gt,Xt){if(config.settings.sound){var Yt=null;for(let Ht in 1!=Xt&&2!=Xt&&(Xt=1),SWAM.Audio.Flag)if(SWAM.Audio.Flag[Ht]==Gt){Yt=Ht+"_"+Xt;break}null!=Yt&&SWAM.Audio.play(Yt)}},SWAM.Audio.play=function(Gt){if(config.settings.sound){let Xt=Bt.play(Gt);setTimeout(function(){Bt.stop(Xt)},Bt._sprite[Gt][1])}}}};function getFilePath(Bt){return"https://molesmalo.github.io/StarWarsMod4AirMash/assets/"+Bt+"?"+SWAM_version}$(function(){showLoadingScreen()});function showLoadingScreen(){$("body").append($("<div id='LoadingMainScreen' style='position: fixed; top:0px; left:0px; width: 100%; height: 100%; background-color: black; z-index: 1000; '><div id='LoadingText' style='position: absolute; top: calc(50% - 15px); width: 100%; font-size: 30px; color: #555555; text-align: center;  font-family: \"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif; '>Loading...</div></div>")).css("overflow","hidden")}function showAgainRequestlyWarning(){localStorage.removeItem("requestlyWarning"),window.location="/"}function showRequestlyWarning(){let Bt=JSON.parse(localStorage.getItem("requestlyWarning"));if(Bt&&Bt.version!=SWAM_version&&(Bt={},localStorage.removeItem("requestlyWarning")),Bt=$.extend({version:SWAM_version,accepted:!1},Bt),!Bt.accepted){let Gt=$(getTemplate("#RequestlyWarning"));$("#btnRequestlyAccept",Gt).click(function(){Bt.accepted=!0,localStorage.setItem("requestlyWarning",JSON.stringify(Bt)),Gt.remove()}),$("body").append(Gt).css("overflow","hidden")}}SWAM.loadExtensions(()=>{window.showRequestlyUpdate=!0,SWAM.trigger("extensionsLoaded"),SWAM.loadTheme(),SWAM.trigger("themeLoaded"),loadGameCode(),SWAM.Theme.loadGameModules(),SWAM.trigger("gameLoaded"),RunGame(),SWAM(),setTimeout(function(){$("#LoadingMainScreen").remove()},1e3),SWAM.trigger("gameRunning")});