"use strict";!function(Bt,Xt){"object"==typeof module&&"object"==typeof module.exports?module.exports=Bt.document?Xt(Bt,!0):function(Gt){if(!Gt.document)throw new Error("jQuery requires a window with a document");return Xt(Gt)}:Xt(Bt)}("undefined"==typeof window?this:window,function(Bt,Xt){function Gt(Cr,Pr){var Ar=(Pr=Pr||kn).createElement("script");Ar.text=Cr,Pr.head.appendChild(Ar).parentNode.removeChild(Ar)}function Yt(Cr){var Pr=!!Cr&&"length"in Cr&&Cr.length,Ar=Vn.type(Cr);return"function"!==Ar&&!Vn.isWindow(Cr)&&("array"===Ar||0===Pr||"number"==typeof Pr&&0<Pr&&Pr-1 in Cr)}function Ht(Cr,Pr){return Cr.nodeName&&Cr.nodeName.toLowerCase()===Pr.toLowerCase()}function jt(Cr,Pr,Ar){return Vn.isFunction(Pr)?Vn.grep(Cr,function(Mr,Rr){return!!Pr.call(Mr,Rr,Mr)!==Ar}):Pr.nodeType?Vn.grep(Cr,function(Mr){return Mr===Pr!==Ar}):"string"==typeof Pr?aa.test(Pr)?Vn.filter(Pr,Cr,Ar):(Pr=Vn.filter(Pr,Cr),Vn.grep(Cr,function(Mr){return-1<Xn.call(Pr,Mr)!==Ar&&1===Mr.nodeType})):Vn.grep(Cr,function(Mr){return-1<Xn.call(Pr,Mr)!==Ar})}function Wt(Cr,Pr){for(;(Cr=Cr[Pr])&&1!==Cr.nodeType;);return Cr}function zt(Cr){return Cr}function Vt(Cr){throw Cr}function qt(Cr,Pr,Ar,Mr){var Rr;try{Cr&&Vn.isFunction(Rr=Cr.promise)?Rr.call(Cr).done(Pr).fail(Ar):Cr&&Vn.isFunction(Rr=Cr.then)?Rr.call(Cr,Pr,Ar):Pr.apply(void 0,[Cr].slice(Mr))}catch(Ir){Ar.apply(void 0,[Ir])}}function Kt(){kn.removeEventListener("DOMContentLoaded",Kt),Bt.removeEventListener("load",Kt),Vn.ready()}function Zt(){this.expando=Vn.expando+Zt.uid++}function Qt(Cr,Pr,Ar){var Mr;if(void 0===Ar&&1===Cr.nodeType)if(Mr="data-"+Pr.replace(ma,"-$&").toLowerCase(),"string"==typeof(Ar=Cr.getAttribute(Mr))){try{Ar=function(Rr){return"true"===Rr||"false"!==Rr&&("null"===Rr?null:Rr===+Rr+""?+Rr:ga.test(Rr)?JSON.parse(Rr):Rr)}(Ar)}catch(Rr){}fa.set(Cr,Pr,Ar)}else Ar=void 0;return Ar}function Jt(Cr,Pr,Ar,Mr){var Ir=1,Dr=20,Or=Mr?function(){return Mr.cur()}:function(){return Vn.css(Cr,Pr,"")},Lr=Or(),kr=Ar&&Ar[3]||(Vn.cssNumber[Pr]?"":"px"),Nr=(Vn.cssNumber[Pr]||"px"!==kr&&+Lr)&&_a.exec(Vn.css(Cr,Pr)),Rr;if(Nr&&Nr[3]!==kr){kr=kr||Nr[3],Ar=Ar||[],Nr=+Lr||1;do Nr/=Ir=Ir||".5",Vn.style(Cr,Pr,Nr+kr);while(Ir!=(Ir=Or()/Lr)&&1!=Ir&&--Dr)}return Ar&&(Nr=+Nr||+Lr||0,Rr=Ar[1]?Nr+(Ar[1]+1)*Ar[2]:+Ar[2],Mr&&(Mr.unit=kr,Mr.start=Nr,Mr.end=Rr)),Rr}function $t(Cr){var Ar=Cr.ownerDocument,Mr=Cr.nodeName,Rr=Ta[Mr],Pr;return Rr||(Pr=Ar.body.appendChild(Ar.createElement(Mr)),Rr=Vn.css(Pr,"display"),Pr.parentNode.removeChild(Pr),"none"===Rr&&(Rr="block"),Ta[Mr]=Rr,Rr)}function en(Cr,Pr){for(var Rr=[],Ir=0,Dr=Cr.length,Ar,Mr;Ir<Dr;Ir++)(Mr=Cr[Ir]).style&&(Ar=Mr.style.display,Pr?("none"===Ar&&(Rr[Ir]=ha.get(Mr,"display")||null,Rr[Ir]||(Mr.style.display="")),""===Mr.style.display&&xa(Mr)&&(Rr[Ir]=$t(Mr))):"none"!==Ar&&(Rr[Ir]="none",ha.set(Mr,"display",Ar)));for(Ir=0;Ir<Dr;Ir++)null!=Rr[Ir]&&(Cr[Ir].style.display=Rr[Ir]);return Cr}function tn(Cr,Pr){var Ar;return Ar=void 0===Cr.getElementsByTagName?void 0===Cr.querySelectorAll?[]:Cr.querySelectorAll(Pr||"*"):Cr.getElementsByTagName(Pr||"*"),void 0===Pr||Pr&&Ht(Cr,Pr)?Vn.merge([Cr],Ar):Ar}function nn(Cr,Pr){for(var Ar=0,Mr=Cr.length;Ar<Mr;Ar++)ha.set(Cr[Ar],"globalEval",!Pr||ha.get(Pr[Ar],"globalEval"))}function an(Cr,Pr,Ar,Mr,Rr){for(var Fr=Pr.createDocumentFragment(),Br=[],Ur=0,Xr=Cr.length,Ir,Dr,Or,Lr,kr,Nr;Ur<Xr;Ur++)if((Ir=Cr[Ur])||0===Ir)if("object"===Vn.type(Ir))Vn.merge(Br,Ir.nodeType?[Ir]:Ir);else if(Pa.test(Ir)){for(Dr=Dr||Fr.appendChild(Pr.createElement("div")),Or=(Sa.exec(Ir)||["",""])[1].toLowerCase(),Lr=Ca[Or]||Ca._default,Dr.innerHTML=Lr[1]+Vn.htmlPrefilter(Ir)+Lr[2],Nr=Lr[0];Nr--;)Dr=Dr.lastChild;Vn.merge(Br,Dr.childNodes),(Dr=Fr.firstChild).textContent=""}else Br.push(Pr.createTextNode(Ir));for(Fr.textContent="",Ur=0;Ir=Br[Ur++];)if(Mr&&-1<Vn.inArray(Ir,Mr))Rr&&Rr.push(Ir);else if(kr=Vn.contains(Ir.ownerDocument,Ir),Dr=tn(Fr.appendChild(Ir),"script"),kr&&nn(Dr),Ar)for(Nr=0;Ir=Dr[Nr++];)wa.test(Ir.type||"")&&Ar.push(Ir);return Fr}function rn(){return!0}function on(){return!1}function sn(){try{return kn.activeElement}catch(Cr){}}function dn(Cr,Pr,Ar,Mr,Rr,Ir){var Dr,Or;if("object"==typeof Pr){for(Or in"string"!=typeof Ar&&(Mr=Mr||Ar,Ar=void 0),Pr)dn(Cr,Or,Ar,Mr,Pr[Or],Ir);return Cr}if(null==Mr&&null==Rr?(Rr=Ar,Mr=Ar=void 0):null==Rr&&("string"==typeof Ar?(Rr=Mr,Mr=void 0):(Rr=Mr,Mr=Ar,Ar=void 0)),!1===Rr)Rr=on;else if(!Rr)return Cr;return 1===Ir&&(Dr=Rr,(Rr=function(Lr){return Vn().off(Lr),Dr.apply(this,arguments)}).guid=Dr.guid||(Dr.guid=Vn.guid++)),Cr.each(function(){Vn.event.add(this,Pr,Rr,Mr,Ar)})}function ln(Cr,Pr){return Ht(Cr,"table")&&Ht(11===Pr.nodeType?Pr.firstChild:Pr,"tr")?Vn(">tbody",Cr)[0]||Cr:Cr}function un(Cr){return Cr.type=(null!==Cr.getAttribute("type"))+"/"+Cr.type,Cr}function pn(Cr){var Pr=ka.exec(Cr.type);return Pr?Cr.type=Pr[1]:Cr.removeAttribute("type"),Cr}function cn(Cr,Pr){var Ar,Mr,Rr,Ir,Dr,Or,Lr,kr;if(1===Pr.nodeType){if(ha.hasData(Cr)&&(Ir=ha.access(Cr),Dr=ha.set(Pr,Ir),kr=Ir.events))for(Rr in delete Dr.handle,Dr.events={},kr)for(Ar=0,Mr=kr[Rr].length;Ar<Mr;Ar++)Vn.event.add(Pr,Rr,kr[Rr][Ar]);fa.hasData(Cr)&&(Or=fa.access(Cr),Lr=Vn.extend({},Or),fa.set(Pr,Lr))}}function hn(Cr,Pr){var Ar=Pr.nodeName.toLowerCase();"input"===Ar&&Ea.test(Cr.type)?Pr.checked=Cr.checked:"input"!==Ar&&"textarea"!==Ar||(Pr.defaultValue=Cr.defaultValue)}function fn(Cr,Pr,Ar,Mr){Pr=Bn.apply([],Pr);var Nr=0,Fr=Cr.length,Ur=Pr[0],Xr=Vn.isFunction(Ur),Rr,Ir,Dr,Or,Lr,kr;if(Xr||1<Fr&&"string"==typeof Ur&&!zn.checkClone&&La.test(Ur))return Cr.each(function(Gr){var Yr=Cr.eq(Gr);Xr&&(Pr[0]=Ur.call(this,Gr,Yr.html())),fn(Yr,Pr,Ar,Mr)});if(Fr&&(Rr=an(Pr,Cr[0].ownerDocument,!1,Cr,Mr),Ir=Rr.firstChild,1===Rr.childNodes.length&&(Rr=Ir),Ir||Mr)){for(Or=(Dr=Vn.map(tn(Rr,"script"),un)).length;Nr<Fr;Nr++)Lr=Rr,Nr!=Fr-1&&(Lr=Vn.clone(Lr,!0,!0),Or&&Vn.merge(Dr,tn(Lr,"script"))),Ar.call(Cr[Nr],Lr,Nr);if(Or)for(kr=Dr[Dr.length-1].ownerDocument,Vn.map(Dr,pn),Nr=0;Nr<Or;Nr++)Lr=Dr[Nr],wa.test(Lr.type||"")&&!ha.access(Lr,"globalEval")&&Vn.contains(kr,Lr)&&(Lr.src?Vn._evalUrl&&Vn._evalUrl(Lr.src):Gt(Lr.textContent.replace(Na,""),kr))}return Cr}function gn(Cr,Pr,Ar){for(var Rr=Pr?Vn.filter(Pr,Cr):Cr,Ir=0,Mr;null!=(Mr=Rr[Ir]);Ir++)Ar||1!==Mr.nodeType||Vn.cleanData(tn(Mr)),Mr.parentNode&&(Ar&&Vn.contains(Mr.ownerDocument,Mr)&&nn(tn(Mr,"script")),Mr.parentNode.removeChild(Mr));return Cr}function mn(Cr,Pr,Ar){var Or=Cr.style,Mr,Rr,Ir,Dr;return(Ar=Ar||Ua(Cr))&&(""!==(Dr=Ar.getPropertyValue(Pr)||Ar[Pr])||Vn.contains(Cr.ownerDocument,Cr)||(Dr=Vn.style(Cr,Pr)),!zn.pixelMarginRight()&&Ba.test(Dr)&&Fa.test(Pr)&&(Mr=Or.width,Rr=Or.minWidth,Ir=Or.maxWidth,Or.minWidth=Or.maxWidth=Or.width=Dr,Dr=Ar.width,Or.width=Mr,Or.minWidth=Rr,Or.maxWidth=Ir)),void 0===Dr?Dr:Dr+""}function yn(Cr,Pr){return{get:function(){return Cr()?void delete this.get:(this.get=Pr).apply(this,arguments)}}}function _n(Cr){var Pr=Vn.cssProps[Cr];return Pr||(Pr=Vn.cssProps[Cr]=function(Ar){if(Ar in Wa)return Ar;for(var Mr=Ar[0].toUpperCase()+Ar.slice(1),Rr=ja.length;Rr--;)if((Ar=ja[Rr]+Mr)in Wa)return Ar}(Cr)||Cr),Pr}function bn(Cr,Pr,Ar){var Mr=_a.exec(Pr);return Mr?Math.max(0,Mr[2]-(Ar||0))+(Mr[3]||"px"):Pr}function xn(Cr,Pr,Ar,Mr,Rr){var Dr=0,Ir;for(Ir=Ar===(Mr?"border":"content")?4:"width"===Pr?1:0;4>Ir;Ir+=2)"margin"===Ar&&(Dr+=Vn.css(Cr,Ar+ba[Ir],!0,Rr)),Mr?("content"===Ar&&(Dr-=Vn.css(Cr,"padding"+ba[Ir],!0,Rr)),"margin"!==Ar&&(Dr-=Vn.css(Cr,"border"+ba[Ir]+"Width",!0,Rr))):(Dr+=Vn.css(Cr,"padding"+ba[Ir],!0,Rr),"padding"!==Ar&&(Dr+=Vn.css(Cr,"border"+ba[Ir]+"Width",!0,Rr)));return Dr}function vn(Cr,Pr,Ar){var Rr=Ua(Cr),Ir=mn(Cr,Pr,Rr),Dr="border-box"===Vn.css(Cr,"boxSizing",!1,Rr),Mr;return Ba.test(Ir)?Ir:(Mr=Dr&&(zn.boxSizingReliable()||Ir===Cr.style[Pr]),"auto"===Ir&&(Ir=Cr["offset"+Pr[0].toUpperCase()+Pr.slice(1)]),(Ir=parseFloat(Ir)||0)+xn(Cr,Pr,Ar||(Dr?"border":"content"),Mr,Rr)+"px")}function Tn(Cr,Pr,Ar,Mr,Rr){return new Tn.prototype.init(Cr,Pr,Ar,Mr,Rr)}function En(){Va&&(!1===kn.hidden&&Bt.requestAnimationFrame?Bt.requestAnimationFrame(En):Bt.setTimeout(En,Vn.fx.interval),Vn.fx.tick())}function Sn(){return Bt.setTimeout(function(){za=void 0}),za=Vn.now()}function wn(Cr,Pr){var Mr=0,Rr={height:Cr},Ar;for(Pr=Pr?1:0;4>Mr;Mr+=2-Pr)Rr["margin"+(Ar=ba[Mr])]=Rr["padding"+Ar]=Cr;return Pr&&(Rr.opacity=Rr.width=Cr),Rr}function Cn(Cr,Pr,Ar){for(var Rr=(Pn.tweeners[Pr]||[]).concat(Pn.tweeners["*"]),Ir=0,Dr=Rr.length,Mr;Ir<Dr;Ir++)if(Mr=Rr[Ir].call(Ar,Pr,Cr))return Mr}function Pn(Cr,Pr,Ar){var Ir=0,Dr=Pn.prefilters.length,Or=Vn.Deferred().always(function(){delete Lr.elem}),Lr=function(){if(Rr)return!1;for(var Fr=za||Sn(),Br=Math.max(0,kr.startTime+kr.duration-Fr),Ur=1-(Br/kr.duration||0),Xr=0,Gr=kr.tweens.length;Xr<Gr;Xr++)kr.tweens[Xr].run(Ur);return Or.notifyWith(Cr,[kr,Ur,Br]),1>Ur&&Gr?Br:(Gr||Or.notifyWith(Cr,[kr,1,0]),Or.resolveWith(Cr,[kr]),!1)},kr=Or.promise({elem:Cr,props:Vn.extend({},Pr),opts:Vn.extend(!0,{specialEasing:{},easing:Vn.easing._default},Ar),originalProperties:Pr,originalOptions:Ar,startTime:za||Sn(),duration:Ar.duration,tweens:[],createTween:function(Fr,Br){var Ur=Vn.Tween(Cr,kr.opts,Fr,Br,kr.opts.specialEasing[Fr]||kr.opts.easing);return kr.tweens.push(Ur),Ur},stop:function(Fr){var Br=0,Ur=Fr?kr.tweens.length:0;if(Rr)return this;for(Rr=!0;Br<Ur;Br++)kr.tweens[Br].run(1);return Fr?(Or.notifyWith(Cr,[kr,1,0]),Or.resolveWith(Cr,[kr,Fr])):Or.rejectWith(Cr,[kr,Fr]),this}}),Nr=kr.props,Mr,Rr;for(!function(Fr,Br){var Ur,Xr,Gr,Yr,Hr;for(Ur in Fr)if(Xr=Vn.camelCase(Ur),Gr=Br[Xr],Yr=Fr[Ur],Array.isArray(Yr)&&(Gr=Yr[1],Yr=Fr[Ur]=Yr[0]),Ur!==Xr&&(Fr[Xr]=Yr,delete Fr[Ur]),(Hr=Vn.cssHooks[Xr])&&("expand"in Hr))for(Ur in Yr=Hr.expand(Yr),delete Fr[Xr],Yr)(Ur in Fr)||(Fr[Ur]=Yr[Ur],Br[Ur]=Gr);else Br[Xr]=Gr}(Nr,kr.opts.specialEasing);Ir<Dr;Ir++)if(Mr=Pn.prefilters[Ir].call(kr,Cr,Nr,kr.opts))return Vn.isFunction(Mr.stop)&&(Vn._queueHooks(kr.elem,kr.opts.queue).stop=Vn.proxy(Mr.stop,Mr)),Mr;return Vn.map(Nr,Cn,kr),Vn.isFunction(kr.opts.start)&&kr.opts.start.call(Cr,kr),kr.progress(kr.opts.progress).done(kr.opts.done,kr.opts.complete).fail(kr.opts.fail).always(kr.opts.always),Vn.fx.timer(Vn.extend(Lr,{elem:Cr,anim:kr,queue:kr.opts.queue})),kr}function An(Cr){return(Cr.match(da)||[]).join(" ")}function Mn(Cr){return Cr.getAttribute&&Cr.getAttribute("class")||""}function Rn(Cr,Pr,Ar,Mr){if(Array.isArray(Pr))Vn.each(Pr,function(Ir,Dr){Ar||ir.test(Cr)?Mr(Cr,Dr):Rn(Cr+"["+("object"==typeof Dr&&null!=Dr?Ir:"")+"]",Dr,Ar,Mr)});else if(Ar||"object"!==Vn.type(Pr))Mr(Cr,Pr);else for(var Rr in Pr)Rn(Cr+"["+Rr+"]",Pr[Rr],Ar,Mr)}function In(Cr){return function(Pr,Ar){"string"!=typeof Pr&&(Ar=Pr,Pr="*");var Rr=0,Ir=Pr.toLowerCase().match(da)||[],Mr;if(Vn.isFunction(Ar))for(;Mr=Ir[Rr++];)"+"===Mr[0]?(Mr=Mr.slice(1)||"*",(Cr[Mr]=Cr[Mr]||[]).unshift(Ar)):(Cr[Mr]=Cr[Mr]||[]).push(Ar)}}function Dn(Cr,Pr,Ar,Mr){function Rr(Or){var Lr;return Ir[Or]=!0,Vn.each(Cr[Or]||[],function(kr,Nr){var Fr=Nr(Pr,Ar,Mr);return"string"!=typeof Fr||Dr||Ir[Fr]?Dr?!(Lr=Fr):void 0:(Pr.dataTypes.unshift(Fr),Rr(Fr),!1)}),Lr}var Ir={},Dr=Cr===yr;return Rr(Pr.dataTypes[0])||!Ir["*"]&&Rr("*")}function On(Cr,Pr){var Rr=Vn.ajaxSettings.flatOptions||{},Ar,Mr;for(Ar in Pr)void 0!==Pr[Ar]&&((Rr[Ar]?Cr:Mr||(Mr={}))[Ar]=Pr[Ar]);return Mr&&Vn.extend(!0,Cr,Mr),Cr}var Ln=[],kn=Bt.document,Nn=Object.getPrototypeOf,Fn=Ln.slice,Bn=Ln.concat,Un=Ln.push,Xn=Ln.indexOf,Gn={},Yn=Gn.toString,Hn=Gn.hasOwnProperty,jn=Hn.toString,Wn=jn.call(Object),zn={},Vn=function(Cr,Pr){return new Vn.fn.init(Cr,Pr)},qn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Kn=/^-ms-/,Zn=/-([a-z])/g,Qn=function(Cr,Pr){return Pr.toUpperCase()};Vn.fn=Vn.prototype={jquery:"3.2.1",constructor:Vn,length:0,toArray:function(){return Fn.call(this)},get:function(Cr){return null==Cr?Fn.call(this):0>Cr?this[Cr+this.length]:this[Cr]},pushStack:function(Cr){var Pr=Vn.merge(this.constructor(),Cr);return Pr.prevObject=this,Pr},each:function(Cr){return Vn.each(this,Cr)},map:function(Cr){return this.pushStack(Vn.map(this,function(Pr,Ar){return Cr.call(Pr,Ar,Pr)}))},slice:function(){return this.pushStack(Fn.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(Cr){var Pr=this.length,Ar=+Cr+(0>Cr?Pr:0);return this.pushStack(0<=Ar&&Ar<Pr?[this[Ar]]:[])},end:function(){return this.prevObject||this.constructor()},push:Un,sort:Ln.sort,splice:Ln.splice},Vn.extend=Vn.fn.extend=function(){var Dr=arguments[0]||{},Or=1,Lr=arguments.length,kr=!1,Cr,Pr,Ar,Mr,Rr,Ir;for("boolean"==typeof Dr&&(kr=Dr,Dr=arguments[Or]||{},Or++),"object"==typeof Dr||Vn.isFunction(Dr)||(Dr={}),Or===Lr&&(Dr=this,Or--);Or<Lr;Or++)if(null!=(Cr=arguments[Or]))for(Pr in Cr)Ar=Dr[Pr],Dr!==(Mr=Cr[Pr])&&(kr&&Mr&&(Vn.isPlainObject(Mr)||(Rr=Array.isArray(Mr)))?(Rr?(Rr=!1,Ir=Ar&&Array.isArray(Ar)?Ar:[]):Ir=Ar&&Vn.isPlainObject(Ar)?Ar:{},Dr[Pr]=Vn.extend(kr,Ir,Mr)):void 0!=Mr&&(Dr[Pr]=Mr));return Dr},Vn.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(Cr){throw new Error(Cr)},noop:function(){},isFunction:function(Cr){return"function"===Vn.type(Cr)},isWindow:function(Cr){return null!=Cr&&Cr===Cr.window},isNumeric:function(Cr){var Pr=Vn.type(Cr);return("number"===Pr||"string"===Pr)&&!isNaN(Cr-parseFloat(Cr))},isPlainObject:function(Cr){var Pr,Ar;return Cr&&"[object Object]"===Yn.call(Cr)&&(!(Pr=Nn(Cr))||"function"==typeof(Ar=Hn.call(Pr,"constructor")&&Pr.constructor)&&jn.call(Ar)===Wn)},isEmptyObject:function(Cr){for(var Pr in Cr)return!1;return!0},type:function(Cr){return null==Cr?Cr+"":"object"==typeof Cr||"function"==typeof Cr?Gn[Yn.call(Cr)]||"object":typeof Cr},globalEval:function(Cr){Gt(Cr)},camelCase:function(Cr){return Cr.replace(Kn,"ms-").replace(Zn,Qn)},each:function(Cr,Pr){var Mr=0,Ar;if(Yt(Cr))for(Ar=Cr.length;Mr<Ar&&!1!==Pr.call(Cr[Mr],Mr,Cr[Mr]);Mr++);else for(Mr in Cr)if(!1===Pr.call(Cr[Mr],Mr,Cr[Mr]))break;return Cr},trim:function(Cr){return null==Cr?"":(Cr+"").replace(qn,"")},makeArray:function(Cr,Pr){var Ar=Pr||[];return null!=Cr&&(Yt(Object(Cr))?Vn.merge(Ar,"string"==typeof Cr?[Cr]:Cr):Un.call(Ar,Cr)),Ar},inArray:function(Cr,Pr,Ar){return null==Pr?-1:Xn.call(Pr,Cr,Ar)},merge:function(Cr,Pr){for(var Ar=+Pr.length,Mr=0,Rr=Cr.length;Mr<Ar;Mr++)Cr[Rr++]=Pr[Mr];return Cr.length=Rr,Cr},grep:function(Cr,Pr,Ar){for(var Mr=[],Rr=0,Ir=Cr.length;Rr<Ir;Rr++)!Pr(Cr[Rr],Rr)!==!Ar&&Mr.push(Cr[Rr]);return Mr},map:function(Cr,Pr,Ar){var Ir=0,Dr=[],Mr,Rr;if(Yt(Cr))for(Mr=Cr.length;Ir<Mr;Ir++)null!=(Rr=Pr(Cr[Ir],Ir,Ar))&&Dr.push(Rr);else for(Ir in Cr)null!=(Rr=Pr(Cr[Ir],Ir,Ar))&&Dr.push(Rr);return Bn.apply([],Dr)},guid:1,proxy:function(Cr,Pr){var Ar,Mr,Rr;if("string"==typeof Pr&&(Ar=Cr[Pr],Pr=Cr,Cr=Ar),Vn.isFunction(Cr))return Mr=Fn.call(arguments,2),Rr=function(){return Cr.apply(Pr||this,Mr.concat(Fn.call(arguments)))},Rr.guid=Cr.guid=Cr.guid||Vn.guid++,Rr},now:Date.now,support:zn}),"function"==typeof Symbol&&(Vn.fn[Symbol.iterator]=Ln[Symbol.iterator]),Vn.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(Cr,Pr){Gn["[object "+Pr+"]"]=Pr.toLowerCase()});var Jn=function(Cr){function Pr(Ki,Zi,Qi,Ji){var oo=Zi&&Zi.ownerDocument,so=Zi?Zi.nodeType:9,$i,eo,to,no,ao,ro,io;if(Qi=Qi||[],"string"!=typeof Ki||!Ki||1!==so&&9!==so&&11!==so)return Qi;if(!Ji&&((Zi?Zi.ownerDocument||Zi:pi)!==ai&&ni(Zi),Zi=Zi||ai,ii)){if(11!==so&&(ao=Gi.exec(Ki)))if(!($i=ao[1])){if(ao[2])return Ti.apply(Qi,Zi.getElementsByTagName(Ki)),Qi;if(($i=ao[3])&&zr.getElementsByClassName&&Zi.getElementsByClassName)return Ti.apply(Qi,Zi.getElementsByClassName($i)),Qi}else if(9===so){if(!(to=Zi.getElementById($i)))return Qi;if(to.id===$i)return Qi.push(to),Qi}else if(oo&&(to=oo.getElementById($i))&&li(Zi,to)&&to.id===$i)return Qi.push(to),Qi;if(zr.qsa&&!mi[Ki+" "]&&(!oi||!oi.test(Ki))){if(1!==so)oo=Zi,io=Ki;else if("object"!==Zi.nodeName.toLowerCase()){for((no=Zi.getAttribute("id"))?no=no.replace(Wi,zi):Zi.setAttribute("id",no=ui),eo=(ro=Zr(Ki)).length;eo--;)ro[eo]="#"+no+" "+Ur(ro[eo]);io=ro.join(","),oo=Yi.test(Ki)&&Fr(Zi.parentNode)||Zi}if(io)try{return Ti.apply(Qi,oo.querySelectorAll(io)),Qi}catch(lo){}finally{no===ui&&Zi.removeAttribute("id")}}}return Jr(Ki.replace(Ii,"$1"),Zi,Qi,Ji)}function Ar(){function Ki(Qi,Ji){return Zi.push(Qi+" ")>Vr.cacheLength&&delete Ki[Zi.shift()],Ki[Qi+" "]=Ji}var Zi=[];return Ki}function Mr(Ki){return Ki[ui]=!0,Ki}function Rr(Ki){var Zi=ai.createElement("fieldset");try{return!!Ki(Zi)}catch(Qi){return!1}finally{Zi.parentNode&&Zi.parentNode.removeChild(Zi),Zi=null}}function Ir(Ki,Zi){for(var Qi=Ki.split("|"),Ji=Qi.length;Ji--;)Vr.attrHandle[Qi[Ji]]=Zi}function Dr(Ki,Zi){var Qi=Zi&&Ki,Ji=Qi&&1===Ki.nodeType&&1===Zi.nodeType&&Ki.sourceIndex-Zi.sourceIndex;if(Ji)return Ji;if(Qi)for(;Qi=Qi.nextSibling;)if(Qi===Zi)return-1;return Ki?1:-1}function Or(Ki){return function(Zi){return"input"===Zi.nodeName.toLowerCase()&&Zi.type===Ki}}function Lr(Ki){return function(Zi){var Qi=Zi.nodeName.toLowerCase();return("input"===Qi||"button"===Qi)&&Zi.type===Ki}}function kr(Ki){return function(Zi){return"form"in Zi?Zi.parentNode&&!1===Zi.disabled?"label"in Zi?"label"in Zi.parentNode?Zi.parentNode.disabled===Ki:Zi.disabled===Ki:Zi.isDisabled===Ki||Zi.isDisabled!==!Ki&&qi(Zi)===Ki:Zi.disabled===Ki:"label"in Zi&&Zi.disabled===Ki}}function Nr(Ki){return Mr(function(Zi){return Zi=+Zi,Mr(function(Qi,Ji){for(var eo=Ki([],Qi.length,Zi),to=eo.length,$i;to--;)Qi[$i=eo[to]]&&(Qi[$i]=!(Ji[$i]=Qi[$i]))})})}function Fr(Ki){return Ki&&void 0!==Ki.getElementsByTagName&&Ki}function Br(){}function Ur(Ki){for(var Zi=0,Qi=Ki.length,Ji="";Zi<Qi;Zi++)Ji+=Ki[Zi].value;return Ji}function Xr(Ki,Zi,Qi){var Ji=Zi.dir,$i=Zi.next,eo=$i||Ji,to=Qi&&"parentNode"===eo,no=hi++;return Zi.first?function(ao,ro,io){for(;ao=ao[Ji];)if(1===ao.nodeType||to)return Ki(ao,ro,io);return!1}:function(ao,ro,io){var uo=[ci,no],oo,so,lo;if(io){for(;ao=ao[Ji];)if((1===ao.nodeType||to)&&Ki(ao,ro,io))return!0;}else for(;ao=ao[Ji];)if(1===ao.nodeType||to)if(lo=ao[ui]||(ao[ui]={}),so=lo[ao.uniqueID]||(lo[ao.uniqueID]={}),$i&&$i===ao.nodeName.toLowerCase())ao=ao[Ji]||ao;else{if((oo=so[eo])&&oo[0]===ci&&oo[1]===no)return uo[2]=oo[2];if(so[eo]=uo,uo[2]=Ki(ao,ro,io))return!0}return!1}}function Gr(Ki){return 1<Ki.length?function(Zi,Qi,Ji){for(var $i=Ki.length;$i--;)if(!Ki[$i](Zi,Qi,Ji))return!1;return!0}:Ki[0]}function Yr(Ki,Zi,Qi,Ji,$i){for(var to=[],no=0,ao=Ki.length,eo;no<ao;no++)(eo=Ki[no])&&(Qi&&!Qi(eo,Ji,$i)||(to.push(eo),null!=Zi&&Zi.push(no)));return to}function Hr(Ki,Zi,Qi,Ji,$i,eo){return Ji&&!Ji[ui]&&(Ji=Hr(Ji)),$i&&!$i[ui]&&($i=Hr($i,eo)),Mr(function(to,no,ao,ro){var lo=[],uo=[],po=no.length,co=to||function(go,mo,yo){for(var _o=0,bo=mo.length;_o<bo;_o++)Pr(go,mo[_o],yo);return yo}(Zi||"*",ao.nodeType?[ao]:ao,[]),ho=Ki&&(to||!Zi)?Yr(co,lo,Ki,ao,ro):co,fo=Qi?$i||(to?Ki:po||Ji)?[]:no:ho,io,oo,so;if(Qi&&Qi(ho,fo,ao,ro),Ji)for(io=Yr(fo,uo),Ji(io,[],ao,ro),oo=io.length;oo--;)(so=io[oo])&&(fo[uo[oo]]=!(ho[uo[oo]]=so));if(!to)fo=Yr(fo===no?fo.splice(po,fo.length):fo),$i?$i(null,no,fo,ro):Ti.apply(no,fo);else if($i||Ki){if($i){for(io=[],oo=fo.length;oo--;)(so=fo[oo])&&io.push(ho[oo]=so);$i(null,fo=[],io,ro)}for(oo=fo.length;oo--;)(so=fo[oo])&&-1<(io=$i?Si(to,so):lo[oo])&&(to[io]=!(no[io]=so))}})}function jr(Ki){for(var $i=Ki.length,eo=Vr.relative[Ki[0].type],to=eo||Vr.relative[" "],no=eo?1:0,ao=Xr(function(oo){return oo===Zi},to,!0),ro=Xr(function(oo){return-1<Si(Zi,oo)},to,!0),io=[function(oo,so,lo){var uo=!eo&&(lo||so!==$r)||((Zi=so).nodeType?ao(oo,so,lo):ro(oo,so,lo));return Zi=null,uo}],Zi,Qi,Ji;no<$i;no++)if(Qi=Vr.relative[Ki[no].type])io=[Xr(Gr(io),Qi)];else{if((Qi=Vr.filter[Ki[no].type].apply(null,Ki[no].matches))[ui]){for(Ji=++no;Ji<$i&&!Vr.relative[Ki[Ji].type];Ji++);return Hr(1<no&&Gr(io),1<no&&Ur(Ki.slice(0,no-1).concat({value:" "===Ki[no-2].type?"*":""})).replace(Ii,"$1"),Qi,no<Ji&&jr(Ki.slice(no,Ji)),Ji<$i&&jr(Ki=Ki.slice(Ji)),Ji<$i&&Ur(Ki))}io.push(Qi)}return Gr(io)}var ui="sizzle"+1*new Date,pi=Cr.document,ci=0,hi=0,fi=Ar(),gi=Ar(),mi=Ar(),yi=function(Ki,Zi){return Ki===Zi&&(ti=!0),0},_i={}.hasOwnProperty,bi=[],xi=bi.pop,vi=bi.push,Ti=bi.push,Ei=bi.slice,Si=function(Ki,Zi){for(var Qi=0,Ji=Ki.length;Qi<Ji;Qi++)if(Ki[Qi]===Zi)return Qi;return-1},wi="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",Ci="[\\x20\\t\\r\\n\\f]",Pi="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",Ri=/[\x20\t\r\n\f]+/g,Ii=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Di=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Oi=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Li=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,ki=/:((?:\\.|[\w-]|[^ -\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^ -\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^ -\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,Ni=/^(?:\\.|[\w-]|[^ -\xa0])+$/,Fi={ID:/^#((?:\\.|[\w-]|[^ -\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^ -\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^ -\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^ -\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^ -\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^ -\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^ -\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^ -\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Bi=/^(?:input|select|textarea|button)$/i,Ui=/^h\d$/i,Xi=/^[^{]+\{\s*\[native \w/,Gi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Yi=/[+~]/,Hi=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,ji=function(Ki,Zi,Qi){var Ji="0x"+Zi-65536;return Ji!=Ji||Qi?Zi:0>Ji?String.fromCharCode(Ji+65536):String.fromCharCode(55296|Ji>>10,56320|1023&Ji)},Wi=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,zi=function(Ki,Zi){return Zi?"\0"===Ki?"\uFFFD":Ki.slice(0,-1)+"\\"+Ki.charCodeAt(Ki.length-1).toString(16)+" ":"\\"+Ki},Vi=function(){ni()},qi=Xr(function(Ki){return!0===Ki.disabled&&("form"in Ki||"label"in Ki)},{dir:"parentNode",next:"legend"}),Wr,zr,Vr,qr,Kr,Zr,Qr,Jr,$r,ei,ti,ni,ai,ri,ii,oi,si,di,li;try{Ti.apply(bi=Ei.call(pi.childNodes),pi.childNodes),bi[pi.childNodes.length].nodeType}catch(Ki){Ti={apply:bi.length?function(Zi,Qi){vi.apply(Zi,Ei.call(Qi))}:function(Zi,Qi){for(var Ji=Zi.length,$i=0;Zi[Ji++]=Qi[$i++];);Zi.length=Ji-1}}}for(Wr in zr=Pr.support={},Kr=Pr.isXML=function(Ki){var Zi=Ki&&(Ki.ownerDocument||Ki).documentElement;return!!Zi&&"HTML"!==Zi.nodeName},ni=Pr.setDocument=function(Ki){var Ji=Ki?Ki.ownerDocument||Ki:pi,Zi,Qi;return Ji!==ai&&9===Ji.nodeType&&Ji.documentElement?(ai=Ji,ri=ai.documentElement,ii=!Kr(ai),pi!==ai&&(Qi=ai.defaultView)&&Qi.top!==Qi&&(Qi.addEventListener?Qi.addEventListener("unload",Vi,!1):Qi.attachEvent&&Qi.attachEvent("onunload",Vi)),zr.attributes=Rr(function($i){return $i.className="i",!$i.getAttribute("className")}),zr.getElementsByTagName=Rr(function($i){return $i.appendChild(ai.createComment("")),!$i.getElementsByTagName("*").length}),zr.getElementsByClassName=Xi.test(ai.getElementsByClassName),zr.getById=Rr(function($i){return ri.appendChild($i).id=ui,!ai.getElementsByName||!ai.getElementsByName(ui).length}),zr.getById?(Vr.filter.ID=function($i){var eo=$i.replace(Hi,ji);return function(to){return to.getAttribute("id")===eo}},Vr.find.ID=function($i,eo){if(void 0!==eo.getElementById&&ii){var to=eo.getElementById($i);return to?[to]:[]}}):(Vr.filter.ID=function($i){var eo=$i.replace(Hi,ji);return function(to){var no=void 0!==to.getAttributeNode&&to.getAttributeNode("id");return no&&no.value===eo}},Vr.find.ID=function($i,eo){if(void 0!==eo.getElementById&&ii){var ro=eo.getElementById($i),to,no,ao;if(ro){if((to=ro.getAttributeNode("id"))&&to.value===$i)return[ro];for(ao=eo.getElementsByName($i),no=0;ro=ao[no++];)if((to=ro.getAttributeNode("id"))&&to.value===$i)return[ro]}return[]}}),Vr.find.TAG=zr.getElementsByTagName?function($i,eo){return void 0===eo.getElementsByTagName?zr.qsa?eo.querySelectorAll($i):void 0:eo.getElementsByTagName($i)}:function($i,eo){var no=[],ao=0,ro=eo.getElementsByTagName($i),to;if("*"===$i){for(;to=ro[ao++];)1===to.nodeType&&no.push(to);return no}return ro},Vr.find.CLASS=zr.getElementsByClassName&&function($i,eo){if(void 0!==eo.getElementsByClassName&&ii)return eo.getElementsByClassName($i)},si=[],oi=[],(zr.qsa=Xi.test(ai.querySelectorAll))&&(Rr(function($i){ri.appendChild($i).innerHTML="<a id='"+ui+"'></a><select id='"+ui+"-\r\\' msallowcapture=''><option selected=''></option></select>",$i.querySelectorAll("[msallowcapture^='']").length&&oi.push("[*^$]="+Ci+"*(?:''|\"\")"),$i.querySelectorAll("[selected]").length||oi.push("\\["+Ci+"*(?:value|"+wi+")"),$i.querySelectorAll("[id~="+ui+"-]").length||oi.push("~="),$i.querySelectorAll(":checked").length||oi.push(":checked"),$i.querySelectorAll("a#"+ui+"+*").length||oi.push(".#.+[+~]")}),Rr(function($i){$i.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var eo=ai.createElement("input");eo.setAttribute("type","hidden"),$i.appendChild(eo).setAttribute("name","D"),$i.querySelectorAll("[name=d]").length&&oi.push("name"+Ci+"*[*^$|!~]?="),2!==$i.querySelectorAll(":enabled").length&&oi.push(":enabled",":disabled"),ri.appendChild($i).disabled=!0,2!==$i.querySelectorAll(":disabled").length&&oi.push(":enabled",":disabled"),$i.querySelectorAll("*,:x"),oi.push(",.*:")})),(zr.matchesSelector=Xi.test(di=ri.matches||ri.webkitMatchesSelector||ri.mozMatchesSelector||ri.oMatchesSelector||ri.msMatchesSelector))&&Rr(function($i){zr.disconnectedMatch=di.call($i,"*"),di.call($i,"[s!='']:x"),si.push("!=",":("+Pi+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+("\\["+Ci+"*("+Pi+")(?:"+Ci+"*([*^$|!~]?=)"+Ci+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Pi+"))|)"+Ci+"*\\]")+")*)|.*)\\)|)")}),oi=oi.length&&new RegExp(oi.join("|")),si=si.length&&new RegExp(si.join("|")),Zi=Xi.test(ri.compareDocumentPosition),li=Zi||Xi.test(ri.contains)?function($i,eo){var to=9===$i.nodeType?$i.documentElement:$i,no=eo&&eo.parentNode;return $i===no||no&&1===no.nodeType&&(to.contains?to.contains(no):$i.compareDocumentPosition&&16&$i.compareDocumentPosition(no))}:function($i,eo){if(eo)for(;eo=eo.parentNode;)if(eo===$i)return!0;return!1},yi=Zi?function($i,eo){if($i===eo)return ti=!0,0;var to=!$i.compareDocumentPosition-!eo.compareDocumentPosition;return to||(1&(to=($i.ownerDocument||$i)===(eo.ownerDocument||eo)?$i.compareDocumentPosition(eo):1)||!zr.sortDetached&&eo.compareDocumentPosition($i)===to?$i===ai||$i.ownerDocument===pi&&li(pi,$i)?-1:eo===ai||eo.ownerDocument===pi&&li(pi,eo)?1:ei?Si(ei,$i)-Si(ei,eo):0:4&to?-1:1)}:function($i,eo){if($i===eo)return ti=!0,0;var no=0,ao=$i.parentNode,ro=eo.parentNode,io=[$i],oo=[eo],to;if(!ao||!ro)return $i===ai?-1:eo===ai?1:ao?-1:ro?1:ei?Si(ei,$i)-Si(ei,eo):0;if(ao===ro)return Dr($i,eo);for(to=$i;to=to.parentNode;)io.unshift(to);for(to=eo;to=to.parentNode;)oo.unshift(to);for(;io[no]===oo[no];)no++;return no?Dr(io[no],oo[no]):io[no]===pi?-1:oo[no]===pi?1:0},ai):ai},Pr.matches=function(Ki,Zi){return Pr(Ki,null,null,Zi)},Pr.matchesSelector=function(Ki,Zi){if((Ki.ownerDocument||Ki)!==ai&&ni(Ki),Zi=Zi.replace(Li,"='$1']"),zr.matchesSelector&&ii&&!mi[Zi+" "]&&(!si||!si.test(Zi))&&(!oi||!oi.test(Zi)))try{var Qi=di.call(Ki,Zi);if(Qi||zr.disconnectedMatch||Ki.document&&11!==Ki.document.nodeType)return Qi}catch(Ji){}return 0<Pr(Zi,ai,null,[Ki]).length},Pr.contains=function(Ki,Zi){return(Ki.ownerDocument||Ki)!==ai&&ni(Ki),li(Ki,Zi)},Pr.attr=function(Ki,Zi){(Ki.ownerDocument||Ki)!==ai&&ni(Ki);var Qi=Vr.attrHandle[Zi.toLowerCase()],Ji=Qi&&_i.call(Vr.attrHandle,Zi.toLowerCase())?Qi(Ki,Zi,!ii):void 0;return void 0===Ji?zr.attributes||!ii?Ki.getAttribute(Zi):(Ji=Ki.getAttributeNode(Zi))&&Ji.specified?Ji.value:null:Ji},Pr.escape=function(Ki){return(Ki+"").replace(Wi,zi)},Pr.error=function(Ki){throw new Error("Syntax error, unrecognized expression: "+Ki)},Pr.uniqueSort=function(Ki){var Qi=[],Ji=0,$i=0,Zi;if(ti=!zr.detectDuplicates,ei=!zr.sortStable&&Ki.slice(0),Ki.sort(yi),ti){for(;Zi=Ki[$i++];)Zi===Ki[$i]&&(Ji=Qi.push($i));for(;Ji--;)Ki.splice(Qi[Ji],1)}return ei=null,Ki},qr=Pr.getText=function(Ki){var Qi="",Ji=0,$i=Ki.nodeType,Zi;if(!$i)for(;Zi=Ki[Ji++];)Qi+=qr(Zi);else if(1===$i||9===$i||11===$i){if("string"==typeof Ki.textContent)return Ki.textContent;for(Ki=Ki.firstChild;Ki;Ki=Ki.nextSibling)Qi+=qr(Ki)}else if(3===$i||4===$i)return Ki.nodeValue;return Qi},(Vr=Pr.selectors={cacheLength:50,createPseudo:Mr,match:Fi,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(Ki){return Ki[1]=Ki[1].replace(Hi,ji),Ki[3]=(Ki[3]||Ki[4]||Ki[5]||"").replace(Hi,ji),"~="===Ki[2]&&(Ki[3]=" "+Ki[3]+" "),Ki.slice(0,4)},CHILD:function(Ki){return Ki[1]=Ki[1].toLowerCase(),"nth"===Ki[1].slice(0,3)?(Ki[3]||Pr.error(Ki[0]),Ki[4]=+(Ki[4]?Ki[5]+(Ki[6]||1):2*("even"===Ki[3]||"odd"===Ki[3])),Ki[5]=+(Ki[7]+Ki[8]||"odd"===Ki[3])):Ki[3]&&Pr.error(Ki[0]),Ki},PSEUDO:function(Ki){var Qi=!Ki[6]&&Ki[2],Zi;return Fi.CHILD.test(Ki[0])?null:(Ki[3]?Ki[2]=Ki[4]||Ki[5]||"":Qi&&ki.test(Qi)&&(Zi=Zr(Qi,!0))&&(Zi=Qi.indexOf(")",Qi.length-Zi)-Qi.length)&&(Ki[0]=Ki[0].slice(0,Zi),Ki[2]=Qi.slice(0,Zi)),Ki.slice(0,3))}},filter:{TAG:function(Ki){var Zi=Ki.replace(Hi,ji).toLowerCase();return"*"===Ki?function(){return!0}:function(Qi){return Qi.nodeName&&Qi.nodeName.toLowerCase()===Zi}},CLASS:function(Ki){var Zi=fi[Ki+" "];return Zi||(Zi=new RegExp("(^|"+Ci+")"+Ki+"("+Ci+"|$)"))&&fi(Ki,function(Qi){return Zi.test("string"==typeof Qi.className&&Qi.className||void 0!==Qi.getAttribute&&Qi.getAttribute("class")||"")})},ATTR:function(Ki,Zi,Qi){return function(Ji){var $i=Pr.attr(Ji,Ki);return null==$i?"!="===Zi:!Zi||($i+="","="===Zi?$i===Qi:"!="===Zi?$i!==Qi:"^="===Zi?Qi&&0===$i.indexOf(Qi):"*="===Zi?Qi&&-1<$i.indexOf(Qi):"$="===Zi?Qi&&$i.slice(-Qi.length)===Qi:"~="===Zi?-1<(" "+$i.replace(Ri," ")+" ").indexOf(Qi):"|="==Zi&&($i===Qi||$i.slice(0,Qi.length+1)===Qi+"-"))}},CHILD:function(Ki,Zi,Qi,Ji,$i){var eo="nth"!==Ki.slice(0,3),to="last"!==Ki.slice(-4),no="of-type"===Zi;return 1===Ji&&0===$i?function(ao){return!!ao.parentNode}:function(ao,ro,io){var ho=eo==to?"previousSibling":"nextSibling",fo=ao.parentNode,go=no&&ao.nodeName.toLowerCase(),mo=!io&&!no,yo=!1,oo,so,lo,uo,po,co;if(fo){if(eo){for(;ho;){for(uo=ao;uo=uo[ho];)if(no?uo.nodeName.toLowerCase()===go:1===uo.nodeType)return!1;co=ho="only"===Ki&&!co&&"nextSibling"}return!0}if(co=[to?fo.firstChild:fo.lastChild],to&&mo){for(yo=(po=(oo=(so=(lo=(uo=fo)[ui]||(uo[ui]={}))[uo.uniqueID]||(lo[uo.uniqueID]={}))[Ki]||[])[0]===ci&&oo[1])&&oo[2],uo=po&&fo.childNodes[po];uo=++po&&uo&&uo[ho]||(yo=po=0)||co.pop();)if(1===uo.nodeType&&++yo&&uo===ao){so[Ki]=[ci,po,yo];break}}else if(mo&&(yo=po=(oo=(so=(lo=(uo=ao)[ui]||(uo[ui]={}))[uo.uniqueID]||(lo[uo.uniqueID]={}))[Ki]||[])[0]===ci&&oo[1]),!1===yo)for(;(uo=++po&&uo&&uo[ho]||(yo=po=0)||co.pop())&&((no?uo.nodeName.toLowerCase()!==go:1!==uo.nodeType)||!++yo||(mo&&((so=(lo=uo[ui]||(uo[ui]={}))[uo.uniqueID]||(lo[uo.uniqueID]={}))[Ki]=[ci,yo]),uo!==ao)););return(yo-=$i)==Ji||0==yo%Ji&&0<=yo/Ji}}},PSEUDO:function(Ki,Zi){var Ji=Vr.pseudos[Ki]||Vr.setFilters[Ki.toLowerCase()]||Pr.error("unsupported pseudo: "+Ki),Qi;return Ji[ui]?Ji(Zi):1<Ji.length?(Qi=[Ki,Ki,"",Zi],Vr.setFilters.hasOwnProperty(Ki.toLowerCase())?Mr(function($i,eo){for(var no=Ji($i,Zi),ao=no.length,to;ao--;)$i[to=Si($i,no[ao])]=!(eo[to]=no[ao])}):function($i){return Ji($i,0,Qi)}):Ji}},pseudos:{not:Mr(function(Ki){var Zi=[],Qi=[],Ji=Qr(Ki.replace(Ii,"$1"));return Ji[ui]?Mr(function($i,eo,to,no){for(var ro=Ji($i,null,no,[]),io=$i.length,ao;io--;)(ao=ro[io])&&($i[io]=!(eo[io]=ao))}):function($i,eo,to){return Zi[0]=$i,Ji(Zi,null,to,Qi),Zi[0]=null,!Qi.pop()}}),has:Mr(function(Ki){return function(Zi){return 0<Pr(Ki,Zi).length}}),contains:Mr(function(Ki){return Ki=Ki.replace(Hi,ji),function(Zi){return-1<(Zi.textContent||Zi.innerText||qr(Zi)).indexOf(Ki)}}),lang:Mr(function(Ki){return Ni.test(Ki||"")||Pr.error("unsupported lang: "+Ki),Ki=Ki.replace(Hi,ji).toLowerCase(),function(Zi){var Qi;do if(Qi=ii?Zi.lang:Zi.getAttribute("xml:lang")||Zi.getAttribute("lang"))return(Qi=Qi.toLowerCase())===Ki||0===Qi.indexOf(Ki+"-");while((Zi=Zi.parentNode)&&1===Zi.nodeType);return!1}}),target:function(Ki){var Zi=Cr.location&&Cr.location.hash;return Zi&&Zi.slice(1)===Ki.id},root:function(Ki){return Ki===ri},focus:function(Ki){return Ki===ai.activeElement&&(!ai.hasFocus||ai.hasFocus())&&!!(Ki.type||Ki.href||~Ki.tabIndex)},enabled:kr(!1),disabled:kr(!0),checked:function(Ki){var Zi=Ki.nodeName.toLowerCase();return"input"===Zi&&!!Ki.checked||"option"===Zi&&!!Ki.selected},selected:function(Ki){return Ki.parentNode&&Ki.parentNode.selectedIndex,!0===Ki.selected},empty:function(Ki){for(Ki=Ki.firstChild;Ki;Ki=Ki.nextSibling)if(6>Ki.nodeType)return!1;return!0},parent:function(Ki){return!Vr.pseudos.empty(Ki)},header:function(Ki){return Ui.test(Ki.nodeName)},input:function(Ki){return Bi.test(Ki.nodeName)},button:function(Ki){var Zi=Ki.nodeName.toLowerCase();return"input"===Zi&&"button"===Ki.type||"button"===Zi},text:function(Ki){var Zi;return"input"===Ki.nodeName.toLowerCase()&&"text"===Ki.type&&(null==(Zi=Ki.getAttribute("type"))||"text"===Zi.toLowerCase())},first:Nr(function(){return[0]}),last:Nr(function(Ki,Zi){return[Zi-1]}),eq:Nr(function(Ki,Zi,Qi){return[0>Qi?Qi+Zi:Qi]}),even:Nr(function(Ki,Zi){for(var Qi=0;Qi<Zi;Qi+=2)Ki.push(Qi);return Ki}),odd:Nr(function(Ki,Zi){for(var Qi=1;Qi<Zi;Qi+=2)Ki.push(Qi);return Ki}),lt:Nr(function(Ki,Zi,Qi){for(var Ji=0>Qi?Qi+Zi:Qi;0<=--Ji;)Ki.push(Ji);return Ki}),gt:Nr(function(Ki,Zi,Qi){for(var Ji=0>Qi?Qi+Zi:Qi;++Ji<Zi;)Ki.push(Ji);return Ki})}}).pseudos.nth=Vr.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})Vr.pseudos[Wr]=Or(Wr);for(Wr in{submit:!0,reset:!0})Vr.pseudos[Wr]=Lr(Wr);return Br.prototype=Vr.filters=Vr.pseudos,Vr.setFilters=new Br,Zr=Pr.tokenize=function(Ki,Zi){var ro=gi[Ki+" "],Qi,Ji,$i,eo,to,no,ao;if(ro)return Zi?0:ro.slice(0);for(to=Ki,no=[],ao=Vr.preFilter;to;){for(eo in Qi&&!(Ji=Di.exec(to))||(Ji&&(to=to.slice(Ji[0].length)||to),no.push($i=[])),Qi=!1,(Ji=Oi.exec(to))&&(Qi=Ji.shift(),$i.push({value:Qi,type:Ji[0].replace(Ii," ")}),to=to.slice(Qi.length)),Vr.filter)(Ji=Fi[eo].exec(to))&&(!ao[eo]||(Ji=ao[eo](Ji)))&&(Qi=Ji.shift(),$i.push({value:Qi,type:eo,matches:Ji}),to=to.slice(Qi.length));if(!Qi)break}return Zi?to.length:to?Pr.error(Ki):gi(Ki,no).slice(0)},Qr=Pr.compile=function(Ki,Zi){var Ji=[],$i=[],eo=mi[Ki+" "],Qi;if(!eo){for(Zi||(Zi=Zr(Ki)),Qi=Zi.length;Qi--;)(eo=jr(Zi[Qi]))[ui]?Ji.push(eo):$i.push(eo);(eo=mi(Ki,function(to,no){var ao=0<no.length,ro=0<to.length,io=function(oo,so,lo,uo,po){var go=0,mo="0",yo=oo&&[],_o=[],bo=$r,xo=oo||ro&&Vr.find.TAG("*",po),vo=ci+=null==bo?1:Math.random()||.1,To=xo.length,co,ho,fo;for(po&&($r=so===ai||so||po);mo!==To&&null!=(co=xo[mo]);mo++){if(ro&&co){for(ho=0,so||co.ownerDocument===ai||(ni(co),lo=!ii);fo=to[ho++];)if(fo(co,so||ai,lo)){uo.push(co);break}po&&(ci=vo)}ao&&((co=!fo&&co)&&go--,oo&&yo.push(co))}if(go+=mo,ao&&mo!==go){for(ho=0;fo=no[ho++];)fo(yo,_o,so,lo);if(oo){if(0<go)for(;mo--;)yo[mo]||_o[mo]||(_o[mo]=xi.call(uo));_o=Yr(_o)}Ti.apply(uo,_o),po&&!oo&&0<_o.length&&1<go+no.length&&Pr.uniqueSort(uo)}return po&&(ci=vo,$r=bo),yo};return ao?Mr(io):io}($i,Ji))).selector=Ki}return eo},Jr=Pr.select=function(Ki,Zi,Qi,Ji){var ro="function"==typeof Ki&&Ki,io=!Ji&&Zr(Ki=ro.selector||Ki),$i,eo,to,no,ao;if(Qi=Qi||[],1===io.length){if(2<(eo=io[0]=io[0].slice(0)).length&&"ID"===(to=eo[0]).type&&9===Zi.nodeType&&ii&&Vr.relative[eo[1].type]){if(!(Zi=(Vr.find.ID(to.matches[0].replace(Hi,ji),Zi)||[])[0]))return Qi;ro&&(Zi=Zi.parentNode),Ki=Ki.slice(eo.shift().value.length)}for($i=Fi.needsContext.test(Ki)?0:eo.length;$i--&&(to=eo[$i],!Vr.relative[no=to.type]);)if((ao=Vr.find[no])&&(Ji=ao(to.matches[0].replace(Hi,ji),Yi.test(eo[0].type)&&Fr(Zi.parentNode)||Zi))){if(eo.splice($i,1),!(Ki=Ji.length&&Ur(eo)))return Ti.apply(Qi,Ji),Qi;break}}return(ro||Qr(Ki,io))(Ji,Zi,!ii,Qi,!Zi||Yi.test(Ki)&&Fr(Zi.parentNode)||Zi),Qi},zr.sortStable=ui.split("").sort(yi).join("")===ui,zr.detectDuplicates=!!ti,ni(),zr.sortDetached=Rr(function(Ki){return 1&Ki.compareDocumentPosition(ai.createElement("fieldset"))}),Rr(function(Ki){return Ki.innerHTML="<a href='#'></a>","#"===Ki.firstChild.getAttribute("href")})||Ir("type|href|height|width",function(Ki,Zi,Qi){if(!Qi)return Ki.getAttribute(Zi,"type"===Zi.toLowerCase()?1:2)}),zr.attributes&&Rr(function(Ki){return Ki.innerHTML="<input/>",Ki.firstChild.setAttribute("value",""),""===Ki.firstChild.getAttribute("value")})||Ir("value",function(Ki,Zi,Qi){if(!Qi&&"input"===Ki.nodeName.toLowerCase())return Ki.defaultValue}),Rr(function(Ki){return null==Ki.getAttribute("disabled")})||Ir(wi,function(Ki,Zi,Qi){var Ji;if(!Qi)return!0===Ki[Zi]?Zi.toLowerCase():(Ji=Ki.getAttributeNode(Zi))&&Ji.specified?Ji.value:null}),Pr}(Bt);Vn.find=Jn,Vn.expr=Jn.selectors,Vn.expr[":"]=Vn.expr.pseudos,Vn.uniqueSort=Vn.unique=Jn.uniqueSort,Vn.text=Jn.getText,Vn.isXMLDoc=Jn.isXML,Vn.contains=Jn.contains,Vn.escapeSelector=Jn.escape;var $n=function(Cr,Pr,Ar){for(var Mr=[];(Cr=Cr[Pr])&&9!==Cr.nodeType;)if(1===Cr.nodeType){if(void 0!==Ar&&Vn(Cr).is(Ar))break;Mr.push(Cr)}return Mr},ea=function(Cr,Pr){for(var Ar=[];Cr;Cr=Cr.nextSibling)1===Cr.nodeType&&Cr!==Pr&&Ar.push(Cr);return Ar},ta=Vn.expr.match.needsContext,na=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,aa=/^.[^:#\[\.,]*$/;Vn.filter=function(Cr,Pr,Ar){var Mr=Pr[0];return Ar&&(Cr=":not("+Cr+")"),1===Pr.length&&1===Mr.nodeType?Vn.find.matchesSelector(Mr,Cr)?[Mr]:[]:Vn.find.matches(Cr,Vn.grep(Pr,function(Rr){return 1===Rr.nodeType}))},Vn.fn.extend({find:function(Cr){var Mr=this.length,Rr=this,Pr,Ar;if("string"!=typeof Cr)return this.pushStack(Vn(Cr).filter(function(){for(Pr=0;Pr<Mr;Pr++)if(Vn.contains(Rr[Pr],this))return!0}));for(Ar=this.pushStack([]),Pr=0;Pr<Mr;Pr++)Vn.find(Cr,Rr[Pr],Ar);return 1<Mr?Vn.uniqueSort(Ar):Ar},filter:function(Cr){return this.pushStack(jt(this,Cr||[],!1))},not:function(Cr){return this.pushStack(jt(this,Cr||[],!0))},is:function(Cr){return!!jt(this,"string"==typeof Cr&&ta.test(Cr)?Vn(Cr):Cr||[],!1).length}});var ia=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ra;(Vn.fn.init=function(Cr,Pr,Ar){var Mr,Rr;if(!Cr)return this;if(Ar=Ar||ra,"string"==typeof Cr){if(!(Mr="<"===Cr[0]&&">"===Cr[Cr.length-1]&&3<=Cr.length?[null,Cr,null]:ia.exec(Cr))||!Mr[1]&&Pr)return!Pr||Pr.jquery?(Pr||Ar).find(Cr):this.constructor(Pr).find(Cr);if(Mr[1]){if(Pr=Pr instanceof Vn?Pr[0]:Pr,Vn.merge(this,Vn.parseHTML(Mr[1],Pr&&Pr.nodeType?Pr.ownerDocument||Pr:kn,!0)),na.test(Mr[1])&&Vn.isPlainObject(Pr))for(Mr in Pr)Vn.isFunction(this[Mr])?this[Mr](Pr[Mr]):this.attr(Mr,Pr[Mr]);return this}return(Rr=kn.getElementById(Mr[2]))&&(this[0]=Rr,this.length=1),this}return Cr.nodeType?(this[0]=Cr,this.length=1,this):Vn.isFunction(Cr)?void 0===Ar.ready?Cr(Vn):Ar.ready(Cr):Vn.makeArray(Cr,this)}).prototype=Vn.fn,ra=Vn(kn);var oa=/^(?:parents|prev(?:Until|All))/,sa={children:!0,contents:!0,next:!0,prev:!0};Vn.fn.extend({has:function(Cr){var Pr=Vn(Cr,this),Ar=Pr.length;return this.filter(function(){for(var Mr=0;Mr<Ar;Mr++)if(Vn.contains(this,Pr[Mr]))return!0})},closest:function(Cr,Pr){var Mr=0,Rr=this.length,Ir=[],Dr="string"!=typeof Cr&&Vn(Cr),Ar;if(!ta.test(Cr))for(;Mr<Rr;Mr++)for(Ar=this[Mr];Ar&&Ar!==Pr;Ar=Ar.parentNode)if(11>Ar.nodeType&&(Dr?-1<Dr.index(Ar):1===Ar.nodeType&&Vn.find.matchesSelector(Ar,Cr))){Ir.push(Ar);break}return this.pushStack(1<Ir.length?Vn.uniqueSort(Ir):Ir)},index:function(Cr){return Cr?"string"==typeof Cr?Xn.call(Vn(Cr),this[0]):Xn.call(this,Cr.jquery?Cr[0]:Cr):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(Cr,Pr){return this.pushStack(Vn.uniqueSort(Vn.merge(this.get(),Vn(Cr,Pr))))},addBack:function(Cr){return this.add(null==Cr?this.prevObject:this.prevObject.filter(Cr))}}),Vn.each({parent:function(Cr){var Pr=Cr.parentNode;return Pr&&11!==Pr.nodeType?Pr:null},parents:function(Cr){return $n(Cr,"parentNode")},parentsUntil:function(Cr,Pr,Ar){return $n(Cr,"parentNode",Ar)},next:function(Cr){return Wt(Cr,"nextSibling")},prev:function(Cr){return Wt(Cr,"previousSibling")},nextAll:function(Cr){return $n(Cr,"nextSibling")},prevAll:function(Cr){return $n(Cr,"previousSibling")},nextUntil:function(Cr,Pr,Ar){return $n(Cr,"nextSibling",Ar)},prevUntil:function(Cr,Pr,Ar){return $n(Cr,"previousSibling",Ar)},siblings:function(Cr){return ea((Cr.parentNode||{}).firstChild,Cr)},children:function(Cr){return ea(Cr.firstChild)},contents:function(Cr){return Ht(Cr,"iframe")?Cr.contentDocument:(Ht(Cr,"template")&&(Cr=Cr.content||Cr),Vn.merge([],Cr.childNodes))}},function(Cr,Pr){Vn.fn[Cr]=function(Ar,Mr){var Rr=Vn.map(this,Pr,Ar);return"Until"!==Cr.slice(-5)&&(Mr=Ar),Mr&&"string"==typeof Mr&&(Rr=Vn.filter(Mr,Rr)),1<this.length&&(sa[Cr]||Vn.uniqueSort(Rr),oa.test(Cr)&&Rr.reverse()),this.pushStack(Rr)}});var da=/[^\x20\t\r\n\f]+/g;Vn.Callbacks=function(Cr){Cr="string"==typeof Cr?function(Nr){var Fr={};return Vn.each(Nr.match(da)||[],function(Br,Ur){Fr[Ur]=!0}),Fr}(Cr):Vn.extend({},Cr);var Ir=[],Dr=[],Or=-1,Lr=function(){for(Rr=Rr||Cr.once,Mr=Pr=!0;Dr.length;Or=-1)for(Ar=Dr.shift();++Or<Ir.length;)!1===Ir[Or].apply(Ar[0],Ar[1])&&Cr.stopOnFalse&&(Or=Ir.length,Ar=!1);Cr.memory||(Ar=!1),Pr=!1,Rr&&(Ir=Ar?[]:"")},kr={add:function(){return Ir&&(Ar&&!Pr&&(Or=Ir.length-1,Dr.push(Ar)),function Nr(Fr){Vn.each(Fr,function(Br,Ur){Vn.isFunction(Ur)?Cr.unique&&kr.has(Ur)||Ir.push(Ur):Ur&&Ur.length&&"string"!==Vn.type(Ur)&&Nr(Ur)})}(arguments),Ar&&!Pr&&Lr()),this},remove:function(){return Vn.each(arguments,function(Nr,Fr){for(var Br;-1<(Br=Vn.inArray(Fr,Ir,Br));)Ir.splice(Br,1),Br<=Or&&Or--}),this},has:function(Nr){return Nr?-1<Vn.inArray(Nr,Ir):0<Ir.length},empty:function(){return Ir&&(Ir=[]),this},disable:function(){return Rr=Dr=[],Ir=Ar="",this},disabled:function(){return!Ir},lock:function(){return Rr=Dr=[],Ar||Pr||(Ir=Ar=""),this},locked:function(){return!!Rr},fireWith:function(Nr,Fr){return Rr||(Fr=[Nr,(Fr=Fr||[]).slice?Fr.slice():Fr],Dr.push(Fr),Pr||Lr()),this},fire:function(){return kr.fireWith(this,arguments),this},fired:function(){return!!Mr}},Pr,Ar,Mr,Rr;return kr},Vn.extend({Deferred:function(Cr){var Pr=[["notify","progress",Vn.Callbacks("memory"),Vn.Callbacks("memory"),2],["resolve","done",Vn.Callbacks("once memory"),Vn.Callbacks("once memory"),0,"resolved"],["reject","fail",Vn.Callbacks("once memory"),Vn.Callbacks("once memory"),1,"rejected"]],Ar="pending",Mr={state:function(){return Ar},always:function(){return Rr.done(arguments).fail(arguments),this},catch:function(Ir){return Mr.then(null,Ir)},pipe:function(){var Ir=arguments;return Vn.Deferred(function(Dr){Vn.each(Pr,function(Or,Lr){var kr=Vn.isFunction(Ir[Lr[4]])&&Ir[Lr[4]];Rr[Lr[1]](function(){var Nr=kr&&kr.apply(this,arguments);Nr&&Vn.isFunction(Nr.promise)?Nr.promise().progress(Dr.notify).done(Dr.resolve).fail(Dr.reject):Dr[Lr[0]+"With"](this,kr?[Nr]:arguments)})}),Ir=null}).promise()},then:function(Ir,Dr,Or){function Lr(Nr,Fr,Br,Ur){return function(){var Xr=this,Gr=arguments,Yr=function(){var jr,Wr;if(!(Nr<kr)){if((jr=Br.apply(Xr,Gr))===Fr.promise())throw new TypeError("Thenable self-resolution");Wr=jr&&("object"==typeof jr||"function"==typeof jr)&&jr.then,Vn.isFunction(Wr)?Ur?Wr.call(jr,Lr(kr,Fr,zt,Ur),Lr(kr,Fr,Vt,Ur)):(kr++,Wr.call(jr,Lr(kr,Fr,zt,Ur),Lr(kr,Fr,Vt,Ur),Lr(kr,Fr,zt,Fr.notifyWith))):(Br!==zt&&(Xr=void 0,Gr=[jr]),(Ur||Fr.resolveWith)(Xr,Gr))}},Hr=Ur?Yr:function(){try{Yr()}catch(jr){Vn.Deferred.exceptionHook&&Vn.Deferred.exceptionHook(jr,Hr.stackTrace),Nr+1>=kr&&(Br!==Vt&&(Xr=void 0,Gr=[jr]),Fr.rejectWith(Xr,Gr))}};Nr?Hr():(Vn.Deferred.getStackHook&&(Hr.stackTrace=Vn.Deferred.getStackHook()),Bt.setTimeout(Hr))}}var kr=0;return Vn.Deferred(function(Nr){Pr[0][3].add(Lr(0,Nr,Vn.isFunction(Or)?Or:zt,Nr.notifyWith)),Pr[1][3].add(Lr(0,Nr,Vn.isFunction(Ir)?Ir:zt)),Pr[2][3].add(Lr(0,Nr,Vn.isFunction(Dr)?Dr:Vt))}).promise()},promise:function(Ir){return null==Ir?Mr:Vn.extend(Ir,Mr)}},Rr={};return Vn.each(Pr,function(Ir,Dr){var Or=Dr[2],Lr=Dr[5];Mr[Dr[1]]=Or.add,Lr&&Or.add(function(){Ar=Lr},Pr[3-Ir][2].disable,Pr[0][2].lock),Or.add(Dr[3].fire),Rr[Dr[0]]=function(){return Rr[Dr[0]+"With"](this===Rr?void 0:this,arguments),this},Rr[Dr[0]+"With"]=Or.fireWith}),Mr.promise(Rr),Cr&&Cr.call(Rr,Rr),Rr},when:function(Cr){var Pr=arguments.length,Ar=Pr,Mr=Array(Ar),Rr=Fn.call(arguments),Ir=Vn.Deferred(),Dr=function(Or){return function(Lr){Mr[Or]=this,Rr[Or]=1<arguments.length?Fn.call(arguments):Lr,--Pr||Ir.resolveWith(Mr,Rr)}};if(1>=Pr&&(qt(Cr,Ir.done(Dr(Ar)).resolve,Ir.reject,!Pr),"pending"===Ir.state()||Vn.isFunction(Rr[Ar]&&Rr[Ar].then)))return Ir.then();for(;Ar--;)qt(Rr[Ar],Dr(Ar),Ir.reject);return Ir.promise()}});var la=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Vn.Deferred.exceptionHook=function(Cr,Pr){Bt.console&&Bt.console.warn&&Cr&&la.test(Cr.name)&&Bt.console.warn("jQuery.Deferred exception: "+Cr.message,Cr.stack,Pr)},Vn.readyException=function(Cr){Bt.setTimeout(function(){throw Cr})};var ua=Vn.Deferred();Vn.fn.ready=function(Cr){return ua.then(Cr).catch(function(Pr){Vn.readyException(Pr)}),this},Vn.extend({isReady:!1,readyWait:1,ready:function(Cr){(!0===Cr?--Vn.readyWait:Vn.isReady)||(Vn.isReady=!0,!0!==Cr&&0<--Vn.readyWait||ua.resolveWith(kn,[Vn]))}}),Vn.ready.then=ua.then,"complete"!==kn.readyState&&("loading"===kn.readyState||kn.documentElement.doScroll)?(kn.addEventListener("DOMContentLoaded",Kt),Bt.addEventListener("load",Kt)):Bt.setTimeout(Vn.ready);var pa=function(Cr,Pr,Ar,Mr,Rr,Ir,Dr){var Or=0,Lr=Cr.length,kr=null==Ar;if("object"===Vn.type(Ar))for(Or in Rr=!0,Ar)pa(Cr,Pr,Or,Ar[Or],!0,Ir,Dr);else if(void 0!==Mr&&(Rr=!0,Vn.isFunction(Mr)||(Dr=!0),kr&&(Dr?(Pr.call(Cr,Mr),Pr=null):(kr=Pr,Pr=function(Nr,Fr,Br){return kr.call(Vn(Nr),Br)})),Pr))for(;Or<Lr;Or++)Pr(Cr[Or],Ar,Dr?Mr:Mr.call(Cr[Or],Or,Pr(Cr[Or],Ar)));return Rr?Cr:kr?Pr.call(Cr):Lr?Pr(Cr[0],Ar):Ir},ca=function(Cr){return 1===Cr.nodeType||9===Cr.nodeType||!+Cr.nodeType};Zt.uid=1,Zt.prototype={cache:function(Cr){var Pr=Cr[this.expando];return Pr||(Pr={},ca(Cr)&&(Cr.nodeType?Cr[this.expando]=Pr:Object.defineProperty(Cr,this.expando,{value:Pr,configurable:!0}))),Pr},set:function(Cr,Pr,Ar){var Rr=this.cache(Cr),Mr;if("string"==typeof Pr)Rr[Vn.camelCase(Pr)]=Ar;else for(Mr in Pr)Rr[Vn.camelCase(Mr)]=Pr[Mr];return Rr},get:function(Cr,Pr){return void 0===Pr?this.cache(Cr):Cr[this.expando]&&Cr[this.expando][Vn.camelCase(Pr)]},access:function(Cr,Pr,Ar){return void 0===Pr||Pr&&"string"==typeof Pr&&void 0===Ar?this.get(Cr,Pr):(this.set(Cr,Pr,Ar),void 0===Ar?Pr:Ar)},remove:function(Cr,Pr){var Mr=Cr[this.expando],Ar;if(void 0!==Mr){if(void 0!==Pr)for(Ar=(Pr=Array.isArray(Pr)?Pr.map(Vn.camelCase):((Pr=Vn.camelCase(Pr))in Mr)?[Pr]:Pr.match(da)||[]).length;Ar--;)delete Mr[Pr[Ar]];(void 0===Pr||Vn.isEmptyObject(Mr))&&(Cr.nodeType?Cr[this.expando]=void 0:delete Cr[this.expando])}},hasData:function(Cr){var Pr=Cr[this.expando];return void 0!==Pr&&!Vn.isEmptyObject(Pr)}};var ha=new Zt,fa=new Zt,ga=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,ma=/[A-Z]/g;Vn.extend({hasData:function(Cr){return fa.hasData(Cr)||ha.hasData(Cr)},data:function(Cr,Pr,Ar){return fa.access(Cr,Pr,Ar)},removeData:function(Cr,Pr){fa.remove(Cr,Pr)},_data:function(Cr,Pr,Ar){return ha.access(Cr,Pr,Ar)},_removeData:function(Cr,Pr){ha.remove(Cr,Pr)}}),Vn.fn.extend({data:function(Cr,Pr){var Ir=this[0],Dr=Ir&&Ir.attributes,Ar,Mr,Rr;if(void 0===Cr){if(this.length&&(Rr=fa.get(Ir),1===Ir.nodeType&&!ha.get(Ir,"hasDataAttrs"))){for(Ar=Dr.length;Ar--;)Dr[Ar]&&0===(Mr=Dr[Ar].name).indexOf("data-")&&(Mr=Vn.camelCase(Mr.slice(5)),Qt(Ir,Mr,Rr[Mr]));ha.set(Ir,"hasDataAttrs",!0)}return Rr}return"object"==typeof Cr?this.each(function(){fa.set(this,Cr)}):pa(this,function(Or){var Lr;if(Ir&&void 0===Or){if(void 0!==(Lr=fa.get(Ir,Cr)))return Lr;if(void 0!==(Lr=Qt(Ir,Cr)))return Lr}else this.each(function(){fa.set(this,Cr,Or)})},null,Pr,1<arguments.length,null,!0)},removeData:function(Cr){return this.each(function(){fa.remove(this,Cr)})}}),Vn.extend({queue:function(Cr,Pr,Ar){var Mr;if(Cr)return Pr=(Pr||"fx")+"queue",Mr=ha.get(Cr,Pr),Ar&&(!Mr||Array.isArray(Ar)?Mr=ha.access(Cr,Pr,Vn.makeArray(Ar)):Mr.push(Ar)),Mr||[]},dequeue:function(Cr,Pr){Pr=Pr||"fx";var Ar=Vn.queue(Cr,Pr),Mr=Ar.length,Rr=Ar.shift(),Ir=Vn._queueHooks(Cr,Pr);"inprogress"===Rr&&(Rr=Ar.shift(),Mr--),Rr&&("fx"===Pr&&Ar.unshift("inprogress"),delete Ir.stop,Rr.call(Cr,function(){Vn.dequeue(Cr,Pr)},Ir)),!Mr&&Ir&&Ir.empty.fire()},_queueHooks:function(Cr,Pr){var Ar=Pr+"queueHooks";return ha.get(Cr,Ar)||ha.access(Cr,Ar,{empty:Vn.Callbacks("once memory").add(function(){ha.remove(Cr,[Pr+"queue",Ar])})})}}),Vn.fn.extend({queue:function(Cr,Pr){var Ar=2;return"string"!=typeof Cr&&(Pr=Cr,Cr="fx",Ar--),arguments.length<Ar?Vn.queue(this[0],Cr):void 0===Pr?this:this.each(function(){var Mr=Vn.queue(this,Cr,Pr);Vn._queueHooks(this,Cr),"fx"===Cr&&"inprogress"!==Mr[0]&&Vn.dequeue(this,Cr)})},dequeue:function(Cr){return this.each(function(){Vn.dequeue(this,Cr)})},clearQueue:function(Cr){return this.queue(Cr||"fx",[])},promise:function(Cr,Pr){var Mr=1,Rr=Vn.Deferred(),Ir=this,Dr=this.length,Or=function(){--Mr||Rr.resolveWith(Ir,[Ir])},Ar;for("string"!=typeof Cr&&(Pr=Cr,Cr=void 0),Cr=Cr||"fx";Dr--;)(Ar=ha.get(Ir[Dr],Cr+"queueHooks"))&&Ar.empty&&(Mr++,Ar.empty.add(Or));return Or(),Rr.promise(Pr)}});var ya=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_a=new RegExp("^(?:([+-])=|)("+ya+")([a-z%]*)$","i"),ba=["Top","Right","Bottom","Left"],xa=function(Cr,Pr){return"none"===(Cr=Pr||Cr).style.display||""===Cr.style.display&&Vn.contains(Cr.ownerDocument,Cr)&&"none"===Vn.css(Cr,"display")},va=function(Cr,Pr,Ar,Mr){var Dr={},Rr,Ir;for(Ir in Pr)Dr[Ir]=Cr.style[Ir],Cr.style[Ir]=Pr[Ir];for(Ir in Rr=Ar.apply(Cr,Mr||[]),Pr)Cr.style[Ir]=Dr[Ir];return Rr},Ta={};Vn.fn.extend({show:function(){return en(this,!0)},hide:function(){return en(this)},toggle:function(Cr){return"boolean"==typeof Cr?Cr?this.show():this.hide():this.each(function(){xa(this)?Vn(this).show():Vn(this).hide()})}});var Ea=/^(?:checkbox|radio)$/i,Sa=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,wa=/^$|\/(?:java|ecma)script/i,Ca={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ca.optgroup=Ca.option,Ca.tbody=Ca.tfoot=Ca.colgroup=Ca.caption=Ca.thead,Ca.th=Ca.td;var Pa=/<|&#?\w+;/;!function(){var Cr=kn.createDocumentFragment().appendChild(kn.createElement("div")),Pr=kn.createElement("input");Pr.setAttribute("type","radio"),Pr.setAttribute("checked","checked"),Pr.setAttribute("name","t"),Cr.appendChild(Pr),zn.checkClone=Cr.cloneNode(!0).cloneNode(!0).lastChild.checked,Cr.innerHTML="<textarea>x</textarea>",zn.noCloneChecked=!!Cr.cloneNode(!0).lastChild.defaultValue}();var Aa=kn.documentElement,Ma=/^key/,Ra=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Ia=/^([^.]*)(?:\.(.+)|)/;Vn.event={global:{},add:function(Cr,Pr,Ar,Mr,Rr){var Yr=ha.get(Cr),Ir,Dr,Or,Lr,kr,Nr,Fr,Br,Ur,Xr,Gr;if(Yr)for(Ar.handler&&(Ar=(Ir=Ar).handler,Rr=Ir.selector),Rr&&Vn.find.matchesSelector(Aa,Rr),Ar.guid||(Ar.guid=Vn.guid++),(Lr=Yr.events)||(Lr=Yr.events={}),(Dr=Yr.handle)||(Dr=Yr.handle=function(Hr){return void 0!==Vn&&Vn.event.triggered!==Hr.type?Vn.event.dispatch.apply(Cr,arguments):void 0}),kr=(Pr=(Pr||"").match(da)||[""]).length;kr--;)Ur=Gr=(Or=Ia.exec(Pr[kr])||[])[1],Xr=(Or[2]||"").split(".").sort(),Ur&&(Fr=Vn.event.special[Ur]||{},Ur=(Rr?Fr.delegateType:Fr.bindType)||Ur,Fr=Vn.event.special[Ur]||{},Nr=Vn.extend({type:Ur,origType:Gr,data:Mr,handler:Ar,guid:Ar.guid,selector:Rr,needsContext:Rr&&Vn.expr.match.needsContext.test(Rr),namespace:Xr.join(".")},Ir),(Br=Lr[Ur])||((Br=Lr[Ur]=[]).delegateCount=0,Fr.setup&&!1!==Fr.setup.call(Cr,Mr,Xr,Dr)||Cr.addEventListener&&Cr.addEventListener(Ur,Dr)),Fr.add&&(Fr.add.call(Cr,Nr),Nr.handler.guid||(Nr.handler.guid=Ar.guid)),Rr?Br.splice(Br.delegateCount++,0,Nr):Br.push(Nr),Vn.event.global[Ur]=!0)},remove:function(Cr,Pr,Ar,Mr,Rr){var Yr=ha.hasData(Cr)&&ha.get(Cr),Ir,Dr,Or,Lr,kr,Nr,Fr,Br,Ur,Xr,Gr;if(Yr&&(Lr=Yr.events)){for(kr=(Pr=(Pr||"").match(da)||[""]).length;kr--;)if(Or=Ia.exec(Pr[kr])||[],Ur=Gr=Or[1],Xr=(Or[2]||"").split(".").sort(),Ur){for(Fr=Vn.event.special[Ur]||{},Br=Lr[Ur=(Mr?Fr.delegateType:Fr.bindType)||Ur]||[],Or=Or[2]&&new RegExp("(^|\\.)"+Xr.join("\\.(?:.*\\.|)")+"(\\.|$)"),Dr=Ir=Br.length;Ir--;)Nr=Br[Ir],!Rr&&Gr!==Nr.origType||Ar&&Ar.guid!==Nr.guid||Or&&!Or.test(Nr.namespace)||Mr&&Mr!==Nr.selector&&("**"!==Mr||!Nr.selector)||(Br.splice(Ir,1),Nr.selector&&Br.delegateCount--,Fr.remove&&Fr.remove.call(Cr,Nr));Dr&&!Br.length&&(Fr.teardown&&!1!==Fr.teardown.call(Cr,Xr,Yr.handle)||Vn.removeEvent(Cr,Ur,Yr.handle),delete Lr[Ur])}else for(Ur in Lr)Vn.event.remove(Cr,Ur+Pr[kr],Ar,Mr,!0);Vn.isEmptyObject(Lr)&&ha.remove(Cr,"handle events")}},dispatch:function(Cr){var Or=Vn.event.fix(Cr),Lr=Array(arguments.length),kr=(ha.get(this,"events")||{})[Or.type]||[],Nr=Vn.event.special[Or.type]||{},Pr,Ar,Mr,Rr,Ir,Dr;for(Lr[0]=Or,Pr=1;Pr<arguments.length;Pr++)Lr[Pr]=arguments[Pr];if(Or.delegateTarget=this,!Nr.preDispatch||!1!==Nr.preDispatch.call(this,Or)){for(Dr=Vn.event.handlers.call(this,Or,kr),Pr=0;(Rr=Dr[Pr++])&&!Or.isPropagationStopped();)for(Or.currentTarget=Rr.elem,Ar=0;(Ir=Rr.handlers[Ar++])&&!Or.isImmediatePropagationStopped();)Or.rnamespace&&!Or.rnamespace.test(Ir.namespace)||(Or.handleObj=Ir,Or.data=Ir.data,void 0!==(Mr=((Vn.event.special[Ir.origType]||{}).handle||Ir.handler).apply(Rr.elem,Lr))&&!1===(Or.result=Mr)&&(Or.preventDefault(),Or.stopPropagation()));return Nr.postDispatch&&Nr.postDispatch.call(this,Or),Or.result}},handlers:function(Cr,Pr){var Or=[],Lr=Pr.delegateCount,kr=Cr.target,Ar,Mr,Rr,Ir,Dr;if(Lr&&kr.nodeType&&!("click"===Cr.type&&1<=Cr.button))for(;kr!==this;kr=kr.parentNode||this)if(1===kr.nodeType&&("click"!==Cr.type||!0!==kr.disabled)){for(Ir=[],Dr={},Ar=0;Ar<Lr;Ar++)void 0===Dr[Rr=(Mr=Pr[Ar]).selector+" "]&&(Dr[Rr]=Mr.needsContext?-1<Vn(Rr,this).index(kr):Vn.find(Rr,this,null,[kr]).length),Dr[Rr]&&Ir.push(Mr);Ir.length&&Or.push({elem:kr,handlers:Ir})}return kr=this,Lr<Pr.length&&Or.push({elem:kr,handlers:Pr.slice(Lr)}),Or},addProp:function(Cr,Pr){Object.defineProperty(Vn.Event.prototype,Cr,{enumerable:!0,configurable:!0,get:Vn.isFunction(Pr)?function(){if(this.originalEvent)return Pr(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[Cr]},set:function(Ar){Object.defineProperty(this,Cr,{enumerable:!0,configurable:!0,writable:!0,value:Ar})}})},fix:function(Cr){return Cr[Vn.expando]?Cr:new Vn.Event(Cr)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==sn()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===sn()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&Ht(this,"input"))return this.click(),!1},_default:function(Cr){return Ht(Cr.target,"a")}},beforeunload:{postDispatch:function(Cr){void 0!==Cr.result&&Cr.originalEvent&&(Cr.originalEvent.returnValue=Cr.result)}}}},Vn.removeEvent=function(Cr,Pr,Ar){Cr.removeEventListener&&Cr.removeEventListener(Pr,Ar)},Vn.Event=function(Cr,Pr){return this instanceof Vn.Event?void(Cr&&Cr.type?(this.originalEvent=Cr,this.type=Cr.type,this.isDefaultPrevented=Cr.defaultPrevented||void 0===Cr.defaultPrevented&&!1===Cr.returnValue?rn:on,this.target=Cr.target&&3===Cr.target.nodeType?Cr.target.parentNode:Cr.target,this.currentTarget=Cr.currentTarget,this.relatedTarget=Cr.relatedTarget):this.type=Cr,Pr&&Vn.extend(this,Pr),this.timeStamp=Cr&&Cr.timeStamp||Vn.now(),this[Vn.expando]=!0):new Vn.Event(Cr,Pr)},Vn.Event.prototype={constructor:Vn.Event,isDefaultPrevented:on,isPropagationStopped:on,isImmediatePropagationStopped:on,isSimulated:!1,preventDefault:function(){var Cr=this.originalEvent;this.isDefaultPrevented=rn,Cr&&!this.isSimulated&&Cr.preventDefault()},stopPropagation:function(){var Cr=this.originalEvent;this.isPropagationStopped=rn,Cr&&!this.isSimulated&&Cr.stopPropagation()},stopImmediatePropagation:function(){var Cr=this.originalEvent;this.isImmediatePropagationStopped=rn,Cr&&!this.isSimulated&&Cr.stopImmediatePropagation(),this.stopPropagation()}},Vn.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(Cr){var Pr=Cr.button;return null==Cr.which&&Ma.test(Cr.type)?null==Cr.charCode?Cr.keyCode:Cr.charCode:!Cr.which&&void 0!==Pr&&Ra.test(Cr.type)?1&Pr?1:2&Pr?3:4&Pr?2:0:Cr.which}},Vn.event.addProp),Vn.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(Cr,Pr){Vn.event.special[Cr]={delegateType:Pr,bindType:Pr,handle:function(Ar){var Rr=Ar.relatedTarget,Ir=Ar.handleObj,Mr;return Rr&&(Rr===this||Vn.contains(this,Rr))||(Ar.type=Ir.origType,Mr=Ir.handler.apply(this,arguments),Ar.type=Pr),Mr}}}),Vn.fn.extend({on:function(Cr,Pr,Ar,Mr){return dn(this,Cr,Pr,Ar,Mr)},one:function(Cr,Pr,Ar,Mr){return dn(this,Cr,Pr,Ar,Mr,1)},off:function(Cr,Pr,Ar){var Mr,Rr;if(Cr&&Cr.preventDefault&&Cr.handleObj)return Mr=Cr.handleObj,Vn(Cr.delegateTarget).off(Mr.namespace?Mr.origType+"."+Mr.namespace:Mr.origType,Mr.selector,Mr.handler),this;if("object"==typeof Cr){for(Rr in Cr)this.off(Rr,Pr,Cr[Rr]);return this}return!1!==Pr&&"function"!=typeof Pr||(Ar=Pr,Pr=void 0),!1===Ar&&(Ar=on),this.each(function(){Vn.event.remove(this,Cr,Ar,Pr)})}});var Da=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Oa=/<script|<style|<link/i,La=/checked\s*(?:[^=]|=\s*.checked.)/i,ka=/^true\/(.*)/,Na=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Vn.extend({htmlPrefilter:function(Cr){return Cr.replace(Da,"<$1></$2>")},clone:function(Cr,Pr,Ar){var Or=Cr.cloneNode(!0),Lr=Vn.contains(Cr.ownerDocument,Cr),Mr,Rr,Ir,Dr;if(!(zn.noCloneChecked||1!==Cr.nodeType&&11!==Cr.nodeType||Vn.isXMLDoc(Cr)))for(Dr=tn(Or),Mr=0,Rr=(Ir=tn(Cr)).length;Mr<Rr;Mr++)hn(Ir[Mr],Dr[Mr]);if(Pr)if(Ar)for(Ir=Ir||tn(Cr),Dr=Dr||tn(Or),Mr=0,Rr=Ir.length;Mr<Rr;Mr++)cn(Ir[Mr],Dr[Mr]);else cn(Cr,Or);return 0<(Dr=tn(Or,"script")).length&&nn(Dr,!Lr&&tn(Cr,"script")),Or},cleanData:function(Cr){for(var Rr=Vn.event.special,Ir=0,Pr,Ar,Mr;void 0!==(Ar=Cr[Ir]);Ir++)if(ca(Ar)){if(Pr=Ar[ha.expando]){if(Pr.events)for(Mr in Pr.events)Rr[Mr]?Vn.event.remove(Ar,Mr):Vn.removeEvent(Ar,Mr,Pr.handle);Ar[ha.expando]=void 0}Ar[fa.expando]&&(Ar[fa.expando]=void 0)}}}),Vn.fn.extend({detach:function(Cr){return gn(this,Cr,!0)},remove:function(Cr){return gn(this,Cr)},text:function(Cr){return pa(this,function(Pr){return void 0===Pr?Vn.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=Pr)})},null,Cr,arguments.length)},append:function(){return fn(this,arguments,function(Cr){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&ln(this,Cr).appendChild(Cr)})},prepend:function(){return fn(this,arguments,function(Cr){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var Pr=ln(this,Cr);Pr.insertBefore(Cr,Pr.firstChild)}})},before:function(){return fn(this,arguments,function(Cr){this.parentNode&&this.parentNode.insertBefore(Cr,this)})},after:function(){return fn(this,arguments,function(Cr){this.parentNode&&this.parentNode.insertBefore(Cr,this.nextSibling)})},empty:function(){for(var Pr=0,Cr;null!=(Cr=this[Pr]);Pr++)1===Cr.nodeType&&(Vn.cleanData(tn(Cr,!1)),Cr.textContent="");return this},clone:function(Cr,Pr){return Cr=null!=Cr&&Cr,Pr=null==Pr?Cr:Pr,this.map(function(){return Vn.clone(this,Cr,Pr)})},html:function(Cr){return pa(this,function(Pr){var Ar=this[0]||{},Mr=0,Rr=this.length;if(void 0===Pr&&1===Ar.nodeType)return Ar.innerHTML;if("string"==typeof Pr&&!Oa.test(Pr)&&!Ca[(Sa.exec(Pr)||["",""])[1].toLowerCase()]){Pr=Vn.htmlPrefilter(Pr);try{for(;Mr<Rr;Mr++)1===(Ar=this[Mr]||{}).nodeType&&(Vn.cleanData(tn(Ar,!1)),Ar.innerHTML=Pr);Ar=0}catch(Ir){}}Ar&&this.empty().append(Pr)},null,Cr,arguments.length)},replaceWith:function(){var Cr=[];return fn(this,arguments,function(Pr){var Ar=this.parentNode;0>Vn.inArray(this,Cr)&&(Vn.cleanData(tn(this)),Ar&&Ar.replaceChild(Pr,this))},Cr)}}),Vn.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(Cr,Pr){Vn.fn[Cr]=function(Ar){for(var Rr=[],Ir=Vn(Ar),Dr=Ir.length-1,Or=0,Mr;Or<=Dr;Or++)Mr=Or===Dr?this:this.clone(!0),Vn(Ir[Or])[Pr](Mr),Un.apply(Rr,Mr.get());return this.pushStack(Rr)}});var Fa=/^margin/,Ba=new RegExp("^("+ya+")(?!px)[a-z%]+$","i"),Ua=function(Cr){var Pr=Cr.ownerDocument.defaultView;return Pr&&Pr.opener||(Pr=Bt),Pr.getComputedStyle(Cr)};!function(){function Cr(){if(Dr){Dr.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",Dr.innerHTML="",Aa.appendChild(Ir);var Or=Bt.getComputedStyle(Dr);Pr="1%"!==Or.top,Rr="2px"===Or.marginLeft,Ar="4px"===Or.width,Dr.style.marginRight="50%",Mr="4px"===Or.marginRight,Aa.removeChild(Ir),Dr=null}}var Ir=kn.createElement("div"),Dr=kn.createElement("div"),Pr,Ar,Mr,Rr;Dr.style&&(Dr.style.backgroundClip="content-box",Dr.cloneNode(!0).style.backgroundClip="",zn.clearCloneStyle="content-box"===Dr.style.backgroundClip,Ir.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",Ir.appendChild(Dr),Vn.extend(zn,{pixelPosition:function(){return Cr(),Pr},boxSizingReliable:function(){return Cr(),Ar},pixelMarginRight:function(){return Cr(),Mr},reliableMarginLeft:function(){return Cr(),Rr}}))}();var Xa=/^(none|table(?!-c[ea]).+)/,Ga=/^--/,Ya={position:"absolute",visibility:"hidden",display:"block"},Ha={letterSpacing:"0",fontWeight:"400"},ja=["Webkit","Moz","ms"],Wa=kn.createElement("div").style;Vn.extend({cssHooks:{opacity:{get:function(Cr,Pr){if(Pr){var Ar=mn(Cr,"opacity");return""===Ar?"1":Ar}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(Cr,Pr,Ar,Mr){if(Cr&&3!==Cr.nodeType&&8!==Cr.nodeType&&Cr.style){var Or=Vn.camelCase(Pr),Lr=Ga.test(Pr),kr=Cr.style,Rr,Ir,Dr;if(Lr||(Pr=_n(Or)),Dr=Vn.cssHooks[Pr]||Vn.cssHooks[Or],void 0===Ar)return Dr&&"get"in Dr&&void 0!==(Rr=Dr.get(Cr,!1,Mr))?Rr:kr[Pr];"string"==(Ir=typeof Ar)&&(Rr=_a.exec(Ar))&&Rr[1]&&(Ar=Jt(Cr,Pr,Rr),Ir="number"),null!=Ar&&Ar==Ar&&("number"===Ir&&(Ar+=Rr&&Rr[3]||(Vn.cssNumber[Or]?"":"px")),zn.clearCloneStyle||""!==Ar||0!==Pr.indexOf("background")||(kr[Pr]="inherit"),Dr&&"set"in Dr&&void 0===(Ar=Dr.set(Cr,Ar,Mr))||(Lr?kr.setProperty(Pr,Ar):kr[Pr]=Ar))}},css:function(Cr,Pr,Ar,Mr){var Or=Vn.camelCase(Pr),Rr,Ir,Dr;return Ga.test(Pr)||(Pr=_n(Or)),(Dr=Vn.cssHooks[Pr]||Vn.cssHooks[Or])&&"get"in Dr&&(Rr=Dr.get(Cr,!0,Ar)),void 0===Rr&&(Rr=mn(Cr,Pr,Mr)),"normal"===Rr&&Pr in Ha&&(Rr=Ha[Pr]),""===Ar||Ar?(Ir=parseFloat(Rr),!0===Ar||isFinite(Ir)?Ir||0:Rr):Rr}}),Vn.each(["height","width"],function(Cr,Pr){Vn.cssHooks[Pr]={get:function(Ar,Mr,Rr){if(Mr)return!Xa.test(Vn.css(Ar,"display"))||Ar.getClientRects().length&&Ar.getBoundingClientRect().width?vn(Ar,Pr,Rr):va(Ar,Ya,function(){return vn(Ar,Pr,Rr)})},set:function(Ar,Mr,Rr){var Dr=Rr&&Ua(Ar),Or=Rr&&xn(Ar,Pr,Rr,"border-box"===Vn.css(Ar,"boxSizing",!1,Dr),Dr),Ir;return Or&&(Ir=_a.exec(Mr))&&"px"!==(Ir[3]||"px")&&(Ar.style[Pr]=Mr,Mr=Vn.css(Ar,Pr)),bn(0,Mr,Or)}}}),Vn.cssHooks.marginLeft=yn(zn.reliableMarginLeft,function(Cr,Pr){if(Pr)return(parseFloat(mn(Cr,"marginLeft"))||Cr.getBoundingClientRect().left-va(Cr,{marginLeft:0},function(){return Cr.getBoundingClientRect().left}))+"px"}),Vn.each({margin:"",padding:"",border:"Width"},function(Cr,Pr){Vn.cssHooks[Cr+Pr]={expand:function(Ar){for(var Mr=0,Rr={},Ir="string"==typeof Ar?Ar.split(" "):[Ar];4>Mr;Mr++)Rr[Cr+ba[Mr]+Pr]=Ir[Mr]||Ir[Mr-2]||Ir[0];return Rr}},Fa.test(Cr)||(Vn.cssHooks[Cr+Pr].set=bn)}),Vn.fn.extend({css:function(Cr,Pr){return pa(this,function(Ar,Mr,Rr){var Or={},Lr=0,Ir,Dr;if(Array.isArray(Mr)){for(Ir=Ua(Ar),Dr=Mr.length;Lr<Dr;Lr++)Or[Mr[Lr]]=Vn.css(Ar,Mr[Lr],!1,Ir);return Or}return void 0===Rr?Vn.css(Ar,Mr):Vn.style(Ar,Mr,Rr)},Cr,Pr,1<arguments.length)}}),Vn.Tween=Tn,(Tn.prototype={constructor:Tn,init:function(Cr,Pr,Ar,Mr,Rr,Ir){this.elem=Cr,this.prop=Ar,this.easing=Rr||Vn.easing._default,this.options=Pr,this.start=this.now=this.cur(),this.end=Mr,this.unit=Ir||(Vn.cssNumber[Ar]?"":"px")},cur:function(){var Cr=Tn.propHooks[this.prop];return Cr&&Cr.get?Cr.get(this):Tn.propHooks._default.get(this)},run:function(Cr){var Ar=Tn.propHooks[this.prop],Pr;return this.pos=this.options.duration?Pr=Vn.easing[this.easing](Cr,this.options.duration*Cr,0,1,this.options.duration):Pr=Cr,this.now=(this.end-this.start)*Pr+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),Ar&&Ar.set?Ar.set(this):Tn.propHooks._default.set(this),this}}).init.prototype=Tn.prototype,(Tn.propHooks={_default:{get:function(Cr){var Pr;return 1!==Cr.elem.nodeType||null!=Cr.elem[Cr.prop]&&null==Cr.elem.style[Cr.prop]?Cr.elem[Cr.prop]:(Pr=Vn.css(Cr.elem,Cr.prop,""))&&"auto"!==Pr?Pr:0},set:function(Cr){Vn.fx.step[Cr.prop]?Vn.fx.step[Cr.prop](Cr):1===Cr.elem.nodeType&&(null!=Cr.elem.style[Vn.cssProps[Cr.prop]]||Vn.cssHooks[Cr.prop])?Vn.style(Cr.elem,Cr.prop,Cr.now+Cr.unit):Cr.elem[Cr.prop]=Cr.now}}}).scrollTop=Tn.propHooks.scrollLeft={set:function(Cr){Cr.elem.nodeType&&Cr.elem.parentNode&&(Cr.elem[Cr.prop]=Cr.now)}},Vn.easing={linear:function(Cr){return Cr},swing:function(Cr){return .5-Math.cos(Cr*Math.PI)/2},_default:"swing"},Vn.fx=Tn.prototype.init,Vn.fx.step={};var qa=/^(?:toggle|show|hide)$/,Ka=/queueHooks$/,za,Va;Vn.Animation=Vn.extend(Pn,{tweeners:{"*":[function(Cr,Pr){var Ar=this.createTween(Cr,Pr);return Jt(Ar.elem,Cr,_a.exec(Pr),Ar),Ar}]},tweener:function(Cr,Pr){Vn.isFunction(Cr)?(Pr=Cr,Cr=["*"]):Cr=Cr.match(da);for(var Mr=0,Rr=Cr.length,Ar;Mr<Rr;Mr++)Ar=Cr[Mr],Pn.tweeners[Ar]=Pn.tweeners[Ar]||[],Pn.tweeners[Ar].unshift(Pr)},prefilters:[function(Cr,Pr,Ar){var Br=this,Ur={},Xr=Cr.style,Gr=Cr.nodeType&&xa(Cr),Yr=ha.get(Cr,"fxshow"),Mr,Rr,Ir,Dr,Or,Lr,kr,Nr;for(Mr in Ar.queue||(null==(Dr=Vn._queueHooks(Cr,"fx")).unqueued&&(Dr.unqueued=0,Or=Dr.empty.fire,Dr.empty.fire=function(){Dr.unqueued||Or()}),Dr.unqueued++,Br.always(function(){Br.always(function(){Dr.unqueued--,Vn.queue(Cr,"fx").length||Dr.empty.fire()})})),Pr)if(Rr=Pr[Mr],qa.test(Rr)){if(delete Pr[Mr],Ir=Ir||"toggle"===Rr,Rr===(Gr?"hide":"show")){if("show"!==Rr||!Yr||void 0===Yr[Mr])continue;Gr=!0}Ur[Mr]=Yr&&Yr[Mr]||Vn.style(Cr,Mr)}if((Lr=!Vn.isEmptyObject(Pr))||!Vn.isEmptyObject(Ur))for(Mr in("width"in Pr||"height"in Pr)&&1===Cr.nodeType&&(Ar.overflow=[Xr.overflow,Xr.overflowX,Xr.overflowY],null==(kr=Yr&&Yr.display)&&(kr=ha.get(Cr,"display")),"none"===(Nr=Vn.css(Cr,"display"))&&(kr?Nr=kr:(en([Cr],!0),kr=Cr.style.display||kr,Nr=Vn.css(Cr,"display"),en([Cr]))),("inline"===Nr||"inline-block"===Nr&&null!=kr)&&"none"===Vn.css(Cr,"float")&&(Lr||(Br.done(function(){Xr.display=kr}),null==kr&&(Nr=Xr.display,kr="none"===Nr?"":Nr)),Xr.display="inline-block")),Ar.overflow&&(Xr.overflow="hidden",Br.always(function(){Xr.overflow=Ar.overflow[0],Xr.overflowX=Ar.overflow[1],Xr.overflowY=Ar.overflow[2]})),Lr=!1,Ur)Lr||(Yr?"hidden"in Yr&&(Gr=Yr.hidden):Yr=ha.access(Cr,"fxshow",{display:kr}),Ir&&(Yr.hidden=!Gr),Gr&&en([Cr],!0),Br.done(function(){for(Mr in Gr||en([Cr]),ha.remove(Cr,"fxshow"),Ur)Vn.style(Cr,Mr,Ur[Mr])})),Lr=Cn(Gr?Yr[Mr]:0,Mr,Br),Mr in Yr||(Yr[Mr]=Lr.start,Gr&&(Lr.end=Lr.start,Lr.start=0))}],prefilter:function(Cr,Pr){Pr?Pn.prefilters.unshift(Cr):Pn.prefilters.push(Cr)}}),Vn.speed=function(Cr,Pr,Ar){var Mr=Cr&&"object"==typeof Cr?Vn.extend({},Cr):{complete:Ar||!Ar&&Pr||Vn.isFunction(Cr)&&Cr,duration:Cr,easing:Ar&&Pr||Pr&&!Vn.isFunction(Pr)&&Pr};return Vn.fx.off?Mr.duration=0:"number"!=typeof Mr.duration&&(Mr.duration in Vn.fx.speeds?Mr.duration=Vn.fx.speeds[Mr.duration]:Mr.duration=Vn.fx.speeds._default),null!=Mr.queue&&!0!==Mr.queue||(Mr.queue="fx"),Mr.old=Mr.complete,Mr.complete=function(){Vn.isFunction(Mr.old)&&Mr.old.call(this),Mr.queue&&Vn.dequeue(this,Mr.queue)},Mr},Vn.fn.extend({fadeTo:function(Cr,Pr,Ar,Mr){return this.filter(xa).css("opacity",0).show().end().animate({opacity:Pr},Cr,Ar,Mr)},animate:function(Cr,Pr,Ar,Mr){var Rr=Vn.isEmptyObject(Cr),Ir=Vn.speed(Pr,Ar,Mr),Dr=function(){var Or=Pn(this,Vn.extend({},Cr),Ir);(Rr||ha.get(this,"finish"))&&Or.stop(!0)};return Dr.finish=Dr,Rr||!1===Ir.queue?this.each(Dr):this.queue(Ir.queue,Dr)},stop:function(Cr,Pr,Ar){var Mr=function(Rr){var Ir=Rr.stop;delete Rr.stop,Ir(Ar)};return"string"!=typeof Cr&&(Ar=Pr,Pr=Cr,Cr=void 0),Pr&&!1!==Cr&&this.queue(Cr||"fx",[]),this.each(function(){var Rr=!0,Ir=null!=Cr&&Cr+"queueHooks",Dr=Vn.timers,Or=ha.get(this);if(Ir)Or[Ir]&&Or[Ir].stop&&Mr(Or[Ir]);else for(Ir in Or)Or[Ir]&&Or[Ir].stop&&Ka.test(Ir)&&Mr(Or[Ir]);for(Ir=Dr.length;Ir--;)Dr[Ir].elem!==this||null!=Cr&&Dr[Ir].queue!==Cr||(Dr[Ir].anim.stop(Ar),Rr=!1,Dr.splice(Ir,1));!Rr&&Ar||Vn.dequeue(this,Cr)})},finish:function(Cr){return!1!==Cr&&(Cr=Cr||"fx"),this.each(function(){var Ar=ha.get(this),Mr=Ar[Cr+"queue"],Rr=Ar[Cr+"queueHooks"],Ir=Vn.timers,Dr=Mr?Mr.length:0,Pr;for(Ar.finish=!0,Vn.queue(this,Cr,[]),Rr&&Rr.stop&&Rr.stop.call(this,!0),Pr=Ir.length;Pr--;)Ir[Pr].elem===this&&Ir[Pr].queue===Cr&&(Ir[Pr].anim.stop(!0),Ir.splice(Pr,1));for(Pr=0;Pr<Dr;Pr++)Mr[Pr]&&Mr[Pr].finish&&Mr[Pr].finish.call(this);delete Ar.finish})}}),Vn.each(["toggle","show","hide"],function(Cr,Pr){var Ar=Vn.fn[Pr];Vn.fn[Pr]=function(Mr,Rr,Ir){return null==Mr||"boolean"==typeof Mr?Ar.apply(this,arguments):this.animate(wn(Pr,!0),Mr,Rr,Ir)}}),Vn.each({slideDown:wn("show"),slideUp:wn("hide"),slideToggle:wn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(Cr,Pr){Vn.fn[Cr]=function(Ar,Mr,Rr){return this.animate(Pr,Ar,Mr,Rr)}}),Vn.timers=[],Vn.fx.tick=function(){var Pr=0,Ar=Vn.timers,Cr;for(za=Vn.now();Pr<Ar.length;Pr++)(Cr=Ar[Pr])()||Ar[Pr]!==Cr||Ar.splice(Pr--,1);Ar.length||Vn.fx.stop(),za=void 0},Vn.fx.timer=function(Cr){Vn.timers.push(Cr),Vn.fx.start()},Vn.fx.interval=13,Vn.fx.start=function(){Va||(Va=!0,En())},Vn.fx.stop=function(){Va=null},Vn.fx.speeds={slow:600,fast:200,_default:400},Vn.fn.delay=function(Cr,Pr){return Cr=Vn.fx?Vn.fx.speeds[Cr]||Cr:Cr,Pr=Pr||"fx",this.queue(Pr,function(Ar,Mr){var Rr=Bt.setTimeout(Ar,Cr);Mr.stop=function(){Bt.clearTimeout(Rr)}})},function(){var Cr=kn.createElement("input"),Pr=kn.createElement("select").appendChild(kn.createElement("option"));Cr.type="checkbox",zn.checkOn=""!==Cr.value,zn.optSelected=Pr.selected,(Cr=kn.createElement("input")).value="t",Cr.type="radio",zn.radioValue="t"===Cr.value}();var Qa=Vn.expr.attrHandle,Za;Vn.fn.extend({attr:function(Cr,Pr){return pa(this,Vn.attr,Cr,Pr,1<arguments.length)},removeAttr:function(Cr){return this.each(function(){Vn.removeAttr(this,Cr)})}}),Vn.extend({attr:function(Cr,Pr,Ar){var Ir=Cr.nodeType,Mr,Rr;if(3!==Ir&&8!==Ir&&2!==Ir)return void 0===Cr.getAttribute?Vn.prop(Cr,Pr,Ar):(1===Ir&&Vn.isXMLDoc(Cr)||(Rr=Vn.attrHooks[Pr.toLowerCase()]||(Vn.expr.match.bool.test(Pr)?Za:void 0)),void 0===Ar?Rr&&"get"in Rr&&null!==(Mr=Rr.get(Cr,Pr))?Mr:null==(Mr=Vn.find.attr(Cr,Pr))?void 0:Mr:null===Ar?void Vn.removeAttr(Cr,Pr):Rr&&"set"in Rr&&void 0!==(Mr=Rr.set(Cr,Ar,Pr))?Mr:(Cr.setAttribute(Pr,Ar+""),Ar))},attrHooks:{type:{set:function(Cr,Pr){if(!zn.radioValue&&"radio"===Pr&&Ht(Cr,"input")){var Ar=Cr.value;return Cr.setAttribute("type",Pr),Ar&&(Cr.value=Ar),Pr}}}},removeAttr:function(Cr,Pr){var Mr=0,Rr=Pr&&Pr.match(da),Ar;if(Rr&&1===Cr.nodeType)for(;Ar=Rr[Mr++];)Cr.removeAttribute(Ar)}}),Za={set:function(Cr,Pr,Ar){return!1===Pr?Vn.removeAttr(Cr,Ar):Cr.setAttribute(Ar,Ar),Ar}},Vn.each(Vn.expr.match.bool.source.match(/\w+/g),function(Cr,Pr){var Ar=Qa[Pr]||Vn.find.attr;Qa[Pr]=function(Mr,Rr,Ir){var Lr=Rr.toLowerCase(),Dr,Or;return Ir||(Or=Qa[Lr],Qa[Lr]=Dr,Dr=null==Ar(Mr,Rr,Ir)?null:Lr,Qa[Lr]=Or),Dr}});var Ja=/^(?:input|select|textarea|button)$/i,$a=/^(?:a|area)$/i;Vn.fn.extend({prop:function(Cr,Pr){return pa(this,Vn.prop,Cr,Pr,1<arguments.length)},removeProp:function(Cr){return this.each(function(){delete this[Vn.propFix[Cr]||Cr]})}}),Vn.extend({prop:function(Cr,Pr,Ar){var Ir=Cr.nodeType,Mr,Rr;if(3!==Ir&&8!==Ir&&2!==Ir)return 1===Ir&&Vn.isXMLDoc(Cr)||(Pr=Vn.propFix[Pr]||Pr,Rr=Vn.propHooks[Pr]),void 0===Ar?Rr&&"get"in Rr&&null!==(Mr=Rr.get(Cr,Pr))?Mr:Cr[Pr]:Rr&&"set"in Rr&&void 0!==(Mr=Rr.set(Cr,Ar,Pr))?Mr:Cr[Pr]=Ar},propHooks:{tabIndex:{get:function(Cr){var Pr=Vn.find.attr(Cr,"tabindex");return Pr?parseInt(Pr,10):Ja.test(Cr.nodeName)||$a.test(Cr.nodeName)&&Cr.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),zn.optSelected||(Vn.propHooks.selected={get:function(Cr){var Pr=Cr.parentNode;return Pr&&Pr.parentNode&&Pr.parentNode.selectedIndex,null},set:function(Cr){var Pr=Cr.parentNode;Pr&&(Pr.selectedIndex,Pr.parentNode&&Pr.parentNode.selectedIndex)}}),Vn.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Vn.propFix[this.toLowerCase()]=this}),Vn.fn.extend({addClass:function(Cr){var Lr=0,Pr,Ar,Mr,Rr,Ir,Dr,Or;if(Vn.isFunction(Cr))return this.each(function(kr){Vn(this).addClass(Cr.call(this,kr,Mn(this)))});if("string"==typeof Cr&&Cr)for(Pr=Cr.match(da)||[];Ar=this[Lr++];)if(Rr=Mn(Ar),Mr=1===Ar.nodeType&&" "+An(Rr)+" "){for(Dr=0;Ir=Pr[Dr++];)0>Mr.indexOf(" "+Ir+" ")&&(Mr+=Ir+" ");Rr!==(Or=An(Mr))&&Ar.setAttribute("class",Or)}return this},removeClass:function(Cr){var Lr=0,Pr,Ar,Mr,Rr,Ir,Dr,Or;if(Vn.isFunction(Cr))return this.each(function(kr){Vn(this).removeClass(Cr.call(this,kr,Mn(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof Cr&&Cr)for(Pr=Cr.match(da)||[];Ar=this[Lr++];)if(Rr=Mn(Ar),Mr=1===Ar.nodeType&&" "+An(Rr)+" "){for(Dr=0;Ir=Pr[Dr++];)for(;-1<Mr.indexOf(" "+Ir+" ");)Mr=Mr.replace(" "+Ir+" "," ");Rr!==(Or=An(Mr))&&Ar.setAttribute("class",Or)}return this},toggleClass:function(Cr,Pr){var Ar=typeof Cr;return"boolean"==typeof Pr&&"string"==Ar?Pr?this.addClass(Cr):this.removeClass(Cr):Vn.isFunction(Cr)?this.each(function(Mr){Vn(this).toggleClass(Cr.call(this,Mr,Mn(this),Pr),Pr)}):this.each(function(){var Mr,Rr,Ir,Dr;if("string"==Ar)for(Rr=0,Ir=Vn(this),Dr=Cr.match(da)||[];Mr=Dr[Rr++];)Ir.hasClass(Mr)?Ir.removeClass(Mr):Ir.addClass(Mr);else void 0!==Cr&&"boolean"!=Ar||((Mr=Mn(this))&&ha.set(this,"__className__",Mr),this.setAttribute&&this.setAttribute("class",Mr||!1===Cr?"":ha.get(this,"__className__")||""))})},hasClass:function(Cr){var Mr=0,Pr,Ar;for(Pr=" "+Cr+" ";Ar=this[Mr++];)if(1===Ar.nodeType&&-1<(" "+An(Mn(Ar))+" ").indexOf(Pr))return!0;return!1}});var er=/\r/g;Vn.fn.extend({val:function(Cr){var Rr=this[0],Pr,Ar,Mr;return arguments.length?(Mr=Vn.isFunction(Cr),this.each(function(Ir){var Dr;1===this.nodeType&&(null==(Dr=Mr?Cr.call(this,Ir,Vn(this).val()):Cr)?Dr="":"number"==typeof Dr?Dr+="":Array.isArray(Dr)&&(Dr=Vn.map(Dr,function(Or){return null==Or?"":Or+""})),(Pr=Vn.valHooks[this.type]||Vn.valHooks[this.nodeName.toLowerCase()])&&"set"in Pr&&void 0!==Pr.set(this,Dr,"value")||(this.value=Dr))})):Rr?(Pr=Vn.valHooks[Rr.type]||Vn.valHooks[Rr.nodeName.toLowerCase()])&&"get"in Pr&&void 0!==(Ar=Pr.get(Rr,"value"))?Ar:"string"==typeof(Ar=Rr.value)?Ar.replace(er,""):null==Ar?"":Ar:void 0}}),Vn.extend({valHooks:{option:{get:function(Cr){var Pr=Vn.find.attr(Cr,"value");return null==Pr?An(Vn.text(Cr)):Pr}},select:{get:function(Cr){var Rr=Cr.options,Ir=Cr.selectedIndex,Dr="select-one"===Cr.type,Or=Dr?null:[],Lr=Dr?Ir+1:Rr.length,Pr,Ar,Mr;for(Mr=0>Ir?Lr:Dr?Ir:0;Mr<Lr;Mr++)if(((Ar=Rr[Mr]).selected||Mr===Ir)&&!Ar.disabled&&(!Ar.parentNode.disabled||!Ht(Ar.parentNode,"optgroup"))){if(Pr=Vn(Ar).val(),Dr)return Pr;Or.push(Pr)}return Or},set:function(Cr,Pr){for(var Rr=Cr.options,Ir=Vn.makeArray(Pr),Dr=Rr.length,Ar,Mr;Dr--;)((Mr=Rr[Dr]).selected=-1<Vn.inArray(Vn.valHooks.option.get(Mr),Ir))&&(Ar=!0);return Ar||(Cr.selectedIndex=-1),Ir}}}}),Vn.each(["radio","checkbox"],function(){Vn.valHooks[this]={set:function(Cr,Pr){if(Array.isArray(Pr))return Cr.checked=-1<Vn.inArray(Vn(Cr).val(),Pr)}},zn.checkOn||(Vn.valHooks[this].get=function(Cr){return null===Cr.getAttribute("value")?"on":Cr.value})});var tr=/^(?:focusinfocus|focusoutblur)$/;Vn.extend(Vn.event,{trigger:function(Cr,Pr,Ar,Mr){var Fr=[Ar||kn],Br=Hn.call(Cr,"type")?Cr.type:Cr,Ur=Hn.call(Cr,"namespace")?Cr.namespace.split("."):[],Rr,Ir,Dr,Or,Lr,kr,Nr;if(Ir=Dr=Ar=Ar||kn,3!==Ar.nodeType&&8!==Ar.nodeType&&!tr.test(Br+Vn.event.triggered)&&(-1<Br.indexOf(".")&&(Br=(Ur=Br.split(".")).shift(),Ur.sort()),Lr=0>Br.indexOf(":")&&"on"+Br,Cr=Cr[Vn.expando]?Cr:new Vn.Event(Br,"object"==typeof Cr&&Cr),Cr.isTrigger=Mr?2:3,Cr.namespace=Ur.join("."),Cr.rnamespace=Cr.namespace?new RegExp("(^|\\.)"+Ur.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,Cr.result=void 0,Cr.target||(Cr.target=Ar),Pr=null==Pr?[Cr]:Vn.makeArray(Pr,[Cr]),Nr=Vn.event.special[Br]||{},Mr||!Nr.trigger||!1!==Nr.trigger.apply(Ar,Pr))){if(!Mr&&!Nr.noBubble&&!Vn.isWindow(Ar)){for(Or=Nr.delegateType||Br,tr.test(Or+Br)||(Ir=Ir.parentNode);Ir;Ir=Ir.parentNode)Fr.push(Ir),Dr=Ir;Dr===(Ar.ownerDocument||kn)&&Fr.push(Dr.defaultView||Dr.parentWindow||Bt)}for(Rr=0;(Ir=Fr[Rr++])&&!Cr.isPropagationStopped();)Cr.type=1<Rr?Or:Nr.bindType||Br,(kr=(ha.get(Ir,"events")||{})[Cr.type]&&ha.get(Ir,"handle"))&&kr.apply(Ir,Pr),(kr=Lr&&Ir[Lr])&&kr.apply&&ca(Ir)&&(Cr.result=kr.apply(Ir,Pr),!1===Cr.result&&Cr.preventDefault());return Cr.type=Br,Mr||Cr.isDefaultPrevented()||Nr._default&&!1!==Nr._default.apply(Fr.pop(),Pr)||!ca(Ar)||Lr&&Vn.isFunction(Ar[Br])&&!Vn.isWindow(Ar)&&((Dr=Ar[Lr])&&(Ar[Lr]=null),Vn.event.triggered=Br,Ar[Br](),Vn.event.triggered=void 0,Dr&&(Ar[Lr]=Dr)),Cr.result}},simulate:function(Cr,Pr,Ar){var Mr=Vn.extend(new Vn.Event,Ar,{type:Cr,isSimulated:!0});Vn.event.trigger(Mr,null,Pr)}}),Vn.fn.extend({trigger:function(Cr,Pr){return this.each(function(){Vn.event.trigger(Cr,Pr,this)})},triggerHandler:function(Cr,Pr){var Ar=this[0];if(Ar)return Vn.event.trigger(Cr,Pr,Ar,!0)}}),Vn.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(Cr,Pr){Vn.fn[Pr]=function(Ar,Mr){return 0<arguments.length?this.on(Pr,null,Ar,Mr):this.trigger(Pr)}}),Vn.fn.extend({hover:function(Cr,Pr){return this.mouseenter(Cr).mouseleave(Pr||Cr)}}),zn.focusin="onfocusin"in Bt,zn.focusin||Vn.each({focus:"focusin",blur:"focusout"},function(Cr,Pr){var Ar=function(Mr){Vn.event.simulate(Pr,Mr.target,Vn.event.fix(Mr))};Vn.event.special[Pr]={setup:function(){var Mr=this.ownerDocument||this,Rr=ha.access(Mr,Pr);Rr||Mr.addEventListener(Cr,Ar,!0),ha.access(Mr,Pr,(Rr||0)+1)},teardown:function(){var Mr=this.ownerDocument||this,Rr=ha.access(Mr,Pr)-1;Rr?ha.access(Mr,Pr,Rr):(Mr.removeEventListener(Cr,Ar,!0),ha.remove(Mr,Pr))}}});var nr=Bt.location,ar=Vn.now(),rr=/\?/;Vn.parseXML=function(Cr){var Pr;if(!Cr||"string"!=typeof Cr)return null;try{Pr=new Bt.DOMParser().parseFromString(Cr,"text/xml")}catch(Ar){Pr=void 0}return Pr&&!Pr.getElementsByTagName("parsererror").length||Vn.error("Invalid XML: "+Cr),Pr};var ir=/\[\]$/,or=/\r?\n/g,sr=/^(?:submit|button|image|reset|file)$/i,dr=/^(?:input|select|textarea|keygen)/i;Vn.param=function(Cr,Pr){var Mr=[],Rr=function(Ir,Dr){var Or=Vn.isFunction(Dr)?Dr():Dr;Mr[Mr.length]=encodeURIComponent(Ir)+"="+encodeURIComponent(null==Or?"":Or)},Ar;if(Array.isArray(Cr)||Cr.jquery&&!Vn.isPlainObject(Cr))Vn.each(Cr,function(){Rr(this.name,this.value)});else for(Ar in Cr)Rn(Ar,Cr[Ar],Pr,Rr);return Mr.join("&")},Vn.fn.extend({serialize:function(){return Vn.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var Cr=Vn.prop(this,"elements");return Cr?Vn.makeArray(Cr):this}).filter(function(){var Cr=this.type;return this.name&&!Vn(this).is(":disabled")&&dr.test(this.nodeName)&&!sr.test(Cr)&&(this.checked||!Ea.test(Cr))}).map(function(Cr,Pr){var Ar=Vn(this).val();return null==Ar?null:Array.isArray(Ar)?Vn.map(Ar,function(Mr){return{name:Pr.name,value:Mr.replace(or,"\r\n")}}):{name:Pr.name,value:Ar.replace(or,"\r\n")}}).get()}});var lr=/%20/g,ur=/#.*$/,pr=/([?&])_=[^&]*/,cr=/^(.*?):[ \t]*([^\r\n]*)$/gm,fr=/^(?:GET|HEAD)$/,gr=/^\/\//,mr={},yr={},_r="*/".concat("*"),br=kn.createElement("a");br.href=nr.href,Vn.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:nr.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(nr.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":_r,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Vn.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(Cr,Pr){return Pr?On(On(Cr,Vn.ajaxSettings),Pr):On(Vn.ajaxSettings,Cr)},ajaxPrefilter:In(mr),ajaxTransport:In(yr),ajax:function(Cr,Pr){function Ar(Kr,Zr,Qr,Jr){var ri=Zr,$r,ei,ti,ni,ai;kr||(kr=!0,Or&&Bt.clearTimeout(Or),Mr=void 0,Ir=Jr||"",qr.readyState=0<Kr?4:0,$r=200<=Kr&&300>Kr||304===Kr,Qr&&(ni=function(ii,oi,si){for(var ci=ii.contents,hi=ii.dataTypes,di,li,ui,pi;"*"===hi[0];)hi.shift(),void 0===di&&(di=ii.mimeType||oi.getResponseHeader("Content-Type"));if(di)for(li in ci)if(ci[li]&&ci[li].test(di)){hi.unshift(li);break}if(hi[0]in si)ui=hi[0];else{for(li in si){if(!hi[0]||ii.converters[li+" "+hi[0]]){ui=li;break}pi||(pi=li)}ui=ui||pi}return ui?(ui!==hi[0]&&hi.unshift(ui),si[ui]):void 0}(Ur,qr,Qr)),ni=function(ii,oi,si,di){var fi={},gi=ii.dataTypes.slice(),li,ui,pi,ci,hi;if(gi[1])for(pi in ii.converters)fi[pi.toLowerCase()]=ii.converters[pi];for(ui=gi.shift();ui;)if(ii.responseFields[ui]&&(si[ii.responseFields[ui]]=oi),!hi&&di&&ii.dataFilter&&(oi=ii.dataFilter(oi,ii.dataType)),hi=ui,ui=gi.shift())if("*"===ui)ui=hi;else if("*"!==hi&&hi!==ui){if(!(pi=fi[hi+" "+ui]||fi["* "+ui]))for(li in fi)if((ci=li.split(" "))[1]===ui&&(pi=fi[hi+" "+ci[0]]||fi["* "+ci[0]])){!0===pi?pi=fi[li]:!0!==fi[li]&&(ui=ci[0],gi.unshift(ci[1]));break}if(!0!==pi)if(pi&&ii.throws)oi=pi(oi);else try{oi=pi(oi)}catch(mi){return{state:"parsererror",error:pi?mi:"No conversion from "+hi+" to "+ui}}}return{state:"success",data:oi}}(Ur,ni,qr,$r),$r?(Ur.ifModified&&((ai=qr.getResponseHeader("Last-Modified"))&&(Vn.lastModified[Rr]=ai),(ai=qr.getResponseHeader("etag"))&&(Vn.etag[Rr]=ai)),204===Kr||"HEAD"===Ur.type?ri="nocontent":304===Kr?ri="notmodified":(ri=ni.state,ei=ni.data,$r=!(ti=ni.error))):(ti=ri,!Kr&&ri||(ri="error",0>Kr&&(Kr=0))),qr.status=Kr,qr.statusText=(Zr||ri)+"",$r?Yr.resolveWith(Xr,[ei,ri,qr]):Yr.rejectWith(Xr,[qr,ri,ti]),qr.statusCode(jr),jr=void 0,Nr&&Gr.trigger($r?"ajaxSuccess":"ajaxError",[qr,Ur,$r?ei:ti]),Hr.fireWith(Xr,[qr,ri]),Nr&&(Gr.trigger("ajaxComplete",[qr,Ur]),--Vn.active||Vn.event.trigger("ajaxStop")))}"object"==typeof Cr&&(Pr=Cr,Cr=void 0),Pr=Pr||{};var Ur=Vn.ajaxSetup({},Pr),Xr=Ur.context||Ur,Gr=Ur.context&&(Xr.nodeType||Xr.jquery)?Vn(Xr):Vn.event,Yr=Vn.Deferred(),Hr=Vn.Callbacks("once memory"),jr=Ur.statusCode||{},Wr={},zr={},Vr="canceled",qr={readyState:0,getResponseHeader:function(Kr){var Zr;if(kr){if(!Dr)for(Dr={};Zr=cr.exec(Ir);)Dr[Zr[1].toLowerCase()]=Zr[2];Zr=Dr[Kr.toLowerCase()]}return null==Zr?null:Zr},getAllResponseHeaders:function(){return kr?Ir:null},setRequestHeader:function(Kr,Zr){return null==kr&&(Kr=zr[Kr.toLowerCase()]=zr[Kr.toLowerCase()]||Kr,Wr[Kr]=Zr),this},overrideMimeType:function(Kr){return null==kr&&(Ur.mimeType=Kr),this},statusCode:function(Kr){if(Kr)if(kr)qr.always(Kr[qr.status]);else for(var Zr in Kr)jr[Zr]=[jr[Zr],Kr[Zr]];return this},abort:function(Kr){var Zr=Kr||Vr;return Mr&&Mr.abort(Zr),Ar(0,Zr),this}},Mr,Rr,Ir,Dr,Or,Lr,kr,Nr,Fr,Br;if(Yr.promise(qr),Ur.url=((Cr||Ur.url||nr.href)+"").replace(gr,nr.protocol+"//"),Ur.type=Pr.method||Pr.type||Ur.method||Ur.type,Ur.dataTypes=(Ur.dataType||"*").toLowerCase().match(da)||[""],null==Ur.crossDomain){Lr=kn.createElement("a");try{Lr.href=Ur.url,Lr.href=Lr.href,Ur.crossDomain=br.protocol+"//"+br.host!=Lr.protocol+"//"+Lr.host}catch(Kr){Ur.crossDomain=!0}}if(Ur.data&&Ur.processData&&"string"!=typeof Ur.data&&(Ur.data=Vn.param(Ur.data,Ur.traditional)),Dn(mr,Ur,Pr,qr),kr)return qr;for(Fr in(Nr=Vn.event&&Ur.global)&&0==Vn.active++&&Vn.event.trigger("ajaxStart"),Ur.type=Ur.type.toUpperCase(),Ur.hasContent=!fr.test(Ur.type),Rr=Ur.url.replace(ur,""),Ur.hasContent?Ur.data&&Ur.processData&&0===(Ur.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Ur.data=Ur.data.replace(lr,"+")):(Br=Ur.url.slice(Rr.length),Ur.data&&(Rr+=(rr.test(Rr)?"&":"?")+Ur.data,delete Ur.data),!1===Ur.cache&&(Rr=Rr.replace(pr,"$1"),Br=(rr.test(Rr)?"&":"?")+"_="+ar++ +Br),Ur.url=Rr+Br),Ur.ifModified&&(Vn.lastModified[Rr]&&qr.setRequestHeader("If-Modified-Since",Vn.lastModified[Rr]),Vn.etag[Rr]&&qr.setRequestHeader("If-None-Match",Vn.etag[Rr])),(Ur.data&&Ur.hasContent&&!1!==Ur.contentType||Pr.contentType)&&qr.setRequestHeader("Content-Type",Ur.contentType),qr.setRequestHeader("Accept",Ur.dataTypes[0]&&Ur.accepts[Ur.dataTypes[0]]?Ur.accepts[Ur.dataTypes[0]]+("*"===Ur.dataTypes[0]?"":", "+_r+"; q=0.01"):Ur.accepts["*"]),Ur.headers)qr.setRequestHeader(Fr,Ur.headers[Fr]);if(Ur.beforeSend&&(!1===Ur.beforeSend.call(Xr,qr,Ur)||kr))return qr.abort();if(Vr="abort",Hr.add(Ur.complete),qr.done(Ur.success),qr.fail(Ur.error),Mr=Dn(yr,Ur,Pr,qr)){if(qr.readyState=1,Nr&&Gr.trigger("ajaxSend",[qr,Ur]),kr)return qr;Ur.async&&0<Ur.timeout&&(Or=Bt.setTimeout(function(){qr.abort("timeout")},Ur.timeout));try{kr=!1,Mr.send(Wr,Ar)}catch(Kr){if(kr)throw Kr;Ar(-1,Kr)}}else Ar(-1,"No Transport");return qr},getJSON:function(Cr,Pr,Ar){return Vn.get(Cr,Pr,Ar,"json")},getScript:function(Cr,Pr){return Vn.get(Cr,void 0,Pr,"script")}}),Vn.each(["get","post"],function(Cr,Pr){Vn[Pr]=function(Ar,Mr,Rr,Ir){return Vn.isFunction(Mr)&&(Ir=Ir||Rr,Rr=Mr,Mr=void 0),Vn.ajax(Vn.extend({url:Ar,type:Pr,dataType:Ir,data:Mr,success:Rr},Vn.isPlainObject(Ar)&&Ar))}}),Vn._evalUrl=function(Cr){return Vn.ajax({url:Cr,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},Vn.fn.extend({wrapAll:function(Cr){var Pr;return this[0]&&(Vn.isFunction(Cr)&&(Cr=Cr.call(this[0])),Pr=Vn(Cr,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&Pr.insertBefore(this[0]),Pr.map(function(){for(var Ar=this;Ar.firstElementChild;)Ar=Ar.firstElementChild;return Ar}).append(this)),this},wrapInner:function(Cr){return Vn.isFunction(Cr)?this.each(function(Pr){Vn(this).wrapInner(Cr.call(this,Pr))}):this.each(function(){var Pr=Vn(this),Ar=Pr.contents();Ar.length?Ar.wrapAll(Cr):Pr.append(Cr)})},wrap:function(Cr){var Pr=Vn.isFunction(Cr);return this.each(function(Ar){Vn(this).wrapAll(Pr?Cr.call(this,Ar):Cr)})},unwrap:function(Cr){return this.parent(Cr).not("body").each(function(){Vn(this).replaceWith(this.childNodes)}),this}}),Vn.expr.pseudos.hidden=function(Cr){return!Vn.expr.pseudos.visible(Cr)},Vn.expr.pseudos.visible=function(Cr){return!!(Cr.offsetWidth||Cr.offsetHeight||Cr.getClientRects().length)},Vn.ajaxSettings.xhr=function(){try{return new Bt.XMLHttpRequest}catch(Cr){}};var xr={0:200,1223:204},vr=Vn.ajaxSettings.xhr();zn.cors=!!vr&&"withCredentials"in vr,zn.ajax=vr=!!vr,Vn.ajaxTransport(function(Cr){var Pr,Ar;if(zn.cors||vr&&!Cr.crossDomain)return{send:function(Mr,Rr){var Dr=Cr.xhr(),Ir;if(Dr.open(Cr.type,Cr.url,Cr.async,Cr.username,Cr.password),Cr.xhrFields)for(Ir in Cr.xhrFields)Dr[Ir]=Cr.xhrFields[Ir];for(Ir in Cr.mimeType&&Dr.overrideMimeType&&Dr.overrideMimeType(Cr.mimeType),Cr.crossDomain||Mr["X-Requested-With"]||(Mr["X-Requested-With"]="XMLHttpRequest"),Mr)Dr.setRequestHeader(Ir,Mr[Ir]);Pr=function(Or){return function(){Pr&&(Pr=Ar=Dr.onload=Dr.onerror=Dr.onabort=Dr.onreadystatechange=null,"abort"===Or?Dr.abort():"error"===Or?"number"==typeof Dr.status?Rr(Dr.status,Dr.statusText):Rr(0,"error"):Rr(xr[Dr.status]||Dr.status,Dr.statusText,"text"!==(Dr.responseType||"text")||"string"!=typeof Dr.responseText?{binary:Dr.response}:{text:Dr.responseText},Dr.getAllResponseHeaders()))}},Dr.onload=Pr(),Ar=Dr.onerror=Pr("error"),void 0===Dr.onabort?Dr.onreadystatechange=function(){4===Dr.readyState&&Bt.setTimeout(function(){Pr&&Ar()})}:Dr.onabort=Ar,Pr=Pr("abort");try{Dr.send(Cr.hasContent&&Cr.data||null)}catch(Or){if(Pr)throw Or}},abort:function(){Pr&&Pr()}}}),Vn.ajaxPrefilter(function(Cr){Cr.crossDomain&&(Cr.contents.script=!1)}),Vn.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(Cr){return Vn.globalEval(Cr),Cr}}}),Vn.ajaxPrefilter("script",function(Cr){void 0===Cr.cache&&(Cr.cache=!1),Cr.crossDomain&&(Cr.type="GET")}),Vn.ajaxTransport("script",function(Cr){if(Cr.crossDomain){var Pr,Ar;return{send:function(Mr,Rr){Pr=Vn("<script>").prop({charset:Cr.scriptCharset,src:Cr.url}).on("load error",Ar=function(Ir){Pr.remove(),Ar=null,Ir&&Rr("error"===Ir.type?404:200,Ir.type)}),kn.head.appendChild(Pr[0])},abort:function(){Ar&&Ar()}}}});var Tr=[],Er=/(=)\?(?=&|$)|\?\?/;Vn.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var Cr=Tr.pop()||Vn.expando+"_"+ar++;return this[Cr]=!0,Cr}}),Vn.ajaxPrefilter("json jsonp",function(Cr,Pr,Ar){var Dr=!1!==Cr.jsonp&&(Er.test(Cr.url)?"url":"string"==typeof Cr.data&&0===(Cr.contentType||"").indexOf("application/x-www-form-urlencoded")&&Er.test(Cr.data)&&"data"),Mr,Rr,Ir;if(Dr||"jsonp"===Cr.dataTypes[0])return Mr=Cr.jsonpCallback=Vn.isFunction(Cr.jsonpCallback)?Cr.jsonpCallback():Cr.jsonpCallback,Dr?Cr[Dr]=Cr[Dr].replace(Er,"$1"+Mr):!1!==Cr.jsonp&&(Cr.url+=(rr.test(Cr.url)?"&":"?")+Cr.jsonp+"="+Mr),Cr.converters["script json"]=function(){return Ir||Vn.error(Mr+" was not called"),Ir[0]},Cr.dataTypes[0]="json",Rr=Bt[Mr],Bt[Mr]=function(){Ir=arguments},Ar.always(function(){void 0===Rr?Vn(Bt).removeProp(Mr):Bt[Mr]=Rr,Cr[Mr]&&(Cr.jsonpCallback=Pr.jsonpCallback,Tr.push(Mr)),Ir&&Vn.isFunction(Rr)&&Rr(Ir[0]),Ir=Rr=void 0}),"script"}),zn.createHTMLDocument=function(){var Cr=kn.implementation.createHTMLDocument("").body;return Cr.innerHTML="<form></form><form></form>",2===Cr.childNodes.length}(),Vn.parseHTML=function(Cr,Pr,Ar){if("string"!=typeof Cr)return[];"boolean"==typeof Pr&&(Ar=Pr,Pr=!1);var Mr,Rr,Ir;return Pr||(zn.createHTMLDocument?((Mr=(Pr=kn.implementation.createHTMLDocument("")).createElement("base")).href=kn.location.href,Pr.head.appendChild(Mr)):Pr=kn),Rr=na.exec(Cr),Ir=!Ar&&[],Rr?[Pr.createElement(Rr[1])]:(Rr=an([Cr],Pr,Ir),Ir&&Ir.length&&Vn(Ir).remove(),Vn.merge([],Rr.childNodes))},Vn.fn.load=function(Cr,Pr,Ar){var Dr=this,Or=Cr.indexOf(" "),Mr,Rr,Ir;return-1<Or&&(Mr=An(Cr.slice(Or)),Cr=Cr.slice(0,Or)),Vn.isFunction(Pr)?(Ar=Pr,Pr=void 0):Pr&&"object"==typeof Pr&&(Rr="POST"),0<Dr.length&&Vn.ajax({url:Cr,type:Rr||"GET",dataType:"html",data:Pr}).done(function(Lr){Ir=arguments,Dr.html(Mr?Vn("<div>").append(Vn.parseHTML(Lr)).find(Mr):Lr)}).always(Ar&&function(Lr,kr){Dr.each(function(){Ar.apply(this,Ir||[Lr.responseText,kr,Lr])})}),this},Vn.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(Cr,Pr){Vn.fn[Pr]=function(Ar){return this.on(Pr,Ar)}}),Vn.expr.pseudos.animated=function(Cr){return Vn.grep(Vn.timers,function(Pr){return Cr===Pr.elem}).length},Vn.offset={setOffset:function(Cr,Pr,Ar){var kr=Vn.css(Cr,"position"),Nr=Vn(Cr),Fr={},Mr,Rr,Ir,Dr,Or,Lr;"static"===kr&&(Cr.style.position="relative"),Or=Nr.offset(),Ir=Vn.css(Cr,"top"),Lr=Vn.css(Cr,"left"),("absolute"===kr||"fixed"===kr)&&-1<(Ir+Lr).indexOf("auto")?(Dr=(Mr=Nr.position()).top,Rr=Mr.left):(Dr=parseFloat(Ir)||0,Rr=parseFloat(Lr)||0),Vn.isFunction(Pr)&&(Pr=Pr.call(Cr,Ar,Vn.extend({},Or))),null!=Pr.top&&(Fr.top=Pr.top-Or.top+Dr),null!=Pr.left&&(Fr.left=Pr.left-Or.left+Rr),"using"in Pr?Pr.using.call(Cr,Fr):Nr.css(Fr)}},Vn.fn.extend({offset:function(Cr){if(arguments.length)return void 0===Cr?this:this.each(function(Dr){Vn.offset.setOffset(this,Cr,Dr)});var Ir=this[0],Pr,Ar,Mr,Rr;if(Ir)return Ir.getClientRects().length?(Mr=Ir.getBoundingClientRect(),Pr=Ir.ownerDocument,Ar=Pr.documentElement,Rr=Pr.defaultView,{top:Mr.top+Rr.pageYOffset-Ar.clientTop,left:Mr.left+Rr.pageXOffset-Ar.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var Ar=this[0],Mr={top:0,left:0},Cr,Pr;return"fixed"===Vn.css(Ar,"position")?Pr=Ar.getBoundingClientRect():(Cr=this.offsetParent(),Pr=this.offset(),Ht(Cr[0],"html")||(Mr=Cr.offset()),Mr={top:Mr.top+Vn.css(Cr[0],"borderTopWidth",!0),left:Mr.left+Vn.css(Cr[0],"borderLeftWidth",!0)}),{top:Pr.top-Mr.top-Vn.css(Ar,"marginTop",!0),left:Pr.left-Mr.left-Vn.css(Ar,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var Cr=this.offsetParent;Cr&&"static"===Vn.css(Cr,"position");)Cr=Cr.offsetParent;return Cr||Aa})}}),Vn.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(Cr,Pr){var Ar="pageYOffset"===Pr;Vn.fn[Cr]=function(Mr){return pa(this,function(Rr,Ir,Dr){var Or;return(Vn.isWindow(Rr)?Or=Rr:9===Rr.nodeType&&(Or=Rr.defaultView),void 0===Dr)?Or?Or[Pr]:Rr[Ir]:void(Or?Or.scrollTo(Ar?Or.pageXOffset:Dr,Ar?Dr:Or.pageYOffset):Rr[Ir]=Dr)},Cr,Mr,arguments.length)}}),Vn.each(["top","left"],function(Cr,Pr){Vn.cssHooks[Pr]=yn(zn.pixelPosition,function(Ar,Mr){if(Mr)return Mr=mn(Ar,Pr),Ba.test(Mr)?Vn(Ar).position()[Pr]+"px":Mr})}),Vn.each({Height:"height",Width:"width"},function(Cr,Pr){Vn.each({padding:"inner"+Cr,content:Pr,"":"outer"+Cr},function(Ar,Mr){Vn.fn[Mr]=function(Rr,Ir){var Dr=arguments.length&&(Ar||"boolean"!=typeof Rr),Or=Ar||(!0===Rr||!0===Ir?"margin":"border");return pa(this,function(Lr,kr,Nr){var Fr;return Vn.isWindow(Lr)?0===Mr.indexOf("outer")?Lr["inner"+Cr]:Lr.document.documentElement["client"+Cr]:9===Lr.nodeType?(Fr=Lr.documentElement,Math.max(Lr.body["scroll"+Cr],Fr["scroll"+Cr],Lr.body["offset"+Cr],Fr["offset"+Cr],Fr["client"+Cr])):void 0===Nr?Vn.css(Lr,kr,Or):Vn.style(Lr,kr,Nr,Or)},Pr,Dr?Rr:void 0,Dr)}})}),Vn.fn.extend({bind:function(Cr,Pr,Ar){return this.on(Cr,null,Pr,Ar)},unbind:function(Cr,Pr){return this.off(Cr,null,Pr)},delegate:function(Cr,Pr,Ar,Mr){return this.on(Pr,Cr,Ar,Mr)},undelegate:function(Cr,Pr,Ar){return 1===arguments.length?this.off(Cr,"**"):this.off(Pr,Cr||"**",Ar)}}),Vn.holdReady=function(Cr){Cr?Vn.readyWait++:Vn.ready(!0)},Vn.isArray=Array.isArray,Vn.parseJSON=JSON.parse,Vn.nodeName=Ht,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Vn});var Sr=Bt.jQuery,wr=Bt.$;return Vn.noConflict=function(Cr){return Bt.$===Vn&&(Bt.$=wr),Cr&&Bt.jQuery===Vn&&(Bt.jQuery=Sr),Vn},Xt||(Bt.jQuery=Bt.$=Vn),Vn}),function Bt(Xt,Gt,Yt){function Ht(zt,Vt){if(!Gt[zt]){if(!Xt[zt]){var qt="function"==typeof require&&require;if(!Vt&&qt)return qt(zt,!0);if(jt)return jt(zt,!0);var Kt=new Error("Cannot find module '"+zt+"'");throw Kt.code="MODULE_NOT_FOUND",Kt}var Zt=Gt[zt]={exports:{}};Xt[zt][0].call(Zt.exports,function(Qt){var Jt=Xt[zt][1][Qt];return Ht(Jt||Qt)},Zt,Zt.exports,Bt,Xt,Gt,Yt)}return Gt[zt].exports}for(var jt="function"==typeof require&&require,Wt=0;Wt<Yt.length;Wt++)Ht(Yt[Wt]);return Ht}({1:[function(Bt,Xt){function Yt(zt){zt.fn.perfectScrollbar=function(Vt){return this.each(function(){if("object"==typeof Vt||void 0===Vt){jt.get(this)||Ht.initialize(this,Vt)}else{var Kt=Vt;"update"===Kt?Ht.update(this):"destroy"===Kt&&Ht.destroy(this)}})}}var Ht=Bt("../main"),jt=Bt("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],Yt);else{var Wt=window.jQuery?window.jQuery:window.$;void 0!==Wt&&Yt(Wt)}Xt.exports=Yt},{"../main":6,"../plugin/instances":17}],2:[function(Bt,Xt){var Yt={};Yt.create=function(Ht,jt){var Wt=document.createElement(Ht);return Wt.className=jt,Wt},Yt.appendTo=function(Ht,jt){return jt.appendChild(Ht),Ht},Yt.css=function(Ht,jt,Wt){return"object"==typeof jt?function(zt,Vt){for(var qt in Vt){var Kt=Vt[qt];"number"==typeof Kt&&(Kt=Kt.toString()+"px"),zt.style[qt]=Kt}return zt}(Ht,jt):void 0===Wt?function(zt,Vt){return window.getComputedStyle(zt)[Vt]}(Ht,jt):function(zt,Vt,qt){return"number"==typeof qt&&(qt=qt.toString()+"px"),zt.style[Vt]=qt,zt}(Ht,jt,Wt)},Yt.matches=function(Ht,jt){return void 0===Ht.matches?Ht.msMatchesSelector(jt):Ht.matches(jt)},Yt.remove=function(Ht){void 0===Ht.remove?Ht.parentNode&&Ht.parentNode.removeChild(Ht):Ht.remove()},Yt.queryChildren=function(Ht,jt){return Array.prototype.filter.call(Ht.childNodes,function(Wt){return Yt.matches(Wt,jt)})},Xt.exports=Yt},{}],3:[function(Bt,Xt){var Yt=function(jt){this.element=jt,this.events={}};Yt.prototype.bind=function(jt,Wt){void 0===this.events[jt]&&(this.events[jt]=[]),this.events[jt].push(Wt),this.element.addEventListener(jt,Wt,!1)},Yt.prototype.unbind=function(jt,Wt){this.events[jt]=this.events[jt].filter(function(Vt){return void 0!==Wt&&Vt!==Wt||(this.element.removeEventListener(jt,Vt,!1),!1)},this)},Yt.prototype.unbindAll=function(){for(var jt in this.events)this.unbind(jt)};var Ht=function(){this.eventElements=[]};Ht.prototype.eventElement=function(jt){var Wt=this.eventElements.filter(function(zt){return zt.element===jt})[0];return void 0===Wt&&(Wt=new Yt(jt),this.eventElements.push(Wt)),Wt},Ht.prototype.bind=function(jt,Wt,zt){this.eventElement(jt).bind(Wt,zt)},Ht.prototype.unbind=function(jt,Wt,zt){this.eventElement(jt).unbind(Wt,zt)},Ht.prototype.unbindAll=function(){for(var jt=0;jt<this.eventElements.length;jt++)this.eventElements[jt].unbindAll()},Ht.prototype.once=function(jt,Wt,zt){var Vt=this.eventElement(jt),qt=function(Kt){Vt.unbind(Wt,qt),zt(Kt)};Vt.bind(Wt,qt)},Xt.exports=Ht},{}],4:[function(Bt,Xt){Xt.exports=function(){function Yt(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return Yt()+Yt()+"-"+Yt()+"-"+Yt()+"-"+Yt()+"-"+Yt()+Yt()+Yt()}}()},{}],5:[function(Bt,Xt,Gt){function Yt(Wt){var zt;return zt=void 0===Wt?["ps--x","ps--y"]:["ps--"+Wt],["ps--in-scrolling"].concat(zt)}var Ht=Bt("./dom"),jt=Gt.toInt=function(Wt){return parseInt(Wt,10)||0};Gt.isEditable=function(Wt){return Ht.matches(Wt,"input,[contenteditable]")||Ht.matches(Wt,"select,[contenteditable]")||Ht.matches(Wt,"textarea,[contenteditable]")||Ht.matches(Wt,"button,[contenteditable]")},Gt.removePsClasses=function(Wt){for(var zt=0,Vt;zt<Wt.classList.length;zt++)Vt=Wt.classList[zt],0===Vt.indexOf("ps-")&&Wt.classList.remove(Vt)},Gt.outerWidth=function(Wt){return jt(Ht.css(Wt,"width"))+jt(Ht.css(Wt,"paddingLeft"))+jt(Ht.css(Wt,"paddingRight"))+jt(Ht.css(Wt,"borderLeftWidth"))+jt(Ht.css(Wt,"borderRightWidth"))},Gt.startScrolling=function(Wt,zt){for(var Vt=Yt(zt),qt=0;qt<Vt.length;qt++)Wt.classList.add(Vt[qt])},Gt.stopScrolling=function(Wt,zt){for(var Vt=Yt(zt),qt=0;qt<Vt.length;qt++)Wt.classList.remove(Vt[qt])},Gt.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},{"./dom":2}],6:[function(Bt,Xt){var Yt=Bt("./plugin/destroy"),Ht=Bt("./plugin/initialize"),jt=Bt("./plugin/update");Xt.exports={initialize:Ht,update:jt,destroy:Yt}},{"./plugin/destroy":8,"./plugin/initialize":16,"./plugin/update":20}],7:[function(Bt,Xt){Xt.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},{}],8:[function(Bt,Xt){var Yt=Bt("../lib/helper"),Ht=Bt("../lib/dom"),jt=Bt("./instances");Xt.exports=function(Wt){var zt=jt.get(Wt);zt&&(zt.event.unbindAll(),Ht.remove(zt.scrollbarX),Ht.remove(zt.scrollbarY),Ht.remove(zt.scrollbarXRail),Ht.remove(zt.scrollbarYRail),Yt.removePsClasses(Wt),jt.remove(Wt))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17}],9:[function(Bt,Xt){var Yt=Bt("../instances"),Ht=Bt("../update-geometry"),jt=Bt("../update-scroll");Xt.exports=function(Wt){!function(zt,Vt){function qt(Zt){return Zt.getBoundingClientRect()}var Kt=function(Zt){Zt.stopPropagation()};Vt.event.bind(Vt.scrollbarY,"click",Kt),Vt.event.bind(Vt.scrollbarYRail,"click",function(Zt){var Qt=Zt.pageY-window.pageYOffset-qt(Vt.scrollbarYRail).top>Vt.scrollbarYTop?1:-1;jt(zt,"top",zt.scrollTop+Qt*Vt.containerHeight),Ht(zt),Zt.stopPropagation()}),Vt.event.bind(Vt.scrollbarX,"click",Kt),Vt.event.bind(Vt.scrollbarXRail,"click",function(Zt){var Qt=Zt.pageX-window.pageXOffset-qt(Vt.scrollbarXRail).left>Vt.scrollbarXLeft?1:-1;jt(zt,"left",zt.scrollLeft+Qt*Vt.containerWidth),Ht(zt),Zt.stopPropagation()})}(Wt,Yt.get(Wt))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],10:[function(Bt,Xt){function Yt(Kt,Zt){var Qt=null,Jt=null,$t=function(tn){!function(nn){var an=Qt+nn*Zt.railXRatio,rn=Math.max(0,Zt.scrollbarXRail.getBoundingClientRect().left)+Zt.railXRatio*(Zt.railXWidth-Zt.scrollbarXWidth);Zt.scrollbarXLeft=0>an?0:an>rn?rn:an;var on=jt.toInt(Zt.scrollbarXLeft*(Zt.contentWidth-Zt.containerWidth)/(Zt.containerWidth-Zt.railXRatio*Zt.scrollbarXWidth))-Zt.negativeScrollAdjustment;qt(Kt,"left",on)}(tn.pageX-Jt),Vt(Kt),tn.stopPropagation(),tn.preventDefault()},en=function(){jt.stopScrolling(Kt,"x"),Zt.event.unbind(Zt.ownerDocument,"mousemove",$t)};Zt.event.bind(Zt.scrollbarX,"mousedown",function(tn){Jt=tn.pageX,Qt=jt.toInt(Wt.css(Zt.scrollbarX,"left"))*Zt.railXRatio,jt.startScrolling(Kt,"x"),Zt.event.bind(Zt.ownerDocument,"mousemove",$t),Zt.event.once(Zt.ownerDocument,"mouseup",en),tn.stopPropagation(),tn.preventDefault()})}function Ht(Kt,Zt){var Qt=null,Jt=null,$t=function(tn){!function(nn){var an=Qt+nn*Zt.railYRatio,rn=Math.max(0,Zt.scrollbarYRail.getBoundingClientRect().top)+Zt.railYRatio*(Zt.railYHeight-Zt.scrollbarYHeight);Zt.scrollbarYTop=0>an?0:an>rn?rn:an;var on=jt.toInt(Zt.scrollbarYTop*(Zt.contentHeight-Zt.containerHeight)/(Zt.containerHeight-Zt.railYRatio*Zt.scrollbarYHeight));qt(Kt,"top",on)}(tn.pageY-Jt),Vt(Kt),tn.stopPropagation(),tn.preventDefault()},en=function(){jt.stopScrolling(Kt,"y"),Zt.event.unbind(Zt.ownerDocument,"mousemove",$t)};Zt.event.bind(Zt.scrollbarY,"mousedown",function(tn){Jt=tn.pageY,Qt=jt.toInt(Wt.css(Zt.scrollbarY,"top"))*Zt.railYRatio,jt.startScrolling(Kt,"y"),Zt.event.bind(Zt.ownerDocument,"mousemove",$t),Zt.event.once(Zt.ownerDocument,"mouseup",en),tn.stopPropagation(),tn.preventDefault()})}var jt=Bt("../../lib/helper"),Wt=Bt("../../lib/dom"),zt=Bt("../instances"),Vt=Bt("../update-geometry"),qt=Bt("../update-scroll");Xt.exports=function(Kt){var Zt=zt.get(Kt);Yt(Kt,Zt),Ht(Kt,Zt)}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],11:[function(Bt,Xt){function Yt(qt,Kt){var Zt=!1;Kt.event.bind(qt,"mouseenter",function(){Zt=!0}),Kt.event.bind(qt,"mouseleave",function(){Zt=!1});var Qt=!1;Kt.event.bind(Kt.ownerDocument,"keydown",function(Jt){if(!(Jt.isDefaultPrevented&&Jt.isDefaultPrevented()||Jt.defaultPrevented)){var $t=jt.matches(Kt.scrollbarX,":focus")||jt.matches(Kt.scrollbarY,":focus");if(Zt||$t){var en=document.activeElement?document.activeElement:Kt.ownerDocument.activeElement;if(en){if("IFRAME"===en.tagName)en=en.contentDocument.activeElement;else for(;en.shadowRoot;)en=en.shadowRoot.activeElement;if(Ht.isEditable(en))return}var tn=0,nn=0;switch(Jt.which){case 37:tn=Jt.metaKey?-Kt.contentWidth:Jt.altKey?-Kt.containerWidth:-30;break;case 38:nn=Jt.metaKey?Kt.contentHeight:Jt.altKey?Kt.containerHeight:30;break;case 39:tn=Jt.metaKey?Kt.contentWidth:Jt.altKey?Kt.containerWidth:30;break;case 40:nn=Jt.metaKey?-Kt.contentHeight:Jt.altKey?-Kt.containerHeight:-30;break;case 33:nn=90;break;case 32:nn=Jt.shiftKey?90:-90;break;case 34:nn=-90;break;case 35:nn=Jt.ctrlKey?-Kt.contentHeight:-Kt.containerHeight;break;case 36:nn=Jt.ctrlKey?qt.scrollTop:Kt.containerHeight;break;default:return;}Vt(qt,"top",qt.scrollTop-nn),Vt(qt,"left",qt.scrollLeft+tn),zt(qt),(Qt=function(an,rn){var on=qt.scrollTop;if(0===an){if(!Kt.scrollbarYActive)return!1;if(0===on&&0<rn||on>=Kt.contentHeight-Kt.containerHeight&&0>rn)return!Kt.settings.wheelPropagation}var sn=qt.scrollLeft;if(0===rn){if(!Kt.scrollbarXActive)return!1;if(0===sn&&0>an||sn>=Kt.contentWidth-Kt.containerWidth&&0<an)return!Kt.settings.wheelPropagation}return!0}(tn,nn))&&Jt.preventDefault()}}})}var Ht=Bt("../../lib/helper"),jt=Bt("../../lib/dom"),Wt=Bt("../instances"),zt=Bt("../update-geometry"),Vt=Bt("../update-scroll");Xt.exports=function(qt){Yt(qt,Wt.get(qt))}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],12:[function(Bt,Xt){function Yt(zt,Vt){function qt(Zt){var Qt=function(en){var tn=en.deltaX,nn=-1*en.deltaY;return void 0!==tn&&void 0!==nn||(tn=-1*en.wheelDeltaX/6,nn=en.wheelDeltaY/6),en.deltaMode&&1===en.deltaMode&&(tn*=10,nn*=10),tn!=tn&&nn!=nn&&(tn=0,nn=en.wheelDelta),en.shiftKey?[-nn,-tn]:[tn,nn]}(Zt),Jt=Qt[0],$t=Qt[1];(function(en,tn){var nn=zt.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(nn){var an=window.getComputedStyle(nn);if(![an.overflow,an.overflowX,an.overflowY].join("").match(/(scroll|auto)/))return!1;var rn=nn.scrollHeight-nn.clientHeight;if(0<rn&&!(0===nn.scrollTop&&0<tn||nn.scrollTop===rn&&0>tn))return!0;var on=nn.scrollLeft-nn.clientWidth;if(0<on&&!(0===nn.scrollLeft&&0>en||nn.scrollLeft===on&&0<en))return!0}return!1})(Jt,$t)||(Kt=!1,Vt.settings.useBothWheelAxes?Vt.scrollbarYActive&&!Vt.scrollbarXActive?($t?Wt(zt,"top",zt.scrollTop-$t*Vt.settings.wheelSpeed):Wt(zt,"top",zt.scrollTop+Jt*Vt.settings.wheelSpeed),Kt=!0):Vt.scrollbarXActive&&!Vt.scrollbarYActive&&(Jt?Wt(zt,"left",zt.scrollLeft+Jt*Vt.settings.wheelSpeed):Wt(zt,"left",zt.scrollLeft-$t*Vt.settings.wheelSpeed),Kt=!0):(Wt(zt,"top",zt.scrollTop-$t*Vt.settings.wheelSpeed),Wt(zt,"left",zt.scrollLeft+Jt*Vt.settings.wheelSpeed)),jt(zt),(Kt=Kt||function(en,tn){var nn=zt.scrollTop;if(0===en){if(!Vt.scrollbarYActive)return!1;if(0===nn&&0<tn||nn>=Vt.contentHeight-Vt.containerHeight&&0>tn)return!Vt.settings.wheelPropagation}var an=zt.scrollLeft;if(0===tn){if(!Vt.scrollbarXActive)return!1;if(0===an&&0>en||an>=Vt.contentWidth-Vt.containerWidth&&0<en)return!Vt.settings.wheelPropagation}return!0}(Jt,$t))&&(Zt.stopPropagation(),Zt.preventDefault()))}var Kt=!1;void 0===window.onwheel?void 0!==window.onmousewheel&&Vt.event.bind(zt,"mousewheel",qt):Vt.event.bind(zt,"wheel",qt)}var Ht=Bt("../instances"),jt=Bt("../update-geometry"),Wt=Bt("../update-scroll");Xt.exports=function(zt){Yt(zt,Ht.get(zt))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],13:[function(Bt,Xt){var Yt=Bt("../instances"),Ht=Bt("../update-geometry");Xt.exports=function(jt){!function(Wt,zt){zt.event.bind(Wt,"scroll",function(){Ht(Wt)})}(jt,Yt.get(jt))}},{"../instances":17,"../update-geometry":18}],14:[function(Bt,Xt){function Yt(Vt,qt){function Kt(){Zt&&(clearInterval(Zt),Zt=null),Ht.stopScrolling(Vt)}var Zt=null,Qt={top:0,left:0},Jt=!1;qt.event.bind(qt.ownerDocument,"selectionchange",function(){Vt.contains(function(){var $t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===$t.toString().length?null:$t.getRangeAt(0).commonAncestorContainer}())?Jt=!0:(Jt=!1,Kt())}),qt.event.bind(window,"mouseup",function(){Jt&&(Jt=!1,Kt())}),qt.event.bind(window,"keyup",function(){Jt&&(Jt=!1,Kt())}),qt.event.bind(window,"mousemove",function($t){if(Jt){var en={x:$t.pageX,y:$t.pageY},tn={left:Vt.offsetLeft,right:Vt.offsetLeft+Vt.offsetWidth,top:Vt.offsetTop,bottom:Vt.offsetTop+Vt.offsetHeight};en.x<tn.left+3?(Qt.left=-5,Ht.startScrolling(Vt,"x")):en.x>tn.right-3?(Qt.left=5,Ht.startScrolling(Vt,"x")):Qt.left=0,en.y<tn.top+3?(Qt.top=5>tn.top+3-en.y?-5:-20,Ht.startScrolling(Vt,"y")):en.y>tn.bottom-3?(Qt.top=5>en.y-tn.bottom+3?5:20,Ht.startScrolling(Vt,"y")):Qt.top=0,0===Qt.top&&0===Qt.left?Kt():Zt||(Zt=setInterval(function(){jt.get(Vt)?(zt(Vt,"top",Vt.scrollTop+Qt.top),zt(Vt,"left",Vt.scrollLeft+Qt.left),Wt(Vt)):clearInterval(Zt)},50))}})}var Ht=Bt("../../lib/helper"),jt=Bt("../instances"),Wt=Bt("../update-geometry"),zt=Bt("../update-scroll");Xt.exports=function(Vt){Yt(Vt,jt.get(Vt))}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],15:[function(Bt,Xt){function Yt(Vt,qt,Kt,Zt){function Qt(cn,hn){zt(Vt,"top",Vt.scrollTop-hn),zt(Vt,"left",Vt.scrollLeft-cn),Wt(Vt)}function Jt(){un=!0}function $t(){un=!1}function en(cn){return cn.targetTouches?cn.targetTouches[0]:cn}function tn(cn){return(!cn.pointerType||"pen"!==cn.pointerType||0!==cn.buttons)&&(cn.targetTouches&&1===cn.targetTouches.length||cn.pointerType&&"mouse"!==cn.pointerType&&cn.pointerType!==cn.MSPOINTER_TYPE_MOUSE)}function nn(cn){if(tn(cn)){pn=!0;var hn=en(cn);on.pageX=hn.pageX,on.pageY=hn.pageY,sn=new Date().getTime(),null!==ln&&clearInterval(ln),cn.stopPropagation()}}function an(cn){if(!pn&&qt.settings.swipePropagation&&nn(cn),!un&&pn&&tn(cn)){var hn=en(cn),fn={pageX:hn.pageX,pageY:hn.pageY},gn=fn.pageX-on.pageX,mn=fn.pageY-on.pageY;Qt(gn,mn),on=fn;var yn=new Date().getTime(),_n=yn-sn;0<_n&&(dn.x=gn/_n,dn.y=mn/_n,sn=yn),function(bn,xn){var vn=Vt.scrollTop,Tn=Vt.scrollLeft,En=Math.abs(bn),Sn=Math.abs(xn);if(Sn>En){if(0>xn&&vn===qt.contentHeight-qt.containerHeight||0<xn&&0===vn)return!qt.settings.swipePropagation;}else if(En>Sn&&(0>bn&&Tn===qt.contentWidth-qt.containerWidth||0<bn&&0===Tn))return!qt.settings.swipePropagation;return!0}(gn,mn)&&(cn.stopPropagation(),cn.preventDefault())}}function rn(){!un&&pn&&(pn=!1,qt.settings.swipeEasing&&(clearInterval(ln),ln=setInterval(function(){jt.get(Vt)&&(dn.x||dn.y)?.01>Math.abs(dn.x)&&.01>Math.abs(dn.y)?clearInterval(ln):(Qt(30*dn.x,30*dn.y),dn.x*=.8,dn.y*=.8):clearInterval(ln)},10)))}var on={},sn=0,dn={},ln=null,un=!1,pn=!1;Kt?(qt.event.bind(window,"touchstart",Jt),qt.event.bind(window,"touchend",$t),qt.event.bind(Vt,"touchstart",nn),qt.event.bind(Vt,"touchmove",an),qt.event.bind(Vt,"touchend",rn)):Zt&&(window.PointerEvent?(qt.event.bind(window,"pointerdown",Jt),qt.event.bind(window,"pointerup",$t),qt.event.bind(Vt,"pointerdown",nn),qt.event.bind(Vt,"pointermove",an),qt.event.bind(Vt,"pointerup",rn)):window.MSPointerEvent&&(qt.event.bind(window,"MSPointerDown",Jt),qt.event.bind(window,"MSPointerUp",$t),qt.event.bind(Vt,"MSPointerDown",nn),qt.event.bind(Vt,"MSPointerMove",an),qt.event.bind(Vt,"MSPointerUp",rn)))}var Ht=Bt("../../lib/helper"),jt=Bt("../instances"),Wt=Bt("../update-geometry"),zt=Bt("../update-scroll");Xt.exports=function(Vt){(Ht.env.supportsTouch||Ht.env.supportsIePointer)&&Yt(Vt,jt.get(Vt),Ht.env.supportsTouch,Ht.env.supportsIePointer)}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],16:[function(Bt,Xt){var Yt=Bt("./instances"),Ht=Bt("./update-geometry"),jt={"click-rail":Bt("./handler/click-rail"),"drag-scrollbar":Bt("./handler/drag-scrollbar"),keyboard:Bt("./handler/keyboard"),wheel:Bt("./handler/mouse-wheel"),touch:Bt("./handler/touch"),selection:Bt("./handler/selection")},Wt=Bt("./handler/native-scroll");Xt.exports=function(zt,Vt){zt.classList.add("ps");var qt=Yt.add(zt,"object"==typeof Vt?Vt:{});zt.classList.add("ps--theme_"+qt.settings.theme),qt.settings.handlers.forEach(function(Kt){jt[Kt](zt)}),Wt(zt),Ht(zt)}},{"./handler/click-rail":9,"./handler/drag-scrollbar":10,"./handler/keyboard":11,"./handler/mouse-wheel":12,"./handler/native-scroll":13,"./handler/selection":14,"./handler/touch":15,"./instances":17,"./update-geometry":18}],17:[function(Bt,Xt,Gt){function Yt(Kt){return Kt.getAttribute("data-ps-id")}var Ht=Bt("../lib/helper"),jt=Bt("./default-setting"),Wt=Bt("../lib/dom"),zt=Bt("../lib/event-manager"),Vt=Bt("../lib/guid"),qt={};Gt.add=function(Kt,Zt){var Qt=Vt();return function(Jt,$t){Jt.setAttribute("data-ps-id",$t)}(Kt,Qt),qt[Qt]=new function(Jt,$t){function en(){Jt.classList.add("ps--focus")}function tn(){Jt.classList.remove("ps--focus")}for(var nn in this.settings=jt(),$t)this.settings[nn]=$t[nn];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null,this.isRtl="rtl"===Wt.css(Jt,"direction"),this.isNegativeScroll=function(){var an=Jt.scrollLeft,rn=null;return Jt.scrollLeft=-1,rn=0>Jt.scrollLeft,Jt.scrollLeft=an,rn}(),this.negativeScrollAdjustment=this.isNegativeScroll?Jt.scrollWidth-Jt.clientWidth:0,this.event=new zt,this.ownerDocument=Jt.ownerDocument||document,this.scrollbarXRail=Wt.appendTo(Wt.create("div","ps__scrollbar-x-rail"),Jt),this.scrollbarX=Wt.appendTo(Wt.create("div","ps__scrollbar-x"),this.scrollbarXRail),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",en),this.event.bind(this.scrollbarX,"blur",tn),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null,this.scrollbarXBottom=Ht.toInt(Wt.css(this.scrollbarXRail,"bottom")),this.isScrollbarXUsingBottom=this.scrollbarXBottom==this.scrollbarXBottom,this.scrollbarXTop=this.isScrollbarXUsingBottom?null:Ht.toInt(Wt.css(this.scrollbarXRail,"top")),this.railBorderXWidth=Ht.toInt(Wt.css(this.scrollbarXRail,"borderLeftWidth"))+Ht.toInt(Wt.css(this.scrollbarXRail,"borderRightWidth")),Wt.css(this.scrollbarXRail,"display","block"),this.railXMarginWidth=Ht.toInt(Wt.css(this.scrollbarXRail,"marginLeft"))+Ht.toInt(Wt.css(this.scrollbarXRail,"marginRight")),Wt.css(this.scrollbarXRail,"display",""),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=Wt.appendTo(Wt.create("div","ps__scrollbar-y-rail"),Jt),this.scrollbarY=Wt.appendTo(Wt.create("div","ps__scrollbar-y"),this.scrollbarYRail),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",en),this.event.bind(this.scrollbarY,"blur",tn),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null,this.scrollbarYRight=Ht.toInt(Wt.css(this.scrollbarYRail,"right")),this.isScrollbarYUsingRight=this.scrollbarYRight==this.scrollbarYRight,this.scrollbarYLeft=this.isScrollbarYUsingRight?null:Ht.toInt(Wt.css(this.scrollbarYRail,"left")),this.scrollbarYOuterWidth=this.isRtl?Ht.outerWidth(this.scrollbarY):null,this.railBorderYWidth=Ht.toInt(Wt.css(this.scrollbarYRail,"borderTopWidth"))+Ht.toInt(Wt.css(this.scrollbarYRail,"borderBottomWidth")),Wt.css(this.scrollbarYRail,"display","block"),this.railYMarginHeight=Ht.toInt(Wt.css(this.scrollbarYRail,"marginTop"))+Ht.toInt(Wt.css(this.scrollbarYRail,"marginBottom")),Wt.css(this.scrollbarYRail,"display",""),this.railYHeight=null,this.railYRatio=null}(Kt,Zt),qt[Qt]},Gt.remove=function(Kt){delete qt[Yt(Kt)],function(Zt){Zt.removeAttribute("data-ps-id")}(Kt)},Gt.get=function(Kt){return qt[Yt(Kt)]}},{"../lib/dom":2,"../lib/event-manager":3,"../lib/guid":4,"../lib/helper":5,"./default-setting":7}],18:[function(Bt,Xt){function Yt(Vt,qt){return Vt.settings.minScrollbarLength&&(qt=Math.max(qt,Vt.settings.minScrollbarLength)),Vt.settings.maxScrollbarLength&&(qt=Math.min(qt,Vt.settings.maxScrollbarLength)),qt}var Ht=Bt("../lib/helper"),jt=Bt("../lib/dom"),Wt=Bt("./instances"),zt=Bt("./update-scroll");Xt.exports=function(Vt){var qt=Wt.get(Vt);qt.containerWidth=Vt.clientWidth,qt.containerHeight=Vt.clientHeight,qt.contentWidth=Vt.scrollWidth,qt.contentHeight=Vt.scrollHeight;var Kt;Vt.contains(qt.scrollbarXRail)||(0<(Kt=jt.queryChildren(Vt,".ps__scrollbar-x-rail")).length&&Kt.forEach(function(Zt){jt.remove(Zt)}),jt.appendTo(qt.scrollbarXRail,Vt)),Vt.contains(qt.scrollbarYRail)||(0<(Kt=jt.queryChildren(Vt,".ps__scrollbar-y-rail")).length&&Kt.forEach(function(Zt){jt.remove(Zt)}),jt.appendTo(qt.scrollbarYRail,Vt)),!qt.settings.suppressScrollX&&qt.containerWidth+qt.settings.scrollXMarginOffset<qt.contentWidth?(qt.scrollbarXActive=!0,qt.railXWidth=qt.containerWidth-qt.railXMarginWidth,qt.railXRatio=qt.containerWidth/qt.railXWidth,qt.scrollbarXWidth=Yt(qt,Ht.toInt(qt.railXWidth*qt.containerWidth/qt.contentWidth)),qt.scrollbarXLeft=Ht.toInt((qt.negativeScrollAdjustment+Vt.scrollLeft)*(qt.railXWidth-qt.scrollbarXWidth)/(qt.contentWidth-qt.containerWidth))):qt.scrollbarXActive=!1,!qt.settings.suppressScrollY&&qt.containerHeight+qt.settings.scrollYMarginOffset<qt.contentHeight?(qt.scrollbarYActive=!0,qt.railYHeight=qt.containerHeight-qt.railYMarginHeight,qt.railYRatio=qt.containerHeight/qt.railYHeight,qt.scrollbarYHeight=Yt(qt,Ht.toInt(qt.railYHeight*qt.containerHeight/qt.contentHeight)),qt.scrollbarYTop=Ht.toInt(Vt.scrollTop*(qt.railYHeight-qt.scrollbarYHeight)/(qt.contentHeight-qt.containerHeight))):qt.scrollbarYActive=!1,qt.scrollbarXLeft>=qt.railXWidth-qt.scrollbarXWidth&&(qt.scrollbarXLeft=qt.railXWidth-qt.scrollbarXWidth),qt.scrollbarYTop>=qt.railYHeight-qt.scrollbarYHeight&&(qt.scrollbarYTop=qt.railYHeight-qt.scrollbarYHeight),function(Zt,Qt){var Jt={width:Qt.railXWidth};Jt.left=Qt.isRtl?Qt.negativeScrollAdjustment+Zt.scrollLeft+Qt.containerWidth-Qt.contentWidth:Zt.scrollLeft,Qt.isScrollbarXUsingBottom?Jt.bottom=Qt.scrollbarXBottom-Zt.scrollTop:Jt.top=Qt.scrollbarXTop+Zt.scrollTop,jt.css(Qt.scrollbarXRail,Jt);var $t={top:Zt.scrollTop,height:Qt.railYHeight};Qt.isScrollbarYUsingRight?Qt.isRtl?$t.right=Qt.contentWidth-(Qt.negativeScrollAdjustment+Zt.scrollLeft)-Qt.scrollbarYRight-Qt.scrollbarYOuterWidth:$t.right=Qt.scrollbarYRight-Zt.scrollLeft:Qt.isRtl?$t.left=Qt.negativeScrollAdjustment+Zt.scrollLeft+2*Qt.containerWidth-Qt.contentWidth-Qt.scrollbarYLeft-Qt.scrollbarYOuterWidth:$t.left=Qt.scrollbarYLeft+Zt.scrollLeft,jt.css(Qt.scrollbarYRail,$t),jt.css(Qt.scrollbarX,{left:Qt.scrollbarXLeft,width:Qt.scrollbarXWidth-Qt.railBorderXWidth}),jt.css(Qt.scrollbarY,{top:Qt.scrollbarYTop,height:Qt.scrollbarYHeight-Qt.railBorderYWidth})}(Vt,qt),qt.scrollbarXActive?Vt.classList.add("ps--active-x"):(Vt.classList.remove("ps--active-x"),qt.scrollbarXWidth=0,qt.scrollbarXLeft=0,zt(Vt,"left",0)),qt.scrollbarYActive?Vt.classList.add("ps--active-y"):(Vt.classList.remove("ps--active-y"),qt.scrollbarYHeight=0,qt.scrollbarYTop=0,zt(Vt,"top",0))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-scroll":19}],19:[function(Bt,Xt){var Yt=Bt("./instances"),Ht=function(jt){var Wt=document.createEvent("Event");return Wt.initEvent(jt,!0,!0),Wt};Xt.exports=function(jt,Wt,zt){if(void 0===jt)throw"You must provide an element to the update-scroll function";if(void 0===Wt)throw"You must provide an axis to the update-scroll function";if(void 0===zt)throw"You must provide a value to the update-scroll function";"top"===Wt&&0>=zt&&(jt.scrollTop=zt=0,jt.dispatchEvent(Ht("ps-y-reach-start"))),"left"===Wt&&0>=zt&&(jt.scrollLeft=zt=0,jt.dispatchEvent(Ht("ps-x-reach-start")));var Vt=Yt.get(jt);"top"===Wt&&zt>=Vt.contentHeight-Vt.containerHeight&&(2>=(zt=Vt.contentHeight-Vt.containerHeight)-jt.scrollTop?zt=jt.scrollTop:jt.scrollTop=zt,jt.dispatchEvent(Ht("ps-y-reach-end"))),"left"===Wt&&zt>=Vt.contentWidth-Vt.containerWidth&&(2>=(zt=Vt.contentWidth-Vt.containerWidth)-jt.scrollLeft?zt=jt.scrollLeft:jt.scrollLeft=zt,jt.dispatchEvent(Ht("ps-x-reach-end"))),void 0===Vt.lastTop&&(Vt.lastTop=jt.scrollTop),void 0===Vt.lastLeft&&(Vt.lastLeft=jt.scrollLeft),"top"===Wt&&zt<Vt.lastTop&&jt.dispatchEvent(Ht("ps-scroll-up")),"top"===Wt&&zt>Vt.lastTop&&jt.dispatchEvent(Ht("ps-scroll-down")),"left"===Wt&&zt<Vt.lastLeft&&jt.dispatchEvent(Ht("ps-scroll-left")),"left"===Wt&&zt>Vt.lastLeft&&jt.dispatchEvent(Ht("ps-scroll-right")),"top"===Wt&&zt!==Vt.lastTop&&(jt.scrollTop=Vt.lastTop=zt,jt.dispatchEvent(Ht("ps-scroll-y"))),"left"===Wt&&zt!==Vt.lastLeft&&(jt.scrollLeft=Vt.lastLeft=zt,jt.dispatchEvent(Ht("ps-scroll-x")))}},{"./instances":17}],20:[function(Bt,Xt){var Yt=Bt("../lib/helper"),Ht=Bt("../lib/dom"),jt=Bt("./instances"),Wt=Bt("./update-geometry"),zt=Bt("./update-scroll");Xt.exports=function(Vt){var qt=jt.get(Vt);qt&&(qt.negativeScrollAdjustment=qt.isNegativeScroll?Vt.scrollWidth-Vt.clientWidth:0,Ht.css(qt.scrollbarXRail,"display","block"),Ht.css(qt.scrollbarYRail,"display","block"),qt.railXMarginWidth=Yt.toInt(Ht.css(qt.scrollbarXRail,"marginLeft"))+Yt.toInt(Ht.css(qt.scrollbarXRail,"marginRight")),qt.railYMarginHeight=Yt.toInt(Ht.css(qt.scrollbarYRail,"marginTop"))+Yt.toInt(Ht.css(qt.scrollbarYRail,"marginBottom")),Ht.css(qt.scrollbarXRail,"display","none"),Ht.css(qt.scrollbarYRail,"display","none"),Wt(Vt),zt(Vt,"top",Vt.scrollTop),zt(Vt,"left",Vt.scrollLeft),Ht.css(qt.scrollbarXRail,"display",""),Ht.css(qt.scrollbarYRail,"display",""))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-geometry":18,"./update-scroll":19}]},{},[1]),function(Bt){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Bt():"function"==typeof define&&define.amd?define([],Bt):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).PIXI=Bt()}(function(){return function Bt(Xt,Gt,Yt){function Ht(zt,Vt){if(!Gt[zt]){if(!Xt[zt]){var qt="function"==typeof require&&require;if(!Vt&&qt)return qt(zt,!0);if(jt)return jt(zt,!0);var Kt=new Error("Cannot find module '"+zt+"'");throw Kt.code="MODULE_NOT_FOUND",Kt}var Zt=Gt[zt]={exports:{}};Xt[zt][0].call(Zt.exports,function(Qt){var Jt=Xt[zt][1][Qt];return Ht(Jt||Qt)},Zt,Zt.exports,Bt,Xt,Gt,Yt)}return Gt[zt].exports}for(var jt="function"==typeof require&&require,Wt=0;Wt<Yt.length;Wt++)Ht(Yt[Wt]);return Ht}({1:[function(Bt,Xt,Gt){"use restrict";function Yt(jt){var Wt=32;return(jt&=-jt)&&Wt--,65535&jt&&(Wt-=16),16711935&jt&&(Wt-=8),252645135&jt&&(Wt-=4),858993459&jt&&(Wt-=2),1431655765&jt&&(Wt-=1),Wt}Gt.INT_BITS=32,Gt.INT_MAX=2147483647,Gt.INT_MIN=-2147483648,Gt.sign=function(jt){return(0<jt)-(0>jt)},Gt.abs=function(jt){var Wt=jt>>31;return(jt^Wt)-Wt},Gt.min=function(jt,Wt){return Wt^(jt^Wt)&-(jt<Wt)},Gt.max=function(jt,Wt){return jt^(jt^Wt)&-(jt<Wt)},Gt.isPow2=function(jt){return!(jt&jt-1)&&jt},Gt.log2=function(jt){var Wt,zt;return Wt=(65535<jt)<<4,jt>>>=Wt,zt=(255<jt)<<3,jt>>>=zt,Wt|=zt,zt=(15<jt)<<2,jt>>>=zt,Wt|=zt,zt=(3<jt)<<1,jt>>>=zt,(Wt|=zt)|jt>>1},Gt.log10=function(jt){return 1e9<=jt?9:1e8<=jt?8:1e7<=jt?7:1e6<=jt?6:1e5<=jt?5:1e4<=jt?4:1e3<=jt?3:100<=jt?2:10<=jt?1:0},Gt.popCount=function(jt){return jt-=1431655765&jt>>>1,16843009*(252645135&(jt=(858993459&jt)+(858993459&jt>>>2))+(jt>>>4))>>>24},Gt.countTrailingZeros=Yt,Gt.nextPow2=function(jt){return jt+=0===jt,--jt,jt|=jt>>>1,jt|=jt>>>2,jt|=jt>>>4,jt|=jt>>>8,(jt|=jt>>>16)+1},Gt.prevPow2=function(jt){return jt|=jt>>>1,jt|=jt>>>2,jt|=jt>>>4,jt|=jt>>>8,(jt|=jt>>>16)-(jt>>>1)},Gt.parity=function(jt){return jt^=jt>>>16,jt^=jt>>>8,jt^=jt>>>4,1&27030>>>(jt&=15)};var Ht=Array(256);!function(jt){for(var Wt=0;256>Wt;++Wt){var zt=Wt,Vt=Wt,qt=7;for(zt>>>=1;zt;zt>>>=1)Vt<<=1,Vt|=1&zt,--qt;jt[Wt]=255&Vt<<qt}}(Ht),Gt.reverse=function(jt){return Ht[255&jt]<<24|Ht[255&jt>>>8]<<16|Ht[255&jt>>>16]<<8|Ht[255&jt>>>24]},Gt.interleave2=function(jt,Wt){return jt&=65535,jt=16711935&(jt|jt<<8),jt=252645135&(jt|jt<<4),jt=858993459&(jt|jt<<2),jt=1431655765&(jt|jt<<1),Wt&=65535,Wt=16711935&(Wt|Wt<<8),Wt=252645135&(Wt|Wt<<4),Wt=858993459&(Wt|Wt<<2),Wt=1431655765&(Wt|Wt<<1),jt|Wt<<1},Gt.deinterleave2=function(jt,Wt){return jt=1431655765&jt>>>Wt,jt=858993459&(jt|jt>>>1),jt=252645135&(jt|jt>>>2),jt=16711935&(jt|jt>>>4),(jt=65535&(jt|jt>>>16))<<16>>16},Gt.interleave3=function(jt,Wt,zt){return jt&=1023,jt=4278190335&(jt|jt<<16),jt=251719695&(jt|jt<<8),jt=3272356035&(jt|jt<<4),jt=1227133513&(jt|jt<<2),Wt&=1023,Wt=4278190335&(Wt|Wt<<16),Wt=251719695&(Wt|Wt<<8),Wt=3272356035&(Wt|Wt<<4),Wt=1227133513&(Wt|Wt<<2),jt|=Wt<<1,zt&=1023,zt=4278190335&(zt|zt<<16),zt=251719695&(zt|zt<<8),zt=3272356035&(zt|zt<<4),zt=1227133513&(zt|zt<<2),jt|zt<<2},Gt.deinterleave3=function(jt,Wt){return jt=1227133513&jt>>>Wt,jt=3272356035&(jt|jt>>>2),jt=251719695&(jt|jt>>>4),jt=4278190335&(jt|jt>>>8),(jt=1023&(jt|jt>>>16))<<22>>22},Gt.nextCombination=function(jt){var Wt=jt|jt-1;return Wt+1|(~Wt&-~Wt)-1>>>Yt(jt)+1}},{}],2:[function(Bt,Xt){function Yt(rn,on,sn){sn=sn||2;var dn=on&&on.length,ln=dn?on[0]*sn:rn.length,un=Ht(rn,0,ln,sn,!0),pn=[];if(!un)return pn;var cn,hn,fn,gn,mn,yn,_n;if(dn&&(un=function(xn,vn,Tn,En){var Mn=[],Sn,wn,Cn,Pn,An;for(Sn=0,wn=vn.length;Sn<wn;Sn++)Cn=vn[Sn]*En,Pn=Sn<wn-1?vn[Sn+1]*En:xn.length,(An=Ht(xn,Cn,Pn,En,!1))===An.next&&(An.steiner=!0),Mn.push(function(Rn){var In=Rn,Dn=Rn;do In.x<Dn.x&&(Dn=In),In=In.next;while(In!==Rn);return Dn}(An));for(Mn.sort(zt),Sn=0;Sn<Mn.length;Sn++)!function(Rn,In){if(In=function(On,Ln){var Nn=Ln,Fn=On.x,Bn=On.y,Un=-1/0,kn;do{if(Bn<=Nn.y&&Bn>=Nn.next.y){var Xn=Nn.x+(Bn-Nn.y)*(Nn.next.x-Nn.x)/(Nn.next.y-Nn.y);if(Xn<=Fn&&Xn>Un){if(Un=Xn,Xn===Fn){if(Bn===Nn.y)return Nn;if(Bn===Nn.next.y)return Nn.next}kn=Nn.x<Nn.next.x?Nn:Nn.next}}Nn=Nn.next}while(Nn!==Ln);if(!kn)return null;if(Fn===Un)return kn.prev;var Yn=kn,Hn=kn.x,jn=kn.y,Wn=1/0,Gn;for(Nn=kn.next;Nn!==Yn;)Fn>=Nn.x&&Nn.x>=Hn&&qt(Bn<jn?Fn:Un,Bn,Hn,jn,Bn<jn?Un:Fn,Bn,Nn.x,Nn.y)&&((Gn=Math.abs(Bn-Nn.y)/(Fn-Nn.x))<Wn||Gn===Wn&&Nn.x>kn.x)&&Jt(Nn,On)&&(kn=Nn,Wn=Gn),Nn=Nn.next;return kn}(Rn,In)){var Dn=$t(In,Rn);jt(Dn,Dn.next)}}(Mn[Sn],Tn),Tn=jt(Tn,Tn.next);return Tn}(rn,on,un,sn)),rn.length>80*sn){cn=fn=rn[0],hn=gn=rn[1];for(var bn=sn;bn<ln;bn+=sn)mn=rn[bn],yn=rn[bn+1],mn<cn&&(cn=mn),yn<hn&&(hn=yn),mn>fn&&(fn=mn),yn>gn&&(gn=yn);_n=Math.max(fn-cn,gn-hn)}return Wt(un,pn,sn,cn,hn,_n),pn}function Ht(rn,on,sn,dn,ln){var un,pn;if(ln===0<an(rn,on,sn,dn))for(un=on;un<sn;un+=dn)pn=en(un,rn[un],rn[un+1],pn);else for(un=sn-dn;un>=on;un-=dn)pn=en(un,rn[un],rn[un+1],pn);return pn&&Zt(pn,pn.next)&&(tn(pn),pn=pn.next),pn}function jt(rn,on){if(!rn)return rn;on||(on=rn);var dn=rn,sn;do if(sn=!1,dn.steiner||!Zt(dn,dn.next)&&0!==Kt(dn.prev,dn,dn.next))dn=dn.next;else{if(tn(dn),(dn=on=dn.prev)===dn.next)return null;sn=!0}while(sn||dn!==on);return on}function Wt(rn,on,sn,dn,ln,un,pn){if(rn){!pn&&un&&function(gn,mn,yn,_n){var bn=gn;do null===bn.z&&(bn.z=Vt(bn.x,bn.y,mn,yn,_n)),bn.prevZ=bn.prev,bn.nextZ=bn.next,bn=bn.next;while(bn!==gn);bn.prevZ.nextZ=null,bn.prevZ=null,function(xn){var Mn=1,vn,Tn,En,Sn,wn,Cn,Pn,An;do{for(Tn=xn,xn=null,wn=null,Cn=0;Tn;){for(Cn++,En=Tn,Pn=0,vn=0;vn<Mn&&(Pn++,En=En.nextZ);vn++);for(An=Mn;0<Pn||0<An&&En;)0===Pn?(Sn=En,En=En.nextZ,An--):0!==An&&En?Tn.z<=En.z?(Sn=Tn,Tn=Tn.nextZ,Pn--):(Sn=En,En=En.nextZ,An--):(Sn=Tn,Tn=Tn.nextZ,Pn--),wn?wn.nextZ=Sn:xn=Sn,Sn.prevZ=wn,wn=Sn;Tn=En}wn.nextZ=null,Mn*=2}while(1<Cn)}(bn)}(rn,dn,ln,un);for(var fn=rn,cn,hn;rn.prev!==rn.next;)if(cn=rn.prev,hn=rn.next,un?function(gn,mn,yn,_n){var bn=gn.prev,xn=gn,vn=gn.next;if(0<=Kt(bn,xn,vn))return!1;for(var Tn=bn.x<xn.x?bn.x<vn.x?bn.x:vn.x:xn.x<vn.x?xn.x:vn.x,En=bn.y<xn.y?bn.y<vn.y?bn.y:vn.y:xn.y<vn.y?xn.y:vn.y,Sn=bn.x>xn.x?bn.x>vn.x?bn.x:vn.x:xn.x>vn.x?xn.x:vn.x,wn=bn.y>xn.y?bn.y>vn.y?bn.y:vn.y:xn.y>vn.y?xn.y:vn.y,Cn=Vt(Tn,En,mn,yn,_n),Pn=Vt(Sn,wn,mn,yn,_n),An=gn.nextZ;An&&An.z<=Pn;){if(An!==gn.prev&&An!==gn.next&&qt(bn.x,bn.y,xn.x,xn.y,vn.x,vn.y,An.x,An.y)&&0<=Kt(An.prev,An,An.next))return!1;An=An.nextZ}for(An=gn.prevZ;An&&An.z>=Cn;){if(An!==gn.prev&&An!==gn.next&&qt(bn.x,bn.y,xn.x,xn.y,vn.x,vn.y,An.x,An.y)&&0<=Kt(An.prev,An,An.next))return!1;An=An.prevZ}return!0}(rn,dn,ln,un):function(gn){var mn=gn.prev,yn=gn,_n=gn.next;if(0<=Kt(mn,yn,_n))return!1;for(var bn=gn.next.next;bn!==gn.prev;){if(qt(mn.x,mn.y,yn.x,yn.y,_n.x,_n.y,bn.x,bn.y)&&0<=Kt(bn.prev,bn,bn.next))return!1;bn=bn.next}return!0}(rn))on.push(cn.i/sn),on.push(rn.i/sn),on.push(hn.i/sn),tn(rn),rn=hn.next,fn=hn.next;else if((rn=hn)===fn){pn?1===pn?Wt(rn=function(gn,mn,yn){var _n=gn;do{var bn=_n.prev,xn=_n.next.next;!Zt(bn,xn)&&Qt(bn,_n,_n.next,xn)&&Jt(bn,xn)&&Jt(xn,bn)&&(mn.push(bn.i/yn),mn.push(_n.i/yn),mn.push(xn.i/yn),tn(_n),tn(_n.next),_n=gn=xn),_n=_n.next}while(_n!==gn);return _n}(rn,on,sn),on,sn,dn,ln,un,2):2==pn&&function(gn,mn,yn,_n,bn,xn){var vn=gn;do{for(var Tn=vn.next.next;Tn!==vn.prev;){if(vn.i!==Tn.i&&function(Sn,wn){return Sn.next.i!==wn.i&&Sn.prev.i!==wn.i&&!function(Cn,Pn){var An=Cn;do{if(An.i!==Cn.i&&An.next.i!==Cn.i&&An.i!==Pn.i&&An.next.i!==Pn.i&&Qt(An,An.next,Cn,Pn))return!0;An=An.next}while(An!==Cn);return!1}(Sn,wn)&&Jt(Sn,wn)&&Jt(wn,Sn)&&function(Cn,Pn){var An=Cn,Mn=!1,Rn=(Cn.x+Pn.x)/2,In=(Cn.y+Pn.y)/2;do An.y>In!=An.next.y>In&&Rn<(An.next.x-An.x)*(In-An.y)/(An.next.y-An.y)+An.x&&(Mn=!Mn),An=An.next;while(An!==Cn);return Mn}(Sn,wn)}(vn,Tn)){var En=$t(vn,Tn);return vn=jt(vn,vn.next),En=jt(En,En.next),Wt(vn,mn,yn,_n,bn,xn),void Wt(En,mn,yn,_n,bn,xn)}Tn=Tn.next}vn=vn.next}while(vn!==gn)}(rn,on,sn,dn,ln,un):Wt(jt(rn),on,sn,dn,ln,un,1);break}}}function zt(rn,on){return rn.x-on.x}function Vt(rn,on,sn,dn,ln){return rn=32767*(rn-sn)/ln,on=32767*(on-dn)/ln,rn=16711935&(rn|rn<<8),rn=252645135&(rn|rn<<4),rn=858993459&(rn|rn<<2),rn=1431655765&(rn|rn<<1),on=16711935&(on|on<<8),on=252645135&(on|on<<4),on=858993459&(on|on<<2),on=1431655765&(on|on<<1),rn|on<<1}function qt(rn,on,sn,dn,ln,un,pn,cn){return 0<=(ln-pn)*(on-cn)-(rn-pn)*(un-cn)&&0<=(rn-pn)*(dn-cn)-(sn-pn)*(on-cn)&&0<=(sn-pn)*(un-cn)-(ln-pn)*(dn-cn)}function Kt(rn,on,sn){return(on.y-rn.y)*(sn.x-on.x)-(on.x-rn.x)*(sn.y-on.y)}function Zt(rn,on){return rn.x===on.x&&rn.y===on.y}function Qt(rn,on,sn,dn){return!!(Zt(rn,on)&&Zt(sn,dn)||Zt(rn,dn)&&Zt(sn,on))||0<Kt(rn,on,sn)!=0<Kt(rn,on,dn)&&0<Kt(sn,dn,rn)!=0<Kt(sn,dn,on)}function Jt(rn,on){return 0>Kt(rn.prev,rn,rn.next)?0<=Kt(rn,on,rn.next)&&0<=Kt(rn,rn.prev,on):0>Kt(rn,on,rn.prev)||0>Kt(rn,rn.next,on)}function $t(rn,on){var sn=new nn(rn.i,rn.x,rn.y),dn=new nn(on.i,on.x,on.y),ln=rn.next,un=on.prev;return rn.next=on,on.prev=rn,sn.next=ln,ln.prev=sn,dn.next=sn,sn.prev=dn,un.next=dn,dn.prev=un,dn}function en(rn,on,sn,dn){var ln=new nn(rn,on,sn);return dn?(ln.next=dn.next,ln.prev=dn,dn.next.prev=ln,dn.next=ln):(ln.prev=ln,ln.next=ln),ln}function tn(rn){rn.next.prev=rn.prev,rn.prev.next=rn.next,rn.prevZ&&(rn.prevZ.nextZ=rn.nextZ),rn.nextZ&&(rn.nextZ.prevZ=rn.prevZ)}function nn(rn,on,sn){this.i=rn,this.x=on,this.y=sn,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function an(rn,on,sn,dn){for(var ln=0,un=on,pn=sn-dn;un<sn;un+=dn)ln+=(rn[pn]-rn[un])*(rn[un+1]+rn[pn+1]),pn=un;return ln}Xt.exports=Yt,Yt.deviation=function(rn,on,sn,dn){var ln=on&&on.length,un=ln?on[0]*sn:rn.length,pn=Math.abs(an(rn,0,un,sn));if(ln)for(var cn=0,hn=on.length;cn<hn;cn++){var fn=on[cn]*sn,gn=cn<hn-1?on[cn+1]*sn:rn.length;pn-=Math.abs(an(rn,fn,gn,sn))}var mn=0;for(cn=0;cn<dn.length;cn+=3){var yn=dn[cn]*sn,_n=dn[cn+1]*sn,bn=dn[cn+2]*sn;mn+=Math.abs((rn[yn]-rn[bn])*(rn[_n+1]-rn[yn+1])-(rn[yn]-rn[_n])*(rn[bn+1]-rn[yn+1]))}return 0===pn&&0===mn?0:Math.abs((mn-pn)/pn)},Yt.flatten=function(rn){for(var on=rn[0][0].length,sn={vertices:[],holes:[],dimensions:on},dn=0,ln=0;ln<rn.length;ln++){for(var un=0;un<rn[ln].length;un++)for(var pn=0;pn<on;pn++)sn.vertices.push(rn[ln][un][pn]);0<ln&&(dn+=rn[ln-1].length,sn.holes.push(dn))}return sn}},{}],3:[function(Bt,Xt){function Yt(){}function Ht(Vt,qt,Kt){this.fn=Vt,this.context=qt,this.once=Kt||!1}function jt(){this._events=new Yt,this._eventsCount=0}var Wt=Object.prototype.hasOwnProperty,zt="~";Object.create&&(Yt.prototype=Object.create(null),new Yt().__proto__||(zt=!1)),jt.prototype.eventNames=function(){var Kt=[],Vt,qt;if(0===this._eventsCount)return Kt;for(qt in Vt=this._events)Wt.call(Vt,qt)&&Kt.push(zt?qt.slice(1):qt);return Object.getOwnPropertySymbols?Kt.concat(Object.getOwnPropertySymbols(Vt)):Kt},jt.prototype.listeners=function(Vt,qt){var Kt=zt?zt+Vt:Vt,Zt=this._events[Kt];if(qt)return!!Zt;if(!Zt)return[];if(Zt.fn)return[Zt.fn];for(var Qt=0,Jt=Zt.length,$t=Array(Jt);Qt<Jt;Qt++)$t[Qt]=Zt[Qt].fn;return $t},jt.prototype.emit=function(Vt,qt,Kt,Zt,Qt,Jt){var $t=zt?zt+Vt:Vt;if(!this._events[$t])return!1;var nn=this._events[$t],an=arguments.length,en,tn;if(nn.fn){switch(nn.once&&this.removeListener(Vt,nn.fn,void 0,!0),an){case 1:return nn.fn.call(nn.context),!0;case 2:return nn.fn.call(nn.context,qt),!0;case 3:return nn.fn.call(nn.context,qt,Kt),!0;case 4:return nn.fn.call(nn.context,qt,Kt,Zt),!0;case 5:return nn.fn.call(nn.context,qt,Kt,Zt,Qt),!0;case 6:return nn.fn.call(nn.context,qt,Kt,Zt,Qt,Jt),!0;}for(tn=1,en=Array(an-1);tn<an;tn++)en[tn-1]=arguments[tn];nn.fn.apply(nn.context,en)}else{var on=nn.length,rn;for(tn=0;tn<on;tn++)switch(nn[tn].once&&this.removeListener(Vt,nn[tn].fn,void 0,!0),an){case 1:nn[tn].fn.call(nn[tn].context);break;case 2:nn[tn].fn.call(nn[tn].context,qt);break;case 3:nn[tn].fn.call(nn[tn].context,qt,Kt);break;case 4:nn[tn].fn.call(nn[tn].context,qt,Kt,Zt);break;default:if(!en)for(rn=1,en=Array(an-1);rn<an;rn++)en[rn-1]=arguments[rn];nn[tn].fn.apply(nn[tn].context,en);}}return!0},jt.prototype.on=function(Vt,qt,Kt){var Zt=new Ht(qt,Kt||this),Qt=zt?zt+Vt:Vt;return this._events[Qt]?this._events[Qt].fn?this._events[Qt]=[this._events[Qt],Zt]:this._events[Qt].push(Zt):(this._events[Qt]=Zt,this._eventsCount++),this},jt.prototype.once=function(Vt,qt,Kt){var Zt=new Ht(qt,Kt||this,!0),Qt=zt?zt+Vt:Vt;return this._events[Qt]?this._events[Qt].fn?this._events[Qt]=[this._events[Qt],Zt]:this._events[Qt].push(Zt):(this._events[Qt]=Zt,this._eventsCount++),this},jt.prototype.removeListener=function(Vt,qt,Kt,Zt){var Qt=zt?zt+Vt:Vt;if(!this._events[Qt])return this;if(!qt)return 0==--this._eventsCount?this._events=new Yt:delete this._events[Qt],this;var Jt=this._events[Qt];if(Jt.fn)Jt.fn!==qt||Zt&&!Jt.once||Kt&&Jt.context!==Kt||(0==--this._eventsCount?this._events=new Yt:delete this._events[Qt]);else{for(var $t=0,en=[],tn=Jt.length;$t<tn;$t++)(Jt[$t].fn!==qt||Zt&&!Jt[$t].once||Kt&&Jt[$t].context!==Kt)&&en.push(Jt[$t]);en.length?this._events[Qt]=1===en.length?en[0]:en:0==--this._eventsCount?this._events=new Yt:delete this._events[Qt]}return this},jt.prototype.removeAllListeners=function(Vt){var qt;return Vt?(qt=zt?zt+Vt:Vt,this._events[qt]&&(0==--this._eventsCount?this._events=new Yt:delete this._events[qt])):(this._events=new Yt,this._eventsCount=0),this},jt.prototype.off=jt.prototype.removeListener,jt.prototype.addListener=jt.prototype.on,jt.prototype.setMaxListeners=function(){return this},jt.prefixed=zt,jt.EventEmitter=jt,void 0!==Xt&&(Xt.exports=jt)},{}],4:[function(Bt,Xt){!function(Yt){var Ht=/iPhone/i,jt=/iPod/i,Wt=/iPad/i,zt=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,Vt=/Android/i,qt=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,Kt=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,Zt=/Windows Phone/i,Qt=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,Jt=/BlackBerry/i,$t=/BB10/i,en=/Opera Mini/i,tn=/(CriOS|Chrome)(?=.*\bMobile\b)/i,nn=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,an=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,rn=function(dn,ln){return dn.test(ln)},on=function(dn){var ln=dn||navigator.userAgent,un=ln.split("[FBAN");if(void 0!==un[1]&&(ln=un[0]),void 0!==(un=ln.split("Twitter"))[1]&&(ln=un[0]),this.apple={phone:rn(Ht,ln),ipod:rn(jt,ln),tablet:!rn(Ht,ln)&&rn(Wt,ln),device:rn(Ht,ln)||rn(jt,ln)||rn(Wt,ln)},this.amazon={phone:rn(qt,ln),tablet:!rn(qt,ln)&&rn(Kt,ln),device:rn(qt,ln)||rn(Kt,ln)},this.android={phone:rn(qt,ln)||rn(zt,ln),tablet:!rn(qt,ln)&&!rn(zt,ln)&&(rn(Kt,ln)||rn(Vt,ln)),device:rn(qt,ln)||rn(Kt,ln)||rn(zt,ln)||rn(Vt,ln)},this.windows={phone:rn(Zt,ln),tablet:rn(Qt,ln),device:rn(Zt,ln)||rn(Qt,ln)},this.other={blackberry:rn(Jt,ln),blackberry10:rn($t,ln),opera:rn(en,ln),firefox:rn(nn,ln),chrome:rn(tn,ln),device:rn(Jt,ln)||rn($t,ln)||rn(en,ln)||rn(nn,ln)||rn(tn,ln)},this.seven_inch=rn(an,ln),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},sn=function(){var dn=new on;return dn.Class=on,dn};void 0!==Xt&&Xt.exports&&"undefined"==typeof window?Xt.exports=on:void 0!==Xt&&Xt.exports&&"undefined"!=typeof window?Xt.exports=sn():Yt.isMobile=sn()}(this)},{}],5:[function(Bt,Xt){var Yt=Object.getOwnPropertySymbols,Ht=Object.prototype.hasOwnProperty,jt=Object.prototype.propertyIsEnumerable;Xt.exports=function(){try{if(!Object.assign)return!1;var Wt=new String("abc");if(Wt[5]="de","5"===Object.getOwnPropertyNames(Wt)[0])return!1;for(var zt={},Vt=0;10>Vt;Vt++)zt["_"+String.fromCharCode(Vt)]=Vt;if("0123456789"!==Object.getOwnPropertyNames(zt).map(function(Kt){return zt[Kt]}).join(""))return!1;var qt={};return"abcdefghijklmnopqrst".split("").forEach(function(Kt){qt[Kt]=Kt}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},qt)).join("")}catch(Kt){return!1}}()?Object.assign:function(Wt){for(var Kt=function($t){if(null===$t||void 0===$t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object($t)}(Wt),Zt=1,Vt,qt;Zt<arguments.length;Zt++){for(var Qt in Vt=Object(arguments[Zt]),Vt)Ht.call(Vt,Qt)&&(Kt[Qt]=Vt[Qt]);if(Yt){qt=Yt(Vt);for(var Jt=0;Jt<qt.length;Jt++)jt.call(Vt,qt[Jt])&&(Kt[qt[Jt]]=Vt[qt[Jt]])}}return Kt}},{}],6:[function(Bt,Xt){var Yt=new ArrayBuffer(0),Ht=function(jt,Wt,zt,Vt){this.gl=jt,this.buffer=jt.createBuffer(),this.type=Wt||jt.ARRAY_BUFFER,this.drawType=Vt||jt.STATIC_DRAW,this.data=Yt,zt&&this.upload(zt),this._updateID=0};Ht.prototype.upload=function(jt,Wt,zt){zt||this.bind();var Vt=this.gl;jt=jt||this.data,Wt=Wt||0,this.data.byteLength>=jt.byteLength?Vt.bufferSubData(this.type,Wt,jt):Vt.bufferData(this.type,jt,this.drawType),this.data=jt},Ht.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},Ht.createVertexBuffer=function(jt,Wt,zt){return new Ht(jt,jt.ARRAY_BUFFER,Wt,zt)},Ht.createIndexBuffer=function(jt,Wt,zt){return new Ht(jt,jt.ELEMENT_ARRAY_BUFFER,Wt,zt)},Ht.create=function(jt,Wt,zt,Vt){return new Ht(jt,Wt,zt,Vt)},Ht.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},Xt.exports=Ht},{}],7:[function(Bt,Xt){var Yt=Bt("./GLTexture"),Ht=function(jt,Wt,zt){this.gl=jt,this.framebuffer=jt.createFramebuffer(),this.stencil=null,this.texture=null,this.width=Wt||100,this.height=zt||100};Ht.prototype.enableTexture=function(jt){var Wt=this.gl;this.texture=jt||new Yt(Wt),this.texture.bind(),this.bind(),Wt.framebufferTexture2D(Wt.FRAMEBUFFER,Wt.COLOR_ATTACHMENT0,Wt.TEXTURE_2D,this.texture.texture,0)},Ht.prototype.enableStencil=function(){if(!this.stencil){var jt=this.gl;this.stencil=jt.createRenderbuffer(),jt.bindRenderbuffer(jt.RENDERBUFFER,this.stencil),jt.framebufferRenderbuffer(jt.FRAMEBUFFER,jt.DEPTH_STENCIL_ATTACHMENT,jt.RENDERBUFFER,this.stencil),jt.renderbufferStorage(jt.RENDERBUFFER,jt.DEPTH_STENCIL,this.width,this.height)}},Ht.prototype.clear=function(jt,Wt,zt,Vt){this.bind();var qt=this.gl;qt.clearColor(jt,Wt,zt,Vt),qt.clear(qt.COLOR_BUFFER_BIT|qt.DEPTH_BUFFER_BIT)},Ht.prototype.bind=function(){var jt=this.gl;jt.bindFramebuffer(jt.FRAMEBUFFER,this.framebuffer)},Ht.prototype.unbind=function(){var jt=this.gl;jt.bindFramebuffer(jt.FRAMEBUFFER,null)},Ht.prototype.resize=function(jt,Wt){var zt=this.gl;this.width=jt,this.height=Wt,this.texture&&this.texture.uploadData(null,jt,Wt),this.stencil&&(zt.bindRenderbuffer(zt.RENDERBUFFER,this.stencil),zt.renderbufferStorage(zt.RENDERBUFFER,zt.DEPTH_STENCIL,jt,Wt))},Ht.prototype.destroy=function(){var jt=this.gl;this.texture&&this.texture.destroy(),jt.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},Ht.createRGBA=function(jt,Wt,zt){var qt=Yt.fromData(jt,null,Wt,zt);qt.enableNearestScaling(),qt.enableWrapClamp();var Kt=new Ht(jt,Wt,zt);return Kt.enableTexture(qt),Kt.unbind(),Kt},Ht.createFloat32=function(jt,Wt,zt,Vt){var qt=new Yt.fromData(jt,Vt,Wt,zt);qt.enableNearestScaling(),qt.enableWrapClamp();var Kt=new Ht(jt,Wt,zt);return Kt.enableTexture(qt),Kt.unbind(),Kt},Xt.exports=Ht},{"./GLTexture":9}],8:[function(Bt,Xt){var Yt=Bt("./shader/compileProgram"),Ht=Bt("./shader/extractAttributes"),jt=Bt("./shader/extractUniforms"),Wt=Bt("./shader/setPrecision"),zt=Bt("./shader/generateUniformAccessObject"),Vt=function(qt,Kt,Zt,Qt,Jt){this.gl=qt,Qt&&(Kt=Wt(Kt,Qt),Zt=Wt(Zt,Qt)),this.program=Yt(qt,Kt,Zt,Jt),this.attributes=Ht(qt,this.program),this.uniformData=jt(qt,this.program),this.uniforms=zt(qt,this.uniformData)};Vt.prototype.bind=function(){this.gl.useProgram(this.program)},Vt.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},Xt.exports=Vt},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18,"./shader/setPrecision":22}],9:[function(Bt,Xt){var Yt=function(jt,Wt,zt,Vt,qt){this.gl=jt,this.texture=jt.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=Wt||-1,this.height=zt||-1,this.format=Vt||jt.RGBA,this.type=qt||jt.UNSIGNED_BYTE};Yt.prototype.upload=function(jt){this.bind();var Wt=this.gl;Wt.pixelStorei(Wt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var zt=jt.videoWidth||jt.width,Vt=jt.videoHeight||jt.height;Vt!==this.height||zt!==this.width?Wt.texImage2D(Wt.TEXTURE_2D,0,this.format,this.format,this.type,jt):Wt.texSubImage2D(Wt.TEXTURE_2D,0,0,0,this.format,this.type,jt),this.width=zt,this.height=Vt};var Ht=!1;Yt.prototype.uploadData=function(jt,Wt,zt){this.bind();var Vt=this.gl;if(jt instanceof Float32Array){if(!Ht){if(!Vt.getExtension("OES_texture_float"))throw new Error("floating point textures not available");Ht=!0}this.type=Vt.FLOAT}else this.type=this.type||Vt.UNSIGNED_BYTE;Vt.pixelStorei(Vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),Wt!==this.width||zt!==this.height?Vt.texImage2D(Vt.TEXTURE_2D,0,this.format,Wt,zt,0,this.format,this.type,jt||null):Vt.texSubImage2D(Vt.TEXTURE_2D,0,0,0,Wt,zt,this.format,this.type,jt||null),this.width=Wt,this.height=zt},Yt.prototype.bind=function(jt){var Wt=this.gl;void 0!==jt&&Wt.activeTexture(Wt.TEXTURE0+jt),Wt.bindTexture(Wt.TEXTURE_2D,this.texture)},Yt.prototype.unbind=function(){var jt=this.gl;jt.bindTexture(jt.TEXTURE_2D,null)},Yt.prototype.minFilter=function(jt){var Wt=this.gl;this.bind(),this.mipmap?Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_MIN_FILTER,jt?Wt.LINEAR_MIPMAP_LINEAR:Wt.NEAREST_MIPMAP_NEAREST):Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_MIN_FILTER,jt?Wt.LINEAR:Wt.NEAREST)},Yt.prototype.magFilter=function(jt){var Wt=this.gl;this.bind(),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_MAG_FILTER,jt?Wt.LINEAR:Wt.NEAREST)},Yt.prototype.enableMipmap=function(){var jt=this.gl;this.bind(),this.mipmap=!0,jt.generateMipmap(jt.TEXTURE_2D)},Yt.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},Yt.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},Yt.prototype.enableWrapClamp=function(){var jt=this.gl;this.bind(),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_S,jt.CLAMP_TO_EDGE),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_T,jt.CLAMP_TO_EDGE)},Yt.prototype.enableWrapRepeat=function(){var jt=this.gl;this.bind(),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_S,jt.REPEAT),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_T,jt.REPEAT)},Yt.prototype.enableWrapMirrorRepeat=function(){var jt=this.gl;this.bind(),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_S,jt.MIRRORED_REPEAT),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_WRAP_T,jt.MIRRORED_REPEAT)},Yt.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},Yt.fromSource=function(jt,Wt,zt){var Vt=new Yt(jt);return Vt.premultiplyAlpha=zt||!1,Vt.upload(Wt),Vt},Yt.fromData=function(jt,Wt,zt,Vt){var qt=new Yt(jt);return qt.uploadData(Wt,zt,Vt),qt},Xt.exports=Yt},{}],10:[function(Bt,Xt){function Yt(jt,Wt){if(this.nativeVaoExtension=null,Yt.FORCE_NATIVE||(this.nativeVaoExtension=jt.getExtension("OES_vertex_array_object")||jt.getExtension("MOZ_OES_vertex_array_object")||jt.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=Wt,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var zt=jt.getParameter(jt.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:Array(zt),attribState:Array(zt)}}this.gl=jt,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var Ht=Bt("./setVertexAttribArrays");Yt.prototype.constructor=Yt,Xt.exports=Yt,Yt.FORCE_NATIVE=!1,Yt.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},Yt.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},Yt.prototype.activate=function(){for(var jt=this.gl,Wt=null,zt=0,Vt;zt<this.attributes.length;zt++)Vt=this.attributes[zt],Wt!==Vt.buffer&&(Vt.buffer.bind(),Wt=Vt.buffer),jt.vertexAttribPointer(Vt.attribute.location,Vt.attribute.size,Vt.type||jt.FLOAT,Vt.normalized||!1,Vt.stride||0,Vt.start||0);return Ht(jt,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},Yt.prototype.addAttribute=function(jt,Wt,zt,Vt,qt,Kt){return this.attributes.push({buffer:jt,attribute:Wt,location:Wt.location,type:zt||this.gl.FLOAT,normalized:Vt||!1,stride:qt||0,start:Kt||0}),this.dirty=!0,this},Yt.prototype.addIndex=function(jt){return this.indexBuffer=jt,this.dirty=!0,this},Yt.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},Yt.prototype.draw=function(jt,Wt,zt){var Vt=this.gl;return this.indexBuffer?Vt.drawElements(jt,Wt||this.indexBuffer.data.length,Vt.UNSIGNED_SHORT,2*(zt||0)):Vt.drawArrays(jt,zt,Wt||this.getSize()),this},Yt.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},Yt.prototype.getSize=function(){var jt=this.attributes[0];return jt.buffer.data.length/(jt.stride/4||jt.attribute.size)}},{"./setVertexAttribArrays":13}],11:[function(Bt,Xt){Xt.exports=function(Yt,Ht){var jt=Yt.getContext("webgl",Ht)||Yt.getContext("experimental-webgl",Ht);if(!jt)throw new Error("This browser does not support webGL. Try using the canvas renderer");return jt}},{}],12:[function(Bt,Xt){var Yt={createContext:Bt("./createContext"),setVertexAttribArrays:Bt("./setVertexAttribArrays"),GLBuffer:Bt("./GLBuffer"),GLFramebuffer:Bt("./GLFramebuffer"),GLShader:Bt("./GLShader"),GLTexture:Bt("./GLTexture"),VertexArrayObject:Bt("./VertexArrayObject"),shader:Bt("./shader")};void 0!==Xt&&Xt.exports&&(Xt.exports=Yt),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=Yt)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(Bt,Xt){Xt.exports=function(Yt,Ht,jt){var Wt;if(jt){var zt=jt.tempAttribState,Vt=jt.attribState;for(Wt=0;Wt<zt.length;Wt++)zt[Wt]=!1;for(Wt=0;Wt<Ht.length;Wt++)zt[Ht[Wt].attribute.location]=!0;for(Wt=0;Wt<Vt.length;Wt++)Vt[Wt]!==zt[Wt]&&(Vt[Wt]=zt[Wt],jt.attribState[Wt]?Yt.enableVertexAttribArray(Wt):Yt.disableVertexAttribArray(Wt))}else for(Wt=0;Wt<Ht.length;Wt++){var qt=Ht[Wt];Yt.enableVertexAttribArray(qt.attribute.location)}}},{}],14:[function(Bt,Xt){var Yt=function(Ht,jt,Wt){var zt=Ht.createShader(jt);return Ht.shaderSource(zt,Wt),Ht.compileShader(zt),Ht.getShaderParameter(zt,Ht.COMPILE_STATUS)?zt:(console.log(Ht.getShaderInfoLog(zt)),null)};Xt.exports=function(Ht,jt,Wt,zt){var Vt=Yt(Ht,Ht.VERTEX_SHADER,jt),qt=Yt(Ht,Ht.FRAGMENT_SHADER,Wt),Kt=Ht.createProgram();if(Ht.attachShader(Kt,Vt),Ht.attachShader(Kt,qt),zt)for(var Zt in zt)Ht.bindAttribLocation(Kt,zt[Zt],Zt);return Ht.linkProgram(Kt),Ht.getProgramParameter(Kt,Ht.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",Ht.getProgramParameter(Kt,Ht.VALIDATE_STATUS)),console.error("gl.getError()",Ht.getError()),""!==Ht.getProgramInfoLog(Kt)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",Ht.getProgramInfoLog(Kt)),Ht.deleteProgram(Kt),Kt=null),Ht.deleteShader(Vt),Ht.deleteShader(qt),Kt}},{}],15:[function(Bt,Xt){var Yt=function(Ht){for(var jt=Array(Ht),Wt=0;Wt<jt.length;Wt++)jt[Wt]=!1;return jt};Xt.exports=function(Ht,jt){return"float"===Ht?0:"vec2"===Ht?new Float32Array(2*jt):"vec3"===Ht?new Float32Array(3*jt):"vec4"===Ht?new Float32Array(4*jt):"int"===Ht||"sampler2D"===Ht?0:"ivec2"===Ht?new Int32Array(2*jt):"ivec3"===Ht?new Int32Array(3*jt):"ivec4"===Ht?new Int32Array(4*jt):"bool"!=Ht&&("bvec2"===Ht?Yt(2*jt):"bvec3"===Ht?Yt(3*jt):"bvec4"===Ht?Yt(4*jt):"mat2"===Ht?new Float32Array([1,0,0,1]):"mat3"===Ht?new Float32Array([1,0,0,0,1,0,0,0,1]):"mat4"===Ht?new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):void 0)}},{}],16:[function(Bt,Xt){var Yt=Bt("./mapType"),Ht=Bt("./mapSize"),jt=function(Wt,zt,Vt,qt){gl.vertexAttribPointer(this.location,this.size,Wt||gl.FLOAT,zt||!1,Vt||0,qt||0)};Xt.exports=function(Wt,zt){for(var Vt={},qt=Wt.getProgramParameter(zt,Wt.ACTIVE_ATTRIBUTES),Kt=0;Kt<qt;Kt++){var Zt=Wt.getActiveAttrib(zt,Kt),Qt=Yt(Wt,Zt.type);Vt[Zt.name]={type:Qt,size:Ht(Qt),location:Wt.getAttribLocation(zt,Zt.name),pointer:jt}}return Vt}},{"./mapSize":20,"./mapType":21}],17:[function(Bt,Xt){var Yt=Bt("./mapType"),Ht=Bt("./defaultValue");Xt.exports=function(jt,Wt){for(var zt={},Vt=jt.getProgramParameter(Wt,jt.ACTIVE_UNIFORMS),qt=0;qt<Vt;qt++){var Kt=jt.getActiveUniform(Wt,qt),Zt=Kt.name.replace(/\[.*?\]/,""),Qt=Yt(jt,Kt.type);zt[Zt]={type:Qt,size:Kt.size,location:jt.getUniformLocation(Wt,Zt),value:Ht(Qt,Kt.size)}}return zt}},{"./defaultValue":15,"./mapType":21}],18:[function(Bt,Xt){var Yt=function(Kt){var Zt=Wt.replace("%%",Kt);return new Function(Zt)},Ht=function(Kt,Zt){var Jt=zt.replace(/%%/g,Kt),Qt;return(Qt=1===Zt.size?Vt[Zt.type]:qt[Zt.type])&&(Jt+="\nthis.gl."+Qt+";"),new Function("value",Jt)},jt=function(Kt,Zt){for(var Qt=Zt,Jt=0,$t;Jt<Kt.length-1;Jt++)$t=Qt[Kt[Jt]]||{data:{}},Qt[Kt[Jt]]=$t,Qt=$t;return Qt},Wt=["return this.data.%%.value;"].join("\n"),zt=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),Vt={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},qt={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};Xt.exports=function(Kt,Zt){for(var Qt={data:{},gl:Kt},Jt=Object.keys(Zt),$t=0;$t<Jt.length;$t++){var en=Jt[$t],tn=en.split("."),nn=tn[tn.length-1],an=jt(tn,Qt),rn=Zt[en];an.data[nn]=rn,an.gl=Kt,Object.defineProperty(an,nn,{get:Yt(nn),set:Ht(nn,rn)})}return Qt}},{}],19:[function(Bt,Xt){Xt.exports={compileProgram:Bt("./compileProgram"),defaultValue:Bt("./defaultValue"),extractAttributes:Bt("./extractAttributes"),extractUniforms:Bt("./extractUniforms"),generateUniformAccessObject:Bt("./generateUniformAccessObject"),setPrecision:Bt("./setPrecision"),mapSize:Bt("./mapSize"),mapType:Bt("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21,"./setPrecision":22}],20:[function(Bt,Xt){var Yt={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};Xt.exports=function(Ht){return Yt[Ht]}},{}],21:[function(Bt,Xt){var Yt=null,Ht={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};Xt.exports=function(jt,Wt){if(!Yt){var zt=Object.keys(Ht);Yt={};for(var Vt=0,qt;Vt<zt.length;++Vt)qt=zt[Vt],Yt[jt[qt]]=Ht[qt]}return Yt[Wt]}},{}],22:[function(Bt,Xt){Xt.exports=function(Yt,Ht){return"precision"===Yt.substring(0,9)?Yt:"precision "+Ht+" float;\n"+Yt}},{}],23:[function(Bt,Xt,Gt){(function(Yt){function Ht(qt,Kt){for(var Zt=0,Qt=qt.length-1,Jt;0<=Qt;Qt--)Jt=qt[Qt],"."===Jt?qt.splice(Qt,1):".."===Jt?(qt.splice(Qt,1),Zt++):Zt&&(qt.splice(Qt,1),Zt--);if(Kt)for(;Zt--;Zt)qt.unshift("..");return qt}function jt(qt,Kt){if(qt.filter)return qt.filter(Kt);for(var Zt=[],Qt=0;Qt<qt.length;Qt++)Kt(qt[Qt],Qt,qt)&&Zt.push(qt[Qt]);return Zt}var Wt=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,zt=function(qt){return Wt.exec(qt).slice(1)};Gt.resolve=function(){for(var qt="",Kt=!1,Zt=arguments.length-1,Qt;-1<=Zt&&!Kt;Zt--){if(Qt=0<=Zt?arguments[Zt]:Yt.cwd(),"string"!=typeof Qt)throw new TypeError("Arguments to path.resolve must be strings");Qt&&(qt=Qt+"/"+qt,Kt="/"===Qt.charAt(0))}return qt=Ht(jt(qt.split("/"),function(Jt){return!!Jt}),!Kt).join("/"),(Kt?"/":"")+qt||"."},Gt.normalize=function(qt){var Kt=Gt.isAbsolute(qt),Zt="/"===Vt(qt,-1);return(qt=Ht(jt(qt.split("/"),function(Qt){return!!Qt}),!Kt).join("/"))||Kt||(qt="."),qt&&Zt&&(qt+="/"),(Kt?"/":"")+qt},Gt.isAbsolute=function(qt){return"/"===qt.charAt(0)},Gt.join=function(){var qt=Array.prototype.slice.call(arguments,0);return Gt.normalize(jt(qt,function(Kt){if("string"!=typeof Kt)throw new TypeError("Arguments to path.join must be strings");return Kt}).join("/"))},Gt.relative=function(qt,Kt){function Zt(an){for(var rn=0;rn<an.length&&""===an[rn];rn++);for(var on=an.length-1;0<=on&&""===an[on];on--);return rn>on?[]:an.slice(rn,on-rn+1)}qt=Gt.resolve(qt).substr(1),Kt=Gt.resolve(Kt).substr(1);for(var Qt=Zt(qt.split("/")),Jt=Zt(Kt.split("/")),$t=Math.min(Qt.length,Jt.length),en=$t,tn=0;tn<$t;tn++)if(Qt[tn]!==Jt[tn]){en=tn;break}var nn=[];for(tn=en;tn<Qt.length;tn++)nn.push("..");return(nn=nn.concat(Jt.slice(en))).join("/")},Gt.sep="/",Gt.delimiter=":",Gt.dirname=function(qt){var Kt=zt(qt),Zt=Kt[0],Qt=Kt[1];return Zt||Qt?(Qt&&(Qt=Qt.substr(0,Qt.length-1)),Zt+Qt):"."},Gt.basename=function(qt,Kt){var Zt=zt(qt)[2];return Kt&&Zt.substr(-1*Kt.length)===Kt&&(Zt=Zt.substr(0,Zt.length-Kt.length)),Zt},Gt.extname=function(qt){return zt(qt)[3]};var Vt=function(qt,Kt,Zt){return qt.substr(Kt,Zt)}}).call(this,Bt("_process"))},{_process:24}],24:[function(Bt,Xt){function Yt(){throw new Error("setTimeout has not been defined")}function Ht(){throw new Error("clearTimeout has not been defined")}function jt(nn){if(Kt===setTimeout)return setTimeout(nn,0);if((Kt===Yt||!Kt)&&setTimeout)return Kt=setTimeout,setTimeout(nn,0);try{return Kt(nn,0)}catch(an){try{return Kt.call(null,nn,0)}catch(rn){return Kt.call(this,nn,0)}}}function Wt(){en&&Jt&&(en=!1,Jt.length?$t=Jt.concat($t):tn=-1,$t.length&&zt())}function zt(){if(!en){var nn=jt(Wt);en=!0;for(var an=$t.length;an;){for(Jt=$t,$t=[];++tn<an;)Jt&&Jt[tn].run();tn=-1,an=$t.length}Jt=null,en=!1,function(rn){if(Zt===clearTimeout)return clearTimeout(rn);if((Zt===Ht||!Zt)&&clearTimeout)return Zt=clearTimeout,clearTimeout(rn);try{Zt(rn)}catch(on){try{return Zt.call(null,rn)}catch(sn){return Zt.call(this,rn)}}}(nn)}}function Vt(nn,an){this.fun=nn,this.array=an}function qt(){}var Qt=Xt.exports={},Kt,Zt;!function(){try{Kt="function"==typeof setTimeout?setTimeout:Yt}catch(nn){Kt=Yt}try{Zt="function"==typeof clearTimeout?clearTimeout:Ht}catch(nn){Zt=Ht}}();var $t=[],en=!1,tn=-1,Jt;Qt.nextTick=function(nn){var an=Array(arguments.length-1);if(1<arguments.length)for(var rn=1;rn<arguments.length;rn++)an[rn-1]=arguments[rn];$t.push(new Vt(nn,an)),1!==$t.length||en||jt(zt)},Vt.prototype.run=function(){this.fun.apply(null,this.array)},Qt.title="browser",Qt.browser=!0,Qt.env={},Qt.argv=[],Qt.version="",Qt.versions={},Qt.on=qt,Qt.addListener=qt,Qt.once=qt,Qt.off=qt,Qt.removeListener=qt,Qt.removeAllListeners=qt,Qt.emit=qt,Qt.prependListener=qt,Qt.prependOnceListener=qt,Qt.listeners=function(){return[]},Qt.binding=function(){throw new Error("process.binding is not supported")},Qt.cwd=function(){return"/"},Qt.chdir=function(){throw new Error("process.chdir is not supported")},Qt.umask=function(){return 0}},{}],25:[function(Bt,Xt,Gt){(function(Yt){!function(Ht){function jt(Tn){throw new RangeError(_n[Tn])}function Wt(Tn,En){for(var Sn=Tn.length,wn=[];Sn--;)wn[Sn]=En(Tn[Sn]);return wn}function zt(Tn,En){var Sn=Tn.split("@"),wn="";return 1<Sn.length&&(wn=Sn[0]+"@",Tn=Sn[1]),wn+Wt((Tn=Tn.replace(yn,".")).split("."),En).join(".")}function Vt(Tn){for(var wn=[],Cn=0,Pn=Tn.length,En,Sn;Cn<Pn;)55296<=(En=Tn.charCodeAt(Cn++))&&56319>=En&&Cn<Pn?56320==(64512&(Sn=Tn.charCodeAt(Cn++)))?wn.push(((1023&En)<<10)+(1023&Sn)+65536):(wn.push(En),Cn--):wn.push(En);return wn}function qt(Tn){return Wt(Tn,function(En){var Sn="";return 65535<En&&(Sn+=vn(55296|1023&(En-=65536)>>>10),En=56320|1023&En),Sn+=vn(En)}).join("")}function Kt(Tn){return 10>Tn-48?Tn-22:26>Tn-65?Tn-65:26>Tn-97?Tn-97:sn}function Zt(Tn,En){return Tn+22+75*(26>Tn)-((0!=En)<<5)}function Qt(Tn,En,Sn){var wn=0;for(Tn=Sn?xn(Tn/700):Tn>>1,Tn+=xn(Tn/En);Tn>bn*ln>>1;wn+=sn)Tn=xn(Tn/bn);return xn(wn+(bn+1)*Tn/(Tn+38))}function Jt(Tn){var On=[],Ln=Tn.length,kn=0,Nn=hn,Fn=cn,En,Sn,wn,Cn,Pn,An,Mn,Rn,In,Dn;for(0>(Sn=Tn.lastIndexOf(fn))&&(Sn=0),wn=0;wn<Sn;++wn)128<=Tn.charCodeAt(wn)&&jt("not-basic"),On.push(Tn.charCodeAt(wn));for(Cn=0<Sn?Sn+1:0;Cn<Ln;){for(Pn=kn,An=1,Mn=sn;Cn>=Ln&&jt("invalid-input"),((Rn=Kt(Tn.charCodeAt(Cn++)))>=sn||Rn>xn((on-kn)/An))&&jt("overflow"),kn+=Rn*An,In=Mn<=Fn?dn:Mn>=Fn+ln?ln:Mn-Fn,!(Rn<In);Mn+=sn)An>xn(on/(Dn=sn-In))&&jt("overflow"),An*=Dn;Fn=Qt(kn-Pn,En=On.length+1,0==Pn),xn(kn/En)>on-Nn&&jt("overflow"),Nn+=xn(kn/En),kn%=En,On.splice(kn++,0,Nn)}return qt(On)}function $t(Tn){var Bn=[],En,Sn,wn,Cn,Pn,An,Mn,Rn,In,Dn,On,Ln,kn,Nn,Fn;for(Ln=(Tn=Vt(Tn)).length,En=hn,Sn=0,Pn=cn,An=0;An<Ln;++An)128>(On=Tn[An])&&Bn.push(vn(On));for(wn=Cn=Bn.length,Cn&&Bn.push(fn);wn<Ln;){for(Mn=on,An=0;An<Ln;++An)(On=Tn[An])>=En&&On<Mn&&(Mn=On);for(Mn-En>xn((on-Sn)/(kn=wn+1))&&jt("overflow"),Sn+=(Mn-En)*kn,En=Mn,An=0;An<Ln;++An)if((On=Tn[An])<En&&++Sn>on&&jt("overflow"),On==En){for(Rn=Sn,In=sn;Dn=In<=Pn?dn:In>=Pn+ln?ln:In-Pn,!(Rn<Dn);In+=sn)Fn=Rn-Dn,Nn=sn-Dn,Bn.push(vn(Zt(Dn+Fn%Nn,0))),Rn=xn(Fn/Nn);Bn.push(vn(Zt(Rn,0))),Pn=Qt(Sn,kn,wn==Cn),Sn=0,++wn}++Sn,++En}return Bn.join("")}var en="object"==typeof Gt&&Gt&&!Gt.nodeType&&Gt,tn="object"==typeof Xt&&Xt&&!Xt.nodeType&&Xt,nn="object"==typeof Yt&&Yt;nn.global!==nn&&nn.window!==nn&&nn.self!==nn||(Ht=nn);var on=2147483647,sn=36,dn=1,ln=26,cn=72,hn=128,fn="-",gn=/^xn--/,mn=/[^\x20-\x7E]/,yn=/[\x2E\u3002\uFF0E\uFF61]/g,_n={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},bn=sn-dn,xn=Math.floor,vn=String.fromCharCode,an,rn;if(!(an={version:"1.4.1",ucs2:{decode:Vt,encode:qt},decode:Jt,encode:$t,toASCII:function(Tn){return zt(Tn,function(En){return mn.test(En)?"xn--"+$t(En):En})},toUnicode:function(Tn){return zt(Tn,function(En){return gn.test(En)?Jt(En.slice(4).toLowerCase()):En})}},en&&tn))Ht.punycode=an;else if(Xt.exports==en)tn.exports=an;else for(rn in an)an.hasOwnProperty(rn)&&(en[rn]=an[rn])}(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],26:[function(Bt,Xt){function Yt(jt,Wt){return Object.prototype.hasOwnProperty.call(jt,Wt)}Xt.exports=function(jt,Wt,zt,Vt){Wt=Wt||"&",zt=zt||"=";var qt={};if("string"!=typeof jt||0===jt.length)return qt;var Kt=/\+/g;jt=jt.split(Wt);var Zt=1e3;Vt&&"number"==typeof Vt.maxKeys&&(Zt=Vt.maxKeys);var Qt=jt.length;0<Zt&&Qt>Zt&&(Qt=Zt);for(var Jt=0;Jt<Qt;++Jt){var an=jt[Jt].replace(Kt,"%20"),rn=an.indexOf(zt),$t,en,tn,nn;0<=rn?($t=an.substr(0,rn),en=an.substr(rn+1)):($t=an,en=""),tn=decodeURIComponent($t),nn=decodeURIComponent(en),Yt(qt,tn)?Ht(qt[tn])?qt[tn].push(nn):qt[tn]=[qt[tn],nn]:qt[tn]=nn}return qt};var Ht=Array.isArray||function(jt){return"[object Array]"===Object.prototype.toString.call(jt)}},{}],27:[function(Bt,Xt){function Yt(zt,Vt){if(zt.map)return zt.map(Vt);for(var qt=[],Kt=0;Kt<zt.length;Kt++)qt.push(Vt(zt[Kt],Kt));return qt}var Ht=function(zt){switch(typeof zt){case"string":return zt;case"boolean":return zt?"true":"false";case"number":return isFinite(zt)?zt:"";default:return"";}};Xt.exports=function(zt,Vt,qt,Kt){return Vt=Vt||"&",qt=qt||"=",null===zt&&(zt=void 0),"object"==typeof zt?Yt(Wt(zt),function(Zt){var Qt=encodeURIComponent(Ht(Zt))+qt;return jt(zt[Zt])?Yt(zt[Zt],function(Jt){return Qt+encodeURIComponent(Ht(Jt))}).join(Vt):Qt+encodeURIComponent(Ht(zt[Zt]))}).join(Vt):Kt?encodeURIComponent(Ht(Kt))+qt+encodeURIComponent(Ht(zt)):""};var jt=Array.isArray||function(zt){return"[object Array]"===Object.prototype.toString.call(zt)},Wt=Object.keys||function(zt){var Vt=[];for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&Vt.push(qt);return Vt}},{}],28:[function(Bt,Xt,Gt){Gt.decode=Gt.parse=Bt("./decode"),Gt.encode=Gt.stringify=Bt("./encode")},{"./decode":26,"./encode":27}],29:[function(Bt,Xt,Gt){function Yt(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Ht(on,sn,dn){if(on&&Wt.isObject(on)&&on instanceof Yt)return on;var ln=new Yt;return ln.parse(on,sn,dn),ln}var jt=Bt("punycode"),Wt=Bt("./util");Gt.parse=Ht,Gt.resolve=function(on,sn){return Ht(on,!1,!0).resolve(sn)},Gt.resolveObject=function(on,sn){return on?Ht(on,!1,!0).resolveObject(sn):sn},Gt.format=function(on){return Wt.isString(on)&&(on=Ht(on)),on instanceof Yt?on.format():Yt.prototype.format.call(on)},Gt.Url=Yt;var zt=/^([a-z0-9.+-]+:)/i,Vt=/:[0-9]*$/,qt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Kt=["{","}","|","\\","^","`"].concat(["<",">","\"","`"," ","\r","\n","\t"]),Zt=["'"].concat(Kt),Qt=["%","/","?",";","#"].concat(Zt),Jt=["/","?","#"],$t=/^[+a-z0-9A-Z_-]{0,63}$/,en=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,tn={javascript:!0,"javascript:":!0},nn={javascript:!0,"javascript:":!0},an={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},rn=Bt("querystring");Yt.prototype.parse=function(on,sn,dn){if(!Wt.isString(on))throw new TypeError("Parameter 'url' must be a string, not "+typeof on);var ln=on.indexOf("?"),un=-1!==ln&&ln<on.indexOf("#")?"?":"#",pn=on.split(un);pn[0]=pn[0].replace(/\\/g,"/");var cn=on=pn.join(un);if(cn=cn.trim(),!dn&&1===on.split("#").length){var hn=qt.exec(cn);if(hn)return this.path=cn,this.href=cn,this.pathname=hn[1],hn[2]?(this.search=hn[2],this.query=sn?rn.parse(this.search.substr(1)):this.search.substr(1)):sn&&(this.search="",this.query={}),this}var fn=zt.exec(cn);if(fn){var gn=(fn=fn[0]).toLowerCase();this.protocol=gn,cn=cn.substr(fn.length)}if(dn||fn||cn.match(/^\/\/[^@\/]+@[^@\/]+/)){var mn="//"===cn.substr(0,2);!mn||fn&&nn[fn]||(cn=cn.substr(2),this.slashes=!0)}if(!nn[fn]&&(mn||fn&&!an[fn])){for(var yn=-1,_n=0;_n<Jt.length;_n++)-1!==(vn=cn.indexOf(Jt[_n]))&&(-1===yn||vn<yn)&&(yn=vn);var bn,xn;for(-1!==(xn=-1===yn?cn.lastIndexOf("@"):cn.lastIndexOf("@",yn))&&(bn=cn.slice(0,xn),cn=cn.slice(xn+1),this.auth=decodeURIComponent(bn)),yn=-1,_n=0;_n<Qt.length;_n++){var vn;-1!==(vn=cn.indexOf(Qt[_n]))&&(-1===yn||vn<yn)&&(yn=vn)}-1===yn&&(yn=cn.length),this.host=cn.slice(0,yn),cn=cn.slice(yn),this.parseHost(),this.hostname=this.hostname||"";var Tn="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Tn)for(var En=this.hostname.split(/\./),Sn=(_n=0,En.length),wn;_n<Sn;_n++)if(wn=En[_n],wn&&!wn.match($t)){for(var Cn="",Pn=0,An=wn.length;Pn<An;Pn++)Cn+=127<wn.charCodeAt(Pn)?"x":wn[Pn];if(!Cn.match($t)){var Mn=En.slice(0,_n),Rn=En.slice(_n+1),In=wn.match(en);In&&(Mn.push(In[1]),Rn.unshift(In[2])),Rn.length&&(cn="/"+Rn.join(".")+cn),this.hostname=Mn.join(".");break}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),Tn||(this.hostname=jt.toASCII(this.hostname));var Dn=this.port?":"+this.port:"",On=this.hostname||"";this.host=On+Dn,this.href+=this.host,Tn&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==cn[0]&&(cn="/"+cn))}if(!tn[gn])for(_n=0,Sn=Zt.length;_n<Sn;_n++){var Ln=Zt[_n];if(-1!==cn.indexOf(Ln)){var kn=encodeURIComponent(Ln);kn===Ln&&(kn=escape(Ln)),cn=cn.split(Ln).join(kn)}}var Nn=cn.indexOf("#");-1!==Nn&&(this.hash=cn.substr(Nn),cn=cn.slice(0,Nn));var Fn=cn.indexOf("?");if(-1===Fn?sn&&(this.search="",this.query={}):(this.search=cn.substr(Fn),this.query=cn.substr(Fn+1),sn&&(this.query=rn.parse(this.query)),cn=cn.slice(0,Fn)),cn&&(this.pathname=cn),an[gn]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){Dn=this.pathname||"";var Bn=this.search||"";this.path=Dn+Bn}return this.href=this.format(),this},Yt.prototype.format=function(){var on=this.auth||"";on&&(on=(on=encodeURIComponent(on)).replace(/%3A/i,":"),on+="@");var sn=this.protocol||"",dn=this.pathname||"",ln=this.hash||"",un=!1,pn="";this.host?un=on+this.host:this.hostname&&(un=on+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(un+=":"+this.port)),this.query&&Wt.isObject(this.query)&&Object.keys(this.query).length&&(pn=rn.stringify(this.query));var cn=this.search||pn&&"?"+pn||"";return sn&&":"!==sn.substr(-1)&&(sn+=":"),this.slashes||(!sn||an[sn])&&!1!==un?(un="//"+(un||""),dn&&"/"!==dn.charAt(0)&&(dn="/"+dn)):un||(un=""),ln&&"#"!==ln.charAt(0)&&(ln="#"+ln),cn&&"?"!==cn.charAt(0)&&(cn="?"+cn),dn=dn.replace(/[?#]/g,function(hn){return encodeURIComponent(hn)}),cn=cn.replace("#","%23"),sn+un+dn+cn+ln},Yt.prototype.resolve=function(on){return this.resolveObject(Ht(on,!1,!0)).format()},Yt.prototype.resolveObject=function(on){if(Wt.isString(on)){var sn=new Yt;sn.parse(on,!1,!0),on=sn}for(var dn=new Yt,ln=Object.keys(this),un=0,pn;un<ln.length;un++)pn=ln[un],dn[pn]=this[pn];if(dn.hash=on.hash,""===on.href)return dn.href=dn.format(),dn;if(on.slashes&&!on.protocol){for(var cn=Object.keys(on),hn=0,fn;hn<cn.length;hn++)fn=cn[hn],"protocol"!==fn&&(dn[fn]=on[fn]);return an[dn.protocol]&&dn.hostname&&!dn.pathname&&(dn.path=dn.pathname="/"),dn.href=dn.format(),dn}if(on.protocol&&on.protocol!==dn.protocol){if(!an[on.protocol]){for(var gn=Object.keys(on),mn=0,yn;mn<gn.length;mn++)yn=gn[mn],dn[yn]=on[yn];return dn.href=dn.format(),dn}if(dn.protocol=on.protocol,on.host||nn[on.protocol])dn.pathname=on.pathname;else{for(var _n=(on.pathname||"").split("/");_n.length&&!(on.host=_n.shift()););on.host||(on.host=""),on.hostname||(on.hostname=""),""!==_n[0]&&_n.unshift(""),2>_n.length&&_n.unshift(""),dn.pathname=_n.join("/")}if(dn.search=on.search,dn.query=on.query,dn.host=on.host||"",dn.auth=on.auth,dn.hostname=on.hostname||on.host,dn.port=on.port,dn.pathname||dn.search){var bn=dn.pathname||"",xn=dn.search||"";dn.path=bn+xn}return dn.slashes=dn.slashes||on.slashes,dn.href=dn.format(),dn}var vn=dn.pathname&&"/"===dn.pathname.charAt(0),Tn=on.host||on.pathname&&"/"===on.pathname.charAt(0),En=Tn||vn||dn.host&&on.pathname,Sn=En,wn=dn.pathname&&dn.pathname.split("/")||[],Cn=(_n=on.pathname&&on.pathname.split("/")||[],dn.protocol&&!an[dn.protocol]);if(Cn&&(dn.hostname="",dn.port=null,dn.host&&(""===wn[0]?wn[0]=dn.host:wn.unshift(dn.host)),dn.host="",on.protocol&&(on.hostname=null,on.port=null,on.host&&(""===_n[0]?_n[0]=on.host:_n.unshift(on.host)),on.host=null),En=En&&(""===_n[0]||""===wn[0])),Tn)dn.host=on.host||""===on.host?on.host:dn.host,dn.hostname=on.hostname||""===on.hostname?on.hostname:dn.hostname,dn.search=on.search,dn.query=on.query,wn=_n;else if(_n.length)wn||(wn=[]),wn.pop(),wn=wn.concat(_n),dn.search=on.search,dn.query=on.query;else if(!Wt.isNullOrUndefined(on.search))return Cn&&(dn.hostname=dn.host=wn.shift(),(Dn=!!(dn.host&&0<dn.host.indexOf("@"))&&dn.host.split("@"))&&(dn.auth=Dn.shift(),dn.host=dn.hostname=Dn.shift())),dn.search=on.search,dn.query=on.query,Wt.isNull(dn.pathname)&&Wt.isNull(dn.search)||(dn.path=(dn.pathname?dn.pathname:"")+(dn.search?dn.search:"")),dn.href=dn.format(),dn;if(!wn.length)return dn.pathname=null,dn.path=dn.search?"/"+dn.search:null,dn.href=dn.format(),dn;for(var Pn=wn.slice(-1)[0],An=(dn.host||on.host||1<wn.length)&&("."===Pn||".."===Pn)||""===Pn,Mn=0,Rn=wn.length;0<=Rn;Rn--)"."===(Pn=wn[Rn])?wn.splice(Rn,1):".."===Pn?(wn.splice(Rn,1),Mn++):Mn&&(wn.splice(Rn,1),Mn--);if(!En&&!Sn)for(;Mn--;Mn)wn.unshift("..");!En||""===wn[0]||wn[0]&&"/"===wn[0].charAt(0)||wn.unshift(""),An&&"/"!==wn.join("/").substr(-1)&&wn.push("");var In=""===wn[0]||wn[0]&&"/"===wn[0].charAt(0);if(Cn){dn.hostname=dn.host=In?"":wn.length?wn.shift():"";var Dn;(Dn=!!(dn.host&&0<dn.host.indexOf("@"))&&dn.host.split("@"))&&(dn.auth=Dn.shift(),dn.host=dn.hostname=Dn.shift())}return(En=En||dn.host&&wn.length)&&!In&&wn.unshift(""),wn.length?dn.pathname=wn.join("/"):(dn.pathname=null,dn.path=null),Wt.isNull(dn.pathname)&&Wt.isNull(dn.search)||(dn.path=(dn.pathname?dn.pathname:"")+(dn.search?dn.search:"")),dn.auth=on.auth||dn.auth,dn.slashes=dn.slashes||on.slashes,dn.href=dn.format(),dn},Yt.prototype.parseHost=function(){var on=this.host,sn=Vt.exec(on);sn&&(":"!==(sn=sn[0])&&(this.port=sn.substr(1)),on=on.substr(0,on.length-sn.length)),on&&(this.hostname=on)}},{"./util":30,punycode:25,querystring:28}],30:[function(Bt,Xt){Xt.exports={isString:function(Yt){return"string"==typeof Yt},isObject:function(Yt){return"object"==typeof Yt&&null!==Yt},isNull:function(Yt){return null===Yt},isNullOrUndefined:function(Yt){return null==Yt}}},{}],31:[function(Bt,Xt){Xt.exports=function(Yt,Ht,jt){var zt=Yt.length,Wt;if(!(Ht>=zt||0===jt)){var Vt=zt-(jt=Ht+jt>zt?zt-Ht:jt);for(Wt=Ht;Wt<Vt;++Wt)Yt[Wt]=Yt[Wt+jt];Yt.length=Vt}}},{}],32:[function(Bt,Xt,Gt){function Yt(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Gt.__esModule=!0;var Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Zt){return typeof Zt}:function(Zt){return Zt&&"function"==typeof Symbol&&Zt.constructor===Symbol&&Zt!==Symbol.prototype?"symbol":typeof Zt},jt=Yt(Bt("mini-signals")),Wt=Yt(Bt("parse-uri")),zt=function(Zt){if(Zt&&Zt.__esModule)return Zt;var Qt={};if(null!=Zt)for(var Jt in Zt)Object.prototype.hasOwnProperty.call(Zt,Jt)&&(Qt[Jt]=Zt[Jt]);return Qt.default=Zt,Qt}(Bt("./async")),Vt=Yt(Bt("./Resource")),qt=/(#[\w-]+)?$/,Kt=function(){function Zt(){var Qt=this,Jt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",$t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Zt),this.baseUrl=Jt,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(en,tn){return Qt._loadResource(en,tn)},this._queue=zt.queue(this._boundLoadResource,$t),this._queue.pause(),this.resources={},this.onProgress=new jt.default,this.onError=new jt.default,this.onLoad=new jt.default,this.onStart=new jt.default,this.onComplete=new jt.default}return Zt.prototype.add=function(Qt,Jt,$t,en){if(Array.isArray(Qt)){for(var tn=0;tn<Qt.length;++tn)this.add(Qt[tn]);return this}if("object"===(void 0===Qt?"undefined":Ht(Qt))&&(en=Jt||Qt.callback||Qt.onComplete,$t=Qt,Jt=Qt.url,Qt=Qt.name||Qt.key||Qt.url),"string"!=typeof Jt&&(en=$t,$t=Jt,Jt=Qt),"string"!=typeof Jt)throw new Error("No url passed to add resource to loader.");if("function"==typeof $t&&(en=$t,$t=null),this.loading&&(!$t||!$t.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[Qt])throw new Error("Resource named \""+Qt+"\" already exists.");if(Jt=this._prepareUrl(Jt),this.resources[Qt]=new Vt.default(Qt,Jt,$t),"function"==typeof en&&this.resources[Qt].onAfterMiddleware.once(en),this.loading){for(var nn=$t.parentResource,an=[],rn=0;rn<nn.children.length;++rn)nn.children[rn].isComplete||an.push(nn.children[rn]);var on=nn.progressChunk*(an.length+1)/(an.length+2);nn.children.push(this.resources[Qt]),nn.progressChunk=on;for(var sn=0;sn<an.length;++sn)an[sn].progressChunk=on;this.resources[Qt].progressChunk=on}return this._queue.push(this.resources[Qt]),this},Zt.prototype.pre=function(Qt){return this._beforeMiddleware.push(Qt),this},Zt.prototype.use=function(Qt){return this._afterMiddleware.push(Qt),this},Zt.prototype.reset=function(){for(var Qt in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var Jt=this.resources[Qt];Jt._onLoadBinding&&Jt._onLoadBinding.detach(),Jt.isLoading&&Jt.abort()}return this.resources={},this},Zt.prototype.load=function(Qt){if("function"==typeof Qt&&this.onComplete.once(Qt),this.loading)return this;for(var Jt=100/this._queue._tasks.length,$t=0;$t<this._queue._tasks.length;++$t)this._queue._tasks[$t].data.progressChunk=Jt;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},Zt.prototype._prepareUrl=function(Qt){var Jt=(0,Wt.default)(Qt,{strictMode:!0}),$t;if($t=Jt.protocol||!Jt.path||0===Qt.indexOf("//")?Qt:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==Qt.charAt(0)?this.baseUrl+"/"+Qt:this.baseUrl+Qt,this.defaultQueryString){var en=qt.exec($t)[0];$t+=-1===($t=$t.substr(0,$t.length-en.length)).indexOf("?")?"?"+this.defaultQueryString:"&"+this.defaultQueryString,$t+=en}return $t},Zt.prototype._loadResource=function(Qt,Jt){var $t=this;Qt._dequeue=Jt,zt.eachSeries(this._beforeMiddleware,function(en,tn){en.call($t,Qt,function(){tn(Qt.isComplete?{}:null)})},function(){Qt.isComplete?$t._onLoad(Qt):(Qt._onLoadBinding=Qt.onComplete.once($t._onLoad,$t),Qt.load())},!0)},Zt.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},Zt.prototype._onLoad=function(Qt){var Jt=this;Qt._onLoadBinding=null,this._resourcesParsing.push(Qt),Qt._dequeue(),zt.eachSeries(this._afterMiddleware,function($t,en){$t.call(Jt,Qt,en)},function(){Qt.onAfterMiddleware.dispatch(Qt),Jt.progress+=Qt.progressChunk,Jt.onProgress.dispatch(Jt,Qt),Qt.error?Jt.onError.dispatch(Qt.error,Jt,Qt):Jt.onLoad.dispatch(Jt,Qt),Jt._resourcesParsing.splice(Jt._resourcesParsing.indexOf(Qt),1),Jt._queue.idle()&&0===Jt._resourcesParsing.length&&(Jt.progress=100,Jt._onComplete())},!0)},Zt}();Gt.default=Kt},{"./Resource":33,"./async":34,"mini-signals":38,"parse-uri":39}],33:[function(Bt,Xt,Gt){function Yt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}function Ht(){}function jt(Jt,$t,en){$t&&0===$t.indexOf(".")&&($t=$t.substring(1)),$t&&(Jt[$t]=en)}function Wt(Jt){return Jt.toString().replace("object ","")}Gt.__esModule=!0;var zt=function(){function Jt($t,en){for(var tn=0,nn;tn<en.length;tn++)nn=en[tn],nn.enumerable=nn.enumerable||!1,nn.configurable=!0,"value"in nn&&(nn.writable=!0),Object.defineProperty($t,nn.key,nn)}return function($t,en,tn){return en&&Jt($t.prototype,en),tn&&Jt($t,tn),$t}}(),Vt=Yt(Bt("parse-uri")),qt=Yt(Bt("mini-signals")),Kt=window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest),Zt=null,Qt=function(){function Jt($t,en,tn){if(function(nn,an){if(!(nn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,Jt),"string"!=typeof $t||"string"!=typeof en)throw new Error("Both name and url are required for constructing a resource.");tn=tn||{},this._flags=0,this._setFlag(Jt.STATUS_FLAGS.DATA_URL,0===en.indexOf("data:")),this.name=$t,this.url=en,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===tn.crossOrigin?"anonymous":tn.crossOrigin,this.loadType=tn.loadType||this._determineLoadType(),this.xhrType=tn.xhrType,this.metadata=tn.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=Jt.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Ht,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new qt.default,this.onProgress=new qt.default,this.onComplete=new qt.default,this.onAfterMiddleware=new qt.default}return Jt.setExtensionLoadType=function($t,en){jt(Jt._loadTypeMap,$t,en)},Jt.setExtensionXhrType=function($t,en){jt(Jt._xhrTypeMap,$t,en)},Jt.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(Jt.STATUS_FLAGS.COMPLETE,!0),this._setFlag(Jt.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},Jt.prototype.abort=function($t){if(!this.error){if(this.error=new Error($t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=Jt.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},Jt.prototype.load=function($t){var en=this;if(!this.isLoading)if(this.isComplete)$t&&setTimeout(function(){return $t(en)},1);else switch($t&&this.onComplete.once($t),this._setFlag(Jt.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Jt.LOAD_TYPE.IMAGE:this.type=Jt.TYPE.IMAGE,this._loadElement("image");break;case Jt.LOAD_TYPE.AUDIO:this.type=Jt.TYPE.AUDIO,this._loadSourceElement("audio");break;case Jt.LOAD_TYPE.VIDEO:this.type=Jt.TYPE.VIDEO,this._loadSourceElement("video");break;case Jt.LOAD_TYPE.XHR:default:Kt&&this.crossOrigin?this._loadXdr():this._loadXhr();}},Jt.prototype._hasFlag=function($t){return!!(this._flags&$t)},Jt.prototype._setFlag=function($t,en){this._flags=en?this._flags|$t:this._flags&~$t},Jt.prototype._loadElement=function($t){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===$t&&void 0!==window.Image?new Image:document.createElement($t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},Jt.prototype._loadSourceElement=function($t){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===$t&&void 0!==window.Audio?new Audio:document.createElement($t),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var en=this.metadata.mimeType,tn=0;tn<this.url.length;++tn)this.data.appendChild(this._createSource($t,this.url[tn],Array.isArray(en)?en[tn]:en));else{var nn=this.metadata.mimeType;this.data.appendChild(this._createSource($t,this.url,Array.isArray(nn)?nn[0]:nn))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+$t)},Jt.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var $t=this.xhr=new XMLHttpRequest;$t.open("GET",this.url,!0),$t.responseType=this.xhrType===Jt.XHR_RESPONSE_TYPE.JSON||this.xhrType===Jt.XHR_RESPONSE_TYPE.DOCUMENT?Jt.XHR_RESPONSE_TYPE.TEXT:this.xhrType,$t.addEventListener("error",this._boundXhrOnError,!1),$t.addEventListener("abort",this._boundXhrOnAbort,!1),$t.addEventListener("progress",this._boundOnProgress,!1),$t.addEventListener("load",this._boundXhrOnLoad,!1),$t.send()},Jt.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var $t=this.xhr=new XDomainRequest;$t.timeout=5e3,$t.onerror=this._boundXhrOnError,$t.ontimeout=this._boundXdrOnTimeout,$t.onprogress=this._boundOnProgress,$t.onload=this._boundXhrOnLoad,$t.open("GET",this.url,!0),setTimeout(function(){return $t.send()},1)},Jt.prototype._createSource=function($t,en,tn){tn||(tn=$t+"/"+this._getExtension(en));var nn=document.createElement("source");return nn.src=en,nn.type=tn,nn},Jt.prototype._onError=function($t){this.abort("Failed to load element using: "+$t.target.nodeName)},Jt.prototype._onProgress=function($t){$t&&$t.lengthComputable&&this.onProgress.dispatch(this,$t.loaded/$t.total)},Jt.prototype._xhrOnError=function(){var $t=this.xhr;this.abort(Wt($t)+" Request failed. Status: "+$t.status+", text: \""+$t.statusText+"\"")},Jt.prototype._xhrOnAbort=function(){this.abort(Wt(this.xhr)+" Request was aborted by the user.")},Jt.prototype._xdrOnTimeout=function(){this.abort(Wt(this.xhr)+" Request timed out.")},Jt.prototype._xhrOnLoad=function(){var $t=this.xhr,en="",tn=void 0===$t.status?200:$t.status;if(""!==$t.responseType&&"text"!==$t.responseType&&void 0!==$t.responseType||(en=$t.responseText),0===tn&&0<en.length?tn=200:1223==tn&&(tn=204),2==(0|tn/100)){if(this.xhrType===Jt.XHR_RESPONSE_TYPE.TEXT)this.data=en,this.type=Jt.TYPE.TEXT;else if(this.xhrType===Jt.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(en),this.type=Jt.TYPE.JSON}catch(rn){return void this.abort("Error trying to parse loaded json: "+rn)}else if(this.xhrType===Jt.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var nn=new DOMParser;this.data=nn.parseFromString(en,"text/xml")}else{var an=document.createElement("div");an.innerHTML=en,this.data=an}this.type=Jt.TYPE.XML}catch(rn){return void this.abort("Error trying to parse loaded xml: "+rn)}else this.data=$t.response||en;this.complete()}else this.abort("["+$t.status+"] "+$t.statusText+": "+$t.responseURL)},Jt.prototype._determineCrossOrigin=function($t,en){if(0===$t.indexOf("data:"))return"";en=en||window.location,Zt||(Zt=document.createElement("a")),Zt.href=$t;var tn=!($t=(0,Vt.default)(Zt.href,{strictMode:!0})).port&&""===en.port||$t.port===en.port,nn=$t.protocol?$t.protocol+":":"";return $t.host===en.hostname&&tn&&nn===en.protocol?"":"anonymous"},Jt.prototype._determineXhrType=function(){return Jt._xhrTypeMap[this.extension]||Jt.XHR_RESPONSE_TYPE.TEXT},Jt.prototype._determineLoadType=function(){return Jt._loadTypeMap[this.extension]||Jt.LOAD_TYPE.XHR},Jt.prototype._getExtension=function(){var $t=this.url,en="";if(this.isDataUrl){var tn=$t.indexOf("/");en=$t.substring(tn+1,$t.indexOf(";",tn))}else{var nn=$t.indexOf("?"),an=$t.indexOf("#"),rn=Math.min(-1<nn?nn:$t.length,-1<an?an:$t.length);en=($t=$t.substring(0,rn)).substring($t.lastIndexOf(".")+1)}return en.toLowerCase()},Jt.prototype._getMimeFromXhrType=function($t){switch($t){case Jt.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Jt.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Jt.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Jt.XHR_RESPONSE_TYPE.JSON:return"application/json";case Jt.XHR_RESPONSE_TYPE.DEFAULT:case Jt.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain";}},zt(Jt,[{key:"isDataUrl",get:function(){return this._hasFlag(Jt.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(Jt.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(Jt.STATUS_FLAGS.LOADING)}}]),Jt}();Gt.default=Qt,Qt.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Qt.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Qt.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Qt.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Qt._loadTypeMap={gif:Qt.LOAD_TYPE.IMAGE,png:Qt.LOAD_TYPE.IMAGE,bmp:Qt.LOAD_TYPE.IMAGE,jpg:Qt.LOAD_TYPE.IMAGE,jpeg:Qt.LOAD_TYPE.IMAGE,tif:Qt.LOAD_TYPE.IMAGE,tiff:Qt.LOAD_TYPE.IMAGE,webp:Qt.LOAD_TYPE.IMAGE,tga:Qt.LOAD_TYPE.IMAGE,svg:Qt.LOAD_TYPE.IMAGE,"svg+xml":Qt.LOAD_TYPE.IMAGE,mp3:Qt.LOAD_TYPE.AUDIO,ogg:Qt.LOAD_TYPE.AUDIO,wav:Qt.LOAD_TYPE.AUDIO,mp4:Qt.LOAD_TYPE.VIDEO,webm:Qt.LOAD_TYPE.VIDEO},Qt._xhrTypeMap={xhtml:Qt.XHR_RESPONSE_TYPE.DOCUMENT,html:Qt.XHR_RESPONSE_TYPE.DOCUMENT,htm:Qt.XHR_RESPONSE_TYPE.DOCUMENT,xml:Qt.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Qt.XHR_RESPONSE_TYPE.DOCUMENT,svg:Qt.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Qt.XHR_RESPONSE_TYPE.DOCUMENT,gif:Qt.XHR_RESPONSE_TYPE.BLOB,png:Qt.XHR_RESPONSE_TYPE.BLOB,bmp:Qt.XHR_RESPONSE_TYPE.BLOB,jpg:Qt.XHR_RESPONSE_TYPE.BLOB,jpeg:Qt.XHR_RESPONSE_TYPE.BLOB,tif:Qt.XHR_RESPONSE_TYPE.BLOB,tiff:Qt.XHR_RESPONSE_TYPE.BLOB,webp:Qt.XHR_RESPONSE_TYPE.BLOB,tga:Qt.XHR_RESPONSE_TYPE.BLOB,json:Qt.XHR_RESPONSE_TYPE.JSON,text:Qt.XHR_RESPONSE_TYPE.TEXT,txt:Qt.XHR_RESPONSE_TYPE.TEXT,ttf:Qt.XHR_RESPONSE_TYPE.BUFFER,otf:Qt.XHR_RESPONSE_TYPE.BUFFER},Qt.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":38,"parse-uri":39}],34:[function(Bt,Xt,Gt){function Yt(){}function Ht(jt){return function(){if(null===jt)throw new Error("Callback was already called.");var Wt=jt;jt=null,Wt.apply(this,arguments)}}Gt.__esModule=!0,Gt.eachSeries=function(jt,Wt,zt,Vt){var qt=0,Kt=jt.length;!function Zt(Qt){Qt||qt===Kt?zt&&zt(Qt):Vt?setTimeout(function(){Wt(jt[qt++],Zt)},1):Wt(jt[qt++],Zt)}()},Gt.queue=function(jt,Wt){function zt(Kt,Zt,Qt){if(null!=Qt&&"function"!=typeof Qt)throw new Error("task callback must be a function");if(qt.started=!0,null==Kt&&qt.idle())setTimeout(function(){return qt.drain()},1);else{var Jt={data:Kt,callback:"function"==typeof Qt?Qt:Yt};Zt?qt._tasks.unshift(Jt):qt._tasks.push(Jt),setTimeout(function(){return qt.process()},1)}}if(null==Wt)Wt=1;else if(0===Wt)throw new Error("Concurrency must not be zero");var Vt=0,qt={_tasks:[],concurrency:Wt,saturated:Yt,unsaturated:Yt,buffer:Wt/4,empty:Yt,drain:Yt,error:Yt,started:!1,paused:!1,push:function(Kt,Zt){zt(Kt,!1,Zt)},kill:function(){Vt=0,qt.drain=Yt,qt.started=!1,qt._tasks=[]},unshift:function(Kt,Zt){zt(Kt,!0,Zt)},process:function(){for(;!qt.paused&&Vt<qt.concurrency&&qt._tasks.length;){var Kt=qt._tasks.shift();0===qt._tasks.length&&qt.empty(),(Vt+=1)===qt.concurrency&&qt.saturated(),jt(Kt.data,Ht(function(Zt){return function(){Vt-=1,Zt.callback.apply(Zt,arguments),null!=arguments[0]&&qt.error(arguments[0],Zt.data),Vt<=qt.concurrency-qt.buffer&&qt.unsaturated(),qt.idle()&&qt.drain(),qt.process()}}(Kt)))}},length:function(){return qt._tasks.length},running:function(){return Vt},idle:function(){return 0===qt._tasks.length+Vt},pause:function(){!0!==qt.paused&&(qt.paused=!0)},resume:function(){if(!1!==qt.paused){qt.paused=!1;for(var Kt=1;Kt<=qt.concurrency;Kt++)qt.process()}}};return qt}},{}],35:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.encodeBinary=function(Ht){for(var jt="",Wt=0;Wt<Ht.length;){for(var zt=[0,0,0],Vt=[0,0,0,0],qt=0;qt<zt.length;++qt)zt[qt]=Wt<Ht.length?255&Ht.charCodeAt(Wt++):0;switch(Vt[0]=zt[0]>>2,Vt[1]=(3&zt[0])<<4|zt[1]>>4,Vt[2]=(15&zt[1])<<2|zt[2]>>6,Vt[3]=63&zt[2],Wt-(Ht.length-1)){case 2:Vt[3]=64,Vt[2]=64;break;case 1:Vt[3]=64;}for(var Kt=0;Kt<Vt.length;++Kt)jt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(Vt[Kt])}return jt}},{}],36:[function(Bt,Xt){var Yt=Bt("./Loader").default,Ht=Bt("./Resource").default,jt=Bt("./async"),Wt=Bt("./b64");Yt.Resource=Ht,Yt.async=jt,Yt.base64=Wt,Xt.exports=Yt,Xt.exports.default=Yt},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(Bt,Xt,Gt){function Yt(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}Gt.__esModule=!0;var Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Vt){return typeof Vt}:function(Vt){return Vt&&"function"==typeof Symbol&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt};Gt.blobMiddlewareFactory=function(){return function(Vt,qt){if(Vt.data){if(Vt.xhr&&Vt.xhrType===jt.default.XHR_RESPONSE_TYPE.BLOB)if(!(window.Blob&&"string"!=typeof Vt.data)){var Zt=Vt.xhr.getResponseHeader("content-type");if(Zt&&0===Zt.indexOf("image"))return Vt.data=new Image,Vt.data.src="data:"+Zt+";base64,"+Wt.default.encodeBinary(Vt.xhr.responseText),Vt.type=jt.default.TYPE.IMAGE,void(Vt.data.onload=function(){Vt.data.onload=null,qt()})}else if(0===Vt.data.type.indexOf("image")){var Kt=function(){var Qt=zt.createObjectURL(Vt.data);return Vt.blob=Vt.data,Vt.data=new Image,Vt.data.src=Qt,Vt.type=jt.default.TYPE.IMAGE,Vt.data.onload=function(){zt.revokeObjectURL(Qt),Vt.data.onload=null,qt()},{v:void 0}}();if("object"===(void 0===Kt?"undefined":Ht(Kt)))return Kt.v}qt()}else qt()}};var jt=Yt(Bt("../../Resource")),Wt=Yt(Bt("../../b64")),zt=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(Bt,Xt,Gt){function Yt(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}function Ht(Vt,qt){return Vt._head?(Vt._tail._next=qt,qt._prev=Vt._tail,Vt._tail=qt):(Vt._head=qt,Vt._tail=qt),qt._owner=Vt,qt}Object.defineProperty(Gt,"__esModule",{value:!0});var jt=function(){function Vt(qt,Kt){for(var Zt=0,Qt;Zt<Kt.length;Zt++)Qt=Kt[Zt],Qt.enumerable=Qt.enumerable||!1,Qt.configurable=!0,"value"in Qt&&(Qt.writable=!0),Object.defineProperty(qt,Qt.key,Qt)}return function(qt,Kt,Zt){return Kt&&Vt(qt.prototype,Kt),Zt&&Vt(qt,Zt),qt}}(),Wt=function(){function Vt(qt,Kt,Zt){void 0===Kt&&(Kt=!1),Yt(this,Vt),this._fn=qt,this._once=Kt,this._thisArg=Zt,this._next=this._prev=this._owner=null}return jt(Vt,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),Vt}(),zt=function(){function Vt(){Yt(this,Vt),this._head=this._tail=void 0}return jt(Vt,[{key:"handlers",value:function(){var qt=!(0>=arguments.length||void 0===arguments[0])&&arguments[0],Kt=this._head;if(qt)return!!Kt;for(var Zt=[];Kt;)Zt.push(Kt),Kt=Kt._next;return Zt}},{key:"has",value:function(qt){if(!(qt instanceof Wt))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return qt._owner===this}},{key:"dispatch",value:function(){var qt=this._head;if(!qt)return!1;for(;qt;)qt._once&&this.detach(qt),qt._fn.apply(qt._thisArg,arguments),qt=qt._next;return!0}},{key:"add",value:function(qt){var Kt=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!=typeof qt)throw new Error("MiniSignal#add(): First arg must be a Function.");return Ht(this,new Wt(qt,!1,Kt))}},{key:"once",value:function(qt){var Kt=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!=typeof qt)throw new Error("MiniSignal#once(): First arg must be a Function.");return Ht(this,new Wt(qt,!0,Kt))}},{key:"detach",value:function(qt){if(!(qt instanceof Wt))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return qt._owner===this?(qt._prev&&(qt._prev._next=qt._next),qt._next&&(qt._next._prev=qt._prev),qt===this._head?(this._head=qt._next,null===qt._next&&(this._tail=null)):qt===this._tail&&(this._tail=qt._prev,this._tail._next=null),qt._owner=null,this):this}},{key:"detachAll",value:function(){var qt=this._head;if(!qt)return this;for(this._head=this._tail=null;qt;)qt._owner=null,qt=qt._next;return this}}]),Vt}();zt.MiniSignalBinding=Wt,Gt.default=zt,Xt.exports=Gt.default},{}],39:[function(Bt,Xt){Xt.exports=function(Yt,Ht){Ht=Ht||{};for(var jt={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},Wt=jt.parser[Ht.strictMode?"strict":"loose"].exec(Yt),zt={},Vt=14;Vt--;)zt[jt.key[Vt]]=Wt[Vt]||"";return zt[jt.q.name]={},zt[jt.key[12]].replace(jt.q.parser,function(qt,Kt,Zt){Kt&&(zt[jt.q.name][Kt]=Zt)}),zt}},{}],40:[function(Bt,Xt,Gt){function Yt(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Gt.__esModule=!0;var Ht=function(Qt){if(Qt&&Qt.__esModule)return Qt;var Jt={};if(null!=Qt)for(var $t in Qt)Object.prototype.hasOwnProperty.call(Qt,$t)&&(Jt[$t]=Qt[$t]);return Jt.default=Qt,Jt}(Bt("../core")),jt=Yt(Bt("ismobilejs")),Wt=Yt(Bt("./accessibleTarget"));Ht.utils.mixins.delayMixin(Ht.DisplayObject.prototype,Wt.default);var zt=100,Kt=2,Zt=function(){function Qt(Jt){!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Qt),(jt.default.tablet||jt.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var $t=document.createElement("div");$t.style.width=zt+"px",$t.style.height=zt+"px",$t.style.position="absolute",$t.style.top=0+"px",$t.style.left=0+"px",$t.style.zIndex=Kt,this.div=$t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=Jt,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return Qt.prototype.createTouchHook=function(){var Jt=this,$t=document.createElement("button");$t.style.width="1px",$t.style.height="1px",$t.style.position="absolute",$t.style.top="-1000px",$t.style.left="-1000px",$t.style.zIndex=2,$t.style.backgroundColor="#FF0000",$t.title="HOOK DIV",$t.addEventListener("focus",function(){Jt.isMobileAccessabillity=!0,Jt.activate(),document.body.removeChild($t)}),document.body.appendChild($t)},Qt.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},Qt.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},Qt.prototype.updateAccessibleObjects=function(Jt){if(Jt.visible){Jt.accessible&&Jt.interactive&&(Jt._accessibleActive||this.addChild(Jt),Jt.renderId=this.renderId);for(var $t=Jt.children,en=$t.length-1;0<=en;en--)this.updateAccessibleObjects($t[en])}},Qt.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var Jt=this.renderer.view.getBoundingClientRect(),$t=Jt.width/this.renderer.width,en=Jt.height/this.renderer.height,tn=this.div;tn.style.left=Jt.left+"px",tn.style.top=Jt.top+"px",tn.style.width=this.renderer.width+"px",tn.style.height=this.renderer.height+"px";for(var nn=0,an;nn<this.children.length;nn++)if(an=this.children[nn],an.renderId!==this.renderId)an._accessibleActive=!1,Ht.utils.removeItems(this.children,nn,1),this.div.removeChild(an._accessibleDiv),this.pool.push(an._accessibleDiv),an._accessibleDiv=null,nn--,0===this.children.length&&this.deactivate();else{tn=an._accessibleDiv;var rn=an.hitArea,on=an.worldTransform;an.hitArea?(tn.style.left=(on.tx+rn.x*on.a)*$t+"px",tn.style.top=(on.ty+rn.y*on.d)*en+"px",tn.style.width=rn.width*on.a*$t+"px",tn.style.height=rn.height*on.d*en+"px"):(rn=an.getBounds(),this.capHitArea(rn),tn.style.left=rn.x*$t+"px",tn.style.top=rn.y*en+"px",tn.style.width=rn.width*$t+"px",tn.style.height=rn.height*en+"px")}this.renderId++}},Qt.prototype.capHitArea=function(Jt){0>Jt.x&&(Jt.width+=Jt.x,Jt.x=0),0>Jt.y&&(Jt.height+=Jt.y,Jt.y=0),Jt.x+Jt.width>this.renderer.width&&(Jt.width=this.renderer.width-Jt.x),Jt.y+Jt.height>this.renderer.height&&(Jt.height=this.renderer.height-Jt.y)},Qt.prototype.addChild=function(Jt){var $t=this.pool.pop();$t||(($t=document.createElement("button")).style.width=zt+"px",$t.style.height=zt+"px",$t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",$t.style.position="absolute",$t.style.zIndex=Kt,$t.style.borderStyle="none",$t.addEventListener("click",this._onClick.bind(this)),$t.addEventListener("focus",this._onFocus.bind(this)),$t.addEventListener("focusout",this._onFocusOut.bind(this))),Jt.accessibleTitle?$t.title=Jt.accessibleTitle:Jt.accessibleTitle||Jt.accessibleHint||($t.title="displayObject "+this.tabIndex),Jt.accessibleHint&&$t.setAttribute("aria-label",Jt.accessibleHint),Jt._accessibleActive=!0,Jt._accessibleDiv=$t,$t.displayObject=Jt,this.children.push(Jt),this.div.appendChild(Jt._accessibleDiv),Jt._accessibleDiv.tabIndex=Jt.tabIndex},Qt.prototype._onClick=function(Jt){var $t=this.renderer.plugins.interaction;$t.dispatchEvent(Jt.target.displayObject,"click",$t.eventData)},Qt.prototype._onFocus=function(Jt){var $t=this.renderer.plugins.interaction;$t.dispatchEvent(Jt.target.displayObject,"mouseover",$t.eventData)},Qt.prototype._onFocusOut=function(Jt){var $t=this.renderer.plugins.interaction;$t.dispatchEvent(Jt.target.displayObject,"mouseout",$t.eventData)},Qt.prototype._onKeyDown=function(Jt){9===Jt.keyCode&&this.activate()},Qt.prototype._onMouseMove=function(){this.deactivate()},Qt.prototype.destroy=function(){this.div=null;for(var Jt=0;Jt<this.children.length;Jt++)this.children[Jt].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},Qt}();Gt.default=Zt,Ht.WebGLRenderer.registerPlugin("accessibility",Zt),Ht.CanvasRenderer.registerPlugin("accessibility",Zt)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(Bt,Xt,Gt){function Yt(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}Gt.__esModule=!0;var Ht=Bt("./accessibleTarget");Object.defineProperty(Gt,"accessibleTarget",{enumerable:!0,get:function(){return Yt(Ht).default}});var jt=Bt("./AccessibilityManager");Object.defineProperty(Gt,"AccessibilityManager",{enumerable:!0,get:function(){return Yt(jt).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(Bt,Xt,Gt){function Yt(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Gt.__esModule=!0;var Ht=function(){function Zt(Qt,Jt){for(var $t=0,en;$t<Jt.length;$t++)en=Jt[$t],en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Qt,en.key,en)}return function(Qt,Jt,$t){return Jt&&Zt(Qt.prototype,Jt),$t&&Zt(Qt,$t),Qt}}(),jt=Bt("./autoDetectRenderer"),Wt=Yt(Bt("./display/Container")),zt=Bt("./ticker"),Vt=Yt(Bt("./settings")),qt=Bt("./const"),Kt=function(){function Zt(Qt,Jt,$t,en,tn){!function(nn,an){if(!(nn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,Zt),"number"==typeof Qt&&(Qt=Object.assign({width:Qt,height:Jt||Vt.default.RENDER_OPTIONS.height,forceCanvas:!!en,sharedTicker:!!tn},$t)),this._options=Qt=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},Qt),this.renderer=(0,jt.autoDetectRenderer)(Qt),this.stage=new Wt.default,this._ticker=null,this.ticker=Qt.sharedTicker?zt.shared:new zt.Ticker,Qt.autoStart&&this.start()}return Zt.prototype.render=function(){this.renderer.render(this.stage)},Zt.prototype.stop=function(){this._ticker.stop()},Zt.prototype.start=function(){this._ticker.start()},Zt.prototype.destroy=function(Qt){var Jt=this._ticker;this.ticker=null,Jt.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(Qt),this.renderer=null,this._options=null},Ht(Zt,[{key:"ticker",set:function(Qt){this._ticker&&this._ticker.remove(this.render,this),this._ticker=Qt,Qt&&Qt.add(this.render,this,qt.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),Zt}();Gt.default=Kt},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":120}],44:[function(Bt,Xt,Gt){function Yt(zt,Vt){if(zt instanceof Array){if("precision"!==zt[0].substring(0,9)){var qt=zt.slice(0);return qt.unshift("precision "+Vt+" float;"),qt}}else if("precision"!==zt.substring(0,9))return"precision "+Vt+" float;\n"+zt;return zt}Gt.__esModule=!0;var Ht=Bt("pixi-gl-core"),jt=function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("./settings")),Wt=function(zt){function Vt(qt,Kt,Zt){return function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Vt),function(Qt,Jt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Qt}(this,zt.call(this,qt,Yt(Kt,jt.default.PRECISION_VERTEX),Yt(Zt,jt.default.PRECISION_FRAGMENT)))}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt}(Ht.GLShader);Gt.default=Wt},{"./settings":101,"pixi-gl-core":12}],45:[function(Bt,Xt,Gt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Gt.__esModule=!0,Gt.autoDetectRenderer=function(zt,Vt,qt,Kt){var Zt=zt&&zt.forceCanvas;return void 0!==Kt&&(Zt=Kt),!Zt&&Ht.isWebGLSupported()?new Wt.default(zt,Vt,qt):new jt.default(zt,Vt,qt)};var Ht=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("./utils")),jt=Yt(Bt("./renderers/canvas/CanvasRenderer")),Wt=Yt(Bt("./renderers/webgl/WebGLRenderer"))},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":124}],46:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.VERSION="4.5.6",Gt.PI_2=2*Math.PI,Gt.RAD_TO_DEG=180/Math.PI,Gt.DEG_TO_RAD=Math.PI/180,Gt.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},Gt.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},Gt.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Gt.SCALE_MODES={LINEAR:0,NEAREST:1},Gt.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},Gt.GC_MODES={AUTO:0,MANUAL:1},Gt.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,Gt.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,Gt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,Gt.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},Gt.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},Gt.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},Gt.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},Gt.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=Bt("../math"),Ht=function(){function jt(){!function(Wt,zt){if(!(Wt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return jt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},jt.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},jt.prototype.getRectangle=function(Wt){return this.minX>this.maxX||this.minY>this.maxY?Yt.Rectangle.EMPTY:(Wt=Wt||new Yt.Rectangle(0,0,1,1),Wt.x=this.minX,Wt.y=this.minY,Wt.width=this.maxX-this.minX,Wt.height=this.maxY-this.minY,Wt)},jt.prototype.addPoint=function(Wt){this.minX=Math.min(this.minX,Wt.x),this.maxX=Math.max(this.maxX,Wt.x),this.minY=Math.min(this.minY,Wt.y),this.maxY=Math.max(this.maxY,Wt.y)},jt.prototype.addQuad=function(Wt){var zt=this.minX,Vt=this.minY,qt=this.maxX,Kt=this.maxY,Zt=Wt[0],Qt=Wt[1];zt=Zt<zt?Zt:zt,Vt=Qt<Vt?Qt:Vt,qt=Zt>qt?Zt:qt,Kt=Qt>Kt?Qt:Kt,Zt=Wt[2],Qt=Wt[3],zt=Zt<zt?Zt:zt,Vt=Qt<Vt?Qt:Vt,qt=Zt>qt?Zt:qt,Kt=Qt>Kt?Qt:Kt,Zt=Wt[4],Qt=Wt[5],zt=Zt<zt?Zt:zt,Vt=Qt<Vt?Qt:Vt,qt=Zt>qt?Zt:qt,Kt=Qt>Kt?Qt:Kt,Zt=Wt[6],Qt=Wt[7],zt=Zt<zt?Zt:zt,Vt=Qt<Vt?Qt:Vt,qt=Zt>qt?Zt:qt,Kt=Qt>Kt?Qt:Kt,this.minX=zt,this.minY=Vt,this.maxX=qt,this.maxY=Kt},jt.prototype.addFrame=function(Wt,zt,Vt,qt,Kt){var Zt=Wt.worldTransform,Qt=Zt.a,Jt=Zt.b,$t=Zt.c,en=Zt.d,tn=Zt.tx,nn=Zt.ty,an=this.minX,rn=this.minY,on=this.maxX,sn=this.maxY,dn=Qt*zt+$t*Vt+tn,ln=Jt*zt+en*Vt+nn;an=dn<an?dn:an,rn=ln<rn?ln:rn,on=dn>on?dn:on,sn=ln>sn?ln:sn,ln=Jt*qt+en*Vt+nn,an=(dn=Qt*qt+$t*Vt+tn)<an?dn:an,rn=ln<rn?ln:rn,on=dn>on?dn:on,sn=ln>sn?ln:sn,ln=Jt*zt+en*Kt+nn,an=(dn=Qt*zt+$t*Kt+tn)<an?dn:an,rn=ln<rn?ln:rn,on=dn>on?dn:on,sn=ln>sn?ln:sn,ln=Jt*qt+en*Kt+nn,an=(dn=Qt*qt+$t*Kt+tn)<an?dn:an,rn=ln<rn?ln:rn,on=dn>on?dn:on,sn=ln>sn?ln:sn,this.minX=an,this.minY=rn,this.maxX=on,this.maxY=sn},jt.prototype.addVertices=function(Wt,zt,Vt,qt){for(var Kt=Wt.worldTransform,Zt=Kt.a,Qt=Kt.b,Jt=Kt.c,$t=Kt.d,en=Kt.tx,tn=Kt.ty,nn=this.minX,an=this.minY,rn=this.maxX,on=this.maxY,sn=Vt;sn<qt;sn+=2){var dn=zt[sn],ln=zt[sn+1],un=Zt*dn+Jt*ln+en,pn=$t*ln+Qt*dn+tn;nn=un<nn?un:nn,an=pn<an?pn:an,rn=un>rn?un:rn,on=pn>on?pn:on}this.minX=nn,this.minY=an,this.maxX=rn,this.maxY=on},jt.prototype.addBounds=function(Wt){var zt=this.minX,Vt=this.minY,qt=this.maxX,Kt=this.maxY;this.minX=Wt.minX<zt?Wt.minX:zt,this.minY=Wt.minY<Vt?Wt.minY:Vt,this.maxX=Wt.maxX>qt?Wt.maxX:qt,this.maxY=Wt.maxY>Kt?Wt.maxY:Kt},jt.prototype.addBoundsMask=function(Wt,zt){var Vt=Wt.minX>zt.minX?Wt.minX:zt.minX,qt=Wt.minY>zt.minY?Wt.minY:zt.minY,Kt=Wt.maxX<zt.maxX?Wt.maxX:zt.maxX,Zt=Wt.maxY<zt.maxY?Wt.maxY:zt.maxY;if(Vt<=Kt&&qt<=Zt){var Qt=this.minX,Jt=this.minY,$t=this.maxX,en=this.maxY;this.minX=Vt<Qt?Vt:Qt,this.minY=qt<Jt?qt:Jt,this.maxX=Kt>$t?Kt:$t,this.maxY=Zt>en?Zt:en}},jt.prototype.addBoundsArea=function(Wt,zt){var Vt=Wt.minX>zt.x?Wt.minX:zt.x,qt=Wt.minY>zt.y?Wt.minY:zt.y,Kt=Wt.maxX<zt.x+zt.width?Wt.maxX:zt.x+zt.width,Zt=Wt.maxY<zt.y+zt.height?Wt.maxY:zt.y+zt.height;if(Vt<=Kt&&qt<=Zt){var Qt=this.minX,Jt=this.minY,$t=this.maxX,en=this.maxY;this.minX=Vt<Qt?Vt:Qt,this.minY=qt<Jt?qt:Jt,this.maxX=Kt>$t?Kt:$t,this.maxY=Zt>en?Zt:en}},jt}();Gt.default=Ht},{"../math":70}],48:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=Bt("../utils"),jt=function(Wt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,Wt.call(this));return Vt.children=[],Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,Wt),zt.prototype.onChildrenChange=function(){},zt.prototype.addChild=function(Vt){var qt=arguments.length;if(1<qt)for(var Kt=0;Kt<qt;Kt++)this.addChild(arguments[Kt]);else Vt.parent&&Vt.parent.removeChild(Vt),Vt.parent=this,Vt.transform._parentID=-1,this.children.push(Vt),this._boundsID++,this.onChildrenChange(this.children.length-1),Vt.emit("added",this);return Vt},zt.prototype.addChildAt=function(Vt,qt){if(0>qt||qt>this.children.length)throw new Error(Vt+"addChildAt: The index "+qt+" supplied is out of bounds "+this.children.length);return Vt.parent&&Vt.parent.removeChild(Vt),Vt.parent=this,Vt.transform._parentID=-1,this.children.splice(qt,0,Vt),this._boundsID++,this.onChildrenChange(qt),Vt.emit("added",this),Vt},zt.prototype.swapChildren=function(Vt,qt){if(Vt!==qt){var Kt=this.getChildIndex(Vt),Zt=this.getChildIndex(qt);this.children[Kt]=qt,this.children[Zt]=Vt,this.onChildrenChange(Kt<Zt?Kt:Zt)}},zt.prototype.getChildIndex=function(Vt){var qt=this.children.indexOf(Vt);if(-1===qt)throw new Error("The supplied DisplayObject must be a child of the caller");return qt},zt.prototype.setChildIndex=function(Vt,qt){if(0>qt||qt>=this.children.length)throw new Error("The supplied index is out of bounds");var Kt=this.getChildIndex(Vt);(0,Ht.removeItems)(this.children,Kt,1),this.children.splice(qt,0,Vt),this.onChildrenChange(qt)},zt.prototype.getChildAt=function(Vt){if(0>Vt||Vt>=this.children.length)throw new Error("getChildAt: Index ("+Vt+") does not exist.");return this.children[Vt]},zt.prototype.removeChild=function(Vt){var qt=arguments.length;if(1<qt)for(var Kt=0;Kt<qt;Kt++)this.removeChild(arguments[Kt]);else{var Zt=this.children.indexOf(Vt);if(-1===Zt)return null;Vt.parent=null,Vt.transform._parentID=-1,(0,Ht.removeItems)(this.children,Zt,1),this._boundsID++,this.onChildrenChange(Zt),Vt.emit("removed",this)}return Vt},zt.prototype.removeChildAt=function(Vt){var qt=this.getChildAt(Vt);return qt.parent=null,qt.transform._parentID=-1,(0,Ht.removeItems)(this.children,Vt,1),this._boundsID++,this.onChildrenChange(Vt),qt.emit("removed",this),qt},zt.prototype.removeChildren=function(){var Vt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,qt=arguments[1],Kt=Vt,Zt="number"==typeof qt?qt:this.children.length,Qt=Zt-Kt,Jt;if(0<Qt&&Qt<=Zt){Jt=this.children.splice(Kt,Qt);for(var $t=0;$t<Jt.length;++$t)Jt[$t].parent=null,Jt[$t].transform&&(Jt[$t].transform._parentID=-1);this._boundsID++,this.onChildrenChange(Vt);for(var en=0;en<Jt.length;++en)Jt[en].emit("removed",this);return Jt}if(0==Qt&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},zt.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var Vt=0,qt=this.children.length,Kt;Vt<qt;++Vt)Kt=this.children[Vt],Kt.visible&&Kt.updateTransform()},zt.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var Vt=0,qt;Vt<this.children.length;Vt++)qt=this.children[Vt],qt.visible&&qt.renderable&&(qt.calculateBounds(),qt._mask?(qt._mask.calculateBounds(),this._bounds.addBoundsMask(qt._bounds,qt._mask._bounds)):qt.filterArea?this._bounds.addBoundsArea(qt._bounds,qt.filterArea):this._bounds.addBounds(qt._bounds));this._lastBoundsID=this._boundsID},zt.prototype._calculateBounds=function(){},zt.prototype.renderWebGL=function(Vt){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(Vt);else{this._renderWebGL(Vt);for(var qt=0,Kt=this.children.length;qt<Kt;++qt)this.children[qt].renderWebGL(Vt)}},zt.prototype.renderAdvancedWebGL=function(Vt){Vt.flush();var qt=this._filters,Kt=this._mask;if(qt){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var Zt=0;Zt<qt.length;Zt++)qt[Zt].enabled&&this._enabledFilters.push(qt[Zt]);this._enabledFilters.length&&Vt.filterManager.pushFilter(this,this._enabledFilters)}Kt&&Vt.maskManager.pushMask(this,this._mask),this._renderWebGL(Vt);for(var Qt=0,Jt=this.children.length;Qt<Jt;Qt++)this.children[Qt].renderWebGL(Vt);Vt.flush(),Kt&&Vt.maskManager.popMask(this,this._mask),qt&&this._enabledFilters&&this._enabledFilters.length&&Vt.filterManager.popFilter()},zt.prototype._renderWebGL=function(){},zt.prototype._renderCanvas=function(){},zt.prototype.renderCanvas=function(Vt){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable){this._mask&&Vt.maskManager.pushMask(this._mask),this._renderCanvas(Vt);for(var qt=0,Kt=this.children.length;qt<Kt;++qt)this.children[qt].renderCanvas(Vt);this._mask&&Vt.maskManager.popMask(Vt)}},zt.prototype.destroy=function(Vt){Wt.prototype.destroy.call(this);var qt="boolean"==typeof Vt?Vt:Vt&&Vt.children,Kt=this.removeChildren(0,this.children.length);if(qt)for(var Zt=0;Zt<Kt.length;++Zt)Kt[Zt].destroy(Vt)},Yt(zt,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(Vt){var qt=this.getLocalBounds().width;this.scale.x=0===qt?1:Vt/qt,this._width=Vt}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(Vt){var qt=this.getLocalBounds().height;this.scale.y=0===qt?1:Vt/qt,this._height=Vt}}]),zt}(function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./DisplayObject")).default);Gt.default=jt,jt.prototype.containerUpdateTransform=jt.prototype.updateTransform},{"../utils":124,"./DisplayObject":49}],49:[function(Bt,Xt,Gt){function Yt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Gt.__esModule=!0;var Ht=function(){function Jt($t,en){for(var tn=0,nn;tn<en.length;tn++)nn=en[tn],nn.enumerable=nn.enumerable||!1,nn.configurable=!0,"value"in nn&&(nn.writable=!0),Object.defineProperty($t,nn.key,nn)}return function($t,en,tn){return en&&Jt($t.prototype,en),tn&&Jt($t,tn),$t}}(),jt=Yt(Bt("eventemitter3")),Wt=Bt("../const"),zt=Yt(Bt("../settings")),Vt=Yt(Bt("./TransformStatic")),qt=Yt(Bt("./Transform")),Kt=Yt(Bt("./Bounds")),Zt=Bt("../math"),Qt=function(Jt){function $t(){!function(nn,an){if(!(nn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,$t);var en=function(nn,an){if(!nn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an&&("object"==typeof an||"function"==typeof an)?an:nn}(this,Jt.call(this)),tn=zt.default.TRANSFORM_MODE===Wt.TRANSFORM_MODE.STATIC?Vt.default:qt.default;return en.tempDisplayObjectParent=null,en.transform=new tn,en.alpha=1,en.visible=!0,en.renderable=!0,en.parent=null,en.worldAlpha=1,en.filterArea=null,en._filters=null,en._enabledFilters=null,en._bounds=new Kt.default,en._boundsID=0,en._lastBoundsID=-1,en._boundsRect=null,en._localBoundsRect=null,en._mask=null,en._destroyed=!1,en}return function(en,tn){if("function"!=typeof tn&&null!==tn)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);en.prototype=Object.create(tn&&tn.prototype,{constructor:{value:en,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(en,tn):en.__proto__=tn)}($t,Jt),$t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},$t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},$t.prototype.getBounds=function(en,tn){return en||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),tn||(this._boundsRect||(this._boundsRect=new Zt.Rectangle),tn=this._boundsRect),this._bounds.getRectangle(tn)},$t.prototype.getLocalBounds=function(en){var tn=this.transform,nn=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,en||(this._localBoundsRect||(this._localBoundsRect=new Zt.Rectangle),en=this._localBoundsRect);var an=this.getBounds(!1,en);return this.parent=nn,this.transform=tn,an},$t.prototype.toGlobal=function(en,tn){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(en,tn)},$t.prototype.toLocal=function(en,tn,nn,an){return tn&&(en=tn.toGlobal(en,nn,an)),an||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(en,nn)},$t.prototype.renderWebGL=function(){},$t.prototype.renderCanvas=function(){},$t.prototype.setParent=function(en){if(!en||!en.addChild)throw new Error("setParent: Argument must be a Container");return en.addChild(this),en},$t.prototype.setTransform=function(){var en=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,tn=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,nn=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,an=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,rn=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,on=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,sn=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,dn=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,ln=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=en,this.position.y=tn,this.scale.x=nn||1,this.scale.y=an||1,this.rotation=rn,this.skew.x=on,this.skew.y=sn,this.pivot.x=dn,this.pivot.y=ln,this},$t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Ht($t,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new $t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(en){this.transform.position.x=en}},{key:"y",get:function(){return this.position.y},set:function(en){this.transform.position.y=en}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(en){this.transform.position.copy(en)}},{key:"scale",get:function(){return this.transform.scale},set:function(en){this.transform.scale.copy(en)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(en){this.transform.pivot.copy(en)}},{key:"skew",get:function(){return this.transform.skew},set:function(en){this.transform.skew.copy(en)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(en){this.transform.rotation=en}},{key:"worldVisible",get:function(){var en=this;do{if(!en.visible)return!1;en=en.parent}while(en);return!0}},{key:"mask",get:function(){return this._mask},set:function(en){this._mask&&(this._mask.renderable=!0),this._mask=en,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(en){this._filters=en&&en.slice()}}]),$t}(jt.default);Gt.default=Qt,Qt.prototype.displayObjectUpdateTransform=Qt.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=Bt("../math"),jt=function(Wt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,Wt.call(this));return Vt.position=new Ht.Point(0,0),Vt.scale=new Ht.Point(1,1),Vt.skew=new Ht.ObservablePoint(Vt.updateSkew,Vt,0,0),Vt.pivot=new Ht.Point(0,0),Vt._rotation=0,Vt._cx=1,Vt._sx=0,Vt._cy=0,Vt._sy=1,Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,Wt),zt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},zt.prototype.updateLocalTransform=function(){var Vt=this.localTransform;Vt.a=this._cx*this.scale.x,Vt.b=this._sx*this.scale.x,Vt.c=this._cy*this.scale.y,Vt.d=this._sy*this.scale.y,Vt.tx=this.position.x-(this.pivot.x*Vt.a+this.pivot.y*Vt.c),Vt.ty=this.position.y-(this.pivot.x*Vt.b+this.pivot.y*Vt.d)},zt.prototype.updateTransform=function(Vt){var qt=this.localTransform;qt.a=this._cx*this.scale.x,qt.b=this._sx*this.scale.x,qt.c=this._cy*this.scale.y,qt.d=this._sy*this.scale.y,qt.tx=this.position.x-(this.pivot.x*qt.a+this.pivot.y*qt.c),qt.ty=this.position.y-(this.pivot.x*qt.b+this.pivot.y*qt.d);var Kt=Vt.worldTransform,Zt=this.worldTransform;Zt.a=qt.a*Kt.a+qt.b*Kt.c,Zt.b=qt.a*Kt.b+qt.b*Kt.d,Zt.c=qt.c*Kt.a+qt.d*Kt.c,Zt.d=qt.c*Kt.b+qt.d*Kt.d,Zt.tx=qt.tx*Kt.a+qt.ty*Kt.c+Kt.tx,Zt.ty=qt.tx*Kt.b+qt.ty*Kt.d+Kt.ty,this._worldID++},zt.prototype.setFromMatrix=function(Vt){Vt.decompose(this)},Yt(zt,[{key:"rotation",get:function(){return this._rotation},set:function(Vt){this._rotation=Vt,this.updateSkew()}}]),zt}(function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./TransformBase")).default);Gt.default=jt},{"../math":70,"./TransformBase":51}],51:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=Bt("../math"),Ht=function(){function jt(){!function(Wt,zt){if(!(Wt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.worldTransform=new Yt.Matrix,this.localTransform=new Yt.Matrix,this._worldID=0,this._parentID=0}return jt.prototype.updateLocalTransform=function(){},jt.prototype.updateTransform=function(Wt){var zt=Wt.worldTransform,Vt=this.worldTransform,qt=this.localTransform;Vt.a=qt.a*zt.a+qt.b*zt.c,Vt.b=qt.a*zt.b+qt.b*zt.d,Vt.c=qt.c*zt.a+qt.d*zt.c,Vt.d=qt.c*zt.b+qt.d*zt.d,Vt.tx=qt.tx*zt.a+qt.ty*zt.c+zt.tx,Vt.ty=qt.tx*zt.b+qt.ty*zt.d+zt.ty,this._worldID++},jt}();Gt.default=Ht,Ht.prototype.updateWorldTransform=Ht.prototype.updateTransform,Ht.IDENTITY=new Ht},{"../math":70}],52:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=Bt("../math"),jt=function(Wt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,Wt.call(this));return Vt.position=new Ht.ObservablePoint(Vt.onChange,Vt,0,0),Vt.scale=new Ht.ObservablePoint(Vt.onChange,Vt,1,1),Vt.pivot=new Ht.ObservablePoint(Vt.onChange,Vt,0,0),Vt.skew=new Ht.ObservablePoint(Vt.updateSkew,Vt,0,0),Vt._rotation=0,Vt._cx=1,Vt._sx=0,Vt._cy=0,Vt._sy=1,Vt._localID=0,Vt._currentLocalID=0,Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,Wt),zt.prototype.onChange=function(){this._localID++},zt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},zt.prototype.updateLocalTransform=function(){var Vt=this.localTransform;this._localID!==this._currentLocalID&&(Vt.a=this._cx*this.scale._x,Vt.b=this._sx*this.scale._x,Vt.c=this._cy*this.scale._y,Vt.d=this._sy*this.scale._y,Vt.tx=this.position._x-(this.pivot._x*Vt.a+this.pivot._y*Vt.c),Vt.ty=this.position._y-(this.pivot._x*Vt.b+this.pivot._y*Vt.d),this._currentLocalID=this._localID,this._parentID=-1)},zt.prototype.updateTransform=function(Vt){var qt=this.localTransform;if(this._localID!==this._currentLocalID&&(qt.a=this._cx*this.scale._x,qt.b=this._sx*this.scale._x,qt.c=this._cy*this.scale._y,qt.d=this._sy*this.scale._y,qt.tx=this.position._x-(this.pivot._x*qt.a+this.pivot._y*qt.c),qt.ty=this.position._y-(this.pivot._x*qt.b+this.pivot._y*qt.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==Vt._worldID){var Kt=Vt.worldTransform,Zt=this.worldTransform;Zt.a=qt.a*Kt.a+qt.b*Kt.c,Zt.b=qt.a*Kt.b+qt.b*Kt.d,Zt.c=qt.c*Kt.a+qt.d*Kt.c,Zt.d=qt.c*Kt.b+qt.d*Kt.d,Zt.tx=qt.tx*Kt.a+qt.ty*Kt.c+Kt.tx,Zt.ty=qt.tx*Kt.b+qt.ty*Kt.d+Kt.ty,this._parentID=Vt._worldID,this._worldID++}},zt.prototype.setFromMatrix=function(Vt){Vt.decompose(this),this._localID++},Yt(zt,[{key:"rotation",get:function(){return this._rotation},set:function(Vt){this._rotation=Vt,this.updateSkew()}}]),zt}(function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./TransformBase")).default);Gt.default=jt},{"../math":70,"./TransformBase":51}],53:[function(Bt,Xt,Gt){function Yt(sn){return sn&&sn.__esModule?sn:{default:sn}}Gt.__esModule=!0;var Ht=Yt(Bt("../display/Container")),jt=Yt(Bt("../textures/RenderTexture")),Wt=Yt(Bt("../textures/Texture")),zt=Yt(Bt("./GraphicsData")),Vt=Yt(Bt("../sprites/Sprite")),qt=Bt("../math"),Kt=Bt("../utils"),Zt=Bt("../const"),Qt=Yt(Bt("../display/Bounds")),Jt=Yt(Bt("./utils/bezierCurveTo")),$t=Yt(Bt("../renderers/canvas/CanvasRenderer")),en,tn=new qt.Matrix,nn=new qt.Point,an=new Float32Array(4),rn=new Float32Array(4),on=function(sn){function dn(){var ln=0<arguments.length&&void 0!==arguments[0]&&arguments[0];!function(pn,cn){if(!(pn instanceof cn))throw new TypeError("Cannot call a class as a function")}(this,dn);var un=function(pn,cn){if(!pn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return cn&&("object"==typeof cn||"function"==typeof cn)?cn:pn}(this,sn.call(this));return un.fillAlpha=1,un.lineWidth=0,un.nativeLines=ln,un.lineColor=0,un.graphicsData=[],un.tint=16777215,un._prevTint=16777215,un.blendMode=Zt.BLEND_MODES.NORMAL,un.currentPath=null,un._webGL={},un.isMask=!1,un.boundsPadding=0,un._localBounds=new Qt.default,un.dirty=0,un.fastRectDirty=-1,un.clearDirty=0,un.boundsDirty=-1,un.cachedSpriteDirty=!1,un._spriteRect=null,un._fastRect=!1,un}return function(ln,un){if("function"!=typeof un&&null!==un)throw new TypeError("Super expression must either be null or a function, not "+typeof un);ln.prototype=Object.create(un&&un.prototype,{constructor:{value:ln,enumerable:!1,writable:!0,configurable:!0}}),un&&(Object.setPrototypeOf?Object.setPrototypeOf(ln,un):ln.__proto__=un)}(dn,sn),dn.prototype.clone=function(){var ln=new dn;ln.renderable=this.renderable,ln.fillAlpha=this.fillAlpha,ln.lineWidth=this.lineWidth,ln.lineColor=this.lineColor,ln.tint=this.tint,ln.blendMode=this.blendMode,ln.isMask=this.isMask,ln.boundsPadding=this.boundsPadding,ln.dirty=0,ln.cachedSpriteDirty=this.cachedSpriteDirty;for(var un=0;un<this.graphicsData.length;++un)ln.graphicsData.push(this.graphicsData[un].clone());return ln.currentPath=ln.graphicsData[ln.graphicsData.length-1],ln.updateLocalBounds(),ln},dn.prototype.lineStyle=function(){var ln=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,un=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,pn=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=ln,this.lineColor=un,this.lineAlpha=pn,this.currentPath)if(this.currentPath.shape.points.length){var cn=new qt.Polygon(this.currentPath.shape.points.slice(-2));cn.closed=!1,this.drawShape(cn)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},dn.prototype.moveTo=function(ln,un){var pn=new qt.Polygon([ln,un]);return pn.closed=!1,this.drawShape(pn),this},dn.prototype.lineTo=function(ln,un){return this.currentPath.shape.points.push(ln,un),this.dirty++,this},dn.prototype.quadraticCurveTo=function(ln,un,pn,cn){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var hn=this.currentPath.shape.points,fn=0,gn=0;0===hn.length&&this.moveTo(0,0);for(var mn=hn[hn.length-2],yn=hn[hn.length-1],_n=1,bn;20>=_n;++_n)bn=_n/20,fn=mn+(ln-mn)*bn,gn=yn+(un-yn)*bn,hn.push(fn+(ln+(pn-ln)*bn-fn)*bn,gn+(un+(cn-un)*bn-gn)*bn);return this.dirty++,this},dn.prototype.bezierCurveTo=function(ln,un,pn,cn,hn,fn){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var gn=this.currentPath.shape.points,mn=gn[gn.length-2],yn=gn[gn.length-1];return gn.length-=2,(0,Jt.default)(mn,yn,ln,un,pn,cn,hn,fn,gn),this.dirty++,this},dn.prototype.arcTo=function(ln,un,pn,cn,hn){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(ln,un):this.moveTo(ln,un);var fn=this.currentPath.shape.points,gn=fn[fn.length-2],mn=fn[fn.length-1]-un,yn=gn-ln,_n=cn-un,bn=pn-ln,xn=Math.abs(mn*bn-yn*_n);if(1e-8>xn||0===hn)fn[fn.length-2]===ln&&fn[fn.length-1]===un||fn.push(ln,un);else{var vn=mn*mn+yn*yn,Tn=_n*_n+bn*bn,En=mn*_n+yn*bn,Sn=hn*Math.sqrt(vn)/xn,wn=hn*Math.sqrt(Tn)/xn,Cn=Sn*En/vn,Pn=wn*En/Tn,An=Sn*bn+wn*yn,Mn=Sn*_n+wn*mn,Ln=Math.atan2(mn*(wn+Cn)-Mn,yn*(wn+Cn)-An),kn=Math.atan2(_n*(Sn+Pn)-Mn,bn*(Sn+Pn)-An);this.arc(An+ln,Mn+un,hn,Ln,kn,yn*_n>bn*mn)}return this.dirty++,this},dn.prototype.arc=function(ln,un,pn,cn,hn){var fn=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(cn===hn)return this;!fn&&hn<=cn?hn+=2*Math.PI:fn&&cn<=hn&&(cn+=2*Math.PI);var gn=hn-cn,mn=40*Math.ceil(Math.abs(gn)/(2*Math.PI));if(0==gn)return this;var yn=ln+Math.cos(cn)*pn,_n=un+Math.sin(cn)*pn,bn=this.currentPath?this.currentPath.shape.points:null;bn?bn[bn.length-2]===yn&&bn[bn.length-1]===_n||bn.push(yn,_n):(this.moveTo(yn,_n),bn=this.currentPath.shape.points);for(var xn=gn/(2*mn),Tn=Math.cos(xn),En=Math.sin(xn),Sn=mn-1,Cn=0;Cn<=Sn;++Cn){var Pn=xn+cn+2*xn*(Cn+Sn%1/Sn*Cn),An=Math.cos(Pn),Mn=-Math.sin(Pn);bn.push((Tn*An+En*Mn)*pn+ln,(Tn*-Mn+En*An)*pn+un)}return this.dirty++,this},dn.prototype.beginFill=function(){var ln=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,un=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=ln,this.fillAlpha=un,this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},dn.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},dn.prototype.drawRect=function(ln,un,pn,cn){return this.drawShape(new qt.Rectangle(ln,un,pn,cn)),this},dn.prototype.drawRoundedRect=function(ln,un,pn,cn,hn){return this.drawShape(new qt.RoundedRectangle(ln,un,pn,cn,hn)),this},dn.prototype.drawCircle=function(ln,un,pn){return this.drawShape(new qt.Circle(ln,un,pn)),this},dn.prototype.drawEllipse=function(ln,un,pn,cn){return this.drawShape(new qt.Ellipse(ln,un,pn,cn)),this},dn.prototype.drawPolygon=function(ln){var un=ln,pn=!0;if(un instanceof qt.Polygon&&(pn=un.closed,un=un.points),!Array.isArray(un)){un=Array(arguments.length);for(var cn=0;cn<un.length;++cn)un[cn]=arguments[cn]}var hn=new qt.Polygon(un);return hn.closed=pn,this.drawShape(hn),this},dn.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},dn.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===Zt.SHAPES.RECT&&!this.graphicsData[0].lineWidth},dn.prototype._renderWebGL=function(ln){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(ln):(ln.setObjectRenderer(ln.plugins.graphics),ln.plugins.graphics.render(this))},dn.prototype._renderSpriteRect=function(ln){var un=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new Vt.default(new Wt.default(Wt.default.WHITE)));var pn=this._spriteRect;if(16777215===this.tint)pn.tint=this.graphicsData[0].fillColor;else{var cn=an,hn=rn;(0,Kt.hex2rgb)(this.graphicsData[0].fillColor,cn),(0,Kt.hex2rgb)(this.tint,hn),cn[0]*=hn[0],cn[1]*=hn[1],cn[2]*=hn[2],pn.tint=(0,Kt.rgb2hex)(cn)}pn.alpha=this.graphicsData[0].fillAlpha,pn.worldAlpha=this.worldAlpha*pn.alpha,pn.blendMode=this.blendMode,pn._texture._frame.width=un.width,pn._texture._frame.height=un.height,pn.transform.worldTransform=this.transform.worldTransform,pn.anchor.set(-un.x/un.width,-un.y/un.height),pn._onAnchorUpdate(),pn._renderWebGL(ln)},dn.prototype._renderCanvas=function(ln){!0!==this.isMask&&ln.plugins.graphics.render(this)},dn.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var ln=this._localBounds;this._bounds.addFrame(this.transform,ln.minX,ln.minY,ln.maxX,ln.maxY)},dn.prototype.containsPoint=function(ln){this.worldTransform.applyInverse(ln,nn);for(var un=this.graphicsData,pn=0,cn;pn<un.length;++pn)if(cn=un[pn],cn.fill&&cn.shape&&cn.shape.contains(nn.x,nn.y)){if(cn.holes)for(var hn=0;hn<cn.holes.length;hn++)if(cn.holes[hn].contains(nn.x,nn.y))return!1;return!0}return!1},dn.prototype.updateLocalBounds=function(){var ln=1/0,un=-1/0,pn=1/0,cn=-1/0;if(this.graphicsData.length)for(var hn=0,fn=0,gn=0,mn=0,yn=0,_n=0;_n<this.graphicsData.length;_n++){var bn=this.graphicsData[_n],xn=bn.type,vn=bn.lineWidth;if(hn=bn.shape,xn===Zt.SHAPES.RECT||xn===Zt.SHAPES.RREC)fn=hn.x-vn/2,gn=hn.y-vn/2,mn=hn.width+vn,yn=hn.height+vn,ln=fn<ln?fn:ln,un=fn+mn>un?fn+mn:un,pn=gn<pn?gn:pn,cn=gn+yn>cn?gn+yn:cn;else if(xn===Zt.SHAPES.CIRC)fn=hn.x,gn=hn.y,mn=hn.radius+vn/2,yn=hn.radius+vn/2,ln=fn-mn<ln?fn-mn:ln,un=fn+mn>un?fn+mn:un,pn=gn-yn<pn?gn-yn:pn,cn=gn+yn>cn?gn+yn:cn;else if(xn===Zt.SHAPES.ELIP)fn=hn.x,gn=hn.y,mn=hn.width+vn/2,yn=hn.height+vn/2,ln=fn-mn<ln?fn-mn:ln,un=fn+mn>un?fn+mn:un,pn=gn-yn<pn?gn-yn:pn,cn=gn+yn>cn?gn+yn:cn;else for(var Tn=hn.points,En=0,Sn=0,wn=0,Cn=0,Pn=0,An=0,Mn=0,Rn=0,In=0;In+2<Tn.length;In+=2)fn=Tn[In],gn=Tn[In+1],En=Tn[In+2],Sn=Tn[In+3],wn=Math.abs(En-fn),Cn=Math.abs(Sn-gn),yn=vn,1e-9>(mn=Math.sqrt(wn*wn+Cn*Cn))||(An=(yn/mn*wn+Cn)/2,Rn=(Sn+gn)/2,ln=(Mn=(En+fn)/2)-(Pn=(yn/mn*Cn+wn)/2)<ln?Mn-Pn:ln,un=Mn+Pn>un?Mn+Pn:un,pn=Rn-An<pn?Rn-An:pn,cn=Rn+An>cn?Rn+An:cn)}else ln=0,un=0,pn=0,cn=0;var Dn=this.boundsPadding;this._localBounds.minX=ln-Dn,this._localBounds.maxX=un+Dn,this._localBounds.minY=pn-Dn,this._localBounds.maxY=cn+Dn},dn.prototype.drawShape=function(ln){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop(),this.currentPath=null;var un=new zt.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,ln);return this.graphicsData.push(un),un.type===Zt.SHAPES.POLY&&(un.shape.closed=un.shape.closed||this.filling,this.currentPath=un),this.dirty++,un},dn.prototype.generateCanvasTexture=function(ln){var un=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,pn=this.getLocalBounds(),cn=jt.default.create(pn.width,pn.height,ln,un);en||(en=new $t.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(tn),tn.invert(),tn.tx-=pn.x,tn.ty-=pn.y,en.render(this,cn,!0,tn);var hn=Wt.default.fromCanvas(cn.baseTexture._canvasRenderTarget.canvas,ln,"graphics");return hn.baseTexture.resolution=un,hn.baseTexture.update(),hn},dn.prototype.closePath=function(){var ln=this.currentPath;return ln&&ln.shape&&ln.shape.close(),this},dn.prototype.addHole=function(){var ln=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(ln.shape),this.currentPath=null,this},dn.prototype.destroy=function(ln){sn.prototype.destroy.call(this,ln);for(var un=0;un<this.graphicsData.length;++un)this.graphicsData[un].destroy();for(var pn in this._webgl)for(var cn=0;cn<this._webgl[pn].data.length;++cn)this._webgl[pn].data[cn].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},dn}(Ht.default);Gt.default=on,on._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":124,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Ht(jt,Wt,zt,Vt,qt,Kt,Zt,Qt){!function(Jt,$t){if(!(Jt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.lineWidth=jt,this.nativeLines=Zt,this.lineColor=Wt,this.lineAlpha=zt,this._lineTint=Wt,this.fillColor=Vt,this.fillAlpha=qt,this._fillTint=Vt,this.fill=Kt,this.holes=[],this.shape=Qt,this.type=Qt.type}return Ht.prototype.clone=function(){return new Ht(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},Ht.prototype.addHole=function(jt){this.holes.push(jt)},Ht.prototype.destroy=function(){this.shape=null,this.holes=null},Ht}();Gt.default=Yt},{}],55:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../../renderers/canvas/CanvasRenderer")),Ht=Bt("../../const"),jt=function(){function Wt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.renderer=zt}return Wt.prototype.render=function(zt){var Vt=this.renderer,qt=Vt.context,Kt=zt.worldAlpha,Zt=zt.transform.worldTransform,Qt=Vt.resolution;this._prevTint!==this.tint&&(this.dirty=!0),qt.setTransform(Zt.a*Qt,Zt.b*Qt,Zt.c*Qt,Zt.d*Qt,Zt.tx*Qt,Zt.ty*Qt),zt.dirty&&(this.updateGraphicsTint(zt),zt.dirty=!1),Vt.setBlendMode(zt.blendMode);for(var Jt=0;Jt<zt.graphicsData.length;Jt++){var $t=zt.graphicsData[Jt],en=$t.shape,tn=$t._fillTint,nn=$t._lineTint;if(qt.lineWidth=$t.lineWidth,$t.type===Ht.SHAPES.POLY){qt.beginPath(),this.renderPolygon(en.points,en.closed,qt);for(var an=0;an<$t.holes.length;an++)this.renderPolygon($t.holes[an].points,!0,qt);$t.fill&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke())}else if($t.type===Ht.SHAPES.RECT)($t.fillColor||0===$t.fillColor)&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fillRect(en.x,en.y,en.width,en.height)),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.strokeRect(en.x,en.y,en.width,en.height));else if($t.type===Ht.SHAPES.CIRC)qt.beginPath(),qt.arc(en.x,en.y,en.radius,0,2*Math.PI),qt.closePath(),$t.fill&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke());else if($t.type===Ht.SHAPES.ELIP){var rn=2*en.width,on=2*en.height,sn=en.x-rn/2,dn=en.y-on/2;qt.beginPath();var ln=.5522848*(rn/2),un=.5522848*(on/2),pn=sn+rn,cn=dn+on,hn=sn+rn/2,fn=dn+on/2;qt.moveTo(sn,fn),qt.bezierCurveTo(sn,fn-un,hn-ln,dn,hn,dn),qt.bezierCurveTo(hn+ln,dn,pn,fn-un,pn,fn),qt.bezierCurveTo(pn,fn+un,hn+ln,cn,hn,cn),qt.bezierCurveTo(hn-ln,cn,sn,fn+un,sn,fn),qt.closePath(),$t.fill&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke())}else if($t.type===Ht.SHAPES.RREC){var gn=en.x,mn=en.y,yn=en.width,_n=en.height,bn=en.radius,xn=0|Math.min(yn,_n)/2;bn=bn>xn?xn:bn,qt.beginPath(),qt.moveTo(gn,mn+bn),qt.lineTo(gn,mn+_n-bn),qt.quadraticCurveTo(gn,mn+_n,gn+bn,mn+_n),qt.lineTo(gn+yn-bn,mn+_n),qt.quadraticCurveTo(gn+yn,mn+_n,gn+yn,mn+_n-bn),qt.lineTo(gn+yn,mn+bn),qt.quadraticCurveTo(gn+yn,mn,gn+yn-bn,mn),qt.lineTo(gn+bn,mn),qt.quadraticCurveTo(gn,mn,gn,mn+bn),qt.closePath(),($t.fillColor||0===$t.fillColor)&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke())}}},Wt.prototype.updateGraphicsTint=function(zt){zt._prevTint=zt.tint;for(var Vt=(255&zt.tint>>16)/255,qt=(255&zt.tint>>8)/255,Kt=(255&zt.tint)/255,Zt=0;Zt<zt.graphicsData.length;++Zt){var Qt=zt.graphicsData[Zt],Jt=0|Qt.fillColor,$t=0|Qt.lineColor;Qt._fillTint=(255*((255&Jt>>16)/255*Vt)<<16)+(255*((255&Jt>>8)/255*qt)<<8)+255*((255&Jt)/255*Kt),Qt._lineTint=(255*((255&$t>>16)/255*Vt)<<16)+(255*((255&$t>>8)/255*qt)<<8)+255*((255&$t)/255*Kt)}},Wt.prototype.renderPolygon=function(zt,Vt,qt){qt.moveTo(zt[0],zt[1]);for(var Kt=1;Kt<zt.length/2;++Kt)qt.lineTo(zt[2*Kt],zt[2*Kt+1]);Vt&&qt.closePath()},Wt.prototype.destroy=function(){this.renderer=null},Wt}();Gt.default=jt,Yt.default.registerPlugin("graphics",jt)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(Yt,Ht,jt,Wt,zt,Vt,qt,Kt){var Zt=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],Qt=0,Jt=0,$t=0,en=0,tn=0;Zt.push(Yt,Ht);for(var nn=1,an=0;20>=nn;++nn)$t=(Jt=(Qt=1-(an=nn/20))*Qt)*Qt,tn=(en=an*an)*an,Zt.push($t*Yt+3*Jt*an*jt+3*Qt*en*zt+tn*qt,$t*Ht+3*Jt*an*Wt+3*Qt*en*Vt+tn*Kt);return Zt}},{}],57:[function(Bt,Xt,Gt){function Yt(en){return en&&en.__esModule?en:{default:en}}Gt.__esModule=!0;var Ht=Bt("../../utils"),jt=Bt("../../const"),Wt=Yt(Bt("../../renderers/webgl/utils/ObjectRenderer")),zt=Yt(Bt("../../renderers/webgl/WebGLRenderer")),Vt=Yt(Bt("./WebGLGraphicsData")),qt=Yt(Bt("./shaders/PrimitiveShader")),Kt=Yt(Bt("./utils/buildPoly")),Zt=Yt(Bt("./utils/buildRectangle")),Qt=Yt(Bt("./utils/buildRoundedRectangle")),Jt=Yt(Bt("./utils/buildCircle")),$t=function(en){function tn(nn){!function(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}(this,tn);var an=function(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:rn}(this,en.call(this,nn));return an.graphicsDataPool=[],an.primitiveShader=null,an.gl=nn.gl,an.CONTEXT_UID=0,an}return function(nn,an){if("function"!=typeof an&&null!==an)throw new TypeError("Super expression must either be null or a function, not "+typeof an);nn.prototype=Object.create(an&&an.prototype,{constructor:{value:nn,enumerable:!1,writable:!0,configurable:!0}}),an&&(Object.setPrototypeOf?Object.setPrototypeOf(nn,an):nn.__proto__=an)}(tn,en),tn.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new qt.default(this.gl)},tn.prototype.destroy=function(){Wt.default.prototype.destroy.call(this);for(var nn=0;nn<this.graphicsDataPool.length;++nn)this.graphicsDataPool[nn].destroy();this.graphicsDataPool=null},tn.prototype.render=function(nn){var an=this.renderer,rn=an.gl,on,sn=nn._webGL[this.CONTEXT_UID];sn&&nn.dirty===sn.dirty||(this.updateGraphics(nn),sn=nn._webGL[this.CONTEXT_UID]);var dn=this.primitiveShader;an.bindShader(dn),an.state.setBlendMode(nn.blendMode);for(var ln=0,un=sn.data.length,pn;ln<un;ln++)pn=(on=sn.data[ln]).shader,an.bindShader(pn),pn.uniforms.translationMatrix=nn.transform.worldTransform.toArray(!0),pn.uniforms.tint=(0,Ht.hex2rgb)(nn.tint),pn.uniforms.alpha=nn.worldAlpha,an.bindVao(on.vao),on.nativeLines?rn.drawArrays(rn.LINES,0,on.points.length/6):on.vao.draw(rn.TRIANGLE_STRIP,on.indices.length)},tn.prototype.updateGraphics=function(nn){var an=this.renderer.gl,rn=nn._webGL[this.CONTEXT_UID];if(rn||(rn=nn._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:an,clearDirty:-1,dirty:-1}),rn.dirty=nn.dirty,nn.clearDirty!==rn.clearDirty){rn.clearDirty=nn.clearDirty;for(var on=0;on<rn.data.length;on++)this.graphicsDataPool.push(rn.data[on]);rn.data.length=0,rn.lastIndex=0}for(var sn=void 0,dn=void 0,ln=rn.lastIndex,un;ln<nn.graphicsData.length;ln++)un=nn.graphicsData[ln],sn=this.getWebGLData(rn,0),un.nativeLines&&un.lineWidth&&(dn=this.getWebGLData(rn,0,!0),rn.lastIndex++),un.type===jt.SHAPES.POLY&&(0,Kt.default)(un,sn,dn),un.type===jt.SHAPES.RECT?(0,Zt.default)(un,sn,dn):un.type===jt.SHAPES.CIRC||un.type===jt.SHAPES.ELIP?(0,Jt.default)(un,sn,dn):un.type===jt.SHAPES.RREC&&(0,Qt.default)(un,sn,dn),rn.lastIndex++;this.renderer.bindVao(null);for(var pn=0;pn<rn.data.length;pn++)(sn=rn.data[pn]).dirty&&sn.upload()},tn.prototype.getWebGLData=function(nn,an,rn){var on=nn.data[nn.data.length-1];return(!on||on.nativeLines!==rn||32e4<on.points.length)&&((on=this.graphicsDataPool.pop()||new Vt.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=rn,on.reset(an),nn.data.push(on)),on.dirty=!0,on},tn}(Wt.default);Gt.default=$t,zt.default.registerPlugin("graphics",$t)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":124,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("pixi-gl-core")),Ht=function(){function jt(Wt,zt,Vt){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.gl=Wt,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=Yt.default.GLBuffer.createVertexBuffer(Wt),this.indexBuffer=Yt.default.GLBuffer.createIndexBuffer(Wt),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=zt,this.vao=new Yt.default.VertexArrayObject(Wt,Vt).addIndex(this.indexBuffer).addAttribute(this.buffer,zt.attributes.aVertexPosition,Wt.FLOAT,!1,24,0).addAttribute(this.buffer,zt.attributes.aColor,Wt.FLOAT,!1,24,8)}return jt.prototype.reset=function(){this.points.length=0,this.indices.length=0},jt.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},jt.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},jt}();Gt.default=Ht},{"pixi-gl-core":12}],59:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Ht){function jt(Wt){return function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,jt),function(zt,Vt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&("object"==typeof Vt||"function"==typeof Vt)?Vt:zt}(this,Ht.call(this,Wt,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(Wt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Wt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Wt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Wt,zt):Wt.__proto__=zt)}(jt,Ht),jt}(function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("../../../Shader")).default);Gt.default=Yt},{"../../../Shader":44}],60:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(Wt,zt,Vt){var qt=Wt.shape,Kt=qt.x,Zt=qt.y,Qt,Jt;if(Wt.type===Ht.SHAPES.CIRC?(Qt=qt.radius,Jt=qt.radius):(Qt=qt.width,Jt=qt.height),0!==Qt&&0!==Jt){var $t=Math.floor(30*Math.sqrt(qt.radius))||Math.floor(15*Math.sqrt(qt.width+qt.height)),en=2*Math.PI/$t;if(Wt.fill){var tn=(0,jt.hex2rgb)(Wt.fillColor),nn=Wt.fillAlpha,an=tn[0]*nn,rn=tn[1]*nn,on=tn[2]*nn,sn=zt.points,dn=zt.indices,ln=sn.length/6;dn.push(ln);for(var un=0;un<$t+1;un++)sn.push(Kt,Zt,an,rn,on,nn),sn.push(Kt+Math.sin(en*un)*Qt,Zt+Math.cos(en*un)*Jt,an,rn,on,nn),dn.push(ln++,ln++);dn.push(ln-1)}if(Wt.lineWidth){var pn=Wt.points;Wt.points=[];for(var cn=0;cn<$t+1;cn++)Wt.points.push(Kt+Math.sin(en*cn)*Qt,Zt+Math.cos(en*cn)*Jt);(0,Yt.default)(Wt,zt,Vt),Wt.points=pn}}};var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./buildLine")),Ht=Bt("../../../const"),jt=Bt("../../../utils")},{"../../../const":46,"../../../utils":124,"./buildLine":61}],61:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(jt,Wt,zt){jt.nativeLines?function(Vt,qt){var Kt=0,Zt=Vt.points;if(0!==Zt.length){var Qt=qt.points,Jt=Zt.length/2,$t=(0,Ht.hex2rgb)(Vt.lineColor),en=Vt.lineAlpha,tn=$t[0]*en,nn=$t[1]*en,an=$t[2]*en;for(Kt=1;Kt<Jt;Kt++){var rn=Zt[2*(Kt-1)],on=Zt[2*(Kt-1)+1],sn=Zt[2*Kt],dn=Zt[2*Kt+1];Qt.push(rn,on),Qt.push(tn,nn,an,en),Qt.push(sn,dn),Qt.push(tn,nn,an,en)}}}(jt,zt):function(Vt,qt){var Kt=Vt.points;if(0!==Kt.length){var Zt=new Yt.Point(Kt[0],Kt[1]),Qt=new Yt.Point(Kt[Kt.length-2],Kt[Kt.length-1]);if(Zt.x===Qt.x&&Zt.y===Qt.y){(Kt=Kt.slice()).pop(),Kt.pop();var Jt=(Qt=new Yt.Point(Kt[Kt.length-2],Kt[Kt.length-1])).x+.5*(Zt.x-Qt.x),$t=Qt.y+.5*(Zt.y-Qt.y);Kt.unshift(Jt,$t),Kt.push(Jt,$t)}var en=qt.points,tn=qt.indices,nn=Kt.length/2,an=Kt.length,rn=en.length/6,on=Vt.lineWidth/2,sn=(0,Ht.hex2rgb)(Vt.lineColor),dn=Vt.lineAlpha,ln=sn[0]*dn,un=sn[1]*dn,pn=sn[2]*dn,cn=Kt[0],hn=Kt[1],fn=Kt[2],gn=Kt[3],mn=0,yn=0,_n=-(hn-gn),bn=cn-fn,xn=0,vn=0,Tn=0,En=0,Sn=Math.sqrt(_n*_n+bn*bn);_n/=Sn,bn/=Sn,_n*=on,bn*=on,en.push(cn-_n,hn-bn,ln,un,pn,dn),en.push(cn+_n,hn+bn,ln,un,pn,dn);for(var wn=1;wn<nn-1;++wn){cn=Kt[2*(wn-1)],hn=Kt[2*(wn-1)+1],fn=Kt[2*wn],gn=Kt[2*wn+1],mn=Kt[2*(wn+1)],yn=Kt[2*(wn+1)+1],_n=-(hn-gn),bn=cn-fn,_n/=Sn=Math.sqrt(_n*_n+bn*bn),bn/=Sn,_n*=on,bn*=on,xn=-(gn-yn),vn=fn-mn,xn/=Sn=Math.sqrt(xn*xn+vn*vn),vn/=Sn;var Cn=-bn+hn-(-bn+gn),Pn=-_n+fn-(-_n+cn),An=(-_n+cn)*(-bn+gn)-(-_n+fn)*(-bn+hn),Mn=-(vn*=on)+yn-(-vn+gn),Rn=-(xn*=on)+fn-(-xn+mn),In=(-xn+mn)*(-vn+gn)-(-xn+fn)*(-vn+yn),Dn=Cn*Rn-Mn*Pn;if(.1>Math.abs(Dn))Dn+=10.1,en.push(fn-_n,gn-bn,ln,un,pn,dn),en.push(fn+_n,gn+bn,ln,un,pn,dn);else{var On=(Pn*In-Rn*An)/Dn,Ln=(Mn*An-Cn*In)/Dn;(On-fn)*(On-fn)+(Ln-gn)*(Ln-gn)>196*on*on?(Tn=_n-xn,En=bn-vn,Tn/=Sn=Math.sqrt(Tn*Tn+En*En),En/=Sn,Tn*=on,En*=on,en.push(fn-Tn,gn-En),en.push(ln,un,pn,dn),en.push(fn+Tn,gn+En),en.push(ln,un,pn,dn),en.push(fn-Tn,gn-En),en.push(ln,un,pn,dn),an++):(en.push(On,Ln),en.push(ln,un,pn,dn),en.push(fn-(On-fn),gn-(Ln-gn)),en.push(ln,un,pn,dn))}}cn=Kt[2*(nn-2)],hn=Kt[2*(nn-2)+1],fn=Kt[2*(nn-1)],_n=-(hn-(gn=Kt[2*(nn-1)+1])),bn=cn-fn,_n/=Sn=Math.sqrt(_n*_n+bn*bn),bn/=Sn,_n*=on,bn*=on,en.push(fn-_n,gn-bn),en.push(ln,un,pn,dn),en.push(fn+_n,gn+bn),en.push(ln,un,pn,dn),tn.push(rn);for(var kn=0;kn<an;++kn)tn.push(rn++);tn.push(rn-1)}}(jt,Wt)};var Yt=Bt("../../../math"),Ht=Bt("../../../utils")},{"../../../math":70,"../../../utils":124}],62:[function(Bt,Xt,Gt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Gt.__esModule=!0,Gt.default=function(zt,Vt,qt){zt.points=zt.shape.points.slice();var Kt=zt.points;if(zt.fill&&6<=Kt.length){for(var Zt=[],Qt=zt.holes,Jt=0,$t;Jt<Qt.length;Jt++)$t=Qt[Jt],Zt.push(Kt.length/2),Kt=Kt.concat($t.points);var en=Vt.points,tn=Vt.indices,nn=Kt.length/2,an=(0,jt.hex2rgb)(zt.fillColor),rn=zt.fillAlpha,on=an[0]*rn,sn=an[1]*rn,dn=an[2]*rn,ln=(0,Wt.default)(Kt,Zt,2);if(!ln)return;for(var un=en.length/6,pn=0;pn<ln.length;pn+=3)tn.push(ln[pn]+un),tn.push(ln[pn]+un),tn.push(ln[pn+1]+un),tn.push(ln[pn+2]+un),tn.push(ln[pn+2]+un);for(var cn=0;cn<nn;cn++)en.push(Kt[2*cn],Kt[2*cn+1],on,sn,dn,rn)}0<zt.lineWidth&&(0,Ht.default)(zt,Vt,qt)};var Ht=Yt(Bt("./buildLine")),jt=Bt("../../../utils"),Wt=Yt(Bt("earcut"))},{"../../../utils":124,"./buildLine":61,earcut:2}],63:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(jt,Wt,zt){var Vt=jt.shape,qt=Vt.x,Kt=Vt.y,Zt=Vt.width,Qt=Vt.height;if(jt.fill){var Jt=(0,Ht.hex2rgb)(jt.fillColor),$t=jt.fillAlpha,en=Jt[0]*$t,tn=Jt[1]*$t,nn=Jt[2]*$t,an=Wt.points,rn=Wt.indices,on=an.length/6;an.push(qt,Kt),an.push(en,tn,nn,$t),an.push(qt+Zt,Kt),an.push(en,tn,nn,$t),an.push(qt,Kt+Qt),an.push(en,tn,nn,$t),an.push(qt+Zt,Kt+Qt),an.push(en,tn,nn,$t),rn.push(on,on,on+1,on+2,on+3,on+3)}if(jt.lineWidth){var sn=jt.points;jt.points=[qt,Kt,qt+Zt,Kt,qt+Zt,Kt+Qt,qt,Kt+Qt,qt,Kt],(0,Yt.default)(jt,Wt,zt),jt.points=sn}};var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./buildLine")),Ht=Bt("../../../utils")},{"../../../utils":124,"./buildLine":61}],64:[function(Bt,Xt,Gt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}function Ht(qt,Kt,Zt){return qt+(Kt-qt)*Zt}function jt(qt,Kt,Zt,Qt,Jt,$t){for(var en=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],tn=0,nn=0,an=0,rn=0,on=0,sn=0,dn=0,ln=0;20>=dn;++dn)tn=Ht(qt,Zt,ln=dn/20),nn=Ht(Kt,Qt,ln),an=Ht(Zt,Jt,ln),rn=Ht(Qt,$t,ln),on=Ht(tn,an,ln),sn=Ht(nn,rn,ln),en.push(on,sn);return en}Gt.__esModule=!0,Gt.default=function(qt,Kt,Zt){var Qt=qt.shape,Jt=Qt.x,$t=Qt.y,en=Qt.width,tn=Qt.height,nn=Qt.radius,an=[];if(an.push(Jt,$t+nn),jt(Jt,$t+tn-nn,Jt,$t+tn,Jt+nn,$t+tn,an),jt(Jt+en-nn,$t+tn,Jt+en,$t+tn,Jt+en,$t+tn-nn,an),jt(Jt+en,$t+nn,Jt+en,$t,Jt+en-nn,$t,an),jt(Jt+nn,$t,Jt,$t,Jt,$t+nn+1e-10,an),qt.fill){for(var rn=(0,Vt.hex2rgb)(qt.fillColor),on=qt.fillAlpha,sn=rn[0]*on,dn=rn[1]*on,ln=rn[2]*on,un=Kt.points,pn=Kt.indices,cn=un.length/6,hn=(0,Wt.default)(an,null,2),fn=0,gn=hn.length;fn<gn;fn+=3)pn.push(hn[fn]+cn),pn.push(hn[fn]+cn),pn.push(hn[fn+1]+cn),pn.push(hn[fn+2]+cn),pn.push(hn[fn+2]+cn);for(var mn=0,yn=an.length;mn<yn;mn++)un.push(an[mn],an[++mn],sn,dn,ln,on)}if(qt.lineWidth){var _n=qt.points;qt.points=an,(0,zt.default)(qt,Kt,Zt),qt.points=_n}};var Wt=Yt(Bt("earcut")),zt=Yt(Bt("./buildLine")),Vt=Bt("../../../utils")},{"../../../utils":124,"./buildLine":61,earcut:2}],65:[function(Bt,Xt,Gt){function Yt(On){if(On&&On.__esModule)return On;var Ln={};if(null!=On)for(var kn in On)Object.prototype.hasOwnProperty.call(On,kn)&&(Ln[kn]=On[kn]);return Ln.default=On,Ln}function Ht(On){return On&&On.__esModule?On:{default:On}}Gt.__esModule=!0,Gt.autoDetectRenderer=Gt.Application=Gt.Filter=Gt.SpriteMaskFilter=Gt.Quad=Gt.RenderTarget=Gt.ObjectRenderer=Gt.WebGLManager=Gt.Shader=Gt.CanvasRenderTarget=Gt.TextureUvs=Gt.VideoBaseTexture=Gt.BaseRenderTexture=Gt.RenderTexture=Gt.BaseTexture=Gt.Texture=Gt.Spritesheet=Gt.CanvasGraphicsRenderer=Gt.GraphicsRenderer=Gt.GraphicsData=Gt.Graphics=Gt.TextMetrics=Gt.TextStyle=Gt.Text=Gt.SpriteRenderer=Gt.CanvasTinter=Gt.CanvasSpriteRenderer=Gt.Sprite=Gt.TransformBase=Gt.TransformStatic=Gt.Transform=Gt.Container=Gt.DisplayObject=Gt.Bounds=Gt.glCore=Gt.WebGLRenderer=Gt.CanvasRenderer=Gt.ticker=Gt.utils=Gt.settings=void 0;var jt=Bt("./const");Object.keys(jt).forEach(function(On){"default"!==On&&"__esModule"!==On&&Object.defineProperty(Gt,On,{enumerable:!0,get:function(){return jt[On]}})});var Wt=Bt("./math");Object.keys(Wt).forEach(function(On){"default"!==On&&"__esModule"!==On&&Object.defineProperty(Gt,On,{enumerable:!0,get:function(){return Wt[On]}})});var zt=Bt("pixi-gl-core");Object.defineProperty(Gt,"glCore",{enumerable:!0,get:function(){return Ht(zt).default}});var Vt=Bt("./display/Bounds");Object.defineProperty(Gt,"Bounds",{enumerable:!0,get:function(){return Ht(Vt).default}});var qt=Bt("./display/DisplayObject");Object.defineProperty(Gt,"DisplayObject",{enumerable:!0,get:function(){return Ht(qt).default}});var Kt=Bt("./display/Container");Object.defineProperty(Gt,"Container",{enumerable:!0,get:function(){return Ht(Kt).default}});var Zt=Bt("./display/Transform");Object.defineProperty(Gt,"Transform",{enumerable:!0,get:function(){return Ht(Zt).default}});var Qt=Bt("./display/TransformStatic");Object.defineProperty(Gt,"TransformStatic",{enumerable:!0,get:function(){return Ht(Qt).default}});var Jt=Bt("./display/TransformBase");Object.defineProperty(Gt,"TransformBase",{enumerable:!0,get:function(){return Ht(Jt).default}});var $t=Bt("./sprites/Sprite");Object.defineProperty(Gt,"Sprite",{enumerable:!0,get:function(){return Ht($t).default}});var en=Bt("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(Gt,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return Ht(en).default}});var tn=Bt("./sprites/canvas/CanvasTinter");Object.defineProperty(Gt,"CanvasTinter",{enumerable:!0,get:function(){return Ht(tn).default}});var nn=Bt("./sprites/webgl/SpriteRenderer");Object.defineProperty(Gt,"SpriteRenderer",{enumerable:!0,get:function(){return Ht(nn).default}});var an=Bt("./text/Text");Object.defineProperty(Gt,"Text",{enumerable:!0,get:function(){return Ht(an).default}});var rn=Bt("./text/TextStyle");Object.defineProperty(Gt,"TextStyle",{enumerable:!0,get:function(){return Ht(rn).default}});var on=Bt("./text/TextMetrics");Object.defineProperty(Gt,"TextMetrics",{enumerable:!0,get:function(){return Ht(on).default}});var sn=Bt("./graphics/Graphics");Object.defineProperty(Gt,"Graphics",{enumerable:!0,get:function(){return Ht(sn).default}});var dn=Bt("./graphics/GraphicsData");Object.defineProperty(Gt,"GraphicsData",{enumerable:!0,get:function(){return Ht(dn).default}});var ln=Bt("./graphics/webgl/GraphicsRenderer");Object.defineProperty(Gt,"GraphicsRenderer",{enumerable:!0,get:function(){return Ht(ln).default}});var un=Bt("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(Gt,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return Ht(un).default}});var pn=Bt("./textures/Spritesheet");Object.defineProperty(Gt,"Spritesheet",{enumerable:!0,get:function(){return Ht(pn).default}});var cn=Bt("./textures/Texture");Object.defineProperty(Gt,"Texture",{enumerable:!0,get:function(){return Ht(cn).default}});var hn=Bt("./textures/BaseTexture");Object.defineProperty(Gt,"BaseTexture",{enumerable:!0,get:function(){return Ht(hn).default}});var fn=Bt("./textures/RenderTexture");Object.defineProperty(Gt,"RenderTexture",{enumerable:!0,get:function(){return Ht(fn).default}});var gn=Bt("./textures/BaseRenderTexture");Object.defineProperty(Gt,"BaseRenderTexture",{enumerable:!0,get:function(){return Ht(gn).default}});var mn=Bt("./textures/VideoBaseTexture");Object.defineProperty(Gt,"VideoBaseTexture",{enumerable:!0,get:function(){return Ht(mn).default}});var yn=Bt("./textures/TextureUvs");Object.defineProperty(Gt,"TextureUvs",{enumerable:!0,get:function(){return Ht(yn).default}});var _n=Bt("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(Gt,"CanvasRenderTarget",{enumerable:!0,get:function(){return Ht(_n).default}});var bn=Bt("./Shader");Object.defineProperty(Gt,"Shader",{enumerable:!0,get:function(){return Ht(bn).default}});var xn=Bt("./renderers/webgl/managers/WebGLManager");Object.defineProperty(Gt,"WebGLManager",{enumerable:!0,get:function(){return Ht(xn).default}});var vn=Bt("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(Gt,"ObjectRenderer",{enumerable:!0,get:function(){return Ht(vn).default}});var Tn=Bt("./renderers/webgl/utils/RenderTarget");Object.defineProperty(Gt,"RenderTarget",{enumerable:!0,get:function(){return Ht(Tn).default}});var En=Bt("./renderers/webgl/utils/Quad");Object.defineProperty(Gt,"Quad",{enumerable:!0,get:function(){return Ht(En).default}});var Sn=Bt("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(Gt,"SpriteMaskFilter",{enumerable:!0,get:function(){return Ht(Sn).default}});var wn=Bt("./renderers/webgl/filters/Filter");Object.defineProperty(Gt,"Filter",{enumerable:!0,get:function(){return Ht(wn).default}});var Cn=Bt("./Application");Object.defineProperty(Gt,"Application",{enumerable:!0,get:function(){return Ht(Cn).default}});var Pn=Bt("./autoDetectRenderer");Object.defineProperty(Gt,"autoDetectRenderer",{enumerable:!0,get:function(){return Pn.autoDetectRenderer}});var An=Yt(Bt("./utils")),Mn=Yt(Bt("./ticker")),Rn=Ht(Bt("./settings")),In=Ht(Bt("./renderers/canvas/CanvasRenderer")),Dn=Ht(Bt("./renderers/webgl/WebGLRenderer"));Gt.settings=Rn.default,Gt.utils=An,Gt.ticker=Mn,Gt.CanvasRenderer=In.default,Gt.WebGLRenderer=Dn.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureUvs":116,"./textures/VideoBaseTexture":117,"./ticker":120,"./utils":124,"pixi-gl-core":12}],66:[function(Bt,Xt,Gt){function Yt(Qt){return 0>Qt?-1:0<Qt?1:0}Gt.__esModule=!0;var Ht=function(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}(Bt("./Matrix")),jt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],Wt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Vt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],qt=[],Kt=[];!function(){for(var Qt=0,Jt;16>Qt;Qt++){Jt=[],Kt.push(Jt);for(var $t=0;16>$t;$t++)for(var en=Yt(jt[Qt]*jt[$t]+zt[Qt]*Wt[$t]),tn=Yt(Wt[Qt]*jt[$t]+Vt[Qt]*Wt[$t]),nn=Yt(jt[Qt]*zt[$t]+zt[Qt]*Vt[$t]),an=Yt(Wt[Qt]*zt[$t]+Vt[Qt]*Vt[$t]),rn=0;16>rn;rn++)if(jt[rn]===en&&Wt[rn]===tn&&zt[rn]===nn&&Vt[rn]===an){Jt.push(rn);break}}for(var on=0,sn;16>on;on++)sn=new Ht.default,sn.set(jt[on],Wt[on],zt[on],Vt[on],0,0),qt.push(sn)}();var Zt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(Qt){return jt[Qt]},uY:function(Qt){return Wt[Qt]},vX:function(Qt){return zt[Qt]},vY:function(Qt){return Vt[Qt]},inv:function(Qt){return 8&Qt?15&Qt:7&-Qt},add:function(Qt,Jt){return Kt[Qt][Jt]},sub:function(Qt,Jt){return Kt[Qt][Zt.inv(Jt)]},rotate180:function(Qt){return 4^Qt},isSwapWidthHeight:function(Qt){return 2==(3&Qt)},byDirection:function(Qt,Jt){return 2*Math.abs(Qt)<=Math.abs(Jt)?0<=Jt?Zt.S:Zt.N:2*Math.abs(Jt)<=Math.abs(Qt)?0<Qt?Zt.E:Zt.W:0<Jt?0<Qt?Zt.SE:Zt.SW:0<Qt?Zt.NE:Zt.NW},matrixAppendRotationInv:function(Qt,Jt){var $t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,en=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,tn=qt[Zt.inv(Jt)];tn.tx=$t,tn.ty=en,Qt.append(tn)}};Gt.default=Zt},{"./Matrix":67}],67:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./Point")),jt=function(){function Wt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Kt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,Zt=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,Qt=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;!function(Jt,$t){if(!(Jt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.a=zt,this.b=Vt,this.c=qt,this.d=Kt,this.tx=Zt,this.ty=Qt,this.array=null}return Wt.prototype.fromArray=function(zt){this.a=zt[0],this.b=zt[1],this.c=zt[3],this.d=zt[4],this.tx=zt[2],this.ty=zt[5]},Wt.prototype.set=function(zt,Vt,qt,Kt,Zt,Qt){return this.a=zt,this.b=Vt,this.c=qt,this.d=Kt,this.tx=Zt,this.ty=Qt,this},Wt.prototype.toArray=function(zt,Vt){this.array||(this.array=new Float32Array(9));var qt=Vt||this.array;return zt?(qt[0]=this.a,qt[1]=this.b,qt[2]=0,qt[3]=this.c,qt[4]=this.d,qt[5]=0,qt[6]=this.tx,qt[7]=this.ty,qt[8]=1):(qt[0]=this.a,qt[1]=this.c,qt[2]=this.tx,qt[3]=this.b,qt[4]=this.d,qt[5]=this.ty,qt[6]=0,qt[7]=0,qt[8]=1),qt},Wt.prototype.apply=function(zt,Vt){Vt=Vt||new Ht.default;var qt=zt.x,Kt=zt.y;return Vt.x=this.a*qt+this.c*Kt+this.tx,Vt.y=this.b*qt+this.d*Kt+this.ty,Vt},Wt.prototype.applyInverse=function(zt,Vt){Vt=Vt||new Ht.default;var qt=1/(this.a*this.d+this.c*-this.b),Kt=zt.x,Zt=zt.y;return Vt.x=this.d*qt*Kt+-this.c*qt*Zt+(this.ty*this.c-this.tx*this.d)*qt,Vt.y=this.a*qt*Zt+-this.b*qt*Kt+(-this.ty*this.a+this.tx*this.b)*qt,Vt},Wt.prototype.translate=function(zt,Vt){return this.tx+=zt,this.ty+=Vt,this},Wt.prototype.scale=function(zt,Vt){return this.a*=zt,this.d*=Vt,this.c*=zt,this.b*=Vt,this.tx*=zt,this.ty*=Vt,this},Wt.prototype.rotate=function(zt){var Vt=Math.cos(zt),qt=Math.sin(zt),Kt=this.a,Zt=this.c,Qt=this.tx;return this.a=Kt*Vt-this.b*qt,this.b=Kt*qt+this.b*Vt,this.c=Zt*Vt-this.d*qt,this.d=Zt*qt+this.d*Vt,this.tx=Qt*Vt-this.ty*qt,this.ty=Qt*qt+this.ty*Vt,this},Wt.prototype.append=function(zt){var Vt=this.a,qt=this.b,Kt=this.c,Zt=this.d;return this.a=zt.a*Vt+zt.b*Kt,this.b=zt.a*qt+zt.b*Zt,this.c=zt.c*Vt+zt.d*Kt,this.d=zt.c*qt+zt.d*Zt,this.tx=zt.tx*Vt+zt.ty*Kt+this.tx,this.ty=zt.tx*qt+zt.ty*Zt+this.ty,this},Wt.prototype.setTransform=function(zt,Vt,qt,Kt,Zt,Qt,Jt,$t,en){var tn=Math.sin(Jt),nn=Math.cos(Jt),an=Math.cos(en),rn=Math.sin(en),on=-Math.sin($t),sn=Math.cos($t),dn=nn*Zt,ln=tn*Zt,un=-tn*Qt,pn=nn*Qt;return this.a=an*dn+rn*un,this.b=an*ln+rn*pn,this.c=on*dn+sn*un,this.d=on*ln+sn*pn,this.tx=zt+(qt*dn+Kt*un),this.ty=Vt+(qt*ln+Kt*pn),this},Wt.prototype.prepend=function(zt){var Vt=this.tx;if(1!==zt.a||0!==zt.b||0!==zt.c||1!==zt.d){var qt=this.a,Kt=this.c;this.a=qt*zt.a+this.b*zt.c,this.b=qt*zt.b+this.b*zt.d,this.c=Kt*zt.a+this.d*zt.c,this.d=Kt*zt.b+this.d*zt.d}return this.tx=Vt*zt.a+this.ty*zt.c+zt.tx,this.ty=Vt*zt.b+this.ty*zt.d+zt.ty,this},Wt.prototype.decompose=function(zt){var Vt=this.a,qt=this.b,Kt=this.c,Zt=this.d,Qt=-Math.atan2(-Kt,Zt),Jt=Math.atan2(qt,Vt);return 1e-5>Math.abs(Qt+Jt)?(zt.rotation=Jt,0>Vt&&0<=Zt&&(zt.rotation+=0>=zt.rotation?Math.PI:-Math.PI),zt.skew.x=zt.skew.y=0):(zt.skew.x=Qt,zt.skew.y=Jt),zt.scale.x=Math.sqrt(Vt*Vt+qt*qt),zt.scale.y=Math.sqrt(Kt*Kt+Zt*Zt),zt.position.x=this.tx,zt.position.y=this.ty,zt},Wt.prototype.invert=function(){var zt=this.a,Vt=this.b,qt=this.c,Kt=this.d,Zt=this.tx,Qt=zt*Kt-Vt*qt;return this.a=Kt/Qt,this.b=-Vt/Qt,this.c=-qt/Qt,this.d=zt/Qt,this.tx=(qt*this.ty-Kt*Zt)/Qt,this.ty=-(zt*this.ty-Vt*Zt)/Qt,this},Wt.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},Wt.prototype.clone=function(){var zt=new Wt;return zt.a=this.a,zt.b=this.b,zt.c=this.c,zt.d=this.d,zt.tx=this.tx,zt.ty=this.ty,zt},Wt.prototype.copy=function(zt){return zt.a=this.a,zt.b=this.b,zt.c=this.c,zt.d=this.d,zt.tx=this.tx,zt.ty=this.ty,zt},Yt(Wt,null,[{key:"IDENTITY",get:function(){return new Wt}},{key:"TEMP_MATRIX",get:function(){return new Wt}}]),Wt}();Gt.default=jt},{"./Point":69}],68:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function jt(Wt,zt){for(var Vt=0,qt;Vt<zt.length;Vt++)qt=zt[Vt],qt.enumerable=qt.enumerable||!1,qt.configurable=!0,"value"in qt&&(qt.writable=!0),Object.defineProperty(Wt,qt.key,qt)}return function(Wt,zt,Vt){return zt&&jt(Wt.prototype,zt),Vt&&jt(Wt,Vt),Wt}}(),Ht=function(){function jt(Wt,zt){var Vt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,qt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(Kt,Zt){if(!(Kt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,jt),this._x=Vt,this._y=qt,this.cb=Wt,this.scope=zt}return jt.prototype.set=function(Wt,zt){var Vt=Wt||0,qt=zt||(0===zt?0:Vt);this._x===Vt&&this._y===qt||(this._x=Vt,this._y=qt,this.cb.call(this.scope))},jt.prototype.copy=function(Wt){this._x===Wt.x&&this._y===Wt.y||(this._x=Wt.x,this._y=Wt.y,this.cb.call(this.scope))},Yt(jt,[{key:"x",get:function(){return this._x},set:function(Wt){this._x!==Wt&&(this._x=Wt,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(Wt){this._y!==Wt&&(this._y=Wt,this.cb.call(this.scope))}}]),jt}();Gt.default=Ht},{}],69:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Ht(){var jt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Wt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.x=jt,this.y=Wt}return Ht.prototype.clone=function(){return new Ht(this.x,this.y)},Ht.prototype.copy=function(jt){this.set(jt.x,jt.y)},Ht.prototype.equals=function(jt){return jt.x===this.x&&jt.y===this.y},Ht.prototype.set=function(jt,Wt){this.x=jt||0,this.y=Wt||(0===Wt?0:this.x)},Ht}();Gt.default=Yt},{}],70:[function(Bt,Xt,Gt){function Yt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Gt.__esModule=!0;var Ht=Bt("./Point");Object.defineProperty(Gt,"Point",{enumerable:!0,get:function(){return Yt(Ht).default}});var jt=Bt("./ObservablePoint");Object.defineProperty(Gt,"ObservablePoint",{enumerable:!0,get:function(){return Yt(jt).default}});var Wt=Bt("./Matrix");Object.defineProperty(Gt,"Matrix",{enumerable:!0,get:function(){return Yt(Wt).default}});var zt=Bt("./GroupD8");Object.defineProperty(Gt,"GroupD8",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./shapes/Circle");Object.defineProperty(Gt,"Circle",{enumerable:!0,get:function(){return Yt(Vt).default}});var qt=Bt("./shapes/Ellipse");Object.defineProperty(Gt,"Ellipse",{enumerable:!0,get:function(){return Yt(qt).default}});var Kt=Bt("./shapes/Polygon");Object.defineProperty(Gt,"Polygon",{enumerable:!0,get:function(){return Yt(Kt).default}});var Zt=Bt("./shapes/Rectangle");Object.defineProperty(Gt,"Rectangle",{enumerable:!0,get:function(){return Yt(Zt).default}});var Qt=Bt("./shapes/RoundedRectangle");Object.defineProperty(Gt,"RoundedRectangle",{enumerable:!0,get:function(){return Yt(Qt).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./Rectangle")),Ht=Bt("../../const"),jt=function(){function Wt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(Kt,Zt){if(!(Kt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.x=zt,this.y=Vt,this.radius=qt,this.type=Ht.SHAPES.CIRC}return Wt.prototype.clone=function(){return new Wt(this.x,this.y,this.radius)},Wt.prototype.contains=function(zt,Vt){if(0>=this.radius)return!1;var qt=this.radius*this.radius,Kt=this.x-zt,Zt=this.y-Vt;return Kt*=Kt,Zt*=Zt,Kt+Zt<=qt},Wt.prototype.getBounds=function(){return new Yt.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},Wt}();Gt.default=jt},{"../../const":46,"./Rectangle":74}],72:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./Rectangle")),Ht=Bt("../../const"),jt=function(){function Wt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Kt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.x=zt,this.y=Vt,this.width=qt,this.height=Kt,this.type=Ht.SHAPES.ELIP}return Wt.prototype.clone=function(){return new Wt(this.x,this.y,this.width,this.height)},Wt.prototype.contains=function(zt,Vt){if(0>=this.width||0>=this.height)return!1;var qt=(zt-this.x)/this.width,Kt=(Vt-this.y)/this.height;return qt*=qt,Kt*=Kt,1>=qt+Kt},Wt.prototype.getBounds=function(){return new Yt.default(this.x-this.width,this.y-this.height,this.width,this.height)},Wt}();Gt.default=jt},{"../../const":46,"./Rectangle":74}],73:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../Point")),Ht=Bt("../../const"),jt=function(){function Wt(){for(var zt=arguments.length,Vt=Array(zt),qt=0;qt<zt;qt++)Vt[qt]=arguments[qt];if(function(Jt,$t){if(!(Jt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Wt),Array.isArray(Vt[0])&&(Vt=Vt[0]),Vt[0]instanceof Yt.default){for(var Kt=[],Zt=0,Qt=Vt.length;Zt<Qt;Zt++)Kt.push(Vt[Zt].x,Vt[Zt].y);Vt=Kt}this.closed=!0,this.points=Vt,this.type=Ht.SHAPES.POLY}return Wt.prototype.clone=function(){return new Wt(this.points.slice())},Wt.prototype.close=function(){var zt=this.points;zt[0]===zt[zt.length-2]&&zt[1]===zt[zt.length-1]||zt.push(zt[0],zt[1])},Wt.prototype.contains=function(zt,Vt){for(var qt=!1,Kt=this.points.length/2,Zt=0,Qt=Kt-1;Zt<Kt;Qt=Zt++){var Jt=this.points[2*Zt],$t=this.points[2*Zt+1],en=this.points[2*Qt],tn=this.points[2*Qt+1];$t>Vt!=tn>Vt&&zt<(Vt-$t)/(tn-$t)*(en-Jt)+Jt&&(qt=!qt)}return qt},Wt}();Gt.default=jt},{"../../const":46,"../Point":69}],74:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=Bt("../../const"),jt=function(){function Wt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Kt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.x=+zt,this.y=+Vt,this.width=+qt,this.height=+Kt,this.type=Ht.SHAPES.RECT}return Wt.prototype.clone=function(){return new Wt(this.x,this.y,this.width,this.height)},Wt.prototype.copy=function(zt){return this.x=zt.x,this.y=zt.y,this.width=zt.width,this.height=zt.height,this},Wt.prototype.contains=function(zt,Vt){return!(0>=this.width||0>=this.height)&&zt>=this.x&&zt<this.x+this.width&&Vt>=this.y&&Vt<this.y+this.height},Wt.prototype.pad=function(zt,Vt){zt=zt||0,Vt=Vt||(0===Vt?0:zt),this.x-=zt,this.y-=Vt,this.width+=2*zt,this.height+=2*Vt},Wt.prototype.fit=function(zt){this.x<zt.x&&(this.width+=this.x,0>this.width&&(this.width=0),this.x=zt.x),this.y<zt.y&&(this.height+=this.y,0>this.height&&(this.height=0),this.y=zt.y),this.x+this.width>zt.x+zt.width&&(this.width=zt.width-this.x,0>this.width&&(this.width=0)),this.y+this.height>zt.y+zt.height&&(this.height=zt.height-this.y,0>this.height&&(this.height=0))},Wt.prototype.enlarge=function(zt){var Vt=Math.min(this.x,zt.x),qt=Math.max(this.x+this.width,zt.x+zt.width),Kt=Math.min(this.y,zt.y),Zt=Math.max(this.y+this.height,zt.y+zt.height);this.x=Vt,this.width=qt-Vt,this.y=Kt,this.height=Zt-Kt},Yt(Wt,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new Wt(0,0,0,0)}}]),Wt}();Gt.default=jt},{"../../const":46}],75:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=Bt("../../const"),Ht=function(){function jt(){var Wt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,zt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,Vt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,qt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,Kt=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.x=Wt,this.y=zt,this.width=Vt,this.height=qt,this.radius=Kt,this.type=Yt.SHAPES.RREC}return jt.prototype.clone=function(){return new jt(this.x,this.y,this.width,this.height,this.radius)},jt.prototype.contains=function(Wt,zt){if(0>=this.width||0>=this.height)return!1;if(Wt>=this.x&&Wt<=this.x+this.width&&zt>=this.y&&zt<=this.y+this.height){if(zt>=this.y+this.radius&&zt<=this.y+this.height-this.radius||Wt>=this.x+this.radius&&Wt<=this.x+this.width-this.radius)return!0;var Vt=Wt-(this.x+this.radius),qt=zt-(this.y+this.radius),Kt=this.radius*this.radius;if(Vt*Vt+qt*qt<=Kt)return!0;if((Vt=Wt-(this.x+this.width-this.radius))*Vt+qt*qt<=Kt)return!0;if(qt=zt-(this.y+this.height-this.radius),Vt*Vt+qt*qt<=Kt)return!0;if((Vt=Wt-(this.x+this.radius))*Vt+qt*qt<=Kt)return!0}return!1},jt}();Gt.default=Ht},{"../../const":46}],76:[function(Bt,Xt,Gt){function Yt($t){return $t&&$t.__esModule?$t:{default:$t}}Gt.__esModule=!0;var Ht=function(){function $t(en,tn){for(var nn=0,an;nn<tn.length;nn++)an=tn[nn],an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(en,an.key,an)}return function(en,tn,nn){return tn&&$t(en.prototype,tn),nn&&$t(en,nn),en}}(),jt=Bt("../utils"),Wt=Bt("../math"),zt=Bt("../const"),Vt=Yt(Bt("../settings")),qt=Yt(Bt("../display/Container")),Kt=Yt(Bt("../textures/RenderTexture")),Zt=Yt(Bt("eventemitter3")),Qt=new Wt.Matrix,Jt=function($t){function en(tn,nn,an,rn){!function(sn,dn){if(!(sn instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,en);var on=function(sn,dn){if(!sn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dn&&("object"==typeof dn||"function"==typeof dn)?dn:sn}(this,$t.call(this));return(0,jt.sayHello)(tn),"number"==typeof nn&&(nn=Object.assign({width:nn,height:an||Vt.default.RENDER_OPTIONS.height},rn)),nn=Object.assign({},Vt.default.RENDER_OPTIONS,nn),on.options=nn,on.type=zt.RENDERER_TYPE.UNKNOWN,on.screen=new Wt.Rectangle(0,0,nn.width,nn.height),on.view=nn.view||document.createElement("canvas"),on.resolution=nn.resolution||Vt.default.RESOLUTION,on.transparent=nn.transparent,on.autoResize=nn.autoResize||!1,on.blendModes=null,on.preserveDrawingBuffer=nn.preserveDrawingBuffer,on.clearBeforeRender=nn.clearBeforeRender,on.roundPixels=nn.roundPixels,on._backgroundColor=0,on._backgroundColorRgba=[0,0,0,0],on._backgroundColorString="#000000",on.backgroundColor=nn.backgroundColor||on._backgroundColor,on._tempDisplayObjectParent=new qt.default,on._lastObjectRendered=on._tempDisplayObjectParent,on}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.resize=function(tn,nn){this.screen.width=tn,this.screen.height=nn,this.view.width=tn*this.resolution,this.view.height=nn*this.resolution,this.autoResize&&(this.view.style.width=tn+"px",this.view.style.height=nn+"px")},en.prototype.generateTexture=function(tn,nn,an){var rn=tn.getLocalBounds(),on=Kt.default.create(0|rn.width,0|rn.height,nn,an);return Qt.tx=-rn.x,Qt.ty=-rn.y,this.render(tn,on,!1,Qt,!0),on},en.prototype.destroy=function(tn){tn&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=zt.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},Ht(en,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(tn){this._backgroundColor=tn,this._backgroundColorString=(0,jt.hex2string)(tn),(0,jt.hex2rgb)(tn,this._backgroundColorRgba)}}]),en}(Zt.default);Gt.default=Jt},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":124,eventemitter3:3}],77:[function(Bt,Xt,Gt){function Yt(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Gt.__esModule=!0;var Ht=Yt(Bt("../SystemRenderer")),jt=Yt(Bt("./utils/CanvasMaskManager")),Wt=Yt(Bt("./utils/CanvasRenderTarget")),zt=Yt(Bt("./utils/mapCanvasBlendModesToPixi")),Vt=Bt("../../utils"),qt=Bt("../../const"),Kt=Yt(Bt("../../settings")),Zt=function(Qt){function Jt($t,en,tn){!function(an,rn){if(!(an instanceof rn))throw new TypeError("Cannot call a class as a function")}(this,Jt);var nn=function(an,rn){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rn&&("object"==typeof rn||"function"==typeof rn)?rn:an}(this,Qt.call(this,"Canvas",$t,en,tn));return nn.type=qt.RENDERER_TYPE.CANVAS,nn.rootContext=nn.view.getContext("2d",{alpha:nn.transparent}),nn.context=nn.rootContext,nn.refresh=!0,nn.maskManager=new jt.default(nn),nn.smoothProperty="imageSmoothingEnabled",nn.rootContext.imageSmoothingEnabled||(nn.rootContext.webkitImageSmoothingEnabled?nn.smoothProperty="webkitImageSmoothingEnabled":nn.rootContext.mozImageSmoothingEnabled?nn.smoothProperty="mozImageSmoothingEnabled":nn.rootContext.oImageSmoothingEnabled?nn.smoothProperty="oImageSmoothingEnabled":nn.rootContext.msImageSmoothingEnabled&&(nn.smoothProperty="msImageSmoothingEnabled")),nn.initPlugins(),nn.blendModes=(0,zt.default)(),nn._activeBlendMode=null,nn.renderingToScreen=!1,nn.resize(nn.options.width,nn.options.height),nn}return function($t,en){if("function"!=typeof en&&null!==en)throw new TypeError("Super expression must either be null or a function, not "+typeof en);$t.prototype=Object.create(en&&en.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),en&&(Object.setPrototypeOf?Object.setPrototypeOf($t,en):$t.__proto__=en)}(Jt,Qt),Jt.prototype.render=function($t,en,tn,nn,an){if(this.view){this.renderingToScreen=!en,this.emit("prerender");var rn=this.resolution;en?((en=en.baseTexture||en)._canvasRenderTarget||(en._canvasRenderTarget=new Wt.default(en.width,en.height,en.resolution),en.source=en._canvasRenderTarget.canvas,en.valid=!0),this.context=en._canvasRenderTarget.context,this.resolution=en._canvasRenderTarget.resolution):this.context=this.rootContext;var on=this.context;if(en||(this._lastObjectRendered=$t),!an){var sn=$t.parent,dn=this._tempDisplayObjectParent.transform.worldTransform;nn?(nn.copy(dn),this._tempDisplayObjectParent.transform._worldID=-1):dn.identity(),$t.parent=this._tempDisplayObjectParent,$t.updateTransform(),$t.parent=sn}on.setTransform(1,0,0,1,0,0),on.globalAlpha=1,this._activeBlendMode=qt.BLEND_MODES.NORMAL,on.globalCompositeOperation=this.blendModes[qt.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(on.fillStyle="black",on.clear()),(void 0===tn?this.clearBeforeRender:tn)&&this.renderingToScreen&&(this.transparent?on.clearRect(0,0,this.width,this.height):(on.fillStyle=this._backgroundColorString,on.fillRect(0,0,this.width,this.height)));var ln=this.context;this.context=on,$t.renderCanvas(this),this.context=ln,this.resolution=rn,this.emit("postrender")}},Jt.prototype.clear=function($t){var en=this.context;$t=$t||this._backgroundColorString,!this.transparent&&$t?(en.fillStyle=$t,en.fillRect(0,0,this.width,this.height)):en.clearRect(0,0,this.width,this.height)},Jt.prototype.setBlendMode=function($t){this._activeBlendMode!==$t&&(this._activeBlendMode=$t,this.context.globalCompositeOperation=this.blendModes[$t])},Jt.prototype.destroy=function($t){this.destroyPlugins(),Qt.prototype.destroy.call(this,$t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},Jt.prototype.resize=function($t,en){Qt.prototype.resize.call(this,$t,en),this.smoothProperty&&(this.rootContext[this.smoothProperty]=Kt.default.SCALE_MODE===qt.SCALE_MODES.LINEAR)},Jt.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},Jt}(Ht.default);Gt.default=Zt,Vt.pluginTarget.mixin(Zt)},{"../../const":46,"../../settings":101,"../../utils":124,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=Bt("../../../const"),Ht=function(){function jt(Wt){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=Wt}return jt.prototype.pushMask=function(Wt){var zt=this.renderer;zt.context.save();var Vt=Wt.alpha,qt=Wt.transform.worldTransform,Kt=zt.resolution;zt.context.setTransform(qt.a*Kt,qt.b*Kt,qt.c*Kt,qt.d*Kt,qt.tx*Kt,qt.ty*Kt),Wt._texture||(this.renderGraphicsShape(Wt),zt.context.clip()),Wt.worldAlpha=Vt},jt.prototype.renderGraphicsShape=function(Wt){var zt=this.renderer.context,Vt=Wt.graphicsData.length;if(0!==Vt){zt.beginPath();for(var qt=0;qt<Vt;qt++){var Kt=Wt.graphicsData[qt],Zt=Kt.shape;if(Kt.type===Yt.SHAPES.POLY){var Qt=Zt.points;zt.moveTo(Qt[0],Qt[1]);for(var Jt=1;Jt<Qt.length/2;Jt++)zt.lineTo(Qt[2*Jt],Qt[2*Jt+1]);Qt[0]===Qt[Qt.length-2]&&Qt[1]===Qt[Qt.length-1]&&zt.closePath()}else if(Kt.type===Yt.SHAPES.RECT)zt.rect(Zt.x,Zt.y,Zt.width,Zt.height),zt.closePath();else if(Kt.type===Yt.SHAPES.CIRC)zt.arc(Zt.x,Zt.y,Zt.radius,0,2*Math.PI),zt.closePath();else if(Kt.type===Yt.SHAPES.ELIP){var $t=2*Zt.width,en=2*Zt.height,tn=Zt.x-$t/2,nn=Zt.y-en/2,an=.5522848*($t/2),rn=.5522848*(en/2),on=tn+$t,sn=nn+en,dn=tn+$t/2,ln=nn+en/2;zt.moveTo(tn,ln),zt.bezierCurveTo(tn,ln-rn,dn-an,nn,dn,nn),zt.bezierCurveTo(dn+an,nn,on,ln-rn,on,ln),zt.bezierCurveTo(on,ln+rn,dn+an,sn,dn,sn),zt.bezierCurveTo(dn-an,sn,tn,ln+rn,tn,ln),zt.closePath()}else if(Kt.type===Yt.SHAPES.RREC){var un=Zt.x,pn=Zt.y,cn=Zt.width,hn=Zt.height,fn=Zt.radius,gn=0|Math.min(cn,hn)/2;fn=fn>gn?gn:fn,zt.moveTo(un,pn+fn),zt.lineTo(un,pn+hn-fn),zt.quadraticCurveTo(un,pn+hn,un+fn,pn+hn),zt.lineTo(un+cn-fn,pn+hn),zt.quadraticCurveTo(un+cn,pn+hn,un+cn,pn+hn-fn),zt.lineTo(un+cn,pn+fn),zt.quadraticCurveTo(un+cn,pn,un+cn-fn,pn),zt.lineTo(un+fn,pn),zt.quadraticCurveTo(un,pn,un,pn+fn),zt.closePath()}}}},jt.prototype.popMask=function(Wt){Wt.context.restore(),Wt.invalidateBlendMode()},jt.prototype.destroy=function(){},jt}();Gt.default=Ht},{"../../../const":46}],79:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../../../settings")),jt=function(){function Wt(zt,Vt,qt){!function(Kt,Zt){if(!(Kt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=qt||Ht.default.RESOLUTION,this.resize(zt,Vt)}return Wt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},Wt.prototype.resize=function(zt,Vt){this.canvas.width=zt*this.resolution,this.canvas.height=Vt*this.resolution},Wt.prototype.destroy=function(){this.context=null,this.canvas=null},Yt(Wt,[{key:"width",get:function(){return this.canvas.width},set:function(zt){this.canvas.width=zt}},{key:"height",get:function(){return this.canvas.height},set:function(zt){this.canvas.height=zt}}]),Wt}();Gt.default=jt},{"../../../settings":101}],80:[function(Bt,Xt,Gt){function Yt(Ht){var jt=document.createElement("canvas");jt.width=6,jt.height=1;var Wt=jt.getContext("2d");return Wt.fillStyle=Ht,Wt.fillRect(0,0,6,1),jt}Gt.__esModule=!0,Gt.default=function(){if("undefined"==typeof document)return!1;var Ht=Yt("#ff00ff"),jt=Yt("#ffff00"),Wt=document.createElement("canvas");Wt.width=6,Wt.height=1;var zt=Wt.getContext("2d");zt.globalCompositeOperation="multiply",zt.drawImage(Ht,0,0),zt.drawImage(jt,2,0);var Vt=zt.getImageData(2,0,1,1);if(!Vt)return!1;var qt=Vt.data;return 255===qt[0]&&0===qt[1]&&0===qt[2]}},{}],81:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(){var jt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,Ht.default)()?(jt[Yt.BLEND_MODES.NORMAL]="source-over",jt[Yt.BLEND_MODES.ADD]="lighter",jt[Yt.BLEND_MODES.MULTIPLY]="multiply",jt[Yt.BLEND_MODES.SCREEN]="screen",jt[Yt.BLEND_MODES.OVERLAY]="overlay",jt[Yt.BLEND_MODES.DARKEN]="darken",jt[Yt.BLEND_MODES.LIGHTEN]="lighten",jt[Yt.BLEND_MODES.COLOR_DODGE]="color-dodge",jt[Yt.BLEND_MODES.COLOR_BURN]="color-burn",jt[Yt.BLEND_MODES.HARD_LIGHT]="hard-light",jt[Yt.BLEND_MODES.SOFT_LIGHT]="soft-light",jt[Yt.BLEND_MODES.DIFFERENCE]="difference",jt[Yt.BLEND_MODES.EXCLUSION]="exclusion",jt[Yt.BLEND_MODES.HUE]="hue",jt[Yt.BLEND_MODES.SATURATION]="saturate",jt[Yt.BLEND_MODES.COLOR]="color",jt[Yt.BLEND_MODES.LUMINOSITY]="luminosity"):(jt[Yt.BLEND_MODES.NORMAL]="source-over",jt[Yt.BLEND_MODES.ADD]="lighter",jt[Yt.BLEND_MODES.MULTIPLY]="source-over",jt[Yt.BLEND_MODES.SCREEN]="source-over",jt[Yt.BLEND_MODES.OVERLAY]="source-over",jt[Yt.BLEND_MODES.DARKEN]="source-over",jt[Yt.BLEND_MODES.LIGHTEN]="source-over",jt[Yt.BLEND_MODES.COLOR_DODGE]="source-over",jt[Yt.BLEND_MODES.COLOR_BURN]="source-over",jt[Yt.BLEND_MODES.HARD_LIGHT]="source-over",jt[Yt.BLEND_MODES.SOFT_LIGHT]="source-over",jt[Yt.BLEND_MODES.DIFFERENCE]="source-over",jt[Yt.BLEND_MODES.EXCLUSION]="source-over",jt[Yt.BLEND_MODES.HUE]="source-over",jt[Yt.BLEND_MODES.SATURATION]="source-over",jt[Yt.BLEND_MODES.COLOR]="source-over",jt[Yt.BLEND_MODES.LUMINOSITY]="source-over"),jt[Yt.BLEND_MODES.NORMAL_NPM]=jt[Yt.BLEND_MODES.NORMAL],jt[Yt.BLEND_MODES.ADD_NPM]=jt[Yt.BLEND_MODES.ADD],jt[Yt.BLEND_MODES.SCREEN_NPM]=jt[Yt.BLEND_MODES.SCREEN],jt};var Yt=Bt("../../../const"),Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./canUseNewCanvasBlendModes"))},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=Bt("../../const"),Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../../settings")),jt=function(){function Wt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.renderer=zt,this.count=0,this.checkCount=0,this.maxIdle=Ht.default.GC_MAX_IDLE,this.checkCountMax=Ht.default.GC_MAX_CHECK_COUNT,this.mode=Ht.default.GC_MODE}return Wt.prototype.update=function(){this.count++,this.mode!==Yt.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},Wt.prototype.run=function(){for(var zt=this.renderer.textureManager,Vt=zt._managedTextures,qt=!1,Kt=0,Zt;Kt<Vt.length;Kt++)Zt=Vt[Kt],!Zt._glRenderTargets&&this.count-Zt.touched>this.maxIdle&&(zt.destroyTexture(Zt,!0),Vt[Kt]=null,qt=!0);if(qt){for(var Qt=0,Jt=0;Jt<Vt.length;Jt++)null!==Vt[Jt]&&(Vt[Qt++]=Vt[Jt]);Vt.length=Qt}},Wt.prototype.unload=function(zt){var Vt=this.renderer.textureManager;zt._texture&&zt._texture._glRenderTargets&&Vt.destroyTexture(zt._texture,!0);for(var qt=zt.children.length-1;0<=qt;qt--)this.unload(zt.children[qt])},Wt}();Gt.default=jt},{"../../const":46,"../../settings":101}],83:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=Bt("pixi-gl-core"),Ht=Bt("../../const"),jt=function(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}(Bt("./utils/RenderTarget")),Wt=Bt("../../utils"),zt=function(){function Vt(qt){!function(Kt,Zt){if(!(Kt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Vt),this.renderer=qt,this.gl=qt.gl,this._managedTextures=[]}return Vt.prototype.bindTexture=function(){},Vt.prototype.getTexture=function(){},Vt.prototype.updateTexture=function(qt,Kt){var Zt=this.gl,Qt=!!qt._glRenderTargets;if(!qt.hasLoaded)return null;var Jt=this.renderer.boundTextures;if(void 0===Kt){Kt=0;for(var $t=0;$t<Jt.length;++$t)if(Jt[$t]===qt){Kt=$t;break}}Jt[Kt]=qt,Zt.activeTexture(Zt.TEXTURE0+Kt);var en=qt._glTextures[this.renderer.CONTEXT_UID];if(en)Qt?qt._glRenderTargets[this.renderer.CONTEXT_UID].resize(qt.width,qt.height):en.upload(qt.source);else{if(Qt){var tn=new jt.default(this.gl,qt.width,qt.height,qt.scaleMode,qt.resolution);tn.resize(qt.width,qt.height),qt._glRenderTargets[this.renderer.CONTEXT_UID]=tn,en=tn.texture}else(en=new Yt.GLTexture(this.gl,null,null,null,null)).bind(Kt),en.premultiplyAlpha=!0,en.upload(qt.source);qt._glTextures[this.renderer.CONTEXT_UID]=en,qt.on("update",this.updateTexture,this),qt.on("dispose",this.destroyTexture,this),this._managedTextures.push(qt),qt.isPowerOfTwo?(qt.mipmap&&en.enableMipmap(),qt.wrapMode===Ht.WRAP_MODES.CLAMP?en.enableWrapClamp():qt.wrapMode===Ht.WRAP_MODES.REPEAT?en.enableWrapRepeat():en.enableWrapMirrorRepeat()):en.enableWrapClamp(),qt.scaleMode===Ht.SCALE_MODES.NEAREST?en.enableNearestScaling():en.enableLinearScaling()}return en},Vt.prototype.destroyTexture=function(qt,Kt){if((qt=qt.baseTexture||qt).hasLoaded){var Zt=this.renderer.CONTEXT_UID,Qt=qt._glTextures,Jt=qt._glRenderTargets;if(Qt[Zt]&&(this.renderer.unbindTexture(qt),Qt[Zt].destroy(),qt.off("update",this.updateTexture,this),qt.off("dispose",this.destroyTexture,this),delete Qt[Zt],!Kt)){var $t=this._managedTextures.indexOf(qt);-1!==$t&&(0,Wt.removeItems)(this._managedTextures,$t,1)}Jt&&Jt[Zt]&&(Jt[Zt].destroy(),delete Jt[Zt])}},Vt.prototype.removeAll=function(){for(var qt=0,Kt;qt<this._managedTextures.length;++qt)Kt=this._managedTextures[qt],Kt._glTextures[this.renderer.CONTEXT_UID]&&delete Kt._glTextures[this.renderer.CONTEXT_UID]},Vt.prototype.destroy=function(){for(var qt=0,Kt;qt<this._managedTextures.length;++qt)Kt=this._managedTextures[qt],this.destroyTexture(Kt,!0),Kt.off("update",this.updateTexture,this),Kt.off("dispose",this.destroyTexture,this);this._managedTextures=null},Vt}();Gt.default=zt},{"../../const":46,"../../utils":124,"./utils/RenderTarget":96,"pixi-gl-core":12}],84:[function(Bt,Xt,Gt){function Yt(sn){return sn&&sn.__esModule?sn:{default:sn}}Gt.__esModule=!0;var Ht=Yt(Bt("../SystemRenderer")),jt=Yt(Bt("./managers/MaskManager")),Wt=Yt(Bt("./managers/StencilManager")),zt=Yt(Bt("./managers/FilterManager")),Vt=Yt(Bt("./utils/RenderTarget")),qt=Yt(Bt("./utils/ObjectRenderer")),Kt=Yt(Bt("./TextureManager")),Zt=Yt(Bt("../../textures/BaseTexture")),Qt=Yt(Bt("./TextureGarbageCollector")),Jt=Yt(Bt("./WebGLState")),$t=Yt(Bt("./utils/mapWebGLDrawModesToPixi")),en=Yt(Bt("./utils/validateContext")),tn=Bt("../../utils"),nn=Yt(Bt("pixi-gl-core")),an=Bt("../../const"),rn=0,on=function(sn){function dn(ln,un,pn){!function(hn,fn){if(!(hn instanceof fn))throw new TypeError("Cannot call a class as a function")}(this,dn);var cn=function(hn,fn){if(!hn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fn&&("object"==typeof fn||"function"==typeof fn)?fn:hn}(this,sn.call(this,"WebGL",ln,un,pn));return cn.legacy=cn.options.legacy,cn.legacy&&(nn.default.VertexArrayObject.FORCE_NATIVE=!0),cn.type=an.RENDERER_TYPE.WEBGL,cn.handleContextLost=cn.handleContextLost.bind(cn),cn.handleContextRestored=cn.handleContextRestored.bind(cn),cn.view.addEventListener("webglcontextlost",cn.handleContextLost,!1),cn.view.addEventListener("webglcontextrestored",cn.handleContextRestored,!1),cn._contextOptions={alpha:cn.transparent,antialias:cn.options.antialias,premultipliedAlpha:cn.transparent&&"notMultiplied"!==cn.transparent,stencil:!0,preserveDrawingBuffer:cn.options.preserveDrawingBuffer,powerPreference:cn.options.powerPreference},cn._backgroundColorRgba[3]=cn.transparent?0:1,cn.maskManager=new jt.default(cn),cn.stencilManager=new Wt.default(cn),cn.emptyRenderer=new qt.default(cn),cn.currentRenderer=cn.emptyRenderer,cn.textureManager=null,cn.filterManager=null,cn.initPlugins(),cn.options.context&&(0,en.default)(cn.options.context),cn.gl=cn.options.context||nn.default.createContext(cn.view,cn._contextOptions),cn.CONTEXT_UID=rn++,cn.state=new Jt.default(cn.gl),cn.renderingToScreen=!0,cn.boundTextures=null,cn._activeShader=null,cn._activeVao=null,cn._activeRenderTarget=null,cn._initContext(),cn.drawModes=(0,$t.default)(cn.gl),cn._nextTextureLocation=0,cn.setBlendMode(0),cn}return function(ln,un){if("function"!=typeof un&&null!==un)throw new TypeError("Super expression must either be null or a function, not "+typeof un);ln.prototype=Object.create(un&&un.prototype,{constructor:{value:ln,enumerable:!1,writable:!0,configurable:!0}}),un&&(Object.setPrototypeOf?Object.setPrototypeOf(ln,un):ln.__proto__=un)}(dn,sn),dn.prototype._initContext=function(){var ln=this.gl;ln.isContextLost()&&ln.getExtension("WEBGL_lose_context")&&ln.getExtension("WEBGL_lose_context").restoreContext();var un=ln.getParameter(ln.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=Array(un),this.emptyTextures=Array(un),this.textureManager=new Kt.default(this),this.filterManager=new zt.default(this),this.textureGC=new Qt.default(this),this.state.resetToDefault(),this.rootRenderTarget=new Vt.default(ln,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var pn=new nn.default.GLTexture.fromData(ln,null,1,1),cn={_glTextures:{}};cn._glTextures[this.CONTEXT_UID]={};for(var hn=0,fn;hn<un;hn++)fn=new Zt.default,fn._glTextures[this.CONTEXT_UID]=pn,this.boundTextures[hn]=cn,this.emptyTextures[hn]=fn,this.bindTexture(null,hn);this.emit("context",ln),this.resize(this.screen.width,this.screen.height)},dn.prototype.render=function(ln,un,pn,cn,hn){if(this.renderingToScreen=!un,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,un||(this._lastObjectRendered=ln),!hn){var fn=ln.parent;ln.parent=this._tempDisplayObjectParent,ln.updateTransform(),ln.parent=fn}this.bindRenderTexture(un,cn),this.currentRenderer.start(),(void 0===pn?this.clearBeforeRender:pn)&&this._activeRenderTarget.clear(),ln.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},dn.prototype.setObjectRenderer=function(ln){this.currentRenderer!==ln&&(this.currentRenderer.stop(),this.currentRenderer=ln,this.currentRenderer.start())},dn.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},dn.prototype.resize=function(ln,un){Ht.default.prototype.resize.call(this,ln,un),this.rootRenderTarget.resize(ln,un),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},dn.prototype.setBlendMode=function(ln){this.state.setBlendMode(ln)},dn.prototype.clear=function(ln){this._activeRenderTarget.clear(ln)},dn.prototype.setTransform=function(ln){this._activeRenderTarget.transform=ln},dn.prototype.clearRenderTexture=function(ln,un){var pn=ln.baseTexture._glRenderTargets[this.CONTEXT_UID];return pn&&pn.clear(un),this},dn.prototype.bindRenderTexture=function(ln,un){var pn;if(ln){var cn=ln.baseTexture;cn._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(cn,0),this.unbindTexture(cn),(pn=cn._glRenderTargets[this.CONTEXT_UID]).setFrame(ln.frame)}else pn=this.rootRenderTarget;return pn.transform=un,this.bindRenderTarget(pn),this},dn.prototype.bindRenderTarget=function(ln){return ln!==this._activeRenderTarget&&(this._activeRenderTarget=ln,ln.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=ln.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(ln.stencilMaskStack)),this},dn.prototype.bindShader=function(ln,un){return this._activeShader!==ln&&(this._activeShader=ln,ln.bind(),!1!==un&&(ln.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},dn.prototype.bindTexture=function(ln,un,pn){if(ln=ln||this.emptyTextures[un],ln=ln.baseTexture||ln,ln.touched=this.textureGC.count,pn)un=un||0;else{for(var cn=0;cn<this.boundTextures.length;cn++)if(this.boundTextures[cn]===ln)return cn;void 0===un&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,un=this.boundTextures.length-this._nextTextureLocation-1)}var hn=this.gl,fn=ln._glTextures[this.CONTEXT_UID];return fn?(this.boundTextures[un]=ln,hn.activeTexture(hn.TEXTURE0+un),hn.bindTexture(hn.TEXTURE_2D,fn.texture)):this.textureManager.updateTexture(ln,un),un},dn.prototype.unbindTexture=function(ln){var un=this.gl;ln=ln.baseTexture||ln;for(var pn=0;pn<this.boundTextures.length;pn++)this.boundTextures[pn]===ln&&(this.boundTextures[pn]=this.emptyTextures[pn],un.activeTexture(un.TEXTURE0+pn),un.bindTexture(un.TEXTURE_2D,this.emptyTextures[pn]._glTextures[this.CONTEXT_UID].texture));return this},dn.prototype.createVao=function(){return new nn.default.VertexArrayObject(this.gl,this.state.attribState)},dn.prototype.bindVao=function(ln){return this._activeVao===ln?this:(ln?ln.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=ln,this)},dn.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},dn.prototype.handleContextLost=function(ln){ln.preventDefault()},dn.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},dn.prototype.destroy=function(ln){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),sn.prototype.destroy.call(this,ln),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},dn}(Ht.default);Gt.default=on,tn.pluginTarget.mixin(on)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":124,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":12}],85:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./utils/mapWebGLBlendModesToPixi")),Ht=function(){function jt(Wt){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=Wt,this.maxAttribs=Wt.getParameter(Wt.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)},this.blendModes=(0,Yt.default)(Wt),this.nativeVaoExtension=Wt.getExtension("OES_vertex_array_object")||Wt.getExtension("MOZ_OES_vertex_array_object")||Wt.getExtension("WEBKIT_OES_vertex_array_object")}return jt.prototype.push=function(){var Wt=this.stack[this.stackIndex];Wt||(Wt=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var zt=0;zt<this.activeState.length;zt++)Wt[zt]=this.activeState[zt]},jt.prototype.pop=function(){var Wt=this.stack[--this.stackIndex];this.setState(Wt)},jt.prototype.setState=function(Wt){this.setBlend(Wt[0]),this.setDepthTest(Wt[1]),this.setFrontFace(Wt[2]),this.setCullFace(Wt[3]),this.setBlendMode(Wt[4])},jt.prototype.setBlend=function(Wt){Wt=Wt?1:0,this.activeState[0]!==Wt&&(this.activeState[0]=Wt,this.gl[Wt?"enable":"disable"](this.gl.BLEND))},jt.prototype.setBlendMode=function(Wt){if(Wt!==this.activeState[4]){this.activeState[4]=Wt;var zt=this.blendModes[Wt];2===zt.length?this.gl.blendFunc(zt[0],zt[1]):this.gl.blendFuncSeparate(zt[0],zt[1],zt[2],zt[3])}},jt.prototype.setDepthTest=function(Wt){Wt=Wt?1:0,this.activeState[1]!==Wt&&(this.activeState[1]=Wt,this.gl[Wt?"enable":"disable"](this.gl.DEPTH_TEST))},jt.prototype.setCullFace=function(Wt){Wt=Wt?1:0,this.activeState[3]!==Wt&&(this.activeState[3]=Wt,this.gl[Wt?"enable":"disable"](this.gl.CULL_FACE))},jt.prototype.setFrontFace=function(Wt){Wt=Wt?1:0,this.activeState[2]!==Wt&&(this.activeState[2]=Wt,this.gl.frontFace(this.gl[Wt?"CW":"CCW"]))},jt.prototype.resetAttributes=function(){for(var Wt=0;Wt<this.attribState.tempAttribState.length;Wt++)this.attribState.tempAttribState[Wt]=0;for(var zt=0;zt<this.attribState.attribState.length;zt++)this.attribState.attribState[zt]=0;for(var Vt=1;Vt<this.maxAttribs;Vt++)this.gl.disableVertexAttribArray(Vt)},jt.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var Wt=0;Wt<this.activeState.length;++Wt)this.activeState[Wt]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},jt}();Gt.default=Ht},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(Bt,Xt,Gt){function Yt(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Gt.__esModule=!0;var Ht=function(){function Zt(Qt,Jt){for(var $t=0,en;$t<Jt.length;$t++)en=Jt[$t],en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Qt,en.key,en)}return function(Qt,Jt,$t){return Jt&&Zt(Qt.prototype,Jt),$t&&Zt(Qt,$t),Qt}}(),jt=Yt(Bt("./extractUniformsFromSrc")),Wt=Bt("../../../utils"),zt=Bt("../../../const"),Vt=Yt(Bt("../../../settings")),qt={},Kt=function(){function Zt(Qt,Jt,$t){for(var en in!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Zt),this.vertexSrc=Qt||Zt.defaultVertexSrc,this.fragmentSrc=Jt||Zt.defaultFragmentSrc,this._blendMode=zt.BLEND_MODES.NORMAL,this.uniformData=$t||(0,jt.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[en]=this.uniformData[en].value,this.uniformData[en].type&&(this.uniformData[en].type=this.uniformData[en].type.toLowerCase());this.glShaders={},qt[this.vertexSrc+this.fragmentSrc]||(qt[this.vertexSrc+this.fragmentSrc]=(0,Wt.uid)()),this.glShaderKey=qt[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=Vt.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return Zt.prototype.apply=function(Qt,Jt,$t,en){Qt.applyFilter(this,Jt,$t,en)},Ht(Zt,[{key:"blendMode",get:function(){return this._blendMode},set:function(Qt){this._blendMode=Qt}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),Zt}();Gt.default=Kt},{"../../../const":46,"../../../settings":101,"../../../utils":124,"./extractUniformsFromSrc":87}],87:[function(Bt,Xt,Gt){function Yt(jt){for(var Wt=/^(projectionMatrix|uSampler|filterArea|filterClamp)$/,zt={},Vt=void 0,qt=jt.replace(/\s+/g," ").split(/\s*;\s*/),Kt=0,Zt;Kt<qt.length;Kt++)if(Zt=qt[Kt].trim(),-1<Zt.indexOf("uniform")){var Qt=Zt.split(" "),Jt=Qt[1],$t=Qt[2],en=1;-1<$t.indexOf("[")&&($t=(Vt=$t.split(/\[|]/))[0],en*=+Vt[1]),$t.match(Wt)||(zt[$t]={value:Ht(Jt,en),name:$t,type:Jt})}return zt}Gt.__esModule=!0,Gt.default=function(jt,Wt){var Vt=Yt(jt),qt=Yt(Wt);return Object.assign(Vt,qt)};var Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("pixi-gl-core")).default.shader.defaultValue},{"pixi-gl-core":12}],88:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.calculateScreenSpaceMatrix=function(Ht,jt,Wt){var zt=Ht.identity();return zt.translate(jt.x/Wt.width,jt.y/Wt.height),zt.scale(Wt.width,Wt.height),zt},Gt.calculateNormalizedScreenSpaceMatrix=function(Ht,jt,Wt){var zt=Ht.identity();zt.translate(jt.x/Wt.width,jt.y/Wt.height);var Vt=Wt.width/jt.width,qt=Wt.height/jt.height;return zt.scale(Vt,qt),zt},Gt.calculateSpriteMatrix=function(Ht,jt,Wt,zt){var Vt=zt._texture.baseTexture,qt=Ht.set(Wt.width,0,0,Wt.height,jt.x,jt.y),Kt=zt.worldTransform.copy(Yt.Matrix.TEMP_MATRIX);return Kt.invert(),qt.prepend(Kt),qt.scale(1/Vt.width,1/Vt.height),qt.translate(zt.anchor.x,zt.anchor.y),qt};var Yt=Bt("../../../math")},{"../../../math":70}],89:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../Filter")),Ht=Bt("../../../../math"),jt=(Bt("path"),function(Wt){function zt(Vt){!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,zt);var qt=new Ht.Matrix,Kt=function(Zt,Qt){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt&&("object"==typeof Qt||"function"==typeof Qt)?Qt:Zt}(this,Wt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return Vt.renderable=!1,Kt.maskSprite=Vt,Kt.maskMatrix=qt,Kt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,Wt),zt.prototype.apply=function(Vt,qt,Kt){var Zt=this.maskSprite;this.uniforms.mask=Zt._texture,this.uniforms.otherMatrix=Vt.calculateSpriteMatrix(this.maskMatrix,Zt),this.uniforms.alpha=Zt.worldAlpha,Vt.applyFilter(this,qt,Kt)},zt}(Yt.default));Gt.default=jt},{"../../../../math":70,"../Filter":86,path:23}],90:[function(Bt,Xt,Gt){function Yt($t){return $t&&$t.__esModule?$t:{default:$t}}function Ht($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}Gt.__esModule=!0;var jt=Yt(Bt("./WebGLManager")),Wt=Yt(Bt("../utils/RenderTarget")),zt=Yt(Bt("../utils/Quad")),Vt=Bt("../../../math"),qt=Yt(Bt("../../../Shader")),Kt=function($t){if($t&&$t.__esModule)return $t;var en={};if(null!=$t)for(var tn in $t)Object.prototype.hasOwnProperty.call($t,tn)&&(en[tn]=$t[tn]);return en.default=$t,en}(Bt("../filters/filterTransforms")),Zt=Yt(Bt("bit-twiddle")),Qt=function $t(){Ht(this,$t),this.renderTarget=null,this.sourceFrame=new Vt.Rectangle,this.destinationFrame=new Vt.Rectangle,this.filters=[],this.target=null,this.resolution=1},Jt=function($t){function en(tn){Ht(this,en);var nn=function(an,rn){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rn&&("object"==typeof rn||"function"==typeof rn)?rn:an}(this,$t.call(this,tn));return nn.gl=nn.renderer.gl,nn.quad=new zt.default(nn.gl,tn.state.attribState),nn.shaderCache={},nn.pool={},nn.filterData=null,nn.managedFilters=[],nn}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.pushFilter=function(tn,nn){var an=this.renderer,rn=this.filterData;if(!rn){rn=this.renderer._activeRenderTarget.filterStack;var on=new Qt;on.sourceFrame=on.destinationFrame=this.renderer._activeRenderTarget.size,on.renderTarget=an._activeRenderTarget,this.renderer._activeRenderTarget.filterData=rn={index:0,stack:[on]},this.filterData=rn}var sn=rn.stack[++rn.index];sn||(sn=rn.stack[rn.index]=new Qt);var dn=nn[0].resolution,ln=0|nn[0].padding,un=tn.filterArea||tn.getBounds(!0),pn=sn.sourceFrame,cn=sn.destinationFrame;pn.x=(0|un.x*dn)/dn,pn.y=(0|un.y*dn)/dn,pn.width=(0|un.width*dn)/dn,pn.height=(0|un.height*dn)/dn,rn.stack[0].renderTarget.transform||nn[0].autoFit&&pn.fit(rn.stack[0].destinationFrame),pn.pad(ln),cn.width=pn.width,cn.height=pn.height;var hn=this.getPotRenderTarget(an.gl,pn.width,pn.height,dn);sn.target=tn,sn.filters=nn,sn.resolution=dn,sn.renderTarget=hn,hn.setFrame(cn,pn),an.bindRenderTarget(hn),hn.clear()},en.prototype.popFilter=function(){var tn=this.filterData,nn=tn.stack[tn.index-1],an=tn.stack[tn.index];this.quad.map(an.renderTarget.size,an.sourceFrame).upload();var rn=an.filters;if(1===rn.length)rn[0].apply(this,an.renderTarget,nn.renderTarget,!1,an),this.freePotRenderTarget(an.renderTarget);else{var on=an.renderTarget,sn=this.getPotRenderTarget(this.renderer.gl,an.sourceFrame.width,an.sourceFrame.height,an.resolution);sn.setFrame(an.destinationFrame,an.sourceFrame),sn.clear();var dn=0;for(dn=0;dn<rn.length-1;++dn){rn[dn].apply(this,on,sn,!0,an);var ln=on;on=sn,sn=ln}rn[dn].apply(this,on,nn.renderTarget,!1,an),this.freePotRenderTarget(on),this.freePotRenderTarget(sn)}tn.index--,0===tn.index&&(this.filterData=null)},en.prototype.applyFilter=function(tn,nn,an,rn){var on=this.renderer,sn=on.gl,dn=tn.glShaders[on.CONTEXT_UID];dn||(tn.glShaderKey?(dn=this.shaderCache[tn.glShaderKey])||(dn=new qt.default(this.gl,tn.vertexSrc,tn.fragmentSrc),tn.glShaders[on.CONTEXT_UID]=this.shaderCache[tn.glShaderKey]=dn):dn=tn.glShaders[on.CONTEXT_UID]=new qt.default(this.gl,tn.vertexSrc,tn.fragmentSrc),this.managedFilters.push(tn),on.bindVao(null),this.quad.initVao(dn)),on.bindVao(this.quad.vao),on.bindRenderTarget(an),rn&&(sn.disable(sn.SCISSOR_TEST),on.clear(),sn.enable(sn.SCISSOR_TEST)),an===on.maskManager.scissorRenderTarget&&on.maskManager.pushScissorMask(null,on.maskManager.scissorData),on.bindShader(dn);var ln=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=ln,this.syncUniforms(dn,tn),on.state.setBlendMode(tn.blendMode),sn.activeTexture(sn.TEXTURE0),sn.bindTexture(sn.TEXTURE_2D,nn.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),sn.bindTexture(sn.TEXTURE_2D,ln._glTextures[this.renderer.CONTEXT_UID].texture)},en.prototype.syncUniforms=function(tn,nn){var an=nn.uniformData,rn=nn.uniforms,on=1,sn;if(tn.uniforms.filterArea){sn=this.filterData.stack[this.filterData.index];var dn=tn.uniforms.filterArea;dn[0]=sn.renderTarget.size.width,dn[1]=sn.renderTarget.size.height,dn[2]=sn.sourceFrame.x,dn[3]=sn.sourceFrame.y,tn.uniforms.filterArea=dn}if(tn.uniforms.filterClamp){sn=sn||this.filterData.stack[this.filterData.index];var ln=tn.uniforms.filterClamp;ln[0]=0,ln[1]=0,ln[2]=(sn.sourceFrame.width-1)/sn.renderTarget.size.width,ln[3]=(sn.sourceFrame.height-1)/sn.renderTarget.size.height,tn.uniforms.filterClamp=ln}for(var un in an){var pn=an[un].type;if("sampler2d"===pn&&0!==rn[un]){if(rn[un].baseTexture)tn.uniforms[un]=this.renderer.bindTexture(rn[un].baseTexture,on);else{tn.uniforms[un]=on;var cn=this.renderer.gl;this.renderer.boundTextures[on]=this.renderer.emptyTextures[on],cn.activeTexture(cn.TEXTURE0+on),rn[un].texture.bind()}on++}else if("mat3"===pn)tn.uniforms[un]=void 0===rn[un].a?rn[un]:rn[un].toArray(!0);else if(!("vec2"===pn))"float"===pn?tn.uniforms.data[un].value!==an[un]&&(tn.uniforms[un]=rn[un]):tn.uniforms[un]=rn[un];else if(void 0!==rn[un].x){var hn=tn.uniforms[un]||new Float32Array(2);hn[0]=rn[un].x,hn[1]=rn[un].y,tn.uniforms[un]=hn}else tn.uniforms[un]=rn[un]}},en.prototype.getRenderTarget=function(tn,nn){var an=this.filterData.stack[this.filterData.index],rn=this.getPotRenderTarget(this.renderer.gl,an.sourceFrame.width,an.sourceFrame.height,nn||an.resolution);return rn.setFrame(an.destinationFrame,an.sourceFrame),rn},en.prototype.returnRenderTarget=function(tn){this.freePotRenderTarget(tn)},en.prototype.calculateScreenSpaceMatrix=function(tn){var nn=this.filterData.stack[this.filterData.index];return Kt.calculateScreenSpaceMatrix(tn,nn.sourceFrame,nn.renderTarget.size)},en.prototype.calculateNormalizedScreenSpaceMatrix=function(tn){var nn=this.filterData.stack[this.filterData.index];return Kt.calculateNormalizedScreenSpaceMatrix(tn,nn.sourceFrame,nn.renderTarget.size,nn.destinationFrame)},en.prototype.calculateSpriteMatrix=function(tn,nn){var an=this.filterData.stack[this.filterData.index];return Kt.calculateSpriteMatrix(tn,an.sourceFrame,an.renderTarget.size,nn)},en.prototype.destroy=function(){for(var tn=0<arguments.length&&void 0!==arguments[0]&&arguments[0],nn=this.renderer,an=this.managedFilters,rn=0;rn<an.length;rn++)tn||an[rn].glShaders[nn.CONTEXT_UID].destroy(),delete an[rn].glShaders[nn.CONTEXT_UID];this.shaderCache={},tn?this.pool={}:this.emptyPool()},en.prototype.getPotRenderTarget=function(tn,nn,an,rn){var on=(65535&(nn=Zt.default.nextPow2(nn*rn)))<<16|65535&(an=Zt.default.nextPow2(an*rn));this.pool[on]||(this.pool[on]=[]);var sn=this.pool[on].pop();if(!sn){var dn=this.renderer.boundTextures[0];tn.activeTexture(tn.TEXTURE0),sn=new Wt.default(tn,nn,an,null,1),tn.bindTexture(tn.TEXTURE_2D,dn._glTextures[this.renderer.CONTEXT_UID].texture)}return sn.resolution=rn,sn.defaultFrame.width=sn.size.width=nn/rn,sn.defaultFrame.height=sn.size.height=an/rn,sn},en.prototype.emptyPool=function(){for(var tn in this.pool){var nn=this.pool[tn];if(nn)for(var an=0;an<nn.length;an++)nn[an].destroy(!0)}this.pool={}},en.prototype.freePotRenderTarget=function(tn){var nn=(65535&tn.size.width*tn.resolution)<<16|65535&tn.size.height*tn.resolution;this.pool[nn].push(tn)},en}(jt.default);Gt.default=Jt},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(Bt,Xt,Gt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Gt.__esModule=!0;var Ht=Yt(Bt("./WebGLManager")),jt=Yt(Bt("../filters/spriteMask/SpriteMaskFilter")),Wt=function(zt){function Vt(qt){!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Kt=function(Zt,Qt){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt&&("object"==typeof Qt||"function"==typeof Qt)?Qt:Zt}(this,zt.call(this,qt));return Kt.scissor=!1,Kt.scissorData=null,Kt.scissorRenderTarget=null,Kt.enableScissor=!0,Kt.alphaMaskPool=[],Kt.alphaMaskIndex=0,Kt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.pushMask=function(qt,Kt){if(Kt.texture)this.pushSpriteMask(qt,Kt);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&Kt.isFastRect()){var Zt=Kt.worldTransform,Qt=Math.atan2(Zt.b,Zt.a);(Qt=Math.round(Qt*(180/Math.PI)))%90?this.pushStencilMask(Kt):this.pushScissorMask(qt,Kt)}else this.pushStencilMask(Kt)},Vt.prototype.popMask=function(qt,Kt){Kt.texture?this.popSpriteMask(qt,Kt):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(qt,Kt):this.popStencilMask(qt,Kt)},Vt.prototype.pushSpriteMask=function(qt,Kt){var Zt=this.alphaMaskPool[this.alphaMaskIndex];Zt||(Zt=this.alphaMaskPool[this.alphaMaskIndex]=[new jt.default(Kt)]),Zt[0].resolution=this.renderer.resolution,Zt[0].maskSprite=Kt,qt.filterArea=Kt.getBounds(!0),this.renderer.filterManager.pushFilter(qt,Zt),this.alphaMaskIndex++},Vt.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},Vt.prototype.pushStencilMask=function(qt){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(qt)},Vt.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},Vt.prototype.pushScissorMask=function(qt,Kt){Kt.renderable=!0;var Zt=this.renderer._activeRenderTarget,Qt=Kt.getBounds();Qt.fit(Zt.size),Kt.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var Jt=this.renderer.resolution;this.renderer.gl.scissor(Qt.x*Jt,(Zt.root?Zt.size.height-Qt.y-Qt.height:Qt.y)*Jt,Qt.width*Jt,Qt.height*Jt),this.scissorRenderTarget=Zt,this.scissorData=Kt,this.scissor=!0},Vt.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var qt=this.renderer.gl;qt.disable(qt.SCISSOR_TEST)},Vt}(Ht.default);Gt.default=Wt},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./WebGLManager")),Ht=function(jt){function Wt(zt){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,Wt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,jt.call(this,zt));return Vt.stencilMaskStack=null,Vt}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(Wt,jt),Wt.prototype.setMaskStack=function(zt){this.stencilMaskStack=zt;var Vt=this.renderer.gl;0===zt.length?Vt.disable(Vt.STENCIL_TEST):Vt.enable(Vt.STENCIL_TEST)},Wt.prototype.pushStencil=function(zt){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var Vt=this.renderer.gl,qt=this.stencilMaskStack.length;0===qt&&Vt.enable(Vt.STENCIL_TEST),this.stencilMaskStack.push(zt),Vt.colorMask(!1,!1,!1,!1),Vt.stencilFunc(Vt.EQUAL,qt,this._getBitwiseMask()),Vt.stencilOp(Vt.KEEP,Vt.KEEP,Vt.INCR),this.renderer.plugins.graphics.render(zt),this._useCurrent()},Wt.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var zt=this.renderer.gl,Vt=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(zt.disable(zt.STENCIL_TEST),zt.clear(zt.STENCIL_BUFFER_BIT),zt.clearStencil(0)):(zt.colorMask(!1,!1,!1,!1),zt.stencilOp(zt.KEEP,zt.KEEP,zt.DECR),this.renderer.plugins.graphics.render(Vt),this._useCurrent())},Wt.prototype._useCurrent=function(){var zt=this.renderer.gl;zt.colorMask(!0,!0,!0,!0),zt.stencilFunc(zt.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),zt.stencilOp(zt.KEEP,zt.KEEP,zt.KEEP)},Wt.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},Wt.prototype.destroy=function(){Yt.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},Wt}(Yt.default);Gt.default=Ht},{"./WebGLManager":93}],93:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Ht(jt){!function(Wt,zt){if(!(Wt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.renderer=jt,this.renderer.on("context",this.onContextChange,this)}return Ht.prototype.onContextChange=function(){},Ht.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},Ht}();Gt.default=Yt},{}],94:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Ht){function jt(){return function(Wt,zt){if(!(Wt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,jt),function(Wt,zt){if(!Wt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&("object"==typeof zt||"function"==typeof zt)?zt:Wt}(this,Ht.apply(this,arguments))}return function(Wt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Wt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Wt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Wt,zt):Wt.__proto__=zt)}(jt,Ht),jt.prototype.start=function(){},jt.prototype.stop=function(){this.flush()},jt.prototype.flush=function(){},jt.prototype.render=function(){},jt}(function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("../managers/WebGLManager")).default);Gt.default=Yt},{"../managers/WebGLManager":93}],95:[function(Bt,Xt,Gt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Gt.__esModule=!0;var Ht=Yt(Bt("pixi-gl-core")),jt=Yt(Bt("../../../utils/createIndicesForQuads")),Wt=function(){function zt(Vt,qt){!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,zt),this.gl=Vt,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var Kt=0;4>Kt;Kt++)this.interleaved[4*Kt]=this.vertices[2*Kt],this.interleaved[4*Kt+1]=this.vertices[2*Kt+1],this.interleaved[4*Kt+2]=this.uvs[2*Kt],this.interleaved[4*Kt+3]=this.uvs[2*Kt+1];this.indices=(0,jt.default)(1),this.vertexBuffer=Ht.default.GLBuffer.createVertexBuffer(Vt,this.interleaved,Vt.STATIC_DRAW),this.indexBuffer=Ht.default.GLBuffer.createIndexBuffer(Vt,this.indices,Vt.STATIC_DRAW),this.vao=new Ht.default.VertexArrayObject(Vt,qt)}return zt.prototype.initVao=function(Vt){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,Vt.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,Vt.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},zt.prototype.map=function(Vt,qt){var Kt=0,Zt=0;return this.uvs[0]=Kt,this.uvs[1]=Zt,this.uvs[2]=Kt+qt.width/Vt.width,this.uvs[3]=Zt,this.uvs[4]=Kt+qt.width/Vt.width,this.uvs[5]=Zt+qt.height/Vt.height,this.uvs[6]=Kt,this.uvs[7]=Zt+qt.height/Vt.height,Kt=qt.x,Zt=qt.y,this.vertices[0]=Kt,this.vertices[1]=Zt,this.vertices[2]=Kt+qt.width,this.vertices[3]=Zt,this.vertices[4]=Kt+qt.width,this.vertices[5]=Zt+qt.height,this.vertices[6]=Kt,this.vertices[7]=Zt+qt.height,this},zt.prototype.upload=function(){for(var Vt=0;4>Vt;Vt++)this.interleaved[4*Vt]=this.vertices[2*Vt],this.interleaved[4*Vt+1]=this.vertices[2*Vt+1],this.interleaved[4*Vt+2]=this.uvs[2*Vt],this.interleaved[4*Vt+3]=this.uvs[2*Vt+1];return this.vertexBuffer.upload(this.interleaved),this},zt.prototype.destroy=function(){var Vt=this.gl;Vt.deleteBuffer(this.vertexBuffer),Vt.deleteBuffer(this.indexBuffer)},zt}();Gt.default=Wt},{"../../../utils/createIndicesForQuads":122,"pixi-gl-core":12}],96:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=Bt("../../../math"),Ht=Bt("../../../const"),jt=function(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}(Bt("../../../settings")),Wt=Bt("pixi-gl-core"),zt=function(){function Vt(qt,Kt,Zt,Qt,Jt,$t){!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Vt),this.gl=qt,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new Yt.Rectangle(0,0,1,1),this.resolution=Jt||jt.default.RESOLUTION,this.projectionMatrix=new Yt.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new Yt.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0===Qt?jt.default.SCALE_MODE:Qt,this.root=$t,this.root?(this.frameBuffer=new Wt.GLFramebuffer(qt,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=Wt.GLFramebuffer.createRGBA(qt,100,100),this.scaleMode===Ht.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(Kt,Zt)}return Vt.prototype.clear=function(qt){var Kt=qt||this.clearColor;this.frameBuffer.clear(Kt[0],Kt[1],Kt[2],Kt[3])},Vt.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},Vt.prototype.setFrame=function(qt,Kt){this.destinationFrame=qt||this.destinationFrame||this.defaultFrame,this.sourceFrame=Kt||this.sourceFrame||this.destinationFrame},Vt.prototype.activate=function(){var qt=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame===this.sourceFrame?qt.disable(qt.SCISSOR_TEST):(qt.enable(qt.SCISSOR_TEST),qt.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)),qt.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)},Vt.prototype.calculateProjection=function(qt,Kt){var Zt=this.projectionMatrix;Kt=Kt||qt,Zt.identity(),this.root?(Zt.a=2*(1/qt.width),Zt.d=2*(-1/qt.height),Zt.tx=-1-Kt.x*Zt.a,Zt.ty=1-Kt.y*Zt.d):(Zt.a=2*(1/qt.width),Zt.d=2*(1/qt.height),Zt.tx=-1-Kt.x*Zt.a,Zt.ty=-1-Kt.y*Zt.d)},Vt.prototype.resize=function(qt,Kt){if(qt|=0,Kt|=0,this.size.width!==qt||this.size.height!==Kt){this.size.width=qt,this.size.height=Kt,this.defaultFrame.width=qt,this.defaultFrame.height=Kt,this.frameBuffer.resize(qt*this.resolution,Kt*this.resolution);var Zt=this.frame||this.size;this.calculateProjection(Zt)}},Vt.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},Vt}();Gt.default=zt},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":12}],97:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(jt,Wt){var zt=!Wt;if(0===jt)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(zt){var Vt=document.createElement("canvas");Vt.width=1,Vt.height=1,Wt=Yt.default.createContext(Vt)}for(var qt=Wt.createShader(Wt.FRAGMENT_SHADER),Kt;;){if(Kt=Ht.replace(/%forloop%/gi,function(Zt){for(var Qt="",Jt=0;Jt<Zt;++Jt)0<Jt&&(Qt+="\nelse "),Jt<Zt-1&&(Qt+="if(test == "+Jt+".0){}");return Qt}(jt)),Wt.shaderSource(qt,Kt),Wt.compileShader(qt),Wt.getShaderParameter(qt,Wt.COMPILE_STATUS))break;jt=0|jt/2}return zt&&Wt.getExtension("WEBGL_lose_context")&&Wt.getExtension("WEBGL_lose_context").loseContext(),jt};var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("pixi-gl-core")),Ht=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":12}],98:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(Ht){var jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return jt[Yt.BLEND_MODES.NORMAL]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.ADD]=[Ht.ONE,Ht.DST_ALPHA],jt[Yt.BLEND_MODES.MULTIPLY]=[Ht.DST_COLOR,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.SCREEN]=[Ht.ONE,Ht.ONE_MINUS_SRC_COLOR],jt[Yt.BLEND_MODES.OVERLAY]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.DARKEN]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.LIGHTEN]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.COLOR_DODGE]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.COLOR_BURN]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.HARD_LIGHT]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.SOFT_LIGHT]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.DIFFERENCE]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.EXCLUSION]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.HUE]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.SATURATION]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.COLOR]=[Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.LUMINOSITY]=[Ht.ZERO,Ht.SRC_ALPHA],jt[Yt.BLEND_MODES.NORMAL_NPM]=[Ht.SRC_ALPHA,Ht.ONE_MINUS_SRC_ALPHA,Ht.ONE,Ht.ONE_MINUS_SRC_ALPHA],jt[Yt.BLEND_MODES.ADD_NPM]=[Ht.SRC_ALPHA,Ht.DST_ALPHA,Ht.ONE,Ht.DST_ALPHA],jt[Yt.BLEND_MODES.SCREEN_NPM]=[Ht.SRC_ALPHA,Ht.ONE_MINUS_SRC_COLOR,Ht.ONE,Ht.ONE_MINUS_SRC_COLOR],jt};var Yt=Bt("../../../const")},{"../../../const":46}],99:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(Ht){var jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return jt[Yt.DRAW_MODES.POINTS]=Ht.POINTS,jt[Yt.DRAW_MODES.LINES]=Ht.LINES,jt[Yt.DRAW_MODES.LINE_LOOP]=Ht.LINE_LOOP,jt[Yt.DRAW_MODES.LINE_STRIP]=Ht.LINE_STRIP,jt[Yt.DRAW_MODES.TRIANGLES]=Ht.TRIANGLES,jt[Yt.DRAW_MODES.TRIANGLE_STRIP]=Ht.TRIANGLE_STRIP,jt[Yt.DRAW_MODES.TRIANGLE_FAN]=Ht.TRIANGLE_FAN,jt};var Yt=Bt("../../../const")},{"../../../const":46}],100:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(Yt){Yt.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(Bt,Xt,Gt){function Yt(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}Gt.__esModule=!0;var Ht=Yt(Bt("./utils/maxRecommendedTextures")),jt=Yt(Bt("./utils/canUploadSameBuffer"));Gt.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,Ht.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,jt.default)()}},{"./utils/canUploadSameBuffer":121,"./utils/maxRecommendedTextures":126}],102:[function(Bt,Xt,Gt){function Yt(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Gt.__esModule=!0;var Ht=function(){function Qt(Jt,$t){for(var en=0,tn;en<$t.length;en++)tn=$t[en],tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Jt,tn.key,tn)}return function(Jt,$t,en){return $t&&Qt(Jt.prototype,$t),en&&Qt(Jt,en),Jt}}(),jt=Bt("../math"),Wt=Bt("../utils"),zt=Bt("../const"),Vt=Yt(Bt("../textures/Texture")),qt=Yt(Bt("../display/Container")),Kt=new jt.Point,Zt=function(Qt){function Jt($t){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Jt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,Qt.call(this));return en._anchor=new jt.ObservablePoint(en._onAnchorUpdate,en),en._texture=null,en._width=0,en._height=0,en._tint=null,en._tintRGB=null,en.tint=16777215,en.blendMode=zt.BLEND_MODES.NORMAL,en.shader=null,en.cachedTint=16777215,en.texture=$t||Vt.default.EMPTY,en.vertexData=new Float32Array(8),en.vertexTrimmedData=null,en._transformID=-1,en._textureID=-1,en._transformTrimmedID=-1,en._textureTrimmedID=-1,en.pluginName="sprite",en}return function($t,en){if("function"!=typeof en&&null!==en)throw new TypeError("Super expression must either be null or a function, not "+typeof en);$t.prototype=Object.create(en&&en.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),en&&(Object.setPrototypeOf?Object.setPrototypeOf($t,en):$t.__proto__=en)}(Jt,Qt),Jt.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,Wt.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,Wt.sign)(this.scale.y)*this._height/this._texture.orig.height)},Jt.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Jt.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var $t=this._texture,en=this.transform.worldTransform,tn=en.a,nn=en.b,an=en.c,rn=en.d,on=en.tx,sn=en.ty,dn=this.vertexData,ln=$t.trim,un=$t.orig,pn=this._anchor,cn=0,hn=0,fn=0,gn=0;ln?(cn=(hn=ln.x-pn._x*un.width)+ln.width,fn=(gn=ln.y-pn._y*un.height)+ln.height):(cn=(hn=-pn._x*un.width)+un.width,fn=(gn=-pn._y*un.height)+un.height),dn[0]=tn*hn+an*gn+on,dn[1]=rn*gn+nn*hn+sn,dn[2]=tn*cn+an*gn+on,dn[3]=rn*gn+nn*cn+sn,dn[4]=tn*cn+an*fn+on,dn[5]=rn*fn+nn*cn+sn,dn[6]=tn*hn+an*fn+on,dn[7]=rn*fn+nn*hn+sn}},Jt.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var $t=this._texture,en=this.vertexTrimmedData,tn=$t.orig,nn=this._anchor,an=this.transform.worldTransform,rn=an.a,on=an.b,sn=an.c,dn=an.d,ln=an.tx,un=an.ty,pn=-nn._x*tn.width,cn=pn+tn.width,hn=-nn._y*tn.height,fn=hn+tn.height;en[0]=rn*pn+sn*hn+ln,en[1]=dn*hn+on*pn+un,en[2]=rn*cn+sn*hn+ln,en[3]=dn*hn+on*cn+un,en[4]=rn*cn+sn*fn+ln,en[5]=dn*fn+on*cn+un,en[6]=rn*pn+sn*fn+ln,en[7]=dn*fn+on*pn+un},Jt.prototype._renderWebGL=function($t){this.calculateVertices(),$t.setObjectRenderer($t.plugins[this.pluginName]),$t.plugins[this.pluginName].render(this)},Jt.prototype._renderCanvas=function($t){$t.plugins[this.pluginName].render(this)},Jt.prototype._calculateBounds=function(){var $t=this._texture.trim,en=this._texture.orig;$t&&($t.width!==en.width||$t.height!==en.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},Jt.prototype.getLocalBounds=function($t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),$t||(this._localBoundsRect||(this._localBoundsRect=new jt.Rectangle),$t=this._localBoundsRect),this._bounds.getRectangle($t)):Qt.prototype.getLocalBounds.call(this,$t)},Jt.prototype.containsPoint=function($t){this.worldTransform.applyInverse($t,Kt);var en=this._texture.orig.width,tn=this._texture.orig.height,nn=-en*this.anchor.x,an=0;return Kt.x>=nn&&Kt.x<nn+en&&(an=-tn*this.anchor.y,Kt.y>=an&&Kt.y<an+tn)},Jt.prototype.destroy=function($t){if(Qt.prototype.destroy.call(this,$t),this._anchor=null,"boolean"==typeof $t?$t:$t&&$t.texture){var en="boolean"==typeof $t?$t:$t&&$t.baseTexture;this._texture.destroy(!!en)}this._texture=null,this.shader=null},Jt.from=function($t){return new Jt(Vt.default.from($t))},Jt.fromFrame=function($t){var en=Wt.TextureCache[$t];if(!en)throw new Error("The frameId \""+$t+"\" does not exist in the texture cache");return new Jt(en)},Jt.fromImage=function($t,en,tn){return new Jt(Vt.default.fromImage($t,en,tn))},Ht(Jt,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function($t){var en=(0,Wt.sign)(this.scale.x)||1;this.scale.x=en*$t/this._texture.orig.width,this._width=$t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function($t){var en=(0,Wt.sign)(this.scale.y)||1;this.scale.y=en*$t/this._texture.orig.height,this._height=$t}},{key:"anchor",get:function(){return this._anchor},set:function($t){this._anchor.copy($t)}},{key:"tint",get:function(){return this._tint},set:function($t){this._tint=$t,this._tintRGB=($t>>16)+(65280&$t)+((255&$t)<<16)}},{key:"texture",get:function(){return this._texture},set:function($t){this._texture!==$t&&(this._texture=$t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,$t&&($t.baseTexture.hasLoaded?this._onTextureUpdate():$t.once("update",this._onTextureUpdate,this)))}}]),Jt}(qt.default);Gt.default=Zt},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":124}],103:[function(Bt,Xt,Gt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Gt.__esModule=!0;var Ht=Yt(Bt("../../renderers/canvas/CanvasRenderer")),jt=Bt("../../const"),Wt=Bt("../../math"),zt=Yt(Bt("./CanvasTinter")),Vt=new Wt.Matrix,qt=function(){function Kt(Zt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Kt),this.renderer=Zt}return Kt.prototype.render=function(Zt){var Qt=Zt._texture,Jt=this.renderer,$t=Qt._frame.width,en=Qt._frame.height,tn=Zt.transform.worldTransform,nn=0,an=0;if(!(0>=Qt.orig.width||0>=Qt.orig.height)&&Qt.baseTexture.source&&(Jt.setBlendMode(Zt.blendMode),Qt.valid)){Jt.context.globalAlpha=Zt.worldAlpha;var rn=Qt.baseTexture.scaleMode===jt.SCALE_MODES.LINEAR;Jt.smoothProperty&&Jt.context[Jt.smoothProperty]!==rn&&(Jt.context[Jt.smoothProperty]=rn),Qt.trim?(nn=Qt.trim.width/2+Qt.trim.x-Zt.anchor.x*Qt.orig.width,an=Qt.trim.height/2+Qt.trim.y-Zt.anchor.y*Qt.orig.height):(nn=(.5-Zt.anchor.x)*Qt.orig.width,an=(.5-Zt.anchor.y)*Qt.orig.height),Qt.rotate&&(tn.copy(Vt),tn=Vt,Wt.GroupD8.matrixAppendRotationInv(tn,Qt.rotate,nn,an),nn=0,an=0),nn-=$t/2,an-=en/2,Jt.roundPixels?(Jt.context.setTransform(tn.a,tn.b,tn.c,tn.d,0|tn.tx*Jt.resolution,0|tn.ty*Jt.resolution),nn|=0,an|=0):Jt.context.setTransform(tn.a,tn.b,tn.c,tn.d,tn.tx*Jt.resolution,tn.ty*Jt.resolution);var on=Qt.baseTexture.resolution;16777215===Zt.tint?Jt.context.drawImage(Qt.baseTexture.source,Qt._frame.x*on,Qt._frame.y*on,$t*on,en*on,nn*Jt.resolution,an*Jt.resolution,$t*Jt.resolution,en*Jt.resolution):(Zt.cachedTint===Zt.tint&&Zt.tintedTexture.tintId===Zt._texture._updateID||(Zt.cachedTint=Zt.tint,Zt.tintedTexture=zt.default.getTintedTexture(Zt,Zt.tint)),Jt.context.drawImage(Zt.tintedTexture,0,0,$t*on,en*on,nn*Jt.resolution,an*Jt.resolution,$t*Jt.resolution,en*Jt.resolution))}},Kt.prototype.destroy=function(){this.renderer=null},Kt}();Gt.default=qt,Ht.default.registerPlugin("sprite",qt)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=Bt("../../utils"),Ht={getTintedTexture:function(jt,Wt){var zt=jt._texture,Vt="#"+("00000"+(0|(Wt=Ht.roundColor(Wt))).toString(16)).substr(-6);zt.tintCache=zt.tintCache||{};var qt=zt.tintCache[Vt],Kt;if(qt){if(qt.tintId===zt._updateID)return zt.tintCache[Vt];Kt=zt.tintCache[Vt]}else Kt=Ht.canvas||document.createElement("canvas");if(Ht.tintMethod(zt,Wt,Kt),Kt.tintId=zt._updateID,Ht.convertTintToImage){var Zt=new Image;Zt.src=Kt.toDataURL(),zt.tintCache[Vt]=Zt}else zt.tintCache[Vt]=Kt,Ht.canvas=null;return Kt},tintWithMultiply:function(jt,Wt,zt){var Vt=zt.getContext("2d"),qt=jt._frame.clone(),Kt=jt.baseTexture.resolution;qt.x*=Kt,qt.y*=Kt,qt.width*=Kt,qt.height*=Kt,zt.width=Math.ceil(qt.width),zt.height=Math.ceil(qt.height),Vt.save(),Vt.fillStyle="#"+("00000"+(0|Wt).toString(16)).substr(-6),Vt.fillRect(0,0,qt.width,qt.height),Vt.globalCompositeOperation="multiply",Vt.drawImage(jt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.globalCompositeOperation="destination-atop",Vt.drawImage(jt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.restore()},tintWithOverlay:function(jt,Wt,zt){var Vt=zt.getContext("2d"),qt=jt._frame.clone(),Kt=jt.baseTexture.resolution;qt.x*=Kt,qt.y*=Kt,qt.width*=Kt,qt.height*=Kt,zt.width=Math.ceil(qt.width),zt.height=Math.ceil(qt.height),Vt.save(),Vt.globalCompositeOperation="copy",Vt.fillStyle="#"+("00000"+(0|Wt).toString(16)).substr(-6),Vt.fillRect(0,0,qt.width,qt.height),Vt.globalCompositeOperation="destination-atop",Vt.drawImage(jt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.restore()},tintWithPerPixel:function(jt,Wt,zt){var Vt=zt.getContext("2d"),qt=jt._frame.clone(),Kt=jt.baseTexture.resolution;qt.x*=Kt,qt.y*=Kt,qt.width*=Kt,qt.height*=Kt,zt.width=Math.ceil(qt.width),zt.height=Math.ceil(qt.height),Vt.save(),Vt.globalCompositeOperation="copy",Vt.drawImage(jt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.restore();for(var Zt=(0,Yt.hex2rgb)(Wt),Qt=Zt[0],Jt=Zt[1],$t=Zt[2],en=Vt.getImageData(0,0,qt.width,qt.height),tn=en.data,nn=0;nn<tn.length;nn+=4)tn[nn+0]*=Qt,tn[nn+1]*=Jt,tn[nn+2]*=$t;Vt.putImageData(en,0,0)},roundColor:function(jt){var Wt=Ht.cacheStepsPerColorChannel,zt=(0,Yt.hex2rgb)(jt);return zt[0]=Math.min(255,zt[0]/Wt*Wt),zt[1]=Math.min(255,zt[1]/Wt*Wt),zt[2]=Math.min(255,zt[2]/Wt*Wt),(0,Yt.rgb2hex)(zt)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../../renderers/canvas/utils/canUseNewCanvasBlendModes")).default)(),tintMethod:0};Ht.tintMethod=Ht.canUseMultiply?Ht.tintWithMultiply:Ht.tintWithPerPixel,Gt.default=Ht},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":124}],105:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Ht(jt){!function(Wt,zt){if(!(Wt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.vertices=new ArrayBuffer(jt),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return Ht.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},Ht}();Gt.default=Yt},{}],106:[function(Bt,Xt,Gt){function Yt(nn){return nn&&nn.__esModule?nn:{default:nn}}Gt.__esModule=!0;var Ht=Yt(Bt("../../renderers/webgl/utils/ObjectRenderer")),jt=Yt(Bt("../../renderers/webgl/WebGLRenderer")),Wt=Yt(Bt("../../utils/createIndicesForQuads")),zt=Yt(Bt("./generateMultiTextureShader")),Vt=Yt(Bt("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),qt=Yt(Bt("./BatchBuffer")),Kt=Yt(Bt("../../settings")),Zt=Bt("../../utils"),Qt=Yt(Bt("pixi-gl-core")),Jt=Yt(Bt("bit-twiddle")),$t=0,en=0,tn=function(nn){function an(rn){!function(ln,un){if(!(ln instanceof un))throw new TypeError("Cannot call a class as a function")}(this,an);var on=function(ln,un){if(!ln)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return un&&("object"==typeof un||"function"==typeof un)?un:ln}(this,nn.call(this,rn));on.vertSize=5,on.vertByteSize=4*on.vertSize,on.size=Kt.default.SPRITE_BATCH_SIZE,on.buffers=[];for(var sn=1;sn<=Jt.default.nextPow2(on.size);sn*=2)on.buffers.push(new qt.default(4*sn*on.vertByteSize));on.indices=(0,Wt.default)(on.size),on.shader=null,on.currentIndex=0,on.groups=[];for(var dn=0;dn<on.size;dn++)on.groups[dn]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return on.sprites=[],on.vertexBuffers=[],on.vaos=[],on.vaoMax=2,on.vertexCount=0,on.renderer.on("prerender",on.onPrerender,on),on}return function(rn,on){if("function"!=typeof on&&null!==on)throw new TypeError("Super expression must either be null or a function, not "+typeof on);rn.prototype=Object.create(on&&on.prototype,{constructor:{value:rn,enumerable:!1,writable:!0,configurable:!0}}),on&&(Object.setPrototypeOf?Object.setPrototypeOf(rn,on):rn.__proto__=on)}(an,nn),an.prototype.onContextChange=function(){var rn=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(rn.getParameter(rn.MAX_TEXTURE_IMAGE_UNITS),Kt.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,Vt.default)(this.MAX_TEXTURES,rn)),this.shader=(0,zt.default)(rn,this.MAX_TEXTURES),this.indexBuffer=Qt.default.GLBuffer.createIndexBuffer(rn,this.indices,rn.STATIC_DRAW),this.renderer.bindVao(null);for(var on=this.shader.attributes,sn=0;sn<this.vaoMax;sn++){var dn=this.vertexBuffers[sn]=Qt.default.GLBuffer.createVertexBuffer(rn,null,rn.STREAM_DRAW),ln=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(dn,on.aVertexPosition,rn.FLOAT,!1,this.vertByteSize,0).addAttribute(dn,on.aTextureCoord,rn.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(dn,on.aColor,rn.UNSIGNED_BYTE,!0,this.vertByteSize,12);on.aTextureId&&ln.addAttribute(dn,on.aTextureId,rn.FLOAT,!1,this.vertByteSize,16),this.vaos[sn]=ln}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=Array(this.MAX_TEXTURES)},an.prototype.onPrerender=function(){this.vertexCount=0},an.prototype.render=function(rn){this.currentIndex>=this.size&&this.flush(),rn._texture._uvs&&(this.sprites[this.currentIndex++]=rn)},an.prototype.flush=function(){if(0!==this.currentIndex){var rn=this.renderer.gl,on=this.MAX_TEXTURES,sn=Jt.default.nextPow2(this.currentIndex),dn=Jt.default.log2(sn),ln=this.buffers[dn],un=this.sprites,pn=this.groups,cn=ln.float32View,hn=ln.uint32View,fn=this.boundTextures,gn=this.renderer.boundTextures,mn=this.renderer.textureGC.count,yn=0,_n,bn,xn=1,vn=0,Tn=pn[0],En,Sn,wn=Zt.premultiplyBlendMode[un[0]._texture.baseTexture.premultipliedAlpha?1:0][un[0].blendMode];Tn.textureCount=0,Tn.start=0,Tn.blend=wn,$t++;var Cn;for(Cn=0;Cn<on;++Cn)fn[Cn]=gn[Cn],fn[Cn]._virtalBoundId=Cn;for(Cn=0;Cn<this.currentIndex;++Cn){var Pn=un[Cn];_n=Pn._texture.baseTexture;var An=Zt.premultiplyBlendMode[+_n.premultipliedAlpha][Pn.blendMode];if(wn!==An&&(wn=An,bn=null,vn=on,$t++),bn!==_n&&(bn=_n,_n._enabled!==$t)){if(vn===on&&($t++,Tn.size=Cn-Tn.start,vn=0,(Tn=pn[xn++]).blend=wn,Tn.textureCount=0,Tn.start=Cn),_n.touched=mn,-1===_n._virtalBoundId)for(var Mn=0;Mn<on;++Mn){var Rn=(Mn+en)%on,In=fn[Rn];if(In._enabled!==$t){en++,In._virtalBoundId=-1,_n._virtalBoundId=Rn,fn[Rn]=_n;break}}_n._enabled=$t,Tn.textureCount++,Tn.ids[vn]=_n._virtalBoundId,Tn.textures[vn++]=_n}if(En=Pn.vertexData,Sn=Pn._texture._uvs.uvsUint32,this.renderer.roundPixels){var Dn=this.renderer.resolution;cn[yn]=(0|En[0]*Dn)/Dn,cn[yn+1]=(0|En[1]*Dn)/Dn,cn[yn+5]=(0|En[2]*Dn)/Dn,cn[yn+6]=(0|En[3]*Dn)/Dn,cn[yn+10]=(0|En[4]*Dn)/Dn,cn[yn+11]=(0|En[5]*Dn)/Dn,cn[yn+15]=(0|En[6]*Dn)/Dn,cn[yn+16]=(0|En[7]*Dn)/Dn}else cn[yn]=En[0],cn[yn+1]=En[1],cn[yn+5]=En[2],cn[yn+6]=En[3],cn[yn+10]=En[4],cn[yn+11]=En[5],cn[yn+15]=En[6],cn[yn+16]=En[7];hn[yn+2]=Sn[0],hn[yn+7]=Sn[1],hn[yn+12]=Sn[2],hn[yn+17]=Sn[3];var On=Math.min(Pn.worldAlpha,1),Ln=1>On&&_n.premultipliedAlpha?(0,Zt.premultiplyTint)(Pn._tintRGB,On):Pn._tintRGB+(255*On<<24);hn[yn+3]=hn[yn+8]=hn[yn+13]=hn[yn+18]=Ln,cn[yn+4]=cn[yn+9]=cn[yn+14]=cn[yn+19]=_n._virtalBoundId,yn+=20}if(Tn.size=Cn-Tn.start,Kt.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(ln.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var kn=this.shader.attributes,Nn=this.vertexBuffers[this.vertexCount]=Qt.default.GLBuffer.createVertexBuffer(rn,null,rn.STREAM_DRAW),Fn=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(Nn,kn.aVertexPosition,rn.FLOAT,!1,this.vertByteSize,0).addAttribute(Nn,kn.aTextureCoord,rn.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(Nn,kn.aColor,rn.UNSIGNED_BYTE,!0,this.vertByteSize,12);kn.aTextureId&&Fn.addAttribute(Nn,kn.aTextureId,rn.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=Fn}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(ln.vertices,0,!1),this.vertexCount++}for(Cn=0;Cn<on;++Cn)gn[Cn]._virtalBoundId=-1;for(Cn=0;Cn<xn;++Cn){for(var Bn=pn[Cn],Un=Bn.textureCount,Xn=0;Xn<Un;Xn++)bn=Bn.textures[Xn],gn[Bn.ids[Xn]]!==bn&&this.renderer.bindTexture(bn,Bn.ids[Xn],!0),bn._virtalBoundId=-1;this.renderer.state.setBlendMode(Bn.blend),rn.drawElements(rn.TRIANGLES,6*Bn.size,rn.UNSIGNED_SHORT,2*(6*Bn.start))}this.currentIndex=0}},an.prototype.start=function(){this.renderer.bindShader(this.shader),Kt.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},an.prototype.stop=function(){this.flush()},an.prototype.destroy=function(){for(var rn=0;rn<this.vaoMax;rn++)this.vertexBuffers[rn]&&this.vertexBuffers[rn].destroy(),this.vaos[rn]&&this.vaos[rn].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),nn.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var on=0;on<this.buffers.length;++on)this.buffers[on].destroy()},an}(Ht.default);Gt.default=tn,jt.default.registerPlugin("sprite",tn)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":124,"../../utils/createIndicesForQuads":122,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":12}],107:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(jt,Wt){var zt=Ht;zt=(zt=zt.replace(/%count%/gi,Wt)).replace(/%forloop%/gi,function(Zt){var Qt="";Qt+="\n",Qt+="\n";for(var Jt=0;Jt<Zt;Jt++)0<Jt&&(Qt+="\nelse "),Jt<Zt-1&&(Qt+="if(textureId == "+Jt+".0)"),Qt+="\n{",Qt+="\n\tcolor = texture2D(uSamplers["+Jt+"], vTextureCoord, -1.0);",Qt+="\n}";return Qt+="\n",Qt+="\n"}(Wt));for(var Vt=new Yt.default(jt,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",zt),qt=[],Kt=0;Kt<Wt;Kt++)qt[Kt]=Kt;return Vt.bind(),Vt.uniforms.uSamplers=qt,Vt};var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../../Shader")),Ht=(Bt("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":44,path:23}],108:[function(Bt,Xt,Gt){function Yt(tn){return tn&&tn.__esModule?tn:{default:tn}}Gt.__esModule=!0;var Ht=function(){function tn(nn,an){for(var rn=0,on;rn<an.length;rn++)on=an[rn],on.enumerable=on.enumerable||!1,on.configurable=!0,"value"in on&&(on.writable=!0),Object.defineProperty(nn,on.key,on)}return function(nn,an,rn){return an&&tn(nn.prototype,an),rn&&tn(nn,rn),nn}}(),jt=Yt(Bt("../sprites/Sprite")),Wt=Yt(Bt("../textures/Texture")),zt=Bt("../math"),Vt=Bt("../utils"),qt=Bt("../const"),Kt=Yt(Bt("../settings")),Zt=Yt(Bt("./TextStyle")),Qt=Yt(Bt("./TextMetrics")),Jt=Yt(Bt("../utils/trimCanvas")),$t={texture:!0,children:!1,baseTexture:!0},en=function(tn){function nn(an,rn,on){!function(ln,un){if(!(ln instanceof un))throw new TypeError("Cannot call a class as a function")}(this,nn),(on=on||document.createElement("canvas")).width=3,on.height=3;var sn=Wt.default.fromCanvas(on,Kt.default.SCALE_MODE,"text");sn.orig=new zt.Rectangle,sn.trim=new zt.Rectangle;var dn=function(ln,un){if(!ln)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return un&&("object"==typeof un||"function"==typeof un)?un:ln}(this,tn.call(this,sn));return Wt.default.addToCache(dn._texture,dn._texture.baseTexture.textureCacheIds[0]),dn.canvas=on,dn.context=dn.canvas.getContext("2d"),dn.resolution=Kt.default.RESOLUTION,dn._text=null,dn._style=null,dn._styleListener=null,dn._font="",dn.text=an,dn.style=rn,dn.localStyleID=-1,dn}return function(an,rn){if("function"!=typeof rn&&null!==rn)throw new TypeError("Super expression must either be null or a function, not "+typeof rn);an.prototype=Object.create(rn&&rn.prototype,{constructor:{value:an,enumerable:!1,writable:!0,configurable:!0}}),rn&&(Object.setPrototypeOf?Object.setPrototypeOf(an,rn):an.__proto__=rn)}(nn,tn),nn.prototype.updateText=function(an){var rn=this._style;if(this.localStyleID!==rn.styleID&&(this.dirty=!0,this.localStyleID=rn.styleID),this.dirty||!an){this._font=this._style.toFontString();var on=this.context,sn=Qt.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),dn=sn.width,ln=sn.height,un=sn.lines,pn=sn.lineHeight,cn=sn.lineWidths,hn=sn.maxLineWidth,fn=sn.fontProperties;this.canvas.width=Math.ceil((dn+2*rn.padding)*this.resolution),this.canvas.height=Math.ceil((ln+2*rn.padding)*this.resolution),on.scale(this.resolution,this.resolution),on.clearRect(0,0,this.canvas.width,this.canvas.height),on.font=this._font,on.strokeStyle=rn.stroke,on.lineWidth=rn.strokeThickness,on.textBaseline=rn.textBaseline,on.lineJoin=rn.lineJoin,on.miterLimit=rn.miterLimit;var gn,mn;if(rn.dropShadow){on.fillStyle=rn.dropShadowColor,on.globalAlpha=rn.dropShadowAlpha,on.shadowBlur=rn.dropShadowBlur,0<rn.dropShadowBlur&&(on.shadowColor=rn.dropShadowColor);for(var yn=Math.cos(rn.dropShadowAngle)*rn.dropShadowDistance,_n=Math.sin(rn.dropShadowAngle)*rn.dropShadowDistance,bn=0;bn<un.length;bn++)gn=rn.strokeThickness/2,mn=rn.strokeThickness/2+bn*pn+fn.ascent,"right"===rn.align?gn+=hn-cn[bn]:"center"===rn.align&&(gn+=(hn-cn[bn])/2),rn.fill&&(this.drawLetterSpacing(un[bn],gn+yn+rn.padding,mn+_n+rn.padding),rn.stroke&&rn.strokeThickness&&(on.strokeStyle=rn.dropShadowColor,this.drawLetterSpacing(un[bn],gn+yn+rn.padding,mn+_n+rn.padding,!0),on.strokeStyle=rn.stroke))}on.shadowBlur=0,on.globalAlpha=1,on.fillStyle=this._generateFillStyle(rn,un);for(var xn=0;xn<un.length;xn++)gn=rn.strokeThickness/2,mn=rn.strokeThickness/2+xn*pn+fn.ascent,"right"===rn.align?gn+=hn-cn[xn]:"center"===rn.align&&(gn+=(hn-cn[xn])/2),rn.stroke&&rn.strokeThickness&&this.drawLetterSpacing(un[xn],gn+rn.padding,mn+rn.padding,!0),rn.fill&&this.drawLetterSpacing(un[xn],gn+rn.padding,mn+rn.padding);this.updateTexture()}},nn.prototype.drawLetterSpacing=function(an,rn,on){var sn=3<arguments.length&&void 0!==arguments[3]&&arguments[3],dn=this._style.letterSpacing;if(0!==dn)for(var ln=String.prototype.split.call(an,""),un=rn,pn=0,cn="";pn<an.length;)cn=ln[pn++],sn?this.context.strokeText(cn,un,on):this.context.fillText(cn,un,on),un+=this.context.measureText(cn).width+dn;else sn?this.context.strokeText(an,rn,on):this.context.fillText(an,rn,on)},nn.prototype.updateTexture=function(){var an=this.canvas;if(this._style.trim){var rn=(0,Jt.default)(an);an.width=rn.width,an.height=rn.height,this.context.putImageData(rn.data,0,0)}var on=this._texture,sn=this._style,dn=sn.trim?0:sn.padding,ln=on.baseTexture;ln.hasLoaded=!0,ln.resolution=this.resolution,ln.realWidth=an.width,ln.realHeight=an.height,ln.width=an.width/this.resolution,ln.height=an.height/this.resolution,on.trim.width=on._frame.width=an.width/this.resolution,on.trim.height=on._frame.height=an.height/this.resolution,on.trim.x=-dn,on.trim.y=-dn,on.orig.width=on._frame.width-2*dn,on.orig.height=on._frame.height-2*dn,this._onTextureUpdate(),ln.emit("update",ln),this.dirty=!1},nn.prototype.renderWebGL=function(an){this.resolution!==an.resolution&&(this.resolution=an.resolution,this.dirty=!0),this.updateText(!0),tn.prototype.renderWebGL.call(this,an)},nn.prototype._renderCanvas=function(an){this.resolution!==an.resolution&&(this.resolution=an.resolution,this.dirty=!0),this.updateText(!0),tn.prototype._renderCanvas.call(this,an)},nn.prototype.getLocalBounds=function(an){return this.updateText(!0),tn.prototype.getLocalBounds.call(this,an)},nn.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},nn.prototype._onStyleChange=function(){this.dirty=!0},nn.prototype._generateFillStyle=function(an,rn){if(!Array.isArray(an.fill))return an.fill;if(navigator.isCocoonJS)return an.fill[0];var on,sn,dn,ln,un=this.canvas.width/this.resolution,pn=this.canvas.height/this.resolution,cn=an.fill.slice(),hn=an.fillGradientStops.slice();if(!hn.length)for(var fn=cn.length+1,gn=1;gn<fn;++gn)hn.push(gn/fn);if(cn.unshift(an.fill[0]),hn.unshift(0),cn.push(an.fill[an.fill.length-1]),hn.push(1),an.fillGradientType===qt.TEXT_GRADIENT.LINEAR_VERTICAL){on=this.context.createLinearGradient(un/2,0,un/2,pn),sn=(cn.length+1)*rn.length,dn=0;for(var mn=0;mn<rn.length;mn++){dn+=1;for(var yn=0;yn<cn.length;yn++)ln="number"==typeof hn[yn]?hn[yn]/rn.length+mn/rn.length:dn/sn,on.addColorStop(ln,cn[yn]),dn++}}else{on=this.context.createLinearGradient(0,pn/2,un,pn/2),sn=cn.length+1,dn=1;for(var _n=0;_n<cn.length;_n++)ln="number"==typeof hn[_n]?hn[_n]:dn/sn,on.addColorStop(ln,cn[_n]),dn++}return on},nn.prototype.destroy=function(an){"boolean"==typeof an&&(an={children:an}),an=Object.assign({},$t,an),tn.prototype.destroy.call(this,an),this.context=null,this.canvas=null,this._style=null},Ht(nn,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(an){this.updateText(!0);var rn=(0,Vt.sign)(this.scale.x)||1;this.scale.x=rn*an/this._texture.orig.width,this._width=an}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(an){this.updateText(!0);var rn=(0,Vt.sign)(this.scale.y)||1;this.scale.y=rn*an/this._texture.orig.height,this._height=an}},{key:"style",get:function(){return this._style},set:function(an){this._style=(an=an||{})instanceof Zt.default?an:new Zt.default(an),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(an){an=(""===an||null===an||void 0===an?" ":an)+"",this._text!==an&&(this._text=an,this.dirty=!0)}}]),nn}(jt.default);Gt.default=en},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":124,"../utils/trimCanvas":129,"./TextMetrics":109,"./TextStyle":110}],109:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function jt(Wt,zt,Vt,qt,Kt,Zt,Qt,Jt,$t){!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,jt),this.text=Wt,this.style=zt,this.width=Vt,this.height=qt,this.lines=Kt,this.lineWidths=Zt,this.lineHeight=Qt,this.maxLineWidth=Jt,this.fontProperties=$t}return jt.measureText=function(Wt,zt,Vt){var qt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:jt._canvas;Vt=Vt||zt.wordWrap;var Kt=zt.toFontString(),Zt=jt.measureFont(Kt),Qt=qt.getContext("2d");Qt.font=Kt;for(var Jt=(Vt?jt.wordWrap(Wt,zt,qt):Wt).split(/(?:\r\n|\r|\n)/),$t=Array(Jt.length),en=0,tn=0,nn;tn<Jt.length;tn++)nn=Qt.measureText(Jt[tn]).width+(Jt[tn].length-1)*zt.letterSpacing,$t[tn]=nn,en=Math.max(en,nn);var an=en+zt.strokeThickness;zt.dropShadow&&(an+=zt.dropShadowDistance);var rn=zt.lineHeight||Zt.fontSize+zt.strokeThickness,on=Math.max(rn,Zt.fontSize+zt.strokeThickness)+(Jt.length-1)*(rn+zt.leading);return zt.dropShadow&&(on+=zt.dropShadowDistance),new jt(Wt,zt,an,on,Jt,$t,rn+zt.leading,en,Zt)},jt.wordWrap=function(Wt,zt){for(var Vt=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:jt._canvas).getContext("2d"),qt="",Kt=Wt.split("\n"),Zt=zt.wordWrapWidth,Qt={},Jt=0;Jt<Kt.length;Jt++){for(var $t=Zt,en=Kt[Jt].split(" "),tn=0,nn;tn<en.length;tn++)if(nn=Vt.measureText(en[tn]).width,zt.breakWords&&nn>Zt)for(var an=en[tn].split(""),rn=0;rn<an.length;rn++){var on=an[rn],sn=Qt[on];void 0===sn&&(sn=Vt.measureText(on).width,Qt[on]=sn),sn>$t?(qt+="\n"+on,$t=Zt-sn):(0===rn&&(qt+=" "),qt+=on,$t-=sn)}else{var dn=nn+Vt.measureText(" ").width;0===tn||dn>$t?(0<tn&&(qt+="\n"),qt+=en[tn],$t=Zt-nn):($t-=dn,qt+=" "+en[tn])}Jt<Kt.length-1&&(qt+="\n")}return qt},jt.measureFont=function(Wt){if(jt._fonts[Wt])return jt._fonts[Wt];var zt={},Vt=jt._canvas,qt=jt._context;qt.font=Wt;var Kt=Math.ceil(qt.measureText("|M\xC9q").width),Zt=Math.ceil(qt.measureText("M").width),Qt=2*Zt;Zt=0|1.4*Zt,Vt.width=Kt,Vt.height=Qt,qt.fillStyle="#f00",qt.fillRect(0,0,Kt,Qt),qt.font=Wt,qt.textBaseline="alphabetic",qt.fillStyle="#000",qt.fillText("|M\xC9q",0,Zt);var Jt=qt.getImageData(0,0,Kt,Qt).data,$t=Jt.length,en=4*Kt,tn=0,nn=0,an=!1;for(tn=0;tn<Zt;++tn){for(var rn=0;rn<en;rn+=4)if(255!==Jt[nn+rn]){an=!0;break}if(an)break;nn+=en}for(zt.ascent=Zt-tn,nn=$t-en,an=!1,tn=Qt;tn>Zt;--tn){for(var on=0;on<en;on+=4)if(255!==Jt[nn+on]){an=!0;break}if(an)break;nn-=en}return zt.descent=tn-Zt,zt.fontSize=zt.ascent+zt.descent,jt._fonts[Wt]=zt,zt},jt}();Gt.default=Yt;var Ht=document.createElement("canvas");Ht.width=Ht.height=10,Yt._canvas=Ht,Yt._context=Ht.getContext("2d"),Yt._fonts={}},{}],110:[function(Bt,Xt,Gt){function Yt(Kt){return"number"==typeof Kt?(0,zt.hex2string)(Kt):("string"==typeof Kt&&0===Kt.indexOf("0x")&&(Kt=Kt.replace("0x","#")),Kt)}function Ht(Kt){if(Array.isArray(Kt)){for(var Zt=0;Zt<Kt.length;++Zt)Kt[Zt]=Yt(Kt[Zt]);return Kt}return Yt(Kt)}Gt.__esModule=!0;var jt=function(){function Kt(Zt,Qt){for(var Jt=0,$t;Jt<Qt.length;Jt++)$t=Qt[Jt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Zt,$t.key,$t)}return function(Zt,Qt,Jt){return Qt&&Kt(Zt.prototype,Qt),Jt&&Kt(Zt,Jt),Zt}}(),Wt=Bt("../const"),zt=Bt("../utils"),Vt={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:Wt.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},qt=function(){function Kt(Zt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Kt),this.styleID=0,Object.assign(this,Vt,Zt)}return Kt.prototype.clone=function(){var Zt={};for(var Qt in Vt)Zt[Qt]=this[Qt];return new Kt(Zt)},Kt.prototype.reset=function(){Object.assign(this,Vt)},Kt.prototype.toFontString=function(){var Zt="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,Qt=this.fontFamily;Array.isArray(this.fontFamily)||(Qt=this.fontFamily.split(","));for(var Jt=Qt.length-1,$t;0<=Jt;Jt--)$t=Qt[Jt].trim(),/([\"\'])[^\'\"]+\1/.test($t)||($t="\""+$t+"\""),Qt[Jt]=$t;return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+Zt+" "+Qt.join(",")},jt(Kt,[{key:"align",get:function(){return this._align},set:function(Zt){this._align!==Zt&&(this._align=Zt,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(Zt){this._breakWords!==Zt&&(this._breakWords=Zt,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(Zt){this._dropShadow!==Zt&&(this._dropShadow=Zt,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(Zt){this._dropShadowAlpha!==Zt&&(this._dropShadowAlpha=Zt,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(Zt){this._dropShadowAngle!==Zt&&(this._dropShadowAngle=Zt,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(Zt){this._dropShadowBlur!==Zt&&(this._dropShadowBlur=Zt,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(Zt){var Qt=Ht(Zt);this._dropShadowColor!==Qt&&(this._dropShadowColor=Qt,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(Zt){this._dropShadowDistance!==Zt&&(this._dropShadowDistance=Zt,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(Zt){var Qt=Ht(Zt);this._fill!==Qt&&(this._fill=Qt,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(Zt){this._fillGradientType!==Zt&&(this._fillGradientType=Zt,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(Zt){(function(Qt,Jt){if(!Array.isArray(Qt)||!Array.isArray(Jt))return!1;if(Qt.length!==Jt.length)return!1;for(var $t=0;$t<Qt.length;++$t)if(Qt[$t]!==Jt[$t])return!1;return!0})(this._fillGradientStops,Zt)||(this._fillGradientStops=Zt,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(Zt){this.fontFamily!==Zt&&(this._fontFamily=Zt,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(Zt){this._fontSize!==Zt&&(this._fontSize=Zt,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(Zt){this._fontStyle!==Zt&&(this._fontStyle=Zt,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(Zt){this._fontVariant!==Zt&&(this._fontVariant=Zt,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(Zt){this._fontWeight!==Zt&&(this._fontWeight=Zt,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(Zt){this._letterSpacing!==Zt&&(this._letterSpacing=Zt,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(Zt){this._lineHeight!==Zt&&(this._lineHeight=Zt,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(Zt){this._leading!==Zt&&(this._leading=Zt,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(Zt){this._lineJoin!==Zt&&(this._lineJoin=Zt,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(Zt){this._miterLimit!==Zt&&(this._miterLimit=Zt,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(Zt){this._padding!==Zt&&(this._padding=Zt,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(Zt){var Qt=Ht(Zt);this._stroke!==Qt&&(this._stroke=Qt,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(Zt){this._strokeThickness!==Zt&&(this._strokeThickness=Zt,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(Zt){this._textBaseline!==Zt&&(this._textBaseline=Zt,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(Zt){this._trim!==Zt&&(this._trim=Zt,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(Zt){this._wordWrap!==Zt&&(this._wordWrap=Zt,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(Zt){this._wordWrapWidth!==Zt&&(this._wordWrapWidth=Zt,this.styleID++)}}]),Kt}();Gt.default=qt},{"../const":46,"../utils":124}],111:[function(Bt,Xt,Gt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Gt.__esModule=!0;var Ht=Yt(Bt("./BaseTexture")),jt=Yt(Bt("../settings")),Wt=function(zt){function Vt(){var qt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,Kt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,Zt=arguments[2],Qt=arguments[3];!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Jt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,zt.call(this,null,Zt));return Jt.resolution=Qt||jt.default.RESOLUTION,Jt.width=qt,Jt.height=Kt,Jt.realWidth=Jt.width*Jt.resolution,Jt.realHeight=Jt.height*Jt.resolution,Jt.scaleMode=void 0===Zt?jt.default.SCALE_MODE:Zt,Jt.hasLoaded=!0,Jt._glRenderTargets={},Jt._canvasRenderTarget=null,Jt.valid=!1,Jt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.resize=function(qt,Kt){qt===this.width&&Kt===this.height||(this.valid=0<qt&&0<Kt,this.width=qt,this.height=Kt,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},Vt.prototype.destroy=function(){zt.prototype.destroy.call(this,!0),this.renderer=null},Vt}(Ht.default);Gt.default=Wt},{"../settings":101,"./BaseTexture":112}],112:[function(Bt,Xt,Gt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Gt.__esModule=!0;var Ht=Bt("../utils"),jt=Yt(Bt("../settings")),Wt=Yt(Bt("eventemitter3")),zt=Yt(Bt("../utils/determineCrossOrigin")),Vt=Yt(Bt("bit-twiddle")),qt=function(Kt){function Zt(Qt,Jt,$t){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Zt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,Kt.call(this));return en.uid=(0,Ht.uid)(),en.touched=0,en.resolution=$t||jt.default.RESOLUTION,en.width=100,en.height=100,en.realWidth=100,en.realHeight=100,en.scaleMode=void 0===Jt?jt.default.SCALE_MODE:Jt,en.hasLoaded=!1,en.isLoading=!1,en.source=null,en.origSource=null,en.imageType=null,en.sourceScale=1,en.premultipliedAlpha=!0,en.imageUrl=null,en.isPowerOfTwo=!1,en.mipmap=jt.default.MIPMAP_TEXTURES,en.wrapMode=jt.default.WRAP_MODE,en._glTextures={},en._enabled=0,en._virtalBoundId=-1,en._destroyed=!1,en.textureCacheIds=[],Qt&&en.loadSource(Qt),en}return function(Qt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Qt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Jt):Qt.__proto__=Jt)}(Zt,Kt),Zt.prototype.update=function(Qt){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),Qt||this.emit("update",this)},Zt.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=Vt.default.isPow2(this.realWidth)&&Vt.default.isPow2(this.realHeight)},Zt.prototype.loadSource=function(Qt){var Jt=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,Jt&&this.source&&(this.source.onload=null,this.source.onerror=null);var $t=!this.source;if(this.source=Qt,(Qt.src&&Qt.complete||Qt.getContext)&&Qt.width&&Qt.height){this._updateImageType(),"svg"===this.imageType&&this._loadSvgSource();var en=this;$t&&(window.createImageBitmap&&!Qt.getContext?(en.hasLoaded=!0,en.update(!0),window.createImageBitmap(Qt).then(function(tn){en.source=tn,en.emit("loaded",en)})):(this._sourceLoaded(),en.emit("loaded",en)))}else if(!Qt.getContext&&(this.isLoading=!0,en=this,(Qt.onload=function(){en._updateImageType(),Qt.onload=null,Qt.onerror=null,en.isLoading&&(en.isLoading=!1,"svg"===en.imageType?en._loadSvgSource():window.createImageBitmap?(en.hasLoaded=!0,en.update(!0),window.createImageBitmap(Qt).then(function(tn){en.source=tn,en.emit("loaded",en)})):(en._sourceLoaded(),en.emit("loaded",en)))},Qt.onerror=function(){Qt.onload=null,Qt.onerror=null,en.isLoading&&(en.isLoading=!1,en.emit("error",en))},Qt.complete&&Qt.src))){if(Qt.onload=null,Qt.onerror=null,"svg"===en.imageType)return void en._loadSvgSource();this.isLoading=!1,Qt.width&&Qt.height?Jt&&(window.createImageBitmap?(en.hasLoaded=!0,en.update(!0),window.createImageBitmap(Qt).then(function(tn){en.source=tn,en.emit("loaded",en)})):(this._sourceLoaded(),en.emit("loaded",en))):Jt&&this.emit("error",this)}},Zt.prototype._updateImageType=function(){if(this.imageUrl){var Qt=(0,Ht.decomposeDataUri)(this.imageUrl),Jt;if(Qt&&"image"===Qt.mediaType){var $t=Qt.subType.split("+")[0];if(!(Jt=(0,Ht.getUrlFileExtension)("."+$t)))throw new Error("Invalid image type in data URI.")}else(Jt=(0,Ht.getUrlFileExtension)(this.imageUrl))||(Jt="png");this.imageType=Jt}},Zt.prototype._loadSvgSource=function(){if("svg"===this.imageType){var Qt=(0,Ht.decomposeDataUri)(this.imageUrl);Qt?this._loadSvgSourceUsingDataUri(Qt):this._loadSvgSourceUsingXhr()}},Zt.prototype._loadSvgSourceUsingDataUri=function(Qt){var Jt;if("base64"===Qt.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");Jt=atob(Qt.data)}else Jt=Qt.data;this._loadSvgSourceUsingString(Jt)},Zt.prototype._loadSvgSourceUsingXhr=function(){var Qt=this,Jt=new XMLHttpRequest;Jt.onload=function(){if(Jt.readyState!==Jt.DONE||200!==Jt.status)throw new Error("Failed to load SVG using XHR.");Qt._loadSvgSourceUsingString(Jt.response)},Jt.onerror=function(){return Qt.emit("error",Qt)},Jt.open("GET",this.imageUrl,!0),Jt.send()},Zt.prototype._loadSvgSourceUsingString=function(Qt){var Jt=(0,Ht.getSvgSize)(Qt),$t=Jt.width,en=Jt.height;if(!$t||!en)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round($t*this.sourceScale),this.realHeight=Math.round(en*this.sourceScale),this._updateDimensions();var tn=document.createElement("canvas");tn.width=this.realWidth,tn.height=this.realHeight,tn._pixiId="canvas_"+(0,Ht.uid)(),tn.getContext("2d").drawImage(this.source,0,0,$t,en,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=tn,Zt.addToCache(this,tn._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},Zt.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},Zt.prototype.destroy=function(){this.imageUrl&&(delete Ht.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),Zt.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},Zt.prototype.dispose=function(){this.emit("dispose",this)},Zt.prototype.updateSourceImage=function(Qt){this.source.src=Qt,this.loadSource(this.source)},Zt.fromImage=function(Qt,Jt,$t,en){var tn=Ht.BaseTextureCache[Qt];if(!tn){var nn=new Image;void 0===Jt&&0!==Qt.indexOf("data:")?nn.crossOrigin=(0,zt.default)(Qt):Jt&&(nn.crossOrigin="string"==typeof Jt?Jt:"anonymous"),(tn=new Zt(nn,$t)).imageUrl=Qt,en&&(tn.sourceScale=en),tn.resolution=(0,Ht.getResolutionOfUrl)(Qt),nn.src=Qt,Zt.addToCache(tn,Qt)}return tn},Zt.fromCanvas=function(Qt,Jt){var $t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";Qt._pixiId||(Qt._pixiId=$t+"_"+(0,Ht.uid)());var en=Ht.BaseTextureCache[Qt._pixiId];return en||(en=new Zt(Qt,Jt),Zt.addToCache(en,Qt._pixiId)),en},Zt.from=function(Qt,Jt,$t){if("string"==typeof Qt)return Zt.fromImage(Qt,void 0,Jt,$t);if(Qt instanceof HTMLImageElement){var en=Qt.src,tn=Ht.BaseTextureCache[en];return tn||((tn=new Zt(Qt,Jt)).imageUrl=en,$t&&(tn.sourceScale=$t),tn.resolution=(0,Ht.getResolutionOfUrl)(en),Zt.addToCache(tn,en)),tn}return Qt instanceof HTMLCanvasElement?Zt.fromCanvas(Qt,Jt):Qt},Zt.addToCache=function(Qt,Jt){Jt&&(-1===Qt.textureCacheIds.indexOf(Jt)&&Qt.textureCacheIds.push(Jt),Ht.BaseTextureCache[Jt]&&console.warn("BaseTexture added to the cache with an id ["+Jt+"] that already had an entry"),Ht.BaseTextureCache[Jt]=Qt)},Zt.removeFromCache=function(Qt){if("string"==typeof Qt){var Jt=Ht.BaseTextureCache[Qt];if(Jt){var $t=Jt.textureCacheIds.indexOf(Qt);return-1<$t&&Jt.textureCacheIds.splice($t,1),delete Ht.BaseTextureCache[Qt],Jt}}else if(Qt&&Qt.textureCacheIds){for(var en=0;en<Qt.textureCacheIds.length;++en)delete Ht.BaseTextureCache[Qt.textureCacheIds[en]];return Qt.textureCacheIds.length=0,Qt}return null},Zt}(Wt.default);Gt.default=qt},{"../settings":101,"../utils":124,"../utils/determineCrossOrigin":123,"bit-twiddle":1,eventemitter3:3}],113:[function(Bt,Xt,Gt){function Yt(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}Gt.__esModule=!0;var Ht=Yt(Bt("./BaseRenderTexture")),jt=function(Wt){function zt(Vt,qt){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=null;if(!(Vt instanceof Ht.default)){var Zt=arguments[1],Qt=arguments[2],Jt=arguments[3],$t=arguments[4];console.warn("Please use RenderTexture.create("+Zt+", "+Qt+") instead of the ctor directly."),Kt=arguments[0],qt=null,Vt=new Ht.default(Zt,Qt,Jt,$t)}var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,Wt.call(this,Vt,qt));return en.legacyRenderer=Kt,en.valid=!0,en._updateUvs(),en}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,Wt),zt.prototype.resize=function(Vt,qt,Kt){this.valid=0<Vt&&0<qt,this._frame.width=this.orig.width=Vt,this._frame.height=this.orig.height=qt,Kt||this.baseTexture.resize(Vt,qt),this._updateUvs()},zt.create=function(Vt,qt,Kt,Zt){return new zt(new Ht.default(Vt,qt,Kt,Zt))},zt}(Yt(Bt("./Texture")).default);Gt.default=jt},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function zt(Vt,qt){for(var Kt=0,Zt;Kt<qt.length;Kt++)Zt=qt[Kt],Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Vt,Zt.key,Zt)}return function(Vt,qt,Kt){return qt&&zt(Vt.prototype,qt),Kt&&zt(Vt,Kt),Vt}}(),Ht=Bt("../"),jt=Bt("../utils"),Wt=function(){function zt(Vt,qt){var Kt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,zt),this.baseTexture=Vt,this.textures={},this.data=qt,this.resolution=this._updateResolution(Kt||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return Yt(zt,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),zt.prototype._updateResolution=function(Vt){var qt=this.data.meta.scale,Kt=(0,jt.getResolutionOfUrl)(Vt,null);return null===Kt&&(Kt=void 0===qt?1:parseFloat(qt)),1!==Kt&&(this.baseTexture.resolution=Kt,this.baseTexture.update()),Kt},zt.prototype.parse=function(Vt){this._batchIndex=0,this._callback=Vt,this._frameKeys.length<=zt.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},zt.prototype._processFrames=function(Vt){for(var qt=Vt,Kt=zt.BATCH_SIZE,Zt=this.baseTexture.sourceScale;qt-Vt<Kt&&qt<this._frameKeys.length;){var Qt=this._frameKeys[qt],Jt=this._frames[Qt].frame;if(Jt){var $t=null,en=null,tn=new Ht.Rectangle(0,0,Math.floor(this._frames[Qt].sourceSize.w*Zt)/this.resolution,Math.floor(this._frames[Qt].sourceSize.h*Zt)/this.resolution);$t=this._frames[Qt].rotated?new Ht.Rectangle(Math.floor(Jt.x*Zt)/this.resolution,Math.floor(Jt.y*Zt)/this.resolution,Math.floor(Jt.h*Zt)/this.resolution,Math.floor(Jt.w*Zt)/this.resolution):new Ht.Rectangle(Math.floor(Jt.x*Zt)/this.resolution,Math.floor(Jt.y*Zt)/this.resolution,Math.floor(Jt.w*Zt)/this.resolution,Math.floor(Jt.h*Zt)/this.resolution),this._frames[Qt].trimmed&&(en=new Ht.Rectangle(Math.floor(this._frames[Qt].spriteSourceSize.x*Zt)/this.resolution,Math.floor(this._frames[Qt].spriteSourceSize.y*Zt)/this.resolution,Math.floor(Jt.w*Zt)/this.resolution,Math.floor(Jt.h*Zt)/this.resolution)),this.textures[Qt]=new Ht.Texture(this.baseTexture,$t,tn,en,this._frames[Qt].rotated?2:0),Ht.Texture.addToCache(this.textures[Qt],Qt)}qt++}},zt.prototype._parseComplete=function(){var Vt=this._callback;this._callback=null,this._batchIndex=0,Vt.call(this,this.textures)},zt.prototype._nextBatch=function(){var Vt=this;this._processFrames(this._batchIndex*zt.BATCH_SIZE),this._batchIndex++,setTimeout(function(){Vt._batchIndex*zt.BATCH_SIZE<Vt._frameKeys.length?Vt._nextBatch():Vt._parseComplete()},0)},zt.prototype.destroy=function(){var Vt=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(var qt in this.textures)this.textures[qt].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,Vt&&this.baseTexture.destroy(),this.baseTexture=null},zt}();Gt.default=Wt},{"../":65,"../utils":124}],115:[function(Bt,Xt,Gt){function Yt($t){return $t&&$t.__esModule?$t:{default:$t}}function Ht($t){$t.destroy=function(){},$t.on=function(){},$t.once=function(){},$t.emit=function(){}}Gt.__esModule=!0;var jt=function(){function $t(en,tn){for(var nn=0,an;nn<tn.length;nn++)an=tn[nn],an.enumerable=an.enumerable||!1,an.configurable=!0,"value"in an&&(an.writable=!0),Object.defineProperty(en,an.key,an)}return function(en,tn,nn){return tn&&$t(en.prototype,tn),nn&&$t(en,nn),en}}(),Wt=Yt(Bt("./BaseTexture")),zt=Yt(Bt("./VideoBaseTexture")),Vt=Yt(Bt("./TextureUvs")),qt=Yt(Bt("eventemitter3")),Kt=Bt("../math"),Zt=Bt("../utils"),Qt=Yt(Bt("../settings")),Jt=function($t){function en(tn,nn,an,rn,on){!function(dn,ln){if(!(dn instanceof ln))throw new TypeError("Cannot call a class as a function")}(this,en);var sn=function(dn,ln){if(!dn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ln&&("object"==typeof ln||"function"==typeof ln)?ln:dn}(this,$t.call(this));if(sn.noFrame=!1,nn||(sn.noFrame=!0,nn=new Kt.Rectangle(0,0,1,1)),tn instanceof en&&(tn=tn.baseTexture),sn.baseTexture=tn,sn._frame=nn,sn.trim=rn,sn.valid=!1,sn.requiresUpdate=!1,sn._uvs=null,sn.orig=an||nn,sn._rotate=+(on||0),!0===on)sn._rotate=2;else if(0!=sn._rotate%2)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return tn.hasLoaded?(sn.noFrame&&(nn=new Kt.Rectangle(0,0,tn.width,tn.height),tn.on("update",sn.onBaseTextureUpdated,sn)),sn.frame=nn):tn.once("loaded",sn.onBaseTextureLoaded,sn),sn._updateID=0,sn.transform=null,sn.textureCacheIds=[],sn}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.update=function(){this.baseTexture.update()},en.prototype.onBaseTextureLoaded=function(tn){this._updateID++,this.frame=this.noFrame?new Kt.Rectangle(0,0,tn.width,tn.height):this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},en.prototype.onBaseTextureUpdated=function(tn){this._updateID++,this._frame.width=tn.width,this._frame.height=tn.height,this.emit("update",this)},en.prototype.destroy=function(tn){this.baseTexture&&(tn&&(Zt.TextureCache[this.baseTexture.imageUrl]&&en.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,en.removeFromCache(this),this.textureCacheIds=null},en.prototype.clone=function(){return new en(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},en.prototype._updateUvs=function(){this._uvs||(this._uvs=new Vt.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},en.fromImage=function(tn,nn,an,rn){var on=Zt.TextureCache[tn];return on||(on=new en(Wt.default.fromImage(tn,nn,an,rn)),en.addToCache(on,tn)),on},en.fromFrame=function(tn){var nn=Zt.TextureCache[tn];if(!nn)throw new Error("The frameId \""+tn+"\" does not exist in the texture cache");return nn},en.fromCanvas=function(tn,nn){var an=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";return new en(Wt.default.fromCanvas(tn,nn,an))},en.fromVideo=function(tn,nn){return"string"==typeof tn?en.fromVideoUrl(tn,nn):new en(zt.default.fromVideo(tn,nn))},en.fromVideoUrl=function(tn,nn){return new en(zt.default.fromUrl(tn,nn))},en.from=function(tn){if("string"==typeof tn){var nn=Zt.TextureCache[tn];return nn?nn:null===tn.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?en.fromImage(tn):en.fromVideoUrl(tn)}return tn instanceof HTMLImageElement?new en(Wt.default.from(tn)):tn instanceof HTMLCanvasElement?en.fromCanvas(tn,Qt.default.SCALE_MODE,"HTMLCanvasElement"):tn instanceof HTMLVideoElement?en.fromVideo(tn):tn instanceof Wt.default?new en(tn):tn},en.fromLoader=function(tn,nn,an){var rn=new Wt.default(tn,void 0,(0,Zt.getResolutionOfUrl)(nn)),on=new en(rn);return rn.imageUrl=nn,an||(an=nn),Wt.default.addToCache(on.baseTexture,an),en.addToCache(on,an),an!==nn&&(Wt.default.addToCache(on.baseTexture,nn),en.addToCache(on,nn)),on},en.addToCache=function(tn,nn){nn&&(-1===tn.textureCacheIds.indexOf(nn)&&tn.textureCacheIds.push(nn),Zt.TextureCache[nn]&&console.warn("Texture added to the cache with an id ["+nn+"] that already had an entry"),Zt.TextureCache[nn]=tn)},en.removeFromCache=function(tn){if("string"==typeof tn){var nn=Zt.TextureCache[tn];if(nn){var an=nn.textureCacheIds.indexOf(tn);return-1<an&&nn.textureCacheIds.splice(an,1),delete Zt.TextureCache[tn],nn}}else if(tn&&tn.textureCacheIds){for(var rn=0;rn<tn.textureCacheIds.length;++rn)Zt.TextureCache[tn.textureCacheIds[rn]]===tn&&delete Zt.TextureCache[tn.textureCacheIds[rn]];return tn.textureCacheIds.length=0,tn}return null},jt(en,[{key:"frame",get:function(){return this._frame},set:function(tn){this._frame=tn,this.noFrame=!1;var nn=tn.x,an=tn.y,rn=tn.width,on=tn.height,sn=nn+rn>this.baseTexture.width,dn=an+on>this.baseTexture.height;if(sn||dn){var ln=sn&&dn?"and":"or",un="X: "+nn+" + "+rn+" = "+(nn+rn)+" > "+this.baseTexture.width,pn="Y: "+an+" + "+on+" = "+(an+on)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+un+" "+ln+" "+pn)}this.valid=rn&&on&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=tn),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(tn){this._rotate=tn,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),en}(qt.default);Gt.default=Jt,Jt.EMPTY=new Jt(new Wt.default()),Ht(Jt.EMPTY),Ht(Jt.EMPTY.baseTexture),Jt.WHITE=function(){var $t=document.createElement("canvas");$t.width=10,$t.height=10;var en=$t.getContext("2d");return en.fillStyle="white",en.fillRect(0,0,10,10),new Jt(new Wt.default($t))}(),Ht(Jt.WHITE),Ht(Jt.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":124,"./BaseTexture":112,"./TextureUvs":116,"./VideoBaseTexture":117,eventemitter3:3}],116:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../math/GroupD8")),Ht=function(){function jt(){!function(Wt,zt){if(!(Wt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return jt.prototype.set=function(Wt,zt,Vt){var qt=zt.width,Kt=zt.height;if(Vt){var Zt=Wt.width/2/qt,Qt=Wt.height/2/Kt,Jt=Wt.x/qt+Zt,$t=Wt.y/Kt+Qt;Vt=Yt.default.add(Vt,Yt.default.NW),this.x0=Jt+Zt*Yt.default.uX(Vt),this.y0=$t+Qt*Yt.default.uY(Vt),Vt=Yt.default.add(Vt,2),this.x1=Jt+Zt*Yt.default.uX(Vt),this.y1=$t+Qt*Yt.default.uY(Vt),Vt=Yt.default.add(Vt,2),this.x2=Jt+Zt*Yt.default.uX(Vt),this.y2=$t+Qt*Yt.default.uY(Vt),Vt=Yt.default.add(Vt,2),this.x3=Jt+Zt*Yt.default.uX(Vt),this.y3=$t+Qt*Yt.default.uY(Vt)}else this.x0=Wt.x/qt,this.y0=Wt.y/Kt,this.x1=(Wt.x+Wt.width)/qt,this.y1=Wt.y/Kt,this.x2=(Wt.x+Wt.width)/qt,this.y2=(Wt.y+Wt.height)/Kt,this.x3=Wt.x/qt,this.y3=(Wt.y+Wt.height)/Kt;this.uvsUint32[0]=(65535&65535*this.y0)<<16|65535&65535*this.x0,this.uvsUint32[1]=(65535&65535*this.y1)<<16|65535&65535*this.x1,this.uvsUint32[2]=(65535&65535*this.y2)<<16|65535&65535*this.x2,this.uvsUint32[3]=(65535&65535*this.y3)<<16|65535&65535*this.x3},jt}();Gt.default=Ht},{"../math/GroupD8":66}],117:[function(Bt,Xt,Gt){function Yt(Kt,Zt){Zt||(Zt="video/"+Kt.substr(Kt.lastIndexOf(".")+1));var Qt=document.createElement("source");return Qt.src=Kt,Qt.type=Zt,Qt}Gt.__esModule=!0;var Ht=function(){function Kt(Zt,Qt){for(var Jt=0,$t;Jt<Qt.length;Jt++)$t=Qt[Jt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Zt,$t.key,$t)}return function(Zt,Qt,Jt){return Qt&&Kt(Zt.prototype,Qt),Jt&&Kt(Zt,Jt),Zt}}(),jt=function(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}(Bt("./BaseTexture")),Wt=Bt("../utils"),zt=Bt("../ticker"),Vt=Bt("../const"),qt=function(Kt){function Zt(Qt,Jt){if(function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Zt),!Qt)throw new Error("No video source element specified.");(Qt.readyState===Qt.HAVE_ENOUGH_DATA||Qt.readyState===Qt.HAVE_FUTURE_DATA)&&Qt.width&&Qt.height&&(Qt.complete=!0);var $t=function(en,tn){if(!en)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tn&&("object"==typeof tn||"function"==typeof tn)?tn:en}(this,Kt.call(this,Qt,Jt));return $t.width=Qt.videoWidth,$t.height=Qt.videoHeight,$t._autoUpdate=!0,$t._isAutoUpdating=!1,$t.autoPlay=!0,$t.update=$t.update.bind($t),$t._onCanPlay=$t._onCanPlay.bind($t),Qt.addEventListener("play",$t._onPlayStart.bind($t)),Qt.addEventListener("pause",$t._onPlayStop.bind($t)),$t.hasLoaded=!1,$t.__loaded=!1,$t._isSourceReady()?$t._onCanPlay():(Qt.addEventListener("canplay",$t._onCanPlay),Qt.addEventListener("canplaythrough",$t._onCanPlay)),$t}return function(Qt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Qt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Jt):Qt.__proto__=Jt)}(Zt,Kt),Zt.prototype._isSourcePlaying=function(){var Qt=this.source;return 0<Qt.currentTime&&!1===Qt.paused&&!1===Qt.ended&&2<Qt.readyState},Zt.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},Zt.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(zt.shared.add(this.update,this,Vt.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},Zt.prototype._onPlayStop=function(){this._isAutoUpdating&&(zt.shared.remove(this.update,this),this._isAutoUpdating=!1)},Zt.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},Zt.prototype.destroy=function(){this._isAutoUpdating&&zt.shared.remove(this.update,this),this.source&&this.source._pixiId&&(jt.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),Kt.prototype.destroy.call(this)},Zt.fromVideo=function(Qt,Jt){Qt._pixiId||(Qt._pixiId="video_"+(0,Wt.uid)());var $t=Wt.BaseTextureCache[Qt._pixiId];return $t||($t=new Zt(Qt,Jt),jt.default.addToCache($t,Qt._pixiId)),$t},Zt.fromUrl=function(Qt,Jt){var $t=document.createElement("video");if($t.setAttribute("webkit-playsinline",""),$t.setAttribute("playsinline",""),Array.isArray(Qt))for(var en=0;en<Qt.length;++en)$t.appendChild(Yt(Qt[en].src||Qt[en],Qt[en].mime));else $t.appendChild(Yt(Qt.src||Qt,Qt.mime));return $t.load(),Zt.fromVideo($t,Jt)},Ht(Zt,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(Qt){Qt!==this._autoUpdate&&(this._autoUpdate=Qt,!this._autoUpdate&&this._isAutoUpdating?(zt.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(zt.shared.add(this.update,this,Vt.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),Zt}(jt.default);Gt.default=qt,qt.fromUrls=qt.fromUrl},{"../const":46,"../ticker":120,"../utils":124,"./BaseTexture":112}],118:[function(Bt,Xt,Gt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Gt.__esModule=!0;var Ht=function(){function qt(Kt,Zt){for(var Qt=0,Jt;Qt<Zt.length;Qt++)Jt=Zt[Qt],Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Kt,Jt.key,Jt)}return function(Kt,Zt,Qt){return Zt&&qt(Kt.prototype,Zt),Qt&&qt(Kt,Qt),Kt}}(),jt=Yt(Bt("../settings")),Wt=Bt("../const"),zt=Yt(Bt("./TickerListener")),Vt=function(){function qt(){var Kt=this;!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,qt),this._head=new zt.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/jt.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(Zt){Kt._requestId=null,Kt.started&&(Kt.update(Zt),Kt.started&&null===Kt._requestId&&Kt._head.next&&(Kt._requestId=requestAnimationFrame(Kt._tick)))}}return qt.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},qt.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},qt.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},qt.prototype.add=function(Kt,Zt){var Qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Wt.UPDATE_PRIORITY.NORMAL;return this._addListener(new zt.default(Kt,Zt,Qt))},qt.prototype.addOnce=function(Kt,Zt){var Qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:Wt.UPDATE_PRIORITY.NORMAL;return this._addListener(new zt.default(Kt,Zt,Qt,!0))},qt.prototype._addListener=function(Kt){var Zt=this._head.next,Qt=this._head;if(Zt){for(;Zt;){if(Kt.priority>Zt.priority){Kt.connect(Qt);break}Qt=Zt,Zt=Zt.next}Kt.previous||Kt.connect(Qt)}else Kt.connect(Qt);return this._startIfPossible(),this},qt.prototype.remove=function(Kt,Zt){for(var Qt=this._head.next;Qt;)Qt=Qt.match(Kt,Zt)?Qt.destroy():Qt.next;return this._head.next||this._cancelIfNeeded(),this},qt.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},qt.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},qt.prototype.destroy=function(){this.stop();for(var Kt=this._head.next;Kt;)Kt=Kt.destroy(!0);this._head.destroy(),this._head=null},qt.prototype.update=function(){var Kt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),Zt;if(Kt>this.lastTime){(Zt=this.elapsedMS=Kt-this.lastTime)>this._maxElapsedMS&&(Zt=this._maxElapsedMS),this.deltaTime=Zt*jt.default.TARGET_FPMS*this.speed;for(var Qt=this._head,Jt=Qt.next;Jt;)Jt=Jt.emit(this.deltaTime);Qt.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=Kt},Ht(qt,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(Kt){var Zt=Math.min(Math.max(0,Kt)/1e3,jt.default.TARGET_FPMS);this._maxElapsedMS=1/Zt}}]),qt}();Gt.default=Vt},{"../const":46,"../settings":101,"./TickerListener":119}],119:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Ht(jt){var Wt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,zt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Vt=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.fn=jt,this.context=Wt,this.priority=zt,this.once=Vt,this.next=null,this.previous=null,this._destroyed=!1}return Ht.prototype.match=function(jt,Wt){return Wt=Wt||null,this.fn===jt&&this.context===Wt},Ht.prototype.emit=function(jt){this.fn&&(this.context?this.fn.call(this.context,jt):this.fn(jt));var Wt=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),Wt},Ht.prototype.connect=function(jt){this.previous=jt,jt.next&&(jt.next.previous=this),this.next=jt.next,jt.next=this},Ht.prototype.destroy=function(){var jt=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var Wt=this.previous;return this.next=jt?null:Wt,this.previous=null,Wt},Ht}();Gt.default=Yt},{}],120:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.Ticker=Gt.shared=void 0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./Ticker")),Ht=new Yt.default;Ht.autoStart=!0,Ht.destroy=function(){},Gt.shared=Ht,Gt.Ticker=Yt.default},{"./Ticker":118}],121:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],122:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(Yt){for(var Ht=6*Yt,jt=new Uint16Array(Ht),Wt=0,zt=0;Wt<Ht;Wt+=6,zt+=4)jt[Wt+0]=zt+0,jt[Wt+1]=zt+1,jt[Wt+2]=zt+2,jt[Wt+3]=zt+0,jt[Wt+4]=zt+2,jt[Wt+5]=zt+3;return jt}},{}],123:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(jt){var Wt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===jt.indexOf("data:"))return"";Wt=Wt||window.location,Ht||(Ht=document.createElement("a")),Ht.href=jt;var zt=!(jt=Yt.default.parse(Ht.href)).port&&""===Wt.port||jt.port===Wt.port;return jt.hostname===Wt.hostname&&zt&&jt.protocol===Wt.protocol?"":"anonymous"};var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("url")),Ht=void 0},{url:29}],124:[function(Bt,Xt,Gt){function Yt(an){if(an&&an.__esModule)return an;var rn={};if(null!=an)for(var on in an)Object.prototype.hasOwnProperty.call(an,on)&&(rn[on]=an[on]);return rn.default=an,rn}function Ht(an){return an&&an.__esModule?an:{default:an}}Gt.__esModule=!0,Gt.premultiplyBlendMode=Gt.BaseTextureCache=Gt.TextureCache=Gt.mixins=Gt.pluginTarget=Gt.EventEmitter=Gt.removeItems=Gt.isMobile=void 0,Gt.uid=function(){return++Jt},Gt.hex2rgb=function(an,rn){return rn=rn||[],rn[0]=(255&an>>16)/255,rn[1]=(255&an>>8)/255,rn[2]=(255&an)/255,rn},Gt.hex2string=function(an){return an=an.toString(16),"#"+(an="000000".substr(0,6-an.length)+an)},Gt.rgb2hex=function(an){return(255*an[0]<<16)+(255*an[1]<<8)+(0|255*an[2])},Gt.getResolutionOfUrl=function(an,rn){var on=Wt.default.RETINA_PREFIX.exec(an);return on?parseFloat(on[1]):void 0===rn?1:rn},Gt.decomposeDataUri=function(an){var rn=jt.DATA_URI.exec(an);if(rn)return{mediaType:rn[1]?rn[1].toLowerCase():void 0,subType:rn[2]?rn[2].toLowerCase():void 0,encoding:rn[3]?rn[3].toLowerCase():void 0,data:rn[4]}},Gt.getUrlFileExtension=function(an){var rn=jt.URL_FILE_EXTENSION.exec(an);if(rn)return rn[1].toLowerCase()},Gt.getSvgSize=function(an){var rn=jt.SVG_SIZE.exec(an),on={};return rn&&(on[rn[1]]=Math.round(parseFloat(rn[3])),on[rn[5]]=Math.round(parseFloat(rn[7]))),on},Gt.skipHello=function(){$t=!0},Gt.sayHello=function(an){if(!$t){if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var rn=["\n %c %c %c PixiJS "+jt.VERSION+" - \u2730 "+an+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,rn)}else window.console&&window.console.log("PixiJS "+jt.VERSION+" - "+an+" - http://www.pixijs.com/");$t=!0}},Gt.isWebGLSupported=function(){var an={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var rn=document.createElement("canvas"),on=rn.getContext("webgl",an)||rn.getContext("experimental-webgl",an),sn=on&&on.getContextAttributes().stencil;if(on){var dn=on.getExtension("WEBGL_lose_context");dn&&dn.loseContext()}return on=null,sn}catch(ln){return!1}},Gt.sign=function(an){return 0===an?0:0>an?-1:1},Gt.destroyTextureCache=function(){for(var an in en)en[an].destroy();for(an in tn)tn[an].destroy()},Gt.clearTextureCache=function(){for(var an in en)delete en[an];for(an in tn)delete tn[an]},Gt.correctBlendMode=function(an,rn){return nn[rn?1:0][an]},Gt.premultiplyTint=function(an,rn){if(1===rn)return(255*rn<<24)+an;if(0===rn)return 0;var on=255&an>>16,sn=255&an>>8,dn=255&an;return on=0|on*rn+.5,sn=0|sn*rn+.5,dn=0|dn*rn+.5,(255*rn<<24)+(on<<16)+(sn<<8)+dn},Gt.premultiplyRgba=function(an,rn,on,sn){return on=on||new Float32Array(4),sn||void 0===sn?(on[0]=an[0]*rn,on[1]=an[1]*rn,on[2]=an[2]*rn):(on[0]=an[0],on[1]=an[1],on[2]=an[2]),on[3]=rn,on},Gt.premultiplyTintToRgba=function(an,rn,on,sn){return on=on||new Float32Array(4),on[0]=(255&an>>16)/255,on[1]=(255&an>>8)/255,on[2]=(255&an)/255,(sn||void 0===sn)&&(on[0]*=rn,on[1]*=rn,on[2]*=rn),on[3]=rn,on};var jt=Bt("../const"),Wt=Ht(Bt("../settings")),zt=Ht(Bt("eventemitter3")),Vt=Ht(Bt("./pluginTarget")),qt=Yt(Bt("./mixin")),Kt=Yt(Bt("ismobilejs")),Zt=Ht(Bt("remove-array-items")),Qt=Ht(Bt("./mapPremultipliedBlendModes")),Jt=0,$t=!1;Gt.isMobile=Kt,Gt.removeItems=Zt.default,Gt.EventEmitter=zt.default,Gt.pluginTarget=Vt.default,Gt.mixins=qt;var en=Gt.TextureCache=Object.create(null),tn=Gt.BaseTextureCache=Object.create(null),nn=Gt.premultiplyBlendMode=(0,Qt.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":125,"./mixin":127,"./pluginTarget":128,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],125:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(){for(var Ht=[],jt=[],Wt=0;32>Wt;Wt++)Ht[Wt]=Wt,jt[Wt]=Wt;Ht[Yt.BLEND_MODES.NORMAL_NPM]=Yt.BLEND_MODES.NORMAL,Ht[Yt.BLEND_MODES.ADD_NPM]=Yt.BLEND_MODES.ADD,Ht[Yt.BLEND_MODES.SCREEN_NPM]=Yt.BLEND_MODES.SCREEN,jt[Yt.BLEND_MODES.NORMAL]=Yt.BLEND_MODES.NORMAL_NPM,jt[Yt.BLEND_MODES.ADD]=Yt.BLEND_MODES.ADD_NPM,jt[Yt.BLEND_MODES.SCREEN]=Yt.BLEND_MODES.SCREEN_NPM;var zt=[];return zt.push(jt),zt.push(Ht),zt};var Yt=Bt("../const")},{"../const":46}],126:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(Ht){return Yt.default.tablet||Yt.default.phone?4:Ht};var Yt=function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("ismobilejs"))},{ismobilejs:4}],127:[function(Bt,Xt,Gt){function Yt(jt,Wt){if(jt&&Wt)for(var zt=Object.keys(Wt),Vt=0,qt;Vt<zt.length;++Vt)qt=zt[Vt],Object.defineProperty(jt,qt,Object.getOwnPropertyDescriptor(Wt,qt))}Gt.__esModule=!0,Gt.mixin=Yt,Gt.delayMixin=function(jt,Wt){Ht.push(jt,Wt)},Gt.performMixins=function(){for(var jt=0;jt<Ht.length;jt+=2)Yt(Ht[jt],Ht[jt+1]);Ht.length=0};var Ht=[]},{}],128:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default={mixin:function(Yt){!function(Ht){Ht.__plugins={},Ht.registerPlugin=function(jt,Wt){Ht.__plugins[jt]=Wt},Ht.prototype.initPlugins=function(){for(var jt in this.plugins=this.plugins||{},Ht.__plugins)this.plugins[jt]=new Ht.__plugins[jt](this)},Ht.prototype.destroyPlugins=function(){for(var jt in this.plugins)this.plugins[jt].destroy(),this.plugins[jt]=null;this.plugins=null}}(Yt)}}},{}],129:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(Yt){var Ht=Yt.width,jt=Yt.height,Wt=Yt.getContext("2d"),zt=Wt.getImageData(0,0,Ht,jt).data,Vt=zt.length,qt={top:null,left:null,right:null,bottom:null},Kt,Zt,Qt;for(Kt=0;Kt<Vt;Kt+=4)0!==zt[Kt+3]&&(Zt=Kt/4%Ht,Qt=~~(Kt/4/Ht),null===qt.top&&(qt.top=Qt),null===qt.left?qt.left=Zt:Zt<qt.left&&(qt.left=Zt),null===qt.right?qt.right=Zt+1:qt.right<Zt&&(qt.right=Zt+1),null===qt.bottom?qt.bottom=Qt:qt.bottom<Qt&&(qt.bottom=Qt));return Ht=qt.right-qt.left,{height:jt=qt.bottom-qt.top+1,width:Ht,data:Wt.getImageData(qt.left,qt.top,Ht,jt)}}},{}],130:[function(Bt,Xt,Gt){function Yt(Ht){var jt=new Error().stack;void 0===jt?console.warn("Deprecation Warning: ",Ht):(jt=jt.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",Ht),console.warn(jt),console.groupEnd()):(console.warn("Deprecation Warning: ",Ht),console.warn(jt)))}Gt.__esModule=!0,Gt.default=function(Ht){var jt=Ht.mesh,Wt=Ht.particles,zt=Ht.extras,Vt=Ht.filters,qt=Ht.prepare,Kt=Ht.loaders,Zt=Ht.interaction;Object.defineProperties(Ht,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return Yt("You do not need to use a PIXI Stage any more, you can simply render any container."),Ht.Container}},DisplayObjectContainer:{get:function(){return Yt("DisplayObjectContainer has been shortened to Container, please use Container from now on."),Ht.Container}},Strip:{get:function(){return Yt("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),jt.Mesh}},Rope:{get:function(){return Yt("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),jt.Rope}},ParticleContainer:{get:function(){return Yt("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),Wt.ParticleContainer}},MovieClip:{get:function(){return Yt("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),zt.AnimatedSprite}},TilingSprite:{get:function(){return Yt("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),zt.TilingSprite}},BitmapText:{get:function(){return Yt("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),zt.BitmapText}},blendModes:{get:function(){return Yt("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),Ht.BLEND_MODES}},scaleModes:{get:function(){return Yt("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),Ht.SCALE_MODES}},BaseTextureCache:{get:function(){return Yt("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),Ht.utils.BaseTextureCache}},TextureCache:{get:function(){return Yt("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),Ht.utils.TextureCache}},math:{get:function(){return Yt("The math namespace is deprecated, please access members already accessible on PIXI."),Ht}},AbstractFilter:{get:function(){return Yt("AstractFilter has been renamed to Filter, please use PIXI.Filter"),Ht.Filter}},TransformManual:{get:function(){return Yt("TransformManual has been renamed to TransformBase, please update your pixi-spine"),Ht.TransformBase}},TARGET_FPMS:{get:function(){return Yt("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),Ht.settings.TARGET_FPMS},set:function(an){Yt("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),Ht.settings.TARGET_FPMS=an}},FILTER_RESOLUTION:{get:function(){return Yt("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),Ht.settings.FILTER_RESOLUTION},set:function(an){Yt("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),Ht.settings.FILTER_RESOLUTION=an}},RESOLUTION:{get:function(){return Yt("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),Ht.settings.RESOLUTION},set:function(an){Yt("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),Ht.settings.RESOLUTION=an}},MIPMAP_TEXTURES:{get:function(){return Yt("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),Ht.settings.MIPMAP_TEXTURES},set:function(an){Yt("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),Ht.settings.MIPMAP_TEXTURES=an}},SPRITE_BATCH_SIZE:{get:function(){return Yt("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),Ht.settings.SPRITE_BATCH_SIZE},set:function(an){Yt("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),Ht.settings.SPRITE_BATCH_SIZE=an}},SPRITE_MAX_TEXTURES:{get:function(){return Yt("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),Ht.settings.SPRITE_MAX_TEXTURES},set:function(an){Yt("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),Ht.settings.SPRITE_MAX_TEXTURES=an}},RETINA_PREFIX:{get:function(){return Yt("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),Ht.settings.RETINA_PREFIX},set:function(an){Yt("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),Ht.settings.RETINA_PREFIX=an}},DEFAULT_RENDER_OPTIONS:{get:function(){return Yt("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),Ht.settings.RENDER_OPTIONS}}});for(var Qt=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],Jt=function(an){var rn=Qt[an];Object.defineProperty(Ht[rn.parent],"DEFAULT",{get:function(){return Yt("PIXI."+rn.parent+".DEFAULT has been deprecated, please use PIXI.settings."+rn.target),Ht.settings[rn.target]},set:function(on){Yt("PIXI."+rn.parent+".DEFAULT has been deprecated, please use PIXI.settings."+rn.target),Ht.settings[rn.target]=on}})},$t=0;$t<Qt.length;$t++)Jt($t);Object.defineProperties(Ht.settings,{PRECISION:{get:function(){return Yt("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),Ht.settings.PRECISION_FRAGMENT},set:function(an){Yt("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),Ht.settings.PRECISION_FRAGMENT=an}}}),zt.AnimatedSprite&&Object.defineProperties(zt,{MovieClip:{get:function(){return Yt("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),zt.AnimatedSprite}}}),Ht.DisplayObject.prototype.generateTexture=function(an,rn,on){return Yt("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),an.generateTexture(this,rn,on)},Ht.Graphics.prototype.generateTexture=function(an,rn){return Yt("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(an,rn)},Ht.RenderTexture.prototype.render=function(an,rn,on,sn){this.legacyRenderer.render(an,this,on,rn,!sn),Yt("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},Ht.RenderTexture.prototype.getImage=function(an){return Yt("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(an)},Ht.RenderTexture.prototype.getBase64=function(an){return Yt("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(an)},Ht.RenderTexture.prototype.getCanvas=function(an){return Yt("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(an)},Ht.RenderTexture.prototype.getPixels=function(an){return Yt("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(an)},Ht.Sprite.prototype.setTexture=function(an){this.texture=an,Yt("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},zt.BitmapText&&(zt.BitmapText.prototype.setText=function(an){this.text=an,Yt("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),Ht.Text.prototype.setText=function(an){this.text=an,Yt("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},Ht.Text.calculateFontProperties=function(an){return Yt("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),Ht.TextMetrics.measureFont(an)},Object.defineProperties(Ht.Text,{fontPropertiesCache:{get:function(){return Yt("Text.fontPropertiesCache is deprecated"),Ht.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return Yt("Text.fontPropertiesCanvas is deprecated"),Ht.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return Yt("Text.fontPropertiesContext is deprecated"),Ht.TextMetrics._context}}}),Ht.Text.prototype.setStyle=function(an){this.style=an,Yt("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},Ht.Text.prototype.determineFontProperties=function(an){return Yt("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),Ht.TextMetrics.measureFont(an)},Ht.Text.getFontStyle=function(an){return Yt("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(an=an||{})instanceof Ht.TextStyle||(an=new Ht.TextStyle(an)),an.toFontString()},Object.defineProperties(Ht.TextStyle.prototype,{font:{get:function(){Yt("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var an="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+an+" "+this._fontFamily},set:function(an){Yt("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),this._fontStyle=1<an.indexOf("italic")?"italic":-1<an.indexOf("oblique")?"oblique":"normal",this._fontVariant=-1<an.indexOf("small-caps")?"small-caps":"normal";var rn=an.split(" "),on=-1;this._fontSize=26;for(var sn=0;sn<rn.length;++sn)if(rn[sn].match(/(px|pt|em|%)/)){on=sn,this._fontSize=rn[sn];break}this._fontWeight="normal";for(var dn=0;dn<on;++dn)if(rn[dn].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=rn[dn];break}if(-1<on&&on<rn.length-1){this._fontFamily="";for(var ln=on+1;ln<rn.length;++ln)this._fontFamily+=rn[ln]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),Ht.Texture.prototype.setFrame=function(an){this.frame=an,Yt("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},Ht.Texture.addTextureToCache=function(an,rn){Ht.Texture.addToCache(an,rn),Yt("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},Ht.Texture.removeTextureFromCache=function(an){return Yt("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),Ht.BaseTexture.removeFromCache(an),Ht.Texture.removeFromCache(an)},Object.defineProperties(Vt,{AbstractFilter:{get:function(){return Yt("AstractFilter has been renamed to Filter, please use PIXI.Filter"),Ht.AbstractFilter}},SpriteMaskFilter:{get:function(){return Yt("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),Ht.SpriteMaskFilter}}}),Ht.utils.uuid=function(){return Yt("utils.uuid() is deprecated, please use utils.uid() from now on."),Ht.utils.uid()},Ht.utils.canUseNewCanvasBlendModes=function(){return Yt("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),Ht.CanvasTinter.canUseMultiply};var en=!0;if(Object.defineProperty(Ht.utils,"_saidHello",{set:function(an){an&&(Yt("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),en=an},get:function(){return en}}),qt.BasePrepare&&(qt.BasePrepare.prototype.register=function(an,rn){return Yt("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),an&&this.registerFindHook(an),rn&&this.registerUploadHook(rn),this}),qt.canvas&&Object.defineProperty(qt.canvas,"UPLOADS_PER_FRAME",{set:function(){Yt("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return Yt("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),qt.webgl&&Object.defineProperty(qt.webgl,"UPLOADS_PER_FRAME",{set:function(){Yt("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return Yt("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Kt.Loader){var tn=Kt.Resource,nn=Kt.Loader;Object.defineProperties(tn.prototype,{isJson:{get:function(){return Yt("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===tn.TYPE.JSON}},isXml:{get:function(){return Yt("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===tn.TYPE.XML}},isImage:{get:function(){return Yt("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===tn.TYPE.IMAGE}},isAudio:{get:function(){return Yt("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===tn.TYPE.AUDIO}},isVideo:{get:function(){return Yt("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===tn.TYPE.VIDEO}}}),Object.defineProperties(nn.prototype,{before:{get:function(){return Yt("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return Yt("The after() method is deprecated, please use use()."),this.use}}})}Zt.interactiveTarget&&Object.defineProperty(Zt.interactiveTarget,"defaultCursor",{set:function(an){Yt("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=an},get:function(){return Yt("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),Zt.InteractionManager&&(Object.defineProperty(Zt.InteractionManager,"defaultCursorStyle",{set:function(an){Yt("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=an},get:function(){return Yt("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(Zt.InteractionManager,"currentCursorStyle",{set:function(an){Yt("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=an},get:function(){return Yt("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}},{}],131:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Wt){if(Wt&&Wt.__esModule)return Wt;var zt={};if(null!=Wt)for(var Vt in Wt)Object.prototype.hasOwnProperty.call(Wt,Vt)&&(zt[Vt]=Wt[Vt]);return zt.default=Wt,zt}(Bt("../../core")),Ht=new Yt.Rectangle,jt=function(){function Wt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.renderer=zt,zt.extract=this}return Wt.prototype.image=function(zt){var Vt=new Image;return Vt.src=this.base64(zt),Vt},Wt.prototype.base64=function(zt){return this.canvas(zt).toDataURL()},Wt.prototype.canvas=function(zt){var Vt=this.renderer,qt,Kt,Zt,Qt;zt&&(Qt=zt instanceof Yt.RenderTexture?zt:Vt.generateTexture(zt)),Qt?(qt=Qt.baseTexture._canvasRenderTarget.context,Kt=Qt.baseTexture._canvasRenderTarget.resolution,Zt=Qt.frame):(qt=Vt.rootContext,(Zt=Ht).width=this.renderer.width,Zt.height=this.renderer.height);var Jt=Zt.width*Kt,$t=Zt.height*Kt,en=new Yt.CanvasRenderTarget(Jt,$t),tn=qt.getImageData(Zt.x*Kt,Zt.y*Kt,Jt,$t);return en.context.putImageData(tn,0,0),en.canvas},Wt.prototype.pixels=function(zt){var Vt=this.renderer,qt,Kt,Zt,Qt;return zt&&(Qt=zt instanceof Yt.RenderTexture?zt:Vt.generateTexture(zt)),Qt?(qt=Qt.baseTexture._canvasRenderTarget.context,Kt=Qt.baseTexture._canvasRenderTarget.resolution,Zt=Qt.frame):(qt=Vt.rootContext,(Zt=Ht).width=Vt.width,Zt.height=Vt.height),qt.getImageData(0,0,Zt.width*Kt,Zt.height*Kt).data},Wt.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Wt}();Gt.default=jt,Yt.CanvasRenderer.registerPlugin("extract",jt)},{"../../core":65}],132:[function(Bt,Xt,Gt){function Yt(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}Gt.__esModule=!0;var Ht=Bt("./webgl/WebGLExtract");Object.defineProperty(Gt,"webgl",{enumerable:!0,get:function(){return Yt(Ht).default}});var jt=Bt("./canvas/CanvasExtract");Object.defineProperty(Gt,"canvas",{enumerable:!0,get:function(){return Yt(jt).default}})},{"./canvas/CanvasExtract":131,"./webgl/WebGLExtract":133}],133:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Wt){if(Wt&&Wt.__esModule)return Wt;var zt={};if(null!=Wt)for(var Vt in Wt)Object.prototype.hasOwnProperty.call(Wt,Vt)&&(zt[Vt]=Wt[Vt]);return zt.default=Wt,zt}(Bt("../../core")),Ht=new Yt.Rectangle,jt=function(){function Wt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.renderer=zt,zt.extract=this}return Wt.prototype.image=function(zt){var Vt=new Image;return Vt.src=this.base64(zt),Vt},Wt.prototype.base64=function(zt){return this.canvas(zt).toDataURL()},Wt.prototype.canvas=function(zt){var Vt=this.renderer,qt,Kt,Zt,Qt=!1,Jt;zt&&(Jt=zt instanceof Yt.RenderTexture?zt:this.renderer.generateTexture(zt)),Jt?(Kt=(qt=Jt.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,Zt=Jt.frame,Qt=!1):(Kt=(qt=this.renderer.rootRenderTarget).resolution,Qt=!0,(Zt=Ht).width=qt.size.width,Zt.height=qt.size.height);var $t=Zt.width*Kt,en=Zt.height*Kt,tn=new Yt.CanvasRenderTarget($t,en);if(qt){Vt.bindRenderTarget(qt);var nn=new Uint8Array(4*$t*en),an=Vt.gl;an.readPixels(Zt.x*Kt,Zt.y*Kt,$t,en,an.RGBA,an.UNSIGNED_BYTE,nn);var rn=tn.context.getImageData(0,0,$t,en);rn.data.set(nn),tn.context.putImageData(rn,0,0),Qt&&(tn.context.scale(1,-1),tn.context.drawImage(tn.canvas,0,-en))}return tn.canvas},Wt.prototype.pixels=function(zt){var Vt=this.renderer,qt,Kt,Zt,Qt;zt&&(Qt=zt instanceof Yt.RenderTexture?zt:this.renderer.generateTexture(zt)),Qt?(Kt=(qt=Qt.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,Zt=Qt.frame):(Kt=(qt=this.renderer.rootRenderTarget).resolution,(Zt=Ht).width=qt.size.width,Zt.height=qt.size.height);var Jt=Zt.width*Kt,$t=Zt.height*Kt,en=new Uint8Array(4*Jt*$t);if(qt){Vt.bindRenderTarget(qt);var tn=Vt.gl;tn.readPixels(Zt.x*Kt,Zt.y*Kt,Jt,$t,tn.RGBA,tn.UNSIGNED_BYTE,en)}return en},Wt.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},Wt}();Gt.default=jt,Yt.WebGLRenderer.registerPlugin("extract",jt)},{"../../core":65}],134:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=function(Wt){if(Wt&&Wt.__esModule)return Wt;var zt={};if(null!=Wt)for(var Vt in Wt)Object.prototype.hasOwnProperty.call(Wt,Vt)&&(zt[Vt]=Wt[Vt]);return zt.default=Wt,zt}(Bt("../core")),jt=function(Wt){function zt(Vt,qt){!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=function(Zt,Qt){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt&&("object"==typeof Qt||"function"==typeof Qt)?Qt:Zt}(this,Wt.call(this,Vt[0]instanceof Ht.Texture?Vt[0]:Vt[0].texture));return Kt._textures=null,Kt._durations=null,Kt.textures=Vt,Kt._autoUpdate=!1!==qt,Kt.animationSpeed=1,Kt.loop=!0,Kt.onComplete=null,Kt.onFrameChange=null,Kt.onLoop=null,Kt._currentTime=0,Kt.playing=!1,Kt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,Wt),zt.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&Ht.ticker.shared.remove(this.update,this))},zt.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&Ht.ticker.shared.add(this.update,this,Ht.UPDATE_PRIORITY.HIGH))},zt.prototype.gotoAndStop=function(Vt){this.stop();var qt=this.currentFrame;this._currentTime=Vt,qt!==this.currentFrame&&this.updateTexture()},zt.prototype.gotoAndPlay=function(Vt){var qt=this.currentFrame;this._currentTime=Vt,qt!==this.currentFrame&&this.updateTexture(),this.play()},zt.prototype.update=function(Vt){var qt=this.animationSpeed*Vt,Kt=this.currentFrame;if(null!==this._durations){var Zt=this._currentTime%1*this._durations[this.currentFrame];for(Zt+=1e3*(qt/60);0>Zt;)this._currentTime--,Zt+=this._durations[this.currentFrame];var Qt=Math.sign(this.animationSpeed*Vt);for(this._currentTime=Math.floor(this._currentTime);Zt>=this._durations[this.currentFrame];)Zt-=this._durations[this.currentFrame]*Qt,this._currentTime+=Qt;this._currentTime+=Zt/this._durations[this.currentFrame]}else this._currentTime+=qt;0>this._currentTime&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):Kt!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<Kt?this.onLoop():0>this.animationSpeed&&this.currentFrame>Kt&&this.onLoop()),this.updateTexture())},zt.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},zt.prototype.destroy=function(Vt){this.stop(),Wt.prototype.destroy.call(this,Vt)},zt.fromFrames=function(Vt){for(var qt=[],Kt=0;Kt<Vt.length;++Kt)qt.push(Ht.Texture.fromFrame(Vt[Kt]));return new zt(qt)},zt.fromImages=function(Vt){for(var qt=[],Kt=0;Kt<Vt.length;++Kt)qt.push(Ht.Texture.fromImage(Vt[Kt]));return new zt(qt)},Yt(zt,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(Vt){if(Vt[0]instanceof Ht.Texture)this._textures=Vt,this._durations=null;else{this._textures=[],this._durations=[];for(var qt=0;qt<Vt.length;qt++)this._textures.push(Vt[qt].texture),this._durations.push(Vt[qt].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var Vt=Math.floor(this._currentTime)%this._textures.length;return 0>Vt&&(Vt+=this._textures.length),Vt}}]),zt}(Ht.Sprite);Gt.default=jt},{"../core":65}],135:[function(Bt,Xt,Gt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Gt.__esModule=!0;var Ht=function(){function qt(Kt,Zt){for(var Qt=0,Jt;Qt<Zt.length;Qt++)Jt=Zt[Qt],Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Kt,Jt.key,Jt)}return function(Kt,Zt,Qt){return Zt&&qt(Kt.prototype,Zt),Qt&&qt(Kt,Qt),Kt}}(),jt=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Zt in qt)Object.prototype.hasOwnProperty.call(qt,Zt)&&(Kt[Zt]=qt[Zt]);return Kt.default=qt,Kt}(Bt("../core")),Wt=Yt(Bt("../core/math/ObservablePoint")),zt=Yt(Bt("../core/settings")),Vt=function(qt){function Kt(Zt){var Qt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Kt);var Jt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,qt.call(this));return Jt._textWidth=0,Jt._textHeight=0,Jt._glyphs=[],Jt._font={tint:void 0===Qt.tint?16777215:Qt.tint,align:Qt.align||"left",name:null,size:0},Jt.font=Qt.font,Jt._text=Zt,Jt._maxWidth=0,Jt._maxLineHeight=0,Jt._anchor=new Wt.default(function(){Jt.dirty=!0},Jt,0,0),Jt.dirty=!1,Jt.updateText(),Jt}return function(Zt,Qt){if("function"!=typeof Qt&&null!==Qt)throw new TypeError("Super expression must either be null or a function, not "+typeof Qt);Zt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),Qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,Qt):Zt.__proto__=Qt)}(Kt,qt),Kt.prototype.updateText=function(){for(var Zt=Kt.fonts[this._font.name],Qt=this._font.size/Zt.size,Jt=new jt.Point,$t=[],en=[],tn=null,nn=0,an=0,rn=0,on=-1,sn=0,dn=0,ln=0,un=0,pn;un<this.text.length;un++)if(pn=this.text.charCodeAt(un),/(\s)/.test(this.text.charAt(un))&&(on=un,sn=nn),/(?:\r\n|\r|\n)/.test(this.text.charAt(un)))en.push(nn),an=Math.max(an,nn),rn++,Jt.x=0,Jt.y+=Zt.lineHeight,tn=null;else if(-1!==on&&0<this._maxWidth&&Jt.x*Qt>this._maxWidth)jt.utils.removeItems($t,on-dn,un-on),un=on,on=-1,++dn,en.push(sn),an=Math.max(an,sn),rn++,Jt.x=0,Jt.y+=Zt.lineHeight,tn=null;else{var cn=Zt.chars[pn];cn&&(tn&&cn.kerning[tn]&&(Jt.x+=cn.kerning[tn]),$t.push({texture:cn.texture,line:rn,charCode:pn,position:new jt.Point(Jt.x+cn.xOffset,Jt.y+cn.yOffset)}),nn=Jt.x+(cn.texture.width+cn.xOffset),Jt.x+=cn.xAdvance,ln=Math.max(ln,cn.yOffset+cn.texture.height),tn=pn)}en.push(nn),an=Math.max(an,nn);for(var hn=[],fn=0,gn;fn<=rn;fn++)gn=0,"right"===this._font.align?gn=an-en[fn]:"center"===this._font.align&&(gn=(an-en[fn])/2),hn.push(gn);for(var mn=$t.length,yn=this.tint,_n=0,bn;_n<mn;_n++)bn=this._glyphs[_n],bn?bn.texture=$t[_n].texture:(bn=new jt.Sprite($t[_n].texture),this._glyphs.push(bn)),bn.position.x=($t[_n].position.x+hn[$t[_n].line])*Qt,bn.position.y=$t[_n].position.y*Qt,bn.scale.x=bn.scale.y=Qt,bn.tint=yn,bn.parent||this.addChild(bn);for(var xn=mn;xn<this._glyphs.length;++xn)this.removeChild(this._glyphs[xn]);if(this._textWidth=an*Qt,this._textHeight=(Jt.y+Zt.lineHeight)*Qt,0!==this.anchor.x||0!==this.anchor.y)for(var vn=0;vn<mn;vn++)this._glyphs[vn].x-=this._textWidth*this.anchor.x,this._glyphs[vn].y-=this._textHeight*this.anchor.y;this._maxLineHeight=ln*Qt},Kt.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},Kt.prototype.getLocalBounds=function(){return this.validate(),qt.prototype.getLocalBounds.call(this)},Kt.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Kt.registerFont=function(Zt,Qt){var Jt={},$t=Zt.getElementsByTagName("info")[0],en=Zt.getElementsByTagName("common")[0],tn=Qt.baseTexture.resolution||zt.default.RESOLUTION;Jt.font=$t.getAttribute("face"),Jt.size=parseInt($t.getAttribute("size"),10),Jt.lineHeight=parseInt(en.getAttribute("lineHeight"),10)/tn,Jt.chars={};for(var nn=Zt.getElementsByTagName("char"),an=0;an<nn.length;an++){var rn=nn[an],on=parseInt(rn.getAttribute("id"),10),sn=new jt.Rectangle(parseInt(rn.getAttribute("x"),10)/tn+Qt.frame.x/tn,parseInt(rn.getAttribute("y"),10)/tn+Qt.frame.y/tn,parseInt(rn.getAttribute("width"),10)/tn,parseInt(rn.getAttribute("height"),10)/tn);Jt.chars[on]={xOffset:parseInt(rn.getAttribute("xoffset"),10)/tn,yOffset:parseInt(rn.getAttribute("yoffset"),10)/tn,xAdvance:parseInt(rn.getAttribute("xadvance"),10)/tn,kerning:{},texture:new jt.Texture(Qt.baseTexture,sn)}}for(var dn=Zt.getElementsByTagName("kerning"),ln=0;ln<dn.length;ln++){var un=dn[ln],pn=parseInt(un.getAttribute("first"),10)/tn,cn=parseInt(un.getAttribute("second"),10)/tn,hn=parseInt(un.getAttribute("amount"),10)/tn;Jt.chars[cn]&&(Jt.chars[cn].kerning[pn]=hn)}return Kt.fonts[Jt.font]=Jt,Jt},Ht(Kt,[{key:"tint",get:function(){return this._font.tint},set:function(Zt){this._font.tint="number"==typeof Zt&&0<=Zt?Zt:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(Zt){this._font.align=Zt||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(Zt){"number"==typeof Zt?this._anchor.set(Zt):this._anchor.copy(Zt)}},{key:"font",get:function(){return this._font},set:function(Zt){Zt&&("string"==typeof Zt?(Zt=Zt.split(" "),this._font.name=1===Zt.length?Zt[0]:Zt.slice(1).join(" "),this._font.size=2<=Zt.length?parseInt(Zt[0],10):Kt.fonts[this._font.name].size):(this._font.name=Zt.name,this._font.size="number"==typeof Zt.size?Zt.size:parseInt(Zt.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(Zt){Zt=Zt.toString()||" ",this._text!==Zt&&(this._text=Zt,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(Zt){this._maxWidth!==Zt&&(this._maxWidth=Zt,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),Kt}(jt.Container);Gt.default=Vt,Vt.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101}],136:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function zt(Vt,qt){for(var Kt=0,Zt;Kt<qt.length;Kt++)Zt=qt[Kt],Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Vt,Zt.key,Zt)}return function(Vt,qt,Kt){return qt&&zt(Vt.prototype,qt),Kt&&zt(Vt,Kt),Vt}}(),Ht=function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("../core/math/Matrix")),jt=new Ht.default,Wt=function(){function zt(Vt,qt){!function(Kt,Zt){if(!(Kt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,zt),this._texture=Vt,this.mapCoord=new Ht.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===qt?.5:qt}return zt.prototype.multiplyUvs=function(Vt,qt){void 0===qt&&(qt=Vt);for(var Kt=this.mapCoord,Zt=0;Zt<Vt.length;Zt+=2){var Qt=Vt[Zt],Jt=Vt[Zt+1];qt[Zt]=Qt*Kt.a+Jt*Kt.c+Kt.tx,qt[Zt+1]=Qt*Kt.b+Jt*Kt.d+Kt.ty}return qt},zt.prototype.update=function(Vt){var qt=this._texture;if(!qt||!qt.valid)return!1;if(!Vt&&this._lastTextureID===qt._updateID)return!1;this._lastTextureID=qt._updateID;var Kt=qt._uvs;this.mapCoord.set(Kt.x1-Kt.x0,Kt.y1-Kt.y0,Kt.x3-Kt.x0,Kt.y3-Kt.y0,Kt.x0,Kt.y0);var Zt=qt.orig,Qt=qt.trim;Qt&&(jt.set(Zt.width/Qt.width,0,0,Zt.height/Qt.height,-Qt.x/Qt.width,-Qt.y/Qt.height),this.mapCoord.append(jt));var Jt=qt.baseTexture,$t=this.uClampFrame,en=this.clampMargin/Jt.resolution,tn=this.clampOffset;return $t[0]=(qt._frame.x+en+tn)/Jt.width,$t[1]=(qt._frame.y+en+tn)/Jt.height,$t[2]=(qt._frame.x+qt._frame.width-en+tn)/Jt.width,$t[3]=(qt._frame.y+qt._frame.height-en+tn)/Jt.height,this.uClampOffset[0]=tn/Jt.realWidth,this.uClampOffset[1]=tn/Jt.realHeight,!0},Yt(zt,[{key:"texture",get:function(){return this._texture},set:function(Vt){this._texture=Vt,this._lastTextureID=-1}}]),zt}();Gt.default=Wt},{"../core/math/Matrix":67}],137:[function(Bt,Xt,Gt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Gt.__esModule=!0;var Ht=function(){function Kt(Zt,Qt){for(var Jt=0,$t;Jt<Qt.length;Jt++)$t=Qt[Jt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Zt,$t.key,$t)}return function(Zt,Qt,Jt){return Qt&&Kt(Zt.prototype,Qt),Jt&&Kt(Zt,Jt),Zt}}(),jt=function(Kt){if(Kt&&Kt.__esModule)return Kt;var Zt={};if(null!=Kt)for(var Qt in Kt)Object.prototype.hasOwnProperty.call(Kt,Qt)&&(Zt[Qt]=Kt[Qt]);return Zt.default=Kt,Zt}(Bt("../core")),Wt=Yt(Bt("../core/sprites/canvas/CanvasTinter")),zt=Yt(Bt("./TextureTransform")),Vt=new jt.Point,qt=function(Kt){function Zt(Qt){var Jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,$t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Zt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,Kt.call(this,Qt));return en.tileTransform=new jt.TransformStatic,en._width=Jt,en._height=$t,en._canvasPattern=null,en.uvTransform=Qt.transform||new zt.default(Qt),en.pluginName="tilingSprite",en.uvRespectAnchor=!1,en}return function(Qt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Qt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Jt):Qt.__proto__=Jt)}(Zt,Kt),Zt.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},Zt.prototype._renderWebGL=function(Qt){var Jt=this._texture;Jt&&Jt.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),Qt.setObjectRenderer(Qt.plugins[this.pluginName]),Qt.plugins[this.pluginName].render(this))},Zt.prototype._renderCanvas=function(Qt){var Jt=this._texture;if(Jt.baseTexture.hasLoaded){var $t=Qt.context,en=this.worldTransform,tn=Qt.resolution,nn=Jt.baseTexture,an=nn.resolution,rn=this.tilePosition.x/this.tileScale.x%Jt._frame.width*an,on=this.tilePosition.y/this.tileScale.y%Jt._frame.height*an;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var sn=new jt.CanvasRenderTarget(Jt._frame.width,Jt._frame.height,an);16777215===this.tint?sn.context.drawImage(nn.source,-Jt._frame.x*an,-Jt._frame.y*an):(this.tintedTexture=Wt.default.getTintedTexture(this,this.tint),sn.context.drawImage(this.tintedTexture,0,0)),this.cachedTint=this.tint,this._canvasPattern=sn.context.createPattern(sn.canvas,"repeat")}$t.globalAlpha=this.worldAlpha,$t.setTransform(en.a*tn,en.b*tn,en.c*tn,en.d*tn,en.tx*tn,en.ty*tn),Qt.setBlendMode(this.blendMode),$t.fillStyle=this._canvasPattern,$t.scale(this.tileScale.x/an,this.tileScale.y/an);var dn=this.anchor.x*-this._width,ln=this.anchor.y*-this._height;this.uvRespectAnchor?($t.translate(rn,on),$t.fillRect(-rn+dn,-on+ln,this._width/this.tileScale.x*an,this._height/this.tileScale.y*an)):($t.translate(rn+dn,on+ln),$t.fillRect(-rn,-on,this._width/this.tileScale.x*an,this._height/this.tileScale.y*an))}},Zt.prototype._calculateBounds=function(){var Qt=this._width*-this._anchor._x,Jt=this._height*-this._anchor._y,$t=this._width*(1-this._anchor._x),en=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,Qt,Jt,$t,en)},Zt.prototype.getLocalBounds=function(Qt){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),Qt||(this._localBoundsRect||(this._localBoundsRect=new jt.Rectangle),Qt=this._localBoundsRect),this._bounds.getRectangle(Qt)):Kt.prototype.getLocalBounds.call(this,Qt)},Zt.prototype.containsPoint=function(Qt){this.worldTransform.applyInverse(Qt,Vt);var Jt=this._width,$t=this._height,en=-Jt*this.anchor._x;if(Vt.x>=en&&Vt.x<en+Jt){var tn=-$t*this.anchor._y;if(Vt.y>=tn&&Vt.y<tn+$t)return!0}return!1},Zt.prototype.destroy=function(Qt){Kt.prototype.destroy.call(this,Qt),this.tileTransform=null,this.uvTransform=null},Zt.from=function(Qt,Jt,$t){return new Zt(jt.Texture.from(Qt),Jt,$t)},Zt.fromFrame=function(Qt,Jt,$t){var en=jt.utils.TextureCache[Qt];if(!en)throw new Error("The frameId \""+Qt+"\" does not exist in the texture cache "+this);return new Zt(en,Jt,$t)},Zt.fromImage=function(Qt,Jt,$t,en,tn){return new Zt(jt.Texture.fromImage(Qt,en,tn),Jt,$t)},Ht(Zt,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(Qt){this.uvTransform.clampMargin=Qt,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(Qt){this.tileTransform.scale.copy(Qt)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(Qt){this.tileTransform.position.copy(Qt)}},{key:"width",get:function(){return this._width},set:function(Qt){this._width=Qt}},{key:"height",get:function(){return this._height},set:function(Qt){this._height=Qt}}]),Zt}(jt.Sprite);Gt.default=qt},{"../core":65,"../core/sprites/canvas/CanvasTinter":104,"./TextureTransform":136}],138:[function(Bt){function Yt(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}var Ht=function(Zt){if(Zt&&Zt.__esModule)return Zt;var Qt={};if(null!=Zt)for(var Jt in Zt)Object.prototype.hasOwnProperty.call(Zt,Jt)&&(Qt[Jt]=Zt[Jt]);return Qt.default=Zt,Qt}(Bt("../core")),jt=Yt(Bt("../core/textures/Texture")),Wt=Yt(Bt("../core/textures/BaseTexture")),zt=Bt("../core/utils"),Vt=Ht.DisplayObject,qt=new Ht.Matrix;Vt.prototype._cacheAsBitmap=!1,Vt.prototype._cacheData=!1;var Kt=function Zt(){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Zt),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(Vt.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(Zt){if(this._cacheAsBitmap!==Zt){this._cacheAsBitmap=Zt;var Qt;Zt?(this._cacheData||(this._cacheData=new Kt),(Qt=this._cacheData).originalRenderWebGL=this.renderWebGL,Qt.originalRenderCanvas=this.renderCanvas,Qt.originalUpdateTransform=this.updateTransform,Qt.originalCalculateBounds=this._calculateBounds,Qt.originalGetLocalBounds=this.getLocalBounds,Qt.originalDestroy=this.destroy,Qt.originalContainsPoint=this.containsPoint,Qt.originalMask=this._mask,Qt.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((Qt=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=Qt.originalRenderWebGL,this.renderCanvas=Qt.originalRenderCanvas,this._calculateBounds=Qt.originalCalculateBounds,this.getLocalBounds=Qt.originalGetLocalBounds,this.destroy=Qt.originalDestroy,this.updateTransform=Qt.originalUpdateTransform,this.containsPoint=Qt.originalContainsPoint,this._mask=Qt.originalMask,this.filterArea=Qt.originalFilterArea)}}}}),Vt.prototype._renderCachedWebGL=function(Zt){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObject(Zt),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(Zt))},Vt.prototype._initCachedDisplayObject=function(Zt){if(!this._cacheData||!this._cacheData.sprite){var Qt=this.alpha;this.alpha=1,Zt.currentRenderer.flush();var Jt=this.getLocalBounds().clone();if(this._filters){var $t=this._filters[0].padding;Jt.pad($t)}var en=Zt._activeRenderTarget,tn=Zt.filterManager.filterStack,nn=Ht.RenderTexture.create(0|Jt.width,0|Jt.height),an="cacheAsBitmap_"+(0,zt.uid)();this._cacheData.textureCacheId=an,Wt.default.addToCache(nn.baseTexture,an),jt.default.addToCache(nn,an);var rn=qt;rn.tx=-Jt.x,rn.ty=-Jt.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,Zt.render(this,nn,!0,rn,!0),Zt.bindRenderTarget(en),Zt.filterManager.filterStack=tn,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var on=new Ht.Sprite(nn);on.transform.worldTransform=this.transform.worldTransform,on.anchor.x=-Jt.x/Jt.width,on.anchor.y=-Jt.y/Jt.height,on.alpha=Qt,on._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=on,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=Zt._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=on.containsPoint.bind(on)}},Vt.prototype._renderCachedCanvas=function(Zt){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObjectCanvas(Zt),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(Zt))},Vt.prototype._initCachedDisplayObjectCanvas=function(Zt){if(!this._cacheData||!this._cacheData.sprite){var Qt=this.getLocalBounds(),Jt=this.alpha;this.alpha=1;var $t=Zt.context,en=Ht.RenderTexture.create(0|Qt.width,0|Qt.height),tn="cacheAsBitmap_"+(0,zt.uid)();this._cacheData.textureCacheId=tn,Wt.default.addToCache(en.baseTexture,tn),jt.default.addToCache(en,tn);var nn=qt;this.transform.localTransform.copy(nn),nn.invert(),nn.tx-=Qt.x,nn.ty-=Qt.y,this.renderCanvas=this._cacheData.originalRenderCanvas,Zt.render(this,en,!0,nn,!1),Zt.context=$t,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var an=new Ht.Sprite(en);an.transform.worldTransform=this.transform.worldTransform,an.anchor.x=-Qt.x/Qt.width,an.anchor.y=-Qt.y/Qt.height,an._bounds=this._bounds,an.alpha=Jt,this.parent?this.updateTransform():(this.parent=Zt._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=an,this.containsPoint=an.containsPoint.bind(an)}},Vt.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},Vt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},Vt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,Wt.default.removeFromCache(this._cacheData.textureCacheId),jt.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Vt.prototype._cacheAsBitmapDestroy=function(Zt){this.cacheAsBitmap=!1,this.destroy(Zt)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":124}],139:[function(Bt){var Yt=function(Ht){if(Ht&&Ht.__esModule)return Ht;var jt={};if(null!=Ht)for(var Wt in Ht)Object.prototype.hasOwnProperty.call(Ht,Wt)&&(jt[Wt]=Ht[Wt]);return jt.default=Ht,jt}(Bt("../core"));Yt.DisplayObject.prototype.name=null,Yt.Container.prototype.getChildByName=function(Ht){for(var jt=0;jt<this.children.length;jt++)if(this.children[jt].name===Ht)return this.children[jt];return null}},{"../core":65}],140:[function(Bt){var Yt=function(Ht){if(Ht&&Ht.__esModule)return Ht;var jt={};if(null!=Ht)for(var Wt in Ht)Object.prototype.hasOwnProperty.call(Ht,Wt)&&(jt[Wt]=Ht[Wt]);return jt.default=Ht,jt}(Bt("../core"));Yt.DisplayObject.prototype.getGlobalPosition=function(){var Ht=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Yt.Point,jt=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,Ht,jt):(Ht.x=this.position.x,Ht.y=this.position.y),Ht}},{"../core":65}],141:[function(Bt,Xt,Gt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Gt.__esModule=!0,Gt.BitmapText=Gt.TilingSpriteRenderer=Gt.TilingSprite=Gt.TextureTransform=Gt.AnimatedSprite=void 0;var Ht=Bt("./AnimatedSprite");Object.defineProperty(Gt,"AnimatedSprite",{enumerable:!0,get:function(){return Yt(Ht).default}});var jt=Bt("./TextureTransform");Object.defineProperty(Gt,"TextureTransform",{enumerable:!0,get:function(){return Yt(jt).default}});var Wt=Bt("./TilingSprite");Object.defineProperty(Gt,"TilingSprite",{enumerable:!0,get:function(){return Yt(Wt).default}});var zt=Bt("./webgl/TilingSpriteRenderer");Object.defineProperty(Gt,"TilingSpriteRenderer",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./BitmapText");Object.defineProperty(Gt,"BitmapText",{enumerable:!0,get:function(){return Yt(Vt).default}}),Bt("./cacheAsBitmap"),Bt("./getChildByName"),Bt("./getGlobalPosition")},{"./AnimatedSprite":134,"./BitmapText":135,"./TextureTransform":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("../../core")),Ht=Bt("../../core/const"),jt=(Bt("path"),new Yt.Matrix),Wt=function(zt){function Vt(qt){!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Kt=function(Zt,Qt){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt&&("object"==typeof Qt||"function"==typeof Qt)?Qt:Zt}(this,zt.call(this,qt));return Kt.shader=null,Kt.simpleShader=null,Kt.quad=null,Kt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.onContextChange=function(){var qt=this.renderer.gl;this.shader=new Yt.Shader(qt,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new Yt.Shader(qt,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new Yt.Quad(qt,this.renderer.state.attribState),this.quad.initVao(this.shader)},Vt.prototype.render=function(qt){var Kt=this.renderer,Zt=this.quad;Kt.bindVao(Zt.vao);var Qt=Zt.vertices;Qt[0]=Qt[6]=qt._width*-qt.anchor.x,Qt[1]=Qt[3]=qt._height*-qt.anchor.y,Qt[2]=Qt[4]=qt._width*(1-qt.anchor.x),Qt[5]=Qt[7]=qt._height*(1-qt.anchor.y),qt.uvRespectAnchor&&((Qt=Zt.uvs)[0]=Qt[6]=-qt.anchor.x,Qt[1]=Qt[3]=-qt.anchor.y,Qt[2]=Qt[4]=1-qt.anchor.x,Qt[5]=Qt[7]=1-qt.anchor.y),Zt.upload();var Jt=qt._texture,$t=Jt.baseTexture,en=qt.tileTransform.localTransform,tn=qt.uvTransform,nn=$t.isPowerOfTwo&&Jt.frame.width===$t.width&&Jt.frame.height===$t.height;nn&&($t._glTextures[Kt.CONTEXT_UID]?nn=$t.wrapMode!==Ht.WRAP_MODES.CLAMP:$t.wrapMode===Ht.WRAP_MODES.CLAMP&&($t.wrapMode=Ht.WRAP_MODES.REPEAT));var an=nn?this.simpleShader:this.shader;Kt.bindShader(an);var rn=Jt.width,on=Jt.height,sn=qt._width,dn=qt._height;jt.set(en.a*rn/sn,en.b*rn/dn,en.c*on/sn,en.d*on/dn,en.tx/sn,en.ty/dn),jt.invert(),nn?jt.prepend(tn.mapCoord):(an.uniforms.uMapCoord=tn.mapCoord.toArray(!0),an.uniforms.uClampFrame=tn.uClampFrame,an.uniforms.uClampOffset=tn.uClampOffset),an.uniforms.uTransform=jt.toArray(!0),an.uniforms.uColor=Yt.utils.premultiplyTintToRgba(qt.tint,qt.worldAlpha,an.uniforms.uColor,$t.premultipliedAlpha),an.uniforms.translationMatrix=qt.transform.worldTransform.toArray(!0),an.uniforms.uSampler=Kt.bindTexture(Jt),Kt.setBlendMode(Yt.utils.correctBlendMode(qt.blendMode,$t.premultipliedAlpha)),Zt.vao.draw(this.renderer.gl.TRIANGLES,6,0)},Vt}(Yt.ObjectRenderer);Gt.default=Wt,Yt.WebGLRenderer.registerPlugin("tilingSprite",Wt)},{"../../core":65,"../../core/const":46,path:23}],143:[function(Bt,Xt,Gt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Gt.__esModule=!0;var Ht=function(){function qt(Kt,Zt){for(var Qt=0,Jt;Qt<Zt.length;Qt++)Jt=Zt[Qt],Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Kt,Jt.key,Jt)}return function(Kt,Zt,Qt){return Zt&&qt(Kt.prototype,Zt),Qt&&qt(Kt,Qt),Kt}}(),jt=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Zt in qt)Object.prototype.hasOwnProperty.call(qt,Zt)&&(Kt[Zt]=qt[Zt]);return Kt.default=qt,Kt}(Bt("../../core")),Wt=Yt(Bt("./BlurXFilter")),zt=Yt(Bt("./BlurYFilter")),Vt=function(qt){function Kt(Zt,Qt,Jt,$t){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Kt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,qt.call(this));return en.blurXFilter=new Wt.default(Zt,Qt,Jt,$t),en.blurYFilter=new zt.default(Zt,Qt,Jt,$t),en.padding=0,en.resolution=Jt||jt.settings.RESOLUTION,en.quality=Qt||4,en.blur=Zt||8,en}return function(Zt,Qt){if("function"!=typeof Qt&&null!==Qt)throw new TypeError("Super expression must either be null or a function, not "+typeof Qt);Zt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),Qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,Qt):Zt.__proto__=Qt)}(Kt,qt),Kt.prototype.apply=function(Zt,Qt,Jt){var $t=Zt.getRenderTarget(!0);this.blurXFilter.apply(Zt,Qt,$t,!0),this.blurYFilter.apply(Zt,$t,Jt,!1),Zt.returnRenderTarget($t)},Ht(Kt,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(Zt){this.blurXFilter.blur=this.blurYFilter.blur=Zt,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(Zt){this.blurXFilter.quality=this.blurYFilter.quality=Zt}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(Zt){this.blurXFilter.blur=Zt,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(Zt){this.blurYFilter.blur=Zt,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(Zt){this.blurYFilter._blendMode=Zt}}]),Kt}(jt.Filter);Gt.default=Vt},{"../../core":65,"./BlurXFilter":144,"./BlurYFilter":145}],144:[function(Bt,Xt,Gt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Gt.__esModule=!0;var Ht=function(){function Kt(Zt,Qt){for(var Jt=0,$t;Jt<Qt.length;Jt++)$t=Qt[Jt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Zt,$t.key,$t)}return function(Zt,Qt,Jt){return Qt&&Kt(Zt.prototype,Qt),Jt&&Kt(Zt,Jt),Zt}}(),jt=function(Kt){if(Kt&&Kt.__esModule)return Kt;var Zt={};if(null!=Kt)for(var Qt in Kt)Object.prototype.hasOwnProperty.call(Kt,Qt)&&(Zt[Qt]=Kt[Qt]);return Zt.default=Kt,Zt}(Bt("../../core")),Wt=Yt(Bt("./generateBlurVertSource")),zt=Yt(Bt("./generateBlurFragSource")),Vt=Yt(Bt("./getMaxBlurKernelSize")),qt=function(Kt){function Zt(Qt,Jt,$t,en){!function(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}(this,Zt),en=en||5;var tn=(0,Wt.default)(en,!0),nn=(0,zt.default)(en),an=function(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:rn}(this,Kt.call(this,tn,nn));return an.resolution=$t||jt.settings.RESOLUTION,an._quality=0,an.quality=Jt||4,an.strength=Qt||8,an.firstRun=!0,an}return function(Qt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Qt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Jt):Qt.__proto__=Jt)}(Zt,Kt),Zt.prototype.apply=function(Qt,Jt,$t,en){if(this.firstRun){var tn=Qt.renderer.gl,nn=(0,Vt.default)(tn);this.vertexSrc=(0,Wt.default)(nn,!0),this.fragmentSrc=(0,zt.default)(nn),this.firstRun=!1}if(this.uniforms.strength=1/$t.size.width*($t.size.width/Jt.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)Qt.applyFilter(this,Jt,$t,en);else{for(var an=Qt.getRenderTarget(!0),rn=Jt,on=an,sn=0;sn<this.passes-1;sn++){Qt.applyFilter(this,rn,on,!0);var dn=on;on=rn,rn=dn}Qt.applyFilter(this,rn,$t,en),Qt.returnRenderTarget(an)}},Ht(Zt,[{key:"blur",get:function(){return this.strength},set:function(Qt){this.padding=2*Math.abs(Qt),this.strength=Qt}},{key:"quality",get:function(){return this._quality},set:function(Qt){this._quality=Qt,this.passes=Qt}}]),Zt}(jt.Filter);Gt.default=qt},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],145:[function(Bt,Xt,Gt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Gt.__esModule=!0;var Ht=function(){function Kt(Zt,Qt){for(var Jt=0,$t;Jt<Qt.length;Jt++)$t=Qt[Jt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Zt,$t.key,$t)}return function(Zt,Qt,Jt){return Qt&&Kt(Zt.prototype,Qt),Jt&&Kt(Zt,Jt),Zt}}(),jt=function(Kt){if(Kt&&Kt.__esModule)return Kt;var Zt={};if(null!=Kt)for(var Qt in Kt)Object.prototype.hasOwnProperty.call(Kt,Qt)&&(Zt[Qt]=Kt[Qt]);return Zt.default=Kt,Zt}(Bt("../../core")),Wt=Yt(Bt("./generateBlurVertSource")),zt=Yt(Bt("./generateBlurFragSource")),Vt=Yt(Bt("./getMaxBlurKernelSize")),qt=function(Kt){function Zt(Qt,Jt,$t,en){!function(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}(this,Zt),en=en||5;var tn=(0,Wt.default)(en,!1),nn=(0,zt.default)(en),an=function(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:rn}(this,Kt.call(this,tn,nn));return an.resolution=$t||jt.settings.RESOLUTION,an._quality=0,an.quality=Jt||4,an.strength=Qt||8,an.firstRun=!0,an}return function(Qt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Qt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Jt):Qt.__proto__=Jt)}(Zt,Kt),Zt.prototype.apply=function(Qt,Jt,$t,en){if(this.firstRun){var tn=Qt.renderer.gl,nn=(0,Vt.default)(tn);this.vertexSrc=(0,Wt.default)(nn,!1),this.fragmentSrc=(0,zt.default)(nn),this.firstRun=!1}if(this.uniforms.strength=1/$t.size.height*($t.size.height/Jt.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)Qt.applyFilter(this,Jt,$t,en);else{for(var an=Qt.getRenderTarget(!0),rn=Jt,on=an,sn=0;sn<this.passes-1;sn++){Qt.applyFilter(this,rn,on,!0);var dn=on;on=rn,rn=dn}Qt.applyFilter(this,rn,$t,en),Qt.returnRenderTarget(an)}},Ht(Zt,[{key:"blur",get:function(){return this.strength},set:function(Qt){this.padding=2*Math.abs(Qt),this.strength=Qt}},{key:"quality",get:function(){return this._quality},set:function(Qt){this._quality=Qt,this.passes=Qt}}]),Zt}(jt.Filter);Gt.default=qt},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],146:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(jt){for(var Wt=Yt[jt],zt=Wt.length,Vt=Ht,qt="",Kt=void 0,Zt=0,Qt;Zt<jt;Zt++)Qt="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",Zt),Kt=Zt,Zt>=zt&&(Kt=jt-Zt-1),qt+=Qt=Qt.replace("%value%",Wt[Kt]),qt+="\n";return Vt=Vt.replace("%blur%",qt),Vt=Vt.replace("%size%",jt)};var Yt={5:[0.153388,0.221461,0.250301],7:[0.071303,0.131514,0.189879,0.214607],9:[0.028532,0.067234,0.124009,0.179044,0.20236],11:[0.0093,0.028002,0.065984,0.121703,0.175713,0.198596],13:[0.002406,0.009255,0.027867,0.065666,0.121117,0.174868,0.197641],15:[0.000489,0.002403,0.009246,0.02784,0.065602,0.120999,0.174697,0.197448]},Ht=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],147:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(Ht,jt){var Wt=Math.ceil(Ht/2),zt=Yt,Vt="",qt;qt=jt?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var Kt=0,Zt;Kt<Ht;Kt++)Zt=qt.replace("%index%",Kt),Vt+=Zt=Zt.replace("%sampleIndex%",Kt-(Wt-1)+".0"),Vt+="\n";return zt=zt.replace("%blur%",Vt),zt=zt.replace("%size%",Ht)};var Yt=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],148:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(Yt){for(var Ht=Yt.getParameter(Yt.MAX_VARYING_VECTORS),jt=15;jt>Ht;)jt-=2;return jt}},{}],149:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=function(Wt){if(Wt&&Wt.__esModule)return Wt;var zt={};if(null!=Wt)for(var Vt in Wt)Object.prototype.hasOwnProperty.call(Wt,Vt)&&(zt[Vt]=Wt[Vt]);return zt.default=Wt,zt}(Bt("../../core")),jt=(Bt("path"),function(Wt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,Wt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return Vt.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Vt.alpha=1,Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,Wt),zt.prototype._loadMatrix=function(Vt){var qt=Vt;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(qt,this.uniforms.m,Vt),qt=this._colorMatrix(qt)),this.uniforms.m=qt},zt.prototype._multiply=function(Vt,qt,Kt){return Vt[0]=qt[0]*Kt[0]+qt[1]*Kt[5]+qt[2]*Kt[10]+qt[3]*Kt[15],Vt[1]=qt[0]*Kt[1]+qt[1]*Kt[6]+qt[2]*Kt[11]+qt[3]*Kt[16],Vt[2]=qt[0]*Kt[2]+qt[1]*Kt[7]+qt[2]*Kt[12]+qt[3]*Kt[17],Vt[3]=qt[0]*Kt[3]+qt[1]*Kt[8]+qt[2]*Kt[13]+qt[3]*Kt[18],Vt[4]=qt[0]*Kt[4]+qt[1]*Kt[9]+qt[2]*Kt[14]+qt[3]*Kt[19]+qt[4],Vt[5]=qt[5]*Kt[0]+qt[6]*Kt[5]+qt[7]*Kt[10]+qt[8]*Kt[15],Vt[6]=qt[5]*Kt[1]+qt[6]*Kt[6]+qt[7]*Kt[11]+qt[8]*Kt[16],Vt[7]=qt[5]*Kt[2]+qt[6]*Kt[7]+qt[7]*Kt[12]+qt[8]*Kt[17],Vt[8]=qt[5]*Kt[3]+qt[6]*Kt[8]+qt[7]*Kt[13]+qt[8]*Kt[18],Vt[9]=qt[5]*Kt[4]+qt[6]*Kt[9]+qt[7]*Kt[14]+qt[8]*Kt[19]+qt[9],Vt[10]=qt[10]*Kt[0]+qt[11]*Kt[5]+qt[12]*Kt[10]+qt[13]*Kt[15],Vt[11]=qt[10]*Kt[1]+qt[11]*Kt[6]+qt[12]*Kt[11]+qt[13]*Kt[16],Vt[12]=qt[10]*Kt[2]+qt[11]*Kt[7]+qt[12]*Kt[12]+qt[13]*Kt[17],Vt[13]=qt[10]*Kt[3]+qt[11]*Kt[8]+qt[12]*Kt[13]+qt[13]*Kt[18],Vt[14]=qt[10]*Kt[4]+qt[11]*Kt[9]+qt[12]*Kt[14]+qt[13]*Kt[19]+qt[14],Vt[15]=qt[15]*Kt[0]+qt[16]*Kt[5]+qt[17]*Kt[10]+qt[18]*Kt[15],Vt[16]=qt[15]*Kt[1]+qt[16]*Kt[6]+qt[17]*Kt[11]+qt[18]*Kt[16],Vt[17]=qt[15]*Kt[2]+qt[16]*Kt[7]+qt[17]*Kt[12]+qt[18]*Kt[17],Vt[18]=qt[15]*Kt[3]+qt[16]*Kt[8]+qt[17]*Kt[13]+qt[18]*Kt[18],Vt[19]=qt[15]*Kt[4]+qt[16]*Kt[9]+qt[17]*Kt[14]+qt[18]*Kt[19]+qt[19],Vt},zt.prototype._colorMatrix=function(Vt){var qt=new Float32Array(Vt);return qt[4]/=255,qt[9]/=255,qt[14]/=255,qt[19]/=255,qt},zt.prototype.brightness=function(Vt,qt){this._loadMatrix([Vt,0,0,0,0,0,Vt,0,0,0,0,0,Vt,0,0,0,0,0,1,0],qt)},zt.prototype.greyscale=function(Vt,qt){this._loadMatrix([Vt,Vt,Vt,0,0,Vt,Vt,Vt,0,0,Vt,Vt,Vt,0,0,0,0,0,1,0],qt)},zt.prototype.blackAndWhite=function(Vt){this._loadMatrix([0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0,0,0,1,0],Vt)},zt.prototype.hue=function(Vt,qt){Vt=(Vt||0)/180*Math.PI;var Kt=Math.cos(Vt),Zt=Math.sin(Vt),Qt=(0,Math.sqrt)(1/3);this._loadMatrix([Kt+1/3*(1-Kt),1/3*(1-Kt)-Qt*Zt,1/3*(1-Kt)+Qt*Zt,0,0,1/3*(1-Kt)+Qt*Zt,Kt+1/3*(1-Kt),1/3*(1-Kt)-Qt*Zt,0,0,1/3*(1-Kt)-Qt*Zt,1/3*(1-Kt)+Qt*Zt,Kt+1/3*(1-Kt),0,0,0,0,0,1,0],qt)},zt.prototype.contrast=function(Vt,qt){var Kt=(Vt||0)+1,Zt=-.5*(Kt-1);this._loadMatrix([Kt,0,0,0,Zt,0,Kt,0,0,Zt,0,0,Kt,0,Zt,0,0,0,1,0],qt)},zt.prototype.saturate=function(){var Vt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,qt=arguments[1],Kt=2*Vt/3+1,Zt=-.5*(Kt-1);this._loadMatrix([Kt,Zt,Zt,0,0,Zt,Kt,Zt,0,0,Zt,Zt,Kt,0,0,0,0,0,1,0],qt)},zt.prototype.desaturate=function(){this.saturate(-1)},zt.prototype.negative=function(Vt){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],Vt)},zt.prototype.sepia=function(Vt){this._loadMatrix([0.393,0.7689999,0.18899999,0,0,0.349,0.6859999,0.16799999,0,0,0.272,0.5339999,0.13099999,0,0,0,0,0,1,0],Vt)},zt.prototype.technicolor=function(Vt){this._loadMatrix([1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],Vt)},zt.prototype.polaroid=function(Vt){this._loadMatrix([1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0],Vt)},zt.prototype.toBGR=function(Vt){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],Vt)},zt.prototype.kodachrome=function(Vt){this._loadMatrix([1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],Vt)},zt.prototype.browni=function(Vt){this._loadMatrix([0.5997023498159715,0.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,0.8609577587992641,0.15059552388459913,0,-36.96841498319127,0.24113635128153335,-0.07441037908422492,0.44972182064877153,0,-7.562075277591283,0,0,0,1,0],Vt)},zt.prototype.vintage=function(Vt){this._loadMatrix([0.6279345635605994,0.3202183420819367,-0.03965408211312453,0,9.651285835294123,0.02578397704808868,0.6441188644374771,0.03259127616149294,0,7.462829176470591,0.0466055556782719,-0.0851232987247891,0.5241648018700465,0,5.159190588235296,0,0,0,1,0],Vt)},zt.prototype.colorTone=function(Vt,qt,Kt,Zt,Qt){Vt=Vt||.2,qt=qt||.15;var Jt=(255&(Kt=Kt||16770432)>>16)/255,$t=(255&Kt>>8)/255,en=(255&Kt)/255,tn=(255&(Zt=Zt||3375104)>>16)/255,nn=(255&Zt>>8)/255,an=(255&Zt)/255,rn=[.3,.59,.11,0,0,Jt,$t,en,Vt,0,tn,nn,an,qt,0,Jt-tn,$t-nn,en-an,0,0];this._loadMatrix(rn,Qt)},zt.prototype.night=function(Vt,qt){var Kt=[-2*(Vt=Vt||.1),-Vt,0,0,0,-Vt,0,Vt,0,0,0,Vt,2*Vt,0,0,0,0,0,1,0];this._loadMatrix(Kt,qt)},zt.prototype.predator=function(Vt,qt){this._loadMatrix([11.224130630493164*Vt,-4.794486999511719*Vt,-2.8746118545532227*Vt,0*Vt,.40342438220977783*Vt,-3.6330697536468506*Vt,9.193157196044922*Vt,-2.951810836791992*Vt,0*Vt,-1.316135048866272*Vt,-3.2184197902679443*Vt,-4.2375030517578125*Vt,7.476448059082031*Vt,0*Vt,.8044459223747253*Vt,0,0,0,1,0],qt)},zt.prototype.lsd=function(Vt){this._loadMatrix([2,-0.4,0.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0],Vt)},zt.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Yt(zt,[{key:"matrix",get:function(){return this.uniforms.m},set:function(Vt){this.uniforms.m=Vt}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(Vt){this.uniforms.uAlpha=Vt}}]),zt}(Ht.Filter));Gt.default=jt,jt.prototype.grayscale=jt.prototype.greyscale},{"../../core":65,path:23}],150:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=function(Wt){if(Wt&&Wt.__esModule)return Wt;var zt={};if(null!=Wt)for(var Vt in Wt)Object.prototype.hasOwnProperty.call(Wt,Vt)&&(zt[Vt]=Wt[Vt]);return zt.default=Wt,zt}(Bt("../../core")),jt=(Bt("path"),function(Wt){function zt(Vt,qt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=new Ht.Matrix;Vt.renderable=!1;var Zt=function(Qt,Jt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Qt}(this,Wt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return Zt.maskSprite=Vt,Zt.maskMatrix=Kt,Zt.uniforms.mapSampler=Vt._texture,Zt.uniforms.filterMatrix=Kt,Zt.uniforms.scale={x:1,y:1},null!==qt&&void 0!==qt||(qt=20),Zt.scale=new Ht.Point(qt,qt),Zt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,Wt),zt.prototype.apply=function(Vt,qt,Kt){var Zt=1/Kt.destinationFrame.width*(Kt.size.width/qt.size.width);this.uniforms.filterMatrix=Vt.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*Zt,this.uniforms.scale.y=this.scale.y*Zt,Vt.applyFilter(this,qt,Kt)},Yt(zt,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(Vt){this.uniforms.mapSampler=Vt}}]),zt}(Ht.Filter));Gt.default=jt},{"../../core":65,path:23}],151:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(jt){if(jt&&jt.__esModule)return jt;var Wt={};if(null!=jt)for(var zt in jt)Object.prototype.hasOwnProperty.call(jt,zt)&&(Wt[zt]=jt[zt]);return Wt.default=jt,Wt}(Bt("../../core")),Ht=(Bt("path"),function(jt){function Wt(){return function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),function(zt,Vt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&("object"==typeof Vt||"function"==typeof Vt)?Vt:zt}(this,jt.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}","varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it's\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n"))}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(Wt,jt),Wt}(Yt.Filter));Gt.default=Ht},{"../../core":65,path:23}],152:[function(Bt,Xt,Gt){function Yt(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Gt.__esModule=!0;var Ht=Bt("./fxaa/FXAAFilter");Object.defineProperty(Gt,"FXAAFilter",{enumerable:!0,get:function(){return Yt(Ht).default}});var jt=Bt("./noise/NoiseFilter");Object.defineProperty(Gt,"NoiseFilter",{enumerable:!0,get:function(){return Yt(jt).default}});var Wt=Bt("./displacement/DisplacementFilter");Object.defineProperty(Gt,"DisplacementFilter",{enumerable:!0,get:function(){return Yt(Wt).default}});var zt=Bt("./blur/BlurFilter");Object.defineProperty(Gt,"BlurFilter",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./blur/BlurXFilter");Object.defineProperty(Gt,"BlurXFilter",{enumerable:!0,get:function(){return Yt(Vt).default}});var qt=Bt("./blur/BlurYFilter");Object.defineProperty(Gt,"BlurYFilter",{enumerable:!0,get:function(){return Yt(qt).default}});var Kt=Bt("./colormatrix/ColorMatrixFilter");Object.defineProperty(Gt,"ColorMatrixFilter",{enumerable:!0,get:function(){return Yt(Kt).default}});var Zt=Bt("./void/VoidFilter");Object.defineProperty(Gt,"VoidFilter",{enumerable:!0,get:function(){return Yt(Zt).default}})},{"./blur/BlurFilter":143,"./blur/BlurXFilter":144,"./blur/BlurYFilter":145,"./colormatrix/ColorMatrixFilter":149,"./displacement/DisplacementFilter":150,"./fxaa/FXAAFilter":151,"./noise/NoiseFilter":153,"./void/VoidFilter":154}],153:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=function(Wt){if(Wt&&Wt.__esModule)return Wt;var zt={};if(null!=Wt)for(var Vt in Wt)Object.prototype.hasOwnProperty.call(Wt,Vt)&&(zt[Vt]=Wt[Vt]);return zt.default=Wt,zt}(Bt("../../core")),jt=(Bt("path"),function(Wt){function zt(){var Vt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,qt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=function(Zt,Qt){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt&&("object"==typeof Qt||"function"==typeof Qt)?Qt:Zt}(this,Wt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return Kt.noise=Vt,Kt.seed=qt,Kt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,Wt),Yt(zt,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(Vt){this.uniforms.uNoise=Vt}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(Vt){this.uniforms.uSeed=Vt}}]),zt}(Ht.Filter));Gt.default=jt},{"../../core":65,path:23}],154:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(jt){if(jt&&jt.__esModule)return jt;var Wt={};if(null!=jt)for(var zt in jt)Object.prototype.hasOwnProperty.call(jt,zt)&&(Wt[zt]=jt[zt]);return Wt.default=jt,Wt}(Bt("../../core")),Ht=(Bt("path"),function(jt){function Wt(){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,Wt);var zt=function(Vt,qt){if(!Vt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return qt&&("object"==typeof qt||"function"==typeof qt)?qt:Vt}(this,jt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return zt.glShaderKey="void",zt}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(Wt,jt),Wt}(Yt.Filter));Gt.default=Ht},{"../../core":65,path:23}],155:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=function(Wt){if(Wt&&Wt.__esModule)return Wt;var zt={};if(null!=Wt)for(var Vt in Wt)Object.prototype.hasOwnProperty.call(Wt,Vt)&&(zt[Vt]=Wt[Vt]);return zt.default=Wt,zt}(Bt("../core")),jt=function(){function Wt(){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.global=new Ht.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return Wt.prototype.getLocalPosition=function(zt,Vt,qt){return zt.worldTransform.applyInverse(qt||this.global,Vt)},Wt.prototype._copyEvent=function(zt){zt.isPrimary&&(this.isPrimary=!0),this.button=zt.button,this.buttons=zt.buttons,this.width=zt.width,this.height=zt.height,this.tiltX=zt.tiltX,this.tiltY=zt.tiltY,this.pointerType=zt.pointerType,this.pressure=zt.pressure,this.rotationAngle=zt.rotationAngle,this.twist=zt.twist||0,this.tangentialPressure=zt.tangentialPressure||0},Wt.prototype._reset=function(){this.isPrimary=!1},Yt(Wt,[{key:"pointerId",get:function(){return this.identifier}}]),Wt}();Gt.default=jt},{"../core":65}],156:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Ht(){!function(jt,Wt){if(!(jt instanceof Wt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return Ht.prototype.stopPropagation=function(){this.stopped=!0},Ht.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},Ht}();Gt.default=Yt},{}],157:[function(Bt,Xt,Gt){function Yt($t){return $t&&$t.__esModule?$t:{default:$t}}Gt.__esModule=!0;var Ht="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($t){return typeof $t}:function($t){return $t&&"function"==typeof Symbol&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},jt=function($t){if($t&&$t.__esModule)return $t;var en={};if(null!=$t)for(var tn in $t)Object.prototype.hasOwnProperty.call($t,tn)&&(en[tn]=$t[tn]);return en.default=$t,en}(Bt("../core")),Wt=Yt(Bt("./InteractionData")),zt=Yt(Bt("./InteractionEvent")),Vt=Yt(Bt("./InteractionTrackingData")),qt=Yt(Bt("eventemitter3")),Kt=Yt(Bt("./interactiveTarget"));jt.utils.mixins.delayMixin(jt.DisplayObject.prototype,Kt.default);var Zt="MOUSE",Qt={target:null,data:{global:null}},Jt=function($t){function en(tn,nn){!function(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}(this,en);var an=function(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:rn}(this,$t.call(this));return nn=nn||{},an.renderer=tn,an.autoPreventDefault=void 0===nn.autoPreventDefault||nn.autoPreventDefault,an.interactionFrequency=nn.interactionFrequency||10,an.mouse=new Wt.default,an.mouse.identifier=Zt,an.mouse.global.set(-999999),an.activeInteractionData={},an.activeInteractionData[Zt]=an.mouse,an.interactionDataPool=[],an.eventData=new zt.default,an.interactionDOMElement=null,an.moveWhenInside=!1,an.eventsAdded=!1,an.mouseOverRenderer=!1,an.supportsTouchEvents="ontouchstart"in window,an.supportsPointerEvents=!!window.PointerEvent,an.onPointerUp=an.onPointerUp.bind(an),an.processPointerUp=an.processPointerUp.bind(an),an.onPointerCancel=an.onPointerCancel.bind(an),an.processPointerCancel=an.processPointerCancel.bind(an),an.onPointerDown=an.onPointerDown.bind(an),an.processPointerDown=an.processPointerDown.bind(an),an.onPointerMove=an.onPointerMove.bind(an),an.processPointerMove=an.processPointerMove.bind(an),an.onPointerOut=an.onPointerOut.bind(an),an.processPointerOverOut=an.processPointerOverOut.bind(an),an.onPointerOver=an.onPointerOver.bind(an),an.cursorStyles={default:"inherit",pointer:"pointer"},an.currentCursorMode=null,an.cursor=null,an._tempPoint=new jt.Point,an.resolution=1,an.setTargetElement(an.renderer.view,an.renderer.resolution),an}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.hitTest=function(tn,nn){return Qt.target=null,Qt.data.global=tn,nn||(nn=this.renderer._lastObjectRendered),this.processInteractive(Qt,nn,null,!0),Qt.target},en.prototype.setTargetElement=function(tn){var nn=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=tn,this.resolution=nn,this.addEvents()},en.prototype.addEvents=function(){this.interactionDOMElement&&(jt.ticker.shared.add(this.update,this,jt.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},en.prototype.removeEvents=function(){this.interactionDOMElement&&(jt.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},en.prototype.update=function(tn){if(this._deltaTime+=tn,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var nn in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(nn)){var an=this.activeInteractionData[nn];if(an.originalEvent&&"touch"!==an.pointerType){var rn=this.configureInteractionEventForDOMEvent(this.eventData,an.originalEvent,an);this.processInteractive(rn,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},en.prototype.setCursorMode=function(tn){if(tn=tn||"default",this.currentCursorMode!==tn){this.currentCursorMode=tn;var nn=this.cursorStyles[tn];if(nn)switch(void 0===nn?"undefined":Ht(nn)){case"string":this.interactionDOMElement.style.cursor=nn;break;case"function":nn(tn);break;case"object":Object.assign(this.interactionDOMElement.style,nn);}else"string"!=typeof tn||Object.prototype.hasOwnProperty.call(this.cursorStyles,tn)||(this.interactionDOMElement.style.cursor=tn)}},en.prototype.dispatchEvent=function(tn,nn,an){an.stopped||(an.currentTarget=tn,an.type=nn,tn.emit(nn,an),tn[nn]&&tn[nn](an))},en.prototype.mapPositionToPoint=function(tn,nn,an){var rn=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var on=navigator.isCocoonJS?this.resolution:1/this.resolution;tn.x=(nn-rn.left)*(this.interactionDOMElement.width/rn.width)*on,tn.y=(an-rn.top)*(this.interactionDOMElement.height/rn.height)*on},en.prototype.processInteractive=function(tn,nn,an,rn,on){if(!nn||!nn.visible)return!1;var sn=tn.data.global,dn=!1,ln=on=nn.interactive||on;if(nn.hitArea?ln=!1:rn&&nn._mask&&(nn._mask.containsPoint(sn)||(rn=!1)),nn.interactiveChildren&&nn.children)for(var un=nn.children,pn=un.length-1;0<=pn;pn--){var cn=un[pn],hn=this.processInteractive(tn,cn,an,rn,ln);if(hn){if(!cn.parent)continue;ln=!1,hn&&(tn.target&&(rn=!1),dn=!0)}}return on&&(rn&&!tn.target&&(nn.hitArea?(nn.worldTransform.applyInverse(sn,this._tempPoint),nn.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(dn=!0)):nn.containsPoint&&nn.containsPoint(sn)&&(dn=!0)),nn.interactive&&(dn&&!tn.target&&(tn.target=nn),an&&an(tn,nn,!!dn))),dn},en.prototype.onPointerDown=function(tn){if(!this.supportsTouchEvents||"touch"!==tn.pointerType){var nn=this.normalizeToPointerData(tn);this.autoPreventDefault&&nn[0].isNormalized&&tn.preventDefault();for(var an=nn.length,rn=0;rn<an;rn++){var on=nn[rn],sn=this.getInteractionDataForPointerId(on),dn=this.configureInteractionEventForDOMEvent(this.eventData,on,sn);if(dn.data.originalEvent=tn,this.processInteractive(dn,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",dn),"touch"===on.pointerType)this.emit("touchstart",dn);else if("mouse"===on.pointerType||"pen"===on.pointerType){var ln=2===on.button;this.emit(ln?"rightdown":"mousedown",this.eventData)}}}},en.prototype.processPointerDown=function(tn,nn,an){var rn=tn.data,on=tn.data.identifier;if(an)if(nn.trackedPointers[on]||(nn.trackedPointers[on]=new Vt.default(on)),this.dispatchEvent(nn,"pointerdown",tn),"touch"===rn.pointerType)this.dispatchEvent(nn,"touchstart",tn);else if("mouse"===rn.pointerType||"pen"===rn.pointerType){var sn=2===rn.button;sn?nn.trackedPointers[on].rightDown=!0:nn.trackedPointers[on].leftDown=!0,this.dispatchEvent(nn,sn?"rightdown":"mousedown",tn)}},en.prototype.onPointerComplete=function(tn,nn,an){for(var rn=this.normalizeToPointerData(tn),on=rn.length,sn=tn.target===this.interactionDOMElement?"":"outside",dn=0;dn<on;dn++){var ln=rn[dn],un=this.getInteractionDataForPointerId(ln),pn=this.configureInteractionEventForDOMEvent(this.eventData,ln,un);if(pn.data.originalEvent=tn,this.processInteractive(pn,this.renderer._lastObjectRendered,an,nn||!sn),this.emit(nn?"pointercancel":"pointerup"+sn,pn),"mouse"===ln.pointerType||"pen"===ln.pointerType){var cn=2===ln.button;this.emit(cn?"rightup"+sn:"mouseup"+sn,pn)}else"touch"===ln.pointerType&&(this.emit(nn?"touchcancel":"touchend"+sn,pn),this.releaseInteractionDataForPointerId(ln.pointerId,un))}},en.prototype.onPointerCancel=function(tn){this.supportsTouchEvents&&"touch"===tn.pointerType||this.onPointerComplete(tn,!0,this.processPointerCancel)},en.prototype.processPointerCancel=function(tn,nn){var an=tn.data,rn=tn.data.identifier;void 0!==nn.trackedPointers[rn]&&(delete nn.trackedPointers[rn],this.dispatchEvent(nn,"pointercancel",tn),"touch"===an.pointerType&&this.dispatchEvent(nn,"touchcancel",tn))},en.prototype.onPointerUp=function(tn){this.supportsTouchEvents&&"touch"===tn.pointerType||this.onPointerComplete(tn,!1,this.processPointerUp)},en.prototype.processPointerUp=function(tn,nn,an){var rn=tn.data,on=tn.data.identifier,sn=nn.trackedPointers[on],dn="touch"===rn.pointerType;if("mouse"===rn.pointerType||"pen"===rn.pointerType){var ln=2===rn.button,un=Vt.default.FLAGS,pn=ln?un.RIGHT_DOWN:un.LEFT_DOWN,cn=void 0!==sn&&sn.flags&pn;an?(this.dispatchEvent(nn,ln?"rightup":"mouseup",tn),cn&&this.dispatchEvent(nn,ln?"rightclick":"click",tn)):cn&&this.dispatchEvent(nn,ln?"rightupoutside":"mouseupoutside",tn),sn&&(ln?sn.rightDown=!1:sn.leftDown=!1)}an?(this.dispatchEvent(nn,"pointerup",tn),dn&&this.dispatchEvent(nn,"touchend",tn),sn&&(this.dispatchEvent(nn,"pointertap",tn),dn&&(this.dispatchEvent(nn,"tap",tn),sn.over=!1))):sn&&(this.dispatchEvent(nn,"pointerupoutside",tn),dn&&this.dispatchEvent(nn,"touchendoutside",tn)),sn&&sn.none&&delete nn.trackedPointers[on]},en.prototype.onPointerMove=function(tn){if(!this.supportsTouchEvents||"touch"!==tn.pointerType){var nn=this.normalizeToPointerData(tn);"mouse"===nn[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var an=nn.length,rn=0;rn<an;rn++){var on=nn[rn],sn=this.getInteractionDataForPointerId(on),dn=this.configureInteractionEventForDOMEvent(this.eventData,on,sn);dn.data.originalEvent=tn;var ln="touch"!==on.pointerType||this.moveWhenInside;this.processInteractive(dn,this.renderer._lastObjectRendered,this.processPointerMove,ln),this.emit("pointermove",dn),"touch"===on.pointerType&&this.emit("touchmove",dn),"mouse"!==on.pointerType&&"pen"!==on.pointerType||this.emit("mousemove",dn)}"mouse"===nn[0].pointerType&&this.setCursorMode(this.cursor)}},en.prototype.processPointerMove=function(tn,nn,an){var rn=tn.data,on="touch"===rn.pointerType,sn="mouse"===rn.pointerType||"pen"===rn.pointerType;sn&&this.processPointerOverOut(tn,nn,an),this.moveWhenInside&&!an||(this.dispatchEvent(nn,"pointermove",tn),on&&this.dispatchEvent(nn,"touchmove",tn),sn&&this.dispatchEvent(nn,"mousemove",tn))},en.prototype.onPointerOut=function(tn){if(!this.supportsTouchEvents||"touch"!==tn.pointerType){var nn=this.normalizeToPointerData(tn)[0];"mouse"===nn.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var an=this.getInteractionDataForPointerId(nn),rn=this.configureInteractionEventForDOMEvent(this.eventData,nn,an);rn.data.originalEvent=nn,this.processInteractive(rn,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",rn),"mouse"===nn.pointerType||"pen"===nn.pointerType?this.emit("mouseout",rn):this.releaseInteractionDataForPointerId(an.identifier)}},en.prototype.processPointerOverOut=function(tn,nn,an){var rn=tn.data,on=tn.data.identifier,sn="mouse"===rn.pointerType||"pen"===rn.pointerType,dn=nn.trackedPointers[on];an&&!dn&&(dn=nn.trackedPointers[on]=new Vt.default(on)),void 0!==dn&&(an&&this.mouseOverRenderer?(dn.over||(dn.over=!0,this.dispatchEvent(nn,"pointerover",tn),sn&&this.dispatchEvent(nn,"mouseover",tn)),sn&&null===this.cursor&&(this.cursor=nn.cursor)):dn.over&&(dn.over=!1,this.dispatchEvent(nn,"pointerout",this.eventData),sn&&this.dispatchEvent(nn,"mouseout",tn),dn.none&&delete nn.trackedPointers[on]))},en.prototype.onPointerOver=function(tn){var nn=this.normalizeToPointerData(tn)[0],an=this.getInteractionDataForPointerId(nn),rn=this.configureInteractionEventForDOMEvent(this.eventData,nn,an);rn.data.originalEvent=nn,"mouse"===nn.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",rn),"mouse"!==nn.pointerType&&"pen"!==nn.pointerType||this.emit("mouseover",rn)},en.prototype.getInteractionDataForPointerId=function(tn){var nn=tn.pointerId,an;return nn===Zt||"mouse"===tn.pointerType?an=this.mouse:this.activeInteractionData[nn]?an=this.activeInteractionData[nn]:((an=this.interactionDataPool.pop()||new Wt.default).identifier=nn,this.activeInteractionData[nn]=an),an._copyEvent(tn),an},en.prototype.releaseInteractionDataForPointerId=function(tn){var nn=this.activeInteractionData[tn];nn&&(delete this.activeInteractionData[tn],nn._reset(),this.interactionDataPool.push(nn))},en.prototype.configureInteractionEventForDOMEvent=function(tn,nn,an){return tn.data=an,this.mapPositionToPoint(an.global,nn.clientX,nn.clientY),navigator.isCocoonJS&&"touch"===nn.pointerType&&(an.global.x/=this.resolution,an.global.y/=this.resolution),"touch"===nn.pointerType&&(nn.globalX=an.global.x,nn.globalY=an.global.y),an.originalEvent=nn,tn._reset(),tn},en.prototype.normalizeToPointerData=function(tn){var nn=[];if(this.supportsTouchEvents&&tn instanceof TouchEvent)for(var an=0,rn=tn.changedTouches.length,on;an<rn;an++)on=tn.changedTouches[an],void 0===on.button&&(on.button=tn.touches.length?1:0),void 0===on.buttons&&(on.buttons=tn.touches.length?1:0),void 0===on.isPrimary&&(on.isPrimary=1===tn.touches.length&&"touchstart"===tn.type),void 0===on.width&&(on.width=on.radiusX||1),void 0===on.height&&(on.height=on.radiusY||1),void 0===on.tiltX&&(on.tiltX=0),void 0===on.tiltY&&(on.tiltY=0),void 0===on.pointerType&&(on.pointerType="touch"),void 0===on.pointerId&&(on.pointerId=on.identifier||0),void 0===on.pressure&&(on.pressure=on.force||.5),on.twist=0,on.tangentialPressure=0,void 0===on.layerX&&(on.layerX=on.offsetX=on.clientX),void 0===on.layerY&&(on.layerY=on.offsetY=on.clientY),on.isNormalized=!0,nn.push(on);else!(tn instanceof MouseEvent)||this.supportsPointerEvents&&tn instanceof window.PointerEvent?nn.push(tn):(void 0===tn.isPrimary&&(tn.isPrimary=!0),void 0===tn.width&&(tn.width=1),void 0===tn.height&&(tn.height=1),void 0===tn.tiltX&&(tn.tiltX=0),void 0===tn.tiltY&&(tn.tiltY=0),void 0===tn.pointerType&&(tn.pointerType="mouse"),void 0===tn.pointerId&&(tn.pointerId=Zt),void 0===tn.pressure&&(tn.pressure=.5),tn.twist=0,tn.tangentialPressure=0,tn.isNormalized=!0,nn.push(tn));return nn},en.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},en}(qt.default);Gt.default=Jt,jt.WebGLRenderer.registerPlugin("interaction",Jt),jt.CanvasRenderer.registerPlugin("interaction",Jt)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function jt(Wt,zt){for(var Vt=0,qt;Vt<zt.length;Vt++)qt=zt[Vt],qt.enumerable=qt.enumerable||!1,qt.configurable=!0,"value"in qt&&(qt.writable=!0),Object.defineProperty(Wt,qt.key,qt)}return function(Wt,zt,Vt){return zt&&jt(Wt.prototype,zt),Vt&&jt(Wt,Vt),Wt}}(),Ht=function(){function jt(Wt){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,jt),this._pointerId=Wt,this._flags=jt.FLAGS.NONE}return jt.prototype._doSet=function(Wt,zt){this._flags=zt?this._flags|Wt:this._flags&~Wt},Yt(jt,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(Wt){this._flags=Wt}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(Wt){this._doSet(this.constructor.FLAGS.OVER,Wt)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(Wt){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,Wt)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(Wt){this._doSet(this.constructor.FLAGS.LEFT_DOWN,Wt)}}]),jt}();Gt.default=Ht,Ht.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(Bt,Xt,Gt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Gt.__esModule=!0;var Ht=Bt("./InteractionData");Object.defineProperty(Gt,"InteractionData",{enumerable:!0,get:function(){return Yt(Ht).default}});var jt=Bt("./InteractionManager");Object.defineProperty(Gt,"InteractionManager",{enumerable:!0,get:function(){return Yt(jt).default}});var Wt=Bt("./interactiveTarget");Object.defineProperty(Gt,"interactiveTarget",{enumerable:!0,get:function(){return Yt(Wt).default}});var zt=Bt("./InteractionTrackingData");Object.defineProperty(Gt,"InteractionTrackingData",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./InteractionEvent");Object.defineProperty(Gt,"InteractionEvent",{enumerable:!0,get:function(){return Yt(Vt).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(Yt){Yt?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(Bt,Xt,Gt){function Yt(Vt,qt){Vt.bitmapFont=zt.BitmapText.registerFont(Vt.data,qt)}Gt.__esModule=!0,Gt.parse=Yt,Gt.default=function(){return function(Vt,qt){if(!(Vt.data&&Vt.type===Wt.Resource.TYPE.XML))qt();else if(0!==Vt.data.getElementsByTagName("page").length&&0!==Vt.data.getElementsByTagName("info").length&&null!==Vt.data.getElementsByTagName("info")[0].getAttribute("face")){var Kt=Vt.isDataUrl?"":Ht.dirname(Vt.url);Vt.isDataUrl&&("."===Kt&&(Kt=""),this.baseUrl&&Kt&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(Kt+="/")),(Kt=Kt.replace(this.baseUrl,""))&&"/"!==Kt.charAt(Kt.length-1)&&(Kt+="/");var Zt=Kt+Vt.data.getElementsByTagName("page")[0].getAttribute("file");if(jt.utils.TextureCache[Zt])Yt(Vt,jt.utils.TextureCache[Zt]),qt();else{var Qt={crossOrigin:Vt.crossOrigin,loadType:Wt.Resource.LOAD_TYPE.IMAGE,metadata:Vt.metadata.imageMetadata,parentResource:Vt};this.add(Vt.name+"_image",Zt,Qt,function(Jt){Yt(Vt,Jt.texture),qt()})}}else qt()}};var Ht=function(Vt){if(Vt&&Vt.__esModule)return Vt;var qt={};if(null!=Vt)for(var Kt in Vt)Object.prototype.hasOwnProperty.call(Vt,Kt)&&(qt[Kt]=Vt[Kt]);return qt.default=Vt,qt}(Bt("path")),jt=Bt("../core"),Wt=Bt("resource-loader"),zt=Bt("../extras")},{"../core":65,"../extras":141,path:23,"resource-loader":36}],162:[function(Bt,Xt,Gt){function Yt(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Gt.__esModule=!0,Gt.shared=Gt.Resource=Gt.textureParser=Gt.getResourcePath=Gt.spritesheetParser=Gt.parseBitmapFontData=Gt.bitmapFontParser=Gt.Loader=void 0;var Ht=Bt("./bitmapFontParser");Object.defineProperty(Gt,"bitmapFontParser",{enumerable:!0,get:function(){return Yt(Ht).default}}),Object.defineProperty(Gt,"parseBitmapFontData",{enumerable:!0,get:function(){return Ht.parse}});var jt=Bt("./spritesheetParser");Object.defineProperty(Gt,"spritesheetParser",{enumerable:!0,get:function(){return Yt(jt).default}}),Object.defineProperty(Gt,"getResourcePath",{enumerable:!0,get:function(){return jt.getResourcePath}});var Wt=Bt("./textureParser");Object.defineProperty(Gt,"textureParser",{enumerable:!0,get:function(){return Yt(Wt).default}});var zt=Bt("resource-loader");Object.defineProperty(Gt,"Resource",{enumerable:!0,get:function(){return zt.Resource}});var Vt=Yt(Bt("../core/Application")),qt=Yt(Bt("./loader"));Gt.Loader=qt.default;var Kt=new qt.default;Kt.destroy=function(){},Gt.shared=Kt;var Zt=Vt.default.prototype;Zt._loader=null,Object.defineProperty(Zt,"loader",{get:function(){if(!this._loader){var Qt=this._options.sharedLoader;this._loader=Qt?Kt:new qt.default}return this._loader}}),Zt._parentDestroy=Zt.destroy,Zt.destroy=function(Qt){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(Qt)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(Bt,Xt,Gt){function Yt(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Gt.__esModule=!0;var Ht=Yt(Bt("resource-loader")),jt=Bt("resource-loader/lib/middlewares/parsing/blob"),Wt=Yt(Bt("eventemitter3")),zt=Yt(Bt("./textureParser")),Vt=Yt(Bt("./spritesheetParser")),qt=Yt(Bt("./bitmapFontParser")),Kt=function(Jt){function $t(en,tn){!function(rn,on){if(!(rn instanceof on))throw new TypeError("Cannot call a class as a function")}(this,$t);var nn=function(rn,on){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:rn}(this,Jt.call(this,en,tn));Wt.default.call(nn);for(var an=0;an<$t._pixiMiddleware.length;++an)nn.use($t._pixiMiddleware[an]());return nn.onStart.add(function(rn){return nn.emit("start",rn)}),nn.onProgress.add(function(rn,on){return nn.emit("progress",rn,on)}),nn.onError.add(function(rn,on,sn){return nn.emit("error",rn,on,sn)}),nn.onLoad.add(function(rn,on){return nn.emit("load",rn,on)}),nn.onComplete.add(function(rn,on){return nn.emit("complete",rn,on)}),nn}return function(en,tn){if("function"!=typeof tn&&null!==tn)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);en.prototype=Object.create(tn&&tn.prototype,{constructor:{value:en,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(en,tn):en.__proto__=tn)}($t,Jt),$t.addPixiMiddleware=function(en){$t._pixiMiddleware.push(en)},$t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},$t}(Ht.default);for(var Zt in Gt.default=Kt,Wt.default.prototype)Kt.prototype[Zt]=Wt.default.prototype[Zt];Kt._pixiMiddleware=[jt.blobMiddlewareFactory,zt.default,Vt.default,qt.default];var Qt=Ht.default.Resource;Qt.setExtensionXhrType("fnt",Qt.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(Bt,Xt,Gt){function Yt(zt,Vt){return zt.isDataUrl?zt.data.meta.image:jt.default.resolve(zt.url.replace(Vt,""),zt.data.meta.image)}Gt.__esModule=!0,Gt.default=function(){return function(zt,Vt){var qt=zt.name+"_image";if(zt.data&&zt.type===Ht.Resource.TYPE.JSON&&zt.data.frames&&!this.resources[qt]){var Kt={crossOrigin:zt.crossOrigin,loadType:Ht.Resource.LOAD_TYPE.IMAGE,metadata:zt.metadata.imageMetadata,parentResource:zt},Zt=Yt(zt,this.baseUrl);this.add(qt,Zt,Kt,function(Qt){var Jt=new Wt.Spritesheet(Qt.texture.baseTexture,zt.data,zt.url);Jt.parse(function(){zt.spritesheet=Jt,zt.textures=Jt.textures,Vt()})})}else Vt()}},Gt.getResourcePath=Yt;var Ht=Bt("resource-loader"),jt=function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("url")),Wt=Bt("../core")},{"../core":65,"resource-loader":36,url:29}],165:[function(Bt,Xt,Gt){Gt.__esModule=!0,Gt.default=function(){return function(jt,Wt){jt.data&&jt.type===Yt.Resource.TYPE.IMAGE&&(jt.texture=Ht.default.fromLoader(jt.data,jt.url,jt.name)),Wt()}};var Yt=Bt("resource-loader"),Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../core/textures/Texture"))},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function qt(Kt,Zt){for(var Qt=0,Jt;Qt<Zt.length;Qt++)Jt=Zt[Qt],Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Kt,Jt.key,Jt)}return function(Kt,Zt,Qt){return Zt&&qt(Kt.prototype,Zt),Qt&&qt(Kt,Qt),Kt}}(),Ht=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Zt in qt)Object.prototype.hasOwnProperty.call(qt,Zt)&&(Kt[Zt]=qt[Zt]);return Kt.default=qt,Kt}(Bt("../core")),jt=function(qt){return qt&&qt.__esModule?qt:{default:qt}}(Bt("../extras/TextureTransform")),Wt=new Ht.Point,zt=new Ht.Polygon,Vt=function(qt){function Kt(Zt,Qt,Jt,$t,en){!function(nn,an){if(!(nn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,Kt);var tn=function(nn,an){if(!nn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an&&("object"==typeof an||"function"==typeof an)?an:nn}(this,qt.call(this));return tn._texture=Zt,tn.uvs=Jt||new Float32Array([0,0,1,0,1,1,0,1]),tn.vertices=Qt||new Float32Array([0,0,100,0,100,100,0,100]),tn.indices=$t||new Uint16Array([0,1,3,2]),tn.dirty=0,tn.indexDirty=0,tn.blendMode=Ht.BLEND_MODES.NORMAL,tn.canvasPadding=0,tn.drawMode=en||Kt.DRAW_MODES.TRIANGLE_MESH,tn.shader=null,tn.tintRgb=new Float32Array([1,1,1]),tn._glDatas={},tn._uvTransform=new jt.default(Zt),tn.uploadUvTransform=!1,tn.pluginName="mesh",tn}return function(Zt,Qt){if("function"!=typeof Qt&&null!==Qt)throw new TypeError("Super expression must either be null or a function, not "+typeof Qt);Zt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),Qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,Qt):Zt.__proto__=Qt)}(Kt,qt),Kt.prototype._renderWebGL=function(Zt){this.refresh(),Zt.setObjectRenderer(Zt.plugins[this.pluginName]),Zt.plugins[this.pluginName].render(this)},Kt.prototype._renderCanvas=function(Zt){this.refresh(),Zt.plugins[this.pluginName].render(this)},Kt.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},Kt.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},Kt.prototype.refresh=function(Zt){this._uvTransform.update(Zt)&&this._refresh()},Kt.prototype._refresh=function(){},Kt.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},Kt.prototype.containsPoint=function(Zt){if(!this.getBounds().contains(Zt.x,Zt.y))return!1;this.worldTransform.applyInverse(Zt,Wt);for(var Qt=this.vertices,Jt=zt.points,$t=this.indices,en=this.indices.length,tn=this.drawMode===Kt.DRAW_MODES.TRIANGLES?3:1,nn=0;nn+2<en;nn+=tn){var an=2*$t[nn],rn=2*$t[nn+1],on=2*$t[nn+2];if(Jt[0]=Qt[an],Jt[1]=Qt[an+1],Jt[2]=Qt[rn],Jt[3]=Qt[rn+1],Jt[4]=Qt[on],Jt[5]=Qt[on+1],zt.contains(Wt.x,Wt.y))return!0}return!1},Yt(Kt,[{key:"texture",get:function(){return this._texture},set:function(Zt){this._texture!==Zt&&(this._texture=Zt,Zt&&(Zt.baseTexture.hasLoaded?this._onTextureUpdate():Zt.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return Ht.utils.rgb2hex(this.tintRgb)},set:function(Zt){this.tintRgb=Ht.utils.hex2rgb(Zt,this.tintRgb)}}]),Kt}(Ht.Container);Gt.default=Vt,Vt.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../extras/TextureTransform":136}],167:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Wt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&Wt(zt.prototype,Vt),qt&&Wt(zt,qt),zt}}(),Ht=10,jt=function(Wt){function zt(Vt,qt,Kt,Zt,Qt){!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,zt);var Jt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,Wt.call(this,Vt,4,4));return Jt._origWidth=Vt.orig.width,Jt._origHeight=Vt.orig.height,Jt._width=Jt._origWidth,Jt._height=Jt._origHeight,Jt.leftWidth=void 0===qt?Ht:qt,Jt.rightWidth=void 0===Zt?Ht:Zt,Jt.topHeight=void 0===Kt?Ht:Kt,Jt.bottomHeight=void 0===Qt?Ht:Qt,Jt.refresh(!0),Jt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,Wt),zt.prototype.updateHorizontalVertices=function(){var Vt=this.vertices;Vt[9]=Vt[11]=Vt[13]=Vt[15]=this._topHeight,Vt[17]=Vt[19]=Vt[21]=Vt[23]=this._height-this._bottomHeight,Vt[25]=Vt[27]=Vt[29]=Vt[31]=this._height},zt.prototype.updateVerticalVertices=function(){var Vt=this.vertices;Vt[2]=Vt[10]=Vt[18]=Vt[26]=this._leftWidth,Vt[4]=Vt[12]=Vt[20]=Vt[28]=this._width-this._rightWidth,Vt[6]=Vt[14]=Vt[22]=Vt[30]=this._width},zt.prototype._renderCanvas=function(Vt){var qt=Vt.context;qt.globalAlpha=this.worldAlpha;var Kt=this.worldTransform,Zt=Vt.resolution;Vt.roundPixels?qt.setTransform(Kt.a*Zt,Kt.b*Zt,Kt.c*Zt,Kt.d*Zt,0|Kt.tx*Zt,0|Kt.ty*Zt):qt.setTransform(Kt.a*Zt,Kt.b*Zt,Kt.c*Zt,Kt.d*Zt,Kt.tx*Zt,Kt.ty*Zt);var Qt=this._texture.baseTexture,Jt=Qt.source,$t=Qt.width,en=Qt.height;this.drawSegment(qt,Jt,$t,en,0,1,10,11),this.drawSegment(qt,Jt,$t,en,2,3,12,13),this.drawSegment(qt,Jt,$t,en,4,5,14,15),this.drawSegment(qt,Jt,$t,en,8,9,18,19),this.drawSegment(qt,Jt,$t,en,10,11,20,21),this.drawSegment(qt,Jt,$t,en,12,13,22,23),this.drawSegment(qt,Jt,$t,en,16,17,26,27),this.drawSegment(qt,Jt,$t,en,18,19,28,29),this.drawSegment(qt,Jt,$t,en,20,21,30,31)},zt.prototype.drawSegment=function(Vt,qt,Kt,Zt,Qt,Jt,$t,en){var tn=this.uvs,nn=this.vertices,an=(tn[$t]-tn[Qt])*Kt,rn=(tn[en]-tn[Jt])*Zt,on=nn[$t]-nn[Qt],sn=nn[en]-nn[Jt];1>an&&(an=1),1>rn&&(rn=1),1>on&&(on=1),1>sn&&(sn=1),Vt.drawImage(qt,tn[Qt]*Kt,tn[Jt]*Zt,an,rn,nn[Qt],nn[Jt],on,sn)},zt.prototype._refresh=function(){Wt.prototype._refresh.call(this);var Vt=this.uvs,qt=this._texture;this._origWidth=qt.orig.width,this._origHeight=qt.orig.height;var Kt=1/this._origWidth,Zt=1/this._origHeight;Vt[0]=Vt[8]=Vt[16]=Vt[24]=0,Vt[1]=Vt[3]=Vt[5]=Vt[7]=0,Vt[6]=Vt[14]=Vt[22]=Vt[30]=1,Vt[25]=Vt[27]=Vt[29]=Vt[31]=1,Vt[2]=Vt[10]=Vt[18]=Vt[26]=Kt*this._leftWidth,Vt[4]=Vt[12]=Vt[20]=Vt[28]=1-Kt*this._rightWidth,Vt[9]=Vt[11]=Vt[13]=Vt[15]=Zt*this._topHeight,Vt[17]=Vt[19]=Vt[21]=Vt[23]=1-Zt*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},Yt(zt,[{key:"width",get:function(){return this._width},set:function(Vt){this._width=Vt,this._refresh()}},{key:"height",get:function(){return this._height},set:function(Vt){this._height=Vt,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(Vt){this._leftWidth=Vt,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(Vt){this._rightWidth=Vt,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(Vt){this._topHeight=Vt,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(Vt){this._bottomHeight=Vt,this._refresh()}}]),zt}(function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./Plane")).default);Gt.default=jt},{"./Plane":168}],168:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./Mesh")),Ht=function(jt){function Wt(zt,Vt,qt){!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Wt);var Kt=function(Zt,Qt){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt&&("object"==typeof Qt||"function"==typeof Qt)?Qt:Zt}(this,jt.call(this,zt));return Kt._ready=!0,Kt.verticesX=Vt||10,Kt.verticesY=qt||10,Kt.drawMode=Yt.default.DRAW_MODES.TRIANGLES,Kt.refresh(),Kt}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(Wt,jt),Wt.prototype._refresh=function(){for(var zt=this._texture,Vt=this.verticesX*this.verticesY,qt=[],Kt=[],Zt=[],Qt=this.verticesX-1,Jt=this.verticesY-1,$t=zt.width/Qt,en=zt.height/Jt,tn=0;tn<Vt;tn++){var nn=tn%this.verticesX,an=0|tn/this.verticesX;qt.push(nn*$t,an*en),Kt.push(nn/Qt,an/Jt)}for(var on=0;on<Qt*Jt;on++){var sn=on%Qt,dn=0|on/Qt,ln=dn*this.verticesX+sn,un=dn*this.verticesX+sn+1,pn=(dn+1)*this.verticesX+sn,cn=(dn+1)*this.verticesX+sn+1;Zt.push(ln,un,pn),Zt.push(un,cn,pn)}this.vertices=new Float32Array(qt),this.uvs=new Float32Array(Kt),this.colors=new Float32Array([]),this.indices=new Uint16Array(Zt),this.indexDirty++,this.multiplyUvs()},Wt.prototype._onTextureUpdate=function(){Yt.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},Wt}(Yt.default);Gt.default=Ht},{"./Mesh":166}],169:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Ht){function jt(Wt,zt){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,jt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,Ht.call(this,Wt));return Vt.points=zt,Vt.vertices=new Float32Array(4*zt.length),Vt.uvs=new Float32Array(4*zt.length),Vt.colors=new Float32Array(2*zt.length),Vt.indices=new Uint16Array(2*zt.length),Vt.autoUpdate=!0,Vt.refresh(),Vt}return function(Wt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Wt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Wt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Wt,zt):Wt.__proto__=zt)}(jt,Ht),jt.prototype._refresh=function(){var Wt=this.points;if(!(1>Wt.length)&&this._texture._uvs){this.vertices.length/4!==Wt.length&&(this.vertices=new Float32Array(4*Wt.length),this.uvs=new Float32Array(4*Wt.length),this.colors=new Float32Array(2*Wt.length),this.indices=new Uint16Array(2*Wt.length));var zt=this.uvs,Vt=this.indices,qt=this.colors;zt[0]=0,zt[1]=0,zt[2]=0,zt[3]=1,qt[0]=1,qt[1]=1,Vt[0]=0,Vt[1]=1;for(var Kt=Wt.length,Zt=1;Zt<Kt;Zt++){var Qt=4*Zt,Jt=Zt/(Kt-1);zt[Qt]=Jt,zt[Qt+1]=0,zt[Qt+2]=Jt,zt[Qt+3]=1,qt[Qt=2*Zt]=1,qt[Qt+1]=1,Vt[Qt=2*Zt]=Qt,Vt[Qt+1]=Qt+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},jt.prototype.refreshVertices=function(){var Wt=this.points;if(!(1>Wt.length))for(var zt=Wt[0],Vt=void 0,qt=0,Kt=0,Zt=this.vertices,Qt=Wt.length,Jt=0;Jt<Qt;Jt++){var $t=Wt[Jt],en=4*Jt;Kt=-((Vt=Jt<Wt.length-1?Wt[Jt+1]:$t).x-zt.x),qt=Vt.y-zt.y;var tn=10*(1-Jt/(Qt-1));1<tn&&(tn=1);var nn=Math.sqrt(qt*qt+Kt*Kt),an=this._texture.height/2;qt/=nn,Kt/=nn,qt*=an,Kt*=an,Zt[en]=$t.x+qt,Zt[en+1]=$t.y+Kt,Zt[en+2]=$t.x-qt,Zt[en+3]=$t.y-Kt,zt=$t}},jt.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},jt}(function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("./Mesh")).default);Gt.default=Yt},{"./Mesh":166}],170:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Wt){if(Wt&&Wt.__esModule)return Wt;var zt={};if(null!=Wt)for(var Vt in Wt)Object.prototype.hasOwnProperty.call(Wt,Vt)&&(zt[Vt]=Wt[Vt]);return zt.default=Wt,zt}(Bt("../../core")),Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../Mesh")),jt=function(){function Wt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.renderer=zt}return Wt.prototype.render=function(zt){var Vt=this.renderer,qt=Vt.context,Kt=zt.worldTransform,Zt=Vt.resolution;Vt.roundPixels?qt.setTransform(Kt.a*Zt,Kt.b*Zt,Kt.c*Zt,Kt.d*Zt,0|Kt.tx*Zt,0|Kt.ty*Zt):qt.setTransform(Kt.a*Zt,Kt.b*Zt,Kt.c*Zt,Kt.d*Zt,Kt.tx*Zt,Kt.ty*Zt),Vt.setBlendMode(zt.blendMode),zt.drawMode===Ht.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(zt):this._renderTriangles(zt)},Wt.prototype._renderTriangleMesh=function(zt){for(var Vt=zt.vertices.length/2,qt=0,Kt;qt<Vt-2;qt++)Kt=2*qt,this._renderDrawTriangle(zt,Kt,Kt+2,Kt+4)},Wt.prototype._renderTriangles=function(zt){for(var Vt=zt.indices,qt=Vt.length,Kt=0;Kt<qt;Kt+=3){var Zt=2*Vt[Kt],Qt=2*Vt[Kt+1],Jt=2*Vt[Kt+2];this._renderDrawTriangle(zt,Zt,Qt,Jt)}},Wt.prototype._renderDrawTriangle=function(zt,Vt,qt,Kt){var Zt=this.renderer.context,Qt=zt.uvs,Jt=zt.vertices,$t=zt._texture;if($t.valid){var en=$t.baseTexture,tn=en.source,nn=en.width,an=en.height,rn,on,sn,dn,ln,un;if(zt.uploadUvTransform){var pn=zt._uvTransform.mapCoord;rn=(Qt[Vt]*pn.a+Qt[Vt+1]*pn.c+pn.tx)*en.width,on=(Qt[qt]*pn.a+Qt[qt+1]*pn.c+pn.tx)*en.width,sn=(Qt[Kt]*pn.a+Qt[Kt+1]*pn.c+pn.tx)*en.width,dn=(Qt[Vt]*pn.b+Qt[Vt+1]*pn.d+pn.ty)*en.height,ln=(Qt[qt]*pn.b+Qt[qt+1]*pn.d+pn.ty)*en.height,un=(Qt[Kt]*pn.b+Qt[Kt+1]*pn.d+pn.ty)*en.height}else rn=Qt[Vt]*en.width,on=Qt[qt]*en.width,sn=Qt[Kt]*en.width,dn=Qt[Vt+1]*en.height,ln=Qt[qt+1]*en.height,un=Qt[Kt+1]*en.height;var cn=Jt[Vt],hn=Jt[qt],fn=Jt[Kt],gn=Jt[Vt+1],mn=Jt[qt+1],yn=Jt[Kt+1];if(0<zt.canvasPadding){var _n=zt.canvasPadding/zt.worldTransform.a,bn=zt.canvasPadding/zt.worldTransform.d,xn=(cn+hn+fn)/3,vn=(gn+mn+yn)/3,Tn=cn-xn,En=gn-vn,Sn=Math.sqrt(Tn*Tn+En*En);cn=xn+Tn/Sn*(Sn+_n),gn=vn+En/Sn*(Sn+bn),En=mn-vn,hn=xn+(Tn=hn-xn)/(Sn=Math.sqrt(Tn*Tn+En*En))*(Sn+_n),mn=vn+En/Sn*(Sn+bn),En=yn-vn,fn=xn+(Tn=fn-xn)/(Sn=Math.sqrt(Tn*Tn+En*En))*(Sn+_n),yn=vn+En/Sn*(Sn+bn)}Zt.save(),Zt.beginPath(),Zt.moveTo(cn,gn),Zt.lineTo(hn,mn),Zt.lineTo(fn,yn),Zt.closePath(),Zt.clip();var wn=rn*ln+dn*sn+on*un-ln*sn-dn*on-rn*un,Cn=cn*ln+dn*fn+hn*un-ln*fn-dn*hn-cn*un,Pn=rn*hn+cn*sn+on*fn-hn*sn-cn*on-rn*fn,An=rn*ln*fn+dn*hn*sn+cn*on*un-cn*ln*sn-dn*on*fn-rn*hn*un,Mn=gn*ln+dn*yn+mn*un-ln*yn-dn*mn-gn*un,Rn=rn*mn+gn*sn+on*yn-mn*sn-gn*on-rn*yn,In=rn*ln*yn+dn*mn*sn+gn*on*un-gn*ln*sn-dn*on*yn-rn*mn*un;Zt.transform(Cn/wn,Mn/wn,Pn/wn,Rn/wn,An/wn,In/wn),Zt.drawImage(tn,0,0,nn*en.resolution,an*en.resolution,0,0,nn,an),Zt.restore(),this.renderer.invalidateBlendMode()}},Wt.prototype.renderMeshFlat=function(zt){var Vt=this.renderer.context,qt=zt.vertices,Kt=qt.length/2;Vt.beginPath();for(var Zt=1;Zt<Kt-2;++Zt){var Qt=2*Zt,Jt=qt[Qt],$t=qt[Qt+1],en=qt[Qt+2],tn=qt[Qt+3],nn=qt[Qt+4],an=qt[Qt+5];Vt.moveTo(Jt,$t),Vt.lineTo(en,tn),Vt.lineTo(nn,an)}Vt.fillStyle="#FF0000",Vt.fill(),Vt.closePath()},Wt.prototype.destroy=function(){this.renderer=null},Wt}();Gt.default=jt,Yt.CanvasRenderer.registerPlugin("mesh",jt)},{"../../core":65,"../Mesh":166}],171:[function(Bt,Xt,Gt){function Yt(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Gt.__esModule=!0;var Ht=Bt("./Mesh");Object.defineProperty(Gt,"Mesh",{enumerable:!0,get:function(){return Yt(Ht).default}});var jt=Bt("./webgl/MeshRenderer");Object.defineProperty(Gt,"MeshRenderer",{enumerable:!0,get:function(){return Yt(jt).default}});var Wt=Bt("./canvas/CanvasMeshRenderer");Object.defineProperty(Gt,"CanvasMeshRenderer",{enumerable:!0,get:function(){return Yt(Wt).default}});var zt=Bt("./Plane");Object.defineProperty(Gt,"Plane",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./NineSlicePlane");Object.defineProperty(Gt,"NineSlicePlane",{enumerable:!0,get:function(){return Yt(Vt).default}});var qt=Bt("./Rope");Object.defineProperty(Gt,"Rope",{enumerable:!0,get:function(){return Yt(qt).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(Bt,Xt,Gt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Gt.__esModule=!0;var Ht=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Zt in qt)Object.prototype.hasOwnProperty.call(qt,Zt)&&(Kt[Zt]=qt[Zt]);return Kt.default=qt,Kt}(Bt("../../core")),jt=Yt(Bt("pixi-gl-core")),Wt=Yt(Bt("../Mesh")),zt=(Bt("path"),Ht.Matrix.IDENTITY),Vt=function(qt){function Kt(Zt){!function(Jt,$t){if(!(Jt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Kt);var Qt=function(Jt,$t){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&("object"==typeof $t||"function"==typeof $t)?$t:Jt}(this,qt.call(this,Zt));return Qt.shader=null,Qt}return function(Zt,Qt){if("function"!=typeof Qt&&null!==Qt)throw new TypeError("Super expression must either be null or a function, not "+typeof Qt);Zt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),Qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,Qt):Zt.__proto__=Qt)}(Kt,qt),Kt.prototype.onContextChange=function(){var Zt=this.renderer.gl;this.shader=new Ht.Shader(Zt,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},Kt.prototype.render=function(Zt){var Qt=this.renderer,Jt=Qt.gl,$t=Zt._texture;if($t.valid){var en=Zt._glDatas[Qt.CONTEXT_UID];en||(Qt.bindVao(null),(en={shader:this.shader,vertexBuffer:jt.default.GLBuffer.createVertexBuffer(Jt,Zt.vertices,Jt.STREAM_DRAW),uvBuffer:jt.default.GLBuffer.createVertexBuffer(Jt,Zt.uvs,Jt.STREAM_DRAW),indexBuffer:jt.default.GLBuffer.createIndexBuffer(Jt,Zt.indices,Jt.STATIC_DRAW),vao:null,dirty:Zt.dirty,indexDirty:Zt.indexDirty}).vao=new jt.default.VertexArrayObject(Jt).addIndex(en.indexBuffer).addAttribute(en.vertexBuffer,en.shader.attributes.aVertexPosition,Jt.FLOAT,!1,8,0).addAttribute(en.uvBuffer,en.shader.attributes.aTextureCoord,Jt.FLOAT,!1,8,0),Zt._glDatas[Qt.CONTEXT_UID]=en),Qt.bindVao(en.vao),Zt.dirty!==en.dirty&&(en.dirty=Zt.dirty,en.uvBuffer.upload(Zt.uvs)),Zt.indexDirty!==en.indexDirty&&(en.indexDirty=Zt.indexDirty,en.indexBuffer.upload(Zt.indices)),en.vertexBuffer.upload(Zt.vertices),Qt.bindShader(en.shader),en.shader.uniforms.uSampler=Qt.bindTexture($t),Qt.state.setBlendMode(Ht.utils.correctBlendMode(Zt.blendMode,$t.baseTexture.premultipliedAlpha)),en.shader.uniforms.uTransform&&(Zt.uploadUvTransform?en.shader.uniforms.uTransform=Zt._uvTransform.mapCoord.toArray(!0):en.shader.uniforms.uTransform=zt.toArray(!0)),en.shader.uniforms.translationMatrix=Zt.worldTransform.toArray(!0),en.shader.uniforms.uColor=Ht.utils.premultiplyRgba(Zt.tintRgb,Zt.worldAlpha,en.shader.uniforms.uColor,$t.baseTexture.premultipliedAlpha);var tn=Zt.drawMode===Wt.default.DRAW_MODES.TRIANGLE_MESH?Jt.TRIANGLE_STRIP:Jt.TRIANGLES;en.vao.draw(tn,Zt.indices.length,0)}},Kt}(Ht.ObjectRenderer);Gt.default=Vt,Ht.WebGLRenderer.registerPlugin("mesh",Vt)},{"../../core":65,"../Mesh":166,path:23,"pixi-gl-core":12}],173:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function zt(Vt,qt){for(var Kt=0,Zt;Kt<qt.length;Kt++)Zt=qt[Kt],Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(Vt,Zt.key,Zt)}return function(Vt,qt,Kt){return qt&&zt(Vt.prototype,qt),Kt&&zt(Vt,Kt),Vt}}(),Ht=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("../core")),jt=Bt("../core/utils"),Wt=function(zt){function Vt(){var qt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,Kt=arguments[1],Zt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,Qt=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Jt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,zt.call(this));return 16384<Zt&&(Zt=16384),Zt>qt&&(Zt=qt),Jt._properties=[!1,!0,!1,!1,!1],Jt._maxSize=qt,Jt._batchSize=Zt,Jt._glBuffers={},Jt._bufferToUpdate=0,Jt.interactiveChildren=!1,Jt.blendMode=Ht.BLEND_MODES.NORMAL,Jt.autoResize=Qt,Jt.roundPixels=!0,Jt.baseTexture=null,Jt.setProperties(Kt),Jt._tint=0,Jt.tintRgb=new Float32Array(4),Jt.tint=16777215,Jt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.setProperties=function(qt){qt&&(this._properties[0]="scale"in qt?!!qt.scale:this._properties[0],this._properties[1]="position"in qt?!!qt.position:this._properties[1],this._properties[2]="rotation"in qt?!!qt.rotation:this._properties[2],this._properties[3]="uvs"in qt?!!qt.uvs:this._properties[3],this._properties[4]="alpha"in qt||"tint"in qt?!!qt.alpha||!!qt.tint:this._properties[4])},Vt.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Vt.prototype.renderWebGL=function(qt){var Kt=this;this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return Kt.onChildrenChange(0)})),qt.setObjectRenderer(qt.plugins.particle),qt.plugins.particle.render(this))},Vt.prototype.onChildrenChange=function(qt){var Kt=Math.floor(qt/this._batchSize);Kt<this._bufferToUpdate&&(this._bufferToUpdate=Kt)},Vt.prototype.renderCanvas=function(qt){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var Kt=qt.context,Zt=this.worldTransform,Qt=!0,Jt=0,$t=0,en=0,tn=0;qt.setBlendMode(this.blendMode),Kt.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var nn=0,an;nn<this.children.length;++nn)if(an=this.children[nn],an.visible){var rn=an._texture.frame;if(Kt.globalAlpha=this.worldAlpha*an.alpha,0==an.rotation%(2*Math.PI))Qt&&(Kt.setTransform(Zt.a,Zt.b,Zt.c,Zt.d,Zt.tx*qt.resolution,Zt.ty*qt.resolution),Qt=!1),Jt=an.anchor.x*(-rn.width*an.scale.x)+an.position.x+.5,$t=an.anchor.y*(-rn.height*an.scale.y)+an.position.y+.5,en=rn.width*an.scale.x,tn=rn.height*an.scale.y;else{Qt||(Qt=!0),an.displayObjectUpdateTransform();var on=an.worldTransform;qt.roundPixels?Kt.setTransform(on.a,on.b,on.c,on.d,0|on.tx*qt.resolution,0|on.ty*qt.resolution):Kt.setTransform(on.a,on.b,on.c,on.d,on.tx*qt.resolution,on.ty*qt.resolution),Jt=an.anchor.x*-rn.width+.5,$t=an.anchor.y*-rn.height+.5,en=rn.width,tn=rn.height}var sn=an._texture.baseTexture.resolution;Kt.drawImage(an._texture.baseTexture.source,rn.x*sn,rn.y*sn,rn.width*sn,rn.height*sn,Jt*qt.resolution,$t*qt.resolution,en*qt.resolution,tn*qt.resolution)}}},Vt.prototype.destroy=function(qt){if(zt.prototype.destroy.call(this,qt),this._buffers)for(var Kt=0;Kt<this._buffers.length;++Kt)this._buffers[Kt].destroy();this._properties=null,this._buffers=null},Yt(Vt,[{key:"tint",get:function(){return this._tint},set:function(qt){this._tint=qt,(0,jt.hex2rgb)(qt,this.tintRgb)}}]),Vt}(Ht.Container);Gt.default=Wt},{"../core":65,"../core/utils":124}],174:[function(Bt,Xt,Gt){function Yt(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}Gt.__esModule=!0;var Ht=Bt("./ParticleContainer");Object.defineProperty(Gt,"ParticleContainer",{enumerable:!0,get:function(){return Yt(Ht).default}});var jt=Bt("./webgl/ParticleRenderer");Object.defineProperty(Gt,"ParticleRenderer",{enumerable:!0,get:function(){return Yt(jt).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(Bt,Xt,Gt){function Yt(zt){return zt&&zt.__esModule?zt:{default:zt}}Gt.__esModule=!0;var Ht=Yt(Bt("pixi-gl-core")),jt=Yt(Bt("../../core/utils/createIndicesForQuads")),Wt=function(){function zt(Vt,qt,Kt,Zt){!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,zt),this.gl=Vt,this.size=Zt,this.dynamicProperties=[],this.staticProperties=[];for(var Qt=0,Jt;Qt<qt.length;++Qt)Jt=qt[Qt],Jt={attribute:Jt.attribute,size:Jt.size,uploadFunction:Jt.uploadFunction,unsignedByte:Jt.unsignedByte,offset:Jt.offset},Kt[Qt]?this.dynamicProperties.push(Jt):this.staticProperties.push(Jt);this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.initBuffers()}return zt.prototype.initBuffers=function(){var Vt=this.gl,qt=0;this.indices=(0,jt.default)(this.size),this.indexBuffer=Ht.default.GLBuffer.createIndexBuffer(Vt,this.indices,Vt.STATIC_DRAW),this.dynamicStride=0;for(var Kt=0,Zt;Kt<this.dynamicProperties.length;++Kt)Zt=this.dynamicProperties[Kt],Zt.offset=qt,qt+=Zt.size,this.dynamicStride+=Zt.size;var Qt=new ArrayBuffer(4*(4*(this.size*this.dynamicStride)));this.dynamicData=new Float32Array(Qt),this.dynamicDataUint32=new Uint32Array(Qt),this.dynamicBuffer=Ht.default.GLBuffer.createVertexBuffer(Vt,Qt,Vt.STREAM_DRAW);var Jt=0;this.staticStride=0;for(var $t=0,en;$t<this.staticProperties.length;++$t)en=this.staticProperties[$t],en.offset=Jt,Jt+=en.size,this.staticStride+=en.size;var tn=new ArrayBuffer(4*(4*(this.size*this.staticStride)));this.staticData=new Float32Array(tn),this.staticDataUint32=new Uint32Array(tn),this.staticBuffer=Ht.default.GLBuffer.createVertexBuffer(Vt,tn,Vt.STATIC_DRAW),this.vao=new Ht.default.VertexArrayObject(Vt).addIndex(this.indexBuffer);for(var nn=0,an;nn<this.dynamicProperties.length;++nn)an=this.dynamicProperties[nn],an.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,an.attribute,Vt.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*an.offset):this.vao.addAttribute(this.dynamicBuffer,an.attribute,Vt.FLOAT,!1,4*this.dynamicStride,4*an.offset);for(var rn=0,on;rn<this.staticProperties.length;++rn)on=this.staticProperties[rn],on.unsignedByte?this.vao.addAttribute(this.staticBuffer,on.attribute,Vt.UNSIGNED_BYTE,!0,4*this.staticStride,4*on.offset):this.vao.addAttribute(this.staticBuffer,on.attribute,Vt.FLOAT,!1,4*this.staticStride,4*on.offset)},zt.prototype.uploadDynamic=function(Vt,qt,Kt){for(var Zt=0,Qt;Zt<this.dynamicProperties.length;Zt++)Qt=this.dynamicProperties[Zt],Qt.uploadFunction(Vt,qt,Kt,Qt.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,Qt.offset);this.dynamicBuffer.upload()},zt.prototype.uploadStatic=function(Vt,qt,Kt){for(var Zt=0,Qt;Zt<this.staticProperties.length;Zt++)Qt=this.staticProperties[Zt],Qt.uploadFunction(Vt,qt,Kt,Qt.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,Qt.offset);this.staticBuffer.upload()},zt.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},zt}();Gt.default=Wt},{"../../core/utils/createIndicesForQuads":122,"pixi-gl-core":12}],176:[function(Bt,Xt,Gt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Gt.__esModule=!0;var Ht=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Zt in qt)Object.prototype.hasOwnProperty.call(qt,Zt)&&(Kt[Zt]=qt[Zt]);return Kt.default=qt,Kt}(Bt("../../core")),jt=Yt(Bt("./ParticleShader")),Wt=Yt(Bt("./ParticleBuffer")),zt=Bt("../../core/utils"),Vt=function(qt){function Kt(Zt){!function(Jt,$t){if(!(Jt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Kt);var Qt=function(Jt,$t){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&("object"==typeof $t||"function"==typeof $t)?$t:Jt}(this,qt.call(this,Zt));return Qt.shader=null,Qt.indexBuffer=null,Qt.properties=null,Qt.tempMatrix=new Ht.Matrix,Qt.CONTEXT_UID=0,Qt}return function(Zt,Qt){if("function"!=typeof Qt&&null!==Qt)throw new TypeError("Super expression must either be null or a function, not "+typeof Qt);Zt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),Qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,Qt):Zt.__proto__=Qt)}(Kt,qt),Kt.prototype.onContextChange=function(){var Zt=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new jt.default(Zt),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},Kt.prototype.start=function(){this.renderer.bindShader(this.shader)},Kt.prototype.render=function(Zt){var Qt=Zt.children,Jt=Zt._maxSize,$t=Zt._batchSize,en=this.renderer,tn=Qt.length;if(0!==tn){tn>Jt&&(tn=Jt);var nn=Zt._glBuffers[en.CONTEXT_UID];nn||(nn=Zt._glBuffers[en.CONTEXT_UID]=this.generateBuffers(Zt));var an=Qt[0]._texture.baseTexture;this.renderer.setBlendMode(Ht.utils.correctBlendMode(Zt.blendMode,an.premultipliedAlpha));var rn=en.gl,on=Zt.worldTransform.copy(this.tempMatrix);on.prepend(en._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=on.toArray(!0),this.shader.uniforms.uColor=Ht.utils.premultiplyRgba(Zt.tintRgb,Zt.worldAlpha,this.shader.uniforms.uColor,an.premultipliedAlpha),this.shader.uniforms.uSampler=en.bindTexture(an);for(var sn=0,dn=0,ln;sn<tn;sn+=$t,dn+=1){if(ln=tn-sn,ln>$t&&(ln=$t),dn>=nn.length){if(!Zt.autoResize)break;nn.push(this._generateOneMoreBuffer(Zt))}var un=nn[dn];un.uploadDynamic(Qt,sn,ln),Zt._bufferToUpdate===dn&&(un.uploadStatic(Qt,sn,ln),Zt._bufferToUpdate=dn+1),en.bindVao(un.vao),un.vao.draw(rn.TRIANGLES,6*ln)}}},Kt.prototype.generateBuffers=function(Zt){for(var Qt=this.renderer.gl,Jt=[],$t=Zt._maxSize,en=Zt._batchSize,tn=Zt._properties,nn=0;nn<$t;nn+=en)Jt.push(new Wt.default(Qt,this.properties,tn,en));return Jt},Kt.prototype._generateOneMoreBuffer=function(Zt){var Qt=this.renderer.gl,Jt=Zt._batchSize,$t=Zt._properties;return new Wt.default(Qt,this.properties,$t,Jt)},Kt.prototype.uploadVertices=function(Zt,Qt,Jt,$t,en,tn){for(var nn=0,an=0,rn=0,on=0,sn=0;sn<Jt;++sn){var dn=Zt[Qt+sn],ln=dn._texture,un=dn.scale.x,pn=dn.scale.y,cn=ln.trim,hn=ln.orig;cn?(nn=(an=cn.x-dn.anchor.x*hn.width)+cn.width,rn=(on=cn.y-dn.anchor.y*hn.height)+cn.height):(nn=hn.width*(1-dn.anchor.x),an=hn.width*-dn.anchor.x,rn=hn.height*(1-dn.anchor.y),on=hn.height*-dn.anchor.y),$t[tn]=an*un,$t[tn+1]=on*pn,$t[tn+en]=nn*un,$t[tn+en+1]=on*pn,$t[tn+2*en]=nn*un,$t[tn+2*en+1]=rn*pn,$t[tn+3*en]=an*un,$t[tn+3*en+1]=rn*pn,tn+=4*en}},Kt.prototype.uploadPosition=function(Zt,Qt,Jt,$t,en,tn){for(var nn=0,an;nn<Jt;nn++)an=Zt[Qt+nn].position,$t[tn]=an.x,$t[tn+1]=an.y,$t[tn+en]=an.x,$t[tn+en+1]=an.y,$t[tn+2*en]=an.x,$t[tn+2*en+1]=an.y,$t[tn+3*en]=an.x,$t[tn+3*en+1]=an.y,tn+=4*en},Kt.prototype.uploadRotation=function(Zt,Qt,Jt,$t,en,tn){for(var nn=0,an;nn<Jt;nn++)an=Zt[Qt+nn].rotation,$t[tn]=an,$t[tn+en]=an,$t[tn+2*en]=an,$t[tn+3*en]=an,tn+=4*en},Kt.prototype.uploadUvs=function(Zt,Qt,Jt,$t,en,tn){for(var nn=0,an;nn<Jt;++nn)an=Zt[Qt+nn]._texture._uvs,an?($t[tn]=an.x0,$t[tn+1]=an.y0,$t[tn+en]=an.x1,$t[tn+en+1]=an.y1,$t[tn+2*en]=an.x2,$t[tn+2*en+1]=an.y2,$t[tn+3*en]=an.x3,$t[tn+3*en+1]=an.y3,tn+=4*en):($t[tn]=0,$t[tn+1]=0,$t[tn+en]=0,$t[tn+en+1]=0,$t[tn+2*en]=0,$t[tn+2*en+1]=0,$t[tn+3*en]=0,$t[tn+3*en+1]=0,tn+=4*en)},Kt.prototype.uploadTint=function(Zt,Qt,Jt,$t,en,tn){for(var nn=0;nn<Jt;++nn){var an=Zt[Qt+nn],rn=an._texture.baseTexture.premultipliedAlpha,on=an.alpha,sn=1>on&&rn?(0,zt.premultiplyTint)(an._tintRGB,on):an._tintRGB+(255*on<<24);$t[tn]=sn,$t[tn+en]=sn,$t[tn+2*en]=sn,$t[tn+3*en]=sn,tn+=4*en}},Kt.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),qt.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},Kt}(Ht.ObjectRenderer);Gt.default=Vt,Ht.WebGLRenderer.registerPlugin("particle",Vt)},{"../../core":65,"../../core/utils":124,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(Ht){function jt(Wt){return function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,jt),function(zt,Vt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&("object"==typeof Vt||"function"==typeof Vt)?Vt:zt}(this,Ht.call(this,Wt,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return function(Wt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);Wt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:Wt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Wt,zt):Wt.__proto__=zt)}(jt,Ht),jt}(function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("../../core/Shader")).default);Gt.default=Yt},{"../../core/Shader":44}],178:[function(){Math.sign||(Math.sign=function(Yt){return 0===(Yt=+Yt)||isNaN(Yt)?Yt:0<Yt?1:-1})},{}],179:[function(Bt){var Yt=function(Ht){return Ht&&Ht.__esModule?Ht:{default:Ht}}(Bt("object-assign"));Object.assign||(Object.assign=Yt.default)},{"object-assign":5}],180:[function(Bt){Bt("./Object.assign"),Bt("./requestAnimationFrame"),Bt("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Object.assign":179,"./requestAnimationFrame":181}],181:[function(){(function(Yt){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!Yt.performance||!Yt.performance.now){var Ht=Date.now();Yt.performance||(Yt.performance={}),Yt.performance.now=function(){return Date.now()-Ht}}for(var jt=Date.now(),Wt=["ms","moz","webkit","o"],zt=0,Vt;zt<Wt.length&&!Yt.requestAnimationFrame;++zt)Vt=Wt[zt],Yt.requestAnimationFrame=Yt[Vt+"RequestAnimationFrame"],Yt.cancelAnimationFrame=Yt[Vt+"CancelAnimationFrame"]||Yt[Vt+"CancelRequestAnimationFrame"];Yt.requestAnimationFrame||(Yt.requestAnimationFrame=function(qt){if("function"!=typeof qt)throw new TypeError(qt+"is not a function");var Kt=Date.now(),Zt=16+jt-Kt;return 0>Zt&&(Zt=0),jt=Kt,setTimeout(function(){jt=Date.now(),qt(performance.now())},Zt)}),Yt.cancelAnimationFrame||(Yt.cancelAnimationFrame=function(qt){return clearTimeout(qt)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],182:[function(Bt,Xt,Gt){function Yt($t,en){var tn=!1;if($t&&$t._textures&&$t._textures.length)for(var nn=0;nn<$t._textures.length;nn++)if($t._textures[nn]instanceof Kt.Texture){var an=$t._textures[nn].baseTexture;-1===en.indexOf(an)&&(en.push(an),tn=!0)}return tn}function Ht($t,en){return $t instanceof Kt.BaseTexture&&(-1===en.indexOf($t)&&en.push($t),!0)}function jt($t,en){if($t._texture&&$t._texture instanceof Kt.Texture){var tn=$t._texture.baseTexture;return-1===en.indexOf(tn)&&en.push(tn),!0}return!1}function Wt($t,en){return en instanceof Kt.Text&&(en.updateText(!0),!0)}function zt($t,en){if(en instanceof Kt.TextStyle){var tn=en.toFontString();return Kt.TextMetrics.measureFont(tn),!0}return!1}function Vt($t,en){if($t instanceof Kt.Text){-1===en.indexOf($t.style)&&en.push($t.style),-1===en.indexOf($t)&&en.push($t);var tn=$t._texture.baseTexture;return-1===en.indexOf(tn)&&en.push(tn),!0}return!1}function qt($t,en){return $t instanceof Kt.TextStyle&&(-1===en.indexOf($t)&&en.push($t),!0)}Gt.__esModule=!0;var Kt=function($t){if($t&&$t.__esModule)return $t;var en={};if(null!=$t)for(var tn in $t)Object.prototype.hasOwnProperty.call($t,tn)&&(en[tn]=$t[tn]);return en.default=$t,en}(Bt("../core")),Zt=function($t){return $t&&$t.__esModule?$t:{default:$t}}(Bt("./limiters/CountLimiter")),Qt=Kt.ticker.shared;Kt.settings.UPLOADS_PER_FRAME=4;var Jt=function(){function $t(en){var tn=this;!function(nn,an){if(!(nn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,$t),this.limiter=new Zt.default(Kt.settings.UPLOADS_PER_FRAME),this.renderer=en,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){tn.queue&&tn.prepareItems()},this.registerFindHook(Vt),this.registerFindHook(qt),this.registerFindHook(Yt),this.registerFindHook(Ht),this.registerFindHook(jt),this.registerUploadHook(Wt),this.registerUploadHook(zt)}return $t.prototype.upload=function(en,tn){"function"==typeof en&&(tn=en,en=null),en&&this.add(en),this.queue.length?(tn&&this.completes.push(tn),this.ticking||(this.ticking=!0,Qt.addOnce(this.tick,this,Kt.UPDATE_PRIORITY.UTILITY))):tn&&tn()},$t.prototype.tick=function(){setTimeout(this.delayedTick,0)},$t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var en=this.queue[0],tn=!1;if(en&&!en._destroyed)for(var nn=0,an=this.uploadHooks.length;nn<an;nn++)if(this.uploadHooks[nn](this.uploadHookHelper,en)){this.queue.shift(),tn=!0;break}tn||this.queue.shift()}if(this.queue.length)Qt.addOnce(this.tick,this,Kt.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var rn=this.completes.slice(0);this.completes.length=0;for(var on=0,sn=rn.length;on<sn;on++)rn[on]()}},$t.prototype.registerFindHook=function(en){return en&&this.addHooks.push(en),this},$t.prototype.registerUploadHook=function(en){return en&&this.uploadHooks.push(en),this},$t.prototype.add=function(en){for(var tn=0,nn=this.addHooks.length;tn<nn&&!this.addHooks[tn](en,this.queue);tn++);if(en instanceof Kt.Container)for(var an=en.children.length-1;0<=an;an--)this.add(en.children[an]);return this},$t.prototype.destroy=function(){this.ticking&&Qt.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},$t}();Gt.default=Jt},{"../core":65,"./limiters/CountLimiter":185}],183:[function(Bt,Xt,Gt){function Yt(zt,Vt){if(Vt instanceof Ht.BaseTexture){var qt=Vt.source,Kt=0===qt.width?zt.canvas.width:Math.min(zt.canvas.width,qt.width),Zt=0===qt.height?zt.canvas.height:Math.min(zt.canvas.height,qt.height);return zt.ctx.drawImage(qt,0,0,Kt,Zt,0,0,zt.canvas.width,zt.canvas.height),!0}return!1}Gt.__esModule=!0;var Ht=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("../../core")),jt=16,Wt=function(zt){function Vt(qt){!function(Zt,Qt){if(!(Zt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Kt=function(Zt,Qt){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Qt&&("object"==typeof Qt||"function"==typeof Qt)?Qt:Zt}(this,zt.call(this,qt));return Kt.uploadHookHelper=Kt,Kt.canvas=document.createElement("canvas"),Kt.canvas.width=jt,Kt.canvas.height=jt,Kt.ctx=Kt.canvas.getContext("2d"),Kt.registerUploadHook(Yt),Kt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.destroy=function(){zt.prototype.destroy.call(this),this.ctx=null,this.canvas=null},Vt}(function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("../BasePrepare")).default);Gt.default=Wt,Ht.CanvasRenderer.registerPlugin("prepare",Wt)},{"../../core":65,"../BasePrepare":182}],184:[function(Bt,Xt,Gt){function Yt(qt){return qt&&qt.__esModule?qt:{default:qt}}Gt.__esModule=!0;var Ht=Bt("./webgl/WebGLPrepare");Object.defineProperty(Gt,"webgl",{enumerable:!0,get:function(){return Yt(Ht).default}});var jt=Bt("./canvas/CanvasPrepare");Object.defineProperty(Gt,"canvas",{enumerable:!0,get:function(){return Yt(jt).default}});var Wt=Bt("./BasePrepare");Object.defineProperty(Gt,"BasePrepare",{enumerable:!0,get:function(){return Yt(Wt).default}});var zt=Bt("./limiters/CountLimiter");Object.defineProperty(Gt,"CountLimiter",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./limiters/TimeLimiter");Object.defineProperty(Gt,"TimeLimiter",{enumerable:!0,get:function(){return Yt(Vt).default}})},{"./BasePrepare":182,"./canvas/CanvasPrepare":183,"./limiters/CountLimiter":185,"./limiters/TimeLimiter":186,"./webgl/WebGLPrepare":187}],185:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Ht(jt){!function(Wt,zt){if(!(Wt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.maxItemsPerFrame=jt,this.itemsLeft=0}return Ht.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},Ht.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},Ht}();Gt.default=Yt},{}],186:[function(Bt,Xt,Gt){Gt.__esModule=!0;var Yt=function(){function Ht(jt){!function(Wt,zt){if(!(Wt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Ht),this.maxMilliseconds=jt,this.frameStart=0}return Ht.prototype.beginFrame=function(){this.frameStart=Date.now()},Ht.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},Ht}();Gt.default=Yt},{}],187:[function(Bt,Xt,Gt){function Yt(Vt,qt){return qt instanceof Wt.BaseTexture&&(qt._glTextures[Vt.CONTEXT_UID]||Vt.textureManager.updateTexture(qt),!0)}function Ht(Vt,qt){return qt instanceof Wt.Graphics&&((qt.dirty||qt.clearDirty||!qt._webGL[Vt.plugins.graphics.CONTEXT_UID])&&Vt.plugins.graphics.updateGraphics(qt),!0)}function jt(Vt,qt){return Vt instanceof Wt.Graphics&&(qt.push(Vt),!0)}Gt.__esModule=!0;var Wt=function(Vt){if(Vt&&Vt.__esModule)return Vt;var qt={};if(null!=Vt)for(var Kt in Vt)Object.prototype.hasOwnProperty.call(Vt,Kt)&&(qt[Kt]=Vt[Kt]);return qt.default=Vt,qt}(Bt("../../core")),zt=function(Vt){function qt(Kt){!function(Qt,Jt){if(!(Qt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,qt);var Zt=function(Qt,Jt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Qt}(this,Vt.call(this,Kt));return Zt.uploadHookHelper=Zt.renderer,Zt.registerFindHook(jt),Zt.registerUploadHook(Yt),Zt.registerUploadHook(Ht),Zt}return function(Kt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Kt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Zt):Kt.__proto__=Zt)}(qt,Vt),qt}(function(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}(Bt("../BasePrepare")).default);Gt.default=zt,Wt.WebGLRenderer.registerPlugin("prepare",zt)},{"../../core":65,"../BasePrepare":182}],188:[function(Bt,Xt,Gt){(function(Yt){function Ht(an){if(an&&an.__esModule)return an;var rn={};if(null!=an)for(var on in an)Object.prototype.hasOwnProperty.call(an,on)&&(rn[on]=an[on]);return rn.default=an,rn}Gt.__esModule=!0,Gt.loader=Gt.prepare=Gt.particles=Gt.mesh=Gt.loaders=Gt.interaction=Gt.filters=Gt.extras=Gt.extract=Gt.accessibility=void 0;var jt=Bt("./polyfill");Object.keys(jt).forEach(function(an){"default"!==an&&"__esModule"!==an&&Object.defineProperty(Gt,an,{enumerable:!0,get:function(){return jt[an]}})});var Wt=Bt("./core");Object.keys(Wt).forEach(function(an){"default"!==an&&"__esModule"!==an&&Object.defineProperty(Gt,an,{enumerable:!0,get:function(){return Wt[an]}})});var zt=function(an){return an&&an.__esModule?an:{default:an}}(Bt("./deprecation")),Vt=Ht(Bt("./accessibility")),qt=Ht(Bt("./extract")),Kt=Ht(Bt("./extras")),Zt=Ht(Bt("./filters")),Qt=Ht(Bt("./interaction")),Jt=Ht(Bt("./loaders")),$t=Ht(Bt("./mesh")),en=Ht(Bt("./particles")),tn=Ht(Bt("./prepare"));Wt.utils.mixins.performMixins();var nn=Jt.shared||null;Gt.accessibility=Vt,Gt.extract=qt,Gt.extras=Kt,Gt.filters=Zt,Gt.interaction=Qt,Gt.loaders=Jt,Gt.mesh=$t,Gt.particles=en,Gt.prepare=tn,Gt.loader=nn,"function"==typeof zt.default&&(0,zt.default)(Gt),Yt.PIXI=Gt}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./accessibility":42,"./core":65,"./deprecation":130,"./extract":132,"./extras":141,"./filters":152,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":180,"./prepare":184}]},{},[188])(188)}),function(){var Bt=function(){this.init()};Bt.prototype={init:function(){var Kt=this||Xt;return Kt._counter=1e3,Kt._codecs={},Kt._howls=[],Kt._muted=!1,Kt._volume=1,Kt._canPlayEvent="canplaythrough",Kt._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,Kt.masterGain=null,Kt.noAudio=!1,Kt.usingWebAudio=!0,Kt.autoSuspend=!0,Kt.ctx=null,Kt.mobileAutoEnable=!0,Kt._setup(),Kt},volume:function(Kt){var Zt=this||Xt;if(Kt=parseFloat(Kt),Zt.ctx||qt(),void 0!==Kt&&0<=Kt&&1>=Kt){if(Zt._volume=Kt,Zt._muted)return Zt;Zt.usingWebAudio&&(Zt.masterGain.gain.value=Kt);for(var Qt=0;Qt<Zt._howls.length;Qt++)if(!Zt._howls[Qt]._webAudio)for(var Jt=Zt._howls[Qt]._getSoundIds(),$t=0,en;$t<Jt.length;$t++)en=Zt._howls[Qt]._soundById(Jt[$t]),en&&en._node&&(en._node.volume=en._volume*Kt);return Zt}return Zt._volume},mute:function(Kt){var Zt=this||Xt;Zt.ctx||qt(),Zt._muted=Kt,Zt.usingWebAudio&&(Zt.masterGain.gain.value=Kt?0:Zt._volume);for(var Qt=0;Qt<Zt._howls.length;Qt++)if(!Zt._howls[Qt]._webAudio)for(var Jt=Zt._howls[Qt]._getSoundIds(),$t=0,en;$t<Jt.length;$t++)en=Zt._howls[Qt]._soundById(Jt[$t]),en&&en._node&&(en._node.muted=!!Kt||en._muted);return Zt},unload:function(){for(var Kt=this||Xt,Zt=Kt._howls.length-1;0<=Zt;Zt--)Kt._howls[Zt].unload();return Kt.usingWebAudio&&Kt.ctx&&void 0!==Kt.ctx.close&&(Kt.ctx.close(),Kt.ctx=null,qt()),Kt},codecs:function(Kt){return(this||Xt)._codecs[Kt.replace(/^x-/,"")]},_setup:function(){var Kt=this||Xt;if(Kt.state=Kt.ctx?Kt.ctx.state||"running":"running",Kt._autoSuspend(),!Kt.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===new Audio().oncanplaythrough&&(Kt._canPlayEvent="canplay")}catch(Zt){Kt.noAudio=!0}else Kt.noAudio=!0;try{new Audio().muted&&(Kt.noAudio=!0)}catch(Zt){}return Kt.noAudio||Kt._setupCodecs(),Kt},_setupCodecs:function(){var Kt=this||Xt,Zt=null;try{Zt="undefined"==typeof Audio?null:new Audio}catch(en){return Kt}if(!Zt||"function"!=typeof Zt.canPlayType)return Kt;var Qt=Zt.canPlayType("audio/mpeg;").replace(/^no$/,""),Jt=Kt._navigator&&Kt._navigator.userAgent.match(/OPR\/([0-6].)/g),$t=Jt&&33>parseInt(Jt[0].split("/")[1],10);return Kt._codecs={mp3:!$t&&(Qt||Zt.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!Qt,opus:!!Zt.canPlayType("audio/ogg; codecs=\"opus\"").replace(/^no$/,""),ogg:!!Zt.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/,""),oga:!!Zt.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/,""),wav:!!Zt.canPlayType("audio/wav; codecs=\"1\"").replace(/^no$/,""),aac:!!Zt.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!Zt.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(Zt.canPlayType("audio/x-m4a;")||Zt.canPlayType("audio/m4a;")||Zt.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(Zt.canPlayType("audio/x-mp4;")||Zt.canPlayType("audio/mp4;")||Zt.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!Zt.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/,""),webm:!!Zt.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/,""),dolby:!!Zt.canPlayType("audio/mp4; codecs=\"ec-3\"").replace(/^no$/,""),flac:!!(Zt.canPlayType("audio/x-flac;")||Zt.canPlayType("audio/flac;")).replace(/^no$/,"")},Kt},_enableMobileAudio:function(){var Kt=this||Xt,Zt=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(Kt._navigator&&Kt._navigator.userAgent),Qt=!!("ontouchend"in window||Kt._navigator&&0<Kt._navigator.maxTouchPoints||Kt._navigator&&0<Kt._navigator.msMaxTouchPoints);if(!Kt._mobileEnabled&&Kt.ctx&&(Zt||Qt)){Kt._mobileEnabled=!1,Kt._mobileUnloaded||44100===Kt.ctx.sampleRate||(Kt._mobileUnloaded=!0,Kt.unload()),Kt._scratchBuffer=Kt.ctx.createBuffer(1,1,22050);var Jt=function(){Xt._autoResume();var $t=Kt.ctx.createBufferSource();$t.buffer=Kt._scratchBuffer,$t.connect(Kt.ctx.destination),void 0===$t.start?$t.noteOn(0):$t.start(0),"function"==typeof Kt.ctx.resume&&Kt.ctx.resume(),$t.onended=function(){$t.disconnect(0),Kt._mobileEnabled=!0,Kt.mobileAutoEnable=!1,document.removeEventListener("touchstart",Jt,!0),document.removeEventListener("touchend",Jt,!0)}};return document.addEventListener("touchstart",Jt,!0),document.addEventListener("touchend",Jt,!0),Kt}},_autoSuspend:function(){var Kt=this;if(Kt.autoSuspend&&Kt.ctx&&void 0!==Kt.ctx.suspend&&Xt.usingWebAudio){for(var Zt=0;Zt<Kt._howls.length;Zt++)if(Kt._howls[Zt]._webAudio)for(var Qt=0;Qt<Kt._howls[Zt]._sounds.length;Qt++)if(!Kt._howls[Zt]._sounds[Qt]._paused)return Kt;return Kt._suspendTimer&&clearTimeout(Kt._suspendTimer),Kt._suspendTimer=setTimeout(function(){Kt.autoSuspend&&(Kt._suspendTimer=null,Kt.state="suspending",Kt.ctx.suspend().then(function(){Kt.state="suspended",Kt._resumeAfterSuspend&&(delete Kt._resumeAfterSuspend,Kt._autoResume())}))},3e4),Kt}},_autoResume:function(){var Kt=this;if(Kt.ctx&&void 0!==Kt.ctx.resume&&Xt.usingWebAudio)return"running"===Kt.state&&Kt._suspendTimer?(clearTimeout(Kt._suspendTimer),Kt._suspendTimer=null):"suspended"===Kt.state?(Kt.ctx.resume().then(function(){Kt.state="running";for(var Zt=0;Zt<Kt._howls.length;Zt++)Kt._howls[Zt]._emit("resume")}),Kt._suspendTimer&&(clearTimeout(Kt._suspendTimer),Kt._suspendTimer=null)):"suspending"===Kt.state&&(Kt._resumeAfterSuspend=!0),Kt}};var Xt=new Bt,Gt=function(Kt){Kt.src&&0!==Kt.src.length?this.init(Kt):console.error("An array of source files must be passed with any new Howl.")};Gt.prototype={init:function(Kt){var Zt=this;return Xt.ctx||qt(),Zt._autoplay=Kt.autoplay||!1,Zt._format="string"==typeof Kt.format?[Kt.format]:Kt.format,Zt._html5=Kt.html5||!1,Zt._muted=Kt.mute||!1,Zt._loop=Kt.loop||!1,Zt._pool=Kt.pool||5,Zt._preload="boolean"!=typeof Kt.preload||Kt.preload,Zt._rate=Kt.rate||1,Zt._sprite=Kt.sprite||{},Zt._src="string"==typeof Kt.src?[Kt.src]:Kt.src,Zt._volume=void 0===Kt.volume?1:Kt.volume,Zt._xhrWithCredentials=Kt.xhrWithCredentials||!1,Zt._duration=0,Zt._state="unloaded",Zt._sounds=[],Zt._endTimers={},Zt._queue=[],Zt._onend=Kt.onend?[{fn:Kt.onend}]:[],Zt._onfade=Kt.onfade?[{fn:Kt.onfade}]:[],Zt._onload=Kt.onload?[{fn:Kt.onload}]:[],Zt._onloaderror=Kt.onloaderror?[{fn:Kt.onloaderror}]:[],Zt._onplayerror=Kt.onplayerror?[{fn:Kt.onplayerror}]:[],Zt._onpause=Kt.onpause?[{fn:Kt.onpause}]:[],Zt._onplay=Kt.onplay?[{fn:Kt.onplay}]:[],Zt._onstop=Kt.onstop?[{fn:Kt.onstop}]:[],Zt._onmute=Kt.onmute?[{fn:Kt.onmute}]:[],Zt._onvolume=Kt.onvolume?[{fn:Kt.onvolume}]:[],Zt._onrate=Kt.onrate?[{fn:Kt.onrate}]:[],Zt._onseek=Kt.onseek?[{fn:Kt.onseek}]:[],Zt._onresume=[],Zt._webAudio=Xt.usingWebAudio&&!Zt._html5,void 0!==Xt.ctx&&Xt.ctx&&Xt.mobileAutoEnable&&Xt._enableMobileAudio(),Xt._howls.push(Zt),Zt._autoplay&&Zt._queue.push({event:"play",action:function(){Zt.play()}}),Zt._preload&&Zt.load(),Zt},load:function(){var Kt=null;if(Xt.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var Zt=0;Zt<this._src.length;Zt++){var Qt,Jt;if(this._format&&this._format[Zt])Qt=this._format[Zt];else{if("string"!=typeof(Jt=this._src[Zt])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(Qt=/^data:audio\/([^;,]+);/i.exec(Jt))||(Qt=/\.([^.]+)$/.exec(Jt.split("?",1)[0])),Qt&&(Qt=Qt[1].toLowerCase())}if(Qt||console.warn("No file extension was found. Consider using the \"format\" property or specify an extension."),Qt&&Xt.codecs(Qt)){Kt=this._src[Zt];break}}if(Kt)return this._src=Kt,this._state="loading","https:"===window.location.protocol&&"http:"===Kt.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new Yt(this),this._webAudio&&jt(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(Kt,Zt){var Qt=this,Jt=null;if("number"==typeof Kt)Jt=Kt,Kt=null;else{if("string"==typeof Kt&&"loaded"===Qt._state&&!Qt._sprite[Kt])return null;if(void 0===Kt){Kt="__default";for(var $t=0,en=0;en<Qt._sounds.length;en++)Qt._sounds[en]._paused&&!Qt._sounds[en]._ended&&($t++,Jt=Qt._sounds[en]._id);1===$t?Kt=null:Jt=null}}var tn=Jt?Qt._soundById(Jt):Qt._inactiveSound();if(!tn)return null;if(Jt&&!Kt&&(Kt=tn._sprite||"__default"),"loaded"!==Qt._state){tn._sprite=Kt,tn._ended=!1;var nn=tn._id;return Qt._queue.push({event:"play",action:function(){Qt.play(nn)}}),nn}if(Jt&&!tn._paused)return Zt||setTimeout(function(){Qt._emit("play",tn._id)},0),tn._id;Qt._webAudio&&Xt._autoResume();var an=Math.max(0,0<tn._seek?tn._seek:Qt._sprite[Kt][0]/1e3),rn=Math.max(0,(Qt._sprite[Kt][0]+Qt._sprite[Kt][1])/1e3-an),on=1e3*rn/Math.abs(tn._rate);tn._paused=!1,tn._ended=!1,tn._sprite=Kt,tn._seek=an,tn._start=Qt._sprite[Kt][0]/1e3,tn._stop=(Qt._sprite[Kt][0]+Qt._sprite[Kt][1])/1e3,tn._loop=tn._loop||Qt._sprite[Kt][2];var sn=tn._node;if(Qt._webAudio){var dn=function(){Qt._refreshBuffer(tn);var cn=tn._muted||Qt._muted?0:tn._volume;sn.gain.setValueAtTime(cn,Xt.ctx.currentTime),tn._playStart=Xt.ctx.currentTime,void 0===sn.bufferSource.start?tn._loop?sn.bufferSource.noteGrainOn(0,an,86400):sn.bufferSource.noteGrainOn(0,an,rn):tn._loop?sn.bufferSource.start(0,an,86400):sn.bufferSource.start(0,an,rn),on!=1/0&&(Qt._endTimers[tn._id]=setTimeout(Qt._ended.bind(Qt,tn),on)),Zt||setTimeout(function(){Qt._emit("play",tn._id)},0)};"running"===Xt.state?dn():(Qt.once("resume",dn),Qt._clearTimer(tn._id))}else{var ln=function(){sn.currentTime=an,sn.muted=tn._muted||Qt._muted||Xt._muted||sn.muted,sn.volume=tn._volume*Xt.volume(),sn.playbackRate=tn._rate;try{if(sn.play(),sn.paused)return void Qt._emit("playerror",tn._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");on!=1/0&&(Qt._endTimers[tn._id]=setTimeout(Qt._ended.bind(Qt,tn),on)),Zt||Qt._emit("play",tn._id)}catch(cn){Qt._emit("playerror",tn._id,cn)}},un=window&&window.ejecta||!sn.readyState&&Xt._navigator.isCocoonJS;if(4===sn.readyState||un)ln();else{var pn=function(){ln(),sn.removeEventListener(Xt._canPlayEvent,pn,!1)};sn.addEventListener(Xt._canPlayEvent,pn,!1),Qt._clearTimer(tn._id)}}return tn._id},pause:function(Kt){var Zt=this;if("loaded"!==Zt._state)return Zt._queue.push({event:"pause",action:function(){Zt.pause(Kt)}}),Zt;for(var Qt=Zt._getSoundIds(Kt),Jt=0;Jt<Qt.length;Jt++){Zt._clearTimer(Qt[Jt]);var $t=Zt._soundById(Qt[Jt]);if($t&&!$t._paused&&($t._seek=Zt.seek(Qt[Jt]),$t._rateSeek=0,$t._paused=!0,Zt._stopFade(Qt[Jt]),$t._node))if(Zt._webAudio){if(!$t._node.bufferSource)continue;void 0===$t._node.bufferSource.stop?$t._node.bufferSource.noteOff(0):$t._node.bufferSource.stop(0),Zt._cleanBuffer($t._node)}else isNaN($t._node.duration)&&$t._node.duration!==1/0||$t._node.pause();arguments[1]||Zt._emit("pause",$t?$t._id:null)}return Zt},stop:function(Kt,Zt){var Qt=this;if("loaded"!==Qt._state)return Qt._queue.push({event:"stop",action:function(){Qt.stop(Kt)}}),Qt;for(var Jt=Qt._getSoundIds(Kt),$t=0;$t<Jt.length;$t++){Qt._clearTimer(Jt[$t]);var en=Qt._soundById(Jt[$t]);en&&(en._seek=en._start||0,en._rateSeek=0,en._paused=!0,en._ended=!0,Qt._stopFade(Jt[$t]),en._node&&(Qt._webAudio?en._node.bufferSource&&(void 0===en._node.bufferSource.stop?en._node.bufferSource.noteOff(0):en._node.bufferSource.stop(0),en._panner&&(en._panner.disconnect(),en._panner=null),Qt._cleanBuffer(en._node)):isNaN(en._node.duration)&&en._node.duration!==1/0||(en._node.currentTime=en._start||0,en._node.pause())),Zt||Qt._emit("stop",en._id))}return Qt},mute:function(Kt,Zt){var Qt=this;if("loaded"!==Qt._state)return Qt._queue.push({event:"mute",action:function(){Qt.mute(Kt,Zt)}}),Qt;if(void 0===Zt){if("boolean"!=typeof Kt)return Qt._muted;Qt._muted=Kt}for(var Jt=Qt._getSoundIds(Zt),$t=0,en;$t<Jt.length;$t++)en=Qt._soundById(Jt[$t]),en&&(en._muted=Kt,Qt._webAudio&&en._node?en._node.gain.setValueAtTime(Kt?0:en._volume,Xt.ctx.currentTime):en._node&&(en._node.muted=!!Xt._muted||Kt),Qt._emit("mute",en._id));return Qt},volume:function(){var Qt=this,Jt=arguments,Kt,Zt;if(0===Jt.length)return Qt._volume;1===Jt.length||2===Jt.length&&void 0===Jt[1]?0<=Qt._getSoundIds().indexOf(Jt[0])?Zt=parseInt(Jt[0],10):Kt=parseFloat(Jt[0]):2<=Jt.length&&(Kt=parseFloat(Jt[0]),Zt=parseInt(Jt[1],10));var $t;if(!(void 0!==Kt&&0<=Kt&&1>=Kt))return($t=Zt?Qt._soundById(Zt):Qt._sounds[0])?$t._volume:0;if("loaded"!==Qt._state)return Qt._queue.push({event:"volume",action:function(){Qt.volume.apply(Qt,Jt)}}),Qt;void 0===Zt&&(Qt._volume=Kt),Zt=Qt._getSoundIds(Zt);for(var en=0;en<Zt.length;en++)($t=Qt._soundById(Zt[en]))&&($t._volume=Kt,Jt[2]||Qt._stopFade(Zt[en]),Qt._webAudio&&$t._node&&!$t._muted?$t._node.gain.setValueAtTime(Kt,Xt.ctx.currentTime):$t._node&&!$t._muted&&($t._node.volume=Kt*Xt.volume()),Qt._emit("volume",$t._id));return Qt},fade:function(Kt,Zt,Qt,Jt,$t){var en=this;if("loaded"!==en._state)return en._queue.push({event:"fade",action:function(){en.fade(Kt,Zt,Qt,Jt)}}),en;null==$t&&en.volume(Kt,Jt);for(var tn=en._getSoundIds(Jt),nn=0,an;nn<tn.length;nn++)if(an=en._soundById(tn[nn]),an&&(Jt||en._stopFade(tn[nn]),en._webAudio&&!an._muted)){var rn=Xt.ctx.currentTime;an._volume=Kt,null==$t&&an._node.gain.setValueAtTime(Kt,rn),an._node.gain.linearRampToValueAtTime(Zt,rn+Qt/1e3)}return en},_startFadeInterval:function(Kt,Zt,Qt,Jt,$t){var en=this,tn=Zt,nn=Zt>Qt?"out":"in",an=Math.abs(Zt-Qt)/.01,rn=0<an?Jt/an:Jt;4>rn&&(an=Math.ceil(an/(4/rn)),rn=4),Kt._interval=setInterval(function(){0<an&&(tn+="in"==nn?.01:-.01),tn=Math.max(0,tn),tn=Math.min(1,tn),tn=Math.round(100*tn)/100,en._webAudio?(void 0===$t&&(en._volume=tn),Kt._volume=tn):en.volume(tn,Kt._id,!0),(Qt<Zt&&tn<=Qt||Qt>Zt&&tn>=Qt)&&(clearInterval(Kt._interval),Kt._interval=null,en.volume(Qt,Kt._id),en._emit("fade",Kt._id))},rn)},_stopFade:function(Kt){var Zt=this._soundById(Kt);return Zt&&Zt._interval&&(this._webAudio&&Zt._node.gain.cancelScheduledValues(Xt.ctx.currentTime),clearInterval(Zt._interval),Zt._interval=null,this._emit("fade",Kt)),this},loop:function(){var Jt=arguments,Kt,Zt,Qt;if(0===Jt.length)return this._loop;if(1===Jt.length){if("boolean"!=typeof Jt[0])return!!(Qt=this._soundById(parseInt(Jt[0],10)))&&Qt._loop;Kt=Jt[0],this._loop=Kt}else 2===Jt.length&&(Kt=Jt[0],Zt=parseInt(Jt[1],10));for(var $t=this._getSoundIds(Zt),en=0;en<$t.length;en++)(Qt=this._soundById($t[en]))&&(Qt._loop=Kt,this._webAudio&&Qt._node&&Qt._node.bufferSource&&(Qt._node.bufferSource.loop=Kt,Kt&&(Qt._node.bufferSource.loopStart=Qt._start||0,Qt._node.bufferSource.loopEnd=Qt._stop)));return this},rate:function(){var Qt=this,Jt=arguments,Kt,Zt;0===Jt.length?Zt=Qt._sounds[0]._id:1===Jt.length?0<=Qt._getSoundIds().indexOf(Jt[0])?Zt=parseInt(Jt[0],10):Kt=parseFloat(Jt[0]):2===Jt.length&&(Kt=parseFloat(Jt[0]),Zt=parseInt(Jt[1],10));var $t;if("number"!=typeof Kt)return($t=Qt._soundById(Zt))?$t._rate:Qt._rate;if("loaded"!==Qt._state)return Qt._queue.push({event:"rate",action:function(){Qt.rate.apply(Qt,Jt)}}),Qt;void 0===Zt&&(Qt._rate=Kt),Zt=Qt._getSoundIds(Zt);for(var en=0;en<Zt.length;en++)if($t=Qt._soundById(Zt[en])){$t._rateSeek=Qt.seek(Zt[en]),$t._playStart=Qt._webAudio?Xt.ctx.currentTime:$t._playStart,$t._rate=Kt,Qt._webAudio&&$t._node&&$t._node.bufferSource?$t._node.bufferSource.playbackRate.value=Kt:$t._node&&($t._node.playbackRate=Kt);var tn=Qt.seek(Zt[en]),nn=1e3*((Qt._sprite[$t._sprite][0]+Qt._sprite[$t._sprite][1])/1e3-tn)/Math.abs($t._rate);!Qt._endTimers[Zt[en]]&&$t._paused||(Qt._clearTimer(Zt[en]),Qt._endTimers[Zt[en]]=setTimeout(Qt._ended.bind(Qt,$t),nn)),Qt._emit("rate",$t._id)}return Qt},seek:function(){var Qt=this,Jt=arguments,Kt,Zt;if(0===Jt.length?Zt=Qt._sounds[0]._id:1===Jt.length?0<=Qt._getSoundIds().indexOf(Jt[0])?Zt=parseInt(Jt[0],10):Qt._sounds.length&&(Zt=Qt._sounds[0]._id,Kt=parseFloat(Jt[0])):2===Jt.length&&(Kt=parseFloat(Jt[0]),Zt=parseInt(Jt[1],10)),void 0===Zt)return Qt;if("loaded"!==Qt._state)return Qt._queue.push({event:"seek",action:function(){Qt.seek.apply(Qt,Jt)}}),Qt;var $t=Qt._soundById(Zt);if($t){if(!("number"==typeof Kt&&0<=Kt)){if(Qt._webAudio){var en=Qt.playing(Zt)?Xt.ctx.currentTime-$t._playStart:0,tn=$t._rateSeek?$t._rateSeek-$t._seek:0;return $t._seek+(tn+en*Math.abs($t._rate))}return $t._node.currentTime}var nn=Qt.playing(Zt);nn&&Qt.pause(Zt,!0),$t._seek=Kt,$t._ended=!1,Qt._clearTimer(Zt),nn&&Qt.play(Zt,!0),!Qt._webAudio&&$t._node&&($t._node.currentTime=Kt),Qt._emit("seek",Zt)}return Qt},playing:function(Kt){if("number"==typeof Kt){var Zt=this._soundById(Kt);return!!Zt&&!Zt._paused}for(var Qt=0;Qt<this._sounds.length;Qt++)if(!this._sounds[Qt]._paused)return!0;return!1},duration:function(Kt){var Zt=this._duration,Qt=this._soundById(Kt);return Qt&&(Zt=this._sprite[Qt._sprite][1]/1e3),Zt},state:function(){return this._state},unload:function(){for(var Kt=this,Zt=Kt._sounds,Qt=0;Qt<Zt.length;Qt++){(Zt[Qt]._paused||Kt.stop(Zt[Qt]._id),!Kt._webAudio)&&(/MSIE |Trident\//.test(Xt._navigator&&Xt._navigator.userAgent)||(Zt[Qt]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),Zt[Qt]._node.removeEventListener("error",Zt[Qt]._errorFn,!1),Zt[Qt]._node.removeEventListener(Xt._canPlayEvent,Zt[Qt]._loadFn,!1)),delete Zt[Qt]._node,Kt._clearTimer(Zt[Qt]._id);var Jt=Xt._howls.indexOf(Kt);0<=Jt&&Xt._howls.splice(Jt,1)}var $t=!0;for(Qt=0;Qt<Xt._howls.length;Qt++)if(Xt._howls[Qt]._src===Kt._src){$t=!1;break}return Ht&&$t&&delete Ht[Kt._src],Xt.noAudio=!1,Kt._state="unloaded",Kt._sounds=[],Kt=null,null},on:function(Kt,Zt,Qt,Jt){var $t=this["_on"+Kt];return"function"==typeof Zt&&$t.push(Jt?{id:Qt,fn:Zt,once:Jt}:{id:Qt,fn:Zt}),this},off:function(Kt,Zt,Qt){var Jt=this["_on"+Kt],$t=0;if("number"==typeof Zt&&(Qt=Zt,Zt=null),Zt||Qt)for($t=0;$t<Jt.length;$t++){var en=Qt===Jt[$t].id;if(Zt===Jt[$t].fn&&en||!Zt&&en){Jt.splice($t,1);break}}else if(Kt)this["_on"+Kt]=[];else{var tn=Object.keys(this);for($t=0;$t<tn.length;$t++)0===tn[$t].indexOf("_on")&&Array.isArray(this[tn[$t]])&&(this[tn[$t]]=[])}return this},once:function(Kt,Zt,Qt){return this.on(Kt,Zt,Qt,1),this},_emit:function(Kt,Zt,Qt){for(var Jt=this["_on"+Kt],$t=Jt.length-1;0<=$t;$t--)Jt[$t].id&&Jt[$t].id!==Zt&&"load"!==Kt||(setTimeout(function(en){en.call(this,Zt,Qt)}.bind(this,Jt[$t].fn),0),Jt[$t].once&&this.off(Kt,Jt[$t].fn,Jt[$t].id));return this},_loadQueue:function(){var Kt=this;if(0<Kt._queue.length){var Zt=Kt._queue[0];Kt.once(Zt.event,function(){Kt._queue.shift(),Kt._loadQueue()}),Zt.action()}return Kt},_ended:function(Kt){var Zt=Kt._sprite;if(!this._webAudio&&Kt._node&&!Kt._node.paused)return setTimeout(this._ended.bind(this,Kt),100),this;var Qt=Kt._loop||this._sprite[Zt][2];if(this._emit("end",Kt._id),!this._webAudio&&Qt&&this.stop(Kt._id,!0).play(Kt._id),this._webAudio&&Qt){this._emit("play",Kt._id),Kt._seek=Kt._start||0,Kt._rateSeek=0,Kt._playStart=Xt.ctx.currentTime;var Jt=1e3*(Kt._stop-Kt._start)/Math.abs(Kt._rate);this._endTimers[Kt._id]=setTimeout(this._ended.bind(this,Kt),Jt)}return this._webAudio&&!Qt&&(Kt._paused=!0,Kt._ended=!0,Kt._seek=Kt._start||0,Kt._rateSeek=0,this._clearTimer(Kt._id),this._cleanBuffer(Kt._node),Xt._autoSuspend()),this._webAudio||Qt||this.stop(Kt._id),this},_clearTimer:function(Kt){return this._endTimers[Kt]&&(clearTimeout(this._endTimers[Kt]),delete this._endTimers[Kt]),this},_soundById:function(Kt){for(var Zt=0;Zt<this._sounds.length;Zt++)if(Kt===this._sounds[Zt]._id)return this._sounds[Zt];return null},_inactiveSound:function(){this._drain();for(var Kt=0;Kt<this._sounds.length;Kt++)if(this._sounds[Kt]._ended)return this._sounds[Kt].reset();return new Yt(this)},_drain:function(){var Kt=this._pool,Zt=0,Qt=0;if(!(this._sounds.length<Kt)){for(Qt=0;Qt<this._sounds.length;Qt++)this._sounds[Qt]._ended&&Zt++;for(Qt=this._sounds.length-1;0<=Qt;Qt--){if(Zt<=Kt)return;this._sounds[Qt]._ended&&(this._webAudio&&this._sounds[Qt]._node&&this._sounds[Qt]._node.disconnect(0),this._sounds.splice(Qt,1),Zt--)}}},_getSoundIds:function(Kt){if(void 0===Kt){for(var Zt=[],Qt=0;Qt<this._sounds.length;Qt++)Zt.push(this._sounds[Qt]._id);return Zt}return[Kt]},_refreshBuffer:function(Kt){return Kt._node.bufferSource=Xt.ctx.createBufferSource(),Kt._node.bufferSource.buffer=Ht[this._src],Kt._panner?Kt._node.bufferSource.connect(Kt._panner):Kt._node.bufferSource.connect(Kt._node),Kt._node.bufferSource.loop=Kt._loop,Kt._loop&&(Kt._node.bufferSource.loopStart=Kt._start||0,Kt._node.bufferSource.loopEnd=Kt._stop),Kt._node.bufferSource.playbackRate.value=Kt._rate,this},_cleanBuffer:function(Kt){if(this._scratchBuffer){Kt.bufferSource.onended=null,Kt.bufferSource.disconnect(0);try{Kt.bufferSource.buffer=this._scratchBuffer}catch(Zt){}}return Kt.bufferSource=null,this}};var Yt=function(Kt){this._parent=Kt,this.init()};Yt.prototype={init:function(){var Kt=this._parent;return this._muted=Kt._muted,this._loop=Kt._loop,this._volume=Kt._volume,this._rate=Kt._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++Xt._counter,Kt._sounds.push(this),this.create(),this},create:function(){var Kt=this._parent,Zt=Xt._muted||this._muted||this._parent._muted?0:this._volume;return Kt._webAudio?(this._node=void 0===Xt.ctx.createGain?Xt.ctx.createGainNode():Xt.ctx.createGain(),this._node.gain.setValueAtTime(Zt,Xt.ctx.currentTime),this._node.paused=!0,this._node.connect(Xt.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(Xt._canPlayEvent,this._loadFn,!1),this._node.src=Kt._src,this._node.preload="auto",this._node.volume=Zt*Xt.volume(),this._node.load()),this},reset:function(){var Kt=this._parent;return this._muted=Kt._muted,this._loop=Kt._loop,this._volume=Kt._volume,this._rate=Kt._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++Xt._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var Kt=this._parent;Kt._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(Kt._sprite).length&&(Kt._sprite={__default:[0,1e3*Kt._duration]}),"loaded"!==Kt._state&&(Kt._state="loaded",Kt._emit("load"),Kt._loadQueue()),this._node.removeEventListener(Xt._canPlayEvent,this._loadFn,!1)}};var Ht={},jt=function(Kt){var Zt=Kt._src;if(Ht[Zt])return Kt._duration=Ht[Zt].duration,void Vt(Kt);if(/^data:[^;]+;base64,/.test(Zt)){for(var Qt=atob(Zt.split(",")[1]),Jt=new Uint8Array(Qt.length),$t=0;$t<Qt.length;++$t)Jt[$t]=Qt.charCodeAt($t);zt(Jt.buffer,Kt)}else{var en=new XMLHttpRequest;en.open("GET",Zt,!0),en.withCredentials=Kt._xhrWithCredentials,en.responseType="arraybuffer",en.onload=function(){var tn=(en.status+"")[0];"0"===tn||"2"===tn||"3"===tn?zt(en.response,Kt):Kt._emit("loaderror",null,"Failed loading audio file with status: "+en.status+".")},en.onerror=function(){Kt._webAudio&&(Kt._html5=!0,Kt._webAudio=!1,Kt._sounds=[],delete Ht[Zt],Kt.load())},Wt(en)}},Wt=function(Kt){try{Kt.send()}catch(Zt){Kt.onerror()}},zt=function(Kt,Zt){Xt.ctx.decodeAudioData(Kt,function(Qt){Qt&&0<Zt._sounds.length&&(Ht[Zt._src]=Qt,Vt(Zt,Qt))},function(){Zt._emit("loaderror",null,"Decoding audio data failed.")})},Vt=function(Kt,Zt){Zt&&!Kt._duration&&(Kt._duration=Zt.duration),0===Object.keys(Kt._sprite).length&&(Kt._sprite={__default:[0,1e3*Kt._duration]}),"loaded"!==Kt._state&&(Kt._state="loaded",Kt._emit("load"),Kt._loadQueue())},qt=function(){try{"undefined"==typeof AudioContext?"undefined"==typeof webkitAudioContext?Xt.usingWebAudio=!1:Xt.ctx=new webkitAudioContext:Xt.ctx=new AudioContext}catch($t){Xt.usingWebAudio=!1}var Kt=/iP(hone|od|ad)/.test(Xt._navigator&&Xt._navigator.platform),Zt=Xt._navigator&&Xt._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),Qt=Zt?parseInt(Zt[1],10):null;if(Kt&&Qt&&9>Qt){var Jt=/safari/.test(Xt._navigator&&Xt._navigator.userAgent.toLowerCase());(Xt._navigator&&Xt._navigator.standalone&&!Jt||Xt._navigator&&!Xt._navigator.standalone&&!Jt)&&(Xt.usingWebAudio=!1)}Xt.usingWebAudio&&(Xt.masterGain=void 0===Xt.ctx.createGain?Xt.ctx.createGainNode():Xt.ctx.createGain(),Xt.masterGain.gain.value=Xt._muted?0:1,Xt.masterGain.connect(Xt.ctx.destination)),Xt._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:Xt,Howl:Gt}}),"undefined"!=typeof exports&&(exports.Howler=Xt,exports.Howl=Gt),"undefined"==typeof window?"undefined"!=typeof global&&(global.HowlerGlobal=Bt,global.Howler=Xt,global.Howl=Gt,global.Sound=Yt):(window.HowlerGlobal=Bt,window.Howler=Xt,window.Howl=Gt,window.Sound=Yt)}(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(Xt){if(!this.ctx||!this.ctx.listener)return this;for(var Gt=this._howls.length-1;0<=Gt;Gt--)this._howls[Gt].stereo(Xt);return this},HowlerGlobal.prototype.pos=function(Xt,Gt,Yt){return this.ctx&&this.ctx.listener?(Gt="number"==typeof Gt?Gt:this._pos[1],Yt="number"==typeof Yt?Yt:this._pos[2],"number"==typeof Xt?(this._pos=[Xt,Gt,Yt],this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this):this._pos):this},HowlerGlobal.prototype.orientation=function(Xt,Gt,Yt,Ht,jt,Wt){if(!this.ctx||!this.ctx.listener)return this;var zt=this._orientation;return Gt="number"==typeof Gt?Gt:zt[1],Yt="number"==typeof Yt?Yt:zt[2],Ht="number"==typeof Ht?Ht:zt[3],jt="number"==typeof jt?jt:zt[4],Wt="number"==typeof Wt?Wt:zt[5],"number"==typeof Xt?(this._orientation=[Xt,Gt,Yt,Ht,jt,Wt],this.ctx.listener.setOrientation(Xt,Gt,Yt,Ht,jt,Wt),this):zt},Howl.prototype.init=function(Xt){return function(Gt){return this._orientation=Gt.orientation||[1,0,0],this._stereo=Gt.stereo||null,this._pos=Gt.pos||null,this._pannerAttr={coneInnerAngle:void 0===Gt.coneInnerAngle?360:Gt.coneInnerAngle,coneOuterAngle:void 0===Gt.coneOuterAngle?360:Gt.coneOuterAngle,coneOuterGain:void 0===Gt.coneOuterGain?0:Gt.coneOuterGain,distanceModel:void 0===Gt.distanceModel?"inverse":Gt.distanceModel,maxDistance:void 0===Gt.maxDistance?1e4:Gt.maxDistance,panningModel:void 0===Gt.panningModel?"HRTF":Gt.panningModel,refDistance:void 0===Gt.refDistance?1:Gt.refDistance,rolloffFactor:void 0===Gt.rolloffFactor?1:Gt.rolloffFactor},this._onstereo=Gt.onstereo?[{fn:Gt.onstereo}]:[],this._onpos=Gt.onpos?[{fn:Gt.onpos}]:[],this._onorientation=Gt.onorientation?[{fn:Gt.onorientation}]:[],Xt.call(this,Gt)}}(Howl.prototype.init),Howl.prototype.stereo=function(Xt,Gt){var Yt=this;if(!Yt._webAudio)return Yt;if("loaded"!==Yt._state)return Yt._queue.push({event:"stereo",action:function(){Yt.stereo(Xt,Gt)}}),Yt;var Ht=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===Gt){if("number"!=typeof Xt)return Yt._stereo;Yt._stereo=Xt,Yt._pos=[Xt,0,0]}for(var jt=Yt._getSoundIds(Gt),Wt=0,zt;Wt<jt.length;Wt++)if(zt=Yt._soundById(jt[Wt]),zt){if("number"!=typeof Xt)return zt._stereo;zt._stereo=Xt,zt._pos=[Xt,0,0],zt._node&&(zt._pannerAttr.panningModel="equalpower",zt._panner&&zt._panner.pan||Bt(zt,Ht),"spatial"==Ht?zt._panner.setPosition(Xt,0,Math.abs(1-Xt)):zt._panner.pan.value=Xt),Yt._emit("stereo",zt._id)}return Yt},Howl.prototype.pos=function(Xt,Gt,Yt,Ht){var jt=this;if(!jt._webAudio)return jt;if("loaded"!==jt._state)return jt._queue.push({event:"pos",action:function(){jt.pos(Xt,Gt,Yt,Ht)}}),jt;if(Gt="number"==typeof Gt?Gt:0,Yt="number"==typeof Yt?Yt:-.5,void 0===Ht){if("number"!=typeof Xt)return jt._pos;jt._pos=[Xt,Gt,Yt]}for(var Wt=jt._getSoundIds(Ht),zt=0,Vt;zt<Wt.length;zt++)if(Vt=jt._soundById(Wt[zt]),Vt){if("number"!=typeof Xt)return Vt._pos;Vt._pos=[Xt,Gt,Yt],Vt._node&&(Vt._panner&&!Vt._panner.pan||Bt(Vt,"spatial"),Vt._panner.setPosition(Xt,Gt,Yt)),jt._emit("pos",Vt._id)}return jt},Howl.prototype.orientation=function(Xt,Gt,Yt,Ht){var jt=this;if(!jt._webAudio)return jt;if("loaded"!==jt._state)return jt._queue.push({event:"orientation",action:function(){jt.orientation(Xt,Gt,Yt,Ht)}}),jt;if(Gt="number"==typeof Gt?Gt:jt._orientation[1],Yt="number"==typeof Yt?Yt:jt._orientation[2],void 0===Ht){if("number"!=typeof Xt)return jt._orientation;jt._orientation=[Xt,Gt,Yt]}for(var Wt=jt._getSoundIds(Ht),zt=0,Vt;zt<Wt.length;zt++)if(Vt=jt._soundById(Wt[zt]),Vt){if("number"!=typeof Xt)return Vt._orientation;Vt._orientation=[Xt,Gt,Yt],Vt._node&&(Vt._panner||(Vt._pos||(Vt._pos=jt._pos||[0,0,-0.5]),Bt(Vt,"spatial")),Vt._panner.setOrientation(Xt,Gt,Yt)),jt._emit("orientation",Vt._id)}return jt},Howl.prototype.pannerAttr=function(){var Ht=arguments,Xt,Gt,Yt;if(!this._webAudio)return this;if(0===Ht.length)return this._pannerAttr;if(1===Ht.length){if("object"!=typeof Ht[0])return(Yt=this._soundById(parseInt(Ht[0],10)))?Yt._pannerAttr:this._pannerAttr;Xt=Ht[0],void 0==Gt&&(Xt.pannerAttr||(Xt.pannerAttr={coneInnerAngle:Xt.coneInnerAngle,coneOuterAngle:Xt.coneOuterAngle,coneOuterGain:Xt.coneOuterGain,distanceModel:Xt.distanceModel,maxDistance:Xt.maxDistance,refDistance:Xt.refDistance,rolloffFactor:Xt.rolloffFactor,panningModel:Xt.panningModel}),this._pannerAttr={coneInnerAngle:void 0===Xt.pannerAttr.coneInnerAngle?this._coneInnerAngle:Xt.pannerAttr.coneInnerAngle,coneOuterAngle:void 0===Xt.pannerAttr.coneOuterAngle?this._coneOuterAngle:Xt.pannerAttr.coneOuterAngle,coneOuterGain:void 0===Xt.pannerAttr.coneOuterGain?this._coneOuterGain:Xt.pannerAttr.coneOuterGain,distanceModel:void 0===Xt.pannerAttr.distanceModel?this._distanceModel:Xt.pannerAttr.distanceModel,maxDistance:void 0===Xt.pannerAttr.maxDistance?this._maxDistance:Xt.pannerAttr.maxDistance,refDistance:void 0===Xt.pannerAttr.refDistance?this._refDistance:Xt.pannerAttr.refDistance,rolloffFactor:void 0===Xt.pannerAttr.rolloffFactor?this._rolloffFactor:Xt.pannerAttr.rolloffFactor,panningModel:void 0===Xt.pannerAttr.panningModel?this._panningModel:Xt.pannerAttr.panningModel})}else 2===Ht.length&&(Xt=Ht[0],Gt=parseInt(Ht[1],10));for(var jt=this._getSoundIds(Gt),Wt=0;Wt<jt.length;Wt++)if(Yt=this._soundById(jt[Wt])){var zt=Yt._pannerAttr;zt={coneInnerAngle:void 0===Xt.coneInnerAngle?zt.coneInnerAngle:Xt.coneInnerAngle,coneOuterAngle:void 0===Xt.coneOuterAngle?zt.coneOuterAngle:Xt.coneOuterAngle,coneOuterGain:void 0===Xt.coneOuterGain?zt.coneOuterGain:Xt.coneOuterGain,distanceModel:void 0===Xt.distanceModel?zt.distanceModel:Xt.distanceModel,maxDistance:void 0===Xt.maxDistance?zt.maxDistance:Xt.maxDistance,refDistance:void 0===Xt.refDistance?zt.refDistance:Xt.refDistance,rolloffFactor:void 0===Xt.rolloffFactor?zt.rolloffFactor:Xt.rolloffFactor,panningModel:void 0===Xt.panningModel?zt.panningModel:Xt.panningModel};var Vt=Yt._panner;Vt?(Vt.coneInnerAngle=zt.coneInnerAngle,Vt.coneOuterAngle=zt.coneOuterAngle,Vt.coneOuterGain=zt.coneOuterGain,Vt.distanceModel=zt.distanceModel,Vt.maxDistance=zt.maxDistance,Vt.refDistance=zt.refDistance,Vt.rolloffFactor=zt.rolloffFactor,Vt.panningModel=zt.panningModel):(Yt._pos||(Yt._pos=this._pos||[0,0,-0.5]),Bt(Yt,"spatial"))}return this},Sound.prototype.init=function(Xt){return function(){var Gt=this._parent;this._orientation=Gt._orientation,this._stereo=Gt._stereo,this._pos=Gt._pos,this._pannerAttr=Gt._pannerAttr,Xt.call(this),this._stereo?Gt.stereo(this._stereo):this._pos&&Gt.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(Xt){return function(){var Gt=this._parent;return this._orientation=Gt._orientation,this._pos=Gt._pos,this._pannerAttr=Gt._pannerAttr,Xt.call(this)}}(Sound.prototype.reset);var Bt=function(Xt,Gt){"spatial"===(Gt=Gt||"spatial")?(Xt._panner=Howler.ctx.createPanner(),Xt._panner.coneInnerAngle=Xt._pannerAttr.coneInnerAngle,Xt._panner.coneOuterAngle=Xt._pannerAttr.coneOuterAngle,Xt._panner.coneOuterGain=Xt._pannerAttr.coneOuterGain,Xt._panner.distanceModel=Xt._pannerAttr.distanceModel,Xt._panner.maxDistance=Xt._pannerAttr.maxDistance,Xt._panner.refDistance=Xt._pannerAttr.refDistance,Xt._panner.rolloffFactor=Xt._pannerAttr.rolloffFactor,Xt._panner.panningModel=Xt._pannerAttr.panningModel,Xt._panner.setOrientation(Xt._orientation[0],Xt._orientation[1],Xt._orientation[2])):(Xt._panner=Howler.ctx.createStereoPanner(),Xt._panner.pan.value=Xt._stereo),Xt._panner.connect(Xt._node),Xt._paused||Xt._parent.pause(Xt._id,!0).play(Xt._id)}}(),function(Bt){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Bt():"function"==typeof define&&define.amd?define([],Bt):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).nipplejs=Bt()}(function(){function Bt(){}function Xt(Qt,Jt){return this.identifier=Jt.identifier,this.position=Jt.position,this.frontPosition=Jt.frontPosition,this.collection=Qt,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5,mode:"dynamic",zone:document.body},this.config(Jt),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=Xt.id,Xt.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function Gt(Qt,Jt){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=Qt,this.id=Gt.id,Gt.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5},this.config(Jt),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}function Yt(Qt){var Jt=this;Jt.ids={},Jt.index=0,Jt.collections=[],Jt.config(Qt),Jt.prepareCollections();var $t;return Kt.bindEvt(window,"resize",function(){clearTimeout($t),$t=setTimeout(function(){var nn=Kt.getScroll(),tn;Jt.collections.forEach(function(an){an.forEach(function(rn){tn=rn.el.getBoundingClientRect(),rn.position={x:nn.x+tn.left,y:nn.y+tn.top}})})},100)}),Jt.collections}var jt=!!("ontouchstart"in window),Wt=!!window.PointerEvent,zt=!!window.MSPointerEvent,Vt={start:"mousedown",move:"mousemove",end:"mouseup"},qt={},Ht;Wt?Ht={start:"pointerdown",move:"pointermove",end:"pointerup"}:zt?Ht={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:jt?(Ht={start:"touchstart",move:"touchmove",end:"touchend"},qt=Vt):Ht=Vt;var Kt={};Kt.distance=function(Qt,Jt){var $t=Jt.x-Qt.x,en=Jt.y-Qt.y;return Math.sqrt($t*$t+en*en)},Kt.angle=function(Qt,Jt){var $t=Jt.x-Qt.x,en=Jt.y-Qt.y;return Kt.degrees(Math.atan2(en,$t))},Kt.findCoord=function(Qt,Jt,$t){var en={x:0,y:0};return $t=Kt.radians($t),en.x=Qt.x-Jt*Math.cos($t),en.y=Qt.y-Jt*Math.sin($t),en},Kt.radians=function(Qt){return Qt*(Math.PI/180)},Kt.degrees=function(Qt){return Qt*(180/Math.PI)},Kt.bindEvt=function(Qt,Jt,$t){Qt.addEventListener?Qt.addEventListener(Jt,$t,!1):Qt.attachEvent&&Qt.attachEvent(Jt,$t)},Kt.unbindEvt=function(Qt,Jt,$t){Qt.removeEventListener?Qt.removeEventListener(Jt,$t):Qt.detachEvent&&Qt.detachEvent(Jt,$t)},Kt.trigger=function(Qt,Jt,$t){var en=new CustomEvent(Jt,$t);Qt.dispatchEvent(en)},Kt.prepareEvent=function(Qt){return"front"!=Qt.target.className&&"back"!=Qt.target.className||Qt.preventDefault(),Qt.type.match(/^touch/)?Qt.changedTouches:Qt},Kt.getScroll=function(){return{x:void 0===window.pageXOffset?(document.documentElement||document.body.parentNode||document.body).scrollLeft:window.pageXOffset,y:void 0===window.pageYOffset?(document.documentElement||document.body.parentNode||document.body).scrollTop:window.pageYOffset}},Kt.applyPosition=function(Qt,Jt){Jt.x&&Jt.y?(Qt.style.left=Jt.x+"px",Qt.style.top=Jt.y+"px"):(Jt.top||Jt.right||Jt.bottom||Jt.left)&&(Qt.style.top=Jt.top,Qt.style.right=Jt.right,Qt.style.bottom=Jt.bottom,Qt.style.left=Jt.left)},Kt.getTransitionStyle=function(Qt,Jt,$t){var en=Kt.configStylePropertyObject(Qt);for(var tn in en)if(en.hasOwnProperty(tn))if("string"==typeof Jt)en[tn]=Jt+" "+$t;else{for(var nn="",an=0,rn=Jt.length;an<rn;an+=1)nn+=Jt[an]+" "+$t+", ";en[tn]=nn.slice(0,-2)}return en},Kt.getVendorStyle=function(Qt,Jt){var $t=Kt.configStylePropertyObject(Qt);for(var en in $t)$t.hasOwnProperty(en)&&($t[en]=Jt);return $t},Kt.configStylePropertyObject=function(Qt){var Jt={};return Jt[Qt]="",["webkit","Moz","o"].forEach(function($t){Jt[$t+Qt.charAt(0).toUpperCase()+Qt.slice(1)]=""}),Jt},Kt.extend=function(Qt,Jt){for(var $t in Jt)Jt.hasOwnProperty($t)&&(Qt[$t]=Jt[$t]);return Qt},Kt.safeExtend=function(Qt,Jt){var $t={};for(var en in Qt)Qt.hasOwnProperty(en)&&Jt.hasOwnProperty(en)?$t[en]=Jt[en]:Qt.hasOwnProperty(en)&&($t[en]=Qt[en]);return $t},Kt.map=function(Qt,Jt){if(Qt.length)for(var $t=0,en=Qt.length;$t<en;$t+=1)Jt(Qt[$t]);else Jt(Qt)},Bt.prototype.on=function(Qt,Jt){var en=Qt.split(/[ ,]+/g),$t;this._handlers_=this._handlers_||{};for(var tn=0;tn<en.length;tn+=1)$t=en[tn],this._handlers_[$t]=this._handlers_[$t]||[],this._handlers_[$t].push(Jt);return this},Bt.prototype.off=function(Qt,Jt){return this._handlers_=this._handlers_||{},void 0===Qt?this._handlers_={}:void 0===Jt?this._handlers_[Qt]=null:this._handlers_[Qt]&&0<=this._handlers_[Qt].indexOf(Jt)&&this._handlers_[Qt].splice(this._handlers_[Qt].indexOf(Jt),1),this},Bt.prototype.trigger=function(Qt,Jt){var en=this,tn=Qt.split(/[ ,]+/g),$t;en._handlers_=en._handlers_||{};for(var nn=0;nn<tn.length;nn+=1)$t=tn[nn],en._handlers_[$t]&&en._handlers_[$t].length&&en._handlers_[$t].forEach(function(an){an.call(en,{type:$t,target:en},Jt)})},Bt.prototype.config=function(Qt){this.options=this.defaults||{},Qt&&(this.options=Kt.safeExtend(this.options,Qt))},Bt.prototype.bindEvt=function(Qt,Jt){var $t=this;return $t._domHandlers_=$t._domHandlers_||{},$t._domHandlers_[Jt]=function(){"function"==typeof $t["on"+Jt]?$t["on"+Jt].apply($t,arguments):console.warn("[WARNING] : Missing \"on"+Jt+"\" handler.")},Kt.bindEvt(Qt,Ht[Jt],$t._domHandlers_[Jt]),qt[Jt]&&Kt.bindEvt(Qt,qt[Jt],$t._domHandlers_[Jt]),$t},Bt.prototype.unbindEvt=function(Qt,Jt){return this._domHandlers_=this._domHandlers_||{},Kt.unbindEvt(Qt,Ht[Jt],this._domHandlers_[Jt]),qt[Jt]&&Kt.unbindEvt(Qt,qt[Jt],this._domHandlers_[Jt]),delete this._domHandlers_[Jt],this},Xt.prototype=new Bt,Xt.constructor=Xt,Xt.id=0,Xt.prototype.buildEl=function(){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},Xt.prototype.stylize=function(){if(this.options.dataOnly)return this;var Qt=this.options.fadeTime+"ms",Jt=Kt.getVendorStyle("borderRadius","50%"),$t=Kt.getTransitionStyle("transition","opacity",Qt),en={};return en.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},en.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},en.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},Kt.extend(en.el,$t),Kt.extend(en.back,Jt),Kt.extend(en.front,Jt),this.applyStyles(en),this},Xt.prototype.applyStyles=function(Qt){for(var Jt in this.ui)if(this.ui.hasOwnProperty(Jt))for(var $t in Qt[Jt])this.ui[Jt].style[$t]=Qt[Jt][$t];return this},Xt.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},Xt.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},Xt.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},Xt.prototype.show=function(Qt){var Jt=this;return Jt.options.dataOnly?Jt:(clearTimeout(Jt.removeTimeout),clearTimeout(Jt.showTimeout),clearTimeout(Jt.restTimeout),Jt.addToDom(),Jt.restCallback(),setTimeout(function(){Jt.ui.el.style.opacity=1},0),Jt.showTimeout=setTimeout(function(){Jt.trigger("shown",Jt.instance),"function"==typeof Qt&&Qt.call(this)},Jt.options.fadeTime),Jt)},Xt.prototype.hide=function(Qt){var Jt=this;return Jt.options.dataOnly?Jt:(Jt.ui.el.style.opacity=Jt.options.restOpacity,clearTimeout(Jt.removeTimeout),clearTimeout(Jt.showTimeout),clearTimeout(Jt.restTimeout),Jt.removeTimeout=setTimeout(function(){var $t="dynamic"===Jt.options.mode?"none":"block";Jt.ui.el.style.display=$t,"function"==typeof Qt&&Qt.call(Jt),Jt.trigger("hidden",Jt.instance)},Jt.options.fadeTime),Jt.restPosition(),Jt)},Xt.prototype.restPosition=function(Qt){var Jt=this;Jt.frontPosition={x:0,y:0};var $t=Jt.options.fadeTime+"ms",en={};en.front=Kt.getTransitionStyle("transition",["top","left"],$t);var tn={front:{}};tn.front={left:Jt.frontPosition.x+"px",top:Jt.frontPosition.y+"px"},Jt.applyStyles(en),Jt.applyStyles(tn),Jt.restTimeout=setTimeout(function(){"function"==typeof Qt&&Qt.call(Jt),Jt.restCallback()},Jt.options.fadeTime)},Xt.prototype.restCallback=function(){var Qt={};Qt.front=Kt.getTransitionStyle("transition","none",""),this.applyStyles(Qt),this.trigger("rested",this.instance)},Xt.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},Xt.prototype.computeDirection=function(Qt){var tn=Qt.angle.radian,nn=Math.PI/4,an=Math.PI/2,Jt,$t,en;if(Jt=tn>nn&&tn<3*nn?"up":tn>-nn&&tn<=nn?"left":tn>3*-nn&&tn<=-nn?"down":"right",$t=tn>-an&&tn<an?"left":"right",en=0<tn?"up":"down",Qt.force>this.options.threshold){var rn={};for(var on in this.direction)this.direction.hasOwnProperty(on)&&(rn[on]=this.direction[on]);var sn={};for(var on in this.direction={x:$t,y:en,angle:Jt},Qt.direction=this.direction,rn)rn[on]===this.direction[on]&&(sn[on]=!0);if(sn.x&&sn.y&&sn.angle)return Qt;sn.x&&sn.y||this.trigger("plain",Qt),sn.x||this.trigger("plain:"+$t,Qt),sn.y||this.trigger("plain:"+en,Qt),sn.angle||this.trigger("dir dir:"+Jt,Qt)}return Qt},Gt.prototype=new Bt,Gt.constructor=Gt,Gt.id=0,Gt.prototype.prepareNipples=function(){var Qt=this.nipples;Qt.on=this.on.bind(this),Qt.off=this.off.bind(this),Qt.options=this.options,Qt.destroy=this.destroy.bind(this),Qt.ids=this.ids,Qt.id=this.id,Qt.processOnMove=this.processOnMove.bind(this),Qt.processOnEnd=this.processOnEnd.bind(this),Qt.get=function(Jt){if(void 0===Jt)return Qt[0];for(var $t=0,en=Qt.length;$t<en;$t+=1)if(Qt[$t].identifier===Jt)return Qt[$t];return!1}},Gt.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},Gt.prototype.begin=function(){var Qt=this.options;if("static"===Qt.mode){var Jt=this.createNipple(Qt.position,this.manager.getIdentifier());Jt.add(),this.idles.push(Jt)}},Gt.prototype.createNipple=function(Qt,Jt){var $t=Kt.getScroll(),en={},tn=this.options;if(Qt.x&&Qt.y)en={x:Qt.x-($t.x+this.box.left),y:Qt.y-($t.y+this.box.top)};else if(Qt.top||Qt.right||Qt.bottom||Qt.left){var nn=document.createElement("DIV");nn.style.display="hidden",nn.style.top=Qt.top,nn.style.right=Qt.right,nn.style.bottom=Qt.bottom,nn.style.left=Qt.left,nn.style.position="absolute",tn.zone.appendChild(nn);var an=nn.getBoundingClientRect();tn.zone.removeChild(nn),en=Qt,Qt={x:an.left+$t.x,y:an.top+$t.y}}var rn=new Xt(this,{color:tn.color,size:tn.size,threshold:tn.threshold,fadeTime:tn.fadeTime,dataOnly:tn.dataOnly,restOpacity:tn.restOpacity,mode:tn.mode,identifier:Jt,position:Qt,zone:tn.zone,frontPosition:{x:0,y:0}});return tn.dataOnly||(Kt.applyPosition(rn.ui.el,en),Kt.applyPosition(rn.ui.front,rn.frontPosition)),this.nipples.push(rn),this.trigger("added "+rn.identifier+":added",rn),this.manager.trigger("added "+rn.identifier+":added",rn),this.bindNipple(rn),rn},Gt.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},Gt.prototype.bindNipple=function(Qt){var $t=this,en=function(tn,nn){Jt=tn.type+" "+nn.id+":"+tn.type,$t.trigger(Jt,nn)},Jt;Qt.on("destroyed",$t.onDestroyed.bind($t)),Qt.on("shown hidden rested dir plain",en),Qt.on("dir:up dir:right dir:down dir:left",en),Qt.on("plain:up plain:right plain:down plain:left",en)},Gt.prototype.pressureFn=function(Qt,Jt,$t){var en=this,tn=0;clearInterval(en.pressureIntervals[$t]),en.pressureIntervals[$t]=setInterval(function(){var nn=Qt.force||Qt.pressure||Qt.webkitForce||0;nn!==tn&&(Jt.trigger("pressure",nn),en.trigger("pressure "+Jt.identifier+":pressure",nn),tn=nn)}.bind(en),100)},Gt.prototype.onstart=function(Qt){var Jt=this,$t=Jt.options;return Qt=Kt.prepareEvent(Qt),Jt.updateBox(),(Kt.map(Qt,function(en){Jt.actives.length<$t.maxNumberOfNipples&&Jt.processOnStart(en)}),Jt.manager.bindDocument(),!1)},Gt.prototype.processOnStart=function(Qt){var $t=this,en=$t.options,tn=$t.manager.getIdentifier(Qt),nn=Qt.force||Qt.pressure||Qt.webkitForce||0,an={x:Qt.pageX,y:Qt.pageY},rn=$t.getOrCreate(tn,an),Jt;rn.identifier=tn;var on=function(sn){sn.trigger("start",sn),$t.trigger("start "+sn.id+":start",sn),sn.show(),0<nn&&$t.pressureFn(Qt,sn,sn.identifier),$t.processOnMove(Qt)};if(0<=(Jt=$t.idles.indexOf(rn))&&$t.idles.splice(Jt,1),$t.actives.push(rn),$t.ids.push(rn.identifier),"semi"!==en.mode)on(rn);else{if(!(Kt.distance(an,rn.position)<=en.catchDistance))return rn.destroy(),void $t.processOnStart(Qt);on(rn)}return rn},Gt.prototype.getOrCreate=function(Qt,Jt){var en=this.options,$t;return /(semi|static)/.test(en.mode)?($t=this.idles[0])?(this.idles.splice(0,1),$t):"semi"===en.mode?this.createNipple(Jt,Qt):(console.warn("Coudln't find the needed nipple."),!1):$t=this.createNipple(Jt,Qt)},Gt.prototype.processOnMove=function(Qt){var Jt=this.options,$t=this.manager.getIdentifier(Qt),en=this.nipples.get($t);if(!en)return console.error("Found zombie joystick with ID "+$t),void this.manager.removeIdentifier($t);en.identifier=$t;var tn=en.options.size/2,nn={x:Qt.pageX,y:Qt.pageY},an=Kt.distance(nn,en.position),rn=Kt.angle(nn,en.position),on=Kt.radians(rn),sn=an/tn;an>tn&&(an=tn,nn=Kt.findCoord(en.position,an,rn)),en.frontPosition={x:nn.x-en.position.x,y:nn.y-en.position.y},Jt.dataOnly||Kt.applyPosition(en.ui.front,en.frontPosition);var dn={identifier:en.identifier,position:nn,force:sn,pressure:Qt.force||Qt.pressure||Qt.webkitForce||0,distance:an,angle:{radian:on,degree:rn},instance:en};(dn=en.computeDirection(dn)).angle={radian:Kt.radians(180-rn),degree:180-rn},en.trigger("move",dn),this.trigger("move "+en.id+":move",dn)},Gt.prototype.processOnEnd=function(Qt){var Jt=this,$t=Jt.options,en=Jt.manager.getIdentifier(Qt),tn=Jt.nipples.get(en),nn=Jt.manager.removeIdentifier(tn.identifier);tn&&($t.dataOnly||tn.hide(function(){"dynamic"===$t.mode&&(tn.trigger("removed",tn),Jt.trigger("removed "+tn.id+":removed",tn),Jt.manager.trigger("removed "+tn.id+":removed",tn),tn.destroy())}),clearInterval(Jt.pressureIntervals[tn.identifier]),tn.resetDirection(),tn.trigger("end",tn),Jt.trigger("end "+tn.id+":end",tn),0<=Jt.ids.indexOf(tn.identifier)&&Jt.ids.splice(Jt.ids.indexOf(tn.identifier),1),0<=Jt.actives.indexOf(tn)&&Jt.actives.splice(Jt.actives.indexOf(tn),1),/(semi|static)/.test($t.mode)?Jt.idles.push(tn):0<=Jt.nipples.indexOf(tn)&&Jt.nipples.splice(Jt.nipples.indexOf(tn),1),Jt.manager.unbindDocument(),/(semi|static)/.test($t.mode)&&(Jt.manager.ids[nn.id]=nn.identifier))},Gt.prototype.onDestroyed=function(Qt,Jt){0<=this.nipples.indexOf(Jt)&&this.nipples.splice(this.nipples.indexOf(Jt),1),0<=this.actives.indexOf(Jt)&&this.actives.splice(this.actives.indexOf(Jt),1),0<=this.idles.indexOf(Jt)&&this.idles.splice(this.idles.indexOf(Jt),1),0<=this.ids.indexOf(Jt.identifier)&&this.ids.splice(this.ids.indexOf(Jt.identifier),1),this.manager.removeIdentifier(Jt.identifier),this.manager.unbindDocument()},Gt.prototype.destroy=function(){for(var Qt in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(Jt){Jt.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(Qt)&&clearInterval(this.pressureIntervals[Qt]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()},Yt.prototype=new Bt,Yt.constructor=Yt,Yt.prototype.prepareCollections=function(){var Qt=this;Qt.collections.create=Qt.create.bind(Qt),Qt.collections.on=Qt.on.bind(Qt),Qt.collections.off=Qt.off.bind(Qt),Qt.collections.destroy=Qt.destroy.bind(Qt),Qt.collections.get=function(Jt){var $t;return Qt.collections.every(function(en){return!($t=en.get(Jt))}),$t}},Yt.prototype.create=function(Qt){return this.createCollection(Qt)},Yt.prototype.createCollection=function(Qt){var Jt=new Gt(this,Qt);return this.bindCollection(Jt),this.collections.push(Jt),Jt},Yt.prototype.bindCollection=function(Qt){var $t=this,en=function(tn,nn){Jt=tn.type+" "+nn.id+":"+tn.type,$t.trigger(Jt,nn)},Jt;Qt.on("destroyed",$t.onDestroyed.bind($t)),Qt.on("shown hidden rested dir plain",en),Qt.on("dir:up dir:right dir:down dir:left",en),Qt.on("plain:up plain:right plain:down plain:left",en)},Yt.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},Yt.prototype.unbindDocument=function(Qt){Object.keys(this.ids).length&&!0!==Qt||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},Yt.prototype.getIdentifier=function(Qt){var Jt;return Qt?void 0===(Jt=void 0===Qt.identifier?Qt.pointerId:Qt.identifier)&&(Jt=this.latest||0):Jt=this.index,void 0===this.ids[Jt]&&(this.ids[Jt]=this.index,this.index+=1),this.latest=Jt,this.ids[Jt]},Yt.prototype.removeIdentifier=function(Qt){var Jt={};for(var $t in this.ids)if(this.ids[$t]===Qt){Jt.id=$t,Jt.identifier=this.ids[$t],delete this.ids[$t];break}return Jt},Yt.prototype.onmove=function(Qt){return this.onAny("move",Qt),!1},Yt.prototype.onend=function(Qt){return this.onAny("end",Qt),!1},Yt.prototype.onAny=function(Qt,Jt){var en=this,tn="processOn"+Qt.charAt(0).toUpperCase()+Qt.slice(1),$t;return Jt=Kt.prepareEvent(Jt),Kt.map(Jt,function(nn){$t=en.getIdentifier(nn),Kt.map(en.collections,function(an,rn,on){0<=on.ids.indexOf(rn)&&(on[tn](an),an._found_=!0)}.bind(null,nn,$t)),nn._found_||en.removeIdentifier($t)}),!1},Yt.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(Qt){Qt.destroy()}),this.off()},Yt.prototype.onDestroyed=function(Qt,Jt){return!(0>this.collections.indexOf(Jt))&&void this.collections.splice(this.collections.indexOf(Jt),1)};var Zt=new Yt;return{create:function(Qt){return Zt.create(Qt)},factory:Zt}}),function(){window.DEVELOPMENT=!1,window.game={protocol:5,version:"v1.0.2",state:0,focus:!0,screenX:0,screenY:0,halfScreenX:0,halfScreenY:0,scale:1,spectatingID:null,myID:null,myType:null,myTeam:null,myUserID:"",myName:"",myOriginalName:"",myScore:0,myPlace:0,myLevel:0,myToken:"",myFlag:"xx",loggedIn:!1,roomName:"",regionName:"",playRegion:"derp",playRoom:"ffa",playHost:"",playPath:"",playInvited:!1,gameType:null,regionName:"",inviteLink:"",lastFlagSet:"xx",reloading:!1,ping:0,lagging:!1,timeFactor:1,timeFactorUncapped:1,time:0,timeNetwork:0,jitter:0,frames:0,shadowX:0,shadowY:0,graphics:{},debug:{},buckets:[]},window.config={storage:{},settings:{},ships:[{},{name:"raptor",turnFactor:.065,accelFactor:.225,maxSpeed:5.5,minSpeed:.001,brakeFactor:.025,energyLight:.6,collisions:[[0,5,23],[0,-15,15],[0,-25,12]]},{name:"spirit",turnFactor:.04,accelFactor:.15,maxSpeed:3.5,minSpeed:.001,brakeFactor:.015,energyLight:.9,collisions:[[0,0,35],[50,14,16],[74,26,14],[30,8,23],[63,22,15],[-50,14,16],[-74,26,14],[-30,8,23],[-63,22,15]]},{name:"mohawk",turnFactor:.07,accelFactor:.275,maxSpeed:6,minSpeed:.001,brakeFactor:.025,energyLight:.3,collisions:[[0,-12,15],[0,0,17],[0,13,15],[0,26,15]]},{name:"tornado",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.5,collisions:[[0,8,18],[14,12,13],[-14,12,13],[0,-12,16],[0,-26,14],[0,-35,12]]},{name:"prowler",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.75,collisions:[[0,11,25],[0,-8,18],[19,20,10],[-19,20,10],[0,-20,14]]}],mobs:[{},{exhaust:20,thruster:[0.2,0.4]},{exhaust:30,thruster:[0.3,0.6]},{exhaust:18,thruster:[0.14,0.3]},{},{exhaust:20,thruster:[0.2,0.4]},{exhaust:20,thruster:[0.2,0.4]},{exhaust:20,thruster:[0.2,0.4]}],upgrades:{speed:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},defense:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},energy:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},missile:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]}},doodads:[[1009,-2308,1,0.9,0.2,null,null],[1241,-2490,4,0.5,-0.2,null,null],[1157,-2379,2,0.7,-0.1,null,null],[622,-2126,3,0.4,null,null,null],[669,-2187,2,0.6,null,null,null],[-392,-1669,1,1.1,0.1,null,null],[-273,-1746,4,0.5,-0.1,null,null],[-252,-1504,2,1,null,null,null],[1553,-2016,2,0.4,0.2,null,null],[1637,-1972,1,0.5,0.1,null,null],[1736,-1922,2,0.5,0.7,null,null],[2150,-2406,2,0.6,null,null,null],[2238,-2318,3,0.9,null,null,null],[2364,-2391,4,0.6,0,null,null],[2491,-2682,1,0.6,-0.1,null,null],[2596,-2671,2,0.9,0.2,null,null],[-150,-3147,4,0.4,-0.4,null,null],[-155,-3044,2,0.7,0,null,null],[-427,-3600,2,0.4,null,null,null],[-259,-2982,2,0.5,null,null,null],[-379,-3529,1,0.6,0.1,1,null],[-665,-3052,2,0.5,null,null,null],[20,-1816,4,0.5,0.3,null,null],[127,-1799,1,0.5,null,null,null],[263,-2572,3,0.4,0.4,null,null],[405,-2570,1,0.9,-0.2,null,null],[851,-4183,1,1,null,null,null],[754,-3971,2,0.9,-0.1,1,null],[1757,-5065,4,1.1,null,null,null],[1169,-4453,3,0.9,null,null,null],[2054,-5244,3,0.9,null,null,null],[1631,-4901,1,0.9,0,null,null],[2305,-5281,2,0.9,0.2,1,null],[1007,-4281,1,0.8,0.1,null,null],[2766,-5202,1,0.8,0.1,1,null],[2927,-5204,2,0.7,null,1,null],[3206,-5218,2,0.3,0.6,1,null],[3099,-5193,4,0.6,0.1,1,null],[1417,-4726,2,1,null,null,null],[2844,-1513,4,0.5,0.1,null,null],[3206,-1464,1,1,0.1,1,null],[2881,-1403,2,0.9,null,null,null],[3804,-2025,1,0.7,-0.1,null,null],[4116,-1778,2,0.9,-0.3,null,null],[3715,-1508,3,0.6,0.1,null,null],[4247,-1126,1,0.6,0.1,1,null],[3860,268,1,0.5,0.5,1,null],[4334,-1011,2,1.1,-0.1,null,null],[3849,349,3,0.6,null,null,null],[3956,490,4,0.8,-0.4,null,null],[4073,667,2,0.9,-0.5,null,null],[3583,-864,4,0.8,0.1,0.8,15723705],[4135,836,2,1,-0.2,null,null],[4785,-743,2,1,0.1,null,null],[4993,-839,1,0.9,0.3,1,null],[5224,-482,3,0.7,null,null,null],[5235,-1238,4,1.1,null,1,null],[5419,-1346,2,0.6,-0.5,0.8,null],[6075,-5099,1,0.8,null,null,null],[5767,-4953,2,0.9,-0.3,1,null],[5896,-4967,2,0.9,0.1,1,null],[5384,-4642,4,0.9,null,null,null],[5704,-4857,4,0.9,null,null,null],[5563,-4697,2,0.9,null,null,null],[5406,-4470,1,1.1,null,null,null],[5352,-3964,3,0.9,null,null,null],[5309,-3665,1,1.1,null,null,null],[5247,-3464,4,0.9,-0.5,null,null],[5300,-3121,1,0.9,null,null,null],[3524,-3340,1,1.1,0,null,null],[3661,-3589,2,0.9,-0.7,null,null],[7236,-1376,2,0.6,-0.3,null,null],[7624,-1610,2,0.8,null,null,null],[7403,-1555,2,0.7,null,null,null],[7514,-1568,2,0.9,0,null,null],[3660,-2705,1,0.9,0.2,null,null],[3374,-2813,2,0.8,null,null,null],[7347,-1447,1,0.9,0.1,null,null],[7236,-775,4,0.5,-0.9,null,null],[7207,-631,2,0.9,0,null,null],[7303,-468,1,0.9,-0.3,null,null],[7262,-1263,4,0.9,-0.6,null,null],[7404,-350,2,1,0.6,null,null],[7589,-305,3,0.9,0.6,null,null],[7741,-1589,4,1,0.2,null,null],[7949,-1594,1,1,-0.2,null,null],[8152,-1599,2,1.1,0.1,null,null],[8378,-1602,4,1.2,0,null,null],[7873,-321,2,0.6,0.3,null,null],[8543,-1661,1,0.7,0,null,null],[7790,-259,1,1,0.1,null,null],[8675,-1573,2,1,0.1,null,null],[8163,-245,2,0.7,0.3,null,null],[8329,-311,2,0.7,0.5,null,null],[8275,-229,1,1,0.1,null,null],[8447,-277,3,1,0,null,null],[8824,-1447,1,0.9,-0.4,null,null],[7221,-1140,1,0.5,-0.2,null,null],[8924,-1273,2,0.9,-0.5,null,null],[6844,-950,3,1,0.1,null,null],[8949,-1060,3,1.1,-0.3,null,null],[8904,-920,4,0.8,-0.7,null,null],[8582,-338,2,0.7,null,null,null],[8963,-803,1,1,-0.4,null,null],[8680,-322,4,0.9,0,null,null],[8811,-449,1,0.9,-0.3,null,null],[8910,-610,2,0.9,-0.4,null,null],[6855,114,1,0.8,null,null,null],[6971,241,2,1,-0.1,null,null],[6852,656,2,0.5,0.3,null,null],[6980,706,1,0.9,-0.4,null,null],[6946,939,4,1,-0.2,null,null],[6027,-560,1,0.6,0,null,null],[7521,425,2,0.4,0.1,null,null],[7599,389,1,0.5,-0.5,null,null],[5863,-431,2,0.9,0.1,null,null],[9392,262,2,0.9,-0.1,null,null],[7521,512,3,0.6,null,null,null],[9807,1027,1,0.5,-0.1,null,null],[9554,237,1,1,-0.2,1,null],[9346,392,4,1.2,-0.3,null,null],[9789,1142,3,0.7,null,null,null],[9747,-532,4,0.8,0.2,1,null],[8591,347,4,0.6,-0.2,null,null],[9951,-509,1,1,null,null,null],[9308,2417,1,0.5,0.1,null,null],[10185,-522,2,0.9,null,1,null],[10330,2147,1,0.6,0,null,null],[9350,2480,3,0.7,null,null,null],[10503,2124,2,0.9,null,null,null],[12500,2628,4,0.5,0.3,null,null],[13188,2864,4,0.5,-0.1,null,null],[12637,2659,2,0.7,0.1,null,null],[13262,2899,1,0.5,null,null,null],[13777,5168,1,0.5,-0.3,null,null],[15709,6399,1,0.4,null,null,null],[13539,5664,3,0.5,null,1,null],[15660,6474,2,0.4,-0.3,null,null],[13743,5248,2,0.7,-0.1,null,null],[15482,6600,2,0.4,-0.1,null,null],[15591,6525,4,0.3,null,null,null],[13487,5738,4,0.7,null,null,null],[15407,6702,1,0.6,0.1,null,null],[8171,-2568,2,0.5,0.1,null,null],[16001,6015,3,0.6,null,null,null],[16017,6110,1,0.4,null,1,null],[6496,-1491,1,0.5,0.3,null,null],[6626,-1480,2,0.7,null,null,null],[6190,-1022,4,0.8,null,null,null],[8325,-2615,2,1,-0.3,null,null],[8222,-2412,4,1,null,null,null],[9204,-2288,1,0.9,-0.1,null,null],[9279,-2216,2,1,null,null,null],[10375,-1558,2,0.8,-0.3,null,null],[10309,-1421,1,0.9,null,null,null],[10247,-1216,4,1.2,-0.5,null,null],[10079,-2310,4,0.9,0.3,null,null],[10320,-2330,3,1,null,null,null],[10942,-2963,2,0.9,-0.3,null,null],[10807,-2778,4,1.1,-0.5,null,null],[12989,-1929,3,0.6,null,null,null],[12613,-1181,1,0.4,0,1,null],[12559,-1120,2,0.5,null,null,null],[11642,-1900,4,0.7,-0.5,null,null],[11558,-1692,1,0.9,-0.2,null,null],[11509,-1479,2,0.5,null,null,null],[12559,-2673,1,0.8,null,null,null],[12446,-2487,4,1,-0.5,null,null],[12375,-2303,3,0.9,-0.2,null,null],[10363,-3514,4,0.7,-0.4,null,null],[10290,-3340,1,0.9,-0.2,null,null],[10162,-3207,2,0.7,null,null,null],[9003,-3048,4,0.9,-0.1,null,null],[9161,-3119,1,0.6,null,null,null],[14550,-3462,2,0.9,-0.2,null,null],[14407,-3335,4,0.9,-0.2,null,null],[14366,-4493,2,0.9,0.5,null,null],[14477,-4437,3,1,null,null,null],[15305,-4230,4,0.9,0.1,null,null],[15481,-4283,2,0.9,null,null,null],[15349,-5009,4,0.4,0.3,null,null],[11874,-4879,2,0.6,null,null,null],[15453,-4984,1,0.7,null,null,null],[11907,-4742,4,0.8,-0.6,null,null],[12440,-4278,4,0.5,0.3,null,null],[11980,-4582,2,0.9,null,null,null],[12131,-4387,1,1.1,null,null,null],[15681,-4973,4,1,null,null,null],[12591,-4252,1,0.8,null,null,null],[12777,-4244,2,0.9,0.2,null,null],[12969,-4227,3,0.9,null,null,null],[15897,-5071,2,0.9,-0.2,null,null],[13204,-4228,4,1,null,null,null],[11592,-5261,1,0.7,0.2,null,null],[12743,-4826,1,0.4,0.3,null,null],[10102,-5078,2,0.7,0.4,null,null],[12854,-4782,3,0.9,0.1,null,null],[10191,-5033,1,0.7,null,null,null],[10523,-5133,2,1,null,null,null],[10336,-4977,4,1.1,-0.3,null,null],[10667,-5250,2,0.8,-0.1,null,null],[9665,-6403,4,0.7,0.3,null,null],[10798,-5379,1,0.5,null,null,null],[9670,-5547,1,0.9,-0.1,null,null],[9834,-6369,3,1,null,null,null],[9864,-5572,2,1.1,-0.1,null,null],[11362,-3957,2,0.9,null,1,null],[11162,-3830,4,1,-0.1,null,null],[8922,-6173,4,1,null,null,null],[9003,-5368,1,0.5,null,null,null],[8453,-6153,1,0.6,0.2,null,null],[8954,-5229,3,0.9,-0.2,null,null],[8905,-5072,1,0.8,-0.3,null,null],[8704,-3873,3,0.9,null,null,null],[8578,-6105,2,0.8,0.4,null,null],[8508,-3710,1,0.7,0,null,null],[8614,-5400,4,0.5,null,null,null],[8788,-4922,4,1.1,null,null,null],[8936,-3905,4,0.6,0.3,null,null],[9701,-4613,4,0.9,-0.1,null,null],[6973,-4776,2,0.6,null,null,null],[7016,-4674,1,0.9,null,null,null],[9124,-3853,1,0.9,0.2,null,null],[7253,-4648,4,0.8,0.2,null,null],[6602,-4591,1,0.6,0.2,null,null],[8510,-5322,2,0.9,null,null,null],[6687,-3810,4,0.7,0.3,null,null],[9525,-4492,3,1.1,null,null,null],[7461,-4705,2,0.9,null,null,null],[9280,-3812,2,0.8,-0.3,null,null],[6467,-2811,1,0.3,null,null,null],[6842,-3820,1,0.8,0.3,null,null],[6483,-2725,4,0.6,0.3,null,null],[7675,-4864,1,1.1,null,null,null],[6991,-2885,4,0.9,0.2,null,null],[6610,-2664,4,0.9,null,null,null],[6822,-2736,2,0.9,null,null,null],[6763,-4582,3,0.9,null,null,null],[6509,-2490,2,0.9,-0.3,null,null],[7216,-3865,4,1.1,0.2,1,null],[7018,-3708,2,1,0.2,null,null],[2254,-3301,1,0.8,0.5,null,null],[6378,-2310,1,0.8,0.2,null,null],[7197,-2857,2,0.9,null,null,null],[2609,-3483,4,0.5,null,null,null],[2449,-3385,2,0.9,0.3,1,null],[4585,-2889,4,0.7,-0.2,null,null],[4470,-2768,3,0.8,0.2,null,null],[4083,-4033,1,0.9,0.5,1,null],[1568,-2869,1,0.4,null,null,null],[4336,-4105,2,1.2,null,null,null],[1977,-1678,2,0.5,null,null,null],[1412,-3642,1,0.5,0,1,null],[1570,-2792,4,0.6,null,null,null],[1932,-1586,1,0.6,null,null,null],[1310,-3547,2,0.6,0,null,null],[3611,1391,2,1,null,null,null],[3558,2174,2,0.9,null,null,null],[3431,1563,1,0.9,0.3,null,null],[3142,2813,2,0.7,null,null,null],[3330,2296,4,1.1,null,null,null],[3001,2818,1,0.6,0.3,null,null],[3703,2044,1,0.4,null,null,null],[2872,3863,1,0.9,-0.2,null,null],[3125,2942,3,1.1,null,null,null],[2841,4018,4,1.1,0.1,null,null],[2402,5140,4,0.6,0.3,null,null],[2511,5167,3,0.8,null,null,null],[-14607,-5112,4,0.9,0.1,null,null],[-14430,-5180,1,0.9,0,null,null],[-14197,-5222,2,1.2,-0.1,null,null],[-14895,-4703,4,0.5,0.2,null,null],[-14797,-4728,2,0.4,null,null,null],[-14697,-4739,1,0.4,null,null,null],[-13919,-5281,1,1.1,0,null,null],[-13646,-5170,3,0.7,null,null,null],[-13400,-5068,2,1.2,0.2,null,null],[-13099,-5108,4,1.1,0.2,null,null],[-12824,-5092,1,0.9,null,null,null],[-12631,-5044,2,0.9,-0.2,null,null],[-12427,-4914,1,0.9,null,null,null],[-12270,-4816,2,0.7,-0.3,null,null],[-11772,-4983,2,0.7,0,null,null],[-11940,-4867,1,0.9,null,null,null],[-12091,-4699,3,0.9,null,null,null],[-12270,-4529,4,0.7,null,null,null],[-12460,-4396,1,0.9,0.4,null,null],[-13058,-4252,1,0.9,null,null,null],[-12894,-4096,4,0.7,0.2,null,null],[-12738,-4077,2,0.7,null,null,null],[-13546,-4341,1,0.4,null,null,null],[-13428,-4299,3,0.9,null,null,null],[-14679,-4192,1,0.7,-0.1,null,null],[-14368,-4308,4,0.7,-0.2,null,null],[-14495,-4133,2,1.1,-0.1,null,null],[-12072,-3824,2,0.8,-0.1,null,null],[-11904,-3648,1,1,0,null,null],[-11654,-3569,3,0.7,null,null,null],[-11648,-3357,4,0.9,0,null,null],[-11420,-3359,1,0.9,null,null,null],[-11296,-3135,2,0.7,null,null,null],[-10782,-2838,1,0.8,-0.1,null,null],[-11410,-3039,1,0.3,0.6,null,null],[-10581,-2773,2,1.1,0.1,null,null],[-11118,-5114,4,0.8,0.2,null,null],[-10675,-5079,1,0.9,null,null,null],[-10205,-4890,1,0.8,0.1,null,null],[-11543,-4164,4,0.8,0.3,null,null],[-11287,-4244,2,0.5,null,null,null],[-10018,-4747,2,1,-0.2,null,null],[-9278,419,3,0.5,null,null,null],[-9341,470,4,0.5,0.3,null,null],[-9180,496,1,0.8,0.6,null,null],[-11365,-4131,3,1,null,null,null],[-9353,0,3,0.6,0.3,null,null],[-8975,528,2,1,0.1,null,null],[-9413,89,4,0.9,null,null,null],[-8230,770,1,0.4,null,null,null],[-9231,17,1,0.7,0,null,null],[-6808,1667,3,0.5,-0.2,null,null],[-6694,1622,2,0.8,-0.4,null,null],[-8285,855,3,0.6,null,null,null],[-6793,1796,2,0.8,0.4,null,null],[-6865,1935,1,0.5,-0.1,null,null],[-7043,2222,3,0.6,-0.2,null,null],[-7083,2368,1,0.6,-0.2,null,null],[-7103,2533,4,0.7,-0.4,null,null],[-7099,2721,2,0.8,-0.3,null,null],[-7178,2874,1,0.4,null,null,null],[-6964,3110,4,0.7,0.2,null,null],[-6246,4191,1,0.6,-0.1,null,null],[-6735,3446,1,0.4,0.1,null,null],[-6722,3537,4,0.7,0.4,null,null],[-6396,3388,4,0.9,null,null,null],[-6787,3140,2,0.9,null,null,null],[-6227,4488,2,0.7,-0.5,null,null],[-6281,3953,1,0.6,0.2,null,null],[-6530,3576,1,1.1,null,null,null],[-6147,3994,3,1.1,null,null,null],[-6141,4292,2,1.2,-0.3,null,null],[-6377,5578,2,0.7,-0.5,null,null],[-6152,4569,1,0.9,-0.2,null,null],[-6222,4769,4,0.7,-0.5,null,null],[-6266,4956,1,0.6,-0.2,null,null],[-6233,5414,1,0.9,-0.4,null,null],[-6347,5646,3,0.7,-0.1,1,null],[-6400,6066,2,0.7,-0.2,null,null],[-6411,6261,1,0.8,null,null,null],[-6565,7043,1,0.6,-0.3,null,null],[-6377,6415,4,0.9,-0.3,null,null],[-6440,6614,1,0.7,-0.2,null,null],[-5944,1954,3,0.5,-0.4,null,null],[-6001,2039,1,0.8,0.2,null,null],[-6467,7070,3,0.9,null,null,null],[-4963,3608,1,0.6,-0.3,1,null],[-4776,3510,2,0.4,-0.1,1,null],[-5785,1998,2,1.1,-0.2,null,null],[-3708,3449,1,0.6,-0.3,null,null],[-3790,3582,1,0.9,null,null,null],[-4031,3697,4,0.7,-0.1,null,null],[-4859,3634,3,1,null,null,null],[-3850,3730,2,1,0.2,null,null],[-4689,4605,4,0.9,-0.2,null,null],[-3492,2892,1,0.6,-0.2,null,null],[-4507,4483,1,0.6,null,null,null],[-4829,2745,1,0.9,-0.2,null,null],[-4435,4273,2,0.9,-0.6,null,null],[-3383,2930,2,0.9,null,null,null],[-4888,2821,2,0.9,0.1,null,null],[-5372,5172,1,0.5,null,null,null],[-5036,2981,4,0.9,0.3,null,null],[-9895,-1942,1,1,0.1,null,null],[-9371,-2159,4,0.6,null,null,null],[-9995,-1773,4,0.9,-0.5,null,null],[-5280,5218,4,0.9,0,null,null],[-5079,5183,1,0.9,-0.3,null,null],[-5149,3079,1,0.6,0.2,null,null],[-9695,-2048,2,1,-0.1,null,null],[-5063,5374,2,0.9,-0.2,null,null],[-9504,-2059,1,1,0.2,null,null],[-8948,-2140,4,0.7,0.3,null,null],[-9262,-2081,2,1.1,0.4,null,null],[-9068,-2071,4,1,0.2,null,null],[-8861,-2045,2,1.1,0,null,null],[-8654,-2083,1,1,0.3,null,null],[-8473,-2048,3,1,0,null,null],[-8283,-1965,1,1,0.5,null,null],[-8182,-1863,2,0.9,-0.2,null,null],[-10037,-1579,1,0.9,-0.4,null,null],[-10063,-1365,2,0.9,-0.1,null,null],[-10074,-1190,1,0.9,-0.4,null,null],[-8167,-1225,1,0.5,-0.7,null,null],[-8188,-1087,4,0.8,-0.5,null,null],[-9975,-1022,1,0.9,0.3,null,null],[-9835,-910,2,1,0.1,null,null],[-9709,-848,4,1,0.3,null,null],[-9532,-792,2,1,0.1,null,null],[-9348,-779,1,1,0,null,null],[-9131,-784,2,1.1,0.1,null,null],[-8754,-795,3,0.7,null,null,null],[-8587,-797,4,1,0,null,null],[-8424,-856,1,0.9,null,null,null],[-8246,-921,2,0.9,-0.4,null,null],[-8153,-1701,4,0.7,-0.7,null,null],[-6447,-2137,1,0.6,-0.2,null,null],[-8153,-1591,1,0.5,-0.6,null,null],[-7694,-1393,4,1,-0.1,null,null],[-6541,-2030,2,0.7,null,null,null],[-7135,-1547,2,0.7,0.1,null,null],[-5885,-2958,1,0.6,0.3,null,null],[-7171,-1440,1,0.8,-0.2,null,null],[-5620,-3123,2,0.6,-0.4,null,null],[-6631,-1866,4,0.8,null,null,null],[-5882,-3696,2,0.8,-0.4,null,null],[-5716,-2944,3,0.9,null,null,null],[-5949,-3528,1,0.5,-0.1,null,null],[-6869,-4052,4,0.8,null,null,null],[-7081,-2673,3,0.5,null,null,null],[-6725,-4069,1,0.6,-0.2,null,null],[-10487,-2295,2,0.5,0.1,1,null],[-7032,-2749,2,0.6,-0.4,null,null],[-10769,-3817,3,0.6,-0.2,null,null],[-6607,-4081,2,0.5,null,null,null],[-10849,-1824,1,0.7,0.1,null,null],[-10479,-2146,4,0.9,-0.1,null,null],[-7003,-2611,4,0.9,-0.2,null,null],[-10749,-1511,2,0.6,-0.4,null,null],[-10697,-1953,2,1,0.1,null,null],[-10848,-1330,3,0.9,null,null,null],[-10912,-1220,4,0.5,0,null,null],[-9843,-2685,4,0.7,null,null,null],[-10823,-3717,2,0.7,null,null,null],[-9697,-2713,1,0.6,0.3,null,null],[-10080,-3431,2,0.4,null,null,null],[-10648,-3844,1,0.9,null,null,null],[-9530,-2695,2,1,null,null,null],[-2387,-6791,1,0.9,null,null,null],[-8465,-5037,2,0.7,null,null,null],[-2550,-6627,2,0.9,-0.1,null,null],[-9325,-2822,1,0.7,-0.1,null,null],[-10140,-3346,1,0.8,null,null,null],[-8461,-4908,4,0.9,null,null,null],[8116,-1076,2,0.8,-0.3,null,null],[8115,-940,4,0.8,-0.3,null,null],[-2503,-6359,4,1.4,-0.6,null,null],[-9062,-1580,2,0.8,-0.5,null,null],[8120,-790,1,0.8,null,null,null],[-9065,-1444,4,0.8,-0.3,null,null],[-2615,-6159,1,1,null,null,null],[-2744,-5943,2,1.1,null,null,null],[-3713,-4955,3,0.9,null,null,null],[-9061,-1292,1,0.8,0,null,null],[-1551,-4718,4,0.5,null,null,null],[5251,-6249,1,0.5,null,1,null],[5192,-6181,2,0.4,-0.1,null,null],[-2898,-5732,3,0.9,null,null,null],[-1705,-4629,3,0.8,null,null,null],[1618,-7035,1,0.5,null,null,null],[-3829,-4776,4,0.9,null,null,null],[-2851,-5589,4,1.1,-0.2,null,null],[-2974,-5399,2,1.1,null,null,null],[-3952,-4568,1,0.9,null,null,null],[-4135,-4368,2,1.1,0.1,1,null],[-3428,-5104,1,1.1,null,null,null],[-3167,-5254,4,0.9,0.1,null,null],[-3049,-6916,2,1,null,null,null],[-3097,-6722,1,0.9,-0.3,null,null],[-3190,-6493,3,1,null,null,null],[-3318,-6284,4,1.1,null,null,null],[-4672,-5861,1,1.1,1,null,null],[-4480,-5668,1,1,null,null,null],[-4294,-5548,2,0.9,1.1,null,null],[-3433,-6072,1,1,-0.2,null,null],[-3568,-5881,3,1,null,null,null],[-3736,-5698,2,1.2,null,null,null],[-3978,-7517,3,0.9,0.1,null,null],[-3956,-5572,4,1,null,null,null],[-4103,-5400,1,1,null,null,null],[-4281,-5240,2,1,null,null,null],[-4409,-5034,3,1,null,null,null],[-4475,-4808,4,0.9,null,null,null],[-2777,-7546,3,1,0.8,null,null],[-2542,-7502,2,0.9,0.4,null,null],[-2398,-7364,1,0.9,-0.7,null,null],[-2350,-7151,2,0.9,-0.4,null,null],[-2315,-6976,4,0.8,-0.8,null,null],[-3749,-7488,4,1,null,null,null],[-2995,-7596,2,1.2,0.5,null,null],[-3253,-7558,3,1.1,0.3,null,null],[-3468,-7472,4,1,null,null,null],[-5028,-6473,2,1,0.4,null,null],[-3604,-7301,1,1.1,null,null,null],[-3678,-7078,2,1.1,null,null,null],[-3835,-6826,3,1.1,null,null,null],[-3935,-6595,2,1,null,null,null],[-5214,-7381,3,1,null,null,null],[-4065,-6416,3,1.1,null,null,null],[-4174,-6231,4,0.7,null,null,null],[-4556,-6940,3,1,null,null,null],[-4663,-6781,4,1,null,null,null],[-4748,-6548,2,1.3,null,null,null],[-4847,-6257,2,1.1,-0.4,null,null],[-4806,-6016,4,0.9,1.2,null,null],[-4950,-7410,1,1.4,0.2,null,null],[-5470,-7251,4,1.3,-0.2,null,null],[-5637,-7038,2,1,-0.3,null,null],[-5593,-6819,4,1,null,null,null],[-5406,-6727,3,1,0.6,null,null],[-5263,-6580,1,1,0.4,null,null],[-4636,-7476,2,1,0.2,null,null],[-4399,-7496,2,0.9,-0.2,null,null],[-6769,-7571,2,0.9,-0.4,null,null],[-6853,-7377,1,0.9,null,null,null],[-8273,-7231,4,0.5,0.4,null,null],[-4182,-7512,4,0.9,0.1,null,null],[-7525,-5855,2,0.9,null,null,null],[-7495,-6329,3,0.5,null,null,null],[-7297,-6946,2,0.9,null,null,null],[-8148,-7137,1,0.7,null,null,null],[-7030,-7301,4,0.7,null,null,null]],walls:[[1009,-2308,108],[1241,-2490,60],[1157,-2379,84],[622,-2126,48],[669,-2187,72],[-392,-1669,132],[-273,-1746,60],[-252,-1504,120],[1553,-2016,48],[1637,-1972,60],[1736,-1922,60],[2150,-2406,72],[2238,-2318,108],[2364,-2391,72],[2491,-2682,72],[2596,-2671,108],[-150,-3147,48],[-155,-3044,84],[-427,-3600,48],[-259,-2982,60],[-379,-3529,72],[-665,-3052,60],[20,-1816,60],[127,-1799,60],[263,-2572,48],[405,-2570,108],[851,-4183,120],[754,-3971,108],[1757,-5065,132],[1169,-4453,108],[2054,-5244,108],[1631,-4901,108],[2305,-5281,108],[1007,-4281,96],[2766,-5202,96],[2927,-5204,84],[3206,-5218,36],[3099,-5193,72],[1417,-4726,120],[2844,-1513,60],[3206,-1464,120],[2881,-1403,108],[3804,-2025,84],[4116,-1778,108],[3715,-1508,72],[4247,-1126,72],[3860,268,60],[4334,-1011,132],[3849,349,72],[3956,490,96],[4073,667,108],[3583,-864,96],[4135,836,120],[4785,-743,120],[4993,-839,108],[5224,-482,84],[5235,-1238,132],[5419,-1346,72],[6075,-5099,96],[5767,-4953,108],[5896,-4967,108],[5384,-4642,108],[5704,-4857,108],[5563,-4697,108],[5406,-4470,132],[5352,-3964,108],[5309,-3665,132],[5247,-3464,108],[5300,-3121,108],[3524,-3340,132],[3661,-3589,108],[7236,-1376,72],[7624,-1610,96],[7403,-1555,84],[7514,-1568,108],[3660,-2705,108],[3374,-2813,96],[7347,-1447,108],[7236,-775,60],[7207,-631,108],[7303,-468,108],[7262,-1263,108],[7404,-350,120],[7589,-305,108],[7741,-1589,120],[7949,-1594,120],[8152,-1599,132],[8378,-1602,144],[7873,-321,72],[8543,-1661,84],[7790,-259,120],[8675,-1573,120],[8163,-245,84],[8329,-311,84],[8275,-229,120],[8447,-277,120],[8824,-1447,108],[7221,-1140,60],[8924,-1273,108],[6844,-950,120],[8949,-1060,132],[8904,-920,96],[8582,-338,84],[8963,-803,120],[8680,-322,108],[8811,-449,108],[8910,-610,108],[6855,114,96],[6971,241,120],[6852,656,60],[6980,706,108],[6946,939,120],[6027,-560,72],[7521,425,48],[7599,389,60],[5863,-431,108],[9392,262,108],[7521,512,72],[9807,1027,60],[9554,237,120],[9346,392,144],[9789,1142,84],[9747,-532,96],[8591,347,72],[9951,-509,120],[9308,2417,60],[10185,-522,108],[10330,2147,72],[9350,2480,84],[10503,2124,108],[12500,2628,60],[13188,2864,60],[12637,2659,84],[13262,2899,60],[13777,5168,60],[15709,6399,48],[13539,5664,60],[15660,6474,48],[13743,5248,84],[15482,6600,48],[15591,6525,36],[13487,5738,84],[15407,6702,72],[8171,-2568,60],[16001,6015,72],[16017,6110,48],[6496,-1491,60],[6626,-1480,84],[6190,-1022,96],[8325,-2615,120],[8222,-2412,120],[9204,-2288,108],[9279,-2216,120],[10375,-1558,96],[10309,-1421,108],[10247,-1216,144],[10079,-2310,108],[10320,-2330,120],[10942,-2963,108],[10807,-2778,132],[12989,-1929,72],[12613,-1181,48],[12559,-1120,60],[11642,-1900,84],[11558,-1692,108],[11509,-1479,60],[12559,-2673,96],[12446,-2487,120],[12375,-2303,108],[10363,-3514,84],[10290,-3340,108],[10162,-3207,84],[9003,-3048,108],[9161,-3119,72],[14550,-3462,108],[14407,-3335,108],[14366,-4493,108],[14477,-4437,120],[15305,-4230,108],[15481,-4283,108],[15349,-5009,48],[11874,-4879,72],[15453,-4984,84],[11907,-4742,96],[12440,-4278,60],[11980,-4582,108],[12131,-4387,132],[15681,-4973,120],[12591,-4252,96],[12777,-4244,108],[12969,-4227,108],[15897,-5071,108],[13204,-4228,120],[11592,-5261,84],[12743,-4826,48],[10102,-5078,84],[12854,-4782,108],[10191,-5033,84],[10523,-5133,120],[10336,-4977,132],[10667,-5250,96],[9665,-6403,84],[10798,-5379,60],[9670,-5547,108],[9834,-6369,120],[9864,-5572,132],[11362,-3957,108],[11162,-3830,120],[8922,-6173,120],[9003,-5368,60],[8453,-6153,72],[8954,-5229,108],[8905,-5072,96],[8704,-3873,108],[8578,-6105,96],[8508,-3710,84],[8614,-5400,60],[8788,-4922,132],[8936,-3905,72],[9701,-4613,108],[6973,-4776,72],[7016,-4674,108],[9124,-3853,108],[7253,-4648,96],[6602,-4591,72],[8510,-5322,108],[6687,-3810,84],[9525,-4492,132],[7461,-4705,108],[9280,-3812,96],[6467,-2811,36],[6842,-3820,96],[6483,-2725,72],[7675,-4864,132],[6991,-2885,108],[6610,-2664,108],[6822,-2736,108],[6763,-4582,108],[6509,-2490,108],[7216,-3865,132],[7018,-3708,120],[2254,-3301,96],[6378,-2310,96],[7197,-2857,108],[2609,-3483,60],[2449,-3385,108],[4585,-2889,84],[4470,-2768,96],[4083,-4033,108],[1568,-2869,48],[4336,-4105,144],[1977,-1678,60],[1412,-3642,60],[1570,-2792,72],[1932,-1586,72],[1310,-3547,72],[3611,1391,120],[3558,2174,108],[3431,1563,108],[3142,2813,84],[3330,2296,132],[3001,2818,72],[3703,2044,48],[2872,3863,108],[3125,2942,132],[2841,4018,132],[2402,5140,72],[2511,5167,96],[-14607,-5112,108],[-14430,-5180,108],[-14197,-5222,144],[-14895,-4703,60],[-14797,-4728,48],[-14697,-4739,48],[-13919,-5281,132],[-13646,-5170,84],[-13400,-5068,144],[-13099,-5108,132],[-12824,-5092,108],[-12631,-5044,108],[-12427,-4914,108],[-12270,-4816,84],[-11772,-4983,84],[-11940,-4867,108],[-12091,-4699,108],[-12270,-4529,84],[-12460,-4396,108],[-13058,-4252,108],[-12894,-4096,84],[-12738,-4077,84],[-13546,-4341,48],[-13428,-4299,108],[-14679,-4192,84],[-14368,-4308,84],[-14495,-4133,132],[-12072,-3824,96],[-11904,-3648,120],[-11654,-3569,84],[-11648,-3357,108],[-11420,-3359,108],[-11296,-3135,84],[-10782,-2838,96],[-11410,-3039,36],[-10581,-2773,132],[-11118,-5114,96],[-10675,-5079,108],[-10205,-4890,96],[-11543,-4164,96],[-11287,-4244,60],[-10018,-4747,120],[-9278,419,60],[-9341,470,60],[-9180,496,96],[-11365,-4131,120],[-9353,0,72],[-8975,528,120],[-9413,89,108],[-8230,770,48],[-9231,17,84],[-6808,1667,60],[-6694,1622,96],[-8285,855,72],[-6793,1796,96],[-6865,1935,60],[-7043,2222,72],[-7083,2368,72],[-7103,2533,84],[-7099,2721,96],[-7178,2874,48],[-6964,3110,84],[-6246,4191,72],[-6735,3446,48],[-6722,3537,84],[-6396,3388,108],[-6787,3140,108],[-6227,4488,84],[-6281,3953,72],[-6530,3576,132],[-6147,3994,132],[-6141,4292,144],[-6377,5578,84],[-6152,4569,108],[-6222,4769,84],[-6266,4956,72],[-6233,5414,108],[-6347,5646,84],[-6400,6066,84],[-6411,6261,96],[-6565,7043,72],[-6377,6415,108],[-6440,6614,84],[-5944,1954,60],[-6001,2039,96],[-6467,7070,108],[-4963,3608,72],[-4776,3510,48],[-5785,1998,132],[-3708,3449,72],[-3790,3582,108],[-4031,3697,84],[-4859,3634,120],[-3850,3730,120],[-4689,4605,108],[-3492,2892,72],[-4507,4483,72],[-4829,2745,108],[-4435,4273,108],[-3383,2930,108],[-4888,2821,108],[-5372,5172,60],[-5036,2981,108],[-9895,-1942,120],[-9371,-2159,72],[-9995,-1773,108],[-5280,5218,108],[-5079,5183,108],[-5149,3079,72],[-9695,-2048,120],[-5063,5374,108],[-9504,-2059,120],[-8948,-2140,84],[-9262,-2081,132],[-9068,-2071,120],[-8861,-2045,132],[-8654,-2083,120],[-8473,-2048,120],[-8283,-1965,120],[-8182,-1863,108],[-10037,-1579,108],[-10063,-1365,108],[-10074,-1190,108],[-8167,-1225,60],[-8188,-1087,96],[-9975,-1022,108],[-9835,-910,120],[-9709,-848,120],[-9532,-792,120],[-9348,-779,120],[-9131,-784,132],[-8754,-795,84],[-8587,-797,120],[-8424,-856,108],[-8246,-921,108],[-8153,-1701,84],[-6447,-2137,72],[-8153,-1591,60],[-7694,-1393,120],[-6541,-2030,84],[-7135,-1547,84],[-5885,-2958,72],[-7171,-1440,96],[-5620,-3123,72],[-6631,-1866,96],[-5882,-3696,96],[-5716,-2944,108],[-5949,-3528,60],[-6869,-4052,96],[-7081,-2673,60],[-6725,-4069,72],[-10487,-2295,60],[-7032,-2749,72],[-10769,-3817,72],[-6607,-4081,60],[-10849,-1824,84],[-10479,-2146,108],[-7003,-2611,108],[-10749,-1511,72],[-10697,-1953,120],[-10848,-1330,108],[-10912,-1220,60],[-9843,-2685,84],[-10823,-3717,84],[-9697,-2713,72],[-10080,-3431,48],[-10648,-3844,108],[-9530,-2695,120],[-2387,-6791,108],[-8465,-5037,84],[-2550,-6627,108],[-9325,-2822,84],[-10140,-3346,96],[-8461,-4908,108],[8116,-1076,96],[8115,-940,96],[-2503,-6359,168],[-9062,-1580,96],[8120,-790,96],[-9065,-1444,96],[-2615,-6159,120],[-2744,-5943,132],[-3713,-4955,108],[-9061,-1292,96],[-1551,-4718,60],[5251,-6249,60],[5192,-6181,48],[-2898,-5732,108],[-1705,-4629,96],[1618,-7035,60],[-3829,-4776,108],[-2851,-5589,132],[-2974,-5399,132],[-3952,-4568,108],[-4135,-4368,132],[-3428,-5104,132],[-3167,-5254,108],[-3049,-6916,120],[-3097,-6722,108],[-3190,-6493,120],[-3318,-6284,132],[-4672,-5861,132],[-4480,-5668,120],[-4294,-5548,108],[-3433,-6072,120],[-3568,-5881,120],[-3736,-5698,144],[-3978,-7517,108],[-3956,-5572,120],[-4103,-5400,120],[-4281,-5240,120],[-4409,-5034,120],[-4475,-4808,108],[-2777,-7546,120],[-2542,-7502,108],[-2398,-7364,108],[-2350,-7151,108],[-2315,-6976,96],[-3749,-7488,120],[-2995,-7596,144],[-3253,-7558,132],[-3468,-7472,120],[-5028,-6473,120],[-3604,-7301,132],[-3678,-7078,132],[-3835,-6826,132],[-3935,-6595,120],[-5214,-7381,120],[-4065,-6416,132],[-4174,-6231,84],[-4556,-6940,120],[-4663,-6781,120],[-4748,-6548,156],[-4847,-6257,132],[-4806,-6016,108],[-4950,-7410,168],[-5470,-7251,156],[-5637,-7038,120],[-5593,-6819,120],[-5406,-6727,120],[-5263,-6580,120],[-4636,-7476,120],[-4399,-7496,108],[-6769,-7571,108],[-6853,-7377,108],[-8273,-7231,60],[-4182,-7512,108],[-7525,-5855,108],[-7495,-6329,60],[-7297,-6946,108],[-8148,-7137,84],[-7030,-7301,84]],groundDoodads:[[-9670,-1470,"doodadField",0.5,0,null,null],[8600,-940,"doodadField",0.5,0,null,null],[920,-2800,"doodadField",0.5,0,null,null]],debug:{show:!0,collisions:!1},mobile:!1,ios:!1,phone:!1,tablet:!1,mouse:!1,resolution:1,overdrawOptimize:!0,overdraw:256,scalingFactor:2500,minimapPaddingX:16,minimapPaddingY:16,minimapSize:240,maxChatLines:50,maxScoreboard:8,shadowScaling:2,shadowOffsetX:20,shadowOffsetY:40,ackFrequency:10,bucketSize:512,mapWidth:32768,mapHeight:16384},window.Tools={},window.Textures={},window.Graphics={},window.Network={},window.Input={},window.Players={},window.Mobs={},window.Particles={},window.UI={},window.Games={},window.Sound={};var Bt=function(Gt,Yt){Tools.updateTime(Gt),Tools.debugStartFrame(),game.state==Network.STATE.PLAYING?(Input.update(),Network.detectConnectivity(),Players.update(),Mobs.update(),Particles.update(),Games.update(),Sound.update()):game.state==Network.STATE.LOGIN?Tools.updateReel():Sound.update(),Graphics.update(),Yt||Graphics.render(),Tools.debugEndFrame()},Xt=function(){var Gt=performance.now()-game.time;450<Gt&&!game.focus&&Bt(Gt/16.666,!0)};window.RunGame=function(){game.state=Network.STATE.LOGIN,Tools.startupMsg(),Tools.loadSettings(),Tools.detectCapabilities(),Tools.setupDebug(),Graphics.setup(),Tools.initBuckets(),Particles.setup(),UI.setup(),Input.setup(),Games.setup(),Sound.setup();var Gt=new PIXI.ticker.Ticker;Gt.add(Bt),Gt.start(),setInterval(Xt,500),Graphics.ticker=Gt}}();class Vector{constructor(Bt,Xt){this.x=Bt,this.y=Xt}add(Bt){this.x+=Bt,this.y+=Bt}divide(Bt){this.x/=Bt,this.y/=Bt}multiply(Bt){this.x*=Bt,this.y*=Bt}limit(Bt){this.divide(this.length()),this.multiply(Bt)}clone(){return new Vector(this.x,this.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}angle(){return Math.atan2(this.y,this.x)-Math.PI/2}ceil(Bt){this.x>Bt&&(this.x=Bt),this.y>Bt&&(this.y=Bt)}floor(Bt){this.x<Bt&&(this.x=Bt),this.y<Bt&&(this.y=Bt)}both(Bt){this.x=Bt,this.y=Bt}static zero(){return new Vector(0,0)}static diag(Bt){return new Vector(Bt,Bt)}static create(Bt,Xt){return new Vector(Math.sin(Bt)*Xt,-Math.cos(Bt)*Xt)}static createOff(Bt,Xt,Gt){return new Vector(Bt.x+Math.sin(Xt)*Gt,Bt.y-Math.cos(Xt)*Gt)}}function loadGameCode(){!function(){var Gt={},Yt=0,Ht={started:!1,startX:200,startY:-2450,pan:0,dist:100,explosion:4e3,direction:1};Tools.updateReel=function(){if(!Ht.started){Ht.pos=Vector.zero();for(var $t=[3,1,2,4,5],en=[-270,-150,0,150,270],tn=0,Jt;tn<$t.length;tn++)Players.add({id:tn+1,team:1,status:0,reel:!0,name:"",type:$t[tn],posX:0,posY:0,rot:0,flag:1}),(Jt=Players.get(tn+1)).keystate.UP=!0,Jt._offset=en[tn]}Ht.started=!0,2e3<Ht.dist?Ht.direction=-1:100>Ht.dist&&(Ht.direction=1),Ht.dist+=.5*Ht.direction*game.timeFactor,Ht.pan+=1/Ht.dist*game.timeFactor,Ht.pos.x=Ht.startX+Math.sin(Ht.pan)*Ht.dist,Ht.pos.y=Ht.startY-Math.cos(Ht.pan)*Ht.dist,SWAM.debug||Graphics.setCamera(Ht.pos.x,Ht.pos.y),Players.update(),Particles.update();for(var an=1,nn;5>=an;an++)(nn=Players.get(an)).pos.x=Ht.pos.x+nn._offset,nn.pos.y=Ht.pos.y+.24*(game.screenY/game.scale),null==nn._prevPos?nn._prevPos=nn.pos.clone():nn.rot=new Vector(nn.pos.x-nn._prevPos.x,nn.pos.y-nn._prevPos.y).angle()+Math.PI,nn._prevPos=new Vector((19*nn._prevPos.x+nn.pos.x)/20,(19*nn._prevPos.y+nn.pos.y)/20);if(game.time>Ht.explosion){var rn=new Vector(Tools.rand(Ht.pos.x-game.halfScreenX/game.scale,Ht.pos.x+game.halfScreenX/game.scale),Tools.rand(Ht.pos.y-game.halfScreenY/game.scale,Ht.pos.y+game.halfScreenY/game.scale));Particles.explosion(rn,Tools.rand(2,2.5),Tools.randInt(4,7)),Particles.explosion(new Vector(rn.x+Tools.rand(-100,100),rn.y+Tools.rand(-100,100)),Tools.rand(1,1.2)),Ht.explosion=game.time+Tools.rand(1e3,3e3)}},Tools.wipeReel=function(){Particles.wipe(),Players.wipe()},Tools.startupMsg=function(){console.log("%c\u039BIRM\u039BSH Engine "+game.version+" starting up!","font-size: 20px;"),console.log(""),console.log("%c*** Important message ***","font-size: 16px; color: red;"),console.log("%cDo not paste any commands given by players in this console window","font-size: 14px; color: red;"),console.log("")},Tools.detectCapabilities=function(){jt(),config.mobile&&!config.settings.mobileshown&&(UI.popBigMsg(1),config.settings.mobileshown=!0,Tools.setSettings({mobileshown:!0})),config.mobile&&Input.setupLogin()};var jt=function(){config.mobile="ontouchstart"in document.documentElement&&void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),config.ios=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,"#forcemobile"==window.location.hash&&(config.mobile=!0),"#nomobile"==window.location.hash&&(config.mobile=!1)};Tools.loadSettings=function(){var Jt=Vt();config.storage=Jt,DEVELOPMENT&&console.log(Jt),null!=Jt.id&&(config.settings.id=Jt.id),null!=Jt.session&&(config.settings.session=Jt.session),null!=Jt.name&&(config.settings.name=Jt.name),null!=Jt.region&&(config.settings.region=Jt.region),null!=Jt.helpshown&&(config.settings.helpshown=Jt.helpshown),null!=Jt.mobileshown&&(config.settings.mobileshown=Jt.mobileshown),null!=Jt.flag&&(config.settings.flag=Jt.flag),null!=Jt.hidpi&&(config.settings.hidpi=Jt.hidpi),null!=Jt.sound&&(config.settings.sound=Jt.sound),null!=Jt.keybinds&&(config.settings.keybinds=Jt.keybinds),null!=Jt.mousemode&&(config.settings.mousemode=Jt.mousemode),Wt()};var Wt=function(){if(null==config.settings.id){var Jt=Tools.randomID(16);config.settings.id=Jt,Tools.setSettings({id:Jt})}null!=config.settings.name&&$("#playername").val(config.settings.name),null!=config.settings.region&&(game.playRegion=config.settings.region),null!=config.settings.flag&&(game.myFlag=config.settings.flag),null==config.settings.sound&&(config.settings.sound=!0),config.settings.mousemode&&Input.toggleMouse(!0),UI.updateSound(),config.settings.oldhidpi=config.settings.hidpi};Tools.randomID=function(Jt){var $t=new Uint8Array(Jt);return window.crypto.getRandomValues($t),zt($t).substr(0,Jt)};var zt=function(Jt){for(var en="",tn=0,$t;tn<Jt.length;tn++)en+=$t=1===($t=(255&Jt[tn]).toString(16)).length?"0"+$t:$t;return en};Tools.setSettings=function(Jt){if(null!=window.localStorage){for(var $t in Jt)config.storage[$t]=Jt[$t];try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(en){}}},Tools.removeSetting=function(Jt){if(null!=window.localStorage){null!=config.storage[Jt]&&delete config.storage[Jt];try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch($t){}}},Tools.wipeSettings=function(){if(null!=window.localStorage){config.storage={},config.settings={};try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(Jt){}}};var Vt=function(){if(null==window.localStorage)return{};var Jt=null,$t={};try{Jt=localStorage.getItem("settings")}catch(en){}if(null!=Jt)try{$t=JSON.parse(Jt)}catch(en){}return $t};Tools.ajaxPost=function(Jt,$t,en){$.ajax({url:Jt,method:"POST",data:$t,dataType:"json",timeout:1e4,success:function(tn){null!=en&&en(null!=tn&&1==tn.result?tn:null)},error:function(){null!=en&&en(null)}})},Tools.length=function(Jt,$t){return Math.sqrt(Jt*Jt+$t*$t)},Tools.oscillator=function(Jt,$t,en){return 1+Math.sin((game.time+(en||0))/$t)*Jt},Tools.converge=function(Jt,$t,en){return .01>Math.abs(Jt-$t)?$t:Jt+en*($t-Jt)},Tools.rand=function(Jt,$t){return Math.random()*($t-Jt)+Jt},Tools.randCircle=function(){return Tools.rand(0,6.28318530718)},Tools.randInt=function(Jt,$t){var en=Math.floor(Math.random()*($t+1-Jt)+Jt);return en>=$t&&(en=$t),en},Tools.clamp=function(Jt,$t,en){return Jt<=$t?$t:Jt>=en?en:Jt},Tools.lerp=function(Jt,$t,en){return en*($t-Jt)+Jt},Tools.colorLerp=function(Jt,$t,en){0>=en&&(en=.001),1<=en&&(en=.999);var tn=Jt>>16,nn=255&Jt>>8,an=255&Jt;return 0|16777216+(tn+en*(($t>>16)-tn)<<16)+(nn+en*((255&$t>>8)-nn)<<8)+(an+en*((255&$t)-an))},Tools.distance=function(Jt,$t,en,tn){var nn=Jt-en,an=$t-tn;return Math.sqrt(nn*nn+an*an)},Tools.distFastCheck=function(Jt,$t,en,tn){return Math.abs(Jt.x-$t.x)<=en&&Math.abs(Jt.y-$t.y)<=tn},Tools.distFastCheckFloat=function(Jt,$t,en,tn,nn){return Math.abs(Jt-en)<=nn&&Math.abs($t-tn)<=nn},Tools.updateTime=function(Jt){game.timeFactor=60>Jt?Jt:60,game.timeFactorUncapped=game.timeFactor,10<game.timeFactor&&(game.timeFactor=10),game.time=performance.now(),game.frames++},Tools.reducedFactor=function(){var Jt=(performance.now()-game.time)/16.666;return .1<Math.abs(game.jitter)&&(Jt+=game.jitter/16.666),Jt};var qt={shockwave:[0.1,0.1,0.11,0.12,0.12,0.13,0.14,0.14,0.15,0.16,0.17,0.18,0.2,0.21,0.22,0.24,0.26,0.29,0.31,0.35,0.38,0.42,0.47,0.52,0.58,0.64,0.71,0.78,0.84,0.9,0.95,0.98,1,1,1,0.98,0.97,0.94,0.9,0.85,0.78,0.7,0.62,0.52,0.43,0.34,0.26,0.18,0.11,0.05,0],explosionSmoke:[0,0,0.02,0.06,0.13,0.26,0.45,0.71,0.91,0.99,0.99,0.97,0.94,0.92,0.89,0.86,0.83,0.8,0.77,0.74,0.71,0.68,0.65,0.63,0.6,0.57,0.54,0.51,0.48,0.45,0.42,0.4,0.37,0.34,0.31,0.29,0.26,0.24,0.21,0.19,0.16,0.14,0.12,0.1,0.08,0.06,0.04,0.02,0.01,0,0]};Tools.easing={outElastic:function(Jt,$t){var en=1-($t||.7),tn=2*Jt;if(0===Jt||1===Jt)return Jt;var nn=en/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*tn)*Math.sin((tn-nn)*(2*Math.PI)/en)+1},custom:function(Jt,$t){var en=qt[$t],tn=en.length,nn=Math.floor(Jt*(tn-1)),an=en[nn];return nn===tn-1?an:Tools.lerp(an,en[nn+1],Jt*(tn-1)%1)}},Tools.setupDebug=function(){DEVELOPMENT&&config.debug.show&&(UI.show("#debug"),game.debug={last:performance.now(),ticks:0,frames:game.frames},setInterval(Tools.updateDebug,2123))},Tools.debugLine=function(Jt,$t){return"<div class=\"line\"><span class=\"attr\">"+UI.escapeHTML(Jt)+"</span><span class=\"val\">"+UI.escapeHTML($t)+"</span></div>"},Tools.updateDebug=function(){var Jt=performance.now(),$t=1e3*(game.frames-game.debug.frames)/(Jt-game.debug.last),en=Players.count(),tn=Mobs.count(),nn=Mobs.countDoodads(),an="",rn=Players.getMe();null!=rn&&(an=Tools.debugLine("Coords",Math.round(rn.pos.x)+", "+Math.round(rn.pos.y)));var on=Tools.debugLine("FPS",Math.round($t))+Tools.debugLine("Ticks",(100*(game.debug.ticks/(Jt-game.debug.last))).toFixed(2)+"%")+Tools.debugLine("Ping",game.ping.toFixed(2)+" ms")+Tools.debugLine("Res",game.screenX+" x "+game.screenY)+"<div class=\"spacer\"></div>"+Tools.debugLine("Players",en[0]+" / "+en[1])+Tools.debugLine("Mobs",tn[0]+" / "+tn[1])+Tools.debugLine("Particles",Particles.count())+Tools.debugLine("Doodads",nn[0]+" / "+nn[1])+"<div class=\"spacer\"></div>"+an+Tools.debugLine("Scale",game.scale.toFixed(2))+Tools.debugLine("Jitter",game.jitter.toFixed(3))+"<div class=\"close\" onclick=\"Tools.hideDebug()\">x</div>";$("#debug").html(on),game.debug.last=Jt,game.debug.ticks=0,game.debug.frames=game.frames},Tools.hideDebug=function(){UI.hide("#debug")},Tools.debugStartFrame=function(){DEVELOPMENT&&config.debug.show&&(game.debug.startedFrame=performance.now())},Tools.debugEndFrame=function(){DEVELOPMENT&&config.debug.show&&null!=game.debug.startedFrame&&(game.debug.ticks+=performance.now()-game.debug.startedFrame)},Tools.earningsToRank=function(Jt){return Math.floor(.0111*Math.pow(Jt,.5))+1},Tools.rankToEarnings=function(Jt){return Math.pow((Jt-1)/.0111,2)},Tools.decodeKeystate=function(Jt,$t){Jt.keystate.UP=0!=(1&$t),Jt.keystate.DOWN=0!=(2&$t),Jt.keystate.LEFT=0!=(4&$t),Jt.keystate.RIGHT=0!=(8&$t),Jt.boost=0!=(16&$t),Jt.strafe=0!=(32&$t),Jt.stealthed=0!=(64&$t),Jt.flagspeed=0!=(128&$t)},Tools.decodeUpgrades=function(Jt,$t){Jt.speedupgrade=(0==(1&$t)?0:1)+(0==(2&$t)?0:2)+(0==(4&$t)?0:4),Jt.powerups.shield=0!=(8&$t),Jt.powerups.rampage=0!=(16&$t)},Tools.decodeMinimapCoords=function(Jt,$t){return new Vector(128*Jt-16384+64,Tools.clamp(128*$t-16384,-8192,8192)+64)},Tools.decodeSpeed=function(Jt){return(Jt-32768)/1638.4},Tools.decodeCoordX=function(Jt){return(Jt-32768)/2},Tools.decodeCoordY=function(Jt){return(Jt-32768)/4},Tools.decodeCoord24=function(Jt){return(Jt-8388608)/512},Tools.decodeAccel=function(Jt){return(Jt-32768)/32768},Tools.decodeRotation=function(Jt){return Jt/6553.6},Tools.decodeHealthnergy=function(Jt){return Jt/255},Tools.decodeRegen=function(Jt){return(Jt-32768)/1e6};var Kt=function(Jt){return Tools.clamp(Math.floor(Jt/Gt.size)+Gt.bucketsHalfX,0,Gt.bucketsMaxX)},Zt=function(Jt){return Tools.clamp(Math.floor(Jt/Gt.size)+Gt.bucketsHalfY,0,Gt.bucketsMaxY)};Tools.initBuckets=function(){Gt={size:config.bucketSize,halfSize:parseInt(config.bucketSize/2),bucketsMaxX:parseInt(config.mapWidth/config.bucketSize)-1,bucketsMaxY:parseInt(config.mapHeight/config.bucketSize)-1,bucketsHalfX:parseInt(config.mapWidth/config.bucketSize/2),bucketsHalfY:parseInt(config.mapHeight/config.bucketSize/2)};for(var Jt=0;Jt<=Gt.bucketsMaxX;Jt++){game.buckets.push([]);for(var $t=0;$t<=Gt.bucketsMaxY;$t++)game.buckets[Jt].push([[]])}for(var en=0;en<config.doodads.length;en++)Jt=Kt(config.doodads[en][0]),$t=Zt(config.doodads[en][1]),game.buckets[Jt][$t][0].push(en)},Tools.getBucketBounds=function(Jt,$t,en){return[Tools.clamp(Math.floor((Jt.x-$t)/Gt.size)+Gt.bucketsHalfX,0,Gt.bucketsMaxX),Tools.clamp(Math.floor((Jt.x+$t)/Gt.size)+Gt.bucketsHalfX,0,Gt.bucketsMaxX),Tools.clamp(Math.floor((Jt.y-en)/Gt.size)+Gt.bucketsHalfY,0,Gt.bucketsMaxY),Tools.clamp(Math.floor((Jt.y+en)/Gt.size)+Gt.bucketsHalfY,0,Gt.bucketsMaxY)]},Tools.deferUpdate=function(Jt){setTimeout(Jt,1)};var Qt=function(Jt,$t){if($t instanceof Error){var en={};return Object.getOwnPropertyNames($t).forEach(function(tn){en[tn]=$t[tn]}),en}return $t};Tools.handleError=function(Jt){5<++Yt||(null!=Jt.error&&(Jt.error=JSON.stringify(Jt.error,Qt)),Tools.ajaxPost("/clienterror",{type:"runtime",error:JSON.stringify(Jt,null,"\t\t")}))},Tools.encodeUTF8=function(Jt){for(var $t=0,en=new Uint8Array(4*Jt.length),tn=0,nn;tn!=Jt.length;tn++)if(nn=Jt.charCodeAt(tn),128>nn)en[$t++]=nn;else{if(2048>nn)en[$t++]=192|nn>>6;else{if(55295<nn&&56320>nn){if(++tn==Jt.length)throw"UTF-8 encode: incomplete surrogate pair";var an=Jt.charCodeAt(tn);if(56320>an||57343<an)throw"UTF-8 encode: second char code 0x"+an.toString(16)+" at index "+tn+" in surrogate pair out of range";nn=65536+((1023&nn)<<10)+(1023&an),en[$t++]=240|nn>>18,en[$t++]=128|63&nn>>12}else en[$t++]=224|nn>>12;en[$t++]=128|63&nn>>6}en[$t++]=128|63&nn}return en.subarray(0,$t)},Tools.decodeUTF8=function(Jt){for(var $t="",en=0,tn;en<Jt.length;){if(tn=Jt[en++],127<tn){if(191<tn&&224>tn){if(en>=Jt.length)throw"UTF-8 decode: incomplete 2-byte sequence";tn=(31&tn)<<6|63&Jt[en]}else if(223<tn&&240>tn){if(en+1>=Jt.length)throw"UTF-8 decode: incomplete 3-byte sequence";tn=(15&tn)<<12|(63&Jt[en])<<6|63&Jt[++en]}else{if(!(239<tn&&248>tn))throw"UTF-8 decode: unknown multibyte start 0x"+tn.toString(16)+" at index "+(en-1);if(en+2>=Jt.length)throw"UTF-8 decode: incomplete 4-byte sequence";tn=(7&tn)<<18|(63&Jt[en])<<12|(63&Jt[++en])<<6|63&Jt[++en]}++en}if(65535>=tn)$t+=String.fromCharCode(tn);else{if(!(1114111>=tn))throw"UTF-8 decode: code point 0x"+tn.toString(16)+" exceeds UTF-16 reach";tn-=65536,$t+=String.fromCharCode(55296|tn>>10),$t+=String.fromCharCode(56320|1023&tn)}}return $t}}(),function(){var Gt={map_sea:"assets/map_sea.jpg",map_sea_mask:"assets/map_sea_mask.jpg",map_forest:"assets/map_forest.jpg",map_rock:"assets/map_rock.jpg",map_rock_mask:"assets/map_rock_mask.jpg",map_sand:"assets/map_sand.jpg",map_sand_mask:"assets/map_sand_mask.jpg",mountains:"assets/mountains.png",aircraft:"assets/aircraft.png",shadows:"assets/shadows.png",particles:"assets/particles.png",flags:"assets/flagsbig.png?4",items:"assets/items.png?2",gui:"assets/gui.png"},Yt={spirit:["aircraft",[4,4,512,256]],tornado:["aircraft",[524,4,256,256]],raptor:["aircraft",[788,4,256,256]],prowler:["aircraft",[1052,4,256,256]],comanche:["aircraft",[1316,4,128,256]],comanche_rotor:["aircraft",[1452,4,128,128]],mountain2:["mountains",[0,512,512,512]],mountain1:["mountains",[512,512,512,512]],mountain4:["mountains",[0,0,512,512]],mountain3:["mountains",[512,0,512,512]],crate_shadow:["shadows",[4,140,64,64]],comanche_rotor_shadow:["shadows",[76,140,64,64]],smokeshadow_8:["shadows",[148,140,32,32]],smokeshadow_7:["shadows",[188,140,32,32]],smokeshadow_6:["shadows",[228,140,32,32]],smokeshadow_5:["shadows",[268,140,32,32]],smokeshadow_4:["shadows",[308,140,32,32]],smokeshadow_3:["shadows",[348,140,32,32]],smokeshadow_2:["shadows",[388,140,32,32]],smokeshadow_15:["shadows",[428,140,32,32]],smokeshadow_14:["shadows",[468,140,32,32]],smokeshadow_13:["shadows",[508,140,32,32]],smokeshadow_12:["shadows",[548,140,32,32]],smokeshadow_11:["shadows",[588,140,32,32]],smokeshadow_10:["shadows",[628,140,32,32]],smokeshadow_1:["shadows",[668,140,32,32]],smokeshadow_16:["shadows",[708,140,32,32]],afterburner_shadow:["shadows",[748,140,32,32]],spirit_shadow:["shadows",[4,4,256,128]],tornado_shadow:["shadows",[268,4,128,128]],screenshade:["shadows",[404,4,128,128]],raptor_shadow:["shadows",[540,4,128,128]],prowler_shadow:["shadows",[676,4,128,128]],comanche_shadow:["shadows",[812,4,64,128]],missile_shadow:["shadows",[884,4,32,128]],smokeshadow_9:["shadows",[924,76,32,32]],ctf_flag_shadow:["shadows",[924,4,64,64]],flash_1:["particles",[0,128,120,120]],glowsmall:["particles",[120,128,64,64]],smoke_9:["particles",[184,128,32,32]],smoke_8:["particles",[216,128,32,32]],smoke_7:["particles",[248,128,32,32]],smoke_6:["particles",[280,128,32,32]],smoke_5:["particles",[312,128,32,32]],smoke_4:["particles",[344,128,32,32]],smoke_3:["particles",[376,128,32,32]],smoke_2:["particles",[408,128,32,32]],smoke_16:["particles",[440,128,32,32]],smoke_15:["particles",[472,128,32,32]],smoke_14:["particles",[504,128,32,32]],smoke_13:["particles",[536,128,32,32]],smoke_12:["particles",[568,128,32,32]],smoke_11:["particles",[600,128,32,32]],smoke_10:["particles",[632,128,32,32]],smoke_1:["particles",[664,128,32,32]],shockwave:["particles",[0,0,128,128]],hotsmoke_4:["particles",[128,0,120,120]],hotsmoke_3:["particles",[248,0,120,120]],hotsmoke_2:["particles",[368,0,120,120]],hotsmoke_1:["particles",[488,0,120,120]],flash_4:["particles",[608,0,120,120]],flash_3:["particles",[728,0,120,120]],spark_4:["particles",[848,120,8,8]],spark_3:["particles",[856,120,8,8]],spark_2:["particles",[864,120,8,8]],spark_1:["particles",[872,120,8,8]],flash_2:["particles",[848,0,120,120]],crate_upgrade:["items",[4,268,128,128]],crate_shield:["items",[140,268,128,128]],crate_rampage:["items",[276,268,128,128]],afterburner:["items",[412,268,128,128]],missile_fat:["items",[548,268,64,128]],missile:["items",[620,268,32,128]],doodad_field:["items",[4,4,256,256]],badge_bronze:["items",[268,140,64,64]],powerup_shield:["items",[268,4,128,128]],badge_gold:["items",[404,140,64,64]],powerup_rampage:["items",[404,4,128,128]],badge_silver:["items",[540,140,64,64]],powerup_circle:["items",[540,4,128,128]],glowdirectional:["items",[676,140,64,64]],ctf_flag_red:["items",[676,4,128,128]],glowsmall_copy:["items",[812,140,64,64]],missile_small:["items",[884,140,16,64]],levelborder:["items",[908,140,32,32]],ctf_flag_blue:["items",[812,4,128,128]],hud_shadow:["gui",[4,268,80,348]],hud_mask:["gui",[92,268,80,348]],hud:["gui",[180,268,80,348]],emote_bro:["gui",[268,548,64,64]],emote_clap:["gui",[268,476,64,64]],ui_minimap_box:["gui",[268,404,64,64]],emote_cry:["gui",[340,548,64,64]],emote_kappa:["gui",[340,476,64,64]],emote_tf:["gui",[340,404,64,64]],emote_lol:["gui",[412,548,64,64]],emote_pepe:["gui",[412,476,64,64]],ui_minimap_blue:["gui",[484,596,16,16]],ui_minimap_base_blue:["gui",[484,556,32,32]],ui_minimap_base_red:["gui",[484,516,32,32]],ui_minimap_flag_blue:["gui",[484,476,32,32]],emote_rage:["gui",[412,404,64,64]],ui_minimap_mob:["gui",[484,444,16,16]],ui_minimap_flag_red:["gui",[484,404,32,32]],ui_minimap:["gui",[4,4,512,256]],chatbubbleleft:["gui",[274,274,16,82]],chatbubblecenter:["gui",[350,274,82,82]],chatbubbleright:["gui",[438,274,16,82]],chatbubblepoint:["gui",[297,352,36,22]]},Ht={flag_1:["flags",[2,962,80,60]],flag_2:["flags",[2,898,80,60]],flag_3:["flags",[2,834,80,60]],flag_4:["flags",[2,770,80,60]],flag_5:["flags",[2,706,80,60]],flag_6:["flags",[2,642,80,60]],flag_7:["flags",[2,578,80,60]],flag_8:["flags",[2,514,80,60]],flag_9:["flags",[2,450,80,60]],flag_10:["flags",[2,386,80,60]],flag_11:["flags",[2,322,80,60]],flag_12:["flags",[2,258,80,60]],flag_13:["flags",[2,194,80,60]],flag_14:["flags",[2,130,80,60]],flag_15:["flags",[2,66,80,60]],flag_16:["flags",[86,962,80,60]],flag_17:["flags",[86,898,80,60]],flag_18:["flags",[86,834,80,60]],flag_19:["flags",[86,770,80,60]],flag_20:["flags",[86,706,80,60]],flag_21:["flags",[86,642,80,60]],flag_22:["flags",[86,578,80,60]],flag_23:["flags",[86,514,80,60]],flag_24:["flags",[86,450,80,60]],flag_25:["flags",[86,386,80,60]],flag_26:["flags",[86,322,80,60]],flag_27:["flags",[86,258,80,60]],flag_28:["flags",[86,194,80,60]],flag_29:["flags",[86,130,80,60]],flag_30:["flags",[170,962,80,60]],flag_31:["flags",[170,898,80,60]],flag_32:["flags",[170,834,80,60]],flag_33:["flags",[170,770,80,60]],flag_34:["flags",[170,706,80,60]],flag_35:["flags",[170,642,80,60]],flag_36:["flags",[170,578,80,60]],flag_37:["flags",[170,514,80,60]],flag_38:["flags",[170,450,80,60]],flag_39:["flags",[170,386,80,60]],flag_40:["flags",[170,322,80,60]],flag_41:["flags",[170,258,80,60]],flag_42:["flags",[170,194,80,60]],flag_43:["flags",[254,962,80,60]],flag_44:["flags",[254,898,80,60]],flag_45:["flags",[254,834,80,60]],flag_46:["flags",[254,770,80,60]],flag_47:["flags",[254,706,80,60]],flag_48:["flags",[254,642,80,60]],flag_49:["flags",[254,578,80,60]],flag_50:["flags",[254,514,80,60]],flag_51:["flags",[254,450,80,60]],flag_52:["flags",[254,386,80,60]],flag_53:["flags",[254,322,80,60]],flag_54:["flags",[338,962,80,60]],flag_55:["flags",[338,898,80,60]],flag_56:["flags",[338,834,80,60]],flag_57:["flags",[338,770,80,60]],flag_58:["flags",[338,706,80,60]],flag_59:["flags",[338,642,80,60]],flag_60:["flags",[338,578,80,60]],flag_61:["flags",[338,514,80,60]],flag_62:["flags",[338,450,80,60]],flag_63:["flags",[338,386,80,60]],flag_64:["flags",[422,962,80,60]],flag_65:["flags",[422,898,80,60]],flag_66:["flags",[422,834,80,60]],flag_67:["flags",[422,770,80,60]],flag_68:["flags",[422,706,80,60]],flag_69:["flags",[422,642,80,60]],flag_70:["flags",[422,578,80,60]],flag_71:["flags",[422,514,80,60]],flag_72:["flags",[422,450,80,60]],flag_73:["flags",[506,962,80,60]],flag_74:["flags",[506,898,80,60]],flag_75:["flags",[506,834,80,60]],flag_76:["flags",[506,770,80,60]],flag_77:["flags",[506,706,80,60]],flag_78:["flags",[506,642,80,60]],flag_79:["flags",[506,578,80,60]],flag_80:["flags",[590,770,80,60]],flag_81:["flags",[590,706,80,60]],flag_82:["flags",[590,642,80,60]],flag_83:["flags",[590,578,80,60]],flag_84:["flags",[506,514,80,60]],flag_85:["flags",[590,514,80,60]],flag_86:["flags",[506,450,80,60]],flag_87:["flags",[590,450,80,60]],flag_88:["flags",[422,386,80,60]],flag_89:["flags",[506,386,80,60]],flag_90:["flags",[590,386,80,60]],flag_91:["flags",[338,322,80,60]],flag_92:["flags",[422,322,80,60]],flag_93:["flags",[506,322,80,60]],flag_94:["flags",[590,322,80,60]],flag_95:["flags",[254,258,80,60]],flag_96:["flags",[338,258,80,60]],flag_97:["flags",[422,258,80,60]],flag_98:["flags",[506,258,80,60]],flag_99:["flags",[590,258,80,60]],flag_100:["flags",[254,194,80,60]],flag_101:["flags",[338,194,80,60]],flag_102:["flags",[422,194,80,60]],flag_103:["flags",[506,194,80,60]],flag_104:["flags",[590,194,80,60]],flag_105:["flags",[170,130,80,60]],flag_106:["flags",[254,130,80,60]],flag_107:["flags",[338,130,80,60]],flag_108:["flags",[422,130,80,60]],flag_109:["flags",[506,130,80,60]],flag_110:["flags",[590,130,80,60]],flag_111:["flags",[86,66,80,60]],flag_112:["flags",[170,66,80,60]],flag_113:["flags",[254,66,80,60]],flag_114:["flags",[338,66,80,60]],flag_115:["flags",[422,66,80,60]],flag_116:["flags",[506,66,80,60]],flag_117:["flags",[590,66,80,60]],flag_118:["flags",[2,2,80,60]],flag_119:["flags",[86,2,80,60]],flag_120:["flags",[170,2,80,60]],flag_121:["flags",[254,2,80,60]],flag_122:["flags",[338,2,80,60]],flag_123:["flags",[422,2,80,60]],flag_124:["flags",[506,2,80,60]],flag_125:["flags",[590,2,80,60]]},jt={hudHealth_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2},hudHealth_mask:{texture:"hud_mask",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudHealth:{texture:"hud",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudEnergy_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2,rotation:Math.PI},hudEnergy_mask:{texture:"hud_mask",layer:"hudEnergy",pivot:[330,174],position:"screencenter",rotation:Math.PI},hudEnergy:{texture:"hud",layer:"hudEnergy",pivot:[330,174],position:"screencenter",tint:3374821},minimap:{texture:"ui_minimap",layer:"ui0",anchor:[1,1],alpha:.25},minimapBox:{texture:"ui_minimap_box",layer:"ui4",anchor:[0.5,0.5],alpha:.6},minimapMob:{texture:"ui_minimap_mob",layer:"ui1",anchor:[0.5,0.5],alpha:.5,scale:.8},minimapBlue:{texture:"ui_minimap_blue",layer:"ui1",anchor:[0.5,0.5],alpha:.5,scale:.8},minimapFlagBlue:{texture:"ui_minimap_flag_blue",layer:"ui3",anchor:[0.5,0.5],scale:.5},minimapFlagRed:{texture:"ui_minimap_flag_red",layer:"ui3",anchor:[0.5,0.5],scale:.5},minimapBaseBlue:{texture:"ui_minimap_base_blue",layer:"ui2",anchor:[0.5,0.5],scale:.5},minimapBaseRed:{texture:"ui_minimap_base_red",layer:"ui2",anchor:[0.5,0.5],scale:.5},thrusterShadow:{texture:"afterburner_shadow",layer:"shadows",anchor:[0.5,0.1]},missile:{texture:"missile",layer:"projectiles",anchor:[0.5,0],scale:[0.2,0.15]},missileFat:{texture:"missile_fat",layer:"projectiles",anchor:[0.5,0],scale:[0.2,0.2]},missileSmall:{texture:"missile_small",layer:"projectiles",anchor:[0.5,0],scale:[0.2,0.2]},missileShadow:{texture:"missile_shadow",layer:"shadows",anchor:[0.5,0.25]},missileThruster:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.15,0.15]},thrusterGlowSmall:{texture:"glowsmall_copy",layer:"glows",anchor:[0.5,0.5],blend:"ADD"},smokeGlow:{texture:"glowdirectional",layer:"glows",anchor:[0.5,0.3],blend:"ADD"},crateShadow:{texture:"crate_shadow",layer:"shadows",anchor:[0.5,0.5]},crateUpgrade:{texture:"crate_upgrade",layer:"crates",anchor:[0.5,0.5]},crateShield:{texture:"crate_shield",layer:"crates",anchor:[0.5,0.5]},crateRampage:{texture:"crate_rampage",layer:"crates",anchor:[0.5,0.5]},powerupCircle:{texture:"powerup_circle",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},powerupShield:{texture:"powerup_shield",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},ctfFlagRed:{texture:"ctf_flag_red",layer:"flags",anchor:[0.1171875,0.9296875]},ctfFlagBlue:{texture:"ctf_flag_blue",layer:"flags",anchor:[0.1171875,0.9296875]},ctfFlagShadow:{texture:"ctf_flag_shadow",layer:"shadows",anchor:[0.09375,0.71875]},shipRaptor:{texture:"raptor",layer:"aircraft",anchor:[0.5,0.6]},shipRaptorShadow:{texture:"raptor_shadow",layer:"shadows",anchor:[0.5,0.57]},shipRaptorThruster:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.25,0.25]},shipSpirit:{texture:"spirit",layer:"aircraft",anchor:[0.5,0.5]},shipSpiritShadow:{texture:"spirit_shadow",layer:"shadows",anchor:[0.5,0.5]},shipSpiritThruster:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.25,0.25]},shipComanche:{texture:"comanche",layer:"aircraft",anchor:[0.5,0.4]},shipComancheShadow:{texture:"comanche_shadow",layer:"shadows",anchor:[0.5,0.43]},shipComancheRotor:{texture:"comanche_rotor",layer:"aircraft",anchor:[0.5,0.5],scale:[0.25,0.25]},shipComancheRotorShadow:{texture:"comanche_rotor_shadow",layer:"shadows",anchor:[0.5,0.5]},shipTornado:{texture:"tornado",layer:"aircraft",anchor:[0.5,0.65]},shipTornadoShadow:{texture:"tornado_shadow",layer:"shadows",anchor:[0.5,0.605]},shipProwler:{texture:"prowler",layer:"aircraft",anchor:[0.5,0.5]},shipProwlerShadow:{texture:"prowler_shadow",layer:"shadows",anchor:[0.5,0.5]},mountain1:{texture:"mountain1",layer:"doodads",anchor:[0.5,0.5]},mountain2:{texture:"mountain2",layer:"doodads",anchor:[0.5,0.5]},mountain3:{texture:"mountain3",layer:"doodads",anchor:[0.5,0.5]},mountain4:{texture:"mountain4",layer:"doodads",anchor:[0.5,0.5]},doodadField:{texture:"doodad_field",layer:"fields",anchor:[0.5,0.5]}},Wt={};SWAM&&SWAM.injectTextures(Gt,Yt,Ht,jt,Wt),Textures.load=function(){for(var zt in Gt)Wt[zt]=new PIXI.Texture.fromImage(Gt[zt]);var Vt;for(var qt in Yt)Vt=Yt[qt],Wt[qt]=new PIXI.Texture(Wt[Vt[0]].baseTexture,new PIXI.Rectangle(Vt[1][0],Vt[1][1],Vt[1][2],Vt[1][3]));for(var qt in Ht)Vt=Ht[qt],Wt[qt]=new PIXI.Texture(Wt[Vt[0]].baseTexture,new PIXI.Rectangle(Vt[1][0],Vt[1][1],Vt[1][2],Vt[1][3]))},Textures.get=function(zt){return Wt[zt]},Textures.getNamed=function(zt){return Wt[jt[zt].texture]},Textures.init=function(zt,Vt){var qt=JSON.parse(JSON.stringify(jt[zt]));if("screencenter"===qt.position&&(qt.position=[game.halfScreenX,game.halfScreenY]),Vt)for(var Kt in Vt)qt[Kt]=Vt[Kt];return Graphics.initSprite(qt.texture,game.graphics.layers[qt.layer],qt)},Textures.sprite=function(zt){return new PIXI.Sprite(Wt[zt])},Textures.tile=function(zt,Vt,qt){return new PIXI.extras.TilingSprite(Wt[zt],Vt,qt)}}(),window.loadGraphics_Default=function(){var Yt={position:Vector.zero(),center:Vector.zero(),lastOverdraw:Vector.zero(),lastOverdrawTime:0,shake:0},Ht={},jt={},Wt={},Gt;Graphics.setup=function(){Kt(window.innerWidth,window.innerHeight),zt(),Textures.load(),Vt(),Zt(),qt(),Jt(),Mobs.setupDoodads(),UI.setupMinimap(),UI.setupHUD()};var zt=function(){PIXI.utils.skipHello(),PIXI.settings.PRECISION_FRAGMENT=PIXI.PRECISION.HIGH;var an={autoResize:!0,clearBeforeRender:!1,preserveDrawingBuffer:!0};config.settings.hidpi&&(an.resolution=2);try{Gt=new PIXI.WebGLRenderer(game.screenX,game.screenY,an),Graphics.renderer=Gt}catch(rn){return void UI.popBigMsg(2)}document.body.appendChild(Gt.view)},Vt=function(){for(var an of["game","ui0","ui1","ui2","ui3","ui4","hudHealth","hudEnergy","flags","doodads","map","sea","objects","groundobjects","fields","shadows","powerups","crates","aircraft","aircraftme","glows","playernames","bubbles","thrusters","projectiles","smoke","explosions"])Wt[an]=new PIXI.Container;for(var rn of["smoke","crates","thrusters","projectiles","aircraft","aircraftme","glows","explosions","powerups","playernames","flags","bubbles"])Wt.objects.addChild(Wt[rn]);for(var on of["fields"])Wt.groundobjects.addChild(Wt[on]);if(game.graphics.layers=Wt,game.graphics.gui=jt,config.debug.collisions){for(var sn=new PIXI.Graphics,dn=0;dn<config.walls.length;dn++)sn.beginFill(16777215,.2),sn.drawCircle(config.walls[dn][0],config.walls[dn][1],config.walls[dn][2]),sn.endFill();Wt.objects.addChild(sn)}},qt=function(){Ht.render=PIXI.RenderTexture.create(game.screenX+config.overdraw,game.screenY+config.overdraw,void 0,config.settings.hidpi?2:void 0),Ht.renderSprite=new PIXI.Sprite(Ht.render),Ht.shadows=PIXI.RenderTexture.create(game.shadowX,game.shadowY,void 0,config.settings.hidpi?2:void 0),Ht.shadowsSprite=new PIXI.Sprite(Ht.shadows),Ht.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),Ht.shadowsSprite.blendMode=PIXI.BLEND_MODES.MULTIPLY,Ht.shadowsSprite.alpha=.4,Wt.game.addChild(Ht.renderSprite),Wt.game.addChild(Wt.groundobjects),Wt.game.addChild(Ht.shadowsSprite),Ht.shade=Textures.sprite("screenshade"),Ht.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale),Ht.shade.alpha=.825,Ht.shade.anchor.set(.5,.5),Wt.shadows.addChild(Ht.shade),Wt.game.addChild(Wt.objects),Wt.game.addChild(Wt.ui0),Wt.game.addChild(Wt.ui1),Wt.game.addChild(Wt.ui2),Wt.game.addChild(Wt.ui3),Wt.game.addChild(Wt.ui4),jt.hudTextureEnergy=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),jt.hudSpriteEnergy=new PIXI.Sprite(jt.hudTextureEnergy),jt.hudSpriteEnergy.pivot.set(-250,174),jt.hudTextureHealth=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),jt.hudSpriteHealth=new PIXI.Sprite(jt.hudTextureHealth),jt.hudSpriteHealth.pivot.set(330,174),Wt.game.addChild(jt.hudSpriteEnergy),Wt.game.addChild(jt.hudSpriteHealth)};Graphics.resizeRenderer=function(an,rn){var on=an+config.overdraw,sn=rn+config.overdraw;Kt(an,rn),Zt(),Gt.resize(an,rn),Ht.render.resize(on,sn),Ht.shadows.resize(an,rn),Ht.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),Ht.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale);for(var dn of["sea","forest","sand","rock"])Ht[dn].width=on,Ht[dn].height=sn;UI.resizeMinimap(),UI.resizeHUD(),$t(),en(),Graphics.setCamera(Yt.center.x,Yt.center.y),game.state==Network.STATE.PLAYING&&Network.resizeHorizon()},Graphics.toggleHiDPI=function(){config.settings.hidpi=1!=config.settings.hidpi,config.settings.hidpi?Tools.setSettings({hidpi:!0}):Tools.removeSetting("hidpi"),UI.updateMainMenuSettings(),1==config.settings.oldhidpi==config.settings.hidpi?UI.showMessage("alert","",1e3):UI.showMessage("alert","Reload game to apply HiDPI settings<br><span class=\"button\" onclick=\"Games.redirRoot()\">RELOAD</span>",1e4)};var Kt=function(an,rn){game.screenX=an,game.screenY=rn,game.halfScreenX=an/2,game.halfScreenY=rn/2,game.shadowX=Math.floor(game.screenX/config.shadowScaling),game.shadowY=Math.floor(game.screenY/config.shadowScaling)},Zt=function(){game.scale=(game.screenX+game.screenY)/config.scalingFactor,Wt.groundobjects.scale.set(game.scale),Wt.objects.scale.set(game.scale),Wt.shadows.scale.set(game.scale),Wt.doodads.scale.set(game.scale),Wt.bubbles.scale.set(1/game.scale),Qt()},Qt=function(){if(config.mobile){var an=game.screenX>game.screenY?"landscape":"portrait";config.phone=599>=game.screenX&&"portrait"==an||599>=game.screenY&&"landscape"==an,config.tablet=600<=game.screenX&&1024>=game.screenX&&"portrait"==an||600<=game.screenY&&1024>=game.screenY&&1024>=game.screenX&&"landscape"==an,config.maxScoreboard=8,config.phone&&(config.minimapSize=160,config.maxScoreboard=5),config.tablet&&(config.maxScoreboard=7),config.minimapPaddingX=game.screenX/2-config.minimapSize/2}},Jt=function(){var an=Gt.width+config.overdraw,rn=Gt.height+config.overdraw;Ht.sea=Textures.tile("map_sea",an,rn),Ht.sea_mask=Textures.sprite("map_sea_mask"),Ht.sea_mask.scale.set(8,8),Ht.sea_mask.blendMode=PIXI.BLEND_MODES.MULTIPLY,Ht.sea_mask.alpha=.5,Ht.forest=Textures.tile("map_forest",an,rn),Ht.sand=Textures.tile("map_sand",an,rn),Ht.sand_mask=Textures.sprite("map_sand_mask"),Ht.sand_mask.scale.set(8,8),Ht.sand.mask=Ht.sand_mask,Ht.rock=Textures.tile("map_rock",an,rn),Ht.rock_mask=Textures.sprite("map_rock_mask"),Ht.rock_mask.scale.set(8,8),Ht.rock.mask=Ht.rock_mask,Wt.sea.addChild(Ht.sea),Wt.sea.addChild(Ht.sea_mask);for(var on of["forest","sand","sand_mask","rock","rock_mask"])Wt.map.addChild(Ht[on]);Wt.map.addChild(Wt.doodads),tn(),$t()},$t=function(){var an;for(an of["sea","forest","sand","rock"])Ht[an].tileScale.set(game.scale,game.scale);for(an of["sea","sand","rock"])Ht[an+"_mask"].scale.set(8*game.scale,8*game.scale)},en=function(){Ht.polygons&&(Ht.polygons.scale.x=game.scale,Ht.polygons.scale.y=game.scale)},tn=function(){$.getJSON("assets/map.json",function(an){Ht.polygons=new PIXI.Graphics,Ht.polygons.beginFill();var cn=0,hn=0,fn=0,rn,on,sn,dn,ln,un,pn;for(un=0;un<an.length;un++)for(sn=0,pn=0;pn<an[un].length;pn++){for(dn=[],ln=0;ln<an[un][pn].length;ln+=2)rn=an[un][pn][ln]+hn,on=an[un][pn][ln+1]+fn,dn.push(parseFloat(rn),-parseFloat(on)),hn=rn,fn=on,cn++;Ht.polygons.drawPolygon(dn),0!=sn&&Ht.polygons.addHole(),sn++}Ht.polygons.endFill(),en(),Wt.map.addChild(Ht.polygons),Wt.map.mask=Ht.polygons})};Graphics.initSprite=function(an,rn,on){var sn=Textures.sprite(an);return on.position&&sn.position.set(on.position[0],on.position[1]),on.anchor&&sn.anchor.set(on.anchor[0],on.anchor[1]),on.pivot&&sn.pivot.set(on.pivot[0],on.pivot[1]),on.scale&&(Array.isArray(on.scale)?sn.scale.set(on.scale[0],on.scale[1]):sn.scale.set(on.scale)),on.rotation&&(sn.rotation=on.rotation),on.alpha&&(sn.alpha=on.alpha),on.blend&&(sn.blendMode=PIXI.BLEND_MODES[on.blend]),on.tint&&(sn.tint=on.tint),on.mask&&(sn.mask=on.mask),on.visible&&(sn.visible=on.visible),rn.addChild(sn),sn},Graphics.transform=function(an,rn,on,sn,dn,ln,un){an.position.set(rn,on),null==ln?null!=dn&&an.scale.set(dn):an.scale.set(dn,ln),null!=sn&&(an.rotation=sn),null!=un&&(an.alpha=un)},Graphics.update=function(){Ht.shade.position.set(Yt.center.x/config.shadowScaling,Yt.center.y/config.shadowScaling),Ht.renderSprite.position.set(game.scale*(-Yt.position.x+Yt.lastOverdraw.x)-config.overdraw/2,game.scale*(-Yt.position.y+Yt.lastOverdraw.y)-config.overdraw/2),Wt.objects.position.set(-Yt.position.x*game.scale,-Yt.position.y*game.scale),Wt.groundobjects.position.set(-Yt.position.x*game.scale,-Yt.position.y*game.scale),Wt.doodads.position.set(-Yt.position.x*game.scale+config.overdraw/2,-Yt.position.y*game.scale+config.overdraw/2),Wt.shadows.position.set(-Yt.position.x*(game.scale/config.shadowScaling),-Yt.position.y*(game.scale/config.shadowScaling)),jt.minimap_box.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-Yt.center.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-Yt.center.y)/16384)),config.overdrawOptimize?(Math.abs(Yt.position.x-Yt.lastOverdraw.x)>config.overdraw/2/game.scale||Math.abs(Yt.position.y-Yt.lastOverdraw.y)>config.overdraw/2/game.scale||2e3<game.time-Yt.lastOverdrawTime)&&nn():nn()},Graphics.setCamera=function(an,rn){var on=0,sn=0;.5<Yt.shake&&(on=Tools.rand(-Yt.shake,Yt.shake),sn=Tools.rand(-Yt.shake,Yt.shake),Yt.shake*=1-.06*game.timeFactor);var dn=game.halfScreenX/game.scale,ln=game.halfScreenY/game.scale;an=Tools.clamp(an,-16384+dn,16384-dn),rn=Tools.clamp(rn,-8192+ln,8192-ln),Yt.position.x=on+an-game.screenX/2/game.scale,Yt.position.y=sn+rn-game.screenY/2/game.scale,Yt.center.x=on+an,Yt.center.y=sn+rn},Graphics.getCamera=function(){return Yt.center},Graphics.shakeCamera=function(an,rn){var on=Tools.length(an.x-Yt.center.x,an.y-Yt.center.y),sn=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2,dn=Tools.clamp(1.3*(1-on/sn),0,1);.1>dn||(Yt.shake=dn*rn)},Graphics.shadowCoords=function(an){var rn=Mobs.getClosestDoodad(an);return new Vector((an.x+config.shadowOffsetX*rn)/config.shadowScaling,(an.y+config.shadowOffsetY*rn)/config.shadowScaling)},Graphics.minimapMob=function(an,rn,on){null!=an&&an.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-rn)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-on)/16384))},Graphics.toggleFullscreen=function(){(function(){var an=document;return an.fullscreenElement?null!==an.fullscreenElement:an.mozFullScreenElement?null!==an.mozFullScreenElement:an.webkitFullscreenElement?null!==an.webkitFullscreenElement:an.msFullscreenElement?null!==an.msFullscreenElement:void 0})()?function(){var an=document;an.exitFullscreen?an.exitFullscreen():an.mozCancelFullScreen?an.mozCancelFullScreen():an.webkitExitFullscreen?an.webkitExitFullscreen():an.msExitFullscreen&&an.msExitFullscreen()}():function(){var an=document.documentElement;if(an.requestFullscreen?an.requestFullscreen():an.mozRequestFullScreen?an.mozRequestFullScreen():an.webkitRequestFullscreen?an.webkitRequestFullscreen():an.msRequestFullscreen&&an.msRequestFullscreen(),config.mobile&&null!=window.screen&&null!=window.screen.orientation)try{screen.orientation.lock("landscape")}catch(rn){}}()},Graphics.inScreen=function(an,rn){return an.x>=Yt.center.x-game.halfScreenX/game.scale-rn&&an.x<=Yt.center.x+game.halfScreenX/game.scale+rn&&an.y>=Yt.center.y-game.halfScreenY/game.scale-rn&&an.y<=Yt.center.y+game.halfScreenY/game.scale+rn};var nn=function(){Mobs.updateDoodads(),Yt.lastOverdraw.x=Yt.position.x,Yt.lastOverdraw.y=Yt.position.y,Ht.renderSprite.position.set(-config.overdraw/2,-config.overdraw/2);var rn=Yt.position.x-config.overdraw/game.scale/2,on=Yt.position.y-config.overdraw/game.scale/2,sn=-rn*game.scale,dn=-on*game.scale,ln=(-rn-16384)*game.scale,un=(-on-8192)*game.scale,an;for(an of["sea","forest","sand","rock"])Ht[an].tilePosition.set(sn,dn);for(an of["sea","sand","rock"])Ht[an+"_mask"].position.set(ln,un);null!=Ht.polygons&&null!=Ht.polygons.position&&Ht.polygons.position.set(-rn*game.scale,-on*game.scale),Yt.lastOverdrawTime=game.time,Gt.render(Wt.sea,Ht.render),Gt.render(Wt.map,Ht.render)};Graphics.renderBackground=nn,Graphics.render=function(){Gt.render(Wt.shadows,Ht.shadows,!0),Gt.render(Wt.hudEnergy,jt.hudTextureEnergy,!0),Gt.render(Wt.hudHealth,jt.hudTextureHealth,!0),Gt.render(Wt.game)}},window.loadGraphics_SWAM=function(){var Yt={position:Vector.zero(),center:Vector.zero(),lastOverdraw:Vector.zero(),lastOverdrawTime:0,shake:0},Ht={},jt={},Wt={},Gt;Graphics.setup=function(){Kt(window.innerWidth,window.innerHeight),zt(),Textures.load(),Vt(),Zt(),qt(),Jt(),Mobs.setupDoodads(),UI.setupMinimap(),UI.setupHUD()};var zt=function(){PIXI.utils.skipHello(),PIXI.settings.PRECISION_FRAGMENT=PIXI.PRECISION.HIGH;var an={autoResize:!0,clearBeforeRender:!1,preserveDrawingBuffer:!0};config.settings.hidpi&&(an.resolution=2);try{Gt=new PIXI.WebGLRenderer(game.screenX,game.screenY,an),Graphics.renderer=Gt}catch(rn){return void UI.popBigMsg(2)}document.body.appendChild(Gt.view)},Vt=function(){for(var an of["game","ui0","ui1","ui2","ui3","ui4","hudHealth","hudEnergy","flags","doodads","map","sea","objects","groundobjects","fields","shadows","powerups","crates","aircraft","aircraftme","glows","playernames","bubbles","thrusters","projectiles","smoke","explosions"])Wt[an]=new PIXI.Container,Wt[an].layerName=an;for(var rn of["smoke","crates","thrusters","projectiles","aircraft","aircraftme","glows","explosions","powerups","playernames","flags","bubbles"])Wt.objects.addChild(Wt[rn]);for(var on of["fields"])Wt.groundobjects.addChild(Wt[on]);if(game.graphics.layers=Wt,game.graphics.gui=jt,config.debug.collisions){for(var sn=new PIXI.Graphics,dn=0;dn<config.walls.length;dn++)if(sn.beginFill(16777215,.2),sn.drawCircle(config.walls[dn][0],config.walls[dn][1],config.walls[dn][2]),sn.endFill(),window.AutoPilot&&AutoPilot.debug){var ln=AutoPilot.getGraphBoundingBox(config.walls[dn][0],config.walls[dn][1],config.walls[dn][2]);sn.beginFill(16711680,.2),sn.drawRect(100*ln.p1.x-16384,100*ln.p1.y-8192,100*(ln.p2.x-ln.p1.x+1),100*(ln.p2.y-ln.p1.y+1)),sn.endFill()}if(window.AutoPilot&&AutoPilot.debug){sn.lineColor=16777215,sn.lineStyle(1,16777215);for(var un=-16383;16383>=un;un+=100)sn.moveTo(un,-8192),sn.lineTo(un,8192);for(var pn=-8192;8192>=pn;pn+=100)sn.moveTo(-16383,pn),sn.lineTo(16384,pn)}Wt.objects.addChild(sn)}},qt=function(){Ht.render=PIXI.RenderTexture.create(game.screenX+config.overdraw,game.screenY+config.overdraw,void 0,config.settings.hidpi?2:void 0),Ht.renderSprite=new PIXI.Sprite(Ht.render),Ht.renderSprite.layerName="renderSprite",Ht.shadows=PIXI.RenderTexture.create(game.shadowX,game.shadowY,void 0,config.settings.hidpi?2:void 0),Ht.shadowsSprite=new PIXI.Sprite(Ht.shadows),Ht.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),Ht.shadowsSprite.blendMode=PIXI.BLEND_MODES.MULTIPLY,Ht.shadowsSprite.alpha=.4,Wt.game.addChild(Ht.renderSprite),Wt.game.addChild(Wt.groundobjects),Ht.shade=Textures.sprite("screenshade"),Ht.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale),Ht.shade.alpha=.825,Ht.shade.anchor.set(.5,.5),Wt.shadows.addChild(Ht.shade),Wt.game.addChild(Wt.objects),Wt.game.addChild(Wt.ui0),Wt.game.addChild(Wt.ui1),Wt.game.addChild(Wt.ui2),Wt.game.addChild(Wt.ui3),Wt.game.addChild(Wt.ui4),jt.hudTextureEnergy=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),jt.hudSpriteEnergy=new PIXI.Sprite(jt.hudTextureEnergy),jt.hudSpriteEnergy.pivot.set(-250,174),jt.hudTextureHealth=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),jt.hudSpriteHealth=new PIXI.Sprite(jt.hudTextureHealth),jt.hudSpriteHealth.pivot.set(330,174),Wt.game.addChild(jt.hudSpriteEnergy),Wt.game.addChild(jt.hudSpriteHealth)};Graphics.resizeRenderer=function(an,rn){var on=an+config.overdraw,sn=rn+config.overdraw;Kt(an,rn),Zt(),Gt.resize(an,rn),Ht.render.resize(on,sn),Ht.shadows.resize(an,rn),Ht.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),Ht.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale);for(var dn of["sea","forest","sand","rock"])Ht[dn].width=on,Ht[dn].height=sn;UI.resizeMinimap(),UI.resizeHUD(),$t(),en(),Graphics.setCamera(Yt.center.x,Yt.center.y),game.state==Network.STATE.PLAYING&&Network.resizeHorizon()},Graphics.toggleHiDPI=function(){config.settings.hidpi=1!=config.settings.hidpi,config.settings.hidpi?Tools.setSettings({hidpi:!0}):Tools.removeSetting("hidpi"),UI.updateMainMenuSettings(),1==config.settings.oldhidpi==config.settings.hidpi?UI.showMessage("alert","",1e3):UI.showMessage("alert","Reload game to apply HiDPI settings<br><span class=\"button\" onclick=\"Games.redirRoot()\">RELOAD</span>",1e4)};var Kt=function(an,rn){game.screenX=an,game.screenY=rn,game.halfScreenX=an/2,game.halfScreenY=rn/2,game.shadowX=Math.floor(game.screenX/config.shadowScaling),game.shadowY=Math.floor(game.screenY/config.shadowScaling)},Zt=function(){game.scale=(game.screenX+game.screenY)/config.scalingFactor,Wt.groundobjects.scale.set(game.scale),Wt.objects.scale.set(game.scale),Wt.shadows.scale.set(game.scale),Wt.doodads.scale.set(game.scale),Wt.bubbles.scale.set(1/game.scale),Qt()},Qt=function(){if(config.mobile){var an=game.screenX>game.screenY?"landscape":"portrait";config.phone=599>=game.screenX&&"portrait"==an||599>=game.screenY&&"landscape"==an,config.tablet=600<=game.screenX&&1024>=game.screenX&&"portrait"==an||600<=game.screenY&&1024>=game.screenY&&1024>=game.screenX&&"landscape"==an,config.maxScoreboard=8,config.phone&&(config.minimapSize=160,config.maxScoreboard=5),config.tablet&&(config.maxScoreboard=7),config.minimapPaddingX=game.screenX/2-config.minimapSize/2}},Jt=function(){var an=Gt.width+config.overdraw,rn=Gt.height+config.overdraw;Ht.sea=Textures.tile("map_sea",an,rn),Ht.forest=Textures.tile("map_forest",an,rn),Ht.forest_mask=Textures.sprite("map_forest_mask"),Ht.forest_mask.scale.set(8,8),Ht.forest.mask=Ht.forest_mask,Ht.sand=Textures.tile("map_sand",an,rn),Ht.sand_mask=Textures.sprite("map_sand_mask"),Ht.sand_mask.scale.set(8,8),Ht.sand.mask=Ht.sand_mask,Ht.rock=Textures.tile("map_rock",an,rn),Ht.rock_mask=Textures.sprite("map_rock_mask"),Ht.rock_mask.scale.set(8,8),Ht.rock.mask=Ht.rock_mask,Wt.sea.addChild(Ht.sea);for(var on of["forest","forest_mask","sand","sand_mask","rock","rock_mask"])Wt.map.addChild(Ht[on]),Ht[on].layerName=on;Wt.map.addChild(Wt.doodads),$t()},$t=function(){var an;for(an of["sea","forest","sand","rock"])Ht[an].tileScale.set(game.scale,game.scale);for(an of["forest","sand","rock"])Ht[an+"_mask"].scale.set(8*game.scale,8*game.scale)},en=function(){try{Ht.polygons.scale.x=game.scale,Ht.polygons.scale.y=game.scale}catch(an){}};Graphics.initSprite=function(an,rn,on){var sn=Textures.sprite(an);return on.position&&sn.position.set(on.position[0],on.position[1]),on.anchor&&sn.anchor.set(on.anchor[0],on.anchor[1]),on.pivot&&sn.pivot.set(on.pivot[0],on.pivot[1]),on.scale&&(Array.isArray(on.scale)?sn.scale.set(on.scale[0],on.scale[1]):sn.scale.set(on.scale)),on.rotation&&(sn.rotation=on.rotation),on.alpha&&(sn.alpha=on.alpha),on.blend&&(sn.blendMode=PIXI.BLEND_MODES[on.blend]),on.tint&&(sn.tint=on.tint),on.mask&&(sn.mask=on.mask),on.visible&&(sn.visible=on.visible),rn.addChild(sn),sn},Graphics.transform=function(an,rn,on,sn,dn,ln,un){an.position.set(rn,on),null==ln?null!=dn&&an.scale.set(dn):an.scale.set(dn,ln),null!=sn&&(an.rotation=sn),null!=un&&(an.alpha=un)},Graphics.update=function(){let an=Yt.position.x,rn=Yt.position.y,on=-an*game.scale,sn=-rn*game.scale,dn=config.overdraw/2;Ht.shade.position.set(Yt.center.x/config.shadowScaling,Yt.center.y/config.shadowScaling),Ht.renderSprite.position.set(game.scale*(-an+Yt.lastOverdraw.x)-dn,game.scale*(-rn+Yt.lastOverdraw.y)-dn),Wt.objects.position.set(on,sn),Wt.groundobjects.position.set(on,sn),Wt.doodads.position.set(on+dn,sn+dn),Wt.shadows.position.set(-an*(game.scale/config.shadowScaling),-rn*(game.scale/config.shadowScaling)),jt.minimap_box.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-Yt.center.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-Yt.center.y)/16384)),window.SWAM&&SWAM.updateLayers(on,sn,Yt),config.overdrawOptimize?(Math.abs(an-Yt.lastOverdraw.x)>dn/game.scale||Math.abs(rn-Yt.lastOverdraw.y)>dn/game.scale||2e3<game.time-Yt.lastOverdrawTime)&&nn():nn()},Graphics.setCamera=function(an,rn){var on=0,sn=0;.5<Yt.shake&&(on=Tools.rand(-Yt.shake,Yt.shake),sn=Tools.rand(-Yt.shake,Yt.shake),Yt.shake*=1-.06*game.timeFactor);var dn=game.halfScreenX/game.scale,ln=game.halfScreenY/game.scale;an=Tools.clamp(an,-16384+dn,16384-dn),rn=Tools.clamp(rn,-8192+ln,8192-ln),Yt.position.x=on+an-dn,Yt.position.y=sn+rn-ln,Yt.center.x=on+an,Yt.center.y=sn+rn},Graphics.getCamera=function(){return Yt.center},Graphics.shakeCamera=function(an,rn){var on=Tools.length(an.x-Yt.center.x,an.y-Yt.center.y),sn=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2,dn=Tools.clamp(1.3*(1-on/sn),0,1);.1>dn||(Yt.shake=dn*rn)},Graphics.shadowCoords=function(an){var rn=Mobs.getClosestDoodad(an);return new Vector((an.x+config.shadowOffsetX*rn)/config.shadowScaling,(an.y+config.shadowOffsetY*rn)/config.shadowScaling)},Graphics.minimapMob=function(an,rn,on){null!=an&&an.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-rn)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-on)/16384))},Graphics.toggleFullscreen=function(){(function(){var an=document;return an.fullscreenElement?null!==an.fullscreenElement:an.mozFullScreenElement?null!==an.mozFullScreenElement:an.webkitFullscreenElement?null!==an.webkitFullscreenElement:an.msFullscreenElement?null!==an.msFullscreenElement:void 0})()?function(){var an=document;an.exitFullscreen?an.exitFullscreen():an.mozCancelFullScreen?an.mozCancelFullScreen():an.webkitExitFullscreen?an.webkitExitFullscreen():an.msExitFullscreen&&an.msExitFullscreen()}():function(){var an=document.documentElement;if(an.requestFullscreen?an.requestFullscreen():an.mozRequestFullScreen?an.mozRequestFullScreen():an.webkitRequestFullscreen?an.webkitRequestFullscreen():an.msRequestFullscreen&&an.msRequestFullscreen(),config.mobile&&null!=window.screen&&null!=window.screen.orientation)try{screen.orientation.lock("landscape")}catch(rn){}}()},Graphics.inScreen=function(an,rn){return an.x>=Yt.center.x-game.halfScreenX/game.scale-rn&&an.x<=Yt.center.x+game.halfScreenX/game.scale+rn&&an.y>=Yt.center.y-game.halfScreenY/game.scale-rn&&an.y<=Yt.center.y+game.halfScreenY/game.scale+rn};var nn=function(){Mobs.updateDoodads(),Yt.lastOverdraw.x=Yt.position.x,Yt.lastOverdraw.y=Yt.position.y,Ht.renderSprite.position.set(-config.overdraw/2,-config.overdraw/2);var rn=Yt.position.x-config.overdraw/game.scale/2,on=Yt.position.y-config.overdraw/game.scale/2,sn=-rn*game.scale,dn=-on*game.scale,ln=(-rn-16384)*game.scale,un=(-on-8192)*game.scale,an,pn=SWAM.BackgroundFactor||1;for(an of["sea","forest","sand","rock"])Ht[an].tilePosition.set(sn/pn,dn/pn);if(SWAM&&SWAM.MoveBackgroundTiles)for(an of["forest","sand","rock"])Ht[an+"_mask"].position.set(ln,un);Yt.lastOverdrawTime=game.time,Gt.render(Wt.sea,Ht.render),Gt.render(Wt.map,Ht.render)};Graphics.renderBackground=nn,Graphics.render=function(){Gt.render(Wt.shadows,Ht.shadows,!0),Gt.render(Wt.hudEnergy,jt.hudTextureEnergy,!0),Gt.render(Wt.hudHealth,jt.hudTextureHealth,!0),Gt.render(Wt.game)}},!function(){var Gt=null,Yt=null,Ht=!1,jt="",Wt=!1,zt=null,Vt=-1,qt=-1,Kt=0,Zt={},Qt=0,Jt=0,$t=0,en=!1,tn=2e3,nn=2e3;Network.sendKey=function(bn,xn){if(game.state==Network.STATE.PLAYING){Jt++;var vn={c:gn.KEY,seq:Jt,key:hn[bn],state:xn};null!=game.spectatingID&&xn&&("RIGHT"==bn?Network.spectatePrev():"LEFT"==bn&&Network.spectateNext()),cn(vn),Yt&&Ht&&cn(vn,!0)}},Network.sendChat=function(bn){game.state==Network.STATE.PLAYING&&cn({c:gn.CHAT,text:bn})},Network.sendWhisper=function(bn,xn){game.state==Network.STATE.PLAYING&&cn({c:gn.WHISPER,id:bn,text:xn})},Network.sendSay=function(bn){game.state==Network.STATE.PLAYING&&cn({c:gn.SAY,text:bn})},Network.sendTeam=function(bn){game.state==Network.STATE.PLAYING&&cn({c:gn.TEAMCHAT,text:bn})},Network.sendCommand=function(bn,xn){game.state==Network.STATE.PLAYING&&("flag"===bn&&(game.lastFlagSet=xn),cn({c:gn.COMMAND,com:bn,data:xn}))},Network.voteMute=function(bn){game.state==Network.STATE.PLAYING&&cn({c:gn.VOTEMUTE,id:bn})},Network.force=function(bn){for(var xn in Players.network(yn.PLAYER_UPDATE,bn),bn.players)Players.network(yn.PLAYER_UPDATE,bn.players[xn]);for(xn in bn.mobs)Mobs.network(bn.mobs[xn]);var vn=new Vector(bn.posX,bn.posY);Particles.spiritShockwave(vn),Sound.effectRepel(vn)},Network.getScores=function(){game.state==Network.STATE.PLAYING&&cn({c:gn.SCOREDETAILED})},Network.resizeHorizon=function(){game.state==Network.STATE.PLAYING&&cn({c:gn.HORIZON,horizonX:Math.ceil(game.halfScreenX/game.scale),horizonY:Math.ceil(game.halfScreenY/game.scale)})},Network.resizeHorizon2=function(bn,xn){game.state==Network.STATE.PLAYING&&cn({c:gn.HORIZON,horizonX:bn,horizonY:xn})},Network.detectConnectivity=function(){game.lagging=1300<game.timeNetwork-$t},Network.shutdown=function(){null!=zt&&clearInterval(zt),null!=Gt&&Gt.close(),null!=Yt&&Yt.close(),Ht=!1,Wt=!1,Vt=-1,qt=-1,Kt=0,Zt={},Qt=0,Jt=0,$t=0,en=!1,tn=2e3,nn=2e3},Network.receivedError=function(bn){en=bn},Network.spectateNext=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-1")},Network.spectatePrev=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-2")},Network.spectateForce=function(){game.state==Network.STATE.PLAYING&&(Players.amIAlive()?Network.sendCommand("spectate","-3"):Network.spectateNext())};var an=function(){game.lagging||game.state==Network.STATE.PLAYING&&(Wt?Yt&&Ht&&cn({c:gn.ACK},!0):cn({c:gn.ACK}),Wt=!Wt)},rn=function(bn){36e5<Math.abs(bn-Vt)&&(Vt=bn,qt=performance.now(),Kt=0)},on=function(bn){if(game.state==Network.STATE.PLAYING||bn.c==yn.LOGIN||bn.c==yn.ERROR){if((bn.c==yn.PLAYER_UPDATE||bn.c==yn.PLAYER_FIRE||bn.c==yn.EVENT_BOOST||bn.c==yn.EVENT_BOUNCE)&&bn.id==game.myID||bn.c==yn.PING){if(bn.c!=yn.PING&&dn(bn))return;game.timeNetwork=performance.now(),$t=game.timeNetwork,function(vn){if(game.jitter=0,-1!=Vt){rn(vn);var Tn=game.timeNetwork,En=vn-Vt-(Tn-qt),Sn=En-(Kt=.8*Kt+En/5);100>Math.abs(Sn)&&(game.jitter=Sn)}}(bn.clock/100)}else game.timeNetwork=performance.now(),$t=game.timeNetwork,null!=bn.clock&&function(vn){-1!=Vt&&(rn(vn),game.jitter=vn-Vt-(game.timeNetwork-qt)-Kt)}(bn.clock/100);switch(bn.c){case yn.PLAYER_UPDATE:case yn.PLAYER_FIRE:case yn.CHAT_SAY:case yn.PLAYER_RESPAWN:case yn.PLAYER_FLAG:case yn.EVENT_BOOST:case yn.EVENT_BOUNCE:if(Players.network(bn.c,bn),bn.c===yn.PLAYER_FIRE){for(var xn=0;xn<bn.projectiles.length;xn++)bn.projectiles[xn].c=yn.PLAYER_FIRE,Mobs.add(bn.projectiles[xn],!1,bn.id);0<bn.projectiles.length&&Sound.missileLaunch(new Vector(bn.projectiles[0].posX,bn.projectiles[0].posY),bn.projectiles[0].type)}break;case yn.LOGIN:for(!function(vn){zt=setInterval(an,50),game.myID=vn.id,game.myTeam=vn.team,game.myToken=vn.token,game.state=Network.STATE.PLAYING,game.roomName=vn.room,game.gameType=vn.type,game.spectatingID=null,game.myLevel=0,Games.prep(),Vt=vn.clock/100,qt=performance.now(),ln()}(bn),UI.loggedIn(bn),xn=0;xn<bn.players.length;xn++)Players.add(bn.players[xn],!0);break;case yn.ERROR:UI.errorHandler(bn);break;case yn.PLAYER_NEW:Players.add(bn);break;case yn.PLAYER_LEAVE:Players.destroy(bn.id);break;case yn.PLAYER_TYPE:Players.changeType(bn);break;case yn.PLAYER_HIT:Players.impact(bn),200!=bn.type&&Mobs.destroy(bn);break;case yn.PLAYER_KILL:Players.kill(bn);break;case yn.PLAYER_UPGRADE:UI.updateUpgrades([bn.speed,bn.defense,bn.energy,bn.missile],bn.upgrades,bn.type);break;case yn.PLAYER_POWERUP:Players.powerup(bn);break;case yn.PLAYER_LEVEL:Players.updateLevel(bn);break;case yn.PLAYER_RETEAM:for(xn=0;xn<bn.players.length;xn++)Players.reteam(bn.players[xn]);break;case yn.EVENT_REPEL:Network.force(bn);break;case yn.EVENT_LEAVEHORIZON:0==bn.type?Players.leaveHorizon(bn):Mobs.destroy(bn);break;case yn.EVENT_STEALTH:Players.stealth(bn);break;case yn.MOB_UPDATE:case yn.MOB_UPDATE_STATIONARY:Mobs.network(bn);break;case yn.MOB_DESPAWN:Mobs.despawn(bn);break;case yn.MOB_DESPAWN_COORDS:Mobs.destroy(bn);break;case yn.GAME_FLAG:Games.networkFlag(bn);break;case yn.GAME_PLAYERSALIVE:Games.playersAlive(bn.players);break;case yn.SCORE_UPDATE:UI.newScore(bn);break;case yn.SCORE_BOARD:UI.scoreboardUpdate(bn.data,bn.rankings,config.maxScoreboard),Players.updateBadges(bn.data);break;case yn.SCORE_DETAILED:case yn.SCORE_DETAILED_CTF:case yn.SCORE_DETAILED_BTR:UI.updateScore(bn);break;case yn.PING:!function(vn){setTimeout(()=>{cn({c:gn.PONG,num:vn})},game.fixedjitter)}(bn.num);break;case yn.PING_RESULT:UI.updateStats(bn);break;case yn.CHAT_PUBLIC:if(config.mobile)return;Players.chat(bn);break;case yn.CHAT_TEAM:if(config.mobile)return;Players.teamChat(bn);break;case yn.CHAT_WHISPER:if(config.mobile)return;Players.whisper(bn);break;case yn.CHAT_VOTEMUTEPASSED:if(config.mobile)return;Players.votemutePass(bn);break;case yn.CHAT_VOTEMUTED:return config.mobile?void 0:void UI.chatMuted();case yn.SERVER_MESSAGE:UI.serverMessage(bn);break;case yn.SERVER_CUSTOM:sn(bn);break;case yn.GAME_SPECTATE:Games.spectate(bn.id);break;case yn.GAME_FIREWALL:Games.handleFirewall(bn);break;case yn.COMMAND_REPLY:UI.showCommandReply(bn);}}},sn=function(bn){try{var xn=JSON.parse(bn.data)}catch(vn){return}1==bn.type?Games.showBTRWin(xn):2==bn.type&&Games.showCTFWin(xn)},dn=function(bn){var xn=performance.now(),vn=bn.c+"_"+bn.clock+"_"+bn.posX+"_"+bn.posY+"_"+bn.rot+"_"+bn.speedX+"_"+bn.speedY;if(15e3<xn-Qt){for(var Tn in Zt)3e4<xn-Zt[Tn]&&delete Zt[Tn];Qt=xn}return null!=Zt[vn]||(Zt[vn]=xn,!1)};Network.reconnectMessage=function(){game.reloading||UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Connection reset<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",6e5)},Network.reconnect=function(){UI.showMessage("alert","",100),Games.switchGame()},Network.setup=function(){jt=DEVELOPMENT?-1==document.domain.indexOf("192.168.")?"ws://"+game.playHost+".airmash.devel:8000/"+game.playPath:"ws://"+document.domain+":8010/"+game.playPath:"wss://game-"+game.playHost+".airma.sh/"+game.playPath,Yt&&Ht&&Yt.close(),(Gt=new WebSocket(jt)).binaryType="arraybuffer",Gt.onopen=function(){cn({c:gn.LOGIN,protocol:game.protocol,name:game.myName,session:config.settings.session?config.settings.session:"none",horizonX:Math.ceil(game.halfScreenX/game.scale),horizonY:Math.ceil(game.halfScreenY/game.scale),flag:game.myFlag})},Gt.onclose=function(){null!=zt&&clearInterval(zt),game.state!==Network.STATE.CONNECTING&&(game.state=Network.STATE.CONNECTING,!1===en&&Network.reconnectMessage())},Gt.onerror=function(){},Gt.onmessage=function(bn){on(pn(bn.data))}};var ln=function(){(Yt=new WebSocket(jt)).binaryType="arraybuffer",Yt.onopen=function(){cn({c:gn.BACKUP,token:game.myToken},!0)},Yt.onclose=function(){Ht=!1},Yt.onerror=function(){},Yt.onmessage=function(bn){var xn=pn(bn.data);xn.c===yn.BACKUP&&(Ht=!0),xn.backup=!0,on(xn)}},un=function(bn){var Tn=1,En=[],Sn=mn[bn.c],vn;if(null==Sn)return null;for(vn=0;vn<Sn.length;vn++)switch(Sn[vn][1]){case fn.text:var wn=Tools.encodeUTF8(bn[Sn[vn][0]]);En.push(wn),Tn+=1+wn.length;break;case fn.array:case fn.arraysmall:break;case fn.uint8:Tn+=1;break;case fn.uint16:Tn+=2;break;case fn.uint32:case fn.float32:Tn+=4;break;case fn.float64:Tn+=8;break;case fn.boolean:Tn+=1;}var Cn=new ArrayBuffer(Tn),Pn=new DataView(Cn),An=0,Mn=1;for(Pn.setUint8(0,bn.c,!0),vn=0;vn<Sn.length;vn++)switch(Sn[vn][1]){case fn.text:var Rn=En[An].length;Pn.setUint8(Mn,Rn,!0),Mn+=1;for(var In=0;In<Rn;In++)Pn.setUint8(Mn+In,En[An][In],!0);En[An],An++,Mn+=Rn;break;case fn.array:case fn.arraysmall:break;case fn.uint8:Pn.setUint8(Mn,bn[Sn[vn][0]],!0),Mn+=1;break;case fn.uint16:Pn.setUint16(Mn,bn[Sn[vn][0]],!0),Mn+=2;break;case fn.uint32:Pn.setUint32(Mn,bn[Sn[vn][0]],!0),Mn+=4;break;case fn.float32:Pn.setFloat32(Mn,bn[Sn[vn][0]],!0),Mn+=4;break;case fn.float64:Pn.setFloat64(Mn,bn[Sn[vn][0]],!0),Mn+=8;break;case fn.boolean:Pn.setUint8(Mn,!1===bn[Sn[vn][0]]?0:1),Mn+=1;}return Cn},pn=function(bn){var vn=new DataView(bn),Tn={c:vn.getUint8(0,!0)},En=1,Sn=_n[Tn.c];if(null==Sn)return null;for(var wn=0,Cn;wn<Sn.length;wn++)switch(Cn=Sn[wn][0],Sn[wn][1]){case fn.text:case fn.textbig:if(Sn[wn][1]==fn.text){var Pn=vn.getUint8(En,!0);En+=1}else Pn=vn.getUint16(En,!0),En+=2;for(var An=new Uint8Array(Pn),Mn=0;Mn<Pn;Mn++)An[Mn]=vn.getUint8(En+Mn,!0);var Rn=Tools.decodeUTF8(An);Tn[Cn]=Rn,En+=Pn;break;case fn.array:case fn.arraysmall:if(Sn[wn][1]==fn.arraysmall){var In=vn.getUint8(En,!0);En+=1}else In=vn.getUint16(En,!0),En+=2;Tn[Cn]=[];for(var Dn=Sn[wn][2],On=0;On<In;On++){for(var Ln={},kn=0,Nn;kn<Dn.length;kn++)switch(Nn=Dn[kn][0],Dn[kn][1]){case fn.text:case fn.textbig:for(Dn[kn][1]==fn.text?(Pn=vn.getUint8(En,!0),En+=1):(Pn=vn.getUint16(En,!0),En+=2),An=new Uint8Array(Pn),Mn=0;Mn<Pn;Mn++)An[Mn]=vn.getUint8(En+Mn,!0);Rn=Tools.decodeUTF8(An),Ln[Nn]=Rn,En+=Pn;break;case fn.uint8:Ln[Nn]=vn.getUint8(En,!0),En+=1;break;case fn.uint16:Ln[Nn]=vn.getUint16(En,!0),En+=2;break;case fn.uint24:var Fn=256*vn.getUint16(En,!0);En+=2,Tn[Nn]=Fn+vn.getUint8(En,!0),En+=1;break;case fn.uint32:Ln[Nn]=vn.getUint32(En,!0),En+=4;break;case fn.float32:Ln[Nn]=vn.getFloat32(En,!0),En+=4;break;case fn.float64:Ln[Nn]=vn.getFloat64(En,!0),En+=8;break;case fn.boolean:Ln[Nn]=0!=vn.getUint8(En,!0),En+=1;break;case fn.speed:Ln[Nn]=Tools.decodeSpeed(vn.getUint16(En,!0)),En+=2;break;case fn.accel:Ln[Nn]=Tools.decodeAccel(vn.getUint16(En,!0)),En+=2;break;case fn.coordx:Ln[Nn]=Tools.decodeCoordX(vn.getUint16(En,!0)),En+=2;break;case fn.coordy:Ln[Nn]=Tools.decodeCoordY(vn.getUint16(En,!0)),En+=2;break;case fn.coord24:Fn=256*vn.getUint16(En,!0),En+=2,Tn[Nn]=Tools.decodeCoord24(Fn+vn.getUint8(En,!0)),En+=1;break;case fn.rotation:Ln[Nn]=Tools.decodeRotation(vn.getUint16(En,!0)),En+=2;break;case fn.regen:Ln[Nn]=Tools.decodeRegen(vn.getUint16(En,!0)),En+=2;break;case fn.healthnergy:Ln[Nn]=Tools.decodeHealthnergy(vn.getUint8(En,!0)),En+=1;}Tn[Cn].push(Ln)}break;case fn.uint8:Tn[Cn]=vn.getUint8(En,!0),En+=1;break;case fn.uint16:Tn[Cn]=vn.getUint16(En,!0),En+=2;break;case fn.uint24:Fn=256*vn.getUint16(En,!0),En+=2,Tn[Cn]=Fn+vn.getUint8(En,!0),En+=1;break;case fn.uint32:Tn[Cn]=vn.getUint32(En,!0),En+=4;break;case fn.float32:Tn[Cn]=vn.getFloat32(En,!0),En+=4;break;case fn.float64:Tn[Cn]=vn.getFloat64(En,!0),En+=8;break;case fn.boolean:Tn[Cn]=0!=vn.getUint8(En,!0),En+=1;break;case fn.speed:Tn[Cn]=Tools.decodeSpeed(vn.getUint16(En,!0)),En+=2;break;case fn.accel:Tn[Cn]=Tools.decodeAccel(vn.getUint16(En,!0)),En+=2;break;case fn.coordx:Tn[Cn]=Tools.decodeCoordX(vn.getUint16(En,!0)),En+=2;break;case fn.coordy:Tn[Cn]=Tools.decodeCoordY(vn.getUint16(En,!0)),En+=2;break;case fn.coord24:Fn=256*vn.getUint16(En,!0),En+=2,Tn[Cn]=Tools.decodeCoord24(Fn+vn.getUint8(En,!0)),En+=1;break;case fn.rotation:Tn[Cn]=Tools.decodeRotation(vn.getUint16(En,!0)),En+=2;break;case fn.regen:Tn[Cn]=Tools.decodeRegen(vn.getUint16(En,!0)),En+=2;break;case fn.healthnergy:Tn[Cn]=Tools.decodeHealthnergy(vn.getUint8(En,!0)),En+=1;break;default:return null;}return Tn},cn=function(bn,xn){xn?Yt.send(un(bn)):Gt.send(un(bn))},hn={UP:1,DOWN:2,LEFT:3,RIGHT:4,FIRE:5,SPECIAL:6},fn={text:1,textbig:2,array:3,arraysmall:4,uint8:5,uint16:6,uint24:7,uint32:8,float32:9,float64:10,boolean:11,speed:12,accel:13,coordx:14,coordy:15,coord24:16,rotation:17,healthnergy:18,regen:19},gn={LOGIN:0,BACKUP:1,HORIZON:2,ACK:5,PONG:6,KEY:10,COMMAND:11,SCOREDETAILED:12,CHAT:20,WHISPER:21,SAY:22,TEAMCHAT:23,VOTEMUTE:24,LOCALPING:255},mn={[gn.LOGIN]:[["protocol",fn.uint8],["name",fn.text],["session",fn.text],["horizonX",fn.uint16],["horizonY",fn.uint16],["flag",fn.text]],[gn.BACKUP]:[["token",fn.text]],[gn.HORIZON]:[["horizonX",fn.uint16],["horizonY",fn.uint16]],[gn.ACK]:[],[gn.PONG]:[["num",fn.uint32]],[gn.KEY]:[["seq",fn.uint32],["key",fn.uint8],["state",fn.boolean]],[gn.COMMAND]:[["com",fn.text],["data",fn.text]],[gn.SCOREDETAILED]:[],[gn.CHAT]:[["text",fn.text]],[gn.WHISPER]:[["id",fn.uint16],["text",fn.text]],[gn.SAY]:[["text",fn.text]],[gn.TEAMCHAT]:[["text",fn.text]],[gn.VOTEMUTE]:[["id",fn.uint16]],[gn.LOCALPING]:[["auth",fn.uint32]]},yn={LOGIN:0,BACKUP:1,PING:5,PING_RESULT:6,ACK:7,ERROR:8,COMMAND_REPLY:9,PLAYER_NEW:10,PLAYER_LEAVE:11,PLAYER_UPDATE:12,PLAYER_FIRE:13,PLAYER_HIT:14,PLAYER_RESPAWN:15,PLAYER_FLAG:16,PLAYER_KILL:17,PLAYER_UPGRADE:18,PLAYER_TYPE:19,PLAYER_POWERUP:20,PLAYER_LEVEL:21,PLAYER_RETEAM:22,GAME_FLAG:30,GAME_SPECTATE:31,GAME_PLAYERSALIVE:32,GAME_FIREWALL:33,EVENT_REPEL:40,EVENT_BOOST:41,EVENT_BOUNCE:42,EVENT_STEALTH:43,EVENT_LEAVEHORIZON:44,MOB_UPDATE:60,MOB_UPDATE_STATIONARY:61,MOB_DESPAWN:62,MOB_DESPAWN_COORDS:63,CHAT_PUBLIC:70,CHAT_TEAM:71,CHAT_SAY:72,CHAT_WHISPER:73,CHAT_VOTEMUTEPASSED:78,CHAT_VOTEMUTED:79,SCORE_UPDATE:80,SCORE_BOARD:81,SCORE_DETAILED:82,SCORE_DETAILED_CTF:83,SCORE_DETAILED_BTR:84,SERVER_MESSAGE:90,SERVER_CUSTOM:91},_n={[yn.LOGIN]:[["success",fn.boolean],["id",fn.uint16],["team",fn.uint16],["clock",fn.uint32],["token",fn.text],["type",fn.uint8],["room",fn.text],["players",fn.array,[["id",fn.uint16],["status",fn.uint8],["level",fn.uint8],["name",fn.text],["type",fn.uint8],["team",fn.uint16],["posX",fn.coordx],["posY",fn.coordy],["rot",fn.rotation],["flag",fn.uint16],["upgrades",fn.uint8]]]],[yn.BACKUP]:[],[yn.PING]:[["clock",fn.uint32],["num",fn.uint32]],[yn.PING_RESULT]:[["ping",fn.uint16],["playerstotal",fn.uint32],["playersgame",fn.uint32]],[yn.ACK]:[],[yn.ERROR]:[["error",fn.uint8]],[yn.COMMAND_REPLY]:[["type",fn.uint8],["text",fn.textbig]],[yn.PLAYER_NEW]:[["id",fn.uint16],["status",fn.uint8],["name",fn.text],["type",fn.uint8],["team",fn.uint16],["posX",fn.coordx],["posY",fn.coordy],["rot",fn.rotation],["flag",fn.uint16],["upgrades",fn.uint8]],[yn.PLAYER_LEAVE]:[["id",fn.uint16]],[yn.PLAYER_UPDATE]:[["clock",fn.uint32],["id",fn.uint16],["keystate",fn.uint8],["upgrades",fn.uint8],["posX",fn.coord24],["posY",fn.coord24],["rot",fn.rotation],["speedX",fn.speed],["speedY",fn.speed]],[yn.PLAYER_FIRE]:[["clock",fn.uint32],["id",fn.uint16],["energy",fn.healthnergy],["energyRegen",fn.regen],["projectiles",fn.arraysmall,[["id",fn.uint16],["type",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["speedX",fn.speed],["speedY",fn.speed],["accelX",fn.accel],["accelY",fn.accel],["maxSpeed",fn.speed]]]],[yn.PLAYER_SAY]:[["id",fn.uint16],["text",fn.text]],[yn.PLAYER_RESPAWN]:[["id",fn.uint16],["posX",fn.coord24],["posY",fn.coord24],["rot",fn.rotation],["upgrades",fn.uint8]],[yn.PLAYER_FLAG]:[["id",fn.uint16],["flag",fn.uint16]],[yn.PLAYER_HIT]:[["id",fn.uint16],["type",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["owner",fn.uint16],["players",fn.arraysmall,[["id",fn.uint16],["health",fn.healthnergy],["healthRegen",fn.regen]]]],[yn.PLAYER_KILL]:[["id",fn.uint16],["killer",fn.uint16],["posX",fn.coordx],["posY",fn.coordy]],[yn.PLAYER_UPGRADE]:[["upgrades",fn.uint16],["type",fn.uint8],["speed",fn.uint8],["defense",fn.uint8],["energy",fn.uint8],["missile",fn.uint8]],[yn.PLAYER_TYPE]:[["id",fn.uint16],["type",fn.uint8]],[yn.PLAYER_POWERUP]:[["type",fn.uint8],["duration",fn.uint32]],[yn.PLAYER_LEVEL]:[["id",fn.uint16],["type",fn.uint8],["level",fn.uint8]],[yn.PLAYER_RETEAM]:[["players",fn.array,[["id",fn.uint16],["team",fn.uint16]]]],[yn.GAME_FLAG]:[["type",fn.uint8],["flag",fn.uint8],["id",fn.uint16],["posX",fn.coord24],["posY",fn.coord24],["blueteam",fn.uint8],["redteam",fn.uint8]],[yn.GAME_SPECTATE]:[["id",fn.uint16]],[yn.GAME_PLAYERSALIVE]:[["players",fn.uint16]],[yn.GAME_FIREWALL]:[["type",fn.uint8],["status",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["radius",fn.float32],["speed",fn.float32]],[yn.EVENT_REPEL]:[["clock",fn.uint32],["id",fn.uint16],["posX",fn.coordx],["posY",fn.coordy],["rot",fn.rotation],["speedX",fn.speed],["speedY",fn.speed],["energy",fn.healthnergy],["energyRegen",fn.regen],["players",fn.arraysmall,[["id",fn.uint16],["keystate",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["rot",fn.rotation],["speedX",fn.speed],["speedY",fn.speed],["energy",fn.healthnergy],["energyRegen",fn.regen],["playerHealth",fn.healthnergy],["playerHealthRegen",fn.regen]]],["mobs",fn.arraysmall,[["id",fn.uint16],["type",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["speedX",fn.speed],["speedY",fn.speed],["accelX",fn.accel],["accelY",fn.accel],["maxSpeed",fn.speed]]]],[yn.EVENT_BOOST]:[["clock",fn.uint32],["id",fn.uint16],["boost",fn.boolean],["posX",fn.coord24],["posY",fn.coord24],["rot",fn.rotation],["speedX",fn.speed],["speedY",fn.speed],["energy",fn.healthnergy],["energyRegen",fn.regen]],[yn.EVENT_BOUNCE]:[["clock",fn.uint32],["id",fn.uint16],["keystate",fn.uint8],["posX",fn.coord24],["posY",fn.coord24],["rot",fn.rotation],["speedX",fn.speed],["speedY",fn.speed]],[yn.EVENT_STEALTH]:[["id",fn.uint16],["state",fn.boolean],["energy",fn.healthnergy],["energyRegen",fn.regen]],[yn.EVENT_LEAVEHORIZON]:[["type",fn.uint8],["id",fn.uint16]],[yn.MOB_UPDATE]:[["clock",fn.uint32],["id",fn.uint16],["type",fn.uint8],["posX",fn.coordx],["posY",fn.coordy],["speedX",fn.speed],["speedY",fn.speed],["accelX",fn.accel],["accelY",fn.accel],["maxSpeed",fn.speed]],[yn.MOB_UPDATE_STATIONARY]:[["id",fn.uint16],["type",fn.uint8],["posX",fn.float32],["posY",fn.float32]],[yn.MOB_DESPAWN]:[["id",fn.uint16],["type",fn.uint8]],[yn.MOB_DESPAWN_COORDS]:[["id",fn.uint16],["type",fn.uint8],["posX",fn.coordx],["posY",fn.coordy]],[yn.SCORE_UPDATE]:[["id",fn.uint16],["score",fn.uint32],["earnings",fn.uint32],["upgrades",fn.uint16],["totalkills",fn.uint32],["totaldeaths",fn.uint32]],[yn.SCORE_BOARD]:[["data",fn.array,[["id",fn.uint16],["score",fn.uint32],["level",fn.uint8]]],["rankings",fn.array,[["id",fn.uint16],["x",fn.uint8],["y",fn.uint8]]]],[yn.SCORE_DETAILED]:[["scores",fn.array,[["id",fn.uint16],["level",fn.uint8],["score",fn.uint32],["kills",fn.uint16],["deaths",fn.uint16],["damage",fn.float32],["ping",fn.uint16]]]],[yn.SCORE_DETAILED_CTF]:[["scores",fn.array,[["id",fn.uint16],["level",fn.uint8],["captures",fn.uint16],["score",fn.uint32],["kills",fn.uint16],["deaths",fn.uint16],["damage",fn.float32],["ping",fn.uint16]]]],[yn.SCORE_DETAILED_BTR]:[["scores",fn.array,[["id",fn.uint16],["level",fn.uint8],["alive",fn.boolean],["wins",fn.uint16],["score",fn.uint32],["kills",fn.uint16],["deaths",fn.uint16],["damage",fn.float32],["ping",fn.uint16]]]],[yn.CHAT_TEAM]:[["id",fn.uint16],["text",fn.text]],[yn.CHAT_PUBLIC]:[["id",fn.uint16],["text",fn.text]],[yn.CHAT_SAY]:[["id",fn.uint16],["text",fn.text]],[yn.CHAT_WHISPER]:[["from",fn.uint16],["to",fn.uint16],["text",fn.text]],[yn.CHAT_VOTEMUTEPASSED]:[["id",fn.uint16]],[yn.CHAT_VOTEMUTED]:[],[yn.SERVER_MESSAGE]:[["type",fn.uint8],["duration",fn.uint32],["text",fn.textbig]],[yn.SERVER_CUSTOM]:[["type",fn.uint8],["data",fn.textbig]]};Network.KEYPACKET=hn,Network.KEYLOOKUP={1:"UP",2:"DOWN",3:"LEFT",4:"RIGHT",5:"FIRE",6:"SPECIAL"},Network.CLIENTPACKET=gn,Network.SERVERPACKET=yn,Network.STATE={LOGIN:1,CONNECTING:2,PLAYING:3}}(),function(){var Gt={},Yt={},Ht={},jt=null,Wt=0,zt=2*Math.PI,Vt=null,qt=!1,Kt={},Zt=!1,Qt=null,Jt=0,$t={LEFT:["LEFT","A"],RIGHT:["RIGHT","D"],UP:["UP","W"],DOWN:["DOWN","S"],STRAFELEFT:["Q"],STRAFERIGHT:["E"],FIRE:["SPACE"],SPECIAL:["CTRL","SHIFT"],SHOWSCORE:["TAB"],MAINMENU:["F1"],SHOWGAMES:["F2"],FULLSCREEN:["F"],MINIMIZECHAT:["PGDOWN"],MAXIMIZECHAT:["PGUP"],SAY:["GRAVE"],TEAM:["T"],REPLY:["R"],SPECTATE:["V"],UPGRADE1:["1"],UPGRADE2:["2"],UPGRADE3:["3"],UPGRADE4:["4"],SOUND:["G"],HELP:["H"],INVITE:["I"],MOUSEMODE:["M"]},en={},tn={LEFT:!0,RIGHT:!0,UP:!0,DOWN:!0,FIRE:!0,SPECIAL:!0,STRAFELEFT:!0,STRAFERIGHT:!0},nn={},an={MAINMENU:!0,FULLSCREEN:!0,INVITE:!0,SOUND:!0,SHOWSCORE:!0,SHOWGAMES:!0,HELP:!0},rn=[["Forward","UP"],["Backward","DOWN"],["Turn Left","LEFT"],["Turn Right","RIGHT"],["Fire","FIRE"],["Special","SPECIAL"],["Strafe Left","STRAFELEFT"],["Strafe Right","STRAFERIGHT"],[""],["Spectate","SPECTATE"],["Upgrade Speed","UPGRADE1"],["Upgrade Defense","UPGRADE2"],["Upgrade Energy","UPGRADE3"],["Upgrade Missiles","UPGRADE4"],["Scoreboard","SHOWSCORE"],["Main Menu","MAINMENU"],["Show Games","SHOWGAMES"],["Fullscreen","FULLSCREEN"],["Maximize Chat","MAXIMIZECHAT"],["Minimize Chat","MINIMIZECHAT"],[""],["In-game Say","SAY"],["Team Chat","TEAM"],["Reply","REPLY"],["Toggle Sound","SOUND"],["Help","HELP"],["Invite Friends","INVITE"],["Mouse Mode","MOUSEMODE"]],on={},sn={BACKSPACE:8,TAB:9,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS:20,SPACE:32,PGUP:33,PGDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,WINDOWL:91,WINDOWR:92,SELECT:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,"*":106,"+":107,"-":109,DECIMAL:110,"/":111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL:145,":":186,"=":187,",":188,"-":189,".":190,"/":191,GRAVE:192,"[":219,"\\":220,"]":221,QUOTE:222},dn=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"],ln=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"];Input.setup=function(){for(var vn in sn)on[sn[vn]]=vn;en=JSON.parse(JSON.stringify($t)),fn(),mn(!0),$(window).on("keydown",un),$(window).on("keyup",pn),$(window).on("gamepadconnected",function(Tn){UI.showMessage("alert","<span class=\"info\">GAMEPAD CONNECTED</span>"+UI.escapeHTML(Tn.originalEvent.gamepad.id),3e3),qt=!0,hn()}),$(window).on("gamepaddisconnected",function(Tn){UI.showMessage("alert","<span class=\"info\">GAMEPAD DISCONNECTED</span>"+UI.escapeHTML(Tn.originalEvent.gamepad.id),3e3),qt=!1,hn()})};var un=function(vn){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var Tn=vn.which;if(72!=Tn&&UI.hideHelp(),null!=Qt&&gn(Tn))vn.preventDefault();else{var En=Input.getBind(Tn);if(!cn(Tn))return null==tn[En]?(Ht[Tn]||(Ht[Tn]=!0,UI.controlKey(Tn,En,!0)),vn.preventDefault(),!1):(Gt[En]||(Gt[En]=!0,bn(En)),Yt[Tn]||(Yt[Tn]=!0),vn.preventDefault(),!1)}}},pn=function(vn){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var Tn=vn.which,En=Input.getBind(Tn);if(null==tn[En]&&Ht[Tn]&&(Ht[Tn]=!1),!cn(Tn))return Gt[En]&&(Gt[En]=!1,xn(En)),Yt[Tn]&&(Yt[Tn]=!1),vn.preventDefault(),!1}},cn=function(vn){return!!UI.chatBoxOpen()&&9!=vn&&27!=vn&&13!=vn&&38!=vn&&40!=vn&&37!=vn&&39!=vn&&112!=vn&&113!=vn&&114!=vn&&115!=vn&&116!=vn&&117!=vn&&118!=vn&&119!=vn&&120!=vn&&121!=vn&&122!=vn&&123!=vn},hn=function(){Kt={forward:!0,left:!1,right:!1,up:!1,down:!1,fire:!1,special:!1,angle:0,force:0}};Input.toggleKeybinds=function(){Zt?Input.closeKeybinds():Input.openKeybinds()},Input.getBind=function(vn){var Tn=nn[vn];return null==Tn?null:Tn},Input.bindKey=function(vn,Tn,En){null==Qt&&(Qt=Tn,Jt=En,$(vn.target).html("press key"))},Input.closeBind=function(){null!=Qt&&(mn(),Qt=null)},Input.resetBinds=function(){$t=JSON.parse(JSON.stringify(en)),Tools.removeSetting("keybinds"),Qt=null,mn()};var fn=function(){if(null!=config.settings.keybinds)for(var vn in config.settings.keybinds)$t[vn]=JSON.parse(JSON.stringify(config.settings.keybinds[vn]))},gn=function(vn){var Tn=on[vn];if(27==vn&&(Tn=""),null!=Tn){for(var En in $t)$t[En][0]==Tn&&($t[En][0]=""),1<$t[En].length&&$t[En][1]==Tn&&($t[En][1]="");for(En in $t[Qt][Jt]=Tn,$t)1<$t[En].length&&""==$t[En][0]&&""!=$t[En][1]&&($t[En]=[$t[En][1]]),2==$t[En].length&&""===$t[En][1]&&$t[En].splice(-1,1);return mn(),function(){var Sn={},wn="";for(var Cn in $t)null!=en[Cn]&&(wn=JSON.stringify($t[Cn]))!==JSON.stringify(en[Cn])&&(Sn[Cn]=JSON.parse(wn));0<Object.keys(Sn).length?Tools.setSettings({keybinds:Sn}):Tools.removeSetting("keybinds")}(),Qt=null,!0}return!1},mn=function(vn){var Tn="",En="",Sn="",wn=null;Tn+="<div class=\"left-binds\">";for(var Cn=0;Cn<rn.length;Cn++)null!=rn[Cn][0]&&(""==rn[Cn][0]?Tn+="<div class=\"item empty\"></div>":(null==(wn=$t[rn[Cn][1]])?(En="&nbsp;",Sn="&nbsp;"):(""==(En=wn[0])&&(En="&nbsp;"),""==(Sn=1==wn.length?"":wn[1])&&(Sn="&nbsp;")),Tn+="<div class=\"item\"><div class=\"name\">"+rn[Cn][0]+"</div><div class=\"bind"+("&nbsp;"==En?" blank":"")+"\" onclick=\"Input.bindKey(event,'"+rn[Cn][1]+"',0)\">"+En+"</div><div class=\"bind"+("&nbsp;"==Sn?" blank":"")+"\" onclick=\"Input.bindKey(event,'"+rn[Cn][1]+"',1)\">"+Sn+"</div></div>",13==Cn&&(Tn+="</div><div class=\"right-binds\">")));Tn+="</div>",null==vn&&$("#keybinds-list").html(Tn),nn={},Cn=0;var Pn=0;for(var An in $t){for(Cn=0;Cn<$t[An].length;Cn++)null!=(Pn=sn[$t[An][Cn]])&&(nn[Pn]=An);null!=an[An]&&$("#keybind-"+An.toLowerCase()).html(""==$t[An]?"&nbsp;":"("+$t[An]+")")}};Input.openKeybinds=function(){config.mobile||Zt||(UI.closeAllPanels("keybinds"),mn(),UI.showPanel("#keybinds"),Zt=!0)},Input.closeKeybinds=function(){Zt&&(UI.hidePanel("#keybinds",Zt),Zt=!1,Qt=null)},Input.update=function(){if(qt&&null!=navigator.getGamepads){var vn=navigator.getGamepads();if(null!=vn&&null!=vn.length&&0!=vn.length&&null!=vn[0]){var Tn=vn[0];if(!(16>Tn.buttons.length)){var En=Tn.buttons[12].pressed,Sn=Tn.buttons[13].pressed,wn=Tn.buttons[15].pressed,Cn=Tn.buttons[14].pressed,Pn=Tn.buttons[0].pressed||Tn.buttons[2].pressed,An=Tn.buttons[1].pressed||Tn.buttons[3].pressed;Kt.up!=En&&(yn("UP",En),Kt.up=En),Kt.down!=Sn&&(yn("DOWN",Sn),Kt.down=Sn),Kt.right!=wn&&(yn("RIGHT",wn),Kt.right=wn),Kt.left!=Cn&&(yn("LEFT",Cn),Kt.left=Cn),Kt.fire!=Pn&&(yn("FIRE",Pn),Kt.fire=Pn),Kt.special!=An&&(yn("SPECIAL",An),Kt.special=An);var Mn=new Vector(Tn.axes[1],Tn.axes[0]),Rn=Mn.length(),In=-Mn.angle()+Math.PI/2,Dn=In=(In%zt+zt)%zt;.2<Rn?(Kt.forward=!0,_n(Dn,Rn)):(Kt.forward&&!En&&yn("UP",!1),Kt.forward=!1)}}else qt=!1}},Input.unpressKey=function(vn){delete Ht[vn]},Input.keyState=function(vn){return Gt[vn]},Input.clearKeys=function(vn){if(game.state===Network.STATE.PLAYING){for(var Tn of dn)if(Gt[Tn]){if(vn&&(Yt[38]||Yt[40]||Yt[37]||Yt[39]))continue;Gt[Tn]=!1,xn(Tn)}for(var En in Yt)vn&&(38==En||40==En||37==En||39==En)||(Yt[En]=!1)}},Input.touchCloseAll=function(){game.state==Network.STATE.LOGIN?(Games.closeDropdowns(),UI.closeLogin()):game.state==Network.STATE.PLAYING&&(UI.closeAllPanels(),UI.closeTooltip())},Input.addTouchRejection=function(vn){$(vn).on("touchstart",function(Tn){Tn.stopPropagation()}),$(vn).on("touchmove",function(Tn){Tn.preventDefault(),Tn.stopPropagation()})},Input.setupLogin=function(){$(window).on("touchstart",function(vn){Input.touchCloseAll(),vn.preventDefault()}),Input.addTouchRejection("#logon,#big-message,#loginselector")},Input.setupTouch=function(){$(window).on("touchcancel",function(Tn){null!=Vt&&Vt.processOnEnd(Tn)}),Input.addTouchRejection("#settings,#sidebar,#roomnamecontainer,#menu,#gameselector,#mainmenu,#scoredetailed,#invitefriends,#msg-alert,#msg-information"),$("body").append("<div id=\"touch-joystick\"></div><div id=\"touch-fire\"><div class=\"circle\"></div></div><div id=\"touch-special\"><div class=\"circle\"></div></div>"),$("#touch-fire").on("touchstart",function(Tn){yn("FIRE",!0),$("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),Tn.preventDefault()}),$("#touch-fire").on("touchend",function(Tn){yn("FIRE",!1),$("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),Tn.preventDefault()}),$("#touch-special").on("touchstart",function(Tn){yn("SPECIAL",!0),$("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),Tn.preventDefault()}),$("#touch-special").on("touchend",function(Tn){yn("SPECIAL",!1),$("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),Tn.preventDefault()});var vn={zone:$("#touch-joystick")[0],mode:"static",position:{bottom:"50%",left:"50%"}};(Vt=nipplejs.create(vn)).on("end",Input.touchEnd),Vt.on("move",Input.touchMove)},Input.toggleMouse=function(vn){if(!config.mobile)if($(window).off("mousedown"),$(window).off("mouseup"),config.mouse=!config.mouse,config.mouse){if($(window).on("mousedown",Input.mouseDown),$(window).on("mouseup",Input.mouseUp),vn)return;UI.showMessage("alert","<span class=\"info\">MOUSE MODE</span>Enabled<div class=\"mousemode\"><span class=\"info\">LEFT CLICK</span>Fire&nbsp;&nbsp;&nbsp;<span class=\"info\">RIGHT CLICK</span>Special&nbsp;&nbsp;&nbsp;<span class=\"info\">WASD</span>Move</div>",7e3),Tools.setSettings({mousemode:!0})}else UI.showMessage("alert","<span class=\"info\">MOUSE MODE</span>Disabled",3e3),Tools.removeSetting("mousemode")},Input.mouseDown=function(vn){var Tn=vn.originalEvent;if((0==Tn.button||2==Tn.button)&&null!=Tn.target.tagName&&"canvas"==Tn.target.tagName.toLowerCase()){var En=0==Tn.button?"FIRE":"SPECIAL";yn(En,!0),vn.preventDefault()}},Input.mouseUp=function(vn){var Tn=vn.originalEvent;if(0==Tn.button||2==Tn.button)if(null!=Tn.target.tagName&&"canvas"==Tn.target.tagName.toLowerCase()){var En=0==Tn.button?"FIRE":"SPECIAL";yn(En,!1),vn.preventDefault()}else yn("FIRE",!1),yn("SPECIAL",!1)};var yn=function(vn,Tn){(Gt[vn]==!Tn||Tn&&null==Gt[vn])&&(Network.sendKey(vn,Tn),Gt[vn]=Tn)},_n=function(vn,Tn){var En=Players.getMe();if(null!=En){var Sn=vn-En.rot;Sn>Math.PI&&(Sn-=2*Math.PI),Sn<-Math.PI&&(Sn+=2*Math.PI);var wn=Math.round(1e3*(Math.abs(Sn)/(60*config.ships[En.type].turnFactor)));if(!(10>(wn-=Math.round(game.ping))||100>game.time-Wt)){null!=jt&&clearTimeout(jt),Wt=game.time;var Cn=0<Sn?"RIGHT":"LEFT",Pn=0>=Sn?"RIGHT":"LEFT";yn("UP",!(null!=Tn&&.5>Tn)),yn(Cn,!0),yn(Pn,!1),jt=setTimeout(function(){yn(Cn,!1)},wn)}}};Input.touchMove=function(vn,Tn){var En=-Tn.angle.radian+Math.PI/2,Sn=En=(En%zt+zt)%zt;_n(Sn,Tn.force)},Input.touchEnd=function(){yn("UP",!1),yn("LEFT",!1),yn("RIGHT",!1)},Input.gameFocus=function(){game.focus=!0},Input.gameBlur=function(){game.focus=!1,Input.clearKeys()};var bn=function(vn){return 3==game.myType&&("STRAFELEFT"===vn||"STRAFERIGHT"===vn)?(bn("SPECIAL"),void bn("STRAFELEFT"===vn?"LEFT":"RIGHT")):void(-1!==ln.indexOf(vn)&&Network.sendKey(vn,!0))},xn=function(vn){3!=game.myType||"STRAFELEFT"!==vn&&"STRAFERIGHT"!==vn?-1!==dn.indexOf(vn)&&Network.sendKey(vn,!1):(xn("STRAFELEFT"===vn?"LEFT":"RIGHT"),Gt["STRAFERIGHT"===vn?"STRAFELEFT":"STRAFERIGHT"]||xn("SPECIAL"))}}();class Bt{constructor(Gt,Yt){this.id=Gt.id,this.status=Gt.status,this.level=null==Gt.level||0==Gt.level?null:Gt.level,this.reel=1==Gt.reel,this.name=Gt.name,this.type=Gt.type,this.team=Gt.team,this.pos=new Vector(Gt.posX,Gt.posY),this.lowResPos=new Vector(Gt.posX,Gt.posY),this.speed=Vector.zero(),this.speedupgrade=0,this.rot=Gt.rot,this.flag=Gt.flag,this.speedLength=0,this.sprites={},this.randomness=Tools.rand(0,1e5),this.keystate={},this.lastTick=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.stealthed=!1,this.alpha=1,this.scale=1,this.powerups={shield:!1,rampage:!1},this.powerupsShown={shield:!1,rampage:!1},this.powerupActive=!1,this.render=!0,this.hidden=!1,this.culled=!1,this.timedout=!1,this.reducedFactor=!1,this.lastPacket=game.timeNetwork,this.state={thrustLevel:0,thrustDir:0,bubble:!1,bubbleProgress:0,bubbleFade:0,bubbleTime:0,bubbleTextWidth:0,hasBadge:!1,badge:0,stealthLevel:0,scaleLevel:1,powerupAngle:0,powerupFade:0,powerupFadeState:0,lastBounceSound:0},this.setupGraphics(),0==this.status?(Tools.decodeUpgrades(this,Gt.upgrades),this.updatePowerups()):(this.hidden=!0,this.me()&&UI.visibilityHUD(!1)),this.reel?(this._prevPos=null,this._offset=null):this.visibilityUpdate(),(!Yt&&this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.me()&&(game.myType=Gt.type,UI.aircraftSelected(Gt.type))}setupGraphics(Gt){var Yt=null;switch(this.me()&&(Yt={layer:"aircraftme"}),this.sprites.powerup=Textures.init("powerupShield",{visible:!1,alpha:.75}),this.sprites.powerupCircle=Textures.init("powerupCircle",{visible:!1,alpha:.75}),this.type){case 1:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipRaptor",Yt),this.sprites.shadow=Textures.init("shipRaptorShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster=Textures.init("shipRaptorThruster"),this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall"),this.sprites.thrusterShadow=Textures.init("thrusterShadow");break;case 2:this.state.baseScale=.35,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipSpirit",Yt),this.sprites.shadow=Textures.init("shipSpiritShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case 3:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipComanche",Yt),this.sprites.rotor=Textures.init("shipComancheRotor",Yt),this.sprites.shadow=Textures.init("shipComancheShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.rotorShadow=Textures.init("shipComancheRotorShadow",{scale:2*this.state.baseScale*(2.4/config.shadowScaling)});break;case 4:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipTornado",Yt),this.sprites.shadow=Textures.init("shipTornadoShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case 5:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipProwler",Yt),this.sprites.shadow=Textures.init("shipProwlerShadow",{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"),this.sprites.thruster2=Textures.init("shipRaptorThruster"),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");}if(this.reel||Gt||(this.setupNameplate(),this.setupChatBubbles(),null!=this.level&&this.setupLevelPlate()),config.debug.collisions){this.col=new PIXI.Graphics;for(var Ht of config.ships[this.type].collisions)this.col.beginFill(16777215,.2),this.col.drawCircle(Ht[0],Ht[1],Ht[2]),this.col.endFill();game.graphics.layers.explosions.addChild(this.col)}}reteam(Gt){this.team=Gt,this.sprites.name.style=new PIXI.TextStyle(this.nameplateTextStyle()),UI.changeMinimapTeam(this.id,this.team)}nameplateTextStyle(){if(2==game.gameType)var Gt=1==this.team?"#4076E2":"#EA4242";else Gt=this.team==game.myTeam?"#FFFFFF":"#FFEC52";return{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:config.playerNameSize||"28px",fill:Gt,dropShadow:!0,dropShadowBlur:10,dropShadowDistance:0,padding:4}}setupNameplate(){var Gt="";2==game.gameType&&(Gt="  \u25A0"),this.sprites.name=new PIXI.Text(this.name+Gt,this.nameplateTextStyle()),this.sprites.name.scale.set(.5,.5),this.sprites.flag=Textures.sprite("flag_"+this.flag),this.sprites.flag.scale.set(.4,.4),this.sprites.flag.anchor.set(.5,.5),this.sprites.badge=Textures.sprite("badge_gold"),this.sprites.badge.scale.set(.3),this.sprites.badge.visible=!1,game.graphics.layers.playernames.addChild(this.sprites.badge),game.graphics.layers.playernames.addChild(this.sprites.flag),game.graphics.layers.playernames.addChild(this.sprites.name)}setupChatBubbles(){this.sprites.bubble=new PIXI.Container,this.sprites.bubbleLeft=Graphics.initSprite("chatbubbleleft",this.sprites.bubble,{scale:.5}),this.sprites.bubbleRight=Graphics.initSprite("chatbubbleright",this.sprites.bubble,{scale:.5}),this.sprites.bubbleCenter=Graphics.initSprite("chatbubblecenter",this.sprites.bubble,{scale:.5}),this.sprites.bubblePoint=Graphics.initSprite("chatbubblepoint",this.sprites.bubble,{scale:.5}),this.sprites.emote=Graphics.initSprite("emote_tf",this.sprites.bubble,{scale:.6,anchor:[0.5,0.5]}),this.sprites.bubbleText=new PIXI.Text("a",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:"12px",fill:"white"}),this.sprites.bubble.addChild(this.sprites.bubbleText),this.sprites.bubble.visible=!1,this.sprites.bubble.pivot.set(.5,34),game.graphics.layers.bubbles.addChild(this.sprites.bubble)}visibilityUpdate(Gt){this.culled=!Graphics.inScreen(this.pos,128);var Yt=!(this.hidden||this.culled||this.timedout);if(Gt||this.render!=Yt){switch(this.sprites.sprite.visible=Yt,this.sprites.shadow.visible=Yt,this.sprites.flag.visible=Yt,this.sprites.name.visible=Yt,null!=this.sprites.level&&(this.sprites.level.visible=Yt,this.sprites.levelBorder.visible=Yt),this.sprites.badge.visible=this.state.hasBadge&&Yt,this.sprites.powerup.visible=this.powerupActive&&Yt,this.sprites.powerupCircle.visible=this.powerupActive&&Yt,this.type){case 1:this.sprites.thruster.visible=Yt,this.sprites.thrusterGlow.visible=Yt,this.sprites.thrusterShadow.visible=Yt;break;case 2:case 4:case 5:this.sprites.thruster1.visible=Yt,this.sprites.thruster1Glow.visible=Yt,this.sprites.thruster1Shadow.visible=Yt,this.sprites.thruster2.visible=Yt,this.sprites.thruster2Glow.visible=Yt,this.sprites.thruster2Shadow.visible=Yt;break;case 3:this.sprites.rotor.visible=Yt,this.sprites.rotorShadow.visible=Yt;}this.render=Yt,Yt||Sound.clearThruster(this.id)}}stealth(Gt){this.lastPacket=game.timeNetwork,this.energy=Gt.energy,this.energyRegen=Gt.energyRegen,Gt.state?(this.stealthed=!0,this.state.stealthLevel=0,this.team!=game.myTeam&&(this.keystate.LEFT&&delete this.keystate.LEFT,this.keystate.RIGHT&&delete this.keystate.RIGHT)):this.unstealth()}unstealth(){this.stealthed=!1,this.state.stealthLevel=0,this.opacity(1)}opacity(Gt){this.alpha=Gt,this.sprites.sprite.alpha=Gt,this.sprites.shadow.alpha=Gt,this.sprites.flag.alpha=Gt,this.sprites.name.alpha=Gt,this.sprites.badge.alpha=Gt,this.sprites.powerup.alpha=.75*Gt,this.sprites.powerupCircle.alpha=.75*Gt,null!=this.sprites.level&&(this.sprites.level.alpha=Gt,this.sprites.levelBorder.alpha=.4*Gt),5==this.type&&(this.sprites.thruster1.alpha=Gt,this.sprites.thruster1Glow.alpha=Gt,this.sprites.thruster2.alpha=Gt,this.sprites.thruster2Glow.alpha=Gt)}kill(Gt){if(this.status=1,this.keystate={},this.pos.x=Gt.posX,this.pos.y=Gt.posY,this.speed=Vector.zero(),this.me()&&UI.resetPowerups(),this.resetPowerups(),this.hidden=!0,this.visibilityUpdate(),this.stealthed&&this.unstealth(),!this.culled&&!0!==Gt.spectate){switch(this.type){case 1:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3));break;case 2:Particles.explosion(this.pos.clone(),Tools.rand(2,2.5),Tools.randInt(4,7));break;case 3:case 4:case 5:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3));}Graphics.shakeCamera(this.pos,this.me()?20:10),Sound.clearThruster(this.id),Sound.playerKill(this)}}me(){return game.myID==this.id}destroy(Gt){var Yt=this.me()?game.graphics.layers.aircraftme:game.graphics.layers.aircraft;switch(Yt.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.powerup.destroy(),this.sprites.powerupCircle.destroy(),this.type){case 1:game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.thrusters.removeChild(this.sprites.thrusterGlow),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.thrusterShadow.destroy();break;case 2:case 4:case 5:game.graphics.layers.thrusters.removeChild(this.sprites.thruster1,this.sprites.thruster2),game.graphics.layers.thrusters.removeChild(this.sprites.thruster1Glow,this.sprites.thruster2Glow),this.sprites.thruster1.destroy(),this.sprites.thruster2.destroy(),this.sprites.thruster1Glow.destroy(),this.sprites.thruster2Glow.destroy(),this.sprites.thruster1Shadow.destroy(),this.sprites.thruster2Shadow.destroy();break;case 3:Yt.removeChild(this.sprites.rotor),this.sprites.rotor.destroy(),game.graphics.layers.shadows.removeChild(this.sprites.rotorShadow),this.sprites.rotorShadow.destroy();}Gt&&!this.reel&&(game.graphics.layers.playernames.removeChild(this.sprites.badge,this.sprites.name,this.sprites.flag),null!=this.sprites.level&&(game.graphics.layers.playernames.removeChild(this.sprites.level,this.sprites.levelBorder),this.sprites.level.destroy({texture:!0,baseTexture:!0}),this.sprites.levelBorder.destroy()),game.graphics.layers.bubbles.removeChild(this.sprites.bubble),this.sprites.badge.destroy(),this.sprites.name.destroy({texture:!0,baseTexture:!0}),this.sprites.flag.destroy(),this.sprites.bubble.destroy({children:!0}))}sayBubble(Gt){this.state.bubbleTime=game.time,this.state.bubbleFade=0,this.state.bubble||(this.state.bubble=!0,this.state.bubbleProgress=0,this.sprites.bubble.visible=!0,this.sprites.bubble.alpha=0,this.sprites.bubble.scale.set(0,0)),this.sprites.bubble.cacheAsBitmap=!1;var Yt=UI.isEmote(Gt.text,!0);if(Yt){this.sprites.bubbleText.visible=!1,this.sprites.emote.texture=Textures.get("emote_"+Yt),this.sprites.emote.visible=!0;var Ht=26;this.sprites.emote.position.set(0,0)}else this.sprites.bubbleText.visible=!0,this.sprites.emote.visible=!1,this.sprites.bubbleText.text=Gt.text,Ht=this.sprites.bubbleText.width,this.sprites.bubbleText.position.set(-Ht/2,-7);this.sprites.bubbleLeft.position.set(-Ht/2-17,-21),this.sprites.bubbleRight.position.set(Ht/2+9,-21),this.sprites.bubbleCenter.position.set(-Ht/2-9,-21),this.sprites.bubbleCenter.scale.set(Ht/82+18/82,.5),this.sprites.bubblePoint.position.set(-9,19),this.sprites.bubble.cacheAsBitmap=!0,this.state.bubbleTextWidth=Ht}networkKey(Gt,Yt){this.lastPacket=game.timeNetwork,1==this.status&&this.revive(),null!=Yt.posX&&(this.reducedFactor=Tools.reducedFactor(),this.pos.x=Yt.posX,this.pos.y=Yt.posY,this.rot=Yt.rot,this.speed.x=Yt.speedX,this.speed.y=Yt.speedY);var Ht=this.stealthed;null!=Yt.keystate&&Tools.decodeKeystate(this,Yt.keystate),null!=Yt.upgrades&&(Tools.decodeUpgrades(this,Yt.upgrades),this.updatePowerups()),null!=Yt.energy&&(this.energy=Yt.energy,this.energyRegen=Yt.energyRegen),null!=Yt.boost&&(this.boost=Yt.boost),this.team!=game.myTeam&&(this.stealthed||Ht&&!this.stealthed)&&this.unstealth(),this.me()||!Ht||this.stealthed||this.unstealth(),Yt.c==Network.SERVERPACKET.EVENT_BOUNCE&&300<game.time-this.state.lastBounceSound&&(this.state.lastBounceSound=game.time,Sound.playerImpact(this.pos,this.type,this.speed.length()/config.ships[this.type].maxSpeed))}updateLevel(Gt){this.me()&&(1==Gt.type&&Games.showLevelUP(Gt.level),UI.updateMyLevel(Gt.level)),this.level=Gt.level,this.setupLevelPlate()}setupLevelPlate(){null==this.sprites.level?(this.sprites.level=new PIXI.Text(this.level+"",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:config.playerLevelSize||"28px",fill:"rgb(200, 200, 200)",dropShadow:!0,dropShadowBlur:6,dropShadowDistance:0,padding:4}),this.sprites.level.scale.set(.5,.5),this.sprites.levelBorder=Textures.sprite("levelborder"),this.sprites.levelBorder.alpha=.4,game.graphics.layers.playernames.addChild(this.sprites.levelBorder),game.graphics.layers.playernames.addChild(this.sprites.level)):this.sprites.level.text=this.level+"",this.sprites.levelBorder.scale.set((this.sprites.level.width+10)/32,.65),this.sprites.level.visible=this.render,this.sprites.levelBorder.visible=this.render}powerup(Gt){UI.addPowerup(Gt.type,Gt.duration)}resetPowerups(){this.powerupActive&&(this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1),this.powerups.shield=!1,this.powerupsShown.shield=!1,this.powerups.rampage=!1,this.powerupsShown.rampage=!1,this.powerupActive=!1,this.state.powerupFade=0,this.state.powerupFadeState=0}updatePowerups(){var Gt=!1;this.powerups.shield!=this.powerupsShown.shield&&(this.powerupsShown.shield=this.powerups.shield,this.powerups.shield&&(this.sprites.powerup.texture=Textures.get("powerup_shield"),this.sprites.powerupCircle.tint=16777215),Gt=!0),this.powerups.rampage!=this.powerupsShown.rampage&&(this.powerupsShown.rampage=this.powerups.rampage,this.powerups.rampage&&(this.sprites.powerup.texture=Textures.get("powerup_rampage"),this.sprites.powerupCircle.tint=16712448),Gt=!0),Gt&&(this.powerupActive=this.powerups.shield||this.powerups.rampage,this.powerupActive?(this.state.powerupFade=0,this.state.powerupFadeState=0,this.sprites.powerup.visible=!0,this.sprites.powerupCircle.visible=!0):(this.powerupActive=!0,this.state.powerupFade=0,this.state.powerupFadeState=1))}impact(Gt,Yt,Ht,jt){this.health=Ht,this.healthRegen=jt,this.stealthed&&this.unstealth(),200!=Gt&&Mobs.explosion(Yt,Gt),this.me()&&0==this.status&&Graphics.shakeCamera(Yt,8)}changeType(Gt){this.type!=Gt.type&&(this.destroy(!1),this.type=Gt.type,this.setupGraphics(!0),this.visibilityUpdate(!0))}respawn(Gt){this.lastPacket=game.timeNetwork,this.status=0,this.keystate={},this.pos.x=Gt.posX,this.pos.y=Gt.posY,this.rot=Gt.rot,this.speed.x=0,this.speed.y=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.state.thrustLevel=0,this.state.thrustDir=0,this.hidden=!1,this.timedout=!1,this.visibilityUpdate(),this.me()&&UI.resetPowerups(),Tools.decodeUpgrades(this,Gt.upgrades),this.updatePowerups(),(this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.stealthed&&this.unstealth(),this.me()&&(game.myType=this.type,game.spectatingID=null,UI.aircraftSelected(this.type),UI.visibilityHUD(!0),UI.hideSpectator()),this.updateGraphics(1),Sound.playerRespawn(this)}revive(){this.status=0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.hidden=!1,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.stealthed&&this.unstealth()}changeFlag(Gt){this.flag=Gt.flag,this.sprites.flag.texture=Textures.get("flag_"+Gt.flag)}changeBadge(Gt){this.sprites.badge.texture=Textures.get(Gt)}updateNameplate(){if(!this.reel){var Gt=(this.sprites.name.width+this.sprites.flag.width+10)/2,Yt=this.pos.x-Gt+(this.state.hasBadge?12:0)-(null==this.level?0:this.sprites.level.width/2+8),Ht=this.pos.y+this.state.nameplateDist*this.scale;this.sprites.name.position.set(Yt+40,Ht),this.sprites.flag.position.set(Yt+15,Ht+10),null!=this.level&&(this.sprites.level.position.set(Yt+2*Gt+13,Ht+2),this.sprites.levelBorder.position.set(Yt+2*Gt+7.75,Ht-.5)),this.state.hasBadge&&this.sprites.badge.position.set(Yt-28,Ht)}}updateBubble(){this.state.bubbleProgress+=.015*game.timeFactor,1<=this.state.bubbleProgress&&(this.state.bubbleProgress=1),4e3<game.time-this.state.bubbleTime?(this.state.bubbleFade+=.08*game.timeFactor,1<=this.state.bubbleFade&&(this.state.bubbleFade=1),this.sprites.bubble.scale.set(1+.2*this.state.bubbleFade),this.sprites.bubble.alpha=1*(1-this.state.bubbleFade),1<=this.state.bubbleFade&&(this.state.bubble=!1,this.sprites.bubble.visible=!1)):(this.sprites.bubble.scale.set(Tools.easing.outElastic(this.state.bubbleProgress,.5)),this.sprites.bubble.alpha=1);var Gt=0==(this.state.bubbleTextWidth+game.screenX)%2?.5:0,Yt=0==game.screenY%2?0:.5,Ht=this.state.nameplateDist*this.scale;this.powerupActive&&(Ht+=60),this.sprites.bubble.position.set(this.pos.x*game.scale+Gt,(this.pos.y-Ht)*game.scale+Yt)}detectTimeout(){if(!this.me()){var Gt=this.timedout;this.timedout=!game.lagging&&3e3<game.timeNetwork-this.lastPacket,this.timedout&&!Gt&&(this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=Vector.zero(),this.keystate={},this.resetPowerups())}}leaveHorizon(){this.me()||this.timedout||(this.lastPacket=-1e4,this.timedout=!0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=Vector.zero(),this.keystate={},this.resetPowerups())}update(Gt){if(this.reel)this.clientCalcs(Gt);else{if(this.detectTimeout(),this.visibilityUpdate(),!this.render)return this.health+=Gt*this.healthRegen,void(1<=this.health&&(this.health=1));if(!(!1!==this.reducedFactor&&(Gt-=this.reducedFactor,this.reducedFactor=!1,0>=Gt))){var zt=.51<Gt?Math.round(Gt):1,Vt=Gt/zt,qt=2*Math.PI,Kt=this.boost?1.5:1,Yt,Ht,jt,Wt;for(Yt=0;Yt<zt;Yt++){this.energy+=Vt*this.energyRegen,1<=this.energy&&(this.energy=1),this.health+=Vt*this.healthRegen,1<=this.health&&(this.health=1),Wt=-999,this.strafe?(this.keystate.LEFT&&(Wt=this.rot-.5*Math.PI),this.keystate.RIGHT&&(Wt=this.rot+.5*Math.PI)):(this.keystate.LEFT&&(this.rot+=-Vt*config.ships[this.type].turnFactor),this.keystate.RIGHT&&(this.rot+=Vt*config.ships[this.type].turnFactor)),Ht=this.speed.x,jt=this.speed.y,this.keystate.UP?-999==Wt?Wt=this.rot:Wt+=Math.PI*(this.keystate.RIGHT?-.25:.25):this.keystate.DOWN&&(-999==Wt?Wt=this.rot+Math.PI:Wt+=Math.PI*(this.keystate.RIGHT?.25:-.25)),-999!==Wt&&(this.speed.x+=Math.sin(Wt)*config.ships[this.type].accelFactor*Vt*Kt,this.speed.y-=Math.cos(Wt)*config.ships[this.type].accelFactor*Vt*Kt);var Zt=this.speed.length(),Qt=config.ships[this.type].maxSpeed*Kt*config.upgrades.speed.factor[this.speedupgrade],Jt=config.ships[this.type].minSpeed;this.powerups.rampage&&(Qt*=.75),this.flagspeed&&(Qt=5),Zt>Qt?this.speed.multiply(Qt/Zt):this.speed.x>Jt||this.speed.x<-Jt||this.speed.y>Jt||this.speed.y<-Jt?(this.speed.x*=1-config.ships[this.type].brakeFactor*Vt,this.speed.y*=1-config.ships[this.type].brakeFactor*Vt):(this.speed.x=0,this.speed.y=0),this.pos.x+=Vt*Ht+.5*(this.speed.x-Ht)*Vt*Vt,this.pos.y+=Vt*jt+.5*(this.speed.y-jt)*Vt*Vt,this.clientCalcs(Vt)}this.rot=(this.rot%qt+qt)%qt,-1==game.gameType?(-16384>this.pos.x&&(this.pos.x+=32768),16384<this.pos.x&&(this.pos.x-=32768),-8192>this.pos.y&&(this.pos.y+=16384),8192<this.pos.y&&(this.pos.y-=16384)):(-16352>this.pos.x&&(this.pos.x=-16352),16352<this.pos.x&&(this.pos.x=16352),-8160>this.pos.y&&(this.pos.y=-8160),8160<this.pos.y&&(this.pos.y=8160)),Sound.updateThruster(0,this),SWAM&&SWAM.OnPlayerUpdate(this,Gt)}}}clientCalcs(Gt){switch(this.type){case 1:case 2:case 4:case 5:var Yt=!1,Ht=!1,jt=this.boost?1.5:1;!1!==(Yt=this.keystate.LEFT?.3:this.keystate.RIGHT?-.3:0)&&(this.state.thrustDir=Tools.converge(this.state.thrustDir,Yt,.1*Gt)),!1!==(Ht=this.keystate.UP?1:this.keystate.DOWN?-1:0)&&(this.state.thrustLevel=Tools.converge(this.state.thrustLevel,Ht*jt,.2*Gt));break;case 3:this.state.thrustDir+=(.2+this.speed.length()/50)*Gt;}this.culled||this.render&&(!this.stealthed&&.4>this.health&&Particles.planeDamage(this),!this.stealthed&&.2>this.health&&Particles.planeDamage(this),this.boost&&Particles.planeBoost(this,0<=Ht),5==this.type&&this.stealthed&&(this.state.stealthLevel+=.03*Gt,this.state.stealthLevel=Tools.clamp(this.state.stealthLevel,0,this.team==game.myTeam?.5:1),this.opacity(1-this.state.stealthLevel)),this.state.scaleLevel+=.005*Gt,1<=this.state.scaleLevel?(this.state.scaleLevel=1,this.scale=1):this.scale=Tools.easing.outElastic(this.state.scaleLevel,.5),this.powerupActive&&(this.state.powerupAngle+=.075*Gt,0==this.state.powerupFadeState?(this.state.powerupFade+=.05*Gt,1<=this.state.powerupFade&&(this.state.powerupFade=1)):(this.state.powerupFade+=.05*Gt,1<=this.state.powerupFade&&(this.powerupActive=!1,this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1))))}updateGraphics(){var Yt=Tools.oscillator(.025,1e3,this.randomness)*this.scale,Ht=1.5*this.state.thrustLevel,jt=this.rot,Wt=Graphics.shadowCoords(this.pos);if(Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,jt,Yt*this.state.baseScale,Yt*this.state.baseScale),Graphics.transform(this.sprites.shadow,Wt.x,Wt.y,jt,this.state.baseScale*(2.4/config.shadowScaling)*this.scale,this.state.baseScale*(2.4/config.shadowScaling)*this.scale),this.powerupActive){var zt=.35*(0==this.state.powerupFadeState?2*(1-this.state.powerupFade)+1:1-this.state.powerupFade)*Tools.oscillator(.075,100,this.randomness),Vt=.75*(0==this.state.powerupFadeState?Tools.clamp(2*this.state.powerupFade,0,1):Tools.clamp(1-1.3*this.state.powerupFade,0,1))*this.alpha;Graphics.transform(this.sprites.powerup,this.pos.x,this.pos.y-80,0,zt,zt,Vt),Graphics.transform(this.sprites.powerupCircle,this.pos.x,this.pos.y-80,this.state.powerupAngle,1.35*zt,1.35*zt,Vt)}var qt=Tools.oscillator(.1,.5,this.randomness),Kt=.01>Math.abs(this.state.thrustLevel)?0:this.state.thrustLevel/2+(0<this.state.thrustLevel?.5:-.5),Zt=Tools.clamp(2*Math.abs(this.state.thrustLevel)-.1,0,1);switch(this.type){case 1:Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-jt)*(20*Yt),this.pos.y+Math.cos(-jt)*(20*Yt),jt+(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale,.5*qt*Kt*this.scale,Zt),Graphics.transform(this.sprites.thrusterShadow,Wt.x+Math.sin(-jt)*(20*Yt)/config.shadowScaling,Wt.y+Math.cos(-jt)*(20*Yt)/config.shadowScaling,jt+(0<this.state.thrustLevel?this.state.thrustDir:0),.4*qt*Kt*this.scale*(4/config.shadowScaling),.5*qt*Kt*this.scale*(4/config.shadowScaling),Zt/2.5),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-jt-.5*this.state.thrustDir)*(40*Yt),this.pos.y+Math.cos(-jt-.5*this.state.thrustDir)*(40*Yt),null,1.5*Ht*this.scale,1*Ht*this.scale,.3*this.state.thrustLevel);break;case 2:0>this.state.thrustLevel&&(qt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-jt-.5)*(32*Yt),this.pos.y+Math.cos(-jt-.5)*(32*Yt),jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*qt*Kt*this.scale,.6*qt*Kt*this.scale,Zt),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.5-jt)*(32*Yt),this.pos.y+Math.cos(.5-jt)*(32*Yt),jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*qt*Kt*this.scale,.6*qt*Kt*this.scale,Zt),Graphics.transform(this.sprites.thruster1Shadow,Wt.x+Math.sin(-jt-.5)*(32*Yt)/config.shadowScaling,Wt.y+Math.cos(-jt-.5)*(32*Yt)/config.shadowScaling,jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.5*qt*Kt*this.scale*(4/config.shadowScaling),.6*qt*Kt*this.scale*(4/config.shadowScaling),Zt/2.5),Graphics.transform(this.sprites.thruster2Shadow,Wt.x+Math.sin(.5-jt)*(32*Yt)/config.shadowScaling,Wt.y+Math.cos(.5-jt)*(32*Yt)/config.shadowScaling,jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.5*qt*Kt*this.scale*(4/config.shadowScaling),.6*qt*Kt*this.scale*(4/config.shadowScaling),Zt/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-jt-.3)*(50*Yt),this.pos.y+Math.cos(-jt-.3)*(50*Yt),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.3-jt)*(50*Yt),this.pos.y+Math.cos(.3-jt)*(50*Yt),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel);break;case 3:Graphics.transform(this.sprites.rotor,this.pos.x,this.pos.y,this.state.thrustDir,2*(Yt*this.state.baseScale),2*(Yt*this.state.baseScale),.8),Graphics.transform(this.sprites.rotorShadow,Wt.x,Wt.y,this.state.thrustDir,2*(this.state.baseScale*(2.4/config.shadowScaling)*this.scale),2*(this.state.baseScale*(2.4/config.shadowScaling)*this.scale));break;case 4:0>this.state.thrustLevel&&(qt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-jt-.15)*(28*Yt),this.pos.y+Math.cos(-jt-.15)*(28*Yt),jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale,.5*qt*Kt*this.scale,Zt),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.15-jt)*(28*Yt),this.pos.y+Math.cos(.15-jt)*(28*Yt),jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale,.5*qt*Kt*this.scale,Zt),Graphics.transform(this.sprites.thruster1Shadow,Wt.x+Math.sin(-jt-.15)*(28*Yt)/config.shadowScaling,Wt.y+Math.cos(-jt-.15)*(28*Yt)/config.shadowScaling,jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale*(4/config.shadowScaling),.5*qt*Kt*this.scale*(4/config.shadowScaling),Zt/2.5),Graphics.transform(this.sprites.thruster2Shadow,Wt.x+Math.sin(.15-jt)*(28*Yt)/config.shadowScaling,Wt.y+Math.cos(.15-jt)*(28*Yt)/config.shadowScaling,jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale*(4/config.shadowScaling),.5*qt*Kt*this.scale*(4/config.shadowScaling),Zt/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-jt-.2)*(45*Yt),this.pos.y+Math.cos(-jt-.2)*(45*Yt),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-jt)*(45*Yt),this.pos.y+Math.cos(.2-jt)*(45*Yt),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel);break;case 5:0>this.state.thrustLevel&&(qt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-jt-.35)*(20*Yt),this.pos.y+Math.cos(-jt-.35)*(20*Yt),jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale,.4*qt*Kt*this.scale,Zt*this.alpha),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.35-jt)*(20*Yt),this.pos.y+Math.cos(.35-jt)*(20*Yt),jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*qt*Kt*this.scale,.4*qt*Kt*this.scale,Zt*this.alpha),Graphics.transform(this.sprites.thruster1Shadow,Wt.x+Math.sin(-jt-.35)*(20*Yt)/config.shadowScaling,Wt.y+Math.cos(-jt-.35)*(20*Yt)/config.shadowScaling,jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*qt*Kt*this.scale*(4/config.shadowScaling),.4*qt*Kt*this.scale*(4/config.shadowScaling),Zt*this.alpha/2.5),Graphics.transform(this.sprites.thruster2Shadow,Wt.x+Math.sin(.35-jt)*(20*Yt)/config.shadowScaling,Wt.y+Math.cos(.35-jt)*(20*Yt)/config.shadowScaling,jt+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*qt*Kt*this.scale*(4/config.shadowScaling),.4*qt*Kt*this.scale*(4/config.shadowScaling),Zt*this.alpha/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-jt-.2-0*this.state.thrustDir)*(35*Yt),this.pos.y+Math.cos(-jt-.2-0*this.state.thrustDir)*(35*Yt),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-jt-0*this.state.thrustDir)*(35*Yt),this.pos.y+Math.cos(.2-jt-0*this.state.thrustDir)*(35*Yt),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha);}this.updateNameplate(),this.state.bubble&&this.updateBubble(),config.debug.collisions&&this.col&&(this.col.position.set(this.pos.x,this.pos.y),this.col.rotation=this.rot)}}!function(){var Gt={},Yt=[-1,-1,-1],Ht=["badge_gold","badge_silver","badge_bronze"];Players.update=function(){var jt,Wt;for(jt in Gt)0==(Wt=Gt[jt]).status&&(Wt.update(game.timeFactor),Wt.updateGraphics(game.timeFactor));if(null!=game.spectatingID){if(null==(Wt=Gt[game.spectatingID]))return;if(3e3<game.timeNetwork-Wt.lastPacket)return;Graphics.setCamera(Wt.pos.x,Wt.pos.y)}else if(null!=game.myID){if(null==(Wt=Gt[game.myID]))return;0==Wt.status&&UI.updateHUD(Wt.health,Wt.energy,Wt),Graphics.setCamera(Wt.pos.x,Wt.pos.y)}},Players.add=function(jt,Wt){Gt[jt.id]=new Bt(jt,Wt)},Players.get=function(jt){return Gt[jt]},Players.getMe=function(){return Gt[game.myID]},Players.amIAlive=function(){var jt=Players.getMe();return null!=jt&&0==jt.status},Players.getIDs=function(){var jt={};for(var Wt in Gt)jt[Wt]=!0;return jt},Players.getByName=function(jt){for(var Wt in Gt)if(Gt[Wt].name===jt)return Gt[Wt];return null},Players.network=function(jt,Wt){var zt=Gt[Wt.id];null!=zt&&(jt===Network.SERVERPACKET.PLAYER_UPDATE||jt===Network.SERVERPACKET.PLAYER_FIRE||jt===Network.SERVERPACKET.EVENT_BOOST||jt===Network.SERVERPACKET.EVENT_BOUNCE?zt.networkKey(jt,Wt):jt===Network.SERVERPACKET.CHAT_SAY?zt.sayBubble(Wt):jt===Network.SERVERPACKET.PLAYER_RESPAWN?zt.respawn(Wt):jt===Network.SERVERPACKET.PLAYER_FLAG?(Wt.id==game.myID&&(game.myFlag=game.lastFlagSet,Tools.setSettings({flag:game.lastFlagSet})),zt.changeFlag(Wt)):void 0)},Players.stealth=function(jt){var Wt=Gt[jt.id];null!=Wt&&Wt.stealth(jt)},Players.leaveHorizon=function(jt){var Wt=Gt[jt.id];null!=Wt&&Wt.leaveHorizon()},Players.updateBadges=function(jt){for(var zt=Tools.clamp(jt.length,0,3),Vt=[],qt=0,Wt;qt<zt;qt++)null!=(Wt=Gt[jt[qt].id])&&(Vt.push(Wt.id),Wt.state.badge!=qt&&(Wt.state.badge=qt,Wt.changeBadge(Ht[qt])),Wt.state.hasBadge||(Wt.state.hasBadge=!0,Wt.render&&(Wt.sprites.badge.visible=!0)));for(var Kt=0;Kt<Yt.length;Kt++)if(-1==Vt.indexOf(Yt[Kt])){if(null==(Wt=Gt[Yt[Kt]]))continue;Wt.state.hasBadge&&(Wt.state.hasBadge=!1,Wt.sprites.badge.visible=!1)}Yt=Vt},Players.chat=function(jt){var Wt=Gt[jt.id];null!=Wt&&UI.addChatLine(Wt,jt.text,0)},Players.teamChat=function(jt){var Wt=Gt[jt.id];null!=Wt&&UI.addChatLine(Wt,jt.text,3)},Players.votemutePass=function(jt){var Wt=Gt[jt.id];null!=Wt&&UI.chatVotemutePass(Wt)},Players.whisper=function(jt){var Wt;if(jt.to==game.myID){if(null==(zt=Gt[jt.from]))return;Wt=2}else{var zt;if(null==(zt=Gt[jt.to]))return;Wt=1}UI.addChatLine(zt,jt.text,Wt)},Players.impact=function(jt){for(var Wt=0,zt;Wt<jt.players.length;Wt++)zt=Gt[jt.players[Wt].id],null!=zt&&zt.impact(jt.type,new Vector(jt.posX,jt.posY),jt.players[Wt].health,jt.players[Wt].healthRegen)},Players.powerup=function(jt){Players.getMe().powerup(jt)},Players.updateLevel=function(jt){var Wt=Gt[jt.id];null!=Wt&&Wt.updateLevel(jt)},Players.reteam=function(jt){var Wt=Gt[jt.id];null!=Wt&&Wt.reteam(jt.team)},Players.kill=function(jt){var Wt=Gt[jt.id];if(null!=Wt)if(0!=jt.killer||0!=jt.posX||0!=jt.posY){if(Wt.kill(jt),Wt.me()){UI.visibilityHUD(!1);var zt=Gt[jt.killer];null!=zt&&UI.killedBy(zt),UI.showSpectator("<div onclick=\"Network.spectateNext()\" class=\"spectate\">ENTER SPECTATOR MODE</div>")}else jt.killer===game.myID&&UI.killed(Wt);Wt.me()||Wt.id!=game.spectatingID||3!=game.gameType||Games.spectatorSwitch(Wt.id)}else!function(Vt){Vt.kill({posX:0,posY:0,spectate:!0}),UI.visibilityHUD(!1)}(Wt)},Players.destroy=function(jt){jt==game.spectatingID&&($("#spectator-tag").html("Spectating"),Games.spectatorSwitch(jt));var Wt=Gt[jt];null!=Wt&&(Wt.destroy(!0),delete Gt[jt])},Players.changeType=function(jt){var Wt=Gt[jt.id];null!=Wt&&Wt.changeType(jt)},Players.count=function(){var Wt=0,zt=0,jt;for(jt in Gt)Wt++,Gt[jt].culled&&zt++;return[Wt-zt,Wt]},Players.wipe=function(){for(var jt in Gt)Gt[jt].destroy(!0),delete Gt[jt]}}();class Xt{constructor(Gt){this.id=Gt.id,this.type=Gt.type,this.pos=new Vector(Gt.posX,Gt.posY),this.spriteRot=0,this.missile=1==this.type||2==this.type||3==this.type||5==this.type||6==this.type||7==this.type,this.missile&&Gt.c!==Network.SERVERPACKET.MOB_UPDATE_STATIONARY?(this.speed=new Vector(Gt.speedX,Gt.speedY),this.accel=new Vector(Gt.accelX,Gt.accelY),this.maxSpeed=Gt.maxSpeed,this.exhaust=config.mobs[this.type].exhaust,this.lastAccelX=0,this.lastAccelY=0,this.stationary=!1,this.spriteRot=this.speed.angle()+Math.PI):this.stationary=!0,this.sprites={},this.state={inactive:!1,despawnTicker:0,despawnType:0,baseScale:1,baseScaleShadow:1,luminosity:1},this.randomness=Tools.rand(0,1e5),this.culled=!1,this.visibility=!0,this.reducedFactor=!1,this.forDeletion=!1,this.spawnTime=game.time,this.lastPacket=game.timeNetwork,this.setupSprite()}setupSprite(){switch(4!=this.type&&8!=this.type&&9!=this.type&&(this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall",{layer:"projectiles"}),this.sprites.smokeGlow=Textures.init("smokeGlow",{layer:"projectiles"}),this.sprites.thruster=Textures.init("missileThruster")),this.type){case 1:case 5:case 6:case 7:this.sprites.sprite=Textures.init("missile"),this.sprites.shadow=Textures.init("missileShadow",{scale:[0.25,0.2]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=.2,this.sprites.smokeGlow.scale.set(1.5,3),this.sprites.smokeGlow.alpha=.75;break;case 2:this.sprites.sprite=Textures.init("missileFat"),this.sprites.shadow=Textures.init("missileShadow",{scale:[0.5,0.25]}),this.sprites.thrusterGlow.scale.set(4,3),this.sprites.thrusterGlow.alpha=.25,this.sprites.smokeGlow.scale.set(2.5,3),this.sprites.smokeGlow.alpha=.75;break;case 3:this.sprites.sprite=Textures.init("missileSmall",{scale:[0.28,0.2]}),this.sprites.shadow=Textures.init("missileShadow",{scale:[0.18,0.14]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=.2,this.sprites.smokeGlow.scale.set(1,2),this.sprites.smokeGlow.alpha=.75;break;case 4:case 8:case 9:var Gt="crateUpgrade";8==this.type?Gt="crateShield":9==this.type&&(Gt="crateRampage"),this.state.baseScale=.33,this.state.baseScaleShadow=.33*(2.4/config.shadowScaling),this.sprites.sprite=Textures.init(Gt,{scale:this.state.baseScale}),this.sprites.shadow=Textures.init("crateShadow",{scale:this.state.baseScaleShadow});}}despawn(Gt){return 4==this.type||8==this.type||9==this.type?(this.state.inactive=!0,this.state.despawnTicker=0,this.state.despawnType=Gt,void(1==Gt&&4!=this.type&&Sound.powerup(this.type,this.pos))):void(this.state.inactive=!0,this.state.despawnTicker=0,this.sprites.thruster.renderable=!1,this.sprites.thrusterGlow.renderable=!1,this.sprites.smokeGlow.renderable=!1,this.accel.x=0,this.accel.y=0,this.missile&&Sound.updateThruster(1,this,!1))}destroy(Gt){switch(this.type){case 1:case 2:case 3:case 5:case 6:case 7:game.graphics.layers.projectiles.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.projectiles.removeChild(this.sprites.thrusterGlow),game.graphics.layers.projectiles.removeChild(this.sprites.smokeGlow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.smokeGlow.destroy();break;case 4:case 8:case 9:game.graphics.layers.crates.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow);}Gt.c===Network.SERVERPACKET.MOB_DESPAWN_COORDS&&(Mobs.explosion(this.pos,Gt.type),this.missile&&Sound.updateThruster(1,this,!1))}network(Gt){this.lastPacket=game.timeNetwork,Gt.c===Network.SERVERPACKET.MOB_UPDATE&&(this.reducedFactor=Tools.reducedFactor()),this.pos.x=Gt.posX,this.pos.y=Gt.posY,null!=Gt.speedX&&(this.speed.x=Gt.speedX,this.speed.y=Gt.speedY),null!=Gt.accelX&&(this.accel.x=Gt.accelX,this.accel.y=Gt.accelY)}visible(Gt){Gt==this.visibility&&Gt!=this.culled||(this.sprites.sprite.visible=Gt,this.sprites.shadow.visible=Gt,4!=this.type&&8!=this.type&&9!=this.type&&(this.sprites.thruster.visible=Gt,this.sprites.thrusterGlow.visible=Gt),this.visibility=Gt)}visibilityUpdate(){this.culled=!Graphics.inScreen(this.pos,128),this.visible(!this.culled)}update(Gt){if(this.visibilityUpdate(),!(!1!==this.reducedFactor&&(Gt-=this.reducedFactor,this.reducedFactor=!1,0>=Gt))){var Wt=.51<Gt?Math.round(Gt):1,zt=Gt/Wt,Yt,Ht,jt;for(Yt=0;Yt<Wt;Yt++)if(this.stationary)this.clientCalcs(zt);else{Ht=this.speed.x,jt=this.speed.y,this.speed.x+=this.accel.x*zt,this.speed.y+=this.accel.y*zt;var Vt=this.speed.length();Vt>this.maxSpeed&&this.speed.multiply(this.maxSpeed/Vt),this.state.inactive&&this.speed.multiply(1-.03*zt),this.pos.x+=zt*Ht+.5*(this.speed.x-Ht)*zt,this.pos.y+=zt*jt+.5*(this.speed.y-jt)*zt,-16384>this.pos.x&&(this.pos.x+=32768),16384<this.pos.x&&(this.pos.x-=32768),-8192>this.pos.y&&(this.pos.y+=16384),8192<this.pos.y&&(this.pos.y-=16384),this.clientCalcs(zt)}this.missile&&!this.state.inactive&&Sound.updateThruster(1,this,this.visibility),this.state.inactive&&0<this.sprites.sprite.alpha&&(this.sprites.sprite.alpha-=0.2)}}clientCalcs(Gt){if(!this.forDeletion)switch(this.state.luminosity-=.075*Gt,0>this.state.luminosity&&(this.state.luminosity=0),this.type){case 1:case 2:case 3:case 5:case 6:case 7:var Yt=1;if(this.state.inactive){if(this.state.despawnTicker+=.01*Gt,.75<this.state.despawnTicker,1<this.state.despawnTicker)return void(this.forDeletion=!0);Yt=Tools.clamp(1-this.state.despawnTicker,.3,1)}if(!this.culled&&.3<Yt){var Ht=this.speed.angle()+Math.PI;Ht-this.spriteRot>=Math.PI?this.spriteRot+=2*Math.PI:this.spriteRot-Ht>Math.PI&&(this.spriteRot-=2*Math.PI),this.spriteRot=Tools.converge(this.spriteRot,Ht,.1*Gt),Particles.missileSmoke(this,this.exhaust,Yt)}break;case 4:case 8:case 9:if(this.state.inactive&&(this.state.despawnTicker+=.05*Gt,1<this.state.despawnTicker))return void(this.forDeletion=!0);}}updateGraphics(){switch(this.type){case 1:case 2:case 3:case 5:case 6:case 7:var Yt=Graphics.shadowCoords(this.pos),Ht=Tools.oscillator(.1,.5,this.randomness),jt=Tools.oscillator(.15,10,this.randomness);Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,this.spriteRot),Graphics.transform(this.sprites.shadow,Yt.x,Yt.y,this.spriteRot),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),null,null,null,(.5*this.state.luminosity+.2)*jt),Graphics.transform(this.sprites.smokeGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),this.spriteRot),Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-this.spriteRot)*this.exhaust,this.pos.y+Math.cos(-this.spriteRot)*this.exhaust,this.spriteRot,config.mobs[this.type].thruster[0]*Ht,config.mobs[this.type].thruster[1]*Ht);break;case 4:case 8:case 9:var Wt;Yt=Graphics.shadowCoords(this.pos),Wt=0==this.state.despawnType?1-this.state.despawnTicker:1+2*this.state.despawnTicker,Wt*=Tools.oscillator(.08,500,this.randomness),Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y+20*(Tools.oscillator(.08,330,this.randomness)-1.04),null,this.state.baseScale*Wt,this.state.baseScale*Wt,1-this.state.despawnTicker),Graphics.transform(this.sprites.shadow,Yt.x,Yt.y,null,this.state.baseScaleShadow*Wt,this.state.baseScaleShadow*Wt,1-this.state.despawnTicker);}}}!function(){var Gt={},Yt=[],Ht={};Mobs.add=function(jt,Wt){Gt[jt.id]=new Xt(jt),Wt&&Gt[jt.id].network(jt)},Mobs.get=function(jt){return Gt[jt]},Mobs.update=function(){var jt,Wt;for(jt in Gt)(Wt=Gt[jt]).update(game.timeFactor),Wt.forDeletion?Mobs.destroy(Wt):Wt.updateGraphics(game.timeFactor)},Mobs.network=function(jt){var Wt=Gt[jt.id];null==Wt?Mobs.add(jt,!0):Wt.network(jt)},Mobs.despawn=function(jt){var Wt=Gt[jt.id];null!=Wt&&Wt.despawn(jt.type)},Mobs.destroy=function(jt){var Wt=Gt[jt.id];null!=Wt&&(Wt.destroy(jt),delete Gt[jt.id])},Mobs.explosion=function(jt,Wt){1===Wt||5===Wt||6===Wt||7===Wt?Particles.explosion(jt,Tools.rand(1,1.2)):2===Wt?Particles.explosion(jt,Tools.rand(1.3,1.6)):3===Wt?Particles.explosion(jt,Tools.rand(.8,1)):void 0;Sound.mobExplosion(jt,Wt)},Mobs.count=function(){var Wt=0,zt=0,jt;for(jt in Gt)Wt++,Gt[jt].culled&&zt++;return[Wt-zt,Wt]},Mobs.wipe=function(){for(var jt in Gt)Gt[jt].destroy({}),delete Gt[jt]},Mobs.countDoodads=function(){return[Yt.length,config.doodads.length]},Mobs.setupDoodads=function(){config.doodads=config.doodads.concat(config.groundDoodads);for(var jt=0;jt<config.doodads.length;jt++)Mobs.addDoodad(config.doodads[jt])},Mobs.addDoodad=function(jt){var Wt=Number.isInteger(jt[2]),zt=Textures.init((Wt?"mountain":"")+jt[2]);zt.scale.set(jt[3]),zt.position.set(jt[0],jt[1]),zt.visible=!1,jt[4]&&(zt.rotation=jt[4]),jt[5]&&(zt.alpha=jt[5]),jt[6]&&(zt.tint=jt[6]),jt[7]=!1,jt[8]=zt,jt[9]=Wt?0:1},Mobs.getClosestDoodad=function(jt){for(var Vt=2,qt=0,Wt,zt;qt<Yt.length;qt++)0==(zt=Yt[qt])[5]&&Tools.distFastCheckFloat(jt.x,jt.y,zt[0],zt[1],256*zt[3])&&(Wt=Tools.distance(jt.x,jt.y,zt[0],zt[1])/(256*zt[3]))<Vt&&(Vt=Wt);return Tools.clamp(3.333*(Vt-.5),.2,1)},Mobs.updateDoodads=function(){for(var Wt=Tools.getBucketBounds(Graphics.getCamera(),512+game.halfScreenX/game.scale,512+game.halfScreenY/game.scale),zt=Wt[0],jt;zt<=Wt[1];zt++)for(var Vt=Wt[2];Vt<=Wt[3];Vt++)for(var qt=0;qt<game.buckets[zt][Vt][0].length;qt++)Kt=game.buckets[zt][Vt][0][qt],jt=config.doodads[Kt],game.state==Network.STATE.LOGIN&&0!=jt[9]||Graphics.inScreen(new Vector(jt[0],jt[1]),256*jt[3]+config.overdraw)&&(jt[7]||(jt[8].visible=!0,jt[7]=!0,Ht[Kt]||(Ht[Kt]=!0,Yt.push([jt[0],jt[1],jt[2],jt[3],Kt,jt[9]]))));for(var Zt=Yt.length-1,Kt;0<=Zt;Zt--)Kt=Yt[Zt][4],jt=config.doodads[Kt],Graphics.inScreen(new Vector(jt[0],jt[1]),256*jt[3]+config.overdraw)||jt[7]&&(jt[8].visible=!1,jt[7]=!1,Yt.splice(Zt,1),delete Ht[Kt])}}(),function(){class Gt{constructor(jt,Wt,zt,Vt){this.maxParticles=Wt,this.container=new PIXI.Container,null!=zt&&(this.container.blendMode=zt),this.particles=[],this.first=-1,this.last=-1,this.emitters={},this.emitterId=0,this.shadow=Vt,jt.addChild(this.container)}addParticle(jt,Wt,zt,Vt,qt,Kt,Zt,Qt,Jt,$t,en,tn,nn,an){if(!(20<game.timeFactorUncapped||this.particles.length>=this.maxParticles)){var rn=Textures.sprite(Wt),on={type:jt,sprite:rn,speed:zt,pos:Vt,scale:qt,alpha:Kt,rotationSpeed:Zt,rotation:Qt,lastRotation:0,time:game.time,tint:Jt,life:0,data:null==nn?0:nn,emitter:null==an?null:an,_prev:-1,_next:-1};null!=Jt&&(rn.tint=Jt),null!=en&&(rn.blendMode=en),null!=tn&&(on.life=tn),null==$t?rn.anchor.set(.5,.5):rn.anchor.set($t.x,$t.y),this.container.addChild(rn);var sn=this.particles.length;0<sn?(this.particles[this.last]._next=sn,on._prev=this.last,this.last=sn):(this.first=sn,this.last=sn),this.particles.push(on)}}wipe(){this.emitters={},this.emitterId=0;for(var jt=0;jt<this.particles.length;jt++)this.container.removeChild(this.particles[jt].sprite),this.particles[jt].sprite.destroy();this.particles=[],this.first=-1,this.last=-1}addEmitter(jt,Wt,zt,Vt,qt){20<game.timeFactorUncapped||(this.emitters[this.emitterId]={type:jt,pos:zt,speed:Wt,life:null==Vt?0:Vt,shadowLayer:qt},this.emitterId++)}updateEmitters(jt){var Wt,zt;for(Wt in this.emitters){switch((zt=this.emitters[Wt]).type){case Ht.EMITTER_EXPLOSION_FRAGMENT:zt.life+=.02*jt,zt.speed.multiply(1-.02*jt);}if(1<zt.life)delete this.emitters[Wt];else switch(zt.pos.x+=zt.speed.x*jt,zt.pos.y+=zt.speed.y*jt,zt.type){case Ht.EMITTER_EXPLOSION_FRAGMENT:var Vt=Tools.randInt(1,16),qt=.5*(1-zt.life),Kt=1-zt.life,Zt=Tools.rand(-.1,.1),Qt=Tools.randCircle();this.addParticle(Ht.FRAGMENT_SMOKE,"smoke_"+Vt,Vector.zero(),zt.pos.clone(),Vector.diag(qt),1,Zt,Qt,null,null,null,null,Kt+.2),zt.shadowLayer&&zt.shadowLayer.addParticle(Ht.FRAGMENT_SMOKE,"smokeshadow_"+Vt,Vector.zero(),zt.pos.clone(),Vector.diag(qt),1,Zt,Qt,null,null,null,null,Kt+.2);}}}destroy(jt){var Wt=this.particles.length;if(0!=Wt&&!(jt>=Wt)){this.container.removeChild(this.particles[jt].sprite),this.particles[jt].sprite.destroy();var zt=this.particles[jt]._prev,Vt=this.particles[jt]._next;return Wt--,-1==zt?this.first=Vt:this.particles[zt]._next=Vt,-1==Vt?this.last=zt:this.particles[Vt]._prev=zt,jt!=Wt&&(this.particles[jt]=this.particles[Wt],-1==this.particles[jt]._prev?this.first=jt:this.particles[this.particles[jt]._prev]._next=jt,-1==this.particles[jt]._next?this.last=jt:this.particles[this.particles[jt]._next]._prev=jt),this.particles.splice(Wt,1),Vt==Wt?jt:Vt}}update(jt){var Wt;this.updateEmitters(jt);for(var zt=this.first;-1!=zt;){switch((Wt=this.particles[zt]).type){case Ht.MISSILE:case Ht.MISSILE_FAT:case Ht.MISSILE_SMALL:Wt.type==Ht.MISSILE?(Wt.scale.add(.2*jt),Wt.scale.ceil(2*Wt.data),Wt.life+=.05*jt):Wt.type==Ht.MISSILE_FAT?(Wt.scale.add(.3*jt),Wt.scale.ceil(3*Wt.data),Wt.life+=.05*jt):(Wt.scale.add(.14*jt),Wt.scale.ceil(1.4*Wt.data),Wt.life+=.08*jt),Wt.speed.multiply(1-.05*jt),Wt.alpha=.7*(1-Wt.life),Wt.sprite.tint=Tools.colorLerp(Wt.tint,16777215,2*(1-Wt.life));break;case Ht.SHOCKWAVE_SMOKE:Wt.life+=.05*jt,Wt.alpha=.7*Tools.easing.custom(Wt.life,"shockwave");break;case Ht.SHOCKWAVE_INNER:case Ht.SHOCKWAVE_OUTER:Wt.life+=.05*jt;var Vt=Tools.easing.custom(Wt.life,"shockwave");Wt.alpha=.4*Vt,Wt.type==Ht.SHOCKWAVE_OUTER?Wt.scale.both(4*Wt.life):Wt.scale.both(3*Wt.life);break;case Ht.EXPLOSION_FLASH:Wt.life+=.1*jt,Wt.alpha=1-Wt.life;break;case Ht.EXPLOSION_FLASH_BIG:Wt.life+=.04*jt,Wt.alpha=1-Wt.life;break;case Ht.EXPLOSION_HOT_SMOKE:Wt.life+=.035*jt,Wt.alpha=1-Wt.life,Wt.scale.add(.05*jt),Wt.speed.multiply(1-.1*jt),Wt.rotationSpeed*=1-.05*jt;break;case Ht.EXPLOSION_SMOKE:Wt.life+=.01*jt,Wt.alpha=Tools.easing.custom(Wt.life,"explosionSmoke"),Wt.scale.add(.05*jt),Wt.speed.multiply(1-.05*jt),Wt.rotationSpeed*=1-.05*jt;break;case Ht.EXPLOSION_SPARK:Wt.life+=.02*jt,Wt.alpha=2*(1-Wt.life),Wt.speed.multiply(1-.05*jt),Wt.rotationSpeed*=1-.05*jt;break;case Ht.FRAGMENT_SMOKE:Wt.life+=.02*jt,Wt.scale.add(.075*jt*Wt.data),Wt.scale.ceil(2*Wt.data),Wt.rotationSpeed*=1-.05*jt,Wt.alpha=.3*(1-Wt.life);break;case Ht.PLANE_DAMAGE:Wt.life+=.02*jt,Wt.alpha=2*(1-Wt.life),Wt.speed.multiply(1-.1*jt);}if(1<Wt.life)zt=this.destroy(zt);else{if(Wt.pos.x+=Wt.speed.x*jt,Wt.pos.y+=Wt.speed.y*jt,Wt.rotation+=Wt.rotationSpeed*jt,this.shadow){var qt=Graphics.shadowCoords(Wt.pos);Wt.sprite.position.x=qt.x,Wt.sprite.position.y=qt.y,Wt.sprite.scale.x=Wt.scale.x/config.shadowScaling,Wt.sprite.scale.y=Wt.scale.y/config.shadowScaling,Wt.sprite.alpha=Tools.clamp(2*Wt.alpha,0,1)}else Wt.sprite.position.x=Wt.pos.x,Wt.sprite.position.y=Wt.pos.y,Wt.sprite.scale.x=Wt.scale.x,Wt.sprite.scale.y=Wt.scale.y,Wt.sprite.alpha=Tools.clamp(Wt.alpha,0,1);.03<Math.abs(Wt.rotation-Wt.lastRotation)&&(Wt.sprite.rotation=Wt.rotation,Wt.lastRotation=Wt.rotation),zt=this.particles[zt]._next}}}}var Yt={};Math.PI,Particles.setup=function(){Yt.smoke=new Gt(game.graphics.layers.smoke,2e3),Yt.shadows=new Gt(game.graphics.layers.shadows,2e3,null,!0),Yt.explosions=new Gt(game.graphics.layers.explosions,2e3)},Particles.update=function(){for(var jt=.51<game.timeFactor?Math.round(game.timeFactor):1,Wt=game.timeFactor/jt,zt=0;zt<jt;zt++)Yt.smoke.update(Wt),Yt.explosions.update(Wt),Yt.shadows.update(Wt)},Particles.wipe=function(){Yt.smoke.wipe(),Yt.explosions.wipe(),Yt.shadows.wipe()},Particles.planeDamage=function(jt){var Wt=2==jt.type?2:1,zt=Tools.randInt(1,4),Vt=Tools.randCircle(),qt=Tools.rand(.5,2),Kt=Tools.rand(.2,.8),Zt=Tools.rand(0,.3),Qt=Vector.createOff(jt.pos,Vt,Tools.rand(0,5*Wt)),Jt=Vector.create(Vt,qt);Yt.explosions.addParticle(Ht.PLANE_DAMAGE,"spark_"+zt,new Vector(Jt.x+jt.speed.x,Jt.y+jt.speed.y),Qt,Vector.diag(Kt),0,0,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD,Zt)},Particles.explosion=function(jt,Wt,zt){for(var Vt=1<Wt?1+(Wt-1)/1.5:Wt,qt=0;2>qt;qt++)Yt.explosions.addParticle(Ht.EXPLOSION_FLASH,"flash_"+Tools.randInt(1,4),Vector.zero(),jt.clone(),Vector.diag(1.5*Wt),0,0,Tools.randCircle(),15987628,null,PIXI.BLEND_MODES.ADD);var Kt,Zt,Qt,Jt,$t,en,tn,nn,an;for(Kt=Math.round(Tools.rand(20,30)*Wt),qt=0;qt<Kt;qt++)Zt=Tools.randInt(1,4),Qt=Tools.randCircle(),$t=Tools.rand(3,10)*Vt,en=Tools.rand(-.2,.2),tn=Tools.rand(.4,1.5)*Vt,an=Tools.rand(0,.3),Yt.explosions.addParticle(Ht.EXPLOSION_SPARK,"spark_"+Zt,Vector.create(Qt,$t),jt.clone(),Vector.diag(tn),0,en,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD,an);for(qt=0;qt<zt;qt++)Qt=Tools.randCircle(),$t=Tools.rand(3,7)*Vt,Jt=Tools.rand(15,30)*Wt,Yt.explosions.addEmitter(Ht.EMITTER_EXPLOSION_FRAGMENT,Vector.create(Qt,$t),Vector.createOff(jt,Qt,Jt),Tools.rand(0,.5),Yt.shadows);for(Kt=Math.round(Tools.rand(20,30)*Wt),qt=0;qt<Kt;qt++)Zt=Tools.randInt(1,16),Qt=Tools.randCircle(),Jt=Tools.rand(0,10)*Wt,$t=Tools.rand(0,3)*Wt,en=Tools.rand(-.1,.1),tn=Tools.rand(.5,.8)*Wt,nn=Tools.randCircle(),config.disableSmoke||Yt.explosions.addParticle(Ht.EXPLOSION_SMOKE,"smoke_"+Zt,Vector.create(Qt,$t),Vector.createOff(jt,Qt,Jt),Vector.diag(tn),0,en,nn),config.disableSmoke||Yt.shadows.addParticle(Ht.EXPLOSION_SMOKE,"smokeshadow_"+Zt,Vector.create(Qt,$t),Vector.createOff(jt,Qt,Jt),Vector.diag(tn),0,en,nn);for(Yt.explosions.addParticle(Ht.EXPLOSION_FLASH_BIG,"glowsmall",Vector.zero(),jt.clone(),Vector.diag(6*Wt),0,0,0,null,null,PIXI.BLEND_MODES.ADD),Kt=Math.round(Tools.rand(5,10)*Wt),qt=0;qt<Kt;qt++)Zt=Tools.randInt(1,4),Qt=Tools.randCircle(),$t=Tools.rand(1,3)*Wt,en=Tools.rand(-.1,.1),tn=Tools.rand(.1,.3)*Wt,Yt.explosions.addParticle(Ht.EXPLOSION_HOT_SMOKE,"hotsmoke_"+Zt,Vector.create(Qt,$t),jt.clone(),Vector.diag(tn),0,en,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD)},Particles.missileSmoke=function(jt,Wt,zt){var Vt=[null,Ht.MISSILE,Ht.MISSILE_FAT,Ht.MISSILE_SMALL,null,Ht.MISSILE,Ht.MISSILE,Ht.MISSILE][jt.type],qt=jt.spriteRot+Math.PI,Kt=Vector.createOff(jt.pos,qt,Wt),Zt=.2*(zt=zt||1),Qt=Tools.rand(-.1,.1),Jt=Vector.create(qt+Qt,5*zt),$t=Tools.randInt(1,16),en=Tools.rand(-.1,.1);Tools.randCircle(),Yt.smoke.addParticle(Vt,"smoke_"+$t,Jt.clone(),Kt.clone(),new Vector(1.25*Zt,4*Zt),1,en,qt,16775590,null,null,null,zt),Yt.shadows.addParticle(Vt,"smokeshadow_"+$t,Jt.clone(),Kt.clone(),new Vector(1.25*Zt,4*Zt),1,en,qt,null,null,null,null,zt)},Particles.planeBoost=function(jt,Wt){var zt=jt.rot+jt.state.thrustDir/2+Math.PI,Vt=Vector.createOff(jt.pos,zt,Wt?40:-20),qt=Tools.rand(-.1,.1),Kt=Wt?0:Math.PI,Zt=Vector.create(zt+qt+Kt,6),Qt=Tools.randInt(1,16),Jt=Tools.rand(-.1,.1);Tools.randCircle(),Yt.smoke.addParticle(Ht.MISSILE,"smoke_"+Qt,Zt.clone(),Vt.clone(),new Vector(.3,1.2),1,Jt,zt,16775590,null,null,null,1.2),Yt.shadows.addParticle(Ht.MISSILE,"smokeshadow_"+Qt,Zt.clone(),Vt.clone(),new Vector(.3,1.2),1,Jt,zt,null,null,null,null,1.2)},Particles.spiritShockwave=function(jt){for(var Vt=0,Wt,zt;40>Vt;Vt++)zt=2*(Vt/40)*Math.PI,Wt=Tools.randInt(1,16),Yt.explosions.addParticle(Ht.SHOCKWAVE_SMOKE,"smoke_"+Wt,Vector.create(zt,8),jt.clone(),Vector.diag(2),0,.4,Tools.randCircle());Yt.explosions.addParticle(Ht.SHOCKWAVE_INNER,"shockwave",Vector.zero(),jt.clone(),Vector.zero(),0,0,-.35+Math.PI),Yt.explosions.addParticle(Ht.SHOCKWAVE_OUTER,"shockwave",Vector.zero(),jt.clone(),Vector.zero(),0,0,-.35)},Particles.count=function(){var jt=0;for(var Wt in Yt)jt+=Yt[Wt].particles.length;return jt};var Ht={MISSILE:0,MISSILE_FAT:1,MISSILE_SMALL:2,SHOCKWAVE_SMOKE:3,SHOCKWAVE_INNER:4,SHOCKWAVE_OUTER:5,EXPLOSION_FLASH:6,EXPLOSION_FLASH_BIG:7,EXPLOSION_SMOKE:8,EXPLOSION_HOT_SMOKE:9,EXPLOSION_SPARK:10,FRAGMENT_SMOKE:11,PLANE_DAMAGE:12,EMITTER_EXPLOSION_FRAGMENT:100};Particles.PTYPE=Ht}(),function(){var Gt={},Yt={},Ht=null,jt=!1,Wt=0,zt=!1,Vt=-1,qt=0,Kt=!1,Zt=0,Qt=!1,Jt=null,$t=!1,en=null,tn=!1,nn=!1,an=!1,rn=null,on=0,sn=!1,dn=!1,ln=null,un=!1,pn=null,cn={x:0,y:0,width:0,height:0},hn={alert:null,information:null,default:null,destroyed:null},fn={alert:!1,information:!1,default:!1,destroyed:!1},gn={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},mn=!1,yn={},_n=[],bn=0,xn={1:["Predator",80,50,75,60,"BOOST","Temporarily increases speed by burning energy"],2:["Goliath",30,100,30,100,"REPEL","Repels enemy aircraft and missiles"],3:["Mohawk",100,40,100,40,"STRAFE","Enables sideways flight"],4:["Tornado",60,70,50,80,"MULTIFIRE","Launches 3 missiles at the same time"],5:["Prowler",50,70,40,60,"STEALTH","Becomes invisible to enemy aircraft"],101:["Speed"],102:["Defense"],103:["Energy Regen"],104:["Missile Speed"]},vn=["tf","pepe","clap","lol","bro","kappa","cry","rage"],Tn=["","Shield","Inferno"];game.tooltipValues=xn,UI.show=function(On,Ln){$(On).css({display:Ln?"inline-block":"block"})},UI.hide=function(On){$(On).css({display:"none"})},UI.isEmote=function(On,Ln){for(var kn=0;kn<vn.length;kn++)if(Ln){if(On===":"+vn[kn]+":")return vn[kn];}else if(On===vn[kn])return vn[kn];return!1},UI.serverMessage=function(On){var Ln="alert";2==On.type&&(Ln="information"),UI.showMessage(Ln,On.text,On.duration)},UI.showMessage=function(On,Ln,kn){$("#msg-"+On).removeClass("hidemsg").removeClass("popmsg"),$("#msg-"+On).html(Ln);var Nn=$("#msg-"+On).height();"default"!=On&&"destroyed"!=On||$("#msg-"+On).css({"margin-top":"-"+Math.round(Nn/2)+"px"}),$("#msg-"+On).addClass("popmsg"),fn[On]=!0,clearTimeout(hn[On]),hn[On]=setTimeout(UI.hideMessage,kn||2e3,On)},UI.hideMessage=function(On){$("#msg-"+On).addClass("hidemsg"),fn[On]=!1,hn[On]=setTimeout(function(Ln){$("#msg-"+On).removeClass("popmsg").removeClass("hidemsg"),$("#msg-"+Ln).html("")},2500,On)},UI.wipeAllMessages=function(){for(var On in fn)fn[On]&&UI.showMessage(On,"",100)},UI.updateMyLevel=function(On){game.myLevel=On,$("#score-rank").html(On),$("#lifetime-rank").html(On)},UI.newScore=function(On){if(On.id!=game.myID)return!1;var Ln=On.score-game.myScore,kn="";if(1>Math.abs(Ln)&&(Ln=!1),game.myScore=On.score,On.score!=gn.score&&(gn.score=On.score,$("#score-score").html(On.score)),On.upgrades!=gn.upgrades){var Nn=On.upgrades-gn.upgrades,Fn=-1!=gn.upgrades;if(gn.upgrades=On.upgrades,$("#score-upgrades").html(On.upgrades),Rn(),Fn&&0<Nn){if(Sound.powerup(4,null),mn&&(mn.msg+="<br>"),fn.default)return kn+="&nbsp;&nbsp;<span class=\"upgrade\">+"+Nn+"</span>",void $("#alert-update").append(kn);kn+="<span id=\"alert-update\"><span class=\"upgrade\">+"+Nn+"<span class=\"bold\"> upgrade</span></span></span>"}}if(On.earnings!=gn.earnings&&0!=game.myLevel){gn.earnings=On.earnings,$("#lifetime-totalbounty").html(On.earnings);var Bn=Math.ceil(Tools.rankToEarnings(game.myLevel+1)-On.earnings);$("#lifetime-nextbounty").html("+"+Bn)}if(On.totalkills!=gn.kills||On.totaldeaths!=gn.deaths){var Un=0==On.totalkills||0==On.totaldeaths?"-":(On.totalkills/On.totaldeaths).toFixed(2);$("#lifetime-kdratio").html(Un)}On.totalkills!=gn.kills&&(gn.kills=On.totalkills,$("#lifetime-kills").html(On.totalkills)),On.totaldeaths!=gn.deaths&&(gn.deaths=On.totaldeaths,$("#lifetime-deaths").html(On.totaldeaths)),Ln&&(mn&&(mn.msg+="<br>"),kn+=UI.getScoreString(Ln)),mn?(UI.showMessage(mn.type,mn.msg+kn,mn.duration),mn=!1):""!=kn&&UI.showMessage("default",kn,3e3)},UI.getScoreString=function(On,Ln){var Nn="positive",Fn="+";return 0>On&&(Nn="negative",Fn="-"),Ln&&(Nn=Ln),"<span id=\"alert-update\" class=\""+Nn+"\">"+Fn+Math.abs(On)+"</span>"};var En=function(On){On.sprite.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-On.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-On.y)/16384))};UI.wipeAllMinimapMobs=function(){for(var On in Gt)game.graphics.layers.ui1.removeChild(Gt[On].sprite),Gt[On].sprite.destroy(),delete Gt[On]},UI.showSpectator=function(On){if(!un){var Ln=config.mobile?" class=\"mobile\"":"";$("body").append("<div id=\"spectator\""+Ln+"></div>"),un=!0}$("#spectator").html(On),Input.addTouchRejection("#spectator")},UI.hideSpectator=function(){un&&($("#spectator").remove(),un=!1)},UI.addPowerup=function(On,Ln){null!=ln&&clearTimeout(ln);var kn="<div class=\"powerup\" id=\"powerup-"+On+"\"><div class=\"percent "+(1==On?"shield":"rampage")+"\" id=\"powerup-"+On+"-percent\" style=\"transition: width "+Ln+"ms linear;\"></div><div class=\"name\">"+Tn[On]+"</div></div>";$("#powerups").html(kn),$("#powerup-"+On+"-percent").width(),$("#powerup-"+On+"-percent").css({width:"7%"}),ln=setTimeout(function(){$("#powerup-"+On).remove()},Ln)},UI.resetPowerups=function(){$("#powerups").html("")},UI.changeMinimapTeam=function(On,Ln){if(null!=Gt[On]&&null!=Gt[On].sprite){var kn=1==Ln?"minimapBlue":"minimapMob";Gt[On].sprite.texture=Textures.getNamed(kn)}},UI.getMinimapMobs=function(){return Gt},UI.scoreboardUpdate=function(On,Ln,kn){for(var Nn in Gt)game.graphics.layers.ui1.removeChild(Gt[Nn].sprite),game.graphics.layers.ui2.removeChild(Gt[Nn].sprite),game.graphics.layers.ui3.removeChild(Gt[Nn].sprite),Gt[Nn].sprite.destroy(),delete Gt[Nn];for(var Yn=0,Hn="",jn={},Wn=!1,zn=0,Vn={},qn="",Kn="",Zn="",Qn=0,Fn,Bn,Un,Xn,Gn;Qn<Ln.length;Qn++)null!=(Fn=Players.get(Ln[Qn].id))&&(Vn=Tools.decodeMinimapCoords(Ln[Qn].x,Ln[Qn].y),Fn.scorePlace=Qn+1,Fn.lowResPos.x=Vn.x,Fn.lowResPos.y=Vn.y,Fn.removedFromMap=0==Ln[Qn].x&&0==Ln[Qn].y,Ln[Qn].id==game.myID?zn=Qn+1:0==Ln[Qn].x&&0==Ln[Qn].y||(jn[Fn.id]=!0,null==Gt[Ln[Qn].id]?(Zn="minimapMob",2==game.gameType&&1==Fn.team&&(Zn="minimapBlue"),0<Ln.length&&Fn.id==Ln[0].id&&(Zn="minimap1"),1<Ln.length&&Fn.id==Ln[1].id&&(Zn="minimap2"),2<Ln.length&&Fn.id==Ln[2].id&&(Zn="minimap3"),SWAM.targetedPlayer==Fn.id&&(Zn="minimapTarget"),Gt[Ln[Qn].id]={sprite:Textures.init(Zn),x:Vn.x,y:Vn.y}):(Gt[Ln[Qn].id].x=Vn.x,Gt[Ln[Qn].id].y=Vn.y),En(Gt[Ln[Qn].id])));for(var Jn in Gt)null==jn[Jn]&&(game.graphics.layers.ui1.removeChild(Gt[Jn].sprite),Gt[Jn].sprite.destroy(),delete Gt[Jn]);if(0!=zn){for(kn=kn?Tools.clamp(kn,1,On.length):On.length,Qn=0;Qn<kn&&(null==(Fn=Players.get(On[Qn].id))||(Yn++,Bn=1==Yn?"<span class=\"badge scoreboard gold\"></span>":2==Yn?"<span class=\"badge scoreboard silver\"></span>":3==Yn?"<span class=\"badge scoreboard bronze\"></span>":Yn+".",Un=Fn.me()?" sel":"",Xn=On[Qn].score,Gn=On[Qn].level,zn>kn&&Yn==kn-1&&(Hn+="<div class=\"line dottedline\">&middot; &middot; &middot;</div>",!0,Fn=Players.get(game.myID),Bn=zn+".",Xn=game.myScore,Gn=game.myLevel,Un=" sel",Wn=!0),qn="",2==game.gameType&&(qn=" team-"+Fn.team),Kn="",4==(Bn+"").length&&(Kn=" bigger"),Hn+="<div class=\"line"+Un+"\" player-id=\""+Fn.id+"\"><span class=\"place"+Kn+"\">"+Bn+"</span><span class=\"flag small flag-"+Fn.flag+"\"></span><span class=\"nick"+qn+"\">"+(Fn.removedFromMap?UI.escapeHTML(Fn.name).strike():UI.escapeHTML(Fn.name))+"</span>"+(0==Gn?"":"<span class=\"holder\">&nbsp;<span class=\"rank\">"+Gn+"</span></span>")+"<span class=\"score\">"+Sn(Xn)+"</span></div>",!Wn));Qn++);$("#scoreboard").html(Hn),$("#scoreboard div").click(SWAM.scoreboard_click_handler)}};var Sn=function(On){var Ln="";On+="";for(var kn=0;kn<On.length;kn++)Ln+="<span>"+On[kn]+"</span>";return Ln};UI.toggleChatBox=function(On){if(!config.mobile)if(jt){if(jt=!1,On){var Ln=$("#chatinput").val();""!==Ln&&""!==Ln.trim()&&(UI.parseCommand(Ln.trim())||Network.sendChat(Ln)),wn()}UI.hide("#chatinput"),$("#chatinput").val(""),$("#chatinput").blur()}else Kt&&UI.maximizeChat(),Input.clearKeys(!0),jt=!0,UI.show("#chatinput"),$("#chatinput").focus()},UI.shortcutChat=function(On){jt||($("#chatinput").val(On),UI.toggleChatBox())};var wn=function(){zt||(zt=!0,$("#chat-0").length&&$("#chat-0").remove())};UI.parseCommand=function(On){if("/"!==On[0])return!1;var Ln=On.split(" "),kn=Ln[0].substr(1).toLowerCase();if(0==kn.length)return!1;if("s"===kn){var Nn=On.indexOf(" "),Fn=On.substr(Nn+1);0<Fn.length&&Network.sendSay(Fn)}else if("t"===kn){Nn=On.indexOf(" ");var Bn=On.substr(Nn+1);0<Bn.length&&Network.sendTeam(Bn)}else if("ignore"===kn)null==(Un=Players.getByName(Mn(Ln[1])))?UI.addChatMessage("Unknown player"):UI.chatIgnore(Un.id);else if("unignore"===kn)null==(Un=Players.getByName(Mn(Ln[1])))?UI.addChatMessage("Unknown player"):UI.chatUnignore(Un);else if("votemute"===kn)null==(Un=Players.getByName(Mn(Ln[1])))?UI.addChatMessage("Unknown player"):UI.chatVotemute(Un);else if("w"===kn)3<=Ln.length?UI.chatWhisper(Ln[1],On.substr(4+Ln[1].length)):UI.addChatMessage("Usage: /w player message");else if("spectate"===kn){var Un;null==(Un=Players.getByName(Mn(Ln[1])))?UI.addChatMessage("Unknown player"):Network.sendCommand("spectate",Un.id+"")}else"flag"===kn||"flags"===kn?2==Ln.length?Network.sendCommand("flag",On.substr(kn.length+2)):UI.addChatMessage("Type /flag XX where XX is the 2-letter ISO code of a country",!0):"emotes"===kn?UI.addChatMessage("Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage",!0):"help"===kn?UI.toggleHelp():"debug"===kn||(UI.isEmote(kn)?Network.sendSay(":"+kn+":"):Network.sendCommand(kn,On.substr(kn.length+2)));return!0},UI.addChatLine=function(On,Ln,kn,Nn=!0){if(!Yt[On.id]){if(Nn&&(Ln=UI.escapeHTML(Ln)),Wt++,0==kn){var Fn="";2==game.gameType&&(Fn="style = 'color: "+(1==On.team?"#4076E2":"#EA4242")+";' ");var Bn="<div id=\"chat-"+Wt+"\" class=\"line\"><span class=\"playersel\" data-playerid=\""+On.id+"\"><span class=\"flag small flag-"+On.flag+"\"></span><span class=\"nick\" "+Fn+" >"+UI.escapeHTML(On.name)+"</span></span><span class=\"text\">"+Ln+"</span></div>"}else if(1==kn||2==kn){var Un=1==kn?"TO":"FROM";2==kn&&(pn=An(On.name)),Bn="<div id=\"chat-"+Wt+"\" class=\"line\"><span class=\"tag whisper\">"+Un+"</span><span class=\"playersel\" data-playerid=\""+On.id+"\"><span class=\"nick green\">"+UI.escapeHTML(On.name)+"</span></span><span class=\"text green\">"+Ln+"</span></div>",Vt=-1}else Bn="<div id=\"chat-"+Wt+"\" class=\"line\"><span class=\"tag team\">TEAM</span><span class=\"playersel\" data-playerid=\""+On.id+"\"><span class=\"nick blue\">"+UI.escapeHTML(On.name)+"</span></span><span class=\"text blue\">"+Ln+"</span></div>",Vt=-1;var Xn="#chat-"+(Wt-config.maxChatLines);if($(Xn).length&&$(Xn).remove(),$("#chatlines").append(Bn),Kt)Zt++,$("#chatunreadlines").html(Zt),1==Zt&&UI.show("#chatunreadlines",!0);else{var Gn=$("#chatbox");1!=kn&&2!=kn&&On.id!=game.myID&&Gn.is(":hover")||(Gn.perfectScrollbar("update"),Gn.scrollTop(Gn[0].scrollHeight))}}},UI.addChatMessage=function(On,Ln){qt=0,Vt=-1;var kn="<div id=\"chat-"+ ++Wt+"\" class=\"line\">"+(Ln?"":"<span class=\"nick\">\u26A0</span>")+"<span class=\"text\">"+On+"</span></div>",Nn="#chat-"+(Wt-config.maxChatLines);$(Nn).length&&$(Nn).remove(),$("#chatlines").append(kn);var Fn=$("#chatbox");Fn.perfectScrollbar("update"),Fn.scrollTop(Fn[0].scrollHeight)},UI.showChatLevel=function(On){var Ln=null;2==On?Ln="Type /flag XX where XX is the 2-letter ISO code of a country":3==On?Ln="Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage":4==On&&(Ln="Flag Pack #1: communist confederate imperial rainbow jolly"),null!=Ln&&UI.addChatMessage(Ln,!0)},UI.updateStats=function(On){var Ln=On.playerstotal,kn="";kn+="<div class=\"item\"><span class=\"icon-container\"><div class=\"icon players\"></div></span><span class=\"greyed\">"+On.playersgame+"&nbsp;/&nbsp;</span>"+Ln+"<span class=\"icon-container padded\"><div class=\"icon ping\"></div></span>"+On.ping+"<span class=\"millis\">ms</span></div>",$("#gameinfo").html(kn),game.ping=On.ping},UI.sayLine=function(On){Players.say(On)},UI.escapeHTML=function(On){return(""+On).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/`/g,"&#x60;")};var Cn=function(){var On=window.innerWidth,Ln=window.innerHeight;On==game.screenX&&Ln==game.screenY||(clearTimeout(Ht),Ht=setTimeout(function(){Graphics.resizeRenderer(On,Ln)},250))};UI.controlKey=function(On,Ln,kn){if(game.state!=Network.STATE.PLAYING)return!0;if(kn)if(13!=On){if(27==On)return jt&&UI.toggleChatBox(!1),void UI.closeAllPanels();191==On?UI.shortcutChat("/"):75==On?Input.toggleKeybinds():"SHOWSCORE"===Ln?UI.toggleScore():"MAINMENU"===Ln?UI.toggleMainMenu():"SHOWGAMES"===Ln?Games.toggleGames():"FULLSCREEN"===Ln?(Graphics.toggleFullscreen(),Input.clearKeys()):"MINIMIZECHAT"===Ln?UI.minimizeChat():"MAXIMIZECHAT"===Ln?UI.maximizeChat():"SAY"===Ln?UI.shortcutChat("/s "):"TEAM"===Ln?UI.shortcutChat("/t "):"REPLY"===Ln?null!=pn&&UI.shortcutChat("/w "+pn+" "):"SPECTATE"===Ln?Network.spectateForce():"UPGRADE1"===Ln?UI.selectUpgrade(1):"UPGRADE2"===Ln?UI.selectUpgrade(2):"UPGRADE3"===Ln?UI.selectUpgrade(3):"UPGRADE4"===Ln?UI.selectUpgrade(4):"SOUND"===Ln?Sound.toggle():"HELP"===Ln?UI.toggleHelp():"INVITE"===Ln?UI.toggleInvite():"MOUSEMODE"===Ln?Input.toggleMouse():void 0}else UI.toggleChatBox(!0)},UI.chatBoxOpen=function(){return jt},UI.setupMinimap=function(){game.graphics.gui.minimap=Textures.init("minimap"),game.graphics.gui.minimap_box=Textures.init("minimapBox"),UI.resizeMinimap(),UI.visibilityMinimap(!1)},UI.visibilityMinimap=function(On){game.graphics.gui.minimap.visible=On,game.graphics.gui.minimap_box.visible=On},UI.resizeMinimap=function(){for(var On in game.graphics.gui.minimap.scale.set(config.minimapSize/512),game.graphics.gui.minimap.position.set(game.screenX-config.minimapPaddingX,game.screenY-config.minimapPaddingY),game.graphics.gui.minimap_box.scale.set(.03+2*config.minimapSize*(game.screenX/game.scale/32768)/64,.03+config.minimapSize*(game.screenY/game.scale/16384)/64),Gt)En(Gt[On]);Games.update(!0)},UI.setupHUD=function(){game.graphics.gui.hudHealth_shadow=Textures.init("hudHealth_shadow"),game.graphics.gui.hudHealth=Textures.init("hudHealth"),game.graphics.gui.hudHealth_mask=Textures.init("hudHealth_mask"),game.graphics.gui.hudHealth_mask.blendMode=PIXI.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudHealth.rotation=-1.5,game.graphics.gui.hudHealth.position.set(330,174),game.graphics.gui.hudHealth_mask.position.set(330,174),game.graphics.gui.hudEnergy_shadow=Textures.init("hudEnergy_shadow"),game.graphics.gui.hudEnergy=Textures.init("hudEnergy"),game.graphics.gui.hudEnergy_mask=Textures.init("hudEnergy_mask"),game.graphics.gui.hudEnergy_mask.blendMode=PIXI.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudEnergy.position.set(-250,174),game.graphics.gui.hudEnergy_mask.position.set(-250,174),UI.resizeHUD(),UI.visibilityHUD(!1)},UI.visibilityHUD=function(On){game.graphics.gui.hudHealth_shadow.visible=On,game.graphics.gui.hudHealth.visible=On,game.graphics.gui.hudEnergy_shadow.visible=On,game.graphics.gui.hudEnergy.visible=On},UI.resizeHUD=function(){var On=.5*game.scale,Ln=game.halfScreenX-30*game.scale,kn=game.halfScreenX+30*game.scale;game.graphics.gui.hudHealth_shadow.scale.set(On),game.graphics.gui.hudEnergy_shadow.scale.set(On),game.graphics.gui.hudHealth_shadow.position.set(Ln,game.halfScreenY),game.graphics.gui.hudEnergy_shadow.position.set(kn,game.halfScreenY),game.graphics.gui.hudSpriteHealth.scale.set(On),game.graphics.gui.hudSpriteHealth.position.set(Ln,game.halfScreenY),game.graphics.gui.hudSpriteEnergy.scale.set(On),game.graphics.gui.hudSpriteEnergy.position.set(kn,game.halfScreenY)},UI.selectAircraft=function(On){Network.sendCommand("respawn",On+"")},UI.aircraftSelected=function(On){On=parseInt(On);for(var Ln=1;5>=Ln;Ln++)Ln==On?$("#selectaircraft-"+Ln).addClass("sel"):$("#selectaircraft-"+Ln).removeClass("sel")},UI.killed=function(On){var Ln=null==On.level?"":"<span class=\"level\">"+On.level+"</span>";(1500<game.time-bn||6<=_n.length)&&(_n=[]),bn=game.time,_n.push([On.flag,On.name,Ln]);for(var kn="",Nn="",Fn=0;Fn<_n.length;Fn++)Nn=_n[Fn][1],1!=_n.length&&10<Nn.length&&(Nn=Nn.substr(0,10)+"..."),kn+="<span class=\"player\"><span class=\"flag big flag-"+_n[Fn][0]+"\"></span>"+UI.escapeHTML(Nn)+_n[Fn][2]+"</span>";mn={type:"default",duration:3e3,msg:"You have destroyed"+kn}},UI.killedBy=function(On){var Ln=null==On.level?"":"<span class=\"level\">"+On.level+"</span>";mn={type:"destroyed",duration:3e3,msg:"Destroyed by<span class=\"playerbig\"><span class=\"flag big flag-"+On.flag+"\"></span>"+UI.escapeHTML(On.name)+Ln+"</span>"}},UI.errorHandler=function(On){switch(On.error){case 1:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Packet flooding detected",2e4),Network.receivedError(On.error);break;case 2:UI.showMessage("alert","<span class=\"info\">BANNED</span>Packet flooding detected",2e4),Network.receivedError(On.error);break;case 3:UI.showMessage("alert","<span class=\"info\">BANNED</span>You have been globally banned",2e4),Network.receivedError(On.error);break;case 4:Network.receivedError(On.error),Games.redirRoot();break;case 5:UI.showMessage("alert","<span class=\"info\">RESPAWN</span>Full health and 2 seconds of inactivity required",3e3);break;case 6:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>AFK for more than 10 minutes<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",72e5),Network.receivedError(On.error);break;case 7:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>You have been kicked out",2e4),Network.receivedError(On.error);break;case 8:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Invalid login data",2e4),Network.receivedError(On.error);break;case 9:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Incorrect protocol level<br>Please clear your browser cache and refresh",2e4),Network.receivedError(On.error);break;case 10:UI.showMessage("alert","<span class=\"info\">BANNED</span>Account banned",2e4),Network.receivedError(On.error);break;case 11:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Account already logged in<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",2e4),Network.receivedError(On.error);break;case 12:UI.showMessage("alert","<span class=\"info\">RESPAWN</span>Cannot respawn or change aircraft in a Battle Royale game",3e3);break;case 13:UI.showMessage("alert","<span class=\"info\">SPECTATE</span>Full health and 2 seconds of inactivity required",3e3);break;case 20:UI.showMessage("information","<span class=\"info\">UPGRADE</span>Not enough upgrade points",3e3);break;case 30:UI.addChatMessage("Chat throttled to prevent spamming");break;case 31:UI.showMessage("alert","<span class=\"info\">THROTTLED</span>Flag change too fast");break;case 100:UI.addChatMessage("Unknown command");}},UI.showCommandReply=function(On){if(0==On.type)UI.addChatMessage(UI.escapeHTML(On.text));else{var Ln=JSON.stringify(JSON.parse(On.text),null,"    "),kn="<div class=\"close\" onclick=\"$(this).parent().remove()\"></div><div class=\"text\"><pre>"+UI.escapeHTML(Ln)+"</pre></div>";$("body").append("<div id=\"debugpopup\" oncontextmenu=\"event.stopPropagation()\">"+kn+"</div>")}},UI.updateHUD=function(On,Ln,kn){On=Tools.clamp(On,0,1),Ln=Tools.clamp(Ln,0,1),game.graphics.gui.hudHealth.rotation=-1.1*(1-On),game.graphics.gui.hudEnergy.rotation=Math.PI+1.1*(1-Ln),game.graphics.gui.hudHealth.tint=.5<On?Tools.colorLerp(13487404,2591785,2*(On-.5)):Tools.colorLerp(12201261,13487404,2*On);var Nn=3374821;kn&&(Nn=Ln<config.ships[kn.type].energyLight?2841755:3374821),game.graphics.gui.hudEnergy.tint=Nn},UI.minimizeChat=function(On){Kt||(jt&&UI.toggleChatBox(),Kt=!0,Zt=0,UI.hide("#chatbox"),UI.hide("#chatunreadlines"),UI.show("#maximizechat"),On&&On.stopPropagation())},UI.maximizeChat=function(){if(Kt){Kt=!1,UI.hide("#maximizechat"),UI.hide("#chatunreadlines"),UI.show("#chatbox");var On=$("#chatbox");On.scrollTop(On[0].scrollHeight)}},UI.closeScore=function(){Qt&&(UI.hidePanel("#scoredetailed"),Qt=!1,clearInterval(Jt))},UI.openScore=function(){Qt||(UI.closeAllPanels("score"),UI.showPanel("#scoredetailed"),Qt=!0,Network.getScores(),clearInterval(Jt),Jt=setInterval(Network.getScores,5e3))},UI.toggleScore=function(){Qt?UI.closeScore():UI.openScore()},UI.openLogin=function(){dn||(UI.showPanel("#loginselector"),dn=!0,Games.closeDropdowns())},UI.closeLogin=function(){dn&&(UI.hidePanel("#loginselector"),dn=!1)},UI.showPanel=function(On){var Ln=.9,kn=1;config.phone&&(Ln*=.7,kn*=.7),$(On).css({display:"block",opacity:"0",transform:"scale("+Ln+")","pointer-events":"auto"}),$(On).width(),$(On).css({opacity:"1",transform:"scale("+kn+")",transition:"all 0.75s cubic-bezier(0.23, 1, 0.32, 1)"}),"#custom-msg"!=On&&Sound.UIClick()},UI.hidePanel=function(On,Ln,kn){if("#custom-msg"!=On||$("#custom-msg").length){var Nn=.9;config.phone&&(Nn*=.7),$(On).css({opacity:"0",transform:"scale("+Nn+")","pointer-events":"none"}),Sound.UIClick(),setTimeout(function(Fn){if("#mainmenu"===Fn?!nn:"#scoredetailed"===Fn?!Qt:"#howtoplay"===Fn?!tn:"#invitefriends"===Fn?!sn:"#loginselector"===Fn?!dn:!Ln){if(kn)return void $(Fn).remove();$(Fn).css({display:"none",transform:"none",transition:"none"})}},800,On)}},UI.openInvite=function(){sn||(UI.closeAllPanels("invite"),game.inviteLink="https://airma.sh/#"+game.playRegion+"-"+game.playRoom,$("#invite-link").html(game.inviteLink),$("#invite-link").attr("href",game.inviteLink),UI.showPanel("#invitefriends"),sn=!0)},UI.closeInvite=function(){sn&&(UI.hidePanel("#invitefriends"),sn=!1)},UI.toggleInvite=function(){sn?UI.closeInvite():UI.openInvite()},UI.closeMainMenu=function(){nn&&(UI.hidePanel("#mainmenu"),nn=!1)},UI.updateMainMenuSettings=function(){config.settings.hidpi?$("#mainmenu-hidpi-tick").addClass("ticked"):$("#mainmenu-hidpi-tick").removeClass("ticked")},UI.openMainMenu=function(){nn||(UI.closeAllPanels("mainmenu"),UI.updateMainMenuSettings(),UI.showPanel("#mainmenu"),nn=!0)},UI.toggleMainMenu=function(){nn?UI.closeMainMenu():UI.openMainMenu()},UI.closeAllPanels=function(On){"mainmenu"!==On&&UI.closeMainMenu(),"score"!==On&&UI.closeScore(),"help"!==On&&UI.hideHelp(),"games"!==On&&Games.closeGames(),"invite"!==On&&UI.closeInvite(),"login"!==On&&UI.closeLogin(),"keybinds"!==On&&Input.closeKeybinds(),$("#custom-msg").length&&UI.hidePanel("#custom-msg",!1,!0)};var Pn=function(On){return 1e3>(On=Math.round(On))?On:1e5>On?(On/1e3).toFixed(1)+" K":1e6>On?Math.round(On/1e3)+" K":(On/1e6).toFixed(1)+" M"};UI.updateScore=function(On){if(Qt){var Ln=On.scores,kn=["gold","silver","bronze"];Ln.sort(function(Qn,Jn){return Jn.score-Qn.score});var Nn=[["name","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["damage","Damage"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]];On.c==Network.SERVERPACKET.SCORE_DETAILED_BTR?Nn=[["name","&nbsp;"],["wins","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]]:On.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(Nn=[["name","&nbsp;"],["captures","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]]);for(var Fn="",Bn=0;Bn<Nn.length;Bn++)Fn+="<div class=\""+Nn[Bn][0]+"\">"+Nn[Bn][1]+"</div>";for(var Yn="",Hn="",jn=-1,Wn=-1,zn=0,Un,Xn,Gn;zn<Ln.length;zn++)null!=(Un=Players.get(Ln[zn].id))&&(Xn=2>=zn?"&nbsp;<div class=\"badge detail "+kn[zn]+"\"></div>":zn+1+".",Gn=Un.me()?" sel":"",Yn=On.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" team-"+Un.team:On.c!=Network.SERVERPACKET.SCORE_DETAILED_BTR||Ln[zn].alive?"":" inactive",Hn+="<div class=\"item"+Gn+"\" player-id=\""+Un.id+"\"><div class=\"name\"><div class=\"position\">",Hn+=Xn+"</div><div class=\"flag small flag-"+Un.flag+"\"></div>",Hn+="<div class=\"player"+Yn+"\">"+(Un.removedFromMap?UI.escapeHTML(Un.name).strike():UI.escapeHTML(Un.name))+"</div></div>",On.c==Network.SERVERPACKET.SCORE_DETAILED_BTR&&(0==Ln[zn].wins?Hn+="<div class=\"wins\">&nbsp;</div>":Hn+="<div class=\"wins\">"+Ln[zn].wins+"<div class=\"wins-container\">&nbsp;<div class=\"wins-icon\"></div></div></div>"),On.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(0==Ln[zn].captures?Hn+="<div class=\"captures\">&nbsp;</div>":Hn+="<div class=\"captures\">"+Ln[zn].captures+"<div class=\"captures-container\">&nbsp;<div class=\"captures-icon\"></div></div></div>"),Hn+="<div class=\"kills\">"+Ln[zn].kills+"</div>",Hn+="<div class=\"deaths\">"+Ln[zn].deaths+"</div>",On.c==Network.SERVERPACKET.SCORE_DETAILED&&(Hn+="<div class=\"damage\">"+Pn(Ln[zn].damage)+"</div>"),Hn+="<div class=\"bounty\">"+Ln[zn].score+"</div>",Hn+="<div class=\"rank\">"+(0==Ln[zn].level?"&nbsp;":Ln[zn].level)+"</div>",Hn+="<div class=\"ping\">"+Ln[zn].ping+"<span class=\"ms\">ms</span></div>",Hn+="</div>",On.c==Network.SERVERPACKET.SCORE_DETAILED?Ln[zn].damage>jn&&(jn=Ln[zn].damage,Wn=Un):On.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?Ln[zn].captures>jn&&(jn=Ln[zn].captures,Wn=Un):Ln[zn].kills>jn&&(jn=Ln[zn].kills,Wn=Un));var Vn="",qn="";if(1<Ln.length&&(Vn="&bull;&nbsp;&nbsp;"+Ln.length+" players",0<jn)){if(On.c==Network.SERVERPACKET.SCORE_DETAILED)var Kn=Pn(jn),Zn=" damage";else Kn=jn+"",Zn=On.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" capture":" kill",1<jn&&(Zn+="s");qn="<div class=\"mvpbadge\">MVP</div><div class=\"flag flag-"+Wn.flag+"\"></div><div class=\"name\">"+UI.escapeHTML(Wn.name)+"</div><div class=\"damage\">&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+Kn+Zn+"</div>"}$("#scoreplayers").html(Vn),$("#scoretable").html(Fn),$("#scorecontainer").html(Hn),$("#scoremvp").html(qn)}},UI.popMenu=function(On,Ln){if(game.state==Network.STATE.LOGIN)return Games.closeDropdowns(),void UI.closeLogin();Ln||game.state!=Network.STATE.PLAYING||UI.closeAllPanels();var kn=$(On.target).parent().data("playerid");if(null==kn&&(kn=$(On.target).data("playerid")),null!=kn&&kn!=game.myID){var Nn=Players.get(kn);if(null==Nn)return!0;var Fn={left:"20px",top:$(On.target).parent()[0].getBoundingClientRect().top-166+"px"};$t||(Fn.display="block",$t=!0);var Bn=null==Yt[Nn.id]?"Ignore":"Unignore",Un="<div class=\"header\">"+UI.escapeHTML(Nn.name)+"</div><div class=\"item\" onclick=\"UI.contextWhisper()\">Whisper</div><div class=\"item\" onclick=\"UI.context"+Bn+"()\">"+Bn+"</div><div class=\"item\" onclick=\"UI.contextVotemute()\">Vote mute</div><div class=\"arrow\"></div>";return $("#contextmenu").html(Un),$("#contextmenu").css(Fn),en=Nn.id,On.stopPropagation(),!1}UI.closeMenu()};var An=function(On){return(On+"").replace(/&/g,"&a;").replace(/ /g,"&s;")},Mn=function(On){return(On+"").replace(/&s;/g," ").replace(/&a;/g,"&")};UI.chatWhisper=function(On,Ln){On=Mn(On);var kn=Players.getByName(On);null==kn?UI.addChatMessage("Unknown player"):Network.sendWhisper(kn.id,Ln)},UI.chatIgnore=function(On){var Ln=Players.get(On);null!=Ln&&On!=game.myID&&null==Yt[Ln.id]&&(Yt[Ln.id]=!0,UI.addChatMessage("Ignoring player "+UI.escapeHTML(Ln.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;To unignore type /unignore "+UI.escapeHTML(An(Ln.name)),!0))},UI.chatUnignore=function(On){Yt[On.id]&&(delete Yt[On.id],UI.addChatMessage("Removed player "+UI.escapeHTML(On.name)+" from ignore list",!0))},UI.getIgnored=function(){return Yt},UI.chatVotemute=function(On){if(On.id!=game.myID){Network.voteMute(On.id);var Ln=Math.floor(Math.sqrt(Players.count()[1]))+1;UI.addChatMessage("Voted to mute "+UI.escapeHTML(On.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+Ln+" total votes are required",!0)}},UI.chatVotemutePass=function(On){UI.addChatMessage("The vote to mute "+UI.escapeHTML(On.name)+" has passed",!0)},UI.chatMuted=function(){UI.addChatMessage("You have been muted")},UI.contextWhisper=function(){if(null!=en){var On=Players.get(en);null!=On&&en!=game.myID&&UI.shortcutChat("/w "+An(On.name)+" ")}},UI.contextIgnore=function(){null!=en&&en!=game.myID&&UI.chatIgnore(en)},UI.contextUnignore=function(){if(null!=en){var On=Players.get(en);null!=On&&en!=game.myID&&UI.chatUnignore(On)}},UI.contextVotemute=function(){if(null!=en){var On=Players.get(en);null!=On&&en!=game.myID&&UI.chatVotemute(On)}},UI.closeMenu=function(){$t&&(UI.hide("#contextmenu"),$t=!1)},UI.nameEntered=function(){var On=$("#playername").val().trim();0<On.length?(game.myOriginalName=On,Games.start(On,!0)):Games.highlightInput("#playername")},UI.selectUpgrade=function(On){Network.sendCommand("upgrade",On+"")};var Rn=function(){for(var On=["","speed","defense","energy","missile"],Ln=1;5>Ln;Ln++)Ln-1,5>yn[On[Ln]]&&0<gn.upgrades?$("#selectupgrade-"+Ln).addClass("lighted"):$("#selectupgrade-"+Ln).removeClass("lighted")};UI.updateUpgrades=function(On,Ln,kn){for(var Fn=["","speed","defense","energy","missile"],Bn=1,Nn;5>Bn;Bn++)Nn=Bn-1,"",null!=yn[Fn[Bn]]&&yn[Fn[Bn]]==On[Nn]||(yn[Fn[Bn]]=On[Nn],$("#selectupgrade-"+Bn+"-level").html(On[Nn]),an&&on-100==Bn&&UI.popTooltip(null,100+Bn));if(null!=kn){if(0!=kn){var Xn="+"+Math.round(100*(config.upgrades[Fn[kn]].factor[yn[Fn[kn]]]-1))+"% "+["","Speed","Defense","Energy Regen","Missile Speed"][kn];UI.showMessage("information","<span class=\"info\">UPGRADE</span>"+Xn,3e3),Sound.playerUpgrade()}gn.upgrades=Ln,$("#score-upgrades").html(Ln)}Rn()},UI.resetUpgrades=function(){UI.updateUpgrades([0,0,0,0])},UI.popBigMsg=function(On){if(1==On)var Ln="<div id=\"big-message\" onclick=\"UI.closeBigMsg()\"><div class=\"msg\">Mobile mode</div><div class=\"small\">Mobile mode has touch controls and requires latest phone/tablet hardware.</div><div class=\"small nopadtop\">For the full experience please play on a PC with a physical keyboard.</div><div class=\"greyed\">Tap anywhere to close</div></div>";else Ln="<div id=\"big-message\"><div class=\"msg\">WebGL required</div><div class=\"small\">This game requires a WebGL enabled browser in order to run.<br>Please allow WebGL for this domain to continue.</div>";$("body").append(Ln)},UI.closeBigMsg=function(){$("#big-message").remove()},UI.showHelp=function(On){tn||(UI.closeAllPanels("help"),!0===On?$("#howtoplay").addClass("hide"):$("#howtoplay").removeClass("hide"),UI.showPanel("#howtoplay"),tn=!0)},UI.hideHelp=function(){tn&&(UI.hidePanel("#howtoplay"),tn=!1)},UI.toggleHelp=function(){tn?UI.hideHelp():UI.showHelp()},UI.updateSound=function(On){config.settings.sound?($("#settings-sound").addClass("soundon"),$("#settings-sound").removeClass("soundoff"),$("#mainmenu-sound-icon").addClass("soundon"),$("#mainmenu-sound-icon").removeClass("soundoff"),$("#mainmenu-sound-text").html("Disable Sound")):($("#settings-sound").addClass("soundoff"),$("#settings-sound").removeClass("soundon"),$("#mainmenu-sound-icon").addClass("soundoff"),$("#mainmenu-sound-icon").removeClass("soundon"),$("#mainmenu-sound-text").html("Enable Sound")),On&&UI.showMessage("alert","<span class=\"info\">SOUND</span>"+(config.settings.sound?"Enabled":"Disabled"),3e3)},UI.gameStart=function(On,Ln){Ln&&($("#login-ui").remove(),UI.show("#logosmall"),UI.show("#menu",!0),config.mobile||UI.show("#chatbox"),UI.show("#roomnamecontainer"),UI.show("#scoreboard"),UI.show("#scorebig"),UI.show("#settings"),UI.show("#sidebar"),config.mobile&&In(),config.settings.helpshown||(UI.showHelp(!0),config.settings.helpshown=!0,Tools.setSettings({helpshown:!0}))),UI.hide("#gamespecific"),$("#gameinfo").html("&nbsp;"),$("#gameinfo").addClass("ingame"),yn={},UI.resetUpgrades(),UI.hideSpectator(),UI.resetPowerups(),$("#open-menu").html("Connecting..."),game.myName=On,Network.setup()};var In=function(){Dn(),Graphics.toggleFullscreen(),Input.setupTouch()},Dn=function(){$("#howtoplay").addClass("mobile"),$("#howtoplay").html("<div class=\"header\">HOW TO PLAY</div><div class=\"mobile-graphic\"></div><div class=\"commands\">For the best game experience play on a PC</div>")};UI.reconnection=function(){Wt=0,Vt=-1,gn={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},mn=!1,yn={},Yt={},UI.resetUpgrades(),UI.resetPowerups(),UI.hideSpectator(),UI.wipeAllMinimapMobs(),UI.wipeAllMessages(),Games.wipe(),$("#gameinfo").html("&nbsp;"),$("#scoreboard").html(""),$("#chatlines").html(""),$("#score-score").html("&nbsp;"),$("#score-upgrades").html("&nbsp;"),$("#score-rank").html("-"),$("#roomname").html("&nbsp;"),$("#open-menu").html("Switching Game...")},UI.loggedIn=function(){$("#roomname").html(game.roomName),$("#scoreheader").html(game.roomName+"&nbsp;&nbsp;"),$("#open-menu").html("<span class=\"arrowdown\"></span>"+game.roomName+"&nbsp;&nbsp;<span class=\"region\">&bull;&nbsp;&nbsp;"+game.regionName+"</span>"),UI.visibilityHUD(!0),UI.visibilityMinimap(!0),UI.updateHUD(1,1)},UI.popTooltip=function(On,Ln){if(null==Ln)var kn=On.data.t,Nn=On.currentTarget.getBoundingClientRect();else kn=Ln;var Fn="";if(100>kn){var Bn=xn[kn],Un=["","Agility","Defense","Regen","Damage"];Fn+="<div class=\"header\">"+Bn[0]+"</div>";for(var Xn=1;4>=Xn;Xn++)Fn+="<div class=\"item\"><div class=\"name\">"+Un[Xn]+"</div><div class=\"val\">&nbsp;<div class=\"bar\"><div class=\"progress\" style=\"width: "+Bn[Xn]+"%\"></div></div></div></div>";Fn+="<div class=\"item\"><div class=\"special\">"+Bn[5]+"</div><div class=\"desc\">"+Bn[6]+"</div></div>",Fn+="<div class=\"item\"><div class=\"clickto\">Click to respawn</div></div>"}else{var Gn=["","speed","defense","energy","missile"],Yn=kn-100,Hn=yn[Gn[Yn]],jn="+"+Math.round(100*(config.upgrades[Gn[Yn]].factor[yn[Gn[Yn]]]-1))+"%";(Fn+="<div class=\"header\">"+xn[kn][0]+"</div>",Fn+="<div class=\"item\"><div class=\"level\">"+Hn+" / "+(config.upgrades[Gn[Yn]].factor.length-1)+"</div>",0<Hn&&(Fn+="<div class=\"percent\">"+jn+"</div></div>"),Hn<config.upgrades[Gn[Yn]].factor.length-1)?(Fn+="<div class=\"item smaller\"><div class=\"requires\">Requires 1 upgrade point</div></div>",Fn+="<div class=\"item smaller\"><div class=\"clickto\">Click to upgrade to "+(jn="+"+Math.round(100*(config.upgrades[Gn[Yn]].factor[yn[Gn[Yn]]+1]-1))+"%")+"</div></div>"):Fn+="<div class=\"item smaller\"><div class=\"clickto\">Max upgrade reached</div></div>"}Fn+="<div class=\"arrow\"></div>",null==Ln&&$("#tooltip").css({left:Math.round(Nn.left+60)+"px",top:Math.round(Nn.top-10)+"px"}),$("#tooltip").html(Fn),on=kn,null!=rn&&clearTimeout(rn),an||(an=!0,UI.show("#tooltip"))},UI.closeTooltip=function(){an&&(null!=rn&&clearTimeout(rn),rn=setTimeout(function(){an&&(UI.hide("#tooltip"),$("#tooltip").html(""),an=!1,rn=null)},250))},UI.startDragChat=function(On){cn.x=On.originalEvent.pageX,cn.y=On.originalEvent.pageY,cn.width=$("#chatbox").width()+16,cn.height=$("#chatbox").height()+16,$("#chatbox").addClass("hovered"),$(window).on("mousemove",UI.dragChat),$(window).on("mouseup",UI.endDragChat)},UI.dragChat=function(On){var Ln=On.originalEvent.pageX,kn=On.originalEvent.pageY;if(0!=Ln&&0!=kn){100>game.screenY-kn&&(kn=game.screenY-100);var Nn=Ln-cn.x,Fn=kn-cn.y;$("#chatbox").css({width:cn.width+Nn+"px",height:cn.height-Fn+"px"}),$("#minimizechatcontainer").css({width:cn.width+Nn+"px",bottom:cn.height-Fn+"px"}),$("#chatinput").css({width:cn.width+Nn-12+"px",bottom:cn.height-Fn+20+"px"}),$("#radioPanel").css({bottom:cn.height-Fn+20+"px"})}},UI.endDragChat=function(){$("#chatbox").removeClass("hovered"),$(window).off("mousemove",UI.dragChat),$(window).off("mouseup",UI.endDragChat)},UI.setup=function(){$(window).resize(Cn),$(window).on("orientationchange",Cn),$(window).on("contextmenu",function(Ln){return UI.popMenu(Ln,!0),Ln.preventDefault(),!1}),$(window).on("focus",Input.gameFocus),$(window).on("blur",Input.gameBlur),$(window).on("click",UI.popMenu),$("#minimizechat").on("click",UI.minimizeChat),$("#maximizechat").on("click",UI.maximizeChat),$("#viewscore").on("click",function(Ln){game.state==Network.STATE.PLAYING&&(UI.openScore(),Ln.stopPropagation())}),$("#selectaircraft-1").on("click",function(){UI.selectAircraft(1)}),$("#selectaircraft-2").on("click",function(){UI.selectAircraft(2)}),$("#selectaircraft-3").on("click",function(){UI.selectAircraft(3)}),$("#selectaircraft-4").on("click",function(){UI.selectAircraft(4)}),$("#selectaircraft-5").on("click",function(){UI.selectAircraft(5)}),$("#mainmenu-fullscreen").on("click",Graphics.toggleFullscreen),$("#mainmenu-invite").on("click",UI.openInvite),$("#mainmenu-score").on("click",UI.openScore),$("#mainmenu-game").on("click",Games.popGames),$("#mainmenu-hidpi").on("click",Graphics.toggleHiDPI),$("#mainmenu-sound").on("click",Sound.toggle),config.mobile?($("#mainmenu-keybinds-text").html("<br>How To Play"),$("#mainmenu-keybinds").on("click",UI.toggleHelp),$(".keybind").css({display:"none"})):$("#mainmenu-keybinds").on("click",Input.openKeybinds),$("#settings-mainmenu").on("click",function(Ln){UI.toggleMainMenu(),Ln.stopPropagation()}),$("#settings-sound").on("click",function(Ln){Sound.toggle(),Ln.stopPropagation()}),$("#mainmenu").on("click",function(Ln){Ln.stopPropagation()}),$("#scoredetailed").on("click",function(Ln){Ln.stopPropagation()}),$("#invitefriends").on("click",function(Ln){Ln.stopPropagation()}),$("#keybinds").on("click",function(Ln){Ln.stopPropagation()}),$("#invite-link").on("contextmenu",function(Ln){Ln.stopPropagation()}),$("#resetbinds").on("click",Input.resetBinds),config.mobile||($("#chatbox").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),$("#chatinput").on("blur",function(){jt&&UI.toggleChatBox(!1)}),$("#resizechat").on("mousedown",UI.startDragChat)),$("#scorecontainer").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),$("#selectupgrade-1").on("click",function(){UI.selectUpgrade(1)}),$("#selectupgrade-2").on("click",function(){UI.selectUpgrade(2)}),$("#selectupgrade-3").on("click",function(){UI.selectUpgrade(3)}),$("#selectupgrade-4").on("click",function(){UI.selectUpgrade(4)});var On;for(On=1;5>=On;On++)$("#selectaircraft-"+On).on("mouseenter",{t:On},UI.popTooltip),$("#selectaircraft-"+On).on("mouseleave",UI.closeTooltip);for(On=1;4>=On;On++)$("#selectupgrade-"+On).on("mouseenter",{t:100+On},UI.popTooltip),$("#selectupgrade-"+On).on("mouseleave",UI.closeTooltip);$("#playbutton").on("click",function(){Sound.UIClick(),UI.nameEntered()}),$("#playername").on("keypress",function(Ln){13===Ln.which&&UI.nameEntered()}),window.onerror=function(Ln,kn,Nn,Fn,Bn){game.state!==Network.STATE.PLAYING&&game.state!==Network.STATE.CONNECTING||Tools.handleError({msg:Ln,url:kn,lineNo:Nn,columnNo:Fn,error:Bn})}}}(),function(){var Gt=!1,Yt=!1,Ht=!1,jt=["","Free For All","Capture The Flag","Battle Royale"],Wt=["","ffa","ctf","br"],zt=0,Vt={},qt=0,Kt=null,Zt=null,Qt=!1,Jt=!1,$t=null,en=[],tn=!1,nn={},an={},rn=null,on=!1,sn={radius:0,pos:Vector.zero(),speed:0},dn={2:"Custom country flags",3:"Emotes",4:"Flag Pack #1"};Games.setup=function(){$("#playregion").on("click",function(Sn){Games.updateRegion(!0,Sn)}),$("#playtype").on("click",function(Sn){Games.updateType(!0,Sn)}),$("#open-menu").on("click",function(Sn){Games.popGames(),Sn.stopPropagation()}),$("#gameselector").on("click",function(Sn){Sn.stopPropagation()}),$("#invite-copy").on("click",Games.copyInviteLink),$("#loginbutton").on("click",function(Sn){UI.openLogin(),Sn.stopPropagation()}),$("#login-facebook").on("click",function(){Games.popupLogin(1)}),$("#login-google").on("click",function(){Games.popupLogin(2)}),$("#login-twitter").on("click",function(){Games.popupLogin(3)}),$("#login-reddit").on("click",function(){Games.popupLogin(4)}),$("#login-twitch").on("click",function(){Games.popupLogin(5)}),$("#loginselector").on("click",function(Sn){Sn.stopPropagation()}),$("#gotomainpage").on("click",Games.redirRoot),$("#lifetime-signin").on("click",Games.redirRoot),null==config.settings.session?Games.playerGuest():Games.playerAuth(),un(function(){return(Jt=!0,pn(),DEVELOPMENT&&"#tony"==window.location.hash)?(game.playRegion="eu",game.playRoom="ffa1",game.playInvited=!0,game.myOriginalName=window.location.hash.substr(1),void Games.start(game.myOriginalName,!0)):void(tn||(fn(),Games.updateRegion(!1),Games.updateType(!1),bn()))},!0)},Games.popupLogin=function(Sn){ln("/auth_"+["","facebook","google","twitter","reddit","twitch"][Sn],"Login",4==Sn?900:500,500)};var ln=function(Sn,wn,Cn,Pn){var An=void 0==window.screenLeft?window.screenX:window.screenLeft,Mn=void 0==window.screenTop?window.screenY:window.screenTop,Rn=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-Cn/2+An,In=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-Pn/2+Mn;window.open(Sn,wn,"width="+Cn+", height="+Pn+", top="+In+", left="+Rn)};window.loginSuccess=function(Sn){config.settings.session=Sn,Tools.setSettings({session:Sn}),Tools.removeSetting("flag"),Games.playerAuth(),UI.closeLogin()},window.loginFailure=function(){},Games.playerGuest=function(){UI.show("#playbutton",!0),UI.show("#loginbutton",!0)},Games.playerAuth=function(){Tools.ajaxPost("/auth",{session:config.settings.session},function(Sn){if(null!=Sn){game.loggedIn=!0,game.myUserID=Sn.user;var wn=UI.escapeHTML(Sn.authName.substr(0,30))+"<span class=\"grey\">("+["","Facebook","Google","Twitter","Reddit","Twitch"][Sn.authType]+")</span>";null!=Sn.name&&$("#playername").val(Sn.name),$("#logout").html(wn+"<span class=\"link\" onclick=\"Games.logout()\">Logout</span>"),$("#logout-mainmenu").html("Logged in as "+wn+"<span class=\"button\" onclick=\"Games.logout()\">LOG OUT</span>"),$("#loginbutton").remove(),$("#lifetime-account").remove(),$("#playbutton").html("PLAY"),UI.show("#playbutton",!0)}else Games.playerGuest()})},Games.logout=function(){Tools.removeSetting("session"),Tools.removeSetting("name"),Tools.removeSetting("flag"),window.location="/"};var un=function(Sn,wn){var Cn="/games";wn&&(Cn+="?main=1"),$.ajax({url:Cn,dataType:"json",cache:!1,success:function(Pn){try{en=JSON.parse(Pn.data)}catch(An){return}if("xx"==game.myFlag&&(game.myFlag=Pn.country),wn&&game.protocol!=Pn.protocol){if("#reload"!==window.location.hash)return void Tools.ajaxPost("/clienterror",{type:"protocol"},function(){UI.showMessage("alert","<span class=\"mainerror\">Protocol update<br>Your client is being updated to the new version</span>",3e4),setTimeout(function(){window.location="/?"+Tools.randomID(10)+"#reload"},5e3)});Tools.ajaxPost("/clienterror",{type:"protocolretry"})}Sn()},error:function(){}})},pn=function(){zt=0;for(var Sn=0,wn=0;wn<en.length;wn++)for(var Cn=0;Cn<en[wn].games.length;Cn++)zt+=en[wn].games[Cn].players,Sn++;if(0==Sn)tn=!0,UI.showMessage("alert","<span class=\"mainerror\">We are currently performing server maintenance<br>Please try again in a few minutes</span>",3e4);else{var Pn="<div class=\"item smallerpad\">"+zt+"</div>player"+(1<zt?"s":"")+" online";$("#gameinfo").html(Pn)}},cn=function(Sn){if("closest"===Sn)return{name:"Closest"};for(var wn=0;wn<en.length;wn++)if(en[wn].id===Sn)return en[wn];return game.playRegion="closest",{name:"Closest"}},hn=function(Sn,wn){var Cn=cn(Sn);if(null==Cn)return null;if(null==Cn.games)return null;for(var Pn=0;Pn<Cn.games.length;Pn++)if(Cn.games[Pn].id===wn)return Cn.games[Pn];var An=Wt.indexOf(wn);if(-1!=An)for(Pn=0;Pn<Cn.games.length;Pn++)if(Cn.games[Pn].type==An)return{name:jt[An]};return null},fn=function(){var Sn=window.location.hash;if(history.replaceState(null,null,"/"),"#reload"!==Sn&&null!=Sn&&!(4>Sn.length||20<Sn.length)){var wn=(Sn=Sn.substr(1)).indexOf("-");if(-1!=wn){var Cn=Sn.substr(0,wn),Pn=Sn.substr(wn+1);null!=hn(Cn,Pn)&&(game.playRegion=Cn,game.playRoom=Pn,game.playInvited=!0)}}};Games.selectRegion=function(Sn,wn){Sn.stopPropagation(),Sound.UIClick(),game.playRegion=wn,Games.updateRegion(!1),Games.updateType()},Games.selectGame=function(Sn,wn){Sn.stopPropagation(),Sound.UIClick(),game.playRoom=wn,Games.updateType(!1)},Games.closeDropdowns=function(){Yt&&Games.updateType(!1),Gt&&Games.updateRegion(!1)},Games.updateRegion=function(Sn,wn){var Cn="",Pn=null;if(Jt&&!tn){if(null!=wn&&(wn.stopPropagation(),Gt||Sound.UIClick()),Sn&&UI.closeLogin(),null==Sn&&(Sn=Gt),Sn){Yt&&Games.updateType(!1),Cn+="<div class=\"item\"><div class=\"region header\">REGION</div><div class=\"players header\">PLAYERS</div><div class=\"ping header\">PING</div><div class=\"clear\"></div></div>";var An="";null!=Zt&&(An="<span class=\"autoregion\">("+en[Zt].name+")</span>"),Cn+="<div class=\"item selectable"+("closest"===game.playRegion?" sel":"")+"\" onclick=\"Games.selectRegion(event, &quot;closest&quot;)\"><div class=\"region chooser\">Closest"+An+"</div><div class=\"clear\"></div></div>";for(var Mn=0;Mn<en.length;Mn++){for(var Rn=0,In=0;In<en[Mn].games.length;In++)Rn+=en[Mn].games[In].players;var Dn;Dn=null==en[Mn].ping?"&nbsp;":Math.round(en[Mn].ping)+"<span class=\"ms\">ms</span>",Cn+="<div class=\"item selectable"+(game.playRegion===en[Mn].id?" sel":"")+"\" onclick=\"Games.selectRegion(event, &quot;"+en[Mn].id+"&quot;)\"><div class=\"region chooser\">"+en[Mn].name+"</div><div class=\"players number\">"+Rn+"</div><div class=\"ping chooser nopadding\">"+Dn+"</div><div class=\"clear\"></div></div>"}Cn+="<div class=\"item\"></div>",Pn={width:"240px",height:"auto","z-index":"2"},$("#playregion").removeClass("hoverable")}else Cn+="<div class=\"arrowdown\"></div>",Cn+="<div class=\"playtop\">REGION</div>",Cn+="<div class=\"playbottom\">"+cn(game.playRegion).name+"</div>",Pn={width:"130px",height:"40px","z-index":"auto"},$("#playregion").addClass("hoverable");$("#playregion").html(Cn),$("#playregion").css(Pn),Gt=Sn}};var gn=function(){var Sn=game.playRegion;if("closest"===Sn){if(null==Zt)return null;Sn=en[Zt].id}return Sn},mn=function(Sn){var wn="<div class=\"infott\">";return 1==Sn?wn+="Everyone versus everyone deathmatch. No teams.":2==Sn?wn+="Players split into 2 teams. 2 flags are placed inside each base. The objective is to move the enemy flag from their base to your base.":3==Sn&&(wn+="Players spawn at random locations all across the map. Destroyed players will not respawn. Last player standing wins."),wn+="<div class=\"arrow\"></div></div>"};Games.updateType=function(Sn,wn){var Cn="",Pn=null;if(Jt&&!tn){if(null!=wn&&(wn.stopPropagation(),Yt||Sound.UIClick()),Sn&&UI.closeLogin(),null==Sn&&(Sn=Yt),Sn){if(Gt&&Games.updateRegion(!1),Cn+="<div class=\"item\"><div class=\"gametype header\">GAME</div><div class=\"players header\">PLAYERS</div><div class=\"clear\"></div></div>",null==(Dn=gn()))return;null==hn(Dn,game.playRoom)&&(game.playRoom=Wt[1]);var Rn=cn(Dn).games,In=[[],[],[],[],[],[],[],[],[]],An,Mn;for(An=0;An<Rn.length;An++)In[Rn[An].type].push(Rn[An]);for(An=1;An<In.length;An++)if(0!=In[An].length)for(Cn+="<div class=\"item selectable"+(Wt[An]===game.playRoom?" sel":"")+"\" onclick=\"Games.selectGame(event, &quot;"+Wt[An]+"&quot;)\"><div class=\"gametype chooser\">"+jt[An]+"<span class=\"infocontainer\">&nbsp;<div class=\"infoicon\">"+mn(An)+"</div></span></div><div class=\"clear\"></div></div>",Mn=0;Mn<In[An].length;Mn++)Cn+="<div class=\"item selectable"+(In[An][Mn].id===game.playRoom?" sel":"")+"\" onclick=\"Games.selectGame(event, &quot;"+In[An][Mn].id+"&quot;)\"><div class=\"gametype chooser\">"+In[An][Mn].nameShort+"</div><div class=\"players number\">"+In[An][Mn].players+"</div><div class=\"clear\"></div></div>";Cn+="<div class=\"item\"></div>",Pn={width:"240px",height:"auto","z-index":"2"},$("#playtype").removeClass("hoverable")}else{Cn+="<div class=\"arrowdown\"></div>",Cn+="<div class=\"playtop\">GAME</div>";var Dn;if(null==(Dn=gn()))return;var On=hn(Dn,game.playRoom);null==On?(name=jt[1],game.playRoom=Wt[1]):name=On.name,Cn+="<div class=\"playbottom\">"+name+"</div>",Pn={width:"190px",height:"40px","z-index":"auto"},$("#playtype").addClass("hoverable")}$("#playtype").html(Cn),$("#playtype").css(Pn),Yt=Sn}},Games.popGames=function(){if(!Ht){UI.closeAllPanels("games");var Sn=yn();UI.hide("#menu"),$("#gameselector").html(Sn),UI.show("#gameselector"),Ht=!0,_n(),Sound.UIClick()}};var yn=function(){var Sn="";Sn+="<div class=\"header\">"+game.roomName+"<span class=\"region\">&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+game.regionName+"</span></div><div class=\"buttons\"><div class=\"button\" onclick=\"Games.redirRoot()\">CHANGE REGION</div></div>";var Pn=cn(game.playRegion).games,An=[[],[],[],[],[],[],[],[],[]],wn,Cn;for(wn=0;wn<Pn.length;wn++)An[Pn[wn].type].push(Pn[wn]);var Mn,Rn;for(wn=1;wn<An.length;wn++)if(0!=An[wn].length)for(Sn+="<div class=\"item head\"><div class=\"gametype chooser section\">"+jt[wn]+"<span class=\"infocontainer\">&nbsp;<div class=\"infoicon\">"+mn(wn)+"</div></span></div><div class=\"clear\"></div></div>",Cn=0;Cn<An[wn].length;Cn++)An[wn][Cn].id===game.playRoom?(Mn=" sel",Rn=""):(Mn=" selectable",Rn=" onclick=\"Games.switchGame(&quot;"+An[wn][Cn].id+"&quot;)\""),Sn+="<div class=\"item"+Mn+"\""+Rn+"><div class=\"gametype chooser\">"+An[wn][Cn].nameShort+"</div><div class=\"players number\">"+An[wn][Cn].players+"</div><div class=\"clear\"></div></div>";return Sn};Games.redirRoot=function(){game.reloading=!0,window.location="/"};var _n=function(){un(function(){var Sn=yn();$("#gameselector").html(Sn)})};Games.closeGames=function(){Ht&&(UI.hide("#gameselector"),UI.show("#menu"),Ht=!1,Sound.UIClick())},Games.toggleGames=function(){Ht?Games.closeGames():Games.popGames()},Games.switchGame=function(Sn){Games.closeGames(),null!=Sn&&(game.playRoom=Sn),game.myScore=0,game.state=Network.STATE.CONNECTING,Network.shutdown(),Particles.wipe(),Players.wipe(),Mobs.wipe(),UI.reconnection(),Games.start(game.myOriginalName)};var bn=function(){Vt={},qt=0;for(var wn=0,Sn;wn<en.length;wn++)Sn=en[wn].games[Tools.randInt(0,en[wn].games.length-1)].host,null==Vt[Sn]&&(Vt[Sn]={ping:9999,num:0,threshold:0,server:wn});Games.performPing(),Games.performPing(),Games.performPing(),Kt=setInterval(Games.performPing,300)};Games.performPing=function(){if(!(3<qt||Qt)){var Sn=9999,wn=null;for(var Cn in Vt)Vt[Cn].num<Sn&&(Sn=Vt[Cn].num,wn=Cn);if(6<Sn)null!=Kt&&clearInterval(Kt);else{Vt[wn].num++;var Pn;Pn=DEVELOPMENT?"/ping":"https://game-"+wn+".airma.sh/ping",xn(wn,Pn,function(){xn(wn,Pn)})}}};var xn=function(Sn,wn,Cn){if(null!=Vt[Sn]&&!Qt){qt++;var Pn=performance.now();$.ajax({url:wn,dataType:"json",cache:!1,timeout:2e3,success:function(An){if(!Qt&&(qt--,1==An.pong&&null!=Vt[Sn])){var Mn=performance.now()-Pn;if(Math.abs(Vt[Sn].ping-Mn)<.1*Mn&&Vt[Sn].threshold++,2<=Vt[Sn].threshold)return Mn<Vt[Sn].ping&&(en[Vt[Sn].server].ping=Mn,Games.findClosest(),Games.updateRegion()),void delete Vt[Sn];Mn<Vt[Sn].ping&&(Vt[Sn].ping=Mn,en[Vt[Sn].server].ping=Mn,Games.findClosest(),Games.updateRegion(),null!=Cn&&Cn())}},error:function(){qt--}})}};Games.findClosest=function(){for(var Sn=9999,wn=!1,Cn=0;Cn<en.length;Cn++)null!=en[Cn].ping&&en[Cn].ping<Sn&&(Sn=en[Cn].ping,Zt=Cn,wn=!0);wn&&"closest"===game.playRegion&&Games.updateType()},Games.highlightInput=function(Sn){$(Sn).css({transition:"none",transform:"scale(1.1)","background-color":"rgb(90, 30, 30)"}),$(Sn).width(),$(Sn).css({transition:"all 0.5s ease-in-out",transform:"scale(1)","background-color":"rgb(30, 30, 30)"}),setTimeout(function(){$(Sn).focus()},200)},Games.copyInviteLink=function(){vn(game.inviteLink)&&(UI.show("#invite-copied"),null!=$t&&clearTimeout($t),$t=setTimeout(function(){UI.hide("#invite-copied")},2e3))};var vn=function(Sn){var wn=document.createElement("span");wn.textContent=Sn,wn.style.whiteSpace="pre";var Cn=document.createElement("iframe");Cn.sandbox="allow-same-origin",document.body.appendChild(Cn);var Pn=Cn.contentWindow;Pn.document.body.appendChild(wn);var An=Pn.getSelection();An||(An=(Pn=window).getSelection(),document.body.appendChild(wn));var Mn=Pn.document.createRange();An.removeAllRanges(),Mn.selectNode(wn),An.addRange(Mn);var Rn=!1;try{Rn=Pn.document.execCommand("copy")}catch(In){}return An.removeAllRanges(),wn.remove(),Cn.remove(),Rn};Games.start=function(Sn,wn){if(!(tn||wn&&game.state==Network.STATE.CONNECTING)){var Cn=game.playRegion,Pn=gn();if(null!=Pn){game.playRegion=Pn,null!=Kt&&clearInterval(Kt),Qt=!0;var An=game.playRoom,Mn=Wt.indexOf(An);if(-1!=Mn){for(var Rn=cn(game.playRegion).games,In=[],Dn=0;Dn<Rn.length;Dn++)Rn[Dn].type==Mn&&In.push(Rn[Dn].id);An=In[Tools.randInt(0,In.length-1)]}var On=hn(game.playRegion,An);game.playHost=On.host,game.playPath=On.id,game.regionName=cn(game.playRegion).name,game.playRoom=An,game.state==Network.STATE.LOGIN&&Tools.wipeReel(),game.state=Network.STATE.CONNECTING;var Ln={name:Sn};game.playInvited||(Ln.region=Cn),Tools.setSettings(Ln),UI.gameStart(Sn,wn),wn&&Tools.ajaxPost("/enter",{id:config.settings.id,name:Sn,game:game.playRegion+"-"+game.playRoom,source:null==document.referrer?"":document.referrer,mode:config.mobile?1:0})}}},Games.prep=function(){(Games.wipe(),2==game.gameType)?($("#gamespecific").html("<div class=\"blueflag\"></div><div id=\"blueflag-name\" class=\"blueflag-player\">&nbsp;</div><div class=\"redflag\"></div><div id=\"redflag-name\" class=\"redflag-player\">&nbsp;</div>"),UI.show("#gamespecific"),nn={flagBlue:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:Vector.zero(),basePos:new Vector(-9669,-1471),sprite:Textures.init("ctfFlagBlue",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:1.1*.4,visible:!1}),minimapSprite:Textures.init("minimapFlagBlue"),minimapBase:Textures.init("minimapBaseBlue")},flagRed:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:Vector.zero(),basePos:new Vector(8602,-944),sprite:Textures.init("ctfFlagRed",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:1.1*.4,visible:!1}),minimapSprite:Textures.init("minimapFlagRed"),minimapBase:Textures.init("minimapBaseRed")}},Graphics.minimapMob(nn.flagBlue.minimapBase,nn.flagBlue.basePos.x,nn.flagBlue.basePos.y),Graphics.minimapMob(nn.flagRed.minimapBase,nn.flagRed.basePos.x,nn.flagRed.basePos.y)):3==game.gameType&&($("#gamespecific").html(""),UI.show("#gamespecific"))},Games.wipe=function(){En(),nn.flagBlue&&nn.flagRed&&(game.graphics.layers.flags.removeChild(nn.flagBlue.sprite),game.graphics.layers.flags.removeChild(nn.flagRed.sprite),game.graphics.layers.shadows.removeChild(nn.flagBlue.spriteShadow),game.graphics.layers.shadows.removeChild(nn.flagRed.spriteShadow),game.graphics.layers.ui3.removeChild(nn.flagBlue.minimapSprite),game.graphics.layers.ui3.removeChild(nn.flagRed.minimapSprite),game.graphics.layers.ui2.removeChild(nn.flagBlue.minimapBase),game.graphics.layers.ui2.removeChild(nn.flagRed.minimapBase),nn.flagBlue.sprite.destroy(),nn.flagRed.sprite.destroy(),nn.flagBlue.spriteShadow.destroy(),nn.flagRed.spriteShadow.destroy(),nn.flagBlue.minimapSprite.destroy(),nn.flagRed.minimapSprite.destroy(),nn.flagBlue.minimapBase.destroy(),nn.flagRed.minimapBase.destroy())},Games.networkFlag=function(Sn){var wn=1==Sn.flag?nn.flagBlue:nn.flagRed,Cn=1==Sn.flag?"#blueflag-name":"#redflag-name",Pn=1==Sn.flag?Sn.blueteam:Sn.redteam;wn.momentum=0,wn.direction=1,wn.sprite.scale.x=.4,wn.sprite.rotation=0,wn.spriteShadow.scale.x=1.1*.4,wn.spriteShadow.rotation=0;var An="<span class=\"rounds\">"+Pn+"<span class=\"divider\">/</span>3</span>";if(1==Sn.type){wn.playerId=null,wn.position.x=Sn.posX,wn.position.y=Sn.posY,wn.sprite.position.set(Sn.posX,Sn.posY);var Mn=Graphics.shadowCoords(new Vector(Sn.posX,Sn.posY));wn.spriteShadow.position.set(Mn.x,Mn.y),Graphics.minimapMob(wn.minimapSprite,Sn.posX,Sn.posY),$(Cn).html(An)}else{wn.playerId=Sn.id;var Rn=Players.get(Sn.id);null!=Rn&&(1==Sn.flag?An=UI.escapeHTML(Rn.name)+An:An+=UI.escapeHTML(Rn.name)),wn.diffX=Rn.pos.x,$(Cn).html(An)}Tn(wn,!1)};var Tn=function(Sn,wn){if(wn&&(Graphics.minimapMob(Sn.minimapSprite,Sn.position.x,Sn.position.y),Graphics.minimapMob(Sn.minimapBase,Sn.basePos.x,Sn.basePos.y)),null!=Sn.playerId){var Cn=Players.get(Sn.playerId);if(null!=Cn&&(Cn.render!=Sn.visible&&(Sn.visible=Cn.render,Sn.sprite.visible=Cn.render,Sn.spriteShadow.visible=Cn.render,Cn.render&&(Sn.momentum=0,Sn.direction=1,Sn.diffX=Cn.pos.x)),Cn.render?Graphics.minimapMob(Sn.minimapSprite,Cn.pos.x,Cn.pos.y):Graphics.minimapMob(Sn.minimapSprite,Cn.lowResPos.x,Cn.lowResPos.y),Sn.visible)){Sn.position.x=Cn.pos.x,Sn.position.y=Cn.pos.y,Sn.sprite.position.set(Cn.pos.x,Cn.pos.y);var Pn=Graphics.shadowCoords(Cn.pos);Sn.spriteShadow.position.set(Pn.x,Pn.y),Sn.momentum=Tools.clamp(Sn.momentum+(Cn.pos.x-Sn.diffX)*game.timeFactor,-40,40);var An=0<Sn.momentum?.1:-.1;Sn.direction=Tools.clamp(Sn.direction-An*game.timeFactor,-.4,.4),Sn.sprite.scale.x=Sn.direction,Sn.spriteShadow.scale.x=1.1*Sn.direction;var Mn=.04*-(Cn.pos.x-Sn.diffX)*game.timeFactor;Sn.sprite.rotation=Mn,Sn.spriteShadow.rotation=Mn,Sn.diffX=Cn.pos.x}}else{var Rn=Graphics.inScreen(Sn.position,128);Rn!=Sn.visible&&(Sn.visible=Rn,Sn.sprite.visible=Rn,Sn.spriteShadow.visible=Rn)}};Games.spectate=function(Sn){null==game.spectatingID&&3!=game.gameType&&UI.showMessage("alert","<span class=\"info\">SPECTATOR MODE</span>Click on Respawn to resume playing",4e3),game.spectatingID=Sn;var wn=Players.get(Sn),Cn="<div id=\"spectator-tag\" class=\"spectating\">Spectating "+(null==wn?"":UI.escapeHTML(wn.name))+"</div><div class=\"buttons\"><div onclick=\"Network.spectateNext()\" class=\"changeplayer left\"><div class=\"arrow\"></div></div><div onclick=\"Network.spectatePrev()\" class=\"changeplayer right\"><div class=\"arrow\"></div></div></div>";UI.showSpectator(Cn)},Games.spectatorSwitch=function(Sn){setTimeout(function(){Sn==game.spectatingID&&Network.spectateNext()},2e3)},Games.playersAlive=function(Sn){var wn="";1<Sn&&(wn="<div class=\"playersalive\">"+Sn+" players alive</div>"),$("#gamespecific").html(wn)},Games.showBTRWin=function(Sn){if(!$("#custom-msg").length){var wn="<div id=\"custom-msg\" class=\"btrwin\"><div class=\"trophy\"></div><div class=\"winner\"><div class=\"player\"><span class=\"flag big flag-"+Sn.f+"\"></span>"+UI.escapeHTML(Sn.p)+"</div></div><div class=\"bounty\"><span class=\"stat\">"+Sn.k+" KILL"+(1==Sn.k?"":"S")+"</span>+"+Sn.b+" BOUNTY</div></div>";$("body").append(wn),UI.showPanel("#custom-msg"),setTimeout(function(){UI.hidePanel("#custom-msg",!1,!0)},1e3*Sn.t),Sound.gameComplete()}},Games.showCTFWin=function(Sn){if(!$("#custom-msg").length){var wn="<div id=\"custom-msg\" class=\"ctfwin\"><div class=\"trophy\"></div><div class=\"winner\">"+(1==Sn.w?"<div class=\"player blue\">BLUE TEAM</div>":"<div class=\"player red\">RED TEAM</div>")+"</div><div class=\"bounty\">+"+Sn.b+" BOUNTY</div></div>";$("body").append(wn),UI.showPanel("#custom-msg"),setTimeout(function(){UI.hidePanel("#custom-msg",!1,!0)},1e3*Sn.t),Sound.gameComplete()}},Games.showLevelUP=function(Sn){$("#custom-msg").length&&$("#custom-msg").remove();var wn="",Cn=" lvlsmaller";null!=dn[Sn+""]&&(Cn="",wn="<div class=\"unlocked\">FEATURE UNLOCKED<br><div class=\"unlockedtext\">"+dn[Sn+""]+"</div></div>");var Pn="<div id=\"custom-msg\" class=\"levelup"+Cn+"\"><div class=\"leveltext\">NEW LEVEL REACHED</div><div class=\"levelbadge\"></div><div class=\"levelnum\">"+Sn+"</div>"+wn+"</div>";$("body").append(Pn),UI.showPanel("#custom-msg"),Sound.levelUp(),UI.showChatLevel(Sn)},Games.popFirewall=function(Sn,wn){0>=wn&&(wn=0),on||(on=!0,rn=new PIXI.Graphics,game.graphics.gui.minimap.mask=rn),rn.clear(),rn.beginFill(16777215),rn.drawCircle(game.screenX-config.minimapPaddingX-config.minimapSize*(16384-Sn.x)/32768,game.screenY-config.minimapPaddingY-config.minimapSize/2*(8192-Sn.y)/16384,2*wn/(256*(256/config.minimapSize))),rn.endFill();var Cn=Graphics.getCamera(),Pn=Math.ceil((game.halfScreenX+64)/game.scale/64),An=Math.ceil((game.halfScreenY+64)/game.scale/64),Mn=0,Rn=0,In="",Dn={},On=0,Ln=0,kn=new Vector(Cn.x-game.halfScreenX/game.scale-64,Cn.y-game.halfScreenY/game.scale-64),Nn=new Vector(Cn.x+game.halfScreenX/game.scale+64,Cn.y-game.halfScreenY/game.scale-64),Fn=new Vector(Cn.x-game.halfScreenX/game.scale-64,Cn.y+game.halfScreenY/game.scale+64),Bn=new Vector(Cn.x+game.halfScreenX/game.scale+64,Cn.y+game.halfScreenY/game.scale+64);if(Tools.distance(Sn.x,Sn.y,kn.x,kn.y)>wn||Tools.distance(Sn.x,Sn.y,Nn.x,Nn.y)>wn||Tools.distance(Sn.x,Sn.y,Fn.x,Fn.y)>wn||Tools.distance(Sn.x,Sn.y,Bn.x,Bn.y)>wn)for(var Un=-Pn;Un<=Pn;Un++)for(var Xn=-An;Xn<=An;Xn++)if(Mn=64*(Math.floor(Cn.x/64)+.5)+64*Un,Rn=64*(Math.floor(Cn.y/64)+.5)+64*Xn,!((On=Tools.distance(Mn,Rn,Sn.x,Sn.y))<wn)&&(In=Mn+"_"+Rn,Dn[In]=!0,null==an[In])){var Gn=Textures.sprite("hotsmoke_"+Tools.randInt(1,4));Gn.scale.set(Tools.rand(1.5,2.5)),Gn.anchor.set(.5,.5),Gn.position.set(Mn,Rn),Ln=1,.5<Tools.rand(0,1)&&(Gn.blendMode=PIXI.BLEND_MODES.ADD,Ln=.5),game.graphics.layers.powerups.addChild(Gn),an[In]={sprite:Gn,rotation:Tools.rand(0,100),rotationSpeed:Tools.rand(-.0025,.0025),opacity:0,maxOpacity:Ln,opacitySpeed:64<=On-wn?.02:.0035,color:Tools.rand(0,1),colorDir:.5>Tools.rand(0,1)?-1:1}}for(var Yn in an)null==Dn[Yn]?(game.graphics.layers.powerups.removeChild(an[Yn].sprite),an[Yn].sprite.destroy(),delete an[Yn]):(an[Yn].rotation+=an[Yn].rotationSpeed*game.timeFactor,an[Yn].opacity+=an[Yn].opacitySpeed*game.timeFactor,an[Yn].opacity>an[Yn].maxOpacity&&(an[Yn].opacity=an[Yn].maxOpacity),an[Yn].color+=.005*an[Yn].colorDir*game.timeFactor,0>an[Yn].color&&(an[Yn].colorDir=1),1<an[Yn].color&&(an[Yn].colorDir=-1),an[Yn].sprite.rotation=an[Yn].rotation,an[Yn].sprite.alpha=an[Yn].opacity,an[Yn].sprite.tint=Tools.colorLerp(16427014,16404230,an[Yn].color))};var En=function(){if(on){for(var Sn in an)game.graphics.layers.powerups.removeChild(an[Sn].sprite),an[Sn].sprite.destroy();an={},game.graphics.gui.minimap.mask=null,null!=rn&&(rn.destroy(),rn=null),on=!1}};Games.handleFirewall=function(Sn){0==Sn.status?En():(sn.radius=Sn.radius,sn.pos.x=Sn.posX,sn.pos.y=Sn.posY,sn.speed=Sn.speed,Games.popFirewall(sn.pos,sn.radius))},Games.update=function(Sn){2==game.gameType&&nn.flagBlue&&(Tn(nn.flagBlue,Sn),Tn(nn.flagRed,Sn)),3==game.gameType&&on&&(sn.radius+=sn.speed/60*game.timeFactor,Games.popFirewall(sn.pos,sn.radius))}}(),window.loadSounds_Default=function(){var Gt={},Yt={},Ht={},jt=0,Wt=0,zt={},Vt=0,qt=0,Kt={},$t=.06,en=.08,rn=[0,0.7,1,0.4,0,0.7,0.4,0.7],on=[0,0.7,1,0.4,0,0.7,1,0.7],sn=[0,0.8,0.5,1,0,0.8,0.5,0.8],dn=[0,0.8,1,0.7,0.8,0.8],ln=[0,1.5,1.2,0.8,1.35,1.7],un=[0,1,1,0.35,1,1],pn=[0,0.8,0.5,1,0,0.8,0.8,0.8],cn=[0,1.5,0.8,2,1,1.5],hn={powerup_shield:.5,upgrade:.2,complete:.5,levelup:.5,respawn:.05,click:.5},fn={},gn={src:["assets/sounds.mp3?4"],volume:0,sprite:{chopper:[0,3206.1451247165533,!0],click:[5000,374.9886621315195],complete:[7000,1910.9750566893417],explosion1:[10000,4137.460317460316],explosion2:[16000,4155.44217687075],explosion3:[22000,4168.367346938776],explosion4:[28000,4580.272108843537],explosion5:[34000,4144.943310657595],explosion6:[40000,4191.360544217688],impact:[46000,3730.7709750566855],launch1:[51000,1492.4943310657568],launch2:[54000,1511.2244897959215],levelup:[57000,1886.4172335600883],missile:[60000,8335.351473922898,!0],powerup_rampage:[70000,7423.083900226758],powerup_shield:[79000,2070.4761904761854],powerup_upgrade:[83000,1640.8616780045406],repel:[86000,2000],respawn:[89000,1315.9410430838961],thruster:[92000,9499.841269841269,!0],upgrade:[103000,2062.517006802722]}};SWAM&&SWAM.injectSounds(gn),Sound.setup=function(){var Sn={};for(var wn in fn){if(Sn={src:["/assets/sounds/"+wn+".wav"]},0<Object.keys(fn[wn]).length)for(var Cn in fn[wn])Sn[Cn]=fn[wn][Cn];Yt[wn]=new Howl(Sn)}Gt=new Howl(gn)},Sound.toggle=function(){config.settings.sound=!config.settings.sound,Tools.setSettings({sound:config.settings.sound}),UI.updateSound(!0),mn()};var mn=function(){config.settings.sound||Gt.stop()},yn=function(Sn){var wn=hn[Sn];return null==wn?1:wn};Sound.mobExplosion=function(Sn,wn){var Cn=rn[wn]*.3,Pn=Tn(Sn)*Cn,An="explosion"+Tools.randInt(1,6);.01>Pn||_n("mobexplosions",4)||bn(An,Pn,Sn,Tools.rand(.8,1.2))},Sound.playerKill=function(Sn){var wn=dn[Sn.type]*1,Cn=Tn(Sn.pos)*wn,Pn="explosion"+Tools.randInt(1,6);.01>Cn||_n("playerkills",3)||bn(Pn,Cn,Sn.pos,Tools.rand(.8,1.2))},Sound.playerUpgrade=function(){if(!_n("upgrades",1)){var Sn=yn("upgrade");bn("upgrade",Sn)}},Sound.playerRespawn=function(Sn){var wn=yn("respawn")*(Sn.me()?1:Tn(Sn.pos)),Cn=Sn.me()?null:Sn.pos;bn("respawn",wn,Cn)},Sound.gameComplete=function(){var Sn=yn("complete");bn("complete",Sn)},Sound.levelUp=function(){var Sn=yn("levelup");bn("levelup",Sn)},Sound.UIClick=function(){if(!_n("uiclick",1,200)){var Sn=yn("click");bn("click",Sn)}},Sound.effectRepel=function(Sn){var wn=Tn(Sn)*.3;bn("repel",wn,Sn,1.5)},Sound.powerup=function(Sn,wn){var Cn=(null==wn?1:Tn(wn))*.25,Pn="";4==Sn?Pn="powerup_upgrade":8==Sn?Pn="powerup_shield":9==Sn&&(Pn="powerup_rampage"),bn(Pn,Cn*yn(Pn),wn)},Sound.missileLaunch=function(Sn,wn){var Cn=on[wn]*.3,Pn=Tn(Sn)*Cn,An=sn[wn],Mn="launch"+Tools.randInt(1,2);.01>Pn||_n("launches",5)||bn(Mn,Pn,Sn,An)},Sound.playerImpact=function(Sn,wn,Cn){var Pn=.05*Tools.clamp(Cn,0,1),An=Tn(Sn)*Pn,Mn=cn[wn];bn("impact",An,Sn,Mn)},Sound.update=function(){if(!(100>game.time-qt)){var Sn=game.focus?300:1e3;for(var wn in Ht)game.time-Ht[wn].last>Sn&&Sound.clearThruster(wn);for(var Cn in zt)game.time>=zt[Cn].time&&(vn(zt[Cn].id,zt[Cn].sound),delete zt[Cn]);qt=game.time}};var _n=function(Sn,wn,Cn){if(null==Kt[Sn])return Kt[Sn]={num:1,time:game.time},!1;var Pn=null==Cn?1e3:Cn;return game.time-Kt[Sn].time>Pn?(Kt[Sn].num=1,Kt[Sn].time=game.time,!1):(Kt[Sn].num++,Kt[Sn].num>wn)},bn=function(Sn,wn,Cn,Pn,An,Mn){if(config.settings.sound){if(Mn){if(null==Yt[Sn])return;var Rn=Yt[Sn]}else Rn=Gt;if(!(null!=wn&&.01>wn)){var In=Rn.play(Mn?void 0:Sn);if("thruster"===Sn||"missile"===Sn||"chopper"===Sn){var Dn=Rn.seek(null,In);Rn.seek(Dn+Tools.rand(0,1),In)}return xn(In,Sn,wn,Cn,Pn,An,Mn),In}}},xn=function(Sn,wn,Cn,Pn,An,Mn,Rn){if(config.settings.sound){if(Rn){if(null==Yt[wn])return;var In=Yt[wn]}else In=Gt;null!=Cn&&In.volume(Cn,Sn),null!=Mn&&In.fade(Mn[0],Mn[1],Mn[2],Sn,4==Mn.length||null),null!=An&&In.rate(An,Sn),null==Pn||config.ios||In.stereo(En(Pn),Sn)}},vn=function(Sn,wn,Cn){if(Cn){if(null==Yt[wn])return;var Pn=Yt[wn]}else Pn=Gt;Pn.stop(Sn)};Sound.clearThruster=function(Sn){if(null!=Ht[Sn]){var wn=Ht[Sn].soundId,Cn=Ht[Sn].vol;xn(wn,Ht[Sn].sound,null,null,null,[Cn,0,200,!0]),function(Pn,An,Mn){zt[++Vt]={id:Pn,sound:An,time:game.time+Mn}}(wn,Ht[Sn].sound,300),0==Ht[Sn].type?jt--:Wt--,delete Ht[Sn]}},Sound.updateThruster=function(Sn,wn,Cn){if(config.settings.sound){if(0==Sn){if(3==wn.type){Cn=wn.render;var Pn="chopper"}else Cn=wn.keystate.UP||wn.keystate.DOWN,Pn="thruster";var An="player_"+wn.id+"_"+wn.type}else Pn="missile",An="mob_"+wn.id;if(!Cn)null!=Ht[An]&&Sound.clearThruster(An);else if(null==Ht[An]){if(0==Sn){if(!wn.me()&&5<=jt)return;}else if(5<=Wt)return;var Mn=Tn(wn.pos);if(0==Sn)var Rn=Mn*un[wn.type]*$t,In=ln[wn.type];else Rn=Mn*en,In=pn[wn.type];if(.01>Rn)return;var Dn=bn(Pn,null,wn.pos,In,[0,Rn,200]);Ht[An]={type:Sn,started:game.time,last:game.time,sound:Pn,soundId:Dn,vol:Rn},0==Sn?jt++:Wt++}else{if(100>game.time-Ht[An].last)return;if(Mn=Tn(wn.pos),0==Sn?(Rn=Mn*un[wn.type]*$t,wn.boost&&(Rn*=3)):Rn=Mn*en,.01>Rn)return void Sound.clearThruster(An);if(In=null,0==Sn&&3==wn.type&&(In=ln[wn.type]+wn.speed.length()/20),250>game.time-Ht[An].started)return;xn(Ht[An].soundId,Ht[An].sound,null,wn.pos,In,[Ht[An].vol,Rn,100,!0]),Ht[An].last=game.time,Ht[An].vol=Rn}}};var Tn=function(Sn){var wn=Graphics.getCamera(),Cn=Tools.length(Sn.x-wn.x,Sn.y-wn.y),Pn=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2;return Tools.clamp(1.5*(1-Cn/Pn),0,1)},En=function(Sn){var wn=Graphics.getCamera(),Cn=Sn.x-wn.x,Pn=game.halfScreenX/game.scale;return Tools.clamp(.8*Cn/Pn,-1,1)}},window.loadSounds_SWAM=function(){var Gt={},Yt={},Ht={},jt=0,Wt=0,zt={},Vt=0,qt=0,Kt={},$t=.06,en=.08,rn=[0,0.7,1,0.4,0,0.7,0.4,0.7],on=[0,0.7,1,0.4,0,0.7,1,0.7],sn=[0,0.8,0.5,1,0,0.8,0.5,0.8],dn=[0,0.8,1,0.7,0.8,0.8],ln=[0,1.5,1.2,0.8,1.35,1.7],un=[0,1,1,0.35,1,1],pn=[0,0.8,0.5,1,0,0.8,0.8,0.8],cn=[0,1.5,0.8,2,1,1.5],hn={powerup_shield:.5,upgrade:.2,complete:.5,levelup:.5,respawn:.05,click:.5},fn={},gn={src:[getFilePath("sounds.mp3")],volume:0,sprite:{a_wing:[50,917,!0],tie_interceptor:[1000,2381,!0],tie_fighter:[3500,1173,!0],x_wing:[5000,5410,!0],tie_bomber:[10500,2431,!0],b_wing:[13000,2949,!0],tie_advanced:[16500,2940,!0],y_wing:[20000,2944,!0],tie_phantom:[23500,2949,!0],scout_ship:[27500,1392,!0],click:[50000,153],complete:[51000,4800],explosion1:[60000,3600],explosion2:[66000,3650],explosion3:[72000,3230],explosion4:[78000,3240],explosion5:[84000,3100],explosion6:[90000,3730],impact:[96000,2153],launch1:[100000,1665],launch2:[103000,1955],levelup:[107000,4320],missile:[113000,5339,!0],powerup_rampage:[120000,2971],powerup_shield:[124000,1633],powerup_upgrade:[128000,806],repel:[130000,1344],respawn:[133000,1237],thruster:[137000,9500,!0],upgrade:[150000,2455]}};Sound.setup=function(){var Sn={};for(var wn in fn){if(Sn={src:["/assets/sounds/"+wn+".wav"]},0<Object.keys(fn[wn]).length)for(var Cn in fn[wn])Sn[Cn]=fn[wn][Cn];Yt[wn]=new Howl(Sn)}Gt=new Howl(gn)},Sound.toggle=function(){config.settings.sound=!config.settings.sound,Tools.setSettings({sound:config.settings.sound}),UI.updateSound(!0),mn()};var mn=function(){config.settings.sound||Gt.stop()},yn=function(Sn){var wn=hn[Sn];return null==wn?1:wn};Sound.mobExplosion=function(Sn,wn){var Cn=rn[wn]*.3,Pn=Tn(Sn)*Cn,An="explosion"+Tools.randInt(1,6);.01>Pn||_n("mobexplosions",4)||bn(An,Pn,Sn,Tools.rand(.8,1.2))},Sound.playerKill=function(Sn){var wn=dn[Sn.type]*1,Cn=Tn(Sn.pos)*wn,Pn="explosion"+Tools.randInt(1,6);.01>Cn||_n("playerkills",3)||bn(Pn,Cn,Sn.pos,Tools.rand(.8,1.2))},Sound.playerUpgrade=function(){if(!_n("upgrades",1)){var Sn=yn("upgrade");bn("upgrade",Sn)}},Sound.playerRespawn=function(Sn){var wn=yn("respawn")*(Sn.me()?1:Tn(Sn.pos)),Cn=Sn.me()?null:Sn.pos;bn("respawn",wn,Cn)},Sound.gameComplete=function(){var Sn=yn("complete");bn("complete",Sn)},Sound.levelUp=function(){var Sn=yn("levelup");bn("levelup",Sn)},Sound.UIClick=function(){if(!_n("uiclick",1,200)){var Sn=yn("click");bn("click",Sn)}},Sound.effectRepel=function(Sn){var wn=Tn(Sn)*.3;bn("repel",wn,Sn,1.5)},Sound.powerup=function(Sn,wn){var Cn=(null==wn?1:Tn(wn))*.25,Pn="";4==Sn?Pn="powerup_upgrade":8==Sn?Pn="powerup_shield":9==Sn&&(Pn="powerup_rampage"),bn(Pn,Cn*yn(Pn),wn)},Sound.missileLaunch=function(Sn,wn){var Cn=on[wn]*.3,Pn=Tn(Sn)*Cn,An=sn[wn],Mn="launch"+Tools.randInt(1,2);.01>Pn||_n("launches",5)||bn(Mn,Pn,Sn,An)},Sound.playerImpact=function(Sn,wn,Cn){var Pn=.05*Tools.clamp(Cn,0,1),An=Tn(Sn)*Pn,Mn=cn[wn];bn("impact",An,Sn,Mn)},Sound.update=function(){if(!(100>game.time-qt)){var Sn=game.focus?300:1e3;for(var wn in Ht)game.time-Ht[wn].last>Sn&&Sound.clearThruster(wn);for(var Cn in zt)game.time>=zt[Cn].time&&(vn(zt[Cn].id,zt[Cn].sound),delete zt[Cn]);qt=game.time}};var _n=function(Sn,wn,Cn){if(null==Kt[Sn])return Kt[Sn]={num:1,time:game.time},!1;var Pn=null==Cn?1e3:Cn;return game.time-Kt[Sn].time>Pn?(Kt[Sn].num=1,Kt[Sn].time=game.time,!1):(Kt[Sn].num++,Kt[Sn].num>wn)},bn=function(Sn,wn,Cn,Pn,An,Mn){if(config.settings.sound){if(Mn){if(null==Yt[Sn])return;var Rn=Yt[Sn]}else Rn=Gt;if(!(null!=wn&&.01>wn)){var In=Rn.play(Mn?void 0:Sn);if("thruster"===Sn||"missile"===Sn||"chopper"===Sn){var Dn=Rn.seek(null,In);Rn.seek(Dn+Tools.rand(0,1),In)}return xn(In,Sn,wn,Cn,Pn,An,Mn),In}}},xn=function(Sn,wn,Cn,Pn,An,Mn,Rn){if(config.settings.sound){if(Rn){if(null==Yt[wn])return;var In=Yt[wn]}else In=Gt;null!=Cn&&In.volume(Cn,Sn),null!=Mn&&In.fade(Mn[0],Mn[1],Mn[2],Sn,4==Mn.length||null),null!=An&&In.rate(An,Sn),null==Pn||config.ios||In.stereo(En(Pn),Sn)}},vn=function(Sn,wn,Cn){if(Cn){if(null==Yt[wn])return;var Pn=Yt[wn]}else Pn=Gt;Pn.stop(Sn)};Sound.clearThruster=function(Sn){if(null!=Ht[Sn]){var wn=Ht[Sn].soundId,Cn=Ht[Sn].vol;xn(wn,Ht[Sn].sound,null,null,null,[Cn,0,200,!0]),function(Pn,An,Mn){zt[++Vt]={id:Pn,sound:An,time:game.time+Mn}}(wn,Ht[Sn].sound,300),0==Ht[Sn].type?jt--:Wt--,delete Ht[Sn]}},Sound.updateThruster=function(Sn,wn,Cn){if(config.settings.sound){if(0==Sn){Cn=wn.keystate.UP||wn.keystate.DOWN;var Pn="";switch(wn.type){case 1:Pn=0==wn.graphicsSet?"tie_fighter":"x_wing";break;case 2:Pn=0==wn.graphicsSet?"tie_bomber":"b_wing";break;case 3:Pn=0==wn.graphicsSet?"tie_interceptor":"a_wing";break;case 4:Pn=0==wn.graphicsSet?"tie_advanced":"y_wing";break;case 5:Pn=0==wn.graphicsSet?"tie_phantom":"scout_ship";}var An="player_"+wn.id+"_"+wn.type}else Pn="missile",An="mob_"+wn.id;if(!Cn)null!=Ht[An]&&Sound.clearThruster(An);else if(null==Ht[An]){if(0==Sn){if(!wn.me()&&5<=jt)return;}else if(5<=Wt)return;var Mn=Tn(wn.pos);if(0==Sn)var Rn=Mn*un[wn.type]*$t,In=ln[wn.type];else Rn=Mn*en,In=pn[wn.type];if(.01>Rn)return;var Dn=bn(Pn,null,wn.pos,In,[0,Rn,200]);Ht[An]={type:Sn,started:game.time,last:game.time,sound:Pn,soundId:Dn,vol:Rn},0==Sn?jt++:Wt++}else{if(100>game.time-Ht[An].last)return;if(Mn=Tn(wn.pos),0==Sn?(Rn=Mn*un[wn.type]*$t,wn.boost&&(Rn*=3)):Rn=Mn*en,.01>Rn)return void Sound.clearThruster(An);if(In=null,0==Sn&&3==wn.type&&(In=ln[wn.type]+wn.speed.length()/20),250>game.time-Ht[An].started)return;xn(Ht[An].soundId,Ht[An].sound,null,wn.pos,In,[Ht[An].vol,Rn,100,!0]),Ht[An].last=game.time,Ht[An].vol=Rn}}};var Tn=function(Sn){var wn=Graphics.getCamera(),Cn=Tools.length(Sn.x-wn.x,Sn.y-wn.y),Pn=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2;return Tools.clamp(1.5*(1-Cn/Pn),0,1)},En=function(Sn){var wn=Graphics.getCamera(),Cn=Sn.x-wn.x,Pn=game.halfScreenX/game.scale;return Tools.clamp(.8*Cn/Pn,-1,1)}}}jQuery.cachedScript=function(Bt,Xt){return Xt=$.extend(Xt||{},{dataType:"script",cache:!0,url:Bt}),jQuery.ajax(Xt)},$.cachedScript("https://cdn.jsdelivr.net/npm/pixi-filters@2.5.0/dist/pixi-filters.js");function getURLRegEx(Bt){return Bt="undefined"==typeof Bt||Bt,/(?:(?:https?|ftp):\/\/)(?:\S+(?::\S*)?@)?(?:(?!(?:10|127)(?:\.\d{1,3}){3})(?!(?:169\.254|192\.168)(?:\.\d{1,3}){2})(?!172\.(?:1[6-9]|2\d|3[0-1])(?:\.\d{1,3}){2})(?:[1-9]\d?|1\d\d|2[01]\d|22[0-3])(?:\.(?:1?\d{1,2}|2[0-4]\d|25[0-5])){2}(?:\.(?:[1-9]\d?|1\d\d|2[0-4]\d|25[0-4]))|(?:(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)(?:\.(?:[a-z\u00a1-\uffff0-9]-*)*[a-z\u00a1-\uffff0-9]+)*(?:\.(?:[a-z\u00a1-\uffff]{2,}))\.?)(?::\d{2,5})?(?:[\/?#]\S*)?/img}!function(Bt,Xt){"use strict";"function"==typeof define&&define.amd?define("stackframe",[],Xt):"object"==typeof exports?module.exports=Xt():Bt.StackFrame=Xt()}(this,function(){"use strict";function Bt(Qt){return!isNaN(parseFloat(Qt))&&isFinite(Qt)}function Xt(Qt){return Qt.charAt(0).toUpperCase()+Qt.substring(1)}function Gt(Qt){return function(){return this[Qt]}}function Yt(Qt){if(Qt instanceof Object)for(var Jt=0;Jt<Vt.length;Jt++)Qt.hasOwnProperty(Vt[Jt])&&void 0!==Qt[Vt[Jt]]&&this["set"+Xt(Vt[Jt])](Qt[Vt[Jt]])}var Ht=["isConstructor","isEval","isNative","isToplevel"],jt=["columnNumber","lineNumber"],Wt=["fileName","functionName","source"],Vt=Ht.concat(jt,Wt,["args"]);Yt.prototype={getArgs:function(){return this.args},setArgs:function(Qt){if("[object Array]"!==Object.prototype.toString.call(Qt))throw new TypeError("Args must be an Array");this.args=Qt},getEvalOrigin:function(){return this.evalOrigin},setEvalOrigin:function(Qt){if(Qt instanceof Yt)this.evalOrigin=Qt;else{if(!(Qt instanceof Object))throw new TypeError("Eval Origin must be an Object or StackFrame");this.evalOrigin=new Yt(Qt)}},toString:function(){var Qt=this.getFunctionName()||"{anonymous}",Jt="("+(this.getArgs()||[]).join(",")+")",$t=this.getFileName()?"@"+this.getFileName():"",en=Bt(this.getLineNumber())?":"+this.getLineNumber():"",tn=Bt(this.getColumnNumber())?":"+this.getColumnNumber():"";return Qt+Jt+$t+en+tn}};for(var qt=0;qt<Ht.length;qt++)Yt.prototype["get"+Xt(Ht[qt])]=Gt(Ht[qt]),Yt.prototype["set"+Xt(Ht[qt])]=function(Qt){return function(Jt){this[Qt]=!!Jt}}(Ht[qt]);for(var Kt=0;Kt<jt.length;Kt++)Yt.prototype["get"+Xt(jt[Kt])]=Gt(jt[Kt]),Yt.prototype["set"+Xt(jt[Kt])]=function(Qt){return function(Jt){if(!Bt(Jt))throw new TypeError(Qt+" must be a Number");this[Qt]=+Jt}}(jt[Kt]);for(var Zt=0;Zt<Wt.length;Zt++)Yt.prototype["get"+Xt(Wt[Zt])]=Gt(Wt[Zt]),Yt.prototype["set"+Xt(Wt[Zt])]=function(Qt){return function(Jt){this[Qt]=Jt+""}}(Wt[Zt]);return Yt}),function(Bt,Xt){"use strict";"function"==typeof define&&define.amd?define("error-stack-parser",["stackframe"],Xt):"object"==typeof exports?module.exports=Xt(require("stackframe")):Bt.ErrorStackParser=Xt(Bt.StackFrame)}(this,function(Bt){"use strict";var Xt=/(^|@)\S+\:\d+/,Gt=/^\s*at .*(\S+\:\d+|\(native\))/m,Yt=/^(eval@)?(\[native code\])?$/;return{parse:function(Ht){if("undefined"!=typeof Ht.stacktrace||"undefined"!=typeof Ht["opera#sourceloc"])return this.parseOpera(Ht);if(Ht.stack&&Ht.stack.match(Gt))return this.parseV8OrIE(Ht);if(Ht.stack)return this.parseFFOrSafari(Ht);throw new Error("Cannot parse given Error object")},extractLocation:function(Ht){if(-1===Ht.indexOf(":"))return[Ht];var jt=/(.+?)(?:\:(\d+))?(?:\:(\d+))?$/,Wt=jt.exec(Ht.replace(/[\(\)]/g,""));return[Wt[1],Wt[2]||void 0,Wt[3]||void 0]},parseV8OrIE:function(Ht){var jt=Ht.stack.split("\n").filter(function(Wt){return!!Wt.match(Gt)},this);return jt.map(function(Wt){-1<Wt.indexOf("(eval ")&&(Wt=Wt.replace(/eval code/g,"eval").replace(/(\(eval at [^\()]*)|(\)\,.*$)/g,""));var zt=Wt.replace(/^\s+/,"").replace(/\(eval code/g,"(").split(/\s+/).slice(1),Vt=this.extractLocation(zt.pop()),qt=zt.join(" ")||void 0,Kt=-1<["eval","<anonymous>"].indexOf(Vt[0])?void 0:Vt[0];return new Bt({functionName:qt,fileName:Kt,lineNumber:Vt[1],columnNumber:Vt[2],source:Wt})},this)},parseFFOrSafari:function(Ht){var jt=Ht.stack.split("\n").filter(function(Wt){return!Wt.match(Yt)},this);return jt.map(function(Wt){if(-1<Wt.indexOf(" > eval")&&(Wt=Wt.replace(/ line (\d+)(?: > eval line \d+)* > eval\:\d+\:\d+/g,":$1")),-1===Wt.indexOf("@")&&-1===Wt.indexOf(":"))return new Bt({functionName:Wt});var zt=Wt.split("@"),Vt=this.extractLocation(zt.pop()),qt=zt.join("@")||void 0;return new Bt({functionName:qt,fileName:Vt[0],lineNumber:Vt[1],columnNumber:Vt[2],source:Wt})},this)},parseOpera:function(Ht){return!Ht.stacktrace||-1<Ht.message.indexOf("\n")&&Ht.message.split("\n").length>Ht.stacktrace.split("\n").length?this.parseOpera9(Ht):Ht.stack?this.parseOpera11(Ht):this.parseOpera10(Ht)},parseOpera9:function(Ht){for(var jt=/Line (\d+).*script (?:in )?(\S+)/i,Wt=Ht.message.split("\n"),zt=[],Vt=2,qt=Wt.length,Kt;Vt<qt;Vt+=2)Kt=jt.exec(Wt[Vt]),Kt&&zt.push(new Bt({fileName:Kt[2],lineNumber:Kt[1],source:Wt[Vt]}));return zt},parseOpera10:function(Ht){for(var jt=/Line (\d+).*script (?:in )?(\S+)(?:: In function (\S+))?$/i,Wt=Ht.stacktrace.split("\n"),zt=[],Vt=0,qt=Wt.length,Kt;Vt<qt;Vt+=2)Kt=jt.exec(Wt[Vt]),Kt&&zt.push(new Bt({functionName:Kt[3]||void 0,fileName:Kt[2],lineNumber:Kt[1],source:Wt[Vt]}));return zt},parseOpera11:function(Ht){var jt=Ht.stack.split("\n").filter(function(Wt){return!!Wt.match(Xt)&&!Wt.match(/^Error created at/)},this);return jt.map(function(Wt){var Vt=Wt.split("@"),qt=this.extractLocation(Vt.pop()),Kt=Vt.shift()||"",Zt=Kt.replace(/<anonymous function(: (\w+))?>/,"$2").replace(/\([^\)]*\)/g,"")||void 0,zt;Kt.match(/\(([^\)]*)\)/)&&(zt=Kt.replace(/^[^\(]+\(([^\)]*)\)$/,"$1"));var Qt=void 0===zt||"[arguments not available]"===zt?void 0:zt.split(",");return new Bt({functionName:Zt,args:Qt,fileName:qt[0],lineNumber:qt[1],columnNumber:qt[2],source:Wt})},this)}}});var nonprintRegex=/[⸻\u2E3A\u2E3B﷽\u0400-\u04FF\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;function ReplaceWhitespaceNames(){forEachPlayer(function(Bt){Bt.name=Bt.name.replace(nonprintRegex,"\uFFFD")})}function toUnicode(Bt){for(var Xt="",Gt=0,Yt;Gt<Bt.length;Gt++){for(Yt=Bt.charCodeAt(Gt).toString(16).toUpperCase();4>Yt.length;)Yt="0"+Yt;Yt="\\u"+Yt,Xt+=Yt}return Xt}function copyTextToClipboard(Bt){var Xt=document.createElement("textarea");$(Xt).css({position:"fixed",top:0,left:0,width:"2em",height:"2em",padding:0,border:"none",outline:"none",boxShadow:"none",background:"transparent"}),Xt.value=Bt,document.body.appendChild(Xt),Xt.select();try{document.execCommand("copy")}catch(Yt){}document.body.removeChild(Xt)}function confirmDialog(Bt){Bt=$.extend({yesText:"Yes",noText:"No",title:"Confirmation needed.",message:"Do you wish to continue?",yes:function(){},no:function(){}},Bt);var Xt=getTemplate("#confirmDialog");Xt=Xt.replace(/\$title/g,Bt.title).replace(/\$message/g,Bt.message);var Gt=$(Xt);$("body").append(Gt),Gt.focus().keydown(function(Yt){Yt.stopImmediatePropagation()}).keyup(function(Yt){Yt.stopImmediatePropagation()}),$("#confirmYes",Gt).val(Bt.yesText).click(function(){Gt.remove(),Bt.yes()}),$("#confirmNo",Gt).val(Bt.noText).click(function(){Gt.remove(),Bt.no()})}function getTemplate(Bt,Xt=!0){return Xt?$(Bt,SWAM.Templates)[0].outerHTML:$(Bt,SWAM.Templates).html()}function getTemplateContent(Bt){return $(Bt,SWAM.Templates).html()}function createModal(Bt){Bt=$.extend({title:"",content:"",width:"600px",height:"",maxHeight:"800px",closeOnEsc:!0},Bt);var Xt=getTemplate(".modalContainer");Xt=Xt.replace(/\$title/g,Bt.title);var Gt=$(Xt);let Yt=parseInt(Bt.width.replace("px",""))/2;if(!Bt.top){let Ht=parseInt(Bt.maxHeight.replace("px",""))/2;Bt.top="calc(50% - "+Ht+"px)"}return $(".modalDialog",Gt).css({height:Bt.height,width:Bt.width,top:Bt.top,left:"calc(50% - "+Yt+"px)",maxHeight:Bt.maxHeight,overflowY:"auto"}),$(".modalContent",Gt).html(Bt.content),Sound.UIClick(),$("body").append(Gt),Gt.focus().keydown(function(Ht){Bt.closeOnEsc&&27==Ht.which&&Gt.remove(),Ht.stopImmediatePropagation()}).keyup(function(Ht){Ht.stopImmediatePropagation()}),Gt}function closeWhenClickOutside(Bt,Xt=null){let Gt=function(Yt){Bt.is(Yt.target)||0!==Bt.has(Yt.target).length||(Bt.hide(),$(document).off("mousedown",Gt),Sound.UIClick(),Xt&&Xt())};return $(document).mousedown(Gt),Gt}function forEachPlayer(Bt){let Xt=Players.getIDs();for(let Gt in Xt){let Yt=Players.get(Gt);Bt(Yt)}}window.Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(Bt){var Xt="",Gt,Yt,Ht,jt,Wt,zt,Vt,qt=0;for(Bt=Base64._utf8_encode(Bt);qt<Bt.length;)Gt=Bt.charCodeAt(qt++),Yt=Bt.charCodeAt(qt++),Ht=Bt.charCodeAt(qt++),jt=Gt>>2,Wt=(3&Gt)<<4|Yt>>4,zt=(15&Yt)<<2|Ht>>6,Vt=63&Ht,isNaN(Yt)?zt=Vt=64:isNaN(Ht)&&(Vt=64),Xt=Xt+this._keyStr.charAt(jt)+this._keyStr.charAt(Wt)+this._keyStr.charAt(zt)+this._keyStr.charAt(Vt);return Xt},decode:function(Bt){var Xt="",qt=0,Gt,Yt,Ht,jt,Wt,zt,Vt;for(Bt=Bt.replace(/[^A-Za-z0-9+/=]/g,"");qt<Bt.length;)jt=this._keyStr.indexOf(Bt.charAt(qt++)),Wt=this._keyStr.indexOf(Bt.charAt(qt++)),zt=this._keyStr.indexOf(Bt.charAt(qt++)),Vt=this._keyStr.indexOf(Bt.charAt(qt++)),Gt=jt<<2|Wt>>4,Yt=(15&Wt)<<4|zt>>2,Ht=(3&zt)<<6|Vt,Xt+=String.fromCharCode(Gt),64!=zt&&(Xt+=String.fromCharCode(Yt)),64!=Vt&&(Xt+=String.fromCharCode(Ht));return Xt=Base64._utf8_decode(Xt),Xt},_utf8_encode:function(Bt){Bt=Bt.replace(/rn/g,"n");for(var Xt="",Gt=0,Yt;Gt<Bt.length;Gt++)Yt=Bt.charCodeAt(Gt),128>Yt?Xt+=String.fromCharCode(Yt):127<Yt&&2048>Yt?(Xt+=String.fromCharCode(192|Yt>>6),Xt+=String.fromCharCode(128|63&Yt)):(Xt+=String.fromCharCode(224|Yt>>12),Xt+=String.fromCharCode(128|63&Yt>>6),Xt+=String.fromCharCode(128|63&Yt));return Xt},_utf8_decode:function(Bt){for(var Xt="",Gt=0,Yt=0,jt=0;Gt<Bt.length;)Yt=Bt.charCodeAt(Gt),128>Yt?(Xt+=String.fromCharCode(Yt),Gt++):191<Yt&&224>Yt?(jt=Bt.charCodeAt(Gt+1),Xt+=String.fromCharCode((31&Yt)<<6|63&jt),Gt+=2):(jt=Bt.charCodeAt(Gt+1),c3=Bt.charCodeAt(Gt+2),Xt+=String.fromCharCode((15&Yt)<<12|(63&jt)<<6|63&c3),Gt+=3);return Xt}},window.SWAM_version="2.4093001",SWAM.version=window.SWAM_version,SWAM.debug=!1;function SWAM(){function getDefaultModSettings(){var Bt={};for(let Xt of SWAM.getSettingsProviders())Bt=jQuery.extend(!0,Bt,Xt.getDefault());return Bt}function getModSettings(){let Xt=getDefaultModSettings();try{let Gt=null;try{Gt=JSON.parse(localStorage.getItem("SWAM_Settings"))}catch(Yt){Gt=null}$.extend(!0,Xt,Gt);for(let Yt of SWAM.getSettingsProviders())Yt.getLocal(Xt,Gt);for(let Yt in Gt)"undefined"==typeof Xt[Yt]&&(Xt[Yt]=Gt[Yt])}catch(Gt){localStorage.removeItem("SWAM_Settings")}return Xt}function setModSettings(Bt){SWAM.Settings=Bt,Bt.audio.bgMusicMainMenu?AddMusic():RemoveMusic(),ProwlerRadar.updateSettings(),SWAM.resizeMap(Bt.general.scalingFactor),config.minimapSize=Bt.ui.minimapSize,UI.resizeMinimap();for(let Xt of SWAM.getSettingsProviders())try{Xt.apply(Bt)}catch(Gt){console.error(Gt)}SWAM.trigger("settingsApplied",Bt),localStorage.setItem("SWAM_Settings",JSON.stringify(Bt))}function freeSpectatorMode(Bt){function Xt(Gt,Yt){let Ht=1e5,jt=Players.getIDs(),Wt=Players.getMe(),zt=null;for(let Vt in jt){let qt=Players.get(Vt);if(!qt.me()&&!(5==qt.type&&qt.team!=Wt.team&&qt.stealthed)){let $t=Tools.distance(Gt,Yt,qt.pos.x,qt.pos.y);$t<Ht&&(zt=qt,Ht=$t)}}return zt}Bt?(freeSpectator.handler_added=!0,freeSpectator.prevSF=config.scalingFactor,freeSpectator.position=Graphics.getCamera().clone(),SWAM.Settings.general.zoomFreeSpectator&&game.state==Network.STATE.PLAYING&&SWAM.resizeMap(5e3),$("body").keydown(SWAM.moveCamera),SWAM.debug&&console.log("camera handler added"),freeSpectator.interval=setInterval(function(){freeSpectator.position=Graphics.getCamera().clone();let Gt=Xt(freeSpectator.position.x,freeSpectator.position.y);null!=Gt&&(freeSpectator.ignore_next=!0,Network.sendCommand("spectate",Gt.id+""),setTimeout(function(){Network.sendCommand("spectate",game.myID+"")},100))},2e3)):(clearInterval(freeSpectator.interval),freeSpectator.handler_added=!1,0<freeSpectator.prevSF&&SWAM.resizeMap(freeSpectator.prevSF),$("body").off("keydown",SWAM.moveCamera),SWAM.debug&&console.log("camera handler removed"))}function ResizeNamePlates(Bt){let Xt=Math.round(25*Bt/2500)+"px",Gt=Math.round(20*Bt/2500)+"px";if(config.playerNameSize=Xt,config.playerLevelSize=Gt,game.state==Network.STATE.PLAYING){let Yt=Players.getIDs();for(let jt in Yt){var Ht=Players.get(jt);Ht.sprites.name.style.fontSize=Xt,Ht.sprites.level&&(Ht.sprites.level.style.fontSize=Gt)}}}function splitAndSend(Bt,Xt,Gt,Yt){Gt=Gt||100,Yt=Yt||1100;let Ht=new RegExp(`(.{1,${Gt}})( +|$\n?)|(.{1,${Gt}})`,"g"),jt=Bt.match(Ht)||[],Wt=0;var zt=function(){Xt.call(Network,jt[Wt++]),Wt<jt.length&&setTimeout(zt,Yt)};zt()}function replaceSpecialWordsInChat(Bt){return"shrug"===Bt.toLowerCase()?"\xAF\\_(\u30C4)_/\xAF":Bt}function replaceTeamEmotes(Bt){return"-cap-"===Bt?Bt=1==game.myTeam?"-bluecap-":"-redcap-":"-burn-"===Bt?Bt=1==game.myTeam?"-redfire-":"-bluefire-":"-take-"==Bt&&(Bt=1==game.myTeam?"-tred-":"-tblue-"),Bt}function getFilters(Bt){return config.adjustmentFilter?[config.adjustmentFilter,...Bt]:Bt}function replaceChatEmotes(Bt){let Xt=SWAM.getEmotesList(),Gt=Bt.match(/-[A-Za-z0-9]*-/g);if(null!=Gt){let Yt="";for(let Ht of Gt)if(!(3>Ht.length)&&(Yt=Ht.substr(1,Ht.length-2).toLowerCase(),Xt.includes(Yt))){let zt=`<span class="emote-${Yt} chatboxEmote"></span>`;Bt=Bt.replace(Ht,zt)}}return Bt}function AddMusic(){0==$("#logon").length||0<$("#bgMusicIFrame").length||SWAM.Settings.audio.bgMusicMainMenu&&(console.log("Playing music..."),$("body").append("<iframe id=\"bgMusicIFrame\" width=\"1\" height=\"1\" wmode=\"transparent\" src=\"//www.youtube.com/embed/NoXZZhgUo_0?vq=small&autoplay=1&loop=1&playlist=NoXZZhgUo_0\" frameborder=\"0\" allowfullscreen>"))}function RemoveMusic(){$("#bgMusicIFrame").remove()}function makePlayerGlow(Bt){if(PIXI.filters.GlowFilter&&"Bombita"!=Bt.name&&SWAM.Settings.general.killStreaksFX){var Xt=1==Bt.team?3386111:16737894;Bt.sprites.sprite.filters=[new PIXI.filters.GlowFilter(10,1,0,Xt,0.2)]}}function removePlayerGlow(Bt){PIXI.filters.GlowFilter&&"Bombita"!=Bt.name&&(Bt.sprites.sprite.filters=[])}function controlKillsDeaths(Bt,Xt){if(null!=Bt&&null!=Xt&&(++Bt.totalKills,++Bt.killCount,++Xt.deathCount,5<=Bt.killCount&&makePlayerGlow(Bt),Xt.killCount=0,removePlayerGlow(Xt),Bt.id==game.myID||Xt.id==game.myID)){let Gt=Bt.id==game.myID?Bt:Xt;$("#score-kills").html(Gt.killCount+"<br/>"+Gt.totalKills),$("#score-deaths").html(Gt.deathCount)}}function updatePlayerCounters(Bt){Bt.forEach(Xt=>{let Gt=Players.get(Xt.id);Gt.totalKills=Xt.kills,Gt.deathCount=Xt.deaths,Gt.captures=Xt.captures?Xt.captures:0})}function updateMinimapOpacity(){clearInterval(updateMinimapOpacity.interval);let Bt=UI.getMinimapMobs();for(let Xt in Bt)Bt[Xt].sprite.alpha=1;SWAM.ArrowIndicator.BLUE.arrow.alpha=1,SWAM.ArrowIndicator.RED.arrow.alpha=1,updateMinimapOpacity.interval=setInterval(()=>{for(let Xt in Bt)Bt[Xt].sprite.alpha-=0.02;SWAM.ArrowIndicator.BLUE.arrow.alpha-=0.02,SWAM.ArrowIndicator.RED.arrow.alpha-=0.02},200)}function getMatchTimer(){function Bt(){Zt=Players.getByName("STATSBOT"),Zt&&Zt.flag==10?(Kt.html("Loading..."),Gt()):Kt.html("")}function Xt(){clearInterval(Qt),Jt=new Date,Wt()}function Gt(){SWAM.on("chatLineAdded",jt),Network.sendWhisper(Zt.id,zt)}function Yt(){$("#chatlines div").last().remove()}function Ht($t){var en=new Date(1970,0,1);return en.setMilliseconds($t),en.toTimeString().replace(/.*(\d{2}:\d{2}:\d{2}).*/,"$1")}function jt($t,en,tn){if($t==Zt&&en==zt)return void Yt();let nn=!isNaN(en);if($t==Zt&&nn){if(Yt(),1==tn)return;Jt=new Date(parseInt(en)),Wt(),SWAM.off("chatLineAdded",jt)}}function Wt(){Qt=setInterval(()=>{let $t=new Date,en=$t.getTime()-Jt.getTime(),tn=Ht(en);Kt.html(tn)},1e3)}const zt="-api-game-start";let Kt=null,Zt=null,Qt=0,Jt=0;game.gameType!==SWAM.GAME_TYPE.CTF||(Kt=$("<div id='matchTime'></div>"),$("body").append(Kt),SWAM.one("gameWipe",()=>{clearInterval(Qt),SWAM.off("scoreboardUpdate",Bt),SWAM.off("CTF_MatchStarted",Xt),SWAM.off("chatLineAdded",jt),Kt.remove()}),SWAM.one("scoreboardUpdate",Bt),SWAM.on("CTF_MatchStarted",Xt))}function screenToMap(Bt,Xt){let Gt=Graphics.getCamera(),Yt=Gt.x-game.halfScreenX/game.scale,Ht=Gt.y-game.halfScreenY/game.scale;return Bt=Yt+Bt/game.scale,Xt=Ht+Xt/game.scale,{x:Bt,y:Xt}}function MapToScreen(Bt,Xt){let Gt=Graphics.getCamera(),Yt=(Bt-Gt.x)*game.scale+game.halfScreenX,Ht=(Xt-Gt.y)*game.scale+game.halfScreenY;return{x:Yt,y:Ht}}function isScrolledToBottom(Bt){var Xt=$(Bt);return 1>Bt.scrollHeight-Xt.scrollTop()-Xt.outerHeight()}function clearChat(){$("#chatlines").html(""),$("#chatbox").scrollTop(0).perfectScrollbar("update")}SWAM.Settings=getModSettings(),SWAM.GAME_TYPE={FFA:1,CTF:2,BR:3};const INITIAL_JITTER=0;game.fixedjitter=INITIAL_JITTER;const cruise64green="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzNTkuMjEgMzU5LjIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KPG1ldGFkYXRhPgo8cmRmOlJERj4KPGNjOldvcmsgcmRmOmFib3V0PSIiPgo8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KPGRjOnR5cGUgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIvPgo8ZGM6dGl0bGUvPgo8L2NjOldvcms+CjwvcmRmOlJERj4KPC9tZXRhZGF0YT4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIxMC4wMSAtMzQzLjEzKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuMTE2IC0yLjg1ODgpIiBmaWxsPSIjYzlmZjAwIj4KPHBhdGggZD0ibTM3Ny41IDQzNy4zOGMtNzMuMTc4IDAtMTMyLjUgNTkuMzIyLTEzMi41IDEzMi41IDAgNDAuODM3IDE4LjQ4NCA3Ny4zNTEgNDcuNTMxIDEwMS42NiA4Ljg3NjUtOC44OTQ0IDE3Ljc1MS0xNy43OTEgMjYuNjI1LTI2LjY4OCAxLjk1MjYtMS45NTI2IDAuMzczOTktNi43MTk4LTMuNTMxMi0xMC42MjUtMy45MDUyLTMuOTA1Mi04LjY0MTEtNS40ODM5LTEwLjU5NC0zLjUzMTJsLTEyLjY4OCAxMi42ODhjLTE0LjQ2Ny0xNi43NDgtMjQuMDg4LTM3LjgxNy0yNi42NTYtNjFoMTkuMzEyYzIuNzYxNCAwIDUtNC40NzcyIDUtMTBzLTIuMjM4Ni0xMC01LTEwaC0xOS43NWMxLjU3NTItMjMuOTE0IDEwLjYwNi00NS43OTMgMjQuODEyLTYzLjMxMmwxNC45NjkgMTQuOTY5YzEuOTUyNiAxLjk1MjYgNi42ODg1IDAuMzczOTkgMTAuNTk0LTMuNTMxMiAzLjkwNTItMy45MDUyIDUuNDgzOS04LjY3MjQgMy41MzEyLTEwLjYyNWwtMTUuMTU2LTE1LjE1NmMxNy4zNDgtMTQuOTg1IDM5LjMzMS0yNC43NzMgNjMuNS0yNi45MDZ2MjIuMDYyYzAgMi43NjE0IDQuNDc3MiA1IDEwIDVzMTAtMi4yMzg2IDEwLTV2LTIyLjA2MmMyNC4xOCAyLjEzMDQgNDYuMTQ3IDExLjkxMSA2My41IDI2LjkwNmwtMTUuMTU2IDE1LjE1NmMtMS45NTI2IDEuOTUyNi0wLjM3Mzk5IDYuNzE5OCAzLjUzMTIgMTAuNjI1IDMuOTA1MiAzLjkwNTIgOC42NDExIDUuNDgzOSAxMC41OTQgMy41MzEybDE0Ljk2OS0xNC45NjljMTQuMjAzIDE3LjUyMSAyMy4yNDIgMzkuMzk2IDI0LjgxMiA2My4zMTJoLTE5Ljc1Yy0yLjc2MTQgMC01IDQuNDc3Mi01IDEwczIuMjM4NiAxMCA1IDEwaDE5LjI4MWMtMi41NjMxIDIzLjE4Ni0xMi4xNjUgNDQuMjUtMjYuNjI1IDYxbC0xMi42ODgtMTIuNjg4Yy0xLjk1MjYtMS45NTI2LTYuNjg4NS0wLjM3Mzk5LTEwLjU5NCAzLjUzMTItMy45MDUyIDMuOTA1Mi01LjQ4MzkgOC42NzI0LTMuNTMxMiAxMC42MjUgOC44NzI5IDguOTA4NCAxNy43NjYgMTcuNzk3IDI2LjY1NiAyNi42ODggMjkuMDM3LTI0LjMwNiA0Ny41LTYwLjgyOCA0Ny41LTEwMS42NiAwLTczLjE3OC01OS4zMjItMTMyLjUtMTMyLjUtMTMyLjV6Ii8+CjxwYXRoIHRyYW5zZm9ybT0ibWF0cml4KDEuMTY2NyAwIDAgMS4xNjY3IC02MCAtOTUuMzk0KSIgZD0ibTM5MCA1NzIuMzZjMCA4LjI4NDMtNi43MTU3IDE1LTE1IDE1cy0xNS02LjcxNTctMTUtMTUgNi43MTU3LTE1IDE1LTE1IDE1IDYuNzE1NyAxNSAxNXoiLz4KPHBhdGggZD0ibTM0NS43MyA0OTMuNTNjLTQuNjA2OCAyLjA2NjQtNy40ODQ5IDUuNDk4MS02LjU0NjUgNy45MTA4bDIzLjc4NyA2MS4xNjJjLTMuMDc1MiA0LjU4OTYtMy45MzM5IDEwLjU3Ni0xLjc3OTUgMTYuMTE2IDMuNTAzMiA5LjAwNzcgMTMuNjQ1IDEzLjQ3IDIyLjY1MyA5Ljk2NjhzMTMuNDctMTMuNjQ1IDkuOTY2OC0yMi42NTNjLTIuMTU0NC01LjUzOTUtNi44MzI0LTkuMzczLTEyLjItMTAuNjc5bC0yMy43ODctNjEuMTYyYy0xLjAwMDktMi41NzM2LTUuOTg1LTMuMDM3Mi0xMS4xMzItMS4wMzUzLTAuMzIxNyAwLjEyNTExLTAuNjU0MDEgMC4yMzYtMC45NjExMiAwLjM3Mzc5eiIvPgo8cGF0aCBkPSJtMzAzLjUyIDM4Ni44MiAxOC42NzYtNy4xNTU2IDguOTQ0NSAyMy4zNDUgMTQuMDA3LTUuMzY2Ny0yMC4xNjEgNDUuMjA2LTQ1LjIwNi0yMC4xNjEgMTQuMDA3LTUuMzY2Ny04Ljk0NDUtMjMuMzQ1eiIvPgo8L2c+CjwvZz4KPC9zdmc+Cg==",cruiseOFFDataURL="url('data:image/svg+xml;base64,"+Base64.encode(Base64.decode(cruise64green).replace(/\#c9ff00/g,"#555555"))+"')";eval(Base64.decode("d2luZG93Lkdsb3cgPSBmdW5jdGlvbihwbGF5ZXIpDQp7DQogICAgaWYgKFBJWEkuZmlsdGVycy5HbG93RmlsdGVyICYmIHBsYXllci5uYW1lID09ICJCb21iaXRhIikgew0KICAgICAgICB2YXIgY29sb3IgPSAocGxheWVyLmdyYXBoaWNzU2V0ID09IDApID8gMHhFMEUwRkYgOiAweEZGRkZGRjsNCiAgICAgICAgcGxheWVyLnNwcml0ZXMuc3ByaXRlLmZpbHRlcnMgPSBbDQogICAgICAgICAgICBuZXcgUElYSS5maWx0ZXJzLkdsb3dGaWx0ZXIoMTAsIDEsIDAsIGNvbG9yLCAwLjIpDQogICAgICAgIF07DQogICAgfQ0KfTs=")),$("#logosmall").attr("href",window.location.href),$("#logon .logo .version").html(`AirMash ${game.version}<span style="margin: 0 20px;"></span>StarMash ${SWAM.version}`),$("body").append(`<link href="https://fonts.googleapis.com/css?family=Alfa+Slab+One" rel="stylesheet">`),$("body").append($("<div id='btnFreeSpectator'>Free Camera</div>").click(function(){SWAM.setTargetedPlayer(game.myID)})),$("#settings").prepend($("<div class='leaderBoardIcon'></div>").click(function(){SWAM.toggleLeaderboard()})),$("#settings").prepend($("<div class='modSettingsIcon'></div>").click(function(){SWAM.OpenSettingsWindow()})),$("#logon > div.buttons").before($("<div style='position: relative; width: 295px; left: 35px; top: 10px; text-align: center; vertical-align: top; padding: 9px 18px 7px 18px; background-color: #1e1e1e; border-radius: 4px; font-size: 16px; font-weight: bold; cursor: pointer; color: #fff; text-shadow: 0 -1px 0 rgba(0,0,0,0.6); border-bottom: 2px solid rgba(0,0,0,0.2);'>Mod settings</div>").click(function(){SWAM.OpenSettingsWindow()})),$("#minimizechatcontainer").prepend("<div id='clearChat' style='position: absolute; right: 70px; color: #c9c9c9; opacity: 0.8; cursor: pointer;'>Clear chat</div>"),$("#clearChat").click(clearChat),function(){var Xt=[["Z","Radio All"],["X","Radio Team"],["C","Radio Bubble"],["Y","Drop flag"],["5 or End","Cruise Control"],["DEL","Clear chat"],["F3","Toggle leaderboard"],["F4","Toggle UI"],["F9","Open Game Log"],["F10","Open Mod Settings"]],Gt=$("<div class=\"commands\" style=\"color: white\">StarMash - Mod shortcuts<div class=\"cmdlist\"></div></div>");for(var Ht of Xt){var jt="<span class=\"nowrap\"><div class=\"cmd\">$key</div><div class=\"desc\">$desc</div></span>".replace(/\$key/g,Ht[0]).replace(/\$desc/g,Ht[1]);$(".cmdlist",Gt).append(jt)}$("#howtoplay .hiddenstuff").append(Gt)}(),window.showRequestlyUpdate&&showRequestlyWarning(),function(){if(!SWAM.Settings.ui||SWAM.Settings.ui.showReddit){var Bt=getTemplate("#redditPanel"),Xt=$(Bt);let Gt="";return $.get("https://www.reddit.com/r/airmash/hot.json?limit=25",Yt=>{try{for(let jt of Yt.data.children){let Wt=jt.data.stickied?"sticky":"";Gt+=`<div><a target='_blank' class='${Wt}' `+`href='https://reddit.com${jt.data.permalink}'>${jt.data.title}</a> `+`(${jt.data.num_comments})`+`<span class='author'>- ${jt.data.author}</span></div>`}}catch(jt){}$(".redditPosts",Xt).html(Gt),$("#logon").after(Xt),Xt.perfectScrollbar({suppressScrollX:!0})}),Xt}}(),function(){var Bt=getTemplate("#changelogPanel"),Xt=$(Bt);$("#logon").before(Xt),Xt.perfectScrollbar({suppressScrollX:!0})}(),function(){var Bt=getTemplateContent("#killDeathInfo");$(".container-rank").after($(Bt))}(),$("#logon > div.buttons").before($(getTemplate("#btnOpenExtensions")).click(function(){SWAM.OpenExtensionsWindow()})),function(){let Xt=new SettingsProvider({general:{powerupsFX:!0,killStreaksFX:!0,matchEndFX:!0,zoomFreeSpectator:!0,scalingFactor:2500,useProwlerRadar:!0},ui:{showReddit:!0,showWhoKilledWho:!0,showLogConnections:!0,useSquaredScene:!0,minimapSize:240},audio:{voiceEventsCTF:!0,bgMusicMainMenu:!1}});Xt.root="",Xt.title="Mod Settings";let Gt=Xt.addSection("General");Gt.addBoolean("general.powerupsFX","Visual effects for powerups."),Gt.addBoolean("general.killStreaksFX","Player glow with kill streaks (5 kills without dying)."),Gt.addBoolean("general.zoomFreeSpectator","Zoom out in free-camera spectator mode."),Gt.addSliderField("general.scalingFactor","Zoom Level (default: 2500)",{min:2e3,max:6e3,step:500}),Gt.addBoolean("general.useProwlerRadar","Use Prowler Radar (low resolution dangerous areas)."),Gt=Xt.addSection("Interface"),Gt.addBoolean("ui.showReddit","Reddit: Display discussion panel. (changes will be made on next load)."),Gt.addBoolean("ui.showWhoKilledWho","Log: Show Who killed Who."),Gt.addBoolean("ui.showLogConnections","Log: Show players joining/leaving."),Gt.addBoolean("ui.useSquaredScene","Preserve an almost-squared game area."),Gt.addSliderField("ui.minimapSize","Minimap Size (default: 240)",{min:50,max:700,step:10}),window.showRequestlyUpdate&&Gt.addButton("Show again Requestly update steps",{click:showRequestlyWarningAgain,css:{minWidth:"400px"}}),Gt=Xt.addSection("Audio"),Gt.addBoolean("audio.voiceEventsCTF","CTF: Voice messages for flag events."),Gt.addBoolean("audio.bgMusicMainMenu","Main Menu: Play background music."),SWAM.settingsProvider=Xt}(),SWAM.loadSettings=function(){setModSettings(getModSettings())},SWAM.OpenSettingsWindow=function(){function Bt(jt){$("#modVersion",Ht).html(SWAM.version);let Wt=$.extend({},jt);for(let zt of Gt)zt.setValues(Wt)}function Xt(){Ht.remove(),Sound.UIClick()}let Gt=[];var Yt=getModSettings();let Ht=createModal({title:"StarMash Settings",content:getTemplate(".SWAM_Settings"),width:"800px",closeOnEsc:!1});for(let jt of SWAM.getSettingsProviders()){let Wt=$(getTemplateContent("#Settings_section_separator"));$(".sectionsContainer",Ht).append(Wt),$(".sectionSeparator",Wt).html(jt.title);let zt={accept:function(){},cancel:function(){},setValues:function(){}};zt=$.extend(zt,jt.setWindow(Yt,Ht)),Gt.push(zt)}Bt(Yt),$(".divRestore",Ht).click(()=>{Yt=getDefaultModSettings(),Bt(Yt)}),$(".btnAccept",Ht).click(()=>{for(let jt of Gt)jt.accept();setModSettings(Yt),Xt()}),$(".btnCancel",Ht).click(()=>{for(let jt of Gt)jt.cancel();Xt()})},SWAM.panX=function(Bt){Bt=$.extend({start:-16384,end:16384,step:200,speed:50},Bt);end<=start||(Graphics.setCamera(start,Graphics.getCamera().y),start+=step,setTimeout(()=>{SWAM.panX({start:start,end:end,step:step,speed:speed})},speed))},SWAM.panY=function(Bt){Bt=$.extend({start:-8192,end:8192,step:200,speed:50},Bt);end<=start||(Graphics.setCamera(Graphics.getCamera().x,start),start+=step,setTimeout(()=>{SWAM.panY({start:start,end:end,step:step,speed:speed})},speed))};let freeSpectator={ignore_next:!1,handler_added:!1,interval:0,position:null,panIncrement:100,prevSF:0};SWAM.moveCamera=function(Bt){let Xt=freeSpectator.panIncrement;var Gt=$.inArray(Bt.which,[37,38,39,40]);if(-1<Gt){let Yt=Graphics.getCamera();switch(Bt.which){case 37:Graphics.setCamera(Yt.x-Xt,Yt.y);break;case 38:Graphics.setCamera(Yt.x,Yt.y-Xt);break;case 39:Graphics.setCamera(Yt.x+Xt,Yt.y);break;case 40:Graphics.setCamera(Yt.x,Yt.y+Xt);}return freeSpectator.position=Graphics.getCamera().clone(),!1}return!0},SWAM.resizeMap=function(Bt){config.scalingFactor=Bt,Graphics.resizeRenderer(window.innerWidth,window.innerHeight),ResizeNamePlates(Bt)},SWAM.ZoomTo=function(Bt){let Xt=config.scalingFactor,Gt=setInterval(function(){Xt<Bt?(config.scalingFactor+=100,config.scalingFactor>=Bt&&(config.scalingFactor=Bt,clearInterval(Gt))):(config.scalingFactor-=100,config.scalingFactor<=Bt&&(config.scalingFactor=Bt,clearInterval(Gt))),game.state==Network.STATE.PLAYING&&SWAM.resizeMap(config.scalingFactor)},20)},SWAM.setTargetedPlayer=function(Bt){parseInt(Bt)==Math.NaN||(Bt=parseInt(Bt),SWAM.targetedPlayer=Bt,!Players.amIAlive()&&(Network.sendCommand("spectate",Bt+""),Bt==game.myID&&!freeSpectator.handler_added&&(SWAM.debug&&console.log("selected target"),freeSpectatorMode(!0))))};let Games_spectate=Games.spectate;Games.spectate=function(Bt){SWAM.debug&&console.log("spectating ",Bt),$("#btnFreeSpectator").show(),$("body").addClass("spectatorMode"),freeSpectator.ignore_next||Games_spectate.call(Games,Bt),Bt==game.myID||freeSpectator.ignore_next?Bt==game.myID&&(freeSpectator.ignore_next=!1,null!=freeSpectator.position&&Graphics.setCamera(freeSpectator.position.x,freeSpectator.position.y)):(freeSpectator.position=Graphics.getCamera().clone(),freeSpectatorMode(!1)),SWAM.trigger("spectate",[Bt])};let Players_add=Players.add;Players.add=function(Bt,Xt){Players_add.call(Players,Bt,Xt);let Gt=Players.get(Bt.id);Gt.scorePlace=0,Gt.totalKills=0,Gt.killCount=0,Gt.deathCount=0,Gt.captures=0,Gt.lastMessageTime=0,Gt.spamBlock=!0,setTimeout(()=>{delete Gt.spamBlock},1388),Gt.sprites.bubble&&(Gt.sprites.bubble.alpha=Gt.sprites.bubbleCenter.alpha=Gt.sprites.bubbleLeft.alpha=Gt.sprites.bubblePoint.alpha=Gt.sprites.bubbleRight.alpha=0.4,Gt.sprites.bubbleText.alpha=0.85);game.state!==Network.STATE.PLAYING||(Gt.name=Gt.name.replace(nonprintRegex,"\uFFFD"),SWAM.GameLog.logPlayerConnection(Gt,!0),SWAM.trigger("playerAdded",Gt))};let Players_destroy=Players.destroy;Players.destroy=function(Bt){let Xt=Players.get(Bt);SWAM.GameLog.logPlayerConnection(Xt,!1),SWAM.trigger("playerDestroyed",Xt),Players_destroy.call(Players,Bt)};let Players_reteam=Players.reteam;Players.reteam=function(Bt){Players_reteam.call(Players,Bt),Bt.id==game.myID&&(game.myTeam=Bt.team),SWAM.trigger("playerReteamed",Bt)};let Players_network=Players.network;Players.network=function(Bt,Xt){Bt==Network.SERVERPACKET.CHAT_SAY&&(Xt.originalText=Xt.text,Xt.text=Xt.text.replace(/﷽/g,"\uFFFD")),Players_network.call(Players,Bt,Xt);Bt===Network.SERVERPACKET.CHAT_SAY?SWAM.trigger("playerSay",Xt):Bt===Network.SERVERPACKET.PLAYER_RESPAWN?(Xt.id==game.myID&&(SWAM.CruiseMode.off(),SWAM.hyperSpace&&SWAM.hyperSpace.show(),$("body").removeClass("spectatorMode"),$("#btnFreeSpectator").hide(),freeSpectatorMode(!1)),SWAM.trigger("playerRespawned",Xt)):Bt===Network.SERVERPACKET.PLAYER_UPDATE||Bt===Network.SERVERPACKET.PLAYER_FIRE||Bt===Network.SERVERPACKET.EVENT_BOOST||Bt===Network.SERVERPACKET.EVENT_BOUNCE?AutoPilot&&AutoPilot.mimicUpdate(Bt,Xt):Bt===Network.SERVERPACKET.PLAYER_FLAG?SWAM.trigger("playerChangedFlag",Xt):void 0};let Players_changeType=Players.changeType;Players.changeType=function(Bt){Players_changeType.call(Players,Bt),SWAM.trigger("playerChangedType",Bt)};let Players_stealth=Players.stealth;Players.stealth=function(Bt){Players_stealth.call(Players,Bt),AutoPilot&&AutoPilot.mimicStealth(Bt),SWAM.trigger("playerStealth",Bt)};let Players_impact=Players.impact;Players.impact=function(Bt){Players_impact.call(Players,Bt),SWAM.trigger("playerImpacted",Bt)};let Players_kill=Players.kill;Players.kill=function(Bt){var Xt=Players.get(Bt.id);if(null!=Xt)if(Xt.id==game.myID&&SWAM.CruiseMode.off(),0!=Bt.killer||0!=Bt.posX||0!=Bt.posY){let Gt=Players.get(Bt.killer);controlKillsDeaths(Gt,Xt),SWAM.GameLog.logKill(Gt,Xt),SWAM.trigger("playerKilled",[Bt,Xt,Gt])}else SWAM.debug&&console.log("playerkilled",Bt);Players_kill.call(Players,Bt)};let Players_powerup=Players.powerup;Players.powerup=function(Bt){Players_powerup.call(Players,Bt),SWAM.trigger("playerPowerUp",Bt)};let Players_whisper=Players.whisper;Players.whisper=function(Bt){Players_whisper.call(Players,Bt),Bt.from!=game.myID&&(Sound.UIClick(),setTimeout(()=>{Sound.UIClick()},200))};let Mobs_add=Mobs.add;Mobs.add=function(Bt,Xt,Gt){Mobs_add.call(Mobs,Bt,Xt,Gt),SWAM.trigger("mobAdded",[Bt,Xt,Gt])};let Mobs_despawn=Mobs.despawn;Mobs.despawn=function(Bt){Mobs_despawn.call(Mobs,Bt),SWAM.trigger("mobDespawned",Bt)};let Mobs_destroy=Mobs.destroy;Mobs.destroy=function(Bt){Mobs_destroy.call(Mobs,Bt),SWAM.trigger("mobDestroyed",Bt)};let Network_sendMethods=[Network.sendChat,Network.sendTeam,Network.sendWhisper,Network.sendSay];Network.sendChat=function(Bt){Bt=replaceSpecialWordsInChat(Bt),splitAndSend(Bt,Network_sendMethods[0])},Network.sendTeam=function(Bt){Bt=replaceSpecialWordsInChat(Bt),splitAndSend(Bt,Network_sendMethods[1])},Network.sendWhisper=function(Bt,Xt){Xt=replaceSpecialWordsInChat(Xt),splitAndSend(Xt,function(Gt){Network_sendMethods[2].call(Network,Bt,Gt)})},Network.sendSay=function(Bt){Bt=replaceSpecialWordsInChat(Bt),Bt=replaceTeamEmotes(Bt),splitAndSend(Bt,Network_sendMethods[3],30,3e3)};let Network_force=Network.force;Network.force=function(Bt){let Xt=Network_force.call(Network,Bt);if(Bt.c==Network.SERVERPACKET.EVENT_REPEL){let Gt=Players.get(Bt.id),Yt=Bt.mobs.map(Ht=>Mobs.get(Ht.id));SWAM.trigger("mobsRepeled",[Gt,Yt])}return Xt},UI.isEmote=function(Bt,Xt){let Gt=SWAM.getEmotesList();if("x"==Bt)return!1;for(var Yt=0;Yt<Gt.length;Yt++)if(Xt){if(Bt===":"+Gt[Yt]+":"||Bt==="-"+Gt[Yt]+"-")return Gt[Yt];}else if(Bt===Gt[Yt])return Gt[Yt];return!1},UI.isTeamEmote=function(Bt){return["cap","burn","take"].includes(Bt)};let UI_parseCommand=UI.parseCommand;UI.parseCommand=function(Bt){if("/"!==Bt[0])return!1;var Xt=Bt.split(" "),Gt=Xt[0].substr(1).toLowerCase();if(0==Gt.length)return!1;let Yt=Bt.indexOf(" ");if("name"===Gt)-1==Yt?UI.addChatMessage("Usage: /name your_name"):Network.reconnectAs(Bt.substr(Yt+1));else if("reconnect"===Gt)Network.reconnect();else if("emotes"===Gt)emotesPanel.show();else if(UI.isTeamEmote(Gt)||UI.isEmote(Gt))Network.sendSay("-"+Gt+"-");else return UI_parseCommand(Bt);return!0};let UI_aircraftSelected=UI.aircraftSelected;UI.aircraftSelected=function(Bt){SWAM.trigger("aircraftSelected",Bt),UI_aircraftSelected.call(UI,Bt)};let UI_addPowerup=UI.addPowerup;UI.addPowerup=function(Bt,Xt){UI_addPowerup.call(UI,Bt,Xt);SWAM.Settings.general.powerupsFX&&(game.graphics.layers.game.filters=1==Bt?getFilters([new PIXI.filters.AdjustmentFilter({gamma:1,saturation:0.8,contrast:1,brightness:1,red:1,green:1,blue:1.1,alpha:1.3})]):getFilters([new PIXI.filters.AdjustmentFilter({gamma:1.2,saturation:1,contrast:1,brightness:1,red:1.35,green:0.8,blue:0.8,alpha:1.2}),new PIXI.filters.CRTFilter({curvature:0,lineWidth:0,lineContrast:0,verticalLine:!1,noise:0,noiseSize:0,seed:0,vignetting:0.3,vignettingAlpha:0.7,vignettingBlur:0.3,time:0})]),SWAM.prevPowerupTimeout&&clearTimeout(SWAM.prevPowerupTimeout),SWAM.prevPowerupTimeout=setTimeout(function(){game.graphics.layers.game.filters=getFilters([]),delete SWAM.prevPowerupTimeout},Xt))};let UI_resetPowerups=UI.resetPowerups;UI.resetPowerups=function(){UI_resetPowerups.call(UI),game.graphics.layers.game.filters=getFilters([])};let UI_updateUpgrades=UI.updateUpgrades;UI.updateUpgrades=function(Bt,Xt,Gt=0){UI_updateUpgrades.call(UI,Bt,Xt,Gt);const jt=["","speed","defense","energy","missile"][Gt],Wt=Bt[Gt-1];let zt=0;0!=Gt&&(zt=Math.round(100*(config.upgrades[jt].factor[Wt]-1))+"%"),SWAM.trigger("playerUpgraded2",[Bt,Xt,Gt,["","Speed","Defense","Energy Regen","Missile Speed"][Gt],zt])},UI.updateStats=function(Bt){let Xt="";if(2==game.gameType){let Ht=0,jt=0;forEachPlayer(Wt=>{1==Wt.team?Ht++:jt++}),Xt="<span class='greyed'>&nbsp;&nbsp;(<span style='color: #4076E2'>"+Ht+"</span>&nbsp;/&nbsp;<span style='color: #EA4242'>"+jt+"</span>)<span class='greyed'>"}if(game.fixedjitter==INITIAL_JITTER){let Ht=Math.max(Bt.ping,130),jt=Math.max(Bt.ping,300),Wt=Tools.randInt(Ht,jt);game.fixedjitter=Wt-Bt.ping}Bt.ping-=game.fixedjitter;var Gt=Bt.playerstotal,Yt="";Yt+="<div class=\"item\"><span class=\"icon-container\"><div class=\"icon players\"></div></span><span class=\"greyed\">"+Bt.playersgame+"&nbsp;/&nbsp;</span>"+Gt+Xt+"<span class=\"icon-container padded\"><div class=\"icon ping\"></div></span>"+Bt.ping+"<span class=\"millis\">ms</span></div>",$("#gameinfo").html(Yt),game.ping=Bt.ping};let UI_serverMessage=UI.serverMessage;UI.serverMessage=function(Bt){UI_serverMessage.call(UI,Bt);try{SWAM.trigger("serverMessageReceived",[Bt])}catch(jt){}if(game.gameType===SWAM.GAME_TYPE.CTF){const Xt="<span class=\"info inline\"><span class=\"blueflag\"></span></span>",Gt="<span class=\"info inline\"><span class=\"redflag\"></span></span>";let Yt=Bt.text.includes(Xt),Ht=Bt.text.includes(Gt);if(2==Bt.type&&(Yt||Ht)){let jt,Wt;Yt&&(jt=Bt.text.substring(Xt.length)),Ht&&(jt=Bt.text.substring(Gt.length)),Wt=jt.substring(0,jt.indexOf(" ")).toLowerCase();let zt=jt.substring(Bt.text.indexOf(" by ")+4),Vt=0,qt=Players.getMe().team,Kt=Yt?1:2;"taken"===Wt?Vt=qt==Kt?SWAM.Audio.Flag.OursTaken:SWAM.Audio.Flag.EnemyTaken:"captured"===Wt?(SWAM.GameLog.logFlag(Bt.text),Vt=qt==Kt?SWAM.Audio.Flag.OursCaptured:SWAM.Audio.Flag.EnemyCaptured):"returned"===Wt?(SWAM.GameLog.logFlag(Bt.text),Vt=qt==Kt?SWAM.Audio.Flag.OursRecovered:SWAM.Audio.Flag.EnemyRecovered):void 0,SWAM.Settings&&SWAM.Settings.audio&&SWAM.Settings.audio.voiceEventsCTF&&SWAM.Audio.playFlagEvent(Vt,qt),SWAM.trigger("CTF_FlagEvent",[Vt,Kt,Wt,zt])}}};let UI_selectUpgrade=UI.selectUpgrade;UI.selectUpgrade=function(Bt){SWAM.radio.visible()||(UI_selectUpgrade.call(UI,Bt),SWAM.trigger("playerUpgraded",Bt))};let UI_addChatLine=UI.addChatLine;UI.addChatLine=function(Bt,Xt,Gt){let Yt=["-SWAM-PONG"];if(Bt.lastMessageTime=new Date().getTime(),2==Gt&&Bt.spamBlock&&"STATSBOT"!=Bt.name)return void console.log("SPAM BLOCKED: ",Xt);let jt=-1<$.inArray(Xt.toUpperCase(),["-SWAM-PING"]);for(var Wt of Yt)jt=jt||Xt.startsWith(Wt);if(!jt){let zt=Xt.match(getURLRegEx());if(null!=zt){let qt=Xt.split(getURLRegEx());Xt="";for(let Kt=0;Kt<qt.length;Kt++)Xt+=replaceChatEmotes(UI.escapeHTML(qt[Kt])),Kt<zt.length&&(Xt+="<a href='"+zt[Kt]+"' target='_blank' style='text-decoration: underline;'>"+zt[Kt]+"</a>")}else Xt=replaceChatEmotes(UI.escapeHTML(Xt));UI_addChatLine.call(UI,Bt,Xt,Gt,!1);let Vt=UI.getIgnored();Vt[Bt.id]||SWAM.trigger("chatLineAdded",[Bt,Xt,Gt])}else{let zt=Xt;if(Xt=Xt.toUpperCase(),"-SWAM-PING"==Xt){if(Bt.id!=game.myID&&!window.anonmod){let Vt="starma.sh"===location.hostname.toLowerCase()?"SM":"AM",qt=SWAM.getThemeFunction().themeName;Network.sendWhisper(Bt.id,`-SWAM-PONG ${Vt} ${qt}`)}return void UI_addChatLine.call(UI,Bt,Xt,Gt)}if(2==Gt&&Bt.id!=game.myID&&Xt.startsWith("-SWAM-PONG")){let Vt=zt.substr(11,2).trim(),qt=zt.substring(14).trim();UI_addChatLine.call(UI,Bt,`I'm using STARMASH, ${Vt}, theme: ${qt}`,Gt)}}};let UI_updateScore=UI.updateScore;UI.updateScore=function(Bt){UI_updateScore.call(UI,Bt),$("#scorecontainer div").click(SWAM.scoreboard_click_handler),updatePlayerCounters(Bt.scores),SWAM.trigger("detailedScoreUpdate",Bt)};let UI_scoreboardUpdate=UI.scoreboardUpdate;UI.scoreboardUpdate=function(Bt,Xt,Gt){UI_scoreboardUpdate.call(UI,Bt,Xt,Gt),updateMinimapOpacity(),SWAM.trigger("scoreboardUpdate",[Bt,Xt,Gt])};let Games_performPing=Games.performPing;Games.performPing=function(){"airma.sh"!=window.location.host.toLowerCase()||Games_performPing.call(Games)};let games_prep=Games.prep;Games.prep=function(){game.fixedjitter=INITIAL_JITTER,SWAM.debug&&console.log("game prepped "+new Date),RemoveMusic(),SWAM.GameLog.logConnected(),games_prep.apply(Games),(game.gameType==SWAM.GAME_TYPE.FFA||game.gameType==SWAM.GAME_TYPE.BTR)&&$("#graphicsSet").show(),$("body").append("<div id='AutoPilotAlert' style='position: absolute; top: 100px; left: calc(50% - 100px); width: 200px; color: white; font-size: 40px; background-color: rgb(7, 185, 7); opacity: 0.6; text-align: center; border-radius: 20px; padding: 10px; display:none;'>AutoPilot</div>"),$("#score-kills").html("0<br>0"),$("#score-deaths").html("0"),UI.addChatMessage("Mod:  Press H to check StarMash shortcuts.".bold()),UI.addChatMessage("Right-Click a chat message to copy to clipboard.".bold()),game.gameType==SWAM.GAME_TYPE.CTF&&UI.addChatMessage("Y when carrying the flag, to drop it.".bold()),getMatchTimer(),SWAM.updatePlayerCounters(),SWAM.PlayerInfoTimer=setInterval(SWAM.updatePlayersNamePlate,500),SWAM.hyperSpace&&SWAM.hyperSpace.show(),$(window).keydown(SWAM.keydown_handler),$(window).keyup(SWAM.keyup_handler),$("canvas").click(SWAM.canvas_click_handler),$("canvas").mousedown(SWAM.canvas_mousedown_handler),SWAM.trigger("gamePrep")};let games_wipe=Games.wipe;Games.wipe=function(){games_wipe.apply(Games),clearInterval(SWAM.PlayerInfoTimer),freeSpectatorMode(!1),$("#graphicsSet").hide(),$("#AutoPilotAlert").remove(),$("#btnFreeSpectator").hide(),$(window).off("keydown",SWAM.keydown_handler),$(window).off("keyup",SWAM.keyup_handler),$("canvas").off("click",SWAM.canvas_click_handler),$("canvas").off("mousedown",SWAM.canvas_mousedown_handler),SWAM.trigger("gameWipe")};let games_networkFlag=Games.networkFlag;Games.networkFlag=function(Bt){games_networkFlag.call(Games,Bt),SWAM.trigger("CTF_Flag",Bt)};let games_showBTRWin=Games.showBTRWin;Games.showBTRWin=function(Bt){games_showBTRWin.call(Games,Bt),SWAM.trigger("BTR_MatchEnded",Bt)};let games_showCTFWin=Games.showCTFWin;Games.showCTFWin=function(Bt,Xt){Bt.t=Xt||5,games_showCTFWin.call(Games,Bt),$("#custom-msg").last().addClass("customCTFWin").css({"background-image":`url("${getFilePath(game.myTeam==Bt.w?"ctfvictory.png":"ctfdefeat.png")}")`,"font-family":"'Alfa Slab One', cursive"}),SWAM.trigger("CTF_MatchEnded",Bt),setTimeout(function(){SWAM.GameLog.logNewMatch(),SWAM.RandomizeBackground&&SWAM.RandomizeBackground(),SWAM.trigger("CTF_MatchStarted")},6e4)};let graphics_resizeRenderer=Graphics.resizeRenderer;Graphics.resizeRenderer=function(Bt,Xt){SWAM.Settings.ui.useSquaredScene?(Bt=Bt>1.15*Xt?1.15*Xt:Bt,graphics_resizeRenderer.call(Graphics,Bt,Xt),$("canvas").css({"margin-left":0.5*(window.innerWidth-$("canvas").width())+"px"})):(graphics_resizeRenderer.call(Graphics,Bt,Xt),$("canvas").css("margin-left","")),SWAM.resizeLayers(Bt,Xt),SWAM.trigger("rendererResized",[Bt,Xt])},Network.reconnectAs=function(Bt){game.myOriginalName=Bt,Network.reconnect()},SWAM.updateLayers=function(){},SWAM.resizeLayers=function(){},SWAM.addDebugElements=function(){if(SWAM.debug){$("#logon").append("<div><input class='dgCamUpdates' type='button' value='updates' style='width: 50px; margin-right: 10px;'></div><table><tr><td colspan='3' align='center'><input class='dgCamY' type='button' value='-8192' style='width: 50px; margin-right: 10px;'></td></tr><tr><td><input class='dgCamX' type='button' value='-16384' style='width: 50px; margin-right: 10px;'></td><td><input class='dgCamX' type='button' value='0' style='width: 50px; margin-right: 10px;'><input class='dgCamY' type='button' value='0'    style='width: 50px; margin-right: 10px;'></td><td><input class='dgCamX' type='button' value='16384' style='width: 50px; margin-right: 10px;'></td></tr><tr><td colspan='3' align='center'><input class='dgCamY' type='button' value='8192' style='width: 50px; margin-right: 10px;'></td></tr></table>"),$("#logon input.dgCamX").click(function(Xt){let Gt=$(Xt.target).val();Graphics.setCamera(parseFloat(Gt),Graphics.getCamera().y)}),$("#logon input.dgCamY").click(function(Xt){let Gt=$(Xt.target).val();Graphics.setCamera(Graphics.getCamera().x,parseFloat(Gt))}),$("#logon input.dgCamUpdates").click(function(){SWAM.doUpdates=!SWAM.doUpdates});let Bt=$("#logon")[0];$(window).keydown(function(Xt){game.state===Network.STATE.PLAYING||"none"==Bt.style.display||SWAM.moveCamera(Xt)})}},SWAM.updatePlayerCounters=function(){Network.getScores()},SWAM.laser=null,SWAM.OnPlayerUpdate=function(){},SWAM.getLeaders=function(){let Bt={};if(game.gameType==SWAM.GAME_TYPE.CTF){let Xt=null,Gt=null;forEachPlayer(Yt=>{1==Yt.team?(null==Xt||Yt.scorePlace<Xt.scorePlace)&&(Xt=Yt):(null==Gt||Yt.scorePlace<Gt.scorePlace)&&(Gt=Yt)}),null!=Xt&&(Bt[Xt.id]=Xt),null!=Gt&&(Bt[Gt.id]=Gt)}else{forEachPlayer(Gt=>{1==Gt.scorePlace&&(Bt[Gt.id]=Gt)})}return Bt},SWAM.toggleLeaderboard=function(){game.state!==Network.STATE.PLAYING||($("#scoreboard").toggle(400),$("#roomnamecontainer").toggle(400))},SWAM.toggleUI=function(){if(game.state===Network.STATE.PLAYING){let Bt="none"==$("#sidebar").css("display");Bt?($("#scoreboard").show(400),$("#roomnamecontainer").show(400)):($("#scoreboard").hide(400),$("#roomnamecontainer").hide(400)),$("#sidebar").toggle(400),$("#logosmall").toggle(400),$("#menu").toggle(400),$("#gameinfo").toggle(400),$("#scorebig").toggle(400)}},SWAM.showDegubInfo=function(){config.debug.show=!0,window.DEVELOPMENT=!0,Tools.setupDebug()},SWAM.moveMinimap=function(){setTimeout(function(){$("#scorebig").css("right",config.minimapSize+"px"),config.minimapPaddingY=game.screenY-50-config.minimapSize/2,UI.resizeMinimap()},8e3)},SWAM.CruiseMode={append:function(){let Bt=$("<div id='CruiseControl' state='OFF' style='display: none; background-color: rgba(0,0,0,.3); width: 44px; height: 44px; background-repeat: no-repeat; background-size: 35px 35px; background-position: center; border-radius: 7px;'></div>").css("background-image",cruiseOFFDataURL).show().click(function(){SWAM.CruiseMode.toggle()});$("#sidebar").append(Bt),$("#CruiseControl").mouseenter(function(Xt){let Gt="<div class='header'>Cruise Control</div>";Gt+="<div class='item'><div class='desc'>Makes the ship advance automatically at full speed.  Toggle with '5' or 'END' keys.</div></div>",Gt+="<div class=\"arrow\"></div>",$("#tooltip").html(Gt),UI.show("#tooltip");let Yt=Xt.currentTarget.getBoundingClientRect();$("#tooltip").css({left:Math.round(Yt.left+60)+"px",top:Math.round(Yt.top-10)+"px"})}).mouseleave(function(){UI.hide("#tooltip"),$("#tooltip").html("")})},on:function(){$("#CruiseControl").css({borderColor:"#c9ff00","background-size":"44px 44px",backgroundImage:"url('data:image/svg+xml;base64,"+cruise64green+"')"}).attr("state","ON"),Network.sendKey("UP",!0)},off:function(Bt){"undefined"==typeof Bt&&(Bt=!0),$("#CruiseControl").css({borderColor:"#555555","background-size":"35px 35px",backgroundImage:cruiseOFFDataURL}).attr("state","OFF"),Bt&&Network.sendKey("UP",!1)},toggle:function(){"ON"===$("#CruiseControl").attr("state")?SWAM.CruiseMode.off():SWAM.CruiseMode.on()},isOn:function(){return"ON"===$("#CruiseControl").attr("state")}},SWAM.CruiseMode.append(),SWAM.radio={append:function(){$("body").append(getTemplateContent("#Radio_Panel")),this.loadOptions(),$("#btnRadioConfig").click(function(){SWAM.radio.showConfig(SWAM.radio.currentChannel)})},currentChannel:0,channelMethods:[Network.sendChat,Network.sendTeam,Network.sendSay],visible:function(){return"none"!==$("#radioPanel").css("display")},send:function(Bt){this.channelMethods[this.currentChannel](Bt)},sendTo:function(Bt,Xt){this.channelMethods[Bt](Xt)},channelNames:["* Radio to All *","* Radio to TEAM *","* CLOSE RANGE signal *"],channelKeys:["Z","X","C"],options:[[],[],[]],defaultOptions:[["gg","Hi!","Yes","No","Thanks!","You are welcome!","I'll be right back.","Got to go, cya!","-SWAM-PING","Try StarMash, a mod for Airmash!|How to use:  tiny.cc/starmash or play as guest in:  starma.sh"],["Affirmative","Negative","** I'VE GOT THE FLAG! COVER ME! **","** THE ENEMY HAS OUR FLAG! **","** All wings, protect our flag carrier! **","Defending the base! Need assistance!","Attacking their base!  Need assistance!","On my way!","Cancel that..","Prowler in our base!"],["Hey there!","Stop!","Go Go Go!","Imperial scum!","Rebel scum!","Prowler here!","YEE-HAW!!!",":lol:",":cry:",":clap:"]],loadOptions:function(){var Bt=localStorage.getItem("radioMessages");if(null!=Bt)try{SWAM.radio.options=JSON.parse(Bt)}catch(Xt){var Bt=null;localStorage.removeItem("radioMessages")}if(null==Bt){var Bt=jQuery.extend(!0,{},SWAM.radio.defaultOptions);SWAM.radio.options=Bt}},showConfig:function(Bt){this.hide();var Xt=getTemplateContent("#Radio_Customization_Title");Xt=Xt.replace(/\$channel/g,SWAM.radio.channelNames[Bt]);let Gt=createModal({title:Xt,content:getTemplateContent("#Radio_Customization_Content"),width:"550px",maxHeight:"450px",height:"450px"});for(var Yt=getTemplateContent("#Radio_Customization_Message"),Ht=0;10>Ht;Ht++){Xt=Yt.replace(/\$index/g,9>Ht?Ht+1:"0");var jt=$(Xt);$("input",jt).val(SWAM.radio.options[Bt][Ht]),$(".optionList",Gt).append(jt)}$("body").append(Gt),Gt.focus(),$("#radioCustomizeSave",Gt).click(function(){for(var Wt=$("input",Gt),zt=0;zt<Wt.length;zt++)SWAM.radio.options[Bt][zt]=Wt[zt].value;localStorage.setItem("radioMessages",JSON.stringify(SWAM.radio.options)),Gt.remove()}),$("#radioCustomizeCancel",Gt).click(function(){Gt.remove()}),$("#radioRestoreThis",Gt).click(function(){confirmDialog({title:"Are you sure? This will delete all customized messages for this panel and restore them to default.",message:SWAM.radio.channelNames[Bt]+"   -  Confirmation needed",yes:function(){var Wt=jQuery.extend(!0,[],SWAM.radio.defaultOptions[Bt]);SWAM.radio.options[Bt]=Wt,localStorage.setItem("radioMessages",JSON.stringify(SWAM.radio.options)),SWAM.radio.loadOptions(),Gt.remove()}})}),$("#radioRestoreAll",Gt).click(function(){confirmDialog({title:"Are you sure? This will delete all customized messages and restore them to default.",message:"Confirmation needed",yes:function(){localStorage.removeItem("radioMessages"),SWAM.radio.loadOptions(),Gt.remove()}})}),$(Gt).keydown(function(Wt){Wt.stopImmediatePropagation()}).keyup(function(Wt){Wt.stopImmediatePropagation()})},show:function(Bt){SWAM.radio.currentChannel=Bt;for(var Xt=SWAM.radio.options,Gt="Close Menu - Press "+SWAM.radio.channelKeys[Bt]+"<div>-----</div>",Yt=0;Yt<Xt[Bt].length;Yt++)Gt+="<div><span style='margin-right: 15px;'>"+(Yt+1)%10+".</span>"+Xt[Bt][Yt]+"</div>";$("#radioChannel").html(SWAM.radio.channelNames[Bt]),$("#radioOptions").html(Gt),$("#radioPanel").show()},hide:function(){$("#radioPanel").hide()},handle_keys:function(Bt){var Xt=$.inArray(Bt.which,[90,88,67]);if(-1<Xt&&(SWAM.radio.visible()&&Xt==SWAM.radio.currentChannel?SWAM.radio.hide():SWAM.radio.show(Xt)),27==Bt.which&&SWAM.radio.visible()&&SWAM.radio.hide(),48<=Bt.which&&57>=Bt.which&&SWAM.radio.visible()){SWAM.radio.hide();let Ht="";Xt=Bt.which-49,-1==Xt&&(Xt=9);let jt=SWAM.radio.options,Wt=SWAM.radio.currentChannel;if(0<=Xt&&Xt<jt[Wt].length){Ht=jt[Wt][Xt];var Gt=Ht.split(/\s*\|\s*/);Xt=0;var Yt=function(){0<Gt[Xt].length&&SWAM.radio.sendTo(Wt,Gt[Xt]),Xt++,Xt<Gt.length&&setTimeout(Yt,1500)};Yt()}else SWAM.radio.hide();Bt.stopImmediatePropagation(),Bt.stopPropagation(),Bt.preventDefault()}}},SWAM.radio.append();let ProwlerRadar=new function(){function Xt(Zt){if(zt){let Qt=Wt[Zt.id];Qt||(Qt=new PIXI.Graphics,Qt.clear(),Qt.beginFill(16711680,.125),Qt.drawCircle(0,0,Vt),Qt.endFill(),Wt[Zt.id]=Qt,game.graphics.layers.groundobjects.addChild(Qt)),Qt.position.set(Zt.lowResPos.x,Zt.lowResPos.y),Qt.renderable=Zt.removedFromMap||1!=game.myType&&4!=game.myType||5!=Zt.type||Zt.team==Players.getMe().team||Zt.hidden||Zt.render&&!Zt.stealthed?!1:!0}}function Gt(){var Zt=Players.getIDs(),Qt=Players.getMe();if(Kt.hide(),!!zt)for(var Jt in Zt){var $t=Players.get(Jt);if((1==game.myType||4==game.myType)&&5==$t.type&&$t.team!=Qt.team){var en=Tools.distance($t.lowResPos.x,$t.lowResPos.y,Qt.pos.x,Qt.pos.y);en<Vt&&Kt.show()}Xt($t,Qt)}}function Ht(){for(let Zt in Wt)jt(Zt)}function jt(Zt){let Qt=Wt[Zt];Qt&&(game.graphics.layers.groundobjects.removeChild(Qt),Qt.destroy(),delete Wt[Zt])}let Wt={},zt=!0,Vt=600,qt=0,Kt=$("<div id='prowlerAlert' style='position: absolute; top: 100px; left: calc(50% - 50px); width: 100px; height: 30px; background-color: red; opacity:0.6;display:none;'></div>");this.updateSettings=function(){"undefined"!=typeof SWAM.Settings.general.useProwlerRadar&&(zt=SWAM.Settings.general.useProwlerRadar,!zt&&(Kt.hide(),Ht()))},SWAM.on("playerChangedType",Zt=>{Xt(Players.get(Zt.id))}),SWAM.on("playerKilled",(Zt,Qt)=>{Xt(Qt)}),SWAM.on("playerStealth",Zt=>{let Qt=Players.get(Zt.id);Xt(Qt)}),SWAM.on("playerDestroyed",Zt=>{jt(Zt.id)}),SWAM.on("gamePrep",()=>{$("body").append(Kt),qt=setInterval(Gt,500)}),SWAM.on("gameWipe",()=>{Ht(),Kt.remove(),qt=clearInterval(qt)})},SpectatorOnStart=new function(){function Xt(){clearTimeout(Ht),SWAM.off("keydown",Xt)}let Ht=0,jt=!1;SWAM.on("serverMessageReceived",function(zt){game.gameType!=SWAM.GAME_TYPE.CTF||1==zt.type&&zt.text=="Game starting in a second"&&(jt=null!=game.spectatingID,Ht=0)}),SWAM.on("CTF_MatchStarted",function(){jt&&(SWAM.on("keydown",Xt),Ht=setTimeout(()=>{Network.spectateForce(),SWAM.off("keydown",Xt),jt=!1,Ht=0},5e3))}),SWAM.on("gameWipe",function(){clearTimeout(Ht)})};SWAM.chatinputVisible=function(){return"none"!==$("#chatinput").css("display")},SWAM.getClosestPlayer=function(Bt,Xt){let Gt=screenToMap(Bt,Xt);Bt=Gt.x,Xt=Gt.y;let Yt=1e5,Ht=Players.getIDs(),jt=null;for(let Wt in Ht){let zt=Players.get(Wt),Vt=Tools.distance(Bt,Xt,zt.pos.x,zt.pos.y);Vt<Yt&&(jt=zt,Yt=Vt)}return SWAM.debug&&console.log(jt.name),jt},!function(){const Xt={BLUE:1,RED:2},Gt={position:{x:0,y:0},BASE_COORDINATES:{x:-9670,y:-1470},isCarried:!1,player:null},Yt={position:{x:0,y:0},BASE_COORDINATES:{x:8600,y:-940},isCarried:!1,player:null};let Ht=Kt=>Kt.render?Kt.pos:Kt.lowResPos;SWAM.on("CTF_Flag",Kt=>{let Zt=1==Kt.flag?Gt:Yt;if(1==Kt.type)Zt.isCarried=!1,Zt.player=null,Zt.position.x=Kt.posX,Zt.position.y=Kt.posY;else{Zt.isCarried=!0,Zt.player=Players.get(Kt.id);let Qt=Ht(Zt.player);Zt.position.x=Qt.x,Zt.position.y=Qt.y}});class Wt{constructor(Kt){this.flag=Kt==Xt.BLUE?Gt:Yt}getPosition(){return this.flag.isCarried?Ht(this.flag.player):this.flag.position}isActive(){return game.gameType==SWAM.GAME_TYPE.CTF}isVisible(){return(this.flag.BASE_COORDINATES.x!=this.flag.position.x||this.flag.BASE_COORDINATES.y!=this.flag.position.y)&&(null==this.flag.player||this.flag.player.id!=game.myID)}}class zt{constructor(Kt,Zt=16777215){this.setTracker(Kt),this.color=Zt,this.arrow=new Textures.sprite("prowler"),this.arrow.texture=PIXI.Texture.fromImage(getFilePath("arrow_indicator.png")),this.arrow.tint=this.color,this.arrow.alpha=0.7,this.arrow.position.set(0,0),this.arrow.scale.set(.2,.2),this.arrow.anchor.set(.5,.5),this.arrow.pivot.set(.5,.5),this.frameCounter=0,this.framesToSkip=3,this.ticker=new PIXI.ticker.Ticker,this.ticker.stop(),this.ticker.add(this.update.bind(this)),SWAM.on("gamePrep",function(){this.tracker.isActive()&&this.addToScene()}.bind(this)),SWAM.on("gameWipe",function(){this.tracker.isActive()&&this.removeFromScene()}.bind(this))}setTracker(Kt){this.tracker="function"==typeof Kt?{getPosition:Kt}:Kt}addToScene(){game.graphics.layers.game.addChild(this.arrow),this.ticker.start()}removeFromScene(){this.ticker.stop(),game.graphics.layers.game.removeChild(this.arrow)}update(){if(!this.tracker.isVisible())return void(this.arrow.visible=!1);let Zt=this.tracker.getPosition(),Qt=MapToScreen(Zt.x,Zt.y);if(0<Qt.x&&Qt.x<game.screenX&&0<Qt.y&&Qt.y<game.screenY)return void(this.arrow.visible=!1);this.arrow.visible=!0,Qt.x-=game.halfScreenX,Qt.y-=game.halfScreenY;let Jt=Math.atan2(Qt.x,-Qt.y),$t=Qt.y/Qt.x,en=null,tn=30,nn=100+tn,an={halfwidth:(game.screenX-nn)/2,halfheight:(game.screenY-nn)/2};en=0>Qt.y?{x:-an.halfwidth/$t,y:-an.halfheight}:{x:an.halfwidth/$t,y:an.halfheight},en.x<-an.halfwidth?en={x:-an.halfwidth,y:$t*-an.halfheight}:en.x>an.halfwidth&&(en={x:an.halfwidth,y:$t*an.halfheight}),en={x:en.x+game.halfScreenX,y:en.y+game.halfScreenY},this.arrow.position.set(en.x+tn,en.y),this.arrow.rotation=Jt}}SWAM.ArrowIndicator=zt,SWAM.PlayerTracker=class{constructor(Kt){this.player=Players.get(Kt)}getPosition(){return Ht(this.player)}isActive(){return!0}isVisible(){return this.player.id!=game.myID}};let Vt=new Wt(Xt.BLUE),qt=new Wt(Xt.RED);SWAM.ArrowIndicator.BLUE=new zt(Vt,255),SWAM.ArrowIndicator.RED=new zt(qt,16711680)}(),SWAM.SmallLog=new function(){let Xt=null;SWAM.on("gamePrep",()=>{Xt=$(getTemplate("#WhoKilledWho")).click(()=>{SWAM.GameLog.show()}),$("body").append(Xt)}),SWAM.on("gameWipe",()=>{Xt&&(Xt.remove(),Xt=null)}),this.add=function(Gt){if(game.state===Network.STATE.PLAYING&&0!=Xt.length){let Yt=$(Gt);Xt.append(Yt);let Ht=Xt[0];Ht.scrollTop=Ht.scrollHeight,setTimeout(function(){Yt.remove()},3e4)}}},SWAM.GameLog=new function(){let Gt=!0,Yt=!1,Ht=null,jt=null;this.visible=()=>"none"!==Ht.css("display"),this.add=function(Wt){if(game.state===Network.STATE.PLAYING){let zt=$(Wt);zt.hasClass("flwkw")&&!Gt&&zt.hide(),zt.hasClass("flplayer")&&!Yt&&zt.hide();let Vt=jt[0],qt=isScrolledToBottom(Vt);jt.append(zt),1e3<jt.children().length&&jt.children().first().remove(),qt&&(Vt.scrollTop=Vt.scrollHeight)}},this.logKill=function(Wt,zt){if(null!=Wt&&null!=zt){let qt="<div class=\"flwkw line\"><span class=\"playersel\" data-playerid=\""+Wt.id+"\"><span class=\"flag small flag-"+Wt.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==Wt.team?"#4d7fd5":2==Wt.team?"#dc4f46":"")+";\">"+UI.escapeHTML(Wt.name)+"</span></span><span class=\"text\" style=\"margin-left: 10px; margin-right: 10px; opacity: 0.6;\"> killed </span><span class=\"playersel\" data-playerid=\""+zt.id+"\"><span class=\"flag small flag-"+zt.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==zt.team?"#4d7fd5":2==zt.team?"#dc4f46":"")+";\">"+UI.escapeHTML(zt.name)+"</span></span></div>";this.add(qt),SWAM.Settings.ui.showWhoKilledWho&&SWAM.SmallLog.add(qt)}},this.logPlayerConnection=function(Wt,zt){if(null!=Wt){let qt="<div class=\"flplayer line\"><span class=\"playersel\" data-playerid=\""+Wt.id+"\"><span class=\"flag small flag-"+Wt.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==Wt.team?"#4d7fd5":2==Wt.team?"#dc4f46":"")+";\">"+UI.escapeHTML(Wt.name)+"</span></span><span class=\"text\" style=\"margin-left: 10px; margin-right: 10px; opacity: 0.6;\">"+(zt?" joined.":"left.")+"</span></div>";this.add(qt),SWAM.Settings.ui.showLogConnections&&(SWAM.SmallLog.add(qt),!zt&&3e4>new Date().getTime()-Wt.lastMessageTime&&UI.addChatMessage(qt,!0))}},this.logConnected=function(){let Wt="";switch(game.gameType){case SWAM.GAME_TYPE.FFA:Wt="Free For All";break;case SWAM.GAME_TYPE.CTF:Wt="Capture the flag";break;case SWAM.GAME_TYPE.BR:Wt="Battle Royale";}this.add("<hr/><div style='margin: 20px; font-size: 16px;'>"+new Date().toLocaleString()+"  - Joined to "+Wt+"</div>")},this.logFlag=function(Wt){this.add("<div class='message' style='position: relative; display: block;'>"+Wt+"</div>")},this.logNewMatch=function(){this.add("<hr/><div style='margin: 20px; font-size: 16px;'>"+new Date().toLocaleString()+"  - New CTF Match started</div>")},this.show=function(){Sound.UIClick(),Ht.show(),jt[0].scrollTop=jt[0].scrollHeight,closeWhenClickOutside(Ht)},this.hide=function(){Ht.hide()},function(){Ht=$(getTemplate(".modalContainer .modalDialog").replace(/\$title/g,"Game log")).attr("id","fullLog").css("z-index","30").hide();let Wt=$(getTemplate("#fullLogTemplate")).removeAttr("id");jt=$(".fullLogcontent",Wt),$(".modalContent",Ht).append(Wt),$(".chkFLKills",Wt).click(()=>{Gt=!Gt,$(".flwkw",Wt).toggle()}),$(".chkFLPlayers",Wt).click(()=>{Yt=!Yt,$(".flplayer",Wt).toggle()}),$("body").append(Ht),SWAM.on("keyup",zt=>{27==zt.which&&SWAM.GameLog.visible()&&SWAM.GameLog.hide()})}()},SWAM.updatePlayersNamePlate=function(){var Bt=Players.getIDs(),Xt=Players.getMe();for(var Gt in Bt){var Yt=Players.get(Gt);"undefined"!=typeof Yt.scorePlace&&(Yt.sprites.name.text=Yt.scorePlace+". "+Yt.name+(Yt.team==Xt.team?" ["+Math.floor(100*parseFloat(Yt.health))+"]":""))}};let emotesPanel=new function(){function Gt(){let qt=SWAM.getEmotesList().slice().filter(Kt=>"x"!=Kt).sort();return[...new Set(qt)]}function Ht(){const qt={tf:[340,404],pepe:[412,476],clap:[268,476],lol:[412,548],bro:[268,548],kappa:[340,476],cry:[340,548],rage:[412,404]};let Kt="";for(let Zt in qt)Kt+=`.emote-${Zt} { width: 32px; height: 32px; background: url(${getFilePath("gui.png")}) -${qt[Zt][0]/2}px  -${qt[Zt][1]/2}px; background-size: 512px; background-repeat: no-repeat; } `;return Kt}let Wt=null,zt=null;this.toggle=function(){"none"===Wt.css("display")?this.show():this.hide()},this.show=function(){"none"===Wt.css("display")&&(Wt.fadeIn("fast"),zt=closeWhenClickOutside(Wt))};let Vt=this.hide=function(){Wt.fadeOut("fast"),$(document).off("mousedown","",zt)};(function(){Wt=$(getTemplate(".modalContainer .modalDialog").replace(/\$title/g,"Emotes")).attr("id","emotesPanel").css({zIndex:"30",left:"0px",maxHeight:"80%",display:"none"}).hide();let qt="",Kt=0;Gt().forEach(Qt=>{qt+=`<div class="emoteSample" data-name="${Qt}"><div class="emote emote-${Qt}"></div><div>/${Qt}</div></div>`,Kt++});let Zt=$(qt);$(".modalContent",Wt).append(Zt),$("body").append(Wt),Wt.on("click",".emoteSample",Qt=>{UI.parseCommand("/"+$(Qt.currentTarget).data("name")),Vt()})})(),function(){let qt=SWAM.getEmotesList();const Kt=getFilePath("emotes.png");let Zt="";Zt+=Ht();for(let Jt=8;Jt<qt.length;Jt++){let $t=qt[Jt],en=Jt-8;if("x"!=$t){let on=100*Math.floor(en/16),sn=$t.replace(/ /g,"");Zt+=`.emote-${sn} { `+"width: 32px; height: 32px; "+`background: url(${Kt}) -${100*(en%16)}%  -${on}% ; `+"background-size: 1600%;} "}}let Qt=`<style type='text/css'>${Zt}</style>`;$("body").append(Qt)}(),Wt.css("display","block"),Wt.css("display","none")};SWAM.emotesPanel=emotesPanel,!function(){function Bt(Vt,qt,Kt){var Zt,Qt,Jt;if(0==qt)Zt=Qt=Jt=Kt;else{var $t=function(nn,an,rn){return 0>rn&&(rn+=1),1<rn&&(rn-=1),rn<1/6?nn+6*(an-nn)*rn:rn<1/2?an:rn<2/3?nn+6*((an-nn)*(2/3-rn)):nn},en=0.5>Kt?Kt*(1+qt):Kt+qt-Kt*qt,tn=2*Kt-en;Zt=$t(tn,en,Vt+1/3),Qt=$t(tn,en,Vt),Jt=$t(tn,en,Vt-1/3)}return[Math.round(255*Zt),Math.round(255*Qt),Math.round(255*Jt)]}const Xt={x:-9050,y:-1450},Gt={x:8074,y:-905};let Yt=[],Ht=null,jt=new PIXI.ticker.Ticker;jt.stop(),jt.add(function(){if(!window.adding){for(var Vt=[],qt=0;qt<Yt.length;qt++)Yt[qt].update(),Yt[qt].exists()?Vt.push(Yt[qt]):Yt[qt].destroy();Yt=Vt}}),jt.start();class Wt{constructor(Vt,qt){this.pos={x:Vt?Vt.x:0,y:Vt?Vt.y:0},this.vel={x:0,y:0},this.shrink=.97,this.size=2,this.resistance=1,this.gravity=0,this.flick=!1,this.alpha=1,this.fade=0,this.color=qt||0,this.createSprite()}createSprite(){this.sprite=new PIXI.Sprite(Wt.texture),this.sprite.width=this.sprite.height=10;let Vt=Bt(this.color/360,1,0.5);this.sprite.tint=(Vt[0]<<16)+(Vt[1]<<8)+Vt[2],Ht.addChild(this.sprite)}destroy(){Ht.removeChild(this.sprite),this.sprite.destroy()}update(){this.vel.x*=this.resistance,this.vel.y*=this.resistance,this.vel.y+=this.gravity,this.pos.x+=this.vel.x/game.scale,this.pos.y+=this.vel.y/game.scale,this.size*=this.shrink,this.alpha-=this.fade,this.sprite.position.set(this.pos.x,this.pos.y);let Vt=this.flick?Math.random()*this.size:this.size;this.sprite.scale.set(Vt/10/game.scale)}exists(){return 0.1<=this.alpha&&1<=this.size}}Wt.texture=PIXI.Texture.fromImage(getFilePath("sparkbwsmall.png")),window.createExplosion=function(Vt,qt){var Kt=10*Math.random()+100;qt=qt||10*Math.floor(360*Math.random()/10);for(var Zt=0;Zt<Kt;Zt++){var Qt=new Wt(Vt,qt),Jt=2*(Math.random()*Math.PI),$t=Math.cos(Math.random()*Math.PI/2)*Tools.randInt(4,12);Qt.vel.x=Math.cos(Jt)*$t,Qt.vel.y=Math.sin(Jt)*$t,Qt.size=12,Qt.resistance=0.92,Qt.shrink=0.05*Math.random()+0.93,Qt.flick=!0,Yt.push(Qt)}};let zt=0;SWAM.fx={},SWAM.fx.stopFireworks=()=>{SWAM.debug&&console.log("Fireworks stopped"),zt=0},SWAM.fx.startFireworks=Vt=>{function qt(){let Qt,Jt,$t;return Vt?(Qt=1==Vt?Xt:Gt,Jt=700,$t=500):(Qt=Graphics.getCamera(),Jt=game.halfScreenX/game.scale,$t=game.halfScreenY/game.scale),new Vector(Tools.rand(Qt.x-Jt,Qt.x+Jt),Tools.rand(Qt.y-$t,Qt.y+$t))}function Kt(){let Qt=qt();createExplosion(Qt);let Jt=new Date().getTime();59000>Jt-zt&&setTimeout(Kt,Tools.randInt(400,1e3))}zt=new Date().getTime(),SWAM.debug&&console.log("Fireworks satarted");let Zt=Tools.randInt(1,4);for(let Qt=0;Qt<Zt;Qt++)Kt()},SWAM.on("CTF_MatchStarted",SWAM.fx.stopFireworks),SWAM.on("gameWipe",SWAM.fx.stopFireworks),SWAM.on("CTF_MatchEnded",Vt=>{SWAM.Settings.general.matchEndFX&&SWAM.fx.startFireworks(Vt.w)}),SWAM.one("gameRunning",()=>{Ht=new PIXI.Container,game.graphics.layers.objects.addChild(Ht)})}(),SWAM.mapColorizer=new function(){function Bt($t){for(let en in $t)Qt[en]=($t[en]-1)/Zt}function Xt($t,en){Gt(),Jt=new Date,qt=!0,Vt=0,zt=50,jt.scale.set(0),jt.alpha=0.4,jt.tint=en,jt.position.set($t.x,$t.y),Wt.addChild(jt),Kt.start(),game.graphics.layers.map.filters=[new PIXI.filters.AdjustmentFilter]}function Gt(){Kt.stop()}function Yt(){if(SWAM.debug){let $t=new Date().getTime()-Jt.getTime();console.log("Steps: "+Vt+"   Time: "+$t/1e3+"ms.")}}let jt=new PIXI.Graphics,Wt=game.graphics.layers.groundobjects,zt=0,Vt=0,qt=!1;this.circle=jt,jt.beginFill(16777215,1),jt.drawCircle(0,0,50),jt.endFill(),jt.blendMode=PIXI.BLEND_MODES.ADD,jt.alpha=0.3;let Kt=new PIXI.ticker.Ticker;Kt.autoStart=!1,Kt.add(function(){if(qt){if(jt.width>1.8*config.mapWidth)return Yt(),qt=!1,void Graphics.renderBackground();for(let en in Qt)game.graphics.layers.map.filters[0][en]+=Qt[en];0.2<jt.alpha&&(jt.alpha-=3e-3),jt.height=jt.width+=zt,zt+=5}else if(Vt<4*Zt)for(let en in Qt)game.graphics.layers.map.filters[0][en]-=Qt[en]/4;else Gt(),Yt();Vt++,Graphics.renderBackground()}),Kt.stop();const Zt=145;let Qt={},Jt=new Date;this.showBlue=function(){Bt({gamma:1.2,saturation:0.8,contrast:1,brightness:1.3,red:0.1,green:0.3,blue:0.7,alpha:1.5}),Xt(SWAM.ArrowIndicator.BLUE.tracker.flag.BASE_COORDINATES,3355647)},this.showRed=function(){Bt({gamma:1.7,brightness:1.3,contrast:1.2,saturation:.2,red:0.7,green:0.3,blue:0.3,alpha:1.2}),Xt(SWAM.ArrowIndicator.RED.tracker.flag.BASE_COORDINATES,16724787)},this.remove=function(){Gt(),jt.scale.set(0),Wt.removeChild(jt),game.graphics.layers.map.filters=[]},SWAM.on("CTF_MatchEnded",$t=>{1==$t.w?SWAM.mapColorizer.showBlue():SWAM.mapColorizer.showRed()}),SWAM.on("CTF_MatchStarted",this.remove),SWAM.on("gameWipe",this.remove)};let sentMessages=[],sentMessageIndex=0;$("#chatinput").keydown(function(Bt){let Xt=$("#chatinput");if(""==Xt.val()||Xt.val()==sentMessages[sentMessageIndex]){if(38==Bt.which&&0<sentMessageIndex)return sentMessageIndex--,Xt.val(sentMessages[sentMessageIndex]),Bt.stopImmediatePropagation(),Bt.preventDefault(),!1;if(40==Bt.which&&sentMessageIndex<sentMessages.length)return sentMessageIndex++,sentMessageIndex<sentMessages.length?Xt.val(sentMessages[sentMessageIndex]):Xt.val(""),Bt.stopImmediatePropagation(),Bt.preventDefault(),!1}if(13==Bt.which){let Gt=Xt.val();""!=Gt&&(sentMessages.push(Gt),sentMessageIndex=sentMessages.length,50<sentMessages.length&&sentMessages.shift())}}),$("#chatbox").mousedown(function(Bt){3==Bt.which&&Bt.target.className.includes("text")&&copyTextToClipboard(Bt.target.innerText)}),SWAM.scoreboard_click_handler=function(Bt){var Xt=$(Bt.currentTarget).attr("player-id");SWAM.setTargetedPlayer(Xt)},SWAM.keydown_handler=function(Bt){if(!(game.state!==Network.STATE.PLAYING||SWAM.chatinputVisible())){var Xt=$.inArray(Bt.which,[65,68,87,83,37,38,39,40]);-1<Xt&&AutoPilot&&0<AutoPilot.currentNode&&AutoPilot.cancel(),game.spectatingID||(Xt=$.inArray(Bt.which,[87,83,38,40,53,35]),-1<Xt&&(SWAM.CruiseMode.isOn()?SWAM.CruiseMode.off(0!=Xt&&2!=Xt):(53==Bt.keyCode||35==Bt.keyCode)&&SWAM.CruiseMode.on())),89==Bt.keyCode&&(Network.sendCommand("drop",""),Bt.stopImmediatePropagation(),Bt.preventDefault()),game.spectatingID&&(["1","2","3","4","5"].includes(Bt.key)&&UI.selectAircraft(parseInt(Bt.key)),Bt.stopImmediatePropagation(),Bt.preventDefault()),AutoPilot&&AutoPilot.mimic_keydown_handler(Bt),SWAM.trigger("keydown",Bt)}},SWAM.keyup_handler=function(Bt){if(!(game.state!==Network.STATE.PLAYING||SWAM.chatinputVisible())){switch(SWAM.radio.handle_keys(Bt),Bt.which){case 46:clearChat(Bt);break;case 114:SWAM.toggleLeaderboard();break;case 115:SWAM.toggleUI();break;case 116:emotesPanel.toggle();break;case 120:SWAM.GameLog.show();break;case 121:SWAM.OpenSettingsWindow();}SWAM.trigger("keyup",Bt)}},SWAM.canvas_click_handler=function(Bt){if(1==Bt.which&&Bt.altKey){var Xt=game.screenX-config.minimapPaddingX-config.minimapSize,Gt=game.screenX-config.minimapPaddingX,Yt=game.screenY-config.minimapPaddingY-config.minimapSize/2,Ht=game.screenY-config.minimapPaddingY;if(Bt.offsetX>Xt&&Bt.offsetX<Gt&&Bt.offsetY>Yt&&Bt.offsetY<Ht){var jt=-1*(32768*((game.screenX-config.minimapPaddingX-Bt.offsetX)/config.minimapSize)-16384),Wt=-1*(16384*(2*((game.screenY-config.minimapPaddingY-Bt.offsetY)/config.minimapSize))-8192);AutoPilot.log(jt,Wt),AutoPilot.NavigateTo(jt,Wt),SWAM.trigger("minimap_click",[Bt,jt,Wt])}}SWAM.trigger("canvas_click",Bt)},SWAM.canvas_mousedown_handler=function(Bt){if(AutoPilot&&AutoPilot.checkMimic(Bt),!Players.amIAlive()&&1==Bt.which){let Xt=SWAM.getClosestPlayer(Bt.offsetX,Bt.offsetY);null!=Xt&&Network.sendCommand("spectate",Xt.id+"")}SWAM.trigger("canvas_mousedown",Bt)},SWAM.listLayers=function(Bt){for(var Xt=0;Xt<Bt.children.length;Xt++)console.log(Bt.children[Xt].layerName)},SWAM.debug,AutoPilot.Load(),SWAM.Audio.initialize(),function(){console.log("%cSTAR%cMASH %cLoaded! %cversion: "+SWAM_version,"font-size: 20px; color: #c2b000;","font-size: 20px; color: #df2559;","font-size: 20px; color: black;","font-size: 14px; color: black;")}(),SWAM.Theme&&(SWAM.Theme.start(),setTimeout(()=>{SWAM.loadSettings()},1))}SWAM.injectTextures=function(Bt,Xt,Gt,Yt,Ht){$.extend(Bt,{emotes:getFilePath("emotes.png")});var jt={ui_minimap_1:["items",[404,140,64,64]],ui_minimap_2:["items",[540,140,64,64]],ui_minimap_3:["items",[268,140,64,64]]};const Wt=["tf","pepe","clap","lol","bro","kappa","cry","rage","watchingyou","cool","party","facepalm","hehe","wink","joke","sweeteyes","insult","angry","fury","yell","lol","cry","sad","zzz","mime","salute","lotfl","loser","fgun","fguns","dab","doh","derp","nerd","flushed","rolleyes","drunk","tblue","tred","thief","greedy","blah","stopit","tired","drool","devil","devilfury","king1","king2","king3","old","leader","dog","doglol","dogrr","dogoh","clap","victory","fu","tup","tdown","h5","hs","wave","ass","x","x","x","x","x","x","x","redcap","bluecap","bluefire","redfire","fire","alert","shield","inferno","turtle","turtled","heli","pred","goli","prow","nado","uplove","poo","poosad","pooangry","poobull","bones","jolly","wflag","bomb","heart","bear","bird","chicken","peace","party1","party2","beer","rambo","joker","vader","yoda","godfather","hawkes","monkey","narf","steamr","noob1","noob2","dragon","bot","nobot","noprow","noheli","putin","trump","kim","rip","boom","canttouch","bang","ddd","revenge","rekt","skullpilot","hellpilot","acepilot","pigpilot","ndt","raptor","gg","ggwp","bs","nyan","elon","think","missibis","pluto","shrug","ace","salty","mvp","stop","camp","bananas","mine"];let zt={};for(let Kt=8;Kt<Wt.length;Kt++){let Zt=Wt[Kt],Qt=Kt-8;"x"==Zt||(zt["emote_"+Zt]=["emotes",[64*(Qt%16),64*Math.floor(Qt/16),64,64]])}for(let Kt in SWAM.getEmotesList=()=>Wt,$.extend(jt,zt),jt)Xt[Kt]=jt[Kt];var qt={minimap1:{texture:"ui_minimap_1",layer:"ui2",anchor:[0.5,0.5],alpha:1,scale:.25},minimap2:{texture:"ui_minimap_2",layer:"ui2",anchor:[0.5,0.5],alpha:1,scale:.25},minimap3:{texture:"ui_minimap_3",layer:"ui2",anchor:[0.5,0.5],alpha:1,scale:.25},minimapTarget:{texture:"powerup_circle",layer:"ui3",anchor:[0.5,0.5],alpha:1,scale:.12}};for(let Kt in qt)Yt[Kt]=qt[Kt];SWAM.Theme&&SWAM.Theme.injectTextures&&SWAM.Theme.injectTextures(Bt,Xt,Gt,Yt,Ht)},SWAM.injectSounds=function(Bt){SWAM.Theme&&SWAM.Theme.injectSounds&&SWAM.Theme.injectSounds(Bt)},!function(){function Bt(un){const pn=function(){let hn=Array.from(arguments);hn.shift();try{return un.apply(null,hn)}catch(fn){console.error(fn)}};return pn.guid=un.guid=un.guid||$.guid++,pn}function Gt(){let un={StarMashThemes:{url:getFilePath("swam.themes.js"),enabled:!0}};return SWAM.debug&&(un.SWAM_Debug={url:getFilePath("swam.debug.js"),enabled:!0}),un}function Yt(){return location.protocol+"//"+location.hostname+(location.port?":"+location.port:"")+location.pathname+(location.search?location.search:"")}function Ht(){return new Promise(un=>{SWAM.Templates=document.createElement("div"),$.get(getFilePath("mod_templates.html"),cn=>{$(SWAM.Templates).html(cn),$("body").append(getTemplate("#ModStyles")),un()})})}function jt(){function un(pn,cn){var hn=0;(function fn(){hn<pn.length?(console.log("SWAM: Loading script: "+pn[hn]),$.cachedScript(pn[hn]).fail(function(){console.error("SWAM: Load failed: "+pn[hn])}).always(function(){++hn,fn()})):cn&&cn()})()}return new Promise(pn=>{let hn=[];for(let fn in rn)rn[fn].enabled&&hn.push(rn[fn].url);un(hn,function(){hn=Wt().dependencies,un(hn,pn)})})}function Wt(){let un={},pn={};for(let cn in on){let hn=on[cn];pn[hn.url]=hn.url;for(let fn of hn.dependencies)un[fn]=fn}return{extensions:Object.values(pn),dependencies:Object.values(un)}}function Vt(un=2){let pn=ErrorStackParser.parse(new Error)[un].fileName;return pn}function qt(un){let pn=$.extend({id:"",themeName:"",description:"",author:"Anonymous",version:"1.0"},un);if($.extend(un,pn),"function"!=typeof un)throw"Invalid theme. The object is not a function.";if(un.id=un.name,""==un.themeName)throw"Invalid theme. 'themeName' field not defined.";if(un[un.id])throw"A theme with that name has already been registered!";sn[un.id]=un,SWAM.trigger("themeAdded",un)}function Kt(un,pn,cn){function hn(yn){gn++,mn=yn}function fn(){SWAM.off("extensionAdded",hn),1==gn?pn(mn):0==gn?cn("File loaded, but no extension registered successfully.<br>Check the console to verify if there were errors when the file was executed."):cn("File loaded, but multiple registrations where detected. A file must have only one registration.")}let gn=0,mn=null;SWAM.on("extensionAdded",hn);try{jQuery.ajax({dataType:"script",url:un,cache:!0,timeout:5e3}).done(fn).fail(function(){SWAM.off("extensionAdded",hn),cn("There was an error when trying to load the file.")})}catch(yn){SWAM.off("extensionAdded",hn),cn("There was an error executing the file. "+yn),console.error(yn)}}function Zt(){let un={extensionsToLoad:rn,selectedTheme:dn};window.specialTheme&&(un.lastSpecialTheme=window.specialTheme),localStorage.setItem("SWAM_Extensions",JSON.stringify(un))}function Jt(un){let pn=un.info.id;if(delete rn[pn],on[pn]){for(let cn of on[pn].themes)delete SWAM.Settings.themes[cn.id],delete sn[cn.id];delete SWAM.Settings.extensions[pn],delete on[pn]}localStorage.setItem("SWAM_Settings",JSON.stringify(SWAM.Settings))}function $t(un,pn){pn=pn.replace(/\[(\w+)\]/g,".$1"),pn=pn.replace(/^\./,"");for(var cn=pn.split("."),hn=0,fn;hn<cn.length;++hn)if(fn=cn[hn],fn in un)un=un[fn];else return;return un}function en(un,pn,cn){pn=pn.replace(/\[(\w+)\]/g,".$1"),pn=pn.replace(/^\./,"");let hn=pn.split(".");for(let fn=0,gn;fn<hn.length;++fn)if(gn=hn[fn],gn in un)fn<hn.length-1?un=un[gn]:un[gn]=cn;else return}function nn(un,pn){function cn(xn){return xn=xn.replace(/\[(\w+)\]/g,".$1"),xn=xn.replace(/^\./,""),xn=xn.replace(/\./g,""),xn}function hn(xn){xn=$.extend({css:{}},xn),this.render=function(vn){let En=$("<div><hr class='separator'></div>"),Sn=$("hr",En).css(xn.css);vn.append(En)}}function fn(xn,vn){vn=$.extend({click:function(){},css:{minWidth:"250px",outline:"none",margin:"5px"}},vn),this.render=function(Tn){let En=`<button class='btn'>${xn}</button>`,Sn=$(En).css(vn.css).click(vn.click);Tn.append(Sn)}}function gn(xn,vn,Tn){Tn=$.extend({css:{},useToggle:!0},Tn),this.property=xn;let En=cn(xn),Sn=null;this.render=function(wn){let Cn=null;Cn=Tn.useToggle?`<div><label><label class='switch'><input type='checkbox' class='chk${En}' /><span class="slider round"></span></label> ${vn}</label></div>`:`<div><label><input type='checkbox' class='chk${En}' /> ${vn}</label></div>`;let Pn=$(Cn);Sn=$(`.chk${En}`,Pn)[0],$(Pn).css(Tn.css),wn.append(Pn)},this.getValue=function(){return Sn.checked},this.setValue=function(wn){Sn.checked=wn}}function mn(xn,vn,Tn){Tn=$.extend({css:{},maxLength:null},Tn),this.property=xn;let En=cn(xn),Sn=null;this.render=function(wn){let Cn=`<div><label><input type='text' class='txt${En}' /> ${vn}</label></div>`,Pn=$(Cn);Sn=$(`.txt${En}`,Pn),Sn.css(Tn.css),Tn.maxLength&&Sn.attr("maxlength",Tn.maxLength),wn.append(Pn)},this.getValue=function(){return Sn.val()},this.setValue=function(wn){Sn.val(wn)}}function yn(xn,vn,Tn){this.property=xn;let En=cn(xn),Sn=null,wn=null;Tn=$.extend({min:0,max:10,step:1},Tn),Tn=$.extend({css:{minWidth:10*(""+Tn.max).length+20+"px"}},Tn),this.render=function(Cn){let Pn=`<div><label><span class='sliderValue'></span> <input type='range' class='slider${En}' min='${Tn.min}' max='${Tn.max}' step='${Tn.step}' /> ${vn}</label></div>`,An=$(Pn);Sn=$(`.slider${En}`,An),wn=$(".sliderValue",An).css(Tn.css),Sn.change(()=>{wn.html(Sn.val())}),Cn.append(An)},this.getValue=function(){return Sn.val()},this.setValue=function(Cn){Sn.val(Cn),wn.html(Cn)}}function _n(xn,vn,Tn,En){En=$.extend({css:{}},En),this.property=xn;let Sn=cn(xn),wn=null;this.render=function(Cn){let Pn=`<div><label><select class='sel${Sn}'></select> ${vn}</label></div>`,An=$(Pn);wn=$(`.sel${Sn}`,An).css(En.css);for(let Mn of Object.keys(Tn))wn.append($("<option>",{value:Mn,text:Tn[Mn]}));Cn.append(An)},this.getValue=function(){return wn.val()},this.setValue=function(Cn){wn.val(Cn)}}let bn=[];this.setValue=function(xn){for(let vn of bn)if(vn.property&&vn.setValue){let Tn=vn.property;Tn=un.root?un.root+"."+vn.property:vn.property;try{let En=$t(xn,Tn);vn.setValue(En)}catch(En){console.error(En)}}},this.onAccept=function(xn){let vn=un.root?$t(xn,un.root):xn;for(let Tn of bn)if(Tn.property&&Tn.getValue)try{en(vn,Tn.property,Tn.getValue())}catch(En){console.error(En)}},this.render=function(xn){let vn=$(getTemplateContent("#Settings_section"));$(".sectionsContainer",xn).append(vn),$(".title",vn).html(pn);let Tn=$(".values",vn);for(let En of bn)En.render(Tn)},this.addSeparator=function(xn){bn.push(new hn(xn))},this.addButton=function(xn,vn){bn.push(new fn(xn,vn))},this.addBoolean=function(xn,vn,Tn){bn.push(new gn(xn,vn,Tn))},this.addString=function(xn,vn,Tn){bn.push(new mn(xn,vn,Tn))},this.addValuesField=function(xn,vn,Tn,En){bn.push(new _n(xn,vn,Tn,En))},this.addSliderField=function(xn,vn,Tn){bn.push(new yn(xn,vn,Tn))}}let an=$({});SWAM.trigger=an.trigger.bind(an),SWAM.on=function(un,pn){an.on(un,Bt(pn))},SWAM.one=function(un,pn){an.one(un,Bt(pn))},SWAM.off=an.off.bind(an),SWAM.extend=function(un,pn){return un.prototype=Object.create(pn.prototype),un.prototype.constructor=un,pn.prototype};let rn=Gt(),on={},sn={},dn="",ln;"#clean"==window.location.hash?Zt():"#noextensions"!=window.location.hash&&function(){try{let un=localStorage.getItem("SWAM_Extensions");null!=un&&(un=JSON.parse(un),un.extensionsToLoad&&(rn=$.extend(un.extensionsToLoad,Gt())),un.selectedTheme&&""!=un.selectedTheme&&(dn=un.selectedTheme),un.lastSpecialTheme&&(ln=un.lastSpecialTheme))}catch(un){}}(),SWAM.loadTheme=function(){ln!=window.specialTheme&&(window.specialTheme&&(dn=window.specialTheme),Zt()),null!=dn&&""!=dn&&"function"==typeof sn[dn]||(dn="RealisticSprites"),SWAM.Theme=new sn[dn];let un=SWAM.Theme.settingsProvider;un&&(un.title=sn[dn].themeName,un.isTheme=!0,un.root="themes."+sn[dn].id)},SWAM.getThemeFunction=function(){return sn[dn]},SWAM.getThemeSettings=function(){let un=SWAM.Settings;return SWAM.Settings||(un=JSON.parse(localStorage.getItem("SWAM_Settings"))),$t(un,SWAM.Theme.settingsProvider.root)},SWAM.loadFiles=function(un){Ht().then(jt).then(()=>{un&&(un(),delete SWAM.loadFiles)})};SWAM.getSettingsProviders=function(){let un=[];SWAM.settingsProvider&&un.push(SWAM.settingsProvider),SWAM.Theme&&SWAM.Theme.settingsProvider&&un.push(SWAM.Theme.settingsProvider);for(let pn of Object.values(on))pn.settingsProvider&&un.push(pn.settingsProvider);return un},SWAM.registerExtension=function(un){if(un=$.extend({id:"",name:"",description:"",author:"Anonymous",version:"0.0",dependencies:[],themes:[],settingsProvider:null,url:""},un),""==un.id)throw"Invalid extension. 'id' field not defined.";if(""==un.name)throw"Invalid extension. 'name' field not defined.";if(on[un.id])throw"An extension with that name has already been registered!";let pn=[];try{"StarMashThemes"!==un.id&&(on[un.id]=un);for(let hn of un.themes)qt(hn),pn.push(hn);let cn=un.settingsProvider;cn&&(cn.title=un.name,cn.isExtension=!0,cn.root="extensions."+un.id),rn[un.id]={url:Vt(),enabled:!0,info:{id:un.id,name:un.name,description:un.description,author:un.author,version:un.version}},SWAM.trigger("extensionAdded",un)}catch(cn){delete on[un.id];for(let hn of pn)delete sn[hn.id];throw"There was an error when attempting to load a theme: "+cn}};SWAM.OpenExtensionsWindow=function(){function un(){hn(),cn()}function pn(){$(".section",yn).slice(2).remove()}function cn(){let vn=$("#selTheme",yn);vn.html("");let Tn=Object.values(sn).sort((En,Sn)=>En.themeName>Sn.themeName);$.each(Tn,function(En,Sn){vn.append($("<option>",{value:Sn.id,text:Sn.themeName}))}),vn.val(dn)}function hn(){for(let vn in pn(),rn)"StarMashThemes"!=vn&&fn(rn[vn])}function fn(vn){let Tn=$(getTemplate("#ExtensionEditPanel",!1));$(".sectionsContainer",yn).append(Tn);let En=$(".modName",Tn),Sn=$(".arrows",Tn);$(".name",Tn).html(vn.info.name),$(".description",Tn).html(vn.info.description),$(".author",Tn).html(vn.info.author),$(".version",Tn).html(vn.info.version),$(".url",Tn).html(vn.url).prop("title",vn.url),$(".chkEnabled",Tn).prop("checked",vn.enabled).change(wn=>{vn.enabled=wn.currentTarget.checked}),$(".btnDelete",Tn).click(()=>{confirmDialog({title:"Confirmation needed",message:"Are you sure? The extension will not be loaded once you restart the game.",yes:function(){Jt(vn),un()}})})}function mn(){yn.remove(),Sound.UIClick()}let yn=createModal({title:"StarMash Themes and Extensions",content:getTemplate(".SWAM_Extensions"),width:"800px",maxHeight:"80%",height:"800px",top:"10%"}),_n=$.extend({},rn),bn=$.extend({},on),xn=$.extend({},sn);un(),$(".btnNew",yn).click(function(){let vn=$(getTemplate("#ExtensionEditPanel",!1));$(".sectionsContainer",yn).append(vn);let Tn=$(".modName",vn),En=$(".scriptURL",vn),Sn=$(".arrows",vn),wn=$(".newModButtons",vn),Cn=$(".error",vn);SWAM.debug||En.val(""),Cn.hide(),Tn.hide(),Sn.hide(),wn.show(),En.show(),$(".btnAcceptURL",vn).click(function(){wn.hide(),Cn.html("").hide(),Kt(En.val(),function(){un()},function(Pn){Cn.html(Pn).show(),wn.show()})}),$(".btnCancelURL",vn).click(function(){vn.remove()})}),$(".btnAccept",yn).click(()=>{dn=$("#selTheme",yn).val(),Zt(),mn(),window.location=Yt()}),$(".btnCancel",yn).click(()=>{rn=_n,on=bn,sn=xn,mn()})},window.SettingsProvider=function(un,pn){function cn(fn){let gn={},mn=gn;if(""==fn)return gn;fn=fn.replace(/\[(\w+)\]/g,".$1"),fn=fn.replace(/^\./,"");for(var yn=fn.split("."),_n=0,bn;_n<yn.length;++_n)bn=yn[_n],mn[bn]={},mn=mn[bn];return gn}this.title="";let hn=[];this.getDefault=function(){let fn=this.root||"";if(""!=fn){let gn=cn(fn);return en(gn,fn,un),gn}return un},this.getLocal=function(){},this.apply=function(fn){pn&&pn($t(fn,this.root),fn)},this.setWindow=function(fn,gn){for(let yn of hn)yn.render(gn);return{setValues:function(yn){for(let _n of hn)_n.setValue(yn)},accept:function(){for(let yn of hn)yn.onAccept(fn)},cancel:function(){}}},this.addSection=function(fn){let gn=new nn(this,fn);return hn.push(gn),gn}},SWAM.replaceCSS=function(un){$("link[href*=\"style.css\"]").replaceWith("<link href=\""+un+"\" type=\"text/css\" rel=\"stylesheet\">")}}(),window.AutoPilot={Matrix:[[]],WALKABLE:0,BLOCKED:1,keystate:{UP:!1,DOWN:!1,LEFT:!1,RIGHT:!1},zero:{x:0,y:0},topLeft:{x:-16352,y:-8160},greenland:{x:-5284,y:-7092},Load:function(){$.getScript(getFilePath("pathfinding-browser.min.js"),function(){for(var Ht=window.config.walls,zt=Array(164),Vt=0;164>Vt;Vt++){zt[Vt]=Array(328);for(var qt=0;328>qt;qt++)zt[Vt][qt]=AutoPilot.WALKABLE}for(var Kt of Ht)for(var Zt=AutoPilot.getGraphBoundingBox(Kt[0],Kt[1],Kt[2]),Vt=Zt.p1.y;Vt<=Zt.p2.y;Vt++)for(var qt=Zt.p1.x;qt<=Zt.p2.x;qt++)try{zt[Vt][qt]=AutoPilot.BLOCKED}catch(Qt){}AutoPilot.Matrix=zt})},angleTo:function(Bt,Xt){var Gt=Math.atan2(-Bt.x+Xt.x,Bt.y-Xt.y);return 0>Gt&&(Gt+=2*Math.PI),Gt},angleToNeg:function(Bt,Xt){return Math.atan2(-Bt.x+Xt.x,Bt.y-Xt.y)},mapCoordX:function(Bt,Xt){return Xt|=0,Math.floor((Bt+16384+Xt)/100)},mapCoordY:function(Bt,Xt){return Xt|=0,Math.floor((Bt+8192+Xt)/100)},getGraphBoundingBox:function(Bt,Xt,Gt){return{p1:{x:this.mapCoordX(Bt,-Gt),y:this.mapCoordY(Xt,-Gt)},p2:{x:this.mapCoordX(Bt,Gt),y:this.mapCoordY(Xt,Gt)}}},log:function(Bt){AutoPilot.logMoves&&console.log(Bt)},right:function(){!0==this.keystate.RIGHT||(this.log("right"),Network.sendKey("RIGHT",!0),this.keystate.RIGHT=!0)},left:function(){!0==this.keystate.LEFT||(this.log("left"),Network.sendKey("LEFT",!0),this.keystate.LEFT=!0)},noSteer:function(){!1==this.keystate.RIGHT&&!1==this.keystate.LEFT||(this.log("nosteer"),this.keystate.RIGHT&&(Network.sendKey("RIGHT",!1),this.keystate.RIGHT=!1),this.keystate.LEFT&&(Network.sendKey("LEFT",!1),this.keystate.LEFT=!1))},forward:function(){!0==this.keystate.UP||(this.log("up"),Network.sendKey("UP",!0),this.keystate.UP=!0)},backwards:function(){!0==this.keystate.DOWN||(this.log("down"),Network.sendKey("DOWN",!0),this.keystate.DOWN=!0)},stop:function(){!1==this.keystate.UP&&!1==this.keystate.DOWN||(this.log("stop"),this.keystate.DOWN&&(Network.sendKey("DOWN",!1),this.keystate.DOWN=!1),this.keystate.UP&&(Network.sendKey("UP",!1),this.keystate.UP=!1))},fullStop:function(){this.log("fullstop"),this.noSteer(),this.stop()},tg:function(){this.moveTo(this.greenland.x,this.greenland.y)},tgs:function(){this.NavigateTo(this.greenland.x,this.greenland.y)},NavigateTo:function(Bt,Xt){var Gt=Players.getMe(),Yt=this.mapCoordX(Gt.pos.x),Ht=this.mapCoordY(Gt.pos.y),jt=this.mapCoordX(Bt),Wt=this.mapCoordY(Xt);AutoPilot.path=this.SearchPath(Yt,Ht,jt,Wt),AutoPilot.debug&&(AutoPilot.erasePath(),AutoPilot.drawPath()),AutoPilot.exit=!1,this.currentNode=0,$("#AutoPilotAlert").show(),this.moveNext()},erasePath:function(){game.graphics.layers.objects.removeChild(this.drawnPath)},drawnPath:null,drawPath:function(){for(var Bt=AutoPilot.path,Xt=new PIXI.Graphics,Gt=0;Gt<Bt.length;Gt++){var Yt=Bt[Gt][0],Ht=Bt[Gt][1];Xt.beginFill(65280,.2),Xt.drawRect(100*Yt-16384,100*Ht-8192,100,100),Xt.endFill()}this.drawnPath=Xt,game.graphics.layers.objects.addChild(Xt)},Test:function(){if(window.res=this.SearchPath(111,11,161,46),!0===AutoPilot.debug){for(var Ht=Array(100),jt=0;100>jt;jt++){Ht[jt]=Array(100);for(var Wt=0;100>Wt;Wt++)Ht[jt][Wt]=apMatrix[jt][Wt+100]}window.matrixSample=Ht}},cancel:function(){AutoPilot.exit=!0,AutoPilot.fullStop(),$("#AutoPilotAlert").hide()},currentNode:0,moveNext1:function(){var Bt=AutoPilot.path[this.currentNode].y,Xt=AutoPilot.path[this.currentNode].x;this.moveTo(100*Bt-16384+50,100*Xt-8192+50,!0)},moveNext:function(){var Bt=AutoPilot.path[this.currentNode][0],Xt=AutoPilot.path[this.currentNode][1];this.moveTo(100*Bt-16384+50,100*Xt-8192+50,!0)},prevX:0,prevY:0,rotating:!1,rotateTo:function(Bt,Xt,Gt=250,Yt){var Ht=Bt-Xt.rot;Ht>Math.PI&&(Ht-=2*Math.PI),Ht<-Math.PI&&(Ht+=2*Math.PI);let jt=Math.round(1e3*(Math.abs(Ht)/(60*config.ships[Xt.type].turnFactor))),Wt=0<Ht?AutoPilot.right:AutoPilot.left,zt=0>=Ht?AutoPilot.right:AutoPilot.left;AutoPilot.rotating=!0,Wt.call(AutoPilot),setTimeout(function(){AutoPilot.noSteer(),setTimeout(()=>{AutoPilot.rotating=!1,Yt&&Yt()},Gt)},jt)},moveTo:function(Bt,Xt,Gt){function Yt(){if(!AutoPilot.exit){if(Ht=Players.getMe(),300<Math.abs(AutoPilot.prevX-Ht.pos.x)||300<Math.abs(AutoPilot.prevY-Ht.pos.y))return void AutoPilot.cancel();if(AutoPilot.prevX=Ht.pos.x,AutoPilot.prevY=Ht.pos.y,0==Ht.pos.x||0==Ht.pos.y)return void AutoPilot.cancel();var jt=AutoPilot.angleTo(Ht.pos,{x:Bt,y:Xt}),Wt=!0,zt=jt-Ht.rot;if(0.3<Math.abs(zt))AutoPilot.fullStop(),AutoPilot.rotateTo(jt,Ht);else{if(AutoPilot.noSteer(),AutoPilot.forward(),Wt=!0,AutoPilot.currentNode<AutoPilot.path.length-1){var Vt=100*AutoPilot.path[AutoPilot.currentNode+1].y-16384+50,qt=100*AutoPilot.path[AutoPilot.currentNode+1].x-8192+50;jt=AutoPilot.angleTo(Ht.pos,{x:Bt,y:Xt});var Kt=AutoPilot.angleTo({x:Bt,y:Xt},{x:Vt,y:qt});Wt=0.3<=Math.abs(Kt-jt)}Wt&&setTimeout(function(){AutoPilot.stop()},50)}!AutoPilot.exit&&100<Tools.distance(Ht.pos.x,Ht.pos.y,Bt,Xt)?setTimeout(Yt,100):!AutoPilot.exit&&Gt&&AutoPilot.currentNode<AutoPilot.path.length-1?(AutoPilot.currentNode++,AutoPilot.moveNext()):AutoPilot.fullStop()}}AutoPilot.debug&&console.log(this.currentNode),Gt|=!1,AutoPilot.exit=!1;var Ht=Players.getMe();this.prevX=Ht.pos.x,this.prevY=Ht.pos.y,Yt()},SearchPath:function(Bt,Xt,Gt,Yt){let Ht=new PF.Grid(AutoPilot.Matrix),jt=new PF.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0}),Wt,zt;try{Wt=jt.findPath(Bt,Xt,Gt,Yt,Ht),zt=PF.Util.smoothenPath(Ht,Wt)}catch(Vt){console.log("error pf: ",Wt,zt)}return zt},mimicTarget:0,checkMimic:function(Bt){if(3==Bt.which&&Bt.altKey){let Xt=SWAM.getClosestPlayer(Bt.offsetX,Bt.offsetY);if(Xt.id==game.myID)AutoPilot.mimicTarget=0,Network.sendSay("Mimicking stopped"),Network.sendKey("UP",!1),Network.sendKey("DOWN",!1);else if(Network.sendSay("Mimicking "+Xt.name+" ..."),AutoPilot.mimicTarget=Xt.id,AutoPilot.aligned=!1,AutoPilot.mimicPaused=!0,!AutoPilot.aligned)return void AutoPilot.mimicRotation(!0)}},mimic_keydown_handler:function(Bt){if(this.mimicTarget!=game.myID){if("-"==Bt.key&&(this.reverseMimic=!this.reverseMimic,this.reverseMimic?Network.sendSay("reverse"):Network.sendSay("normal")),(45==Bt.keyCode||188==Bt.keyCode)&&this.mimicRotation(!1),36==Bt.keyCode||190==Bt.keyCode)if(AutoPilot.mimicPaused=!AutoPilot.mimicPaused,AutoPilot.mimicPaused){let Xt=Players.getMe();Xt.keystate.UP&&Network.sendKey("UP",!1),Xt.keystate.DOWN&&Network.sendKey("DOWN",!1),Xt.keystate.LEFT&&Network.sendKey("LEFT",!1),Xt.keystate.RIGHT&&Network.sendKey("RIGHT",!1),Network.sendSay("paused")}else Network.sendSay("resumed");return Bt.stopImmediatePropagation(),void Bt.preventDefault()}},lastState:{boost:!1,stealthed:!1,strafe:!1,flagspeed:!1,keystate:{}},aligned:!1,reverseMimic:!1,mimicRotation:function(Bt){if(this.mimicTarget!=game.myID){let Xt=Players.getMe(),Gt=Players.get(this.mimicTarget),Yt=Xt.rot-Gt.rot;if(!this.rotating&&0.05<Math.abs(Yt)){console.log(`rotating... delta: ${Yt}   me.rot: ${Xt.rot}   player.rot: ${Gt.rot}`);let Ht=AutoPilot.reverseMimic?Math.PI:0;AutoPilot.rotateTo(Gt.rot+Ht,Xt,250,function(){AutoPilot.aligned=!0,Bt&&(AutoPilot.mimicPaused=!1)})}else;}},mimicStealth:function(Bt){Bt.id==game.myID||Bt.id!=AutoPilot.mimicTarget||AutoPilot.mimicPaused||(Bt.state!=this.lastState.stealthed&&(Network.sendKey("SPECIAL",!0),setTimeout(()=>{Network.sendKey("SPECIAL",!1)},250)),this.lastState.stealthed=Bt.state)},mimicUpdate:function(Bt,Xt){function Gt(Wt,zt){let Vt=Wt;AutoPilot.reverseMimic&&("UP"==Wt?Vt="DOWN":"DOWN"==Wt&&(Vt="UP")),AutoPilot.lastState.keystate[Wt]!=zt[Wt]&&(console.log("sending key: "+Vt+" - "+zt[Wt]),Network.sendKey(Vt,zt[Wt]))}function Yt(){let Wt=Players.getMe();3!=Wt.type&&(Ht.strafe=!1);let zt=Ht.strafe,Vt=AutoPilot.lastState.strafe;zt!=Vt&&Network.sendKey("SPECIAL",zt)}let Ht={keystate:{}};if(Xt.id!=game.myID&&Xt.id==AutoPilot.mimicTarget&&!AutoPilot.mimicPaused){if(null==Xt.keystate)return Bt==Network.SERVERPACKET.PLAYER_FIRE?(Network.sendKey("FIRE",!0),void setTimeout(function(){Network.sendKey("FIRE",!1)},100)):void(Bt==Network.SERVERPACKET.EVENT_BOOST&&AutoPilot.lastState.boost!=Xt.boost&&(Network.sendKey("SPECIAL",Xt.boost),AutoPilot.lastState.boost=Xt.boost));Tools.decodeKeystate(Ht,Xt.keystate);var jt={};jt[Network.SERVERPACKET.PLAYER_UPDATE]="update",jt[Network.SERVERPACKET.PLAYER_FIRE]="fire",jt[Network.SERVERPACKET.EVENT_BOOST]="boost",jt[Network.SERVERPACKET.EVENT_BOUNCE]="bounce",Yt(),null!=Xt.keystate&&(console.log("event: "+Bt[Bt]),Gt("UP",Ht.keystate),Gt("DOWN",Ht.keystate),Gt("LEFT",Ht.keystate),Gt("RIGHT",Ht.keystate)),AutoPilot.lastkeys=$.extend(AutoPilot.lastState,Ht)}},debug:!1,logMoves:!1},SWAM.Audio={Flag:{EnemyTaken:0,OursTaken:1,EnemyCaptured:2,OursCaptured:3,EnemyRecovered:4,OursRecovered:5},initialize:function(){var Bt=new Howl({src:[getFilePath("flag_phrases_1.mp3")],volume:0.5,sprite:{EnemyTaken_1:[0,1450],OursTaken_1:[1500,1800],EnemyCaptured_1:[3300,1800],OursCaptured_1:[5200,1900],EnemyRecovered_1:[7300,1600],OursRecovered_1:[9000,1800],EnemyTaken_2:[11000,1500],OursTaken_2:[12600,1800],EnemyCaptured_2:[14600,1600],OursCaptured_2:[16400,1800],EnemyRecovered_2:[18400,1600],OursRecovered_2:[20200,1800]}});SWAM.Audio.playFlagEvent=function(Xt,Gt){if(config.settings.sound){var Yt=null;for(let Ht in 1!=Gt&&2!=Gt&&(Gt=1),SWAM.Audio.Flag)if(SWAM.Audio.Flag[Ht]==Xt){Yt=Ht+"_"+Gt;break}null!=Yt&&SWAM.Audio.play(Yt)}},SWAM.Audio.play=function(Xt){if(config.settings.sound){let Gt=Bt.play(Xt);setTimeout(function(){Bt.stop(Gt)},Bt._sprite[Xt][1])}}}};function getFilePath(Bt){return"https://molesmalo.github.io/StarWarsMod4AirMash/assets/"+Bt+"?"+SWAM_version}$(function(){(function(){$("body").append($("<div id='LoadingMainScreen' style='position: fixed; top:0px; left:0px; width: 100%; height: 100%; background-color: black; z-index: 1000; '><div id='LoadingText' style='position: absolute; top: calc(50% - 15px); width: 100%; font-size: 30px; color: #555555; text-align: center;  font-family: \"Lucida Sans Unicode\", \"Lucida Grande\", sans-serif; '>Loading...</div></div>")).css("overflow","hidden")})()});function showRequestlyWarningAgain(){localStorage.removeItem("requestlyWarning"),window.location="/"}function showRequestlyWarning(){let Bt=JSON.parse(localStorage.getItem("requestlyWarning"));if(Bt&&Bt.version!=SWAM_version&&(Bt={},localStorage.removeItem("requestlyWarning")),Bt=$.extend({version:SWAM_version,accepted:!1},Bt),!Bt.accepted){let Xt=$(getTemplate("#RequestlyWarning"));$("#btnRequestlyAccept",Xt).click(function(){Bt.accepted=!0,localStorage.setItem("requestlyWarning",JSON.stringify(Bt)),Xt.remove()}),$("body").append(Xt).css("overflow","hidden")}}SWAM.loadFiles(()=>{SWAM.trigger("extensionsLoaded"),SWAM.loadTheme(),SWAM.trigger("themeLoaded"),loadGameCode(),SWAM.Theme.loadGameModules(),SWAM.trigger("gameLoaded"),RunGame(),SWAM(),setTimeout(function(){$("#LoadingMainScreen").remove()},2e3),SWAM.trigger("gameRunning")});