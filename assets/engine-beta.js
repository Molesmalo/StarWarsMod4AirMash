"use strict";!function(Bt,Gt){"object"==typeof module&&"object"==typeof module.exports?module.exports=Bt.document?Gt(Bt,!0):function(Xt){if(!Xt.document)throw new Error("jQuery requires a window with a document");return Gt(Xt)}:Gt(Bt)}("undefined"==typeof window?this:window,function(Bt,Gt){function Xt(wa,Aa){var Ca=(Aa=Aa||kn).createElement("script");Ca.text=wa,Aa.head.appendChild(Ca).parentNode.removeChild(Ca)}function Ht(wa){var Aa=!!wa&&"length"in wa&&wa.length,Ca=Vn.type(wa);return"function"!==Ca&&!Vn.isWindow(wa)&&("array"===Ca||0===Aa||"number"==typeof Aa&&0<Aa&&Aa-1 in wa)}function Yt(wa,Aa){return wa.nodeName&&wa.nodeName.toLowerCase()===Aa.toLowerCase()}function Wt(wa,Aa,Ca){return Vn.isFunction(Aa)?Vn.grep(wa,function(Pa,Ma){return!!Aa.call(Pa,Ma,Pa)!==Ca}):Aa.nodeType?Vn.grep(wa,function(Pa){return Pa===Aa!==Ca}):"string"==typeof Aa?rr.test(Aa)?Vn.filter(Aa,wa,Ca):(Aa=Vn.filter(Aa,wa),Vn.grep(wa,function(Pa){return-1<Gn.call(Aa,Pa)!==Ca&&1===Pa.nodeType})):Vn.grep(wa,function(Pa){return-1<Gn.call(Aa,Pa)!==Ca})}function jt(wa,Aa){for(;(wa=wa[Aa])&&1!==wa.nodeType;);return wa}function zt(wa){return wa}function Vt(wa){throw wa}function qt(wa,Aa,Ca,Pa){var Ma;try{wa&&Vn.isFunction(Ma=wa.promise)?Ma.call(wa).done(Aa).fail(Ca):wa&&Vn.isFunction(Ma=wa.then)?Ma.call(wa,Aa,Ca):Aa.apply(void 0,[wa].slice(Pa))}catch(Ra){Ca.apply(void 0,[Ra])}}function Kt(){kn.removeEventListener("DOMContentLoaded",Kt),Bt.removeEventListener("load",Kt),Vn.ready()}function Qt(){this.expando=Vn.expando+Qt.uid++}function Zt(wa,Aa,Ca){var Pa;if(void 0===Ca&&1===wa.nodeType)if(Pa="data-"+Aa.replace(mr,"-$&").toLowerCase(),"string"==typeof(Ca=wa.getAttribute(Pa))){try{Ca=function(Ma){return"true"===Ma||"false"!==Ma&&("null"===Ma?null:Ma===+Ma+""?+Ma:gr.test(Ma)?JSON.parse(Ma):Ma)}(Ca)}catch(Ma){}fr.set(wa,Aa,Ca)}else Ca=void 0;return Ca}function Jt(wa,Aa,Ca,Pa){var Ra=1,Da=20,Ia=Pa?function(){return Pa.cur()}:function(){return Vn.css(wa,Aa,"")},Oa=Ia(),La=Ca&&Ca[3]||(Vn.cssNumber[Aa]?"":"px"),ka=(Vn.cssNumber[Aa]||"px"!==La&&+Oa)&&_r.exec(Vn.css(wa,Aa)),Ma;if(ka&&ka[3]!==La){La=La||ka[3],Ca=Ca||[],ka=+Oa||1;do ka/=Ra=Ra||".5",Vn.style(wa,Aa,ka+La);while(Ra!=(Ra=Ia()/Oa)&&1!=Ra&&--Da)}return Ca&&(ka=+ka||+Oa||0,Ma=Ca[1]?ka+(Ca[1]+1)*Ca[2]:+Ca[2],Pa&&(Pa.unit=La,Pa.start=ka,Pa.end=Ma)),Ma}function $t(wa){var Ca=wa.ownerDocument,Pa=wa.nodeName,Ma=Tr[Pa],Aa;return Ma||(Aa=Ca.body.appendChild(Ca.createElement(Pa)),Ma=Vn.css(Aa,"display"),Aa.parentNode.removeChild(Aa),"none"===Ma&&(Ma="block"),Tr[Pa]=Ma,Ma)}function en(wa,Aa){for(var Ma=[],Ra=0,Da=wa.length,Ca,Pa;Ra<Da;Ra++)(Pa=wa[Ra]).style&&(Ca=Pa.style.display,Aa?("none"===Ca&&(Ma[Ra]=hr.get(Pa,"display")||null,Ma[Ra]||(Pa.style.display="")),""===Pa.style.display&&xr(Pa)&&(Ma[Ra]=$t(Pa))):"none"!==Ca&&(Ma[Ra]="none",hr.set(Pa,"display",Ca)));for(Ra=0;Ra<Da;Ra++)null!=Ma[Ra]&&(wa[Ra].style.display=Ma[Ra]);return wa}function tn(wa,Aa){var Ca;return Ca=void 0===wa.getElementsByTagName?void 0===wa.querySelectorAll?[]:wa.querySelectorAll(Aa||"*"):wa.getElementsByTagName(Aa||"*"),void 0===Aa||Aa&&Yt(wa,Aa)?Vn.merge([wa],Ca):Ca}function nn(wa,Aa){for(var Ca=0,Pa=wa.length;Ca<Pa;Ca++)hr.set(wa[Ca],"globalEval",!Aa||hr.get(Aa[Ca],"globalEval"))}function rn(wa,Aa,Ca,Pa,Ma){for(var Na=Aa.createDocumentFragment(),Fa=[],Ba=0,Ua=wa.length,Ra,Da,Ia,Oa,La,ka;Ba<Ua;Ba++)if((Ra=wa[Ba])||0===Ra)if("object"===Vn.type(Ra))Vn.merge(Fa,Ra.nodeType?[Ra]:Ra);else if(Cr.test(Ra)){for(Da=Da||Na.appendChild(Aa.createElement("div")),Ia=(Er.exec(Ra)||["",""])[1].toLowerCase(),Oa=Ar[Ia]||Ar._default,Da.innerHTML=Oa[1]+Vn.htmlPrefilter(Ra)+Oa[2],ka=Oa[0];ka--;)Da=Da.lastChild;Vn.merge(Fa,Da.childNodes),(Da=Na.firstChild).textContent=""}else Fa.push(Aa.createTextNode(Ra));for(Na.textContent="",Ba=0;Ra=Fa[Ba++];)if(Pa&&-1<Vn.inArray(Ra,Pa))Ma&&Ma.push(Ra);else if(La=Vn.contains(Ra.ownerDocument,Ra),Da=tn(Na.appendChild(Ra),"script"),La&&nn(Da),Ca)for(ka=0;Ra=Da[ka++];)wr.test(Ra.type||"")&&Ca.push(Ra);return Na}function an(){return!0}function on(){return!1}function sn(){try{return kn.activeElement}catch(wa){}}function dn(wa,Aa,Ca,Pa,Ma,Ra){var Da,Ia;if("object"==typeof Aa){for(Ia in"string"!=typeof Ca&&(Pa=Pa||Ca,Ca=void 0),Aa)dn(wa,Ia,Ca,Pa,Aa[Ia],Ra);return wa}if(null==Pa&&null==Ma?(Ma=Ca,Pa=Ca=void 0):null==Ma&&("string"==typeof Ca?(Ma=Pa,Pa=void 0):(Ma=Pa,Pa=Ca,Ca=void 0)),!1===Ma)Ma=on;else if(!Ma)return wa;return 1===Ra&&(Da=Ma,(Ma=function(Oa){return Vn().off(Oa),Da.apply(this,arguments)}).guid=Da.guid||(Da.guid=Vn.guid++)),wa.each(function(){Vn.event.add(this,Aa,Ma,Pa,Ca)})}function ln(wa,Aa){return Yt(wa,"table")&&Yt(11===Aa.nodeType?Aa.firstChild:Aa,"tr")?Vn(">tbody",wa)[0]||wa:wa}function un(wa){return wa.type=(null!==wa.getAttribute("type"))+"/"+wa.type,wa}function pn(wa){var Aa=kr.exec(wa.type);return Aa?wa.type=Aa[1]:wa.removeAttribute("type"),wa}function cn(wa,Aa){var Ca,Pa,Ma,Ra,Da,Ia,Oa,La;if(1===Aa.nodeType){if(hr.hasData(wa)&&(Ra=hr.access(wa),Da=hr.set(Aa,Ra),La=Ra.events))for(Ma in delete Da.handle,Da.events={},La)for(Ca=0,Pa=La[Ma].length;Ca<Pa;Ca++)Vn.event.add(Aa,Ma,La[Ma][Ca]);fr.hasData(wa)&&(Ia=fr.access(wa),Oa=Vn.extend({},Ia),fr.set(Aa,Oa))}}function hn(wa,Aa){var Ca=Aa.nodeName.toLowerCase();"input"===Ca&&Sr.test(wa.type)?Aa.checked=wa.checked:"input"!==Ca&&"textarea"!==Ca||(Aa.defaultValue=wa.defaultValue)}function fn(wa,Aa,Ca,Pa){Aa=Bn.apply([],Aa);var ka=0,Na=wa.length,Ba=Aa[0],Ua=Vn.isFunction(Ba),Ma,Ra,Da,Ia,Oa,La;if(Ua||1<Na&&"string"==typeof Ba&&!zn.checkClone&&Lr.test(Ba))return wa.each(function(Ga){var Xa=wa.eq(Ga);Ua&&(Aa[0]=Ba.call(this,Ga,Xa.html())),fn(Xa,Aa,Ca,Pa)});if(Na&&(Ma=rn(Aa,wa[0].ownerDocument,!1,wa,Pa),Ra=Ma.firstChild,1===Ma.childNodes.length&&(Ma=Ra),Ra||Pa)){for(Ia=(Da=Vn.map(tn(Ma,"script"),un)).length;ka<Na;ka++)Oa=Ma,ka!=Na-1&&(Oa=Vn.clone(Oa,!0,!0),Ia&&Vn.merge(Da,tn(Oa,"script"))),Ca.call(wa[ka],Oa,ka);if(Ia)for(La=Da[Da.length-1].ownerDocument,Vn.map(Da,pn),ka=0;ka<Ia;ka++)Oa=Da[ka],wr.test(Oa.type||"")&&!hr.access(Oa,"globalEval")&&Vn.contains(La,Oa)&&(Oa.src?Vn._evalUrl&&Vn._evalUrl(Oa.src):Xt(Oa.textContent.replace(Nr,""),La))}return wa}function gn(wa,Aa,Ca){for(var Ma=Aa?Vn.filter(Aa,wa):wa,Ra=0,Pa;null!=(Pa=Ma[Ra]);Ra++)Ca||1!==Pa.nodeType||Vn.cleanData(tn(Pa)),Pa.parentNode&&(Ca&&Vn.contains(Pa.ownerDocument,Pa)&&nn(tn(Pa,"script")),Pa.parentNode.removeChild(Pa));return wa}function mn(wa,Aa,Ca){var Ia=wa.style,Pa,Ma,Ra,Da;return(Ca=Ca||Ur(wa))&&(""!==(Da=Ca.getPropertyValue(Aa)||Ca[Aa])||Vn.contains(wa.ownerDocument,wa)||(Da=Vn.style(wa,Aa)),!zn.pixelMarginRight()&&Br.test(Da)&&Fr.test(Aa)&&(Pa=Ia.width,Ma=Ia.minWidth,Ra=Ia.maxWidth,Ia.minWidth=Ia.maxWidth=Ia.width=Da,Da=Ca.width,Ia.width=Pa,Ia.minWidth=Ma,Ia.maxWidth=Ra)),void 0===Da?Da:Da+""}function yn(wa,Aa){return{get:function(){return wa()?void delete this.get:(this.get=Aa).apply(this,arguments)}}}function _n(wa){var Aa=Vn.cssProps[wa];return Aa||(Aa=Vn.cssProps[wa]=function(Ca){if(Ca in jr)return Ca;for(var Pa=Ca[0].toUpperCase()+Ca.slice(1),Ma=Wr.length;Ma--;)if((Ca=Wr[Ma]+Pa)in jr)return Ca}(wa)||wa),Aa}function bn(wa,Aa,Ca){var Pa=_r.exec(Aa);return Pa?Math.max(0,Pa[2]-(Ca||0))+(Pa[3]||"px"):Aa}function xn(wa,Aa,Ca,Pa,Ma){var Da=0,Ra;for(Ra=Ca===(Pa?"border":"content")?4:"width"===Aa?1:0;4>Ra;Ra+=2)"margin"===Ca&&(Da+=Vn.css(wa,Ca+br[Ra],!0,Ma)),Pa?("content"===Ca&&(Da-=Vn.css(wa,"padding"+br[Ra],!0,Ma)),"margin"!==Ca&&(Da-=Vn.css(wa,"border"+br[Ra]+"Width",!0,Ma))):(Da+=Vn.css(wa,"padding"+br[Ra],!0,Ma),"padding"!==Ca&&(Da+=Vn.css(wa,"border"+br[Ra]+"Width",!0,Ma)));return Da}function vn(wa,Aa,Ca){var Ma=Ur(wa),Ra=mn(wa,Aa,Ma),Da="border-box"===Vn.css(wa,"boxSizing",!1,Ma),Pa;return Br.test(Ra)?Ra:(Pa=Da&&(zn.boxSizingReliable()||Ra===wa.style[Aa]),"auto"===Ra&&(Ra=wa["offset"+Aa[0].toUpperCase()+Aa.slice(1)]),(Ra=parseFloat(Ra)||0)+xn(wa,Aa,Ca||(Da?"border":"content"),Pa,Ma)+"px")}function Tn(wa,Aa,Ca,Pa,Ma){return new Tn.prototype.init(wa,Aa,Ca,Pa,Ma)}function Sn(){Vr&&(!1===kn.hidden&&Bt.requestAnimationFrame?Bt.requestAnimationFrame(Sn):Bt.setTimeout(Sn,Vn.fx.interval),Vn.fx.tick())}function En(){return Bt.setTimeout(function(){zr=void 0}),zr=Vn.now()}function wn(wa,Aa){var Pa=0,Ma={height:wa},Ca;for(Aa=Aa?1:0;4>Pa;Pa+=2-Aa)Ma["margin"+(Ca=br[Pa])]=Ma["padding"+Ca]=wa;return Aa&&(Ma.opacity=Ma.width=wa),Ma}function An(wa,Aa,Ca){for(var Ma=(Cn.tweeners[Aa]||[]).concat(Cn.tweeners["*"]),Ra=0,Da=Ma.length,Pa;Ra<Da;Ra++)if(Pa=Ma[Ra].call(Ca,Aa,wa))return Pa}function Cn(wa,Aa,Ca){var Ra=0,Da=Cn.prefilters.length,Ia=Vn.Deferred().always(function(){delete Oa.elem}),Oa=function(){if(Ma)return!1;for(var Na=zr||En(),Fa=Math.max(0,La.startTime+La.duration-Na),Ba=1-(Fa/La.duration||0),Ua=0,Ga=La.tweens.length;Ua<Ga;Ua++)La.tweens[Ua].run(Ba);return Ia.notifyWith(wa,[La,Ba,Fa]),1>Ba&&Ga?Fa:(Ga||Ia.notifyWith(wa,[La,1,0]),Ia.resolveWith(wa,[La]),!1)},La=Ia.promise({elem:wa,props:Vn.extend({},Aa),opts:Vn.extend(!0,{specialEasing:{},easing:Vn.easing._default},Ca),originalProperties:Aa,originalOptions:Ca,startTime:zr||En(),duration:Ca.duration,tweens:[],createTween:function(Na,Fa){var Ba=Vn.Tween(wa,La.opts,Na,Fa,La.opts.specialEasing[Na]||La.opts.easing);return La.tweens.push(Ba),Ba},stop:function(Na){var Fa=0,Ba=Na?La.tweens.length:0;if(Ma)return this;for(Ma=!0;Fa<Ba;Fa++)La.tweens[Fa].run(1);return Na?(Ia.notifyWith(wa,[La,1,0]),Ia.resolveWith(wa,[La,Na])):Ia.rejectWith(wa,[La,Na]),this}}),ka=La.props,Pa,Ma;for(!function(Na,Fa){var Ba,Ua,Ga,Xa,Ha;for(Ba in Na)if(Ua=Vn.camelCase(Ba),Ga=Fa[Ua],Xa=Na[Ba],Array.isArray(Xa)&&(Ga=Xa[1],Xa=Na[Ba]=Xa[0]),Ba!==Ua&&(Na[Ua]=Xa,delete Na[Ba]),(Ha=Vn.cssHooks[Ua])&&("expand"in Ha))for(Ba in Xa=Ha.expand(Xa),delete Na[Ua],Xa)(Ba in Na)||(Na[Ba]=Xa[Ba],Fa[Ba]=Ga);else Fa[Ua]=Ga}(ka,La.opts.specialEasing);Ra<Da;Ra++)if(Pa=Cn.prefilters[Ra].call(La,wa,ka,La.opts))return Vn.isFunction(Pa.stop)&&(Vn._queueHooks(La.elem,La.opts.queue).stop=Vn.proxy(Pa.stop,Pa)),Pa;return Vn.map(ka,An,La),Vn.isFunction(La.opts.start)&&La.opts.start.call(wa,La),La.progress(La.opts.progress).done(La.opts.done,La.opts.complete).fail(La.opts.fail).always(La.opts.always),Vn.fx.timer(Vn.extend(Oa,{elem:wa,anim:La,queue:La.opts.queue})),La}function Pn(wa){return(wa.match(dr)||[]).join(" ")}function Mn(wa){return wa.getAttribute&&wa.getAttribute("class")||""}function Rn(wa,Aa,Ca,Pa){if(Array.isArray(Aa))Vn.each(Aa,function(Ra,Da){Ca||ia.test(wa)?Pa(wa,Da):Rn(wa+"["+("object"==typeof Da&&null!=Da?Ra:"")+"]",Da,Ca,Pa)});else if(Ca||"object"!==Vn.type(Aa))Pa(wa,Aa);else for(var Ma in Aa)Rn(wa+"["+Ma+"]",Aa[Ma],Ca,Pa)}function Dn(wa){return function(Aa,Ca){"string"!=typeof Aa&&(Ca=Aa,Aa="*");var Ma=0,Ra=Aa.toLowerCase().match(dr)||[],Pa;if(Vn.isFunction(Ca))for(;Pa=Ra[Ma++];)"+"===Pa[0]?(Pa=Pa.slice(1)||"*",(wa[Pa]=wa[Pa]||[]).unshift(Ca)):(wa[Pa]=wa[Pa]||[]).push(Ca)}}function In(wa,Aa,Ca,Pa){function Ma(Ia){var Oa;return Ra[Ia]=!0,Vn.each(wa[Ia]||[],function(La,ka){var Na=ka(Aa,Ca,Pa);return"string"!=typeof Na||Da||Ra[Na]?Da?!(Oa=Na):void 0:(Aa.dataTypes.unshift(Na),Ma(Na),!1)}),Oa}var Ra={},Da=wa===ma;return Ma(Aa.dataTypes[0])||!Ra["*"]&&Ma("*")}function On(wa,Aa){var Ma=Vn.ajaxSettings.flatOptions||{},Ca,Pa;for(Ca in Aa)void 0!==Aa[Ca]&&((Ma[Ca]?wa:Pa||(Pa={}))[Ca]=Aa[Ca]);return Pa&&Vn.extend(!0,wa,Pa),wa}var Ln=[],kn=Bt.document,Nn=Object.getPrototypeOf,Fn=Ln.slice,Bn=Ln.concat,Un=Ln.push,Gn=Ln.indexOf,Xn={},Hn=Xn.toString,Yn=Xn.hasOwnProperty,Wn=Yn.toString,jn=Wn.call(Object),zn={},Vn=function(wa,Aa){return new Vn.fn.init(wa,Aa)},qn=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,Kn=/^-ms-/,Qn=/-([a-z])/g,Zn=function(wa,Aa){return Aa.toUpperCase()};Vn.fn=Vn.prototype={jquery:"3.2.1",constructor:Vn,length:0,toArray:function(){return Fn.call(this)},get:function(wa){return null==wa?Fn.call(this):0>wa?this[wa+this.length]:this[wa]},pushStack:function(wa){var Aa=Vn.merge(this.constructor(),wa);return Aa.prevObject=this,Aa},each:function(wa){return Vn.each(this,wa)},map:function(wa){return this.pushStack(Vn.map(this,function(Aa,Ca){return wa.call(Aa,Ca,Aa)}))},slice:function(){return this.pushStack(Fn.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(wa){var Aa=this.length,Ca=+wa+(0>wa?Aa:0);return this.pushStack(0<=Ca&&Ca<Aa?[this[Ca]]:[])},end:function(){return this.prevObject||this.constructor()},push:Un,sort:Ln.sort,splice:Ln.splice},Vn.extend=Vn.fn.extend=function(){var Da=arguments[0]||{},Ia=1,Oa=arguments.length,La=!1,wa,Aa,Ca,Pa,Ma,Ra;for("boolean"==typeof Da&&(La=Da,Da=arguments[Ia]||{},Ia++),"object"==typeof Da||Vn.isFunction(Da)||(Da={}),Ia===Oa&&(Da=this,Ia--);Ia<Oa;Ia++)if(null!=(wa=arguments[Ia]))for(Aa in wa)Ca=Da[Aa],Da!==(Pa=wa[Aa])&&(La&&Pa&&(Vn.isPlainObject(Pa)||(Ma=Array.isArray(Pa)))?(Ma?(Ma=!1,Ra=Ca&&Array.isArray(Ca)?Ca:[]):Ra=Ca&&Vn.isPlainObject(Ca)?Ca:{},Da[Aa]=Vn.extend(La,Ra,Pa)):void 0!=Pa&&(Da[Aa]=Pa));return Da},Vn.extend({expando:"jQuery"+("3.2.1"+Math.random()).replace(/\D/g,""),isReady:!0,error:function(wa){throw new Error(wa)},noop:function(){},isFunction:function(wa){return"function"===Vn.type(wa)},isWindow:function(wa){return null!=wa&&wa===wa.window},isNumeric:function(wa){var Aa=Vn.type(wa);return("number"===Aa||"string"===Aa)&&!isNaN(wa-parseFloat(wa))},isPlainObject:function(wa){var Aa,Ca;return wa&&"[object Object]"===Hn.call(wa)&&(!(Aa=Nn(wa))||"function"==typeof(Ca=Yn.call(Aa,"constructor")&&Aa.constructor)&&Wn.call(Ca)===jn)},isEmptyObject:function(wa){for(var Aa in wa)return!1;return!0},type:function(wa){return null==wa?wa+"":"object"==typeof wa||"function"==typeof wa?Xn[Hn.call(wa)]||"object":typeof wa},globalEval:function(wa){Xt(wa)},camelCase:function(wa){return wa.replace(Kn,"ms-").replace(Qn,Zn)},each:function(wa,Aa){var Pa=0,Ca;if(Ht(wa))for(Ca=wa.length;Pa<Ca&&!1!==Aa.call(wa[Pa],Pa,wa[Pa]);Pa++);else for(Pa in wa)if(!1===Aa.call(wa[Pa],Pa,wa[Pa]))break;return wa},trim:function(wa){return null==wa?"":(wa+"").replace(qn,"")},makeArray:function(wa,Aa){var Ca=Aa||[];return null!=wa&&(Ht(Object(wa))?Vn.merge(Ca,"string"==typeof wa?[wa]:wa):Un.call(Ca,wa)),Ca},inArray:function(wa,Aa,Ca){return null==Aa?-1:Gn.call(Aa,wa,Ca)},merge:function(wa,Aa){for(var Ca=+Aa.length,Pa=0,Ma=wa.length;Pa<Ca;Pa++)wa[Ma++]=Aa[Pa];return wa.length=Ma,wa},grep:function(wa,Aa,Ca){for(var Pa=[],Ma=0,Ra=wa.length;Ma<Ra;Ma++)!Aa(wa[Ma],Ma)!==!Ca&&Pa.push(wa[Ma]);return Pa},map:function(wa,Aa,Ca){var Ra=0,Da=[],Pa,Ma;if(Ht(wa))for(Pa=wa.length;Ra<Pa;Ra++)null!=(Ma=Aa(wa[Ra],Ra,Ca))&&Da.push(Ma);else for(Ra in wa)null!=(Ma=Aa(wa[Ra],Ra,Ca))&&Da.push(Ma);return Bn.apply([],Da)},guid:1,proxy:function(wa,Aa){var Ca,Pa,Ma;if("string"==typeof Aa&&(Ca=wa[Aa],Aa=wa,wa=Ca),Vn.isFunction(wa))return Pa=Fn.call(arguments,2),Ma=function(){return wa.apply(Aa||this,Pa.concat(Fn.call(arguments)))},Ma.guid=wa.guid=wa.guid||Vn.guid++,Ma},now:Date.now,support:zn}),"function"==typeof Symbol&&(Vn.fn[Symbol.iterator]=Ln[Symbol.iterator]),Vn.each("Boolean Number String Function Array Date RegExp Object Error Symbol".split(" "),function(wa,Aa){Xn["[object "+Aa+"]"]=Aa.toLowerCase()});var Jn=function(wa){function Aa(qi,Ki,Qi,Zi){var io=Ki&&Ki.ownerDocument,oo=Ki?Ki.nodeType:9,Ji,$i,eo,to,no,ro,ao;if(Qi=Qi||[],"string"!=typeof qi||!qi||1!==oo&&9!==oo&&11!==oo)return Qi;if(!Zi&&((Ki?Ki.ownerDocument||Ki:ui)!==ni&&ti(Ki),Ki=Ki||ni,ai)){if(11!==oo&&(no=Gi.exec(qi)))if(!(Ji=no[1])){if(no[2])return vi.apply(Qi,Ki.getElementsByTagName(qi)),Qi;if((Ji=no[3])&&ja.getElementsByClassName&&Ki.getElementsByClassName)return vi.apply(Qi,Ki.getElementsByClassName(Ji)),Qi}else if(9===oo){if(!(eo=Ki.getElementById(Ji)))return Qi;if(eo.id===Ji)return Qi.push(eo),Qi}else if(io&&(eo=io.getElementById(Ji))&&di(Ki,eo)&&eo.id===Ji)return Qi.push(eo),Qi;if(ja.qsa&&!gi[qi+" "]&&(!ii||!ii.test(qi))){if(1!==oo)io=Ki,ao=qi;else if("object"!==Ki.nodeName.toLowerCase()){for((to=Ki.getAttribute("id"))?to=to.replace(Wi,ji):Ki.setAttribute("id",to=li),$i=(ro=Ka(qi)).length;$i--;)ro[$i]="#"+to+" "+Ba(ro[$i]);ao=ro.join(","),io=Xi.test(qi)&&Na(Ki.parentNode)||Ki}if(ao)try{return vi.apply(Qi,io.querySelectorAll(ao)),Qi}catch(so){}finally{to===li&&Ki.removeAttribute("id")}}}return Za(qi.replace(Ri,"$1"),Ki,Qi,Zi)}function Ca(){function qi(Qi,Zi){return Ki.push(Qi+" ")>za.cacheLength&&delete qi[Ki.shift()],qi[Qi+" "]=Zi}var Ki=[];return qi}function Pa(qi){return qi[li]=!0,qi}function Ma(qi){var Ki=ni.createElement("fieldset");try{return!!qi(Ki)}catch(Qi){return!1}finally{Ki.parentNode&&Ki.parentNode.removeChild(Ki),Ki=null}}function Ra(qi,Ki){for(var Qi=qi.split("|"),Zi=Qi.length;Zi--;)za.attrHandle[Qi[Zi]]=Ki}function Da(qi,Ki){var Qi=Ki&&qi,Zi=Qi&&1===qi.nodeType&&1===Ki.nodeType&&qi.sourceIndex-Ki.sourceIndex;if(Zi)return Zi;if(Qi)for(;Qi=Qi.nextSibling;)if(Qi===Ki)return-1;return qi?1:-1}function Ia(qi){return function(Ki){return"input"===Ki.nodeName.toLowerCase()&&Ki.type===qi}}function Oa(qi){return function(Ki){var Qi=Ki.nodeName.toLowerCase();return("input"===Qi||"button"===Qi)&&Ki.type===qi}}function La(qi){return function(Ki){return"form"in Ki?Ki.parentNode&&!1===Ki.disabled?"label"in Ki?"label"in Ki.parentNode?Ki.parentNode.disabled===qi:Ki.disabled===qi:Ki.isDisabled===qi||Ki.isDisabled!==!qi&&Vi(Ki)===qi:Ki.disabled===qi:"label"in Ki&&Ki.disabled===qi}}function ka(qi){return Pa(function(Ki){return Ki=+Ki,Pa(function(Qi,Zi){for(var $i=qi([],Qi.length,Ki),eo=$i.length,Ji;eo--;)Qi[Ji=$i[eo]]&&(Qi[Ji]=!(Zi[Ji]=Qi[Ji]))})})}function Na(qi){return qi&&void 0!==qi.getElementsByTagName&&qi}function Fa(){}function Ba(qi){for(var Ki=0,Qi=qi.length,Zi="";Ki<Qi;Ki++)Zi+=qi[Ki].value;return Zi}function Ua(qi,Ki,Qi){var Zi=Ki.dir,Ji=Ki.next,$i=Ji||Zi,eo=Qi&&"parentNode"===$i,to=ci++;return Ki.first?function(no,ro,ao){for(;no=no[Zi];)if(1===no.nodeType||eo)return qi(no,ro,ao);return!1}:function(no,ro,ao){var lo=[pi,to],io,oo,so;if(ao){for(;no=no[Zi];)if((1===no.nodeType||eo)&&qi(no,ro,ao))return!0;}else for(;no=no[Zi];)if(1===no.nodeType||eo)if(so=no[li]||(no[li]={}),oo=so[no.uniqueID]||(so[no.uniqueID]={}),Ji&&Ji===no.nodeName.toLowerCase())no=no[Zi]||no;else{if((io=oo[$i])&&io[0]===pi&&io[1]===to)return lo[2]=io[2];if(oo[$i]=lo,lo[2]=qi(no,ro,ao))return!0}return!1}}function Ga(qi){return 1<qi.length?function(Ki,Qi,Zi){for(var Ji=qi.length;Ji--;)if(!qi[Ji](Ki,Qi,Zi))return!1;return!0}:qi[0]}function Xa(qi,Ki,Qi,Zi,Ji){for(var eo=[],to=0,no=qi.length,$i;to<no;to++)($i=qi[to])&&(Qi&&!Qi($i,Zi,Ji)||(eo.push($i),null!=Ki&&Ki.push(to)));return eo}function Ha(qi,Ki,Qi,Zi,Ji,$i){return Zi&&!Zi[li]&&(Zi=Ha(Zi)),Ji&&!Ji[li]&&(Ji=Ha(Ji,$i)),Pa(function(eo,to,no,ro){var so=[],lo=[],uo=to.length,po=eo||function(fo,go,mo){for(var yo=0,_o=go.length;yo<_o;yo++)Aa(fo,go[yo],mo);return mo}(Ki||"*",no.nodeType?[no]:no,[]),co=qi&&(eo||!Ki)?Xa(po,so,qi,no,ro):po,ho=Qi?Ji||(eo?qi:uo||Zi)?[]:to:co,ao,io,oo;if(Qi&&Qi(co,ho,no,ro),Zi)for(ao=Xa(ho,lo),Zi(ao,[],no,ro),io=ao.length;io--;)(oo=ao[io])&&(ho[lo[io]]=!(co[lo[io]]=oo));if(!eo)ho=Xa(ho===to?ho.splice(uo,ho.length):ho),Ji?Ji(null,to,ho,ro):vi.apply(to,ho);else if(Ji||qi){if(Ji){for(ao=[],io=ho.length;io--;)(oo=ho[io])&&ao.push(co[io]=oo);Ji(null,ho=[],ao,ro)}for(io=ho.length;io--;)(oo=ho[io])&&-1<(ao=Ji?Si(eo,oo):so[io])&&(eo[ao]=!(to[ao]=oo))}})}function Ya(qi){for(var Ji=qi.length,$i=za.relative[qi[0].type],eo=$i||za.relative[" "],to=$i?1:0,no=Ua(function(io){return io===Ki},eo,!0),ro=Ua(function(io){return-1<Si(Ki,io)},eo,!0),ao=[function(io,oo,so){var lo=!$i&&(so||oo!==Ja)||((Ki=oo).nodeType?no(io,oo,so):ro(io,oo,so));return Ki=null,lo}],Ki,Qi,Zi;to<Ji;to++)if(Qi=za.relative[qi[to].type])ao=[Ua(Ga(ao),Qi)];else{if((Qi=za.filter[qi[to].type].apply(null,qi[to].matches))[li]){for(Zi=++to;Zi<Ji&&!za.relative[qi[Zi].type];Zi++);return Ha(1<to&&Ga(ao),1<to&&Ba(qi.slice(0,to-1).concat({value:" "===qi[to-2].type?"*":""})).replace(Ri,"$1"),Qi,to<Zi&&Ya(qi.slice(to,Zi)),Zi<Ji&&Ya(qi=qi.slice(Zi)),Zi<Ji&&Ba(qi))}ao.push(Qi)}return Ga(ao)}var li="sizzle"+1*new Date,ui=wa.document,pi=0,ci=0,hi=Ca(),fi=Ca(),gi=Ca(),mi=function(qi,Ki){return qi===Ki&&(ei=!0),0},yi={}.hasOwnProperty,_i=[],bi=_i.pop,xi=_i.push,vi=_i.push,Ti=_i.slice,Si=function(qi,Ki){for(var Qi=0,Zi=qi.length;Qi<Zi;Qi++)if(qi[Qi]===Ki)return Qi;return-1},Ei="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",wi="[\\x20\\t\\r\\n\\f]",Ai="(?:\\\\.|[\\w-]|[^\0-\\xa0])+",Mi=/[\x20\t\r\n\f]+/g,Ri=/^[\x20\t\r\n\f]+|((?:^|[^\\])(?:\\.)*)[\x20\t\r\n\f]+$/g,Di=/^[\x20\t\r\n\f]*,[\x20\t\r\n\f]*/,Ii=/^[\x20\t\r\n\f]*([>+~]|[\x20\t\r\n\f])[\x20\t\r\n\f]*/,Oi=/=[\x20\t\r\n\f]*([^\]'"]*?)[\x20\t\r\n\f]*\]/g,Li=/:((?:\\.|[\w-]|[^-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,ki=/^(?:\\.|[\w-]|[^-\xa0])+$/,Ni={ID:/^#((?:\\.|[\w-]|[^-\xa0])+)/,CLASS:/^\.((?:\\.|[\w-]|[^-\xa0])+)/,TAG:/^((?:\\.|[\w-]|[^-\xa0])+|[*])/,ATTR:/^\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^-\xa0])+))|)[\x20\t\r\n\f]*\]/,PSEUDO:/^:((?:\\.|[\w-]|[^-\xa0])+)(?:\((('((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)")|((?:\\.|[^\\()[\]]|\[[\x20\t\r\n\f]*((?:\\.|[\w-]|[^-\xa0])+)(?:[\x20\t\r\n\f]*([*^$|!~]?=)[\x20\t\r\n\f]*(?:'((?:\\.|[^\\'])*)'|"((?:\\.|[^\\"])*)"|((?:\\.|[\w-]|[^-\xa0])+))|)[\x20\t\r\n\f]*\])*)|.*)\)|)/,CHILD:/^:(only|first|last|nth|nth-last)-(child|of-type)(?:\([\x20\t\r\n\f]*(even|odd|(([+-]|)(\d*)n|)[\x20\t\r\n\f]*(?:([+-]|)[\x20\t\r\n\f]*(\d+)|))[\x20\t\r\n\f]*\)|)/i,bool:/^(?:checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped)$/i,needsContext:/^[\x20\t\r\n\f]*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\([\x20\t\r\n\f]*((?:-\d)?\d*)[\x20\t\r\n\f]*\)|)(?=[^-]|$)/i},Fi=/^(?:input|select|textarea|button)$/i,Bi=/^h\d$/i,Ui=/^[^{]+\{\s*\[native \w/,Gi=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,Xi=/[+~]/,Hi=/\\([\da-f]{1,6}[\x20\t\r\n\f]?|([\x20\t\r\n\f])|.)/ig,Yi=function(qi,Ki,Qi){var Zi="0x"+Ki-65536;return Zi!=Zi||Qi?Ki:0>Zi?String.fromCharCode(Zi+65536):String.fromCharCode(55296|Zi>>10,56320|1023&Zi)},Wi=/([\0-\x1f\x7f]|^-?\d)|^-$|[^\0-\x1f\x7f-\uFFFF\w-]/g,ji=function(qi,Ki){return Ki?"\0"===qi?"\uFFFD":qi.slice(0,-1)+"\\"+qi.charCodeAt(qi.length-1).toString(16)+" ":"\\"+qi},zi=function(){ti()},Vi=Ua(function(qi){return!0===qi.disabled&&("form"in qi||"label"in qi)},{dir:"parentNode",next:"legend"}),Wa,ja,za,Va,qa,Ka,Qa,Za,Ja,$a,ei,ti,ni,ri,ai,ii,oi,si,di;try{vi.apply(_i=Ti.call(ui.childNodes),ui.childNodes),_i[ui.childNodes.length].nodeType}catch(qi){vi={apply:_i.length?function(Ki,Qi){xi.apply(Ki,Ti.call(Qi))}:function(Ki,Qi){for(var Zi=Ki.length,Ji=0;Ki[Zi++]=Qi[Ji++];);Ki.length=Zi-1}}}for(Wa in ja=Aa.support={},qa=Aa.isXML=function(qi){var Ki=qi&&(qi.ownerDocument||qi).documentElement;return!!Ki&&"HTML"!==Ki.nodeName},ti=Aa.setDocument=function(qi){var Zi=qi?qi.ownerDocument||qi:ui,Ki,Qi;return Zi!==ni&&9===Zi.nodeType&&Zi.documentElement?(ni=Zi,ri=ni.documentElement,ai=!qa(ni),ui!==ni&&(Qi=ni.defaultView)&&Qi.top!==Qi&&(Qi.addEventListener?Qi.addEventListener("unload",zi,!1):Qi.attachEvent&&Qi.attachEvent("onunload",zi)),ja.attributes=Ma(function(Ji){return Ji.className="i",!Ji.getAttribute("className")}),ja.getElementsByTagName=Ma(function(Ji){return Ji.appendChild(ni.createComment("")),!Ji.getElementsByTagName("*").length}),ja.getElementsByClassName=Ui.test(ni.getElementsByClassName),ja.getById=Ma(function(Ji){return ri.appendChild(Ji).id=li,!ni.getElementsByName||!ni.getElementsByName(li).length}),ja.getById?(za.filter.ID=function(Ji){var $i=Ji.replace(Hi,Yi);return function(eo){return eo.getAttribute("id")===$i}},za.find.ID=function(Ji,$i){if(void 0!==$i.getElementById&&ai){var eo=$i.getElementById(Ji);return eo?[eo]:[]}}):(za.filter.ID=function(Ji){var $i=Ji.replace(Hi,Yi);return function(eo){var to=void 0!==eo.getAttributeNode&&eo.getAttributeNode("id");return to&&to.value===$i}},za.find.ID=function(Ji,$i){if(void 0!==$i.getElementById&&ai){var ro=$i.getElementById(Ji),eo,to,no;if(ro){if((eo=ro.getAttributeNode("id"))&&eo.value===Ji)return[ro];for(no=$i.getElementsByName(Ji),to=0;ro=no[to++];)if((eo=ro.getAttributeNode("id"))&&eo.value===Ji)return[ro]}return[]}}),za.find.TAG=ja.getElementsByTagName?function(Ji,$i){return void 0===$i.getElementsByTagName?ja.qsa?$i.querySelectorAll(Ji):void 0:$i.getElementsByTagName(Ji)}:function(Ji,$i){var to=[],no=0,ro=$i.getElementsByTagName(Ji),eo;if("*"===Ji){for(;eo=ro[no++];)1===eo.nodeType&&to.push(eo);return to}return ro},za.find.CLASS=ja.getElementsByClassName&&function(Ji,$i){if(void 0!==$i.getElementsByClassName&&ai)return $i.getElementsByClassName(Ji)},oi=[],ii=[],(ja.qsa=Ui.test(ni.querySelectorAll))&&(Ma(function(Ji){ri.appendChild(Ji).innerHTML="<a id='"+li+"'></a><select id='"+li+"-\r\\' msallowcapture=''><option selected=''></option></select>",Ji.querySelectorAll("[msallowcapture^='']").length&&ii.push("[*^$]="+wi+"*(?:''|\"\")"),Ji.querySelectorAll("[selected]").length||ii.push("\\["+wi+"*(?:value|"+Ei+")"),Ji.querySelectorAll("[id~="+li+"-]").length||ii.push("~="),Ji.querySelectorAll(":checked").length||ii.push(":checked"),Ji.querySelectorAll("a#"+li+"+*").length||ii.push(".#.+[+~]")}),Ma(function(Ji){Ji.innerHTML="<a href='' disabled='disabled'></a><select disabled='disabled'><option/></select>";var $i=ni.createElement("input");$i.setAttribute("type","hidden"),Ji.appendChild($i).setAttribute("name","D"),Ji.querySelectorAll("[name=d]").length&&ii.push("name"+wi+"*[*^$|!~]?="),2!==Ji.querySelectorAll(":enabled").length&&ii.push(":enabled",":disabled"),ri.appendChild(Ji).disabled=!0,2!==Ji.querySelectorAll(":disabled").length&&ii.push(":enabled",":disabled"),Ji.querySelectorAll("*,:x"),ii.push(",.*:")})),(ja.matchesSelector=Ui.test(si=ri.matches||ri.webkitMatchesSelector||ri.mozMatchesSelector||ri.oMatchesSelector||ri.msMatchesSelector))&&Ma(function(Ji){ja.disconnectedMatch=si.call(Ji,"*"),si.call(Ji,"[s!='']:x"),oi.push("!=",":("+Ai+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+("\\["+wi+"*("+Ai+")(?:"+wi+"*([*^$|!~]?=)"+wi+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+Ai+"))|)"+wi+"*\\]")+")*)|.*)\\)|)")}),ii=ii.length&&new RegExp(ii.join("|")),oi=oi.length&&new RegExp(oi.join("|")),Ki=Ui.test(ri.compareDocumentPosition),di=Ki||Ui.test(ri.contains)?function(Ji,$i){var eo=9===Ji.nodeType?Ji.documentElement:Ji,to=$i&&$i.parentNode;return Ji===to||to&&1===to.nodeType&&(eo.contains?eo.contains(to):Ji.compareDocumentPosition&&16&Ji.compareDocumentPosition(to))}:function(Ji,$i){if($i)for(;$i=$i.parentNode;)if($i===Ji)return!0;return!1},mi=Ki?function(Ji,$i){if(Ji===$i)return ei=!0,0;var eo=!Ji.compareDocumentPosition-!$i.compareDocumentPosition;return eo||(1&(eo=(Ji.ownerDocument||Ji)===($i.ownerDocument||$i)?Ji.compareDocumentPosition($i):1)||!ja.sortDetached&&$i.compareDocumentPosition(Ji)===eo?Ji===ni||Ji.ownerDocument===ui&&di(ui,Ji)?-1:$i===ni||$i.ownerDocument===ui&&di(ui,$i)?1:$a?Si($a,Ji)-Si($a,$i):0:4&eo?-1:1)}:function(Ji,$i){if(Ji===$i)return ei=!0,0;var to=0,no=Ji.parentNode,ro=$i.parentNode,ao=[Ji],io=[$i],eo;if(!no||!ro)return Ji===ni?-1:$i===ni?1:no?-1:ro?1:$a?Si($a,Ji)-Si($a,$i):0;if(no===ro)return Da(Ji,$i);for(eo=Ji;eo=eo.parentNode;)ao.unshift(eo);for(eo=$i;eo=eo.parentNode;)io.unshift(eo);for(;ao[to]===io[to];)to++;return to?Da(ao[to],io[to]):ao[to]===ui?-1:io[to]===ui?1:0},ni):ni},Aa.matches=function(qi,Ki){return Aa(qi,null,null,Ki)},Aa.matchesSelector=function(qi,Ki){if((qi.ownerDocument||qi)!==ni&&ti(qi),Ki=Ki.replace(Oi,"='$1']"),ja.matchesSelector&&ai&&!gi[Ki+" "]&&(!oi||!oi.test(Ki))&&(!ii||!ii.test(Ki)))try{var Qi=si.call(qi,Ki);if(Qi||ja.disconnectedMatch||qi.document&&11!==qi.document.nodeType)return Qi}catch(Zi){}return 0<Aa(Ki,ni,null,[qi]).length},Aa.contains=function(qi,Ki){return(qi.ownerDocument||qi)!==ni&&ti(qi),di(qi,Ki)},Aa.attr=function(qi,Ki){(qi.ownerDocument||qi)!==ni&&ti(qi);var Qi=za.attrHandle[Ki.toLowerCase()],Zi=Qi&&yi.call(za.attrHandle,Ki.toLowerCase())?Qi(qi,Ki,!ai):void 0;return void 0===Zi?ja.attributes||!ai?qi.getAttribute(Ki):(Zi=qi.getAttributeNode(Ki))&&Zi.specified?Zi.value:null:Zi},Aa.escape=function(qi){return(qi+"").replace(Wi,ji)},Aa.error=function(qi){throw new Error("Syntax error, unrecognized expression: "+qi)},Aa.uniqueSort=function(qi){var Qi=[],Zi=0,Ji=0,Ki;if(ei=!ja.detectDuplicates,$a=!ja.sortStable&&qi.slice(0),qi.sort(mi),ei){for(;Ki=qi[Ji++];)Ki===qi[Ji]&&(Zi=Qi.push(Ji));for(;Zi--;)qi.splice(Qi[Zi],1)}return $a=null,qi},Va=Aa.getText=function(qi){var Qi="",Zi=0,Ji=qi.nodeType,Ki;if(!Ji)for(;Ki=qi[Zi++];)Qi+=Va(Ki);else if(1===Ji||9===Ji||11===Ji){if("string"==typeof qi.textContent)return qi.textContent;for(qi=qi.firstChild;qi;qi=qi.nextSibling)Qi+=Va(qi)}else if(3===Ji||4===Ji)return qi.nodeValue;return Qi},(za=Aa.selectors={cacheLength:50,createPseudo:Pa,match:Ni,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(qi){return qi[1]=qi[1].replace(Hi,Yi),qi[3]=(qi[3]||qi[4]||qi[5]||"").replace(Hi,Yi),"~="===qi[2]&&(qi[3]=" "+qi[3]+" "),qi.slice(0,4)},CHILD:function(qi){return qi[1]=qi[1].toLowerCase(),"nth"===qi[1].slice(0,3)?(qi[3]||Aa.error(qi[0]),qi[4]=+(qi[4]?qi[5]+(qi[6]||1):2*("even"===qi[3]||"odd"===qi[3])),qi[5]=+(qi[7]+qi[8]||"odd"===qi[3])):qi[3]&&Aa.error(qi[0]),qi},PSEUDO:function(qi){var Qi=!qi[6]&&qi[2],Ki;return Ni.CHILD.test(qi[0])?null:(qi[3]?qi[2]=qi[4]||qi[5]||"":Qi&&Li.test(Qi)&&(Ki=Ka(Qi,!0))&&(Ki=Qi.indexOf(")",Qi.length-Ki)-Qi.length)&&(qi[0]=qi[0].slice(0,Ki),qi[2]=Qi.slice(0,Ki)),qi.slice(0,3))}},filter:{TAG:function(qi){var Ki=qi.replace(Hi,Yi).toLowerCase();return"*"===qi?function(){return!0}:function(Qi){return Qi.nodeName&&Qi.nodeName.toLowerCase()===Ki}},CLASS:function(qi){var Ki=hi[qi+" "];return Ki||(Ki=new RegExp("(^|"+wi+")"+qi+"("+wi+"|$)"))&&hi(qi,function(Qi){return Ki.test("string"==typeof Qi.className&&Qi.className||void 0!==Qi.getAttribute&&Qi.getAttribute("class")||"")})},ATTR:function(qi,Ki,Qi){return function(Zi){var Ji=Aa.attr(Zi,qi);return null==Ji?"!="===Ki:!Ki||(Ji+="","="===Ki?Ji===Qi:"!="===Ki?Ji!==Qi:"^="===Ki?Qi&&0===Ji.indexOf(Qi):"*="===Ki?Qi&&-1<Ji.indexOf(Qi):"$="===Ki?Qi&&Ji.slice(-Qi.length)===Qi:"~="===Ki?-1<(" "+Ji.replace(Mi," ")+" ").indexOf(Qi):"|="==Ki&&(Ji===Qi||Ji.slice(0,Qi.length+1)===Qi+"-"))}},CHILD:function(qi,Ki,Qi,Zi,Ji){var $i="nth"!==qi.slice(0,3),eo="last"!==qi.slice(-4),to="of-type"===Ki;return 1===Zi&&0===Ji?function(no){return!!no.parentNode}:function(no,ro,ao){var co=$i==eo?"previousSibling":"nextSibling",ho=no.parentNode,fo=to&&no.nodeName.toLowerCase(),go=!ao&&!to,mo=!1,io,oo,so,lo,uo,po;if(ho){if($i){for(;co;){for(lo=no;lo=lo[co];)if(to?lo.nodeName.toLowerCase()===fo:1===lo.nodeType)return!1;po=co="only"===qi&&!po&&"nextSibling"}return!0}if(po=[eo?ho.firstChild:ho.lastChild],eo&&go){for(mo=(uo=(io=(oo=(so=(lo=ho)[li]||(lo[li]={}))[lo.uniqueID]||(so[lo.uniqueID]={}))[qi]||[])[0]===pi&&io[1])&&io[2],lo=uo&&ho.childNodes[uo];lo=++uo&&lo&&lo[co]||(mo=uo=0)||po.pop();)if(1===lo.nodeType&&++mo&&lo===no){oo[qi]=[pi,uo,mo];break}}else if(go&&(mo=uo=(io=(oo=(so=(lo=no)[li]||(lo[li]={}))[lo.uniqueID]||(so[lo.uniqueID]={}))[qi]||[])[0]===pi&&io[1]),!1===mo)for(;(lo=++uo&&lo&&lo[co]||(mo=uo=0)||po.pop())&&((to?lo.nodeName.toLowerCase()!==fo:1!==lo.nodeType)||!++mo||(go&&((oo=(so=lo[li]||(lo[li]={}))[lo.uniqueID]||(so[lo.uniqueID]={}))[qi]=[pi,mo]),lo!==no)););return(mo-=Ji)==Zi||0==mo%Zi&&0<=mo/Zi}}},PSEUDO:function(qi,Ki){var Zi=za.pseudos[qi]||za.setFilters[qi.toLowerCase()]||Aa.error("unsupported pseudo: "+qi),Qi;return Zi[li]?Zi(Ki):1<Zi.length?(Qi=[qi,qi,"",Ki],za.setFilters.hasOwnProperty(qi.toLowerCase())?Pa(function(Ji,$i){for(var to=Zi(Ji,Ki),no=to.length,eo;no--;)Ji[eo=Si(Ji,to[no])]=!($i[eo]=to[no])}):function(Ji){return Zi(Ji,0,Qi)}):Zi}},pseudos:{not:Pa(function(qi){var Ki=[],Qi=[],Zi=Qa(qi.replace(Ri,"$1"));return Zi[li]?Pa(function(Ji,$i,eo,to){for(var ro=Zi(Ji,null,to,[]),ao=Ji.length,no;ao--;)(no=ro[ao])&&(Ji[ao]=!($i[ao]=no))}):function(Ji,$i,eo){return Ki[0]=Ji,Zi(Ki,null,eo,Qi),Ki[0]=null,!Qi.pop()}}),has:Pa(function(qi){return function(Ki){return 0<Aa(qi,Ki).length}}),contains:Pa(function(qi){return qi=qi.replace(Hi,Yi),function(Ki){return-1<(Ki.textContent||Ki.innerText||Va(Ki)).indexOf(qi)}}),lang:Pa(function(qi){return ki.test(qi||"")||Aa.error("unsupported lang: "+qi),qi=qi.replace(Hi,Yi).toLowerCase(),function(Ki){var Qi;do if(Qi=ai?Ki.lang:Ki.getAttribute("xml:lang")||Ki.getAttribute("lang"))return(Qi=Qi.toLowerCase())===qi||0===Qi.indexOf(qi+"-");while((Ki=Ki.parentNode)&&1===Ki.nodeType);return!1}}),target:function(qi){var Ki=wa.location&&wa.location.hash;return Ki&&Ki.slice(1)===qi.id},root:function(qi){return qi===ri},focus:function(qi){return qi===ni.activeElement&&(!ni.hasFocus||ni.hasFocus())&&!!(qi.type||qi.href||~qi.tabIndex)},enabled:La(!1),disabled:La(!0),checked:function(qi){var Ki=qi.nodeName.toLowerCase();return"input"===Ki&&!!qi.checked||"option"===Ki&&!!qi.selected},selected:function(qi){return qi.parentNode&&qi.parentNode.selectedIndex,!0===qi.selected},empty:function(qi){for(qi=qi.firstChild;qi;qi=qi.nextSibling)if(6>qi.nodeType)return!1;return!0},parent:function(qi){return!za.pseudos.empty(qi)},header:function(qi){return Bi.test(qi.nodeName)},input:function(qi){return Fi.test(qi.nodeName)},button:function(qi){var Ki=qi.nodeName.toLowerCase();return"input"===Ki&&"button"===qi.type||"button"===Ki},text:function(qi){var Ki;return"input"===qi.nodeName.toLowerCase()&&"text"===qi.type&&(null==(Ki=qi.getAttribute("type"))||"text"===Ki.toLowerCase())},first:ka(function(){return[0]}),last:ka(function(qi,Ki){return[Ki-1]}),eq:ka(function(qi,Ki,Qi){return[0>Qi?Qi+Ki:Qi]}),even:ka(function(qi,Ki){for(var Qi=0;Qi<Ki;Qi+=2)qi.push(Qi);return qi}),odd:ka(function(qi,Ki){for(var Qi=1;Qi<Ki;Qi+=2)qi.push(Qi);return qi}),lt:ka(function(qi,Ki,Qi){for(var Zi=0>Qi?Qi+Ki:Qi;0<=--Zi;)qi.push(Zi);return qi}),gt:ka(function(qi,Ki,Qi){for(var Zi=0>Qi?Qi+Ki:Qi;++Zi<Ki;)qi.push(Zi);return qi})}}).pseudos.nth=za.pseudos.eq,{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})za.pseudos[Wa]=Ia(Wa);for(Wa in{submit:!0,reset:!0})za.pseudos[Wa]=Oa(Wa);return Fa.prototype=za.filters=za.pseudos,za.setFilters=new Fa,Ka=Aa.tokenize=function(qi,Ki){var ro=fi[qi+" "],Qi,Zi,Ji,$i,eo,to,no;if(ro)return Ki?0:ro.slice(0);for(eo=qi,to=[],no=za.preFilter;eo;){for($i in Qi&&!(Zi=Di.exec(eo))||(Zi&&(eo=eo.slice(Zi[0].length)||eo),to.push(Ji=[])),Qi=!1,(Zi=Ii.exec(eo))&&(Qi=Zi.shift(),Ji.push({value:Qi,type:Zi[0].replace(Ri," ")}),eo=eo.slice(Qi.length)),za.filter)(Zi=Ni[$i].exec(eo))&&(!no[$i]||(Zi=no[$i](Zi)))&&(Qi=Zi.shift(),Ji.push({value:Qi,type:$i,matches:Zi}),eo=eo.slice(Qi.length));if(!Qi)break}return Ki?eo.length:eo?Aa.error(qi):fi(qi,to).slice(0)},Qa=Aa.compile=function(qi,Ki){var Zi=[],Ji=[],$i=gi[qi+" "],Qi;if(!$i){for(Ki||(Ki=Ka(qi)),Qi=Ki.length;Qi--;)($i=Ya(Ki[Qi]))[li]?Zi.push($i):Ji.push($i);($i=gi(qi,function(eo,to){var no=0<to.length,ro=0<eo.length,ao=function(io,oo,so,lo,uo){var fo=0,go="0",mo=io&&[],yo=[],_o=Ja,bo=io||ro&&za.find.TAG("*",uo),xo=pi+=null==_o?1:Math.random()||.1,vo=bo.length,po,co,ho;for(uo&&(Ja=oo===ni||oo||uo);go!==vo&&null!=(po=bo[go]);go++){if(ro&&po){for(co=0,oo||po.ownerDocument===ni||(ti(po),so=!ai);ho=eo[co++];)if(ho(po,oo||ni,so)){lo.push(po);break}uo&&(pi=xo)}no&&((po=!ho&&po)&&fo--,io&&mo.push(po))}if(fo+=go,no&&go!==fo){for(co=0;ho=to[co++];)ho(mo,yo,oo,so);if(io){if(0<fo)for(;go--;)mo[go]||yo[go]||(yo[go]=bi.call(lo));yo=Xa(yo)}vi.apply(lo,yo),uo&&!io&&0<yo.length&&1<fo+to.length&&Aa.uniqueSort(lo)}return uo&&(pi=xo,Ja=_o),mo};return no?Pa(ao):ao}(Ji,Zi))).selector=qi}return $i},Za=Aa.select=function(qi,Ki,Qi,Zi){var ro="function"==typeof qi&&qi,ao=!Zi&&Ka(qi=ro.selector||qi),Ji,$i,eo,to,no;if(Qi=Qi||[],1===ao.length){if(2<($i=ao[0]=ao[0].slice(0)).length&&"ID"===(eo=$i[0]).type&&9===Ki.nodeType&&ai&&za.relative[$i[1].type]){if(!(Ki=(za.find.ID(eo.matches[0].replace(Hi,Yi),Ki)||[])[0]))return Qi;ro&&(Ki=Ki.parentNode),qi=qi.slice($i.shift().value.length)}for(Ji=Ni.needsContext.test(qi)?0:$i.length;Ji--&&(eo=$i[Ji],!za.relative[to=eo.type]);)if((no=za.find[to])&&(Zi=no(eo.matches[0].replace(Hi,Yi),Xi.test($i[0].type)&&Na(Ki.parentNode)||Ki))){if($i.splice(Ji,1),!(qi=Zi.length&&Ba($i)))return vi.apply(Qi,Zi),Qi;break}}return(ro||Qa(qi,ao))(Zi,Ki,!ai,Qi,!Ki||Xi.test(qi)&&Na(Ki.parentNode)||Ki),Qi},ja.sortStable=li.split("").sort(mi).join("")===li,ja.detectDuplicates=!!ei,ti(),ja.sortDetached=Ma(function(qi){return 1&qi.compareDocumentPosition(ni.createElement("fieldset"))}),Ma(function(qi){return qi.innerHTML="<a href='#'></a>","#"===qi.firstChild.getAttribute("href")})||Ra("type|href|height|width",function(qi,Ki,Qi){if(!Qi)return qi.getAttribute(Ki,"type"===Ki.toLowerCase()?1:2)}),ja.attributes&&Ma(function(qi){return qi.innerHTML="<input/>",qi.firstChild.setAttribute("value",""),""===qi.firstChild.getAttribute("value")})||Ra("value",function(qi,Ki,Qi){if(!Qi&&"input"===qi.nodeName.toLowerCase())return qi.defaultValue}),Ma(function(qi){return null==qi.getAttribute("disabled")})||Ra(Ei,function(qi,Ki,Qi){var Zi;if(!Qi)return!0===qi[Ki]?Ki.toLowerCase():(Zi=qi.getAttributeNode(Ki))&&Zi.specified?Zi.value:null}),Aa}(Bt);Vn.find=Jn,Vn.expr=Jn.selectors,Vn.expr[":"]=Vn.expr.pseudos,Vn.uniqueSort=Vn.unique=Jn.uniqueSort,Vn.text=Jn.getText,Vn.isXMLDoc=Jn.isXML,Vn.contains=Jn.contains,Vn.escapeSelector=Jn.escape;var $n=function(wa,Aa,Ca){for(var Pa=[];(wa=wa[Aa])&&9!==wa.nodeType;)if(1===wa.nodeType){if(void 0!==Ca&&Vn(wa).is(Ca))break;Pa.push(wa)}return Pa},er=function(wa,Aa){for(var Ca=[];wa;wa=wa.nextSibling)1===wa.nodeType&&wa!==Aa&&Ca.push(wa);return Ca},tr=Vn.expr.match.needsContext,nr=/^<([a-z][^\/\0>:\x20\t\r\n\f]*)[\x20\t\r\n\f]*\/?>(?:<\/\1>|)$/i,rr=/^.[^:#\[\.,]*$/;Vn.filter=function(wa,Aa,Ca){var Pa=Aa[0];return Ca&&(wa=":not("+wa+")"),1===Aa.length&&1===Pa.nodeType?Vn.find.matchesSelector(Pa,wa)?[Pa]:[]:Vn.find.matches(wa,Vn.grep(Aa,function(Ma){return 1===Ma.nodeType}))},Vn.fn.extend({find:function(wa){var Pa=this.length,Ma=this,Aa,Ca;if("string"!=typeof wa)return this.pushStack(Vn(wa).filter(function(){for(Aa=0;Aa<Pa;Aa++)if(Vn.contains(Ma[Aa],this))return!0}));for(Ca=this.pushStack([]),Aa=0;Aa<Pa;Aa++)Vn.find(wa,Ma[Aa],Ca);return 1<Pa?Vn.uniqueSort(Ca):Ca},filter:function(wa){return this.pushStack(Wt(this,wa||[],!1))},not:function(wa){return this.pushStack(Wt(this,wa||[],!0))},is:function(wa){return!!Wt(this,"string"==typeof wa&&tr.test(wa)?Vn(wa):wa||[],!1).length}});var ir=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]+))$/,ar;(Vn.fn.init=function(wa,Aa,Ca){var Pa,Ma;if(!wa)return this;if(Ca=Ca||ar,"string"==typeof wa){if(!(Pa="<"===wa[0]&&">"===wa[wa.length-1]&&3<=wa.length?[null,wa,null]:ir.exec(wa))||!Pa[1]&&Aa)return!Aa||Aa.jquery?(Aa||Ca).find(wa):this.constructor(Aa).find(wa);if(Pa[1]){if(Aa=Aa instanceof Vn?Aa[0]:Aa,Vn.merge(this,Vn.parseHTML(Pa[1],Aa&&Aa.nodeType?Aa.ownerDocument||Aa:kn,!0)),nr.test(Pa[1])&&Vn.isPlainObject(Aa))for(Pa in Aa)Vn.isFunction(this[Pa])?this[Pa](Aa[Pa]):this.attr(Pa,Aa[Pa]);return this}return(Ma=kn.getElementById(Pa[2]))&&(this[0]=Ma,this.length=1),this}return wa.nodeType?(this[0]=wa,this.length=1,this):Vn.isFunction(wa)?void 0===Ca.ready?wa(Vn):Ca.ready(wa):Vn.makeArray(wa,this)}).prototype=Vn.fn,ar=Vn(kn);var or=/^(?:parents|prev(?:Until|All))/,sr={children:!0,contents:!0,next:!0,prev:!0};Vn.fn.extend({has:function(wa){var Aa=Vn(wa,this),Ca=Aa.length;return this.filter(function(){for(var Pa=0;Pa<Ca;Pa++)if(Vn.contains(this,Aa[Pa]))return!0})},closest:function(wa,Aa){var Pa=0,Ma=this.length,Ra=[],Da="string"!=typeof wa&&Vn(wa),Ca;if(!tr.test(wa))for(;Pa<Ma;Pa++)for(Ca=this[Pa];Ca&&Ca!==Aa;Ca=Ca.parentNode)if(11>Ca.nodeType&&(Da?-1<Da.index(Ca):1===Ca.nodeType&&Vn.find.matchesSelector(Ca,wa))){Ra.push(Ca);break}return this.pushStack(1<Ra.length?Vn.uniqueSort(Ra):Ra)},index:function(wa){return wa?"string"==typeof wa?Gn.call(Vn(wa),this[0]):Gn.call(this,wa.jquery?wa[0]:wa):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(wa,Aa){return this.pushStack(Vn.uniqueSort(Vn.merge(this.get(),Vn(wa,Aa))))},addBack:function(wa){return this.add(null==wa?this.prevObject:this.prevObject.filter(wa))}}),Vn.each({parent:function(wa){var Aa=wa.parentNode;return Aa&&11!==Aa.nodeType?Aa:null},parents:function(wa){return $n(wa,"parentNode")},parentsUntil:function(wa,Aa,Ca){return $n(wa,"parentNode",Ca)},next:function(wa){return jt(wa,"nextSibling")},prev:function(wa){return jt(wa,"previousSibling")},nextAll:function(wa){return $n(wa,"nextSibling")},prevAll:function(wa){return $n(wa,"previousSibling")},nextUntil:function(wa,Aa,Ca){return $n(wa,"nextSibling",Ca)},prevUntil:function(wa,Aa,Ca){return $n(wa,"previousSibling",Ca)},siblings:function(wa){return er((wa.parentNode||{}).firstChild,wa)},children:function(wa){return er(wa.firstChild)},contents:function(wa){return Yt(wa,"iframe")?wa.contentDocument:(Yt(wa,"template")&&(wa=wa.content||wa),Vn.merge([],wa.childNodes))}},function(wa,Aa){Vn.fn[wa]=function(Ca,Pa){var Ma=Vn.map(this,Aa,Ca);return"Until"!==wa.slice(-5)&&(Pa=Ca),Pa&&"string"==typeof Pa&&(Ma=Vn.filter(Pa,Ma)),1<this.length&&(sr[wa]||Vn.uniqueSort(Ma),or.test(wa)&&Ma.reverse()),this.pushStack(Ma)}});var dr=/[^\x20\t\r\n\f]+/g;Vn.Callbacks=function(wa){wa="string"==typeof wa?function(ka){var Na={};return Vn.each(ka.match(dr)||[],function(Fa,Ba){Na[Ba]=!0}),Na}(wa):Vn.extend({},wa);var Ra=[],Da=[],Ia=-1,Oa=function(){for(Ma=Ma||wa.once,Pa=Aa=!0;Da.length;Ia=-1)for(Ca=Da.shift();++Ia<Ra.length;)!1===Ra[Ia].apply(Ca[0],Ca[1])&&wa.stopOnFalse&&(Ia=Ra.length,Ca=!1);wa.memory||(Ca=!1),Aa=!1,Ma&&(Ra=Ca?[]:"")},La={add:function(){return Ra&&(Ca&&!Aa&&(Ia=Ra.length-1,Da.push(Ca)),function ka(Na){Vn.each(Na,function(Fa,Ba){Vn.isFunction(Ba)?wa.unique&&La.has(Ba)||Ra.push(Ba):Ba&&Ba.length&&"string"!==Vn.type(Ba)&&ka(Ba)})}(arguments),Ca&&!Aa&&Oa()),this},remove:function(){return Vn.each(arguments,function(ka,Na){for(var Fa;-1<(Fa=Vn.inArray(Na,Ra,Fa));)Ra.splice(Fa,1),Fa<=Ia&&Ia--}),this},has:function(ka){return ka?-1<Vn.inArray(ka,Ra):0<Ra.length},empty:function(){return Ra&&(Ra=[]),this},disable:function(){return Ma=Da=[],Ra=Ca="",this},disabled:function(){return!Ra},lock:function(){return Ma=Da=[],Ca||Aa||(Ra=Ca=""),this},locked:function(){return!!Ma},fireWith:function(ka,Na){return Ma||(Na=[ka,(Na=Na||[]).slice?Na.slice():Na],Da.push(Na),Aa||Oa()),this},fire:function(){return La.fireWith(this,arguments),this},fired:function(){return!!Pa}},Aa,Ca,Pa,Ma;return La},Vn.extend({Deferred:function(wa){var Aa=[["notify","progress",Vn.Callbacks("memory"),Vn.Callbacks("memory"),2],["resolve","done",Vn.Callbacks("once memory"),Vn.Callbacks("once memory"),0,"resolved"],["reject","fail",Vn.Callbacks("once memory"),Vn.Callbacks("once memory"),1,"rejected"]],Ca="pending",Pa={state:function(){return Ca},always:function(){return Ma.done(arguments).fail(arguments),this},catch:function(Ra){return Pa.then(null,Ra)},pipe:function(){var Ra=arguments;return Vn.Deferred(function(Da){Vn.each(Aa,function(Ia,Oa){var La=Vn.isFunction(Ra[Oa[4]])&&Ra[Oa[4]];Ma[Oa[1]](function(){var ka=La&&La.apply(this,arguments);ka&&Vn.isFunction(ka.promise)?ka.promise().progress(Da.notify).done(Da.resolve).fail(Da.reject):Da[Oa[0]+"With"](this,La?[ka]:arguments)})}),Ra=null}).promise()},then:function(Ra,Da,Ia){function Oa(ka,Na,Fa,Ba){return function(){var Ua=this,Ga=arguments,Xa=function(){var Ya,Wa;if(!(ka<La)){if((Ya=Fa.apply(Ua,Ga))===Na.promise())throw new TypeError("Thenable self-resolution");Wa=Ya&&("object"==typeof Ya||"function"==typeof Ya)&&Ya.then,Vn.isFunction(Wa)?Ba?Wa.call(Ya,Oa(La,Na,zt,Ba),Oa(La,Na,Vt,Ba)):(La++,Wa.call(Ya,Oa(La,Na,zt,Ba),Oa(La,Na,Vt,Ba),Oa(La,Na,zt,Na.notifyWith))):(Fa!==zt&&(Ua=void 0,Ga=[Ya]),(Ba||Na.resolveWith)(Ua,Ga))}},Ha=Ba?Xa:function(){try{Xa()}catch(Ya){Vn.Deferred.exceptionHook&&Vn.Deferred.exceptionHook(Ya,Ha.stackTrace),ka+1>=La&&(Fa!==Vt&&(Ua=void 0,Ga=[Ya]),Na.rejectWith(Ua,Ga))}};ka?Ha():(Vn.Deferred.getStackHook&&(Ha.stackTrace=Vn.Deferred.getStackHook()),Bt.setTimeout(Ha))}}var La=0;return Vn.Deferred(function(ka){Aa[0][3].add(Oa(0,ka,Vn.isFunction(Ia)?Ia:zt,ka.notifyWith)),Aa[1][3].add(Oa(0,ka,Vn.isFunction(Ra)?Ra:zt)),Aa[2][3].add(Oa(0,ka,Vn.isFunction(Da)?Da:Vt))}).promise()},promise:function(Ra){return null==Ra?Pa:Vn.extend(Ra,Pa)}},Ma={};return Vn.each(Aa,function(Ra,Da){var Ia=Da[2],Oa=Da[5];Pa[Da[1]]=Ia.add,Oa&&Ia.add(function(){Ca=Oa},Aa[3-Ra][2].disable,Aa[0][2].lock),Ia.add(Da[3].fire),Ma[Da[0]]=function(){return Ma[Da[0]+"With"](this===Ma?void 0:this,arguments),this},Ma[Da[0]+"With"]=Ia.fireWith}),Pa.promise(Ma),wa&&wa.call(Ma,Ma),Ma},when:function(wa){var Aa=arguments.length,Ca=Aa,Pa=Array(Ca),Ma=Fn.call(arguments),Ra=Vn.Deferred(),Da=function(Ia){return function(Oa){Pa[Ia]=this,Ma[Ia]=1<arguments.length?Fn.call(arguments):Oa,--Aa||Ra.resolveWith(Pa,Ma)}};if(1>=Aa&&(qt(wa,Ra.done(Da(Ca)).resolve,Ra.reject,!Aa),"pending"===Ra.state()||Vn.isFunction(Ma[Ca]&&Ma[Ca].then)))return Ra.then();for(;Ca--;)qt(Ma[Ca],Da(Ca),Ra.reject);return Ra.promise()}});var lr=/^(Eval|Internal|Range|Reference|Syntax|Type|URI)Error$/;Vn.Deferred.exceptionHook=function(wa,Aa){Bt.console&&Bt.console.warn&&wa&&lr.test(wa.name)&&Bt.console.warn("jQuery.Deferred exception: "+wa.message,wa.stack,Aa)},Vn.readyException=function(wa){Bt.setTimeout(function(){throw wa})};var ur=Vn.Deferred();Vn.fn.ready=function(wa){return ur.then(wa).catch(function(Aa){Vn.readyException(Aa)}),this},Vn.extend({isReady:!1,readyWait:1,ready:function(wa){(!0===wa?--Vn.readyWait:Vn.isReady)||(Vn.isReady=!0,!0!==wa&&0<--Vn.readyWait||ur.resolveWith(kn,[Vn]))}}),Vn.ready.then=ur.then,"complete"!==kn.readyState&&("loading"===kn.readyState||kn.documentElement.doScroll)?(kn.addEventListener("DOMContentLoaded",Kt),Bt.addEventListener("load",Kt)):Bt.setTimeout(Vn.ready);var pr=function(wa,Aa,Ca,Pa,Ma,Ra,Da){var Ia=0,Oa=wa.length,La=null==Ca;if("object"===Vn.type(Ca))for(Ia in Ma=!0,Ca)pr(wa,Aa,Ia,Ca[Ia],!0,Ra,Da);else if(void 0!==Pa&&(Ma=!0,Vn.isFunction(Pa)||(Da=!0),La&&(Da?(Aa.call(wa,Pa),Aa=null):(La=Aa,Aa=function(ka,Na,Fa){return La.call(Vn(ka),Fa)})),Aa))for(;Ia<Oa;Ia++)Aa(wa[Ia],Ca,Da?Pa:Pa.call(wa[Ia],Ia,Aa(wa[Ia],Ca)));return Ma?wa:La?Aa.call(wa):Oa?Aa(wa[0],Ca):Ra},cr=function(wa){return 1===wa.nodeType||9===wa.nodeType||!+wa.nodeType};Qt.uid=1,Qt.prototype={cache:function(wa){var Aa=wa[this.expando];return Aa||(Aa={},cr(wa)&&(wa.nodeType?wa[this.expando]=Aa:Object.defineProperty(wa,this.expando,{value:Aa,configurable:!0}))),Aa},set:function(wa,Aa,Ca){var Ma=this.cache(wa),Pa;if("string"==typeof Aa)Ma[Vn.camelCase(Aa)]=Ca;else for(Pa in Aa)Ma[Vn.camelCase(Pa)]=Aa[Pa];return Ma},get:function(wa,Aa){return void 0===Aa?this.cache(wa):wa[this.expando]&&wa[this.expando][Vn.camelCase(Aa)]},access:function(wa,Aa,Ca){return void 0===Aa||Aa&&"string"==typeof Aa&&void 0===Ca?this.get(wa,Aa):(this.set(wa,Aa,Ca),void 0===Ca?Aa:Ca)},remove:function(wa,Aa){var Pa=wa[this.expando],Ca;if(void 0!==Pa){if(void 0!==Aa)for(Ca=(Aa=Array.isArray(Aa)?Aa.map(Vn.camelCase):((Aa=Vn.camelCase(Aa))in Pa)?[Aa]:Aa.match(dr)||[]).length;Ca--;)delete Pa[Aa[Ca]];(void 0===Aa||Vn.isEmptyObject(Pa))&&(wa.nodeType?wa[this.expando]=void 0:delete wa[this.expando])}},hasData:function(wa){var Aa=wa[this.expando];return void 0!==Aa&&!Vn.isEmptyObject(Aa)}};var hr=new Qt,fr=new Qt,gr=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,mr=/[A-Z]/g;Vn.extend({hasData:function(wa){return fr.hasData(wa)||hr.hasData(wa)},data:function(wa,Aa,Ca){return fr.access(wa,Aa,Ca)},removeData:function(wa,Aa){fr.remove(wa,Aa)},_data:function(wa,Aa,Ca){return hr.access(wa,Aa,Ca)},_removeData:function(wa,Aa){hr.remove(wa,Aa)}}),Vn.fn.extend({data:function(wa,Aa){var Ra=this[0],Da=Ra&&Ra.attributes,Ca,Pa,Ma;if(void 0===wa){if(this.length&&(Ma=fr.get(Ra),1===Ra.nodeType&&!hr.get(Ra,"hasDataAttrs"))){for(Ca=Da.length;Ca--;)Da[Ca]&&0===(Pa=Da[Ca].name).indexOf("data-")&&(Pa=Vn.camelCase(Pa.slice(5)),Zt(Ra,Pa,Ma[Pa]));hr.set(Ra,"hasDataAttrs",!0)}return Ma}return"object"==typeof wa?this.each(function(){fr.set(this,wa)}):pr(this,function(Ia){var Oa;if(Ra&&void 0===Ia){if(void 0!==(Oa=fr.get(Ra,wa)))return Oa;if(void 0!==(Oa=Zt(Ra,wa)))return Oa}else this.each(function(){fr.set(this,wa,Ia)})},null,Aa,1<arguments.length,null,!0)},removeData:function(wa){return this.each(function(){fr.remove(this,wa)})}}),Vn.extend({queue:function(wa,Aa,Ca){var Pa;if(wa)return Aa=(Aa||"fx")+"queue",Pa=hr.get(wa,Aa),Ca&&(!Pa||Array.isArray(Ca)?Pa=hr.access(wa,Aa,Vn.makeArray(Ca)):Pa.push(Ca)),Pa||[]},dequeue:function(wa,Aa){Aa=Aa||"fx";var Ca=Vn.queue(wa,Aa),Pa=Ca.length,Ma=Ca.shift(),Ra=Vn._queueHooks(wa,Aa);"inprogress"===Ma&&(Ma=Ca.shift(),Pa--),Ma&&("fx"===Aa&&Ca.unshift("inprogress"),delete Ra.stop,Ma.call(wa,function(){Vn.dequeue(wa,Aa)},Ra)),!Pa&&Ra&&Ra.empty.fire()},_queueHooks:function(wa,Aa){var Ca=Aa+"queueHooks";return hr.get(wa,Ca)||hr.access(wa,Ca,{empty:Vn.Callbacks("once memory").add(function(){hr.remove(wa,[Aa+"queue",Ca])})})}}),Vn.fn.extend({queue:function(wa,Aa){var Ca=2;return"string"!=typeof wa&&(Aa=wa,wa="fx",Ca--),arguments.length<Ca?Vn.queue(this[0],wa):void 0===Aa?this:this.each(function(){var Pa=Vn.queue(this,wa,Aa);Vn._queueHooks(this,wa),"fx"===wa&&"inprogress"!==Pa[0]&&Vn.dequeue(this,wa)})},dequeue:function(wa){return this.each(function(){Vn.dequeue(this,wa)})},clearQueue:function(wa){return this.queue(wa||"fx",[])},promise:function(wa,Aa){var Pa=1,Ma=Vn.Deferred(),Ra=this,Da=this.length,Ia=function(){--Pa||Ma.resolveWith(Ra,[Ra])},Ca;for("string"!=typeof wa&&(Aa=wa,wa=void 0),wa=wa||"fx";Da--;)(Ca=hr.get(Ra[Da],wa+"queueHooks"))&&Ca.empty&&(Pa++,Ca.empty.add(Ia));return Ia(),Ma.promise(Aa)}});var yr=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,_r=new RegExp("^(?:([+-])=|)("+yr+")([a-z%]*)$","i"),br=["Top","Right","Bottom","Left"],xr=function(wa,Aa){return"none"===(wa=Aa||wa).style.display||""===wa.style.display&&Vn.contains(wa.ownerDocument,wa)&&"none"===Vn.css(wa,"display")},vr=function(wa,Aa,Ca,Pa){var Da={},Ma,Ra;for(Ra in Aa)Da[Ra]=wa.style[Ra],wa.style[Ra]=Aa[Ra];for(Ra in Ma=Ca.apply(wa,Pa||[]),Aa)wa.style[Ra]=Da[Ra];return Ma},Tr={};Vn.fn.extend({show:function(){return en(this,!0)},hide:function(){return en(this)},toggle:function(wa){return"boolean"==typeof wa?wa?this.show():this.hide():this.each(function(){xr(this)?Vn(this).show():Vn(this).hide()})}});var Sr=/^(?:checkbox|radio)$/i,Er=/<([a-z][^\/\0>\x20\t\r\n\f]+)/i,wr=/^$|\/(?:java|ecma)script/i,Ar={option:[1,"<select multiple='multiple'>","</select>"],thead:[1,"<table>","</table>"],col:[2,"<table><colgroup>","</colgroup></table>"],tr:[2,"<table><tbody>","</tbody></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:[0,"",""]};Ar.optgroup=Ar.option,Ar.tbody=Ar.tfoot=Ar.colgroup=Ar.caption=Ar.thead,Ar.th=Ar.td;var Cr=/<|&#?\w+;/;!function(){var wa=kn.createDocumentFragment().appendChild(kn.createElement("div")),Aa=kn.createElement("input");Aa.setAttribute("type","radio"),Aa.setAttribute("checked","checked"),Aa.setAttribute("name","t"),wa.appendChild(Aa),zn.checkClone=wa.cloneNode(!0).cloneNode(!0).lastChild.checked,wa.innerHTML="<textarea>x</textarea>",zn.noCloneChecked=!!wa.cloneNode(!0).lastChild.defaultValue}();var Pr=kn.documentElement,Mr=/^key/,Rr=/^(?:mouse|pointer|contextmenu|drag|drop)|click/,Dr=/^([^.]*)(?:\.(.+)|)/;Vn.event={global:{},add:function(wa,Aa,Ca,Pa,Ma){var Xa=hr.get(wa),Ra,Da,Ia,Oa,La,ka,Na,Fa,Ba,Ua,Ga;if(Xa)for(Ca.handler&&(Ca=(Ra=Ca).handler,Ma=Ra.selector),Ma&&Vn.find.matchesSelector(Pr,Ma),Ca.guid||(Ca.guid=Vn.guid++),(Oa=Xa.events)||(Oa=Xa.events={}),(Da=Xa.handle)||(Da=Xa.handle=function(Ha){return void 0!==Vn&&Vn.event.triggered!==Ha.type?Vn.event.dispatch.apply(wa,arguments):void 0}),La=(Aa=(Aa||"").match(dr)||[""]).length;La--;)Ba=Ga=(Ia=Dr.exec(Aa[La])||[])[1],Ua=(Ia[2]||"").split(".").sort(),Ba&&(Na=Vn.event.special[Ba]||{},Ba=(Ma?Na.delegateType:Na.bindType)||Ba,Na=Vn.event.special[Ba]||{},ka=Vn.extend({type:Ba,origType:Ga,data:Pa,handler:Ca,guid:Ca.guid,selector:Ma,needsContext:Ma&&Vn.expr.match.needsContext.test(Ma),namespace:Ua.join(".")},Ra),(Fa=Oa[Ba])||((Fa=Oa[Ba]=[]).delegateCount=0,Na.setup&&!1!==Na.setup.call(wa,Pa,Ua,Da)||wa.addEventListener&&wa.addEventListener(Ba,Da)),Na.add&&(Na.add.call(wa,ka),ka.handler.guid||(ka.handler.guid=Ca.guid)),Ma?Fa.splice(Fa.delegateCount++,0,ka):Fa.push(ka),Vn.event.global[Ba]=!0)},remove:function(wa,Aa,Ca,Pa,Ma){var Xa=hr.hasData(wa)&&hr.get(wa),Ra,Da,Ia,Oa,La,ka,Na,Fa,Ba,Ua,Ga;if(Xa&&(Oa=Xa.events)){for(La=(Aa=(Aa||"").match(dr)||[""]).length;La--;)if(Ia=Dr.exec(Aa[La])||[],Ba=Ga=Ia[1],Ua=(Ia[2]||"").split(".").sort(),Ba){for(Na=Vn.event.special[Ba]||{},Fa=Oa[Ba=(Pa?Na.delegateType:Na.bindType)||Ba]||[],Ia=Ia[2]&&new RegExp("(^|\\.)"+Ua.join("\\.(?:.*\\.|)")+"(\\.|$)"),Da=Ra=Fa.length;Ra--;)ka=Fa[Ra],!Ma&&Ga!==ka.origType||Ca&&Ca.guid!==ka.guid||Ia&&!Ia.test(ka.namespace)||Pa&&Pa!==ka.selector&&("**"!==Pa||!ka.selector)||(Fa.splice(Ra,1),ka.selector&&Fa.delegateCount--,Na.remove&&Na.remove.call(wa,ka));Da&&!Fa.length&&(Na.teardown&&!1!==Na.teardown.call(wa,Ua,Xa.handle)||Vn.removeEvent(wa,Ba,Xa.handle),delete Oa[Ba])}else for(Ba in Oa)Vn.event.remove(wa,Ba+Aa[La],Ca,Pa,!0);Vn.isEmptyObject(Oa)&&hr.remove(wa,"handle events")}},dispatch:function(wa){var Ia=Vn.event.fix(wa),Oa=Array(arguments.length),La=(hr.get(this,"events")||{})[Ia.type]||[],ka=Vn.event.special[Ia.type]||{},Aa,Ca,Pa,Ma,Ra,Da;for(Oa[0]=Ia,Aa=1;Aa<arguments.length;Aa++)Oa[Aa]=arguments[Aa];if(Ia.delegateTarget=this,!ka.preDispatch||!1!==ka.preDispatch.call(this,Ia)){for(Da=Vn.event.handlers.call(this,Ia,La),Aa=0;(Ma=Da[Aa++])&&!Ia.isPropagationStopped();)for(Ia.currentTarget=Ma.elem,Ca=0;(Ra=Ma.handlers[Ca++])&&!Ia.isImmediatePropagationStopped();)Ia.rnamespace&&!Ia.rnamespace.test(Ra.namespace)||(Ia.handleObj=Ra,Ia.data=Ra.data,void 0!==(Pa=((Vn.event.special[Ra.origType]||{}).handle||Ra.handler).apply(Ma.elem,Oa))&&!1===(Ia.result=Pa)&&(Ia.preventDefault(),Ia.stopPropagation()));return ka.postDispatch&&ka.postDispatch.call(this,Ia),Ia.result}},handlers:function(wa,Aa){var Ia=[],Oa=Aa.delegateCount,La=wa.target,Ca,Pa,Ma,Ra,Da;if(Oa&&La.nodeType&&!("click"===wa.type&&1<=wa.button))for(;La!==this;La=La.parentNode||this)if(1===La.nodeType&&("click"!==wa.type||!0!==La.disabled)){for(Ra=[],Da={},Ca=0;Ca<Oa;Ca++)void 0===Da[Ma=(Pa=Aa[Ca]).selector+" "]&&(Da[Ma]=Pa.needsContext?-1<Vn(Ma,this).index(La):Vn.find(Ma,this,null,[La]).length),Da[Ma]&&Ra.push(Pa);Ra.length&&Ia.push({elem:La,handlers:Ra})}return La=this,Oa<Aa.length&&Ia.push({elem:La,handlers:Aa.slice(Oa)}),Ia},addProp:function(wa,Aa){Object.defineProperty(Vn.Event.prototype,wa,{enumerable:!0,configurable:!0,get:Vn.isFunction(Aa)?function(){if(this.originalEvent)return Aa(this.originalEvent)}:function(){if(this.originalEvent)return this.originalEvent[wa]},set:function(Ca){Object.defineProperty(this,wa,{enumerable:!0,configurable:!0,writable:!0,value:Ca})}})},fix:function(wa){return wa[Vn.expando]?wa:new Vn.Event(wa)},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==sn()&&this.focus)return this.focus(),!1},delegateType:"focusin"},blur:{trigger:function(){if(this===sn()&&this.blur)return this.blur(),!1},delegateType:"focusout"},click:{trigger:function(){if("checkbox"===this.type&&this.click&&Yt(this,"input"))return this.click(),!1},_default:function(wa){return Yt(wa.target,"a")}},beforeunload:{postDispatch:function(wa){void 0!==wa.result&&wa.originalEvent&&(wa.originalEvent.returnValue=wa.result)}}}},Vn.removeEvent=function(wa,Aa,Ca){wa.removeEventListener&&wa.removeEventListener(Aa,Ca)},Vn.Event=function(wa,Aa){return this instanceof Vn.Event?void(wa&&wa.type?(this.originalEvent=wa,this.type=wa.type,this.isDefaultPrevented=wa.defaultPrevented||void 0===wa.defaultPrevented&&!1===wa.returnValue?an:on,this.target=wa.target&&3===wa.target.nodeType?wa.target.parentNode:wa.target,this.currentTarget=wa.currentTarget,this.relatedTarget=wa.relatedTarget):this.type=wa,Aa&&Vn.extend(this,Aa),this.timeStamp=wa&&wa.timeStamp||Vn.now(),this[Vn.expando]=!0):new Vn.Event(wa,Aa)},Vn.Event.prototype={constructor:Vn.Event,isDefaultPrevented:on,isPropagationStopped:on,isImmediatePropagationStopped:on,isSimulated:!1,preventDefault:function(){var wa=this.originalEvent;this.isDefaultPrevented=an,wa&&!this.isSimulated&&wa.preventDefault()},stopPropagation:function(){var wa=this.originalEvent;this.isPropagationStopped=an,wa&&!this.isSimulated&&wa.stopPropagation()},stopImmediatePropagation:function(){var wa=this.originalEvent;this.isImmediatePropagationStopped=an,wa&&!this.isSimulated&&wa.stopImmediatePropagation(),this.stopPropagation()}},Vn.each({altKey:!0,bubbles:!0,cancelable:!0,changedTouches:!0,ctrlKey:!0,detail:!0,eventPhase:!0,metaKey:!0,pageX:!0,pageY:!0,shiftKey:!0,view:!0,char:!0,charCode:!0,key:!0,keyCode:!0,button:!0,buttons:!0,clientX:!0,clientY:!0,offsetX:!0,offsetY:!0,pointerId:!0,pointerType:!0,screenX:!0,screenY:!0,targetTouches:!0,toElement:!0,touches:!0,which:function(wa){var Aa=wa.button;return null==wa.which&&Mr.test(wa.type)?null==wa.charCode?wa.keyCode:wa.charCode:!wa.which&&void 0!==Aa&&Rr.test(wa.type)?1&Aa?1:2&Aa?3:4&Aa?2:0:wa.which}},Vn.event.addProp),Vn.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(wa,Aa){Vn.event.special[wa]={delegateType:Aa,bindType:Aa,handle:function(Ca){var Ma=Ca.relatedTarget,Ra=Ca.handleObj,Pa;return Ma&&(Ma===this||Vn.contains(this,Ma))||(Ca.type=Ra.origType,Pa=Ra.handler.apply(this,arguments),Ca.type=Aa),Pa}}}),Vn.fn.extend({on:function(wa,Aa,Ca,Pa){return dn(this,wa,Aa,Ca,Pa)},one:function(wa,Aa,Ca,Pa){return dn(this,wa,Aa,Ca,Pa,1)},off:function(wa,Aa,Ca){var Pa,Ma;if(wa&&wa.preventDefault&&wa.handleObj)return Pa=wa.handleObj,Vn(wa.delegateTarget).off(Pa.namespace?Pa.origType+"."+Pa.namespace:Pa.origType,Pa.selector,Pa.handler),this;if("object"==typeof wa){for(Ma in wa)this.off(Ma,Aa,wa[Ma]);return this}return!1!==Aa&&"function"!=typeof Aa||(Ca=Aa,Aa=void 0),!1===Ca&&(Ca=on),this.each(function(){Vn.event.remove(this,wa,Ca,Aa)})}});var Ir=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([a-z][^\/\0>\x20\t\r\n\f]*)[^>]*)\/>/gi,Or=/<script|<style|<link/i,Lr=/checked\s*(?:[^=]|=\s*.checked.)/i,kr=/^true\/(.*)/,Nr=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g;Vn.extend({htmlPrefilter:function(wa){return wa.replace(Ir,"<$1></$2>")},clone:function(wa,Aa,Ca){var Ia=wa.cloneNode(!0),Oa=Vn.contains(wa.ownerDocument,wa),Pa,Ma,Ra,Da;if(!(zn.noCloneChecked||1!==wa.nodeType&&11!==wa.nodeType||Vn.isXMLDoc(wa)))for(Da=tn(Ia),Pa=0,Ma=(Ra=tn(wa)).length;Pa<Ma;Pa++)hn(Ra[Pa],Da[Pa]);if(Aa)if(Ca)for(Ra=Ra||tn(wa),Da=Da||tn(Ia),Pa=0,Ma=Ra.length;Pa<Ma;Pa++)cn(Ra[Pa],Da[Pa]);else cn(wa,Ia);return 0<(Da=tn(Ia,"script")).length&&nn(Da,!Oa&&tn(wa,"script")),Ia},cleanData:function(wa){for(var Ma=Vn.event.special,Ra=0,Aa,Ca,Pa;void 0!==(Ca=wa[Ra]);Ra++)if(cr(Ca)){if(Aa=Ca[hr.expando]){if(Aa.events)for(Pa in Aa.events)Ma[Pa]?Vn.event.remove(Ca,Pa):Vn.removeEvent(Ca,Pa,Aa.handle);Ca[hr.expando]=void 0}Ca[fr.expando]&&(Ca[fr.expando]=void 0)}}}),Vn.fn.extend({detach:function(wa){return gn(this,wa,!0)},remove:function(wa){return gn(this,wa)},text:function(wa){return pr(this,function(Aa){return void 0===Aa?Vn.text(this):this.empty().each(function(){1!==this.nodeType&&11!==this.nodeType&&9!==this.nodeType||(this.textContent=Aa)})},null,wa,arguments.length)},append:function(){return fn(this,arguments,function(wa){(1===this.nodeType||11===this.nodeType||9===this.nodeType)&&ln(this,wa).appendChild(wa)})},prepend:function(){return fn(this,arguments,function(wa){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var Aa=ln(this,wa);Aa.insertBefore(wa,Aa.firstChild)}})},before:function(){return fn(this,arguments,function(wa){this.parentNode&&this.parentNode.insertBefore(wa,this)})},after:function(){return fn(this,arguments,function(wa){this.parentNode&&this.parentNode.insertBefore(wa,this.nextSibling)})},empty:function(){for(var Aa=0,wa;null!=(wa=this[Aa]);Aa++)1===wa.nodeType&&(Vn.cleanData(tn(wa,!1)),wa.textContent="");return this},clone:function(wa,Aa){return wa=null!=wa&&wa,Aa=null==Aa?wa:Aa,this.map(function(){return Vn.clone(this,wa,Aa)})},html:function(wa){return pr(this,function(Aa){var Ca=this[0]||{},Pa=0,Ma=this.length;if(void 0===Aa&&1===Ca.nodeType)return Ca.innerHTML;if("string"==typeof Aa&&!Or.test(Aa)&&!Ar[(Er.exec(Aa)||["",""])[1].toLowerCase()]){Aa=Vn.htmlPrefilter(Aa);try{for(;Pa<Ma;Pa++)1===(Ca=this[Pa]||{}).nodeType&&(Vn.cleanData(tn(Ca,!1)),Ca.innerHTML=Aa);Ca=0}catch(Ra){}}Ca&&this.empty().append(Aa)},null,wa,arguments.length)},replaceWith:function(){var wa=[];return fn(this,arguments,function(Aa){var Ca=this.parentNode;0>Vn.inArray(this,wa)&&(Vn.cleanData(tn(this)),Ca&&Ca.replaceChild(Aa,this))},wa)}}),Vn.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(wa,Aa){Vn.fn[wa]=function(Ca){for(var Ma=[],Ra=Vn(Ca),Da=Ra.length-1,Ia=0,Pa;Ia<=Da;Ia++)Pa=Ia===Da?this:this.clone(!0),Vn(Ra[Ia])[Aa](Pa),Un.apply(Ma,Pa.get());return this.pushStack(Ma)}});var Fr=/^margin/,Br=new RegExp("^("+yr+")(?!px)[a-z%]+$","i"),Ur=function(wa){var Aa=wa.ownerDocument.defaultView;return Aa&&Aa.opener||(Aa=Bt),Aa.getComputedStyle(wa)};!function(){function wa(){if(Da){Da.style.cssText="box-sizing:border-box;position:relative;display:block;margin:auto;border:1px;padding:1px;top:1%;width:50%",Da.innerHTML="",Pr.appendChild(Ra);var Ia=Bt.getComputedStyle(Da);Aa="1%"!==Ia.top,Ma="2px"===Ia.marginLeft,Ca="4px"===Ia.width,Da.style.marginRight="50%",Pa="4px"===Ia.marginRight,Pr.removeChild(Ra),Da=null}}var Ra=kn.createElement("div"),Da=kn.createElement("div"),Aa,Ca,Pa,Ma;Da.style&&(Da.style.backgroundClip="content-box",Da.cloneNode(!0).style.backgroundClip="",zn.clearCloneStyle="content-box"===Da.style.backgroundClip,Ra.style.cssText="border:0;width:8px;height:0;top:0;left:-9999px;padding:0;margin-top:1px;position:absolute",Ra.appendChild(Da),Vn.extend(zn,{pixelPosition:function(){return wa(),Aa},boxSizingReliable:function(){return wa(),Ca},pixelMarginRight:function(){return wa(),Pa},reliableMarginLeft:function(){return wa(),Ma}}))}();var Gr=/^(none|table(?!-c[ea]).+)/,Xr=/^--/,Hr={position:"absolute",visibility:"hidden",display:"block"},Yr={letterSpacing:"0",fontWeight:"400"},Wr=["Webkit","Moz","ms"],jr=kn.createElement("div").style;Vn.extend({cssHooks:{opacity:{get:function(wa,Aa){if(Aa){var Ca=mn(wa,"opacity");return""===Ca?"1":Ca}}}},cssNumber:{animationIterationCount:!0,columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{float:"cssFloat"},style:function(wa,Aa,Ca,Pa){if(wa&&3!==wa.nodeType&&8!==wa.nodeType&&wa.style){var Ia=Vn.camelCase(Aa),Oa=Xr.test(Aa),La=wa.style,Ma,Ra,Da;if(Oa||(Aa=_n(Ia)),Da=Vn.cssHooks[Aa]||Vn.cssHooks[Ia],void 0===Ca)return Da&&"get"in Da&&void 0!==(Ma=Da.get(wa,!1,Pa))?Ma:La[Aa];"string"==(Ra=typeof Ca)&&(Ma=_r.exec(Ca))&&Ma[1]&&(Ca=Jt(wa,Aa,Ma),Ra="number"),null!=Ca&&Ca==Ca&&("number"===Ra&&(Ca+=Ma&&Ma[3]||(Vn.cssNumber[Ia]?"":"px")),zn.clearCloneStyle||""!==Ca||0!==Aa.indexOf("background")||(La[Aa]="inherit"),Da&&"set"in Da&&void 0===(Ca=Da.set(wa,Ca,Pa))||(Oa?La.setProperty(Aa,Ca):La[Aa]=Ca))}},css:function(wa,Aa,Ca,Pa){var Ia=Vn.camelCase(Aa),Ma,Ra,Da;return Xr.test(Aa)||(Aa=_n(Ia)),(Da=Vn.cssHooks[Aa]||Vn.cssHooks[Ia])&&"get"in Da&&(Ma=Da.get(wa,!0,Ca)),void 0===Ma&&(Ma=mn(wa,Aa,Pa)),"normal"===Ma&&Aa in Yr&&(Ma=Yr[Aa]),""===Ca||Ca?(Ra=parseFloat(Ma),!0===Ca||isFinite(Ra)?Ra||0:Ma):Ma}}),Vn.each(["height","width"],function(wa,Aa){Vn.cssHooks[Aa]={get:function(Ca,Pa,Ma){if(Pa)return!Gr.test(Vn.css(Ca,"display"))||Ca.getClientRects().length&&Ca.getBoundingClientRect().width?vn(Ca,Aa,Ma):vr(Ca,Hr,function(){return vn(Ca,Aa,Ma)})},set:function(Ca,Pa,Ma){var Da=Ma&&Ur(Ca),Ia=Ma&&xn(Ca,Aa,Ma,"border-box"===Vn.css(Ca,"boxSizing",!1,Da),Da),Ra;return Ia&&(Ra=_r.exec(Pa))&&"px"!==(Ra[3]||"px")&&(Ca.style[Aa]=Pa,Pa=Vn.css(Ca,Aa)),bn(0,Pa,Ia)}}}),Vn.cssHooks.marginLeft=yn(zn.reliableMarginLeft,function(wa,Aa){if(Aa)return(parseFloat(mn(wa,"marginLeft"))||wa.getBoundingClientRect().left-vr(wa,{marginLeft:0},function(){return wa.getBoundingClientRect().left}))+"px"}),Vn.each({margin:"",padding:"",border:"Width"},function(wa,Aa){Vn.cssHooks[wa+Aa]={expand:function(Ca){for(var Pa=0,Ma={},Ra="string"==typeof Ca?Ca.split(" "):[Ca];4>Pa;Pa++)Ma[wa+br[Pa]+Aa]=Ra[Pa]||Ra[Pa-2]||Ra[0];return Ma}},Fr.test(wa)||(Vn.cssHooks[wa+Aa].set=bn)}),Vn.fn.extend({css:function(wa,Aa){return pr(this,function(Ca,Pa,Ma){var Ia={},Oa=0,Ra,Da;if(Array.isArray(Pa)){for(Ra=Ur(Ca),Da=Pa.length;Oa<Da;Oa++)Ia[Pa[Oa]]=Vn.css(Ca,Pa[Oa],!1,Ra);return Ia}return void 0===Ma?Vn.css(Ca,Pa):Vn.style(Ca,Pa,Ma)},wa,Aa,1<arguments.length)}}),Vn.Tween=Tn,(Tn.prototype={constructor:Tn,init:function(wa,Aa,Ca,Pa,Ma,Ra){this.elem=wa,this.prop=Ca,this.easing=Ma||Vn.easing._default,this.options=Aa,this.start=this.now=this.cur(),this.end=Pa,this.unit=Ra||(Vn.cssNumber[Ca]?"":"px")},cur:function(){var wa=Tn.propHooks[this.prop];return wa&&wa.get?wa.get(this):Tn.propHooks._default.get(this)},run:function(wa){var Ca=Tn.propHooks[this.prop],Aa;return this.pos=this.options.duration?Aa=Vn.easing[this.easing](wa,this.options.duration*wa,0,1,this.options.duration):Aa=wa,this.now=(this.end-this.start)*Aa+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),Ca&&Ca.set?Ca.set(this):Tn.propHooks._default.set(this),this}}).init.prototype=Tn.prototype,(Tn.propHooks={_default:{get:function(wa){var Aa;return 1!==wa.elem.nodeType||null!=wa.elem[wa.prop]&&null==wa.elem.style[wa.prop]?wa.elem[wa.prop]:(Aa=Vn.css(wa.elem,wa.prop,""))&&"auto"!==Aa?Aa:0},set:function(wa){Vn.fx.step[wa.prop]?Vn.fx.step[wa.prop](wa):1===wa.elem.nodeType&&(null!=wa.elem.style[Vn.cssProps[wa.prop]]||Vn.cssHooks[wa.prop])?Vn.style(wa.elem,wa.prop,wa.now+wa.unit):wa.elem[wa.prop]=wa.now}}}).scrollTop=Tn.propHooks.scrollLeft={set:function(wa){wa.elem.nodeType&&wa.elem.parentNode&&(wa.elem[wa.prop]=wa.now)}},Vn.easing={linear:function(wa){return wa},swing:function(wa){return .5-Math.cos(wa*Math.PI)/2},_default:"swing"},Vn.fx=Tn.prototype.init,Vn.fx.step={};var qr=/^(?:toggle|show|hide)$/,Kr=/queueHooks$/,zr,Vr;Vn.Animation=Vn.extend(Cn,{tweeners:{"*":[function(wa,Aa){var Ca=this.createTween(wa,Aa);return Jt(Ca.elem,wa,_r.exec(Aa),Ca),Ca}]},tweener:function(wa,Aa){Vn.isFunction(wa)?(Aa=wa,wa=["*"]):wa=wa.match(dr);for(var Pa=0,Ma=wa.length,Ca;Pa<Ma;Pa++)Ca=wa[Pa],Cn.tweeners[Ca]=Cn.tweeners[Ca]||[],Cn.tweeners[Ca].unshift(Aa)},prefilters:[function(wa,Aa,Ca){var Fa=this,Ba={},Ua=wa.style,Ga=wa.nodeType&&xr(wa),Xa=hr.get(wa,"fxshow"),Pa,Ma,Ra,Da,Ia,Oa,La,ka;for(Pa in Ca.queue||(null==(Da=Vn._queueHooks(wa,"fx")).unqueued&&(Da.unqueued=0,Ia=Da.empty.fire,Da.empty.fire=function(){Da.unqueued||Ia()}),Da.unqueued++,Fa.always(function(){Fa.always(function(){Da.unqueued--,Vn.queue(wa,"fx").length||Da.empty.fire()})})),Aa)if(Ma=Aa[Pa],qr.test(Ma)){if(delete Aa[Pa],Ra=Ra||"toggle"===Ma,Ma===(Ga?"hide":"show")){if("show"!==Ma||!Xa||void 0===Xa[Pa])continue;Ga=!0}Ba[Pa]=Xa&&Xa[Pa]||Vn.style(wa,Pa)}if((Oa=!Vn.isEmptyObject(Aa))||!Vn.isEmptyObject(Ba))for(Pa in("width"in Aa||"height"in Aa)&&1===wa.nodeType&&(Ca.overflow=[Ua.overflow,Ua.overflowX,Ua.overflowY],null==(La=Xa&&Xa.display)&&(La=hr.get(wa,"display")),"none"===(ka=Vn.css(wa,"display"))&&(La?ka=La:(en([wa],!0),La=wa.style.display||La,ka=Vn.css(wa,"display"),en([wa]))),("inline"===ka||"inline-block"===ka&&null!=La)&&"none"===Vn.css(wa,"float")&&(Oa||(Fa.done(function(){Ua.display=La}),null==La&&(ka=Ua.display,La="none"===ka?"":ka)),Ua.display="inline-block")),Ca.overflow&&(Ua.overflow="hidden",Fa.always(function(){Ua.overflow=Ca.overflow[0],Ua.overflowX=Ca.overflow[1],Ua.overflowY=Ca.overflow[2]})),Oa=!1,Ba)Oa||(Xa?"hidden"in Xa&&(Ga=Xa.hidden):Xa=hr.access(wa,"fxshow",{display:La}),Ra&&(Xa.hidden=!Ga),Ga&&en([wa],!0),Fa.done(function(){for(Pa in Ga||en([wa]),hr.remove(wa,"fxshow"),Ba)Vn.style(wa,Pa,Ba[Pa])})),Oa=An(Ga?Xa[Pa]:0,Pa,Fa),Pa in Xa||(Xa[Pa]=Oa.start,Ga&&(Oa.end=Oa.start,Oa.start=0))}],prefilter:function(wa,Aa){Aa?Cn.prefilters.unshift(wa):Cn.prefilters.push(wa)}}),Vn.speed=function(wa,Aa,Ca){var Pa=wa&&"object"==typeof wa?Vn.extend({},wa):{complete:Ca||!Ca&&Aa||Vn.isFunction(wa)&&wa,duration:wa,easing:Ca&&Aa||Aa&&!Vn.isFunction(Aa)&&Aa};return Vn.fx.off?Pa.duration=0:"number"!=typeof Pa.duration&&(Pa.duration in Vn.fx.speeds?Pa.duration=Vn.fx.speeds[Pa.duration]:Pa.duration=Vn.fx.speeds._default),null!=Pa.queue&&!0!==Pa.queue||(Pa.queue="fx"),Pa.old=Pa.complete,Pa.complete=function(){Vn.isFunction(Pa.old)&&Pa.old.call(this),Pa.queue&&Vn.dequeue(this,Pa.queue)},Pa},Vn.fn.extend({fadeTo:function(wa,Aa,Ca,Pa){return this.filter(xr).css("opacity",0).show().end().animate({opacity:Aa},wa,Ca,Pa)},animate:function(wa,Aa,Ca,Pa){var Ma=Vn.isEmptyObject(wa),Ra=Vn.speed(Aa,Ca,Pa),Da=function(){var Ia=Cn(this,Vn.extend({},wa),Ra);(Ma||hr.get(this,"finish"))&&Ia.stop(!0)};return Da.finish=Da,Ma||!1===Ra.queue?this.each(Da):this.queue(Ra.queue,Da)},stop:function(wa,Aa,Ca){var Pa=function(Ma){var Ra=Ma.stop;delete Ma.stop,Ra(Ca)};return"string"!=typeof wa&&(Ca=Aa,Aa=wa,wa=void 0),Aa&&!1!==wa&&this.queue(wa||"fx",[]),this.each(function(){var Ma=!0,Ra=null!=wa&&wa+"queueHooks",Da=Vn.timers,Ia=hr.get(this);if(Ra)Ia[Ra]&&Ia[Ra].stop&&Pa(Ia[Ra]);else for(Ra in Ia)Ia[Ra]&&Ia[Ra].stop&&Kr.test(Ra)&&Pa(Ia[Ra]);for(Ra=Da.length;Ra--;)Da[Ra].elem!==this||null!=wa&&Da[Ra].queue!==wa||(Da[Ra].anim.stop(Ca),Ma=!1,Da.splice(Ra,1));!Ma&&Ca||Vn.dequeue(this,wa)})},finish:function(wa){return!1!==wa&&(wa=wa||"fx"),this.each(function(){var Ca=hr.get(this),Pa=Ca[wa+"queue"],Ma=Ca[wa+"queueHooks"],Ra=Vn.timers,Da=Pa?Pa.length:0,Aa;for(Ca.finish=!0,Vn.queue(this,wa,[]),Ma&&Ma.stop&&Ma.stop.call(this,!0),Aa=Ra.length;Aa--;)Ra[Aa].elem===this&&Ra[Aa].queue===wa&&(Ra[Aa].anim.stop(!0),Ra.splice(Aa,1));for(Aa=0;Aa<Da;Aa++)Pa[Aa]&&Pa[Aa].finish&&Pa[Aa].finish.call(this);delete Ca.finish})}}),Vn.each(["toggle","show","hide"],function(wa,Aa){var Ca=Vn.fn[Aa];Vn.fn[Aa]=function(Pa,Ma,Ra){return null==Pa||"boolean"==typeof Pa?Ca.apply(this,arguments):this.animate(wn(Aa,!0),Pa,Ma,Ra)}}),Vn.each({slideDown:wn("show"),slideUp:wn("hide"),slideToggle:wn("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(wa,Aa){Vn.fn[wa]=function(Ca,Pa,Ma){return this.animate(Aa,Ca,Pa,Ma)}}),Vn.timers=[],Vn.fx.tick=function(){var Aa=0,Ca=Vn.timers,wa;for(zr=Vn.now();Aa<Ca.length;Aa++)(wa=Ca[Aa])()||Ca[Aa]!==wa||Ca.splice(Aa--,1);Ca.length||Vn.fx.stop(),zr=void 0},Vn.fx.timer=function(wa){Vn.timers.push(wa),Vn.fx.start()},Vn.fx.interval=13,Vn.fx.start=function(){Vr||(Vr=!0,Sn())},Vn.fx.stop=function(){Vr=null},Vn.fx.speeds={slow:600,fast:200,_default:400},Vn.fn.delay=function(wa,Aa){return wa=Vn.fx?Vn.fx.speeds[wa]||wa:wa,Aa=Aa||"fx",this.queue(Aa,function(Ca,Pa){var Ma=Bt.setTimeout(Ca,wa);Pa.stop=function(){Bt.clearTimeout(Ma)}})},function(){var wa=kn.createElement("input"),Aa=kn.createElement("select").appendChild(kn.createElement("option"));wa.type="checkbox",zn.checkOn=""!==wa.value,zn.optSelected=Aa.selected,(wa=kn.createElement("input")).value="t",wa.type="radio",zn.radioValue="t"===wa.value}();var Zr=Vn.expr.attrHandle,Qr;Vn.fn.extend({attr:function(wa,Aa){return pr(this,Vn.attr,wa,Aa,1<arguments.length)},removeAttr:function(wa){return this.each(function(){Vn.removeAttr(this,wa)})}}),Vn.extend({attr:function(wa,Aa,Ca){var Ra=wa.nodeType,Pa,Ma;if(3!==Ra&&8!==Ra&&2!==Ra)return void 0===wa.getAttribute?Vn.prop(wa,Aa,Ca):(1===Ra&&Vn.isXMLDoc(wa)||(Ma=Vn.attrHooks[Aa.toLowerCase()]||(Vn.expr.match.bool.test(Aa)?Qr:void 0)),void 0===Ca?Ma&&"get"in Ma&&null!==(Pa=Ma.get(wa,Aa))?Pa:null==(Pa=Vn.find.attr(wa,Aa))?void 0:Pa:null===Ca?void Vn.removeAttr(wa,Aa):Ma&&"set"in Ma&&void 0!==(Pa=Ma.set(wa,Ca,Aa))?Pa:(wa.setAttribute(Aa,Ca+""),Ca))},attrHooks:{type:{set:function(wa,Aa){if(!zn.radioValue&&"radio"===Aa&&Yt(wa,"input")){var Ca=wa.value;return wa.setAttribute("type",Aa),Ca&&(wa.value=Ca),Aa}}}},removeAttr:function(wa,Aa){var Pa=0,Ma=Aa&&Aa.match(dr),Ca;if(Ma&&1===wa.nodeType)for(;Ca=Ma[Pa++];)wa.removeAttribute(Ca)}}),Qr={set:function(wa,Aa,Ca){return!1===Aa?Vn.removeAttr(wa,Ca):wa.setAttribute(Ca,Ca),Ca}},Vn.each(Vn.expr.match.bool.source.match(/\w+/g),function(wa,Aa){var Ca=Zr[Aa]||Vn.find.attr;Zr[Aa]=function(Pa,Ma,Ra){var Oa=Ma.toLowerCase(),Da,Ia;return Ra||(Ia=Zr[Oa],Zr[Oa]=Da,Da=null==Ca(Pa,Ma,Ra)?null:Oa,Zr[Oa]=Ia),Da}});var Jr=/^(?:input|select|textarea|button)$/i,$r=/^(?:a|area)$/i;Vn.fn.extend({prop:function(wa,Aa){return pr(this,Vn.prop,wa,Aa,1<arguments.length)},removeProp:function(wa){return this.each(function(){delete this[Vn.propFix[wa]||wa]})}}),Vn.extend({prop:function(wa,Aa,Ca){var Ra=wa.nodeType,Pa,Ma;if(3!==Ra&&8!==Ra&&2!==Ra)return 1===Ra&&Vn.isXMLDoc(wa)||(Aa=Vn.propFix[Aa]||Aa,Ma=Vn.propHooks[Aa]),void 0===Ca?Ma&&"get"in Ma&&null!==(Pa=Ma.get(wa,Aa))?Pa:wa[Aa]:Ma&&"set"in Ma&&void 0!==(Pa=Ma.set(wa,Ca,Aa))?Pa:wa[Aa]=Ca},propHooks:{tabIndex:{get:function(wa){var Aa=Vn.find.attr(wa,"tabindex");return Aa?parseInt(Aa,10):Jr.test(wa.nodeName)||$r.test(wa.nodeName)&&wa.href?0:-1}}},propFix:{for:"htmlFor",class:"className"}}),zn.optSelected||(Vn.propHooks.selected={get:function(wa){var Aa=wa.parentNode;return Aa&&Aa.parentNode&&Aa.parentNode.selectedIndex,null},set:function(wa){var Aa=wa.parentNode;Aa&&(Aa.selectedIndex,Aa.parentNode&&Aa.parentNode.selectedIndex)}}),Vn.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){Vn.propFix[this.toLowerCase()]=this}),Vn.fn.extend({addClass:function(wa){var Oa=0,Aa,Ca,Pa,Ma,Ra,Da,Ia;if(Vn.isFunction(wa))return this.each(function(La){Vn(this).addClass(wa.call(this,La,Mn(this)))});if("string"==typeof wa&&wa)for(Aa=wa.match(dr)||[];Ca=this[Oa++];)if(Ma=Mn(Ca),Pa=1===Ca.nodeType&&" "+Pn(Ma)+" "){for(Da=0;Ra=Aa[Da++];)0>Pa.indexOf(" "+Ra+" ")&&(Pa+=Ra+" ");Ma!==(Ia=Pn(Pa))&&Ca.setAttribute("class",Ia)}return this},removeClass:function(wa){var Oa=0,Aa,Ca,Pa,Ma,Ra,Da,Ia;if(Vn.isFunction(wa))return this.each(function(La){Vn(this).removeClass(wa.call(this,La,Mn(this)))});if(!arguments.length)return this.attr("class","");if("string"==typeof wa&&wa)for(Aa=wa.match(dr)||[];Ca=this[Oa++];)if(Ma=Mn(Ca),Pa=1===Ca.nodeType&&" "+Pn(Ma)+" "){for(Da=0;Ra=Aa[Da++];)for(;-1<Pa.indexOf(" "+Ra+" ");)Pa=Pa.replace(" "+Ra+" "," ");Ma!==(Ia=Pn(Pa))&&Ca.setAttribute("class",Ia)}return this},toggleClass:function(wa,Aa){var Ca=typeof wa;return"boolean"==typeof Aa&&"string"==Ca?Aa?this.addClass(wa):this.removeClass(wa):Vn.isFunction(wa)?this.each(function(Pa){Vn(this).toggleClass(wa.call(this,Pa,Mn(this),Aa),Aa)}):this.each(function(){var Pa,Ma,Ra,Da;if("string"==Ca)for(Ma=0,Ra=Vn(this),Da=wa.match(dr)||[];Pa=Da[Ma++];)Ra.hasClass(Pa)?Ra.removeClass(Pa):Ra.addClass(Pa);else void 0!==wa&&"boolean"!=Ca||((Pa=Mn(this))&&hr.set(this,"__className__",Pa),this.setAttribute&&this.setAttribute("class",Pa||!1===wa?"":hr.get(this,"__className__")||""))})},hasClass:function(wa){var Pa=0,Aa,Ca;for(Aa=" "+wa+" ";Ca=this[Pa++];)if(1===Ca.nodeType&&-1<(" "+Pn(Mn(Ca))+" ").indexOf(Aa))return!0;return!1}});var ea=/\r/g;Vn.fn.extend({val:function(wa){var Ma=this[0],Aa,Ca,Pa;return arguments.length?(Pa=Vn.isFunction(wa),this.each(function(Ra){var Da;1===this.nodeType&&(null==(Da=Pa?wa.call(this,Ra,Vn(this).val()):wa)?Da="":"number"==typeof Da?Da+="":Array.isArray(Da)&&(Da=Vn.map(Da,function(Ia){return null==Ia?"":Ia+""})),(Aa=Vn.valHooks[this.type]||Vn.valHooks[this.nodeName.toLowerCase()])&&"set"in Aa&&void 0!==Aa.set(this,Da,"value")||(this.value=Da))})):Ma?(Aa=Vn.valHooks[Ma.type]||Vn.valHooks[Ma.nodeName.toLowerCase()])&&"get"in Aa&&void 0!==(Ca=Aa.get(Ma,"value"))?Ca:"string"==typeof(Ca=Ma.value)?Ca.replace(ea,""):null==Ca?"":Ca:void 0}}),Vn.extend({valHooks:{option:{get:function(wa){var Aa=Vn.find.attr(wa,"value");return null==Aa?Pn(Vn.text(wa)):Aa}},select:{get:function(wa){var Ma=wa.options,Ra=wa.selectedIndex,Da="select-one"===wa.type,Ia=Da?null:[],Oa=Da?Ra+1:Ma.length,Aa,Ca,Pa;for(Pa=0>Ra?Oa:Da?Ra:0;Pa<Oa;Pa++)if(((Ca=Ma[Pa]).selected||Pa===Ra)&&!Ca.disabled&&(!Ca.parentNode.disabled||!Yt(Ca.parentNode,"optgroup"))){if(Aa=Vn(Ca).val(),Da)return Aa;Ia.push(Aa)}return Ia},set:function(wa,Aa){for(var Ma=wa.options,Ra=Vn.makeArray(Aa),Da=Ma.length,Ca,Pa;Da--;)((Pa=Ma[Da]).selected=-1<Vn.inArray(Vn.valHooks.option.get(Pa),Ra))&&(Ca=!0);return Ca||(wa.selectedIndex=-1),Ra}}}}),Vn.each(["radio","checkbox"],function(){Vn.valHooks[this]={set:function(wa,Aa){if(Array.isArray(Aa))return wa.checked=-1<Vn.inArray(Vn(wa).val(),Aa)}},zn.checkOn||(Vn.valHooks[this].get=function(wa){return null===wa.getAttribute("value")?"on":wa.value})});var ta=/^(?:focusinfocus|focusoutblur)$/;Vn.extend(Vn.event,{trigger:function(wa,Aa,Ca,Pa){var Na=[Ca||kn],Fa=Yn.call(wa,"type")?wa.type:wa,Ba=Yn.call(wa,"namespace")?wa.namespace.split("."):[],Ma,Ra,Da,Ia,Oa,La,ka;if(Ra=Da=Ca=Ca||kn,3!==Ca.nodeType&&8!==Ca.nodeType&&!ta.test(Fa+Vn.event.triggered)&&(-1<Fa.indexOf(".")&&(Fa=(Ba=Fa.split(".")).shift(),Ba.sort()),Oa=0>Fa.indexOf(":")&&"on"+Fa,wa=wa[Vn.expando]?wa:new Vn.Event(Fa,"object"==typeof wa&&wa),wa.isTrigger=Pa?2:3,wa.namespace=Ba.join("."),wa.rnamespace=wa.namespace?new RegExp("(^|\\.)"+Ba.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,wa.result=void 0,wa.target||(wa.target=Ca),Aa=null==Aa?[wa]:Vn.makeArray(Aa,[wa]),ka=Vn.event.special[Fa]||{},Pa||!ka.trigger||!1!==ka.trigger.apply(Ca,Aa))){if(!Pa&&!ka.noBubble&&!Vn.isWindow(Ca)){for(Ia=ka.delegateType||Fa,ta.test(Ia+Fa)||(Ra=Ra.parentNode);Ra;Ra=Ra.parentNode)Na.push(Ra),Da=Ra;Da===(Ca.ownerDocument||kn)&&Na.push(Da.defaultView||Da.parentWindow||Bt)}for(Ma=0;(Ra=Na[Ma++])&&!wa.isPropagationStopped();)wa.type=1<Ma?Ia:ka.bindType||Fa,(La=(hr.get(Ra,"events")||{})[wa.type]&&hr.get(Ra,"handle"))&&La.apply(Ra,Aa),(La=Oa&&Ra[Oa])&&La.apply&&cr(Ra)&&(wa.result=La.apply(Ra,Aa),!1===wa.result&&wa.preventDefault());return wa.type=Fa,Pa||wa.isDefaultPrevented()||ka._default&&!1!==ka._default.apply(Na.pop(),Aa)||!cr(Ca)||Oa&&Vn.isFunction(Ca[Fa])&&!Vn.isWindow(Ca)&&((Da=Ca[Oa])&&(Ca[Oa]=null),Vn.event.triggered=Fa,Ca[Fa](),Vn.event.triggered=void 0,Da&&(Ca[Oa]=Da)),wa.result}},simulate:function(wa,Aa,Ca){var Pa=Vn.extend(new Vn.Event,Ca,{type:wa,isSimulated:!0});Vn.event.trigger(Pa,null,Aa)}}),Vn.fn.extend({trigger:function(wa,Aa){return this.each(function(){Vn.event.trigger(wa,Aa,this)})},triggerHandler:function(wa,Aa){var Ca=this[0];if(Ca)return Vn.event.trigger(wa,Aa,Ca,!0)}}),Vn.each("blur focus focusin focusout resize scroll click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup contextmenu".split(" "),function(wa,Aa){Vn.fn[Aa]=function(Ca,Pa){return 0<arguments.length?this.on(Aa,null,Ca,Pa):this.trigger(Aa)}}),Vn.fn.extend({hover:function(wa,Aa){return this.mouseenter(wa).mouseleave(Aa||wa)}}),zn.focusin="onfocusin"in Bt,zn.focusin||Vn.each({focus:"focusin",blur:"focusout"},function(wa,Aa){var Ca=function(Pa){Vn.event.simulate(Aa,Pa.target,Vn.event.fix(Pa))};Vn.event.special[Aa]={setup:function(){var Pa=this.ownerDocument||this,Ma=hr.access(Pa,Aa);Ma||Pa.addEventListener(wa,Ca,!0),hr.access(Pa,Aa,(Ma||0)+1)},teardown:function(){var Pa=this.ownerDocument||this,Ma=hr.access(Pa,Aa)-1;Ma?hr.access(Pa,Aa,Ma):(Pa.removeEventListener(wa,Ca,!0),hr.remove(Pa,Aa))}}});var na=Bt.location,ra=Vn.now(),aa=/\?/;Vn.parseXML=function(wa){var Aa;if(!wa||"string"!=typeof wa)return null;try{Aa=new Bt.DOMParser().parseFromString(wa,"text/xml")}catch(Ca){Aa=void 0}return Aa&&!Aa.getElementsByTagName("parsererror").length||Vn.error("Invalid XML: "+wa),Aa};var ia=/\[\]$/,oa=/\r?\n/g,sa=/^(?:submit|button|image|reset|file)$/i,da=/^(?:input|select|textarea|keygen)/i;Vn.param=function(wa,Aa){var Pa=[],Ma=function(Ra,Da){var Ia=Vn.isFunction(Da)?Da():Da;Pa[Pa.length]=encodeURIComponent(Ra)+"="+encodeURIComponent(null==Ia?"":Ia)},Ca;if(Array.isArray(wa)||wa.jquery&&!Vn.isPlainObject(wa))Vn.each(wa,function(){Ma(this.name,this.value)});else for(Ca in wa)Rn(Ca,wa[Ca],Aa,Ma);return Pa.join("&")},Vn.fn.extend({serialize:function(){return Vn.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var wa=Vn.prop(this,"elements");return wa?Vn.makeArray(wa):this}).filter(function(){var wa=this.type;return this.name&&!Vn(this).is(":disabled")&&da.test(this.nodeName)&&!sa.test(wa)&&(this.checked||!Sr.test(wa))}).map(function(wa,Aa){var Ca=Vn(this).val();return null==Ca?null:Array.isArray(Ca)?Vn.map(Ca,function(Pa){return{name:Aa.name,value:Pa.replace(oa,"\r\n")}}):{name:Aa.name,value:Ca.replace(oa,"\r\n")}}).get()}});var la=/%20/g,ua=/#.*$/,pa=/([?&])_=[^&]*/,ca=/^(.*?):[ \t]*([^\r\n]*)$/gm,ha=/^(?:GET|HEAD)$/,fa=/^\/\//,ga={},ma={},ya="*/".concat("*"),_a=kn.createElement("a");_a.href=na.href,Vn.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:na.href,type:"GET",isLocal:/^(?:about|app|app-storage|.+-extension|file|res|widget):$/.test(na.protocol),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":ya,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/\bxml\b/,html:/\bhtml/,json:/\bjson\b/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":JSON.parse,"text xml":Vn.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(wa,Aa){return Aa?On(On(wa,Vn.ajaxSettings),Aa):On(Vn.ajaxSettings,wa)},ajaxPrefilter:Dn(ga),ajaxTransport:Dn(ma),ajax:function(wa,Aa){function Ca(qa,Ka,Qa,Za){var ri=Ka,Ja,$a,ei,ti,ni;La||(La=!0,Ia&&Bt.clearTimeout(Ia),Pa=void 0,Ra=Za||"",Va.readyState=0<qa?4:0,Ja=200<=qa&&300>qa||304===qa,Qa&&(ti=function(ai,ii,oi){for(var pi=ai.contents,ci=ai.dataTypes,si,di,li,ui;"*"===ci[0];)ci.shift(),void 0===si&&(si=ai.mimeType||ii.getResponseHeader("Content-Type"));if(si)for(di in pi)if(pi[di]&&pi[di].test(si)){ci.unshift(di);break}if(ci[0]in oi)li=ci[0];else{for(di in oi){if(!ci[0]||ai.converters[di+" "+ci[0]]){li=di;break}ui||(ui=di)}li=li||ui}return li?(li!==ci[0]&&ci.unshift(li),oi[li]):void 0}(Ba,Va,Qa)),ti=function(ai,ii,oi,si){var hi={},fi=ai.dataTypes.slice(),di,li,ui,pi,ci;if(fi[1])for(ui in ai.converters)hi[ui.toLowerCase()]=ai.converters[ui];for(li=fi.shift();li;)if(ai.responseFields[li]&&(oi[ai.responseFields[li]]=ii),!ci&&si&&ai.dataFilter&&(ii=ai.dataFilter(ii,ai.dataType)),ci=li,li=fi.shift())if("*"===li)li=ci;else if("*"!==ci&&ci!==li){if(!(ui=hi[ci+" "+li]||hi["* "+li]))for(di in hi)if((pi=di.split(" "))[1]===li&&(ui=hi[ci+" "+pi[0]]||hi["* "+pi[0]])){!0===ui?ui=hi[di]:!0!==hi[di]&&(li=pi[0],fi.unshift(pi[1]));break}if(!0!==ui)if(ui&&ai.throws)ii=ui(ii);else try{ii=ui(ii)}catch(gi){return{state:"parsererror",error:ui?gi:"No conversion from "+ci+" to "+li}}}return{state:"success",data:ii}}(Ba,ti,Va,Ja),Ja?(Ba.ifModified&&((ni=Va.getResponseHeader("Last-Modified"))&&(Vn.lastModified[Ma]=ni),(ni=Va.getResponseHeader("etag"))&&(Vn.etag[Ma]=ni)),204===qa||"HEAD"===Ba.type?ri="nocontent":304===qa?ri="notmodified":(ri=ti.state,$a=ti.data,Ja=!(ei=ti.error))):(ei=ri,!qa&&ri||(ri="error",0>qa&&(qa=0))),Va.status=qa,Va.statusText=(Ka||ri)+"",Ja?Xa.resolveWith(Ua,[$a,ri,Va]):Xa.rejectWith(Ua,[Va,ri,ei]),Va.statusCode(Ya),Ya=void 0,ka&&Ga.trigger(Ja?"ajaxSuccess":"ajaxError",[Va,Ba,Ja?$a:ei]),Ha.fireWith(Ua,[Va,ri]),ka&&(Ga.trigger("ajaxComplete",[Va,Ba]),--Vn.active||Vn.event.trigger("ajaxStop")))}"object"==typeof wa&&(Aa=wa,wa=void 0),Aa=Aa||{};var Ba=Vn.ajaxSetup({},Aa),Ua=Ba.context||Ba,Ga=Ba.context&&(Ua.nodeType||Ua.jquery)?Vn(Ua):Vn.event,Xa=Vn.Deferred(),Ha=Vn.Callbacks("once memory"),Ya=Ba.statusCode||{},Wa={},ja={},za="canceled",Va={readyState:0,getResponseHeader:function(qa){var Ka;if(La){if(!Da)for(Da={};Ka=ca.exec(Ra);)Da[Ka[1].toLowerCase()]=Ka[2];Ka=Da[qa.toLowerCase()]}return null==Ka?null:Ka},getAllResponseHeaders:function(){return La?Ra:null},setRequestHeader:function(qa,Ka){return null==La&&(qa=ja[qa.toLowerCase()]=ja[qa.toLowerCase()]||qa,Wa[qa]=Ka),this},overrideMimeType:function(qa){return null==La&&(Ba.mimeType=qa),this},statusCode:function(qa){if(qa)if(La)Va.always(qa[Va.status]);else for(var Ka in qa)Ya[Ka]=[Ya[Ka],qa[Ka]];return this},abort:function(qa){var Ka=qa||za;return Pa&&Pa.abort(Ka),Ca(0,Ka),this}},Pa,Ma,Ra,Da,Ia,Oa,La,ka,Na,Fa;if(Xa.promise(Va),Ba.url=((wa||Ba.url||na.href)+"").replace(fa,na.protocol+"//"),Ba.type=Aa.method||Aa.type||Ba.method||Ba.type,Ba.dataTypes=(Ba.dataType||"*").toLowerCase().match(dr)||[""],null==Ba.crossDomain){Oa=kn.createElement("a");try{Oa.href=Ba.url,Oa.href=Oa.href,Ba.crossDomain=_a.protocol+"//"+_a.host!=Oa.protocol+"//"+Oa.host}catch(qa){Ba.crossDomain=!0}}if(Ba.data&&Ba.processData&&"string"!=typeof Ba.data&&(Ba.data=Vn.param(Ba.data,Ba.traditional)),In(ga,Ba,Aa,Va),La)return Va;for(Na in(ka=Vn.event&&Ba.global)&&0==Vn.active++&&Vn.event.trigger("ajaxStart"),Ba.type=Ba.type.toUpperCase(),Ba.hasContent=!ha.test(Ba.type),Ma=Ba.url.replace(ua,""),Ba.hasContent?Ba.data&&Ba.processData&&0===(Ba.contentType||"").indexOf("application/x-www-form-urlencoded")&&(Ba.data=Ba.data.replace(la,"+")):(Fa=Ba.url.slice(Ma.length),Ba.data&&(Ma+=(aa.test(Ma)?"&":"?")+Ba.data,delete Ba.data),!1===Ba.cache&&(Ma=Ma.replace(pa,"$1"),Fa=(aa.test(Ma)?"&":"?")+"_="+ra++ +Fa),Ba.url=Ma+Fa),Ba.ifModified&&(Vn.lastModified[Ma]&&Va.setRequestHeader("If-Modified-Since",Vn.lastModified[Ma]),Vn.etag[Ma]&&Va.setRequestHeader("If-None-Match",Vn.etag[Ma])),(Ba.data&&Ba.hasContent&&!1!==Ba.contentType||Aa.contentType)&&Va.setRequestHeader("Content-Type",Ba.contentType),Va.setRequestHeader("Accept",Ba.dataTypes[0]&&Ba.accepts[Ba.dataTypes[0]]?Ba.accepts[Ba.dataTypes[0]]+("*"===Ba.dataTypes[0]?"":", "+ya+"; q=0.01"):Ba.accepts["*"]),Ba.headers)Va.setRequestHeader(Na,Ba.headers[Na]);if(Ba.beforeSend&&(!1===Ba.beforeSend.call(Ua,Va,Ba)||La))return Va.abort();if(za="abort",Ha.add(Ba.complete),Va.done(Ba.success),Va.fail(Ba.error),Pa=In(ma,Ba,Aa,Va)){if(Va.readyState=1,ka&&Ga.trigger("ajaxSend",[Va,Ba]),La)return Va;Ba.async&&0<Ba.timeout&&(Ia=Bt.setTimeout(function(){Va.abort("timeout")},Ba.timeout));try{La=!1,Pa.send(Wa,Ca)}catch(qa){if(La)throw qa;Ca(-1,qa)}}else Ca(-1,"No Transport");return Va},getJSON:function(wa,Aa,Ca){return Vn.get(wa,Aa,Ca,"json")},getScript:function(wa,Aa){return Vn.get(wa,void 0,Aa,"script")}}),Vn.each(["get","post"],function(wa,Aa){Vn[Aa]=function(Ca,Pa,Ma,Ra){return Vn.isFunction(Pa)&&(Ra=Ra||Ma,Ma=Pa,Pa=void 0),Vn.ajax(Vn.extend({url:Ca,type:Aa,dataType:Ra,data:Pa,success:Ma},Vn.isPlainObject(Ca)&&Ca))}}),Vn._evalUrl=function(wa){return Vn.ajax({url:wa,type:"GET",dataType:"script",cache:!0,async:!1,global:!1,throws:!0})},Vn.fn.extend({wrapAll:function(wa){var Aa;return this[0]&&(Vn.isFunction(wa)&&(wa=wa.call(this[0])),Aa=Vn(wa,this[0].ownerDocument).eq(0).clone(!0),this[0].parentNode&&Aa.insertBefore(this[0]),Aa.map(function(){for(var Ca=this;Ca.firstElementChild;)Ca=Ca.firstElementChild;return Ca}).append(this)),this},wrapInner:function(wa){return Vn.isFunction(wa)?this.each(function(Aa){Vn(this).wrapInner(wa.call(this,Aa))}):this.each(function(){var Aa=Vn(this),Ca=Aa.contents();Ca.length?Ca.wrapAll(wa):Aa.append(wa)})},wrap:function(wa){var Aa=Vn.isFunction(wa);return this.each(function(Ca){Vn(this).wrapAll(Aa?wa.call(this,Ca):wa)})},unwrap:function(wa){return this.parent(wa).not("body").each(function(){Vn(this).replaceWith(this.childNodes)}),this}}),Vn.expr.pseudos.hidden=function(wa){return!Vn.expr.pseudos.visible(wa)},Vn.expr.pseudos.visible=function(wa){return!!(wa.offsetWidth||wa.offsetHeight||wa.getClientRects().length)},Vn.ajaxSettings.xhr=function(){try{return new Bt.XMLHttpRequest}catch(wa){}};var ba={0:200,1223:204},xa=Vn.ajaxSettings.xhr();zn.cors=!!xa&&"withCredentials"in xa,zn.ajax=xa=!!xa,Vn.ajaxTransport(function(wa){var Aa,Ca;if(zn.cors||xa&&!wa.crossDomain)return{send:function(Pa,Ma){var Da=wa.xhr(),Ra;if(Da.open(wa.type,wa.url,wa.async,wa.username,wa.password),wa.xhrFields)for(Ra in wa.xhrFields)Da[Ra]=wa.xhrFields[Ra];for(Ra in wa.mimeType&&Da.overrideMimeType&&Da.overrideMimeType(wa.mimeType),wa.crossDomain||Pa["X-Requested-With"]||(Pa["X-Requested-With"]="XMLHttpRequest"),Pa)Da.setRequestHeader(Ra,Pa[Ra]);Aa=function(Ia){return function(){Aa&&(Aa=Ca=Da.onload=Da.onerror=Da.onabort=Da.onreadystatechange=null,"abort"===Ia?Da.abort():"error"===Ia?"number"==typeof Da.status?Ma(Da.status,Da.statusText):Ma(0,"error"):Ma(ba[Da.status]||Da.status,Da.statusText,"text"!==(Da.responseType||"text")||"string"!=typeof Da.responseText?{binary:Da.response}:{text:Da.responseText},Da.getAllResponseHeaders()))}},Da.onload=Aa(),Ca=Da.onerror=Aa("error"),void 0===Da.onabort?Da.onreadystatechange=function(){4===Da.readyState&&Bt.setTimeout(function(){Aa&&Ca()})}:Da.onabort=Ca,Aa=Aa("abort");try{Da.send(wa.hasContent&&wa.data||null)}catch(Ia){if(Aa)throw Ia}},abort:function(){Aa&&Aa()}}}),Vn.ajaxPrefilter(function(wa){wa.crossDomain&&(wa.contents.script=!1)}),Vn.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/\b(?:java|ecma)script\b/},converters:{"text script":function(wa){return Vn.globalEval(wa),wa}}}),Vn.ajaxPrefilter("script",function(wa){void 0===wa.cache&&(wa.cache=!1),wa.crossDomain&&(wa.type="GET")}),Vn.ajaxTransport("script",function(wa){if(wa.crossDomain){var Aa,Ca;return{send:function(Pa,Ma){Aa=Vn("<script>").prop({charset:wa.scriptCharset,src:wa.url}).on("load error",Ca=function(Ra){Aa.remove(),Ca=null,Ra&&Ma("error"===Ra.type?404:200,Ra.type)}),kn.head.appendChild(Aa[0])},abort:function(){Ca&&Ca()}}}});var va=[],Ta=/(=)\?(?=&|$)|\?\?/;Vn.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var wa=va.pop()||Vn.expando+"_"+ra++;return this[wa]=!0,wa}}),Vn.ajaxPrefilter("json jsonp",function(wa,Aa,Ca){var Da=!1!==wa.jsonp&&(Ta.test(wa.url)?"url":"string"==typeof wa.data&&0===(wa.contentType||"").indexOf("application/x-www-form-urlencoded")&&Ta.test(wa.data)&&"data"),Pa,Ma,Ra;if(Da||"jsonp"===wa.dataTypes[0])return Pa=wa.jsonpCallback=Vn.isFunction(wa.jsonpCallback)?wa.jsonpCallback():wa.jsonpCallback,Da?wa[Da]=wa[Da].replace(Ta,"$1"+Pa):!1!==wa.jsonp&&(wa.url+=(aa.test(wa.url)?"&":"?")+wa.jsonp+"="+Pa),wa.converters["script json"]=function(){return Ra||Vn.error(Pa+" was not called"),Ra[0]},wa.dataTypes[0]="json",Ma=Bt[Pa],Bt[Pa]=function(){Ra=arguments},Ca.always(function(){void 0===Ma?Vn(Bt).removeProp(Pa):Bt[Pa]=Ma,wa[Pa]&&(wa.jsonpCallback=Aa.jsonpCallback,va.push(Pa)),Ra&&Vn.isFunction(Ma)&&Ma(Ra[0]),Ra=Ma=void 0}),"script"}),zn.createHTMLDocument=function(){var wa=kn.implementation.createHTMLDocument("").body;return wa.innerHTML="<form></form><form></form>",2===wa.childNodes.length}(),Vn.parseHTML=function(wa,Aa,Ca){if("string"!=typeof wa)return[];"boolean"==typeof Aa&&(Ca=Aa,Aa=!1);var Pa,Ma,Ra;return Aa||(zn.createHTMLDocument?((Pa=(Aa=kn.implementation.createHTMLDocument("")).createElement("base")).href=kn.location.href,Aa.head.appendChild(Pa)):Aa=kn),Ma=nr.exec(wa),Ra=!Ca&&[],Ma?[Aa.createElement(Ma[1])]:(Ma=rn([wa],Aa,Ra),Ra&&Ra.length&&Vn(Ra).remove(),Vn.merge([],Ma.childNodes))},Vn.fn.load=function(wa,Aa,Ca){var Da=this,Ia=wa.indexOf(" "),Pa,Ma,Ra;return-1<Ia&&(Pa=Pn(wa.slice(Ia)),wa=wa.slice(0,Ia)),Vn.isFunction(Aa)?(Ca=Aa,Aa=void 0):Aa&&"object"==typeof Aa&&(Ma="POST"),0<Da.length&&Vn.ajax({url:wa,type:Ma||"GET",dataType:"html",data:Aa}).done(function(Oa){Ra=arguments,Da.html(Pa?Vn("<div>").append(Vn.parseHTML(Oa)).find(Pa):Oa)}).always(Ca&&function(Oa,La){Da.each(function(){Ca.apply(this,Ra||[Oa.responseText,La,Oa])})}),this},Vn.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(wa,Aa){Vn.fn[Aa]=function(Ca){return this.on(Aa,Ca)}}),Vn.expr.pseudos.animated=function(wa){return Vn.grep(Vn.timers,function(Aa){return wa===Aa.elem}).length},Vn.offset={setOffset:function(wa,Aa,Ca){var La=Vn.css(wa,"position"),ka=Vn(wa),Na={},Pa,Ma,Ra,Da,Ia,Oa;"static"===La&&(wa.style.position="relative"),Ia=ka.offset(),Ra=Vn.css(wa,"top"),Oa=Vn.css(wa,"left"),("absolute"===La||"fixed"===La)&&-1<(Ra+Oa).indexOf("auto")?(Da=(Pa=ka.position()).top,Ma=Pa.left):(Da=parseFloat(Ra)||0,Ma=parseFloat(Oa)||0),Vn.isFunction(Aa)&&(Aa=Aa.call(wa,Ca,Vn.extend({},Ia))),null!=Aa.top&&(Na.top=Aa.top-Ia.top+Da),null!=Aa.left&&(Na.left=Aa.left-Ia.left+Ma),"using"in Aa?Aa.using.call(wa,Na):ka.css(Na)}},Vn.fn.extend({offset:function(wa){if(arguments.length)return void 0===wa?this:this.each(function(Da){Vn.offset.setOffset(this,wa,Da)});var Ra=this[0],Aa,Ca,Pa,Ma;if(Ra)return Ra.getClientRects().length?(Pa=Ra.getBoundingClientRect(),Aa=Ra.ownerDocument,Ca=Aa.documentElement,Ma=Aa.defaultView,{top:Pa.top+Ma.pageYOffset-Ca.clientTop,left:Pa.left+Ma.pageXOffset-Ca.clientLeft}):{top:0,left:0}},position:function(){if(this[0]){var Ca=this[0],Pa={top:0,left:0},wa,Aa;return"fixed"===Vn.css(Ca,"position")?Aa=Ca.getBoundingClientRect():(wa=this.offsetParent(),Aa=this.offset(),Yt(wa[0],"html")||(Pa=wa.offset()),Pa={top:Pa.top+Vn.css(wa[0],"borderTopWidth",!0),left:Pa.left+Vn.css(wa[0],"borderLeftWidth",!0)}),{top:Aa.top-Pa.top-Vn.css(Ca,"marginTop",!0),left:Aa.left-Pa.left-Vn.css(Ca,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var wa=this.offsetParent;wa&&"static"===Vn.css(wa,"position");)wa=wa.offsetParent;return wa||Pr})}}),Vn.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(wa,Aa){var Ca="pageYOffset"===Aa;Vn.fn[wa]=function(Pa){return pr(this,function(Ma,Ra,Da){var Ia;return(Vn.isWindow(Ma)?Ia=Ma:9===Ma.nodeType&&(Ia=Ma.defaultView),void 0===Da)?Ia?Ia[Aa]:Ma[Ra]:void(Ia?Ia.scrollTo(Ca?Ia.pageXOffset:Da,Ca?Da:Ia.pageYOffset):Ma[Ra]=Da)},wa,Pa,arguments.length)}}),Vn.each(["top","left"],function(wa,Aa){Vn.cssHooks[Aa]=yn(zn.pixelPosition,function(Ca,Pa){if(Pa)return Pa=mn(Ca,Aa),Br.test(Pa)?Vn(Ca).position()[Aa]+"px":Pa})}),Vn.each({Height:"height",Width:"width"},function(wa,Aa){Vn.each({padding:"inner"+wa,content:Aa,"":"outer"+wa},function(Ca,Pa){Vn.fn[Pa]=function(Ma,Ra){var Da=arguments.length&&(Ca||"boolean"!=typeof Ma),Ia=Ca||(!0===Ma||!0===Ra?"margin":"border");return pr(this,function(Oa,La,ka){var Na;return Vn.isWindow(Oa)?0===Pa.indexOf("outer")?Oa["inner"+wa]:Oa.document.documentElement["client"+wa]:9===Oa.nodeType?(Na=Oa.documentElement,Math.max(Oa.body["scroll"+wa],Na["scroll"+wa],Oa.body["offset"+wa],Na["offset"+wa],Na["client"+wa])):void 0===ka?Vn.css(Oa,La,Ia):Vn.style(Oa,La,ka,Ia)},Aa,Da?Ma:void 0,Da)}})}),Vn.fn.extend({bind:function(wa,Aa,Ca){return this.on(wa,null,Aa,Ca)},unbind:function(wa,Aa){return this.off(wa,null,Aa)},delegate:function(wa,Aa,Ca,Pa){return this.on(Aa,wa,Ca,Pa)},undelegate:function(wa,Aa,Ca){return 1===arguments.length?this.off(wa,"**"):this.off(Aa,wa||"**",Ca)}}),Vn.holdReady=function(wa){wa?Vn.readyWait++:Vn.ready(!0)},Vn.isArray=Array.isArray,Vn.parseJSON=JSON.parse,Vn.nodeName=Yt,"function"==typeof define&&define.amd&&define("jquery",[],function(){return Vn});var Sa=Bt.jQuery,Ea=Bt.$;return Vn.noConflict=function(wa){return Bt.$===Vn&&(Bt.$=Ea),wa&&Bt.jQuery===Vn&&(Bt.jQuery=Sa),Vn},Gt||(Bt.jQuery=Bt.$=Vn),Vn}),function Bt(Gt,Xt,Ht){function Yt(zt,Vt){if(!Xt[zt]){if(!Gt[zt]){var qt="function"==typeof require&&require;if(!Vt&&qt)return qt(zt,!0);if(Wt)return Wt(zt,!0);var Kt=new Error("Cannot find module '"+zt+"'");throw Kt.code="MODULE_NOT_FOUND",Kt}var Qt=Xt[zt]={exports:{}};Gt[zt][0].call(Qt.exports,function(Zt){var Jt=Gt[zt][1][Zt];return Yt(Jt||Zt)},Qt,Qt.exports,Bt,Gt,Xt,Ht)}return Xt[zt].exports}for(var Wt="function"==typeof require&&require,jt=0;jt<Ht.length;jt++)Yt(Ht[jt]);return Yt}({1:[function(Bt,Gt){function Ht(zt){zt.fn.perfectScrollbar=function(Vt){return this.each(function(){if("object"==typeof Vt||void 0===Vt){Wt.get(this)||Yt.initialize(this,Vt)}else{var Kt=Vt;"update"===Kt?Yt.update(this):"destroy"===Kt&&Yt.destroy(this)}})}}var Yt=Bt("../main"),Wt=Bt("../plugin/instances");if("function"==typeof define&&define.amd)define(["jquery"],Ht);else{var jt=window.jQuery?window.jQuery:window.$;void 0!==jt&&Ht(jt)}Gt.exports=Ht},{"../main":6,"../plugin/instances":17}],2:[function(Bt,Gt){var Ht={};Ht.create=function(Yt,Wt){var jt=document.createElement(Yt);return jt.className=Wt,jt},Ht.appendTo=function(Yt,Wt){return Wt.appendChild(Yt),Yt},Ht.css=function(Yt,Wt,jt){return"object"==typeof Wt?function(zt,Vt){for(var qt in Vt){var Kt=Vt[qt];"number"==typeof Kt&&(Kt=Kt.toString()+"px"),zt.style[qt]=Kt}return zt}(Yt,Wt):void 0===jt?function(zt,Vt){return window.getComputedStyle(zt)[Vt]}(Yt,Wt):function(zt,Vt,qt){return"number"==typeof qt&&(qt=qt.toString()+"px"),zt.style[Vt]=qt,zt}(Yt,Wt,jt)},Ht.matches=function(Yt,Wt){return void 0===Yt.matches?Yt.msMatchesSelector(Wt):Yt.matches(Wt)},Ht.remove=function(Yt){void 0===Yt.remove?Yt.parentNode&&Yt.parentNode.removeChild(Yt):Yt.remove()},Ht.queryChildren=function(Yt,Wt){return Array.prototype.filter.call(Yt.childNodes,function(jt){return Ht.matches(jt,Wt)})},Gt.exports=Ht},{}],3:[function(Bt,Gt){var Ht=function(Wt){this.element=Wt,this.events={}};Ht.prototype.bind=function(Wt,jt){void 0===this.events[Wt]&&(this.events[Wt]=[]),this.events[Wt].push(jt),this.element.addEventListener(Wt,jt,!1)},Ht.prototype.unbind=function(Wt,jt){this.events[Wt]=this.events[Wt].filter(function(Vt){return void 0!==jt&&Vt!==jt||(this.element.removeEventListener(Wt,Vt,!1),!1)},this)},Ht.prototype.unbindAll=function(){for(var Wt in this.events)this.unbind(Wt)};var Yt=function(){this.eventElements=[]};Yt.prototype.eventElement=function(Wt){var jt=this.eventElements.filter(function(zt){return zt.element===Wt})[0];return void 0===jt&&(jt=new Ht(Wt),this.eventElements.push(jt)),jt},Yt.prototype.bind=function(Wt,jt,zt){this.eventElement(Wt).bind(jt,zt)},Yt.prototype.unbind=function(Wt,jt,zt){this.eventElement(Wt).unbind(jt,zt)},Yt.prototype.unbindAll=function(){for(var Wt=0;Wt<this.eventElements.length;Wt++)this.eventElements[Wt].unbindAll()},Yt.prototype.once=function(Wt,jt,zt){var Vt=this.eventElement(Wt),qt=function(Kt){Vt.unbind(jt,qt),zt(Kt)};Vt.bind(jt,qt)},Gt.exports=Yt},{}],4:[function(Bt,Gt){Gt.exports=function(){function Ht(){return Math.floor(65536*(1+Math.random())).toString(16).substring(1)}return function(){return Ht()+Ht()+"-"+Ht()+"-"+Ht()+"-"+Ht()+"-"+Ht()+Ht()+Ht()}}()},{}],5:[function(Bt,Gt,Xt){function Ht(jt){var zt;return zt=void 0===jt?["ps--x","ps--y"]:["ps--"+jt],["ps--in-scrolling"].concat(zt)}var Yt=Bt("./dom"),Wt=Xt.toInt=function(jt){return parseInt(jt,10)||0};Xt.isEditable=function(jt){return Yt.matches(jt,"input,[contenteditable]")||Yt.matches(jt,"select,[contenteditable]")||Yt.matches(jt,"textarea,[contenteditable]")||Yt.matches(jt,"button,[contenteditable]")},Xt.removePsClasses=function(jt){for(var zt=0,Vt;zt<jt.classList.length;zt++)Vt=jt.classList[zt],0===Vt.indexOf("ps-")&&jt.classList.remove(Vt)},Xt.outerWidth=function(jt){return Wt(Yt.css(jt,"width"))+Wt(Yt.css(jt,"paddingLeft"))+Wt(Yt.css(jt,"paddingRight"))+Wt(Yt.css(jt,"borderLeftWidth"))+Wt(Yt.css(jt,"borderRightWidth"))},Xt.startScrolling=function(jt,zt){for(var Vt=Ht(zt),qt=0;qt<Vt.length;qt++)jt.classList.add(Vt[qt])},Xt.stopScrolling=function(jt,zt){for(var Vt=Ht(zt),qt=0;qt<Vt.length;qt++)jt.classList.remove(Vt[qt])},Xt.env={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof window&&null!==window.navigator.msMaxTouchPoints}},{"./dom":2}],6:[function(Bt,Gt){var Ht=Bt("./plugin/destroy"),Yt=Bt("./plugin/initialize"),Wt=Bt("./plugin/update");Gt.exports={initialize:Yt,update:Wt,destroy:Ht}},{"./plugin/destroy":8,"./plugin/initialize":16,"./plugin/update":20}],7:[function(Bt,Gt){Gt.exports=function(){return{handlers:["click-rail","drag-scrollbar","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipePropagation:!0,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1,theme:"default"}}},{}],8:[function(Bt,Gt){var Ht=Bt("../lib/helper"),Yt=Bt("../lib/dom"),Wt=Bt("./instances");Gt.exports=function(jt){var zt=Wt.get(jt);zt&&(zt.event.unbindAll(),Yt.remove(zt.scrollbarX),Yt.remove(zt.scrollbarY),Yt.remove(zt.scrollbarXRail),Yt.remove(zt.scrollbarYRail),Ht.removePsClasses(jt),Wt.remove(jt))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17}],9:[function(Bt,Gt){var Ht=Bt("../instances"),Yt=Bt("../update-geometry"),Wt=Bt("../update-scroll");Gt.exports=function(jt){!function(zt,Vt){function qt(Qt){return Qt.getBoundingClientRect()}var Kt=function(Qt){Qt.stopPropagation()};Vt.event.bind(Vt.scrollbarY,"click",Kt),Vt.event.bind(Vt.scrollbarYRail,"click",function(Qt){var Zt=Qt.pageY-window.pageYOffset-qt(Vt.scrollbarYRail).top>Vt.scrollbarYTop?1:-1;Wt(zt,"top",zt.scrollTop+Zt*Vt.containerHeight),Yt(zt),Qt.stopPropagation()}),Vt.event.bind(Vt.scrollbarX,"click",Kt),Vt.event.bind(Vt.scrollbarXRail,"click",function(Qt){var Zt=Qt.pageX-window.pageXOffset-qt(Vt.scrollbarXRail).left>Vt.scrollbarXLeft?1:-1;Wt(zt,"left",zt.scrollLeft+Zt*Vt.containerWidth),Yt(zt),Qt.stopPropagation()})}(jt,Ht.get(jt))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],10:[function(Bt,Gt){function Ht(Kt,Qt){var Zt=null,Jt=null,$t=function(tn){!function(nn){var rn=Zt+nn*Qt.railXRatio,an=Math.max(0,Qt.scrollbarXRail.getBoundingClientRect().left)+Qt.railXRatio*(Qt.railXWidth-Qt.scrollbarXWidth);Qt.scrollbarXLeft=0>rn?0:rn>an?an:rn;var on=Wt.toInt(Qt.scrollbarXLeft*(Qt.contentWidth-Qt.containerWidth)/(Qt.containerWidth-Qt.railXRatio*Qt.scrollbarXWidth))-Qt.negativeScrollAdjustment;qt(Kt,"left",on)}(tn.pageX-Jt),Vt(Kt),tn.stopPropagation(),tn.preventDefault()},en=function(){Wt.stopScrolling(Kt,"x"),Qt.event.unbind(Qt.ownerDocument,"mousemove",$t)};Qt.event.bind(Qt.scrollbarX,"mousedown",function(tn){Jt=tn.pageX,Zt=Wt.toInt(jt.css(Qt.scrollbarX,"left"))*Qt.railXRatio,Wt.startScrolling(Kt,"x"),Qt.event.bind(Qt.ownerDocument,"mousemove",$t),Qt.event.once(Qt.ownerDocument,"mouseup",en),tn.stopPropagation(),tn.preventDefault()})}function Yt(Kt,Qt){var Zt=null,Jt=null,$t=function(tn){!function(nn){var rn=Zt+nn*Qt.railYRatio,an=Math.max(0,Qt.scrollbarYRail.getBoundingClientRect().top)+Qt.railYRatio*(Qt.railYHeight-Qt.scrollbarYHeight);Qt.scrollbarYTop=0>rn?0:rn>an?an:rn;var on=Wt.toInt(Qt.scrollbarYTop*(Qt.contentHeight-Qt.containerHeight)/(Qt.containerHeight-Qt.railYRatio*Qt.scrollbarYHeight));qt(Kt,"top",on)}(tn.pageY-Jt),Vt(Kt),tn.stopPropagation(),tn.preventDefault()},en=function(){Wt.stopScrolling(Kt,"y"),Qt.event.unbind(Qt.ownerDocument,"mousemove",$t)};Qt.event.bind(Qt.scrollbarY,"mousedown",function(tn){Jt=tn.pageY,Zt=Wt.toInt(jt.css(Qt.scrollbarY,"top"))*Qt.railYRatio,Wt.startScrolling(Kt,"y"),Qt.event.bind(Qt.ownerDocument,"mousemove",$t),Qt.event.once(Qt.ownerDocument,"mouseup",en),tn.stopPropagation(),tn.preventDefault()})}var Wt=Bt("../../lib/helper"),jt=Bt("../../lib/dom"),zt=Bt("../instances"),Vt=Bt("../update-geometry"),qt=Bt("../update-scroll");Gt.exports=function(Kt){var Qt=zt.get(Kt);Ht(Kt,Qt),Yt(Kt,Qt)}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],11:[function(Bt,Gt){function Ht(qt,Kt){var Qt=!1;Kt.event.bind(qt,"mouseenter",function(){Qt=!0}),Kt.event.bind(qt,"mouseleave",function(){Qt=!1});var Zt=!1;Kt.event.bind(Kt.ownerDocument,"keydown",function(Jt){if(!(Jt.isDefaultPrevented&&Jt.isDefaultPrevented()||Jt.defaultPrevented)){var $t=Wt.matches(Kt.scrollbarX,":focus")||Wt.matches(Kt.scrollbarY,":focus");if(Qt||$t){var en=document.activeElement?document.activeElement:Kt.ownerDocument.activeElement;if(en){if("IFRAME"===en.tagName)en=en.contentDocument.activeElement;else for(;en.shadowRoot;)en=en.shadowRoot.activeElement;if(Yt.isEditable(en))return}var tn=0,nn=0;switch(Jt.which){case 37:tn=Jt.metaKey?-Kt.contentWidth:Jt.altKey?-Kt.containerWidth:-30;break;case 38:nn=Jt.metaKey?Kt.contentHeight:Jt.altKey?Kt.containerHeight:30;break;case 39:tn=Jt.metaKey?Kt.contentWidth:Jt.altKey?Kt.containerWidth:30;break;case 40:nn=Jt.metaKey?-Kt.contentHeight:Jt.altKey?-Kt.containerHeight:-30;break;case 33:nn=90;break;case 32:nn=Jt.shiftKey?90:-90;break;case 34:nn=-90;break;case 35:nn=Jt.ctrlKey?-Kt.contentHeight:-Kt.containerHeight;break;case 36:nn=Jt.ctrlKey?qt.scrollTop:Kt.containerHeight;break;default:return;}Vt(qt,"top",qt.scrollTop-nn),Vt(qt,"left",qt.scrollLeft+tn),zt(qt),(Zt=function(rn,an){var on=qt.scrollTop;if(0===rn){if(!Kt.scrollbarYActive)return!1;if(0===on&&0<an||on>=Kt.contentHeight-Kt.containerHeight&&0>an)return!Kt.settings.wheelPropagation}var sn=qt.scrollLeft;if(0===an){if(!Kt.scrollbarXActive)return!1;if(0===sn&&0>rn||sn>=Kt.contentWidth-Kt.containerWidth&&0<rn)return!Kt.settings.wheelPropagation}return!0}(tn,nn))&&Jt.preventDefault()}}})}var Yt=Bt("../../lib/helper"),Wt=Bt("../../lib/dom"),jt=Bt("../instances"),zt=Bt("../update-geometry"),Vt=Bt("../update-scroll");Gt.exports=function(qt){Ht(qt,jt.get(qt))}},{"../../lib/dom":2,"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],12:[function(Bt,Gt){function Ht(zt,Vt){function qt(Qt){var Zt=function(en){var tn=en.deltaX,nn=-1*en.deltaY;return void 0!==tn&&void 0!==nn||(tn=-1*en.wheelDeltaX/6,nn=en.wheelDeltaY/6),en.deltaMode&&1===en.deltaMode&&(tn*=10,nn*=10),tn!=tn&&nn!=nn&&(tn=0,nn=en.wheelDelta),en.shiftKey?[-nn,-tn]:[tn,nn]}(Qt),Jt=Zt[0],$t=Zt[1];(function(en,tn){var nn=zt.querySelector("textarea:hover, select[multiple]:hover, .ps-child:hover");if(nn){var rn=window.getComputedStyle(nn);if(![rn.overflow,rn.overflowX,rn.overflowY].join("").match(/(scroll|auto)/))return!1;var an=nn.scrollHeight-nn.clientHeight;if(0<an&&!(0===nn.scrollTop&&0<tn||nn.scrollTop===an&&0>tn))return!0;var on=nn.scrollLeft-nn.clientWidth;if(0<on&&!(0===nn.scrollLeft&&0>en||nn.scrollLeft===on&&0<en))return!0}return!1})(Jt,$t)||(Kt=!1,Vt.settings.useBothWheelAxes?Vt.scrollbarYActive&&!Vt.scrollbarXActive?($t?jt(zt,"top",zt.scrollTop-$t*Vt.settings.wheelSpeed):jt(zt,"top",zt.scrollTop+Jt*Vt.settings.wheelSpeed),Kt=!0):Vt.scrollbarXActive&&!Vt.scrollbarYActive&&(Jt?jt(zt,"left",zt.scrollLeft+Jt*Vt.settings.wheelSpeed):jt(zt,"left",zt.scrollLeft-$t*Vt.settings.wheelSpeed),Kt=!0):(jt(zt,"top",zt.scrollTop-$t*Vt.settings.wheelSpeed),jt(zt,"left",zt.scrollLeft+Jt*Vt.settings.wheelSpeed)),Wt(zt),(Kt=Kt||function(en,tn){var nn=zt.scrollTop;if(0===en){if(!Vt.scrollbarYActive)return!1;if(0===nn&&0<tn||nn>=Vt.contentHeight-Vt.containerHeight&&0>tn)return!Vt.settings.wheelPropagation}var rn=zt.scrollLeft;if(0===tn){if(!Vt.scrollbarXActive)return!1;if(0===rn&&0>en||rn>=Vt.contentWidth-Vt.containerWidth&&0<en)return!Vt.settings.wheelPropagation}return!0}(Jt,$t))&&(Qt.stopPropagation(),Qt.preventDefault()))}var Kt=!1;void 0===window.onwheel?void 0!==window.onmousewheel&&Vt.event.bind(zt,"mousewheel",qt):Vt.event.bind(zt,"wheel",qt)}var Yt=Bt("../instances"),Wt=Bt("../update-geometry"),jt=Bt("../update-scroll");Gt.exports=function(zt){Ht(zt,Yt.get(zt))}},{"../instances":17,"../update-geometry":18,"../update-scroll":19}],13:[function(Bt,Gt){var Ht=Bt("../instances"),Yt=Bt("../update-geometry");Gt.exports=function(Wt){!function(jt,zt){zt.event.bind(jt,"scroll",function(){Yt(jt)})}(Wt,Ht.get(Wt))}},{"../instances":17,"../update-geometry":18}],14:[function(Bt,Gt){function Ht(Vt,qt){function Kt(){Qt&&(clearInterval(Qt),Qt=null),Yt.stopScrolling(Vt)}var Qt=null,Zt={top:0,left:0},Jt=!1;qt.event.bind(qt.ownerDocument,"selectionchange",function(){Vt.contains(function(){var $t=window.getSelection?window.getSelection():document.getSelection?document.getSelection():"";return 0===$t.toString().length?null:$t.getRangeAt(0).commonAncestorContainer}())?Jt=!0:(Jt=!1,Kt())}),qt.event.bind(window,"mouseup",function(){Jt&&(Jt=!1,Kt())}),qt.event.bind(window,"keyup",function(){Jt&&(Jt=!1,Kt())}),qt.event.bind(window,"mousemove",function($t){if(Jt){var en={x:$t.pageX,y:$t.pageY},tn={left:Vt.offsetLeft,right:Vt.offsetLeft+Vt.offsetWidth,top:Vt.offsetTop,bottom:Vt.offsetTop+Vt.offsetHeight};en.x<tn.left+3?(Zt.left=-5,Yt.startScrolling(Vt,"x")):en.x>tn.right-3?(Zt.left=5,Yt.startScrolling(Vt,"x")):Zt.left=0,en.y<tn.top+3?(Zt.top=5>tn.top+3-en.y?-5:-20,Yt.startScrolling(Vt,"y")):en.y>tn.bottom-3?(Zt.top=5>en.y-tn.bottom+3?5:20,Yt.startScrolling(Vt,"y")):Zt.top=0,0===Zt.top&&0===Zt.left?Kt():Qt||(Qt=setInterval(function(){Wt.get(Vt)?(zt(Vt,"top",Vt.scrollTop+Zt.top),zt(Vt,"left",Vt.scrollLeft+Zt.left),jt(Vt)):clearInterval(Qt)},50))}})}var Yt=Bt("../../lib/helper"),Wt=Bt("../instances"),jt=Bt("../update-geometry"),zt=Bt("../update-scroll");Gt.exports=function(Vt){Ht(Vt,Wt.get(Vt))}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],15:[function(Bt,Gt){function Ht(Vt,qt,Kt,Qt){function Zt(cn,hn){zt(Vt,"top",Vt.scrollTop-hn),zt(Vt,"left",Vt.scrollLeft-cn),jt(Vt)}function Jt(){un=!0}function $t(){un=!1}function en(cn){return cn.targetTouches?cn.targetTouches[0]:cn}function tn(cn){return(!cn.pointerType||"pen"!==cn.pointerType||0!==cn.buttons)&&(cn.targetTouches&&1===cn.targetTouches.length||cn.pointerType&&"mouse"!==cn.pointerType&&cn.pointerType!==cn.MSPOINTER_TYPE_MOUSE)}function nn(cn){if(tn(cn)){pn=!0;var hn=en(cn);on.pageX=hn.pageX,on.pageY=hn.pageY,sn=new Date().getTime(),null!==ln&&clearInterval(ln),cn.stopPropagation()}}function rn(cn){if(!pn&&qt.settings.swipePropagation&&nn(cn),!un&&pn&&tn(cn)){var hn=en(cn),fn={pageX:hn.pageX,pageY:hn.pageY},gn=fn.pageX-on.pageX,mn=fn.pageY-on.pageY;Zt(gn,mn),on=fn;var yn=new Date().getTime(),_n=yn-sn;0<_n&&(dn.x=gn/_n,dn.y=mn/_n,sn=yn),function(bn,xn){var vn=Vt.scrollTop,Tn=Vt.scrollLeft,Sn=Math.abs(bn),En=Math.abs(xn);if(En>Sn){if(0>xn&&vn===qt.contentHeight-qt.containerHeight||0<xn&&0===vn)return!qt.settings.swipePropagation;}else if(Sn>En&&(0>bn&&Tn===qt.contentWidth-qt.containerWidth||0<bn&&0===Tn))return!qt.settings.swipePropagation;return!0}(gn,mn)&&(cn.stopPropagation(),cn.preventDefault())}}function an(){!un&&pn&&(pn=!1,qt.settings.swipeEasing&&(clearInterval(ln),ln=setInterval(function(){Wt.get(Vt)&&(dn.x||dn.y)?.01>Math.abs(dn.x)&&.01>Math.abs(dn.y)?clearInterval(ln):(Zt(30*dn.x,30*dn.y),dn.x*=.8,dn.y*=.8):clearInterval(ln)},10)))}var on={},sn=0,dn={},ln=null,un=!1,pn=!1;Kt?(qt.event.bind(window,"touchstart",Jt),qt.event.bind(window,"touchend",$t),qt.event.bind(Vt,"touchstart",nn),qt.event.bind(Vt,"touchmove",rn),qt.event.bind(Vt,"touchend",an)):Qt&&(window.PointerEvent?(qt.event.bind(window,"pointerdown",Jt),qt.event.bind(window,"pointerup",$t),qt.event.bind(Vt,"pointerdown",nn),qt.event.bind(Vt,"pointermove",rn),qt.event.bind(Vt,"pointerup",an)):window.MSPointerEvent&&(qt.event.bind(window,"MSPointerDown",Jt),qt.event.bind(window,"MSPointerUp",$t),qt.event.bind(Vt,"MSPointerDown",nn),qt.event.bind(Vt,"MSPointerMove",rn),qt.event.bind(Vt,"MSPointerUp",an)))}var Yt=Bt("../../lib/helper"),Wt=Bt("../instances"),jt=Bt("../update-geometry"),zt=Bt("../update-scroll");Gt.exports=function(Vt){(Yt.env.supportsTouch||Yt.env.supportsIePointer)&&Ht(Vt,Wt.get(Vt),Yt.env.supportsTouch,Yt.env.supportsIePointer)}},{"../../lib/helper":5,"../instances":17,"../update-geometry":18,"../update-scroll":19}],16:[function(Bt,Gt){var Ht=Bt("./instances"),Yt=Bt("./update-geometry"),Wt={"click-rail":Bt("./handler/click-rail"),"drag-scrollbar":Bt("./handler/drag-scrollbar"),keyboard:Bt("./handler/keyboard"),wheel:Bt("./handler/mouse-wheel"),touch:Bt("./handler/touch"),selection:Bt("./handler/selection")},jt=Bt("./handler/native-scroll");Gt.exports=function(zt,Vt){zt.classList.add("ps");var qt=Ht.add(zt,"object"==typeof Vt?Vt:{});zt.classList.add("ps--theme_"+qt.settings.theme),qt.settings.handlers.forEach(function(Kt){Wt[Kt](zt)}),jt(zt),Yt(zt)}},{"./handler/click-rail":9,"./handler/drag-scrollbar":10,"./handler/keyboard":11,"./handler/mouse-wheel":12,"./handler/native-scroll":13,"./handler/selection":14,"./handler/touch":15,"./instances":17,"./update-geometry":18}],17:[function(Bt,Gt,Xt){function Ht(Kt){return Kt.getAttribute("data-ps-id")}var Yt=Bt("../lib/helper"),Wt=Bt("./default-setting"),jt=Bt("../lib/dom"),zt=Bt("../lib/event-manager"),Vt=Bt("../lib/guid"),qt={};Xt.add=function(Kt,Qt){var Zt=Vt();return function(Jt,$t){Jt.setAttribute("data-ps-id",$t)}(Kt,Zt),qt[Zt]=new function(Jt,$t){function en(){Jt.classList.add("ps--focus")}function tn(){Jt.classList.remove("ps--focus")}for(var nn in this.settings=Wt(),$t)this.settings[nn]=$t[nn];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null,this.isRtl="rtl"===jt.css(Jt,"direction"),this.isNegativeScroll=function(){var rn=Jt.scrollLeft,an=null;return Jt.scrollLeft=-1,an=0>Jt.scrollLeft,Jt.scrollLeft=rn,an}(),this.negativeScrollAdjustment=this.isNegativeScroll?Jt.scrollWidth-Jt.clientWidth:0,this.event=new zt,this.ownerDocument=Jt.ownerDocument||document,this.scrollbarXRail=jt.appendTo(jt.create("div","ps__scrollbar-x-rail"),Jt),this.scrollbarX=jt.appendTo(jt.create("div","ps__scrollbar-x"),this.scrollbarXRail),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",en),this.event.bind(this.scrollbarX,"blur",tn),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null,this.scrollbarXBottom=Yt.toInt(jt.css(this.scrollbarXRail,"bottom")),this.isScrollbarXUsingBottom=this.scrollbarXBottom==this.scrollbarXBottom,this.scrollbarXTop=this.isScrollbarXUsingBottom?null:Yt.toInt(jt.css(this.scrollbarXRail,"top")),this.railBorderXWidth=Yt.toInt(jt.css(this.scrollbarXRail,"borderLeftWidth"))+Yt.toInt(jt.css(this.scrollbarXRail,"borderRightWidth")),jt.css(this.scrollbarXRail,"display","block"),this.railXMarginWidth=Yt.toInt(jt.css(this.scrollbarXRail,"marginLeft"))+Yt.toInt(jt.css(this.scrollbarXRail,"marginRight")),jt.css(this.scrollbarXRail,"display",""),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=jt.appendTo(jt.create("div","ps__scrollbar-y-rail"),Jt),this.scrollbarY=jt.appendTo(jt.create("div","ps__scrollbar-y"),this.scrollbarYRail),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",en),this.event.bind(this.scrollbarY,"blur",tn),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null,this.scrollbarYRight=Yt.toInt(jt.css(this.scrollbarYRail,"right")),this.isScrollbarYUsingRight=this.scrollbarYRight==this.scrollbarYRight,this.scrollbarYLeft=this.isScrollbarYUsingRight?null:Yt.toInt(jt.css(this.scrollbarYRail,"left")),this.scrollbarYOuterWidth=this.isRtl?Yt.outerWidth(this.scrollbarY):null,this.railBorderYWidth=Yt.toInt(jt.css(this.scrollbarYRail,"borderTopWidth"))+Yt.toInt(jt.css(this.scrollbarYRail,"borderBottomWidth")),jt.css(this.scrollbarYRail,"display","block"),this.railYMarginHeight=Yt.toInt(jt.css(this.scrollbarYRail,"marginTop"))+Yt.toInt(jt.css(this.scrollbarYRail,"marginBottom")),jt.css(this.scrollbarYRail,"display",""),this.railYHeight=null,this.railYRatio=null}(Kt,Qt),qt[Zt]},Xt.remove=function(Kt){delete qt[Ht(Kt)],function(Qt){Qt.removeAttribute("data-ps-id")}(Kt)},Xt.get=function(Kt){return qt[Ht(Kt)]}},{"../lib/dom":2,"../lib/event-manager":3,"../lib/guid":4,"../lib/helper":5,"./default-setting":7}],18:[function(Bt,Gt){function Ht(Vt,qt){return Vt.settings.minScrollbarLength&&(qt=Math.max(qt,Vt.settings.minScrollbarLength)),Vt.settings.maxScrollbarLength&&(qt=Math.min(qt,Vt.settings.maxScrollbarLength)),qt}var Yt=Bt("../lib/helper"),Wt=Bt("../lib/dom"),jt=Bt("./instances"),zt=Bt("./update-scroll");Gt.exports=function(Vt){var qt=jt.get(Vt);qt.containerWidth=Vt.clientWidth,qt.containerHeight=Vt.clientHeight,qt.contentWidth=Vt.scrollWidth,qt.contentHeight=Vt.scrollHeight;var Kt;Vt.contains(qt.scrollbarXRail)||(0<(Kt=Wt.queryChildren(Vt,".ps__scrollbar-x-rail")).length&&Kt.forEach(function(Qt){Wt.remove(Qt)}),Wt.appendTo(qt.scrollbarXRail,Vt)),Vt.contains(qt.scrollbarYRail)||(0<(Kt=Wt.queryChildren(Vt,".ps__scrollbar-y-rail")).length&&Kt.forEach(function(Qt){Wt.remove(Qt)}),Wt.appendTo(qt.scrollbarYRail,Vt)),!qt.settings.suppressScrollX&&qt.containerWidth+qt.settings.scrollXMarginOffset<qt.contentWidth?(qt.scrollbarXActive=!0,qt.railXWidth=qt.containerWidth-qt.railXMarginWidth,qt.railXRatio=qt.containerWidth/qt.railXWidth,qt.scrollbarXWidth=Ht(qt,Yt.toInt(qt.railXWidth*qt.containerWidth/qt.contentWidth)),qt.scrollbarXLeft=Yt.toInt((qt.negativeScrollAdjustment+Vt.scrollLeft)*(qt.railXWidth-qt.scrollbarXWidth)/(qt.contentWidth-qt.containerWidth))):qt.scrollbarXActive=!1,!qt.settings.suppressScrollY&&qt.containerHeight+qt.settings.scrollYMarginOffset<qt.contentHeight?(qt.scrollbarYActive=!0,qt.railYHeight=qt.containerHeight-qt.railYMarginHeight,qt.railYRatio=qt.containerHeight/qt.railYHeight,qt.scrollbarYHeight=Ht(qt,Yt.toInt(qt.railYHeight*qt.containerHeight/qt.contentHeight)),qt.scrollbarYTop=Yt.toInt(Vt.scrollTop*(qt.railYHeight-qt.scrollbarYHeight)/(qt.contentHeight-qt.containerHeight))):qt.scrollbarYActive=!1,qt.scrollbarXLeft>=qt.railXWidth-qt.scrollbarXWidth&&(qt.scrollbarXLeft=qt.railXWidth-qt.scrollbarXWidth),qt.scrollbarYTop>=qt.railYHeight-qt.scrollbarYHeight&&(qt.scrollbarYTop=qt.railYHeight-qt.scrollbarYHeight),function(Qt,Zt){var Jt={width:Zt.railXWidth};Jt.left=Zt.isRtl?Zt.negativeScrollAdjustment+Qt.scrollLeft+Zt.containerWidth-Zt.contentWidth:Qt.scrollLeft,Zt.isScrollbarXUsingBottom?Jt.bottom=Zt.scrollbarXBottom-Qt.scrollTop:Jt.top=Zt.scrollbarXTop+Qt.scrollTop,Wt.css(Zt.scrollbarXRail,Jt);var $t={top:Qt.scrollTop,height:Zt.railYHeight};Zt.isScrollbarYUsingRight?Zt.isRtl?$t.right=Zt.contentWidth-(Zt.negativeScrollAdjustment+Qt.scrollLeft)-Zt.scrollbarYRight-Zt.scrollbarYOuterWidth:$t.right=Zt.scrollbarYRight-Qt.scrollLeft:Zt.isRtl?$t.left=Zt.negativeScrollAdjustment+Qt.scrollLeft+2*Zt.containerWidth-Zt.contentWidth-Zt.scrollbarYLeft-Zt.scrollbarYOuterWidth:$t.left=Zt.scrollbarYLeft+Qt.scrollLeft,Wt.css(Zt.scrollbarYRail,$t),Wt.css(Zt.scrollbarX,{left:Zt.scrollbarXLeft,width:Zt.scrollbarXWidth-Zt.railBorderXWidth}),Wt.css(Zt.scrollbarY,{top:Zt.scrollbarYTop,height:Zt.scrollbarYHeight-Zt.railBorderYWidth})}(Vt,qt),qt.scrollbarXActive?Vt.classList.add("ps--active-x"):(Vt.classList.remove("ps--active-x"),qt.scrollbarXWidth=0,qt.scrollbarXLeft=0,zt(Vt,"left",0)),qt.scrollbarYActive?Vt.classList.add("ps--active-y"):(Vt.classList.remove("ps--active-y"),qt.scrollbarYHeight=0,qt.scrollbarYTop=0,zt(Vt,"top",0))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-scroll":19}],19:[function(Bt,Gt){var Ht=Bt("./instances"),Yt=function(Wt){var jt=document.createEvent("Event");return jt.initEvent(Wt,!0,!0),jt};Gt.exports=function(Wt,jt,zt){if(void 0===Wt)throw"You must provide an element to the update-scroll function";if(void 0===jt)throw"You must provide an axis to the update-scroll function";if(void 0===zt)throw"You must provide a value to the update-scroll function";"top"===jt&&0>=zt&&(Wt.scrollTop=zt=0,Wt.dispatchEvent(Yt("ps-y-reach-start"))),"left"===jt&&0>=zt&&(Wt.scrollLeft=zt=0,Wt.dispatchEvent(Yt("ps-x-reach-start")));var Vt=Ht.get(Wt);"top"===jt&&zt>=Vt.contentHeight-Vt.containerHeight&&(2>=(zt=Vt.contentHeight-Vt.containerHeight)-Wt.scrollTop?zt=Wt.scrollTop:Wt.scrollTop=zt,Wt.dispatchEvent(Yt("ps-y-reach-end"))),"left"===jt&&zt>=Vt.contentWidth-Vt.containerWidth&&(2>=(zt=Vt.contentWidth-Vt.containerWidth)-Wt.scrollLeft?zt=Wt.scrollLeft:Wt.scrollLeft=zt,Wt.dispatchEvent(Yt("ps-x-reach-end"))),void 0===Vt.lastTop&&(Vt.lastTop=Wt.scrollTop),void 0===Vt.lastLeft&&(Vt.lastLeft=Wt.scrollLeft),"top"===jt&&zt<Vt.lastTop&&Wt.dispatchEvent(Yt("ps-scroll-up")),"top"===jt&&zt>Vt.lastTop&&Wt.dispatchEvent(Yt("ps-scroll-down")),"left"===jt&&zt<Vt.lastLeft&&Wt.dispatchEvent(Yt("ps-scroll-left")),"left"===jt&&zt>Vt.lastLeft&&Wt.dispatchEvent(Yt("ps-scroll-right")),"top"===jt&&zt!==Vt.lastTop&&(Wt.scrollTop=Vt.lastTop=zt,Wt.dispatchEvent(Yt("ps-scroll-y"))),"left"===jt&&zt!==Vt.lastLeft&&(Wt.scrollLeft=Vt.lastLeft=zt,Wt.dispatchEvent(Yt("ps-scroll-x")))}},{"./instances":17}],20:[function(Bt,Gt){var Ht=Bt("../lib/helper"),Yt=Bt("../lib/dom"),Wt=Bt("./instances"),jt=Bt("./update-geometry"),zt=Bt("./update-scroll");Gt.exports=function(Vt){var qt=Wt.get(Vt);qt&&(qt.negativeScrollAdjustment=qt.isNegativeScroll?Vt.scrollWidth-Vt.clientWidth:0,Yt.css(qt.scrollbarXRail,"display","block"),Yt.css(qt.scrollbarYRail,"display","block"),qt.railXMarginWidth=Ht.toInt(Yt.css(qt.scrollbarXRail,"marginLeft"))+Ht.toInt(Yt.css(qt.scrollbarXRail,"marginRight")),qt.railYMarginHeight=Ht.toInt(Yt.css(qt.scrollbarYRail,"marginTop"))+Ht.toInt(Yt.css(qt.scrollbarYRail,"marginBottom")),Yt.css(qt.scrollbarXRail,"display","none"),Yt.css(qt.scrollbarYRail,"display","none"),jt(Vt),zt(Vt,"top",Vt.scrollTop),zt(Vt,"left",Vt.scrollLeft),Yt.css(qt.scrollbarXRail,"display",""),Yt.css(qt.scrollbarYRail,"display",""))}},{"../lib/dom":2,"../lib/helper":5,"./instances":17,"./update-geometry":18,"./update-scroll":19}]},{},[1]),function(Bt){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Bt():"function"==typeof define&&define.amd?define([],Bt):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).PIXI=Bt()}(function(){return function Bt(Gt,Xt,Ht){function Yt(zt,Vt){if(!Xt[zt]){if(!Gt[zt]){var qt="function"==typeof require&&require;if(!Vt&&qt)return qt(zt,!0);if(Wt)return Wt(zt,!0);var Kt=new Error("Cannot find module '"+zt+"'");throw Kt.code="MODULE_NOT_FOUND",Kt}var Qt=Xt[zt]={exports:{}};Gt[zt][0].call(Qt.exports,function(Zt){var Jt=Gt[zt][1][Zt];return Yt(Jt||Zt)},Qt,Qt.exports,Bt,Gt,Xt,Ht)}return Xt[zt].exports}for(var Wt="function"==typeof require&&require,jt=0;jt<Ht.length;jt++)Yt(Ht[jt]);return Yt}({1:[function(Bt,Gt,Xt){"use restrict";function Ht(Wt){var jt=32;return(Wt&=-Wt)&&jt--,65535&Wt&&(jt-=16),16711935&Wt&&(jt-=8),252645135&Wt&&(jt-=4),858993459&Wt&&(jt-=2),1431655765&Wt&&(jt-=1),jt}Xt.INT_BITS=32,Xt.INT_MAX=2147483647,Xt.INT_MIN=-2147483648,Xt.sign=function(Wt){return(0<Wt)-(0>Wt)},Xt.abs=function(Wt){var jt=Wt>>31;return(Wt^jt)-jt},Xt.min=function(Wt,jt){return jt^(Wt^jt)&-(Wt<jt)},Xt.max=function(Wt,jt){return Wt^(Wt^jt)&-(Wt<jt)},Xt.isPow2=function(Wt){return!(Wt&Wt-1)&&Wt},Xt.log2=function(Wt){var jt,zt;return jt=(65535<Wt)<<4,Wt>>>=jt,zt=(255<Wt)<<3,Wt>>>=zt,jt|=zt,zt=(15<Wt)<<2,Wt>>>=zt,jt|=zt,zt=(3<Wt)<<1,Wt>>>=zt,(jt|=zt)|Wt>>1},Xt.log10=function(Wt){return 1e9<=Wt?9:1e8<=Wt?8:1e7<=Wt?7:1e6<=Wt?6:1e5<=Wt?5:1e4<=Wt?4:1e3<=Wt?3:100<=Wt?2:10<=Wt?1:0},Xt.popCount=function(Wt){return Wt-=1431655765&Wt>>>1,16843009*(252645135&(Wt=(858993459&Wt)+(858993459&Wt>>>2))+(Wt>>>4))>>>24},Xt.countTrailingZeros=Ht,Xt.nextPow2=function(Wt){return Wt+=0===Wt,--Wt,Wt|=Wt>>>1,Wt|=Wt>>>2,Wt|=Wt>>>4,Wt|=Wt>>>8,(Wt|=Wt>>>16)+1},Xt.prevPow2=function(Wt){return Wt|=Wt>>>1,Wt|=Wt>>>2,Wt|=Wt>>>4,Wt|=Wt>>>8,(Wt|=Wt>>>16)-(Wt>>>1)},Xt.parity=function(Wt){return Wt^=Wt>>>16,Wt^=Wt>>>8,Wt^=Wt>>>4,1&27030>>>(Wt&=15)};var Yt=Array(256);!function(Wt){for(var jt=0;256>jt;++jt){var zt=jt,Vt=jt,qt=7;for(zt>>>=1;zt;zt>>>=1)Vt<<=1,Vt|=1&zt,--qt;Wt[jt]=255&Vt<<qt}}(Yt),Xt.reverse=function(Wt){return Yt[255&Wt]<<24|Yt[255&Wt>>>8]<<16|Yt[255&Wt>>>16]<<8|Yt[255&Wt>>>24]},Xt.interleave2=function(Wt,jt){return Wt&=65535,Wt=16711935&(Wt|Wt<<8),Wt=252645135&(Wt|Wt<<4),Wt=858993459&(Wt|Wt<<2),Wt=1431655765&(Wt|Wt<<1),jt&=65535,jt=16711935&(jt|jt<<8),jt=252645135&(jt|jt<<4),jt=858993459&(jt|jt<<2),jt=1431655765&(jt|jt<<1),Wt|jt<<1},Xt.deinterleave2=function(Wt,jt){return Wt=1431655765&Wt>>>jt,Wt=858993459&(Wt|Wt>>>1),Wt=252645135&(Wt|Wt>>>2),Wt=16711935&(Wt|Wt>>>4),(Wt=65535&(Wt|Wt>>>16))<<16>>16},Xt.interleave3=function(Wt,jt,zt){return Wt&=1023,Wt=4278190335&(Wt|Wt<<16),Wt=251719695&(Wt|Wt<<8),Wt=3272356035&(Wt|Wt<<4),Wt=1227133513&(Wt|Wt<<2),jt&=1023,jt=4278190335&(jt|jt<<16),jt=251719695&(jt|jt<<8),jt=3272356035&(jt|jt<<4),jt=1227133513&(jt|jt<<2),Wt|=jt<<1,zt&=1023,zt=4278190335&(zt|zt<<16),zt=251719695&(zt|zt<<8),zt=3272356035&(zt|zt<<4),zt=1227133513&(zt|zt<<2),Wt|zt<<2},Xt.deinterleave3=function(Wt,jt){return Wt=1227133513&Wt>>>jt,Wt=3272356035&(Wt|Wt>>>2),Wt=251719695&(Wt|Wt>>>4),Wt=4278190335&(Wt|Wt>>>8),(Wt=1023&(Wt|Wt>>>16))<<22>>22},Xt.nextCombination=function(Wt){var jt=Wt|Wt-1;return jt+1|(~jt&-~jt)-1>>>Ht(Wt)+1}},{}],2:[function(Bt,Gt){function Ht(an,on,sn){sn=sn||2;var dn=on&&on.length,ln=dn?on[0]*sn:an.length,un=Yt(an,0,ln,sn,!0),pn=[];if(!un)return pn;var cn,hn,fn,gn,mn,yn,_n;if(dn&&(un=function(xn,vn,Tn,Sn){var Mn=[],En,wn,An,Cn,Pn;for(En=0,wn=vn.length;En<wn;En++)An=vn[En]*Sn,Cn=En<wn-1?vn[En+1]*Sn:xn.length,(Pn=Yt(xn,An,Cn,Sn,!1))===Pn.next&&(Pn.steiner=!0),Mn.push(function(Rn){var Dn=Rn,In=Rn;do Dn.x<In.x&&(In=Dn),Dn=Dn.next;while(Dn!==Rn);return In}(Pn));for(Mn.sort(zt),En=0;En<Mn.length;En++)!function(Rn,Dn){if(Dn=function(On,Ln){var Nn=Ln,Fn=On.x,Bn=On.y,Un=-1/0,kn;do{if(Bn<=Nn.y&&Bn>=Nn.next.y){var Gn=Nn.x+(Bn-Nn.y)*(Nn.next.x-Nn.x)/(Nn.next.y-Nn.y);if(Gn<=Fn&&Gn>Un){if(Un=Gn,Gn===Fn){if(Bn===Nn.y)return Nn;if(Bn===Nn.next.y)return Nn.next}kn=Nn.x<Nn.next.x?Nn:Nn.next}}Nn=Nn.next}while(Nn!==Ln);if(!kn)return null;if(Fn===Un)return kn.prev;var Hn=kn,Yn=kn.x,Wn=kn.y,jn=1/0,Xn;for(Nn=kn.next;Nn!==Hn;)Fn>=Nn.x&&Nn.x>=Yn&&qt(Bn<Wn?Fn:Un,Bn,Yn,Wn,Bn<Wn?Un:Fn,Bn,Nn.x,Nn.y)&&((Xn=Math.abs(Bn-Nn.y)/(Fn-Nn.x))<jn||Xn===jn&&Nn.x>kn.x)&&Jt(Nn,On)&&(kn=Nn,jn=Xn),Nn=Nn.next;return kn}(Rn,Dn)){var In=$t(Dn,Rn);Wt(In,In.next)}}(Mn[En],Tn),Tn=Wt(Tn,Tn.next);return Tn}(an,on,un,sn)),an.length>80*sn){cn=fn=an[0],hn=gn=an[1];for(var bn=sn;bn<ln;bn+=sn)mn=an[bn],yn=an[bn+1],mn<cn&&(cn=mn),yn<hn&&(hn=yn),mn>fn&&(fn=mn),yn>gn&&(gn=yn);_n=Math.max(fn-cn,gn-hn)}return jt(un,pn,sn,cn,hn,_n),pn}function Yt(an,on,sn,dn,ln){var un,pn;if(ln===0<rn(an,on,sn,dn))for(un=on;un<sn;un+=dn)pn=en(un,an[un],an[un+1],pn);else for(un=sn-dn;un>=on;un-=dn)pn=en(un,an[un],an[un+1],pn);return pn&&Qt(pn,pn.next)&&(tn(pn),pn=pn.next),pn}function Wt(an,on){if(!an)return an;on||(on=an);var dn=an,sn;do if(sn=!1,dn.steiner||!Qt(dn,dn.next)&&0!==Kt(dn.prev,dn,dn.next))dn=dn.next;else{if(tn(dn),(dn=on=dn.prev)===dn.next)return null;sn=!0}while(sn||dn!==on);return on}function jt(an,on,sn,dn,ln,un,pn){if(an){!pn&&un&&function(gn,mn,yn,_n){var bn=gn;do null===bn.z&&(bn.z=Vt(bn.x,bn.y,mn,yn,_n)),bn.prevZ=bn.prev,bn.nextZ=bn.next,bn=bn.next;while(bn!==gn);bn.prevZ.nextZ=null,bn.prevZ=null,function(xn){var Mn=1,vn,Tn,Sn,En,wn,An,Cn,Pn;do{for(Tn=xn,xn=null,wn=null,An=0;Tn;){for(An++,Sn=Tn,Cn=0,vn=0;vn<Mn&&(Cn++,Sn=Sn.nextZ);vn++);for(Pn=Mn;0<Cn||0<Pn&&Sn;)0===Cn?(En=Sn,Sn=Sn.nextZ,Pn--):0!==Pn&&Sn?Tn.z<=Sn.z?(En=Tn,Tn=Tn.nextZ,Cn--):(En=Sn,Sn=Sn.nextZ,Pn--):(En=Tn,Tn=Tn.nextZ,Cn--),wn?wn.nextZ=En:xn=En,En.prevZ=wn,wn=En;Tn=Sn}wn.nextZ=null,Mn*=2}while(1<An)}(bn)}(an,dn,ln,un);for(var fn=an,cn,hn;an.prev!==an.next;)if(cn=an.prev,hn=an.next,un?function(gn,mn,yn,_n){var bn=gn.prev,xn=gn,vn=gn.next;if(0<=Kt(bn,xn,vn))return!1;for(var Tn=bn.x<xn.x?bn.x<vn.x?bn.x:vn.x:xn.x<vn.x?xn.x:vn.x,Sn=bn.y<xn.y?bn.y<vn.y?bn.y:vn.y:xn.y<vn.y?xn.y:vn.y,En=bn.x>xn.x?bn.x>vn.x?bn.x:vn.x:xn.x>vn.x?xn.x:vn.x,wn=bn.y>xn.y?bn.y>vn.y?bn.y:vn.y:xn.y>vn.y?xn.y:vn.y,An=Vt(Tn,Sn,mn,yn,_n),Cn=Vt(En,wn,mn,yn,_n),Pn=gn.nextZ;Pn&&Pn.z<=Cn;){if(Pn!==gn.prev&&Pn!==gn.next&&qt(bn.x,bn.y,xn.x,xn.y,vn.x,vn.y,Pn.x,Pn.y)&&0<=Kt(Pn.prev,Pn,Pn.next))return!1;Pn=Pn.nextZ}for(Pn=gn.prevZ;Pn&&Pn.z>=An;){if(Pn!==gn.prev&&Pn!==gn.next&&qt(bn.x,bn.y,xn.x,xn.y,vn.x,vn.y,Pn.x,Pn.y)&&0<=Kt(Pn.prev,Pn,Pn.next))return!1;Pn=Pn.prevZ}return!0}(an,dn,ln,un):function(gn){var mn=gn.prev,yn=gn,_n=gn.next;if(0<=Kt(mn,yn,_n))return!1;for(var bn=gn.next.next;bn!==gn.prev;){if(qt(mn.x,mn.y,yn.x,yn.y,_n.x,_n.y,bn.x,bn.y)&&0<=Kt(bn.prev,bn,bn.next))return!1;bn=bn.next}return!0}(an))on.push(cn.i/sn),on.push(an.i/sn),on.push(hn.i/sn),tn(an),an=hn.next,fn=hn.next;else if((an=hn)===fn){pn?1===pn?jt(an=function(gn,mn,yn){var _n=gn;do{var bn=_n.prev,xn=_n.next.next;!Qt(bn,xn)&&Zt(bn,_n,_n.next,xn)&&Jt(bn,xn)&&Jt(xn,bn)&&(mn.push(bn.i/yn),mn.push(_n.i/yn),mn.push(xn.i/yn),tn(_n),tn(_n.next),_n=gn=xn),_n=_n.next}while(_n!==gn);return _n}(an,on,sn),on,sn,dn,ln,un,2):2==pn&&function(gn,mn,yn,_n,bn,xn){var vn=gn;do{for(var Tn=vn.next.next;Tn!==vn.prev;){if(vn.i!==Tn.i&&function(En,wn){return En.next.i!==wn.i&&En.prev.i!==wn.i&&!function(An,Cn){var Pn=An;do{if(Pn.i!==An.i&&Pn.next.i!==An.i&&Pn.i!==Cn.i&&Pn.next.i!==Cn.i&&Zt(Pn,Pn.next,An,Cn))return!0;Pn=Pn.next}while(Pn!==An);return!1}(En,wn)&&Jt(En,wn)&&Jt(wn,En)&&function(An,Cn){var Pn=An,Mn=!1,Rn=(An.x+Cn.x)/2,Dn=(An.y+Cn.y)/2;do Pn.y>Dn!=Pn.next.y>Dn&&Rn<(Pn.next.x-Pn.x)*(Dn-Pn.y)/(Pn.next.y-Pn.y)+Pn.x&&(Mn=!Mn),Pn=Pn.next;while(Pn!==An);return Mn}(En,wn)}(vn,Tn)){var Sn=$t(vn,Tn);return vn=Wt(vn,vn.next),Sn=Wt(Sn,Sn.next),jt(vn,mn,yn,_n,bn,xn),void jt(Sn,mn,yn,_n,bn,xn)}Tn=Tn.next}vn=vn.next}while(vn!==gn)}(an,on,sn,dn,ln,un):jt(Wt(an),on,sn,dn,ln,un,1);break}}}function zt(an,on){return an.x-on.x}function Vt(an,on,sn,dn,ln){return an=32767*(an-sn)/ln,on=32767*(on-dn)/ln,an=16711935&(an|an<<8),an=252645135&(an|an<<4),an=858993459&(an|an<<2),an=1431655765&(an|an<<1),on=16711935&(on|on<<8),on=252645135&(on|on<<4),on=858993459&(on|on<<2),on=1431655765&(on|on<<1),an|on<<1}function qt(an,on,sn,dn,ln,un,pn,cn){return 0<=(ln-pn)*(on-cn)-(an-pn)*(un-cn)&&0<=(an-pn)*(dn-cn)-(sn-pn)*(on-cn)&&0<=(sn-pn)*(un-cn)-(ln-pn)*(dn-cn)}function Kt(an,on,sn){return(on.y-an.y)*(sn.x-on.x)-(on.x-an.x)*(sn.y-on.y)}function Qt(an,on){return an.x===on.x&&an.y===on.y}function Zt(an,on,sn,dn){return!!(Qt(an,on)&&Qt(sn,dn)||Qt(an,dn)&&Qt(sn,on))||0<Kt(an,on,sn)!=0<Kt(an,on,dn)&&0<Kt(sn,dn,an)!=0<Kt(sn,dn,on)}function Jt(an,on){return 0>Kt(an.prev,an,an.next)?0<=Kt(an,on,an.next)&&0<=Kt(an,an.prev,on):0>Kt(an,on,an.prev)||0>Kt(an,an.next,on)}function $t(an,on){var sn=new nn(an.i,an.x,an.y),dn=new nn(on.i,on.x,on.y),ln=an.next,un=on.prev;return an.next=on,on.prev=an,sn.next=ln,ln.prev=sn,dn.next=sn,sn.prev=dn,un.next=dn,dn.prev=un,dn}function en(an,on,sn,dn){var ln=new nn(an,on,sn);return dn?(ln.next=dn.next,ln.prev=dn,dn.next.prev=ln,dn.next=ln):(ln.prev=ln,ln.next=ln),ln}function tn(an){an.next.prev=an.prev,an.prev.next=an.next,an.prevZ&&(an.prevZ.nextZ=an.nextZ),an.nextZ&&(an.nextZ.prevZ=an.prevZ)}function nn(an,on,sn){this.i=an,this.x=on,this.y=sn,this.prev=null,this.next=null,this.z=null,this.prevZ=null,this.nextZ=null,this.steiner=!1}function rn(an,on,sn,dn){for(var ln=0,un=on,pn=sn-dn;un<sn;un+=dn)ln+=(an[pn]-an[un])*(an[un+1]+an[pn+1]),pn=un;return ln}Gt.exports=Ht,Ht.deviation=function(an,on,sn,dn){var ln=on&&on.length,un=ln?on[0]*sn:an.length,pn=Math.abs(rn(an,0,un,sn));if(ln)for(var cn=0,hn=on.length;cn<hn;cn++){var fn=on[cn]*sn,gn=cn<hn-1?on[cn+1]*sn:an.length;pn-=Math.abs(rn(an,fn,gn,sn))}var mn=0;for(cn=0;cn<dn.length;cn+=3){var yn=dn[cn]*sn,_n=dn[cn+1]*sn,bn=dn[cn+2]*sn;mn+=Math.abs((an[yn]-an[bn])*(an[_n+1]-an[yn+1])-(an[yn]-an[_n])*(an[bn+1]-an[yn+1]))}return 0===pn&&0===mn?0:Math.abs((mn-pn)/pn)},Ht.flatten=function(an){for(var on=an[0][0].length,sn={vertices:[],holes:[],dimensions:on},dn=0,ln=0;ln<an.length;ln++){for(var un=0;un<an[ln].length;un++)for(var pn=0;pn<on;pn++)sn.vertices.push(an[ln][un][pn]);0<ln&&(dn+=an[ln-1].length,sn.holes.push(dn))}return sn}},{}],3:[function(Bt,Gt){function Ht(){}function Yt(Vt,qt,Kt){this.fn=Vt,this.context=qt,this.once=Kt||!1}function Wt(){this._events=new Ht,this._eventsCount=0}var jt=Object.prototype.hasOwnProperty,zt="~";Object.create&&(Ht.prototype=Object.create(null),new Ht().__proto__||(zt=!1)),Wt.prototype.eventNames=function(){var Kt=[],Vt,qt;if(0===this._eventsCount)return Kt;for(qt in Vt=this._events)jt.call(Vt,qt)&&Kt.push(zt?qt.slice(1):qt);return Object.getOwnPropertySymbols?Kt.concat(Object.getOwnPropertySymbols(Vt)):Kt},Wt.prototype.listeners=function(Vt,qt){var Kt=zt?zt+Vt:Vt,Qt=this._events[Kt];if(qt)return!!Qt;if(!Qt)return[];if(Qt.fn)return[Qt.fn];for(var Zt=0,Jt=Qt.length,$t=Array(Jt);Zt<Jt;Zt++)$t[Zt]=Qt[Zt].fn;return $t},Wt.prototype.emit=function(Vt,qt,Kt,Qt,Zt,Jt){var $t=zt?zt+Vt:Vt;if(!this._events[$t])return!1;var nn=this._events[$t],rn=arguments.length,en,tn;if(nn.fn){switch(nn.once&&this.removeListener(Vt,nn.fn,void 0,!0),rn){case 1:return nn.fn.call(nn.context),!0;case 2:return nn.fn.call(nn.context,qt),!0;case 3:return nn.fn.call(nn.context,qt,Kt),!0;case 4:return nn.fn.call(nn.context,qt,Kt,Qt),!0;case 5:return nn.fn.call(nn.context,qt,Kt,Qt,Zt),!0;case 6:return nn.fn.call(nn.context,qt,Kt,Qt,Zt,Jt),!0;}for(tn=1,en=Array(rn-1);tn<rn;tn++)en[tn-1]=arguments[tn];nn.fn.apply(nn.context,en)}else{var on=nn.length,an;for(tn=0;tn<on;tn++)switch(nn[tn].once&&this.removeListener(Vt,nn[tn].fn,void 0,!0),rn){case 1:nn[tn].fn.call(nn[tn].context);break;case 2:nn[tn].fn.call(nn[tn].context,qt);break;case 3:nn[tn].fn.call(nn[tn].context,qt,Kt);break;case 4:nn[tn].fn.call(nn[tn].context,qt,Kt,Qt);break;default:if(!en)for(an=1,en=Array(rn-1);an<rn;an++)en[an-1]=arguments[an];nn[tn].fn.apply(nn[tn].context,en);}}return!0},Wt.prototype.on=function(Vt,qt,Kt){var Qt=new Yt(qt,Kt||this),Zt=zt?zt+Vt:Vt;return this._events[Zt]?this._events[Zt].fn?this._events[Zt]=[this._events[Zt],Qt]:this._events[Zt].push(Qt):(this._events[Zt]=Qt,this._eventsCount++),this},Wt.prototype.once=function(Vt,qt,Kt){var Qt=new Yt(qt,Kt||this,!0),Zt=zt?zt+Vt:Vt;return this._events[Zt]?this._events[Zt].fn?this._events[Zt]=[this._events[Zt],Qt]:this._events[Zt].push(Qt):(this._events[Zt]=Qt,this._eventsCount++),this},Wt.prototype.removeListener=function(Vt,qt,Kt,Qt){var Zt=zt?zt+Vt:Vt;if(!this._events[Zt])return this;if(!qt)return 0==--this._eventsCount?this._events=new Ht:delete this._events[Zt],this;var Jt=this._events[Zt];if(Jt.fn)Jt.fn!==qt||Qt&&!Jt.once||Kt&&Jt.context!==Kt||(0==--this._eventsCount?this._events=new Ht:delete this._events[Zt]);else{for(var $t=0,en=[],tn=Jt.length;$t<tn;$t++)(Jt[$t].fn!==qt||Qt&&!Jt[$t].once||Kt&&Jt[$t].context!==Kt)&&en.push(Jt[$t]);en.length?this._events[Zt]=1===en.length?en[0]:en:0==--this._eventsCount?this._events=new Ht:delete this._events[Zt]}return this},Wt.prototype.removeAllListeners=function(Vt){var qt;return Vt?(qt=zt?zt+Vt:Vt,this._events[qt]&&(0==--this._eventsCount?this._events=new Ht:delete this._events[qt])):(this._events=new Ht,this._eventsCount=0),this},Wt.prototype.off=Wt.prototype.removeListener,Wt.prototype.addListener=Wt.prototype.on,Wt.prototype.setMaxListeners=function(){return this},Wt.prefixed=zt,Wt.EventEmitter=Wt,void 0!==Gt&&(Gt.exports=Wt)},{}],4:[function(Bt,Gt){!function(Ht){var Yt=/iPhone/i,Wt=/iPod/i,jt=/iPad/i,zt=/(?=.*\bAndroid\b)(?=.*\bMobile\b)/i,Vt=/Android/i,qt=/(?=.*\bAndroid\b)(?=.*\bSD4930UR\b)/i,Kt=/(?=.*\bAndroid\b)(?=.*\b(?:KFOT|KFTT|KFJWI|KFJWA|KFSOWI|KFTHWI|KFTHWA|KFAPWI|KFAPWA|KFARWI|KFASWI|KFSAWI|KFSAWA)\b)/i,Qt=/Windows Phone/i,Zt=/(?=.*\bWindows\b)(?=.*\bARM\b)/i,Jt=/BlackBerry/i,$t=/BB10/i,en=/Opera Mini/i,tn=/(CriOS|Chrome)(?=.*\bMobile\b)/i,nn=/(?=.*\bFirefox\b)(?=.*\bMobile\b)/i,rn=/(?:Nexus 7|BNTV250|Kindle Fire|Silk|GT-P1000)/i,an=function(dn,ln){return dn.test(ln)},on=function(dn){var ln=dn||navigator.userAgent,un=ln.split("[FBAN");if(void 0!==un[1]&&(ln=un[0]),void 0!==(un=ln.split("Twitter"))[1]&&(ln=un[0]),this.apple={phone:an(Yt,ln),ipod:an(Wt,ln),tablet:!an(Yt,ln)&&an(jt,ln),device:an(Yt,ln)||an(Wt,ln)||an(jt,ln)},this.amazon={phone:an(qt,ln),tablet:!an(qt,ln)&&an(Kt,ln),device:an(qt,ln)||an(Kt,ln)},this.android={phone:an(qt,ln)||an(zt,ln),tablet:!an(qt,ln)&&!an(zt,ln)&&(an(Kt,ln)||an(Vt,ln)),device:an(qt,ln)||an(Kt,ln)||an(zt,ln)||an(Vt,ln)},this.windows={phone:an(Qt,ln),tablet:an(Zt,ln),device:an(Qt,ln)||an(Zt,ln)},this.other={blackberry:an(Jt,ln),blackberry10:an($t,ln),opera:an(en,ln),firefox:an(nn,ln),chrome:an(tn,ln),device:an(Jt,ln)||an($t,ln)||an(en,ln)||an(nn,ln)||an(tn,ln)},this.seven_inch=an(rn,ln),this.any=this.apple.device||this.android.device||this.windows.device||this.other.device||this.seven_inch,this.phone=this.apple.phone||this.android.phone||this.windows.phone,this.tablet=this.apple.tablet||this.android.tablet||this.windows.tablet,"undefined"==typeof window)return this},sn=function(){var dn=new on;return dn.Class=on,dn};void 0!==Gt&&Gt.exports&&"undefined"==typeof window?Gt.exports=on:void 0!==Gt&&Gt.exports&&"undefined"!=typeof window?Gt.exports=sn():Ht.isMobile=sn()}(this)},{}],5:[function(Bt,Gt){var Ht=Object.getOwnPropertySymbols,Yt=Object.prototype.hasOwnProperty,Wt=Object.prototype.propertyIsEnumerable;Gt.exports=function(){try{if(!Object.assign)return!1;var jt=new String("abc");if(jt[5]="de","5"===Object.getOwnPropertyNames(jt)[0])return!1;for(var zt={},Vt=0;10>Vt;Vt++)zt["_"+String.fromCharCode(Vt)]=Vt;if("0123456789"!==Object.getOwnPropertyNames(zt).map(function(Kt){return zt[Kt]}).join(""))return!1;var qt={};return"abcdefghijklmnopqrst".split("").forEach(function(Kt){qt[Kt]=Kt}),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},qt)).join("")}catch(Kt){return!1}}()?Object.assign:function(jt){for(var Kt=function($t){if(null===$t||void 0===$t)throw new TypeError("Object.assign cannot be called with null or undefined");return Object($t)}(jt),Qt=1,Vt,qt;Qt<arguments.length;Qt++){for(var Zt in Vt=Object(arguments[Qt]),Vt)Yt.call(Vt,Zt)&&(Kt[Zt]=Vt[Zt]);if(Ht){qt=Ht(Vt);for(var Jt=0;Jt<qt.length;Jt++)Wt.call(Vt,qt[Jt])&&(Kt[qt[Jt]]=Vt[qt[Jt]])}}return Kt}},{}],6:[function(Bt,Gt){var Ht=new ArrayBuffer(0),Yt=function(Wt,jt,zt,Vt){this.gl=Wt,this.buffer=Wt.createBuffer(),this.type=jt||Wt.ARRAY_BUFFER,this.drawType=Vt||Wt.STATIC_DRAW,this.data=Ht,zt&&this.upload(zt),this._updateID=0};Yt.prototype.upload=function(Wt,jt,zt){zt||this.bind();var Vt=this.gl;Wt=Wt||this.data,jt=jt||0,this.data.byteLength>=Wt.byteLength?Vt.bufferSubData(this.type,jt,Wt):Vt.bufferData(this.type,Wt,this.drawType),this.data=Wt},Yt.prototype.bind=function(){this.gl.bindBuffer(this.type,this.buffer)},Yt.createVertexBuffer=function(Wt,jt,zt){return new Yt(Wt,Wt.ARRAY_BUFFER,jt,zt)},Yt.createIndexBuffer=function(Wt,jt,zt){return new Yt(Wt,Wt.ELEMENT_ARRAY_BUFFER,jt,zt)},Yt.create=function(Wt,jt,zt,Vt){return new Yt(Wt,jt,zt,Vt)},Yt.prototype.destroy=function(){this.gl.deleteBuffer(this.buffer)},Gt.exports=Yt},{}],7:[function(Bt,Gt){var Ht=Bt("./GLTexture"),Yt=function(Wt,jt,zt){this.gl=Wt,this.framebuffer=Wt.createFramebuffer(),this.stencil=null,this.texture=null,this.width=jt||100,this.height=zt||100};Yt.prototype.enableTexture=function(Wt){var jt=this.gl;this.texture=Wt||new Ht(jt),this.texture.bind(),this.bind(),jt.framebufferTexture2D(jt.FRAMEBUFFER,jt.COLOR_ATTACHMENT0,jt.TEXTURE_2D,this.texture.texture,0)},Yt.prototype.enableStencil=function(){if(!this.stencil){var Wt=this.gl;this.stencil=Wt.createRenderbuffer(),Wt.bindRenderbuffer(Wt.RENDERBUFFER,this.stencil),Wt.framebufferRenderbuffer(Wt.FRAMEBUFFER,Wt.DEPTH_STENCIL_ATTACHMENT,Wt.RENDERBUFFER,this.stencil),Wt.renderbufferStorage(Wt.RENDERBUFFER,Wt.DEPTH_STENCIL,this.width,this.height)}},Yt.prototype.clear=function(Wt,jt,zt,Vt){this.bind();var qt=this.gl;qt.clearColor(Wt,jt,zt,Vt),qt.clear(qt.COLOR_BUFFER_BIT|qt.DEPTH_BUFFER_BIT)},Yt.prototype.bind=function(){var Wt=this.gl;Wt.bindFramebuffer(Wt.FRAMEBUFFER,this.framebuffer)},Yt.prototype.unbind=function(){var Wt=this.gl;Wt.bindFramebuffer(Wt.FRAMEBUFFER,null)},Yt.prototype.resize=function(Wt,jt){var zt=this.gl;this.width=Wt,this.height=jt,this.texture&&this.texture.uploadData(null,Wt,jt),this.stencil&&(zt.bindRenderbuffer(zt.RENDERBUFFER,this.stencil),zt.renderbufferStorage(zt.RENDERBUFFER,zt.DEPTH_STENCIL,Wt,jt))},Yt.prototype.destroy=function(){var Wt=this.gl;this.texture&&this.texture.destroy(),Wt.deleteFramebuffer(this.framebuffer),this.gl=null,this.stencil=null,this.texture=null},Yt.createRGBA=function(Wt,jt,zt){var qt=Ht.fromData(Wt,null,jt,zt);qt.enableNearestScaling(),qt.enableWrapClamp();var Kt=new Yt(Wt,jt,zt);return Kt.enableTexture(qt),Kt.unbind(),Kt},Yt.createFloat32=function(Wt,jt,zt,Vt){var qt=new Ht.fromData(Wt,Vt,jt,zt);qt.enableNearestScaling(),qt.enableWrapClamp();var Kt=new Yt(Wt,jt,zt);return Kt.enableTexture(qt),Kt.unbind(),Kt},Gt.exports=Yt},{"./GLTexture":9}],8:[function(Bt,Gt){var Ht=Bt("./shader/compileProgram"),Yt=Bt("./shader/extractAttributes"),Wt=Bt("./shader/extractUniforms"),jt=Bt("./shader/setPrecision"),zt=Bt("./shader/generateUniformAccessObject"),Vt=function(qt,Kt,Qt,Zt,Jt){this.gl=qt,Zt&&(Kt=jt(Kt,Zt),Qt=jt(Qt,Zt)),this.program=Ht(qt,Kt,Qt,Jt),this.attributes=Yt(qt,this.program),this.uniformData=Wt(qt,this.program),this.uniforms=zt(qt,this.uniformData)};Vt.prototype.bind=function(){this.gl.useProgram(this.program)},Vt.prototype.destroy=function(){this.attributes=null,this.uniformData=null,this.uniforms=null,this.gl.deleteProgram(this.program)},Gt.exports=Vt},{"./shader/compileProgram":14,"./shader/extractAttributes":16,"./shader/extractUniforms":17,"./shader/generateUniformAccessObject":18,"./shader/setPrecision":22}],9:[function(Bt,Gt){var Ht=function(Wt,jt,zt,Vt,qt){this.gl=Wt,this.texture=Wt.createTexture(),this.mipmap=!1,this.premultiplyAlpha=!1,this.width=jt||-1,this.height=zt||-1,this.format=Vt||Wt.RGBA,this.type=qt||Wt.UNSIGNED_BYTE};Ht.prototype.upload=function(Wt){this.bind();var jt=this.gl;jt.pixelStorei(jt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha);var zt=Wt.videoWidth||Wt.width,Vt=Wt.videoHeight||Wt.height;Vt!==this.height||zt!==this.width?jt.texImage2D(jt.TEXTURE_2D,0,this.format,this.format,this.type,Wt):jt.texSubImage2D(jt.TEXTURE_2D,0,0,0,this.format,this.type,Wt),this.width=zt,this.height=Vt};var Yt=!1;Ht.prototype.uploadData=function(Wt,jt,zt){this.bind();var Vt=this.gl;if(Wt instanceof Float32Array){if(!Yt){if(!Vt.getExtension("OES_texture_float"))throw new Error("floating point textures not available");Yt=!0}this.type=Vt.FLOAT}else this.type=this.type||Vt.UNSIGNED_BYTE;Vt.pixelStorei(Vt.UNPACK_PREMULTIPLY_ALPHA_WEBGL,this.premultiplyAlpha),jt!==this.width||zt!==this.height?Vt.texImage2D(Vt.TEXTURE_2D,0,this.format,jt,zt,0,this.format,this.type,Wt||null):Vt.texSubImage2D(Vt.TEXTURE_2D,0,0,0,jt,zt,this.format,this.type,Wt||null),this.width=jt,this.height=zt},Ht.prototype.bind=function(Wt){var jt=this.gl;void 0!==Wt&&jt.activeTexture(jt.TEXTURE0+Wt),jt.bindTexture(jt.TEXTURE_2D,this.texture)},Ht.prototype.unbind=function(){var Wt=this.gl;Wt.bindTexture(Wt.TEXTURE_2D,null)},Ht.prototype.minFilter=function(Wt){var jt=this.gl;this.bind(),this.mipmap?jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MIN_FILTER,Wt?jt.LINEAR_MIPMAP_LINEAR:jt.NEAREST_MIPMAP_NEAREST):jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MIN_FILTER,Wt?jt.LINEAR:jt.NEAREST)},Ht.prototype.magFilter=function(Wt){var jt=this.gl;this.bind(),jt.texParameteri(jt.TEXTURE_2D,jt.TEXTURE_MAG_FILTER,Wt?jt.LINEAR:jt.NEAREST)},Ht.prototype.enableMipmap=function(){var Wt=this.gl;this.bind(),this.mipmap=!0,Wt.generateMipmap(Wt.TEXTURE_2D)},Ht.prototype.enableLinearScaling=function(){this.minFilter(!0),this.magFilter(!0)},Ht.prototype.enableNearestScaling=function(){this.minFilter(!1),this.magFilter(!1)},Ht.prototype.enableWrapClamp=function(){var Wt=this.gl;this.bind(),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_S,Wt.CLAMP_TO_EDGE),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_T,Wt.CLAMP_TO_EDGE)},Ht.prototype.enableWrapRepeat=function(){var Wt=this.gl;this.bind(),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_S,Wt.REPEAT),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_T,Wt.REPEAT)},Ht.prototype.enableWrapMirrorRepeat=function(){var Wt=this.gl;this.bind(),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_S,Wt.MIRRORED_REPEAT),Wt.texParameteri(Wt.TEXTURE_2D,Wt.TEXTURE_WRAP_T,Wt.MIRRORED_REPEAT)},Ht.prototype.destroy=function(){this.gl.deleteTexture(this.texture)},Ht.fromSource=function(Wt,jt,zt){var Vt=new Ht(Wt);return Vt.premultiplyAlpha=zt||!1,Vt.upload(jt),Vt},Ht.fromData=function(Wt,jt,zt,Vt){var qt=new Ht(Wt);return qt.uploadData(jt,zt,Vt),qt},Gt.exports=Ht},{}],10:[function(Bt,Gt){function Ht(Wt,jt){if(this.nativeVaoExtension=null,Ht.FORCE_NATIVE||(this.nativeVaoExtension=Wt.getExtension("OES_vertex_array_object")||Wt.getExtension("MOZ_OES_vertex_array_object")||Wt.getExtension("WEBKIT_OES_vertex_array_object")),this.nativeState=jt,this.nativeVaoExtension){this.nativeVao=this.nativeVaoExtension.createVertexArrayOES();var zt=Wt.getParameter(Wt.MAX_VERTEX_ATTRIBS);this.nativeState={tempAttribState:Array(zt),attribState:Array(zt)}}this.gl=Wt,this.attributes=[],this.indexBuffer=null,this.dirty=!1}var Yt=Bt("./setVertexAttribArrays");Ht.prototype.constructor=Ht,Gt.exports=Ht,Ht.FORCE_NATIVE=!1,Ht.prototype.bind=function(){return this.nativeVao?(this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.dirty&&(this.dirty=!1,this.activate())):this.activate(),this},Ht.prototype.unbind=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(null),this},Ht.prototype.activate=function(){for(var Wt=this.gl,jt=null,zt=0,Vt;zt<this.attributes.length;zt++)Vt=this.attributes[zt],jt!==Vt.buffer&&(Vt.buffer.bind(),jt=Vt.buffer),Wt.vertexAttribPointer(Vt.attribute.location,Vt.attribute.size,Vt.type||Wt.FLOAT,Vt.normalized||!1,Vt.stride||0,Vt.start||0);return Yt(Wt,this.attributes,this.nativeState),this.indexBuffer&&this.indexBuffer.bind(),this},Ht.prototype.addAttribute=function(Wt,jt,zt,Vt,qt,Kt){return this.attributes.push({buffer:Wt,attribute:jt,location:jt.location,type:zt||this.gl.FLOAT,normalized:Vt||!1,stride:qt||0,start:Kt||0}),this.dirty=!0,this},Ht.prototype.addIndex=function(Wt){return this.indexBuffer=Wt,this.dirty=!0,this},Ht.prototype.clear=function(){return this.nativeVao&&this.nativeVaoExtension.bindVertexArrayOES(this.nativeVao),this.attributes.length=0,this.indexBuffer=null,this},Ht.prototype.draw=function(Wt,jt,zt){var Vt=this.gl;return this.indexBuffer?Vt.drawElements(Wt,jt||this.indexBuffer.data.length,Vt.UNSIGNED_SHORT,2*(zt||0)):Vt.drawArrays(Wt,zt,jt||this.getSize()),this},Ht.prototype.destroy=function(){this.gl=null,this.indexBuffer=null,this.attributes=null,this.nativeState=null,this.nativeVao&&this.nativeVaoExtension.deleteVertexArrayOES(this.nativeVao),this.nativeVaoExtension=null,this.nativeVao=null},Ht.prototype.getSize=function(){var Wt=this.attributes[0];return Wt.buffer.data.length/(Wt.stride/4||Wt.attribute.size)}},{"./setVertexAttribArrays":13}],11:[function(Bt,Gt){Gt.exports=function(Ht,Yt){var Wt=Ht.getContext("webgl",Yt)||Ht.getContext("experimental-webgl",Yt);if(!Wt)throw new Error("This browser does not support webGL. Try using the canvas renderer");return Wt}},{}],12:[function(Bt,Gt){var Ht={createContext:Bt("./createContext"),setVertexAttribArrays:Bt("./setVertexAttribArrays"),GLBuffer:Bt("./GLBuffer"),GLFramebuffer:Bt("./GLFramebuffer"),GLShader:Bt("./GLShader"),GLTexture:Bt("./GLTexture"),VertexArrayObject:Bt("./VertexArrayObject"),shader:Bt("./shader")};void 0!==Gt&&Gt.exports&&(Gt.exports=Ht),"undefined"!=typeof window&&(window.PIXI=window.PIXI||{},window.PIXI.glCore=Ht)},{"./GLBuffer":6,"./GLFramebuffer":7,"./GLShader":8,"./GLTexture":9,"./VertexArrayObject":10,"./createContext":11,"./setVertexAttribArrays":13,"./shader":19}],13:[function(Bt,Gt){Gt.exports=function(Ht,Yt,Wt){var jt;if(Wt){var zt=Wt.tempAttribState,Vt=Wt.attribState;for(jt=0;jt<zt.length;jt++)zt[jt]=!1;for(jt=0;jt<Yt.length;jt++)zt[Yt[jt].attribute.location]=!0;for(jt=0;jt<Vt.length;jt++)Vt[jt]!==zt[jt]&&(Vt[jt]=zt[jt],Wt.attribState[jt]?Ht.enableVertexAttribArray(jt):Ht.disableVertexAttribArray(jt))}else for(jt=0;jt<Yt.length;jt++){var qt=Yt[jt];Ht.enableVertexAttribArray(qt.attribute.location)}}},{}],14:[function(Bt,Gt){var Ht=function(Yt,Wt,jt){var zt=Yt.createShader(Wt);return Yt.shaderSource(zt,jt),Yt.compileShader(zt),Yt.getShaderParameter(zt,Yt.COMPILE_STATUS)?zt:(console.log(Yt.getShaderInfoLog(zt)),null)};Gt.exports=function(Yt,Wt,jt,zt){var Vt=Ht(Yt,Yt.VERTEX_SHADER,Wt),qt=Ht(Yt,Yt.FRAGMENT_SHADER,jt),Kt=Yt.createProgram();if(Yt.attachShader(Kt,Vt),Yt.attachShader(Kt,qt),zt)for(var Qt in zt)Yt.bindAttribLocation(Kt,zt[Qt],Qt);return Yt.linkProgram(Kt),Yt.getProgramParameter(Kt,Yt.LINK_STATUS)||(console.error("Pixi.js Error: Could not initialize shader."),console.error("gl.VALIDATE_STATUS",Yt.getProgramParameter(Kt,Yt.VALIDATE_STATUS)),console.error("gl.getError()",Yt.getError()),""!==Yt.getProgramInfoLog(Kt)&&console.warn("Pixi.js Warning: gl.getProgramInfoLog()",Yt.getProgramInfoLog(Kt)),Yt.deleteProgram(Kt),Kt=null),Yt.deleteShader(Vt),Yt.deleteShader(qt),Kt}},{}],15:[function(Bt,Gt){var Ht=function(Yt){for(var Wt=Array(Yt),jt=0;jt<Wt.length;jt++)Wt[jt]=!1;return Wt};Gt.exports=function(Yt,Wt){return"float"===Yt?0:"vec2"===Yt?new Float32Array(2*Wt):"vec3"===Yt?new Float32Array(3*Wt):"vec4"===Yt?new Float32Array(4*Wt):"int"===Yt||"sampler2D"===Yt?0:"ivec2"===Yt?new Int32Array(2*Wt):"ivec3"===Yt?new Int32Array(3*Wt):"ivec4"===Yt?new Int32Array(4*Wt):"bool"!=Yt&&("bvec2"===Yt?Ht(2*Wt):"bvec3"===Yt?Ht(3*Wt):"bvec4"===Yt?Ht(4*Wt):"mat2"===Yt?new Float32Array([1,0,0,1]):"mat3"===Yt?new Float32Array([1,0,0,0,1,0,0,0,1]):"mat4"===Yt?new Float32Array([1,0,0,0,0,1,0,0,0,0,1,0,0,0,0,1]):void 0)}},{}],16:[function(Bt,Gt){var Ht=Bt("./mapType"),Yt=Bt("./mapSize"),Wt=function(jt,zt,Vt,qt){gl.vertexAttribPointer(this.location,this.size,jt||gl.FLOAT,zt||!1,Vt||0,qt||0)};Gt.exports=function(jt,zt){for(var Vt={},qt=jt.getProgramParameter(zt,jt.ACTIVE_ATTRIBUTES),Kt=0;Kt<qt;Kt++){var Qt=jt.getActiveAttrib(zt,Kt),Zt=Ht(jt,Qt.type);Vt[Qt.name]={type:Zt,size:Yt(Zt),location:jt.getAttribLocation(zt,Qt.name),pointer:Wt}}return Vt}},{"./mapSize":20,"./mapType":21}],17:[function(Bt,Gt){var Ht=Bt("./mapType"),Yt=Bt("./defaultValue");Gt.exports=function(Wt,jt){for(var zt={},Vt=Wt.getProgramParameter(jt,Wt.ACTIVE_UNIFORMS),qt=0;qt<Vt;qt++){var Kt=Wt.getActiveUniform(jt,qt),Qt=Kt.name.replace(/\[.*?\]/,""),Zt=Ht(Wt,Kt.type);zt[Qt]={type:Zt,size:Kt.size,location:Wt.getUniformLocation(jt,Qt),value:Yt(Zt,Kt.size)}}return zt}},{"./defaultValue":15,"./mapType":21}],18:[function(Bt,Gt){var Ht=function(Kt){var Qt=jt.replace("%%",Kt);return new Function(Qt)},Yt=function(Kt,Qt){var Jt=zt.replace(/%%/g,Kt),Zt;return(Zt=1===Qt.size?Vt[Qt.type]:qt[Qt.type])&&(Jt+="\nthis.gl."+Zt+";"),new Function("value",Jt)},Wt=function(Kt,Qt){for(var Zt=Qt,Jt=0,$t;Jt<Kt.length-1;Jt++)$t=Zt[Kt[Jt]]||{data:{}},Zt[Kt[Jt]]=$t,Zt=$t;return Zt},jt=["return this.data.%%.value;"].join("\n"),zt=["this.data.%%.value = value;","var location = this.data.%%.location;"].join("\n"),Vt={float:"uniform1f(location, value)",vec2:"uniform2f(location, value[0], value[1])",vec3:"uniform3f(location, value[0], value[1], value[2])",vec4:"uniform4f(location, value[0], value[1], value[2], value[3])",int:"uniform1i(location, value)",ivec2:"uniform2i(location, value[0], value[1])",ivec3:"uniform3i(location, value[0], value[1], value[2])",ivec4:"uniform4i(location, value[0], value[1], value[2], value[3])",bool:"uniform1i(location, value)",bvec2:"uniform2i(location, value[0], value[1])",bvec3:"uniform3i(location, value[0], value[1], value[2])",bvec4:"uniform4i(location, value[0], value[1], value[2], value[3])",mat2:"uniformMatrix2fv(location, false, value)",mat3:"uniformMatrix3fv(location, false, value)",mat4:"uniformMatrix4fv(location, false, value)",sampler2D:"uniform1i(location, value)"},qt={float:"uniform1fv(location, value)",vec2:"uniform2fv(location, value)",vec3:"uniform3fv(location, value)",vec4:"uniform4fv(location, value)",int:"uniform1iv(location, value)",ivec2:"uniform2iv(location, value)",ivec3:"uniform3iv(location, value)",ivec4:"uniform4iv(location, value)",bool:"uniform1iv(location, value)",bvec2:"uniform2iv(location, value)",bvec3:"uniform3iv(location, value)",bvec4:"uniform4iv(location, value)",sampler2D:"uniform1iv(location, value)"};Gt.exports=function(Kt,Qt){for(var Zt={data:{},gl:Kt},Jt=Object.keys(Qt),$t=0;$t<Jt.length;$t++){var en=Jt[$t],tn=en.split("."),nn=tn[tn.length-1],rn=Wt(tn,Zt),an=Qt[en];rn.data[nn]=an,rn.gl=Kt,Object.defineProperty(rn,nn,{get:Ht(nn),set:Yt(nn,an)})}return Zt}},{}],19:[function(Bt,Gt){Gt.exports={compileProgram:Bt("./compileProgram"),defaultValue:Bt("./defaultValue"),extractAttributes:Bt("./extractAttributes"),extractUniforms:Bt("./extractUniforms"),generateUniformAccessObject:Bt("./generateUniformAccessObject"),setPrecision:Bt("./setPrecision"),mapSize:Bt("./mapSize"),mapType:Bt("./mapType")}},{"./compileProgram":14,"./defaultValue":15,"./extractAttributes":16,"./extractUniforms":17,"./generateUniformAccessObject":18,"./mapSize":20,"./mapType":21,"./setPrecision":22}],20:[function(Bt,Gt){var Ht={float:1,vec2:2,vec3:3,vec4:4,int:1,ivec2:2,ivec3:3,ivec4:4,bool:1,bvec2:2,bvec3:3,bvec4:4,mat2:4,mat3:9,mat4:16,sampler2D:1};Gt.exports=function(Yt){return Ht[Yt]}},{}],21:[function(Bt,Gt){var Ht=null,Yt={FLOAT:"float",FLOAT_VEC2:"vec2",FLOAT_VEC3:"vec3",FLOAT_VEC4:"vec4",INT:"int",INT_VEC2:"ivec2",INT_VEC3:"ivec3",INT_VEC4:"ivec4",BOOL:"bool",BOOL_VEC2:"bvec2",BOOL_VEC3:"bvec3",BOOL_VEC4:"bvec4",FLOAT_MAT2:"mat2",FLOAT_MAT3:"mat3",FLOAT_MAT4:"mat4",SAMPLER_2D:"sampler2D"};Gt.exports=function(Wt,jt){if(!Ht){var zt=Object.keys(Yt);Ht={};for(var Vt=0,qt;Vt<zt.length;++Vt)qt=zt[Vt],Ht[Wt[qt]]=Yt[qt]}return Ht[jt]}},{}],22:[function(Bt,Gt){Gt.exports=function(Ht,Yt){return"precision"===Ht.substring(0,9)?Ht:"precision "+Yt+" float;\n"+Ht}},{}],23:[function(Bt,Gt,Xt){(function(Ht){function Yt(qt,Kt){for(var Qt=0,Zt=qt.length-1,Jt;0<=Zt;Zt--)Jt=qt[Zt],"."===Jt?qt.splice(Zt,1):".."===Jt?(qt.splice(Zt,1),Qt++):Qt&&(qt.splice(Zt,1),Qt--);if(Kt)for(;Qt--;Qt)qt.unshift("..");return qt}function Wt(qt,Kt){if(qt.filter)return qt.filter(Kt);for(var Qt=[],Zt=0;Zt<qt.length;Zt++)Kt(qt[Zt],Zt,qt)&&Qt.push(qt[Zt]);return Qt}var jt=/^(\/?|)([\s\S]*?)((?:\.{1,2}|[^\/]+?|)(\.[^.\/]*|))(?:[\/]*)$/,zt=function(qt){return jt.exec(qt).slice(1)};Xt.resolve=function(){for(var qt="",Kt=!1,Qt=arguments.length-1,Zt;-1<=Qt&&!Kt;Qt--){if(Zt=0<=Qt?arguments[Qt]:Ht.cwd(),"string"!=typeof Zt)throw new TypeError("Arguments to path.resolve must be strings");Zt&&(qt=Zt+"/"+qt,Kt="/"===Zt.charAt(0))}return qt=Yt(Wt(qt.split("/"),function(Jt){return!!Jt}),!Kt).join("/"),(Kt?"/":"")+qt||"."},Xt.normalize=function(qt){var Kt=Xt.isAbsolute(qt),Qt="/"===Vt(qt,-1);return(qt=Yt(Wt(qt.split("/"),function(Zt){return!!Zt}),!Kt).join("/"))||Kt||(qt="."),qt&&Qt&&(qt+="/"),(Kt?"/":"")+qt},Xt.isAbsolute=function(qt){return"/"===qt.charAt(0)},Xt.join=function(){var qt=Array.prototype.slice.call(arguments,0);return Xt.normalize(Wt(qt,function(Kt){if("string"!=typeof Kt)throw new TypeError("Arguments to path.join must be strings");return Kt}).join("/"))},Xt.relative=function(qt,Kt){function Qt(rn){for(var an=0;an<rn.length&&""===rn[an];an++);for(var on=rn.length-1;0<=on&&""===rn[on];on--);return an>on?[]:rn.slice(an,on-an+1)}qt=Xt.resolve(qt).substr(1),Kt=Xt.resolve(Kt).substr(1);for(var Zt=Qt(qt.split("/")),Jt=Qt(Kt.split("/")),$t=Math.min(Zt.length,Jt.length),en=$t,tn=0;tn<$t;tn++)if(Zt[tn]!==Jt[tn]){en=tn;break}var nn=[];for(tn=en;tn<Zt.length;tn++)nn.push("..");return(nn=nn.concat(Jt.slice(en))).join("/")},Xt.sep="/",Xt.delimiter=":",Xt.dirname=function(qt){var Kt=zt(qt),Qt=Kt[0],Zt=Kt[1];return Qt||Zt?(Zt&&(Zt=Zt.substr(0,Zt.length-1)),Qt+Zt):"."},Xt.basename=function(qt,Kt){var Qt=zt(qt)[2];return Kt&&Qt.substr(-1*Kt.length)===Kt&&(Qt=Qt.substr(0,Qt.length-Kt.length)),Qt},Xt.extname=function(qt){return zt(qt)[3]};var Vt=function(qt,Kt,Qt){return qt.substr(Kt,Qt)}}).call(this,Bt("_process"))},{_process:24}],24:[function(Bt,Gt){function Ht(){throw new Error("setTimeout has not been defined")}function Yt(){throw new Error("clearTimeout has not been defined")}function Wt(nn){if(Kt===setTimeout)return setTimeout(nn,0);if((Kt===Ht||!Kt)&&setTimeout)return Kt=setTimeout,setTimeout(nn,0);try{return Kt(nn,0)}catch(rn){try{return Kt.call(null,nn,0)}catch(an){return Kt.call(this,nn,0)}}}function jt(){en&&Jt&&(en=!1,Jt.length?$t=Jt.concat($t):tn=-1,$t.length&&zt())}function zt(){if(!en){var nn=Wt(jt);en=!0;for(var rn=$t.length;rn;){for(Jt=$t,$t=[];++tn<rn;)Jt&&Jt[tn].run();tn=-1,rn=$t.length}Jt=null,en=!1,function(an){if(Qt===clearTimeout)return clearTimeout(an);if((Qt===Yt||!Qt)&&clearTimeout)return Qt=clearTimeout,clearTimeout(an);try{Qt(an)}catch(on){try{return Qt.call(null,an)}catch(sn){return Qt.call(this,an)}}}(nn)}}function Vt(nn,rn){this.fun=nn,this.array=rn}function qt(){}var Zt=Gt.exports={},Kt,Qt;!function(){try{Kt="function"==typeof setTimeout?setTimeout:Ht}catch(nn){Kt=Ht}try{Qt="function"==typeof clearTimeout?clearTimeout:Yt}catch(nn){Qt=Yt}}();var $t=[],en=!1,tn=-1,Jt;Zt.nextTick=function(nn){var rn=Array(arguments.length-1);if(1<arguments.length)for(var an=1;an<arguments.length;an++)rn[an-1]=arguments[an];$t.push(new Vt(nn,rn)),1!==$t.length||en||Wt(zt)},Vt.prototype.run=function(){this.fun.apply(null,this.array)},Zt.title="browser",Zt.browser=!0,Zt.env={},Zt.argv=[],Zt.version="",Zt.versions={},Zt.on=qt,Zt.addListener=qt,Zt.once=qt,Zt.off=qt,Zt.removeListener=qt,Zt.removeAllListeners=qt,Zt.emit=qt,Zt.prependListener=qt,Zt.prependOnceListener=qt,Zt.listeners=function(){return[]},Zt.binding=function(){throw new Error("process.binding is not supported")},Zt.cwd=function(){return"/"},Zt.chdir=function(){throw new Error("process.chdir is not supported")},Zt.umask=function(){return 0}},{}],25:[function(Bt,Gt,Xt){(function(Ht){!function(Yt){function Wt(Tn){throw new RangeError(_n[Tn])}function jt(Tn,Sn){for(var En=Tn.length,wn=[];En--;)wn[En]=Sn(Tn[En]);return wn}function zt(Tn,Sn){var En=Tn.split("@"),wn="";return 1<En.length&&(wn=En[0]+"@",Tn=En[1]),wn+jt((Tn=Tn.replace(yn,".")).split("."),Sn).join(".")}function Vt(Tn){for(var wn=[],An=0,Cn=Tn.length,Sn,En;An<Cn;)55296<=(Sn=Tn.charCodeAt(An++))&&56319>=Sn&&An<Cn?56320==(64512&(En=Tn.charCodeAt(An++)))?wn.push(((1023&Sn)<<10)+(1023&En)+65536):(wn.push(Sn),An--):wn.push(Sn);return wn}function qt(Tn){return jt(Tn,function(Sn){var En="";return 65535<Sn&&(En+=vn(55296|1023&(Sn-=65536)>>>10),Sn=56320|1023&Sn),En+=vn(Sn)}).join("")}function Kt(Tn){return 10>Tn-48?Tn-22:26>Tn-65?Tn-65:26>Tn-97?Tn-97:sn}function Qt(Tn,Sn){return Tn+22+75*(26>Tn)-((0!=Sn)<<5)}function Zt(Tn,Sn,En){var wn=0;for(Tn=En?xn(Tn/700):Tn>>1,Tn+=xn(Tn/Sn);Tn>bn*ln>>1;wn+=sn)Tn=xn(Tn/bn);return xn(wn+(bn+1)*Tn/(Tn+38))}function Jt(Tn){var On=[],Ln=Tn.length,kn=0,Nn=hn,Fn=cn,Sn,En,wn,An,Cn,Pn,Mn,Rn,Dn,In;for(0>(En=Tn.lastIndexOf(fn))&&(En=0),wn=0;wn<En;++wn)128<=Tn.charCodeAt(wn)&&Wt("not-basic"),On.push(Tn.charCodeAt(wn));for(An=0<En?En+1:0;An<Ln;){for(Cn=kn,Pn=1,Mn=sn;An>=Ln&&Wt("invalid-input"),((Rn=Kt(Tn.charCodeAt(An++)))>=sn||Rn>xn((on-kn)/Pn))&&Wt("overflow"),kn+=Rn*Pn,Dn=Mn<=Fn?dn:Mn>=Fn+ln?ln:Mn-Fn,!(Rn<Dn);Mn+=sn)Pn>xn(on/(In=sn-Dn))&&Wt("overflow"),Pn*=In;Fn=Zt(kn-Cn,Sn=On.length+1,0==Cn),xn(kn/Sn)>on-Nn&&Wt("overflow"),Nn+=xn(kn/Sn),kn%=Sn,On.splice(kn++,0,Nn)}return qt(On)}function $t(Tn){var Bn=[],Sn,En,wn,An,Cn,Pn,Mn,Rn,Dn,In,On,Ln,kn,Nn,Fn;for(Ln=(Tn=Vt(Tn)).length,Sn=hn,En=0,Cn=cn,Pn=0;Pn<Ln;++Pn)128>(On=Tn[Pn])&&Bn.push(vn(On));for(wn=An=Bn.length,An&&Bn.push(fn);wn<Ln;){for(Mn=on,Pn=0;Pn<Ln;++Pn)(On=Tn[Pn])>=Sn&&On<Mn&&(Mn=On);for(Mn-Sn>xn((on-En)/(kn=wn+1))&&Wt("overflow"),En+=(Mn-Sn)*kn,Sn=Mn,Pn=0;Pn<Ln;++Pn)if((On=Tn[Pn])<Sn&&++En>on&&Wt("overflow"),On==Sn){for(Rn=En,Dn=sn;In=Dn<=Cn?dn:Dn>=Cn+ln?ln:Dn-Cn,!(Rn<In);Dn+=sn)Fn=Rn-In,Nn=sn-In,Bn.push(vn(Qt(In+Fn%Nn,0))),Rn=xn(Fn/Nn);Bn.push(vn(Qt(Rn,0))),Cn=Zt(En,kn,wn==An),En=0,++wn}++En,++Sn}return Bn.join("")}var en="object"==typeof Xt&&Xt&&!Xt.nodeType&&Xt,tn="object"==typeof Gt&&Gt&&!Gt.nodeType&&Gt,nn="object"==typeof Ht&&Ht;nn.global!==nn&&nn.window!==nn&&nn.self!==nn||(Yt=nn);var on=2147483647,sn=36,dn=1,ln=26,cn=72,hn=128,fn="-",gn=/^xn--/,mn=/[^\x20-\x7E]/,yn=/[\x2E\u3002\uFF0E\uFF61]/g,_n={overflow:"Overflow: input needs wider integers to process","not-basic":"Illegal input >= 0x80 (not a basic code point)","invalid-input":"Invalid input"},bn=sn-dn,xn=Math.floor,vn=String.fromCharCode,rn,an;if(!(rn={version:"1.4.1",ucs2:{decode:Vt,encode:qt},decode:Jt,encode:$t,toASCII:function(Tn){return zt(Tn,function(Sn){return mn.test(Sn)?"xn--"+$t(Sn):Sn})},toUnicode:function(Tn){return zt(Tn,function(Sn){return gn.test(Sn)?Jt(Sn.slice(4).toLowerCase()):Sn})}},en&&tn))Yt.punycode=rn;else if(Gt.exports==en)tn.exports=rn;else for(an in rn)rn.hasOwnProperty(an)&&(en[an]=rn[an])}(this)}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],26:[function(Bt,Gt){function Ht(Wt,jt){return Object.prototype.hasOwnProperty.call(Wt,jt)}Gt.exports=function(Wt,jt,zt,Vt){jt=jt||"&",zt=zt||"=";var qt={};if("string"!=typeof Wt||0===Wt.length)return qt;var Kt=/\+/g;Wt=Wt.split(jt);var Qt=1e3;Vt&&"number"==typeof Vt.maxKeys&&(Qt=Vt.maxKeys);var Zt=Wt.length;0<Qt&&Zt>Qt&&(Zt=Qt);for(var Jt=0;Jt<Zt;++Jt){var rn=Wt[Jt].replace(Kt,"%20"),an=rn.indexOf(zt),$t,en,tn,nn;0<=an?($t=rn.substr(0,an),en=rn.substr(an+1)):($t=rn,en=""),tn=decodeURIComponent($t),nn=decodeURIComponent(en),Ht(qt,tn)?Yt(qt[tn])?qt[tn].push(nn):qt[tn]=[qt[tn],nn]:qt[tn]=nn}return qt};var Yt=Array.isArray||function(Wt){return"[object Array]"===Object.prototype.toString.call(Wt)}},{}],27:[function(Bt,Gt){function Ht(zt,Vt){if(zt.map)return zt.map(Vt);for(var qt=[],Kt=0;Kt<zt.length;Kt++)qt.push(Vt(zt[Kt],Kt));return qt}var Yt=function(zt){switch(typeof zt){case"string":return zt;case"boolean":return zt?"true":"false";case"number":return isFinite(zt)?zt:"";default:return"";}};Gt.exports=function(zt,Vt,qt,Kt){return Vt=Vt||"&",qt=qt||"=",null===zt&&(zt=void 0),"object"==typeof zt?Ht(jt(zt),function(Qt){var Zt=encodeURIComponent(Yt(Qt))+qt;return Wt(zt[Qt])?Ht(zt[Qt],function(Jt){return Zt+encodeURIComponent(Yt(Jt))}).join(Vt):Zt+encodeURIComponent(Yt(zt[Qt]))}).join(Vt):Kt?encodeURIComponent(Yt(Kt))+qt+encodeURIComponent(Yt(zt)):""};var Wt=Array.isArray||function(zt){return"[object Array]"===Object.prototype.toString.call(zt)},jt=Object.keys||function(zt){var Vt=[];for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&Vt.push(qt);return Vt}},{}],28:[function(Bt,Gt,Xt){Xt.decode=Xt.parse=Bt("./decode"),Xt.encode=Xt.stringify=Bt("./encode")},{"./decode":26,"./encode":27}],29:[function(Bt,Gt,Xt){function Ht(){this.protocol=null,this.slashes=null,this.auth=null,this.host=null,this.port=null,this.hostname=null,this.hash=null,this.search=null,this.query=null,this.pathname=null,this.path=null,this.href=null}function Yt(on,sn,dn){if(on&&jt.isObject(on)&&on instanceof Ht)return on;var ln=new Ht;return ln.parse(on,sn,dn),ln}var Wt=Bt("punycode"),jt=Bt("./util");Xt.parse=Yt,Xt.resolve=function(on,sn){return Yt(on,!1,!0).resolve(sn)},Xt.resolveObject=function(on,sn){return on?Yt(on,!1,!0).resolveObject(sn):sn},Xt.format=function(on){return jt.isString(on)&&(on=Yt(on)),on instanceof Ht?on.format():Ht.prototype.format.call(on)},Xt.Url=Ht;var zt=/^([a-z0-9.+-]+:)/i,Vt=/:[0-9]*$/,qt=/^(\/\/?(?!\/)[^\?\s]*)(\?[^\s]*)?$/,Kt=["{","}","|","\\","^","`"].concat(["<",">","\"","`"," ","\r","\n","\t"]),Qt=["'"].concat(Kt),Zt=["%","/","?",";","#"].concat(Qt),Jt=["/","?","#"],$t=/^[+a-z0-9A-Z_-]{0,63}$/,en=/^([+a-z0-9A-Z_-]{0,63})(.*)$/,tn={javascript:!0,"javascript:":!0},nn={javascript:!0,"javascript:":!0},rn={http:!0,https:!0,ftp:!0,gopher:!0,file:!0,"http:":!0,"https:":!0,"ftp:":!0,"gopher:":!0,"file:":!0},an=Bt("querystring");Ht.prototype.parse=function(on,sn,dn){if(!jt.isString(on))throw new TypeError("Parameter 'url' must be a string, not "+typeof on);var ln=on.indexOf("?"),un=-1!==ln&&ln<on.indexOf("#")?"?":"#",pn=on.split(un);pn[0]=pn[0].replace(/\\/g,"/");var cn=on=pn.join(un);if(cn=cn.trim(),!dn&&1===on.split("#").length){var hn=qt.exec(cn);if(hn)return this.path=cn,this.href=cn,this.pathname=hn[1],hn[2]?(this.search=hn[2],this.query=sn?an.parse(this.search.substr(1)):this.search.substr(1)):sn&&(this.search="",this.query={}),this}var fn=zt.exec(cn);if(fn){var gn=(fn=fn[0]).toLowerCase();this.protocol=gn,cn=cn.substr(fn.length)}if(dn||fn||cn.match(/^\/\/[^@\/]+@[^@\/]+/)){var mn="//"===cn.substr(0,2);!mn||fn&&nn[fn]||(cn=cn.substr(2),this.slashes=!0)}if(!nn[fn]&&(mn||fn&&!rn[fn])){for(var yn=-1,_n=0;_n<Jt.length;_n++)-1!==(vn=cn.indexOf(Jt[_n]))&&(-1===yn||vn<yn)&&(yn=vn);var bn,xn;for(-1!==(xn=-1===yn?cn.lastIndexOf("@"):cn.lastIndexOf("@",yn))&&(bn=cn.slice(0,xn),cn=cn.slice(xn+1),this.auth=decodeURIComponent(bn)),yn=-1,_n=0;_n<Zt.length;_n++){var vn;-1!==(vn=cn.indexOf(Zt[_n]))&&(-1===yn||vn<yn)&&(yn=vn)}-1===yn&&(yn=cn.length),this.host=cn.slice(0,yn),cn=cn.slice(yn),this.parseHost(),this.hostname=this.hostname||"";var Tn="["===this.hostname[0]&&"]"===this.hostname[this.hostname.length-1];if(!Tn)for(var Sn=this.hostname.split(/\./),En=(_n=0,Sn.length),wn;_n<En;_n++)if(wn=Sn[_n],wn&&!wn.match($t)){for(var An="",Cn=0,Pn=wn.length;Cn<Pn;Cn++)An+=127<wn.charCodeAt(Cn)?"x":wn[Cn];if(!An.match($t)){var Mn=Sn.slice(0,_n),Rn=Sn.slice(_n+1),Dn=wn.match(en);Dn&&(Mn.push(Dn[1]),Rn.unshift(Dn[2])),Rn.length&&(cn="/"+Rn.join(".")+cn),this.hostname=Mn.join(".");break}}this.hostname=255<this.hostname.length?"":this.hostname.toLowerCase(),Tn||(this.hostname=Wt.toASCII(this.hostname));var In=this.port?":"+this.port:"",On=this.hostname||"";this.host=On+In,this.href+=this.host,Tn&&(this.hostname=this.hostname.substr(1,this.hostname.length-2),"/"!==cn[0]&&(cn="/"+cn))}if(!tn[gn])for(_n=0,En=Qt.length;_n<En;_n++){var Ln=Qt[_n];if(-1!==cn.indexOf(Ln)){var kn=encodeURIComponent(Ln);kn===Ln&&(kn=escape(Ln)),cn=cn.split(Ln).join(kn)}}var Nn=cn.indexOf("#");-1!==Nn&&(this.hash=cn.substr(Nn),cn=cn.slice(0,Nn));var Fn=cn.indexOf("?");if(-1===Fn?sn&&(this.search="",this.query={}):(this.search=cn.substr(Fn),this.query=cn.substr(Fn+1),sn&&(this.query=an.parse(this.query)),cn=cn.slice(0,Fn)),cn&&(this.pathname=cn),rn[gn]&&this.hostname&&!this.pathname&&(this.pathname="/"),this.pathname||this.search){In=this.pathname||"";var Bn=this.search||"";this.path=In+Bn}return this.href=this.format(),this},Ht.prototype.format=function(){var on=this.auth||"";on&&(on=(on=encodeURIComponent(on)).replace(/%3A/i,":"),on+="@");var sn=this.protocol||"",dn=this.pathname||"",ln=this.hash||"",un=!1,pn="";this.host?un=on+this.host:this.hostname&&(un=on+(-1===this.hostname.indexOf(":")?this.hostname:"["+this.hostname+"]"),this.port&&(un+=":"+this.port)),this.query&&jt.isObject(this.query)&&Object.keys(this.query).length&&(pn=an.stringify(this.query));var cn=this.search||pn&&"?"+pn||"";return sn&&":"!==sn.substr(-1)&&(sn+=":"),this.slashes||(!sn||rn[sn])&&!1!==un?(un="//"+(un||""),dn&&"/"!==dn.charAt(0)&&(dn="/"+dn)):un||(un=""),ln&&"#"!==ln.charAt(0)&&(ln="#"+ln),cn&&"?"!==cn.charAt(0)&&(cn="?"+cn),dn=dn.replace(/[?#]/g,function(hn){return encodeURIComponent(hn)}),cn=cn.replace("#","%23"),sn+un+dn+cn+ln},Ht.prototype.resolve=function(on){return this.resolveObject(Yt(on,!1,!0)).format()},Ht.prototype.resolveObject=function(on){if(jt.isString(on)){var sn=new Ht;sn.parse(on,!1,!0),on=sn}for(var dn=new Ht,ln=Object.keys(this),un=0,pn;un<ln.length;un++)pn=ln[un],dn[pn]=this[pn];if(dn.hash=on.hash,""===on.href)return dn.href=dn.format(),dn;if(on.slashes&&!on.protocol){for(var cn=Object.keys(on),hn=0,fn;hn<cn.length;hn++)fn=cn[hn],"protocol"!==fn&&(dn[fn]=on[fn]);return rn[dn.protocol]&&dn.hostname&&!dn.pathname&&(dn.path=dn.pathname="/"),dn.href=dn.format(),dn}if(on.protocol&&on.protocol!==dn.protocol){if(!rn[on.protocol]){for(var gn=Object.keys(on),mn=0,yn;mn<gn.length;mn++)yn=gn[mn],dn[yn]=on[yn];return dn.href=dn.format(),dn}if(dn.protocol=on.protocol,on.host||nn[on.protocol])dn.pathname=on.pathname;else{for(var _n=(on.pathname||"").split("/");_n.length&&!(on.host=_n.shift()););on.host||(on.host=""),on.hostname||(on.hostname=""),""!==_n[0]&&_n.unshift(""),2>_n.length&&_n.unshift(""),dn.pathname=_n.join("/")}if(dn.search=on.search,dn.query=on.query,dn.host=on.host||"",dn.auth=on.auth,dn.hostname=on.hostname||on.host,dn.port=on.port,dn.pathname||dn.search){var bn=dn.pathname||"",xn=dn.search||"";dn.path=bn+xn}return dn.slashes=dn.slashes||on.slashes,dn.href=dn.format(),dn}var vn=dn.pathname&&"/"===dn.pathname.charAt(0),Tn=on.host||on.pathname&&"/"===on.pathname.charAt(0),Sn=Tn||vn||dn.host&&on.pathname,En=Sn,wn=dn.pathname&&dn.pathname.split("/")||[],An=(_n=on.pathname&&on.pathname.split("/")||[],dn.protocol&&!rn[dn.protocol]);if(An&&(dn.hostname="",dn.port=null,dn.host&&(""===wn[0]?wn[0]=dn.host:wn.unshift(dn.host)),dn.host="",on.protocol&&(on.hostname=null,on.port=null,on.host&&(""===_n[0]?_n[0]=on.host:_n.unshift(on.host)),on.host=null),Sn=Sn&&(""===_n[0]||""===wn[0])),Tn)dn.host=on.host||""===on.host?on.host:dn.host,dn.hostname=on.hostname||""===on.hostname?on.hostname:dn.hostname,dn.search=on.search,dn.query=on.query,wn=_n;else if(_n.length)wn||(wn=[]),wn.pop(),wn=wn.concat(_n),dn.search=on.search,dn.query=on.query;else if(!jt.isNullOrUndefined(on.search))return An&&(dn.hostname=dn.host=wn.shift(),(In=!!(dn.host&&0<dn.host.indexOf("@"))&&dn.host.split("@"))&&(dn.auth=In.shift(),dn.host=dn.hostname=In.shift())),dn.search=on.search,dn.query=on.query,jt.isNull(dn.pathname)&&jt.isNull(dn.search)||(dn.path=(dn.pathname?dn.pathname:"")+(dn.search?dn.search:"")),dn.href=dn.format(),dn;if(!wn.length)return dn.pathname=null,dn.path=dn.search?"/"+dn.search:null,dn.href=dn.format(),dn;for(var Cn=wn.slice(-1)[0],Pn=(dn.host||on.host||1<wn.length)&&("."===Cn||".."===Cn)||""===Cn,Mn=0,Rn=wn.length;0<=Rn;Rn--)"."===(Cn=wn[Rn])?wn.splice(Rn,1):".."===Cn?(wn.splice(Rn,1),Mn++):Mn&&(wn.splice(Rn,1),Mn--);if(!Sn&&!En)for(;Mn--;Mn)wn.unshift("..");!Sn||""===wn[0]||wn[0]&&"/"===wn[0].charAt(0)||wn.unshift(""),Pn&&"/"!==wn.join("/").substr(-1)&&wn.push("");var Dn=""===wn[0]||wn[0]&&"/"===wn[0].charAt(0);if(An){dn.hostname=dn.host=Dn?"":wn.length?wn.shift():"";var In;(In=!!(dn.host&&0<dn.host.indexOf("@"))&&dn.host.split("@"))&&(dn.auth=In.shift(),dn.host=dn.hostname=In.shift())}return(Sn=Sn||dn.host&&wn.length)&&!Dn&&wn.unshift(""),wn.length?dn.pathname=wn.join("/"):(dn.pathname=null,dn.path=null),jt.isNull(dn.pathname)&&jt.isNull(dn.search)||(dn.path=(dn.pathname?dn.pathname:"")+(dn.search?dn.search:"")),dn.auth=on.auth||dn.auth,dn.slashes=dn.slashes||on.slashes,dn.href=dn.format(),dn},Ht.prototype.parseHost=function(){var on=this.host,sn=Vt.exec(on);sn&&(":"!==(sn=sn[0])&&(this.port=sn.substr(1)),on=on.substr(0,on.length-sn.length)),on&&(this.hostname=on)}},{"./util":30,punycode:25,querystring:28}],30:[function(Bt,Gt){Gt.exports={isString:function(Ht){return"string"==typeof Ht},isObject:function(Ht){return"object"==typeof Ht&&null!==Ht},isNull:function(Ht){return null===Ht},isNullOrUndefined:function(Ht){return null==Ht}}},{}],31:[function(Bt,Gt){Gt.exports=function(Ht,Yt,Wt){var zt=Ht.length,jt;if(!(Yt>=zt||0===Wt)){var Vt=zt-(Wt=Yt+Wt>zt?zt-Yt:Wt);for(jt=Yt;jt<Vt;++jt)Ht[jt]=Ht[jt+Wt];Ht.length=Vt}}},{}],32:[function(Bt,Gt,Xt){function Ht(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Xt.__esModule=!0;var Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Qt){return typeof Qt}:function(Qt){return Qt&&"function"==typeof Symbol&&Qt.constructor===Symbol&&Qt!==Symbol.prototype?"symbol":typeof Qt},Wt=Ht(Bt("mini-signals")),jt=Ht(Bt("parse-uri")),zt=function(Qt){if(Qt&&Qt.__esModule)return Qt;var Zt={};if(null!=Qt)for(var Jt in Qt)Object.prototype.hasOwnProperty.call(Qt,Jt)&&(Zt[Jt]=Qt[Jt]);return Zt.default=Qt,Zt}(Bt("./async")),Vt=Ht(Bt("./Resource")),qt=/(#[\w-]+)?$/,Kt=function(){function Qt(){var Zt=this,Jt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:"",$t=1<arguments.length&&void 0!==arguments[1]?arguments[1]:10;!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Qt),this.baseUrl=Jt,this.progress=0,this.loading=!1,this.defaultQueryString="",this._beforeMiddleware=[],this._afterMiddleware=[],this._resourcesParsing=[],this._boundLoadResource=function(en,tn){return Zt._loadResource(en,tn)},this._queue=zt.queue(this._boundLoadResource,$t),this._queue.pause(),this.resources={},this.onProgress=new Wt.default,this.onError=new Wt.default,this.onLoad=new Wt.default,this.onStart=new Wt.default,this.onComplete=new Wt.default}return Qt.prototype.add=function(Zt,Jt,$t,en){if(Array.isArray(Zt)){for(var tn=0;tn<Zt.length;++tn)this.add(Zt[tn]);return this}if("object"===(void 0===Zt?"undefined":Yt(Zt))&&(en=Jt||Zt.callback||Zt.onComplete,$t=Zt,Jt=Zt.url,Zt=Zt.name||Zt.key||Zt.url),"string"!=typeof Jt&&(en=$t,$t=Jt,Jt=Zt),"string"!=typeof Jt)throw new Error("No url passed to add resource to loader.");if("function"==typeof $t&&(en=$t,$t=null),this.loading&&(!$t||!$t.parentResource))throw new Error("Cannot add resources while the loader is running.");if(this.resources[Zt])throw new Error("Resource named \""+Zt+"\" already exists.");if(Jt=this._prepareUrl(Jt),this.resources[Zt]=new Vt.default(Zt,Jt,$t),"function"==typeof en&&this.resources[Zt].onAfterMiddleware.once(en),this.loading){for(var nn=$t.parentResource,rn=[],an=0;an<nn.children.length;++an)nn.children[an].isComplete||rn.push(nn.children[an]);var on=nn.progressChunk*(rn.length+1)/(rn.length+2);nn.children.push(this.resources[Zt]),nn.progressChunk=on;for(var sn=0;sn<rn.length;++sn)rn[sn].progressChunk=on;this.resources[Zt].progressChunk=on}return this._queue.push(this.resources[Zt]),this},Qt.prototype.pre=function(Zt){return this._beforeMiddleware.push(Zt),this},Qt.prototype.use=function(Zt){return this._afterMiddleware.push(Zt),this},Qt.prototype.reset=function(){for(var Zt in this.progress=0,this.loading=!1,this._queue.kill(),this._queue.pause(),this.resources){var Jt=this.resources[Zt];Jt._onLoadBinding&&Jt._onLoadBinding.detach(),Jt.isLoading&&Jt.abort()}return this.resources={},this},Qt.prototype.load=function(Zt){if("function"==typeof Zt&&this.onComplete.once(Zt),this.loading)return this;for(var Jt=100/this._queue._tasks.length,$t=0;$t<this._queue._tasks.length;++$t)this._queue._tasks[$t].data.progressChunk=Jt;return this.loading=!0,this.onStart.dispatch(this),this._queue.resume(),this},Qt.prototype._prepareUrl=function(Zt){var Jt=(0,jt.default)(Zt,{strictMode:!0}),$t;if($t=Jt.protocol||!Jt.path||0===Zt.indexOf("//")?Zt:this.baseUrl.length&&this.baseUrl.lastIndexOf("/")!==this.baseUrl.length-1&&"/"!==Zt.charAt(0)?this.baseUrl+"/"+Zt:this.baseUrl+Zt,this.defaultQueryString){var en=qt.exec($t)[0];$t+=-1===($t=$t.substr(0,$t.length-en.length)).indexOf("?")?"?"+this.defaultQueryString:"&"+this.defaultQueryString,$t+=en}return $t},Qt.prototype._loadResource=function(Zt,Jt){var $t=this;Zt._dequeue=Jt,zt.eachSeries(this._beforeMiddleware,function(en,tn){en.call($t,Zt,function(){tn(Zt.isComplete?{}:null)})},function(){Zt.isComplete?$t._onLoad(Zt):(Zt._onLoadBinding=Zt.onComplete.once($t._onLoad,$t),Zt.load())},!0)},Qt.prototype._onComplete=function(){this.loading=!1,this.onComplete.dispatch(this,this.resources)},Qt.prototype._onLoad=function(Zt){var Jt=this;Zt._onLoadBinding=null,this._resourcesParsing.push(Zt),Zt._dequeue(),zt.eachSeries(this._afterMiddleware,function($t,en){$t.call(Jt,Zt,en)},function(){Zt.onAfterMiddleware.dispatch(Zt),Jt.progress+=Zt.progressChunk,Jt.onProgress.dispatch(Jt,Zt),Zt.error?Jt.onError.dispatch(Zt.error,Jt,Zt):Jt.onLoad.dispatch(Jt,Zt),Jt._resourcesParsing.splice(Jt._resourcesParsing.indexOf(Zt),1),Jt._queue.idle()&&0===Jt._resourcesParsing.length&&(Jt.progress=100,Jt._onComplete())},!0)},Qt}();Xt.default=Kt},{"./Resource":33,"./async":34,"mini-signals":38,"parse-uri":39}],33:[function(Bt,Gt,Xt){function Ht(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}function Yt(){}function Wt(Jt,$t,en){$t&&0===$t.indexOf(".")&&($t=$t.substring(1)),$t&&(Jt[$t]=en)}function jt(Jt){return Jt.toString().replace("object ","")}Xt.__esModule=!0;var zt=function(){function Jt($t,en){for(var tn=0,nn;tn<en.length;tn++)nn=en[tn],nn.enumerable=nn.enumerable||!1,nn.configurable=!0,"value"in nn&&(nn.writable=!0),Object.defineProperty($t,nn.key,nn)}return function($t,en,tn){return en&&Jt($t.prototype,en),tn&&Jt($t,tn),$t}}(),Vt=Ht(Bt("parse-uri")),qt=Ht(Bt("mini-signals")),Kt=window.XDomainRequest&&!("withCredentials"in new XMLHttpRequest),Qt=null,Zt=function(){function Jt($t,en,tn){if(function(nn,rn){if(!(nn instanceof rn))throw new TypeError("Cannot call a class as a function")}(this,Jt),"string"!=typeof $t||"string"!=typeof en)throw new Error("Both name and url are required for constructing a resource.");tn=tn||{},this._flags=0,this._setFlag(Jt.STATUS_FLAGS.DATA_URL,0===en.indexOf("data:")),this.name=$t,this.url=en,this.extension=this._getExtension(),this.data=null,this.crossOrigin=!0===tn.crossOrigin?"anonymous":tn.crossOrigin,this.loadType=tn.loadType||this._determineLoadType(),this.xhrType=tn.xhrType,this.metadata=tn.metadata||{},this.error=null,this.xhr=null,this.children=[],this.type=Jt.TYPE.UNKNOWN,this.progressChunk=0,this._dequeue=Yt,this._onLoadBinding=null,this._boundComplete=this.complete.bind(this),this._boundOnError=this._onError.bind(this),this._boundOnProgress=this._onProgress.bind(this),this._boundXhrOnError=this._xhrOnError.bind(this),this._boundXhrOnAbort=this._xhrOnAbort.bind(this),this._boundXhrOnLoad=this._xhrOnLoad.bind(this),this._boundXdrOnTimeout=this._xdrOnTimeout.bind(this),this.onStart=new qt.default,this.onProgress=new qt.default,this.onComplete=new qt.default,this.onAfterMiddleware=new qt.default}return Jt.setExtensionLoadType=function($t,en){Wt(Jt._loadTypeMap,$t,en)},Jt.setExtensionXhrType=function($t,en){Wt(Jt._xhrTypeMap,$t,en)},Jt.prototype.complete=function(){if(this.data&&this.data.removeEventListener&&(this.data.removeEventListener("error",this._boundOnError,!1),this.data.removeEventListener("load",this._boundComplete,!1),this.data.removeEventListener("progress",this._boundOnProgress,!1),this.data.removeEventListener("canplaythrough",this._boundComplete,!1)),this.xhr&&(this.xhr.removeEventListener?(this.xhr.removeEventListener("error",this._boundXhrOnError,!1),this.xhr.removeEventListener("abort",this._boundXhrOnAbort,!1),this.xhr.removeEventListener("progress",this._boundOnProgress,!1),this.xhr.removeEventListener("load",this._boundXhrOnLoad,!1)):(this.xhr.onerror=null,this.xhr.ontimeout=null,this.xhr.onprogress=null,this.xhr.onload=null)),this.isComplete)throw new Error("Complete called again for an already completed resource.");this._setFlag(Jt.STATUS_FLAGS.COMPLETE,!0),this._setFlag(Jt.STATUS_FLAGS.LOADING,!1),this.onComplete.dispatch(this)},Jt.prototype.abort=function($t){if(!this.error){if(this.error=new Error($t),this.xhr)this.xhr.abort();else if(this.xdr)this.xdr.abort();else if(this.data)if(this.data.src)this.data.src=Jt.EMPTY_GIF;else for(;this.data.firstChild;)this.data.removeChild(this.data.firstChild);this.complete()}},Jt.prototype.load=function($t){var en=this;if(!this.isLoading)if(this.isComplete)$t&&setTimeout(function(){return $t(en)},1);else switch($t&&this.onComplete.once($t),this._setFlag(Jt.STATUS_FLAGS.LOADING,!0),this.onStart.dispatch(this),!1!==this.crossOrigin&&"string"==typeof this.crossOrigin||(this.crossOrigin=this._determineCrossOrigin(this.url)),this.loadType){case Jt.LOAD_TYPE.IMAGE:this.type=Jt.TYPE.IMAGE,this._loadElement("image");break;case Jt.LOAD_TYPE.AUDIO:this.type=Jt.TYPE.AUDIO,this._loadSourceElement("audio");break;case Jt.LOAD_TYPE.VIDEO:this.type=Jt.TYPE.VIDEO,this._loadSourceElement("video");break;case Jt.LOAD_TYPE.XHR:default:Kt&&this.crossOrigin?this._loadXdr():this._loadXhr();}},Jt.prototype._hasFlag=function($t){return!!(this._flags&$t)},Jt.prototype._setFlag=function($t,en){this._flags=en?this._flags|$t:this._flags&~$t},Jt.prototype._loadElement=function($t){this.data=this.metadata.loadElement?this.metadata.loadElement:"image"===$t&&void 0!==window.Image?new Image:document.createElement($t),this.crossOrigin&&(this.data.crossOrigin=this.crossOrigin),this.metadata.skipSource||(this.data.src=this.url),this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1)},Jt.prototype._loadSourceElement=function($t){if(this.data=this.metadata.loadElement?this.metadata.loadElement:"audio"===$t&&void 0!==window.Audio?new Audio:document.createElement($t),null!==this.data){if(!this.metadata.skipSource)if(navigator.isCocoonJS)this.data.src=Array.isArray(this.url)?this.url[0]:this.url;else if(Array.isArray(this.url))for(var en=this.metadata.mimeType,tn=0;tn<this.url.length;++tn)this.data.appendChild(this._createSource($t,this.url[tn],Array.isArray(en)?en[tn]:en));else{var nn=this.metadata.mimeType;this.data.appendChild(this._createSource($t,this.url,Array.isArray(nn)?nn[0]:nn))}this.data.addEventListener("error",this._boundOnError,!1),this.data.addEventListener("load",this._boundComplete,!1),this.data.addEventListener("progress",this._boundOnProgress,!1),this.data.addEventListener("canplaythrough",this._boundComplete,!1),this.data.load()}else this.abort("Unsupported element: "+$t)},Jt.prototype._loadXhr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var $t=this.xhr=new XMLHttpRequest;$t.open("GET",this.url,!0),$t.responseType=this.xhrType===Jt.XHR_RESPONSE_TYPE.JSON||this.xhrType===Jt.XHR_RESPONSE_TYPE.DOCUMENT?Jt.XHR_RESPONSE_TYPE.TEXT:this.xhrType,$t.addEventListener("error",this._boundXhrOnError,!1),$t.addEventListener("abort",this._boundXhrOnAbort,!1),$t.addEventListener("progress",this._boundOnProgress,!1),$t.addEventListener("load",this._boundXhrOnLoad,!1),$t.send()},Jt.prototype._loadXdr=function(){"string"!=typeof this.xhrType&&(this.xhrType=this._determineXhrType());var $t=this.xhr=new XDomainRequest;$t.timeout=5e3,$t.onerror=this._boundXhrOnError,$t.ontimeout=this._boundXdrOnTimeout,$t.onprogress=this._boundOnProgress,$t.onload=this._boundXhrOnLoad,$t.open("GET",this.url,!0),setTimeout(function(){return $t.send()},1)},Jt.prototype._createSource=function($t,en,tn){tn||(tn=$t+"/"+this._getExtension(en));var nn=document.createElement("source");return nn.src=en,nn.type=tn,nn},Jt.prototype._onError=function($t){this.abort("Failed to load element using: "+$t.target.nodeName)},Jt.prototype._onProgress=function($t){$t&&$t.lengthComputable&&this.onProgress.dispatch(this,$t.loaded/$t.total)},Jt.prototype._xhrOnError=function(){var $t=this.xhr;this.abort(jt($t)+" Request failed. Status: "+$t.status+", text: \""+$t.statusText+"\"")},Jt.prototype._xhrOnAbort=function(){this.abort(jt(this.xhr)+" Request was aborted by the user.")},Jt.prototype._xdrOnTimeout=function(){this.abort(jt(this.xhr)+" Request timed out.")},Jt.prototype._xhrOnLoad=function(){var $t=this.xhr,en="",tn=void 0===$t.status?200:$t.status;if(""!==$t.responseType&&"text"!==$t.responseType&&void 0!==$t.responseType||(en=$t.responseText),0===tn&&0<en.length?tn=200:1223==tn&&(tn=204),2==(0|tn/100)){if(this.xhrType===Jt.XHR_RESPONSE_TYPE.TEXT)this.data=en,this.type=Jt.TYPE.TEXT;else if(this.xhrType===Jt.XHR_RESPONSE_TYPE.JSON)try{this.data=JSON.parse(en),this.type=Jt.TYPE.JSON}catch(an){return void this.abort("Error trying to parse loaded json: "+an)}else if(this.xhrType===Jt.XHR_RESPONSE_TYPE.DOCUMENT)try{if(window.DOMParser){var nn=new DOMParser;this.data=nn.parseFromString(en,"text/xml")}else{var rn=document.createElement("div");rn.innerHTML=en,this.data=rn}this.type=Jt.TYPE.XML}catch(an){return void this.abort("Error trying to parse loaded xml: "+an)}else this.data=$t.response||en;this.complete()}else this.abort("["+$t.status+"] "+$t.statusText+": "+$t.responseURL)},Jt.prototype._determineCrossOrigin=function($t,en){if(0===$t.indexOf("data:"))return"";en=en||window.location,Qt||(Qt=document.createElement("a")),Qt.href=$t;var tn=!($t=(0,Vt.default)(Qt.href,{strictMode:!0})).port&&""===en.port||$t.port===en.port,nn=$t.protocol?$t.protocol+":":"";return $t.host===en.hostname&&tn&&nn===en.protocol?"":"anonymous"},Jt.prototype._determineXhrType=function(){return Jt._xhrTypeMap[this.extension]||Jt.XHR_RESPONSE_TYPE.TEXT},Jt.prototype._determineLoadType=function(){return Jt._loadTypeMap[this.extension]||Jt.LOAD_TYPE.XHR},Jt.prototype._getExtension=function(){var $t=this.url,en="";if(this.isDataUrl){var tn=$t.indexOf("/");en=$t.substring(tn+1,$t.indexOf(";",tn))}else{var nn=$t.indexOf("?"),rn=$t.indexOf("#"),an=Math.min(-1<nn?nn:$t.length,-1<rn?rn:$t.length);en=($t=$t.substring(0,an)).substring($t.lastIndexOf(".")+1)}return en.toLowerCase()},Jt.prototype._getMimeFromXhrType=function($t){switch($t){case Jt.XHR_RESPONSE_TYPE.BUFFER:return"application/octet-binary";case Jt.XHR_RESPONSE_TYPE.BLOB:return"application/blob";case Jt.XHR_RESPONSE_TYPE.DOCUMENT:return"application/xml";case Jt.XHR_RESPONSE_TYPE.JSON:return"application/json";case Jt.XHR_RESPONSE_TYPE.DEFAULT:case Jt.XHR_RESPONSE_TYPE.TEXT:default:return"text/plain";}},zt(Jt,[{key:"isDataUrl",get:function(){return this._hasFlag(Jt.STATUS_FLAGS.DATA_URL)}},{key:"isComplete",get:function(){return this._hasFlag(Jt.STATUS_FLAGS.COMPLETE)}},{key:"isLoading",get:function(){return this._hasFlag(Jt.STATUS_FLAGS.LOADING)}}]),Jt}();Xt.default=Zt,Zt.STATUS_FLAGS={NONE:0,DATA_URL:1,COMPLETE:2,LOADING:4},Zt.TYPE={UNKNOWN:0,JSON:1,XML:2,IMAGE:3,AUDIO:4,VIDEO:5,TEXT:6},Zt.LOAD_TYPE={XHR:1,IMAGE:2,AUDIO:3,VIDEO:4},Zt.XHR_RESPONSE_TYPE={DEFAULT:"text",BUFFER:"arraybuffer",BLOB:"blob",DOCUMENT:"document",JSON:"json",TEXT:"text"},Zt._loadTypeMap={gif:Zt.LOAD_TYPE.IMAGE,png:Zt.LOAD_TYPE.IMAGE,bmp:Zt.LOAD_TYPE.IMAGE,jpg:Zt.LOAD_TYPE.IMAGE,jpeg:Zt.LOAD_TYPE.IMAGE,tif:Zt.LOAD_TYPE.IMAGE,tiff:Zt.LOAD_TYPE.IMAGE,webp:Zt.LOAD_TYPE.IMAGE,tga:Zt.LOAD_TYPE.IMAGE,svg:Zt.LOAD_TYPE.IMAGE,"svg+xml":Zt.LOAD_TYPE.IMAGE,mp3:Zt.LOAD_TYPE.AUDIO,ogg:Zt.LOAD_TYPE.AUDIO,wav:Zt.LOAD_TYPE.AUDIO,mp4:Zt.LOAD_TYPE.VIDEO,webm:Zt.LOAD_TYPE.VIDEO},Zt._xhrTypeMap={xhtml:Zt.XHR_RESPONSE_TYPE.DOCUMENT,html:Zt.XHR_RESPONSE_TYPE.DOCUMENT,htm:Zt.XHR_RESPONSE_TYPE.DOCUMENT,xml:Zt.XHR_RESPONSE_TYPE.DOCUMENT,tmx:Zt.XHR_RESPONSE_TYPE.DOCUMENT,svg:Zt.XHR_RESPONSE_TYPE.DOCUMENT,tsx:Zt.XHR_RESPONSE_TYPE.DOCUMENT,gif:Zt.XHR_RESPONSE_TYPE.BLOB,png:Zt.XHR_RESPONSE_TYPE.BLOB,bmp:Zt.XHR_RESPONSE_TYPE.BLOB,jpg:Zt.XHR_RESPONSE_TYPE.BLOB,jpeg:Zt.XHR_RESPONSE_TYPE.BLOB,tif:Zt.XHR_RESPONSE_TYPE.BLOB,tiff:Zt.XHR_RESPONSE_TYPE.BLOB,webp:Zt.XHR_RESPONSE_TYPE.BLOB,tga:Zt.XHR_RESPONSE_TYPE.BLOB,json:Zt.XHR_RESPONSE_TYPE.JSON,text:Zt.XHR_RESPONSE_TYPE.TEXT,txt:Zt.XHR_RESPONSE_TYPE.TEXT,ttf:Zt.XHR_RESPONSE_TYPE.BUFFER,otf:Zt.XHR_RESPONSE_TYPE.BUFFER},Zt.EMPTY_GIF="data:image/gif;base64,R0lGODlhAQABAIAAAP///wAAACH5BAEAAAAALAAAAAABAAEAAAICRAEAOw=="},{"mini-signals":38,"parse-uri":39}],34:[function(Bt,Gt,Xt){function Ht(){}function Yt(Wt){return function(){if(null===Wt)throw new Error("Callback was already called.");var jt=Wt;Wt=null,jt.apply(this,arguments)}}Xt.__esModule=!0,Xt.eachSeries=function(Wt,jt,zt,Vt){var qt=0,Kt=Wt.length;!function Qt(Zt){Zt||qt===Kt?zt&&zt(Zt):Vt?setTimeout(function(){jt(Wt[qt++],Qt)},1):jt(Wt[qt++],Qt)}()},Xt.queue=function(Wt,jt){function zt(Kt,Qt,Zt){if(null!=Zt&&"function"!=typeof Zt)throw new Error("task callback must be a function");if(qt.started=!0,null==Kt&&qt.idle())setTimeout(function(){return qt.drain()},1);else{var Jt={data:Kt,callback:"function"==typeof Zt?Zt:Ht};Qt?qt._tasks.unshift(Jt):qt._tasks.push(Jt),setTimeout(function(){return qt.process()},1)}}if(null==jt)jt=1;else if(0===jt)throw new Error("Concurrency must not be zero");var Vt=0,qt={_tasks:[],concurrency:jt,saturated:Ht,unsaturated:Ht,buffer:jt/4,empty:Ht,drain:Ht,error:Ht,started:!1,paused:!1,push:function(Kt,Qt){zt(Kt,!1,Qt)},kill:function(){Vt=0,qt.drain=Ht,qt.started=!1,qt._tasks=[]},unshift:function(Kt,Qt){zt(Kt,!0,Qt)},process:function(){for(;!qt.paused&&Vt<qt.concurrency&&qt._tasks.length;){var Kt=qt._tasks.shift();0===qt._tasks.length&&qt.empty(),(Vt+=1)===qt.concurrency&&qt.saturated(),Wt(Kt.data,Yt(function(Qt){return function(){Vt-=1,Qt.callback.apply(Qt,arguments),null!=arguments[0]&&qt.error(arguments[0],Qt.data),Vt<=qt.concurrency-qt.buffer&&qt.unsaturated(),qt.idle()&&qt.drain(),qt.process()}}(Kt)))}},length:function(){return qt._tasks.length},running:function(){return Vt},idle:function(){return 0===qt._tasks.length+Vt},pause:function(){!0!==qt.paused&&(qt.paused=!0)},resume:function(){if(!1!==qt.paused){qt.paused=!1;for(var Kt=1;Kt<=qt.concurrency;Kt++)qt.process()}}};return qt}},{}],35:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.encodeBinary=function(Yt){for(var Wt="",jt=0;jt<Yt.length;){for(var zt=[0,0,0],Vt=[0,0,0,0],qt=0;qt<zt.length;++qt)zt[qt]=jt<Yt.length?255&Yt.charCodeAt(jt++):0;switch(Vt[0]=zt[0]>>2,Vt[1]=(3&zt[0])<<4|zt[1]>>4,Vt[2]=(15&zt[1])<<2|zt[2]>>6,Vt[3]=63&zt[2],jt-(Yt.length-1)){case 2:Vt[3]=64,Vt[2]=64;break;case 1:Vt[3]=64;}for(var Kt=0;Kt<Vt.length;++Kt)Wt+="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=".charAt(Vt[Kt])}return Wt}},{}],36:[function(Bt,Gt){var Ht=Bt("./Loader").default,Yt=Bt("./Resource").default,Wt=Bt("./async"),jt=Bt("./b64");Ht.Resource=Yt,Ht.async=Wt,Ht.base64=jt,Gt.exports=Ht,Gt.exports.default=Ht},{"./Loader":32,"./Resource":33,"./async":34,"./b64":35}],37:[function(Bt,Gt,Xt){function Ht(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}Xt.__esModule=!0;var Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(Vt){return typeof Vt}:function(Vt){return Vt&&"function"==typeof Symbol&&Vt.constructor===Symbol&&Vt!==Symbol.prototype?"symbol":typeof Vt};Xt.blobMiddlewareFactory=function(){return function(Vt,qt){if(Vt.data){if(Vt.xhr&&Vt.xhrType===Wt.default.XHR_RESPONSE_TYPE.BLOB)if(!(window.Blob&&"string"!=typeof Vt.data)){var Qt=Vt.xhr.getResponseHeader("content-type");if(Qt&&0===Qt.indexOf("image"))return Vt.data=new Image,Vt.data.src="data:"+Qt+";base64,"+jt.default.encodeBinary(Vt.xhr.responseText),Vt.type=Wt.default.TYPE.IMAGE,void(Vt.data.onload=function(){Vt.data.onload=null,qt()})}else if(0===Vt.data.type.indexOf("image")){var Kt=function(){var Zt=zt.createObjectURL(Vt.data);return Vt.blob=Vt.data,Vt.data=new Image,Vt.data.src=Zt,Vt.type=Wt.default.TYPE.IMAGE,Vt.data.onload=function(){zt.revokeObjectURL(Zt),Vt.data.onload=null,qt()},{v:void 0}}();if("object"===(void 0===Kt?"undefined":Yt(Kt)))return Kt.v}qt()}else qt()}};var Wt=Ht(Bt("../../Resource")),jt=Ht(Bt("../../b64")),zt=window.URL||window.webkitURL},{"../../Resource":33,"../../b64":35}],38:[function(Bt,Gt,Xt){function Ht(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}function Yt(Vt,qt){return Vt._head?(Vt._tail._next=qt,qt._prev=Vt._tail,Vt._tail=qt):(Vt._head=qt,Vt._tail=qt),qt._owner=Vt,qt}Object.defineProperty(Xt,"__esModule",{value:!0});var Wt=function(){function Vt(qt,Kt){for(var Qt=0,Zt;Qt<Kt.length;Qt++)Zt=Kt[Qt],Zt.enumerable=Zt.enumerable||!1,Zt.configurable=!0,"value"in Zt&&(Zt.writable=!0),Object.defineProperty(qt,Zt.key,Zt)}return function(qt,Kt,Qt){return Kt&&Vt(qt.prototype,Kt),Qt&&Vt(qt,Qt),qt}}(),jt=function(){function Vt(qt,Kt,Qt){void 0===Kt&&(Kt=!1),Ht(this,Vt),this._fn=qt,this._once=Kt,this._thisArg=Qt,this._next=this._prev=this._owner=null}return Wt(Vt,[{key:"detach",value:function(){return null!==this._owner&&(this._owner.detach(this),!0)}}]),Vt}(),zt=function(){function Vt(){Ht(this,Vt),this._head=this._tail=void 0}return Wt(Vt,[{key:"handlers",value:function(){var qt=!(0>=arguments.length||void 0===arguments[0])&&arguments[0],Kt=this._head;if(qt)return!!Kt;for(var Qt=[];Kt;)Qt.push(Kt),Kt=Kt._next;return Qt}},{key:"has",value:function(qt){if(!(qt instanceof jt))throw new Error("MiniSignal#has(): First arg must be a MiniSignalBinding object.");return qt._owner===this}},{key:"dispatch",value:function(){var qt=this._head;if(!qt)return!1;for(;qt;)qt._once&&this.detach(qt),qt._fn.apply(qt._thisArg,arguments),qt=qt._next;return!0}},{key:"add",value:function(qt){var Kt=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!=typeof qt)throw new Error("MiniSignal#add(): First arg must be a Function.");return Yt(this,new jt(qt,!1,Kt))}},{key:"once",value:function(qt){var Kt=1>=arguments.length||void 0===arguments[1]?null:arguments[1];if("function"!=typeof qt)throw new Error("MiniSignal#once(): First arg must be a Function.");return Yt(this,new jt(qt,!0,Kt))}},{key:"detach",value:function(qt){if(!(qt instanceof jt))throw new Error("MiniSignal#detach(): First arg must be a MiniSignalBinding object.");return qt._owner===this?(qt._prev&&(qt._prev._next=qt._next),qt._next&&(qt._next._prev=qt._prev),qt===this._head?(this._head=qt._next,null===qt._next&&(this._tail=null)):qt===this._tail&&(this._tail=qt._prev,this._tail._next=null),qt._owner=null,this):this}},{key:"detachAll",value:function(){var qt=this._head;if(!qt)return this;for(this._head=this._tail=null;qt;)qt._owner=null,qt=qt._next;return this}}]),Vt}();zt.MiniSignalBinding=jt,Xt.default=zt,Gt.exports=Xt.default},{}],39:[function(Bt,Gt){Gt.exports=function(Ht,Yt){Yt=Yt||{};for(var Wt={key:["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],q:{name:"queryKey",parser:/(?:^|&)([^&=]*)=?([^&]*)/g},parser:{strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}},jt=Wt.parser[Yt.strictMode?"strict":"loose"].exec(Ht),zt={},Vt=14;Vt--;)zt[Wt.key[Vt]]=jt[Vt]||"";return zt[Wt.q.name]={},zt[Wt.key[12]].replace(Wt.q.parser,function(qt,Kt,Qt){Kt&&(zt[Wt.q.name][Kt]=Qt)}),zt}},{}],40:[function(Bt,Gt,Xt){function Ht(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Xt.__esModule=!0;var Yt=function(Zt){if(Zt&&Zt.__esModule)return Zt;var Jt={};if(null!=Zt)for(var $t in Zt)Object.prototype.hasOwnProperty.call(Zt,$t)&&(Jt[$t]=Zt[$t]);return Jt.default=Zt,Jt}(Bt("../core")),Wt=Ht(Bt("ismobilejs")),jt=Ht(Bt("./accessibleTarget"));Yt.utils.mixins.delayMixin(Yt.DisplayObject.prototype,jt.default);var zt=100,Kt=2,Qt=function(){function Zt(Jt){!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Zt),(Wt.default.tablet||Wt.default.phone)&&!navigator.isCocoonJS&&this.createTouchHook();var $t=document.createElement("div");$t.style.width=zt+"px",$t.style.height=zt+"px",$t.style.position="absolute",$t.style.top=0+"px",$t.style.left=0+"px",$t.style.zIndex=Kt,this.div=$t,this.pool=[],this.renderId=0,this.debug=!1,this.renderer=Jt,this.children=[],this._onKeyDown=this._onKeyDown.bind(this),this._onMouseMove=this._onMouseMove.bind(this),this.isActive=!1,this.isMobileAccessabillity=!1,window.addEventListener("keydown",this._onKeyDown,!1)}return Zt.prototype.createTouchHook=function(){var Jt=this,$t=document.createElement("button");$t.style.width="1px",$t.style.height="1px",$t.style.position="absolute",$t.style.top="-1000px",$t.style.left="-1000px",$t.style.zIndex=2,$t.style.backgroundColor="#FF0000",$t.title="HOOK DIV",$t.addEventListener("focus",function(){Jt.isMobileAccessabillity=!0,Jt.activate(),document.body.removeChild($t)}),document.body.appendChild($t)},Zt.prototype.activate=function(){this.isActive||(this.isActive=!0,window.document.addEventListener("mousemove",this._onMouseMove,!0),window.removeEventListener("keydown",this._onKeyDown,!1),this.renderer.on("postrender",this.update,this),this.renderer.view.parentNode&&this.renderer.view.parentNode.appendChild(this.div))},Zt.prototype.deactivate=function(){this.isActive&&!this.isMobileAccessabillity&&(this.isActive=!1,window.document.removeEventListener("mousemove",this._onMouseMove),window.addEventListener("keydown",this._onKeyDown,!1),this.renderer.off("postrender",this.update),this.div.parentNode&&this.div.parentNode.removeChild(this.div))},Zt.prototype.updateAccessibleObjects=function(Jt){if(Jt.visible){Jt.accessible&&Jt.interactive&&(Jt._accessibleActive||this.addChild(Jt),Jt.renderId=this.renderId);for(var $t=Jt.children,en=$t.length-1;0<=en;en--)this.updateAccessibleObjects($t[en])}},Zt.prototype.update=function(){if(this.renderer.renderingToScreen){this.updateAccessibleObjects(this.renderer._lastObjectRendered);var Jt=this.renderer.view.getBoundingClientRect(),$t=Jt.width/this.renderer.width,en=Jt.height/this.renderer.height,tn=this.div;tn.style.left=Jt.left+"px",tn.style.top=Jt.top+"px",tn.style.width=this.renderer.width+"px",tn.style.height=this.renderer.height+"px";for(var nn=0,rn;nn<this.children.length;nn++)if(rn=this.children[nn],rn.renderId!==this.renderId)rn._accessibleActive=!1,Yt.utils.removeItems(this.children,nn,1),this.div.removeChild(rn._accessibleDiv),this.pool.push(rn._accessibleDiv),rn._accessibleDiv=null,nn--,0===this.children.length&&this.deactivate();else{tn=rn._accessibleDiv;var an=rn.hitArea,on=rn.worldTransform;rn.hitArea?(tn.style.left=(on.tx+an.x*on.a)*$t+"px",tn.style.top=(on.ty+an.y*on.d)*en+"px",tn.style.width=an.width*on.a*$t+"px",tn.style.height=an.height*on.d*en+"px"):(an=rn.getBounds(),this.capHitArea(an),tn.style.left=an.x*$t+"px",tn.style.top=an.y*en+"px",tn.style.width=an.width*$t+"px",tn.style.height=an.height*en+"px")}this.renderId++}},Zt.prototype.capHitArea=function(Jt){0>Jt.x&&(Jt.width+=Jt.x,Jt.x=0),0>Jt.y&&(Jt.height+=Jt.y,Jt.y=0),Jt.x+Jt.width>this.renderer.width&&(Jt.width=this.renderer.width-Jt.x),Jt.y+Jt.height>this.renderer.height&&(Jt.height=this.renderer.height-Jt.y)},Zt.prototype.addChild=function(Jt){var $t=this.pool.pop();$t||(($t=document.createElement("button")).style.width=zt+"px",$t.style.height=zt+"px",$t.style.backgroundColor=this.debug?"rgba(255,0,0,0.5)":"transparent",$t.style.position="absolute",$t.style.zIndex=Kt,$t.style.borderStyle="none",$t.addEventListener("click",this._onClick.bind(this)),$t.addEventListener("focus",this._onFocus.bind(this)),$t.addEventListener("focusout",this._onFocusOut.bind(this))),Jt.accessibleTitle?$t.title=Jt.accessibleTitle:Jt.accessibleTitle||Jt.accessibleHint||($t.title="displayObject "+this.tabIndex),Jt.accessibleHint&&$t.setAttribute("aria-label",Jt.accessibleHint),Jt._accessibleActive=!0,Jt._accessibleDiv=$t,$t.displayObject=Jt,this.children.push(Jt),this.div.appendChild(Jt._accessibleDiv),Jt._accessibleDiv.tabIndex=Jt.tabIndex},Zt.prototype._onClick=function(Jt){var $t=this.renderer.plugins.interaction;$t.dispatchEvent(Jt.target.displayObject,"click",$t.eventData)},Zt.prototype._onFocus=function(Jt){var $t=this.renderer.plugins.interaction;$t.dispatchEvent(Jt.target.displayObject,"mouseover",$t.eventData)},Zt.prototype._onFocusOut=function(Jt){var $t=this.renderer.plugins.interaction;$t.dispatchEvent(Jt.target.displayObject,"mouseout",$t.eventData)},Zt.prototype._onKeyDown=function(Jt){9===Jt.keyCode&&this.activate()},Zt.prototype._onMouseMove=function(){this.deactivate()},Zt.prototype.destroy=function(){this.div=null;for(var Jt=0;Jt<this.children.length;Jt++)this.children[Jt].div=null;window.document.removeEventListener("mousemove",this._onMouseMove),window.removeEventListener("keydown",this._onKeyDown),this.pool=null,this.children=null,this.renderer=null},Zt}();Xt.default=Qt,Yt.WebGLRenderer.registerPlugin("accessibility",Qt),Yt.CanvasRenderer.registerPlugin("accessibility",Qt)},{"../core":65,"./accessibleTarget":41,ismobilejs:4}],41:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default={accessible:!1,accessibleTitle:null,accessibleHint:null,tabIndex:0,_accessibleActive:!1,_accessibleDiv:!1}},{}],42:[function(Bt,Gt,Xt){function Ht(jt){return jt&&jt.__esModule?jt:{default:jt}}Xt.__esModule=!0;var Yt=Bt("./accessibleTarget");Object.defineProperty(Xt,"accessibleTarget",{enumerable:!0,get:function(){return Ht(Yt).default}});var Wt=Bt("./AccessibilityManager");Object.defineProperty(Xt,"AccessibilityManager",{enumerable:!0,get:function(){return Ht(Wt).default}})},{"./AccessibilityManager":40,"./accessibleTarget":41}],43:[function(Bt,Gt,Xt){function Ht(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Xt.__esModule=!0;var Yt=function(){function Qt(Zt,Jt){for(var $t=0,en;$t<Jt.length;$t++)en=Jt[$t],en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Zt,en.key,en)}return function(Zt,Jt,$t){return Jt&&Qt(Zt.prototype,Jt),$t&&Qt(Zt,$t),Zt}}(),Wt=Bt("./autoDetectRenderer"),jt=Ht(Bt("./display/Container")),zt=Bt("./ticker"),Vt=Ht(Bt("./settings")),qt=Bt("./const"),Kt=function(){function Qt(Zt,Jt,$t,en,tn){!function(nn,rn){if(!(nn instanceof rn))throw new TypeError("Cannot call a class as a function")}(this,Qt),"number"==typeof Zt&&(Zt=Object.assign({width:Zt,height:Jt||Vt.default.RENDER_OPTIONS.height,forceCanvas:!!en,sharedTicker:!!tn},$t)),this._options=Zt=Object.assign({autoStart:!0,sharedTicker:!1,forceCanvas:!1,sharedLoader:!1},Zt),this.renderer=(0,Wt.autoDetectRenderer)(Zt),this.stage=new jt.default,this._ticker=null,this.ticker=Zt.sharedTicker?zt.shared:new zt.Ticker,Zt.autoStart&&this.start()}return Qt.prototype.render=function(){this.renderer.render(this.stage)},Qt.prototype.stop=function(){this._ticker.stop()},Qt.prototype.start=function(){this._ticker.start()},Qt.prototype.destroy=function(Zt){var Jt=this._ticker;this.ticker=null,Jt.destroy(),this.stage.destroy(),this.stage=null,this.renderer.destroy(Zt),this.renderer=null,this._options=null},Yt(Qt,[{key:"ticker",set:function(Zt){this._ticker&&this._ticker.remove(this.render,this),this._ticker=Zt,Zt&&Zt.add(this.render,this,qt.UPDATE_PRIORITY.LOW)},get:function(){return this._ticker}},{key:"view",get:function(){return this.renderer.view}},{key:"screen",get:function(){return this.renderer.screen}}]),Qt}();Xt.default=Kt},{"./autoDetectRenderer":45,"./const":46,"./display/Container":48,"./settings":101,"./ticker":120}],44:[function(Bt,Gt,Xt){function Ht(zt,Vt){if(zt instanceof Array){if("precision"!==zt[0].substring(0,9)){var qt=zt.slice(0);return qt.unshift("precision "+Vt+" float;"),qt}}else if("precision"!==zt.substring(0,9))return"precision "+Vt+" float;\n"+zt;return zt}Xt.__esModule=!0;var Yt=Bt("pixi-gl-core"),Wt=function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("./settings")),jt=function(zt){function Vt(qt,Kt,Qt){return function(Zt,Jt){if(!(Zt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Vt),function(Zt,Jt){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Zt}(this,zt.call(this,qt,Ht(Kt,Wt.default.PRECISION_VERTEX),Ht(Qt,Wt.default.PRECISION_FRAGMENT)))}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt}(Yt.GLShader);Xt.default=jt},{"./settings":101,"pixi-gl-core":12}],45:[function(Bt,Gt,Xt){function Ht(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0,Xt.autoDetectRenderer=function(zt,Vt,qt,Kt){var Qt=zt&&zt.forceCanvas;return void 0!==Kt&&(Qt=Kt),!Qt&&Yt.isWebGLSupported()?new jt.default(zt,Vt,qt):new Wt.default(zt,Vt,qt)};var Yt=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("./utils")),Wt=Ht(Bt("./renderers/canvas/CanvasRenderer")),jt=Ht(Bt("./renderers/webgl/WebGLRenderer"))},{"./renderers/canvas/CanvasRenderer":77,"./renderers/webgl/WebGLRenderer":84,"./utils":124}],46:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.VERSION="4.5.6",Xt.PI_2=2*Math.PI,Xt.RAD_TO_DEG=180/Math.PI,Xt.DEG_TO_RAD=Math.PI/180,Xt.RENDERER_TYPE={UNKNOWN:0,WEBGL:1,CANVAS:2},Xt.BLEND_MODES={NORMAL:0,ADD:1,MULTIPLY:2,SCREEN:3,OVERLAY:4,DARKEN:5,LIGHTEN:6,COLOR_DODGE:7,COLOR_BURN:8,HARD_LIGHT:9,SOFT_LIGHT:10,DIFFERENCE:11,EXCLUSION:12,HUE:13,SATURATION:14,COLOR:15,LUMINOSITY:16,NORMAL_NPM:17,ADD_NPM:18,SCREEN_NPM:19},Xt.DRAW_MODES={POINTS:0,LINES:1,LINE_LOOP:2,LINE_STRIP:3,TRIANGLES:4,TRIANGLE_STRIP:5,TRIANGLE_FAN:6},Xt.SCALE_MODES={LINEAR:0,NEAREST:1},Xt.WRAP_MODES={CLAMP:0,REPEAT:1,MIRRORED_REPEAT:2},Xt.GC_MODES={AUTO:0,MANUAL:1},Xt.URL_FILE_EXTENSION=/\.(\w{3,4})(?:$|\?|#)/i,Xt.DATA_URI=/^\s*data:(?:([\w-]+)\/([\w+.-]+))?(?:;(charset=[\w-]+|base64))?,(.*)/i,Xt.SVG_SIZE=/<svg[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*(?:\s(width|height)=('|")(\d*(?:\.\d+)?)(?:px)?('|"))[^>]*>/i,Xt.SHAPES={POLY:0,RECT:1,CIRC:2,ELIP:3,RREC:4},Xt.PRECISION={LOW:"lowp",MEDIUM:"mediump",HIGH:"highp"},Xt.TRANSFORM_MODE={STATIC:0,DYNAMIC:1},Xt.TEXT_GRADIENT={LINEAR_VERTICAL:0,LINEAR_HORIZONTAL:1},Xt.UPDATE_PRIORITY={INTERACTION:50,HIGH:25,NORMAL:0,LOW:-25,UTILITY:-50}},{}],47:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=Bt("../math"),Yt=function(){function Wt(){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0,this.rect=null}return Wt.prototype.isEmpty=function(){return this.minX>this.maxX||this.minY>this.maxY},Wt.prototype.clear=function(){this.updateID++,this.minX=1/0,this.minY=1/0,this.maxX=-1/0,this.maxY=-1/0},Wt.prototype.getRectangle=function(jt){return this.minX>this.maxX||this.minY>this.maxY?Ht.Rectangle.EMPTY:(jt=jt||new Ht.Rectangle(0,0,1,1),jt.x=this.minX,jt.y=this.minY,jt.width=this.maxX-this.minX,jt.height=this.maxY-this.minY,jt)},Wt.prototype.addPoint=function(jt){this.minX=Math.min(this.minX,jt.x),this.maxX=Math.max(this.maxX,jt.x),this.minY=Math.min(this.minY,jt.y),this.maxY=Math.max(this.maxY,jt.y)},Wt.prototype.addQuad=function(jt){var zt=this.minX,Vt=this.minY,qt=this.maxX,Kt=this.maxY,Qt=jt[0],Zt=jt[1];zt=Qt<zt?Qt:zt,Vt=Zt<Vt?Zt:Vt,qt=Qt>qt?Qt:qt,Kt=Zt>Kt?Zt:Kt,Qt=jt[2],Zt=jt[3],zt=Qt<zt?Qt:zt,Vt=Zt<Vt?Zt:Vt,qt=Qt>qt?Qt:qt,Kt=Zt>Kt?Zt:Kt,Qt=jt[4],Zt=jt[5],zt=Qt<zt?Qt:zt,Vt=Zt<Vt?Zt:Vt,qt=Qt>qt?Qt:qt,Kt=Zt>Kt?Zt:Kt,Qt=jt[6],Zt=jt[7],zt=Qt<zt?Qt:zt,Vt=Zt<Vt?Zt:Vt,qt=Qt>qt?Qt:qt,Kt=Zt>Kt?Zt:Kt,this.minX=zt,this.minY=Vt,this.maxX=qt,this.maxY=Kt},Wt.prototype.addFrame=function(jt,zt,Vt,qt,Kt){var Qt=jt.worldTransform,Zt=Qt.a,Jt=Qt.b,$t=Qt.c,en=Qt.d,tn=Qt.tx,nn=Qt.ty,rn=this.minX,an=this.minY,on=this.maxX,sn=this.maxY,dn=Zt*zt+$t*Vt+tn,ln=Jt*zt+en*Vt+nn;rn=dn<rn?dn:rn,an=ln<an?ln:an,on=dn>on?dn:on,sn=ln>sn?ln:sn,ln=Jt*qt+en*Vt+nn,rn=(dn=Zt*qt+$t*Vt+tn)<rn?dn:rn,an=ln<an?ln:an,on=dn>on?dn:on,sn=ln>sn?ln:sn,ln=Jt*zt+en*Kt+nn,rn=(dn=Zt*zt+$t*Kt+tn)<rn?dn:rn,an=ln<an?ln:an,on=dn>on?dn:on,sn=ln>sn?ln:sn,ln=Jt*qt+en*Kt+nn,rn=(dn=Zt*qt+$t*Kt+tn)<rn?dn:rn,an=ln<an?ln:an,on=dn>on?dn:on,sn=ln>sn?ln:sn,this.minX=rn,this.minY=an,this.maxX=on,this.maxY=sn},Wt.prototype.addVertices=function(jt,zt,Vt,qt){for(var Kt=jt.worldTransform,Qt=Kt.a,Zt=Kt.b,Jt=Kt.c,$t=Kt.d,en=Kt.tx,tn=Kt.ty,nn=this.minX,rn=this.minY,an=this.maxX,on=this.maxY,sn=Vt;sn<qt;sn+=2){var dn=zt[sn],ln=zt[sn+1],un=Qt*dn+Jt*ln+en,pn=$t*ln+Zt*dn+tn;nn=un<nn?un:nn,rn=pn<rn?pn:rn,an=un>an?un:an,on=pn>on?pn:on}this.minX=nn,this.minY=rn,this.maxX=an,this.maxY=on},Wt.prototype.addBounds=function(jt){var zt=this.minX,Vt=this.minY,qt=this.maxX,Kt=this.maxY;this.minX=jt.minX<zt?jt.minX:zt,this.minY=jt.minY<Vt?jt.minY:Vt,this.maxX=jt.maxX>qt?jt.maxX:qt,this.maxY=jt.maxY>Kt?jt.maxY:Kt},Wt.prototype.addBoundsMask=function(jt,zt){var Vt=jt.minX>zt.minX?jt.minX:zt.minX,qt=jt.minY>zt.minY?jt.minY:zt.minY,Kt=jt.maxX<zt.maxX?jt.maxX:zt.maxX,Qt=jt.maxY<zt.maxY?jt.maxY:zt.maxY;if(Vt<=Kt&&qt<=Qt){var Zt=this.minX,Jt=this.minY,$t=this.maxX,en=this.maxY;this.minX=Vt<Zt?Vt:Zt,this.minY=qt<Jt?qt:Jt,this.maxX=Kt>$t?Kt:$t,this.maxY=Qt>en?Qt:en}},Wt.prototype.addBoundsArea=function(jt,zt){var Vt=jt.minX>zt.x?jt.minX:zt.x,qt=jt.minY>zt.y?jt.minY:zt.y,Kt=jt.maxX<zt.x+zt.width?jt.maxX:zt.x+zt.width,Qt=jt.maxY<zt.y+zt.height?jt.maxY:zt.y+zt.height;if(Vt<=Kt&&qt<=Qt){var Zt=this.minX,Jt=this.minY,$t=this.maxX,en=this.maxY;this.minX=Vt<Zt?Vt:Zt,this.minY=qt<Jt?qt:Jt,this.maxX=Kt>$t?Kt:$t,this.maxY=Qt>en?Qt:en}},Wt}();Xt.default=Yt},{"../math":70}],48:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=Bt("../utils"),Wt=function(jt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,jt.call(this));return Vt.children=[],Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.onChildrenChange=function(){},zt.prototype.addChild=function(Vt){var qt=arguments.length;if(1<qt)for(var Kt=0;Kt<qt;Kt++)this.addChild(arguments[Kt]);else Vt.parent&&Vt.parent.removeChild(Vt),Vt.parent=this,Vt.transform._parentID=-1,this.children.push(Vt),this._boundsID++,this.onChildrenChange(this.children.length-1),Vt.emit("added",this);return Vt},zt.prototype.addChildAt=function(Vt,qt){if(0>qt||qt>this.children.length)throw new Error(Vt+"addChildAt: The index "+qt+" supplied is out of bounds "+this.children.length);return Vt.parent&&Vt.parent.removeChild(Vt),Vt.parent=this,Vt.transform._parentID=-1,this.children.splice(qt,0,Vt),this._boundsID++,this.onChildrenChange(qt),Vt.emit("added",this),Vt},zt.prototype.swapChildren=function(Vt,qt){if(Vt!==qt){var Kt=this.getChildIndex(Vt),Qt=this.getChildIndex(qt);this.children[Kt]=qt,this.children[Qt]=Vt,this.onChildrenChange(Kt<Qt?Kt:Qt)}},zt.prototype.getChildIndex=function(Vt){var qt=this.children.indexOf(Vt);if(-1===qt)throw new Error("The supplied DisplayObject must be a child of the caller");return qt},zt.prototype.setChildIndex=function(Vt,qt){if(0>qt||qt>=this.children.length)throw new Error("The supplied index is out of bounds");var Kt=this.getChildIndex(Vt);(0,Yt.removeItems)(this.children,Kt,1),this.children.splice(qt,0,Vt),this.onChildrenChange(qt)},zt.prototype.getChildAt=function(Vt){if(0>Vt||Vt>=this.children.length)throw new Error("getChildAt: Index ("+Vt+") does not exist.");return this.children[Vt]},zt.prototype.removeChild=function(Vt){var qt=arguments.length;if(1<qt)for(var Kt=0;Kt<qt;Kt++)this.removeChild(arguments[Kt]);else{var Qt=this.children.indexOf(Vt);if(-1===Qt)return null;Vt.parent=null,Vt.transform._parentID=-1,(0,Yt.removeItems)(this.children,Qt,1),this._boundsID++,this.onChildrenChange(Qt),Vt.emit("removed",this)}return Vt},zt.prototype.removeChildAt=function(Vt){var qt=this.getChildAt(Vt);return qt.parent=null,qt.transform._parentID=-1,(0,Yt.removeItems)(this.children,Vt,1),this._boundsID++,this.onChildrenChange(Vt),qt.emit("removed",this),qt},zt.prototype.removeChildren=function(){var Vt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,qt=arguments[1],Kt=Vt,Qt="number"==typeof qt?qt:this.children.length,Zt=Qt-Kt,Jt;if(0<Zt&&Zt<=Qt){Jt=this.children.splice(Kt,Zt);for(var $t=0;$t<Jt.length;++$t)Jt[$t].parent=null,Jt[$t].transform&&(Jt[$t].transform._parentID=-1);this._boundsID++,this.onChildrenChange(Vt);for(var en=0;en<Jt.length;++en)Jt[en].emit("removed",this);return Jt}if(0==Zt&&0===this.children.length)return[];throw new RangeError("removeChildren: numeric values are outside the acceptable range.")},zt.prototype.updateTransform=function(){this._boundsID++,this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha;for(var Vt=0,qt=this.children.length,Kt;Vt<qt;++Vt)Kt=this.children[Vt],Kt.visible&&Kt.updateTransform()},zt.prototype.calculateBounds=function(){this._bounds.clear(),this._calculateBounds();for(var Vt=0,qt;Vt<this.children.length;Vt++)qt=this.children[Vt],qt.visible&&qt.renderable&&(qt.calculateBounds(),qt._mask?(qt._mask.calculateBounds(),this._bounds.addBoundsMask(qt._bounds,qt._mask._bounds)):qt.filterArea?this._bounds.addBoundsArea(qt._bounds,qt.filterArea):this._bounds.addBounds(qt._bounds));this._lastBoundsID=this._boundsID},zt.prototype._calculateBounds=function(){},zt.prototype.renderWebGL=function(Vt){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable)if(this._mask||this._filters)this.renderAdvancedWebGL(Vt);else{this._renderWebGL(Vt);for(var qt=0,Kt=this.children.length;qt<Kt;++qt)this.children[qt].renderWebGL(Vt)}},zt.prototype.renderAdvancedWebGL=function(Vt){Vt.flush();var qt=this._filters,Kt=this._mask;if(qt){this._enabledFilters||(this._enabledFilters=[]),this._enabledFilters.length=0;for(var Qt=0;Qt<qt.length;Qt++)qt[Qt].enabled&&this._enabledFilters.push(qt[Qt]);this._enabledFilters.length&&Vt.filterManager.pushFilter(this,this._enabledFilters)}Kt&&Vt.maskManager.pushMask(this,this._mask),this._renderWebGL(Vt);for(var Zt=0,Jt=this.children.length;Zt<Jt;Zt++)this.children[Zt].renderWebGL(Vt);Vt.flush(),Kt&&Vt.maskManager.popMask(this,this._mask),qt&&this._enabledFilters&&this._enabledFilters.length&&Vt.filterManager.popFilter()},zt.prototype._renderWebGL=function(){},zt.prototype._renderCanvas=function(){},zt.prototype.renderCanvas=function(Vt){if(this.visible&&!(0>=this.worldAlpha)&&this.renderable){this._mask&&Vt.maskManager.pushMask(this._mask),this._renderCanvas(Vt);for(var qt=0,Kt=this.children.length;qt<Kt;++qt)this.children[qt].renderCanvas(Vt);this._mask&&Vt.maskManager.popMask(Vt)}},zt.prototype.destroy=function(Vt){jt.prototype.destroy.call(this);var qt="boolean"==typeof Vt?Vt:Vt&&Vt.children,Kt=this.removeChildren(0,this.children.length);if(qt)for(var Qt=0;Qt<Kt.length;++Qt)Kt[Qt].destroy(Vt)},Ht(zt,[{key:"width",get:function(){return this.scale.x*this.getLocalBounds().width},set:function(Vt){var qt=this.getLocalBounds().width;this.scale.x=0===qt?1:Vt/qt,this._width=Vt}},{key:"height",get:function(){return this.scale.y*this.getLocalBounds().height},set:function(Vt){var qt=this.getLocalBounds().height;this.scale.y=0===qt?1:Vt/qt,this._height=Vt}}]),zt}(function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./DisplayObject")).default);Xt.default=Wt,Wt.prototype.containerUpdateTransform=Wt.prototype.updateTransform},{"../utils":124,"./DisplayObject":49}],49:[function(Bt,Gt,Xt){function Ht(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Xt.__esModule=!0;var Yt=function(){function Jt($t,en){for(var tn=0,nn;tn<en.length;tn++)nn=en[tn],nn.enumerable=nn.enumerable||!1,nn.configurable=!0,"value"in nn&&(nn.writable=!0),Object.defineProperty($t,nn.key,nn)}return function($t,en,tn){return en&&Jt($t.prototype,en),tn&&Jt($t,tn),$t}}(),Wt=Ht(Bt("eventemitter3")),jt=Bt("../const"),zt=Ht(Bt("../settings")),Vt=Ht(Bt("./TransformStatic")),qt=Ht(Bt("./Transform")),Kt=Ht(Bt("./Bounds")),Qt=Bt("../math"),Zt=function(Jt){function $t(){!function(nn,rn){if(!(nn instanceof rn))throw new TypeError("Cannot call a class as a function")}(this,$t);var en=function(nn,rn){if(!nn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rn&&("object"==typeof rn||"function"==typeof rn)?rn:nn}(this,Jt.call(this)),tn=zt.default.TRANSFORM_MODE===jt.TRANSFORM_MODE.STATIC?Vt.default:qt.default;return en.tempDisplayObjectParent=null,en.transform=new tn,en.alpha=1,en.visible=!0,en.renderable=!0,en.parent=null,en.worldAlpha=1,en.filterArea=null,en._filters=null,en._enabledFilters=null,en._bounds=new Kt.default,en._boundsID=0,en._lastBoundsID=-1,en._boundsRect=null,en._localBoundsRect=null,en._mask=null,en._destroyed=!1,en}return function(en,tn){if("function"!=typeof tn&&null!==tn)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);en.prototype=Object.create(tn&&tn.prototype,{constructor:{value:en,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(en,tn):en.__proto__=tn)}($t,Jt),$t.prototype.updateTransform=function(){this.transform.updateTransform(this.parent.transform),this.worldAlpha=this.alpha*this.parent.worldAlpha,this._bounds.updateID++},$t.prototype._recursivePostUpdateTransform=function(){this.parent?(this.parent._recursivePostUpdateTransform(),this.transform.updateTransform(this.parent.transform)):this.transform.updateTransform(this._tempDisplayObjectParent.transform)},$t.prototype.getBounds=function(en,tn){return en||(this.parent?(this._recursivePostUpdateTransform(),this.updateTransform()):(this.parent=this._tempDisplayObjectParent,this.updateTransform(),this.parent=null)),this._boundsID!==this._lastBoundsID&&this.calculateBounds(),tn||(this._boundsRect||(this._boundsRect=new Qt.Rectangle),tn=this._boundsRect),this._bounds.getRectangle(tn)},$t.prototype.getLocalBounds=function(en){var tn=this.transform,nn=this.parent;this.parent=null,this.transform=this._tempDisplayObjectParent.transform,en||(this._localBoundsRect||(this._localBoundsRect=new Qt.Rectangle),en=this._localBoundsRect);var rn=this.getBounds(!1,en);return this.parent=nn,this.transform=tn,rn},$t.prototype.toGlobal=function(en,tn){return 2<arguments.length&&void 0!==arguments[2]&&arguments[2]||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.apply(en,tn)},$t.prototype.toLocal=function(en,tn,nn,rn){return tn&&(en=tn.toGlobal(en,nn,rn)),rn||(this._recursivePostUpdateTransform(),this.parent?this.displayObjectUpdateTransform():(this.parent=this._tempDisplayObjectParent,this.displayObjectUpdateTransform(),this.parent=null)),this.worldTransform.applyInverse(en,nn)},$t.prototype.renderWebGL=function(){},$t.prototype.renderCanvas=function(){},$t.prototype.setParent=function(en){if(!en||!en.addChild)throw new Error("setParent: Argument must be a Container");return en.addChild(this),en},$t.prototype.setTransform=function(){var en=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,tn=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,nn=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1,rn=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,an=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,on=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0,sn=6<arguments.length&&void 0!==arguments[6]?arguments[6]:0,dn=7<arguments.length&&void 0!==arguments[7]?arguments[7]:0,ln=8<arguments.length&&void 0!==arguments[8]?arguments[8]:0;return this.position.x=en,this.position.y=tn,this.scale.x=nn||1,this.scale.y=rn||1,this.rotation=an,this.skew.x=on,this.skew.y=sn,this.pivot.x=dn,this.pivot.y=ln,this},$t.prototype.destroy=function(){this.removeAllListeners(),this.parent&&this.parent.removeChild(this),this.transform=null,this.parent=null,this._bounds=null,this._currentBounds=null,this._mask=null,this.filterArea=null,this.interactive=!1,this.interactiveChildren=!1,this._destroyed=!0},Yt($t,[{key:"_tempDisplayObjectParent",get:function(){return null===this.tempDisplayObjectParent&&(this.tempDisplayObjectParent=new $t),this.tempDisplayObjectParent}},{key:"x",get:function(){return this.position.x},set:function(en){this.transform.position.x=en}},{key:"y",get:function(){return this.position.y},set:function(en){this.transform.position.y=en}},{key:"worldTransform",get:function(){return this.transform.worldTransform}},{key:"localTransform",get:function(){return this.transform.localTransform}},{key:"position",get:function(){return this.transform.position},set:function(en){this.transform.position.copy(en)}},{key:"scale",get:function(){return this.transform.scale},set:function(en){this.transform.scale.copy(en)}},{key:"pivot",get:function(){return this.transform.pivot},set:function(en){this.transform.pivot.copy(en)}},{key:"skew",get:function(){return this.transform.skew},set:function(en){this.transform.skew.copy(en)}},{key:"rotation",get:function(){return this.transform.rotation},set:function(en){this.transform.rotation=en}},{key:"worldVisible",get:function(){var en=this;do{if(!en.visible)return!1;en=en.parent}while(en);return!0}},{key:"mask",get:function(){return this._mask},set:function(en){this._mask&&(this._mask.renderable=!0),this._mask=en,this._mask&&(this._mask.renderable=!1)}},{key:"filters",get:function(){return this._filters&&this._filters.slice()},set:function(en){this._filters=en&&en.slice()}}]),$t}(Wt.default);Xt.default=Zt,Zt.prototype.displayObjectUpdateTransform=Zt.prototype.updateTransform},{"../const":46,"../math":70,"../settings":101,"./Bounds":47,"./Transform":50,"./TransformStatic":52,eventemitter3:3}],50:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=Bt("../math"),Wt=function(jt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,jt.call(this));return Vt.position=new Yt.Point(0,0),Vt.scale=new Yt.Point(1,1),Vt.skew=new Yt.ObservablePoint(Vt.updateSkew,Vt,0,0),Vt.pivot=new Yt.Point(0,0),Vt._rotation=0,Vt._cx=1,Vt._sx=0,Vt._cy=0,Vt._sy=1,Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x)},zt.prototype.updateLocalTransform=function(){var Vt=this.localTransform;Vt.a=this._cx*this.scale.x,Vt.b=this._sx*this.scale.x,Vt.c=this._cy*this.scale.y,Vt.d=this._sy*this.scale.y,Vt.tx=this.position.x-(this.pivot.x*Vt.a+this.pivot.y*Vt.c),Vt.ty=this.position.y-(this.pivot.x*Vt.b+this.pivot.y*Vt.d)},zt.prototype.updateTransform=function(Vt){var qt=this.localTransform;qt.a=this._cx*this.scale.x,qt.b=this._sx*this.scale.x,qt.c=this._cy*this.scale.y,qt.d=this._sy*this.scale.y,qt.tx=this.position.x-(this.pivot.x*qt.a+this.pivot.y*qt.c),qt.ty=this.position.y-(this.pivot.x*qt.b+this.pivot.y*qt.d);var Kt=Vt.worldTransform,Qt=this.worldTransform;Qt.a=qt.a*Kt.a+qt.b*Kt.c,Qt.b=qt.a*Kt.b+qt.b*Kt.d,Qt.c=qt.c*Kt.a+qt.d*Kt.c,Qt.d=qt.c*Kt.b+qt.d*Kt.d,Qt.tx=qt.tx*Kt.a+qt.ty*Kt.c+Kt.tx,Qt.ty=qt.tx*Kt.b+qt.ty*Kt.d+Kt.ty,this._worldID++},zt.prototype.setFromMatrix=function(Vt){Vt.decompose(this)},Ht(zt,[{key:"rotation",get:function(){return this._rotation},set:function(Vt){this._rotation=Vt,this.updateSkew()}}]),zt}(function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./TransformBase")).default);Xt.default=Wt},{"../math":70,"./TransformBase":51}],51:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=Bt("../math"),Yt=function(){function Wt(){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.worldTransform=new Ht.Matrix,this.localTransform=new Ht.Matrix,this._worldID=0,this._parentID=0}return Wt.prototype.updateLocalTransform=function(){},Wt.prototype.updateTransform=function(jt){var zt=jt.worldTransform,Vt=this.worldTransform,qt=this.localTransform;Vt.a=qt.a*zt.a+qt.b*zt.c,Vt.b=qt.a*zt.b+qt.b*zt.d,Vt.c=qt.c*zt.a+qt.d*zt.c,Vt.d=qt.c*zt.b+qt.d*zt.d,Vt.tx=qt.tx*zt.a+qt.ty*zt.c+zt.tx,Vt.ty=qt.tx*zt.b+qt.ty*zt.d+zt.ty,this._worldID++},Wt}();Xt.default=Yt,Yt.prototype.updateWorldTransform=Yt.prototype.updateTransform,Yt.IDENTITY=new Yt},{"../math":70}],52:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=Bt("../math"),Wt=function(jt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,jt.call(this));return Vt.position=new Yt.ObservablePoint(Vt.onChange,Vt,0,0),Vt.scale=new Yt.ObservablePoint(Vt.onChange,Vt,1,1),Vt.pivot=new Yt.ObservablePoint(Vt.onChange,Vt,0,0),Vt.skew=new Yt.ObservablePoint(Vt.updateSkew,Vt,0,0),Vt._rotation=0,Vt._cx=1,Vt._sx=0,Vt._cy=0,Vt._sy=1,Vt._localID=0,Vt._currentLocalID=0,Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.onChange=function(){this._localID++},zt.prototype.updateSkew=function(){this._cx=Math.cos(this._rotation+this.skew._y),this._sx=Math.sin(this._rotation+this.skew._y),this._cy=-Math.sin(this._rotation-this.skew._x),this._sy=Math.cos(this._rotation-this.skew._x),this._localID++},zt.prototype.updateLocalTransform=function(){var Vt=this.localTransform;this._localID!==this._currentLocalID&&(Vt.a=this._cx*this.scale._x,Vt.b=this._sx*this.scale._x,Vt.c=this._cy*this.scale._y,Vt.d=this._sy*this.scale._y,Vt.tx=this.position._x-(this.pivot._x*Vt.a+this.pivot._y*Vt.c),Vt.ty=this.position._y-(this.pivot._x*Vt.b+this.pivot._y*Vt.d),this._currentLocalID=this._localID,this._parentID=-1)},zt.prototype.updateTransform=function(Vt){var qt=this.localTransform;if(this._localID!==this._currentLocalID&&(qt.a=this._cx*this.scale._x,qt.b=this._sx*this.scale._x,qt.c=this._cy*this.scale._y,qt.d=this._sy*this.scale._y,qt.tx=this.position._x-(this.pivot._x*qt.a+this.pivot._y*qt.c),qt.ty=this.position._y-(this.pivot._x*qt.b+this.pivot._y*qt.d),this._currentLocalID=this._localID,this._parentID=-1),this._parentID!==Vt._worldID){var Kt=Vt.worldTransform,Qt=this.worldTransform;Qt.a=qt.a*Kt.a+qt.b*Kt.c,Qt.b=qt.a*Kt.b+qt.b*Kt.d,Qt.c=qt.c*Kt.a+qt.d*Kt.c,Qt.d=qt.c*Kt.b+qt.d*Kt.d,Qt.tx=qt.tx*Kt.a+qt.ty*Kt.c+Kt.tx,Qt.ty=qt.tx*Kt.b+qt.ty*Kt.d+Kt.ty,this._parentID=Vt._worldID,this._worldID++}},zt.prototype.setFromMatrix=function(Vt){Vt.decompose(this),this._localID++},Ht(zt,[{key:"rotation",get:function(){return this._rotation},set:function(Vt){this._rotation=Vt,this.updateSkew()}}]),zt}(function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./TransformBase")).default);Xt.default=Wt},{"../math":70,"./TransformBase":51}],53:[function(Bt,Gt,Xt){function Ht(sn){return sn&&sn.__esModule?sn:{default:sn}}Xt.__esModule=!0;var Yt=Ht(Bt("../display/Container")),Wt=Ht(Bt("../textures/RenderTexture")),jt=Ht(Bt("../textures/Texture")),zt=Ht(Bt("./GraphicsData")),Vt=Ht(Bt("../sprites/Sprite")),qt=Bt("../math"),Kt=Bt("../utils"),Qt=Bt("../const"),Zt=Ht(Bt("../display/Bounds")),Jt=Ht(Bt("./utils/bezierCurveTo")),$t=Ht(Bt("../renderers/canvas/CanvasRenderer")),en,tn=new qt.Matrix,nn=new qt.Point,rn=new Float32Array(4),an=new Float32Array(4),on=function(sn){function dn(){var ln=0<arguments.length&&void 0!==arguments[0]&&arguments[0];!function(pn,cn){if(!(pn instanceof cn))throw new TypeError("Cannot call a class as a function")}(this,dn);var un=function(pn,cn){if(!pn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return cn&&("object"==typeof cn||"function"==typeof cn)?cn:pn}(this,sn.call(this));return un.fillAlpha=1,un.lineWidth=0,un.nativeLines=ln,un.lineColor=0,un.graphicsData=[],un.tint=16777215,un._prevTint=16777215,un.blendMode=Qt.BLEND_MODES.NORMAL,un.currentPath=null,un._webGL={},un.isMask=!1,un.boundsPadding=0,un._localBounds=new Zt.default,un.dirty=0,un.fastRectDirty=-1,un.clearDirty=0,un.boundsDirty=-1,un.cachedSpriteDirty=!1,un._spriteRect=null,un._fastRect=!1,un}return function(ln,un){if("function"!=typeof un&&null!==un)throw new TypeError("Super expression must either be null or a function, not "+typeof un);ln.prototype=Object.create(un&&un.prototype,{constructor:{value:ln,enumerable:!1,writable:!0,configurable:!0}}),un&&(Object.setPrototypeOf?Object.setPrototypeOf(ln,un):ln.__proto__=un)}(dn,sn),dn.prototype.clone=function(){var ln=new dn;ln.renderable=this.renderable,ln.fillAlpha=this.fillAlpha,ln.lineWidth=this.lineWidth,ln.lineColor=this.lineColor,ln.tint=this.tint,ln.blendMode=this.blendMode,ln.isMask=this.isMask,ln.boundsPadding=this.boundsPadding,ln.dirty=0,ln.cachedSpriteDirty=this.cachedSpriteDirty;for(var un=0;un<this.graphicsData.length;++un)ln.graphicsData.push(this.graphicsData[un].clone());return ln.currentPath=ln.graphicsData[ln.graphicsData.length-1],ln.updateLocalBounds(),ln},dn.prototype.lineStyle=function(){var ln=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,un=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,pn=2<arguments.length&&void 0!==arguments[2]?arguments[2]:1;if(this.lineWidth=ln,this.lineColor=un,this.lineAlpha=pn,this.currentPath)if(this.currentPath.shape.points.length){var cn=new qt.Polygon(this.currentPath.shape.points.slice(-2));cn.closed=!1,this.drawShape(cn)}else this.currentPath.lineWidth=this.lineWidth,this.currentPath.lineColor=this.lineColor,this.currentPath.lineAlpha=this.lineAlpha;return this},dn.prototype.moveTo=function(ln,un){var pn=new qt.Polygon([ln,un]);return pn.closed=!1,this.drawShape(pn),this},dn.prototype.lineTo=function(ln,un){return this.currentPath.shape.points.push(ln,un),this.dirty++,this},dn.prototype.quadraticCurveTo=function(ln,un,pn,cn){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var hn=this.currentPath.shape.points,fn=0,gn=0;0===hn.length&&this.moveTo(0,0);for(var mn=hn[hn.length-2],yn=hn[hn.length-1],_n=1,bn;20>=_n;++_n)bn=_n/20,fn=mn+(ln-mn)*bn,gn=yn+(un-yn)*bn,hn.push(fn+(ln+(pn-ln)*bn-fn)*bn,gn+(un+(cn-un)*bn-gn)*bn);return this.dirty++,this},dn.prototype.bezierCurveTo=function(ln,un,pn,cn,hn,fn){this.currentPath?0===this.currentPath.shape.points.length&&(this.currentPath.shape.points=[0,0]):this.moveTo(0,0);var gn=this.currentPath.shape.points,mn=gn[gn.length-2],yn=gn[gn.length-1];return gn.length-=2,(0,Jt.default)(mn,yn,ln,un,pn,cn,hn,fn,gn),this.dirty++,this},dn.prototype.arcTo=function(ln,un,pn,cn,hn){this.currentPath?0===this.currentPath.shape.points.length&&this.currentPath.shape.points.push(ln,un):this.moveTo(ln,un);var fn=this.currentPath.shape.points,gn=fn[fn.length-2],mn=fn[fn.length-1]-un,yn=gn-ln,_n=cn-un,bn=pn-ln,xn=Math.abs(mn*bn-yn*_n);if(1e-8>xn||0===hn)fn[fn.length-2]===ln&&fn[fn.length-1]===un||fn.push(ln,un);else{var vn=mn*mn+yn*yn,Tn=_n*_n+bn*bn,Sn=mn*_n+yn*bn,En=hn*Math.sqrt(vn)/xn,wn=hn*Math.sqrt(Tn)/xn,An=En*Sn/vn,Cn=wn*Sn/Tn,Pn=En*bn+wn*yn,Mn=En*_n+wn*mn,Ln=Math.atan2(mn*(wn+An)-Mn,yn*(wn+An)-Pn),kn=Math.atan2(_n*(En+Cn)-Mn,bn*(En+Cn)-Pn);this.arc(Pn+ln,Mn+un,hn,Ln,kn,yn*_n>bn*mn)}return this.dirty++,this},dn.prototype.arc=function(ln,un,pn,cn,hn){var fn=5<arguments.length&&void 0!==arguments[5]&&arguments[5];if(cn===hn)return this;!fn&&hn<=cn?hn+=2*Math.PI:fn&&cn<=hn&&(cn+=2*Math.PI);var gn=hn-cn,mn=40*Math.ceil(Math.abs(gn)/(2*Math.PI));if(0==gn)return this;var yn=ln+Math.cos(cn)*pn,_n=un+Math.sin(cn)*pn,bn=this.currentPath?this.currentPath.shape.points:null;bn?bn[bn.length-2]===yn&&bn[bn.length-1]===_n||bn.push(yn,_n):(this.moveTo(yn,_n),bn=this.currentPath.shape.points);for(var xn=gn/(2*mn),Tn=Math.cos(xn),Sn=Math.sin(xn),En=mn-1,An=0;An<=En;++An){var Cn=xn+cn+2*xn*(An+En%1/En*An),Pn=Math.cos(Cn),Mn=-Math.sin(Cn);bn.push((Tn*Pn+Sn*Mn)*pn+ln,(Tn*-Mn+Sn*Pn)*pn+un)}return this.dirty++,this},dn.prototype.beginFill=function(){var ln=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,un=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;return this.filling=!0,this.fillColor=ln,this.fillAlpha=un,this.currentPath&&2>=this.currentPath.shape.points.length&&(this.currentPath.fill=this.filling,this.currentPath.fillColor=this.fillColor,this.currentPath.fillAlpha=this.fillAlpha),this},dn.prototype.endFill=function(){return this.filling=!1,this.fillColor=null,this.fillAlpha=1,this},dn.prototype.drawRect=function(ln,un,pn,cn){return this.drawShape(new qt.Rectangle(ln,un,pn,cn)),this},dn.prototype.drawRoundedRect=function(ln,un,pn,cn,hn){return this.drawShape(new qt.RoundedRectangle(ln,un,pn,cn,hn)),this},dn.prototype.drawCircle=function(ln,un,pn){return this.drawShape(new qt.Circle(ln,un,pn)),this},dn.prototype.drawEllipse=function(ln,un,pn,cn){return this.drawShape(new qt.Ellipse(ln,un,pn,cn)),this},dn.prototype.drawPolygon=function(ln){var un=ln,pn=!0;if(un instanceof qt.Polygon&&(pn=un.closed,un=un.points),!Array.isArray(un)){un=Array(arguments.length);for(var cn=0;cn<un.length;++cn)un[cn]=arguments[cn]}var hn=new qt.Polygon(un);return hn.closed=pn,this.drawShape(hn),this},dn.prototype.clear=function(){return(this.lineWidth||this.filling||0<this.graphicsData.length)&&(this.lineWidth=0,this.filling=!1,this.boundsDirty=-1,this.dirty++,this.clearDirty++,this.graphicsData.length=0),this.currentPath=null,this._spriteRect=null,this},dn.prototype.isFastRect=function(){return 1===this.graphicsData.length&&this.graphicsData[0].shape.type===Qt.SHAPES.RECT&&!this.graphicsData[0].lineWidth},dn.prototype._renderWebGL=function(ln){this.dirty!==this.fastRectDirty&&(this.fastRectDirty=this.dirty,this._fastRect=this.isFastRect()),this._fastRect?this._renderSpriteRect(ln):(ln.setObjectRenderer(ln.plugins.graphics),ln.plugins.graphics.render(this))},dn.prototype._renderSpriteRect=function(ln){var un=this.graphicsData[0].shape;this._spriteRect||(this._spriteRect=new Vt.default(new jt.default(jt.default.WHITE)));var pn=this._spriteRect;if(16777215===this.tint)pn.tint=this.graphicsData[0].fillColor;else{var cn=rn,hn=an;(0,Kt.hex2rgb)(this.graphicsData[0].fillColor,cn),(0,Kt.hex2rgb)(this.tint,hn),cn[0]*=hn[0],cn[1]*=hn[1],cn[2]*=hn[2],pn.tint=(0,Kt.rgb2hex)(cn)}pn.alpha=this.graphicsData[0].fillAlpha,pn.worldAlpha=this.worldAlpha*pn.alpha,pn.blendMode=this.blendMode,pn._texture._frame.width=un.width,pn._texture._frame.height=un.height,pn.transform.worldTransform=this.transform.worldTransform,pn.anchor.set(-un.x/un.width,-un.y/un.height),pn._onAnchorUpdate(),pn._renderWebGL(ln)},dn.prototype._renderCanvas=function(ln){!0!==this.isMask&&ln.plugins.graphics.render(this)},dn.prototype._calculateBounds=function(){this.boundsDirty!==this.dirty&&(this.boundsDirty=this.dirty,this.updateLocalBounds(),this.cachedSpriteDirty=!0);var ln=this._localBounds;this._bounds.addFrame(this.transform,ln.minX,ln.minY,ln.maxX,ln.maxY)},dn.prototype.containsPoint=function(ln){this.worldTransform.applyInverse(ln,nn);for(var un=this.graphicsData,pn=0,cn;pn<un.length;++pn)if(cn=un[pn],cn.fill&&cn.shape&&cn.shape.contains(nn.x,nn.y)){if(cn.holes)for(var hn=0;hn<cn.holes.length;hn++)if(cn.holes[hn].contains(nn.x,nn.y))return!1;return!0}return!1},dn.prototype.updateLocalBounds=function(){var ln=1/0,un=-1/0,pn=1/0,cn=-1/0;if(this.graphicsData.length)for(var hn=0,fn=0,gn=0,mn=0,yn=0,_n=0;_n<this.graphicsData.length;_n++){var bn=this.graphicsData[_n],xn=bn.type,vn=bn.lineWidth;if(hn=bn.shape,xn===Qt.SHAPES.RECT||xn===Qt.SHAPES.RREC)fn=hn.x-vn/2,gn=hn.y-vn/2,mn=hn.width+vn,yn=hn.height+vn,ln=fn<ln?fn:ln,un=fn+mn>un?fn+mn:un,pn=gn<pn?gn:pn,cn=gn+yn>cn?gn+yn:cn;else if(xn===Qt.SHAPES.CIRC)fn=hn.x,gn=hn.y,mn=hn.radius+vn/2,yn=hn.radius+vn/2,ln=fn-mn<ln?fn-mn:ln,un=fn+mn>un?fn+mn:un,pn=gn-yn<pn?gn-yn:pn,cn=gn+yn>cn?gn+yn:cn;else if(xn===Qt.SHAPES.ELIP)fn=hn.x,gn=hn.y,mn=hn.width+vn/2,yn=hn.height+vn/2,ln=fn-mn<ln?fn-mn:ln,un=fn+mn>un?fn+mn:un,pn=gn-yn<pn?gn-yn:pn,cn=gn+yn>cn?gn+yn:cn;else for(var Tn=hn.points,Sn=0,En=0,wn=0,An=0,Cn=0,Pn=0,Mn=0,Rn=0,Dn=0;Dn+2<Tn.length;Dn+=2)fn=Tn[Dn],gn=Tn[Dn+1],Sn=Tn[Dn+2],En=Tn[Dn+3],wn=Math.abs(Sn-fn),An=Math.abs(En-gn),yn=vn,1e-9>(mn=Math.sqrt(wn*wn+An*An))||(Pn=(yn/mn*wn+An)/2,Rn=(En+gn)/2,ln=(Mn=(Sn+fn)/2)-(Cn=(yn/mn*An+wn)/2)<ln?Mn-Cn:ln,un=Mn+Cn>un?Mn+Cn:un,pn=Rn-Pn<pn?Rn-Pn:pn,cn=Rn+Pn>cn?Rn+Pn:cn)}else ln=0,un=0,pn=0,cn=0;var In=this.boundsPadding;this._localBounds.minX=ln-In,this._localBounds.maxX=un+In,this._localBounds.minY=pn-In,this._localBounds.maxY=cn+In},dn.prototype.drawShape=function(ln){this.currentPath&&2>=this.currentPath.shape.points.length&&this.graphicsData.pop(),this.currentPath=null;var un=new zt.default(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.filling,this.nativeLines,ln);return this.graphicsData.push(un),un.type===Qt.SHAPES.POLY&&(un.shape.closed=un.shape.closed||this.filling,this.currentPath=un),this.dirty++,un},dn.prototype.generateCanvasTexture=function(ln){var un=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1,pn=this.getLocalBounds(),cn=Wt.default.create(pn.width,pn.height,ln,un);en||(en=new $t.default),this.transform.updateLocalTransform(),this.transform.localTransform.copy(tn),tn.invert(),tn.tx-=pn.x,tn.ty-=pn.y,en.render(this,cn,!0,tn);var hn=jt.default.fromCanvas(cn.baseTexture._canvasRenderTarget.canvas,ln,"graphics");return hn.baseTexture.resolution=un,hn.baseTexture.update(),hn},dn.prototype.closePath=function(){var ln=this.currentPath;return ln&&ln.shape&&ln.shape.close(),this},dn.prototype.addHole=function(){var ln=this.graphicsData.pop();return this.currentPath=this.graphicsData[this.graphicsData.length-1],this.currentPath.addHole(ln.shape),this.currentPath=null,this},dn.prototype.destroy=function(ln){sn.prototype.destroy.call(this,ln);for(var un=0;un<this.graphicsData.length;++un)this.graphicsData[un].destroy();for(var pn in this._webgl)for(var cn=0;cn<this._webgl[pn].data.length;++cn)this._webgl[pn].data[cn].destroy();this._spriteRect&&this._spriteRect.destroy(),this.graphicsData=null,this.currentPath=null,this._webgl=null,this._localBounds=null},dn}(Yt.default);Xt.default=on,on._SPRITE_TEXTURE=null},{"../const":46,"../display/Bounds":47,"../display/Container":48,"../math":70,"../renderers/canvas/CanvasRenderer":77,"../sprites/Sprite":102,"../textures/RenderTexture":113,"../textures/Texture":115,"../utils":124,"./GraphicsData":54,"./utils/bezierCurveTo":56}],54:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Yt(Wt,jt,zt,Vt,qt,Kt,Qt,Zt){!function(Jt,$t){if(!(Jt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Yt),this.lineWidth=Wt,this.nativeLines=Qt,this.lineColor=jt,this.lineAlpha=zt,this._lineTint=jt,this.fillColor=Vt,this.fillAlpha=qt,this._fillTint=Vt,this.fill=Kt,this.holes=[],this.shape=Zt,this.type=Zt.type}return Yt.prototype.clone=function(){return new Yt(this.lineWidth,this.lineColor,this.lineAlpha,this.fillColor,this.fillAlpha,this.fill,this.nativeLines,this.shape)},Yt.prototype.addHole=function(Wt){this.holes.push(Wt)},Yt.prototype.destroy=function(){this.shape=null,this.holes=null},Yt}();Xt.default=Ht},{}],55:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../../renderers/canvas/CanvasRenderer")),Yt=Bt("../../const"),Wt=function(){function jt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=zt}return jt.prototype.render=function(zt){var Vt=this.renderer,qt=Vt.context,Kt=zt.worldAlpha,Qt=zt.transform.worldTransform,Zt=Vt.resolution;this._prevTint!==this.tint&&(this.dirty=!0),qt.setTransform(Qt.a*Zt,Qt.b*Zt,Qt.c*Zt,Qt.d*Zt,Qt.tx*Zt,Qt.ty*Zt),zt.dirty&&(this.updateGraphicsTint(zt),zt.dirty=!1),Vt.setBlendMode(zt.blendMode);for(var Jt=0;Jt<zt.graphicsData.length;Jt++){var $t=zt.graphicsData[Jt],en=$t.shape,tn=$t._fillTint,nn=$t._lineTint;if(qt.lineWidth=$t.lineWidth,$t.type===Yt.SHAPES.POLY){qt.beginPath(),this.renderPolygon(en.points,en.closed,qt);for(var rn=0;rn<$t.holes.length;rn++)this.renderPolygon($t.holes[rn].points,!0,qt);$t.fill&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke())}else if($t.type===Yt.SHAPES.RECT)($t.fillColor||0===$t.fillColor)&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fillRect(en.x,en.y,en.width,en.height)),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.strokeRect(en.x,en.y,en.width,en.height));else if($t.type===Yt.SHAPES.CIRC)qt.beginPath(),qt.arc(en.x,en.y,en.radius,0,2*Math.PI),qt.closePath(),$t.fill&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke());else if($t.type===Yt.SHAPES.ELIP){var an=2*en.width,on=2*en.height,sn=en.x-an/2,dn=en.y-on/2;qt.beginPath();var ln=.5522848*(an/2),un=.5522848*(on/2),pn=sn+an,cn=dn+on,hn=sn+an/2,fn=dn+on/2;qt.moveTo(sn,fn),qt.bezierCurveTo(sn,fn-un,hn-ln,dn,hn,dn),qt.bezierCurveTo(hn+ln,dn,pn,fn-un,pn,fn),qt.bezierCurveTo(pn,fn+un,hn+ln,cn,hn,cn),qt.bezierCurveTo(hn-ln,cn,sn,fn+un,sn,fn),qt.closePath(),$t.fill&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke())}else if($t.type===Yt.SHAPES.RREC){var gn=en.x,mn=en.y,yn=en.width,_n=en.height,bn=en.radius,xn=0|Math.min(yn,_n)/2;bn=bn>xn?xn:bn,qt.beginPath(),qt.moveTo(gn,mn+bn),qt.lineTo(gn,mn+_n-bn),qt.quadraticCurveTo(gn,mn+_n,gn+bn,mn+_n),qt.lineTo(gn+yn-bn,mn+_n),qt.quadraticCurveTo(gn+yn,mn+_n,gn+yn,mn+_n-bn),qt.lineTo(gn+yn,mn+bn),qt.quadraticCurveTo(gn+yn,mn,gn+yn-bn,mn),qt.lineTo(gn+bn,mn),qt.quadraticCurveTo(gn,mn,gn,mn+bn),qt.closePath(),($t.fillColor||0===$t.fillColor)&&(qt.globalAlpha=$t.fillAlpha*Kt,qt.fillStyle="#"+("00000"+(0|tn).toString(16)).substr(-6),qt.fill()),$t.lineWidth&&(qt.globalAlpha=$t.lineAlpha*Kt,qt.strokeStyle="#"+("00000"+(0|nn).toString(16)).substr(-6),qt.stroke())}}},jt.prototype.updateGraphicsTint=function(zt){zt._prevTint=zt.tint;for(var Vt=(255&zt.tint>>16)/255,qt=(255&zt.tint>>8)/255,Kt=(255&zt.tint)/255,Qt=0;Qt<zt.graphicsData.length;++Qt){var Zt=zt.graphicsData[Qt],Jt=0|Zt.fillColor,$t=0|Zt.lineColor;Zt._fillTint=(255*((255&Jt>>16)/255*Vt)<<16)+(255*((255&Jt>>8)/255*qt)<<8)+255*((255&Jt)/255*Kt),Zt._lineTint=(255*((255&$t>>16)/255*Vt)<<16)+(255*((255&$t>>8)/255*qt)<<8)+255*((255&$t)/255*Kt)}},jt.prototype.renderPolygon=function(zt,Vt,qt){qt.moveTo(zt[0],zt[1]);for(var Kt=1;Kt<zt.length/2;++Kt)qt.lineTo(zt[2*Kt],zt[2*Kt+1]);Vt&&qt.closePath()},jt.prototype.destroy=function(){this.renderer=null},jt}();Xt.default=Wt,Ht.default.registerPlugin("graphics",Wt)},{"../../const":46,"../../renderers/canvas/CanvasRenderer":77}],56:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Ht,Yt,Wt,jt,zt,Vt,qt,Kt){var Qt=8<arguments.length&&void 0!==arguments[8]?arguments[8]:[],Zt=0,Jt=0,$t=0,en=0,tn=0;Qt.push(Ht,Yt);for(var nn=1,rn=0;20>=nn;++nn)$t=(Jt=(Zt=1-(rn=nn/20))*Zt)*Zt,tn=(en=rn*rn)*rn,Qt.push($t*Ht+3*Jt*rn*Wt+3*Zt*en*zt+tn*qt,$t*Yt+3*Jt*rn*jt+3*Zt*en*Vt+tn*Kt);return Qt}},{}],57:[function(Bt,Gt,Xt){function Ht(en){return en&&en.__esModule?en:{default:en}}Xt.__esModule=!0;var Yt=Bt("../../utils"),Wt=Bt("../../const"),jt=Ht(Bt("../../renderers/webgl/utils/ObjectRenderer")),zt=Ht(Bt("../../renderers/webgl/WebGLRenderer")),Vt=Ht(Bt("./WebGLGraphicsData")),qt=Ht(Bt("./shaders/PrimitiveShader")),Kt=Ht(Bt("./utils/buildPoly")),Qt=Ht(Bt("./utils/buildRectangle")),Zt=Ht(Bt("./utils/buildRoundedRectangle")),Jt=Ht(Bt("./utils/buildCircle")),$t=function(en){function tn(nn){!function(an,on){if(!(an instanceof on))throw new TypeError("Cannot call a class as a function")}(this,tn);var rn=function(an,on){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:an}(this,en.call(this,nn));return rn.graphicsDataPool=[],rn.primitiveShader=null,rn.gl=nn.gl,rn.CONTEXT_UID=0,rn}return function(nn,rn){if("function"!=typeof rn&&null!==rn)throw new TypeError("Super expression must either be null or a function, not "+typeof rn);nn.prototype=Object.create(rn&&rn.prototype,{constructor:{value:nn,enumerable:!1,writable:!0,configurable:!0}}),rn&&(Object.setPrototypeOf?Object.setPrototypeOf(nn,rn):nn.__proto__=rn)}(tn,en),tn.prototype.onContextChange=function(){this.gl=this.renderer.gl,this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.primitiveShader=new qt.default(this.gl)},tn.prototype.destroy=function(){jt.default.prototype.destroy.call(this);for(var nn=0;nn<this.graphicsDataPool.length;++nn)this.graphicsDataPool[nn].destroy();this.graphicsDataPool=null},tn.prototype.render=function(nn){var rn=this.renderer,an=rn.gl,on,sn=nn._webGL[this.CONTEXT_UID];sn&&nn.dirty===sn.dirty||(this.updateGraphics(nn),sn=nn._webGL[this.CONTEXT_UID]);var dn=this.primitiveShader;rn.bindShader(dn),rn.state.setBlendMode(nn.blendMode);for(var ln=0,un=sn.data.length,pn;ln<un;ln++)pn=(on=sn.data[ln]).shader,rn.bindShader(pn),pn.uniforms.translationMatrix=nn.transform.worldTransform.toArray(!0),pn.uniforms.tint=(0,Yt.hex2rgb)(nn.tint),pn.uniforms.alpha=nn.worldAlpha,rn.bindVao(on.vao),on.nativeLines?an.drawArrays(an.LINES,0,on.points.length/6):on.vao.draw(an.TRIANGLE_STRIP,on.indices.length)},tn.prototype.updateGraphics=function(nn){var rn=this.renderer.gl,an=nn._webGL[this.CONTEXT_UID];if(an||(an=nn._webGL[this.CONTEXT_UID]={lastIndex:0,data:[],gl:rn,clearDirty:-1,dirty:-1}),an.dirty=nn.dirty,nn.clearDirty!==an.clearDirty){an.clearDirty=nn.clearDirty;for(var on=0;on<an.data.length;on++)this.graphicsDataPool.push(an.data[on]);an.data.length=0,an.lastIndex=0}for(var sn=void 0,dn=void 0,ln=an.lastIndex,un;ln<nn.graphicsData.length;ln++)un=nn.graphicsData[ln],sn=this.getWebGLData(an,0),un.nativeLines&&un.lineWidth&&(dn=this.getWebGLData(an,0,!0),an.lastIndex++),un.type===Wt.SHAPES.POLY&&(0,Kt.default)(un,sn,dn),un.type===Wt.SHAPES.RECT?(0,Qt.default)(un,sn,dn):un.type===Wt.SHAPES.CIRC||un.type===Wt.SHAPES.ELIP?(0,Jt.default)(un,sn,dn):un.type===Wt.SHAPES.RREC&&(0,Zt.default)(un,sn,dn),an.lastIndex++;this.renderer.bindVao(null);for(var pn=0;pn<an.data.length;pn++)(sn=an.data[pn]).dirty&&sn.upload()},tn.prototype.getWebGLData=function(nn,rn,an){var on=nn.data[nn.data.length-1];return(!on||on.nativeLines!==an||32e4<on.points.length)&&((on=this.graphicsDataPool.pop()||new Vt.default(this.renderer.gl,this.primitiveShader,this.renderer.state.attribsState)).nativeLines=an,on.reset(rn),nn.data.push(on)),on.dirty=!0,on},tn}(jt.default);Xt.default=$t,zt.default.registerPlugin("graphics",$t)},{"../../const":46,"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../utils":124,"./WebGLGraphicsData":58,"./shaders/PrimitiveShader":59,"./utils/buildCircle":60,"./utils/buildPoly":62,"./utils/buildRectangle":63,"./utils/buildRoundedRectangle":64}],58:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("pixi-gl-core")),Yt=function(){function Wt(jt,zt,Vt){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.gl=jt,this.color=[0,0,0],this.points=[],this.indices=[],this.buffer=Ht.default.GLBuffer.createVertexBuffer(jt),this.indexBuffer=Ht.default.GLBuffer.createIndexBuffer(jt),this.dirty=!0,this.nativeLines=!1,this.glPoints=null,this.glIndices=null,this.shader=zt,this.vao=new Ht.default.VertexArrayObject(jt,Vt).addIndex(this.indexBuffer).addAttribute(this.buffer,zt.attributes.aVertexPosition,jt.FLOAT,!1,24,0).addAttribute(this.buffer,zt.attributes.aColor,jt.FLOAT,!1,24,8)}return Wt.prototype.reset=function(){this.points.length=0,this.indices.length=0},Wt.prototype.upload=function(){this.glPoints=new Float32Array(this.points),this.buffer.upload(this.glPoints),this.glIndices=new Uint16Array(this.indices),this.indexBuffer.upload(this.glIndices),this.dirty=!1},Wt.prototype.destroy=function(){this.color=null,this.points=null,this.indices=null,this.vao.destroy(),this.buffer.destroy(),this.indexBuffer.destroy(),this.gl=null,this.buffer=null,this.indexBuffer=null,this.glPoints=null,this.glIndices=null},Wt}();Xt.default=Yt},{"pixi-gl-core":12}],59:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Yt){function Wt(jt){return function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),function(zt,Vt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&("object"==typeof Vt||"function"==typeof Vt)?Vt:zt}(this,Yt.call(this,jt,["attribute vec2 aVertexPosition;","attribute vec4 aColor;","uniform mat3 translationMatrix;","uniform mat3 projectionMatrix;","uniform float alpha;","uniform vec3 tint;","varying vec4 vColor;","void main(void){","   gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vColor = aColor * vec4(tint * alpha, alpha);","}"].join("\n"),["varying vec4 vColor;","void main(void){","   gl_FragColor = vColor;","}"].join("\n")))}return function(jt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);jt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,zt):jt.__proto__=zt)}(Wt,Yt),Wt}(function(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}(Bt("../../../Shader")).default);Xt.default=Ht},{"../../../Shader":44}],60:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(jt,zt,Vt){var qt=jt.shape,Kt=qt.x,Qt=qt.y,Zt,Jt;if(jt.type===Yt.SHAPES.CIRC?(Zt=qt.radius,Jt=qt.radius):(Zt=qt.width,Jt=qt.height),0!==Zt&&0!==Jt){var $t=Math.floor(30*Math.sqrt(qt.radius))||Math.floor(15*Math.sqrt(qt.width+qt.height)),en=2*Math.PI/$t;if(jt.fill){var tn=(0,Wt.hex2rgb)(jt.fillColor),nn=jt.fillAlpha,rn=tn[0]*nn,an=tn[1]*nn,on=tn[2]*nn,sn=zt.points,dn=zt.indices,ln=sn.length/6;dn.push(ln);for(var un=0;un<$t+1;un++)sn.push(Kt,Qt,rn,an,on,nn),sn.push(Kt+Math.sin(en*un)*Zt,Qt+Math.cos(en*un)*Jt,rn,an,on,nn),dn.push(ln++,ln++);dn.push(ln-1)}if(jt.lineWidth){var pn=jt.points;jt.points=[];for(var cn=0;cn<$t+1;cn++)jt.points.push(Kt+Math.sin(en*cn)*Zt,Qt+Math.cos(en*cn)*Jt);(0,Ht.default)(jt,zt,Vt),jt.points=pn}}};var Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./buildLine")),Yt=Bt("../../../const"),Wt=Bt("../../../utils")},{"../../../const":46,"../../../utils":124,"./buildLine":61}],61:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt,jt,zt){Wt.nativeLines?function(Vt,qt){var Kt=0,Qt=Vt.points;if(0!==Qt.length){var Zt=qt.points,Jt=Qt.length/2,$t=(0,Yt.hex2rgb)(Vt.lineColor),en=Vt.lineAlpha,tn=$t[0]*en,nn=$t[1]*en,rn=$t[2]*en;for(Kt=1;Kt<Jt;Kt++){var an=Qt[2*(Kt-1)],on=Qt[2*(Kt-1)+1],sn=Qt[2*Kt],dn=Qt[2*Kt+1];Zt.push(an,on),Zt.push(tn,nn,rn,en),Zt.push(sn,dn),Zt.push(tn,nn,rn,en)}}}(Wt,zt):function(Vt,qt){var Kt=Vt.points;if(0!==Kt.length){var Qt=new Ht.Point(Kt[0],Kt[1]),Zt=new Ht.Point(Kt[Kt.length-2],Kt[Kt.length-1]);if(Qt.x===Zt.x&&Qt.y===Zt.y){(Kt=Kt.slice()).pop(),Kt.pop();var Jt=(Zt=new Ht.Point(Kt[Kt.length-2],Kt[Kt.length-1])).x+.5*(Qt.x-Zt.x),$t=Zt.y+.5*(Qt.y-Zt.y);Kt.unshift(Jt,$t),Kt.push(Jt,$t)}var en=qt.points,tn=qt.indices,nn=Kt.length/2,rn=Kt.length,an=en.length/6,on=Vt.lineWidth/2,sn=(0,Yt.hex2rgb)(Vt.lineColor),dn=Vt.lineAlpha,ln=sn[0]*dn,un=sn[1]*dn,pn=sn[2]*dn,cn=Kt[0],hn=Kt[1],fn=Kt[2],gn=Kt[3],mn=0,yn=0,_n=-(hn-gn),bn=cn-fn,xn=0,vn=0,Tn=0,Sn=0,En=Math.sqrt(_n*_n+bn*bn);_n/=En,bn/=En,_n*=on,bn*=on,en.push(cn-_n,hn-bn,ln,un,pn,dn),en.push(cn+_n,hn+bn,ln,un,pn,dn);for(var wn=1;wn<nn-1;++wn){cn=Kt[2*(wn-1)],hn=Kt[2*(wn-1)+1],fn=Kt[2*wn],gn=Kt[2*wn+1],mn=Kt[2*(wn+1)],yn=Kt[2*(wn+1)+1],_n=-(hn-gn),bn=cn-fn,_n/=En=Math.sqrt(_n*_n+bn*bn),bn/=En,_n*=on,bn*=on,xn=-(gn-yn),vn=fn-mn,xn/=En=Math.sqrt(xn*xn+vn*vn),vn/=En;var An=-bn+hn-(-bn+gn),Cn=-_n+fn-(-_n+cn),Pn=(-_n+cn)*(-bn+gn)-(-_n+fn)*(-bn+hn),Mn=-(vn*=on)+yn-(-vn+gn),Rn=-(xn*=on)+fn-(-xn+mn),Dn=(-xn+mn)*(-vn+gn)-(-xn+fn)*(-vn+yn),In=An*Rn-Mn*Cn;if(.1>Math.abs(In))In+=10.1,en.push(fn-_n,gn-bn,ln,un,pn,dn),en.push(fn+_n,gn+bn,ln,un,pn,dn);else{var On=(Cn*Dn-Rn*Pn)/In,Ln=(Mn*Pn-An*Dn)/In;(On-fn)*(On-fn)+(Ln-gn)*(Ln-gn)>196*on*on?(Tn=_n-xn,Sn=bn-vn,Tn/=En=Math.sqrt(Tn*Tn+Sn*Sn),Sn/=En,Tn*=on,Sn*=on,en.push(fn-Tn,gn-Sn),en.push(ln,un,pn,dn),en.push(fn+Tn,gn+Sn),en.push(ln,un,pn,dn),en.push(fn-Tn,gn-Sn),en.push(ln,un,pn,dn),rn++):(en.push(On,Ln),en.push(ln,un,pn,dn),en.push(fn-(On-fn),gn-(Ln-gn)),en.push(ln,un,pn,dn))}}cn=Kt[2*(nn-2)],hn=Kt[2*(nn-2)+1],fn=Kt[2*(nn-1)],_n=-(hn-(gn=Kt[2*(nn-1)+1])),bn=cn-fn,_n/=En=Math.sqrt(_n*_n+bn*bn),bn/=En,_n*=on,bn*=on,en.push(fn-_n,gn-bn),en.push(ln,un,pn,dn),en.push(fn+_n,gn+bn),en.push(ln,un,pn,dn),tn.push(an);for(var kn=0;kn<rn;++kn)tn.push(an++);tn.push(an-1)}}(Wt,jt)};var Ht=Bt("../../../math"),Yt=Bt("../../../utils")},{"../../../math":70,"../../../utils":124}],62:[function(Bt,Gt,Xt){function Ht(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0,Xt.default=function(zt,Vt,qt){zt.points=zt.shape.points.slice();var Kt=zt.points;if(zt.fill&&6<=Kt.length){for(var Qt=[],Zt=zt.holes,Jt=0,$t;Jt<Zt.length;Jt++)$t=Zt[Jt],Qt.push(Kt.length/2),Kt=Kt.concat($t.points);var en=Vt.points,tn=Vt.indices,nn=Kt.length/2,rn=(0,Wt.hex2rgb)(zt.fillColor),an=zt.fillAlpha,on=rn[0]*an,sn=rn[1]*an,dn=rn[2]*an,ln=(0,jt.default)(Kt,Qt,2);if(!ln)return;for(var un=en.length/6,pn=0;pn<ln.length;pn+=3)tn.push(ln[pn]+un),tn.push(ln[pn]+un),tn.push(ln[pn+1]+un),tn.push(ln[pn+2]+un),tn.push(ln[pn+2]+un);for(var cn=0;cn<nn;cn++)en.push(Kt[2*cn],Kt[2*cn+1],on,sn,dn,an)}0<zt.lineWidth&&(0,Yt.default)(zt,Vt,qt)};var Yt=Ht(Bt("./buildLine")),Wt=Bt("../../../utils"),jt=Ht(Bt("earcut"))},{"../../../utils":124,"./buildLine":61,earcut:2}],63:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt,jt,zt){var Vt=Wt.shape,qt=Vt.x,Kt=Vt.y,Qt=Vt.width,Zt=Vt.height;if(Wt.fill){var Jt=(0,Yt.hex2rgb)(Wt.fillColor),$t=Wt.fillAlpha,en=Jt[0]*$t,tn=Jt[1]*$t,nn=Jt[2]*$t,rn=jt.points,an=jt.indices,on=rn.length/6;rn.push(qt,Kt),rn.push(en,tn,nn,$t),rn.push(qt+Qt,Kt),rn.push(en,tn,nn,$t),rn.push(qt,Kt+Zt),rn.push(en,tn,nn,$t),rn.push(qt+Qt,Kt+Zt),rn.push(en,tn,nn,$t),an.push(on,on,on+1,on+2,on+3,on+3)}if(Wt.lineWidth){var sn=Wt.points;Wt.points=[qt,Kt,qt+Qt,Kt,qt+Qt,Kt+Zt,qt,Kt+Zt,qt,Kt],(0,Ht.default)(Wt,jt,zt),Wt.points=sn}};var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./buildLine")),Yt=Bt("../../../utils")},{"../../../utils":124,"./buildLine":61}],64:[function(Bt,Gt,Xt){function Ht(qt){return qt&&qt.__esModule?qt:{default:qt}}function Yt(qt,Kt,Qt){return qt+(Kt-qt)*Qt}function Wt(qt,Kt,Qt,Zt,Jt,$t){for(var en=6<arguments.length&&void 0!==arguments[6]?arguments[6]:[],tn=0,nn=0,rn=0,an=0,on=0,sn=0,dn=0,ln=0;20>=dn;++dn)tn=Yt(qt,Qt,ln=dn/20),nn=Yt(Kt,Zt,ln),rn=Yt(Qt,Jt,ln),an=Yt(Zt,$t,ln),on=Yt(tn,rn,ln),sn=Yt(nn,an,ln),en.push(on,sn);return en}Xt.__esModule=!0,Xt.default=function(qt,Kt,Qt){var Zt=qt.shape,Jt=Zt.x,$t=Zt.y,en=Zt.width,tn=Zt.height,nn=Zt.radius,rn=[];if(rn.push(Jt,$t+nn),Wt(Jt,$t+tn-nn,Jt,$t+tn,Jt+nn,$t+tn,rn),Wt(Jt+en-nn,$t+tn,Jt+en,$t+tn,Jt+en,$t+tn-nn,rn),Wt(Jt+en,$t+nn,Jt+en,$t,Jt+en-nn,$t,rn),Wt(Jt+nn,$t,Jt,$t,Jt,$t+nn+1e-10,rn),qt.fill){for(var an=(0,Vt.hex2rgb)(qt.fillColor),on=qt.fillAlpha,sn=an[0]*on,dn=an[1]*on,ln=an[2]*on,un=Kt.points,pn=Kt.indices,cn=un.length/6,hn=(0,jt.default)(rn,null,2),fn=0,gn=hn.length;fn<gn;fn+=3)pn.push(hn[fn]+cn),pn.push(hn[fn]+cn),pn.push(hn[fn+1]+cn),pn.push(hn[fn+2]+cn),pn.push(hn[fn+2]+cn);for(var mn=0,yn=rn.length;mn<yn;mn++)un.push(rn[mn],rn[++mn],sn,dn,ln,on)}if(qt.lineWidth){var _n=qt.points;qt.points=rn,(0,zt.default)(qt,Kt,Qt),qt.points=_n}};var jt=Ht(Bt("earcut")),zt=Ht(Bt("./buildLine")),Vt=Bt("../../../utils")},{"../../../utils":124,"./buildLine":61,earcut:2}],65:[function(Bt,Gt,Xt){function Ht(On){if(On&&On.__esModule)return On;var Ln={};if(null!=On)for(var kn in On)Object.prototype.hasOwnProperty.call(On,kn)&&(Ln[kn]=On[kn]);return Ln.default=On,Ln}function Yt(On){return On&&On.__esModule?On:{default:On}}Xt.__esModule=!0,Xt.autoDetectRenderer=Xt.Application=Xt.Filter=Xt.SpriteMaskFilter=Xt.Quad=Xt.RenderTarget=Xt.ObjectRenderer=Xt.WebGLManager=Xt.Shader=Xt.CanvasRenderTarget=Xt.TextureUvs=Xt.VideoBaseTexture=Xt.BaseRenderTexture=Xt.RenderTexture=Xt.BaseTexture=Xt.Texture=Xt.Spritesheet=Xt.CanvasGraphicsRenderer=Xt.GraphicsRenderer=Xt.GraphicsData=Xt.Graphics=Xt.TextMetrics=Xt.TextStyle=Xt.Text=Xt.SpriteRenderer=Xt.CanvasTinter=Xt.CanvasSpriteRenderer=Xt.Sprite=Xt.TransformBase=Xt.TransformStatic=Xt.Transform=Xt.Container=Xt.DisplayObject=Xt.Bounds=Xt.glCore=Xt.WebGLRenderer=Xt.CanvasRenderer=Xt.ticker=Xt.utils=Xt.settings=void 0;var Wt=Bt("./const");Object.keys(Wt).forEach(function(On){"default"!==On&&"__esModule"!==On&&Object.defineProperty(Xt,On,{enumerable:!0,get:function(){return Wt[On]}})});var jt=Bt("./math");Object.keys(jt).forEach(function(On){"default"!==On&&"__esModule"!==On&&Object.defineProperty(Xt,On,{enumerable:!0,get:function(){return jt[On]}})});var zt=Bt("pixi-gl-core");Object.defineProperty(Xt,"glCore",{enumerable:!0,get:function(){return Yt(zt).default}});var Vt=Bt("./display/Bounds");Object.defineProperty(Xt,"Bounds",{enumerable:!0,get:function(){return Yt(Vt).default}});var qt=Bt("./display/DisplayObject");Object.defineProperty(Xt,"DisplayObject",{enumerable:!0,get:function(){return Yt(qt).default}});var Kt=Bt("./display/Container");Object.defineProperty(Xt,"Container",{enumerable:!0,get:function(){return Yt(Kt).default}});var Qt=Bt("./display/Transform");Object.defineProperty(Xt,"Transform",{enumerable:!0,get:function(){return Yt(Qt).default}});var Zt=Bt("./display/TransformStatic");Object.defineProperty(Xt,"TransformStatic",{enumerable:!0,get:function(){return Yt(Zt).default}});var Jt=Bt("./display/TransformBase");Object.defineProperty(Xt,"TransformBase",{enumerable:!0,get:function(){return Yt(Jt).default}});var $t=Bt("./sprites/Sprite");Object.defineProperty(Xt,"Sprite",{enumerable:!0,get:function(){return Yt($t).default}});var en=Bt("./sprites/canvas/CanvasSpriteRenderer");Object.defineProperty(Xt,"CanvasSpriteRenderer",{enumerable:!0,get:function(){return Yt(en).default}});var tn=Bt("./sprites/canvas/CanvasTinter");Object.defineProperty(Xt,"CanvasTinter",{enumerable:!0,get:function(){return Yt(tn).default}});var nn=Bt("./sprites/webgl/SpriteRenderer");Object.defineProperty(Xt,"SpriteRenderer",{enumerable:!0,get:function(){return Yt(nn).default}});var rn=Bt("./text/Text");Object.defineProperty(Xt,"Text",{enumerable:!0,get:function(){return Yt(rn).default}});var an=Bt("./text/TextStyle");Object.defineProperty(Xt,"TextStyle",{enumerable:!0,get:function(){return Yt(an).default}});var on=Bt("./text/TextMetrics");Object.defineProperty(Xt,"TextMetrics",{enumerable:!0,get:function(){return Yt(on).default}});var sn=Bt("./graphics/Graphics");Object.defineProperty(Xt,"Graphics",{enumerable:!0,get:function(){return Yt(sn).default}});var dn=Bt("./graphics/GraphicsData");Object.defineProperty(Xt,"GraphicsData",{enumerable:!0,get:function(){return Yt(dn).default}});var ln=Bt("./graphics/webgl/GraphicsRenderer");Object.defineProperty(Xt,"GraphicsRenderer",{enumerable:!0,get:function(){return Yt(ln).default}});var un=Bt("./graphics/canvas/CanvasGraphicsRenderer");Object.defineProperty(Xt,"CanvasGraphicsRenderer",{enumerable:!0,get:function(){return Yt(un).default}});var pn=Bt("./textures/Spritesheet");Object.defineProperty(Xt,"Spritesheet",{enumerable:!0,get:function(){return Yt(pn).default}});var cn=Bt("./textures/Texture");Object.defineProperty(Xt,"Texture",{enumerable:!0,get:function(){return Yt(cn).default}});var hn=Bt("./textures/BaseTexture");Object.defineProperty(Xt,"BaseTexture",{enumerable:!0,get:function(){return Yt(hn).default}});var fn=Bt("./textures/RenderTexture");Object.defineProperty(Xt,"RenderTexture",{enumerable:!0,get:function(){return Yt(fn).default}});var gn=Bt("./textures/BaseRenderTexture");Object.defineProperty(Xt,"BaseRenderTexture",{enumerable:!0,get:function(){return Yt(gn).default}});var mn=Bt("./textures/VideoBaseTexture");Object.defineProperty(Xt,"VideoBaseTexture",{enumerable:!0,get:function(){return Yt(mn).default}});var yn=Bt("./textures/TextureUvs");Object.defineProperty(Xt,"TextureUvs",{enumerable:!0,get:function(){return Yt(yn).default}});var _n=Bt("./renderers/canvas/utils/CanvasRenderTarget");Object.defineProperty(Xt,"CanvasRenderTarget",{enumerable:!0,get:function(){return Yt(_n).default}});var bn=Bt("./Shader");Object.defineProperty(Xt,"Shader",{enumerable:!0,get:function(){return Yt(bn).default}});var xn=Bt("./renderers/webgl/managers/WebGLManager");Object.defineProperty(Xt,"WebGLManager",{enumerable:!0,get:function(){return Yt(xn).default}});var vn=Bt("./renderers/webgl/utils/ObjectRenderer");Object.defineProperty(Xt,"ObjectRenderer",{enumerable:!0,get:function(){return Yt(vn).default}});var Tn=Bt("./renderers/webgl/utils/RenderTarget");Object.defineProperty(Xt,"RenderTarget",{enumerable:!0,get:function(){return Yt(Tn).default}});var Sn=Bt("./renderers/webgl/utils/Quad");Object.defineProperty(Xt,"Quad",{enumerable:!0,get:function(){return Yt(Sn).default}});var En=Bt("./renderers/webgl/filters/spriteMask/SpriteMaskFilter");Object.defineProperty(Xt,"SpriteMaskFilter",{enumerable:!0,get:function(){return Yt(En).default}});var wn=Bt("./renderers/webgl/filters/Filter");Object.defineProperty(Xt,"Filter",{enumerable:!0,get:function(){return Yt(wn).default}});var An=Bt("./Application");Object.defineProperty(Xt,"Application",{enumerable:!0,get:function(){return Yt(An).default}});var Cn=Bt("./autoDetectRenderer");Object.defineProperty(Xt,"autoDetectRenderer",{enumerable:!0,get:function(){return Cn.autoDetectRenderer}});var Pn=Ht(Bt("./utils")),Mn=Ht(Bt("./ticker")),Rn=Yt(Bt("./settings")),Dn=Yt(Bt("./renderers/canvas/CanvasRenderer")),In=Yt(Bt("./renderers/webgl/WebGLRenderer"));Xt.settings=Rn.default,Xt.utils=Pn,Xt.ticker=Mn,Xt.CanvasRenderer=Dn.default,Xt.WebGLRenderer=In.default},{"./Application":43,"./Shader":44,"./autoDetectRenderer":45,"./const":46,"./display/Bounds":47,"./display/Container":48,"./display/DisplayObject":49,"./display/Transform":50,"./display/TransformBase":51,"./display/TransformStatic":52,"./graphics/Graphics":53,"./graphics/GraphicsData":54,"./graphics/canvas/CanvasGraphicsRenderer":55,"./graphics/webgl/GraphicsRenderer":57,"./math":70,"./renderers/canvas/CanvasRenderer":77,"./renderers/canvas/utils/CanvasRenderTarget":79,"./renderers/webgl/WebGLRenderer":84,"./renderers/webgl/filters/Filter":86,"./renderers/webgl/filters/spriteMask/SpriteMaskFilter":89,"./renderers/webgl/managers/WebGLManager":93,"./renderers/webgl/utils/ObjectRenderer":94,"./renderers/webgl/utils/Quad":95,"./renderers/webgl/utils/RenderTarget":96,"./settings":101,"./sprites/Sprite":102,"./sprites/canvas/CanvasSpriteRenderer":103,"./sprites/canvas/CanvasTinter":104,"./sprites/webgl/SpriteRenderer":106,"./text/Text":108,"./text/TextMetrics":109,"./text/TextStyle":110,"./textures/BaseRenderTexture":111,"./textures/BaseTexture":112,"./textures/RenderTexture":113,"./textures/Spritesheet":114,"./textures/Texture":115,"./textures/TextureUvs":116,"./textures/VideoBaseTexture":117,"./ticker":120,"./utils":124,"pixi-gl-core":12}],66:[function(Bt,Gt,Xt){function Ht(Zt){return 0>Zt?-1:0<Zt?1:0}Xt.__esModule=!0;var Yt=function(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}(Bt("./Matrix")),Wt=[1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1,0,1],jt=[0,1,1,1,0,-1,-1,-1,0,1,1,1,0,-1,-1,-1],zt=[0,-1,-1,-1,0,1,1,1,0,1,1,1,0,-1,-1,-1],Vt=[1,1,0,-1,-1,-1,0,1,-1,-1,0,1,1,1,0,-1],qt=[],Kt=[];!function(){for(var Zt=0,Jt;16>Zt;Zt++){Jt=[],Kt.push(Jt);for(var $t=0;16>$t;$t++)for(var en=Ht(Wt[Zt]*Wt[$t]+zt[Zt]*jt[$t]),tn=Ht(jt[Zt]*Wt[$t]+Vt[Zt]*jt[$t]),nn=Ht(Wt[Zt]*zt[$t]+zt[Zt]*Vt[$t]),rn=Ht(jt[Zt]*zt[$t]+Vt[Zt]*Vt[$t]),an=0;16>an;an++)if(Wt[an]===en&&jt[an]===tn&&zt[an]===nn&&Vt[an]===rn){Jt.push(an);break}}for(var on=0,sn;16>on;on++)sn=new Yt.default,sn.set(Wt[on],jt[on],zt[on],Vt[on],0,0),qt.push(sn)}();var Qt={E:0,SE:1,S:2,SW:3,W:4,NW:5,N:6,NE:7,MIRROR_VERTICAL:8,MIRROR_HORIZONTAL:12,uX:function(Zt){return Wt[Zt]},uY:function(Zt){return jt[Zt]},vX:function(Zt){return zt[Zt]},vY:function(Zt){return Vt[Zt]},inv:function(Zt){return 8&Zt?15&Zt:7&-Zt},add:function(Zt,Jt){return Kt[Zt][Jt]},sub:function(Zt,Jt){return Kt[Zt][Qt.inv(Jt)]},rotate180:function(Zt){return 4^Zt},isSwapWidthHeight:function(Zt){return 2==(3&Zt)},byDirection:function(Zt,Jt){return 2*Math.abs(Zt)<=Math.abs(Jt)?0<=Jt?Qt.S:Qt.N:2*Math.abs(Jt)<=Math.abs(Zt)?0<Zt?Qt.E:Qt.W:0<Jt?0<Zt?Qt.SE:Qt.SW:0<Zt?Qt.NE:Qt.NW},matrixAppendRotationInv:function(Zt,Jt){var $t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,en=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,tn=qt[Qt.inv(Jt)];tn.tx=$t,tn.ty=en,Zt.append(tn)}};Xt.default=Qt},{"./Matrix":67}],67:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./Point")),Wt=function(){function jt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Kt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:1,Qt=4<arguments.length&&void 0!==arguments[4]?arguments[4]:0,Zt=5<arguments.length&&void 0!==arguments[5]?arguments[5]:0;!function(Jt,$t){if(!(Jt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,jt),this.a=zt,this.b=Vt,this.c=qt,this.d=Kt,this.tx=Qt,this.ty=Zt,this.array=null}return jt.prototype.fromArray=function(zt){this.a=zt[0],this.b=zt[1],this.c=zt[3],this.d=zt[4],this.tx=zt[2],this.ty=zt[5]},jt.prototype.set=function(zt,Vt,qt,Kt,Qt,Zt){return this.a=zt,this.b=Vt,this.c=qt,this.d=Kt,this.tx=Qt,this.ty=Zt,this},jt.prototype.toArray=function(zt,Vt){this.array||(this.array=new Float32Array(9));var qt=Vt||this.array;return zt?(qt[0]=this.a,qt[1]=this.b,qt[2]=0,qt[3]=this.c,qt[4]=this.d,qt[5]=0,qt[6]=this.tx,qt[7]=this.ty,qt[8]=1):(qt[0]=this.a,qt[1]=this.c,qt[2]=this.tx,qt[3]=this.b,qt[4]=this.d,qt[5]=this.ty,qt[6]=0,qt[7]=0,qt[8]=1),qt},jt.prototype.apply=function(zt,Vt){Vt=Vt||new Yt.default;var qt=zt.x,Kt=zt.y;return Vt.x=this.a*qt+this.c*Kt+this.tx,Vt.y=this.b*qt+this.d*Kt+this.ty,Vt},jt.prototype.applyInverse=function(zt,Vt){Vt=Vt||new Yt.default;var qt=1/(this.a*this.d+this.c*-this.b),Kt=zt.x,Qt=zt.y;return Vt.x=this.d*qt*Kt+-this.c*qt*Qt+(this.ty*this.c-this.tx*this.d)*qt,Vt.y=this.a*qt*Qt+-this.b*qt*Kt+(-this.ty*this.a+this.tx*this.b)*qt,Vt},jt.prototype.translate=function(zt,Vt){return this.tx+=zt,this.ty+=Vt,this},jt.prototype.scale=function(zt,Vt){return this.a*=zt,this.d*=Vt,this.c*=zt,this.b*=Vt,this.tx*=zt,this.ty*=Vt,this},jt.prototype.rotate=function(zt){var Vt=Math.cos(zt),qt=Math.sin(zt),Kt=this.a,Qt=this.c,Zt=this.tx;return this.a=Kt*Vt-this.b*qt,this.b=Kt*qt+this.b*Vt,this.c=Qt*Vt-this.d*qt,this.d=Qt*qt+this.d*Vt,this.tx=Zt*Vt-this.ty*qt,this.ty=Zt*qt+this.ty*Vt,this},jt.prototype.append=function(zt){var Vt=this.a,qt=this.b,Kt=this.c,Qt=this.d;return this.a=zt.a*Vt+zt.b*Kt,this.b=zt.a*qt+zt.b*Qt,this.c=zt.c*Vt+zt.d*Kt,this.d=zt.c*qt+zt.d*Qt,this.tx=zt.tx*Vt+zt.ty*Kt+this.tx,this.ty=zt.tx*qt+zt.ty*Qt+this.ty,this},jt.prototype.setTransform=function(zt,Vt,qt,Kt,Qt,Zt,Jt,$t,en){var tn=Math.sin(Jt),nn=Math.cos(Jt),rn=Math.cos(en),an=Math.sin(en),on=-Math.sin($t),sn=Math.cos($t),dn=nn*Qt,ln=tn*Qt,un=-tn*Zt,pn=nn*Zt;return this.a=rn*dn+an*un,this.b=rn*ln+an*pn,this.c=on*dn+sn*un,this.d=on*ln+sn*pn,this.tx=zt+(qt*dn+Kt*un),this.ty=Vt+(qt*ln+Kt*pn),this},jt.prototype.prepend=function(zt){var Vt=this.tx;if(1!==zt.a||0!==zt.b||0!==zt.c||1!==zt.d){var qt=this.a,Kt=this.c;this.a=qt*zt.a+this.b*zt.c,this.b=qt*zt.b+this.b*zt.d,this.c=Kt*zt.a+this.d*zt.c,this.d=Kt*zt.b+this.d*zt.d}return this.tx=Vt*zt.a+this.ty*zt.c+zt.tx,this.ty=Vt*zt.b+this.ty*zt.d+zt.ty,this},jt.prototype.decompose=function(zt){var Vt=this.a,qt=this.b,Kt=this.c,Qt=this.d,Zt=-Math.atan2(-Kt,Qt),Jt=Math.atan2(qt,Vt);return 1e-5>Math.abs(Zt+Jt)?(zt.rotation=Jt,0>Vt&&0<=Qt&&(zt.rotation+=0>=zt.rotation?Math.PI:-Math.PI),zt.skew.x=zt.skew.y=0):(zt.skew.x=Zt,zt.skew.y=Jt),zt.scale.x=Math.sqrt(Vt*Vt+qt*qt),zt.scale.y=Math.sqrt(Kt*Kt+Qt*Qt),zt.position.x=this.tx,zt.position.y=this.ty,zt},jt.prototype.invert=function(){var zt=this.a,Vt=this.b,qt=this.c,Kt=this.d,Qt=this.tx,Zt=zt*Kt-Vt*qt;return this.a=Kt/Zt,this.b=-Vt/Zt,this.c=-qt/Zt,this.d=zt/Zt,this.tx=(qt*this.ty-Kt*Qt)/Zt,this.ty=-(zt*this.ty-Vt*Qt)/Zt,this},jt.prototype.identity=function(){return this.a=1,this.b=0,this.c=0,this.d=1,this.tx=0,this.ty=0,this},jt.prototype.clone=function(){var zt=new jt;return zt.a=this.a,zt.b=this.b,zt.c=this.c,zt.d=this.d,zt.tx=this.tx,zt.ty=this.ty,zt},jt.prototype.copy=function(zt){return zt.a=this.a,zt.b=this.b,zt.c=this.c,zt.d=this.d,zt.tx=this.tx,zt.ty=this.ty,zt},Ht(jt,null,[{key:"IDENTITY",get:function(){return new jt}},{key:"TEMP_MATRIX",get:function(){return new jt}}]),jt}();Xt.default=Wt},{"./Point":69}],68:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Wt(jt,zt){for(var Vt=0,qt;Vt<zt.length;Vt++)qt=zt[Vt],qt.enumerable=qt.enumerable||!1,qt.configurable=!0,"value"in qt&&(qt.writable=!0),Object.defineProperty(jt,qt.key,qt)}return function(jt,zt,Vt){return zt&&Wt(jt.prototype,zt),Vt&&Wt(jt,Vt),jt}}(),Yt=function(){function Wt(jt,zt){var Vt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,qt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(Kt,Qt){if(!(Kt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this._x=Vt,this._y=qt,this.cb=jt,this.scope=zt}return Wt.prototype.set=function(jt,zt){var Vt=jt||0,qt=zt||(0===zt?0:Vt);this._x===Vt&&this._y===qt||(this._x=Vt,this._y=qt,this.cb.call(this.scope))},Wt.prototype.copy=function(jt){this._x===jt.x&&this._y===jt.y||(this._x=jt.x,this._y=jt.y,this.cb.call(this.scope))},Ht(Wt,[{key:"x",get:function(){return this._x},set:function(jt){this._x!==jt&&(this._x=jt,this.cb.call(this.scope))}},{key:"y",get:function(){return this._y},set:function(jt){this._y!==jt&&(this._y=jt,this.cb.call(this.scope))}}]),Wt}();Xt.default=Yt},{}],69:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Yt(){var Wt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0;!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Yt),this.x=Wt,this.y=jt}return Yt.prototype.clone=function(){return new Yt(this.x,this.y)},Yt.prototype.copy=function(Wt){this.set(Wt.x,Wt.y)},Yt.prototype.equals=function(Wt){return Wt.x===this.x&&Wt.y===this.y},Yt.prototype.set=function(Wt,jt){this.x=Wt||0,this.y=jt||(0===jt?0:this.x)},Yt}();Xt.default=Ht},{}],70:[function(Bt,Gt,Xt){function Ht(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Xt.__esModule=!0;var Yt=Bt("./Point");Object.defineProperty(Xt,"Point",{enumerable:!0,get:function(){return Ht(Yt).default}});var Wt=Bt("./ObservablePoint");Object.defineProperty(Xt,"ObservablePoint",{enumerable:!0,get:function(){return Ht(Wt).default}});var jt=Bt("./Matrix");Object.defineProperty(Xt,"Matrix",{enumerable:!0,get:function(){return Ht(jt).default}});var zt=Bt("./GroupD8");Object.defineProperty(Xt,"GroupD8",{enumerable:!0,get:function(){return Ht(zt).default}});var Vt=Bt("./shapes/Circle");Object.defineProperty(Xt,"Circle",{enumerable:!0,get:function(){return Ht(Vt).default}});var qt=Bt("./shapes/Ellipse");Object.defineProperty(Xt,"Ellipse",{enumerable:!0,get:function(){return Ht(qt).default}});var Kt=Bt("./shapes/Polygon");Object.defineProperty(Xt,"Polygon",{enumerable:!0,get:function(){return Ht(Kt).default}});var Qt=Bt("./shapes/Rectangle");Object.defineProperty(Xt,"Rectangle",{enumerable:!0,get:function(){return Ht(Qt).default}});var Zt=Bt("./shapes/RoundedRectangle");Object.defineProperty(Xt,"RoundedRectangle",{enumerable:!0,get:function(){return Ht(Zt).default}})},{"./GroupD8":66,"./Matrix":67,"./ObservablePoint":68,"./Point":69,"./shapes/Circle":71,"./shapes/Ellipse":72,"./shapes/Polygon":73,"./shapes/Rectangle":74,"./shapes/RoundedRectangle":75}],71:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./Rectangle")),Yt=Bt("../../const"),Wt=function(){function jt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0;!function(Kt,Qt){if(!(Kt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.x=zt,this.y=Vt,this.radius=qt,this.type=Yt.SHAPES.CIRC}return jt.prototype.clone=function(){return new jt(this.x,this.y,this.radius)},jt.prototype.contains=function(zt,Vt){if(0>=this.radius)return!1;var qt=this.radius*this.radius,Kt=this.x-zt,Qt=this.y-Vt;return Kt*=Kt,Qt*=Qt,Kt+Qt<=qt},jt.prototype.getBounds=function(){return new Ht.default(this.x-this.radius,this.y-this.radius,2*this.radius,2*this.radius)},jt}();Xt.default=Wt},{"../../const":46,"./Rectangle":74}],72:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./Rectangle")),Yt=Bt("../../const"),Wt=function(){function jt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Kt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.x=zt,this.y=Vt,this.width=qt,this.height=Kt,this.type=Yt.SHAPES.ELIP}return jt.prototype.clone=function(){return new jt(this.x,this.y,this.width,this.height)},jt.prototype.contains=function(zt,Vt){if(0>=this.width||0>=this.height)return!1;var qt=(zt-this.x)/this.width,Kt=(Vt-this.y)/this.height;return qt*=qt,Kt*=Kt,1>=qt+Kt},jt.prototype.getBounds=function(){return new Ht.default(this.x-this.width,this.y-this.height,this.width,this.height)},jt}();Xt.default=Wt},{"../../const":46,"./Rectangle":74}],73:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../Point")),Yt=Bt("../../const"),Wt=function(){function jt(){for(var zt=arguments.length,Vt=Array(zt),qt=0;qt<zt;qt++)Vt[qt]=arguments[qt];if(function(Jt,$t){if(!(Jt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,jt),Array.isArray(Vt[0])&&(Vt=Vt[0]),Vt[0]instanceof Ht.default){for(var Kt=[],Qt=0,Zt=Vt.length;Qt<Zt;Qt++)Kt.push(Vt[Qt].x,Vt[Qt].y);Vt=Kt}this.closed=!0,this.points=Vt,this.type=Yt.SHAPES.POLY}return jt.prototype.clone=function(){return new jt(this.points.slice())},jt.prototype.close=function(){var zt=this.points;zt[0]===zt[zt.length-2]&&zt[1]===zt[zt.length-1]||zt.push(zt[0],zt[1])},jt.prototype.contains=function(zt,Vt){for(var qt=!1,Kt=this.points.length/2,Qt=0,Zt=Kt-1;Qt<Kt;Zt=Qt++){var Jt=this.points[2*Qt],$t=this.points[2*Qt+1],en=this.points[2*Zt],tn=this.points[2*Zt+1];$t>Vt!=tn>Vt&&zt<(Vt-$t)/(tn-$t)*(en-Jt)+Jt&&(qt=!qt)}return qt},jt}();Xt.default=Wt},{"../../const":46,"../Point":69}],74:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=Bt("../../const"),Wt=function(){function jt(){var zt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,Vt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Kt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0;!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.x=+zt,this.y=+Vt,this.width=+qt,this.height=+Kt,this.type=Yt.SHAPES.RECT}return jt.prototype.clone=function(){return new jt(this.x,this.y,this.width,this.height)},jt.prototype.copy=function(zt){return this.x=zt.x,this.y=zt.y,this.width=zt.width,this.height=zt.height,this},jt.prototype.contains=function(zt,Vt){return!(0>=this.width||0>=this.height)&&zt>=this.x&&zt<this.x+this.width&&Vt>=this.y&&Vt<this.y+this.height},jt.prototype.pad=function(zt,Vt){zt=zt||0,Vt=Vt||(0===Vt?0:zt),this.x-=zt,this.y-=Vt,this.width+=2*zt,this.height+=2*Vt},jt.prototype.fit=function(zt){this.x<zt.x&&(this.width+=this.x,0>this.width&&(this.width=0),this.x=zt.x),this.y<zt.y&&(this.height+=this.y,0>this.height&&(this.height=0),this.y=zt.y),this.x+this.width>zt.x+zt.width&&(this.width=zt.width-this.x,0>this.width&&(this.width=0)),this.y+this.height>zt.y+zt.height&&(this.height=zt.height-this.y,0>this.height&&(this.height=0))},jt.prototype.enlarge=function(zt){var Vt=Math.min(this.x,zt.x),qt=Math.max(this.x+this.width,zt.x+zt.width),Kt=Math.min(this.y,zt.y),Qt=Math.max(this.y+this.height,zt.y+zt.height);this.x=Vt,this.width=qt-Vt,this.y=Kt,this.height=Qt-Kt},Ht(jt,[{key:"left",get:function(){return this.x}},{key:"right",get:function(){return this.x+this.width}},{key:"top",get:function(){return this.y}},{key:"bottom",get:function(){return this.y+this.height}}],[{key:"EMPTY",get:function(){return new jt(0,0,0,0)}}]),jt}();Xt.default=Wt},{"../../const":46}],75:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=Bt("../../const"),Yt=function(){function Wt(){var jt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,zt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:0,Vt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,qt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:0,Kt=4<arguments.length&&void 0!==arguments[4]?arguments[4]:20;!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.x=jt,this.y=zt,this.width=Vt,this.height=qt,this.radius=Kt,this.type=Ht.SHAPES.RREC}return Wt.prototype.clone=function(){return new Wt(this.x,this.y,this.width,this.height,this.radius)},Wt.prototype.contains=function(jt,zt){if(0>=this.width||0>=this.height)return!1;if(jt>=this.x&&jt<=this.x+this.width&&zt>=this.y&&zt<=this.y+this.height){if(zt>=this.y+this.radius&&zt<=this.y+this.height-this.radius||jt>=this.x+this.radius&&jt<=this.x+this.width-this.radius)return!0;var Vt=jt-(this.x+this.radius),qt=zt-(this.y+this.radius),Kt=this.radius*this.radius;if(Vt*Vt+qt*qt<=Kt)return!0;if((Vt=jt-(this.x+this.width-this.radius))*Vt+qt*qt<=Kt)return!0;if(qt=zt-(this.y+this.height-this.radius),Vt*Vt+qt*qt<=Kt)return!0;if((Vt=jt-(this.x+this.radius))*Vt+qt*qt<=Kt)return!0}return!1},Wt}();Xt.default=Yt},{"../../const":46}],76:[function(Bt,Gt,Xt){function Ht($t){return $t&&$t.__esModule?$t:{default:$t}}Xt.__esModule=!0;var Yt=function(){function $t(en,tn){for(var nn=0,rn;nn<tn.length;nn++)rn=tn[nn],rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(en,rn.key,rn)}return function(en,tn,nn){return tn&&$t(en.prototype,tn),nn&&$t(en,nn),en}}(),Wt=Bt("../utils"),jt=Bt("../math"),zt=Bt("../const"),Vt=Ht(Bt("../settings")),qt=Ht(Bt("../display/Container")),Kt=Ht(Bt("../textures/RenderTexture")),Qt=Ht(Bt("eventemitter3")),Zt=new jt.Matrix,Jt=function($t){function en(tn,nn,rn,an){!function(sn,dn){if(!(sn instanceof dn))throw new TypeError("Cannot call a class as a function")}(this,en);var on=function(sn,dn){if(!sn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return dn&&("object"==typeof dn||"function"==typeof dn)?dn:sn}(this,$t.call(this));return(0,Wt.sayHello)(tn),"number"==typeof nn&&(nn=Object.assign({width:nn,height:rn||Vt.default.RENDER_OPTIONS.height},an)),nn=Object.assign({},Vt.default.RENDER_OPTIONS,nn),on.options=nn,on.type=zt.RENDERER_TYPE.UNKNOWN,on.screen=new jt.Rectangle(0,0,nn.width,nn.height),on.view=nn.view||document.createElement("canvas"),on.resolution=nn.resolution||Vt.default.RESOLUTION,on.transparent=nn.transparent,on.autoResize=nn.autoResize||!1,on.blendModes=null,on.preserveDrawingBuffer=nn.preserveDrawingBuffer,on.clearBeforeRender=nn.clearBeforeRender,on.roundPixels=nn.roundPixels,on._backgroundColor=0,on._backgroundColorRgba=[0,0,0,0],on._backgroundColorString="#000000",on.backgroundColor=nn.backgroundColor||on._backgroundColor,on._tempDisplayObjectParent=new qt.default,on._lastObjectRendered=on._tempDisplayObjectParent,on}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.resize=function(tn,nn){this.screen.width=tn,this.screen.height=nn,this.view.width=tn*this.resolution,this.view.height=nn*this.resolution,this.autoResize&&(this.view.style.width=tn+"px",this.view.style.height=nn+"px")},en.prototype.generateTexture=function(tn,nn,rn){var an=tn.getLocalBounds(),on=Kt.default.create(0|an.width,0|an.height,nn,rn);return Zt.tx=-an.x,Zt.ty=-an.y,this.render(tn,on,!1,Zt,!0),on},en.prototype.destroy=function(tn){tn&&this.view.parentNode&&this.view.parentNode.removeChild(this.view),this.type=zt.RENDERER_TYPE.UNKNOWN,this.view=null,this.screen=null,this.resolution=0,this.transparent=!1,this.autoResize=!1,this.blendModes=null,this.options=null,this.preserveDrawingBuffer=!1,this.clearBeforeRender=!1,this.roundPixels=!1,this._backgroundColor=0,this._backgroundColorRgba=null,this._backgroundColorString=null,this._tempDisplayObjectParent=null,this._lastObjectRendered=null},Yt(en,[{key:"width",get:function(){return this.view.width}},{key:"height",get:function(){return this.view.height}},{key:"backgroundColor",get:function(){return this._backgroundColor},set:function(tn){this._backgroundColor=tn,this._backgroundColorString=(0,Wt.hex2string)(tn),(0,Wt.hex2rgb)(tn,this._backgroundColorRgba)}}]),en}(Qt.default);Xt.default=Jt},{"../const":46,"../display/Container":48,"../math":70,"../settings":101,"../textures/RenderTexture":113,"../utils":124,eventemitter3:3}],77:[function(Bt,Gt,Xt){function Ht(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Xt.__esModule=!0;var Yt=Ht(Bt("../SystemRenderer")),Wt=Ht(Bt("./utils/CanvasMaskManager")),jt=Ht(Bt("./utils/CanvasRenderTarget")),zt=Ht(Bt("./utils/mapCanvasBlendModesToPixi")),Vt=Bt("../../utils"),qt=Bt("../../const"),Kt=Ht(Bt("../../settings")),Qt=function(Zt){function Jt($t,en,tn){!function(rn,an){if(!(rn instanceof an))throw new TypeError("Cannot call a class as a function")}(this,Jt);var nn=function(rn,an){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an&&("object"==typeof an||"function"==typeof an)?an:rn}(this,Zt.call(this,"Canvas",$t,en,tn));return nn.type=qt.RENDERER_TYPE.CANVAS,nn.rootContext=nn.view.getContext("2d",{alpha:nn.transparent}),nn.context=nn.rootContext,nn.refresh=!0,nn.maskManager=new Wt.default(nn),nn.smoothProperty="imageSmoothingEnabled",nn.rootContext.imageSmoothingEnabled||(nn.rootContext.webkitImageSmoothingEnabled?nn.smoothProperty="webkitImageSmoothingEnabled":nn.rootContext.mozImageSmoothingEnabled?nn.smoothProperty="mozImageSmoothingEnabled":nn.rootContext.oImageSmoothingEnabled?nn.smoothProperty="oImageSmoothingEnabled":nn.rootContext.msImageSmoothingEnabled&&(nn.smoothProperty="msImageSmoothingEnabled")),nn.initPlugins(),nn.blendModes=(0,zt.default)(),nn._activeBlendMode=null,nn.renderingToScreen=!1,nn.resize(nn.options.width,nn.options.height),nn}return function($t,en){if("function"!=typeof en&&null!==en)throw new TypeError("Super expression must either be null or a function, not "+typeof en);$t.prototype=Object.create(en&&en.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),en&&(Object.setPrototypeOf?Object.setPrototypeOf($t,en):$t.__proto__=en)}(Jt,Zt),Jt.prototype.render=function($t,en,tn,nn,rn){if(this.view){this.renderingToScreen=!en,this.emit("prerender");var an=this.resolution;en?((en=en.baseTexture||en)._canvasRenderTarget||(en._canvasRenderTarget=new jt.default(en.width,en.height,en.resolution),en.source=en._canvasRenderTarget.canvas,en.valid=!0),this.context=en._canvasRenderTarget.context,this.resolution=en._canvasRenderTarget.resolution):this.context=this.rootContext;var on=this.context;if(en||(this._lastObjectRendered=$t),!rn){var sn=$t.parent,dn=this._tempDisplayObjectParent.transform.worldTransform;nn?(nn.copy(dn),this._tempDisplayObjectParent.transform._worldID=-1):dn.identity(),$t.parent=this._tempDisplayObjectParent,$t.updateTransform(),$t.parent=sn}on.setTransform(1,0,0,1,0,0),on.globalAlpha=1,this._activeBlendMode=qt.BLEND_MODES.NORMAL,on.globalCompositeOperation=this.blendModes[qt.BLEND_MODES.NORMAL],navigator.isCocoonJS&&this.view.screencanvas&&(on.fillStyle="black",on.clear()),(void 0===tn?this.clearBeforeRender:tn)&&this.renderingToScreen&&(this.transparent?on.clearRect(0,0,this.width,this.height):(on.fillStyle=this._backgroundColorString,on.fillRect(0,0,this.width,this.height)));var ln=this.context;this.context=on,$t.renderCanvas(this),this.context=ln,this.resolution=an,this.emit("postrender")}},Jt.prototype.clear=function($t){var en=this.context;$t=$t||this._backgroundColorString,!this.transparent&&$t?(en.fillStyle=$t,en.fillRect(0,0,this.width,this.height)):en.clearRect(0,0,this.width,this.height)},Jt.prototype.setBlendMode=function($t){this._activeBlendMode!==$t&&(this._activeBlendMode=$t,this.context.globalCompositeOperation=this.blendModes[$t])},Jt.prototype.destroy=function($t){this.destroyPlugins(),Zt.prototype.destroy.call(this,$t),this.context=null,this.refresh=!0,this.maskManager.destroy(),this.maskManager=null,this.smoothProperty=null},Jt.prototype.resize=function($t,en){Zt.prototype.resize.call(this,$t,en),this.smoothProperty&&(this.rootContext[this.smoothProperty]=Kt.default.SCALE_MODE===qt.SCALE_MODES.LINEAR)},Jt.prototype.invalidateBlendMode=function(){this._activeBlendMode=this.blendModes.indexOf(this.context.globalCompositeOperation)},Jt}(Yt.default);Xt.default=Qt,Vt.pluginTarget.mixin(Qt)},{"../../const":46,"../../settings":101,"../../utils":124,"../SystemRenderer":76,"./utils/CanvasMaskManager":78,"./utils/CanvasRenderTarget":79,"./utils/mapCanvasBlendModesToPixi":81}],78:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=Bt("../../../const"),Yt=function(){function Wt(jt){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.renderer=jt}return Wt.prototype.pushMask=function(jt){var zt=this.renderer;zt.context.save();var Vt=jt.alpha,qt=jt.transform.worldTransform,Kt=zt.resolution;zt.context.setTransform(qt.a*Kt,qt.b*Kt,qt.c*Kt,qt.d*Kt,qt.tx*Kt,qt.ty*Kt),jt._texture||(this.renderGraphicsShape(jt),zt.context.clip()),jt.worldAlpha=Vt},Wt.prototype.renderGraphicsShape=function(jt){var zt=this.renderer.context,Vt=jt.graphicsData.length;if(0!==Vt){zt.beginPath();for(var qt=0;qt<Vt;qt++){var Kt=jt.graphicsData[qt],Qt=Kt.shape;if(Kt.type===Ht.SHAPES.POLY){var Zt=Qt.points;zt.moveTo(Zt[0],Zt[1]);for(var Jt=1;Jt<Zt.length/2;Jt++)zt.lineTo(Zt[2*Jt],Zt[2*Jt+1]);Zt[0]===Zt[Zt.length-2]&&Zt[1]===Zt[Zt.length-1]&&zt.closePath()}else if(Kt.type===Ht.SHAPES.RECT)zt.rect(Qt.x,Qt.y,Qt.width,Qt.height),zt.closePath();else if(Kt.type===Ht.SHAPES.CIRC)zt.arc(Qt.x,Qt.y,Qt.radius,0,2*Math.PI),zt.closePath();else if(Kt.type===Ht.SHAPES.ELIP){var $t=2*Qt.width,en=2*Qt.height,tn=Qt.x-$t/2,nn=Qt.y-en/2,rn=.5522848*($t/2),an=.5522848*(en/2),on=tn+$t,sn=nn+en,dn=tn+$t/2,ln=nn+en/2;zt.moveTo(tn,ln),zt.bezierCurveTo(tn,ln-an,dn-rn,nn,dn,nn),zt.bezierCurveTo(dn+rn,nn,on,ln-an,on,ln),zt.bezierCurveTo(on,ln+an,dn+rn,sn,dn,sn),zt.bezierCurveTo(dn-rn,sn,tn,ln+an,tn,ln),zt.closePath()}else if(Kt.type===Ht.SHAPES.RREC){var un=Qt.x,pn=Qt.y,cn=Qt.width,hn=Qt.height,fn=Qt.radius,gn=0|Math.min(cn,hn)/2;fn=fn>gn?gn:fn,zt.moveTo(un,pn+fn),zt.lineTo(un,pn+hn-fn),zt.quadraticCurveTo(un,pn+hn,un+fn,pn+hn),zt.lineTo(un+cn-fn,pn+hn),zt.quadraticCurveTo(un+cn,pn+hn,un+cn,pn+hn-fn),zt.lineTo(un+cn,pn+fn),zt.quadraticCurveTo(un+cn,pn,un+cn-fn,pn),zt.lineTo(un+fn,pn),zt.quadraticCurveTo(un,pn,un,pn+fn),zt.closePath()}}}},Wt.prototype.popMask=function(jt){jt.context.restore(),jt.invalidateBlendMode()},Wt.prototype.destroy=function(){},Wt}();Xt.default=Yt},{"../../../const":46}],79:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../../../settings")),Wt=function(){function jt(zt,Vt,qt){!function(Kt,Qt){if(!(Kt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.canvas=document.createElement("canvas"),this.context=this.canvas.getContext("2d"),this.resolution=qt||Yt.default.RESOLUTION,this.resize(zt,Vt)}return jt.prototype.clear=function(){this.context.setTransform(1,0,0,1,0,0),this.context.clearRect(0,0,this.canvas.width,this.canvas.height)},jt.prototype.resize=function(zt,Vt){this.canvas.width=zt*this.resolution,this.canvas.height=Vt*this.resolution},jt.prototype.destroy=function(){this.context=null,this.canvas=null},Ht(jt,[{key:"width",get:function(){return this.canvas.width},set:function(zt){this.canvas.width=zt}},{key:"height",get:function(){return this.canvas.height},set:function(zt){this.canvas.height=zt}}]),jt}();Xt.default=Wt},{"../../../settings":101}],80:[function(Bt,Gt,Xt){function Ht(Yt){var Wt=document.createElement("canvas");Wt.width=6,Wt.height=1;var jt=Wt.getContext("2d");return jt.fillStyle=Yt,jt.fillRect(0,0,6,1),Wt}Xt.__esModule=!0,Xt.default=function(){if("undefined"==typeof document)return!1;var Yt=Ht("#ff00ff"),Wt=Ht("#ffff00"),jt=document.createElement("canvas");jt.width=6,jt.height=1;var zt=jt.getContext("2d");zt.globalCompositeOperation="multiply",zt.drawImage(Yt,0,0),zt.drawImage(Wt,2,0);var Vt=zt.getImageData(2,0,1,1);if(!Vt)return!1;var qt=Vt.data;return 255===qt[0]&&0===qt[1]&&0===qt[2]}},{}],81:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(){var Wt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:[];return(0,Yt.default)()?(Wt[Ht.BLEND_MODES.NORMAL]="source-over",Wt[Ht.BLEND_MODES.ADD]="lighter",Wt[Ht.BLEND_MODES.MULTIPLY]="multiply",Wt[Ht.BLEND_MODES.SCREEN]="screen",Wt[Ht.BLEND_MODES.OVERLAY]="overlay",Wt[Ht.BLEND_MODES.DARKEN]="darken",Wt[Ht.BLEND_MODES.LIGHTEN]="lighten",Wt[Ht.BLEND_MODES.COLOR_DODGE]="color-dodge",Wt[Ht.BLEND_MODES.COLOR_BURN]="color-burn",Wt[Ht.BLEND_MODES.HARD_LIGHT]="hard-light",Wt[Ht.BLEND_MODES.SOFT_LIGHT]="soft-light",Wt[Ht.BLEND_MODES.DIFFERENCE]="difference",Wt[Ht.BLEND_MODES.EXCLUSION]="exclusion",Wt[Ht.BLEND_MODES.HUE]="hue",Wt[Ht.BLEND_MODES.SATURATION]="saturate",Wt[Ht.BLEND_MODES.COLOR]="color",Wt[Ht.BLEND_MODES.LUMINOSITY]="luminosity"):(Wt[Ht.BLEND_MODES.NORMAL]="source-over",Wt[Ht.BLEND_MODES.ADD]="lighter",Wt[Ht.BLEND_MODES.MULTIPLY]="source-over",Wt[Ht.BLEND_MODES.SCREEN]="source-over",Wt[Ht.BLEND_MODES.OVERLAY]="source-over",Wt[Ht.BLEND_MODES.DARKEN]="source-over",Wt[Ht.BLEND_MODES.LIGHTEN]="source-over",Wt[Ht.BLEND_MODES.COLOR_DODGE]="source-over",Wt[Ht.BLEND_MODES.COLOR_BURN]="source-over",Wt[Ht.BLEND_MODES.HARD_LIGHT]="source-over",Wt[Ht.BLEND_MODES.SOFT_LIGHT]="source-over",Wt[Ht.BLEND_MODES.DIFFERENCE]="source-over",Wt[Ht.BLEND_MODES.EXCLUSION]="source-over",Wt[Ht.BLEND_MODES.HUE]="source-over",Wt[Ht.BLEND_MODES.SATURATION]="source-over",Wt[Ht.BLEND_MODES.COLOR]="source-over",Wt[Ht.BLEND_MODES.LUMINOSITY]="source-over"),Wt[Ht.BLEND_MODES.NORMAL_NPM]=Wt[Ht.BLEND_MODES.NORMAL],Wt[Ht.BLEND_MODES.ADD_NPM]=Wt[Ht.BLEND_MODES.ADD],Wt[Ht.BLEND_MODES.SCREEN_NPM]=Wt[Ht.BLEND_MODES.SCREEN],Wt};var Ht=Bt("../../../const"),Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./canUseNewCanvasBlendModes"))},{"../../../const":46,"./canUseNewCanvasBlendModes":80}],82:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=Bt("../../const"),Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../../settings")),Wt=function(){function jt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=zt,this.count=0,this.checkCount=0,this.maxIdle=Yt.default.GC_MAX_IDLE,this.checkCountMax=Yt.default.GC_MAX_CHECK_COUNT,this.mode=Yt.default.GC_MODE}return jt.prototype.update=function(){this.count++,this.mode!==Ht.GC_MODES.MANUAL&&(this.checkCount++,this.checkCount>this.checkCountMax&&(this.checkCount=0,this.run()))},jt.prototype.run=function(){for(var zt=this.renderer.textureManager,Vt=zt._managedTextures,qt=!1,Kt=0,Qt;Kt<Vt.length;Kt++)Qt=Vt[Kt],!Qt._glRenderTargets&&this.count-Qt.touched>this.maxIdle&&(zt.destroyTexture(Qt,!0),Vt[Kt]=null,qt=!0);if(qt){for(var Zt=0,Jt=0;Jt<Vt.length;Jt++)null!==Vt[Jt]&&(Vt[Zt++]=Vt[Jt]);Vt.length=Zt}},jt.prototype.unload=function(zt){var Vt=this.renderer.textureManager;zt._texture&&zt._texture._glRenderTargets&&Vt.destroyTexture(zt._texture,!0);for(var qt=zt.children.length-1;0<=qt;qt--)this.unload(zt.children[qt])},jt}();Xt.default=Wt},{"../../const":46,"../../settings":101}],83:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=Bt("pixi-gl-core"),Yt=Bt("../../const"),Wt=function(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}(Bt("./utils/RenderTarget")),jt=Bt("../../utils"),zt=function(){function Vt(qt){!function(Kt,Qt){if(!(Kt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,Vt),this.renderer=qt,this.gl=qt.gl,this._managedTextures=[]}return Vt.prototype.bindTexture=function(){},Vt.prototype.getTexture=function(){},Vt.prototype.updateTexture=function(qt,Kt){var Qt=this.gl,Zt=!!qt._glRenderTargets;if(!qt.hasLoaded)return null;var Jt=this.renderer.boundTextures;if(void 0===Kt){Kt=0;for(var $t=0;$t<Jt.length;++$t)if(Jt[$t]===qt){Kt=$t;break}}Jt[Kt]=qt,Qt.activeTexture(Qt.TEXTURE0+Kt);var en=qt._glTextures[this.renderer.CONTEXT_UID];if(en)Zt?qt._glRenderTargets[this.renderer.CONTEXT_UID].resize(qt.width,qt.height):en.upload(qt.source);else{if(Zt){var tn=new Wt.default(this.gl,qt.width,qt.height,qt.scaleMode,qt.resolution);tn.resize(qt.width,qt.height),qt._glRenderTargets[this.renderer.CONTEXT_UID]=tn,en=tn.texture}else(en=new Ht.GLTexture(this.gl,null,null,null,null)).bind(Kt),en.premultiplyAlpha=!0,en.upload(qt.source);qt._glTextures[this.renderer.CONTEXT_UID]=en,qt.on("update",this.updateTexture,this),qt.on("dispose",this.destroyTexture,this),this._managedTextures.push(qt),qt.isPowerOfTwo?(qt.mipmap&&en.enableMipmap(),qt.wrapMode===Yt.WRAP_MODES.CLAMP?en.enableWrapClamp():qt.wrapMode===Yt.WRAP_MODES.REPEAT?en.enableWrapRepeat():en.enableWrapMirrorRepeat()):en.enableWrapClamp(),qt.scaleMode===Yt.SCALE_MODES.NEAREST?en.enableNearestScaling():en.enableLinearScaling()}return en},Vt.prototype.destroyTexture=function(qt,Kt){if((qt=qt.baseTexture||qt).hasLoaded){var Qt=this.renderer.CONTEXT_UID,Zt=qt._glTextures,Jt=qt._glRenderTargets;if(Zt[Qt]&&(this.renderer.unbindTexture(qt),Zt[Qt].destroy(),qt.off("update",this.updateTexture,this),qt.off("dispose",this.destroyTexture,this),delete Zt[Qt],!Kt)){var $t=this._managedTextures.indexOf(qt);-1!==$t&&(0,jt.removeItems)(this._managedTextures,$t,1)}Jt&&Jt[Qt]&&(Jt[Qt].destroy(),delete Jt[Qt])}},Vt.prototype.removeAll=function(){for(var qt=0,Kt;qt<this._managedTextures.length;++qt)Kt=this._managedTextures[qt],Kt._glTextures[this.renderer.CONTEXT_UID]&&delete Kt._glTextures[this.renderer.CONTEXT_UID]},Vt.prototype.destroy=function(){for(var qt=0,Kt;qt<this._managedTextures.length;++qt)Kt=this._managedTextures[qt],this.destroyTexture(Kt,!0),Kt.off("update",this.updateTexture,this),Kt.off("dispose",this.destroyTexture,this);this._managedTextures=null},Vt}();Xt.default=zt},{"../../const":46,"../../utils":124,"./utils/RenderTarget":96,"pixi-gl-core":12}],84:[function(Bt,Gt,Xt){function Ht(sn){return sn&&sn.__esModule?sn:{default:sn}}Xt.__esModule=!0;var Yt=Ht(Bt("../SystemRenderer")),Wt=Ht(Bt("./managers/MaskManager")),jt=Ht(Bt("./managers/StencilManager")),zt=Ht(Bt("./managers/FilterManager")),Vt=Ht(Bt("./utils/RenderTarget")),qt=Ht(Bt("./utils/ObjectRenderer")),Kt=Ht(Bt("./TextureManager")),Qt=Ht(Bt("../../textures/BaseTexture")),Zt=Ht(Bt("./TextureGarbageCollector")),Jt=Ht(Bt("./WebGLState")),$t=Ht(Bt("./utils/mapWebGLDrawModesToPixi")),en=Ht(Bt("./utils/validateContext")),tn=Bt("../../utils"),nn=Ht(Bt("pixi-gl-core")),rn=Bt("../../const"),an=0,on=function(sn){function dn(ln,un,pn){!function(hn,fn){if(!(hn instanceof fn))throw new TypeError("Cannot call a class as a function")}(this,dn);var cn=function(hn,fn){if(!hn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return fn&&("object"==typeof fn||"function"==typeof fn)?fn:hn}(this,sn.call(this,"WebGL",ln,un,pn));return cn.legacy=cn.options.legacy,cn.legacy&&(nn.default.VertexArrayObject.FORCE_NATIVE=!0),cn.type=rn.RENDERER_TYPE.WEBGL,cn.handleContextLost=cn.handleContextLost.bind(cn),cn.handleContextRestored=cn.handleContextRestored.bind(cn),cn.view.addEventListener("webglcontextlost",cn.handleContextLost,!1),cn.view.addEventListener("webglcontextrestored",cn.handleContextRestored,!1),cn._contextOptions={alpha:cn.transparent,antialias:cn.options.antialias,premultipliedAlpha:cn.transparent&&"notMultiplied"!==cn.transparent,stencil:!0,preserveDrawingBuffer:cn.options.preserveDrawingBuffer,powerPreference:cn.options.powerPreference},cn._backgroundColorRgba[3]=cn.transparent?0:1,cn.maskManager=new Wt.default(cn),cn.stencilManager=new jt.default(cn),cn.emptyRenderer=new qt.default(cn),cn.currentRenderer=cn.emptyRenderer,cn.textureManager=null,cn.filterManager=null,cn.initPlugins(),cn.options.context&&(0,en.default)(cn.options.context),cn.gl=cn.options.context||nn.default.createContext(cn.view,cn._contextOptions),cn.CONTEXT_UID=an++,cn.state=new Jt.default(cn.gl),cn.renderingToScreen=!0,cn.boundTextures=null,cn._activeShader=null,cn._activeVao=null,cn._activeRenderTarget=null,cn._initContext(),cn.drawModes=(0,$t.default)(cn.gl),cn._nextTextureLocation=0,cn.setBlendMode(0),cn}return function(ln,un){if("function"!=typeof un&&null!==un)throw new TypeError("Super expression must either be null or a function, not "+typeof un);ln.prototype=Object.create(un&&un.prototype,{constructor:{value:ln,enumerable:!1,writable:!0,configurable:!0}}),un&&(Object.setPrototypeOf?Object.setPrototypeOf(ln,un):ln.__proto__=un)}(dn,sn),dn.prototype._initContext=function(){var ln=this.gl;ln.isContextLost()&&ln.getExtension("WEBGL_lose_context")&&ln.getExtension("WEBGL_lose_context").restoreContext();var un=ln.getParameter(ln.MAX_TEXTURE_IMAGE_UNITS);this._activeShader=null,this._activeVao=null,this.boundTextures=Array(un),this.emptyTextures=Array(un),this.textureManager=new Kt.default(this),this.filterManager=new zt.default(this),this.textureGC=new Zt.default(this),this.state.resetToDefault(),this.rootRenderTarget=new Vt.default(ln,this.width,this.height,null,this.resolution,!0),this.rootRenderTarget.clearColor=this._backgroundColorRgba,this.bindRenderTarget(this.rootRenderTarget);var pn=new nn.default.GLTexture.fromData(ln,null,1,1),cn={_glTextures:{}};cn._glTextures[this.CONTEXT_UID]={};for(var hn=0,fn;hn<un;hn++)fn=new Qt.default,fn._glTextures[this.CONTEXT_UID]=pn,this.boundTextures[hn]=cn,this.emptyTextures[hn]=fn,this.bindTexture(null,hn);this.emit("context",ln),this.resize(this.screen.width,this.screen.height)},dn.prototype.render=function(ln,un,pn,cn,hn){if(this.renderingToScreen=!un,this.emit("prerender"),this.gl&&!this.gl.isContextLost()){if(this._nextTextureLocation=0,un||(this._lastObjectRendered=ln),!hn){var fn=ln.parent;ln.parent=this._tempDisplayObjectParent,ln.updateTransform(),ln.parent=fn}this.bindRenderTexture(un,cn),this.currentRenderer.start(),(void 0===pn?this.clearBeforeRender:pn)&&this._activeRenderTarget.clear(),ln.renderWebGL(this),this.currentRenderer.flush(),this.textureGC.update(),this.emit("postrender")}},dn.prototype.setObjectRenderer=function(ln){this.currentRenderer!==ln&&(this.currentRenderer.stop(),this.currentRenderer=ln,this.currentRenderer.start())},dn.prototype.flush=function(){this.setObjectRenderer(this.emptyRenderer)},dn.prototype.resize=function(ln,un){Yt.default.prototype.resize.call(this,ln,un),this.rootRenderTarget.resize(ln,un),this._activeRenderTarget===this.rootRenderTarget&&(this.rootRenderTarget.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=this.rootRenderTarget.projectionMatrix.toArray(!0)))},dn.prototype.setBlendMode=function(ln){this.state.setBlendMode(ln)},dn.prototype.clear=function(ln){this._activeRenderTarget.clear(ln)},dn.prototype.setTransform=function(ln){this._activeRenderTarget.transform=ln},dn.prototype.clearRenderTexture=function(ln,un){var pn=ln.baseTexture._glRenderTargets[this.CONTEXT_UID];return pn&&pn.clear(un),this},dn.prototype.bindRenderTexture=function(ln,un){var pn;if(ln){var cn=ln.baseTexture;cn._glRenderTargets[this.CONTEXT_UID]||this.textureManager.updateTexture(cn,0),this.unbindTexture(cn),(pn=cn._glRenderTargets[this.CONTEXT_UID]).setFrame(ln.frame)}else pn=this.rootRenderTarget;return pn.transform=un,this.bindRenderTarget(pn),this},dn.prototype.bindRenderTarget=function(ln){return ln!==this._activeRenderTarget&&(this._activeRenderTarget=ln,ln.activate(),this._activeShader&&(this._activeShader.uniforms.projectionMatrix=ln.projectionMatrix.toArray(!0)),this.stencilManager.setMaskStack(ln.stencilMaskStack)),this},dn.prototype.bindShader=function(ln,un){return this._activeShader!==ln&&(this._activeShader=ln,ln.bind(),!1!==un&&(ln.uniforms.projectionMatrix=this._activeRenderTarget.projectionMatrix.toArray(!0))),this},dn.prototype.bindTexture=function(ln,un,pn){if(ln=ln||this.emptyTextures[un],ln=ln.baseTexture||ln,ln.touched=this.textureGC.count,pn)un=un||0;else{for(var cn=0;cn<this.boundTextures.length;cn++)if(this.boundTextures[cn]===ln)return cn;void 0===un&&(this._nextTextureLocation++,this._nextTextureLocation%=this.boundTextures.length,un=this.boundTextures.length-this._nextTextureLocation-1)}var hn=this.gl,fn=ln._glTextures[this.CONTEXT_UID];return fn?(this.boundTextures[un]=ln,hn.activeTexture(hn.TEXTURE0+un),hn.bindTexture(hn.TEXTURE_2D,fn.texture)):this.textureManager.updateTexture(ln,un),un},dn.prototype.unbindTexture=function(ln){var un=this.gl;ln=ln.baseTexture||ln;for(var pn=0;pn<this.boundTextures.length;pn++)this.boundTextures[pn]===ln&&(this.boundTextures[pn]=this.emptyTextures[pn],un.activeTexture(un.TEXTURE0+pn),un.bindTexture(un.TEXTURE_2D,this.emptyTextures[pn]._glTextures[this.CONTEXT_UID].texture));return this},dn.prototype.createVao=function(){return new nn.default.VertexArrayObject(this.gl,this.state.attribState)},dn.prototype.bindVao=function(ln){return this._activeVao===ln?this:(ln?ln.bind():this._activeVao&&this._activeVao.unbind(),this._activeVao=ln,this)},dn.prototype.reset=function(){return this.setObjectRenderer(this.emptyRenderer),this._activeShader=null,this._activeRenderTarget=this.rootRenderTarget,this.rootRenderTarget.activate(),this.state.resetToDefault(),this},dn.prototype.handleContextLost=function(ln){ln.preventDefault()},dn.prototype.handleContextRestored=function(){this.textureManager.removeAll(),this.filterManager.destroy(!0),this._initContext()},dn.prototype.destroy=function(ln){this.destroyPlugins(),this.view.removeEventListener("webglcontextlost",this.handleContextLost),this.view.removeEventListener("webglcontextrestored",this.handleContextRestored),this.textureManager.destroy(),sn.prototype.destroy.call(this,ln),this.uid=0,this.maskManager.destroy(),this.stencilManager.destroy(),this.filterManager.destroy(),this.maskManager=null,this.filterManager=null,this.textureManager=null,this.currentRenderer=null,this.handleContextLost=null,this.handleContextRestored=null,this._contextOptions=null,this.gl.useProgram(null),this.gl.getExtension("WEBGL_lose_context")&&this.gl.getExtension("WEBGL_lose_context").loseContext(),this.gl=null},dn}(Yt.default);Xt.default=on,tn.pluginTarget.mixin(on)},{"../../const":46,"../../textures/BaseTexture":112,"../../utils":124,"../SystemRenderer":76,"./TextureGarbageCollector":82,"./TextureManager":83,"./WebGLState":85,"./managers/FilterManager":90,"./managers/MaskManager":91,"./managers/StencilManager":92,"./utils/ObjectRenderer":94,"./utils/RenderTarget":96,"./utils/mapWebGLDrawModesToPixi":99,"./utils/validateContext":100,"pixi-gl-core":12}],85:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./utils/mapWebGLBlendModesToPixi")),Yt=function(){function Wt(jt){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.activeState=new Uint8Array(16),this.defaultState=new Uint8Array(16),this.defaultState[0]=1,this.stackIndex=0,this.stack=[],this.gl=jt,this.maxAttribs=jt.getParameter(jt.MAX_VERTEX_ATTRIBS),this.attribState={tempAttribState:Array(this.maxAttribs),attribState:Array(this.maxAttribs)},this.blendModes=(0,Ht.default)(jt),this.nativeVaoExtension=jt.getExtension("OES_vertex_array_object")||jt.getExtension("MOZ_OES_vertex_array_object")||jt.getExtension("WEBKIT_OES_vertex_array_object")}return Wt.prototype.push=function(){var jt=this.stack[this.stackIndex];jt||(jt=this.stack[this.stackIndex]=new Uint8Array(16)),++this.stackIndex;for(var zt=0;zt<this.activeState.length;zt++)jt[zt]=this.activeState[zt]},Wt.prototype.pop=function(){var jt=this.stack[--this.stackIndex];this.setState(jt)},Wt.prototype.setState=function(jt){this.setBlend(jt[0]),this.setDepthTest(jt[1]),this.setFrontFace(jt[2]),this.setCullFace(jt[3]),this.setBlendMode(jt[4])},Wt.prototype.setBlend=function(jt){jt=jt?1:0,this.activeState[0]!==jt&&(this.activeState[0]=jt,this.gl[jt?"enable":"disable"](this.gl.BLEND))},Wt.prototype.setBlendMode=function(jt){if(jt!==this.activeState[4]){this.activeState[4]=jt;var zt=this.blendModes[jt];2===zt.length?this.gl.blendFunc(zt[0],zt[1]):this.gl.blendFuncSeparate(zt[0],zt[1],zt[2],zt[3])}},Wt.prototype.setDepthTest=function(jt){jt=jt?1:0,this.activeState[1]!==jt&&(this.activeState[1]=jt,this.gl[jt?"enable":"disable"](this.gl.DEPTH_TEST))},Wt.prototype.setCullFace=function(jt){jt=jt?1:0,this.activeState[3]!==jt&&(this.activeState[3]=jt,this.gl[jt?"enable":"disable"](this.gl.CULL_FACE))},Wt.prototype.setFrontFace=function(jt){jt=jt?1:0,this.activeState[2]!==jt&&(this.activeState[2]=jt,this.gl.frontFace(this.gl[jt?"CW":"CCW"]))},Wt.prototype.resetAttributes=function(){for(var jt=0;jt<this.attribState.tempAttribState.length;jt++)this.attribState.tempAttribState[jt]=0;for(var zt=0;zt<this.attribState.attribState.length;zt++)this.attribState.attribState[zt]=0;for(var Vt=1;Vt<this.maxAttribs;Vt++)this.gl.disableVertexAttribArray(Vt)},Wt.prototype.resetToDefault=function(){this.nativeVaoExtension&&this.nativeVaoExtension.bindVertexArrayOES(null),this.resetAttributes();for(var jt=0;jt<this.activeState.length;++jt)this.activeState[jt]=32;this.gl.pixelStorei(this.gl.UNPACK_FLIP_Y_WEBGL,!1),this.setState(this.defaultState)},Wt}();Xt.default=Yt},{"./utils/mapWebGLBlendModesToPixi":98}],86:[function(Bt,Gt,Xt){function Ht(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}Xt.__esModule=!0;var Yt=function(){function Qt(Zt,Jt){for(var $t=0,en;$t<Jt.length;$t++)en=Jt[$t],en.enumerable=en.enumerable||!1,en.configurable=!0,"value"in en&&(en.writable=!0),Object.defineProperty(Zt,en.key,en)}return function(Zt,Jt,$t){return Jt&&Qt(Zt.prototype,Jt),$t&&Qt(Zt,$t),Zt}}(),Wt=Ht(Bt("./extractUniformsFromSrc")),jt=Bt("../../../utils"),zt=Bt("../../../const"),Vt=Ht(Bt("../../../settings")),qt={},Kt=function(){function Qt(Zt,Jt,$t){for(var en in!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Qt),this.vertexSrc=Zt||Qt.defaultVertexSrc,this.fragmentSrc=Jt||Qt.defaultFragmentSrc,this._blendMode=zt.BLEND_MODES.NORMAL,this.uniformData=$t||(0,Wt.default)(this.vertexSrc,this.fragmentSrc,"projectionMatrix|uSampler"),this.uniforms={},this.uniformData)this.uniforms[en]=this.uniformData[en].value,this.uniformData[en].type&&(this.uniformData[en].type=this.uniformData[en].type.toLowerCase());this.glShaders={},qt[this.vertexSrc+this.fragmentSrc]||(qt[this.vertexSrc+this.fragmentSrc]=(0,jt.uid)()),this.glShaderKey=qt[this.vertexSrc+this.fragmentSrc],this.padding=4,this.resolution=Vt.default.RESOLUTION,this.enabled=!0,this.autoFit=!0}return Qt.prototype.apply=function(Zt,Jt,$t,en){Zt.applyFilter(this,Jt,$t,en)},Yt(Qt,[{key:"blendMode",get:function(){return this._blendMode},set:function(Zt){this._blendMode=Zt}}],[{key:"defaultVertexSrc",get:function(){return["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform mat3 projectionMatrix;","uniform mat3 filterMatrix;","varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","void main(void){","   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);","   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;","   vTextureCoord = aTextureCoord ;","}"].join("\n")}},{key:"defaultFragmentSrc",get:function(){return["varying vec2 vTextureCoord;","varying vec2 vFilterCoord;","uniform sampler2D uSampler;","uniform sampler2D filterSampler;","void main(void){","   vec4 masky = texture2D(filterSampler, vFilterCoord);","   vec4 sample = texture2D(uSampler, vTextureCoord);","   vec4 color;","   if(mod(vFilterCoord.x, 1.0) > 0.5)","   {","     color = vec4(1.0, 0.0, 0.0, 1.0);","   }","   else","   {","     color = vec4(0.0, 1.0, 0.0, 1.0);","   }","   gl_FragColor = mix(sample, masky, 0.5);","   gl_FragColor *= sample.a;","}"].join("\n")}}]),Qt}();Xt.default=Kt},{"../../../const":46,"../../../settings":101,"../../../utils":124,"./extractUniformsFromSrc":87}],87:[function(Bt,Gt,Xt){function Ht(Wt){for(var jt=/^(projectionMatrix|uSampler|filterArea|filterClamp)$/,zt={},Vt=void 0,qt=Wt.replace(/\s+/g," ").split(/\s*;\s*/),Kt=0,Qt;Kt<qt.length;Kt++)if(Qt=qt[Kt].trim(),-1<Qt.indexOf("uniform")){var Zt=Qt.split(" "),Jt=Zt[1],$t=Zt[2],en=1;-1<$t.indexOf("[")&&($t=(Vt=$t.split(/\[|]/))[0],en*=+Vt[1]),$t.match(jt)||(zt[$t]={value:Yt(Jt,en),name:$t,type:Jt})}return zt}Xt.__esModule=!0,Xt.default=function(Wt,jt){var Vt=Ht(Wt),qt=Ht(jt);return Object.assign(Vt,qt)};var Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("pixi-gl-core")).default.shader.defaultValue},{"pixi-gl-core":12}],88:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.calculateScreenSpaceMatrix=function(Yt,Wt,jt){var zt=Yt.identity();return zt.translate(Wt.x/jt.width,Wt.y/jt.height),zt.scale(jt.width,jt.height),zt},Xt.calculateNormalizedScreenSpaceMatrix=function(Yt,Wt,jt){var zt=Yt.identity();zt.translate(Wt.x/jt.width,Wt.y/jt.height);var Vt=jt.width/Wt.width,qt=jt.height/Wt.height;return zt.scale(Vt,qt),zt},Xt.calculateSpriteMatrix=function(Yt,Wt,jt,zt){var Vt=zt._texture.baseTexture,qt=Yt.set(jt.width,0,0,jt.height,Wt.x,Wt.y),Kt=zt.worldTransform.copy(Ht.Matrix.TEMP_MATRIX);return Kt.invert(),qt.prepend(Kt),qt.scale(1/Vt.width,1/Vt.height),qt.translate(zt.anchor.x,zt.anchor.y),qt};var Ht=Bt("../../../math")},{"../../../math":70}],89:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../Filter")),Yt=Bt("../../../../math"),Wt=(Bt("path"),function(jt){function zt(Vt){!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,zt);var qt=new Yt.Matrix,Kt=function(Qt,Zt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&("object"==typeof Zt||"function"==typeof Zt)?Zt:Qt}(this,jt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 otherMatrix;\n\nvarying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vMaskCoord = ( otherMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n}\n","varying vec2 vMaskCoord;\nvarying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform float alpha;\nuniform sampler2D mask;\n\nvoid main(void)\n{\n    // check clip! this will stop the mask bleeding out from the edges\n    vec2 text = abs( vMaskCoord - 0.5 );\n    text = step(0.5, text);\n\n    float clip = 1.0 - max(text.y, text.x);\n    vec4 original = texture2D(uSampler, vTextureCoord);\n    vec4 masky = texture2D(mask, vMaskCoord);\n\n    original *= (masky.r * masky.a * alpha * clip);\n\n    gl_FragColor = original;\n}\n"));return Vt.renderable=!1,Kt.maskSprite=Vt,Kt.maskMatrix=qt,Kt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.apply=function(Vt,qt,Kt){var Qt=this.maskSprite;this.uniforms.mask=Qt._texture,this.uniforms.otherMatrix=Vt.calculateSpriteMatrix(this.maskMatrix,Qt),this.uniforms.alpha=Qt.worldAlpha,Vt.applyFilter(this,qt,Kt)},zt}(Ht.default));Xt.default=Wt},{"../../../../math":70,"../Filter":86,path:23}],90:[function(Bt,Gt,Xt){function Ht($t){return $t&&$t.__esModule?$t:{default:$t}}function Yt($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}Xt.__esModule=!0;var Wt=Ht(Bt("./WebGLManager")),jt=Ht(Bt("../utils/RenderTarget")),zt=Ht(Bt("../utils/Quad")),Vt=Bt("../../../math"),qt=Ht(Bt("../../../Shader")),Kt=function($t){if($t&&$t.__esModule)return $t;var en={};if(null!=$t)for(var tn in $t)Object.prototype.hasOwnProperty.call($t,tn)&&(en[tn]=$t[tn]);return en.default=$t,en}(Bt("../filters/filterTransforms")),Qt=Ht(Bt("bit-twiddle")),Zt=function $t(){Yt(this,$t),this.renderTarget=null,this.sourceFrame=new Vt.Rectangle,this.destinationFrame=new Vt.Rectangle,this.filters=[],this.target=null,this.resolution=1},Jt=function($t){function en(tn){Yt(this,en);var nn=function(rn,an){if(!rn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return an&&("object"==typeof an||"function"==typeof an)?an:rn}(this,$t.call(this,tn));return nn.gl=nn.renderer.gl,nn.quad=new zt.default(nn.gl,tn.state.attribState),nn.shaderCache={},nn.pool={},nn.filterData=null,nn.managedFilters=[],nn}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.pushFilter=function(tn,nn){var rn=this.renderer,an=this.filterData;if(!an){an=this.renderer._activeRenderTarget.filterStack;var on=new Zt;on.sourceFrame=on.destinationFrame=this.renderer._activeRenderTarget.size,on.renderTarget=rn._activeRenderTarget,this.renderer._activeRenderTarget.filterData=an={index:0,stack:[on]},this.filterData=an}var sn=an.stack[++an.index];sn||(sn=an.stack[an.index]=new Zt);var dn=nn[0].resolution,ln=0|nn[0].padding,un=tn.filterArea||tn.getBounds(!0),pn=sn.sourceFrame,cn=sn.destinationFrame;pn.x=(0|un.x*dn)/dn,pn.y=(0|un.y*dn)/dn,pn.width=(0|un.width*dn)/dn,pn.height=(0|un.height*dn)/dn,an.stack[0].renderTarget.transform||nn[0].autoFit&&pn.fit(an.stack[0].destinationFrame),pn.pad(ln),cn.width=pn.width,cn.height=pn.height;var hn=this.getPotRenderTarget(rn.gl,pn.width,pn.height,dn);sn.target=tn,sn.filters=nn,sn.resolution=dn,sn.renderTarget=hn,hn.setFrame(cn,pn),rn.bindRenderTarget(hn),hn.clear()},en.prototype.popFilter=function(){var tn=this.filterData,nn=tn.stack[tn.index-1],rn=tn.stack[tn.index];this.quad.map(rn.renderTarget.size,rn.sourceFrame).upload();var an=rn.filters;if(1===an.length)an[0].apply(this,rn.renderTarget,nn.renderTarget,!1,rn),this.freePotRenderTarget(rn.renderTarget);else{var on=rn.renderTarget,sn=this.getPotRenderTarget(this.renderer.gl,rn.sourceFrame.width,rn.sourceFrame.height,rn.resolution);sn.setFrame(rn.destinationFrame,rn.sourceFrame),sn.clear();var dn=0;for(dn=0;dn<an.length-1;++dn){an[dn].apply(this,on,sn,!0,rn);var ln=on;on=sn,sn=ln}an[dn].apply(this,on,nn.renderTarget,!1,rn),this.freePotRenderTarget(on),this.freePotRenderTarget(sn)}tn.index--,0===tn.index&&(this.filterData=null)},en.prototype.applyFilter=function(tn,nn,rn,an){var on=this.renderer,sn=on.gl,dn=tn.glShaders[on.CONTEXT_UID];dn||(tn.glShaderKey?(dn=this.shaderCache[tn.glShaderKey])||(dn=new qt.default(this.gl,tn.vertexSrc,tn.fragmentSrc),tn.glShaders[on.CONTEXT_UID]=this.shaderCache[tn.glShaderKey]=dn):dn=tn.glShaders[on.CONTEXT_UID]=new qt.default(this.gl,tn.vertexSrc,tn.fragmentSrc),this.managedFilters.push(tn),on.bindVao(null),this.quad.initVao(dn)),on.bindVao(this.quad.vao),on.bindRenderTarget(rn),an&&(sn.disable(sn.SCISSOR_TEST),on.clear(),sn.enable(sn.SCISSOR_TEST)),rn===on.maskManager.scissorRenderTarget&&on.maskManager.pushScissorMask(null,on.maskManager.scissorData),on.bindShader(dn);var ln=this.renderer.emptyTextures[0];this.renderer.boundTextures[0]=ln,this.syncUniforms(dn,tn),on.state.setBlendMode(tn.blendMode),sn.activeTexture(sn.TEXTURE0),sn.bindTexture(sn.TEXTURE_2D,nn.texture.texture),this.quad.vao.draw(this.renderer.gl.TRIANGLES,6,0),sn.bindTexture(sn.TEXTURE_2D,ln._glTextures[this.renderer.CONTEXT_UID].texture)},en.prototype.syncUniforms=function(tn,nn){var rn=nn.uniformData,an=nn.uniforms,on=1,sn;if(tn.uniforms.filterArea){sn=this.filterData.stack[this.filterData.index];var dn=tn.uniforms.filterArea;dn[0]=sn.renderTarget.size.width,dn[1]=sn.renderTarget.size.height,dn[2]=sn.sourceFrame.x,dn[3]=sn.sourceFrame.y,tn.uniforms.filterArea=dn}if(tn.uniforms.filterClamp){sn=sn||this.filterData.stack[this.filterData.index];var ln=tn.uniforms.filterClamp;ln[0]=0,ln[1]=0,ln[2]=(sn.sourceFrame.width-1)/sn.renderTarget.size.width,ln[3]=(sn.sourceFrame.height-1)/sn.renderTarget.size.height,tn.uniforms.filterClamp=ln}for(var un in rn){var pn=rn[un].type;if("sampler2d"===pn&&0!==an[un]){if(an[un].baseTexture)tn.uniforms[un]=this.renderer.bindTexture(an[un].baseTexture,on);else{tn.uniforms[un]=on;var cn=this.renderer.gl;this.renderer.boundTextures[on]=this.renderer.emptyTextures[on],cn.activeTexture(cn.TEXTURE0+on),an[un].texture.bind()}on++}else if("mat3"===pn)tn.uniforms[un]=void 0===an[un].a?an[un]:an[un].toArray(!0);else if(!("vec2"===pn))"float"===pn?tn.uniforms.data[un].value!==rn[un]&&(tn.uniforms[un]=an[un]):tn.uniforms[un]=an[un];else if(void 0!==an[un].x){var hn=tn.uniforms[un]||new Float32Array(2);hn[0]=an[un].x,hn[1]=an[un].y,tn.uniforms[un]=hn}else tn.uniforms[un]=an[un]}},en.prototype.getRenderTarget=function(tn,nn){var rn=this.filterData.stack[this.filterData.index],an=this.getPotRenderTarget(this.renderer.gl,rn.sourceFrame.width,rn.sourceFrame.height,nn||rn.resolution);return an.setFrame(rn.destinationFrame,rn.sourceFrame),an},en.prototype.returnRenderTarget=function(tn){this.freePotRenderTarget(tn)},en.prototype.calculateScreenSpaceMatrix=function(tn){var nn=this.filterData.stack[this.filterData.index];return Kt.calculateScreenSpaceMatrix(tn,nn.sourceFrame,nn.renderTarget.size)},en.prototype.calculateNormalizedScreenSpaceMatrix=function(tn){var nn=this.filterData.stack[this.filterData.index];return Kt.calculateNormalizedScreenSpaceMatrix(tn,nn.sourceFrame,nn.renderTarget.size,nn.destinationFrame)},en.prototype.calculateSpriteMatrix=function(tn,nn){var rn=this.filterData.stack[this.filterData.index];return Kt.calculateSpriteMatrix(tn,rn.sourceFrame,rn.renderTarget.size,nn)},en.prototype.destroy=function(){for(var tn=0<arguments.length&&void 0!==arguments[0]&&arguments[0],nn=this.renderer,rn=this.managedFilters,an=0;an<rn.length;an++)tn||rn[an].glShaders[nn.CONTEXT_UID].destroy(),delete rn[an].glShaders[nn.CONTEXT_UID];this.shaderCache={},tn?this.pool={}:this.emptyPool()},en.prototype.getPotRenderTarget=function(tn,nn,rn,an){var on=(65535&(nn=Qt.default.nextPow2(nn*an)))<<16|65535&(rn=Qt.default.nextPow2(rn*an));this.pool[on]||(this.pool[on]=[]);var sn=this.pool[on].pop();if(!sn){var dn=this.renderer.boundTextures[0];tn.activeTexture(tn.TEXTURE0),sn=new jt.default(tn,nn,rn,null,1),tn.bindTexture(tn.TEXTURE_2D,dn._glTextures[this.renderer.CONTEXT_UID].texture)}return sn.resolution=an,sn.defaultFrame.width=sn.size.width=nn/an,sn.defaultFrame.height=sn.size.height=rn/an,sn},en.prototype.emptyPool=function(){for(var tn in this.pool){var nn=this.pool[tn];if(nn)for(var rn=0;rn<nn.length;rn++)nn[rn].destroy(!0)}this.pool={}},en.prototype.freePotRenderTarget=function(tn){var nn=(65535&tn.size.width*tn.resolution)<<16|65535&tn.size.height*tn.resolution;this.pool[nn].push(tn)},en}(Wt.default);Xt.default=Jt},{"../../../Shader":44,"../../../math":70,"../filters/filterTransforms":88,"../utils/Quad":95,"../utils/RenderTarget":96,"./WebGLManager":93,"bit-twiddle":1}],91:[function(Bt,Gt,Xt){function Ht(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0;var Yt=Ht(Bt("./WebGLManager")),Wt=Ht(Bt("../filters/spriteMask/SpriteMaskFilter")),jt=function(zt){function Vt(qt){!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Kt=function(Qt,Zt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&("object"==typeof Zt||"function"==typeof Zt)?Zt:Qt}(this,zt.call(this,qt));return Kt.scissor=!1,Kt.scissorData=null,Kt.scissorRenderTarget=null,Kt.enableScissor=!0,Kt.alphaMaskPool=[],Kt.alphaMaskIndex=0,Kt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.pushMask=function(qt,Kt){if(Kt.texture)this.pushSpriteMask(qt,Kt);else if(this.enableScissor&&!this.scissor&&this.renderer._activeRenderTarget.root&&!this.renderer.stencilManager.stencilMaskStack.length&&Kt.isFastRect()){var Qt=Kt.worldTransform,Zt=Math.atan2(Qt.b,Qt.a);(Zt=Math.round(Zt*(180/Math.PI)))%90?this.pushStencilMask(Kt):this.pushScissorMask(qt,Kt)}else this.pushStencilMask(Kt)},Vt.prototype.popMask=function(qt,Kt){Kt.texture?this.popSpriteMask(qt,Kt):this.enableScissor&&!this.renderer.stencilManager.stencilMaskStack.length?this.popScissorMask(qt,Kt):this.popStencilMask(qt,Kt)},Vt.prototype.pushSpriteMask=function(qt,Kt){var Qt=this.alphaMaskPool[this.alphaMaskIndex];Qt||(Qt=this.alphaMaskPool[this.alphaMaskIndex]=[new Wt.default(Kt)]),Qt[0].resolution=this.renderer.resolution,Qt[0].maskSprite=Kt,qt.filterArea=Kt.getBounds(!0),this.renderer.filterManager.pushFilter(qt,Qt),this.alphaMaskIndex++},Vt.prototype.popSpriteMask=function(){this.renderer.filterManager.popFilter(),this.alphaMaskIndex--},Vt.prototype.pushStencilMask=function(qt){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.pushStencil(qt)},Vt.prototype.popStencilMask=function(){this.renderer.currentRenderer.stop(),this.renderer.stencilManager.popStencil()},Vt.prototype.pushScissorMask=function(qt,Kt){Kt.renderable=!0;var Qt=this.renderer._activeRenderTarget,Zt=Kt.getBounds();Zt.fit(Qt.size),Kt.renderable=!1,this.renderer.gl.enable(this.renderer.gl.SCISSOR_TEST);var Jt=this.renderer.resolution;this.renderer.gl.scissor(Zt.x*Jt,(Qt.root?Qt.size.height-Zt.y-Zt.height:Zt.y)*Jt,Zt.width*Jt,Zt.height*Jt),this.scissorRenderTarget=Qt,this.scissorData=Kt,this.scissor=!0},Vt.prototype.popScissorMask=function(){this.scissorRenderTarget=null,this.scissorData=null,this.scissor=!1;var qt=this.renderer.gl;qt.disable(qt.SCISSOR_TEST)},Vt}(Yt.default);Xt.default=jt},{"../filters/spriteMask/SpriteMaskFilter":89,"./WebGLManager":93}],92:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./WebGLManager")),Yt=function(Wt){function jt(zt){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,jt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,Wt.call(this,zt));return Vt.stencilMaskStack=null,Vt}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(jt,Wt),jt.prototype.setMaskStack=function(zt){this.stencilMaskStack=zt;var Vt=this.renderer.gl;0===zt.length?Vt.disable(Vt.STENCIL_TEST):Vt.enable(Vt.STENCIL_TEST)},jt.prototype.pushStencil=function(zt){this.renderer.setObjectRenderer(this.renderer.plugins.graphics),this.renderer._activeRenderTarget.attachStencilBuffer();var Vt=this.renderer.gl,qt=this.stencilMaskStack.length;0===qt&&Vt.enable(Vt.STENCIL_TEST),this.stencilMaskStack.push(zt),Vt.colorMask(!1,!1,!1,!1),Vt.stencilFunc(Vt.EQUAL,qt,this._getBitwiseMask()),Vt.stencilOp(Vt.KEEP,Vt.KEEP,Vt.INCR),this.renderer.plugins.graphics.render(zt),this._useCurrent()},jt.prototype.popStencil=function(){this.renderer.setObjectRenderer(this.renderer.plugins.graphics);var zt=this.renderer.gl,Vt=this.stencilMaskStack.pop();0===this.stencilMaskStack.length?(zt.disable(zt.STENCIL_TEST),zt.clear(zt.STENCIL_BUFFER_BIT),zt.clearStencil(0)):(zt.colorMask(!1,!1,!1,!1),zt.stencilOp(zt.KEEP,zt.KEEP,zt.DECR),this.renderer.plugins.graphics.render(Vt),this._useCurrent())},jt.prototype._useCurrent=function(){var zt=this.renderer.gl;zt.colorMask(!0,!0,!0,!0),zt.stencilFunc(zt.EQUAL,this.stencilMaskStack.length,this._getBitwiseMask()),zt.stencilOp(zt.KEEP,zt.KEEP,zt.KEEP)},jt.prototype._getBitwiseMask=function(){return(1<<this.stencilMaskStack.length)-1},jt.prototype.destroy=function(){Ht.default.prototype.destroy.call(this),this.stencilMaskStack.stencilStack=null},jt}(Ht.default);Xt.default=Yt},{"./WebGLManager":93}],93:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Yt(Wt){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Yt),this.renderer=Wt,this.renderer.on("context",this.onContextChange,this)}return Yt.prototype.onContextChange=function(){},Yt.prototype.destroy=function(){this.renderer.off("context",this.onContextChange,this),this.renderer=null},Yt}();Xt.default=Ht},{}],94:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Yt){function Wt(){return function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),function(jt,zt){if(!jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return zt&&("object"==typeof zt||"function"==typeof zt)?zt:jt}(this,Yt.apply(this,arguments))}return function(jt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);jt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,zt):jt.__proto__=zt)}(Wt,Yt),Wt.prototype.start=function(){},Wt.prototype.stop=function(){this.flush()},Wt.prototype.flush=function(){},Wt.prototype.render=function(){},Wt}(function(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}(Bt("../managers/WebGLManager")).default);Xt.default=Ht},{"../managers/WebGLManager":93}],95:[function(Bt,Gt,Xt){function Ht(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0;var Yt=Ht(Bt("pixi-gl-core")),Wt=Ht(Bt("../../../utils/createIndicesForQuads")),jt=function(){function zt(Vt,qt){!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,zt),this.gl=Vt,this.vertices=new Float32Array([-1,-1,1,-1,1,1,-1,1]),this.uvs=new Float32Array([0,0,1,0,1,1,0,1]),this.interleaved=new Float32Array(16);for(var Kt=0;4>Kt;Kt++)this.interleaved[4*Kt]=this.vertices[2*Kt],this.interleaved[4*Kt+1]=this.vertices[2*Kt+1],this.interleaved[4*Kt+2]=this.uvs[2*Kt],this.interleaved[4*Kt+3]=this.uvs[2*Kt+1];this.indices=(0,Wt.default)(1),this.vertexBuffer=Yt.default.GLBuffer.createVertexBuffer(Vt,this.interleaved,Vt.STATIC_DRAW),this.indexBuffer=Yt.default.GLBuffer.createIndexBuffer(Vt,this.indices,Vt.STATIC_DRAW),this.vao=new Yt.default.VertexArrayObject(Vt,qt)}return zt.prototype.initVao=function(Vt){this.vao.clear().addIndex(this.indexBuffer).addAttribute(this.vertexBuffer,Vt.attributes.aVertexPosition,this.gl.FLOAT,!1,16,0).addAttribute(this.vertexBuffer,Vt.attributes.aTextureCoord,this.gl.FLOAT,!1,16,8)},zt.prototype.map=function(Vt,qt){var Kt=0,Qt=0;return this.uvs[0]=Kt,this.uvs[1]=Qt,this.uvs[2]=Kt+qt.width/Vt.width,this.uvs[3]=Qt,this.uvs[4]=Kt+qt.width/Vt.width,this.uvs[5]=Qt+qt.height/Vt.height,this.uvs[6]=Kt,this.uvs[7]=Qt+qt.height/Vt.height,Kt=qt.x,Qt=qt.y,this.vertices[0]=Kt,this.vertices[1]=Qt,this.vertices[2]=Kt+qt.width,this.vertices[3]=Qt,this.vertices[4]=Kt+qt.width,this.vertices[5]=Qt+qt.height,this.vertices[6]=Kt,this.vertices[7]=Qt+qt.height,this},zt.prototype.upload=function(){for(var Vt=0;4>Vt;Vt++)this.interleaved[4*Vt]=this.vertices[2*Vt],this.interleaved[4*Vt+1]=this.vertices[2*Vt+1],this.interleaved[4*Vt+2]=this.uvs[2*Vt],this.interleaved[4*Vt+3]=this.uvs[2*Vt+1];return this.vertexBuffer.upload(this.interleaved),this},zt.prototype.destroy=function(){var Vt=this.gl;Vt.deleteBuffer(this.vertexBuffer),Vt.deleteBuffer(this.indexBuffer)},zt}();Xt.default=jt},{"../../../utils/createIndicesForQuads":122,"pixi-gl-core":12}],96:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=Bt("../../../math"),Yt=Bt("../../../const"),Wt=function(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}(Bt("../../../settings")),jt=Bt("pixi-gl-core"),zt=function(){function Vt(qt,Kt,Qt,Zt,Jt,$t){!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Vt),this.gl=qt,this.frameBuffer=null,this.texture=null,this.clearColor=[0,0,0,0],this.size=new Ht.Rectangle(0,0,1,1),this.resolution=Jt||Wt.default.RESOLUTION,this.projectionMatrix=new Ht.Matrix,this.transform=null,this.frame=null,this.defaultFrame=new Ht.Rectangle,this.destinationFrame=null,this.sourceFrame=null,this.stencilBuffer=null,this.stencilMaskStack=[],this.filterData=null,this.scaleMode=void 0===Zt?Wt.default.SCALE_MODE:Zt,this.root=$t,this.root?(this.frameBuffer=new jt.GLFramebuffer(qt,100,100),this.frameBuffer.framebuffer=null):(this.frameBuffer=jt.GLFramebuffer.createRGBA(qt,100,100),this.scaleMode===Yt.SCALE_MODES.NEAREST?this.frameBuffer.texture.enableNearestScaling():this.frameBuffer.texture.enableLinearScaling(),this.texture=this.frameBuffer.texture),this.setFrame(),this.resize(Kt,Qt)}return Vt.prototype.clear=function(qt){var Kt=qt||this.clearColor;this.frameBuffer.clear(Kt[0],Kt[1],Kt[2],Kt[3])},Vt.prototype.attachStencilBuffer=function(){this.root||this.frameBuffer.enableStencil()},Vt.prototype.setFrame=function(qt,Kt){this.destinationFrame=qt||this.destinationFrame||this.defaultFrame,this.sourceFrame=Kt||this.sourceFrame||this.destinationFrame},Vt.prototype.activate=function(){var qt=this.gl;this.frameBuffer.bind(),this.calculateProjection(this.destinationFrame,this.sourceFrame),this.transform&&this.projectionMatrix.append(this.transform),this.destinationFrame===this.sourceFrame?qt.disable(qt.SCISSOR_TEST):(qt.enable(qt.SCISSOR_TEST),qt.scissor(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)),qt.viewport(0|this.destinationFrame.x,0|this.destinationFrame.y,0|this.destinationFrame.width*this.resolution,0|this.destinationFrame.height*this.resolution)},Vt.prototype.calculateProjection=function(qt,Kt){var Qt=this.projectionMatrix;Kt=Kt||qt,Qt.identity(),this.root?(Qt.a=2*(1/qt.width),Qt.d=2*(-1/qt.height),Qt.tx=-1-Kt.x*Qt.a,Qt.ty=1-Kt.y*Qt.d):(Qt.a=2*(1/qt.width),Qt.d=2*(1/qt.height),Qt.tx=-1-Kt.x*Qt.a,Qt.ty=-1-Kt.y*Qt.d)},Vt.prototype.resize=function(qt,Kt){if(qt|=0,Kt|=0,this.size.width!==qt||this.size.height!==Kt){this.size.width=qt,this.size.height=Kt,this.defaultFrame.width=qt,this.defaultFrame.height=Kt,this.frameBuffer.resize(qt*this.resolution,Kt*this.resolution);var Qt=this.frame||this.size;this.calculateProjection(Qt)}},Vt.prototype.destroy=function(){this.frameBuffer.destroy(),this.frameBuffer=null,this.texture=null},Vt}();Xt.default=zt},{"../../../const":46,"../../../math":70,"../../../settings":101,"pixi-gl-core":12}],97:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt,jt){var zt=!jt;if(0===Wt)throw new Error("Invalid value of `0` passed to `checkMaxIfStatementsInShader`");if(zt){var Vt=document.createElement("canvas");Vt.width=1,Vt.height=1,jt=Ht.default.createContext(Vt)}for(var qt=jt.createShader(jt.FRAGMENT_SHADER),Kt;;){if(Kt=Yt.replace(/%forloop%/gi,function(Qt){for(var Zt="",Jt=0;Jt<Qt;++Jt)0<Jt&&(Zt+="\nelse "),Jt<Qt-1&&(Zt+="if(test == "+Jt+".0){}");return Zt}(Wt)),jt.shaderSource(qt,Kt),jt.compileShader(qt),jt.getShaderParameter(qt,jt.COMPILE_STATUS))break;Wt=0|Wt/2}return zt&&jt.getExtension("WEBGL_lose_context")&&jt.getExtension("WEBGL_lose_context").loseContext(),Wt};var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("pixi-gl-core")),Yt=["precision mediump float;","void main(void){","float test = 0.1;","%forloop%","gl_FragColor = vec4(0.0);","}"].join("\n")},{"pixi-gl-core":12}],98:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Yt){var Wt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:[];return Wt[Ht.BLEND_MODES.NORMAL]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.ADD]=[Yt.ONE,Yt.DST_ALPHA],Wt[Ht.BLEND_MODES.MULTIPLY]=[Yt.DST_COLOR,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.SCREEN]=[Yt.ONE,Yt.ONE_MINUS_SRC_COLOR],Wt[Ht.BLEND_MODES.OVERLAY]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.DARKEN]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.LIGHTEN]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.COLOR_DODGE]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.COLOR_BURN]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.HARD_LIGHT]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.SOFT_LIGHT]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.DIFFERENCE]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.EXCLUSION]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.HUE]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.SATURATION]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.COLOR]=[Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.LUMINOSITY]=[Yt.ZERO,Yt.SRC_ALPHA],Wt[Ht.BLEND_MODES.NORMAL_NPM]=[Yt.SRC_ALPHA,Yt.ONE_MINUS_SRC_ALPHA,Yt.ONE,Yt.ONE_MINUS_SRC_ALPHA],Wt[Ht.BLEND_MODES.ADD_NPM]=[Yt.SRC_ALPHA,Yt.DST_ALPHA,Yt.ONE,Yt.DST_ALPHA],Wt[Ht.BLEND_MODES.SCREEN_NPM]=[Yt.SRC_ALPHA,Yt.ONE_MINUS_SRC_COLOR,Yt.ONE,Yt.ONE_MINUS_SRC_COLOR],Wt};var Ht=Bt("../../../const")},{"../../../const":46}],99:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Yt){var Wt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};return Wt[Ht.DRAW_MODES.POINTS]=Yt.POINTS,Wt[Ht.DRAW_MODES.LINES]=Yt.LINES,Wt[Ht.DRAW_MODES.LINE_LOOP]=Yt.LINE_LOOP,Wt[Ht.DRAW_MODES.LINE_STRIP]=Yt.LINE_STRIP,Wt[Ht.DRAW_MODES.TRIANGLES]=Yt.TRIANGLES,Wt[Ht.DRAW_MODES.TRIANGLE_STRIP]=Yt.TRIANGLE_STRIP,Wt[Ht.DRAW_MODES.TRIANGLE_FAN]=Yt.TRIANGLE_FAN,Wt};var Ht=Bt("../../../const")},{"../../../const":46}],100:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Ht){Ht.getContextAttributes().stencil||console.warn("Provided WebGL context does not have a stencil buffer, masks may not render correctly")}},{}],101:[function(Bt,Gt,Xt){function Ht(jt){return jt&&jt.__esModule?jt:{default:jt}}Xt.__esModule=!0;var Yt=Ht(Bt("./utils/maxRecommendedTextures")),Wt=Ht(Bt("./utils/canUploadSameBuffer"));Xt.default={TARGET_FPMS:.06,MIPMAP_TEXTURES:!0,RESOLUTION:1,FILTER_RESOLUTION:1,SPRITE_MAX_TEXTURES:(0,Yt.default)(32),SPRITE_BATCH_SIZE:4096,RETINA_PREFIX:/@([0-9\.]+)x/,RENDER_OPTIONS:{view:null,antialias:!1,forceFXAA:!1,autoResize:!1,transparent:!1,backgroundColor:0,clearBeforeRender:!0,preserveDrawingBuffer:!1,roundPixels:!1,width:800,height:600,legacy:!1},TRANSFORM_MODE:0,GC_MODE:0,GC_MAX_IDLE:3600,GC_MAX_CHECK_COUNT:600,WRAP_MODE:0,SCALE_MODE:0,PRECISION_VERTEX:"highp",PRECISION_FRAGMENT:"mediump",CAN_UPLOAD_SAME_BUFFER:(0,Wt.default)()}},{"./utils/canUploadSameBuffer":121,"./utils/maxRecommendedTextures":126}],102:[function(Bt,Gt,Xt){function Ht(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Xt.__esModule=!0;var Yt=function(){function Zt(Jt,$t){for(var en=0,tn;en<$t.length;en++)tn=$t[en],tn.enumerable=tn.enumerable||!1,tn.configurable=!0,"value"in tn&&(tn.writable=!0),Object.defineProperty(Jt,tn.key,tn)}return function(Jt,$t,en){return $t&&Zt(Jt.prototype,$t),en&&Zt(Jt,en),Jt}}(),Wt=Bt("../math"),jt=Bt("../utils"),zt=Bt("../const"),Vt=Ht(Bt("../textures/Texture")),qt=Ht(Bt("../display/Container")),Kt=new Wt.Point,Qt=function(Zt){function Jt($t){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Jt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,Zt.call(this));return en._anchor=new Wt.ObservablePoint(en._onAnchorUpdate,en),en._texture=null,en._width=0,en._height=0,en._tint=null,en._tintRGB=null,en.tint=16777215,en.blendMode=zt.BLEND_MODES.NORMAL,en.shader=null,en.cachedTint=16777215,en.texture=$t||Vt.default.EMPTY,en.vertexData=new Float32Array(8),en.vertexTrimmedData=null,en._transformID=-1,en._textureID=-1,en._transformTrimmedID=-1,en._textureTrimmedID=-1,en.pluginName="sprite",en}return function($t,en){if("function"!=typeof en&&null!==en)throw new TypeError("Super expression must either be null or a function, not "+typeof en);$t.prototype=Object.create(en&&en.prototype,{constructor:{value:$t,enumerable:!1,writable:!0,configurable:!0}}),en&&(Object.setPrototypeOf?Object.setPrototypeOf($t,en):$t.__proto__=en)}(Jt,Zt),Jt.prototype._onTextureUpdate=function(){this._textureID=-1,this._textureTrimmedID=-1,this.cachedTint=16777215,this._width&&(this.scale.x=(0,jt.sign)(this.scale.x)*this._width/this._texture.orig.width),this._height&&(this.scale.y=(0,jt.sign)(this.scale.y)*this._height/this._texture.orig.height)},Jt.prototype._onAnchorUpdate=function(){this._transformID=-1,this._transformTrimmedID=-1},Jt.prototype.calculateVertices=function(){if(this._transformID!==this.transform._worldID||this._textureID!==this._texture._updateID){this._transformID=this.transform._worldID,this._textureID=this._texture._updateID;var $t=this._texture,en=this.transform.worldTransform,tn=en.a,nn=en.b,rn=en.c,an=en.d,on=en.tx,sn=en.ty,dn=this.vertexData,ln=$t.trim,un=$t.orig,pn=this._anchor,cn=0,hn=0,fn=0,gn=0;ln?(cn=(hn=ln.x-pn._x*un.width)+ln.width,fn=(gn=ln.y-pn._y*un.height)+ln.height):(cn=(hn=-pn._x*un.width)+un.width,fn=(gn=-pn._y*un.height)+un.height),dn[0]=tn*hn+rn*gn+on,dn[1]=an*gn+nn*hn+sn,dn[2]=tn*cn+rn*gn+on,dn[3]=an*gn+nn*cn+sn,dn[4]=tn*cn+rn*fn+on,dn[5]=an*fn+nn*cn+sn,dn[6]=tn*hn+rn*fn+on,dn[7]=an*fn+nn*hn+sn}},Jt.prototype.calculateTrimmedVertices=function(){if(!this.vertexTrimmedData)this.vertexTrimmedData=new Float32Array(8);else if(this._transformTrimmedID===this.transform._worldID&&this._textureTrimmedID===this._texture._updateID)return;this._transformTrimmedID=this.transform._worldID,this._textureTrimmedID=this._texture._updateID;var $t=this._texture,en=this.vertexTrimmedData,tn=$t.orig,nn=this._anchor,rn=this.transform.worldTransform,an=rn.a,on=rn.b,sn=rn.c,dn=rn.d,ln=rn.tx,un=rn.ty,pn=-nn._x*tn.width,cn=pn+tn.width,hn=-nn._y*tn.height,fn=hn+tn.height;en[0]=an*pn+sn*hn+ln,en[1]=dn*hn+on*pn+un,en[2]=an*cn+sn*hn+ln,en[3]=dn*hn+on*cn+un,en[4]=an*cn+sn*fn+ln,en[5]=dn*fn+on*cn+un,en[6]=an*pn+sn*fn+ln,en[7]=dn*fn+on*pn+un},Jt.prototype._renderWebGL=function($t){this.calculateVertices(),$t.setObjectRenderer($t.plugins[this.pluginName]),$t.plugins[this.pluginName].render(this)},Jt.prototype._renderCanvas=function($t){$t.plugins[this.pluginName].render(this)},Jt.prototype._calculateBounds=function(){var $t=this._texture.trim,en=this._texture.orig;$t&&($t.width!==en.width||$t.height!==en.height)?(this.calculateTrimmedVertices(),this._bounds.addQuad(this.vertexTrimmedData)):(this.calculateVertices(),this._bounds.addQuad(this.vertexData))},Jt.prototype.getLocalBounds=function($t){return 0===this.children.length?(this._bounds.minX=this._texture.orig.width*-this._anchor._x,this._bounds.minY=this._texture.orig.height*-this._anchor._y,this._bounds.maxX=this._texture.orig.width*(1-this._anchor._x),this._bounds.maxY=this._texture.orig.height*(1-this._anchor._y),$t||(this._localBoundsRect||(this._localBoundsRect=new Wt.Rectangle),$t=this._localBoundsRect),this._bounds.getRectangle($t)):Zt.prototype.getLocalBounds.call(this,$t)},Jt.prototype.containsPoint=function($t){this.worldTransform.applyInverse($t,Kt);var en=this._texture.orig.width,tn=this._texture.orig.height,nn=-en*this.anchor.x,rn=0;return Kt.x>=nn&&Kt.x<nn+en&&(rn=-tn*this.anchor.y,Kt.y>=rn&&Kt.y<rn+tn)},Jt.prototype.destroy=function($t){if(Zt.prototype.destroy.call(this,$t),this._anchor=null,"boolean"==typeof $t?$t:$t&&$t.texture){var en="boolean"==typeof $t?$t:$t&&$t.baseTexture;this._texture.destroy(!!en)}this._texture=null,this.shader=null},Jt.from=function($t){return new Jt(Vt.default.from($t))},Jt.fromFrame=function($t){var en=jt.TextureCache[$t];if(!en)throw new Error("The frameId \""+$t+"\" does not exist in the texture cache");return new Jt(en)},Jt.fromImage=function($t,en,tn){return new Jt(Vt.default.fromImage($t,en,tn))},Yt(Jt,[{key:"width",get:function(){return Math.abs(this.scale.x)*this._texture.orig.width},set:function($t){var en=(0,jt.sign)(this.scale.x)||1;this.scale.x=en*$t/this._texture.orig.width,this._width=$t}},{key:"height",get:function(){return Math.abs(this.scale.y)*this._texture.orig.height},set:function($t){var en=(0,jt.sign)(this.scale.y)||1;this.scale.y=en*$t/this._texture.orig.height,this._height=$t}},{key:"anchor",get:function(){return this._anchor},set:function($t){this._anchor.copy($t)}},{key:"tint",get:function(){return this._tint},set:function($t){this._tint=$t,this._tintRGB=($t>>16)+(65280&$t)+((255&$t)<<16)}},{key:"texture",get:function(){return this._texture},set:function($t){this._texture!==$t&&(this._texture=$t,this.cachedTint=16777215,this._textureID=-1,this._textureTrimmedID=-1,$t&&($t.baseTexture.hasLoaded?this._onTextureUpdate():$t.once("update",this._onTextureUpdate,this)))}}]),Jt}(qt.default);Xt.default=Qt},{"../const":46,"../display/Container":48,"../math":70,"../textures/Texture":115,"../utils":124}],103:[function(Bt,Gt,Xt){function Ht(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Yt=Ht(Bt("../../renderers/canvas/CanvasRenderer")),Wt=Bt("../../const"),jt=Bt("../../math"),zt=Ht(Bt("./CanvasTinter")),Vt=new jt.Matrix,qt=function(){function Kt(Qt){!function(Zt,Jt){if(!(Zt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Kt),this.renderer=Qt}return Kt.prototype.render=function(Qt){var Zt=Qt._texture,Jt=this.renderer,$t=Zt._frame.width,en=Zt._frame.height,tn=Qt.transform.worldTransform,nn=0,rn=0;if(!(0>=Zt.orig.width||0>=Zt.orig.height)&&Zt.baseTexture.source&&(Jt.setBlendMode(Qt.blendMode),Zt.valid)){Jt.context.globalAlpha=Qt.worldAlpha;var an=Zt.baseTexture.scaleMode===Wt.SCALE_MODES.LINEAR;Jt.smoothProperty&&Jt.context[Jt.smoothProperty]!==an&&(Jt.context[Jt.smoothProperty]=an),Zt.trim?(nn=Zt.trim.width/2+Zt.trim.x-Qt.anchor.x*Zt.orig.width,rn=Zt.trim.height/2+Zt.trim.y-Qt.anchor.y*Zt.orig.height):(nn=(.5-Qt.anchor.x)*Zt.orig.width,rn=(.5-Qt.anchor.y)*Zt.orig.height),Zt.rotate&&(tn.copy(Vt),tn=Vt,jt.GroupD8.matrixAppendRotationInv(tn,Zt.rotate,nn,rn),nn=0,rn=0),nn-=$t/2,rn-=en/2,Jt.roundPixels?(Jt.context.setTransform(tn.a,tn.b,tn.c,tn.d,0|tn.tx*Jt.resolution,0|tn.ty*Jt.resolution),nn|=0,rn|=0):Jt.context.setTransform(tn.a,tn.b,tn.c,tn.d,tn.tx*Jt.resolution,tn.ty*Jt.resolution);var on=Zt.baseTexture.resolution;16777215===Qt.tint?Jt.context.drawImage(Zt.baseTexture.source,Zt._frame.x*on,Zt._frame.y*on,$t*on,en*on,nn*Jt.resolution,rn*Jt.resolution,$t*Jt.resolution,en*Jt.resolution):(Qt.cachedTint===Qt.tint&&Qt.tintedTexture.tintId===Qt._texture._updateID||(Qt.cachedTint=Qt.tint,Qt.tintedTexture=zt.default.getTintedTexture(Qt,Qt.tint)),Jt.context.drawImage(Qt.tintedTexture,0,0,$t*on,en*on,nn*Jt.resolution,rn*Jt.resolution,$t*Jt.resolution,en*Jt.resolution))}},Kt.prototype.destroy=function(){this.renderer=null},Kt}();Xt.default=qt,Yt.default.registerPlugin("sprite",qt)},{"../../const":46,"../../math":70,"../../renderers/canvas/CanvasRenderer":77,"./CanvasTinter":104}],104:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=Bt("../../utils"),Yt={getTintedTexture:function(Wt,jt){var zt=Wt._texture,Vt="#"+("00000"+(0|(jt=Yt.roundColor(jt))).toString(16)).substr(-6);zt.tintCache=zt.tintCache||{};var qt=zt.tintCache[Vt],Kt;if(qt){if(qt.tintId===zt._updateID)return zt.tintCache[Vt];Kt=zt.tintCache[Vt]}else Kt=Yt.canvas||document.createElement("canvas");if(Yt.tintMethod(zt,jt,Kt),Kt.tintId=zt._updateID,Yt.convertTintToImage){var Qt=new Image;Qt.src=Kt.toDataURL(),zt.tintCache[Vt]=Qt}else zt.tintCache[Vt]=Kt,Yt.canvas=null;return Kt},tintWithMultiply:function(Wt,jt,zt){var Vt=zt.getContext("2d"),qt=Wt._frame.clone(),Kt=Wt.baseTexture.resolution;qt.x*=Kt,qt.y*=Kt,qt.width*=Kt,qt.height*=Kt,zt.width=Math.ceil(qt.width),zt.height=Math.ceil(qt.height),Vt.save(),Vt.fillStyle="#"+("00000"+(0|jt).toString(16)).substr(-6),Vt.fillRect(0,0,qt.width,qt.height),Vt.globalCompositeOperation="multiply",Vt.drawImage(Wt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.globalCompositeOperation="destination-atop",Vt.drawImage(Wt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.restore()},tintWithOverlay:function(Wt,jt,zt){var Vt=zt.getContext("2d"),qt=Wt._frame.clone(),Kt=Wt.baseTexture.resolution;qt.x*=Kt,qt.y*=Kt,qt.width*=Kt,qt.height*=Kt,zt.width=Math.ceil(qt.width),zt.height=Math.ceil(qt.height),Vt.save(),Vt.globalCompositeOperation="copy",Vt.fillStyle="#"+("00000"+(0|jt).toString(16)).substr(-6),Vt.fillRect(0,0,qt.width,qt.height),Vt.globalCompositeOperation="destination-atop",Vt.drawImage(Wt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.restore()},tintWithPerPixel:function(Wt,jt,zt){var Vt=zt.getContext("2d"),qt=Wt._frame.clone(),Kt=Wt.baseTexture.resolution;qt.x*=Kt,qt.y*=Kt,qt.width*=Kt,qt.height*=Kt,zt.width=Math.ceil(qt.width),zt.height=Math.ceil(qt.height),Vt.save(),Vt.globalCompositeOperation="copy",Vt.drawImage(Wt.baseTexture.source,qt.x,qt.y,qt.width,qt.height,0,0,qt.width,qt.height),Vt.restore();for(var Qt=(0,Ht.hex2rgb)(jt),Zt=Qt[0],Jt=Qt[1],$t=Qt[2],en=Vt.getImageData(0,0,qt.width,qt.height),tn=en.data,nn=0;nn<tn.length;nn+=4)tn[nn+0]*=Zt,tn[nn+1]*=Jt,tn[nn+2]*=$t;Vt.putImageData(en,0,0)},roundColor:function(Wt){var jt=Yt.cacheStepsPerColorChannel,zt=(0,Ht.hex2rgb)(Wt);return zt[0]=Math.min(255,zt[0]/jt*jt),zt[1]=Math.min(255,zt[1]/jt*jt),zt[2]=Math.min(255,zt[2]/jt*jt),(0,Ht.rgb2hex)(zt)},cacheStepsPerColorChannel:8,convertTintToImage:!1,canUseMultiply:(0,function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../../renderers/canvas/utils/canUseNewCanvasBlendModes")).default)(),tintMethod:0};Yt.tintMethod=Yt.canUseMultiply?Yt.tintWithMultiply:Yt.tintWithPerPixel,Xt.default=Yt},{"../../renderers/canvas/utils/canUseNewCanvasBlendModes":80,"../../utils":124}],105:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Yt(Wt){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Yt),this.vertices=new ArrayBuffer(Wt),this.float32View=new Float32Array(this.vertices),this.uint32View=new Uint32Array(this.vertices)}return Yt.prototype.destroy=function(){this.vertices=null,this.positions=null,this.uvs=null,this.colors=null},Yt}();Xt.default=Ht},{}],106:[function(Bt,Gt,Xt){function Ht(nn){return nn&&nn.__esModule?nn:{default:nn}}Xt.__esModule=!0;var Yt=Ht(Bt("../../renderers/webgl/utils/ObjectRenderer")),Wt=Ht(Bt("../../renderers/webgl/WebGLRenderer")),jt=Ht(Bt("../../utils/createIndicesForQuads")),zt=Ht(Bt("./generateMultiTextureShader")),Vt=Ht(Bt("../../renderers/webgl/utils/checkMaxIfStatmentsInShader")),qt=Ht(Bt("./BatchBuffer")),Kt=Ht(Bt("../../settings")),Qt=Bt("../../utils"),Zt=Ht(Bt("pixi-gl-core")),Jt=Ht(Bt("bit-twiddle")),$t=0,en=0,tn=function(nn){function rn(an){!function(ln,un){if(!(ln instanceof un))throw new TypeError("Cannot call a class as a function")}(this,rn);var on=function(ln,un){if(!ln)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return un&&("object"==typeof un||"function"==typeof un)?un:ln}(this,nn.call(this,an));on.vertSize=5,on.vertByteSize=4*on.vertSize,on.size=Kt.default.SPRITE_BATCH_SIZE,on.buffers=[];for(var sn=1;sn<=Jt.default.nextPow2(on.size);sn*=2)on.buffers.push(new qt.default(4*sn*on.vertByteSize));on.indices=(0,jt.default)(on.size),on.shader=null,on.currentIndex=0,on.groups=[];for(var dn=0;dn<on.size;dn++)on.groups[dn]={textures:[],textureCount:0,ids:[],size:0,start:0,blend:0};return on.sprites=[],on.vertexBuffers=[],on.vaos=[],on.vaoMax=2,on.vertexCount=0,on.renderer.on("prerender",on.onPrerender,on),on}return function(an,on){if("function"!=typeof on&&null!==on)throw new TypeError("Super expression must either be null or a function, not "+typeof on);an.prototype=Object.create(on&&on.prototype,{constructor:{value:an,enumerable:!1,writable:!0,configurable:!0}}),on&&(Object.setPrototypeOf?Object.setPrototypeOf(an,on):an.__proto__=on)}(rn,nn),rn.prototype.onContextChange=function(){var an=this.renderer.gl;this.renderer.legacy?this.MAX_TEXTURES=1:(this.MAX_TEXTURES=Math.min(an.getParameter(an.MAX_TEXTURE_IMAGE_UNITS),Kt.default.SPRITE_MAX_TEXTURES),this.MAX_TEXTURES=(0,Vt.default)(this.MAX_TEXTURES,an)),this.shader=(0,zt.default)(an,this.MAX_TEXTURES),this.indexBuffer=Zt.default.GLBuffer.createIndexBuffer(an,this.indices,an.STATIC_DRAW),this.renderer.bindVao(null);for(var on=this.shader.attributes,sn=0;sn<this.vaoMax;sn++){var dn=this.vertexBuffers[sn]=Zt.default.GLBuffer.createVertexBuffer(an,null,an.STREAM_DRAW),ln=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(dn,on.aVertexPosition,an.FLOAT,!1,this.vertByteSize,0).addAttribute(dn,on.aTextureCoord,an.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(dn,on.aColor,an.UNSIGNED_BYTE,!0,this.vertByteSize,12);on.aTextureId&&ln.addAttribute(dn,on.aTextureId,an.FLOAT,!1,this.vertByteSize,16),this.vaos[sn]=ln}this.vao=this.vaos[0],this.currentBlendMode=99999,this.boundTextures=Array(this.MAX_TEXTURES)},rn.prototype.onPrerender=function(){this.vertexCount=0},rn.prototype.render=function(an){this.currentIndex>=this.size&&this.flush(),an._texture._uvs&&(this.sprites[this.currentIndex++]=an)},rn.prototype.flush=function(){if(0!==this.currentIndex){var an=this.renderer.gl,on=this.MAX_TEXTURES,sn=Jt.default.nextPow2(this.currentIndex),dn=Jt.default.log2(sn),ln=this.buffers[dn],un=this.sprites,pn=this.groups,cn=ln.float32View,hn=ln.uint32View,fn=this.boundTextures,gn=this.renderer.boundTextures,mn=this.renderer.textureGC.count,yn=0,_n,bn,xn=1,vn=0,Tn=pn[0],Sn,En,wn=Qt.premultiplyBlendMode[un[0]._texture.baseTexture.premultipliedAlpha?1:0][un[0].blendMode];Tn.textureCount=0,Tn.start=0,Tn.blend=wn,$t++;var An;for(An=0;An<on;++An)fn[An]=gn[An],fn[An]._virtalBoundId=An;for(An=0;An<this.currentIndex;++An){var Cn=un[An];_n=Cn._texture.baseTexture;var Pn=Qt.premultiplyBlendMode[+_n.premultipliedAlpha][Cn.blendMode];if(wn!==Pn&&(wn=Pn,bn=null,vn=on,$t++),bn!==_n&&(bn=_n,_n._enabled!==$t)){if(vn===on&&($t++,Tn.size=An-Tn.start,vn=0,(Tn=pn[xn++]).blend=wn,Tn.textureCount=0,Tn.start=An),_n.touched=mn,-1===_n._virtalBoundId)for(var Mn=0;Mn<on;++Mn){var Rn=(Mn+en)%on,Dn=fn[Rn];if(Dn._enabled!==$t){en++,Dn._virtalBoundId=-1,_n._virtalBoundId=Rn,fn[Rn]=_n;break}}_n._enabled=$t,Tn.textureCount++,Tn.ids[vn]=_n._virtalBoundId,Tn.textures[vn++]=_n}if(Sn=Cn.vertexData,En=Cn._texture._uvs.uvsUint32,this.renderer.roundPixels){var In=this.renderer.resolution;cn[yn]=(0|Sn[0]*In)/In,cn[yn+1]=(0|Sn[1]*In)/In,cn[yn+5]=(0|Sn[2]*In)/In,cn[yn+6]=(0|Sn[3]*In)/In,cn[yn+10]=(0|Sn[4]*In)/In,cn[yn+11]=(0|Sn[5]*In)/In,cn[yn+15]=(0|Sn[6]*In)/In,cn[yn+16]=(0|Sn[7]*In)/In}else cn[yn]=Sn[0],cn[yn+1]=Sn[1],cn[yn+5]=Sn[2],cn[yn+6]=Sn[3],cn[yn+10]=Sn[4],cn[yn+11]=Sn[5],cn[yn+15]=Sn[6],cn[yn+16]=Sn[7];hn[yn+2]=En[0],hn[yn+7]=En[1],hn[yn+12]=En[2],hn[yn+17]=En[3];var On=Math.min(Cn.worldAlpha,1),Ln=1>On&&_n.premultipliedAlpha?(0,Qt.premultiplyTint)(Cn._tintRGB,On):Cn._tintRGB+(255*On<<24);hn[yn+3]=hn[yn+8]=hn[yn+13]=hn[yn+18]=Ln,cn[yn+4]=cn[yn+9]=cn[yn+14]=cn[yn+19]=_n._virtalBoundId,yn+=20}if(Tn.size=An-Tn.start,Kt.default.CAN_UPLOAD_SAME_BUFFER)this.vertexBuffers[this.vertexCount].upload(ln.vertices,0,!0);else{if(this.vaoMax<=this.vertexCount){this.vaoMax++;var kn=this.shader.attributes,Nn=this.vertexBuffers[this.vertexCount]=Zt.default.GLBuffer.createVertexBuffer(an,null,an.STREAM_DRAW),Fn=this.renderer.createVao().addIndex(this.indexBuffer).addAttribute(Nn,kn.aVertexPosition,an.FLOAT,!1,this.vertByteSize,0).addAttribute(Nn,kn.aTextureCoord,an.UNSIGNED_SHORT,!0,this.vertByteSize,8).addAttribute(Nn,kn.aColor,an.UNSIGNED_BYTE,!0,this.vertByteSize,12);kn.aTextureId&&Fn.addAttribute(Nn,kn.aTextureId,an.FLOAT,!1,this.vertByteSize,16),this.vaos[this.vertexCount]=Fn}this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].upload(ln.vertices,0,!1),this.vertexCount++}for(An=0;An<on;++An)gn[An]._virtalBoundId=-1;for(An=0;An<xn;++An){for(var Bn=pn[An],Un=Bn.textureCount,Gn=0;Gn<Un;Gn++)bn=Bn.textures[Gn],gn[Bn.ids[Gn]]!==bn&&this.renderer.bindTexture(bn,Bn.ids[Gn],!0),bn._virtalBoundId=-1;this.renderer.state.setBlendMode(Bn.blend),an.drawElements(an.TRIANGLES,6*Bn.size,an.UNSIGNED_SHORT,2*(6*Bn.start))}this.currentIndex=0}},rn.prototype.start=function(){this.renderer.bindShader(this.shader),Kt.default.CAN_UPLOAD_SAME_BUFFER&&(this.renderer.bindVao(this.vaos[this.vertexCount]),this.vertexBuffers[this.vertexCount].bind())},rn.prototype.stop=function(){this.flush()},rn.prototype.destroy=function(){for(var an=0;an<this.vaoMax;an++)this.vertexBuffers[an]&&this.vertexBuffers[an].destroy(),this.vaos[an]&&this.vaos[an].destroy();this.indexBuffer&&this.indexBuffer.destroy(),this.renderer.off("prerender",this.onPrerender,this),nn.prototype.destroy.call(this),this.shader&&(this.shader.destroy(),this.shader=null),this.vertexBuffers=null,this.vaos=null,this.indexBuffer=null,this.indices=null,this.sprites=null;for(var on=0;on<this.buffers.length;++on)this.buffers[on].destroy()},rn}(Yt.default);Xt.default=tn,Wt.default.registerPlugin("sprite",tn)},{"../../renderers/webgl/WebGLRenderer":84,"../../renderers/webgl/utils/ObjectRenderer":94,"../../renderers/webgl/utils/checkMaxIfStatmentsInShader":97,"../../settings":101,"../../utils":124,"../../utils/createIndicesForQuads":122,"./BatchBuffer":105,"./generateMultiTextureShader":107,"bit-twiddle":1,"pixi-gl-core":12}],107:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt,jt){var zt=Yt;zt=(zt=zt.replace(/%count%/gi,jt)).replace(/%forloop%/gi,function(Qt){var Zt="";Zt+="\n",Zt+="\n";for(var Jt=0;Jt<Qt;Jt++)0<Jt&&(Zt+="\nelse "),Jt<Qt-1&&(Zt+="if(textureId == "+Jt+".0)"),Zt+="\n{",Zt+="\n\tcolor = texture2D(uSamplers["+Jt+"], vTextureCoord, -1.0);",Zt+="\n}";return Zt+="\n",Zt+="\n"}(jt));for(var Vt=new Ht.default(Wt,"precision highp float;\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\nattribute vec4 aColor;\nattribute float aTextureId;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\nvarying float vTextureId;\n\nvoid main(void){\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = aTextureCoord;\n    vTextureId = aTextureId;\n    vColor = aColor;\n}\n",zt),qt=[],Kt=0;Kt<jt;Kt++)qt[Kt]=Kt;return Vt.bind(),Vt.uniforms.uSamplers=qt,Vt};var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../../Shader")),Yt=(Bt("path"),["varying vec2 vTextureCoord;","varying vec4 vColor;","varying float vTextureId;","uniform sampler2D uSamplers[%count%];","void main(void){","vec4 color;","float textureId = floor(vTextureId+0.5);","%forloop%","gl_FragColor = color * vColor;","}"].join("\n"))},{"../../Shader":44,path:23}],108:[function(Bt,Gt,Xt){function Ht(tn){return tn&&tn.__esModule?tn:{default:tn}}Xt.__esModule=!0;var Yt=function(){function tn(nn,rn){for(var an=0,on;an<rn.length;an++)on=rn[an],on.enumerable=on.enumerable||!1,on.configurable=!0,"value"in on&&(on.writable=!0),Object.defineProperty(nn,on.key,on)}return function(nn,rn,an){return rn&&tn(nn.prototype,rn),an&&tn(nn,an),nn}}(),Wt=Ht(Bt("../sprites/Sprite")),jt=Ht(Bt("../textures/Texture")),zt=Bt("../math"),Vt=Bt("../utils"),qt=Bt("../const"),Kt=Ht(Bt("../settings")),Qt=Ht(Bt("./TextStyle")),Zt=Ht(Bt("./TextMetrics")),Jt=Ht(Bt("../utils/trimCanvas")),$t={texture:!0,children:!1,baseTexture:!0},en=function(tn){function nn(rn,an,on){!function(ln,un){if(!(ln instanceof un))throw new TypeError("Cannot call a class as a function")}(this,nn),(on=on||document.createElement("canvas")).width=3,on.height=3;var sn=jt.default.fromCanvas(on,Kt.default.SCALE_MODE,"text");sn.orig=new zt.Rectangle,sn.trim=new zt.Rectangle;var dn=function(ln,un){if(!ln)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return un&&("object"==typeof un||"function"==typeof un)?un:ln}(this,tn.call(this,sn));return jt.default.addToCache(dn._texture,dn._texture.baseTexture.textureCacheIds[0]),dn.canvas=on,dn.context=dn.canvas.getContext("2d"),dn.resolution=Kt.default.RESOLUTION,dn._text=null,dn._style=null,dn._styleListener=null,dn._font="",dn.text=rn,dn.style=an,dn.localStyleID=-1,dn}return function(rn,an){if("function"!=typeof an&&null!==an)throw new TypeError("Super expression must either be null or a function, not "+typeof an);rn.prototype=Object.create(an&&an.prototype,{constructor:{value:rn,enumerable:!1,writable:!0,configurable:!0}}),an&&(Object.setPrototypeOf?Object.setPrototypeOf(rn,an):rn.__proto__=an)}(nn,tn),nn.prototype.updateText=function(rn){var an=this._style;if(this.localStyleID!==an.styleID&&(this.dirty=!0,this.localStyleID=an.styleID),this.dirty||!rn){this._font=this._style.toFontString();var on=this.context,sn=Zt.default.measureText(this._text,this._style,this._style.wordWrap,this.canvas),dn=sn.width,ln=sn.height,un=sn.lines,pn=sn.lineHeight,cn=sn.lineWidths,hn=sn.maxLineWidth,fn=sn.fontProperties;this.canvas.width=Math.ceil((dn+2*an.padding)*this.resolution),this.canvas.height=Math.ceil((ln+2*an.padding)*this.resolution),on.scale(this.resolution,this.resolution),on.clearRect(0,0,this.canvas.width,this.canvas.height),on.font=this._font,on.strokeStyle=an.stroke,on.lineWidth=an.strokeThickness,on.textBaseline=an.textBaseline,on.lineJoin=an.lineJoin,on.miterLimit=an.miterLimit;var gn,mn;if(an.dropShadow){on.fillStyle=an.dropShadowColor,on.globalAlpha=an.dropShadowAlpha,on.shadowBlur=an.dropShadowBlur,0<an.dropShadowBlur&&(on.shadowColor=an.dropShadowColor);for(var yn=Math.cos(an.dropShadowAngle)*an.dropShadowDistance,_n=Math.sin(an.dropShadowAngle)*an.dropShadowDistance,bn=0;bn<un.length;bn++)gn=an.strokeThickness/2,mn=an.strokeThickness/2+bn*pn+fn.ascent,"right"===an.align?gn+=hn-cn[bn]:"center"===an.align&&(gn+=(hn-cn[bn])/2),an.fill&&(this.drawLetterSpacing(un[bn],gn+yn+an.padding,mn+_n+an.padding),an.stroke&&an.strokeThickness&&(on.strokeStyle=an.dropShadowColor,this.drawLetterSpacing(un[bn],gn+yn+an.padding,mn+_n+an.padding,!0),on.strokeStyle=an.stroke))}on.shadowBlur=0,on.globalAlpha=1,on.fillStyle=this._generateFillStyle(an,un);for(var xn=0;xn<un.length;xn++)gn=an.strokeThickness/2,mn=an.strokeThickness/2+xn*pn+fn.ascent,"right"===an.align?gn+=hn-cn[xn]:"center"===an.align&&(gn+=(hn-cn[xn])/2),an.stroke&&an.strokeThickness&&this.drawLetterSpacing(un[xn],gn+an.padding,mn+an.padding,!0),an.fill&&this.drawLetterSpacing(un[xn],gn+an.padding,mn+an.padding);this.updateTexture()}},nn.prototype.drawLetterSpacing=function(rn,an,on){var sn=3<arguments.length&&void 0!==arguments[3]&&arguments[3],dn=this._style.letterSpacing;if(0!==dn)for(var ln=String.prototype.split.call(rn,""),un=an,pn=0,cn="";pn<rn.length;)cn=ln[pn++],sn?this.context.strokeText(cn,un,on):this.context.fillText(cn,un,on),un+=this.context.measureText(cn).width+dn;else sn?this.context.strokeText(rn,an,on):this.context.fillText(rn,an,on)},nn.prototype.updateTexture=function(){var rn=this.canvas;if(this._style.trim){var an=(0,Jt.default)(rn);rn.width=an.width,rn.height=an.height,this.context.putImageData(an.data,0,0)}var on=this._texture,sn=this._style,dn=sn.trim?0:sn.padding,ln=on.baseTexture;ln.hasLoaded=!0,ln.resolution=this.resolution,ln.realWidth=rn.width,ln.realHeight=rn.height,ln.width=rn.width/this.resolution,ln.height=rn.height/this.resolution,on.trim.width=on._frame.width=rn.width/this.resolution,on.trim.height=on._frame.height=rn.height/this.resolution,on.trim.x=-dn,on.trim.y=-dn,on.orig.width=on._frame.width-2*dn,on.orig.height=on._frame.height-2*dn,this._onTextureUpdate(),ln.emit("update",ln),this.dirty=!1},nn.prototype.renderWebGL=function(rn){this.resolution!==rn.resolution&&(this.resolution=rn.resolution,this.dirty=!0),this.updateText(!0),tn.prototype.renderWebGL.call(this,rn)},nn.prototype._renderCanvas=function(rn){this.resolution!==rn.resolution&&(this.resolution=rn.resolution,this.dirty=!0),this.updateText(!0),tn.prototype._renderCanvas.call(this,rn)},nn.prototype.getLocalBounds=function(rn){return this.updateText(!0),tn.prototype.getLocalBounds.call(this,rn)},nn.prototype._calculateBounds=function(){this.updateText(!0),this.calculateVertices(),this._bounds.addQuad(this.vertexData)},nn.prototype._onStyleChange=function(){this.dirty=!0},nn.prototype._generateFillStyle=function(rn,an){if(!Array.isArray(rn.fill))return rn.fill;if(navigator.isCocoonJS)return rn.fill[0];var on,sn,dn,ln,un=this.canvas.width/this.resolution,pn=this.canvas.height/this.resolution,cn=rn.fill.slice(),hn=rn.fillGradientStops.slice();if(!hn.length)for(var fn=cn.length+1,gn=1;gn<fn;++gn)hn.push(gn/fn);if(cn.unshift(rn.fill[0]),hn.unshift(0),cn.push(rn.fill[rn.fill.length-1]),hn.push(1),rn.fillGradientType===qt.TEXT_GRADIENT.LINEAR_VERTICAL){on=this.context.createLinearGradient(un/2,0,un/2,pn),sn=(cn.length+1)*an.length,dn=0;for(var mn=0;mn<an.length;mn++){dn+=1;for(var yn=0;yn<cn.length;yn++)ln="number"==typeof hn[yn]?hn[yn]/an.length+mn/an.length:dn/sn,on.addColorStop(ln,cn[yn]),dn++}}else{on=this.context.createLinearGradient(0,pn/2,un,pn/2),sn=cn.length+1,dn=1;for(var _n=0;_n<cn.length;_n++)ln="number"==typeof hn[_n]?hn[_n]:dn/sn,on.addColorStop(ln,cn[_n]),dn++}return on},nn.prototype.destroy=function(rn){"boolean"==typeof rn&&(rn={children:rn}),rn=Object.assign({},$t,rn),tn.prototype.destroy.call(this,rn),this.context=null,this.canvas=null,this._style=null},Yt(nn,[{key:"width",get:function(){return this.updateText(!0),Math.abs(this.scale.x)*this._texture.orig.width},set:function(rn){this.updateText(!0);var an=(0,Vt.sign)(this.scale.x)||1;this.scale.x=an*rn/this._texture.orig.width,this._width=rn}},{key:"height",get:function(){return this.updateText(!0),Math.abs(this.scale.y)*this._texture.orig.height},set:function(rn){this.updateText(!0);var an=(0,Vt.sign)(this.scale.y)||1;this.scale.y=an*rn/this._texture.orig.height,this._height=rn}},{key:"style",get:function(){return this._style},set:function(rn){this._style=(rn=rn||{})instanceof Qt.default?rn:new Qt.default(rn),this.localStyleID=-1,this.dirty=!0}},{key:"text",get:function(){return this._text},set:function(rn){rn=(""===rn||null===rn||void 0===rn?" ":rn)+"",this._text!==rn&&(this._text=rn,this.dirty=!0)}}]),nn}(Wt.default);Xt.default=en},{"../const":46,"../math":70,"../settings":101,"../sprites/Sprite":102,"../textures/Texture":115,"../utils":124,"../utils/trimCanvas":129,"./TextMetrics":109,"./TextStyle":110}],109:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Wt(jt,zt,Vt,qt,Kt,Qt,Zt,Jt,$t){!function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.text=jt,this.style=zt,this.width=Vt,this.height=qt,this.lines=Kt,this.lineWidths=Qt,this.lineHeight=Zt,this.maxLineWidth=Jt,this.fontProperties=$t}return Wt.measureText=function(jt,zt,Vt){var qt=3<arguments.length&&void 0!==arguments[3]?arguments[3]:Wt._canvas;Vt=Vt||zt.wordWrap;var Kt=zt.toFontString(),Qt=Wt.measureFont(Kt),Zt=qt.getContext("2d");Zt.font=Kt;for(var Jt=(Vt?Wt.wordWrap(jt,zt,qt):jt).split(/(?:\r\n|\r|\n)/),$t=Array(Jt.length),en=0,tn=0,nn;tn<Jt.length;tn++)nn=Zt.measureText(Jt[tn]).width+(Jt[tn].length-1)*zt.letterSpacing,$t[tn]=nn,en=Math.max(en,nn);var rn=en+zt.strokeThickness;zt.dropShadow&&(rn+=zt.dropShadowDistance);var an=zt.lineHeight||Qt.fontSize+zt.strokeThickness,on=Math.max(an,Qt.fontSize+zt.strokeThickness)+(Jt.length-1)*(an+zt.leading);return zt.dropShadow&&(on+=zt.dropShadowDistance),new Wt(jt,zt,rn,on,Jt,$t,an+zt.leading,en,Qt)},Wt.wordWrap=function(jt,zt){for(var Vt=(2<arguments.length&&void 0!==arguments[2]?arguments[2]:Wt._canvas).getContext("2d"),qt="",Kt=jt.split("\n"),Qt=zt.wordWrapWidth,Zt={},Jt=0;Jt<Kt.length;Jt++){for(var $t=Qt,en=Kt[Jt].split(" "),tn=0,nn;tn<en.length;tn++)if(nn=Vt.measureText(en[tn]).width,zt.breakWords&&nn>Qt)for(var rn=en[tn].split(""),an=0;an<rn.length;an++){var on=rn[an],sn=Zt[on];void 0===sn&&(sn=Vt.measureText(on).width,Zt[on]=sn),sn>$t?(qt+="\n"+on,$t=Qt-sn):(0===an&&(qt+=" "),qt+=on,$t-=sn)}else{var dn=nn+Vt.measureText(" ").width;0===tn||dn>$t?(0<tn&&(qt+="\n"),qt+=en[tn],$t=Qt-nn):($t-=dn,qt+=" "+en[tn])}Jt<Kt.length-1&&(qt+="\n")}return qt},Wt.measureFont=function(jt){if(Wt._fonts[jt])return Wt._fonts[jt];var zt={},Vt=Wt._canvas,qt=Wt._context;qt.font=jt;var Kt=Math.ceil(qt.measureText("|M\xC9q").width),Qt=Math.ceil(qt.measureText("M").width),Zt=2*Qt;Qt=0|1.4*Qt,Vt.width=Kt,Vt.height=Zt,qt.fillStyle="#f00",qt.fillRect(0,0,Kt,Zt),qt.font=jt,qt.textBaseline="alphabetic",qt.fillStyle="#000",qt.fillText("|M\xC9q",0,Qt);var Jt=qt.getImageData(0,0,Kt,Zt).data,$t=Jt.length,en=4*Kt,tn=0,nn=0,rn=!1;for(tn=0;tn<Qt;++tn){for(var an=0;an<en;an+=4)if(255!==Jt[nn+an]){rn=!0;break}if(rn)break;nn+=en}for(zt.ascent=Qt-tn,nn=$t-en,rn=!1,tn=Zt;tn>Qt;--tn){for(var on=0;on<en;on+=4)if(255!==Jt[nn+on]){rn=!0;break}if(rn)break;nn-=en}return zt.descent=tn-Qt,zt.fontSize=zt.ascent+zt.descent,Wt._fonts[jt]=zt,zt},Wt}();Xt.default=Ht;var Yt=document.createElement("canvas");Yt.width=Yt.height=10,Ht._canvas=Yt,Ht._context=Yt.getContext("2d"),Ht._fonts={}},{}],110:[function(Bt,Gt,Xt){function Ht(Kt){return"number"==typeof Kt?(0,zt.hex2string)(Kt):("string"==typeof Kt&&0===Kt.indexOf("0x")&&(Kt=Kt.replace("0x","#")),Kt)}function Yt(Kt){if(Array.isArray(Kt)){for(var Qt=0;Qt<Kt.length;++Qt)Kt[Qt]=Ht(Kt[Qt]);return Kt}return Ht(Kt)}Xt.__esModule=!0;var Wt=function(){function Kt(Qt,Zt){for(var Jt=0,$t;Jt<Zt.length;Jt++)$t=Zt[Jt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qt,$t.key,$t)}return function(Qt,Zt,Jt){return Zt&&Kt(Qt.prototype,Zt),Jt&&Kt(Qt,Jt),Qt}}(),jt=Bt("../const"),zt=Bt("../utils"),Vt={align:"left",breakWords:!1,dropShadow:!1,dropShadowAlpha:1,dropShadowAngle:Math.PI/6,dropShadowBlur:0,dropShadowColor:"black",dropShadowDistance:5,fill:"black",fillGradientType:jt.TEXT_GRADIENT.LINEAR_VERTICAL,fillGradientStops:[],fontFamily:"Arial",fontSize:26,fontStyle:"normal",fontVariant:"normal",fontWeight:"normal",letterSpacing:0,lineHeight:0,lineJoin:"miter",miterLimit:10,padding:0,stroke:"black",strokeThickness:0,textBaseline:"alphabetic",trim:!1,wordWrap:!1,wordWrapWidth:100,leading:0},qt=function(){function Kt(Qt){!function(Zt,Jt){if(!(Zt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Kt),this.styleID=0,Object.assign(this,Vt,Qt)}return Kt.prototype.clone=function(){var Qt={};for(var Zt in Vt)Qt[Zt]=this[Zt];return new Kt(Qt)},Kt.prototype.reset=function(){Object.assign(this,Vt)},Kt.prototype.toFontString=function(){var Qt="number"==typeof this.fontSize?this.fontSize+"px":this.fontSize,Zt=this.fontFamily;Array.isArray(this.fontFamily)||(Zt=this.fontFamily.split(","));for(var Jt=Zt.length-1,$t;0<=Jt;Jt--)$t=Zt[Jt].trim(),/([\"\'])[^\'\"]+\1/.test($t)||($t="\""+$t+"\""),Zt[Jt]=$t;return this.fontStyle+" "+this.fontVariant+" "+this.fontWeight+" "+Qt+" "+Zt.join(",")},Wt(Kt,[{key:"align",get:function(){return this._align},set:function(Qt){this._align!==Qt&&(this._align=Qt,this.styleID++)}},{key:"breakWords",get:function(){return this._breakWords},set:function(Qt){this._breakWords!==Qt&&(this._breakWords=Qt,this.styleID++)}},{key:"dropShadow",get:function(){return this._dropShadow},set:function(Qt){this._dropShadow!==Qt&&(this._dropShadow=Qt,this.styleID++)}},{key:"dropShadowAlpha",get:function(){return this._dropShadowAlpha},set:function(Qt){this._dropShadowAlpha!==Qt&&(this._dropShadowAlpha=Qt,this.styleID++)}},{key:"dropShadowAngle",get:function(){return this._dropShadowAngle},set:function(Qt){this._dropShadowAngle!==Qt&&(this._dropShadowAngle=Qt,this.styleID++)}},{key:"dropShadowBlur",get:function(){return this._dropShadowBlur},set:function(Qt){this._dropShadowBlur!==Qt&&(this._dropShadowBlur=Qt,this.styleID++)}},{key:"dropShadowColor",get:function(){return this._dropShadowColor},set:function(Qt){var Zt=Yt(Qt);this._dropShadowColor!==Zt&&(this._dropShadowColor=Zt,this.styleID++)}},{key:"dropShadowDistance",get:function(){return this._dropShadowDistance},set:function(Qt){this._dropShadowDistance!==Qt&&(this._dropShadowDistance=Qt,this.styleID++)}},{key:"fill",get:function(){return this._fill},set:function(Qt){var Zt=Yt(Qt);this._fill!==Zt&&(this._fill=Zt,this.styleID++)}},{key:"fillGradientType",get:function(){return this._fillGradientType},set:function(Qt){this._fillGradientType!==Qt&&(this._fillGradientType=Qt,this.styleID++)}},{key:"fillGradientStops",get:function(){return this._fillGradientStops},set:function(Qt){(function(Zt,Jt){if(!Array.isArray(Zt)||!Array.isArray(Jt))return!1;if(Zt.length!==Jt.length)return!1;for(var $t=0;$t<Zt.length;++$t)if(Zt[$t]!==Jt[$t])return!1;return!0})(this._fillGradientStops,Qt)||(this._fillGradientStops=Qt,this.styleID++)}},{key:"fontFamily",get:function(){return this._fontFamily},set:function(Qt){this.fontFamily!==Qt&&(this._fontFamily=Qt,this.styleID++)}},{key:"fontSize",get:function(){return this._fontSize},set:function(Qt){this._fontSize!==Qt&&(this._fontSize=Qt,this.styleID++)}},{key:"fontStyle",get:function(){return this._fontStyle},set:function(Qt){this._fontStyle!==Qt&&(this._fontStyle=Qt,this.styleID++)}},{key:"fontVariant",get:function(){return this._fontVariant},set:function(Qt){this._fontVariant!==Qt&&(this._fontVariant=Qt,this.styleID++)}},{key:"fontWeight",get:function(){return this._fontWeight},set:function(Qt){this._fontWeight!==Qt&&(this._fontWeight=Qt,this.styleID++)}},{key:"letterSpacing",get:function(){return this._letterSpacing},set:function(Qt){this._letterSpacing!==Qt&&(this._letterSpacing=Qt,this.styleID++)}},{key:"lineHeight",get:function(){return this._lineHeight},set:function(Qt){this._lineHeight!==Qt&&(this._lineHeight=Qt,this.styleID++)}},{key:"leading",get:function(){return this._leading},set:function(Qt){this._leading!==Qt&&(this._leading=Qt,this.styleID++)}},{key:"lineJoin",get:function(){return this._lineJoin},set:function(Qt){this._lineJoin!==Qt&&(this._lineJoin=Qt,this.styleID++)}},{key:"miterLimit",get:function(){return this._miterLimit},set:function(Qt){this._miterLimit!==Qt&&(this._miterLimit=Qt,this.styleID++)}},{key:"padding",get:function(){return this._padding},set:function(Qt){this._padding!==Qt&&(this._padding=Qt,this.styleID++)}},{key:"stroke",get:function(){return this._stroke},set:function(Qt){var Zt=Yt(Qt);this._stroke!==Zt&&(this._stroke=Zt,this.styleID++)}},{key:"strokeThickness",get:function(){return this._strokeThickness},set:function(Qt){this._strokeThickness!==Qt&&(this._strokeThickness=Qt,this.styleID++)}},{key:"textBaseline",get:function(){return this._textBaseline},set:function(Qt){this._textBaseline!==Qt&&(this._textBaseline=Qt,this.styleID++)}},{key:"trim",get:function(){return this._trim},set:function(Qt){this._trim!==Qt&&(this._trim=Qt,this.styleID++)}},{key:"wordWrap",get:function(){return this._wordWrap},set:function(Qt){this._wordWrap!==Qt&&(this._wordWrap=Qt,this.styleID++)}},{key:"wordWrapWidth",get:function(){return this._wordWrapWidth},set:function(Qt){this._wordWrapWidth!==Qt&&(this._wordWrapWidth=Qt,this.styleID++)}}]),Kt}();Xt.default=qt},{"../const":46,"../utils":124}],111:[function(Bt,Gt,Xt){function Ht(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0;var Yt=Ht(Bt("./BaseTexture")),Wt=Ht(Bt("../settings")),jt=function(zt){function Vt(){var qt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:100,Kt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,Qt=arguments[2],Zt=arguments[3];!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Jt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,zt.call(this,null,Qt));return Jt.resolution=Zt||Wt.default.RESOLUTION,Jt.width=qt,Jt.height=Kt,Jt.realWidth=Jt.width*Jt.resolution,Jt.realHeight=Jt.height*Jt.resolution,Jt.scaleMode=void 0===Qt?Wt.default.SCALE_MODE:Qt,Jt.hasLoaded=!0,Jt._glRenderTargets={},Jt._canvasRenderTarget=null,Jt.valid=!1,Jt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.resize=function(qt,Kt){qt===this.width&&Kt===this.height||(this.valid=0<qt&&0<Kt,this.width=qt,this.height=Kt,this.realWidth=this.width*this.resolution,this.realHeight=this.height*this.resolution,this.valid&&this.emit("update",this))},Vt.prototype.destroy=function(){zt.prototype.destroy.call(this,!0),this.renderer=null},Vt}(Yt.default);Xt.default=jt},{"../settings":101,"./BaseTexture":112}],112:[function(Bt,Gt,Xt){function Ht(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Yt=Bt("../utils"),Wt=Ht(Bt("../settings")),jt=Ht(Bt("eventemitter3")),zt=Ht(Bt("../utils/determineCrossOrigin")),Vt=Ht(Bt("bit-twiddle")),qt=function(Kt){function Qt(Zt,Jt,$t){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Qt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,Kt.call(this));return en.uid=(0,Yt.uid)(),en.touched=0,en.resolution=$t||Wt.default.RESOLUTION,en.width=100,en.height=100,en.realWidth=100,en.realHeight=100,en.scaleMode=void 0===Jt?Wt.default.SCALE_MODE:Jt,en.hasLoaded=!1,en.isLoading=!1,en.source=null,en.origSource=null,en.imageType=null,en.sourceScale=1,en.premultipliedAlpha=!0,en.imageUrl=null,en.isPowerOfTwo=!1,en.mipmap=Wt.default.MIPMAP_TEXTURES,en.wrapMode=Wt.default.WRAP_MODE,en._glTextures={},en._enabled=0,en._virtalBoundId=-1,en._destroyed=!1,en.textureCacheIds=[],Zt&&en.loadSource(Zt),en}return function(Zt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Zt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,Jt):Zt.__proto__=Jt)}(Qt,Kt),Qt.prototype.update=function(Zt){"svg"!==this.imageType&&(this.realWidth=this.source.naturalWidth||this.source.videoWidth||this.source.width,this.realHeight=this.source.naturalHeight||this.source.videoHeight||this.source.height,this._updateDimensions()),Zt||this.emit("update",this)},Qt.prototype._updateDimensions=function(){this.width=this.realWidth/this.resolution,this.height=this.realHeight/this.resolution,this.isPowerOfTwo=Vt.default.isPow2(this.realWidth)&&Vt.default.isPow2(this.realHeight)},Qt.prototype.loadSource=function(Zt){var Jt=this.isLoading;this.hasLoaded=!1,this.isLoading=!1,Jt&&this.source&&(this.source.onload=null,this.source.onerror=null);var $t=!this.source;if(this.source=Zt,(Zt.src&&Zt.complete||Zt.getContext)&&Zt.width&&Zt.height){this._updateImageType(),"svg"===this.imageType&&this._loadSvgSource();var en=this;$t&&(window.createImageBitmap&&!Zt.getContext?(en.hasLoaded=!0,en.update(!0),window.createImageBitmap(Zt).then(function(tn){en.source=tn,en.emit("loaded",en)})):(this._sourceLoaded(),en.emit("loaded",en)))}else if(!Zt.getContext&&(this.isLoading=!0,en=this,(Zt.onload=function(){en._updateImageType(),Zt.onload=null,Zt.onerror=null,en.isLoading&&(en.isLoading=!1,"svg"===en.imageType?en._loadSvgSource():window.createImageBitmap?(en.hasLoaded=!0,en.update(!0),window.createImageBitmap(Zt).then(function(tn){en.source=tn,en.emit("loaded",en)})):(en._sourceLoaded(),en.emit("loaded",en)))},Zt.onerror=function(){Zt.onload=null,Zt.onerror=null,en.isLoading&&(en.isLoading=!1,en.emit("error",en))},Zt.complete&&Zt.src))){if(Zt.onload=null,Zt.onerror=null,"svg"===en.imageType)return void en._loadSvgSource();this.isLoading=!1,Zt.width&&Zt.height?Jt&&(window.createImageBitmap?(en.hasLoaded=!0,en.update(!0),window.createImageBitmap(Zt).then(function(tn){en.source=tn,en.emit("loaded",en)})):(this._sourceLoaded(),en.emit("loaded",en))):Jt&&this.emit("error",this)}},Qt.prototype._updateImageType=function(){if(this.imageUrl){var Zt=(0,Yt.decomposeDataUri)(this.imageUrl),Jt;if(Zt&&"image"===Zt.mediaType){var $t=Zt.subType.split("+")[0];if(!(Jt=(0,Yt.getUrlFileExtension)("."+$t)))throw new Error("Invalid image type in data URI.")}else(Jt=(0,Yt.getUrlFileExtension)(this.imageUrl))||(Jt="png");this.imageType=Jt}},Qt.prototype._loadSvgSource=function(){if("svg"===this.imageType){var Zt=(0,Yt.decomposeDataUri)(this.imageUrl);Zt?this._loadSvgSourceUsingDataUri(Zt):this._loadSvgSourceUsingXhr()}},Qt.prototype._loadSvgSourceUsingDataUri=function(Zt){var Jt;if("base64"===Zt.encoding){if(!atob)throw new Error("Your browser doesn't support base64 conversions.");Jt=atob(Zt.data)}else Jt=Zt.data;this._loadSvgSourceUsingString(Jt)},Qt.prototype._loadSvgSourceUsingXhr=function(){var Zt=this,Jt=new XMLHttpRequest;Jt.onload=function(){if(Jt.readyState!==Jt.DONE||200!==Jt.status)throw new Error("Failed to load SVG using XHR.");Zt._loadSvgSourceUsingString(Jt.response)},Jt.onerror=function(){return Zt.emit("error",Zt)},Jt.open("GET",this.imageUrl,!0),Jt.send()},Qt.prototype._loadSvgSourceUsingString=function(Zt){var Jt=(0,Yt.getSvgSize)(Zt),$t=Jt.width,en=Jt.height;if(!$t||!en)throw new Error("The SVG image must have width and height defined (in pixels), canvas API needs them.");this.realWidth=Math.round($t*this.sourceScale),this.realHeight=Math.round(en*this.sourceScale),this._updateDimensions();var tn=document.createElement("canvas");tn.width=this.realWidth,tn.height=this.realHeight,tn._pixiId="canvas_"+(0,Yt.uid)(),tn.getContext("2d").drawImage(this.source,0,0,$t,en,0,0,this.realWidth,this.realHeight),this.origSource=this.source,this.source=tn,Qt.addToCache(this,tn._pixiId),this.isLoading=!1,this._sourceLoaded(),this.emit("loaded",this)},Qt.prototype._sourceLoaded=function(){this.hasLoaded=!0,this.update()},Qt.prototype.destroy=function(){this.imageUrl&&(delete Yt.TextureCache[this.imageUrl],this.imageUrl=null,navigator.isCocoonJS||(this.source.src="")),this.source=null,this.dispose(),Qt.removeFromCache(this),this.textureCacheIds=null,this._destroyed=!0},Qt.prototype.dispose=function(){this.emit("dispose",this)},Qt.prototype.updateSourceImage=function(Zt){this.source.src=Zt,this.loadSource(this.source)},Qt.fromImage=function(Zt,Jt,$t,en){var tn=Yt.BaseTextureCache[Zt];if(!tn){var nn=new Image;void 0===Jt&&0!==Zt.indexOf("data:")?nn.crossOrigin=(0,zt.default)(Zt):Jt&&(nn.crossOrigin="string"==typeof Jt?Jt:"anonymous"),(tn=new Qt(nn,$t)).imageUrl=Zt,en&&(tn.sourceScale=en),tn.resolution=(0,Yt.getResolutionOfUrl)(Zt),nn.src=Zt,Qt.addToCache(tn,Zt)}return tn},Qt.fromCanvas=function(Zt,Jt){var $t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";Zt._pixiId||(Zt._pixiId=$t+"_"+(0,Yt.uid)());var en=Yt.BaseTextureCache[Zt._pixiId];return en||(en=new Qt(Zt,Jt),Qt.addToCache(en,Zt._pixiId)),en},Qt.from=function(Zt,Jt,$t){if("string"==typeof Zt)return Qt.fromImage(Zt,void 0,Jt,$t);if(Zt instanceof HTMLImageElement){var en=Zt.src,tn=Yt.BaseTextureCache[en];return tn||((tn=new Qt(Zt,Jt)).imageUrl=en,$t&&(tn.sourceScale=$t),tn.resolution=(0,Yt.getResolutionOfUrl)(en),Qt.addToCache(tn,en)),tn}return Zt instanceof HTMLCanvasElement?Qt.fromCanvas(Zt,Jt):Zt},Qt.addToCache=function(Zt,Jt){Jt&&(-1===Zt.textureCacheIds.indexOf(Jt)&&Zt.textureCacheIds.push(Jt),Yt.BaseTextureCache[Jt]&&console.warn("BaseTexture added to the cache with an id ["+Jt+"] that already had an entry"),Yt.BaseTextureCache[Jt]=Zt)},Qt.removeFromCache=function(Zt){if("string"==typeof Zt){var Jt=Yt.BaseTextureCache[Zt];if(Jt){var $t=Jt.textureCacheIds.indexOf(Zt);return-1<$t&&Jt.textureCacheIds.splice($t,1),delete Yt.BaseTextureCache[Zt],Jt}}else if(Zt&&Zt.textureCacheIds){for(var en=0;en<Zt.textureCacheIds.length;++en)delete Yt.BaseTextureCache[Zt.textureCacheIds[en]];return Zt.textureCacheIds.length=0,Zt}return null},Qt}(jt.default);Xt.default=qt},{"../settings":101,"../utils":124,"../utils/determineCrossOrigin":123,"bit-twiddle":1,eventemitter3:3}],113:[function(Bt,Gt,Xt){function Ht(jt){return jt&&jt.__esModule?jt:{default:jt}}Xt.__esModule=!0;var Yt=Ht(Bt("./BaseRenderTexture")),Wt=function(jt){function zt(Vt,qt){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=null;if(!(Vt instanceof Yt.default)){var Qt=arguments[1],Zt=arguments[2],Jt=arguments[3],$t=arguments[4];console.warn("Please use RenderTexture.create("+Qt+", "+Zt+") instead of the ctor directly."),Kt=arguments[0],qt=null,Vt=new Yt.default(Qt,Zt,Jt,$t)}var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,jt.call(this,Vt,qt));return en.legacyRenderer=Kt,en.valid=!0,en._updateUvs(),en}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.resize=function(Vt,qt,Kt){this.valid=0<Vt&&0<qt,this._frame.width=this.orig.width=Vt,this._frame.height=this.orig.height=qt,Kt||this.baseTexture.resize(Vt,qt),this._updateUvs()},zt.create=function(Vt,qt,Kt,Qt){return new zt(new Yt.default(Vt,qt,Kt,Qt))},zt}(Ht(Bt("./Texture")).default);Xt.default=Wt},{"./BaseRenderTexture":111,"./Texture":115}],114:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function zt(Vt,qt){for(var Kt=0,Qt;Kt<qt.length;Kt++)Qt=qt[Kt],Qt.enumerable=Qt.enumerable||!1,Qt.configurable=!0,"value"in Qt&&(Qt.writable=!0),Object.defineProperty(Vt,Qt.key,Qt)}return function(Vt,qt,Kt){return qt&&zt(Vt.prototype,qt),Kt&&zt(Vt,Kt),Vt}}(),Yt=Bt("../"),Wt=Bt("../utils"),jt=function(){function zt(Vt,qt){var Kt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:null;!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,zt),this.baseTexture=Vt,this.textures={},this.data=qt,this.resolution=this._updateResolution(Kt||this.baseTexture.imageUrl),this._frames=this.data.frames,this._frameKeys=Object.keys(this._frames),this._batchIndex=0,this._callback=null}return Ht(zt,null,[{key:"BATCH_SIZE",get:function(){return 1e3}}]),zt.prototype._updateResolution=function(Vt){var qt=this.data.meta.scale,Kt=(0,Wt.getResolutionOfUrl)(Vt,null);return null===Kt&&(Kt=void 0===qt?1:parseFloat(qt)),1!==Kt&&(this.baseTexture.resolution=Kt,this.baseTexture.update()),Kt},zt.prototype.parse=function(Vt){this._batchIndex=0,this._callback=Vt,this._frameKeys.length<=zt.BATCH_SIZE?(this._processFrames(0),this._parseComplete()):this._nextBatch()},zt.prototype._processFrames=function(Vt){for(var qt=Vt,Kt=zt.BATCH_SIZE,Qt=this.baseTexture.sourceScale;qt-Vt<Kt&&qt<this._frameKeys.length;){var Zt=this._frameKeys[qt],Jt=this._frames[Zt].frame;if(Jt){var $t=null,en=null,tn=new Yt.Rectangle(0,0,Math.floor(this._frames[Zt].sourceSize.w*Qt)/this.resolution,Math.floor(this._frames[Zt].sourceSize.h*Qt)/this.resolution);$t=this._frames[Zt].rotated?new Yt.Rectangle(Math.floor(Jt.x*Qt)/this.resolution,Math.floor(Jt.y*Qt)/this.resolution,Math.floor(Jt.h*Qt)/this.resolution,Math.floor(Jt.w*Qt)/this.resolution):new Yt.Rectangle(Math.floor(Jt.x*Qt)/this.resolution,Math.floor(Jt.y*Qt)/this.resolution,Math.floor(Jt.w*Qt)/this.resolution,Math.floor(Jt.h*Qt)/this.resolution),this._frames[Zt].trimmed&&(en=new Yt.Rectangle(Math.floor(this._frames[Zt].spriteSourceSize.x*Qt)/this.resolution,Math.floor(this._frames[Zt].spriteSourceSize.y*Qt)/this.resolution,Math.floor(Jt.w*Qt)/this.resolution,Math.floor(Jt.h*Qt)/this.resolution)),this.textures[Zt]=new Yt.Texture(this.baseTexture,$t,tn,en,this._frames[Zt].rotated?2:0),Yt.Texture.addToCache(this.textures[Zt],Zt)}qt++}},zt.prototype._parseComplete=function(){var Vt=this._callback;this._callback=null,this._batchIndex=0,Vt.call(this,this.textures)},zt.prototype._nextBatch=function(){var Vt=this;this._processFrames(this._batchIndex*zt.BATCH_SIZE),this._batchIndex++,setTimeout(function(){Vt._batchIndex*zt.BATCH_SIZE<Vt._frameKeys.length?Vt._nextBatch():Vt._parseComplete()},0)},zt.prototype.destroy=function(){var Vt=0<arguments.length&&void 0!==arguments[0]&&arguments[0];for(var qt in this.textures)this.textures[qt].destroy();this._frames=null,this._frameKeys=null,this.data=null,this.textures=null,Vt&&this.baseTexture.destroy(),this.baseTexture=null},zt}();Xt.default=jt},{"../":65,"../utils":124}],115:[function(Bt,Gt,Xt){function Ht($t){return $t&&$t.__esModule?$t:{default:$t}}function Yt($t){$t.destroy=function(){},$t.on=function(){},$t.once=function(){},$t.emit=function(){}}Xt.__esModule=!0;var Wt=function(){function $t(en,tn){for(var nn=0,rn;nn<tn.length;nn++)rn=tn[nn],rn.enumerable=rn.enumerable||!1,rn.configurable=!0,"value"in rn&&(rn.writable=!0),Object.defineProperty(en,rn.key,rn)}return function(en,tn,nn){return tn&&$t(en.prototype,tn),nn&&$t(en,nn),en}}(),jt=Ht(Bt("./BaseTexture")),zt=Ht(Bt("./VideoBaseTexture")),Vt=Ht(Bt("./TextureUvs")),qt=Ht(Bt("eventemitter3")),Kt=Bt("../math"),Qt=Bt("../utils"),Zt=Ht(Bt("../settings")),Jt=function($t){function en(tn,nn,rn,an,on){!function(dn,ln){if(!(dn instanceof ln))throw new TypeError("Cannot call a class as a function")}(this,en);var sn=function(dn,ln){if(!dn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return ln&&("object"==typeof ln||"function"==typeof ln)?ln:dn}(this,$t.call(this));if(sn.noFrame=!1,nn||(sn.noFrame=!0,nn=new Kt.Rectangle(0,0,1,1)),tn instanceof en&&(tn=tn.baseTexture),sn.baseTexture=tn,sn._frame=nn,sn.trim=an,sn.valid=!1,sn.requiresUpdate=!1,sn._uvs=null,sn.orig=rn||nn,sn._rotate=+(on||0),!0===on)sn._rotate=2;else if(0!=sn._rotate%2)throw new Error("attempt to use diamond-shaped UVs. If you are sure, set rotation manually");return tn.hasLoaded?(sn.noFrame&&(nn=new Kt.Rectangle(0,0,tn.width,tn.height),tn.on("update",sn.onBaseTextureUpdated,sn)),sn.frame=nn):tn.once("loaded",sn.onBaseTextureLoaded,sn),sn._updateID=0,sn.transform=null,sn.textureCacheIds=[],sn}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.update=function(){this.baseTexture.update()},en.prototype.onBaseTextureLoaded=function(tn){this._updateID++,this.frame=this.noFrame?new Kt.Rectangle(0,0,tn.width,tn.height):this._frame,this.baseTexture.on("update",this.onBaseTextureUpdated,this),this.emit("update",this)},en.prototype.onBaseTextureUpdated=function(tn){this._updateID++,this._frame.width=tn.width,this._frame.height=tn.height,this.emit("update",this)},en.prototype.destroy=function(tn){this.baseTexture&&(tn&&(Qt.TextureCache[this.baseTexture.imageUrl]&&en.removeFromCache(this.baseTexture.imageUrl),this.baseTexture.destroy()),this.baseTexture.off("update",this.onBaseTextureUpdated,this),this.baseTexture.off("loaded",this.onBaseTextureLoaded,this),this.baseTexture=null),this._frame=null,this._uvs=null,this.trim=null,this.orig=null,this.valid=!1,en.removeFromCache(this),this.textureCacheIds=null},en.prototype.clone=function(){return new en(this.baseTexture,this.frame,this.orig,this.trim,this.rotate)},en.prototype._updateUvs=function(){this._uvs||(this._uvs=new Vt.default),this._uvs.set(this._frame,this.baseTexture,this.rotate),this._updateID++},en.fromImage=function(tn,nn,rn,an){var on=Qt.TextureCache[tn];return on||(on=new en(jt.default.fromImage(tn,nn,rn,an)),en.addToCache(on,tn)),on},en.fromFrame=function(tn){var nn=Qt.TextureCache[tn];if(!nn)throw new Error("The frameId \""+tn+"\" does not exist in the texture cache");return nn},en.fromCanvas=function(tn,nn){var rn=2<arguments.length&&void 0!==arguments[2]?arguments[2]:"canvas";return new en(jt.default.fromCanvas(tn,nn,rn))},en.fromVideo=function(tn,nn){return"string"==typeof tn?en.fromVideoUrl(tn,nn):new en(zt.default.fromVideo(tn,nn))},en.fromVideoUrl=function(tn,nn){return new en(zt.default.fromUrl(tn,nn))},en.from=function(tn){if("string"==typeof tn){var nn=Qt.TextureCache[tn];return nn?nn:null===tn.match(/\.(mp4|webm|ogg|h264|avi|mov)$/)?en.fromImage(tn):en.fromVideoUrl(tn)}return tn instanceof HTMLImageElement?new en(jt.default.from(tn)):tn instanceof HTMLCanvasElement?en.fromCanvas(tn,Zt.default.SCALE_MODE,"HTMLCanvasElement"):tn instanceof HTMLVideoElement?en.fromVideo(tn):tn instanceof jt.default?new en(tn):tn},en.fromLoader=function(tn,nn,rn){var an=new jt.default(tn,void 0,(0,Qt.getResolutionOfUrl)(nn)),on=new en(an);return an.imageUrl=nn,rn||(rn=nn),jt.default.addToCache(on.baseTexture,rn),en.addToCache(on,rn),rn!==nn&&(jt.default.addToCache(on.baseTexture,nn),en.addToCache(on,nn)),on},en.addToCache=function(tn,nn){nn&&(-1===tn.textureCacheIds.indexOf(nn)&&tn.textureCacheIds.push(nn),Qt.TextureCache[nn]&&console.warn("Texture added to the cache with an id ["+nn+"] that already had an entry"),Qt.TextureCache[nn]=tn)},en.removeFromCache=function(tn){if("string"==typeof tn){var nn=Qt.TextureCache[tn];if(nn){var rn=nn.textureCacheIds.indexOf(tn);return-1<rn&&nn.textureCacheIds.splice(rn,1),delete Qt.TextureCache[tn],nn}}else if(tn&&tn.textureCacheIds){for(var an=0;an<tn.textureCacheIds.length;++an)Qt.TextureCache[tn.textureCacheIds[an]]===tn&&delete Qt.TextureCache[tn.textureCacheIds[an]];return tn.textureCacheIds.length=0,tn}return null},Wt(en,[{key:"frame",get:function(){return this._frame},set:function(tn){this._frame=tn,this.noFrame=!1;var nn=tn.x,rn=tn.y,an=tn.width,on=tn.height,sn=nn+an>this.baseTexture.width,dn=rn+on>this.baseTexture.height;if(sn||dn){var ln=sn&&dn?"and":"or",un="X: "+nn+" + "+an+" = "+(nn+an)+" > "+this.baseTexture.width,pn="Y: "+rn+" + "+on+" = "+(rn+on)+" > "+this.baseTexture.height;throw new Error("Texture Error: frame does not fit inside the base Texture dimensions: "+un+" "+ln+" "+pn)}this.valid=an&&on&&this.baseTexture.hasLoaded,this.trim||this.rotate||(this.orig=tn),this.valid&&this._updateUvs()}},{key:"rotate",get:function(){return this._rotate},set:function(tn){this._rotate=tn,this.valid&&this._updateUvs()}},{key:"width",get:function(){return this.orig.width}},{key:"height",get:function(){return this.orig.height}}]),en}(qt.default);Xt.default=Jt,Jt.EMPTY=new Jt(new jt.default()),Yt(Jt.EMPTY),Yt(Jt.EMPTY.baseTexture),Jt.WHITE=function(){var $t=document.createElement("canvas");$t.width=10,$t.height=10;var en=$t.getContext("2d");return en.fillStyle="white",en.fillRect(0,0,10,10),new Jt(new jt.default($t))}(),Yt(Jt.WHITE),Yt(Jt.WHITE.baseTexture)},{"../math":70,"../settings":101,"../utils":124,"./BaseTexture":112,"./TextureUvs":116,"./VideoBaseTexture":117,eventemitter3:3}],116:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../math/GroupD8")),Yt=function(){function Wt(){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this.x0=0,this.y0=0,this.x1=1,this.y1=0,this.x2=1,this.y2=1,this.x3=0,this.y3=1,this.uvsUint32=new Uint32Array(4)}return Wt.prototype.set=function(jt,zt,Vt){var qt=zt.width,Kt=zt.height;if(Vt){var Qt=jt.width/2/qt,Zt=jt.height/2/Kt,Jt=jt.x/qt+Qt,$t=jt.y/Kt+Zt;Vt=Ht.default.add(Vt,Ht.default.NW),this.x0=Jt+Qt*Ht.default.uX(Vt),this.y0=$t+Zt*Ht.default.uY(Vt),Vt=Ht.default.add(Vt,2),this.x1=Jt+Qt*Ht.default.uX(Vt),this.y1=$t+Zt*Ht.default.uY(Vt),Vt=Ht.default.add(Vt,2),this.x2=Jt+Qt*Ht.default.uX(Vt),this.y2=$t+Zt*Ht.default.uY(Vt),Vt=Ht.default.add(Vt,2),this.x3=Jt+Qt*Ht.default.uX(Vt),this.y3=$t+Zt*Ht.default.uY(Vt)}else this.x0=jt.x/qt,this.y0=jt.y/Kt,this.x1=(jt.x+jt.width)/qt,this.y1=jt.y/Kt,this.x2=(jt.x+jt.width)/qt,this.y2=(jt.y+jt.height)/Kt,this.x3=jt.x/qt,this.y3=(jt.y+jt.height)/Kt;this.uvsUint32[0]=(65535&65535*this.y0)<<16|65535&65535*this.x0,this.uvsUint32[1]=(65535&65535*this.y1)<<16|65535&65535*this.x1,this.uvsUint32[2]=(65535&65535*this.y2)<<16|65535&65535*this.x2,this.uvsUint32[3]=(65535&65535*this.y3)<<16|65535&65535*this.x3},Wt}();Xt.default=Yt},{"../math/GroupD8":66}],117:[function(Bt,Gt,Xt){function Ht(Kt,Qt){Qt||(Qt="video/"+Kt.substr(Kt.lastIndexOf(".")+1));var Zt=document.createElement("source");return Zt.src=Kt,Zt.type=Qt,Zt}Xt.__esModule=!0;var Yt=function(){function Kt(Qt,Zt){for(var Jt=0,$t;Jt<Zt.length;Jt++)$t=Zt[Jt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qt,$t.key,$t)}return function(Qt,Zt,Jt){return Zt&&Kt(Qt.prototype,Zt),Jt&&Kt(Qt,Jt),Qt}}(),Wt=function(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}(Bt("./BaseTexture")),jt=Bt("../utils"),zt=Bt("../ticker"),Vt=Bt("../const"),qt=function(Kt){function Qt(Zt,Jt){if(function(en,tn){if(!(en instanceof tn))throw new TypeError("Cannot call a class as a function")}(this,Qt),!Zt)throw new Error("No video source element specified.");(Zt.readyState===Zt.HAVE_ENOUGH_DATA||Zt.readyState===Zt.HAVE_FUTURE_DATA)&&Zt.width&&Zt.height&&(Zt.complete=!0);var $t=function(en,tn){if(!en)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return tn&&("object"==typeof tn||"function"==typeof tn)?tn:en}(this,Kt.call(this,Zt,Jt));return $t.width=Zt.videoWidth,$t.height=Zt.videoHeight,$t._autoUpdate=!0,$t._isAutoUpdating=!1,$t.autoPlay=!0,$t.update=$t.update.bind($t),$t._onCanPlay=$t._onCanPlay.bind($t),Zt.addEventListener("play",$t._onPlayStart.bind($t)),Zt.addEventListener("pause",$t._onPlayStop.bind($t)),$t.hasLoaded=!1,$t.__loaded=!1,$t._isSourceReady()?$t._onCanPlay():(Zt.addEventListener("canplay",$t._onCanPlay),Zt.addEventListener("canplaythrough",$t._onCanPlay)),$t}return function(Zt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Zt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,Jt):Zt.__proto__=Jt)}(Qt,Kt),Qt.prototype._isSourcePlaying=function(){var Zt=this.source;return 0<Zt.currentTime&&!1===Zt.paused&&!1===Zt.ended&&2<Zt.readyState},Qt.prototype._isSourceReady=function(){return 3===this.source.readyState||4===this.source.readyState},Qt.prototype._onPlayStart=function(){this.hasLoaded||this._onCanPlay(),!this._isAutoUpdating&&this.autoUpdate&&(zt.shared.add(this.update,this,Vt.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0)},Qt.prototype._onPlayStop=function(){this._isAutoUpdating&&(zt.shared.remove(this.update,this),this._isAutoUpdating=!1)},Qt.prototype._onCanPlay=function(){this.hasLoaded=!0,this.source&&(this.source.removeEventListener("canplay",this._onCanPlay),this.source.removeEventListener("canplaythrough",this._onCanPlay),this.width=this.source.videoWidth,this.height=this.source.videoHeight,this.__loaded||(this.__loaded=!0,this.emit("loaded",this)),this._isSourcePlaying()?this._onPlayStart():this.autoPlay&&this.source.play())},Qt.prototype.destroy=function(){this._isAutoUpdating&&zt.shared.remove(this.update,this),this.source&&this.source._pixiId&&(Wt.default.removeFromCache(this.source._pixiId),delete this.source._pixiId),Kt.prototype.destroy.call(this)},Qt.fromVideo=function(Zt,Jt){Zt._pixiId||(Zt._pixiId="video_"+(0,jt.uid)());var $t=jt.BaseTextureCache[Zt._pixiId];return $t||($t=new Qt(Zt,Jt),Wt.default.addToCache($t,Zt._pixiId)),$t},Qt.fromUrl=function(Zt,Jt){var $t=document.createElement("video");if($t.setAttribute("webkit-playsinline",""),$t.setAttribute("playsinline",""),Array.isArray(Zt))for(var en=0;en<Zt.length;++en)$t.appendChild(Ht(Zt[en].src||Zt[en],Zt[en].mime));else $t.appendChild(Ht(Zt.src||Zt,Zt.mime));return $t.load(),Qt.fromVideo($t,Jt)},Yt(Qt,[{key:"autoUpdate",get:function(){return this._autoUpdate},set:function(Zt){Zt!==this._autoUpdate&&(this._autoUpdate=Zt,!this._autoUpdate&&this._isAutoUpdating?(zt.shared.remove(this.update,this),this._isAutoUpdating=!1):this._autoUpdate&&!this._isAutoUpdating&&(zt.shared.add(this.update,this,Vt.UPDATE_PRIORITY.HIGH),this._isAutoUpdating=!0))}}]),Qt}(Wt.default);Xt.default=qt,qt.fromUrls=qt.fromUrl},{"../const":46,"../ticker":120,"../utils":124,"./BaseTexture":112}],118:[function(Bt,Gt,Xt){function Ht(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Yt=function(){function qt(Kt,Qt){for(var Zt=0,Jt;Zt<Qt.length;Zt++)Jt=Qt[Zt],Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Kt,Jt.key,Jt)}return function(Kt,Qt,Zt){return Qt&&qt(Kt.prototype,Qt),Zt&&qt(Kt,Zt),Kt}}(),Wt=Ht(Bt("../settings")),jt=Bt("../const"),zt=Ht(Bt("./TickerListener")),Vt=function(){function qt(){var Kt=this;!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,qt),this._head=new zt.default(null,null,1/0),this._requestId=null,this._maxElapsedMS=100,this.autoStart=!1,this.deltaTime=1,this.elapsedMS=1/Wt.default.TARGET_FPMS,this.lastTime=-1,this.speed=1,this.started=!1,this._tick=function(Qt){Kt._requestId=null,Kt.started&&(Kt.update(Qt),Kt.started&&null===Kt._requestId&&Kt._head.next&&(Kt._requestId=requestAnimationFrame(Kt._tick)))}}return qt.prototype._requestIfNeeded=function(){null===this._requestId&&this._head.next&&(this.lastTime=performance.now(),this._requestId=requestAnimationFrame(this._tick))},qt.prototype._cancelIfNeeded=function(){null!==this._requestId&&(cancelAnimationFrame(this._requestId),this._requestId=null)},qt.prototype._startIfPossible=function(){this.started?this._requestIfNeeded():this.autoStart&&this.start()},qt.prototype.add=function(Kt,Qt){var Zt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:jt.UPDATE_PRIORITY.NORMAL;return this._addListener(new zt.default(Kt,Qt,Zt))},qt.prototype.addOnce=function(Kt,Qt){var Zt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:jt.UPDATE_PRIORITY.NORMAL;return this._addListener(new zt.default(Kt,Qt,Zt,!0))},qt.prototype._addListener=function(Kt){var Qt=this._head.next,Zt=this._head;if(Qt){for(;Qt;){if(Kt.priority>Qt.priority){Kt.connect(Zt);break}Zt=Qt,Qt=Qt.next}Kt.previous||Kt.connect(Zt)}else Kt.connect(Zt);return this._startIfPossible(),this},qt.prototype.remove=function(Kt,Qt){for(var Zt=this._head.next;Zt;)Zt=Zt.match(Kt,Qt)?Zt.destroy():Zt.next;return this._head.next||this._cancelIfNeeded(),this},qt.prototype.start=function(){this.started||(this.started=!0,this._requestIfNeeded())},qt.prototype.stop=function(){this.started&&(this.started=!1,this._cancelIfNeeded())},qt.prototype.destroy=function(){this.stop();for(var Kt=this._head.next;Kt;)Kt=Kt.destroy(!0);this._head.destroy(),this._head=null},qt.prototype.update=function(){var Kt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:performance.now(),Qt;if(Kt>this.lastTime){(Qt=this.elapsedMS=Kt-this.lastTime)>this._maxElapsedMS&&(Qt=this._maxElapsedMS),this.deltaTime=Qt*Wt.default.TARGET_FPMS*this.speed;for(var Zt=this._head,Jt=Zt.next;Jt;)Jt=Jt.emit(this.deltaTime);Zt.next||this._cancelIfNeeded()}else this.deltaTime=this.elapsedMS=0;this.lastTime=Kt},Yt(qt,[{key:"FPS",get:function(){return 1e3/this.elapsedMS}},{key:"minFPS",get:function(){return 1e3/this._maxElapsedMS},set:function(Kt){var Qt=Math.min(Math.max(0,Kt)/1e3,Wt.default.TARGET_FPMS);this._maxElapsedMS=1/Qt}}]),qt}();Xt.default=Vt},{"../const":46,"../settings":101,"./TickerListener":119}],119:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Yt(Wt){var jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:null,zt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:0,Vt=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,Yt),this.fn=Wt,this.context=jt,this.priority=zt,this.once=Vt,this.next=null,this.previous=null,this._destroyed=!1}return Yt.prototype.match=function(Wt,jt){return jt=jt||null,this.fn===Wt&&this.context===jt},Yt.prototype.emit=function(Wt){this.fn&&(this.context?this.fn.call(this.context,Wt):this.fn(Wt));var jt=this.next;return this.once&&this.destroy(!0),this._destroyed&&(this.next=null),jt},Yt.prototype.connect=function(Wt){this.previous=Wt,Wt.next&&(Wt.next.previous=this),this.next=Wt.next,Wt.next=this},Yt.prototype.destroy=function(){var Wt=0<arguments.length&&void 0!==arguments[0]&&arguments[0];this._destroyed=!0,this.fn=null,this.context=null,this.previous&&(this.previous.next=this.next),this.next&&(this.next.previous=this.previous);var jt=this.previous;return this.next=Wt?null:jt,this.previous=null,jt},Yt}();Xt.default=Ht},{}],120:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.Ticker=Xt.shared=void 0;var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./Ticker")),Yt=new Ht.default;Yt.autoStart=!0,Yt.destroy=function(){},Xt.shared=Yt,Xt.Ticker=Ht.default},{"./Ticker":118}],121:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(){return!(navigator.platform&&/iPad|iPhone|iPod/.test(navigator.platform))}},{}],122:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Ht){for(var Yt=6*Ht,Wt=new Uint16Array(Yt),jt=0,zt=0;jt<Yt;jt+=6,zt+=4)Wt[jt+0]=zt+0,Wt[jt+1]=zt+1,Wt[jt+2]=zt+2,Wt[jt+3]=zt+0,Wt[jt+4]=zt+2,Wt[jt+5]=zt+3;return Wt}},{}],123:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt){var jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:window.location;if(0===Wt.indexOf("data:"))return"";jt=jt||window.location,Yt||(Yt=document.createElement("a")),Yt.href=Wt;var zt=!(Wt=Ht.default.parse(Yt.href)).port&&""===jt.port||Wt.port===jt.port;return Wt.hostname===jt.hostname&&zt&&Wt.protocol===jt.protocol?"":"anonymous"};var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("url")),Yt=void 0},{url:29}],124:[function(Bt,Gt,Xt){function Ht(rn){if(rn&&rn.__esModule)return rn;var an={};if(null!=rn)for(var on in rn)Object.prototype.hasOwnProperty.call(rn,on)&&(an[on]=rn[on]);return an.default=rn,an}function Yt(rn){return rn&&rn.__esModule?rn:{default:rn}}Xt.__esModule=!0,Xt.premultiplyBlendMode=Xt.BaseTextureCache=Xt.TextureCache=Xt.mixins=Xt.pluginTarget=Xt.EventEmitter=Xt.removeItems=Xt.isMobile=void 0,Xt.uid=function(){return++Jt},Xt.hex2rgb=function(rn,an){return an=an||[],an[0]=(255&rn>>16)/255,an[1]=(255&rn>>8)/255,an[2]=(255&rn)/255,an},Xt.hex2string=function(rn){return rn=rn.toString(16),"#"+(rn="000000".substr(0,6-rn.length)+rn)},Xt.rgb2hex=function(rn){return(255*rn[0]<<16)+(255*rn[1]<<8)+(0|255*rn[2])},Xt.getResolutionOfUrl=function(rn,an){var on=jt.default.RETINA_PREFIX.exec(rn);return on?parseFloat(on[1]):void 0===an?1:an},Xt.decomposeDataUri=function(rn){var an=Wt.DATA_URI.exec(rn);if(an)return{mediaType:an[1]?an[1].toLowerCase():void 0,subType:an[2]?an[2].toLowerCase():void 0,encoding:an[3]?an[3].toLowerCase():void 0,data:an[4]}},Xt.getUrlFileExtension=function(rn){var an=Wt.URL_FILE_EXTENSION.exec(rn);if(an)return an[1].toLowerCase()},Xt.getSvgSize=function(rn){var an=Wt.SVG_SIZE.exec(rn),on={};return an&&(on[an[1]]=Math.round(parseFloat(an[3])),on[an[5]]=Math.round(parseFloat(an[7]))),on},Xt.skipHello=function(){$t=!0},Xt.sayHello=function(rn){if(!$t){if(-1<navigator.userAgent.toLowerCase().indexOf("chrome")){var an=["\n %c %c %c PixiJS "+Wt.VERSION+" - \u2730 "+rn+" \u2730  %c  %c  http://www.pixijs.com/  %c %c \u2665%c\u2665%c\u2665 \n\n","background: #ff66a5; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff66a5; background: #030307; padding:5px 0;","background: #ff66a5; padding:5px 0;","background: #ffc3dc; padding:5px 0;","background: #ff66a5; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;","color: #ff2424; background: #fff; padding:5px 0;"];window.console.log.apply(console,an)}else window.console&&window.console.log("PixiJS "+Wt.VERSION+" - "+rn+" - http://www.pixijs.com/");$t=!0}},Xt.isWebGLSupported=function(){var rn={stencil:!0,failIfMajorPerformanceCaveat:!0};try{if(!window.WebGLRenderingContext)return!1;var an=document.createElement("canvas"),on=an.getContext("webgl",rn)||an.getContext("experimental-webgl",rn),sn=on&&on.getContextAttributes().stencil;if(on){var dn=on.getExtension("WEBGL_lose_context");dn&&dn.loseContext()}return on=null,sn}catch(ln){return!1}},Xt.sign=function(rn){return 0===rn?0:0>rn?-1:1},Xt.destroyTextureCache=function(){for(var rn in en)en[rn].destroy();for(rn in tn)tn[rn].destroy()},Xt.clearTextureCache=function(){for(var rn in en)delete en[rn];for(rn in tn)delete tn[rn]},Xt.correctBlendMode=function(rn,an){return nn[an?1:0][rn]},Xt.premultiplyTint=function(rn,an){if(1===an)return(255*an<<24)+rn;if(0===an)return 0;var on=255&rn>>16,sn=255&rn>>8,dn=255&rn;return on=0|on*an+.5,sn=0|sn*an+.5,dn=0|dn*an+.5,(255*an<<24)+(on<<16)+(sn<<8)+dn},Xt.premultiplyRgba=function(rn,an,on,sn){return on=on||new Float32Array(4),sn||void 0===sn?(on[0]=rn[0]*an,on[1]=rn[1]*an,on[2]=rn[2]*an):(on[0]=rn[0],on[1]=rn[1],on[2]=rn[2]),on[3]=an,on},Xt.premultiplyTintToRgba=function(rn,an,on,sn){return on=on||new Float32Array(4),on[0]=(255&rn>>16)/255,on[1]=(255&rn>>8)/255,on[2]=(255&rn)/255,(sn||void 0===sn)&&(on[0]*=an,on[1]*=an,on[2]*=an),on[3]=an,on};var Wt=Bt("../const"),jt=Yt(Bt("../settings")),zt=Yt(Bt("eventemitter3")),Vt=Yt(Bt("./pluginTarget")),qt=Ht(Bt("./mixin")),Kt=Ht(Bt("ismobilejs")),Qt=Yt(Bt("remove-array-items")),Zt=Yt(Bt("./mapPremultipliedBlendModes")),Jt=0,$t=!1;Xt.isMobile=Kt,Xt.removeItems=Qt.default,Xt.EventEmitter=zt.default,Xt.pluginTarget=Vt.default,Xt.mixins=qt;var en=Xt.TextureCache=Object.create(null),tn=Xt.BaseTextureCache=Object.create(null),nn=Xt.premultiplyBlendMode=(0,Zt.default)()},{"../const":46,"../settings":101,"./mapPremultipliedBlendModes":125,"./mixin":127,"./pluginTarget":128,eventemitter3:3,ismobilejs:4,"remove-array-items":31}],125:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(){for(var Yt=[],Wt=[],jt=0;32>jt;jt++)Yt[jt]=jt,Wt[jt]=jt;Yt[Ht.BLEND_MODES.NORMAL_NPM]=Ht.BLEND_MODES.NORMAL,Yt[Ht.BLEND_MODES.ADD_NPM]=Ht.BLEND_MODES.ADD,Yt[Ht.BLEND_MODES.SCREEN_NPM]=Ht.BLEND_MODES.SCREEN,Wt[Ht.BLEND_MODES.NORMAL]=Ht.BLEND_MODES.NORMAL_NPM,Wt[Ht.BLEND_MODES.ADD]=Ht.BLEND_MODES.ADD_NPM,Wt[Ht.BLEND_MODES.SCREEN]=Ht.BLEND_MODES.SCREEN_NPM;var zt=[];return zt.push(Wt),zt.push(Yt),zt};var Ht=Bt("../const")},{"../const":46}],126:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Yt){return Ht.default.tablet||Ht.default.phone?4:Yt};var Ht=function(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}(Bt("ismobilejs"))},{ismobilejs:4}],127:[function(Bt,Gt,Xt){function Ht(Wt,jt){if(Wt&&jt)for(var zt=Object.keys(jt),Vt=0,qt;Vt<zt.length;++Vt)qt=zt[Vt],Object.defineProperty(Wt,qt,Object.getOwnPropertyDescriptor(jt,qt))}Xt.__esModule=!0,Xt.mixin=Ht,Xt.delayMixin=function(Wt,jt){Yt.push(Wt,jt)},Xt.performMixins=function(){for(var Wt=0;Wt<Yt.length;Wt+=2)Ht(Yt[Wt],Yt[Wt+1]);Yt.length=0};var Yt=[]},{}],128:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default={mixin:function(Ht){!function(Yt){Yt.__plugins={},Yt.registerPlugin=function(Wt,jt){Yt.__plugins[Wt]=jt},Yt.prototype.initPlugins=function(){for(var Wt in this.plugins=this.plugins||{},Yt.__plugins)this.plugins[Wt]=new Yt.__plugins[Wt](this)},Yt.prototype.destroyPlugins=function(){for(var Wt in this.plugins)this.plugins[Wt].destroy(),this.plugins[Wt]=null;this.plugins=null}}(Ht)}}},{}],129:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Ht){var Yt=Ht.width,Wt=Ht.height,jt=Ht.getContext("2d"),zt=jt.getImageData(0,0,Yt,Wt).data,Vt=zt.length,qt={top:null,left:null,right:null,bottom:null},Kt,Qt,Zt;for(Kt=0;Kt<Vt;Kt+=4)0!==zt[Kt+3]&&(Qt=Kt/4%Yt,Zt=~~(Kt/4/Yt),null===qt.top&&(qt.top=Zt),null===qt.left?qt.left=Qt:Qt<qt.left&&(qt.left=Qt),null===qt.right?qt.right=Qt+1:qt.right<Qt&&(qt.right=Qt+1),null===qt.bottom?qt.bottom=Zt:qt.bottom<Zt&&(qt.bottom=Zt));return Yt=qt.right-qt.left,{height:Wt=qt.bottom-qt.top+1,width:Yt,data:jt.getImageData(qt.left,qt.top,Yt,Wt)}}},{}],130:[function(Bt,Gt,Xt){function Ht(Yt){var Wt=new Error().stack;void 0===Wt?console.warn("Deprecation Warning: ",Yt):(Wt=Wt.split("\n").splice(3).join("\n"),console.groupCollapsed?(console.groupCollapsed("%cDeprecation Warning: %c%s","color:#614108;background:#fffbe6","font-weight:normal;color:#614108;background:#fffbe6",Yt),console.warn(Wt),console.groupEnd()):(console.warn("Deprecation Warning: ",Yt),console.warn(Wt)))}Xt.__esModule=!0,Xt.default=function(Yt){var Wt=Yt.mesh,jt=Yt.particles,zt=Yt.extras,Vt=Yt.filters,qt=Yt.prepare,Kt=Yt.loaders,Qt=Yt.interaction;Object.defineProperties(Yt,{SpriteBatch:{get:function(){throw new ReferenceError("SpriteBatch does not exist any more, please use the new ParticleContainer instead.")}},AssetLoader:{get:function(){throw new ReferenceError("The loader system was overhauled in PixiJS v3, please see the new PIXI.loaders.Loader class.")}},Stage:{get:function(){return Ht("You do not need to use a PIXI Stage any more, you can simply render any container."),Yt.Container}},DisplayObjectContainer:{get:function(){return Ht("DisplayObjectContainer has been shortened to Container, please use Container from now on."),Yt.Container}},Strip:{get:function(){return Ht("The Strip class has been renamed to Mesh and moved to mesh.Mesh, please use mesh.Mesh from now on."),Wt.Mesh}},Rope:{get:function(){return Ht("The Rope class has been moved to mesh.Rope, please use mesh.Rope from now on."),Wt.Rope}},ParticleContainer:{get:function(){return Ht("The ParticleContainer class has been moved to particles.ParticleContainer, please use particles.ParticleContainer from now on."),jt.ParticleContainer}},MovieClip:{get:function(){return Ht("The MovieClip class has been moved to extras.AnimatedSprite, please use extras.AnimatedSprite."),zt.AnimatedSprite}},TilingSprite:{get:function(){return Ht("The TilingSprite class has been moved to extras.TilingSprite, please use extras.TilingSprite from now on."),zt.TilingSprite}},BitmapText:{get:function(){return Ht("The BitmapText class has been moved to extras.BitmapText, please use extras.BitmapText from now on."),zt.BitmapText}},blendModes:{get:function(){return Ht("The blendModes has been moved to BLEND_MODES, please use BLEND_MODES from now on."),Yt.BLEND_MODES}},scaleModes:{get:function(){return Ht("The scaleModes has been moved to SCALE_MODES, please use SCALE_MODES from now on."),Yt.SCALE_MODES}},BaseTextureCache:{get:function(){return Ht("The BaseTextureCache class has been moved to utils.BaseTextureCache, please use utils.BaseTextureCache from now on."),Yt.utils.BaseTextureCache}},TextureCache:{get:function(){return Ht("The TextureCache class has been moved to utils.TextureCache, please use utils.TextureCache from now on."),Yt.utils.TextureCache}},math:{get:function(){return Ht("The math namespace is deprecated, please access members already accessible on PIXI."),Yt}},AbstractFilter:{get:function(){return Ht("AstractFilter has been renamed to Filter, please use PIXI.Filter"),Yt.Filter}},TransformManual:{get:function(){return Ht("TransformManual has been renamed to TransformBase, please update your pixi-spine"),Yt.TransformBase}},TARGET_FPMS:{get:function(){return Ht("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),Yt.settings.TARGET_FPMS},set:function(rn){Ht("PIXI.TARGET_FPMS has been deprecated, please use PIXI.settings.TARGET_FPMS"),Yt.settings.TARGET_FPMS=rn}},FILTER_RESOLUTION:{get:function(){return Ht("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),Yt.settings.FILTER_RESOLUTION},set:function(rn){Ht("PIXI.FILTER_RESOLUTION has been deprecated, please use PIXI.settings.FILTER_RESOLUTION"),Yt.settings.FILTER_RESOLUTION=rn}},RESOLUTION:{get:function(){return Ht("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),Yt.settings.RESOLUTION},set:function(rn){Ht("PIXI.RESOLUTION has been deprecated, please use PIXI.settings.RESOLUTION"),Yt.settings.RESOLUTION=rn}},MIPMAP_TEXTURES:{get:function(){return Ht("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),Yt.settings.MIPMAP_TEXTURES},set:function(rn){Ht("PIXI.MIPMAP_TEXTURES has been deprecated, please use PIXI.settings.MIPMAP_TEXTURES"),Yt.settings.MIPMAP_TEXTURES=rn}},SPRITE_BATCH_SIZE:{get:function(){return Ht("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),Yt.settings.SPRITE_BATCH_SIZE},set:function(rn){Ht("PIXI.SPRITE_BATCH_SIZE has been deprecated, please use PIXI.settings.SPRITE_BATCH_SIZE"),Yt.settings.SPRITE_BATCH_SIZE=rn}},SPRITE_MAX_TEXTURES:{get:function(){return Ht("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),Yt.settings.SPRITE_MAX_TEXTURES},set:function(rn){Ht("PIXI.SPRITE_MAX_TEXTURES has been deprecated, please use PIXI.settings.SPRITE_MAX_TEXTURES"),Yt.settings.SPRITE_MAX_TEXTURES=rn}},RETINA_PREFIX:{get:function(){return Ht("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),Yt.settings.RETINA_PREFIX},set:function(rn){Ht("PIXI.RETINA_PREFIX has been deprecated, please use PIXI.settings.RETINA_PREFIX"),Yt.settings.RETINA_PREFIX=rn}},DEFAULT_RENDER_OPTIONS:{get:function(){return Ht("PIXI.DEFAULT_RENDER_OPTIONS has been deprecated, please use PIXI.settings.DEFAULT_RENDER_OPTIONS"),Yt.settings.RENDER_OPTIONS}}});for(var Zt=[{parent:"TRANSFORM_MODE",target:"TRANSFORM_MODE"},{parent:"GC_MODES",target:"GC_MODE"},{parent:"WRAP_MODES",target:"WRAP_MODE"},{parent:"SCALE_MODES",target:"SCALE_MODE"},{parent:"PRECISION",target:"PRECISION_FRAGMENT"}],Jt=function(rn){var an=Zt[rn];Object.defineProperty(Yt[an.parent],"DEFAULT",{get:function(){return Ht("PIXI."+an.parent+".DEFAULT has been deprecated, please use PIXI.settings."+an.target),Yt.settings[an.target]},set:function(on){Ht("PIXI."+an.parent+".DEFAULT has been deprecated, please use PIXI.settings."+an.target),Yt.settings[an.target]=on}})},$t=0;$t<Zt.length;$t++)Jt($t);Object.defineProperties(Yt.settings,{PRECISION:{get:function(){return Ht("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),Yt.settings.PRECISION_FRAGMENT},set:function(rn){Ht("PIXI.settings.PRECISION has been deprecated, please use PIXI.settings.PRECISION_FRAGMENT"),Yt.settings.PRECISION_FRAGMENT=rn}}}),zt.AnimatedSprite&&Object.defineProperties(zt,{MovieClip:{get:function(){return Ht("The MovieClip class has been renamed to AnimatedSprite, please use AnimatedSprite from now on."),zt.AnimatedSprite}}}),Yt.DisplayObject.prototype.generateTexture=function(rn,an,on){return Ht("generateTexture has moved to the renderer, please use renderer.generateTexture(displayObject)"),rn.generateTexture(this,an,on)},Yt.Graphics.prototype.generateTexture=function(rn,an){return Ht("graphics generate texture has moved to the renderer. Or to render a graphics to a texture using canvas please use generateCanvasTexture"),this.generateCanvasTexture(rn,an)},Yt.RenderTexture.prototype.render=function(rn,an,on,sn){this.legacyRenderer.render(rn,this,on,an,!sn),Ht("RenderTexture.render is now deprecated, please use renderer.render(displayObject, renderTexture)")},Yt.RenderTexture.prototype.getImage=function(rn){return Ht("RenderTexture.getImage is now deprecated, please use renderer.extract.image(target)"),this.legacyRenderer.extract.image(rn)},Yt.RenderTexture.prototype.getBase64=function(rn){return Ht("RenderTexture.getBase64 is now deprecated, please use renderer.extract.base64(target)"),this.legacyRenderer.extract.base64(rn)},Yt.RenderTexture.prototype.getCanvas=function(rn){return Ht("RenderTexture.getCanvas is now deprecated, please use renderer.extract.canvas(target)"),this.legacyRenderer.extract.canvas(rn)},Yt.RenderTexture.prototype.getPixels=function(rn){return Ht("RenderTexture.getPixels is now deprecated, please use renderer.extract.pixels(target)"),this.legacyRenderer.pixels(rn)},Yt.Sprite.prototype.setTexture=function(rn){this.texture=rn,Ht("setTexture is now deprecated, please use the texture property, e.g : sprite.texture = texture;")},zt.BitmapText&&(zt.BitmapText.prototype.setText=function(rn){this.text=rn,Ht("setText is now deprecated, please use the text property, e.g : myBitmapText.text = 'my text';")}),Yt.Text.prototype.setText=function(rn){this.text=rn,Ht("setText is now deprecated, please use the text property, e.g : myText.text = 'my text';")},Yt.Text.calculateFontProperties=function(rn){return Ht("Text.calculateFontProperties is now deprecated, please use the TextMetrics.measureFont"),Yt.TextMetrics.measureFont(rn)},Object.defineProperties(Yt.Text,{fontPropertiesCache:{get:function(){return Ht("Text.fontPropertiesCache is deprecated"),Yt.TextMetrics._fonts}},fontPropertiesCanvas:{get:function(){return Ht("Text.fontPropertiesCanvas is deprecated"),Yt.TextMetrics._canvas}},fontPropertiesContext:{get:function(){return Ht("Text.fontPropertiesContext is deprecated"),Yt.TextMetrics._context}}}),Yt.Text.prototype.setStyle=function(rn){this.style=rn,Ht("setStyle is now deprecated, please use the style property, e.g : myText.style = style;")},Yt.Text.prototype.determineFontProperties=function(rn){return Ht("determineFontProperties is now deprecated, please use TextMetrics.measureFont method"),Yt.TextMetrics.measureFont(rn)},Yt.Text.getFontStyle=function(rn){return Ht("getFontStyle is now deprecated, please use TextStyle.toFontString() instead"),(rn=rn||{})instanceof Yt.TextStyle||(rn=new Yt.TextStyle(rn)),rn.toFontString()},Object.defineProperties(Yt.TextStyle.prototype,{font:{get:function(){Ht("text style property 'font' is now deprecated, please use the 'fontFamily', 'fontSize', 'fontStyle', 'fontVariant' and 'fontWeight' properties from now on");var rn="number"==typeof this._fontSize?this._fontSize+"px":this._fontSize;return this._fontStyle+" "+this._fontVariant+" "+this._fontWeight+" "+rn+" "+this._fontFamily},set:function(rn){Ht("text style property 'font' is now deprecated, please use the 'fontFamily','fontSize',fontStyle','fontVariant' and 'fontWeight' properties from now on"),this._fontStyle=1<rn.indexOf("italic")?"italic":-1<rn.indexOf("oblique")?"oblique":"normal",this._fontVariant=-1<rn.indexOf("small-caps")?"small-caps":"normal";var an=rn.split(" "),on=-1;this._fontSize=26;for(var sn=0;sn<an.length;++sn)if(an[sn].match(/(px|pt|em|%)/)){on=sn,this._fontSize=an[sn];break}this._fontWeight="normal";for(var dn=0;dn<on;++dn)if(an[dn].match(/(bold|bolder|lighter|100|200|300|400|500|600|700|800|900)/)){this._fontWeight=an[dn];break}if(-1<on&&on<an.length-1){this._fontFamily="";for(var ln=on+1;ln<an.length;++ln)this._fontFamily+=an[ln]+" ";this._fontFamily=this._fontFamily.slice(0,-1)}else this._fontFamily="Arial";this.styleID++}}}),Yt.Texture.prototype.setFrame=function(rn){this.frame=rn,Ht("setFrame is now deprecated, please use the frame property, e.g: myTexture.frame = frame;")},Yt.Texture.addTextureToCache=function(rn,an){Yt.Texture.addToCache(rn,an),Ht("Texture.addTextureToCache is deprecated, please use Texture.addToCache from now on.")},Yt.Texture.removeTextureFromCache=function(rn){return Ht("Texture.removeTextureFromCache is deprecated, please use Texture.removeFromCache from now on. Be aware that Texture.removeFromCache does not automatically its BaseTexture from the BaseTextureCache. For that, use BaseTexture.removeFromCache"),Yt.BaseTexture.removeFromCache(rn),Yt.Texture.removeFromCache(rn)},Object.defineProperties(Vt,{AbstractFilter:{get:function(){return Ht("AstractFilter has been renamed to Filter, please use PIXI.Filter"),Yt.AbstractFilter}},SpriteMaskFilter:{get:function(){return Ht("filters.SpriteMaskFilter is an undocumented alias, please use SpriteMaskFilter from now on."),Yt.SpriteMaskFilter}}}),Yt.utils.uuid=function(){return Ht("utils.uuid() is deprecated, please use utils.uid() from now on."),Yt.utils.uid()},Yt.utils.canUseNewCanvasBlendModes=function(){return Ht("utils.canUseNewCanvasBlendModes() is deprecated, please use CanvasTinter.canUseMultiply from now on"),Yt.CanvasTinter.canUseMultiply};var en=!0;if(Object.defineProperty(Yt.utils,"_saidHello",{set:function(rn){rn&&(Ht("PIXI.utils._saidHello is deprecated, please use PIXI.utils.skipHello()"),this.skipHello()),en=rn},get:function(){return en}}),qt.BasePrepare&&(qt.BasePrepare.prototype.register=function(rn,an){return Ht("renderer.plugins.prepare.register is now deprecated, please use renderer.plugins.prepare.registerFindHook & renderer.plugins.prepare.registerUploadHook"),rn&&this.registerFindHook(rn),an&&this.registerUploadHook(an),this}),qt.canvas&&Object.defineProperty(qt.canvas,"UPLOADS_PER_FRAME",{set:function(){Ht("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return Ht("PIXI.CanvasPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),qt.webgl&&Object.defineProperty(qt.webgl,"UPLOADS_PER_FRAME",{set:function(){Ht("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please set renderer.plugins.prepare.limiter.maxItemsPerFrame on your renderer")},get:function(){return Ht("PIXI.WebGLPrepare.UPLOADS_PER_FRAME has been removed. Please use renderer.plugins.prepare.limiter"),NaN}}),Kt.Loader){var tn=Kt.Resource,nn=Kt.Loader;Object.defineProperties(tn.prototype,{isJson:{get:function(){return Ht("The isJson property is deprecated, please use `resource.type === Resource.TYPE.JSON`."),this.type===tn.TYPE.JSON}},isXml:{get:function(){return Ht("The isXml property is deprecated, please use `resource.type === Resource.TYPE.XML`."),this.type===tn.TYPE.XML}},isImage:{get:function(){return Ht("The isImage property is deprecated, please use `resource.type === Resource.TYPE.IMAGE`."),this.type===tn.TYPE.IMAGE}},isAudio:{get:function(){return Ht("The isAudio property is deprecated, please use `resource.type === Resource.TYPE.AUDIO`."),this.type===tn.TYPE.AUDIO}},isVideo:{get:function(){return Ht("The isVideo property is deprecated, please use `resource.type === Resource.TYPE.VIDEO`."),this.type===tn.TYPE.VIDEO}}}),Object.defineProperties(nn.prototype,{before:{get:function(){return Ht("The before() method is deprecated, please use pre()."),this.pre}},after:{get:function(){return Ht("The after() method is deprecated, please use use()."),this.use}}})}Qt.interactiveTarget&&Object.defineProperty(Qt.interactiveTarget,"defaultCursor",{set:function(rn){Ht("Property defaultCursor has been replaced with 'cursor'. "),this.cursor=rn},get:function(){return Ht("Property defaultCursor has been replaced with 'cursor'. "),this.cursor}}),Qt.InteractionManager&&(Object.defineProperty(Qt.InteractionManager,"defaultCursorStyle",{set:function(rn){Ht("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default=rn},get:function(){return Ht("Property defaultCursorStyle has been replaced with 'cursorStyles.default'. "),this.cursorStyles.default}}),Object.defineProperty(Qt.InteractionManager,"currentCursorStyle",{set:function(rn){Ht("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode=rn},get:function(){return Ht("Property currentCursorStyle has been removed.See the currentCursorMode property, which works differently."),this.currentCursorMode}}))}},{}],131:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Yt=new Ht.Rectangle,Wt=function(){function jt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=zt,zt.extract=this}return jt.prototype.image=function(zt){var Vt=new Image;return Vt.src=this.base64(zt),Vt},jt.prototype.base64=function(zt){return this.canvas(zt).toDataURL()},jt.prototype.canvas=function(zt){var Vt=this.renderer,qt,Kt,Qt,Zt;zt&&(Zt=zt instanceof Ht.RenderTexture?zt:Vt.generateTexture(zt)),Zt?(qt=Zt.baseTexture._canvasRenderTarget.context,Kt=Zt.baseTexture._canvasRenderTarget.resolution,Qt=Zt.frame):(qt=Vt.rootContext,(Qt=Yt).width=this.renderer.width,Qt.height=this.renderer.height);var Jt=Qt.width*Kt,$t=Qt.height*Kt,en=new Ht.CanvasRenderTarget(Jt,$t),tn=qt.getImageData(Qt.x*Kt,Qt.y*Kt,Jt,$t);return en.context.putImageData(tn,0,0),en.canvas},jt.prototype.pixels=function(zt){var Vt=this.renderer,qt,Kt,Qt,Zt;return zt&&(Zt=zt instanceof Ht.RenderTexture?zt:Vt.generateTexture(zt)),Zt?(qt=Zt.baseTexture._canvasRenderTarget.context,Kt=Zt.baseTexture._canvasRenderTarget.resolution,Qt=Zt.frame):(qt=Vt.rootContext,(Qt=Yt).width=Vt.width,Qt.height=Vt.height),qt.getImageData(0,0,Qt.width*Kt,Qt.height*Kt).data},jt.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},jt}();Xt.default=Wt,Ht.CanvasRenderer.registerPlugin("extract",Wt)},{"../../core":65}],132:[function(Bt,Gt,Xt){function Ht(jt){return jt&&jt.__esModule?jt:{default:jt}}Xt.__esModule=!0;var Yt=Bt("./webgl/WebGLExtract");Object.defineProperty(Xt,"webgl",{enumerable:!0,get:function(){return Ht(Yt).default}});var Wt=Bt("./canvas/CanvasExtract");Object.defineProperty(Xt,"canvas",{enumerable:!0,get:function(){return Ht(Wt).default}})},{"./canvas/CanvasExtract":131,"./webgl/WebGLExtract":133}],133:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Yt=new Ht.Rectangle,Wt=function(){function jt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=zt,zt.extract=this}return jt.prototype.image=function(zt){var Vt=new Image;return Vt.src=this.base64(zt),Vt},jt.prototype.base64=function(zt){return this.canvas(zt).toDataURL()},jt.prototype.canvas=function(zt){var Vt=this.renderer,qt,Kt,Qt,Zt=!1,Jt;zt&&(Jt=zt instanceof Ht.RenderTexture?zt:this.renderer.generateTexture(zt)),Jt?(Kt=(qt=Jt.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,Qt=Jt.frame,Zt=!1):(Kt=(qt=this.renderer.rootRenderTarget).resolution,Zt=!0,(Qt=Yt).width=qt.size.width,Qt.height=qt.size.height);var $t=Qt.width*Kt,en=Qt.height*Kt,tn=new Ht.CanvasRenderTarget($t,en);if(qt){Vt.bindRenderTarget(qt);var nn=new Uint8Array(4*$t*en),rn=Vt.gl;rn.readPixels(Qt.x*Kt,Qt.y*Kt,$t,en,rn.RGBA,rn.UNSIGNED_BYTE,nn);var an=tn.context.getImageData(0,0,$t,en);an.data.set(nn),tn.context.putImageData(an,0,0),Zt&&(tn.context.scale(1,-1),tn.context.drawImage(tn.canvas,0,-en))}return tn.canvas},jt.prototype.pixels=function(zt){var Vt=this.renderer,qt,Kt,Qt,Zt;zt&&(Zt=zt instanceof Ht.RenderTexture?zt:this.renderer.generateTexture(zt)),Zt?(Kt=(qt=Zt.baseTexture._glRenderTargets[this.renderer.CONTEXT_UID]).resolution,Qt=Zt.frame):(Kt=(qt=this.renderer.rootRenderTarget).resolution,(Qt=Yt).width=qt.size.width,Qt.height=qt.size.height);var Jt=Qt.width*Kt,$t=Qt.height*Kt,en=new Uint8Array(4*Jt*$t);if(qt){Vt.bindRenderTarget(qt);var tn=Vt.gl;tn.readPixels(Qt.x*Kt,Qt.y*Kt,Jt,$t,tn.RGBA,tn.UNSIGNED_BYTE,en)}return en},jt.prototype.destroy=function(){this.renderer.extract=null,this.renderer=null},jt}();Xt.default=Wt,Ht.WebGLRenderer.registerPlugin("extract",Wt)},{"../../core":65}],134:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../core")),Wt=function(jt){function zt(Vt,qt){!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=function(Qt,Zt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&("object"==typeof Zt||"function"==typeof Zt)?Zt:Qt}(this,jt.call(this,Vt[0]instanceof Yt.Texture?Vt[0]:Vt[0].texture));return Kt._textures=null,Kt._durations=null,Kt.textures=Vt,Kt._autoUpdate=!1!==qt,Kt.animationSpeed=1,Kt.loop=!0,Kt.onComplete=null,Kt.onFrameChange=null,Kt.onLoop=null,Kt._currentTime=0,Kt.playing=!1,Kt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.stop=function(){this.playing&&(this.playing=!1,this._autoUpdate&&Yt.ticker.shared.remove(this.update,this))},zt.prototype.play=function(){this.playing||(this.playing=!0,this._autoUpdate&&Yt.ticker.shared.add(this.update,this,Yt.UPDATE_PRIORITY.HIGH))},zt.prototype.gotoAndStop=function(Vt){this.stop();var qt=this.currentFrame;this._currentTime=Vt,qt!==this.currentFrame&&this.updateTexture()},zt.prototype.gotoAndPlay=function(Vt){var qt=this.currentFrame;this._currentTime=Vt,qt!==this.currentFrame&&this.updateTexture(),this.play()},zt.prototype.update=function(Vt){var qt=this.animationSpeed*Vt,Kt=this.currentFrame;if(null!==this._durations){var Qt=this._currentTime%1*this._durations[this.currentFrame];for(Qt+=1e3*(qt/60);0>Qt;)this._currentTime--,Qt+=this._durations[this.currentFrame];var Zt=Math.sign(this.animationSpeed*Vt);for(this._currentTime=Math.floor(this._currentTime);Qt>=this._durations[this.currentFrame];)Qt-=this._durations[this.currentFrame]*Zt,this._currentTime+=Zt;this._currentTime+=Qt/this._durations[this.currentFrame]}else this._currentTime+=qt;0>this._currentTime&&!this.loop?(this.gotoAndStop(0),this.onComplete&&this.onComplete()):this._currentTime>=this._textures.length&&!this.loop?(this.gotoAndStop(this._textures.length-1),this.onComplete&&this.onComplete()):Kt!==this.currentFrame&&(this.loop&&this.onLoop&&(0<this.animationSpeed&&this.currentFrame<Kt?this.onLoop():0>this.animationSpeed&&this.currentFrame>Kt&&this.onLoop()),this.updateTexture())},zt.prototype.updateTexture=function(){this._texture=this._textures[this.currentFrame],this._textureID=-1,this.cachedTint=16777215,this.onFrameChange&&this.onFrameChange(this.currentFrame)},zt.prototype.destroy=function(Vt){this.stop(),jt.prototype.destroy.call(this,Vt)},zt.fromFrames=function(Vt){for(var qt=[],Kt=0;Kt<Vt.length;++Kt)qt.push(Yt.Texture.fromFrame(Vt[Kt]));return new zt(qt)},zt.fromImages=function(Vt){for(var qt=[],Kt=0;Kt<Vt.length;++Kt)qt.push(Yt.Texture.fromImage(Vt[Kt]));return new zt(qt)},Ht(zt,[{key:"totalFrames",get:function(){return this._textures.length}},{key:"textures",get:function(){return this._textures},set:function(Vt){if(Vt[0]instanceof Yt.Texture)this._textures=Vt,this._durations=null;else{this._textures=[],this._durations=[];for(var qt=0;qt<Vt.length;qt++)this._textures.push(Vt[qt].texture),this._durations.push(Vt[qt].time)}this.gotoAndStop(0),this.updateTexture()}},{key:"currentFrame",get:function(){var Vt=Math.floor(this._currentTime)%this._textures.length;return 0>Vt&&(Vt+=this._textures.length),Vt}}]),zt}(Yt.Sprite);Xt.default=Wt},{"../core":65}],135:[function(Bt,Gt,Xt){function Ht(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Yt=function(){function qt(Kt,Qt){for(var Zt=0,Jt;Zt<Qt.length;Zt++)Jt=Qt[Zt],Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Kt,Jt.key,Jt)}return function(Kt,Qt,Zt){return Qt&&qt(Kt.prototype,Qt),Zt&&qt(Kt,Zt),Kt}}(),Wt=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Qt in qt)Object.prototype.hasOwnProperty.call(qt,Qt)&&(Kt[Qt]=qt[Qt]);return Kt.default=qt,Kt}(Bt("../core")),jt=Ht(Bt("../core/math/ObservablePoint")),zt=Ht(Bt("../core/settings")),Vt=function(qt){function Kt(Qt){var Zt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:{};!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Kt);var Jt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,qt.call(this));return Jt._textWidth=0,Jt._textHeight=0,Jt._glyphs=[],Jt._font={tint:void 0===Zt.tint?16777215:Zt.tint,align:Zt.align||"left",name:null,size:0},Jt.font=Zt.font,Jt._text=Qt,Jt._maxWidth=0,Jt._maxLineHeight=0,Jt._anchor=new jt.default(function(){Jt.dirty=!0},Jt,0,0),Jt.dirty=!1,Jt.updateText(),Jt}return function(Qt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Qt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Zt):Qt.__proto__=Zt)}(Kt,qt),Kt.prototype.updateText=function(){for(var Qt=Kt.fonts[this._font.name],Zt=this._font.size/Qt.size,Jt=new Wt.Point,$t=[],en=[],tn=null,nn=0,rn=0,an=0,on=-1,sn=0,dn=0,ln=0,un=0,pn;un<this.text.length;un++)if(pn=this.text.charCodeAt(un),/(\s)/.test(this.text.charAt(un))&&(on=un,sn=nn),/(?:\r\n|\r|\n)/.test(this.text.charAt(un)))en.push(nn),rn=Math.max(rn,nn),an++,Jt.x=0,Jt.y+=Qt.lineHeight,tn=null;else if(-1!==on&&0<this._maxWidth&&Jt.x*Zt>this._maxWidth)Wt.utils.removeItems($t,on-dn,un-on),un=on,on=-1,++dn,en.push(sn),rn=Math.max(rn,sn),an++,Jt.x=0,Jt.y+=Qt.lineHeight,tn=null;else{var cn=Qt.chars[pn];cn&&(tn&&cn.kerning[tn]&&(Jt.x+=cn.kerning[tn]),$t.push({texture:cn.texture,line:an,charCode:pn,position:new Wt.Point(Jt.x+cn.xOffset,Jt.y+cn.yOffset)}),nn=Jt.x+(cn.texture.width+cn.xOffset),Jt.x+=cn.xAdvance,ln=Math.max(ln,cn.yOffset+cn.texture.height),tn=pn)}en.push(nn),rn=Math.max(rn,nn);for(var hn=[],fn=0,gn;fn<=an;fn++)gn=0,"right"===this._font.align?gn=rn-en[fn]:"center"===this._font.align&&(gn=(rn-en[fn])/2),hn.push(gn);for(var mn=$t.length,yn=this.tint,_n=0,bn;_n<mn;_n++)bn=this._glyphs[_n],bn?bn.texture=$t[_n].texture:(bn=new Wt.Sprite($t[_n].texture),this._glyphs.push(bn)),bn.position.x=($t[_n].position.x+hn[$t[_n].line])*Zt,bn.position.y=$t[_n].position.y*Zt,bn.scale.x=bn.scale.y=Zt,bn.tint=yn,bn.parent||this.addChild(bn);for(var xn=mn;xn<this._glyphs.length;++xn)this.removeChild(this._glyphs[xn]);if(this._textWidth=rn*Zt,this._textHeight=(Jt.y+Qt.lineHeight)*Zt,0!==this.anchor.x||0!==this.anchor.y)for(var vn=0;vn<mn;vn++)this._glyphs[vn].x-=this._textWidth*this.anchor.x,this._glyphs[vn].y-=this._textHeight*this.anchor.y;this._maxLineHeight=ln*Zt},Kt.prototype.updateTransform=function(){this.validate(),this.containerUpdateTransform()},Kt.prototype.getLocalBounds=function(){return this.validate(),qt.prototype.getLocalBounds.call(this)},Kt.prototype.validate=function(){this.dirty&&(this.updateText(),this.dirty=!1)},Kt.registerFont=function(Qt,Zt){var Jt={},$t=Qt.getElementsByTagName("info")[0],en=Qt.getElementsByTagName("common")[0],tn=Zt.baseTexture.resolution||zt.default.RESOLUTION;Jt.font=$t.getAttribute("face"),Jt.size=parseInt($t.getAttribute("size"),10),Jt.lineHeight=parseInt(en.getAttribute("lineHeight"),10)/tn,Jt.chars={};for(var nn=Qt.getElementsByTagName("char"),rn=0;rn<nn.length;rn++){var an=nn[rn],on=parseInt(an.getAttribute("id"),10),sn=new Wt.Rectangle(parseInt(an.getAttribute("x"),10)/tn+Zt.frame.x/tn,parseInt(an.getAttribute("y"),10)/tn+Zt.frame.y/tn,parseInt(an.getAttribute("width"),10)/tn,parseInt(an.getAttribute("height"),10)/tn);Jt.chars[on]={xOffset:parseInt(an.getAttribute("xoffset"),10)/tn,yOffset:parseInt(an.getAttribute("yoffset"),10)/tn,xAdvance:parseInt(an.getAttribute("xadvance"),10)/tn,kerning:{},texture:new Wt.Texture(Zt.baseTexture,sn)}}for(var dn=Qt.getElementsByTagName("kerning"),ln=0;ln<dn.length;ln++){var un=dn[ln],pn=parseInt(un.getAttribute("first"),10)/tn,cn=parseInt(un.getAttribute("second"),10)/tn,hn=parseInt(un.getAttribute("amount"),10)/tn;Jt.chars[cn]&&(Jt.chars[cn].kerning[pn]=hn)}return Kt.fonts[Jt.font]=Jt,Jt},Yt(Kt,[{key:"tint",get:function(){return this._font.tint},set:function(Qt){this._font.tint="number"==typeof Qt&&0<=Qt?Qt:16777215,this.dirty=!0}},{key:"align",get:function(){return this._font.align},set:function(Qt){this._font.align=Qt||"left",this.dirty=!0}},{key:"anchor",get:function(){return this._anchor},set:function(Qt){"number"==typeof Qt?this._anchor.set(Qt):this._anchor.copy(Qt)}},{key:"font",get:function(){return this._font},set:function(Qt){Qt&&("string"==typeof Qt?(Qt=Qt.split(" "),this._font.name=1===Qt.length?Qt[0]:Qt.slice(1).join(" "),this._font.size=2<=Qt.length?parseInt(Qt[0],10):Kt.fonts[this._font.name].size):(this._font.name=Qt.name,this._font.size="number"==typeof Qt.size?Qt.size:parseInt(Qt.size,10)),this.dirty=!0)}},{key:"text",get:function(){return this._text},set:function(Qt){Qt=Qt.toString()||" ",this._text!==Qt&&(this._text=Qt,this.dirty=!0)}},{key:"maxWidth",get:function(){return this._maxWidth},set:function(Qt){this._maxWidth!==Qt&&(this._maxWidth=Qt,this.dirty=!0)}},{key:"maxLineHeight",get:function(){return this.validate(),this._maxLineHeight}},{key:"textWidth",get:function(){return this.validate(),this._textWidth}},{key:"textHeight",get:function(){return this.validate(),this._textHeight}}]),Kt}(Wt.Container);Xt.default=Vt,Vt.fonts={}},{"../core":65,"../core/math/ObservablePoint":68,"../core/settings":101}],136:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function zt(Vt,qt){for(var Kt=0,Qt;Kt<qt.length;Kt++)Qt=qt[Kt],Qt.enumerable=Qt.enumerable||!1,Qt.configurable=!0,"value"in Qt&&(Qt.writable=!0),Object.defineProperty(Vt,Qt.key,Qt)}return function(Vt,qt,Kt){return qt&&zt(Vt.prototype,qt),Kt&&zt(Vt,Kt),Vt}}(),Yt=function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("../core/math/Matrix")),Wt=new Yt.default,jt=function(){function zt(Vt,qt){!function(Kt,Qt){if(!(Kt instanceof Qt))throw new TypeError("Cannot call a class as a function")}(this,zt),this._texture=Vt,this.mapCoord=new Yt.default,this.uClampFrame=new Float32Array(4),this.uClampOffset=new Float32Array(2),this._lastTextureID=-1,this.clampOffset=0,this.clampMargin=void 0===qt?.5:qt}return zt.prototype.multiplyUvs=function(Vt,qt){void 0===qt&&(qt=Vt);for(var Kt=this.mapCoord,Qt=0;Qt<Vt.length;Qt+=2){var Zt=Vt[Qt],Jt=Vt[Qt+1];qt[Qt]=Zt*Kt.a+Jt*Kt.c+Kt.tx,qt[Qt+1]=Zt*Kt.b+Jt*Kt.d+Kt.ty}return qt},zt.prototype.update=function(Vt){var qt=this._texture;if(!qt||!qt.valid)return!1;if(!Vt&&this._lastTextureID===qt._updateID)return!1;this._lastTextureID=qt._updateID;var Kt=qt._uvs;this.mapCoord.set(Kt.x1-Kt.x0,Kt.y1-Kt.y0,Kt.x3-Kt.x0,Kt.y3-Kt.y0,Kt.x0,Kt.y0);var Qt=qt.orig,Zt=qt.trim;Zt&&(Wt.set(Qt.width/Zt.width,0,0,Qt.height/Zt.height,-Zt.x/Zt.width,-Zt.y/Zt.height),this.mapCoord.append(Wt));var Jt=qt.baseTexture,$t=this.uClampFrame,en=this.clampMargin/Jt.resolution,tn=this.clampOffset;return $t[0]=(qt._frame.x+en+tn)/Jt.width,$t[1]=(qt._frame.y+en+tn)/Jt.height,$t[2]=(qt._frame.x+qt._frame.width-en+tn)/Jt.width,$t[3]=(qt._frame.y+qt._frame.height-en+tn)/Jt.height,this.uClampOffset[0]=tn/Jt.realWidth,this.uClampOffset[1]=tn/Jt.realHeight,!0},Ht(zt,[{key:"texture",get:function(){return this._texture},set:function(Vt){this._texture=Vt,this._lastTextureID=-1}}]),zt}();Xt.default=jt},{"../core/math/Matrix":67}],137:[function(Bt,Gt,Xt){function Ht(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Yt=function(){function Kt(Qt,Zt){for(var Jt=0,$t;Jt<Zt.length;Jt++)$t=Zt[Jt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qt,$t.key,$t)}return function(Qt,Zt,Jt){return Zt&&Kt(Qt.prototype,Zt),Jt&&Kt(Qt,Jt),Qt}}(),Wt=function(Kt){if(Kt&&Kt.__esModule)return Kt;var Qt={};if(null!=Kt)for(var Zt in Kt)Object.prototype.hasOwnProperty.call(Kt,Zt)&&(Qt[Zt]=Kt[Zt]);return Qt.default=Kt,Qt}(Bt("../core")),jt=Ht(Bt("../core/sprites/canvas/CanvasTinter")),zt=Ht(Bt("./TextureTransform")),Vt=new Wt.Point,qt=function(Kt){function Qt(Zt){var Jt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:100,$t=2<arguments.length&&void 0!==arguments[2]?arguments[2]:100;!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Qt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,Kt.call(this,Zt));return en.tileTransform=new Wt.TransformStatic,en._width=Jt,en._height=$t,en._canvasPattern=null,en.uvTransform=Zt.transform||new zt.default(Zt),en.pluginName="tilingSprite",en.uvRespectAnchor=!1,en}return function(Zt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Zt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,Jt):Zt.__proto__=Jt)}(Qt,Kt),Qt.prototype._onTextureUpdate=function(){this.uvTransform&&(this.uvTransform.texture=this._texture),this.cachedTint=16777215},Qt.prototype._renderWebGL=function(Zt){var Jt=this._texture;Jt&&Jt.valid&&(this.tileTransform.updateLocalTransform(),this.uvTransform.update(),Zt.setObjectRenderer(Zt.plugins[this.pluginName]),Zt.plugins[this.pluginName].render(this))},Qt.prototype._renderCanvas=function(Zt){var Jt=this._texture;if(Jt.baseTexture.hasLoaded){var $t=Zt.context,en=this.worldTransform,tn=Zt.resolution,nn=Jt.baseTexture,rn=nn.resolution,an=this.tilePosition.x/this.tileScale.x%Jt._frame.width*rn,on=this.tilePosition.y/this.tileScale.y%Jt._frame.height*rn;if(this._textureID!==this._texture._updateID||this.cachedTint!==this.tint){this._textureID=this._texture._updateID;var sn=new Wt.CanvasRenderTarget(Jt._frame.width,Jt._frame.height,rn);16777215===this.tint?sn.context.drawImage(nn.source,-Jt._frame.x*rn,-Jt._frame.y*rn):(this.tintedTexture=jt.default.getTintedTexture(this,this.tint),sn.context.drawImage(this.tintedTexture,0,0)),this.cachedTint=this.tint,this._canvasPattern=sn.context.createPattern(sn.canvas,"repeat")}$t.globalAlpha=this.worldAlpha,$t.setTransform(en.a*tn,en.b*tn,en.c*tn,en.d*tn,en.tx*tn,en.ty*tn),Zt.setBlendMode(this.blendMode),$t.fillStyle=this._canvasPattern,$t.scale(this.tileScale.x/rn,this.tileScale.y/rn);var dn=this.anchor.x*-this._width,ln=this.anchor.y*-this._height;this.uvRespectAnchor?($t.translate(an,on),$t.fillRect(-an+dn,-on+ln,this._width/this.tileScale.x*rn,this._height/this.tileScale.y*rn)):($t.translate(an+dn,on+ln),$t.fillRect(-an,-on,this._width/this.tileScale.x*rn,this._height/this.tileScale.y*rn))}},Qt.prototype._calculateBounds=function(){var Zt=this._width*-this._anchor._x,Jt=this._height*-this._anchor._y,$t=this._width*(1-this._anchor._x),en=this._height*(1-this._anchor._y);this._bounds.addFrame(this.transform,Zt,Jt,$t,en)},Qt.prototype.getLocalBounds=function(Zt){return 0===this.children.length?(this._bounds.minX=this._width*-this._anchor._x,this._bounds.minY=this._height*-this._anchor._y,this._bounds.maxX=this._width*(1-this._anchor._x),this._bounds.maxY=this._height*(1-this._anchor._x),Zt||(this._localBoundsRect||(this._localBoundsRect=new Wt.Rectangle),Zt=this._localBoundsRect),this._bounds.getRectangle(Zt)):Kt.prototype.getLocalBounds.call(this,Zt)},Qt.prototype.containsPoint=function(Zt){this.worldTransform.applyInverse(Zt,Vt);var Jt=this._width,$t=this._height,en=-Jt*this.anchor._x;if(Vt.x>=en&&Vt.x<en+Jt){var tn=-$t*this.anchor._y;if(Vt.y>=tn&&Vt.y<tn+$t)return!0}return!1},Qt.prototype.destroy=function(Zt){Kt.prototype.destroy.call(this,Zt),this.tileTransform=null,this.uvTransform=null},Qt.from=function(Zt,Jt,$t){return new Qt(Wt.Texture.from(Zt),Jt,$t)},Qt.fromFrame=function(Zt,Jt,$t){var en=Wt.utils.TextureCache[Zt];if(!en)throw new Error("The frameId \""+Zt+"\" does not exist in the texture cache "+this);return new Qt(en,Jt,$t)},Qt.fromImage=function(Zt,Jt,$t,en,tn){return new Qt(Wt.Texture.fromImage(Zt,en,tn),Jt,$t)},Yt(Qt,[{key:"clampMargin",get:function(){return this.uvTransform.clampMargin},set:function(Zt){this.uvTransform.clampMargin=Zt,this.uvTransform.update(!0)}},{key:"tileScale",get:function(){return this.tileTransform.scale},set:function(Zt){this.tileTransform.scale.copy(Zt)}},{key:"tilePosition",get:function(){return this.tileTransform.position},set:function(Zt){this.tileTransform.position.copy(Zt)}},{key:"width",get:function(){return this._width},set:function(Zt){this._width=Zt}},{key:"height",get:function(){return this._height},set:function(Zt){this._height=Zt}}]),Qt}(Wt.Sprite);Xt.default=qt},{"../core":65,"../core/sprites/canvas/CanvasTinter":104,"./TextureTransform":136}],138:[function(Bt){function Ht(Qt){return Qt&&Qt.__esModule?Qt:{default:Qt}}var Yt=function(Qt){if(Qt&&Qt.__esModule)return Qt;var Zt={};if(null!=Qt)for(var Jt in Qt)Object.prototype.hasOwnProperty.call(Qt,Jt)&&(Zt[Jt]=Qt[Jt]);return Zt.default=Qt,Zt}(Bt("../core")),Wt=Ht(Bt("../core/textures/Texture")),jt=Ht(Bt("../core/textures/BaseTexture")),zt=Bt("../core/utils"),Vt=Yt.DisplayObject,qt=new Yt.Matrix;Vt.prototype._cacheAsBitmap=!1,Vt.prototype._cacheData=!1;var Kt=function Qt(){!function(Zt,Jt){if(!(Zt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,Qt),this.textureCacheId=null,this.originalRenderWebGL=null,this.originalRenderCanvas=null,this.originalCalculateBounds=null,this.originalGetLocalBounds=null,this.originalUpdateTransform=null,this.originalHitTest=null,this.originalDestroy=null,this.originalMask=null,this.originalFilterArea=null,this.sprite=null};Object.defineProperties(Vt.prototype,{cacheAsBitmap:{get:function(){return this._cacheAsBitmap},set:function(Qt){if(this._cacheAsBitmap!==Qt){this._cacheAsBitmap=Qt;var Zt;Qt?(this._cacheData||(this._cacheData=new Kt),(Zt=this._cacheData).originalRenderWebGL=this.renderWebGL,Zt.originalRenderCanvas=this.renderCanvas,Zt.originalUpdateTransform=this.updateTransform,Zt.originalCalculateBounds=this._calculateBounds,Zt.originalGetLocalBounds=this.getLocalBounds,Zt.originalDestroy=this.destroy,Zt.originalContainsPoint=this.containsPoint,Zt.originalMask=this._mask,Zt.originalFilterArea=this.filterArea,this.renderWebGL=this._renderCachedWebGL,this.renderCanvas=this._renderCachedCanvas,this.destroy=this._cacheAsBitmapDestroy):((Zt=this._cacheData).sprite&&this._destroyCachedDisplayObject(),this.renderWebGL=Zt.originalRenderWebGL,this.renderCanvas=Zt.originalRenderCanvas,this._calculateBounds=Zt.originalCalculateBounds,this.getLocalBounds=Zt.originalGetLocalBounds,this.destroy=Zt.originalDestroy,this.updateTransform=Zt.originalUpdateTransform,this.containsPoint=Zt.originalContainsPoint,this._mask=Zt.originalMask,this.filterArea=Zt.originalFilterArea)}}}}),Vt.prototype._renderCachedWebGL=function(Qt){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObject(Qt),this._cacheData.sprite._transformID=-1,this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite._renderWebGL(Qt))},Vt.prototype._initCachedDisplayObject=function(Qt){if(!this._cacheData||!this._cacheData.sprite){var Zt=this.alpha;this.alpha=1,Qt.currentRenderer.flush();var Jt=this.getLocalBounds().clone();if(this._filters){var $t=this._filters[0].padding;Jt.pad($t)}var en=Qt._activeRenderTarget,tn=Qt.filterManager.filterStack,nn=Yt.RenderTexture.create(0|Jt.width,0|Jt.height),rn="cacheAsBitmap_"+(0,zt.uid)();this._cacheData.textureCacheId=rn,jt.default.addToCache(nn.baseTexture,rn),Wt.default.addToCache(nn,rn);var an=qt;an.tx=-Jt.x,an.ty=-Jt.y,this.transform.worldTransform.identity(),this.renderWebGL=this._cacheData.originalRenderWebGL,Qt.render(this,nn,!0,an,!0),Qt.bindRenderTarget(en),Qt.filterManager.filterStack=tn,this.renderWebGL=this._renderCachedWebGL,this.updateTransform=this.displayObjectUpdateTransform,this._mask=null,this.filterArea=null;var on=new Yt.Sprite(nn);on.transform.worldTransform=this.transform.worldTransform,on.anchor.x=-Jt.x/Jt.width,on.anchor.y=-Jt.y/Jt.height,on.alpha=Zt,on._bounds=this._bounds,this._calculateBounds=this._calculateCachedBounds,this.getLocalBounds=this._getCachedLocalBounds,this._cacheData.sprite=on,this.transform._parentID=-1,this.parent?this.updateTransform():(this.parent=Qt._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.containsPoint=on.containsPoint.bind(on)}},Vt.prototype._renderCachedCanvas=function(Qt){this.visible&&!(0>=this.worldAlpha)&&this.renderable&&(this._initCachedDisplayObjectCanvas(Qt),this._cacheData.sprite.worldAlpha=this.worldAlpha,this._cacheData.sprite.renderCanvas(Qt))},Vt.prototype._initCachedDisplayObjectCanvas=function(Qt){if(!this._cacheData||!this._cacheData.sprite){var Zt=this.getLocalBounds(),Jt=this.alpha;this.alpha=1;var $t=Qt.context,en=Yt.RenderTexture.create(0|Zt.width,0|Zt.height),tn="cacheAsBitmap_"+(0,zt.uid)();this._cacheData.textureCacheId=tn,jt.default.addToCache(en.baseTexture,tn),Wt.default.addToCache(en,tn);var nn=qt;this.transform.localTransform.copy(nn),nn.invert(),nn.tx-=Zt.x,nn.ty-=Zt.y,this.renderCanvas=this._cacheData.originalRenderCanvas,Qt.render(this,en,!0,nn,!1),Qt.context=$t,this.renderCanvas=this._renderCachedCanvas,this._calculateBounds=this._calculateCachedBounds,this._mask=null,this.filterArea=null;var rn=new Yt.Sprite(en);rn.transform.worldTransform=this.transform.worldTransform,rn.anchor.x=-Zt.x/Zt.width,rn.anchor.y=-Zt.y/Zt.height,rn._bounds=this._bounds,rn.alpha=Jt,this.parent?this.updateTransform():(this.parent=Qt._tempDisplayObjectParent,this.updateTransform(),this.parent=null),this.updateTransform=this.displayObjectUpdateTransform,this._cacheData.sprite=rn,this.containsPoint=rn.containsPoint.bind(rn)}},Vt.prototype._calculateCachedBounds=function(){this._cacheData.sprite._calculateBounds()},Vt.prototype._getCachedLocalBounds=function(){return this._cacheData.sprite.getLocalBounds()},Vt.prototype._destroyCachedDisplayObject=function(){this._cacheData.sprite._texture.destroy(!0),this._cacheData.sprite=null,jt.default.removeFromCache(this._cacheData.textureCacheId),Wt.default.removeFromCache(this._cacheData.textureCacheId),this._cacheData.textureCacheId=null},Vt.prototype._cacheAsBitmapDestroy=function(Qt){this.cacheAsBitmap=!1,this.destroy(Qt)}},{"../core":65,"../core/textures/BaseTexture":112,"../core/textures/Texture":115,"../core/utils":124}],139:[function(Bt){var Ht=function(Yt){if(Yt&&Yt.__esModule)return Yt;var Wt={};if(null!=Yt)for(var jt in Yt)Object.prototype.hasOwnProperty.call(Yt,jt)&&(Wt[jt]=Yt[jt]);return Wt.default=Yt,Wt}(Bt("../core"));Ht.DisplayObject.prototype.name=null,Ht.Container.prototype.getChildByName=function(Yt){for(var Wt=0;Wt<this.children.length;Wt++)if(this.children[Wt].name===Yt)return this.children[Wt];return null}},{"../core":65}],140:[function(Bt){var Ht=function(Yt){if(Yt&&Yt.__esModule)return Yt;var Wt={};if(null!=Yt)for(var jt in Yt)Object.prototype.hasOwnProperty.call(Yt,jt)&&(Wt[jt]=Yt[jt]);return Wt.default=Yt,Wt}(Bt("../core"));Ht.DisplayObject.prototype.getGlobalPosition=function(){var Yt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:new Ht.Point,Wt=1<arguments.length&&void 0!==arguments[1]&&arguments[1];return this.parent?this.parent.toGlobal(this.position,Yt,Wt):(Yt.x=this.position.x,Yt.y=this.position.y),Yt}},{"../core":65}],141:[function(Bt,Gt,Xt){function Ht(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0,Xt.BitmapText=Xt.TilingSpriteRenderer=Xt.TilingSprite=Xt.TextureTransform=Xt.AnimatedSprite=void 0;var Yt=Bt("./AnimatedSprite");Object.defineProperty(Xt,"AnimatedSprite",{enumerable:!0,get:function(){return Ht(Yt).default}});var Wt=Bt("./TextureTransform");Object.defineProperty(Xt,"TextureTransform",{enumerable:!0,get:function(){return Ht(Wt).default}});var jt=Bt("./TilingSprite");Object.defineProperty(Xt,"TilingSprite",{enumerable:!0,get:function(){return Ht(jt).default}});var zt=Bt("./webgl/TilingSpriteRenderer");Object.defineProperty(Xt,"TilingSpriteRenderer",{enumerable:!0,get:function(){return Ht(zt).default}});var Vt=Bt("./BitmapText");Object.defineProperty(Xt,"BitmapText",{enumerable:!0,get:function(){return Ht(Vt).default}}),Bt("./cacheAsBitmap"),Bt("./getChildByName"),Bt("./getGlobalPosition")},{"./AnimatedSprite":134,"./BitmapText":135,"./TextureTransform":136,"./TilingSprite":137,"./cacheAsBitmap":138,"./getChildByName":139,"./getGlobalPosition":140,"./webgl/TilingSpriteRenderer":142}],142:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("../../core")),Yt=Bt("../../core/const"),Wt=(Bt("path"),new Ht.Matrix),jt=function(zt){function Vt(qt){!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Kt=function(Qt,Zt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&("object"==typeof Zt||"function"==typeof Zt)?Zt:Qt}(this,zt.call(this,qt));return Kt.shader=null,Kt.simpleShader=null,Kt.quad=null,Kt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.onContextChange=function(){var qt=this.renderer.gl;this.shader=new Ht.Shader(qt,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\nuniform mat3 uMapCoord;\nuniform vec4 uClampFrame;\nuniform vec2 uClampOffset;\n\nvoid main(void)\n{\n    vec2 coord = mod(vTextureCoord - uClampOffset, vec2(1.0, 1.0)) + uClampOffset;\n    coord = (uMapCoord * vec3(coord, 1.0)).xy;\n    coord = clamp(coord, uClampFrame.xy, uClampFrame.zw);\n\n    vec4 sample = texture2D(uSampler, coord);\n    gl_FragColor = sample * uColor;\n}\n"),this.simpleShader=new Ht.Shader(qt,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\nuniform vec4 uColor;\n\nvoid main(void)\n{\n    vec4 sample = texture2D(uSampler, vTextureCoord);\n    gl_FragColor = sample * uColor;\n}\n"),this.renderer.bindVao(null),this.quad=new Ht.Quad(qt,this.renderer.state.attribState),this.quad.initVao(this.shader)},Vt.prototype.render=function(qt){var Kt=this.renderer,Qt=this.quad;Kt.bindVao(Qt.vao);var Zt=Qt.vertices;Zt[0]=Zt[6]=qt._width*-qt.anchor.x,Zt[1]=Zt[3]=qt._height*-qt.anchor.y,Zt[2]=Zt[4]=qt._width*(1-qt.anchor.x),Zt[5]=Zt[7]=qt._height*(1-qt.anchor.y),qt.uvRespectAnchor&&((Zt=Qt.uvs)[0]=Zt[6]=-qt.anchor.x,Zt[1]=Zt[3]=-qt.anchor.y,Zt[2]=Zt[4]=1-qt.anchor.x,Zt[5]=Zt[7]=1-qt.anchor.y),Qt.upload();var Jt=qt._texture,$t=Jt.baseTexture,en=qt.tileTransform.localTransform,tn=qt.uvTransform,nn=$t.isPowerOfTwo&&Jt.frame.width===$t.width&&Jt.frame.height===$t.height;nn&&($t._glTextures[Kt.CONTEXT_UID]?nn=$t.wrapMode!==Yt.WRAP_MODES.CLAMP:$t.wrapMode===Yt.WRAP_MODES.CLAMP&&($t.wrapMode=Yt.WRAP_MODES.REPEAT));var rn=nn?this.simpleShader:this.shader;Kt.bindShader(rn);var an=Jt.width,on=Jt.height,sn=qt._width,dn=qt._height;Wt.set(en.a*an/sn,en.b*an/dn,en.c*on/sn,en.d*on/dn,en.tx/sn,en.ty/dn),Wt.invert(),nn?Wt.prepend(tn.mapCoord):(rn.uniforms.uMapCoord=tn.mapCoord.toArray(!0),rn.uniforms.uClampFrame=tn.uClampFrame,rn.uniforms.uClampOffset=tn.uClampOffset),rn.uniforms.uTransform=Wt.toArray(!0),rn.uniforms.uColor=Ht.utils.premultiplyTintToRgba(qt.tint,qt.worldAlpha,rn.uniforms.uColor,$t.premultipliedAlpha),rn.uniforms.translationMatrix=qt.transform.worldTransform.toArray(!0),rn.uniforms.uSampler=Kt.bindTexture(Jt),Kt.setBlendMode(Ht.utils.correctBlendMode(qt.blendMode,$t.premultipliedAlpha)),Qt.vao.draw(this.renderer.gl.TRIANGLES,6,0)},Vt}(Ht.ObjectRenderer);Xt.default=jt,Ht.WebGLRenderer.registerPlugin("tilingSprite",jt)},{"../../core":65,"../../core/const":46,path:23}],143:[function(Bt,Gt,Xt){function Ht(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Yt=function(){function qt(Kt,Qt){for(var Zt=0,Jt;Zt<Qt.length;Zt++)Jt=Qt[Zt],Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Kt,Jt.key,Jt)}return function(Kt,Qt,Zt){return Qt&&qt(Kt.prototype,Qt),Zt&&qt(Kt,Zt),Kt}}(),Wt=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Qt in qt)Object.prototype.hasOwnProperty.call(qt,Qt)&&(Kt[Qt]=qt[Qt]);return Kt.default=qt,Kt}(Bt("../../core")),jt=Ht(Bt("./BlurXFilter")),zt=Ht(Bt("./BlurYFilter")),Vt=function(qt){function Kt(Qt,Zt,Jt,$t){!function(tn,nn){if(!(tn instanceof nn))throw new TypeError("Cannot call a class as a function")}(this,Kt);var en=function(tn,nn){if(!tn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return nn&&("object"==typeof nn||"function"==typeof nn)?nn:tn}(this,qt.call(this));return en.blurXFilter=new jt.default(Qt,Zt,Jt,$t),en.blurYFilter=new zt.default(Qt,Zt,Jt,$t),en.padding=0,en.resolution=Jt||Wt.settings.RESOLUTION,en.quality=Zt||4,en.blur=Qt||8,en}return function(Qt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Qt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Zt):Qt.__proto__=Zt)}(Kt,qt),Kt.prototype.apply=function(Qt,Zt,Jt){var $t=Qt.getRenderTarget(!0);this.blurXFilter.apply(Qt,Zt,$t,!0),this.blurYFilter.apply(Qt,$t,Jt,!1),Qt.returnRenderTarget($t)},Yt(Kt,[{key:"blur",get:function(){return this.blurXFilter.blur},set:function(Qt){this.blurXFilter.blur=this.blurYFilter.blur=Qt,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"quality",get:function(){return this.blurXFilter.quality},set:function(Qt){this.blurXFilter.quality=this.blurYFilter.quality=Qt}},{key:"blurX",get:function(){return this.blurXFilter.blur},set:function(Qt){this.blurXFilter.blur=Qt,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blurY",get:function(){return this.blurYFilter.blur},set:function(Qt){this.blurYFilter.blur=Qt,this.padding=2*Math.max(Math.abs(this.blurXFilter.strength),Math.abs(this.blurYFilter.strength))}},{key:"blendMode",get:function(){return this.blurYFilter._blendMode},set:function(Qt){this.blurYFilter._blendMode=Qt}}]),Kt}(Wt.Filter);Xt.default=Vt},{"../../core":65,"./BlurXFilter":144,"./BlurYFilter":145}],144:[function(Bt,Gt,Xt){function Ht(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Yt=function(){function Kt(Qt,Zt){for(var Jt=0,$t;Jt<Zt.length;Jt++)$t=Zt[Jt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qt,$t.key,$t)}return function(Qt,Zt,Jt){return Zt&&Kt(Qt.prototype,Zt),Jt&&Kt(Qt,Jt),Qt}}(),Wt=function(Kt){if(Kt&&Kt.__esModule)return Kt;var Qt={};if(null!=Kt)for(var Zt in Kt)Object.prototype.hasOwnProperty.call(Kt,Zt)&&(Qt[Zt]=Kt[Zt]);return Qt.default=Kt,Qt}(Bt("../../core")),jt=Ht(Bt("./generateBlurVertSource")),zt=Ht(Bt("./generateBlurFragSource")),Vt=Ht(Bt("./getMaxBlurKernelSize")),qt=function(Kt){function Qt(Zt,Jt,$t,en){!function(an,on){if(!(an instanceof on))throw new TypeError("Cannot call a class as a function")}(this,Qt),en=en||5;var tn=(0,jt.default)(en,!0),nn=(0,zt.default)(en),rn=function(an,on){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:an}(this,Kt.call(this,tn,nn));return rn.resolution=$t||Wt.settings.RESOLUTION,rn._quality=0,rn.quality=Jt||4,rn.strength=Zt||8,rn.firstRun=!0,rn}return function(Zt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Zt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,Jt):Zt.__proto__=Jt)}(Qt,Kt),Qt.prototype.apply=function(Zt,Jt,$t,en){if(this.firstRun){var tn=Zt.renderer.gl,nn=(0,Vt.default)(tn);this.vertexSrc=(0,jt.default)(nn,!0),this.fragmentSrc=(0,zt.default)(nn),this.firstRun=!1}if(this.uniforms.strength=1/$t.size.width*($t.size.width/Jt.size.width),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)Zt.applyFilter(this,Jt,$t,en);else{for(var rn=Zt.getRenderTarget(!0),an=Jt,on=rn,sn=0;sn<this.passes-1;sn++){Zt.applyFilter(this,an,on,!0);var dn=on;on=an,an=dn}Zt.applyFilter(this,an,$t,en),Zt.returnRenderTarget(rn)}},Yt(Qt,[{key:"blur",get:function(){return this.strength},set:function(Zt){this.padding=2*Math.abs(Zt),this.strength=Zt}},{key:"quality",get:function(){return this._quality},set:function(Zt){this._quality=Zt,this.passes=Zt}}]),Qt}(Wt.Filter);Xt.default=qt},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],145:[function(Bt,Gt,Xt){function Ht(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Yt=function(){function Kt(Qt,Zt){for(var Jt=0,$t;Jt<Zt.length;Jt++)$t=Zt[Jt],$t.enumerable=$t.enumerable||!1,$t.configurable=!0,"value"in $t&&($t.writable=!0),Object.defineProperty(Qt,$t.key,$t)}return function(Qt,Zt,Jt){return Zt&&Kt(Qt.prototype,Zt),Jt&&Kt(Qt,Jt),Qt}}(),Wt=function(Kt){if(Kt&&Kt.__esModule)return Kt;var Qt={};if(null!=Kt)for(var Zt in Kt)Object.prototype.hasOwnProperty.call(Kt,Zt)&&(Qt[Zt]=Kt[Zt]);return Qt.default=Kt,Qt}(Bt("../../core")),jt=Ht(Bt("./generateBlurVertSource")),zt=Ht(Bt("./generateBlurFragSource")),Vt=Ht(Bt("./getMaxBlurKernelSize")),qt=function(Kt){function Qt(Zt,Jt,$t,en){!function(an,on){if(!(an instanceof on))throw new TypeError("Cannot call a class as a function")}(this,Qt),en=en||5;var tn=(0,jt.default)(en,!1),nn=(0,zt.default)(en),rn=function(an,on){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:an}(this,Kt.call(this,tn,nn));return rn.resolution=$t||Wt.settings.RESOLUTION,rn._quality=0,rn.quality=Jt||4,rn.strength=Zt||8,rn.firstRun=!0,rn}return function(Zt,Jt){if("function"!=typeof Jt&&null!==Jt)throw new TypeError("Super expression must either be null or a function, not "+typeof Jt);Zt.prototype=Object.create(Jt&&Jt.prototype,{constructor:{value:Zt,enumerable:!1,writable:!0,configurable:!0}}),Jt&&(Object.setPrototypeOf?Object.setPrototypeOf(Zt,Jt):Zt.__proto__=Jt)}(Qt,Kt),Qt.prototype.apply=function(Zt,Jt,$t,en){if(this.firstRun){var tn=Zt.renderer.gl,nn=(0,Vt.default)(tn);this.vertexSrc=(0,jt.default)(nn,!1),this.fragmentSrc=(0,zt.default)(nn),this.firstRun=!1}if(this.uniforms.strength=1/$t.size.height*($t.size.height/Jt.size.height),this.uniforms.strength*=this.strength,this.uniforms.strength/=this.passes,1===this.passes)Zt.applyFilter(this,Jt,$t,en);else{for(var rn=Zt.getRenderTarget(!0),an=Jt,on=rn,sn=0;sn<this.passes-1;sn++){Zt.applyFilter(this,an,on,!0);var dn=on;on=an,an=dn}Zt.applyFilter(this,an,$t,en),Zt.returnRenderTarget(rn)}},Yt(Qt,[{key:"blur",get:function(){return this.strength},set:function(Zt){this.padding=2*Math.abs(Zt),this.strength=Zt}},{key:"quality",get:function(){return this._quality},set:function(Zt){this._quality=Zt,this.passes=Zt}}]),Qt}(Wt.Filter);Xt.default=qt},{"../../core":65,"./generateBlurFragSource":146,"./generateBlurVertSource":147,"./getMaxBlurKernelSize":148}],146:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Wt){for(var jt=Ht[Wt],zt=jt.length,Vt=Yt,qt="",Kt=void 0,Qt=0,Zt;Qt<Wt;Qt++)Zt="gl_FragColor += texture2D(uSampler, vBlurTexCoords[%index%]) * %value%;".replace("%index%",Qt),Kt=Qt,Qt>=zt&&(Kt=Wt-Qt-1),qt+=Zt=Zt.replace("%value%",jt[Kt]),qt+="\n";return Vt=Vt.replace("%blur%",qt),Vt=Vt.replace("%size%",Wt)};var Ht={5:[0.153388,0.221461,0.250301],7:[0.071303,0.131514,0.189879,0.214607],9:[0.028532,0.067234,0.124009,0.179044,0.20236],11:[0.0093,0.028002,0.065984,0.121703,0.175713,0.198596],13:[0.002406,0.009255,0.027867,0.065666,0.121117,0.174868,0.197641],15:[0.000489,0.002403,0.009246,0.02784,0.065602,0.120999,0.174697,0.197448]},Yt=["varying vec2 vBlurTexCoords[%size%];","uniform sampler2D uSampler;","void main(void)","{","    gl_FragColor = vec4(0.0);","    %blur%","}"].join("\n")},{}],147:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Yt,Wt){var jt=Math.ceil(Yt/2),zt=Ht,Vt="",qt;qt=Wt?"vBlurTexCoords[%index%] = aTextureCoord + vec2(%sampleIndex% * strength, 0.0);":"vBlurTexCoords[%index%] = aTextureCoord + vec2(0.0, %sampleIndex% * strength);";for(var Kt=0,Qt;Kt<Yt;Kt++)Qt=qt.replace("%index%",Kt),Vt+=Qt=Qt.replace("%sampleIndex%",Kt-(jt-1)+".0"),Vt+="\n";return zt=zt.replace("%blur%",Vt),zt=zt.replace("%size%",Yt)};var Ht=["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","uniform float strength;","uniform mat3 projectionMatrix;","varying vec2 vBlurTexCoords[%size%];","void main(void)","{","gl_Position = vec4((projectionMatrix * vec3((aVertexPosition), 1.0)).xy, 0.0, 1.0);","%blur%","}"].join("\n")},{}],148:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(Ht){for(var Yt=Ht.getParameter(Ht.MAX_VARYING_VECTORS),Wt=15;Wt>Yt;)Wt-=2;return Wt}},{}],149:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Wt=(Bt("path"),function(jt){function zt(){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,jt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform float m[20];\nuniform float uAlpha;\n\nvoid main(void)\n{\n    vec4 c = texture2D(uSampler, vTextureCoord);\n\n    if (uAlpha == 0.0) {\n        gl_FragColor = c;\n        return;\n    }\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (c.a > 0.0) {\n      c.rgb /= c.a;\n    }\n\n    vec4 result;\n\n    result.r = (m[0] * c.r);\n        result.r += (m[1] * c.g);\n        result.r += (m[2] * c.b);\n        result.r += (m[3] * c.a);\n        result.r += m[4];\n\n    result.g = (m[5] * c.r);\n        result.g += (m[6] * c.g);\n        result.g += (m[7] * c.b);\n        result.g += (m[8] * c.a);\n        result.g += m[9];\n\n    result.b = (m[10] * c.r);\n       result.b += (m[11] * c.g);\n       result.b += (m[12] * c.b);\n       result.b += (m[13] * c.a);\n       result.b += m[14];\n\n    result.a = (m[15] * c.r);\n       result.a += (m[16] * c.g);\n       result.a += (m[17] * c.b);\n       result.a += (m[18] * c.a);\n       result.a += m[19];\n\n    vec3 rgb = mix(c.rgb, result.rgb, uAlpha);\n\n    // Premultiply alpha again.\n    rgb *= result.a;\n\n    gl_FragColor = vec4(rgb, result.a);\n}\n"));return Vt.uniforms.m=[1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],Vt.alpha=1,Vt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype._loadMatrix=function(Vt){var qt=Vt;1<arguments.length&&void 0!==arguments[1]&&arguments[1]&&(this._multiply(qt,this.uniforms.m,Vt),qt=this._colorMatrix(qt)),this.uniforms.m=qt},zt.prototype._multiply=function(Vt,qt,Kt){return Vt[0]=qt[0]*Kt[0]+qt[1]*Kt[5]+qt[2]*Kt[10]+qt[3]*Kt[15],Vt[1]=qt[0]*Kt[1]+qt[1]*Kt[6]+qt[2]*Kt[11]+qt[3]*Kt[16],Vt[2]=qt[0]*Kt[2]+qt[1]*Kt[7]+qt[2]*Kt[12]+qt[3]*Kt[17],Vt[3]=qt[0]*Kt[3]+qt[1]*Kt[8]+qt[2]*Kt[13]+qt[3]*Kt[18],Vt[4]=qt[0]*Kt[4]+qt[1]*Kt[9]+qt[2]*Kt[14]+qt[3]*Kt[19]+qt[4],Vt[5]=qt[5]*Kt[0]+qt[6]*Kt[5]+qt[7]*Kt[10]+qt[8]*Kt[15],Vt[6]=qt[5]*Kt[1]+qt[6]*Kt[6]+qt[7]*Kt[11]+qt[8]*Kt[16],Vt[7]=qt[5]*Kt[2]+qt[6]*Kt[7]+qt[7]*Kt[12]+qt[8]*Kt[17],Vt[8]=qt[5]*Kt[3]+qt[6]*Kt[8]+qt[7]*Kt[13]+qt[8]*Kt[18],Vt[9]=qt[5]*Kt[4]+qt[6]*Kt[9]+qt[7]*Kt[14]+qt[8]*Kt[19]+qt[9],Vt[10]=qt[10]*Kt[0]+qt[11]*Kt[5]+qt[12]*Kt[10]+qt[13]*Kt[15],Vt[11]=qt[10]*Kt[1]+qt[11]*Kt[6]+qt[12]*Kt[11]+qt[13]*Kt[16],Vt[12]=qt[10]*Kt[2]+qt[11]*Kt[7]+qt[12]*Kt[12]+qt[13]*Kt[17],Vt[13]=qt[10]*Kt[3]+qt[11]*Kt[8]+qt[12]*Kt[13]+qt[13]*Kt[18],Vt[14]=qt[10]*Kt[4]+qt[11]*Kt[9]+qt[12]*Kt[14]+qt[13]*Kt[19]+qt[14],Vt[15]=qt[15]*Kt[0]+qt[16]*Kt[5]+qt[17]*Kt[10]+qt[18]*Kt[15],Vt[16]=qt[15]*Kt[1]+qt[16]*Kt[6]+qt[17]*Kt[11]+qt[18]*Kt[16],Vt[17]=qt[15]*Kt[2]+qt[16]*Kt[7]+qt[17]*Kt[12]+qt[18]*Kt[17],Vt[18]=qt[15]*Kt[3]+qt[16]*Kt[8]+qt[17]*Kt[13]+qt[18]*Kt[18],Vt[19]=qt[15]*Kt[4]+qt[16]*Kt[9]+qt[17]*Kt[14]+qt[18]*Kt[19]+qt[19],Vt},zt.prototype._colorMatrix=function(Vt){var qt=new Float32Array(Vt);return qt[4]/=255,qt[9]/=255,qt[14]/=255,qt[19]/=255,qt},zt.prototype.brightness=function(Vt,qt){this._loadMatrix([Vt,0,0,0,0,0,Vt,0,0,0,0,0,Vt,0,0,0,0,0,1,0],qt)},zt.prototype.greyscale=function(Vt,qt){this._loadMatrix([Vt,Vt,Vt,0,0,Vt,Vt,Vt,0,0,Vt,Vt,Vt,0,0,0,0,0,1,0],qt)},zt.prototype.blackAndWhite=function(Vt){this._loadMatrix([0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0.3,0.6,0.1,0,0,0,0,0,1,0],Vt)},zt.prototype.hue=function(Vt,qt){Vt=(Vt||0)/180*Math.PI;var Kt=Math.cos(Vt),Qt=Math.sin(Vt),Zt=(0,Math.sqrt)(1/3);this._loadMatrix([Kt+1/3*(1-Kt),1/3*(1-Kt)-Zt*Qt,1/3*(1-Kt)+Zt*Qt,0,0,1/3*(1-Kt)+Zt*Qt,Kt+1/3*(1-Kt),1/3*(1-Kt)-Zt*Qt,0,0,1/3*(1-Kt)-Zt*Qt,1/3*(1-Kt)+Zt*Qt,Kt+1/3*(1-Kt),0,0,0,0,0,1,0],qt)},zt.prototype.contrast=function(Vt,qt){var Kt=(Vt||0)+1,Qt=-.5*(Kt-1);this._loadMatrix([Kt,0,0,0,Qt,0,Kt,0,0,Qt,0,0,Kt,0,Qt,0,0,0,1,0],qt)},zt.prototype.saturate=function(){var Vt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:0,qt=arguments[1],Kt=2*Vt/3+1,Qt=-.5*(Kt-1);this._loadMatrix([Kt,Qt,Qt,0,0,Qt,Kt,Qt,0,0,Qt,Qt,Kt,0,0,0,0,0,1,0],qt)},zt.prototype.desaturate=function(){this.saturate(-1)},zt.prototype.negative=function(Vt){this._loadMatrix([0,1,1,0,0,1,0,1,0,0,1,1,0,0,0,0,0,0,1,0],Vt)},zt.prototype.sepia=function(Vt){this._loadMatrix([0.393,0.7689999,0.18899999,0,0,0.349,0.6859999,0.16799999,0,0,0.272,0.5339999,0.13099999,0,0,0,0,0,1,0],Vt)},zt.prototype.technicolor=function(Vt){this._loadMatrix([1.9125277891456083,-0.8545344976951645,-0.09155508482755585,0,11.793603434377337,-0.3087833385928097,1.7658908555458428,-0.10601743074722245,0,-70.35205161461398,-0.231103377548616,-0.7501899197440212,1.847597816108189,0,30.950940869491138,0,0,0,1,0],Vt)},zt.prototype.polaroid=function(Vt){this._loadMatrix([1.438,-0.062,-0.062,0,0,-0.122,1.378,-0.122,0,0,-0.016,-0.016,1.483,0,0,0,0,0,1,0],Vt)},zt.prototype.toBGR=function(Vt){this._loadMatrix([0,0,1,0,0,0,1,0,0,0,1,0,0,0,0,0,0,0,1,0],Vt)},zt.prototype.kodachrome=function(Vt){this._loadMatrix([1.1285582396593525,-0.3967382283601348,-0.03992559172921793,0,63.72958762196502,-0.16404339962244616,1.0835251566291304,-0.05498805115633132,0,24.732407896706203,-0.16786010706155763,-0.5603416277695248,1.6014850761964943,0,35.62982807460946,0,0,0,1,0],Vt)},zt.prototype.browni=function(Vt){this._loadMatrix([0.5997023498159715,0.34553243048391263,-0.2708298674538042,0,47.43192855600873,-0.037703249837783157,0.8609577587992641,0.15059552388459913,0,-36.96841498319127,0.24113635128153335,-0.07441037908422492,0.44972182064877153,0,-7.562075277591283,0,0,0,1,0],Vt)},zt.prototype.vintage=function(Vt){this._loadMatrix([0.6279345635605994,0.3202183420819367,-0.03965408211312453,0,9.651285835294123,0.02578397704808868,0.6441188644374771,0.03259127616149294,0,7.462829176470591,0.0466055556782719,-0.0851232987247891,0.5241648018700465,0,5.159190588235296,0,0,0,1,0],Vt)},zt.prototype.colorTone=function(Vt,qt,Kt,Qt,Zt){Vt=Vt||.2,qt=qt||.15;var Jt=(255&(Kt=Kt||16770432)>>16)/255,$t=(255&Kt>>8)/255,en=(255&Kt)/255,tn=(255&(Qt=Qt||3375104)>>16)/255,nn=(255&Qt>>8)/255,rn=(255&Qt)/255,an=[.3,.59,.11,0,0,Jt,$t,en,Vt,0,tn,nn,rn,qt,0,Jt-tn,$t-nn,en-rn,0,0];this._loadMatrix(an,Zt)},zt.prototype.night=function(Vt,qt){var Kt=[-2*(Vt=Vt||.1),-Vt,0,0,0,-Vt,0,Vt,0,0,0,Vt,2*Vt,0,0,0,0,0,1,0];this._loadMatrix(Kt,qt)},zt.prototype.predator=function(Vt,qt){this._loadMatrix([11.224130630493164*Vt,-4.794486999511719*Vt,-2.8746118545532227*Vt,0*Vt,.40342438220977783*Vt,-3.6330697536468506*Vt,9.193157196044922*Vt,-2.951810836791992*Vt,0*Vt,-1.316135048866272*Vt,-3.2184197902679443*Vt,-4.2375030517578125*Vt,7.476448059082031*Vt,0*Vt,.8044459223747253*Vt,0,0,0,1,0],qt)},zt.prototype.lsd=function(Vt){this._loadMatrix([2,-0.4,0.5,0,0,-0.5,2,-0.4,0,0,-0.4,-0.5,3,0,0,0,0,0,1,0],Vt)},zt.prototype.reset=function(){this._loadMatrix([1,0,0,0,0,0,1,0,0,0,0,0,1,0,0,0,0,0,1,0],!1)},Ht(zt,[{key:"matrix",get:function(){return this.uniforms.m},set:function(Vt){this.uniforms.m=Vt}},{key:"alpha",get:function(){return this.uniforms.uAlpha},set:function(Vt){this.uniforms.uAlpha=Vt}}]),zt}(Yt.Filter));Xt.default=Wt,Wt.prototype.grayscale=Wt.prototype.greyscale},{"../../core":65,path:23}],150:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Wt=(Bt("path"),function(jt){function zt(Vt,qt){!function(Zt,Jt){if(!(Zt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=new Yt.Matrix;Vt.renderable=!1;var Qt=function(Zt,Jt){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Zt}(this,jt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 filterMatrix;\n\nvarying vec2 vTextureCoord;\nvarying vec2 vFilterCoord;\n\nvoid main(void)\n{\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n   vFilterCoord = ( filterMatrix * vec3( aTextureCoord, 1.0)  ).xy;\n   vTextureCoord = aTextureCoord;\n}","varying vec2 vFilterCoord;\nvarying vec2 vTextureCoord;\n\nuniform vec2 scale;\n\nuniform sampler2D uSampler;\nuniform sampler2D mapSampler;\n\nuniform vec4 filterClamp;\n\nvoid main(void)\n{\n   vec4 map =  texture2D(mapSampler, vFilterCoord);\n\n   map -= 0.5;\n   map.xy *= scale;\n\n   gl_FragColor = texture2D(uSampler, clamp(vec2(vTextureCoord.x + map.x, vTextureCoord.y + map.y), filterClamp.xy, filterClamp.zw));\n}\n"));return Qt.maskSprite=Vt,Qt.maskMatrix=Kt,Qt.uniforms.mapSampler=Vt._texture,Qt.uniforms.filterMatrix=Kt,Qt.uniforms.scale={x:1,y:1},null!==qt&&void 0!==qt||(qt=20),Qt.scale=new Yt.Point(qt,qt),Qt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.apply=function(Vt,qt,Kt){var Qt=1/Kt.destinationFrame.width*(Kt.size.width/qt.size.width);this.uniforms.filterMatrix=Vt.calculateSpriteMatrix(this.maskMatrix,this.maskSprite),this.uniforms.scale.x=this.scale.x*Qt,this.uniforms.scale.y=this.scale.y*Qt,Vt.applyFilter(this,qt,Kt)},Ht(zt,[{key:"map",get:function(){return this.uniforms.mapSampler},set:function(Vt){this.uniforms.mapSampler=Vt}}]),zt}(Yt.Filter));Xt.default=Wt},{"../../core":65,path:23}],151:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Wt){if(Wt&&Wt.__esModule)return Wt;var jt={};if(null!=Wt)for(var zt in Wt)Object.prototype.hasOwnProperty.call(Wt,zt)&&(jt[zt]=Wt[zt]);return jt.default=Wt,jt}(Bt("../../core")),Yt=(Bt("path"),function(Wt){function jt(){return function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,jt),function(zt,Vt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&("object"==typeof Vt||"function"==typeof Vt)?Vt:zt}(this,Wt.call(this,"\nattribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nuniform vec4 filterArea;\n\nvarying vec2 vTextureCoord;\n\nvec2 mapCoord( vec2 coord )\n{\n    coord *= filterArea.xy;\n    coord += filterArea.zw;\n\n    return coord;\n}\n\nvec2 unmapCoord( vec2 coord )\n{\n    coord -= filterArea.zw;\n    coord /= filterArea.xy;\n\n    return coord;\n}\n\nvoid texcoords(vec2 fragCoord, vec2 resolution,\n               out vec2 v_rgbNW, out vec2 v_rgbNE,\n               out vec2 v_rgbSW, out vec2 v_rgbSE,\n               out vec2 v_rgbM) {\n    vec2 inverseVP = 1.0 / resolution.xy;\n    v_rgbNW = (fragCoord + vec2(-1.0, -1.0)) * inverseVP;\n    v_rgbNE = (fragCoord + vec2(1.0, -1.0)) * inverseVP;\n    v_rgbSW = (fragCoord + vec2(-1.0, 1.0)) * inverseVP;\n    v_rgbSE = (fragCoord + vec2(1.0, 1.0)) * inverseVP;\n    v_rgbM = vec2(fragCoord * inverseVP);\n}\n\nvoid main(void) {\n\n   gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n   vTextureCoord = aTextureCoord;\n\n   vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n   texcoords(fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n}","varying vec2 v_rgbNW;\nvarying vec2 v_rgbNE;\nvarying vec2 v_rgbSW;\nvarying vec2 v_rgbSE;\nvarying vec2 v_rgbM;\n\nvarying vec2 vTextureCoord;\nuniform sampler2D uSampler;\nuniform vec4 filterArea;\n\n/**\n Basic FXAA implementation based on the code on geeks3d.com with the\n modification that the texture2DLod stuff was removed since it's\n unsupported by WebGL.\n \n --\n \n From:\n https://github.com/mitsuhiko/webgl-meincraft\n \n Copyright (c) 2011 by Armin Ronacher.\n \n Some rights reserved.\n \n Redistribution and use in source and binary forms, with or without\n modification, are permitted provided that the following conditions are\n met:\n \n * Redistributions of source code must retain the above copyright\n notice, this list of conditions and the following disclaimer.\n \n * Redistributions in binary form must reproduce the above\n copyright notice, this list of conditions and the following\n disclaimer in the documentation and/or other materials provided\n with the distribution.\n \n * The names of the contributors may not be used to endorse or\n promote products derived from this software without specific\n prior written permission.\n \n THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS\n \"AS IS\" AND ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT\n LIMITED TO, THE IMPLIED WARRANTIES OF MERCHANTABILITY AND FITNESS FOR\n A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT SHALL THE COPYRIGHT\n OWNER OR CONTRIBUTORS BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL,\n SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT\n LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE,\n DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND ON ANY\n THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT\n (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE\n OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.\n */\n\n#ifndef FXAA_REDUCE_MIN\n#define FXAA_REDUCE_MIN   (1.0/ 128.0)\n#endif\n#ifndef FXAA_REDUCE_MUL\n#define FXAA_REDUCE_MUL   (1.0 / 8.0)\n#endif\n#ifndef FXAA_SPAN_MAX\n#define FXAA_SPAN_MAX     8.0\n#endif\n\n//optimized version for mobile, where dependent\n//texture reads can be a bottleneck\nvec4 fxaa(sampler2D tex, vec2 fragCoord, vec2 resolution,\n          vec2 v_rgbNW, vec2 v_rgbNE,\n          vec2 v_rgbSW, vec2 v_rgbSE,\n          vec2 v_rgbM) {\n    vec4 color;\n    mediump vec2 inverseVP = vec2(1.0 / resolution.x, 1.0 / resolution.y);\n    vec3 rgbNW = texture2D(tex, v_rgbNW).xyz;\n    vec3 rgbNE = texture2D(tex, v_rgbNE).xyz;\n    vec3 rgbSW = texture2D(tex, v_rgbSW).xyz;\n    vec3 rgbSE = texture2D(tex, v_rgbSE).xyz;\n    vec4 texColor = texture2D(tex, v_rgbM);\n    vec3 rgbM  = texColor.xyz;\n    vec3 luma = vec3(0.299, 0.587, 0.114);\n    float lumaNW = dot(rgbNW, luma);\n    float lumaNE = dot(rgbNE, luma);\n    float lumaSW = dot(rgbSW, luma);\n    float lumaSE = dot(rgbSE, luma);\n    float lumaM  = dot(rgbM,  luma);\n    float lumaMin = min(lumaM, min(min(lumaNW, lumaNE), min(lumaSW, lumaSE)));\n    float lumaMax = max(lumaM, max(max(lumaNW, lumaNE), max(lumaSW, lumaSE)));\n    \n    mediump vec2 dir;\n    dir.x = -((lumaNW + lumaNE) - (lumaSW + lumaSE));\n    dir.y =  ((lumaNW + lumaSW) - (lumaNE + lumaSE));\n    \n    float dirReduce = max((lumaNW + lumaNE + lumaSW + lumaSE) *\n                          (0.25 * FXAA_REDUCE_MUL), FXAA_REDUCE_MIN);\n    \n    float rcpDirMin = 1.0 / (min(abs(dir.x), abs(dir.y)) + dirReduce);\n    dir = min(vec2(FXAA_SPAN_MAX, FXAA_SPAN_MAX),\n              max(vec2(-FXAA_SPAN_MAX, -FXAA_SPAN_MAX),\n                  dir * rcpDirMin)) * inverseVP;\n    \n    vec3 rgbA = 0.5 * (\n                       texture2D(tex, fragCoord * inverseVP + dir * (1.0 / 3.0 - 0.5)).xyz +\n                       texture2D(tex, fragCoord * inverseVP + dir * (2.0 / 3.0 - 0.5)).xyz);\n    vec3 rgbB = rgbA * 0.5 + 0.25 * (\n                                     texture2D(tex, fragCoord * inverseVP + dir * -0.5).xyz +\n                                     texture2D(tex, fragCoord * inverseVP + dir * 0.5).xyz);\n    \n    float lumaB = dot(rgbB, luma);\n    if ((lumaB < lumaMin) || (lumaB > lumaMax))\n        color = vec4(rgbA, texColor.a);\n    else\n        color = vec4(rgbB, texColor.a);\n    return color;\n}\n\nvoid main() {\n\n      vec2 fragCoord = vTextureCoord * filterArea.xy;\n\n      vec4 color;\n\n    color = fxaa(uSampler, fragCoord, filterArea.xy, v_rgbNW, v_rgbNE, v_rgbSW, v_rgbSE, v_rgbM);\n\n      gl_FragColor = color;\n}\n"))}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(jt,Wt),jt}(Ht.Filter));Xt.default=Yt},{"../../core":65,path:23}],152:[function(Bt,Gt,Xt){function Ht(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Xt.__esModule=!0;var Yt=Bt("./fxaa/FXAAFilter");Object.defineProperty(Xt,"FXAAFilter",{enumerable:!0,get:function(){return Ht(Yt).default}});var Wt=Bt("./noise/NoiseFilter");Object.defineProperty(Xt,"NoiseFilter",{enumerable:!0,get:function(){return Ht(Wt).default}});var jt=Bt("./displacement/DisplacementFilter");Object.defineProperty(Xt,"DisplacementFilter",{enumerable:!0,get:function(){return Ht(jt).default}});var zt=Bt("./blur/BlurFilter");Object.defineProperty(Xt,"BlurFilter",{enumerable:!0,get:function(){return Ht(zt).default}});var Vt=Bt("./blur/BlurXFilter");Object.defineProperty(Xt,"BlurXFilter",{enumerable:!0,get:function(){return Ht(Vt).default}});var qt=Bt("./blur/BlurYFilter");Object.defineProperty(Xt,"BlurYFilter",{enumerable:!0,get:function(){return Ht(qt).default}});var Kt=Bt("./colormatrix/ColorMatrixFilter");Object.defineProperty(Xt,"ColorMatrixFilter",{enumerable:!0,get:function(){return Ht(Kt).default}});var Qt=Bt("./void/VoidFilter");Object.defineProperty(Xt,"VoidFilter",{enumerable:!0,get:function(){return Ht(Qt).default}})},{"./blur/BlurFilter":143,"./blur/BlurXFilter":144,"./blur/BlurYFilter":145,"./colormatrix/ColorMatrixFilter":149,"./displacement/DisplacementFilter":150,"./fxaa/FXAAFilter":151,"./noise/NoiseFilter":153,"./void/VoidFilter":154}],153:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Wt=(Bt("path"),function(jt){function zt(){var Vt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:.5,qt=1<arguments.length&&void 0!==arguments[1]?arguments[1]:Math.random();!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,zt);var Kt=function(Qt,Zt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&("object"==typeof Zt||"function"==typeof Zt)?Zt:Qt}(this,jt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","precision highp float;\n\nvarying vec2 vTextureCoord;\nvarying vec4 vColor;\n\nuniform float uNoise;\nuniform float uSeed;\nuniform sampler2D uSampler;\n\nfloat rand(vec2 co)\n{\n    return fract(sin(dot(co.xy, vec2(12.9898, 78.233))) * 43758.5453);\n}\n\nvoid main()\n{\n    vec4 color = texture2D(uSampler, vTextureCoord);\n    float randomValue = rand(gl_FragCoord.xy * uSeed);\n    float diff = (randomValue - 0.5) * uNoise;\n\n    // Un-premultiply alpha before applying the color matrix. See issue #3539.\n    if (color.a > 0.0) {\n        color.rgb /= color.a;\n    }\n\n    color.r += diff;\n    color.g += diff;\n    color.b += diff;\n\n    // Premultiply alpha again.\n    color.rgb *= color.a;\n\n    gl_FragColor = color;\n}\n"));return Kt.noise=Vt,Kt.seed=qt,Kt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),Ht(zt,[{key:"noise",get:function(){return this.uniforms.uNoise},set:function(Vt){this.uniforms.uNoise=Vt}},{key:"seed",get:function(){return this.uniforms.uSeed},set:function(Vt){this.uniforms.uSeed=Vt}}]),zt}(Yt.Filter));Xt.default=Wt},{"../../core":65,path:23}],154:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Wt){if(Wt&&Wt.__esModule)return Wt;var jt={};if(null!=Wt)for(var zt in Wt)Object.prototype.hasOwnProperty.call(Wt,zt)&&(jt[zt]=Wt[zt]);return jt.default=Wt,jt}(Bt("../../core")),Yt=(Bt("path"),function(Wt){function jt(){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt);var zt=function(Vt,qt){if(!Vt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return qt&&("object"==typeof qt||"function"==typeof qt)?qt:Vt}(this,Wt.call(this,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n    vTextureCoord = aTextureCoord;\n}","varying vec2 vTextureCoord;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n   gl_FragColor = texture2D(uSampler, vTextureCoord);\n}\n"));return zt.glShaderKey="void",zt}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(jt,Wt),jt}(Ht.Filter));Xt.default=Yt},{"../../core":65,path:23}],155:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../core")),Wt=function(){function jt(){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.global=new Yt.Point,this.target=null,this.originalEvent=null,this.identifier=null,this.isPrimary=!1,this.button=0,this.buttons=0,this.width=0,this.height=0,this.tiltX=0,this.tiltY=0,this.pointerType=null,this.pressure=0,this.rotationAngle=0,this.twist=0,this.tangentialPressure=0}return jt.prototype.getLocalPosition=function(zt,Vt,qt){return zt.worldTransform.applyInverse(qt||this.global,Vt)},jt.prototype._copyEvent=function(zt){zt.isPrimary&&(this.isPrimary=!0),this.button=zt.button,this.buttons=zt.buttons,this.width=zt.width,this.height=zt.height,this.tiltX=zt.tiltX,this.tiltY=zt.tiltY,this.pointerType=zt.pointerType,this.pressure=zt.pressure,this.rotationAngle=zt.rotationAngle,this.twist=zt.twist||0,this.tangentialPressure=zt.tangentialPressure||0},jt.prototype._reset=function(){this.isPrimary=!1},Ht(jt,[{key:"pointerId",get:function(){return this.identifier}}]),jt}();Xt.default=Wt},{"../core":65}],156:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Yt(){!function(Wt,jt){if(!(Wt instanceof jt))throw new TypeError("Cannot call a class as a function")}(this,Yt),this.stopped=!1,this.target=null,this.currentTarget=null,this.type=null,this.data=null}return Yt.prototype.stopPropagation=function(){this.stopped=!0},Yt.prototype._reset=function(){this.stopped=!1,this.currentTarget=null,this.target=null},Yt}();Xt.default=Ht},{}],157:[function(Bt,Gt,Xt){function Ht($t){return $t&&$t.__esModule?$t:{default:$t}}Xt.__esModule=!0;var Yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function($t){return typeof $t}:function($t){return $t&&"function"==typeof Symbol&&$t.constructor===Symbol&&$t!==Symbol.prototype?"symbol":typeof $t},Wt=function($t){if($t&&$t.__esModule)return $t;var en={};if(null!=$t)for(var tn in $t)Object.prototype.hasOwnProperty.call($t,tn)&&(en[tn]=$t[tn]);return en.default=$t,en}(Bt("../core")),jt=Ht(Bt("./InteractionData")),zt=Ht(Bt("./InteractionEvent")),Vt=Ht(Bt("./InteractionTrackingData")),qt=Ht(Bt("eventemitter3")),Kt=Ht(Bt("./interactiveTarget"));Wt.utils.mixins.delayMixin(Wt.DisplayObject.prototype,Kt.default);var Qt="MOUSE",Zt={target:null,data:{global:null}},Jt=function($t){function en(tn,nn){!function(an,on){if(!(an instanceof on))throw new TypeError("Cannot call a class as a function")}(this,en);var rn=function(an,on){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:an}(this,$t.call(this));return nn=nn||{},rn.renderer=tn,rn.autoPreventDefault=void 0===nn.autoPreventDefault||nn.autoPreventDefault,rn.interactionFrequency=nn.interactionFrequency||10,rn.mouse=new jt.default,rn.mouse.identifier=Qt,rn.mouse.global.set(-999999),rn.activeInteractionData={},rn.activeInteractionData[Qt]=rn.mouse,rn.interactionDataPool=[],rn.eventData=new zt.default,rn.interactionDOMElement=null,rn.moveWhenInside=!1,rn.eventsAdded=!1,rn.mouseOverRenderer=!1,rn.supportsTouchEvents="ontouchstart"in window,rn.supportsPointerEvents=!!window.PointerEvent,rn.onPointerUp=rn.onPointerUp.bind(rn),rn.processPointerUp=rn.processPointerUp.bind(rn),rn.onPointerCancel=rn.onPointerCancel.bind(rn),rn.processPointerCancel=rn.processPointerCancel.bind(rn),rn.onPointerDown=rn.onPointerDown.bind(rn),rn.processPointerDown=rn.processPointerDown.bind(rn),rn.onPointerMove=rn.onPointerMove.bind(rn),rn.processPointerMove=rn.processPointerMove.bind(rn),rn.onPointerOut=rn.onPointerOut.bind(rn),rn.processPointerOverOut=rn.processPointerOverOut.bind(rn),rn.onPointerOver=rn.onPointerOver.bind(rn),rn.cursorStyles={default:"inherit",pointer:"pointer"},rn.currentCursorMode=null,rn.cursor=null,rn._tempPoint=new Wt.Point,rn.resolution=1,rn.setTargetElement(rn.renderer.view,rn.renderer.resolution),rn}return function(tn,nn){if("function"!=typeof nn&&null!==nn)throw new TypeError("Super expression must either be null or a function, not "+typeof nn);tn.prototype=Object.create(nn&&nn.prototype,{constructor:{value:tn,enumerable:!1,writable:!0,configurable:!0}}),nn&&(Object.setPrototypeOf?Object.setPrototypeOf(tn,nn):tn.__proto__=nn)}(en,$t),en.prototype.hitTest=function(tn,nn){return Zt.target=null,Zt.data.global=tn,nn||(nn=this.renderer._lastObjectRendered),this.processInteractive(Zt,nn,null,!0),Zt.target},en.prototype.setTargetElement=function(tn){var nn=1<arguments.length&&void 0!==arguments[1]?arguments[1]:1;this.removeEvents(),this.interactionDOMElement=tn,this.resolution=nn,this.addEvents()},en.prototype.addEvents=function(){this.interactionDOMElement&&(Wt.ticker.shared.add(this.update,this,Wt.UPDATE_PRIORITY.INTERACTION),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="none",this.interactionDOMElement.style["-ms-touch-action"]="none"):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]="none"),this.supportsPointerEvents?(window.document.addEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("pointerover",this.onPointerOver,!0),window.addEventListener("pointercancel",this.onPointerCancel,!0),window.addEventListener("pointerup",this.onPointerUp,!0)):(window.document.addEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.addEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.addEventListener("mouseover",this.onPointerOver,!0),window.addEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.addEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.addEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.addEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.addEventListener("touchmove",this.onPointerMove,!0)),this.eventsAdded=!0)},en.prototype.removeEvents=function(){this.interactionDOMElement&&(Wt.ticker.shared.remove(this.update,this),window.navigator.msPointerEnabled?(this.interactionDOMElement.style["-ms-content-zooming"]="",this.interactionDOMElement.style["-ms-touch-action"]=""):this.supportsPointerEvents&&(this.interactionDOMElement.style["touch-action"]=""),this.supportsPointerEvents?(window.document.removeEventListener("pointermove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("pointerdown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("pointerleave",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("pointerover",this.onPointerOver,!0),window.removeEventListener("pointercancel",this.onPointerCancel,!0),window.removeEventListener("pointerup",this.onPointerUp,!0)):(window.document.removeEventListener("mousemove",this.onPointerMove,!0),this.interactionDOMElement.removeEventListener("mousedown",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("mouseout",this.onPointerOut,!0),this.interactionDOMElement.removeEventListener("mouseover",this.onPointerOver,!0),window.removeEventListener("mouseup",this.onPointerUp,!0)),this.supportsTouchEvents&&(this.interactionDOMElement.removeEventListener("touchstart",this.onPointerDown,!0),this.interactionDOMElement.removeEventListener("touchcancel",this.onPointerCancel,!0),this.interactionDOMElement.removeEventListener("touchend",this.onPointerUp,!0),this.interactionDOMElement.removeEventListener("touchmove",this.onPointerMove,!0)),this.interactionDOMElement=null,this.eventsAdded=!1)},en.prototype.update=function(tn){if(this._deltaTime+=tn,!(this._deltaTime<this.interactionFrequency)&&(this._deltaTime=0,this.interactionDOMElement))if(this.didMove)this.didMove=!1;else{for(var nn in this.cursor=null,this.activeInteractionData)if(this.activeInteractionData.hasOwnProperty(nn)){var rn=this.activeInteractionData[nn];if(rn.originalEvent&&"touch"!==rn.pointerType){var an=this.configureInteractionEventForDOMEvent(this.eventData,rn.originalEvent,rn);this.processInteractive(an,this.renderer._lastObjectRendered,this.processPointerOverOut,!0)}}this.setCursorMode(this.cursor)}},en.prototype.setCursorMode=function(tn){if(tn=tn||"default",this.currentCursorMode!==tn){this.currentCursorMode=tn;var nn=this.cursorStyles[tn];if(nn)switch(void 0===nn?"undefined":Yt(nn)){case"string":this.interactionDOMElement.style.cursor=nn;break;case"function":nn(tn);break;case"object":Object.assign(this.interactionDOMElement.style,nn);}else"string"!=typeof tn||Object.prototype.hasOwnProperty.call(this.cursorStyles,tn)||(this.interactionDOMElement.style.cursor=tn)}},en.prototype.dispatchEvent=function(tn,nn,rn){rn.stopped||(rn.currentTarget=tn,rn.type=nn,tn.emit(nn,rn),tn[nn]&&tn[nn](rn))},en.prototype.mapPositionToPoint=function(tn,nn,rn){var an=this.interactionDOMElement.parentElement?this.interactionDOMElement.getBoundingClientRect():{x:0,y:0,width:0,height:0};var on=navigator.isCocoonJS?this.resolution:1/this.resolution;tn.x=(nn-an.left)*(this.interactionDOMElement.width/an.width)*on,tn.y=(rn-an.top)*(this.interactionDOMElement.height/an.height)*on},en.prototype.processInteractive=function(tn,nn,rn,an,on){if(!nn||!nn.visible)return!1;var sn=tn.data.global,dn=!1,ln=on=nn.interactive||on;if(nn.hitArea?ln=!1:an&&nn._mask&&(nn._mask.containsPoint(sn)||(an=!1)),nn.interactiveChildren&&nn.children)for(var un=nn.children,pn=un.length-1;0<=pn;pn--){var cn=un[pn],hn=this.processInteractive(tn,cn,rn,an,ln);if(hn){if(!cn.parent)continue;ln=!1,hn&&(tn.target&&(an=!1),dn=!0)}}return on&&(an&&!tn.target&&(nn.hitArea?(nn.worldTransform.applyInverse(sn,this._tempPoint),nn.hitArea.contains(this._tempPoint.x,this._tempPoint.y)&&(dn=!0)):nn.containsPoint&&nn.containsPoint(sn)&&(dn=!0)),nn.interactive&&(dn&&!tn.target&&(tn.target=nn),rn&&rn(tn,nn,!!dn))),dn},en.prototype.onPointerDown=function(tn){if(!this.supportsTouchEvents||"touch"!==tn.pointerType){var nn=this.normalizeToPointerData(tn);this.autoPreventDefault&&nn[0].isNormalized&&tn.preventDefault();for(var rn=nn.length,an=0;an<rn;an++){var on=nn[an],sn=this.getInteractionDataForPointerId(on),dn=this.configureInteractionEventForDOMEvent(this.eventData,on,sn);if(dn.data.originalEvent=tn,this.processInteractive(dn,this.renderer._lastObjectRendered,this.processPointerDown,!0),this.emit("pointerdown",dn),"touch"===on.pointerType)this.emit("touchstart",dn);else if("mouse"===on.pointerType||"pen"===on.pointerType){var ln=2===on.button;this.emit(ln?"rightdown":"mousedown",this.eventData)}}}},en.prototype.processPointerDown=function(tn,nn,rn){var an=tn.data,on=tn.data.identifier;if(rn)if(nn.trackedPointers[on]||(nn.trackedPointers[on]=new Vt.default(on)),this.dispatchEvent(nn,"pointerdown",tn),"touch"===an.pointerType)this.dispatchEvent(nn,"touchstart",tn);else if("mouse"===an.pointerType||"pen"===an.pointerType){var sn=2===an.button;sn?nn.trackedPointers[on].rightDown=!0:nn.trackedPointers[on].leftDown=!0,this.dispatchEvent(nn,sn?"rightdown":"mousedown",tn)}},en.prototype.onPointerComplete=function(tn,nn,rn){for(var an=this.normalizeToPointerData(tn),on=an.length,sn=tn.target===this.interactionDOMElement?"":"outside",dn=0;dn<on;dn++){var ln=an[dn],un=this.getInteractionDataForPointerId(ln),pn=this.configureInteractionEventForDOMEvent(this.eventData,ln,un);if(pn.data.originalEvent=tn,this.processInteractive(pn,this.renderer._lastObjectRendered,rn,nn||!sn),this.emit(nn?"pointercancel":"pointerup"+sn,pn),"mouse"===ln.pointerType||"pen"===ln.pointerType){var cn=2===ln.button;this.emit(cn?"rightup"+sn:"mouseup"+sn,pn)}else"touch"===ln.pointerType&&(this.emit(nn?"touchcancel":"touchend"+sn,pn),this.releaseInteractionDataForPointerId(ln.pointerId,un))}},en.prototype.onPointerCancel=function(tn){this.supportsTouchEvents&&"touch"===tn.pointerType||this.onPointerComplete(tn,!0,this.processPointerCancel)},en.prototype.processPointerCancel=function(tn,nn){var rn=tn.data,an=tn.data.identifier;void 0!==nn.trackedPointers[an]&&(delete nn.trackedPointers[an],this.dispatchEvent(nn,"pointercancel",tn),"touch"===rn.pointerType&&this.dispatchEvent(nn,"touchcancel",tn))},en.prototype.onPointerUp=function(tn){this.supportsTouchEvents&&"touch"===tn.pointerType||this.onPointerComplete(tn,!1,this.processPointerUp)},en.prototype.processPointerUp=function(tn,nn,rn){var an=tn.data,on=tn.data.identifier,sn=nn.trackedPointers[on],dn="touch"===an.pointerType;if("mouse"===an.pointerType||"pen"===an.pointerType){var ln=2===an.button,un=Vt.default.FLAGS,pn=ln?un.RIGHT_DOWN:un.LEFT_DOWN,cn=void 0!==sn&&sn.flags&pn;rn?(this.dispatchEvent(nn,ln?"rightup":"mouseup",tn),cn&&this.dispatchEvent(nn,ln?"rightclick":"click",tn)):cn&&this.dispatchEvent(nn,ln?"rightupoutside":"mouseupoutside",tn),sn&&(ln?sn.rightDown=!1:sn.leftDown=!1)}rn?(this.dispatchEvent(nn,"pointerup",tn),dn&&this.dispatchEvent(nn,"touchend",tn),sn&&(this.dispatchEvent(nn,"pointertap",tn),dn&&(this.dispatchEvent(nn,"tap",tn),sn.over=!1))):sn&&(this.dispatchEvent(nn,"pointerupoutside",tn),dn&&this.dispatchEvent(nn,"touchendoutside",tn)),sn&&sn.none&&delete nn.trackedPointers[on]},en.prototype.onPointerMove=function(tn){if(!this.supportsTouchEvents||"touch"!==tn.pointerType){var nn=this.normalizeToPointerData(tn);"mouse"===nn[0].pointerType&&(this.didMove=!0,this.cursor=null);for(var rn=nn.length,an=0;an<rn;an++){var on=nn[an],sn=this.getInteractionDataForPointerId(on),dn=this.configureInteractionEventForDOMEvent(this.eventData,on,sn);dn.data.originalEvent=tn;var ln="touch"!==on.pointerType||this.moveWhenInside;this.processInteractive(dn,this.renderer._lastObjectRendered,this.processPointerMove,ln),this.emit("pointermove",dn),"touch"===on.pointerType&&this.emit("touchmove",dn),"mouse"!==on.pointerType&&"pen"!==on.pointerType||this.emit("mousemove",dn)}"mouse"===nn[0].pointerType&&this.setCursorMode(this.cursor)}},en.prototype.processPointerMove=function(tn,nn,rn){var an=tn.data,on="touch"===an.pointerType,sn="mouse"===an.pointerType||"pen"===an.pointerType;sn&&this.processPointerOverOut(tn,nn,rn),this.moveWhenInside&&!rn||(this.dispatchEvent(nn,"pointermove",tn),on&&this.dispatchEvent(nn,"touchmove",tn),sn&&this.dispatchEvent(nn,"mousemove",tn))},en.prototype.onPointerOut=function(tn){if(!this.supportsTouchEvents||"touch"!==tn.pointerType){var nn=this.normalizeToPointerData(tn)[0];"mouse"===nn.pointerType&&(this.mouseOverRenderer=!1,this.setCursorMode(null));var rn=this.getInteractionDataForPointerId(nn),an=this.configureInteractionEventForDOMEvent(this.eventData,nn,rn);an.data.originalEvent=nn,this.processInteractive(an,this.renderer._lastObjectRendered,this.processPointerOverOut,!1),this.emit("pointerout",an),"mouse"===nn.pointerType||"pen"===nn.pointerType?this.emit("mouseout",an):this.releaseInteractionDataForPointerId(rn.identifier)}},en.prototype.processPointerOverOut=function(tn,nn,rn){var an=tn.data,on=tn.data.identifier,sn="mouse"===an.pointerType||"pen"===an.pointerType,dn=nn.trackedPointers[on];rn&&!dn&&(dn=nn.trackedPointers[on]=new Vt.default(on)),void 0!==dn&&(rn&&this.mouseOverRenderer?(dn.over||(dn.over=!0,this.dispatchEvent(nn,"pointerover",tn),sn&&this.dispatchEvent(nn,"mouseover",tn)),sn&&null===this.cursor&&(this.cursor=nn.cursor)):dn.over&&(dn.over=!1,this.dispatchEvent(nn,"pointerout",this.eventData),sn&&this.dispatchEvent(nn,"mouseout",tn),dn.none&&delete nn.trackedPointers[on]))},en.prototype.onPointerOver=function(tn){var nn=this.normalizeToPointerData(tn)[0],rn=this.getInteractionDataForPointerId(nn),an=this.configureInteractionEventForDOMEvent(this.eventData,nn,rn);an.data.originalEvent=nn,"mouse"===nn.pointerType&&(this.mouseOverRenderer=!0),this.emit("pointerover",an),"mouse"!==nn.pointerType&&"pen"!==nn.pointerType||this.emit("mouseover",an)},en.prototype.getInteractionDataForPointerId=function(tn){var nn=tn.pointerId,rn;return nn===Qt||"mouse"===tn.pointerType?rn=this.mouse:this.activeInteractionData[nn]?rn=this.activeInteractionData[nn]:((rn=this.interactionDataPool.pop()||new jt.default).identifier=nn,this.activeInteractionData[nn]=rn),rn._copyEvent(tn),rn},en.prototype.releaseInteractionDataForPointerId=function(tn){var nn=this.activeInteractionData[tn];nn&&(delete this.activeInteractionData[tn],nn._reset(),this.interactionDataPool.push(nn))},en.prototype.configureInteractionEventForDOMEvent=function(tn,nn,rn){return tn.data=rn,this.mapPositionToPoint(rn.global,nn.clientX,nn.clientY),navigator.isCocoonJS&&"touch"===nn.pointerType&&(rn.global.x/=this.resolution,rn.global.y/=this.resolution),"touch"===nn.pointerType&&(nn.globalX=rn.global.x,nn.globalY=rn.global.y),rn.originalEvent=nn,tn._reset(),tn},en.prototype.normalizeToPointerData=function(tn){var nn=[];if(this.supportsTouchEvents&&tn instanceof TouchEvent)for(var rn=0,an=tn.changedTouches.length,on;rn<an;rn++)on=tn.changedTouches[rn],void 0===on.button&&(on.button=tn.touches.length?1:0),void 0===on.buttons&&(on.buttons=tn.touches.length?1:0),void 0===on.isPrimary&&(on.isPrimary=1===tn.touches.length&&"touchstart"===tn.type),void 0===on.width&&(on.width=on.radiusX||1),void 0===on.height&&(on.height=on.radiusY||1),void 0===on.tiltX&&(on.tiltX=0),void 0===on.tiltY&&(on.tiltY=0),void 0===on.pointerType&&(on.pointerType="touch"),void 0===on.pointerId&&(on.pointerId=on.identifier||0),void 0===on.pressure&&(on.pressure=on.force||.5),on.twist=0,on.tangentialPressure=0,void 0===on.layerX&&(on.layerX=on.offsetX=on.clientX),void 0===on.layerY&&(on.layerY=on.offsetY=on.clientY),on.isNormalized=!0,nn.push(on);else!(tn instanceof MouseEvent)||this.supportsPointerEvents&&tn instanceof window.PointerEvent?nn.push(tn):(void 0===tn.isPrimary&&(tn.isPrimary=!0),void 0===tn.width&&(tn.width=1),void 0===tn.height&&(tn.height=1),void 0===tn.tiltX&&(tn.tiltX=0),void 0===tn.tiltY&&(tn.tiltY=0),void 0===tn.pointerType&&(tn.pointerType="mouse"),void 0===tn.pointerId&&(tn.pointerId=Qt),void 0===tn.pressure&&(tn.pressure=.5),tn.twist=0,tn.tangentialPressure=0,tn.isNormalized=!0,nn.push(tn));return nn},en.prototype.destroy=function(){this.removeEvents(),this.removeAllListeners(),this.renderer=null,this.mouse=null,this.eventData=null,this.interactionDOMElement=null,this.onPointerDown=null,this.processPointerDown=null,this.onPointerUp=null,this.processPointerUp=null,this.onPointerCancel=null,this.processPointerCancel=null,this.onPointerMove=null,this.processPointerMove=null,this.onPointerOut=null,this.processPointerOverOut=null,this.onPointerOver=null,this._tempPoint=null},en}(qt.default);Xt.default=Jt,Wt.WebGLRenderer.registerPlugin("interaction",Jt),Wt.CanvasRenderer.registerPlugin("interaction",Jt)},{"../core":65,"./InteractionData":155,"./InteractionEvent":156,"./InteractionTrackingData":158,"./interactiveTarget":160,eventemitter3:3}],158:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Wt(jt,zt){for(var Vt=0,qt;Vt<zt.length;Vt++)qt=zt[Vt],qt.enumerable=qt.enumerable||!1,qt.configurable=!0,"value"in qt&&(qt.writable=!0),Object.defineProperty(jt,qt.key,qt)}return function(jt,zt,Vt){return zt&&Wt(jt.prototype,zt),Vt&&Wt(jt,Vt),jt}}(),Yt=function(){function Wt(jt){!function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),this._pointerId=jt,this._flags=Wt.FLAGS.NONE}return Wt.prototype._doSet=function(jt,zt){this._flags=zt?this._flags|jt:this._flags&~jt},Ht(Wt,[{key:"pointerId",get:function(){return this._pointerId}},{key:"flags",get:function(){return this._flags},set:function(jt){this._flags=jt}},{key:"none",get:function(){return this._flags===this.constructor.FLAGS.NONE}},{key:"over",get:function(){return 0!=(this._flags&this.constructor.FLAGS.OVER)},set:function(jt){this._doSet(this.constructor.FLAGS.OVER,jt)}},{key:"rightDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.RIGHT_DOWN)},set:function(jt){this._doSet(this.constructor.FLAGS.RIGHT_DOWN,jt)}},{key:"leftDown",get:function(){return 0!=(this._flags&this.constructor.FLAGS.LEFT_DOWN)},set:function(jt){this._doSet(this.constructor.FLAGS.LEFT_DOWN,jt)}}]),Wt}();Xt.default=Yt,Yt.FLAGS=Object.freeze({NONE:0,OVER:1,LEFT_DOWN:2,RIGHT_DOWN:4})},{}],159:[function(Bt,Gt,Xt){function Ht(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Yt=Bt("./InteractionData");Object.defineProperty(Xt,"InteractionData",{enumerable:!0,get:function(){return Ht(Yt).default}});var Wt=Bt("./InteractionManager");Object.defineProperty(Xt,"InteractionManager",{enumerable:!0,get:function(){return Ht(Wt).default}});var jt=Bt("./interactiveTarget");Object.defineProperty(Xt,"interactiveTarget",{enumerable:!0,get:function(){return Ht(jt).default}});var zt=Bt("./InteractionTrackingData");Object.defineProperty(Xt,"InteractionTrackingData",{enumerable:!0,get:function(){return Ht(zt).default}});var Vt=Bt("./InteractionEvent");Object.defineProperty(Xt,"InteractionEvent",{enumerable:!0,get:function(){return Ht(Vt).default}})},{"./InteractionData":155,"./InteractionEvent":156,"./InteractionManager":157,"./InteractionTrackingData":158,"./interactiveTarget":160}],160:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default={interactive:!1,interactiveChildren:!0,hitArea:null,get buttonMode(){return"pointer"===this.cursor},set buttonMode(Ht){Ht?this.cursor="pointer":"pointer"===this.cursor&&(this.cursor=null)},cursor:null,get trackedPointers(){return void 0===this._trackedPointers&&(this._trackedPointers={}),this._trackedPointers},_trackedPointers:void 0}},{}],161:[function(Bt,Gt,Xt){function Ht(Vt,qt){Vt.bitmapFont=zt.BitmapText.registerFont(Vt.data,qt)}Xt.__esModule=!0,Xt.parse=Ht,Xt.default=function(){return function(Vt,qt){if(!(Vt.data&&Vt.type===jt.Resource.TYPE.XML))qt();else if(0!==Vt.data.getElementsByTagName("page").length&&0!==Vt.data.getElementsByTagName("info").length&&null!==Vt.data.getElementsByTagName("info")[0].getAttribute("face")){var Kt=Vt.isDataUrl?"":Yt.dirname(Vt.url);Vt.isDataUrl&&("."===Kt&&(Kt=""),this.baseUrl&&Kt&&"/"===this.baseUrl.charAt(this.baseUrl.length-1)&&(Kt+="/")),(Kt=Kt.replace(this.baseUrl,""))&&"/"!==Kt.charAt(Kt.length-1)&&(Kt+="/");var Qt=Kt+Vt.data.getElementsByTagName("page")[0].getAttribute("file");if(Wt.utils.TextureCache[Qt])Ht(Vt,Wt.utils.TextureCache[Qt]),qt();else{var Zt={crossOrigin:Vt.crossOrigin,loadType:jt.Resource.LOAD_TYPE.IMAGE,metadata:Vt.metadata.imageMetadata,parentResource:Vt};this.add(Vt.name+"_image",Qt,Zt,function(Jt){Ht(Vt,Jt.texture),qt()})}}else qt()}};var Yt=function(Vt){if(Vt&&Vt.__esModule)return Vt;var qt={};if(null!=Vt)for(var Kt in Vt)Object.prototype.hasOwnProperty.call(Vt,Kt)&&(qt[Kt]=Vt[Kt]);return qt.default=Vt,qt}(Bt("path")),Wt=Bt("../core"),jt=Bt("resource-loader"),zt=Bt("../extras")},{"../core":65,"../extras":141,path:23,"resource-loader":36}],162:[function(Bt,Gt,Xt){function Ht(Zt){return Zt&&Zt.__esModule?Zt:{default:Zt}}Xt.__esModule=!0,Xt.shared=Xt.Resource=Xt.textureParser=Xt.getResourcePath=Xt.spritesheetParser=Xt.parseBitmapFontData=Xt.bitmapFontParser=Xt.Loader=void 0;var Yt=Bt("./bitmapFontParser");Object.defineProperty(Xt,"bitmapFontParser",{enumerable:!0,get:function(){return Ht(Yt).default}}),Object.defineProperty(Xt,"parseBitmapFontData",{enumerable:!0,get:function(){return Yt.parse}});var Wt=Bt("./spritesheetParser");Object.defineProperty(Xt,"spritesheetParser",{enumerable:!0,get:function(){return Ht(Wt).default}}),Object.defineProperty(Xt,"getResourcePath",{enumerable:!0,get:function(){return Wt.getResourcePath}});var jt=Bt("./textureParser");Object.defineProperty(Xt,"textureParser",{enumerable:!0,get:function(){return Ht(jt).default}});var zt=Bt("resource-loader");Object.defineProperty(Xt,"Resource",{enumerable:!0,get:function(){return zt.Resource}});var Vt=Ht(Bt("../core/Application")),qt=Ht(Bt("./loader"));Xt.Loader=qt.default;var Kt=new qt.default;Kt.destroy=function(){},Xt.shared=Kt;var Qt=Vt.default.prototype;Qt._loader=null,Object.defineProperty(Qt,"loader",{get:function(){if(!this._loader){var Zt=this._options.sharedLoader;this._loader=Zt?Kt:new qt.default}return this._loader}}),Qt._parentDestroy=Qt.destroy,Qt.destroy=function(Zt){this._loader&&(this._loader.destroy(),this._loader=null),this._parentDestroy(Zt)}},{"../core/Application":43,"./bitmapFontParser":161,"./loader":163,"./spritesheetParser":164,"./textureParser":165,"resource-loader":36}],163:[function(Bt,Gt,Xt){function Ht(Jt){return Jt&&Jt.__esModule?Jt:{default:Jt}}Xt.__esModule=!0;var Yt=Ht(Bt("resource-loader")),Wt=Bt("resource-loader/lib/middlewares/parsing/blob"),jt=Ht(Bt("eventemitter3")),zt=Ht(Bt("./textureParser")),Vt=Ht(Bt("./spritesheetParser")),qt=Ht(Bt("./bitmapFontParser")),Kt=function(Jt){function $t(en,tn){!function(an,on){if(!(an instanceof on))throw new TypeError("Cannot call a class as a function")}(this,$t);var nn=function(an,on){if(!an)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return on&&("object"==typeof on||"function"==typeof on)?on:an}(this,Jt.call(this,en,tn));jt.default.call(nn);for(var rn=0;rn<$t._pixiMiddleware.length;++rn)nn.use($t._pixiMiddleware[rn]());return nn.onStart.add(function(an){return nn.emit("start",an)}),nn.onProgress.add(function(an,on){return nn.emit("progress",an,on)}),nn.onError.add(function(an,on,sn){return nn.emit("error",an,on,sn)}),nn.onLoad.add(function(an,on){return nn.emit("load",an,on)}),nn.onComplete.add(function(an,on){return nn.emit("complete",an,on)}),nn}return function(en,tn){if("function"!=typeof tn&&null!==tn)throw new TypeError("Super expression must either be null or a function, not "+typeof tn);en.prototype=Object.create(tn&&tn.prototype,{constructor:{value:en,enumerable:!1,writable:!0,configurable:!0}}),tn&&(Object.setPrototypeOf?Object.setPrototypeOf(en,tn):en.__proto__=tn)}($t,Jt),$t.addPixiMiddleware=function(en){$t._pixiMiddleware.push(en)},$t.prototype.destroy=function(){this.removeAllListeners(),this.reset()},$t}(Yt.default);for(var Qt in Xt.default=Kt,jt.default.prototype)Kt.prototype[Qt]=jt.default.prototype[Qt];Kt._pixiMiddleware=[Wt.blobMiddlewareFactory,zt.default,Vt.default,qt.default];var Zt=Yt.default.Resource;Zt.setExtensionXhrType("fnt",Zt.XHR_RESPONSE_TYPE.DOCUMENT)},{"./bitmapFontParser":161,"./spritesheetParser":164,"./textureParser":165,eventemitter3:3,"resource-loader":36,"resource-loader/lib/middlewares/parsing/blob":37}],164:[function(Bt,Gt,Xt){function Ht(zt,Vt){return zt.isDataUrl?zt.data.meta.image:Wt.default.resolve(zt.url.replace(Vt,""),zt.data.meta.image)}Xt.__esModule=!0,Xt.default=function(){return function(zt,Vt){var qt=zt.name+"_image";if(zt.data&&zt.type===Yt.Resource.TYPE.JSON&&zt.data.frames&&!this.resources[qt]){var Kt={crossOrigin:zt.crossOrigin,loadType:Yt.Resource.LOAD_TYPE.IMAGE,metadata:zt.metadata.imageMetadata,parentResource:zt},Qt=Ht(zt,this.baseUrl);this.add(qt,Qt,Kt,function(Zt){var Jt=new jt.Spritesheet(Zt.texture.baseTexture,zt.data,zt.url);Jt.parse(function(){zt.spritesheet=Jt,zt.textures=Jt.textures,Vt()})})}else Vt()}},Xt.getResourcePath=Ht;var Yt=Bt("resource-loader"),Wt=function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("url")),jt=Bt("../core")},{"../core":65,"resource-loader":36,url:29}],165:[function(Bt,Gt,Xt){Xt.__esModule=!0,Xt.default=function(){return function(Wt,jt){Wt.data&&Wt.type===Ht.Resource.TYPE.IMAGE&&(Wt.texture=Yt.default.fromLoader(Wt.data,Wt.url,Wt.name)),jt()}};var Ht=Bt("resource-loader"),Yt=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("../core/textures/Texture"))},{"../core/textures/Texture":115,"resource-loader":36}],166:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function qt(Kt,Qt){for(var Zt=0,Jt;Zt<Qt.length;Zt++)Jt=Qt[Zt],Jt.enumerable=Jt.enumerable||!1,Jt.configurable=!0,"value"in Jt&&(Jt.writable=!0),Object.defineProperty(Kt,Jt.key,Jt)}return function(Kt,Qt,Zt){return Qt&&qt(Kt.prototype,Qt),Zt&&qt(Kt,Zt),Kt}}(),Yt=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Qt in qt)Object.prototype.hasOwnProperty.call(qt,Qt)&&(Kt[Qt]=qt[Qt]);return Kt.default=qt,Kt}(Bt("../core")),Wt=function(qt){return qt&&qt.__esModule?qt:{default:qt}}(Bt("../extras/TextureTransform")),jt=new Yt.Point,zt=new Yt.Polygon,Vt=function(qt){function Kt(Qt,Zt,Jt,$t,en){!function(nn,rn){if(!(nn instanceof rn))throw new TypeError("Cannot call a class as a function")}(this,Kt);var tn=function(nn,rn){if(!nn)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return rn&&("object"==typeof rn||"function"==typeof rn)?rn:nn}(this,qt.call(this));return tn._texture=Qt,tn.uvs=Jt||new Float32Array([0,0,1,0,1,1,0,1]),tn.vertices=Zt||new Float32Array([0,0,100,0,100,100,0,100]),tn.indices=$t||new Uint16Array([0,1,3,2]),tn.dirty=0,tn.indexDirty=0,tn.blendMode=Yt.BLEND_MODES.NORMAL,tn.canvasPadding=0,tn.drawMode=en||Kt.DRAW_MODES.TRIANGLE_MESH,tn.shader=null,tn.tintRgb=new Float32Array([1,1,1]),tn._glDatas={},tn._uvTransform=new Wt.default(Qt),tn.uploadUvTransform=!1,tn.pluginName="mesh",tn}return function(Qt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Qt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Zt):Qt.__proto__=Zt)}(Kt,qt),Kt.prototype._renderWebGL=function(Qt){this.refresh(),Qt.setObjectRenderer(Qt.plugins[this.pluginName]),Qt.plugins[this.pluginName].render(this)},Kt.prototype._renderCanvas=function(Qt){this.refresh(),Qt.plugins[this.pluginName].render(this)},Kt.prototype._onTextureUpdate=function(){this._uvTransform.texture=this._texture,this.refresh()},Kt.prototype.multiplyUvs=function(){this.uploadUvTransform||this._uvTransform.multiplyUvs(this.uvs)},Kt.prototype.refresh=function(Qt){this._uvTransform.update(Qt)&&this._refresh()},Kt.prototype._refresh=function(){},Kt.prototype._calculateBounds=function(){this._bounds.addVertices(this.transform,this.vertices,0,this.vertices.length)},Kt.prototype.containsPoint=function(Qt){if(!this.getBounds().contains(Qt.x,Qt.y))return!1;this.worldTransform.applyInverse(Qt,jt);for(var Zt=this.vertices,Jt=zt.points,$t=this.indices,en=this.indices.length,tn=this.drawMode===Kt.DRAW_MODES.TRIANGLES?3:1,nn=0;nn+2<en;nn+=tn){var rn=2*$t[nn],an=2*$t[nn+1],on=2*$t[nn+2];if(Jt[0]=Zt[rn],Jt[1]=Zt[rn+1],Jt[2]=Zt[an],Jt[3]=Zt[an+1],Jt[4]=Zt[on],Jt[5]=Zt[on+1],zt.contains(jt.x,jt.y))return!0}return!1},Ht(Kt,[{key:"texture",get:function(){return this._texture},set:function(Qt){this._texture!==Qt&&(this._texture=Qt,Qt&&(Qt.baseTexture.hasLoaded?this._onTextureUpdate():Qt.once("update",this._onTextureUpdate,this)))}},{key:"tint",get:function(){return Yt.utils.rgb2hex(this.tintRgb)},set:function(Qt){this.tintRgb=Yt.utils.hex2rgb(Qt,this.tintRgb)}}]),Kt}(Yt.Container);Xt.default=Vt,Vt.DRAW_MODES={TRIANGLE_MESH:0,TRIANGLES:1}},{"../core":65,"../extras/TextureTransform":136}],167:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function jt(zt,Vt){for(var qt=0,Kt;qt<Vt.length;qt++)Kt=Vt[qt],Kt.enumerable=Kt.enumerable||!1,Kt.configurable=!0,"value"in Kt&&(Kt.writable=!0),Object.defineProperty(zt,Kt.key,Kt)}return function(zt,Vt,qt){return Vt&&jt(zt.prototype,Vt),qt&&jt(zt,qt),zt}}(),Yt=10,Wt=function(jt){function zt(Vt,qt,Kt,Qt,Zt){!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,zt);var Jt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,jt.call(this,Vt,4,4));return Jt._origWidth=Vt.orig.width,Jt._origHeight=Vt.orig.height,Jt._width=Jt._origWidth,Jt._height=Jt._origHeight,Jt.leftWidth=void 0===qt?Yt:qt,Jt.rightWidth=void 0===Qt?Yt:Qt,Jt.topHeight=void 0===Kt?Yt:Kt,Jt.bottomHeight=void 0===Zt?Yt:Zt,Jt.refresh(!0),Jt}return function(Vt,qt){if("function"!=typeof qt&&null!==qt)throw new TypeError("Super expression must either be null or a function, not "+typeof qt);Vt.prototype=Object.create(qt&&qt.prototype,{constructor:{value:Vt,enumerable:!1,writable:!0,configurable:!0}}),qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Vt,qt):Vt.__proto__=qt)}(zt,jt),zt.prototype.updateHorizontalVertices=function(){var Vt=this.vertices;Vt[9]=Vt[11]=Vt[13]=Vt[15]=this._topHeight,Vt[17]=Vt[19]=Vt[21]=Vt[23]=this._height-this._bottomHeight,Vt[25]=Vt[27]=Vt[29]=Vt[31]=this._height},zt.prototype.updateVerticalVertices=function(){var Vt=this.vertices;Vt[2]=Vt[10]=Vt[18]=Vt[26]=this._leftWidth,Vt[4]=Vt[12]=Vt[20]=Vt[28]=this._width-this._rightWidth,Vt[6]=Vt[14]=Vt[22]=Vt[30]=this._width},zt.prototype._renderCanvas=function(Vt){var qt=Vt.context;qt.globalAlpha=this.worldAlpha;var Kt=this.worldTransform,Qt=Vt.resolution;Vt.roundPixels?qt.setTransform(Kt.a*Qt,Kt.b*Qt,Kt.c*Qt,Kt.d*Qt,0|Kt.tx*Qt,0|Kt.ty*Qt):qt.setTransform(Kt.a*Qt,Kt.b*Qt,Kt.c*Qt,Kt.d*Qt,Kt.tx*Qt,Kt.ty*Qt);var Zt=this._texture.baseTexture,Jt=Zt.source,$t=Zt.width,en=Zt.height;this.drawSegment(qt,Jt,$t,en,0,1,10,11),this.drawSegment(qt,Jt,$t,en,2,3,12,13),this.drawSegment(qt,Jt,$t,en,4,5,14,15),this.drawSegment(qt,Jt,$t,en,8,9,18,19),this.drawSegment(qt,Jt,$t,en,10,11,20,21),this.drawSegment(qt,Jt,$t,en,12,13,22,23),this.drawSegment(qt,Jt,$t,en,16,17,26,27),this.drawSegment(qt,Jt,$t,en,18,19,28,29),this.drawSegment(qt,Jt,$t,en,20,21,30,31)},zt.prototype.drawSegment=function(Vt,qt,Kt,Qt,Zt,Jt,$t,en){var tn=this.uvs,nn=this.vertices,rn=(tn[$t]-tn[Zt])*Kt,an=(tn[en]-tn[Jt])*Qt,on=nn[$t]-nn[Zt],sn=nn[en]-nn[Jt];1>rn&&(rn=1),1>an&&(an=1),1>on&&(on=1),1>sn&&(sn=1),Vt.drawImage(qt,tn[Zt]*Kt,tn[Jt]*Qt,rn,an,nn[Zt],nn[Jt],on,sn)},zt.prototype._refresh=function(){jt.prototype._refresh.call(this);var Vt=this.uvs,qt=this._texture;this._origWidth=qt.orig.width,this._origHeight=qt.orig.height;var Kt=1/this._origWidth,Qt=1/this._origHeight;Vt[0]=Vt[8]=Vt[16]=Vt[24]=0,Vt[1]=Vt[3]=Vt[5]=Vt[7]=0,Vt[6]=Vt[14]=Vt[22]=Vt[30]=1,Vt[25]=Vt[27]=Vt[29]=Vt[31]=1,Vt[2]=Vt[10]=Vt[18]=Vt[26]=Kt*this._leftWidth,Vt[4]=Vt[12]=Vt[20]=Vt[28]=1-Kt*this._rightWidth,Vt[9]=Vt[11]=Vt[13]=Vt[15]=Qt*this._topHeight,Vt[17]=Vt[19]=Vt[21]=Vt[23]=1-Qt*this._bottomHeight,this.updateHorizontalVertices(),this.updateVerticalVertices(),this.dirty++,this.multiplyUvs()},Ht(zt,[{key:"width",get:function(){return this._width},set:function(Vt){this._width=Vt,this._refresh()}},{key:"height",get:function(){return this._height},set:function(Vt){this._height=Vt,this._refresh()}},{key:"leftWidth",get:function(){return this._leftWidth},set:function(Vt){this._leftWidth=Vt,this._refresh()}},{key:"rightWidth",get:function(){return this._rightWidth},set:function(Vt){this._rightWidth=Vt,this._refresh()}},{key:"topHeight",get:function(){return this._topHeight},set:function(Vt){this._topHeight=Vt,this._refresh()}},{key:"bottomHeight",get:function(){return this._bottomHeight},set:function(Vt){this._bottomHeight=Vt,this._refresh()}}]),zt}(function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("./Plane")).default);Xt.default=Wt},{"./Plane":168}],168:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Wt){return Wt&&Wt.__esModule?Wt:{default:Wt}}(Bt("./Mesh")),Yt=function(Wt){function jt(zt,Vt,qt){!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,jt);var Kt=function(Qt,Zt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&("object"==typeof Zt||"function"==typeof Zt)?Zt:Qt}(this,Wt.call(this,zt));return Kt._ready=!0,Kt.verticesX=Vt||10,Kt.verticesY=qt||10,Kt.drawMode=Ht.default.DRAW_MODES.TRIANGLES,Kt.refresh(),Kt}return function(zt,Vt){if("function"!=typeof Vt&&null!==Vt)throw new TypeError("Super expression must either be null or a function, not "+typeof Vt);zt.prototype=Object.create(Vt&&Vt.prototype,{constructor:{value:zt,enumerable:!1,writable:!0,configurable:!0}}),Vt&&(Object.setPrototypeOf?Object.setPrototypeOf(zt,Vt):zt.__proto__=Vt)}(jt,Wt),jt.prototype._refresh=function(){for(var zt=this._texture,Vt=this.verticesX*this.verticesY,qt=[],Kt=[],Qt=[],Zt=this.verticesX-1,Jt=this.verticesY-1,$t=zt.width/Zt,en=zt.height/Jt,tn=0;tn<Vt;tn++){var nn=tn%this.verticesX,rn=0|tn/this.verticesX;qt.push(nn*$t,rn*en),Kt.push(nn/Zt,rn/Jt)}for(var on=0;on<Zt*Jt;on++){var sn=on%Zt,dn=0|on/Zt,ln=dn*this.verticesX+sn,un=dn*this.verticesX+sn+1,pn=(dn+1)*this.verticesX+sn,cn=(dn+1)*this.verticesX+sn+1;Qt.push(ln,un,pn),Qt.push(un,cn,pn)}this.vertices=new Float32Array(qt),this.uvs=new Float32Array(Kt),this.colors=new Float32Array([]),this.indices=new Uint16Array(Qt),this.indexDirty++,this.multiplyUvs()},jt.prototype._onTextureUpdate=function(){Ht.default.prototype._onTextureUpdate.call(this),this._ready&&this.refresh()},jt}(Ht.default);Xt.default=Yt},{"./Mesh":166}],169:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Yt){function Wt(jt,zt){!function(qt,Kt){if(!(qt instanceof Kt))throw new TypeError("Cannot call a class as a function")}(this,Wt);var Vt=function(qt,Kt){if(!qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Kt&&("object"==typeof Kt||"function"==typeof Kt)?Kt:qt}(this,Yt.call(this,jt));return Vt.points=zt,Vt.vertices=new Float32Array(4*zt.length),Vt.uvs=new Float32Array(4*zt.length),Vt.colors=new Float32Array(2*zt.length),Vt.indices=new Uint16Array(2*zt.length),Vt.autoUpdate=!0,Vt.refresh(),Vt}return function(jt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);jt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,zt):jt.__proto__=zt)}(Wt,Yt),Wt.prototype._refresh=function(){var jt=this.points;if(!(1>jt.length)&&this._texture._uvs){this.vertices.length/4!==jt.length&&(this.vertices=new Float32Array(4*jt.length),this.uvs=new Float32Array(4*jt.length),this.colors=new Float32Array(2*jt.length),this.indices=new Uint16Array(2*jt.length));var zt=this.uvs,Vt=this.indices,qt=this.colors;zt[0]=0,zt[1]=0,zt[2]=0,zt[3]=1,qt[0]=1,qt[1]=1,Vt[0]=0,Vt[1]=1;for(var Kt=jt.length,Qt=1;Qt<Kt;Qt++){var Zt=4*Qt,Jt=Qt/(Kt-1);zt[Zt]=Jt,zt[Zt+1]=0,zt[Zt+2]=Jt,zt[Zt+3]=1,qt[Zt=2*Qt]=1,qt[Zt+1]=1,Vt[Zt=2*Qt]=Zt,Vt[Zt+1]=Zt+1}this.dirty++,this.indexDirty++,this.multiplyUvs(),this.refreshVertices()}},Wt.prototype.refreshVertices=function(){var jt=this.points;if(!(1>jt.length))for(var zt=jt[0],Vt=void 0,qt=0,Kt=0,Qt=this.vertices,Zt=jt.length,Jt=0;Jt<Zt;Jt++){var $t=jt[Jt],en=4*Jt;Kt=-((Vt=Jt<jt.length-1?jt[Jt+1]:$t).x-zt.x),qt=Vt.y-zt.y;var tn=10*(1-Jt/(Zt-1));1<tn&&(tn=1);var nn=Math.sqrt(qt*qt+Kt*Kt),rn=this._texture.height/2;qt/=nn,Kt/=nn,qt*=rn,Kt*=rn,Qt[en]=$t.x+qt,Qt[en+1]=$t.y+Kt,Qt[en+2]=$t.x-qt,Qt[en+3]=$t.y-Kt,zt=$t}},Wt.prototype.updateTransform=function(){this.autoUpdate&&this.refreshVertices(),this.containerUpdateTransform()},Wt}(function(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}(Bt("./Mesh")).default);Xt.default=Ht},{"./Mesh":166}],170:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(jt){if(jt&&jt.__esModule)return jt;var zt={};if(null!=jt)for(var Vt in jt)Object.prototype.hasOwnProperty.call(jt,Vt)&&(zt[Vt]=jt[Vt]);return zt.default=jt,zt}(Bt("../../core")),Yt=function(jt){return jt&&jt.__esModule?jt:{default:jt}}(Bt("../Mesh")),Wt=function(){function jt(zt){!function(Vt,qt){if(!(Vt instanceof qt))throw new TypeError("Cannot call a class as a function")}(this,jt),this.renderer=zt}return jt.prototype.render=function(zt){var Vt=this.renderer,qt=Vt.context,Kt=zt.worldTransform,Qt=Vt.resolution;Vt.roundPixels?qt.setTransform(Kt.a*Qt,Kt.b*Qt,Kt.c*Qt,Kt.d*Qt,0|Kt.tx*Qt,0|Kt.ty*Qt):qt.setTransform(Kt.a*Qt,Kt.b*Qt,Kt.c*Qt,Kt.d*Qt,Kt.tx*Qt,Kt.ty*Qt),Vt.setBlendMode(zt.blendMode),zt.drawMode===Yt.default.DRAW_MODES.TRIANGLE_MESH?this._renderTriangleMesh(zt):this._renderTriangles(zt)},jt.prototype._renderTriangleMesh=function(zt){for(var Vt=zt.vertices.length/2,qt=0,Kt;qt<Vt-2;qt++)Kt=2*qt,this._renderDrawTriangle(zt,Kt,Kt+2,Kt+4)},jt.prototype._renderTriangles=function(zt){for(var Vt=zt.indices,qt=Vt.length,Kt=0;Kt<qt;Kt+=3){var Qt=2*Vt[Kt],Zt=2*Vt[Kt+1],Jt=2*Vt[Kt+2];this._renderDrawTriangle(zt,Qt,Zt,Jt)}},jt.prototype._renderDrawTriangle=function(zt,Vt,qt,Kt){var Qt=this.renderer.context,Zt=zt.uvs,Jt=zt.vertices,$t=zt._texture;if($t.valid){var en=$t.baseTexture,tn=en.source,nn=en.width,rn=en.height,an,on,sn,dn,ln,un;if(zt.uploadUvTransform){var pn=zt._uvTransform.mapCoord;an=(Zt[Vt]*pn.a+Zt[Vt+1]*pn.c+pn.tx)*en.width,on=(Zt[qt]*pn.a+Zt[qt+1]*pn.c+pn.tx)*en.width,sn=(Zt[Kt]*pn.a+Zt[Kt+1]*pn.c+pn.tx)*en.width,dn=(Zt[Vt]*pn.b+Zt[Vt+1]*pn.d+pn.ty)*en.height,ln=(Zt[qt]*pn.b+Zt[qt+1]*pn.d+pn.ty)*en.height,un=(Zt[Kt]*pn.b+Zt[Kt+1]*pn.d+pn.ty)*en.height}else an=Zt[Vt]*en.width,on=Zt[qt]*en.width,sn=Zt[Kt]*en.width,dn=Zt[Vt+1]*en.height,ln=Zt[qt+1]*en.height,un=Zt[Kt+1]*en.height;var cn=Jt[Vt],hn=Jt[qt],fn=Jt[Kt],gn=Jt[Vt+1],mn=Jt[qt+1],yn=Jt[Kt+1];if(0<zt.canvasPadding){var _n=zt.canvasPadding/zt.worldTransform.a,bn=zt.canvasPadding/zt.worldTransform.d,xn=(cn+hn+fn)/3,vn=(gn+mn+yn)/3,Tn=cn-xn,Sn=gn-vn,En=Math.sqrt(Tn*Tn+Sn*Sn);cn=xn+Tn/En*(En+_n),gn=vn+Sn/En*(En+bn),Sn=mn-vn,hn=xn+(Tn=hn-xn)/(En=Math.sqrt(Tn*Tn+Sn*Sn))*(En+_n),mn=vn+Sn/En*(En+bn),Sn=yn-vn,fn=xn+(Tn=fn-xn)/(En=Math.sqrt(Tn*Tn+Sn*Sn))*(En+_n),yn=vn+Sn/En*(En+bn)}Qt.save(),Qt.beginPath(),Qt.moveTo(cn,gn),Qt.lineTo(hn,mn),Qt.lineTo(fn,yn),Qt.closePath(),Qt.clip();var wn=an*ln+dn*sn+on*un-ln*sn-dn*on-an*un,An=cn*ln+dn*fn+hn*un-ln*fn-dn*hn-cn*un,Cn=an*hn+cn*sn+on*fn-hn*sn-cn*on-an*fn,Pn=an*ln*fn+dn*hn*sn+cn*on*un-cn*ln*sn-dn*on*fn-an*hn*un,Mn=gn*ln+dn*yn+mn*un-ln*yn-dn*mn-gn*un,Rn=an*mn+gn*sn+on*yn-mn*sn-gn*on-an*yn,Dn=an*ln*yn+dn*mn*sn+gn*on*un-gn*ln*sn-dn*on*yn-an*mn*un;Qt.transform(An/wn,Mn/wn,Cn/wn,Rn/wn,Pn/wn,Dn/wn),Qt.drawImage(tn,0,0,nn*en.resolution,rn*en.resolution,0,0,nn,rn),Qt.restore(),this.renderer.invalidateBlendMode()}},jt.prototype.renderMeshFlat=function(zt){var Vt=this.renderer.context,qt=zt.vertices,Kt=qt.length/2;Vt.beginPath();for(var Qt=1;Qt<Kt-2;++Qt){var Zt=2*Qt,Jt=qt[Zt],$t=qt[Zt+1],en=qt[Zt+2],tn=qt[Zt+3],nn=qt[Zt+4],rn=qt[Zt+5];Vt.moveTo(Jt,$t),Vt.lineTo(en,tn),Vt.lineTo(nn,rn)}Vt.fillStyle="#FF0000",Vt.fill(),Vt.closePath()},jt.prototype.destroy=function(){this.renderer=null},jt}();Xt.default=Wt,Ht.CanvasRenderer.registerPlugin("mesh",Wt)},{"../../core":65,"../Mesh":166}],171:[function(Bt,Gt,Xt){function Ht(Kt){return Kt&&Kt.__esModule?Kt:{default:Kt}}Xt.__esModule=!0;var Yt=Bt("./Mesh");Object.defineProperty(Xt,"Mesh",{enumerable:!0,get:function(){return Ht(Yt).default}});var Wt=Bt("./webgl/MeshRenderer");Object.defineProperty(Xt,"MeshRenderer",{enumerable:!0,get:function(){return Ht(Wt).default}});var jt=Bt("./canvas/CanvasMeshRenderer");Object.defineProperty(Xt,"CanvasMeshRenderer",{enumerable:!0,get:function(){return Ht(jt).default}});var zt=Bt("./Plane");Object.defineProperty(Xt,"Plane",{enumerable:!0,get:function(){return Ht(zt).default}});var Vt=Bt("./NineSlicePlane");Object.defineProperty(Xt,"NineSlicePlane",{enumerable:!0,get:function(){return Ht(Vt).default}});var qt=Bt("./Rope");Object.defineProperty(Xt,"Rope",{enumerable:!0,get:function(){return Ht(qt).default}})},{"./Mesh":166,"./NineSlicePlane":167,"./Plane":168,"./Rope":169,"./canvas/CanvasMeshRenderer":170,"./webgl/MeshRenderer":172}],172:[function(Bt,Gt,Xt){function Ht(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Yt=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Qt in qt)Object.prototype.hasOwnProperty.call(qt,Qt)&&(Kt[Qt]=qt[Qt]);return Kt.default=qt,Kt}(Bt("../../core")),Wt=Ht(Bt("pixi-gl-core")),jt=Ht(Bt("../Mesh")),zt=(Bt("path"),Yt.Matrix.IDENTITY),Vt=function(qt){function Kt(Qt){!function(Jt,$t){if(!(Jt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Kt);var Zt=function(Jt,$t){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&("object"==typeof $t||"function"==typeof $t)?$t:Jt}(this,qt.call(this,Qt));return Zt.shader=null,Zt}return function(Qt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Qt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Zt):Qt.__proto__=Zt)}(Kt,qt),Kt.prototype.onContextChange=function(){var Qt=this.renderer.gl;this.shader=new Yt.Shader(Qt,"attribute vec2 aVertexPosition;\nattribute vec2 aTextureCoord;\n\nuniform mat3 projectionMatrix;\nuniform mat3 translationMatrix;\nuniform mat3 uTransform;\n\nvarying vec2 vTextureCoord;\n\nvoid main(void)\n{\n    gl_Position = vec4((projectionMatrix * translationMatrix * vec3(aVertexPosition, 1.0)).xy, 0.0, 1.0);\n\n    vTextureCoord = (uTransform * vec3(aTextureCoord, 1.0)).xy;\n}\n","varying vec2 vTextureCoord;\nuniform vec4 uColor;\n\nuniform sampler2D uSampler;\n\nvoid main(void)\n{\n    gl_FragColor = texture2D(uSampler, vTextureCoord) * uColor;\n}\n")},Kt.prototype.render=function(Qt){var Zt=this.renderer,Jt=Zt.gl,$t=Qt._texture;if($t.valid){var en=Qt._glDatas[Zt.CONTEXT_UID];en||(Zt.bindVao(null),(en={shader:this.shader,vertexBuffer:Wt.default.GLBuffer.createVertexBuffer(Jt,Qt.vertices,Jt.STREAM_DRAW),uvBuffer:Wt.default.GLBuffer.createVertexBuffer(Jt,Qt.uvs,Jt.STREAM_DRAW),indexBuffer:Wt.default.GLBuffer.createIndexBuffer(Jt,Qt.indices,Jt.STATIC_DRAW),vao:null,dirty:Qt.dirty,indexDirty:Qt.indexDirty}).vao=new Wt.default.VertexArrayObject(Jt).addIndex(en.indexBuffer).addAttribute(en.vertexBuffer,en.shader.attributes.aVertexPosition,Jt.FLOAT,!1,8,0).addAttribute(en.uvBuffer,en.shader.attributes.aTextureCoord,Jt.FLOAT,!1,8,0),Qt._glDatas[Zt.CONTEXT_UID]=en),Zt.bindVao(en.vao),Qt.dirty!==en.dirty&&(en.dirty=Qt.dirty,en.uvBuffer.upload(Qt.uvs)),Qt.indexDirty!==en.indexDirty&&(en.indexDirty=Qt.indexDirty,en.indexBuffer.upload(Qt.indices)),en.vertexBuffer.upload(Qt.vertices),Zt.bindShader(en.shader),en.shader.uniforms.uSampler=Zt.bindTexture($t),Zt.state.setBlendMode(Yt.utils.correctBlendMode(Qt.blendMode,$t.baseTexture.premultipliedAlpha)),en.shader.uniforms.uTransform&&(Qt.uploadUvTransform?en.shader.uniforms.uTransform=Qt._uvTransform.mapCoord.toArray(!0):en.shader.uniforms.uTransform=zt.toArray(!0)),en.shader.uniforms.translationMatrix=Qt.worldTransform.toArray(!0),en.shader.uniforms.uColor=Yt.utils.premultiplyRgba(Qt.tintRgb,Qt.worldAlpha,en.shader.uniforms.uColor,$t.baseTexture.premultipliedAlpha);var tn=Qt.drawMode===jt.default.DRAW_MODES.TRIANGLE_MESH?Jt.TRIANGLE_STRIP:Jt.TRIANGLES;en.vao.draw(tn,Qt.indices.length,0)}},Kt}(Yt.ObjectRenderer);Xt.default=Vt,Yt.WebGLRenderer.registerPlugin("mesh",Vt)},{"../../core":65,"../Mesh":166,path:23,"pixi-gl-core":12}],173:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function zt(Vt,qt){for(var Kt=0,Qt;Kt<qt.length;Kt++)Qt=qt[Kt],Qt.enumerable=Qt.enumerable||!1,Qt.configurable=!0,"value"in Qt&&(Qt.writable=!0),Object.defineProperty(Vt,Qt.key,Qt)}return function(Vt,qt,Kt){return qt&&zt(Vt.prototype,qt),Kt&&zt(Vt,Kt),Vt}}(),Yt=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("../core")),Wt=Bt("../core/utils"),jt=function(zt){function Vt(){var qt=0<arguments.length&&void 0!==arguments[0]?arguments[0]:1500,Kt=arguments[1],Qt=2<arguments.length&&void 0!==arguments[2]?arguments[2]:16384,Zt=3<arguments.length&&void 0!==arguments[3]&&arguments[3];!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Jt=function($t,en){if(!$t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return en&&("object"==typeof en||"function"==typeof en)?en:$t}(this,zt.call(this));return 16384<Qt&&(Qt=16384),Qt>qt&&(Qt=qt),Jt._properties=[!1,!0,!1,!1,!1],Jt._maxSize=qt,Jt._batchSize=Qt,Jt._glBuffers={},Jt._bufferToUpdate=0,Jt.interactiveChildren=!1,Jt.blendMode=Yt.BLEND_MODES.NORMAL,Jt.autoResize=Zt,Jt.roundPixels=!0,Jt.baseTexture=null,Jt.setProperties(Kt),Jt._tint=0,Jt.tintRgb=new Float32Array(4),Jt.tint=16777215,Jt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.setProperties=function(qt){qt&&(this._properties[0]="scale"in qt?!!qt.scale:this._properties[0],this._properties[1]="position"in qt?!!qt.position:this._properties[1],this._properties[2]="rotation"in qt?!!qt.rotation:this._properties[2],this._properties[3]="uvs"in qt?!!qt.uvs:this._properties[3],this._properties[4]="alpha"in qt||"tint"in qt?!!qt.alpha||!!qt.tint:this._properties[4])},Vt.prototype.updateTransform=function(){this.displayObjectUpdateTransform()},Vt.prototype.renderWebGL=function(qt){var Kt=this;this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable&&(this.baseTexture||(this.baseTexture=this.children[0]._texture.baseTexture,this.baseTexture.hasLoaded||this.baseTexture.once("update",function(){return Kt.onChildrenChange(0)})),qt.setObjectRenderer(qt.plugins.particle),qt.plugins.particle.render(this))},Vt.prototype.onChildrenChange=function(qt){var Kt=Math.floor(qt/this._batchSize);Kt<this._bufferToUpdate&&(this._bufferToUpdate=Kt)},Vt.prototype.renderCanvas=function(qt){if(this.visible&&!(0>=this.worldAlpha)&&this.children.length&&this.renderable){var Kt=qt.context,Qt=this.worldTransform,Zt=!0,Jt=0,$t=0,en=0,tn=0;qt.setBlendMode(this.blendMode),Kt.globalAlpha=this.worldAlpha,this.displayObjectUpdateTransform();for(var nn=0,rn;nn<this.children.length;++nn)if(rn=this.children[nn],rn.visible){var an=rn._texture.frame;if(Kt.globalAlpha=this.worldAlpha*rn.alpha,0==rn.rotation%(2*Math.PI))Zt&&(Kt.setTransform(Qt.a,Qt.b,Qt.c,Qt.d,Qt.tx*qt.resolution,Qt.ty*qt.resolution),Zt=!1),Jt=rn.anchor.x*(-an.width*rn.scale.x)+rn.position.x+.5,$t=rn.anchor.y*(-an.height*rn.scale.y)+rn.position.y+.5,en=an.width*rn.scale.x,tn=an.height*rn.scale.y;else{Zt||(Zt=!0),rn.displayObjectUpdateTransform();var on=rn.worldTransform;qt.roundPixels?Kt.setTransform(on.a,on.b,on.c,on.d,0|on.tx*qt.resolution,0|on.ty*qt.resolution):Kt.setTransform(on.a,on.b,on.c,on.d,on.tx*qt.resolution,on.ty*qt.resolution),Jt=rn.anchor.x*-an.width+.5,$t=rn.anchor.y*-an.height+.5,en=an.width,tn=an.height}var sn=rn._texture.baseTexture.resolution;Kt.drawImage(rn._texture.baseTexture.source,an.x*sn,an.y*sn,an.width*sn,an.height*sn,Jt*qt.resolution,$t*qt.resolution,en*qt.resolution,tn*qt.resolution)}}},Vt.prototype.destroy=function(qt){if(zt.prototype.destroy.call(this,qt),this._buffers)for(var Kt=0;Kt<this._buffers.length;++Kt)this._buffers[Kt].destroy();this._properties=null,this._buffers=null},Ht(Vt,[{key:"tint",get:function(){return this._tint},set:function(qt){this._tint=qt,(0,Wt.hex2rgb)(qt,this.tintRgb)}}]),Vt}(Yt.Container);Xt.default=jt},{"../core":65,"../core/utils":124}],174:[function(Bt,Gt,Xt){function Ht(jt){return jt&&jt.__esModule?jt:{default:jt}}Xt.__esModule=!0;var Yt=Bt("./ParticleContainer");Object.defineProperty(Xt,"ParticleContainer",{enumerable:!0,get:function(){return Ht(Yt).default}});var Wt=Bt("./webgl/ParticleRenderer");Object.defineProperty(Xt,"ParticleRenderer",{enumerable:!0,get:function(){return Ht(Wt).default}})},{"./ParticleContainer":173,"./webgl/ParticleRenderer":176}],175:[function(Bt,Gt,Xt){function Ht(zt){return zt&&zt.__esModule?zt:{default:zt}}Xt.__esModule=!0;var Yt=Ht(Bt("pixi-gl-core")),Wt=Ht(Bt("../../core/utils/createIndicesForQuads")),jt=function(){function zt(Vt,qt,Kt,Qt){!function($t,en){if(!($t instanceof en))throw new TypeError("Cannot call a class as a function")}(this,zt),this.gl=Vt,this.size=Qt,this.dynamicProperties=[],this.staticProperties=[];for(var Zt=0,Jt;Zt<qt.length;++Zt)Jt=qt[Zt],Jt={attribute:Jt.attribute,size:Jt.size,uploadFunction:Jt.uploadFunction,unsignedByte:Jt.unsignedByte,offset:Jt.offset},Kt[Zt]?this.dynamicProperties.push(Jt):this.staticProperties.push(Jt);this.staticStride=0,this.staticBuffer=null,this.staticData=null,this.staticDataUint32=null,this.dynamicStride=0,this.dynamicBuffer=null,this.dynamicData=null,this.dynamicDataUint32=null,this.initBuffers()}return zt.prototype.initBuffers=function(){var Vt=this.gl,qt=0;this.indices=(0,Wt.default)(this.size),this.indexBuffer=Yt.default.GLBuffer.createIndexBuffer(Vt,this.indices,Vt.STATIC_DRAW),this.dynamicStride=0;for(var Kt=0,Qt;Kt<this.dynamicProperties.length;++Kt)Qt=this.dynamicProperties[Kt],Qt.offset=qt,qt+=Qt.size,this.dynamicStride+=Qt.size;var Zt=new ArrayBuffer(4*(4*(this.size*this.dynamicStride)));this.dynamicData=new Float32Array(Zt),this.dynamicDataUint32=new Uint32Array(Zt),this.dynamicBuffer=Yt.default.GLBuffer.createVertexBuffer(Vt,Zt,Vt.STREAM_DRAW);var Jt=0;this.staticStride=0;for(var $t=0,en;$t<this.staticProperties.length;++$t)en=this.staticProperties[$t],en.offset=Jt,Jt+=en.size,this.staticStride+=en.size;var tn=new ArrayBuffer(4*(4*(this.size*this.staticStride)));this.staticData=new Float32Array(tn),this.staticDataUint32=new Uint32Array(tn),this.staticBuffer=Yt.default.GLBuffer.createVertexBuffer(Vt,tn,Vt.STATIC_DRAW),this.vao=new Yt.default.VertexArrayObject(Vt).addIndex(this.indexBuffer);for(var nn=0,rn;nn<this.dynamicProperties.length;++nn)rn=this.dynamicProperties[nn],rn.unsignedByte?this.vao.addAttribute(this.dynamicBuffer,rn.attribute,Vt.UNSIGNED_BYTE,!0,4*this.dynamicStride,4*rn.offset):this.vao.addAttribute(this.dynamicBuffer,rn.attribute,Vt.FLOAT,!1,4*this.dynamicStride,4*rn.offset);for(var an=0,on;an<this.staticProperties.length;++an)on=this.staticProperties[an],on.unsignedByte?this.vao.addAttribute(this.staticBuffer,on.attribute,Vt.UNSIGNED_BYTE,!0,4*this.staticStride,4*on.offset):this.vao.addAttribute(this.staticBuffer,on.attribute,Vt.FLOAT,!1,4*this.staticStride,4*on.offset)},zt.prototype.uploadDynamic=function(Vt,qt,Kt){for(var Qt=0,Zt;Qt<this.dynamicProperties.length;Qt++)Zt=this.dynamicProperties[Qt],Zt.uploadFunction(Vt,qt,Kt,Zt.unsignedByte?this.dynamicDataUint32:this.dynamicData,this.dynamicStride,Zt.offset);this.dynamicBuffer.upload()},zt.prototype.uploadStatic=function(Vt,qt,Kt){for(var Qt=0,Zt;Qt<this.staticProperties.length;Qt++)Zt=this.staticProperties[Qt],Zt.uploadFunction(Vt,qt,Kt,Zt.unsignedByte?this.staticDataUint32:this.staticData,this.staticStride,Zt.offset);this.staticBuffer.upload()},zt.prototype.destroy=function(){this.dynamicProperties=null,this.dynamicData=null,this.dynamicBuffer.destroy(),this.staticProperties=null,this.staticData=null,this.staticBuffer.destroy()},zt}();Xt.default=jt},{"../../core/utils/createIndicesForQuads":122,"pixi-gl-core":12}],176:[function(Bt,Gt,Xt){function Ht(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Yt=function(qt){if(qt&&qt.__esModule)return qt;var Kt={};if(null!=qt)for(var Qt in qt)Object.prototype.hasOwnProperty.call(qt,Qt)&&(Kt[Qt]=qt[Qt]);return Kt.default=qt,Kt}(Bt("../../core")),Wt=Ht(Bt("./ParticleShader")),jt=Ht(Bt("./ParticleBuffer")),zt=Bt("../../core/utils"),Vt=function(qt){function Kt(Qt){!function(Jt,$t){if(!(Jt instanceof $t))throw new TypeError("Cannot call a class as a function")}(this,Kt);var Zt=function(Jt,$t){if(!Jt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return $t&&("object"==typeof $t||"function"==typeof $t)?$t:Jt}(this,qt.call(this,Qt));return Zt.shader=null,Zt.indexBuffer=null,Zt.properties=null,Zt.tempMatrix=new Yt.Matrix,Zt.CONTEXT_UID=0,Zt}return function(Qt,Zt){if("function"!=typeof Zt&&null!==Zt)throw new TypeError("Super expression must either be null or a function, not "+typeof Zt);Qt.prototype=Object.create(Zt&&Zt.prototype,{constructor:{value:Qt,enumerable:!1,writable:!0,configurable:!0}}),Zt&&(Object.setPrototypeOf?Object.setPrototypeOf(Qt,Zt):Qt.__proto__=Zt)}(Kt,qt),Kt.prototype.onContextChange=function(){var Qt=this.renderer.gl;this.CONTEXT_UID=this.renderer.CONTEXT_UID,this.shader=new Wt.default(Qt),this.properties=[{attribute:this.shader.attributes.aVertexPosition,size:2,uploadFunction:this.uploadVertices,offset:0},{attribute:this.shader.attributes.aPositionCoord,size:2,uploadFunction:this.uploadPosition,offset:0},{attribute:this.shader.attributes.aRotation,size:1,uploadFunction:this.uploadRotation,offset:0},{attribute:this.shader.attributes.aTextureCoord,size:2,uploadFunction:this.uploadUvs,offset:0},{attribute:this.shader.attributes.aColor,size:1,unsignedByte:!0,uploadFunction:this.uploadTint,offset:0}]},Kt.prototype.start=function(){this.renderer.bindShader(this.shader)},Kt.prototype.render=function(Qt){var Zt=Qt.children,Jt=Qt._maxSize,$t=Qt._batchSize,en=this.renderer,tn=Zt.length;if(0!==tn){tn>Jt&&(tn=Jt);var nn=Qt._glBuffers[en.CONTEXT_UID];nn||(nn=Qt._glBuffers[en.CONTEXT_UID]=this.generateBuffers(Qt));var rn=Zt[0]._texture.baseTexture;this.renderer.setBlendMode(Yt.utils.correctBlendMode(Qt.blendMode,rn.premultipliedAlpha));var an=en.gl,on=Qt.worldTransform.copy(this.tempMatrix);on.prepend(en._activeRenderTarget.projectionMatrix),this.shader.uniforms.projectionMatrix=on.toArray(!0),this.shader.uniforms.uColor=Yt.utils.premultiplyRgba(Qt.tintRgb,Qt.worldAlpha,this.shader.uniforms.uColor,rn.premultipliedAlpha),this.shader.uniforms.uSampler=en.bindTexture(rn);for(var sn=0,dn=0,ln;sn<tn;sn+=$t,dn+=1){if(ln=tn-sn,ln>$t&&(ln=$t),dn>=nn.length){if(!Qt.autoResize)break;nn.push(this._generateOneMoreBuffer(Qt))}var un=nn[dn];un.uploadDynamic(Zt,sn,ln),Qt._bufferToUpdate===dn&&(un.uploadStatic(Zt,sn,ln),Qt._bufferToUpdate=dn+1),en.bindVao(un.vao),un.vao.draw(an.TRIANGLES,6*ln)}}},Kt.prototype.generateBuffers=function(Qt){for(var Zt=this.renderer.gl,Jt=[],$t=Qt._maxSize,en=Qt._batchSize,tn=Qt._properties,nn=0;nn<$t;nn+=en)Jt.push(new jt.default(Zt,this.properties,tn,en));return Jt},Kt.prototype._generateOneMoreBuffer=function(Qt){var Zt=this.renderer.gl,Jt=Qt._batchSize,$t=Qt._properties;return new jt.default(Zt,this.properties,$t,Jt)},Kt.prototype.uploadVertices=function(Qt,Zt,Jt,$t,en,tn){for(var nn=0,rn=0,an=0,on=0,sn=0;sn<Jt;++sn){var dn=Qt[Zt+sn],ln=dn._texture,un=dn.scale.x,pn=dn.scale.y,cn=ln.trim,hn=ln.orig;cn?(nn=(rn=cn.x-dn.anchor.x*hn.width)+cn.width,an=(on=cn.y-dn.anchor.y*hn.height)+cn.height):(nn=hn.width*(1-dn.anchor.x),rn=hn.width*-dn.anchor.x,an=hn.height*(1-dn.anchor.y),on=hn.height*-dn.anchor.y),$t[tn]=rn*un,$t[tn+1]=on*pn,$t[tn+en]=nn*un,$t[tn+en+1]=on*pn,$t[tn+2*en]=nn*un,$t[tn+2*en+1]=an*pn,$t[tn+3*en]=rn*un,$t[tn+3*en+1]=an*pn,tn+=4*en}},Kt.prototype.uploadPosition=function(Qt,Zt,Jt,$t,en,tn){for(var nn=0,rn;nn<Jt;nn++)rn=Qt[Zt+nn].position,$t[tn]=rn.x,$t[tn+1]=rn.y,$t[tn+en]=rn.x,$t[tn+en+1]=rn.y,$t[tn+2*en]=rn.x,$t[tn+2*en+1]=rn.y,$t[tn+3*en]=rn.x,$t[tn+3*en+1]=rn.y,tn+=4*en},Kt.prototype.uploadRotation=function(Qt,Zt,Jt,$t,en,tn){for(var nn=0,rn;nn<Jt;nn++)rn=Qt[Zt+nn].rotation,$t[tn]=rn,$t[tn+en]=rn,$t[tn+2*en]=rn,$t[tn+3*en]=rn,tn+=4*en},Kt.prototype.uploadUvs=function(Qt,Zt,Jt,$t,en,tn){for(var nn=0,rn;nn<Jt;++nn)rn=Qt[Zt+nn]._texture._uvs,rn?($t[tn]=rn.x0,$t[tn+1]=rn.y0,$t[tn+en]=rn.x1,$t[tn+en+1]=rn.y1,$t[tn+2*en]=rn.x2,$t[tn+2*en+1]=rn.y2,$t[tn+3*en]=rn.x3,$t[tn+3*en+1]=rn.y3,tn+=4*en):($t[tn]=0,$t[tn+1]=0,$t[tn+en]=0,$t[tn+en+1]=0,$t[tn+2*en]=0,$t[tn+2*en+1]=0,$t[tn+3*en]=0,$t[tn+3*en+1]=0,tn+=4*en)},Kt.prototype.uploadTint=function(Qt,Zt,Jt,$t,en,tn){for(var nn=0;nn<Jt;++nn){var rn=Qt[Zt+nn],an=rn._texture.baseTexture.premultipliedAlpha,on=rn.alpha,sn=1>on&&an?(0,zt.premultiplyTint)(rn._tintRGB,on):rn._tintRGB+(255*on<<24);$t[tn]=sn,$t[tn+en]=sn,$t[tn+2*en]=sn,$t[tn+3*en]=sn,tn+=4*en}},Kt.prototype.destroy=function(){this.renderer.gl&&this.renderer.gl.deleteBuffer(this.indexBuffer),qt.prototype.destroy.call(this),this.shader.destroy(),this.indices=null,this.tempMatrix=null},Kt}(Yt.ObjectRenderer);Xt.default=Vt,Yt.WebGLRenderer.registerPlugin("particle",Vt)},{"../../core":65,"../../core/utils":124,"./ParticleBuffer":175,"./ParticleShader":177}],177:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(Yt){function Wt(jt){return function(zt,Vt){if(!(zt instanceof Vt))throw new TypeError("Cannot call a class as a function")}(this,Wt),function(zt,Vt){if(!zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Vt&&("object"==typeof Vt||"function"==typeof Vt)?Vt:zt}(this,Yt.call(this,jt,["attribute vec2 aVertexPosition;","attribute vec2 aTextureCoord;","attribute vec4 aColor;","attribute vec2 aPositionCoord;","attribute vec2 aScale;","attribute float aRotation;","uniform mat3 projectionMatrix;","uniform vec4 uColor;","varying vec2 vTextureCoord;","varying vec4 vColor;","void main(void){","   vec2 v = aVertexPosition;","   v.x = (aVertexPosition.x) * cos(aRotation) - (aVertexPosition.y) * sin(aRotation);","   v.y = (aVertexPosition.x) * sin(aRotation) + (aVertexPosition.y) * cos(aRotation);","   v = v + aPositionCoord;","   gl_Position = vec4((projectionMatrix * vec3(v, 1.0)).xy, 0.0, 1.0);","   vTextureCoord = aTextureCoord;","   vColor = aColor * uColor;","}"].join("\n"),["varying vec2 vTextureCoord;","varying vec4 vColor;","uniform sampler2D uSampler;","void main(void){","  vec4 color = texture2D(uSampler, vTextureCoord) * vColor;","  if (color.a == 0.0) discard;","  gl_FragColor = color;","}"].join("\n")))}return function(jt,zt){if("function"!=typeof zt&&null!==zt)throw new TypeError("Super expression must either be null or a function, not "+typeof zt);jt.prototype=Object.create(zt&&zt.prototype,{constructor:{value:jt,enumerable:!1,writable:!0,configurable:!0}}),zt&&(Object.setPrototypeOf?Object.setPrototypeOf(jt,zt):jt.__proto__=zt)}(Wt,Yt),Wt}(function(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}(Bt("../../core/Shader")).default);Xt.default=Ht},{"../../core/Shader":44}],178:[function(){Math.sign||(Math.sign=function(Ht){return 0===(Ht=+Ht)||isNaN(Ht)?Ht:0<Ht?1:-1})},{}],179:[function(Bt){var Ht=function(Yt){return Yt&&Yt.__esModule?Yt:{default:Yt}}(Bt("object-assign"));Object.assign||(Object.assign=Ht.default)},{"object-assign":5}],180:[function(Bt){Bt("./Object.assign"),Bt("./requestAnimationFrame"),Bt("./Math.sign"),window.ArrayBuffer||(window.ArrayBuffer=Array),window.Float32Array||(window.Float32Array=Array),window.Uint32Array||(window.Uint32Array=Array),window.Uint16Array||(window.Uint16Array=Array)},{"./Math.sign":178,"./Object.assign":179,"./requestAnimationFrame":181}],181:[function(){(function(Ht){if(Date.now&&Date.prototype.getTime||(Date.now=function(){return new Date().getTime()}),!Ht.performance||!Ht.performance.now){var Yt=Date.now();Ht.performance||(Ht.performance={}),Ht.performance.now=function(){return Date.now()-Yt}}for(var Wt=Date.now(),jt=["ms","moz","webkit","o"],zt=0,Vt;zt<jt.length&&!Ht.requestAnimationFrame;++zt)Vt=jt[zt],Ht.requestAnimationFrame=Ht[Vt+"RequestAnimationFrame"],Ht.cancelAnimationFrame=Ht[Vt+"CancelAnimationFrame"]||Ht[Vt+"CancelRequestAnimationFrame"];Ht.requestAnimationFrame||(Ht.requestAnimationFrame=function(qt){if("function"!=typeof qt)throw new TypeError(qt+"is not a function");var Kt=Date.now(),Qt=16+Wt-Kt;return 0>Qt&&(Qt=0),Wt=Kt,setTimeout(function(){Wt=Date.now(),qt(performance.now())},Qt)}),Ht.cancelAnimationFrame||(Ht.cancelAnimationFrame=function(qt){return clearTimeout(qt)})}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{}],182:[function(Bt,Gt,Xt){function Ht($t,en){var tn=!1;if($t&&$t._textures&&$t._textures.length)for(var nn=0;nn<$t._textures.length;nn++)if($t._textures[nn]instanceof Kt.Texture){var rn=$t._textures[nn].baseTexture;-1===en.indexOf(rn)&&(en.push(rn),tn=!0)}return tn}function Yt($t,en){return $t instanceof Kt.BaseTexture&&(-1===en.indexOf($t)&&en.push($t),!0)}function Wt($t,en){if($t._texture&&$t._texture instanceof Kt.Texture){var tn=$t._texture.baseTexture;return-1===en.indexOf(tn)&&en.push(tn),!0}return!1}function jt($t,en){return en instanceof Kt.Text&&(en.updateText(!0),!0)}function zt($t,en){if(en instanceof Kt.TextStyle){var tn=en.toFontString();return Kt.TextMetrics.measureFont(tn),!0}return!1}function Vt($t,en){if($t instanceof Kt.Text){-1===en.indexOf($t.style)&&en.push($t.style),-1===en.indexOf($t)&&en.push($t);var tn=$t._texture.baseTexture;return-1===en.indexOf(tn)&&en.push(tn),!0}return!1}function qt($t,en){return $t instanceof Kt.TextStyle&&(-1===en.indexOf($t)&&en.push($t),!0)}Xt.__esModule=!0;var Kt=function($t){if($t&&$t.__esModule)return $t;var en={};if(null!=$t)for(var tn in $t)Object.prototype.hasOwnProperty.call($t,tn)&&(en[tn]=$t[tn]);return en.default=$t,en}(Bt("../core")),Qt=function($t){return $t&&$t.__esModule?$t:{default:$t}}(Bt("./limiters/CountLimiter")),Zt=Kt.ticker.shared;Kt.settings.UPLOADS_PER_FRAME=4;var Jt=function(){function $t(en){var tn=this;!function(nn,rn){if(!(nn instanceof rn))throw new TypeError("Cannot call a class as a function")}(this,$t),this.limiter=new Qt.default(Kt.settings.UPLOADS_PER_FRAME),this.renderer=en,this.uploadHookHelper=null,this.queue=[],this.addHooks=[],this.uploadHooks=[],this.completes=[],this.ticking=!1,this.delayedTick=function(){tn.queue&&tn.prepareItems()},this.registerFindHook(Vt),this.registerFindHook(qt),this.registerFindHook(Ht),this.registerFindHook(Yt),this.registerFindHook(Wt),this.registerUploadHook(jt),this.registerUploadHook(zt)}return $t.prototype.upload=function(en,tn){"function"==typeof en&&(tn=en,en=null),en&&this.add(en),this.queue.length?(tn&&this.completes.push(tn),this.ticking||(this.ticking=!0,Zt.addOnce(this.tick,this,Kt.UPDATE_PRIORITY.UTILITY))):tn&&tn()},$t.prototype.tick=function(){setTimeout(this.delayedTick,0)},$t.prototype.prepareItems=function(){for(this.limiter.beginFrame();this.queue.length&&this.limiter.allowedToUpload();){var en=this.queue[0],tn=!1;if(en&&!en._destroyed)for(var nn=0,rn=this.uploadHooks.length;nn<rn;nn++)if(this.uploadHooks[nn](this.uploadHookHelper,en)){this.queue.shift(),tn=!0;break}tn||this.queue.shift()}if(this.queue.length)Zt.addOnce(this.tick,this,Kt.UPDATE_PRIORITY.UTILITY);else{this.ticking=!1;var an=this.completes.slice(0);this.completes.length=0;for(var on=0,sn=an.length;on<sn;on++)an[on]()}},$t.prototype.registerFindHook=function(en){return en&&this.addHooks.push(en),this},$t.prototype.registerUploadHook=function(en){return en&&this.uploadHooks.push(en),this},$t.prototype.add=function(en){for(var tn=0,nn=this.addHooks.length;tn<nn&&!this.addHooks[tn](en,this.queue);tn++);if(en instanceof Kt.Container)for(var rn=en.children.length-1;0<=rn;rn--)this.add(en.children[rn]);return this},$t.prototype.destroy=function(){this.ticking&&Zt.remove(this.tick,this),this.ticking=!1,this.addHooks=null,this.uploadHooks=null,this.renderer=null,this.completes=null,this.queue=null,this.limiter=null,this.uploadHookHelper=null},$t}();Xt.default=Jt},{"../core":65,"./limiters/CountLimiter":185}],183:[function(Bt,Gt,Xt){function Ht(zt,Vt){if(Vt instanceof Yt.BaseTexture){var qt=Vt.source,Kt=0===qt.width?zt.canvas.width:Math.min(zt.canvas.width,qt.width),Qt=0===qt.height?zt.canvas.height:Math.min(zt.canvas.height,qt.height);return zt.ctx.drawImage(qt,0,0,Kt,Qt,0,0,zt.canvas.width,zt.canvas.height),!0}return!1}Xt.__esModule=!0;var Yt=function(zt){if(zt&&zt.__esModule)return zt;var Vt={};if(null!=zt)for(var qt in zt)Object.prototype.hasOwnProperty.call(zt,qt)&&(Vt[qt]=zt[qt]);return Vt.default=zt,Vt}(Bt("../../core")),Wt=16,jt=function(zt){function Vt(qt){!function(Qt,Zt){if(!(Qt instanceof Zt))throw new TypeError("Cannot call a class as a function")}(this,Vt);var Kt=function(Qt,Zt){if(!Qt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Zt&&("object"==typeof Zt||"function"==typeof Zt)?Zt:Qt}(this,zt.call(this,qt));return Kt.uploadHookHelper=Kt,Kt.canvas=document.createElement("canvas"),Kt.canvas.width=Wt,Kt.canvas.height=Wt,Kt.ctx=Kt.canvas.getContext("2d"),Kt.registerUploadHook(Ht),Kt}return function(qt,Kt){if("function"!=typeof Kt&&null!==Kt)throw new TypeError("Super expression must either be null or a function, not "+typeof Kt);qt.prototype=Object.create(Kt&&Kt.prototype,{constructor:{value:qt,enumerable:!1,writable:!0,configurable:!0}}),Kt&&(Object.setPrototypeOf?Object.setPrototypeOf(qt,Kt):qt.__proto__=Kt)}(Vt,zt),Vt.prototype.destroy=function(){zt.prototype.destroy.call(this),this.ctx=null,this.canvas=null},Vt}(function(zt){return zt&&zt.__esModule?zt:{default:zt}}(Bt("../BasePrepare")).default);Xt.default=jt,Yt.CanvasRenderer.registerPlugin("prepare",jt)},{"../../core":65,"../BasePrepare":182}],184:[function(Bt,Gt,Xt){function Ht(qt){return qt&&qt.__esModule?qt:{default:qt}}Xt.__esModule=!0;var Yt=Bt("./webgl/WebGLPrepare");Object.defineProperty(Xt,"webgl",{enumerable:!0,get:function(){return Ht(Yt).default}});var Wt=Bt("./canvas/CanvasPrepare");Object.defineProperty(Xt,"canvas",{enumerable:!0,get:function(){return Ht(Wt).default}});var jt=Bt("./BasePrepare");Object.defineProperty(Xt,"BasePrepare",{enumerable:!0,get:function(){return Ht(jt).default}});var zt=Bt("./limiters/CountLimiter");Object.defineProperty(Xt,"CountLimiter",{enumerable:!0,get:function(){return Ht(zt).default}});var Vt=Bt("./limiters/TimeLimiter");Object.defineProperty(Xt,"TimeLimiter",{enumerable:!0,get:function(){return Ht(Vt).default}})},{"./BasePrepare":182,"./canvas/CanvasPrepare":183,"./limiters/CountLimiter":185,"./limiters/TimeLimiter":186,"./webgl/WebGLPrepare":187}],185:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Yt(Wt){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Yt),this.maxItemsPerFrame=Wt,this.itemsLeft=0}return Yt.prototype.beginFrame=function(){this.itemsLeft=this.maxItemsPerFrame},Yt.prototype.allowedToUpload=function(){return 0<this.itemsLeft--},Yt}();Xt.default=Ht},{}],186:[function(Bt,Gt,Xt){Xt.__esModule=!0;var Ht=function(){function Yt(Wt){!function(jt,zt){if(!(jt instanceof zt))throw new TypeError("Cannot call a class as a function")}(this,Yt),this.maxMilliseconds=Wt,this.frameStart=0}return Yt.prototype.beginFrame=function(){this.frameStart=Date.now()},Yt.prototype.allowedToUpload=function(){return Date.now()-this.frameStart<this.maxMilliseconds},Yt}();Xt.default=Ht},{}],187:[function(Bt,Gt,Xt){function Ht(Vt,qt){return qt instanceof jt.BaseTexture&&(qt._glTextures[Vt.CONTEXT_UID]||Vt.textureManager.updateTexture(qt),!0)}function Yt(Vt,qt){return qt instanceof jt.Graphics&&((qt.dirty||qt.clearDirty||!qt._webGL[Vt.plugins.graphics.CONTEXT_UID])&&Vt.plugins.graphics.updateGraphics(qt),!0)}function Wt(Vt,qt){return Vt instanceof jt.Graphics&&(qt.push(Vt),!0)}Xt.__esModule=!0;var jt=function(Vt){if(Vt&&Vt.__esModule)return Vt;var qt={};if(null!=Vt)for(var Kt in Vt)Object.prototype.hasOwnProperty.call(Vt,Kt)&&(qt[Kt]=Vt[Kt]);return qt.default=Vt,qt}(Bt("../../core")),zt=function(Vt){function qt(Kt){!function(Zt,Jt){if(!(Zt instanceof Jt))throw new TypeError("Cannot call a class as a function")}(this,qt);var Qt=function(Zt,Jt){if(!Zt)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return Jt&&("object"==typeof Jt||"function"==typeof Jt)?Jt:Zt}(this,Vt.call(this,Kt));return Qt.uploadHookHelper=Qt.renderer,Qt.registerFindHook(Wt),Qt.registerUploadHook(Ht),Qt.registerUploadHook(Yt),Qt}return function(Kt,Qt){if("function"!=typeof Qt&&null!==Qt)throw new TypeError("Super expression must either be null or a function, not "+typeof Qt);Kt.prototype=Object.create(Qt&&Qt.prototype,{constructor:{value:Kt,enumerable:!1,writable:!0,configurable:!0}}),Qt&&(Object.setPrototypeOf?Object.setPrototypeOf(Kt,Qt):Kt.__proto__=Qt)}(qt,Vt),qt}(function(Vt){return Vt&&Vt.__esModule?Vt:{default:Vt}}(Bt("../BasePrepare")).default);Xt.default=zt,jt.WebGLRenderer.registerPlugin("prepare",zt)},{"../../core":65,"../BasePrepare":182}],188:[function(Bt,Gt,Xt){(function(Ht){function Yt(rn){if(rn&&rn.__esModule)return rn;var an={};if(null!=rn)for(var on in rn)Object.prototype.hasOwnProperty.call(rn,on)&&(an[on]=rn[on]);return an.default=rn,an}Xt.__esModule=!0,Xt.loader=Xt.prepare=Xt.particles=Xt.mesh=Xt.loaders=Xt.interaction=Xt.filters=Xt.extras=Xt.extract=Xt.accessibility=void 0;var Wt=Bt("./polyfill");Object.keys(Wt).forEach(function(rn){"default"!==rn&&"__esModule"!==rn&&Object.defineProperty(Xt,rn,{enumerable:!0,get:function(){return Wt[rn]}})});var jt=Bt("./core");Object.keys(jt).forEach(function(rn){"default"!==rn&&"__esModule"!==rn&&Object.defineProperty(Xt,rn,{enumerable:!0,get:function(){return jt[rn]}})});var zt=function(rn){return rn&&rn.__esModule?rn:{default:rn}}(Bt("./deprecation")),Vt=Yt(Bt("./accessibility")),qt=Yt(Bt("./extract")),Kt=Yt(Bt("./extras")),Qt=Yt(Bt("./filters")),Zt=Yt(Bt("./interaction")),Jt=Yt(Bt("./loaders")),$t=Yt(Bt("./mesh")),en=Yt(Bt("./particles")),tn=Yt(Bt("./prepare"));jt.utils.mixins.performMixins();var nn=Jt.shared||null;Xt.accessibility=Vt,Xt.extract=qt,Xt.extras=Kt,Xt.filters=Qt,Xt.interaction=Zt,Xt.loaders=Jt,Xt.mesh=$t,Xt.particles=en,Xt.prepare=tn,Xt.loader=nn,"function"==typeof zt.default&&(0,zt.default)(Xt),Ht.PIXI=Xt}).call(this,"undefined"==typeof global?"undefined"==typeof self?"undefined"==typeof window?{}:window:self:global)},{"./accessibility":42,"./core":65,"./deprecation":130,"./extract":132,"./extras":141,"./filters":152,"./interaction":159,"./loaders":162,"./mesh":171,"./particles":174,"./polyfill":180,"./prepare":184}]},{},[188])(188)}),function(){var Bt=function(){this.init()};Bt.prototype={init:function(){var Kt=this||Gt;return Kt._counter=1e3,Kt._codecs={},Kt._howls=[],Kt._muted=!1,Kt._volume=1,Kt._canPlayEvent="canplaythrough",Kt._navigator="undefined"!=typeof window&&window.navigator?window.navigator:null,Kt.masterGain=null,Kt.noAudio=!1,Kt.usingWebAudio=!0,Kt.autoSuspend=!0,Kt.ctx=null,Kt.mobileAutoEnable=!0,Kt._setup(),Kt},volume:function(Kt){var Qt=this||Gt;if(Kt=parseFloat(Kt),Qt.ctx||qt(),void 0!==Kt&&0<=Kt&&1>=Kt){if(Qt._volume=Kt,Qt._muted)return Qt;Qt.usingWebAudio&&(Qt.masterGain.gain.value=Kt);for(var Zt=0;Zt<Qt._howls.length;Zt++)if(!Qt._howls[Zt]._webAudio)for(var Jt=Qt._howls[Zt]._getSoundIds(),$t=0,en;$t<Jt.length;$t++)en=Qt._howls[Zt]._soundById(Jt[$t]),en&&en._node&&(en._node.volume=en._volume*Kt);return Qt}return Qt._volume},mute:function(Kt){var Qt=this||Gt;Qt.ctx||qt(),Qt._muted=Kt,Qt.usingWebAudio&&(Qt.masterGain.gain.value=Kt?0:Qt._volume);for(var Zt=0;Zt<Qt._howls.length;Zt++)if(!Qt._howls[Zt]._webAudio)for(var Jt=Qt._howls[Zt]._getSoundIds(),$t=0,en;$t<Jt.length;$t++)en=Qt._howls[Zt]._soundById(Jt[$t]),en&&en._node&&(en._node.muted=!!Kt||en._muted);return Qt},unload:function(){for(var Kt=this||Gt,Qt=Kt._howls.length-1;0<=Qt;Qt--)Kt._howls[Qt].unload();return Kt.usingWebAudio&&Kt.ctx&&void 0!==Kt.ctx.close&&(Kt.ctx.close(),Kt.ctx=null,qt()),Kt},codecs:function(Kt){return(this||Gt)._codecs[Kt.replace(/^x-/,"")]},_setup:function(){var Kt=this||Gt;if(Kt.state=Kt.ctx?Kt.ctx.state||"running":"running",Kt._autoSuspend(),!Kt.usingWebAudio)if("undefined"!=typeof Audio)try{void 0===new Audio().oncanplaythrough&&(Kt._canPlayEvent="canplay")}catch(Qt){Kt.noAudio=!0}else Kt.noAudio=!0;try{new Audio().muted&&(Kt.noAudio=!0)}catch(Qt){}return Kt.noAudio||Kt._setupCodecs(),Kt},_setupCodecs:function(){var Kt=this||Gt,Qt=null;try{Qt="undefined"==typeof Audio?null:new Audio}catch(en){return Kt}if(!Qt||"function"!=typeof Qt.canPlayType)return Kt;var Zt=Qt.canPlayType("audio/mpeg;").replace(/^no$/,""),Jt=Kt._navigator&&Kt._navigator.userAgent.match(/OPR\/([0-6].)/g),$t=Jt&&33>parseInt(Jt[0].split("/")[1],10);return Kt._codecs={mp3:!$t&&(Zt||Qt.canPlayType("audio/mp3;").replace(/^no$/,"")),mpeg:!!Zt,opus:!!Qt.canPlayType("audio/ogg; codecs=\"opus\"").replace(/^no$/,""),ogg:!!Qt.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/,""),oga:!!Qt.canPlayType("audio/ogg; codecs=\"vorbis\"").replace(/^no$/,""),wav:!!Qt.canPlayType("audio/wav; codecs=\"1\"").replace(/^no$/,""),aac:!!Qt.canPlayType("audio/aac;").replace(/^no$/,""),caf:!!Qt.canPlayType("audio/x-caf;").replace(/^no$/,""),m4a:!!(Qt.canPlayType("audio/x-m4a;")||Qt.canPlayType("audio/m4a;")||Qt.canPlayType("audio/aac;")).replace(/^no$/,""),mp4:!!(Qt.canPlayType("audio/x-mp4;")||Qt.canPlayType("audio/mp4;")||Qt.canPlayType("audio/aac;")).replace(/^no$/,""),weba:!!Qt.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/,""),webm:!!Qt.canPlayType("audio/webm; codecs=\"vorbis\"").replace(/^no$/,""),dolby:!!Qt.canPlayType("audio/mp4; codecs=\"ec-3\"").replace(/^no$/,""),flac:!!(Qt.canPlayType("audio/x-flac;")||Qt.canPlayType("audio/flac;")).replace(/^no$/,"")},Kt},_enableMobileAudio:function(){var Kt=this||Gt,Qt=/iPhone|iPad|iPod|Android|BlackBerry|BB10|Silk|Mobi/i.test(Kt._navigator&&Kt._navigator.userAgent),Zt=!!("ontouchend"in window||Kt._navigator&&0<Kt._navigator.maxTouchPoints||Kt._navigator&&0<Kt._navigator.msMaxTouchPoints);if(!Kt._mobileEnabled&&Kt.ctx&&(Qt||Zt)){Kt._mobileEnabled=!1,Kt._mobileUnloaded||44100===Kt.ctx.sampleRate||(Kt._mobileUnloaded=!0,Kt.unload()),Kt._scratchBuffer=Kt.ctx.createBuffer(1,1,22050);var Jt=function(){Gt._autoResume();var $t=Kt.ctx.createBufferSource();$t.buffer=Kt._scratchBuffer,$t.connect(Kt.ctx.destination),void 0===$t.start?$t.noteOn(0):$t.start(0),"function"==typeof Kt.ctx.resume&&Kt.ctx.resume(),$t.onended=function(){$t.disconnect(0),Kt._mobileEnabled=!0,Kt.mobileAutoEnable=!1,document.removeEventListener("touchstart",Jt,!0),document.removeEventListener("touchend",Jt,!0)}};return document.addEventListener("touchstart",Jt,!0),document.addEventListener("touchend",Jt,!0),Kt}},_autoSuspend:function(){var Kt=this;if(Kt.autoSuspend&&Kt.ctx&&void 0!==Kt.ctx.suspend&&Gt.usingWebAudio){for(var Qt=0;Qt<Kt._howls.length;Qt++)if(Kt._howls[Qt]._webAudio)for(var Zt=0;Zt<Kt._howls[Qt]._sounds.length;Zt++)if(!Kt._howls[Qt]._sounds[Zt]._paused)return Kt;return Kt._suspendTimer&&clearTimeout(Kt._suspendTimer),Kt._suspendTimer=setTimeout(function(){Kt.autoSuspend&&(Kt._suspendTimer=null,Kt.state="suspending",Kt.ctx.suspend().then(function(){Kt.state="suspended",Kt._resumeAfterSuspend&&(delete Kt._resumeAfterSuspend,Kt._autoResume())}))},3e4),Kt}},_autoResume:function(){var Kt=this;if(Kt.ctx&&void 0!==Kt.ctx.resume&&Gt.usingWebAudio)return"running"===Kt.state&&Kt._suspendTimer?(clearTimeout(Kt._suspendTimer),Kt._suspendTimer=null):"suspended"===Kt.state?(Kt.ctx.resume().then(function(){Kt.state="running";for(var Qt=0;Qt<Kt._howls.length;Qt++)Kt._howls[Qt]._emit("resume")}),Kt._suspendTimer&&(clearTimeout(Kt._suspendTimer),Kt._suspendTimer=null)):"suspending"===Kt.state&&(Kt._resumeAfterSuspend=!0),Kt}};var Gt=new Bt,Xt=function(Kt){Kt.src&&0!==Kt.src.length?this.init(Kt):console.error("An array of source files must be passed with any new Howl.")};Xt.prototype={init:function(Kt){var Qt=this;return Gt.ctx||qt(),Qt._autoplay=Kt.autoplay||!1,Qt._format="string"==typeof Kt.format?[Kt.format]:Kt.format,Qt._html5=Kt.html5||!1,Qt._muted=Kt.mute||!1,Qt._loop=Kt.loop||!1,Qt._pool=Kt.pool||5,Qt._preload="boolean"!=typeof Kt.preload||Kt.preload,Qt._rate=Kt.rate||1,Qt._sprite=Kt.sprite||{},Qt._src="string"==typeof Kt.src?[Kt.src]:Kt.src,Qt._volume=void 0===Kt.volume?1:Kt.volume,Qt._xhrWithCredentials=Kt.xhrWithCredentials||!1,Qt._duration=0,Qt._state="unloaded",Qt._sounds=[],Qt._endTimers={},Qt._queue=[],Qt._onend=Kt.onend?[{fn:Kt.onend}]:[],Qt._onfade=Kt.onfade?[{fn:Kt.onfade}]:[],Qt._onload=Kt.onload?[{fn:Kt.onload}]:[],Qt._onloaderror=Kt.onloaderror?[{fn:Kt.onloaderror}]:[],Qt._onplayerror=Kt.onplayerror?[{fn:Kt.onplayerror}]:[],Qt._onpause=Kt.onpause?[{fn:Kt.onpause}]:[],Qt._onplay=Kt.onplay?[{fn:Kt.onplay}]:[],Qt._onstop=Kt.onstop?[{fn:Kt.onstop}]:[],Qt._onmute=Kt.onmute?[{fn:Kt.onmute}]:[],Qt._onvolume=Kt.onvolume?[{fn:Kt.onvolume}]:[],Qt._onrate=Kt.onrate?[{fn:Kt.onrate}]:[],Qt._onseek=Kt.onseek?[{fn:Kt.onseek}]:[],Qt._onresume=[],Qt._webAudio=Gt.usingWebAudio&&!Qt._html5,void 0!==Gt.ctx&&Gt.ctx&&Gt.mobileAutoEnable&&Gt._enableMobileAudio(),Gt._howls.push(Qt),Qt._autoplay&&Qt._queue.push({event:"play",action:function(){Qt.play()}}),Qt._preload&&Qt.load(),Qt},load:function(){var Kt=null;if(Gt.noAudio)this._emit("loaderror",null,"No audio support.");else{"string"==typeof this._src&&(this._src=[this._src]);for(var Qt=0;Qt<this._src.length;Qt++){var Zt,Jt;if(this._format&&this._format[Qt])Zt=this._format[Qt];else{if("string"!=typeof(Jt=this._src[Qt])){this._emit("loaderror",null,"Non-string found in selected audio sources - ignoring.");continue}(Zt=/^data:audio\/([^;,]+);/i.exec(Jt))||(Zt=/\.([^.]+)$/.exec(Jt.split("?",1)[0])),Zt&&(Zt=Zt[1].toLowerCase())}if(Zt||console.warn("No file extension was found. Consider using the \"format\" property or specify an extension."),Zt&&Gt.codecs(Zt)){Kt=this._src[Qt];break}}if(Kt)return this._src=Kt,this._state="loading","https:"===window.location.protocol&&"http:"===Kt.slice(0,5)&&(this._html5=!0,this._webAudio=!1),new Ht(this),this._webAudio&&Wt(this),this;this._emit("loaderror",null,"No codec support for selected audio sources.")}},play:function(Kt,Qt){var Zt=this,Jt=null;if("number"==typeof Kt)Jt=Kt,Kt=null;else{if("string"==typeof Kt&&"loaded"===Zt._state&&!Zt._sprite[Kt])return null;if(void 0===Kt){Kt="__default";for(var $t=0,en=0;en<Zt._sounds.length;en++)Zt._sounds[en]._paused&&!Zt._sounds[en]._ended&&($t++,Jt=Zt._sounds[en]._id);1===$t?Kt=null:Jt=null}}var tn=Jt?Zt._soundById(Jt):Zt._inactiveSound();if(!tn)return null;if(Jt&&!Kt&&(Kt=tn._sprite||"__default"),"loaded"!==Zt._state){tn._sprite=Kt,tn._ended=!1;var nn=tn._id;return Zt._queue.push({event:"play",action:function(){Zt.play(nn)}}),nn}if(Jt&&!tn._paused)return Qt||setTimeout(function(){Zt._emit("play",tn._id)},0),tn._id;Zt._webAudio&&Gt._autoResume();var rn=Math.max(0,0<tn._seek?tn._seek:Zt._sprite[Kt][0]/1e3),an=Math.max(0,(Zt._sprite[Kt][0]+Zt._sprite[Kt][1])/1e3-rn),on=1e3*an/Math.abs(tn._rate);tn._paused=!1,tn._ended=!1,tn._sprite=Kt,tn._seek=rn,tn._start=Zt._sprite[Kt][0]/1e3,tn._stop=(Zt._sprite[Kt][0]+Zt._sprite[Kt][1])/1e3,tn._loop=tn._loop||Zt._sprite[Kt][2];var sn=tn._node;if(Zt._webAudio){var dn=function(){Zt._refreshBuffer(tn);var cn=tn._muted||Zt._muted?0:tn._volume;sn.gain.setValueAtTime(cn,Gt.ctx.currentTime),tn._playStart=Gt.ctx.currentTime,void 0===sn.bufferSource.start?tn._loop?sn.bufferSource.noteGrainOn(0,rn,86400):sn.bufferSource.noteGrainOn(0,rn,an):tn._loop?sn.bufferSource.start(0,rn,86400):sn.bufferSource.start(0,rn,an),on!=1/0&&(Zt._endTimers[tn._id]=setTimeout(Zt._ended.bind(Zt,tn),on)),Qt||setTimeout(function(){Zt._emit("play",tn._id)},0)};"running"===Gt.state?dn():(Zt.once("resume",dn),Zt._clearTimer(tn._id))}else{var ln=function(){sn.currentTime=rn,sn.muted=tn._muted||Zt._muted||Gt._muted||sn.muted,sn.volume=tn._volume*Gt.volume(),sn.playbackRate=tn._rate;try{if(sn.play(),sn.paused)return void Zt._emit("playerror",tn._id,"Playback was unable to start. This is most commonly an issue on mobile devices where playback was not within a user interaction.");on!=1/0&&(Zt._endTimers[tn._id]=setTimeout(Zt._ended.bind(Zt,tn),on)),Qt||Zt._emit("play",tn._id)}catch(cn){Zt._emit("playerror",tn._id,cn)}},un=window&&window.ejecta||!sn.readyState&&Gt._navigator.isCocoonJS;if(4===sn.readyState||un)ln();else{var pn=function(){ln(),sn.removeEventListener(Gt._canPlayEvent,pn,!1)};sn.addEventListener(Gt._canPlayEvent,pn,!1),Zt._clearTimer(tn._id)}}return tn._id},pause:function(Kt){var Qt=this;if("loaded"!==Qt._state)return Qt._queue.push({event:"pause",action:function(){Qt.pause(Kt)}}),Qt;for(var Zt=Qt._getSoundIds(Kt),Jt=0;Jt<Zt.length;Jt++){Qt._clearTimer(Zt[Jt]);var $t=Qt._soundById(Zt[Jt]);if($t&&!$t._paused&&($t._seek=Qt.seek(Zt[Jt]),$t._rateSeek=0,$t._paused=!0,Qt._stopFade(Zt[Jt]),$t._node))if(Qt._webAudio){if(!$t._node.bufferSource)continue;void 0===$t._node.bufferSource.stop?$t._node.bufferSource.noteOff(0):$t._node.bufferSource.stop(0),Qt._cleanBuffer($t._node)}else isNaN($t._node.duration)&&$t._node.duration!==1/0||$t._node.pause();arguments[1]||Qt._emit("pause",$t?$t._id:null)}return Qt},stop:function(Kt,Qt){var Zt=this;if("loaded"!==Zt._state)return Zt._queue.push({event:"stop",action:function(){Zt.stop(Kt)}}),Zt;for(var Jt=Zt._getSoundIds(Kt),$t=0;$t<Jt.length;$t++){Zt._clearTimer(Jt[$t]);var en=Zt._soundById(Jt[$t]);en&&(en._seek=en._start||0,en._rateSeek=0,en._paused=!0,en._ended=!0,Zt._stopFade(Jt[$t]),en._node&&(Zt._webAudio?en._node.bufferSource&&(void 0===en._node.bufferSource.stop?en._node.bufferSource.noteOff(0):en._node.bufferSource.stop(0),en._panner&&(en._panner.disconnect(),en._panner=null),Zt._cleanBuffer(en._node)):isNaN(en._node.duration)&&en._node.duration!==1/0||(en._node.currentTime=en._start||0,en._node.pause())),Qt||Zt._emit("stop",en._id))}return Zt},mute:function(Kt,Qt){var Zt=this;if("loaded"!==Zt._state)return Zt._queue.push({event:"mute",action:function(){Zt.mute(Kt,Qt)}}),Zt;if(void 0===Qt){if("boolean"!=typeof Kt)return Zt._muted;Zt._muted=Kt}for(var Jt=Zt._getSoundIds(Qt),$t=0,en;$t<Jt.length;$t++)en=Zt._soundById(Jt[$t]),en&&(en._muted=Kt,Zt._webAudio&&en._node?en._node.gain.setValueAtTime(Kt?0:en._volume,Gt.ctx.currentTime):en._node&&(en._node.muted=!!Gt._muted||Kt),Zt._emit("mute",en._id));return Zt},volume:function(){var Zt=this,Jt=arguments,Kt,Qt;if(0===Jt.length)return Zt._volume;1===Jt.length||2===Jt.length&&void 0===Jt[1]?0<=Zt._getSoundIds().indexOf(Jt[0])?Qt=parseInt(Jt[0],10):Kt=parseFloat(Jt[0]):2<=Jt.length&&(Kt=parseFloat(Jt[0]),Qt=parseInt(Jt[1],10));var $t;if(!(void 0!==Kt&&0<=Kt&&1>=Kt))return($t=Qt?Zt._soundById(Qt):Zt._sounds[0])?$t._volume:0;if("loaded"!==Zt._state)return Zt._queue.push({event:"volume",action:function(){Zt.volume.apply(Zt,Jt)}}),Zt;void 0===Qt&&(Zt._volume=Kt),Qt=Zt._getSoundIds(Qt);for(var en=0;en<Qt.length;en++)($t=Zt._soundById(Qt[en]))&&($t._volume=Kt,Jt[2]||Zt._stopFade(Qt[en]),Zt._webAudio&&$t._node&&!$t._muted?$t._node.gain.setValueAtTime(Kt,Gt.ctx.currentTime):$t._node&&!$t._muted&&($t._node.volume=Kt*Gt.volume()),Zt._emit("volume",$t._id));return Zt},fade:function(Kt,Qt,Zt,Jt,$t){var en=this;if("loaded"!==en._state)return en._queue.push({event:"fade",action:function(){en.fade(Kt,Qt,Zt,Jt)}}),en;null==$t&&en.volume(Kt,Jt);for(var tn=en._getSoundIds(Jt),nn=0,rn;nn<tn.length;nn++)if(rn=en._soundById(tn[nn]),rn&&(Jt||en._stopFade(tn[nn]),en._webAudio&&!rn._muted)){var an=Gt.ctx.currentTime;rn._volume=Kt,null==$t&&rn._node.gain.setValueAtTime(Kt,an),rn._node.gain.linearRampToValueAtTime(Qt,an+Zt/1e3)}return en},_startFadeInterval:function(Kt,Qt,Zt,Jt,$t){var en=this,tn=Qt,nn=Qt>Zt?"out":"in",rn=Math.abs(Qt-Zt)/.01,an=0<rn?Jt/rn:Jt;4>an&&(rn=Math.ceil(rn/(4/an)),an=4),Kt._interval=setInterval(function(){0<rn&&(tn+="in"==nn?.01:-.01),tn=Math.max(0,tn),tn=Math.min(1,tn),tn=Math.round(100*tn)/100,en._webAudio?(void 0===$t&&(en._volume=tn),Kt._volume=tn):en.volume(tn,Kt._id,!0),(Zt<Qt&&tn<=Zt||Zt>Qt&&tn>=Zt)&&(clearInterval(Kt._interval),Kt._interval=null,en.volume(Zt,Kt._id),en._emit("fade",Kt._id))},an)},_stopFade:function(Kt){var Qt=this._soundById(Kt);return Qt&&Qt._interval&&(this._webAudio&&Qt._node.gain.cancelScheduledValues(Gt.ctx.currentTime),clearInterval(Qt._interval),Qt._interval=null,this._emit("fade",Kt)),this},loop:function(){var Jt=arguments,Kt,Qt,Zt;if(0===Jt.length)return this._loop;if(1===Jt.length){if("boolean"!=typeof Jt[0])return!!(Zt=this._soundById(parseInt(Jt[0],10)))&&Zt._loop;Kt=Jt[0],this._loop=Kt}else 2===Jt.length&&(Kt=Jt[0],Qt=parseInt(Jt[1],10));for(var $t=this._getSoundIds(Qt),en=0;en<$t.length;en++)(Zt=this._soundById($t[en]))&&(Zt._loop=Kt,this._webAudio&&Zt._node&&Zt._node.bufferSource&&(Zt._node.bufferSource.loop=Kt,Kt&&(Zt._node.bufferSource.loopStart=Zt._start||0,Zt._node.bufferSource.loopEnd=Zt._stop)));return this},rate:function(){var Zt=this,Jt=arguments,Kt,Qt;0===Jt.length?Qt=Zt._sounds[0]._id:1===Jt.length?0<=Zt._getSoundIds().indexOf(Jt[0])?Qt=parseInt(Jt[0],10):Kt=parseFloat(Jt[0]):2===Jt.length&&(Kt=parseFloat(Jt[0]),Qt=parseInt(Jt[1],10));var $t;if("number"!=typeof Kt)return($t=Zt._soundById(Qt))?$t._rate:Zt._rate;if("loaded"!==Zt._state)return Zt._queue.push({event:"rate",action:function(){Zt.rate.apply(Zt,Jt)}}),Zt;void 0===Qt&&(Zt._rate=Kt),Qt=Zt._getSoundIds(Qt);for(var en=0;en<Qt.length;en++)if($t=Zt._soundById(Qt[en])){$t._rateSeek=Zt.seek(Qt[en]),$t._playStart=Zt._webAudio?Gt.ctx.currentTime:$t._playStart,$t._rate=Kt,Zt._webAudio&&$t._node&&$t._node.bufferSource?$t._node.bufferSource.playbackRate.value=Kt:$t._node&&($t._node.playbackRate=Kt);var tn=Zt.seek(Qt[en]),nn=1e3*((Zt._sprite[$t._sprite][0]+Zt._sprite[$t._sprite][1])/1e3-tn)/Math.abs($t._rate);!Zt._endTimers[Qt[en]]&&$t._paused||(Zt._clearTimer(Qt[en]),Zt._endTimers[Qt[en]]=setTimeout(Zt._ended.bind(Zt,$t),nn)),Zt._emit("rate",$t._id)}return Zt},seek:function(){var Zt=this,Jt=arguments,Kt,Qt;if(0===Jt.length?Qt=Zt._sounds[0]._id:1===Jt.length?0<=Zt._getSoundIds().indexOf(Jt[0])?Qt=parseInt(Jt[0],10):Zt._sounds.length&&(Qt=Zt._sounds[0]._id,Kt=parseFloat(Jt[0])):2===Jt.length&&(Kt=parseFloat(Jt[0]),Qt=parseInt(Jt[1],10)),void 0===Qt)return Zt;if("loaded"!==Zt._state)return Zt._queue.push({event:"seek",action:function(){Zt.seek.apply(Zt,Jt)}}),Zt;var $t=Zt._soundById(Qt);if($t){if(!("number"==typeof Kt&&0<=Kt)){if(Zt._webAudio){var en=Zt.playing(Qt)?Gt.ctx.currentTime-$t._playStart:0,tn=$t._rateSeek?$t._rateSeek-$t._seek:0;return $t._seek+(tn+en*Math.abs($t._rate))}return $t._node.currentTime}var nn=Zt.playing(Qt);nn&&Zt.pause(Qt,!0),$t._seek=Kt,$t._ended=!1,Zt._clearTimer(Qt),nn&&Zt.play(Qt,!0),!Zt._webAudio&&$t._node&&($t._node.currentTime=Kt),Zt._emit("seek",Qt)}return Zt},playing:function(Kt){if("number"==typeof Kt){var Qt=this._soundById(Kt);return!!Qt&&!Qt._paused}for(var Zt=0;Zt<this._sounds.length;Zt++)if(!this._sounds[Zt]._paused)return!0;return!1},duration:function(Kt){var Qt=this._duration,Zt=this._soundById(Kt);return Zt&&(Qt=this._sprite[Zt._sprite][1]/1e3),Qt},state:function(){return this._state},unload:function(){for(var Kt=this,Qt=Kt._sounds,Zt=0;Zt<Qt.length;Zt++){(Qt[Zt]._paused||Kt.stop(Qt[Zt]._id),!Kt._webAudio)&&(/MSIE |Trident\//.test(Gt._navigator&&Gt._navigator.userAgent)||(Qt[Zt]._node.src="data:audio/wav;base64,UklGRigAAABXQVZFZm10IBIAAAABAAEARKwAAIhYAQACABAAAABkYXRhAgAAAAEA"),Qt[Zt]._node.removeEventListener("error",Qt[Zt]._errorFn,!1),Qt[Zt]._node.removeEventListener(Gt._canPlayEvent,Qt[Zt]._loadFn,!1)),delete Qt[Zt]._node,Kt._clearTimer(Qt[Zt]._id);var Jt=Gt._howls.indexOf(Kt);0<=Jt&&Gt._howls.splice(Jt,1)}var $t=!0;for(Zt=0;Zt<Gt._howls.length;Zt++)if(Gt._howls[Zt]._src===Kt._src){$t=!1;break}return Yt&&$t&&delete Yt[Kt._src],Gt.noAudio=!1,Kt._state="unloaded",Kt._sounds=[],Kt=null,null},on:function(Kt,Qt,Zt,Jt){var $t=this["_on"+Kt];return"function"==typeof Qt&&$t.push(Jt?{id:Zt,fn:Qt,once:Jt}:{id:Zt,fn:Qt}),this},off:function(Kt,Qt,Zt){var Jt=this["_on"+Kt],$t=0;if("number"==typeof Qt&&(Zt=Qt,Qt=null),Qt||Zt)for($t=0;$t<Jt.length;$t++){var en=Zt===Jt[$t].id;if(Qt===Jt[$t].fn&&en||!Qt&&en){Jt.splice($t,1);break}}else if(Kt)this["_on"+Kt]=[];else{var tn=Object.keys(this);for($t=0;$t<tn.length;$t++)0===tn[$t].indexOf("_on")&&Array.isArray(this[tn[$t]])&&(this[tn[$t]]=[])}return this},once:function(Kt,Qt,Zt){return this.on(Kt,Qt,Zt,1),this},_emit:function(Kt,Qt,Zt){for(var Jt=this["_on"+Kt],$t=Jt.length-1;0<=$t;$t--)Jt[$t].id&&Jt[$t].id!==Qt&&"load"!==Kt||(setTimeout(function(en){en.call(this,Qt,Zt)}.bind(this,Jt[$t].fn),0),Jt[$t].once&&this.off(Kt,Jt[$t].fn,Jt[$t].id));return this},_loadQueue:function(){var Kt=this;if(0<Kt._queue.length){var Qt=Kt._queue[0];Kt.once(Qt.event,function(){Kt._queue.shift(),Kt._loadQueue()}),Qt.action()}return Kt},_ended:function(Kt){var Qt=Kt._sprite;if(!this._webAudio&&Kt._node&&!Kt._node.paused)return setTimeout(this._ended.bind(this,Kt),100),this;var Zt=Kt._loop||this._sprite[Qt][2];if(this._emit("end",Kt._id),!this._webAudio&&Zt&&this.stop(Kt._id,!0).play(Kt._id),this._webAudio&&Zt){this._emit("play",Kt._id),Kt._seek=Kt._start||0,Kt._rateSeek=0,Kt._playStart=Gt.ctx.currentTime;var Jt=1e3*(Kt._stop-Kt._start)/Math.abs(Kt._rate);this._endTimers[Kt._id]=setTimeout(this._ended.bind(this,Kt),Jt)}return this._webAudio&&!Zt&&(Kt._paused=!0,Kt._ended=!0,Kt._seek=Kt._start||0,Kt._rateSeek=0,this._clearTimer(Kt._id),this._cleanBuffer(Kt._node),Gt._autoSuspend()),this._webAudio||Zt||this.stop(Kt._id),this},_clearTimer:function(Kt){return this._endTimers[Kt]&&(clearTimeout(this._endTimers[Kt]),delete this._endTimers[Kt]),this},_soundById:function(Kt){for(var Qt=0;Qt<this._sounds.length;Qt++)if(Kt===this._sounds[Qt]._id)return this._sounds[Qt];return null},_inactiveSound:function(){this._drain();for(var Kt=0;Kt<this._sounds.length;Kt++)if(this._sounds[Kt]._ended)return this._sounds[Kt].reset();return new Ht(this)},_drain:function(){var Kt=this._pool,Qt=0,Zt=0;if(!(this._sounds.length<Kt)){for(Zt=0;Zt<this._sounds.length;Zt++)this._sounds[Zt]._ended&&Qt++;for(Zt=this._sounds.length-1;0<=Zt;Zt--){if(Qt<=Kt)return;this._sounds[Zt]._ended&&(this._webAudio&&this._sounds[Zt]._node&&this._sounds[Zt]._node.disconnect(0),this._sounds.splice(Zt,1),Qt--)}}},_getSoundIds:function(Kt){if(void 0===Kt){for(var Qt=[],Zt=0;Zt<this._sounds.length;Zt++)Qt.push(this._sounds[Zt]._id);return Qt}return[Kt]},_refreshBuffer:function(Kt){return Kt._node.bufferSource=Gt.ctx.createBufferSource(),Kt._node.bufferSource.buffer=Yt[this._src],Kt._panner?Kt._node.bufferSource.connect(Kt._panner):Kt._node.bufferSource.connect(Kt._node),Kt._node.bufferSource.loop=Kt._loop,Kt._loop&&(Kt._node.bufferSource.loopStart=Kt._start||0,Kt._node.bufferSource.loopEnd=Kt._stop),Kt._node.bufferSource.playbackRate.value=Kt._rate,this},_cleanBuffer:function(Kt){if(this._scratchBuffer){Kt.bufferSource.onended=null,Kt.bufferSource.disconnect(0);try{Kt.bufferSource.buffer=this._scratchBuffer}catch(Qt){}}return Kt.bufferSource=null,this}};var Ht=function(Kt){this._parent=Kt,this.init()};Ht.prototype={init:function(){var Kt=this._parent;return this._muted=Kt._muted,this._loop=Kt._loop,this._volume=Kt._volume,this._rate=Kt._rate,this._seek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++Gt._counter,Kt._sounds.push(this),this.create(),this},create:function(){var Kt=this._parent,Qt=Gt._muted||this._muted||this._parent._muted?0:this._volume;return Kt._webAudio?(this._node=void 0===Gt.ctx.createGain?Gt.ctx.createGainNode():Gt.ctx.createGain(),this._node.gain.setValueAtTime(Qt,Gt.ctx.currentTime),this._node.paused=!0,this._node.connect(Gt.masterGain)):(this._node=new Audio,this._errorFn=this._errorListener.bind(this),this._node.addEventListener("error",this._errorFn,!1),this._loadFn=this._loadListener.bind(this),this._node.addEventListener(Gt._canPlayEvent,this._loadFn,!1),this._node.src=Kt._src,this._node.preload="auto",this._node.volume=Qt*Gt.volume(),this._node.load()),this},reset:function(){var Kt=this._parent;return this._muted=Kt._muted,this._loop=Kt._loop,this._volume=Kt._volume,this._rate=Kt._rate,this._seek=0,this._rateSeek=0,this._paused=!0,this._ended=!0,this._sprite="__default",this._id=++Gt._counter,this},_errorListener:function(){this._parent._emit("loaderror",this._id,this._node.error?this._node.error.code:0),this._node.removeEventListener("error",this._errorFn,!1)},_loadListener:function(){var Kt=this._parent;Kt._duration=Math.ceil(10*this._node.duration)/10,0===Object.keys(Kt._sprite).length&&(Kt._sprite={__default:[0,1e3*Kt._duration]}),"loaded"!==Kt._state&&(Kt._state="loaded",Kt._emit("load"),Kt._loadQueue()),this._node.removeEventListener(Gt._canPlayEvent,this._loadFn,!1)}};var Yt={},Wt=function(Kt){var Qt=Kt._src;if(Yt[Qt])return Kt._duration=Yt[Qt].duration,void Vt(Kt);if(/^data:[^;]+;base64,/.test(Qt)){for(var Zt=atob(Qt.split(",")[1]),Jt=new Uint8Array(Zt.length),$t=0;$t<Zt.length;++$t)Jt[$t]=Zt.charCodeAt($t);zt(Jt.buffer,Kt)}else{var en=new XMLHttpRequest;en.open("GET",Qt,!0),en.withCredentials=Kt._xhrWithCredentials,en.responseType="arraybuffer",en.onload=function(){var tn=(en.status+"")[0];"0"===tn||"2"===tn||"3"===tn?zt(en.response,Kt):Kt._emit("loaderror",null,"Failed loading audio file with status: "+en.status+".")},en.onerror=function(){Kt._webAudio&&(Kt._html5=!0,Kt._webAudio=!1,Kt._sounds=[],delete Yt[Qt],Kt.load())},jt(en)}},jt=function(Kt){try{Kt.send()}catch(Qt){Kt.onerror()}},zt=function(Kt,Qt){Gt.ctx.decodeAudioData(Kt,function(Zt){Zt&&0<Qt._sounds.length&&(Yt[Qt._src]=Zt,Vt(Qt,Zt))},function(){Qt._emit("loaderror",null,"Decoding audio data failed.")})},Vt=function(Kt,Qt){Qt&&!Kt._duration&&(Kt._duration=Qt.duration),0===Object.keys(Kt._sprite).length&&(Kt._sprite={__default:[0,1e3*Kt._duration]}),"loaded"!==Kt._state&&(Kt._state="loaded",Kt._emit("load"),Kt._loadQueue())},qt=function(){try{"undefined"==typeof AudioContext?"undefined"==typeof webkitAudioContext?Gt.usingWebAudio=!1:Gt.ctx=new webkitAudioContext:Gt.ctx=new AudioContext}catch($t){Gt.usingWebAudio=!1}var Kt=/iP(hone|od|ad)/.test(Gt._navigator&&Gt._navigator.platform),Qt=Gt._navigator&&Gt._navigator.appVersion.match(/OS (\d+)_(\d+)_?(\d+)?/),Zt=Qt?parseInt(Qt[1],10):null;if(Kt&&Zt&&9>Zt){var Jt=/safari/.test(Gt._navigator&&Gt._navigator.userAgent.toLowerCase());(Gt._navigator&&Gt._navigator.standalone&&!Jt||Gt._navigator&&!Gt._navigator.standalone&&!Jt)&&(Gt.usingWebAudio=!1)}Gt.usingWebAudio&&(Gt.masterGain=void 0===Gt.ctx.createGain?Gt.ctx.createGainNode():Gt.ctx.createGain(),Gt.masterGain.gain.value=Gt._muted?0:1,Gt.masterGain.connect(Gt.ctx.destination)),Gt._setup()};"function"==typeof define&&define.amd&&define([],function(){return{Howler:Gt,Howl:Xt}}),"undefined"!=typeof exports&&(exports.Howler=Gt,exports.Howl=Xt),"undefined"==typeof window?"undefined"!=typeof global&&(global.HowlerGlobal=Bt,global.Howler=Gt,global.Howl=Xt,global.Sound=Ht):(window.HowlerGlobal=Bt,window.Howler=Gt,window.Howl=Xt,window.Sound=Ht)}(),function(){HowlerGlobal.prototype._pos=[0,0,0],HowlerGlobal.prototype._orientation=[0,0,-1,0,1,0],HowlerGlobal.prototype.stereo=function(Gt){if(!this.ctx||!this.ctx.listener)return this;for(var Xt=this._howls.length-1;0<=Xt;Xt--)this._howls[Xt].stereo(Gt);return this},HowlerGlobal.prototype.pos=function(Gt,Xt,Ht){return this.ctx&&this.ctx.listener?(Xt="number"==typeof Xt?Xt:this._pos[1],Ht="number"==typeof Ht?Ht:this._pos[2],"number"==typeof Gt?(this._pos=[Gt,Xt,Ht],this.ctx.listener.setPosition(this._pos[0],this._pos[1],this._pos[2]),this):this._pos):this},HowlerGlobal.prototype.orientation=function(Gt,Xt,Ht,Yt,Wt,jt){if(!this.ctx||!this.ctx.listener)return this;var zt=this._orientation;return Xt="number"==typeof Xt?Xt:zt[1],Ht="number"==typeof Ht?Ht:zt[2],Yt="number"==typeof Yt?Yt:zt[3],Wt="number"==typeof Wt?Wt:zt[4],jt="number"==typeof jt?jt:zt[5],"number"==typeof Gt?(this._orientation=[Gt,Xt,Ht,Yt,Wt,jt],this.ctx.listener.setOrientation(Gt,Xt,Ht,Yt,Wt,jt),this):zt},Howl.prototype.init=function(Gt){return function(Xt){return this._orientation=Xt.orientation||[1,0,0],this._stereo=Xt.stereo||null,this._pos=Xt.pos||null,this._pannerAttr={coneInnerAngle:void 0===Xt.coneInnerAngle?360:Xt.coneInnerAngle,coneOuterAngle:void 0===Xt.coneOuterAngle?360:Xt.coneOuterAngle,coneOuterGain:void 0===Xt.coneOuterGain?0:Xt.coneOuterGain,distanceModel:void 0===Xt.distanceModel?"inverse":Xt.distanceModel,maxDistance:void 0===Xt.maxDistance?1e4:Xt.maxDistance,panningModel:void 0===Xt.panningModel?"HRTF":Xt.panningModel,refDistance:void 0===Xt.refDistance?1:Xt.refDistance,rolloffFactor:void 0===Xt.rolloffFactor?1:Xt.rolloffFactor},this._onstereo=Xt.onstereo?[{fn:Xt.onstereo}]:[],this._onpos=Xt.onpos?[{fn:Xt.onpos}]:[],this._onorientation=Xt.onorientation?[{fn:Xt.onorientation}]:[],Gt.call(this,Xt)}}(Howl.prototype.init),Howl.prototype.stereo=function(Gt,Xt){var Ht=this;if(!Ht._webAudio)return Ht;if("loaded"!==Ht._state)return Ht._queue.push({event:"stereo",action:function(){Ht.stereo(Gt,Xt)}}),Ht;var Yt=void 0===Howler.ctx.createStereoPanner?"spatial":"stereo";if(void 0===Xt){if("number"!=typeof Gt)return Ht._stereo;Ht._stereo=Gt,Ht._pos=[Gt,0,0]}for(var Wt=Ht._getSoundIds(Xt),jt=0,zt;jt<Wt.length;jt++)if(zt=Ht._soundById(Wt[jt]),zt){if("number"!=typeof Gt)return zt._stereo;zt._stereo=Gt,zt._pos=[Gt,0,0],zt._node&&(zt._pannerAttr.panningModel="equalpower",zt._panner&&zt._panner.pan||Bt(zt,Yt),"spatial"==Yt?zt._panner.setPosition(Gt,0,Math.abs(1-Gt)):zt._panner.pan.value=Gt),Ht._emit("stereo",zt._id)}return Ht},Howl.prototype.pos=function(Gt,Xt,Ht,Yt){var Wt=this;if(!Wt._webAudio)return Wt;if("loaded"!==Wt._state)return Wt._queue.push({event:"pos",action:function(){Wt.pos(Gt,Xt,Ht,Yt)}}),Wt;if(Xt="number"==typeof Xt?Xt:0,Ht="number"==typeof Ht?Ht:-.5,void 0===Yt){if("number"!=typeof Gt)return Wt._pos;Wt._pos=[Gt,Xt,Ht]}for(var jt=Wt._getSoundIds(Yt),zt=0,Vt;zt<jt.length;zt++)if(Vt=Wt._soundById(jt[zt]),Vt){if("number"!=typeof Gt)return Vt._pos;Vt._pos=[Gt,Xt,Ht],Vt._node&&(Vt._panner&&!Vt._panner.pan||Bt(Vt,"spatial"),Vt._panner.setPosition(Gt,Xt,Ht)),Wt._emit("pos",Vt._id)}return Wt},Howl.prototype.orientation=function(Gt,Xt,Ht,Yt){var Wt=this;if(!Wt._webAudio)return Wt;if("loaded"!==Wt._state)return Wt._queue.push({event:"orientation",action:function(){Wt.orientation(Gt,Xt,Ht,Yt)}}),Wt;if(Xt="number"==typeof Xt?Xt:Wt._orientation[1],Ht="number"==typeof Ht?Ht:Wt._orientation[2],void 0===Yt){if("number"!=typeof Gt)return Wt._orientation;Wt._orientation=[Gt,Xt,Ht]}for(var jt=Wt._getSoundIds(Yt),zt=0,Vt;zt<jt.length;zt++)if(Vt=Wt._soundById(jt[zt]),Vt){if("number"!=typeof Gt)return Vt._orientation;Vt._orientation=[Gt,Xt,Ht],Vt._node&&(Vt._panner||(Vt._pos||(Vt._pos=Wt._pos||[0,0,-0.5]),Bt(Vt,"spatial")),Vt._panner.setOrientation(Gt,Xt,Ht)),Wt._emit("orientation",Vt._id)}return Wt},Howl.prototype.pannerAttr=function(){var Yt=arguments,Gt,Xt,Ht;if(!this._webAudio)return this;if(0===Yt.length)return this._pannerAttr;if(1===Yt.length){if("object"!=typeof Yt[0])return(Ht=this._soundById(parseInt(Yt[0],10)))?Ht._pannerAttr:this._pannerAttr;Gt=Yt[0],void 0==Xt&&(Gt.pannerAttr||(Gt.pannerAttr={coneInnerAngle:Gt.coneInnerAngle,coneOuterAngle:Gt.coneOuterAngle,coneOuterGain:Gt.coneOuterGain,distanceModel:Gt.distanceModel,maxDistance:Gt.maxDistance,refDistance:Gt.refDistance,rolloffFactor:Gt.rolloffFactor,panningModel:Gt.panningModel}),this._pannerAttr={coneInnerAngle:void 0===Gt.pannerAttr.coneInnerAngle?this._coneInnerAngle:Gt.pannerAttr.coneInnerAngle,coneOuterAngle:void 0===Gt.pannerAttr.coneOuterAngle?this._coneOuterAngle:Gt.pannerAttr.coneOuterAngle,coneOuterGain:void 0===Gt.pannerAttr.coneOuterGain?this._coneOuterGain:Gt.pannerAttr.coneOuterGain,distanceModel:void 0===Gt.pannerAttr.distanceModel?this._distanceModel:Gt.pannerAttr.distanceModel,maxDistance:void 0===Gt.pannerAttr.maxDistance?this._maxDistance:Gt.pannerAttr.maxDistance,refDistance:void 0===Gt.pannerAttr.refDistance?this._refDistance:Gt.pannerAttr.refDistance,rolloffFactor:void 0===Gt.pannerAttr.rolloffFactor?this._rolloffFactor:Gt.pannerAttr.rolloffFactor,panningModel:void 0===Gt.pannerAttr.panningModel?this._panningModel:Gt.pannerAttr.panningModel})}else 2===Yt.length&&(Gt=Yt[0],Xt=parseInt(Yt[1],10));for(var Wt=this._getSoundIds(Xt),jt=0;jt<Wt.length;jt++)if(Ht=this._soundById(Wt[jt])){var zt=Ht._pannerAttr;zt={coneInnerAngle:void 0===Gt.coneInnerAngle?zt.coneInnerAngle:Gt.coneInnerAngle,coneOuterAngle:void 0===Gt.coneOuterAngle?zt.coneOuterAngle:Gt.coneOuterAngle,coneOuterGain:void 0===Gt.coneOuterGain?zt.coneOuterGain:Gt.coneOuterGain,distanceModel:void 0===Gt.distanceModel?zt.distanceModel:Gt.distanceModel,maxDistance:void 0===Gt.maxDistance?zt.maxDistance:Gt.maxDistance,refDistance:void 0===Gt.refDistance?zt.refDistance:Gt.refDistance,rolloffFactor:void 0===Gt.rolloffFactor?zt.rolloffFactor:Gt.rolloffFactor,panningModel:void 0===Gt.panningModel?zt.panningModel:Gt.panningModel};var Vt=Ht._panner;Vt?(Vt.coneInnerAngle=zt.coneInnerAngle,Vt.coneOuterAngle=zt.coneOuterAngle,Vt.coneOuterGain=zt.coneOuterGain,Vt.distanceModel=zt.distanceModel,Vt.maxDistance=zt.maxDistance,Vt.refDistance=zt.refDistance,Vt.rolloffFactor=zt.rolloffFactor,Vt.panningModel=zt.panningModel):(Ht._pos||(Ht._pos=this._pos||[0,0,-0.5]),Bt(Ht,"spatial"))}return this},Sound.prototype.init=function(Gt){return function(){var Xt=this._parent;this._orientation=Xt._orientation,this._stereo=Xt._stereo,this._pos=Xt._pos,this._pannerAttr=Xt._pannerAttr,Gt.call(this),this._stereo?Xt.stereo(this._stereo):this._pos&&Xt.pos(this._pos[0],this._pos[1],this._pos[2],this._id)}}(Sound.prototype.init),Sound.prototype.reset=function(Gt){return function(){var Xt=this._parent;return this._orientation=Xt._orientation,this._pos=Xt._pos,this._pannerAttr=Xt._pannerAttr,Gt.call(this)}}(Sound.prototype.reset);var Bt=function(Gt,Xt){"spatial"===(Xt=Xt||"spatial")?(Gt._panner=Howler.ctx.createPanner(),Gt._panner.coneInnerAngle=Gt._pannerAttr.coneInnerAngle,Gt._panner.coneOuterAngle=Gt._pannerAttr.coneOuterAngle,Gt._panner.coneOuterGain=Gt._pannerAttr.coneOuterGain,Gt._panner.distanceModel=Gt._pannerAttr.distanceModel,Gt._panner.maxDistance=Gt._pannerAttr.maxDistance,Gt._panner.refDistance=Gt._pannerAttr.refDistance,Gt._panner.rolloffFactor=Gt._pannerAttr.rolloffFactor,Gt._panner.panningModel=Gt._pannerAttr.panningModel,Gt._panner.setOrientation(Gt._orientation[0],Gt._orientation[1],Gt._orientation[2])):(Gt._panner=Howler.ctx.createStereoPanner(),Gt._panner.pan.value=Gt._stereo),Gt._panner.connect(Gt._node),Gt._paused||Gt._parent.pause(Gt._id,!0).play(Gt._id)}}(),function(Bt){"object"==typeof exports&&"undefined"!=typeof module?module.exports=Bt():"function"==typeof define&&define.amd?define([],Bt):("undefined"==typeof window?"undefined"==typeof global?"undefined"==typeof self?this:self:global:window).nipplejs=Bt()}(function(){function Bt(){}function Gt(Zt,Jt){return this.identifier=Jt.identifier,this.position=Jt.position,this.frontPosition=Jt.frontPosition,this.collection=Zt,this.defaults={size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5,mode:"dynamic",zone:document.body},this.config(Jt),"dynamic"===this.options.mode&&(this.options.restOpacity=0),this.id=Gt.id,Gt.id+=1,this.buildEl().stylize(),this.instance={el:this.ui.el,on:this.on.bind(this),off:this.off.bind(this),show:this.show.bind(this),hide:this.hide.bind(this),add:this.addToDom.bind(this),remove:this.removeFromDom.bind(this),destroy:this.destroy.bind(this),resetDirection:this.resetDirection.bind(this),computeDirection:this.computeDirection.bind(this),trigger:this.trigger.bind(this),position:this.position,frontPosition:this.frontPosition,ui:this.ui,identifier:this.identifier,id:this.id,options:this.options},this.instance}function Xt(Zt,Jt){return this.nipples=[],this.idles=[],this.actives=[],this.ids=[],this.pressureIntervals={},this.manager=Zt,this.id=Xt.id,Xt.id+=1,this.defaults={zone:document.body,multitouch:!1,maxNumberOfNipples:10,mode:"dynamic",position:{top:0,left:0},catchDistance:200,size:100,threshold:.1,color:"white",fadeTime:250,dataOnly:!1,restOpacity:.5},this.config(Jt),"static"!==this.options.mode&&"semi"!==this.options.mode||(this.options.multitouch=!1),this.options.multitouch||(this.options.maxNumberOfNipples=1),this.updateBox(),this.prepareNipples(),this.bindings(),this.begin(),this.nipples}function Ht(Zt){var Jt=this;Jt.ids={},Jt.index=0,Jt.collections=[],Jt.config(Zt),Jt.prepareCollections();var $t;return Kt.bindEvt(window,"resize",function(){clearTimeout($t),$t=setTimeout(function(){var nn=Kt.getScroll(),tn;Jt.collections.forEach(function(rn){rn.forEach(function(an){tn=an.el.getBoundingClientRect(),an.position={x:nn.x+tn.left,y:nn.y+tn.top}})})},100)}),Jt.collections}var Wt=!!("ontouchstart"in window),jt=!!window.PointerEvent,zt=!!window.MSPointerEvent,Vt={start:"mousedown",move:"mousemove",end:"mouseup"},qt={},Yt;jt?Yt={start:"pointerdown",move:"pointermove",end:"pointerup"}:zt?Yt={start:"MSPointerDown",move:"MSPointerMove",end:"MSPointerUp"}:Wt?(Yt={start:"touchstart",move:"touchmove",end:"touchend"},qt=Vt):Yt=Vt;var Kt={};Kt.distance=function(Zt,Jt){var $t=Jt.x-Zt.x,en=Jt.y-Zt.y;return Math.sqrt($t*$t+en*en)},Kt.angle=function(Zt,Jt){var $t=Jt.x-Zt.x,en=Jt.y-Zt.y;return Kt.degrees(Math.atan2(en,$t))},Kt.findCoord=function(Zt,Jt,$t){var en={x:0,y:0};return $t=Kt.radians($t),en.x=Zt.x-Jt*Math.cos($t),en.y=Zt.y-Jt*Math.sin($t),en},Kt.radians=function(Zt){return Zt*(Math.PI/180)},Kt.degrees=function(Zt){return Zt*(180/Math.PI)},Kt.bindEvt=function(Zt,Jt,$t){Zt.addEventListener?Zt.addEventListener(Jt,$t,!1):Zt.attachEvent&&Zt.attachEvent(Jt,$t)},Kt.unbindEvt=function(Zt,Jt,$t){Zt.removeEventListener?Zt.removeEventListener(Jt,$t):Zt.detachEvent&&Zt.detachEvent(Jt,$t)},Kt.trigger=function(Zt,Jt,$t){var en=new CustomEvent(Jt,$t);Zt.dispatchEvent(en)},Kt.prepareEvent=function(Zt){return"front"!=Zt.target.className&&"back"!=Zt.target.className||Zt.preventDefault(),Zt.type.match(/^touch/)?Zt.changedTouches:Zt},Kt.getScroll=function(){return{x:void 0===window.pageXOffset?(document.documentElement||document.body.parentNode||document.body).scrollLeft:window.pageXOffset,y:void 0===window.pageYOffset?(document.documentElement||document.body.parentNode||document.body).scrollTop:window.pageYOffset}},Kt.applyPosition=function(Zt,Jt){Jt.x&&Jt.y?(Zt.style.left=Jt.x+"px",Zt.style.top=Jt.y+"px"):(Jt.top||Jt.right||Jt.bottom||Jt.left)&&(Zt.style.top=Jt.top,Zt.style.right=Jt.right,Zt.style.bottom=Jt.bottom,Zt.style.left=Jt.left)},Kt.getTransitionStyle=function(Zt,Jt,$t){var en=Kt.configStylePropertyObject(Zt);for(var tn in en)if(en.hasOwnProperty(tn))if("string"==typeof Jt)en[tn]=Jt+" "+$t;else{for(var nn="",rn=0,an=Jt.length;rn<an;rn+=1)nn+=Jt[rn]+" "+$t+", ";en[tn]=nn.slice(0,-2)}return en},Kt.getVendorStyle=function(Zt,Jt){var $t=Kt.configStylePropertyObject(Zt);for(var en in $t)$t.hasOwnProperty(en)&&($t[en]=Jt);return $t},Kt.configStylePropertyObject=function(Zt){var Jt={};return Jt[Zt]="",["webkit","Moz","o"].forEach(function($t){Jt[$t+Zt.charAt(0).toUpperCase()+Zt.slice(1)]=""}),Jt},Kt.extend=function(Zt,Jt){for(var $t in Jt)Jt.hasOwnProperty($t)&&(Zt[$t]=Jt[$t]);return Zt},Kt.safeExtend=function(Zt,Jt){var $t={};for(var en in Zt)Zt.hasOwnProperty(en)&&Jt.hasOwnProperty(en)?$t[en]=Jt[en]:Zt.hasOwnProperty(en)&&($t[en]=Zt[en]);return $t},Kt.map=function(Zt,Jt){if(Zt.length)for(var $t=0,en=Zt.length;$t<en;$t+=1)Jt(Zt[$t]);else Jt(Zt)},Bt.prototype.on=function(Zt,Jt){var en=Zt.split(/[ ,]+/g),$t;this._handlers_=this._handlers_||{};for(var tn=0;tn<en.length;tn+=1)$t=en[tn],this._handlers_[$t]=this._handlers_[$t]||[],this._handlers_[$t].push(Jt);return this},Bt.prototype.off=function(Zt,Jt){return this._handlers_=this._handlers_||{},void 0===Zt?this._handlers_={}:void 0===Jt?this._handlers_[Zt]=null:this._handlers_[Zt]&&0<=this._handlers_[Zt].indexOf(Jt)&&this._handlers_[Zt].splice(this._handlers_[Zt].indexOf(Jt),1),this},Bt.prototype.trigger=function(Zt,Jt){var en=this,tn=Zt.split(/[ ,]+/g),$t;en._handlers_=en._handlers_||{};for(var nn=0;nn<tn.length;nn+=1)$t=tn[nn],en._handlers_[$t]&&en._handlers_[$t].length&&en._handlers_[$t].forEach(function(rn){rn.call(en,{type:$t,target:en},Jt)})},Bt.prototype.config=function(Zt){this.options=this.defaults||{},Zt&&(this.options=Kt.safeExtend(this.options,Zt))},Bt.prototype.bindEvt=function(Zt,Jt){var $t=this;return $t._domHandlers_=$t._domHandlers_||{},$t._domHandlers_[Jt]=function(){"function"==typeof $t["on"+Jt]?$t["on"+Jt].apply($t,arguments):console.warn("[WARNING] : Missing \"on"+Jt+"\" handler.")},Kt.bindEvt(Zt,Yt[Jt],$t._domHandlers_[Jt]),qt[Jt]&&Kt.bindEvt(Zt,qt[Jt],$t._domHandlers_[Jt]),$t},Bt.prototype.unbindEvt=function(Zt,Jt){return this._domHandlers_=this._domHandlers_||{},Kt.unbindEvt(Zt,Yt[Jt],this._domHandlers_[Jt]),qt[Jt]&&Kt.unbindEvt(Zt,qt[Jt],this._domHandlers_[Jt]),delete this._domHandlers_[Jt],this},Gt.prototype=new Bt,Gt.constructor=Gt,Gt.id=0,Gt.prototype.buildEl=function(){return this.ui={},this.options.dataOnly?this:(this.ui.el=document.createElement("div"),this.ui.back=document.createElement("div"),this.ui.front=document.createElement("div"),this.ui.el.className="nipple collection_"+this.collection.id,this.ui.back.className="back",this.ui.front.className="front",this.ui.el.setAttribute("id","nipple_"+this.collection.id+"_"+this.id),this.ui.el.appendChild(this.ui.back),this.ui.el.appendChild(this.ui.front),this)},Gt.prototype.stylize=function(){if(this.options.dataOnly)return this;var Zt=this.options.fadeTime+"ms",Jt=Kt.getVendorStyle("borderRadius","50%"),$t=Kt.getTransitionStyle("transition","opacity",Zt),en={};return en.el={position:"absolute",opacity:this.options.restOpacity,display:"block",zIndex:999},en.back={position:"absolute",display:"block",width:this.options.size+"px",height:this.options.size+"px",marginLeft:-this.options.size/2+"px",marginTop:-this.options.size/2+"px",background:this.options.color,opacity:".5"},en.front={width:this.options.size/2+"px",height:this.options.size/2+"px",position:"absolute",display:"block",marginLeft:-this.options.size/4+"px",marginTop:-this.options.size/4+"px",background:this.options.color,opacity:".5"},Kt.extend(en.el,$t),Kt.extend(en.back,Jt),Kt.extend(en.front,Jt),this.applyStyles(en),this},Gt.prototype.applyStyles=function(Zt){for(var Jt in this.ui)if(this.ui.hasOwnProperty(Jt))for(var $t in Zt[Jt])this.ui[Jt].style[$t]=Zt[Jt][$t];return this},Gt.prototype.addToDom=function(){return this.options.dataOnly||document.body.contains(this.ui.el)?this:(this.options.zone.appendChild(this.ui.el),this)},Gt.prototype.removeFromDom=function(){return this.options.dataOnly||!document.body.contains(this.ui.el)?this:(this.options.zone.removeChild(this.ui.el),this)},Gt.prototype.destroy=function(){clearTimeout(this.removeTimeout),clearTimeout(this.showTimeout),clearTimeout(this.restTimeout),this.trigger("destroyed",this.instance),this.removeFromDom(),this.off()},Gt.prototype.show=function(Zt){var Jt=this;return Jt.options.dataOnly?Jt:(clearTimeout(Jt.removeTimeout),clearTimeout(Jt.showTimeout),clearTimeout(Jt.restTimeout),Jt.addToDom(),Jt.restCallback(),setTimeout(function(){Jt.ui.el.style.opacity=1},0),Jt.showTimeout=setTimeout(function(){Jt.trigger("shown",Jt.instance),"function"==typeof Zt&&Zt.call(this)},Jt.options.fadeTime),Jt)},Gt.prototype.hide=function(Zt){var Jt=this;return Jt.options.dataOnly?Jt:(Jt.ui.el.style.opacity=Jt.options.restOpacity,clearTimeout(Jt.removeTimeout),clearTimeout(Jt.showTimeout),clearTimeout(Jt.restTimeout),Jt.removeTimeout=setTimeout(function(){var $t="dynamic"===Jt.options.mode?"none":"block";Jt.ui.el.style.display=$t,"function"==typeof Zt&&Zt.call(Jt),Jt.trigger("hidden",Jt.instance)},Jt.options.fadeTime),Jt.restPosition(),Jt)},Gt.prototype.restPosition=function(Zt){var Jt=this;Jt.frontPosition={x:0,y:0};var $t=Jt.options.fadeTime+"ms",en={};en.front=Kt.getTransitionStyle("transition",["top","left"],$t);var tn={front:{}};tn.front={left:Jt.frontPosition.x+"px",top:Jt.frontPosition.y+"px"},Jt.applyStyles(en),Jt.applyStyles(tn),Jt.restTimeout=setTimeout(function(){"function"==typeof Zt&&Zt.call(Jt),Jt.restCallback()},Jt.options.fadeTime)},Gt.prototype.restCallback=function(){var Zt={};Zt.front=Kt.getTransitionStyle("transition","none",""),this.applyStyles(Zt),this.trigger("rested",this.instance)},Gt.prototype.resetDirection=function(){this.direction={x:!1,y:!1,angle:!1}},Gt.prototype.computeDirection=function(Zt){var tn=Zt.angle.radian,nn=Math.PI/4,rn=Math.PI/2,Jt,$t,en;if(Jt=tn>nn&&tn<3*nn?"up":tn>-nn&&tn<=nn?"left":tn>3*-nn&&tn<=-nn?"down":"right",$t=tn>-rn&&tn<rn?"left":"right",en=0<tn?"up":"down",Zt.force>this.options.threshold){var an={};for(var on in this.direction)this.direction.hasOwnProperty(on)&&(an[on]=this.direction[on]);var sn={};for(var on in this.direction={x:$t,y:en,angle:Jt},Zt.direction=this.direction,an)an[on]===this.direction[on]&&(sn[on]=!0);if(sn.x&&sn.y&&sn.angle)return Zt;sn.x&&sn.y||this.trigger("plain",Zt),sn.x||this.trigger("plain:"+$t,Zt),sn.y||this.trigger("plain:"+en,Zt),sn.angle||this.trigger("dir dir:"+Jt,Zt)}return Zt},Xt.prototype=new Bt,Xt.constructor=Xt,Xt.id=0,Xt.prototype.prepareNipples=function(){var Zt=this.nipples;Zt.on=this.on.bind(this),Zt.off=this.off.bind(this),Zt.options=this.options,Zt.destroy=this.destroy.bind(this),Zt.ids=this.ids,Zt.id=this.id,Zt.processOnMove=this.processOnMove.bind(this),Zt.processOnEnd=this.processOnEnd.bind(this),Zt.get=function(Jt){if(void 0===Jt)return Zt[0];for(var $t=0,en=Zt.length;$t<en;$t+=1)if(Zt[$t].identifier===Jt)return Zt[$t];return!1}},Xt.prototype.bindings=function(){this.bindEvt(this.options.zone,"start"),this.options.zone.style.touchAction="none",this.options.zone.style.msTouchAction="none"},Xt.prototype.begin=function(){var Zt=this.options;if("static"===Zt.mode){var Jt=this.createNipple(Zt.position,this.manager.getIdentifier());Jt.add(),this.idles.push(Jt)}},Xt.prototype.createNipple=function(Zt,Jt){var $t=Kt.getScroll(),en={},tn=this.options;if(Zt.x&&Zt.y)en={x:Zt.x-($t.x+this.box.left),y:Zt.y-($t.y+this.box.top)};else if(Zt.top||Zt.right||Zt.bottom||Zt.left){var nn=document.createElement("DIV");nn.style.display="hidden",nn.style.top=Zt.top,nn.style.right=Zt.right,nn.style.bottom=Zt.bottom,nn.style.left=Zt.left,nn.style.position="absolute",tn.zone.appendChild(nn);var rn=nn.getBoundingClientRect();tn.zone.removeChild(nn),en=Zt,Zt={x:rn.left+$t.x,y:rn.top+$t.y}}var an=new Gt(this,{color:tn.color,size:tn.size,threshold:tn.threshold,fadeTime:tn.fadeTime,dataOnly:tn.dataOnly,restOpacity:tn.restOpacity,mode:tn.mode,identifier:Jt,position:Zt,zone:tn.zone,frontPosition:{x:0,y:0}});return tn.dataOnly||(Kt.applyPosition(an.ui.el,en),Kt.applyPosition(an.ui.front,an.frontPosition)),this.nipples.push(an),this.trigger("added "+an.identifier+":added",an),this.manager.trigger("added "+an.identifier+":added",an),this.bindNipple(an),an},Xt.prototype.updateBox=function(){this.box=this.options.zone.getBoundingClientRect()},Xt.prototype.bindNipple=function(Zt){var $t=this,en=function(tn,nn){Jt=tn.type+" "+nn.id+":"+tn.type,$t.trigger(Jt,nn)},Jt;Zt.on("destroyed",$t.onDestroyed.bind($t)),Zt.on("shown hidden rested dir plain",en),Zt.on("dir:up dir:right dir:down dir:left",en),Zt.on("plain:up plain:right plain:down plain:left",en)},Xt.prototype.pressureFn=function(Zt,Jt,$t){var en=this,tn=0;clearInterval(en.pressureIntervals[$t]),en.pressureIntervals[$t]=setInterval(function(){var nn=Zt.force||Zt.pressure||Zt.webkitForce||0;nn!==tn&&(Jt.trigger("pressure",nn),en.trigger("pressure "+Jt.identifier+":pressure",nn),tn=nn)}.bind(en),100)},Xt.prototype.onstart=function(Zt){var Jt=this,$t=Jt.options;return Zt=Kt.prepareEvent(Zt),Jt.updateBox(),(Kt.map(Zt,function(en){Jt.actives.length<$t.maxNumberOfNipples&&Jt.processOnStart(en)}),Jt.manager.bindDocument(),!1)},Xt.prototype.processOnStart=function(Zt){var $t=this,en=$t.options,tn=$t.manager.getIdentifier(Zt),nn=Zt.force||Zt.pressure||Zt.webkitForce||0,rn={x:Zt.pageX,y:Zt.pageY},an=$t.getOrCreate(tn,rn),Jt;an.identifier=tn;var on=function(sn){sn.trigger("start",sn),$t.trigger("start "+sn.id+":start",sn),sn.show(),0<nn&&$t.pressureFn(Zt,sn,sn.identifier),$t.processOnMove(Zt)};if(0<=(Jt=$t.idles.indexOf(an))&&$t.idles.splice(Jt,1),$t.actives.push(an),$t.ids.push(an.identifier),"semi"!==en.mode)on(an);else{if(!(Kt.distance(rn,an.position)<=en.catchDistance))return an.destroy(),void $t.processOnStart(Zt);on(an)}return an},Xt.prototype.getOrCreate=function(Zt,Jt){var en=this.options,$t;return /(semi|static)/.test(en.mode)?($t=this.idles[0])?(this.idles.splice(0,1),$t):"semi"===en.mode?this.createNipple(Jt,Zt):(console.warn("Coudln't find the needed nipple."),!1):$t=this.createNipple(Jt,Zt)},Xt.prototype.processOnMove=function(Zt){var Jt=this.options,$t=this.manager.getIdentifier(Zt),en=this.nipples.get($t);if(!en)return console.error("Found zombie joystick with ID "+$t),void this.manager.removeIdentifier($t);en.identifier=$t;var tn=en.options.size/2,nn={x:Zt.pageX,y:Zt.pageY},rn=Kt.distance(nn,en.position),an=Kt.angle(nn,en.position),on=Kt.radians(an),sn=rn/tn;rn>tn&&(rn=tn,nn=Kt.findCoord(en.position,rn,an)),en.frontPosition={x:nn.x-en.position.x,y:nn.y-en.position.y},Jt.dataOnly||Kt.applyPosition(en.ui.front,en.frontPosition);var dn={identifier:en.identifier,position:nn,force:sn,pressure:Zt.force||Zt.pressure||Zt.webkitForce||0,distance:rn,angle:{radian:on,degree:an},instance:en};(dn=en.computeDirection(dn)).angle={radian:Kt.radians(180-an),degree:180-an},en.trigger("move",dn),this.trigger("move "+en.id+":move",dn)},Xt.prototype.processOnEnd=function(Zt){var Jt=this,$t=Jt.options,en=Jt.manager.getIdentifier(Zt),tn=Jt.nipples.get(en),nn=Jt.manager.removeIdentifier(tn.identifier);tn&&($t.dataOnly||tn.hide(function(){"dynamic"===$t.mode&&(tn.trigger("removed",tn),Jt.trigger("removed "+tn.id+":removed",tn),Jt.manager.trigger("removed "+tn.id+":removed",tn),tn.destroy())}),clearInterval(Jt.pressureIntervals[tn.identifier]),tn.resetDirection(),tn.trigger("end",tn),Jt.trigger("end "+tn.id+":end",tn),0<=Jt.ids.indexOf(tn.identifier)&&Jt.ids.splice(Jt.ids.indexOf(tn.identifier),1),0<=Jt.actives.indexOf(tn)&&Jt.actives.splice(Jt.actives.indexOf(tn),1),/(semi|static)/.test($t.mode)?Jt.idles.push(tn):0<=Jt.nipples.indexOf(tn)&&Jt.nipples.splice(Jt.nipples.indexOf(tn),1),Jt.manager.unbindDocument(),/(semi|static)/.test($t.mode)&&(Jt.manager.ids[nn.id]=nn.identifier))},Xt.prototype.onDestroyed=function(Zt,Jt){0<=this.nipples.indexOf(Jt)&&this.nipples.splice(this.nipples.indexOf(Jt),1),0<=this.actives.indexOf(Jt)&&this.actives.splice(this.actives.indexOf(Jt),1),0<=this.idles.indexOf(Jt)&&this.idles.splice(this.idles.indexOf(Jt),1),0<=this.ids.indexOf(Jt.identifier)&&this.ids.splice(this.ids.indexOf(Jt.identifier),1),this.manager.removeIdentifier(Jt.identifier),this.manager.unbindDocument()},Xt.prototype.destroy=function(){for(var Zt in this.unbindEvt(this.options.zone,"start"),this.nipples.forEach(function(Jt){Jt.destroy()}),this.pressureIntervals)this.pressureIntervals.hasOwnProperty(Zt)&&clearInterval(this.pressureIntervals[Zt]);this.trigger("destroyed",this.nipples),this.manager.unbindDocument(),this.off()},Ht.prototype=new Bt,Ht.constructor=Ht,Ht.prototype.prepareCollections=function(){var Zt=this;Zt.collections.create=Zt.create.bind(Zt),Zt.collections.on=Zt.on.bind(Zt),Zt.collections.off=Zt.off.bind(Zt),Zt.collections.destroy=Zt.destroy.bind(Zt),Zt.collections.get=function(Jt){var $t;return Zt.collections.every(function(en){return!($t=en.get(Jt))}),$t}},Ht.prototype.create=function(Zt){return this.createCollection(Zt)},Ht.prototype.createCollection=function(Zt){var Jt=new Xt(this,Zt);return this.bindCollection(Jt),this.collections.push(Jt),Jt},Ht.prototype.bindCollection=function(Zt){var $t=this,en=function(tn,nn){Jt=tn.type+" "+nn.id+":"+tn.type,$t.trigger(Jt,nn)},Jt;Zt.on("destroyed",$t.onDestroyed.bind($t)),Zt.on("shown hidden rested dir plain",en),Zt.on("dir:up dir:right dir:down dir:left",en),Zt.on("plain:up plain:right plain:down plain:left",en)},Ht.prototype.bindDocument=function(){this.binded||(this.bindEvt(document,"move").bindEvt(document,"end"),this.binded=!0)},Ht.prototype.unbindDocument=function(Zt){Object.keys(this.ids).length&&!0!==Zt||(this.unbindEvt(document,"move").unbindEvt(document,"end"),this.binded=!1)},Ht.prototype.getIdentifier=function(Zt){var Jt;return Zt?void 0===(Jt=void 0===Zt.identifier?Zt.pointerId:Zt.identifier)&&(Jt=this.latest||0):Jt=this.index,void 0===this.ids[Jt]&&(this.ids[Jt]=this.index,this.index+=1),this.latest=Jt,this.ids[Jt]},Ht.prototype.removeIdentifier=function(Zt){var Jt={};for(var $t in this.ids)if(this.ids[$t]===Zt){Jt.id=$t,Jt.identifier=this.ids[$t],delete this.ids[$t];break}return Jt},Ht.prototype.onmove=function(Zt){return this.onAny("move",Zt),!1},Ht.prototype.onend=function(Zt){return this.onAny("end",Zt),!1},Ht.prototype.onAny=function(Zt,Jt){var en=this,tn="processOn"+Zt.charAt(0).toUpperCase()+Zt.slice(1),$t;return Jt=Kt.prepareEvent(Jt),Kt.map(Jt,function(nn){$t=en.getIdentifier(nn),Kt.map(en.collections,function(rn,an,on){0<=on.ids.indexOf(an)&&(on[tn](rn),rn._found_=!0)}.bind(null,nn,$t)),nn._found_||en.removeIdentifier($t)}),!1},Ht.prototype.destroy=function(){this.unbindDocument(!0),this.ids={},this.index=0,this.collections.forEach(function(Zt){Zt.destroy()}),this.off()},Ht.prototype.onDestroyed=function(Zt,Jt){return!(0>this.collections.indexOf(Jt))&&void this.collections.splice(this.collections.indexOf(Jt),1)};var Qt=new Ht;return{create:function(Zt){return Qt.create(Zt)},factory:Qt}}),function(){window.DEVELOPMENT=!1,window.game={protocol:5,version:"v1.0.2",state:0,focus:!0,screenX:0,screenY:0,halfScreenX:0,halfScreenY:0,scale:1,spectatingID:null,myID:null,myType:null,myTeam:null,myUserID:"",myName:"",myOriginalName:"",myScore:0,myPlace:0,myLevel:0,myToken:"",myFlag:"xx",loggedIn:!1,roomName:"",regionName:"",playRegion:"derp",playRoom:"ffa",playHost:"",playPath:"",playInvited:!1,gameType:null,regionName:"",inviteLink:"",lastFlagSet:"xx",reloading:!1,ping:0,lagging:!1,timeFactor:1,timeFactorUncapped:1,time:0,timeNetwork:0,jitter:0,frames:0,shadowX:0,shadowY:0,graphics:{},debug:{},buckets:[]},window.config={storage:{},settings:{},ships:[{},{name:"raptor",turnFactor:.065,accelFactor:.225,maxSpeed:5.5,minSpeed:.001,brakeFactor:.025,energyLight:.6,collisions:[[0,5,23],[0,-15,15],[0,-25,12]]},{name:"spirit",turnFactor:.04,accelFactor:.15,maxSpeed:3.5,minSpeed:.001,brakeFactor:.015,energyLight:.9,collisions:[[0,0,35],[50,14,16],[74,26,14],[30,8,23],[63,22,15],[-50,14,16],[-74,26,14],[-30,8,23],[-63,22,15]]},{name:"mohawk",turnFactor:.07,accelFactor:.275,maxSpeed:6,minSpeed:.001,brakeFactor:.025,energyLight:.3,collisions:[[0,-12,15],[0,0,17],[0,13,15],[0,26,15]]},{name:"tornado",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.5,collisions:[[0,8,18],[14,12,13],[-14,12,13],[0,-12,16],[0,-26,14],[0,-35,12]]},{name:"prowler",turnFactor:.055,accelFactor:.2,maxSpeed:4.5,minSpeed:.001,brakeFactor:.025,energyLight:.75,collisions:[[0,11,25],[0,-8,18],[19,20,10],[-19,20,10],[0,-20,14]]}],mobs:[{},{exhaust:20,thruster:[0.2,0.4]},{exhaust:30,thruster:[0.3,0.6]},{exhaust:18,thruster:[0.14,0.3]},{},{exhaust:20,thruster:[0.2,0.4]},{exhaust:20,thruster:[0.2,0.4]},{exhaust:20,thruster:[0.2,0.4]}],upgrades:{speed:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},defense:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},energy:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]},missile:{cost:[0,1,1,1,1,1],factor:[1,1.05,1.1,1.15,1.2,1.25]}},doodads:[[1009,-2308,1,0.9,0.2,null,null],[1241,-2490,4,0.5,-0.2,null,null],[1157,-2379,2,0.7,-0.1,null,null],[622,-2126,3,0.4,null,null,null],[669,-2187,2,0.6,null,null,null],[-392,-1669,1,1.1,0.1,null,null],[-273,-1746,4,0.5,-0.1,null,null],[-252,-1504,2,1,null,null,null],[1553,-2016,2,0.4,0.2,null,null],[1637,-1972,1,0.5,0.1,null,null],[1736,-1922,2,0.5,0.7,null,null],[2150,-2406,2,0.6,null,null,null],[2238,-2318,3,0.9,null,null,null],[2364,-2391,4,0.6,0,null,null],[2491,-2682,1,0.6,-0.1,null,null],[2596,-2671,2,0.9,0.2,null,null],[-150,-3147,4,0.4,-0.4,null,null],[-155,-3044,2,0.7,0,null,null],[-427,-3600,2,0.4,null,null,null],[-259,-2982,2,0.5,null,null,null],[-379,-3529,1,0.6,0.1,1,null],[-665,-3052,2,0.5,null,null,null],[20,-1816,4,0.5,0.3,null,null],[127,-1799,1,0.5,null,null,null],[263,-2572,3,0.4,0.4,null,null],[405,-2570,1,0.9,-0.2,null,null],[851,-4183,1,1,null,null,null],[754,-3971,2,0.9,-0.1,1,null],[1757,-5065,4,1.1,null,null,null],[1169,-4453,3,0.9,null,null,null],[2054,-5244,3,0.9,null,null,null],[1631,-4901,1,0.9,0,null,null],[2305,-5281,2,0.9,0.2,1,null],[1007,-4281,1,0.8,0.1,null,null],[2766,-5202,1,0.8,0.1,1,null],[2927,-5204,2,0.7,null,1,null],[3206,-5218,2,0.3,0.6,1,null],[3099,-5193,4,0.6,0.1,1,null],[1417,-4726,2,1,null,null,null],[2844,-1513,4,0.5,0.1,null,null],[3206,-1464,1,1,0.1,1,null],[2881,-1403,2,0.9,null,null,null],[3804,-2025,1,0.7,-0.1,null,null],[4116,-1778,2,0.9,-0.3,null,null],[3715,-1508,3,0.6,0.1,null,null],[4247,-1126,1,0.6,0.1,1,null],[3860,268,1,0.5,0.5,1,null],[4334,-1011,2,1.1,-0.1,null,null],[3849,349,3,0.6,null,null,null],[3956,490,4,0.8,-0.4,null,null],[4073,667,2,0.9,-0.5,null,null],[3583,-864,4,0.8,0.1,0.8,15723705],[4135,836,2,1,-0.2,null,null],[4785,-743,2,1,0.1,null,null],[4993,-839,1,0.9,0.3,1,null],[5224,-482,3,0.7,null,null,null],[5235,-1238,4,1.1,null,1,null],[5419,-1346,2,0.6,-0.5,0.8,null],[6075,-5099,1,0.8,null,null,null],[5767,-4953,2,0.9,-0.3,1,null],[5896,-4967,2,0.9,0.1,1,null],[5384,-4642,4,0.9,null,null,null],[5704,-4857,4,0.9,null,null,null],[5563,-4697,2,0.9,null,null,null],[5406,-4470,1,1.1,null,null,null],[5352,-3964,3,0.9,null,null,null],[5309,-3665,1,1.1,null,null,null],[5247,-3464,4,0.9,-0.5,null,null],[5300,-3121,1,0.9,null,null,null],[3524,-3340,1,1.1,0,null,null],[3661,-3589,2,0.9,-0.7,null,null],[7236,-1376,2,0.6,-0.3,null,null],[7624,-1610,2,0.8,null,null,null],[7403,-1555,2,0.7,null,null,null],[7514,-1568,2,0.9,0,null,null],[3660,-2705,1,0.9,0.2,null,null],[3374,-2813,2,0.8,null,null,null],[7347,-1447,1,0.9,0.1,null,null],[7236,-775,4,0.5,-0.9,null,null],[7207,-631,2,0.9,0,null,null],[7303,-468,1,0.9,-0.3,null,null],[7262,-1263,4,0.9,-0.6,null,null],[7404,-350,2,1,0.6,null,null],[7589,-305,3,0.9,0.6,null,null],[7741,-1589,4,1,0.2,null,null],[7949,-1594,1,1,-0.2,null,null],[8152,-1599,2,1.1,0.1,null,null],[8378,-1602,4,1.2,0,null,null],[7873,-321,2,0.6,0.3,null,null],[8543,-1661,1,0.7,0,null,null],[7790,-259,1,1,0.1,null,null],[8675,-1573,2,1,0.1,null,null],[8163,-245,2,0.7,0.3,null,null],[8329,-311,2,0.7,0.5,null,null],[8275,-229,1,1,0.1,null,null],[8447,-277,3,1,0,null,null],[8824,-1447,1,0.9,-0.4,null,null],[7221,-1140,1,0.5,-0.2,null,null],[8924,-1273,2,0.9,-0.5,null,null],[6844,-950,3,1,0.1,null,null],[8949,-1060,3,1.1,-0.3,null,null],[8904,-920,4,0.8,-0.7,null,null],[8582,-338,2,0.7,null,null,null],[8963,-803,1,1,-0.4,null,null],[8680,-322,4,0.9,0,null,null],[8811,-449,1,0.9,-0.3,null,null],[8910,-610,2,0.9,-0.4,null,null],[6855,114,1,0.8,null,null,null],[6971,241,2,1,-0.1,null,null],[6852,656,2,0.5,0.3,null,null],[6980,706,1,0.9,-0.4,null,null],[6946,939,4,1,-0.2,null,null],[6027,-560,1,0.6,0,null,null],[7521,425,2,0.4,0.1,null,null],[7599,389,1,0.5,-0.5,null,null],[5863,-431,2,0.9,0.1,null,null],[9392,262,2,0.9,-0.1,null,null],[7521,512,3,0.6,null,null,null],[9807,1027,1,0.5,-0.1,null,null],[9554,237,1,1,-0.2,1,null],[9346,392,4,1.2,-0.3,null,null],[9789,1142,3,0.7,null,null,null],[9747,-532,4,0.8,0.2,1,null],[8591,347,4,0.6,-0.2,null,null],[9951,-509,1,1,null,null,null],[9308,2417,1,0.5,0.1,null,null],[10185,-522,2,0.9,null,1,null],[10330,2147,1,0.6,0,null,null],[9350,2480,3,0.7,null,null,null],[10503,2124,2,0.9,null,null,null],[12500,2628,4,0.5,0.3,null,null],[13188,2864,4,0.5,-0.1,null,null],[12637,2659,2,0.7,0.1,null,null],[13262,2899,1,0.5,null,null,null],[13777,5168,1,0.5,-0.3,null,null],[15709,6399,1,0.4,null,null,null],[13539,5664,3,0.5,null,1,null],[15660,6474,2,0.4,-0.3,null,null],[13743,5248,2,0.7,-0.1,null,null],[15482,6600,2,0.4,-0.1,null,null],[15591,6525,4,0.3,null,null,null],[13487,5738,4,0.7,null,null,null],[15407,6702,1,0.6,0.1,null,null],[8171,-2568,2,0.5,0.1,null,null],[16001,6015,3,0.6,null,null,null],[16017,6110,1,0.4,null,1,null],[6496,-1491,1,0.5,0.3,null,null],[6626,-1480,2,0.7,null,null,null],[6190,-1022,4,0.8,null,null,null],[8325,-2615,2,1,-0.3,null,null],[8222,-2412,4,1,null,null,null],[9204,-2288,1,0.9,-0.1,null,null],[9279,-2216,2,1,null,null,null],[10375,-1558,2,0.8,-0.3,null,null],[10309,-1421,1,0.9,null,null,null],[10247,-1216,4,1.2,-0.5,null,null],[10079,-2310,4,0.9,0.3,null,null],[10320,-2330,3,1,null,null,null],[10942,-2963,2,0.9,-0.3,null,null],[10807,-2778,4,1.1,-0.5,null,null],[12989,-1929,3,0.6,null,null,null],[12613,-1181,1,0.4,0,1,null],[12559,-1120,2,0.5,null,null,null],[11642,-1900,4,0.7,-0.5,null,null],[11558,-1692,1,0.9,-0.2,null,null],[11509,-1479,2,0.5,null,null,null],[12559,-2673,1,0.8,null,null,null],[12446,-2487,4,1,-0.5,null,null],[12375,-2303,3,0.9,-0.2,null,null],[10363,-3514,4,0.7,-0.4,null,null],[10290,-3340,1,0.9,-0.2,null,null],[10162,-3207,2,0.7,null,null,null],[9003,-3048,4,0.9,-0.1,null,null],[9161,-3119,1,0.6,null,null,null],[14550,-3462,2,0.9,-0.2,null,null],[14407,-3335,4,0.9,-0.2,null,null],[14366,-4493,2,0.9,0.5,null,null],[14477,-4437,3,1,null,null,null],[15305,-4230,4,0.9,0.1,null,null],[15481,-4283,2,0.9,null,null,null],[15349,-5009,4,0.4,0.3,null,null],[11874,-4879,2,0.6,null,null,null],[15453,-4984,1,0.7,null,null,null],[11907,-4742,4,0.8,-0.6,null,null],[12440,-4278,4,0.5,0.3,null,null],[11980,-4582,2,0.9,null,null,null],[12131,-4387,1,1.1,null,null,null],[15681,-4973,4,1,null,null,null],[12591,-4252,1,0.8,null,null,null],[12777,-4244,2,0.9,0.2,null,null],[12969,-4227,3,0.9,null,null,null],[15897,-5071,2,0.9,-0.2,null,null],[13204,-4228,4,1,null,null,null],[11592,-5261,1,0.7,0.2,null,null],[12743,-4826,1,0.4,0.3,null,null],[10102,-5078,2,0.7,0.4,null,null],[12854,-4782,3,0.9,0.1,null,null],[10191,-5033,1,0.7,null,null,null],[10523,-5133,2,1,null,null,null],[10336,-4977,4,1.1,-0.3,null,null],[10667,-5250,2,0.8,-0.1,null,null],[9665,-6403,4,0.7,0.3,null,null],[10798,-5379,1,0.5,null,null,null],[9670,-5547,1,0.9,-0.1,null,null],[9834,-6369,3,1,null,null,null],[9864,-5572,2,1.1,-0.1,null,null],[11362,-3957,2,0.9,null,1,null],[11162,-3830,4,1,-0.1,null,null],[8922,-6173,4,1,null,null,null],[9003,-5368,1,0.5,null,null,null],[8453,-6153,1,0.6,0.2,null,null],[8954,-5229,3,0.9,-0.2,null,null],[8905,-5072,1,0.8,-0.3,null,null],[8704,-3873,3,0.9,null,null,null],[8578,-6105,2,0.8,0.4,null,null],[8508,-3710,1,0.7,0,null,null],[8614,-5400,4,0.5,null,null,null],[8788,-4922,4,1.1,null,null,null],[8936,-3905,4,0.6,0.3,null,null],[9701,-4613,4,0.9,-0.1,null,null],[6973,-4776,2,0.6,null,null,null],[7016,-4674,1,0.9,null,null,null],[9124,-3853,1,0.9,0.2,null,null],[7253,-4648,4,0.8,0.2,null,null],[6602,-4591,1,0.6,0.2,null,null],[8510,-5322,2,0.9,null,null,null],[6687,-3810,4,0.7,0.3,null,null],[9525,-4492,3,1.1,null,null,null],[7461,-4705,2,0.9,null,null,null],[9280,-3812,2,0.8,-0.3,null,null],[6467,-2811,1,0.3,null,null,null],[6842,-3820,1,0.8,0.3,null,null],[6483,-2725,4,0.6,0.3,null,null],[7675,-4864,1,1.1,null,null,null],[6991,-2885,4,0.9,0.2,null,null],[6610,-2664,4,0.9,null,null,null],[6822,-2736,2,0.9,null,null,null],[6763,-4582,3,0.9,null,null,null],[6509,-2490,2,0.9,-0.3,null,null],[7216,-3865,4,1.1,0.2,1,null],[7018,-3708,2,1,0.2,null,null],[2254,-3301,1,0.8,0.5,null,null],[6378,-2310,1,0.8,0.2,null,null],[7197,-2857,2,0.9,null,null,null],[2609,-3483,4,0.5,null,null,null],[2449,-3385,2,0.9,0.3,1,null],[4585,-2889,4,0.7,-0.2,null,null],[4470,-2768,3,0.8,0.2,null,null],[4083,-4033,1,0.9,0.5,1,null],[1568,-2869,1,0.4,null,null,null],[4336,-4105,2,1.2,null,null,null],[1977,-1678,2,0.5,null,null,null],[1412,-3642,1,0.5,0,1,null],[1570,-2792,4,0.6,null,null,null],[1932,-1586,1,0.6,null,null,null],[1310,-3547,2,0.6,0,null,null],[3611,1391,2,1,null,null,null],[3558,2174,2,0.9,null,null,null],[3431,1563,1,0.9,0.3,null,null],[3142,2813,2,0.7,null,null,null],[3330,2296,4,1.1,null,null,null],[3001,2818,1,0.6,0.3,null,null],[3703,2044,1,0.4,null,null,null],[2872,3863,1,0.9,-0.2,null,null],[3125,2942,3,1.1,null,null,null],[2841,4018,4,1.1,0.1,null,null],[2402,5140,4,0.6,0.3,null,null],[2511,5167,3,0.8,null,null,null],[-14607,-5112,4,0.9,0.1,null,null],[-14430,-5180,1,0.9,0,null,null],[-14197,-5222,2,1.2,-0.1,null,null],[-14895,-4703,4,0.5,0.2,null,null],[-14797,-4728,2,0.4,null,null,null],[-14697,-4739,1,0.4,null,null,null],[-13919,-5281,1,1.1,0,null,null],[-13646,-5170,3,0.7,null,null,null],[-13400,-5068,2,1.2,0.2,null,null],[-13099,-5108,4,1.1,0.2,null,null],[-12824,-5092,1,0.9,null,null,null],[-12631,-5044,2,0.9,-0.2,null,null],[-12427,-4914,1,0.9,null,null,null],[-12270,-4816,2,0.7,-0.3,null,null],[-11772,-4983,2,0.7,0,null,null],[-11940,-4867,1,0.9,null,null,null],[-12091,-4699,3,0.9,null,null,null],[-12270,-4529,4,0.7,null,null,null],[-12460,-4396,1,0.9,0.4,null,null],[-13058,-4252,1,0.9,null,null,null],[-12894,-4096,4,0.7,0.2,null,null],[-12738,-4077,2,0.7,null,null,null],[-13546,-4341,1,0.4,null,null,null],[-13428,-4299,3,0.9,null,null,null],[-14679,-4192,1,0.7,-0.1,null,null],[-14368,-4308,4,0.7,-0.2,null,null],[-14495,-4133,2,1.1,-0.1,null,null],[-12072,-3824,2,0.8,-0.1,null,null],[-11904,-3648,1,1,0,null,null],[-11654,-3569,3,0.7,null,null,null],[-11648,-3357,4,0.9,0,null,null],[-11420,-3359,1,0.9,null,null,null],[-11296,-3135,2,0.7,null,null,null],[-10782,-2838,1,0.8,-0.1,null,null],[-11410,-3039,1,0.3,0.6,null,null],[-10581,-2773,2,1.1,0.1,null,null],[-11118,-5114,4,0.8,0.2,null,null],[-10675,-5079,1,0.9,null,null,null],[-10205,-4890,1,0.8,0.1,null,null],[-11543,-4164,4,0.8,0.3,null,null],[-11287,-4244,2,0.5,null,null,null],[-10018,-4747,2,1,-0.2,null,null],[-9278,419,3,0.5,null,null,null],[-9341,470,4,0.5,0.3,null,null],[-9180,496,1,0.8,0.6,null,null],[-11365,-4131,3,1,null,null,null],[-9353,0,3,0.6,0.3,null,null],[-8975,528,2,1,0.1,null,null],[-9413,89,4,0.9,null,null,null],[-8230,770,1,0.4,null,null,null],[-9231,17,1,0.7,0,null,null],[-6808,1667,3,0.5,-0.2,null,null],[-6694,1622,2,0.8,-0.4,null,null],[-8285,855,3,0.6,null,null,null],[-6793,1796,2,0.8,0.4,null,null],[-6865,1935,1,0.5,-0.1,null,null],[-7043,2222,3,0.6,-0.2,null,null],[-7083,2368,1,0.6,-0.2,null,null],[-7103,2533,4,0.7,-0.4,null,null],[-7099,2721,2,0.8,-0.3,null,null],[-7178,2874,1,0.4,null,null,null],[-6964,3110,4,0.7,0.2,null,null],[-6246,4191,1,0.6,-0.1,null,null],[-6735,3446,1,0.4,0.1,null,null],[-6722,3537,4,0.7,0.4,null,null],[-6396,3388,4,0.9,null,null,null],[-6787,3140,2,0.9,null,null,null],[-6227,4488,2,0.7,-0.5,null,null],[-6281,3953,1,0.6,0.2,null,null],[-6530,3576,1,1.1,null,null,null],[-6147,3994,3,1.1,null,null,null],[-6141,4292,2,1.2,-0.3,null,null],[-6377,5578,2,0.7,-0.5,null,null],[-6152,4569,1,0.9,-0.2,null,null],[-6222,4769,4,0.7,-0.5,null,null],[-6266,4956,1,0.6,-0.2,null,null],[-6233,5414,1,0.9,-0.4,null,null],[-6347,5646,3,0.7,-0.1,1,null],[-6400,6066,2,0.7,-0.2,null,null],[-6411,6261,1,0.8,null,null,null],[-6565,7043,1,0.6,-0.3,null,null],[-6377,6415,4,0.9,-0.3,null,null],[-6440,6614,1,0.7,-0.2,null,null],[-5944,1954,3,0.5,-0.4,null,null],[-6001,2039,1,0.8,0.2,null,null],[-6467,7070,3,0.9,null,null,null],[-4963,3608,1,0.6,-0.3,1,null],[-4776,3510,2,0.4,-0.1,1,null],[-5785,1998,2,1.1,-0.2,null,null],[-3708,3449,1,0.6,-0.3,null,null],[-3790,3582,1,0.9,null,null,null],[-4031,3697,4,0.7,-0.1,null,null],[-4859,3634,3,1,null,null,null],[-3850,3730,2,1,0.2,null,null],[-4689,4605,4,0.9,-0.2,null,null],[-3492,2892,1,0.6,-0.2,null,null],[-4507,4483,1,0.6,null,null,null],[-4829,2745,1,0.9,-0.2,null,null],[-4435,4273,2,0.9,-0.6,null,null],[-3383,2930,2,0.9,null,null,null],[-4888,2821,2,0.9,0.1,null,null],[-5372,5172,1,0.5,null,null,null],[-5036,2981,4,0.9,0.3,null,null],[-9895,-1942,1,1,0.1,null,null],[-9371,-2159,4,0.6,null,null,null],[-9995,-1773,4,0.9,-0.5,null,null],[-5280,5218,4,0.9,0,null,null],[-5079,5183,1,0.9,-0.3,null,null],[-5149,3079,1,0.6,0.2,null,null],[-9695,-2048,2,1,-0.1,null,null],[-5063,5374,2,0.9,-0.2,null,null],[-9504,-2059,1,1,0.2,null,null],[-8948,-2140,4,0.7,0.3,null,null],[-9262,-2081,2,1.1,0.4,null,null],[-9068,-2071,4,1,0.2,null,null],[-8861,-2045,2,1.1,0,null,null],[-8654,-2083,1,1,0.3,null,null],[-8473,-2048,3,1,0,null,null],[-8283,-1965,1,1,0.5,null,null],[-8182,-1863,2,0.9,-0.2,null,null],[-10037,-1579,1,0.9,-0.4,null,null],[-10063,-1365,2,0.9,-0.1,null,null],[-10074,-1190,1,0.9,-0.4,null,null],[-8167,-1225,1,0.5,-0.7,null,null],[-8188,-1087,4,0.8,-0.5,null,null],[-9975,-1022,1,0.9,0.3,null,null],[-9835,-910,2,1,0.1,null,null],[-9709,-848,4,1,0.3,null,null],[-9532,-792,2,1,0.1,null,null],[-9348,-779,1,1,0,null,null],[-9131,-784,2,1.1,0.1,null,null],[-8754,-795,3,0.7,null,null,null],[-8587,-797,4,1,0,null,null],[-8424,-856,1,0.9,null,null,null],[-8246,-921,2,0.9,-0.4,null,null],[-8153,-1701,4,0.7,-0.7,null,null],[-6447,-2137,1,0.6,-0.2,null,null],[-8153,-1591,1,0.5,-0.6,null,null],[-7694,-1393,4,1,-0.1,null,null],[-6541,-2030,2,0.7,null,null,null],[-7135,-1547,2,0.7,0.1,null,null],[-5885,-2958,1,0.6,0.3,null,null],[-7171,-1440,1,0.8,-0.2,null,null],[-5620,-3123,2,0.6,-0.4,null,null],[-6631,-1866,4,0.8,null,null,null],[-5882,-3696,2,0.8,-0.4,null,null],[-5716,-2944,3,0.9,null,null,null],[-5949,-3528,1,0.5,-0.1,null,null],[-6869,-4052,4,0.8,null,null,null],[-7081,-2673,3,0.5,null,null,null],[-6725,-4069,1,0.6,-0.2,null,null],[-10487,-2295,2,0.5,0.1,1,null],[-7032,-2749,2,0.6,-0.4,null,null],[-10769,-3817,3,0.6,-0.2,null,null],[-6607,-4081,2,0.5,null,null,null],[-10849,-1824,1,0.7,0.1,null,null],[-10479,-2146,4,0.9,-0.1,null,null],[-7003,-2611,4,0.9,-0.2,null,null],[-10749,-1511,2,0.6,-0.4,null,null],[-10697,-1953,2,1,0.1,null,null],[-10848,-1330,3,0.9,null,null,null],[-10912,-1220,4,0.5,0,null,null],[-9843,-2685,4,0.7,null,null,null],[-10823,-3717,2,0.7,null,null,null],[-9697,-2713,1,0.6,0.3,null,null],[-10080,-3431,2,0.4,null,null,null],[-10648,-3844,1,0.9,null,null,null],[-9530,-2695,2,1,null,null,null],[-2387,-6791,1,0.9,null,null,null],[-8465,-5037,2,0.7,null,null,null],[-2550,-6627,2,0.9,-0.1,null,null],[-9325,-2822,1,0.7,-0.1,null,null],[-10140,-3346,1,0.8,null,null,null],[-8461,-4908,4,0.9,null,null,null],[8116,-1076,2,0.8,-0.3,null,null],[8115,-940,4,0.8,-0.3,null,null],[-2503,-6359,4,1.4,-0.6,null,null],[-9062,-1580,2,0.8,-0.5,null,null],[8120,-790,1,0.8,null,null,null],[-9065,-1444,4,0.8,-0.3,null,null],[-2615,-6159,1,1,null,null,null],[-2744,-5943,2,1.1,null,null,null],[-3713,-4955,3,0.9,null,null,null],[-9061,-1292,1,0.8,0,null,null],[-1551,-4718,4,0.5,null,null,null],[5251,-6249,1,0.5,null,1,null],[5192,-6181,2,0.4,-0.1,null,null],[-2898,-5732,3,0.9,null,null,null],[-1705,-4629,3,0.8,null,null,null],[1618,-7035,1,0.5,null,null,null],[-3829,-4776,4,0.9,null,null,null],[-2851,-5589,4,1.1,-0.2,null,null],[-2974,-5399,2,1.1,null,null,null],[-3952,-4568,1,0.9,null,null,null],[-4135,-4368,2,1.1,0.1,1,null],[-3428,-5104,1,1.1,null,null,null],[-3167,-5254,4,0.9,0.1,null,null],[-3049,-6916,2,1,null,null,null],[-3097,-6722,1,0.9,-0.3,null,null],[-3190,-6493,3,1,null,null,null],[-3318,-6284,4,1.1,null,null,null],[-4672,-5861,1,1.1,1,null,null],[-4480,-5668,1,1,null,null,null],[-4294,-5548,2,0.9,1.1,null,null],[-3433,-6072,1,1,-0.2,null,null],[-3568,-5881,3,1,null,null,null],[-3736,-5698,2,1.2,null,null,null],[-3978,-7517,3,0.9,0.1,null,null],[-3956,-5572,4,1,null,null,null],[-4103,-5400,1,1,null,null,null],[-4281,-5240,2,1,null,null,null],[-4409,-5034,3,1,null,null,null],[-4475,-4808,4,0.9,null,null,null],[-2777,-7546,3,1,0.8,null,null],[-2542,-7502,2,0.9,0.4,null,null],[-2398,-7364,1,0.9,-0.7,null,null],[-2350,-7151,2,0.9,-0.4,null,null],[-2315,-6976,4,0.8,-0.8,null,null],[-3749,-7488,4,1,null,null,null],[-2995,-7596,2,1.2,0.5,null,null],[-3253,-7558,3,1.1,0.3,null,null],[-3468,-7472,4,1,null,null,null],[-5028,-6473,2,1,0.4,null,null],[-3604,-7301,1,1.1,null,null,null],[-3678,-7078,2,1.1,null,null,null],[-3835,-6826,3,1.1,null,null,null],[-3935,-6595,2,1,null,null,null],[-5214,-7381,3,1,null,null,null],[-4065,-6416,3,1.1,null,null,null],[-4174,-6231,4,0.7,null,null,null],[-4556,-6940,3,1,null,null,null],[-4663,-6781,4,1,null,null,null],[-4748,-6548,2,1.3,null,null,null],[-4847,-6257,2,1.1,-0.4,null,null],[-4806,-6016,4,0.9,1.2,null,null],[-4950,-7410,1,1.4,0.2,null,null],[-5470,-7251,4,1.3,-0.2,null,null],[-5637,-7038,2,1,-0.3,null,null],[-5593,-6819,4,1,null,null,null],[-5406,-6727,3,1,0.6,null,null],[-5263,-6580,1,1,0.4,null,null],[-4636,-7476,2,1,0.2,null,null],[-4399,-7496,2,0.9,-0.2,null,null],[-6769,-7571,2,0.9,-0.4,null,null],[-6853,-7377,1,0.9,null,null,null],[-8273,-7231,4,0.5,0.4,null,null],[-4182,-7512,4,0.9,0.1,null,null],[-7525,-5855,2,0.9,null,null,null],[-7495,-6329,3,0.5,null,null,null],[-7297,-6946,2,0.9,null,null,null],[-8148,-7137,1,0.7,null,null,null],[-7030,-7301,4,0.7,null,null,null]],walls:[[1009,-2308,108],[1241,-2490,60],[1157,-2379,84],[622,-2126,48],[669,-2187,72],[-392,-1669,132],[-273,-1746,60],[-252,-1504,120],[1553,-2016,48],[1637,-1972,60],[1736,-1922,60],[2150,-2406,72],[2238,-2318,108],[2364,-2391,72],[2491,-2682,72],[2596,-2671,108],[-150,-3147,48],[-155,-3044,84],[-427,-3600,48],[-259,-2982,60],[-379,-3529,72],[-665,-3052,60],[20,-1816,60],[127,-1799,60],[263,-2572,48],[405,-2570,108],[851,-4183,120],[754,-3971,108],[1757,-5065,132],[1169,-4453,108],[2054,-5244,108],[1631,-4901,108],[2305,-5281,108],[1007,-4281,96],[2766,-5202,96],[2927,-5204,84],[3206,-5218,36],[3099,-5193,72],[1417,-4726,120],[2844,-1513,60],[3206,-1464,120],[2881,-1403,108],[3804,-2025,84],[4116,-1778,108],[3715,-1508,72],[4247,-1126,72],[3860,268,60],[4334,-1011,132],[3849,349,72],[3956,490,96],[4073,667,108],[3583,-864,96],[4135,836,120],[4785,-743,120],[4993,-839,108],[5224,-482,84],[5235,-1238,132],[5419,-1346,72],[6075,-5099,96],[5767,-4953,108],[5896,-4967,108],[5384,-4642,108],[5704,-4857,108],[5563,-4697,108],[5406,-4470,132],[5352,-3964,108],[5309,-3665,132],[5247,-3464,108],[5300,-3121,108],[3524,-3340,132],[3661,-3589,108],[7236,-1376,72],[7624,-1610,96],[7403,-1555,84],[7514,-1568,108],[3660,-2705,108],[3374,-2813,96],[7347,-1447,108],[7236,-775,60],[7207,-631,108],[7303,-468,108],[7262,-1263,108],[7404,-350,120],[7589,-305,108],[7741,-1589,120],[7949,-1594,120],[8152,-1599,132],[8378,-1602,144],[7873,-321,72],[8543,-1661,84],[7790,-259,120],[8675,-1573,120],[8163,-245,84],[8329,-311,84],[8275,-229,120],[8447,-277,120],[8824,-1447,108],[7221,-1140,60],[8924,-1273,108],[6844,-950,120],[8949,-1060,132],[8904,-920,96],[8582,-338,84],[8963,-803,120],[8680,-322,108],[8811,-449,108],[8910,-610,108],[6855,114,96],[6971,241,120],[6852,656,60],[6980,706,108],[6946,939,120],[6027,-560,72],[7521,425,48],[7599,389,60],[5863,-431,108],[9392,262,108],[7521,512,72],[9807,1027,60],[9554,237,120],[9346,392,144],[9789,1142,84],[9747,-532,96],[8591,347,72],[9951,-509,120],[9308,2417,60],[10185,-522,108],[10330,2147,72],[9350,2480,84],[10503,2124,108],[12500,2628,60],[13188,2864,60],[12637,2659,84],[13262,2899,60],[13777,5168,60],[15709,6399,48],[13539,5664,60],[15660,6474,48],[13743,5248,84],[15482,6600,48],[15591,6525,36],[13487,5738,84],[15407,6702,72],[8171,-2568,60],[16001,6015,72],[16017,6110,48],[6496,-1491,60],[6626,-1480,84],[6190,-1022,96],[8325,-2615,120],[8222,-2412,120],[9204,-2288,108],[9279,-2216,120],[10375,-1558,96],[10309,-1421,108],[10247,-1216,144],[10079,-2310,108],[10320,-2330,120],[10942,-2963,108],[10807,-2778,132],[12989,-1929,72],[12613,-1181,48],[12559,-1120,60],[11642,-1900,84],[11558,-1692,108],[11509,-1479,60],[12559,-2673,96],[12446,-2487,120],[12375,-2303,108],[10363,-3514,84],[10290,-3340,108],[10162,-3207,84],[9003,-3048,108],[9161,-3119,72],[14550,-3462,108],[14407,-3335,108],[14366,-4493,108],[14477,-4437,120],[15305,-4230,108],[15481,-4283,108],[15349,-5009,48],[11874,-4879,72],[15453,-4984,84],[11907,-4742,96],[12440,-4278,60],[11980,-4582,108],[12131,-4387,132],[15681,-4973,120],[12591,-4252,96],[12777,-4244,108],[12969,-4227,108],[15897,-5071,108],[13204,-4228,120],[11592,-5261,84],[12743,-4826,48],[10102,-5078,84],[12854,-4782,108],[10191,-5033,84],[10523,-5133,120],[10336,-4977,132],[10667,-5250,96],[9665,-6403,84],[10798,-5379,60],[9670,-5547,108],[9834,-6369,120],[9864,-5572,132],[11362,-3957,108],[11162,-3830,120],[8922,-6173,120],[9003,-5368,60],[8453,-6153,72],[8954,-5229,108],[8905,-5072,96],[8704,-3873,108],[8578,-6105,96],[8508,-3710,84],[8614,-5400,60],[8788,-4922,132],[8936,-3905,72],[9701,-4613,108],[6973,-4776,72],[7016,-4674,108],[9124,-3853,108],[7253,-4648,96],[6602,-4591,72],[8510,-5322,108],[6687,-3810,84],[9525,-4492,132],[7461,-4705,108],[9280,-3812,96],[6467,-2811,36],[6842,-3820,96],[6483,-2725,72],[7675,-4864,132],[6991,-2885,108],[6610,-2664,108],[6822,-2736,108],[6763,-4582,108],[6509,-2490,108],[7216,-3865,132],[7018,-3708,120],[2254,-3301,96],[6378,-2310,96],[7197,-2857,108],[2609,-3483,60],[2449,-3385,108],[4585,-2889,84],[4470,-2768,96],[4083,-4033,108],[1568,-2869,48],[4336,-4105,144],[1977,-1678,60],[1412,-3642,60],[1570,-2792,72],[1932,-1586,72],[1310,-3547,72],[3611,1391,120],[3558,2174,108],[3431,1563,108],[3142,2813,84],[3330,2296,132],[3001,2818,72],[3703,2044,48],[2872,3863,108],[3125,2942,132],[2841,4018,132],[2402,5140,72],[2511,5167,96],[-14607,-5112,108],[-14430,-5180,108],[-14197,-5222,144],[-14895,-4703,60],[-14797,-4728,48],[-14697,-4739,48],[-13919,-5281,132],[-13646,-5170,84],[-13400,-5068,144],[-13099,-5108,132],[-12824,-5092,108],[-12631,-5044,108],[-12427,-4914,108],[-12270,-4816,84],[-11772,-4983,84],[-11940,-4867,108],[-12091,-4699,108],[-12270,-4529,84],[-12460,-4396,108],[-13058,-4252,108],[-12894,-4096,84],[-12738,-4077,84],[-13546,-4341,48],[-13428,-4299,108],[-14679,-4192,84],[-14368,-4308,84],[-14495,-4133,132],[-12072,-3824,96],[-11904,-3648,120],[-11654,-3569,84],[-11648,-3357,108],[-11420,-3359,108],[-11296,-3135,84],[-10782,-2838,96],[-11410,-3039,36],[-10581,-2773,132],[-11118,-5114,96],[-10675,-5079,108],[-10205,-4890,96],[-11543,-4164,96],[-11287,-4244,60],[-10018,-4747,120],[-9278,419,60],[-9341,470,60],[-9180,496,96],[-11365,-4131,120],[-9353,0,72],[-8975,528,120],[-9413,89,108],[-8230,770,48],[-9231,17,84],[-6808,1667,60],[-6694,1622,96],[-8285,855,72],[-6793,1796,96],[-6865,1935,60],[-7043,2222,72],[-7083,2368,72],[-7103,2533,84],[-7099,2721,96],[-7178,2874,48],[-6964,3110,84],[-6246,4191,72],[-6735,3446,48],[-6722,3537,84],[-6396,3388,108],[-6787,3140,108],[-6227,4488,84],[-6281,3953,72],[-6530,3576,132],[-6147,3994,132],[-6141,4292,144],[-6377,5578,84],[-6152,4569,108],[-6222,4769,84],[-6266,4956,72],[-6233,5414,108],[-6347,5646,84],[-6400,6066,84],[-6411,6261,96],[-6565,7043,72],[-6377,6415,108],[-6440,6614,84],[-5944,1954,60],[-6001,2039,96],[-6467,7070,108],[-4963,3608,72],[-4776,3510,48],[-5785,1998,132],[-3708,3449,72],[-3790,3582,108],[-4031,3697,84],[-4859,3634,120],[-3850,3730,120],[-4689,4605,108],[-3492,2892,72],[-4507,4483,72],[-4829,2745,108],[-4435,4273,108],[-3383,2930,108],[-4888,2821,108],[-5372,5172,60],[-5036,2981,108],[-9895,-1942,120],[-9371,-2159,72],[-9995,-1773,108],[-5280,5218,108],[-5079,5183,108],[-5149,3079,72],[-9695,-2048,120],[-5063,5374,108],[-9504,-2059,120],[-8948,-2140,84],[-9262,-2081,132],[-9068,-2071,120],[-8861,-2045,132],[-8654,-2083,120],[-8473,-2048,120],[-8283,-1965,120],[-8182,-1863,108],[-10037,-1579,108],[-10063,-1365,108],[-10074,-1190,108],[-8167,-1225,60],[-8188,-1087,96],[-9975,-1022,108],[-9835,-910,120],[-9709,-848,120],[-9532,-792,120],[-9348,-779,120],[-9131,-784,132],[-8754,-795,84],[-8587,-797,120],[-8424,-856,108],[-8246,-921,108],[-8153,-1701,84],[-6447,-2137,72],[-8153,-1591,60],[-7694,-1393,120],[-6541,-2030,84],[-7135,-1547,84],[-5885,-2958,72],[-7171,-1440,96],[-5620,-3123,72],[-6631,-1866,96],[-5882,-3696,96],[-5716,-2944,108],[-5949,-3528,60],[-6869,-4052,96],[-7081,-2673,60],[-6725,-4069,72],[-10487,-2295,60],[-7032,-2749,72],[-10769,-3817,72],[-6607,-4081,60],[-10849,-1824,84],[-10479,-2146,108],[-7003,-2611,108],[-10749,-1511,72],[-10697,-1953,120],[-10848,-1330,108],[-10912,-1220,60],[-9843,-2685,84],[-10823,-3717,84],[-9697,-2713,72],[-10080,-3431,48],[-10648,-3844,108],[-9530,-2695,120],[-2387,-6791,108],[-8465,-5037,84],[-2550,-6627,108],[-9325,-2822,84],[-10140,-3346,96],[-8461,-4908,108],[8116,-1076,96],[8115,-940,96],[-2503,-6359,168],[-9062,-1580,96],[8120,-790,96],[-9065,-1444,96],[-2615,-6159,120],[-2744,-5943,132],[-3713,-4955,108],[-9061,-1292,96],[-1551,-4718,60],[5251,-6249,60],[5192,-6181,48],[-2898,-5732,108],[-1705,-4629,96],[1618,-7035,60],[-3829,-4776,108],[-2851,-5589,132],[-2974,-5399,132],[-3952,-4568,108],[-4135,-4368,132],[-3428,-5104,132],[-3167,-5254,108],[-3049,-6916,120],[-3097,-6722,108],[-3190,-6493,120],[-3318,-6284,132],[-4672,-5861,132],[-4480,-5668,120],[-4294,-5548,108],[-3433,-6072,120],[-3568,-5881,120],[-3736,-5698,144],[-3978,-7517,108],[-3956,-5572,120],[-4103,-5400,120],[-4281,-5240,120],[-4409,-5034,120],[-4475,-4808,108],[-2777,-7546,120],[-2542,-7502,108],[-2398,-7364,108],[-2350,-7151,108],[-2315,-6976,96],[-3749,-7488,120],[-2995,-7596,144],[-3253,-7558,132],[-3468,-7472,120],[-5028,-6473,120],[-3604,-7301,132],[-3678,-7078,132],[-3835,-6826,132],[-3935,-6595,120],[-5214,-7381,120],[-4065,-6416,132],[-4174,-6231,84],[-4556,-6940,120],[-4663,-6781,120],[-4748,-6548,156],[-4847,-6257,132],[-4806,-6016,108],[-4950,-7410,168],[-5470,-7251,156],[-5637,-7038,120],[-5593,-6819,120],[-5406,-6727,120],[-5263,-6580,120],[-4636,-7476,120],[-4399,-7496,108],[-6769,-7571,108],[-6853,-7377,108],[-8273,-7231,60],[-4182,-7512,108],[-7525,-5855,108],[-7495,-6329,60],[-7297,-6946,108],[-8148,-7137,84],[-7030,-7301,84]],groundDoodads:[[-9670,-1470,"doodadField",0.5,0,null,null],[8600,-940,"doodadField",0.5,0,null,null],[920,-2800,"doodadField",0.5,0,null,null]],debug:{show:!1,collisions:!1},mobile:!1,ios:!1,phone:!1,tablet:!1,mouse:!1,resolution:1,overdrawOptimize:!0,overdraw:256,scalingFactor:2500,minimapPaddingX:16,minimapPaddingY:16,minimapSize:240,maxChatLines:50,maxScoreboard:16,shadowScaling:2,shadowOffsetX:20,shadowOffsetY:40,ackFrequency:10,bucketSize:512,mapWidth:32768,mapHeight:16384},window.Tools={},window.Textures={},window.Graphics={},window.Network={},window.Input={},window.Players={},window.Mobs={},window.Particles={},window.UI={},window.Games={},window.Sound={};var Bt=function(Xt,Ht){Tools.updateTime(Xt),Tools.debugStartFrame(),game.state==Network.STATE.PLAYING?(Input.update(),Network.detectConnectivity(),Players.update(),Mobs.update(),Particles.update(),Games.update(),Sound.update()):game.state==Network.STATE.LOGIN?Tools.updateReel():Sound.update(),Graphics.update(),Ht||Graphics.render(),Tools.debugEndFrame()},Gt=function(){var Xt=performance.now()-game.time;450<Xt&&!game.focus&&Bt(Xt/16.666,!0)};$(function(){game.state=Network.STATE.LOGIN,Tools.startupMsg(),Tools.loadSettings(),Tools.detectCapabilities(),Tools.setupDebug(),Graphics.setup(),Tools.initBuckets(),Particles.setup(),UI.setup(),Input.setup(),Games.setup(),Sound.setup();var Xt=new PIXI.ticker.Ticker;Xt.add(Bt),Xt.start(),setInterval(Gt,500)})}();class Vector{constructor(Bt,Gt){this.x=Bt,this.y=Gt}add(Bt){this.x+=Bt,this.y+=Bt}divide(Bt){this.x/=Bt,this.y/=Bt}multiply(Bt){this.x*=Bt,this.y*=Bt}limit(Bt){this.divide(this.length()),this.multiply(Bt)}clone(){return new Vector(this.x,this.y)}length(){return Math.sqrt(this.x*this.x+this.y*this.y)}angle(){return Math.atan2(this.y,this.x)-Math.PI/2}ceil(Bt){this.x>Bt&&(this.x=Bt),this.y>Bt&&(this.y=Bt)}floor(Bt){this.x<Bt&&(this.x=Bt),this.y<Bt&&(this.y=Bt)}both(Bt){this.x=Bt,this.y=Bt}static zero(){return new Vector(0,0)}static diag(Bt){return new Vector(Bt,Bt)}static create(Bt,Gt){return new Vector(Math.sin(Bt)*Gt,-Math.cos(Bt)*Gt)}static createOff(Bt,Gt,Xt){return new Vector(Bt.x+Math.sin(Gt)*Xt,Bt.y-Math.cos(Gt)*Xt)}}!function(){var Bt={},Gt=0,Xt={started:!1,startX:200,startY:-2450,pan:0,dist:100,explosion:4e3,direction:1};Tools.updateReel=function(){if(!Xt.started){window.mainMenuTeam=Tools.randInt(1,2),Xt.pos=Vector.zero();for(var Qt=Tools.rand(0,1),Jt=[3,1,2,4,5],$t=[-270,-150,0,150,270],en=0,Zt;en<Jt.length;en++)Players.add({id:en+1,team:window.mainMenuTeam,status:0,reel:!0,name:"",type:Jt[en],posX:0,posY:0,rot:0,flag:1}),(Zt=Players.get(en+1)).keystate.UP=!0,Zt._offset=$t[en]}Xt.started=!0,2e3<Xt.dist?Xt.direction=-1:100>Xt.dist&&(Xt.direction=1),Xt.dist+=.5*Xt.direction*game.timeFactor,Xt.pan+=1/Xt.dist*game.timeFactor,Xt.pos.x=Xt.startX+Math.sin(Xt.pan)*Xt.dist,Xt.pos.y=Xt.startY-Math.cos(Xt.pan)*Xt.dist,Players.update(),Particles.update();for(var nn=1,tn;5>=nn;nn++)(tn=Players.get(nn)).pos.x=Xt.pos.x+tn._offset,tn.pos.y=Xt.pos.y+.24*(game.screenY/game.scale),null==tn._prevPos?tn._prevPos=tn.pos.clone():tn.rot=new Vector(tn.pos.x-tn._prevPos.x,tn.pos.y-tn._prevPos.y).angle()+Math.PI,tn._prevPos=new Vector((19*tn._prevPos.x+tn.pos.x)/20,(19*tn._prevPos.y+tn.pos.y)/20);if(game.time>Xt.explosion){var rn=new Vector(Tools.rand(Xt.pos.x-game.halfScreenX/game.scale,Xt.pos.x+game.halfScreenX/game.scale),Tools.rand(Xt.pos.y-game.halfScreenY/game.scale,Xt.pos.y+game.halfScreenY/game.scale));Particles.explosion(rn,Tools.rand(2,2.5),Tools.randInt(4,7)),Particles.explosion(new Vector(rn.x+Tools.rand(-100,100),rn.y+Tools.rand(-100,100)),Tools.rand(1,1.2)),Xt.explosion=game.time+Tools.rand(1e3,3e3)}},Tools.wipeReel=function(){Particles.wipe(),Players.wipe()},Tools.startupMsg=function(){console.log("%c\u039BIRM\u039BSH Engine "+game.version+" starting up!","font-size: 20px;"),console.log(""),console.log("%c*** Important message ***","font-size: 16px; color: red;"),console.log("%cDo not paste any commands given by players in this console window","font-size: 14px; color: red;"),console.log("")},Tools.detectCapabilities=function(){Ht(),config.mobile&&!config.settings.mobileshown&&(UI.popBigMsg(1),config.settings.mobileshown=!0,Tools.setSettings({mobileshown:!0})),config.mobile&&Input.setupLogin()};var Ht=function(){config.mobile="ontouchstart"in document.documentElement&&void 0!==window.orientation||-1!==navigator.userAgent.indexOf("IEMobile"),config.ios=/iPad|iPhone|iPod/.test(navigator.userAgent)&&!window.MSStream,"#forcemobile"==window.location.hash&&(config.mobile=!0),"#nomobile"==window.location.hash&&(config.mobile=!1)};Tools.loadSettings=function(){var Qt=jt();config.storage=Qt,DEVELOPMENT&&console.log(Qt),null!=Qt.id&&(config.settings.id=Qt.id),null!=Qt.session&&(config.settings.session=Qt.session),null!=Qt.name&&(config.settings.name=Qt.name),null!=Qt.region&&(config.settings.region=Qt.region),null!=Qt.helpshown&&(config.settings.helpshown=Qt.helpshown),null!=Qt.mobileshown&&(config.settings.mobileshown=Qt.mobileshown),null!=Qt.flag&&(config.settings.flag=Qt.flag),null!=Qt.hidpi&&(config.settings.hidpi=Qt.hidpi),null!=Qt.sound&&(config.settings.sound=Qt.sound),null!=Qt.keybinds&&(config.settings.keybinds=Qt.keybinds),null!=Qt.mousemode&&(config.settings.mousemode=Qt.mousemode),Yt()};var Yt=function(){if(null==config.settings.id){var Qt=Tools.randomID(16);config.settings.id=Qt,Tools.setSettings({id:Qt})}null!=config.settings.name&&$("#playername").val(config.settings.name),null!=config.settings.region&&(game.playRegion=config.settings.region),null!=config.settings.flag&&(game.myFlag=config.settings.flag),null==config.settings.sound&&(config.settings.sound=!0),config.settings.mousemode&&Input.toggleMouse(!0),UI.updateSound(),config.settings.oldhidpi=config.settings.hidpi};Tools.randomID=function(Qt){var Zt=new Uint8Array(Qt);return window.crypto.getRandomValues(Zt),Wt(Zt).substr(0,Qt)};var Wt=function(Qt){for(var Jt="",$t=0,Zt;$t<Qt.length;$t++)Jt+=Zt=1===(Zt=(255&Qt[$t]).toString(16)).length?"0"+Zt:Zt;return Jt};Tools.setSettings=function(Qt){if(null!=window.localStorage){for(var Zt in Qt)config.storage[Zt]=Qt[Zt];try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(Jt){}}},Tools.removeSetting=function(Qt){if(null!=window.localStorage){null!=config.storage[Qt]&&delete config.storage[Qt];try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(Zt){}}},Tools.wipeSettings=function(){if(null!=window.localStorage){config.storage={},config.settings={};try{localStorage.setItem("settings",JSON.stringify(config.storage))}catch(Qt){}}};var jt=function(){if(null==window.localStorage)return{};var Qt=null,Zt={};try{Qt=localStorage.getItem("settings")}catch(Jt){}if(null!=Qt)try{Zt=JSON.parse(Qt)}catch(Jt){}return Zt};Tools.ajaxPost=function(Qt,Zt,Jt){$.ajax({url:Qt,method:"POST",data:Zt,dataType:"json",timeout:1e4,success:function($t){null!=Jt&&Jt(null!=$t&&1==$t.result?$t:null)},error:function(){null!=Jt&&Jt(null)}})},Tools.length=function(Qt,Zt){return Math.sqrt(Qt*Qt+Zt*Zt)},Tools.oscillator=function(Qt,Zt,Jt){return 1+Math.sin((game.time+(Jt||0))/Zt)*Qt},Tools.converge=function(Qt,Zt,Jt){return .01>Math.abs(Qt-Zt)?Zt:Qt+Jt*(Zt-Qt)},Tools.rand=function(Qt,Zt){return Math.random()*(Zt-Qt)+Qt},Tools.randCircle=function(){return Tools.rand(0,6.28318530718)},Tools.randInt=function(Qt,Zt){var Jt=Math.floor(Math.random()*(Zt+1-Qt)+Qt);return Jt>=Zt&&(Jt=Zt),Jt},Tools.clamp=function(Qt,Zt,Jt){return Qt<=Zt?Zt:Qt>=Jt?Jt:Qt},Tools.lerp=function(Qt,Zt,Jt){return Jt*(Zt-Qt)+Qt},Tools.colorLerp=function(Qt,Zt,Jt){0>=Jt&&(Jt=.001),1<=Jt&&(Jt=.999);var $t=Qt>>16,en=255&Qt>>8,tn=255&Qt;return 0|16777216+($t+Jt*((Zt>>16)-$t)<<16)+(en+Jt*((255&Zt>>8)-en)<<8)+(tn+Jt*((255&Zt)-tn))},Tools.distance=function(Qt,Zt,Jt,$t){var en=Qt-Jt,tn=Zt-$t;return Math.sqrt(en*en+tn*tn)},Tools.distFastCheck=function(Qt,Zt,Jt,$t){return Math.abs(Qt.x-Zt.x)<=Jt&&Math.abs(Qt.y-Zt.y)<=$t},Tools.distFastCheckFloat=function(Qt,Zt,Jt,$t,en){return Math.abs(Qt-Jt)<=en&&Math.abs(Zt-$t)<=en},Tools.updateTime=function(Qt){game.timeFactor=60>Qt?Qt:60,game.timeFactorUncapped=game.timeFactor,10<game.timeFactor&&(game.timeFactor=10),game.time=performance.now(),game.frames++},Tools.reducedFactor=function(){var Qt=(performance.now()-game.time)/16.666;return .1<Math.abs(game.jitter)&&(Qt+=game.jitter/16.666),Qt};var zt={shockwave:[0.1,0.1,0.11,0.12,0.12,0.13,0.14,0.14,0.15,0.16,0.17,0.18,0.2,0.21,0.22,0.24,0.26,0.29,0.31,0.35,0.38,0.42,0.47,0.52,0.58,0.64,0.71,0.78,0.84,0.9,0.95,0.98,1,1,1,0.98,0.97,0.94,0.9,0.85,0.78,0.7,0.62,0.52,0.43,0.34,0.26,0.18,0.11,0.05,0],explosionSmoke:[0,0,0.02,0.06,0.13,0.26,0.45,0.71,0.91,0.99,0.99,0.97,0.94,0.92,0.89,0.86,0.83,0.8,0.77,0.74,0.71,0.68,0.65,0.63,0.6,0.57,0.54,0.51,0.48,0.45,0.42,0.4,0.37,0.34,0.31,0.29,0.26,0.24,0.21,0.19,0.16,0.14,0.12,0.1,0.08,0.06,0.04,0.02,0.01,0,0]};Tools.easing={outElastic:function(Qt,Zt){var Jt=1-(Zt||.7),$t=2*Qt;if(0===Qt||1===Qt)return Qt;var en=Jt/(2*Math.PI)*Math.asin(1);return Math.pow(2,-10*$t)*Math.sin(($t-en)*(2*Math.PI)/Jt)+1},custom:function(Qt,Zt){var Jt=zt[Zt],$t=Jt.length,en=Math.floor(Qt*($t-1)),tn=Jt[en];return en===$t-1?tn:Tools.lerp(tn,Jt[en+1],Qt*($t-1)%1)}},Tools.setupDebug=function(){DEVELOPMENT&&config.debug.show&&(UI.show("#debug"),game.debug={last:performance.now(),ticks:0,frames:game.frames},setInterval(Tools.updateDebug,2123))},Tools.debugLine=function(Qt,Zt){return"<div class=\"line\"><span class=\"attr\">"+UI.escapeHTML(Qt)+"</span><span class=\"val\">"+UI.escapeHTML(Zt)+"</span></div>"},Tools.updateDebug=function(){var Qt=performance.now(),Zt=1e3*(game.frames-game.debug.frames)/(Qt-game.debug.last),Jt=Players.count(),$t=Mobs.count(),en=Mobs.countDoodads(),tn="",nn=Players.getMe();null!=nn&&(tn=Tools.debugLine("Coords",Math.round(nn.pos.x)+", "+Math.round(nn.pos.y)));var rn=Tools.debugLine("FPS",Math.round(Zt))+Tools.debugLine("Ticks",(100*(game.debug.ticks/(Qt-game.debug.last))).toFixed(2)+"%")+Tools.debugLine("Ping",game.ping.toFixed(2)+" ms")+Tools.debugLine("Res",game.screenX+" x "+game.screenY)+"<div class=\"spacer\"></div>"+Tools.debugLine("Players",Jt[0]+" / "+Jt[1])+Tools.debugLine("Mobs",$t[0]+" / "+$t[1])+Tools.debugLine("Particles",Particles.count())+Tools.debugLine("Doodads",en[0]+" / "+en[1])+"<div class=\"spacer\"></div>"+tn+Tools.debugLine("Scale",game.scale.toFixed(2))+Tools.debugLine("Jitter",game.jitter.toFixed(3))+"<div class=\"close\" onclick=\"Tools.hideDebug()\">x</div>";$("#debug").html(rn),game.debug.last=Qt,game.debug.ticks=0,game.debug.frames=game.frames},Tools.hideDebug=function(){UI.hide("#debug")},Tools.debugStartFrame=function(){DEVELOPMENT&&config.debug.show&&(game.debug.startedFrame=performance.now())},Tools.debugEndFrame=function(){DEVELOPMENT&&config.debug.show&&null!=game.debug.startedFrame&&(game.debug.ticks+=performance.now()-game.debug.startedFrame)},Tools.earningsToRank=function(Qt){return Math.floor(.0111*Math.pow(Qt,.5))+1},Tools.rankToEarnings=function(Qt){return Math.pow((Qt-1)/.0111,2)},Tools.decodeKeystate=function(Qt,Zt){Qt.keystate.UP=0!=(1&Zt),Qt.keystate.DOWN=0!=(2&Zt),Qt.keystate.LEFT=0!=(4&Zt),Qt.keystate.RIGHT=0!=(8&Zt),Qt.boost=0!=(16&Zt),Qt.strafe=0!=(32&Zt),Qt.stealthed=0!=(64&Zt),Qt.flagspeed=0!=(128&Zt)},Tools.decodeUpgrades=function(Qt,Zt){Qt.speedupgrade=(0==(1&Zt)?0:1)+(0==(2&Zt)?0:2)+(0==(4&Zt)?0:4),Qt.powerups.shield=0!=(8&Zt),Qt.powerups.rampage=0!=(16&Zt)},Tools.decodeMinimapCoords=function(Qt,Zt){return new Vector(128*Qt-16384+64,Tools.clamp(128*Zt-16384,-8192,8192)+64)},Tools.decodeSpeed=function(Qt){return(Qt-32768)/1638.4},Tools.decodeCoordX=function(Qt){return(Qt-32768)/2},Tools.decodeCoordY=function(Qt){return(Qt-32768)/4},Tools.decodeCoord24=function(Qt){return(Qt-8388608)/512},Tools.decodeAccel=function(Qt){return(Qt-32768)/32768},Tools.decodeRotation=function(Qt){return Qt/6553.6},Tools.decodeHealthnergy=function(Qt){return Qt/255},Tools.decodeRegen=function(Qt){return(Qt-32768)/1e6};var Vt=function(Qt){return Tools.clamp(Math.floor(Qt/Bt.size)+Bt.bucketsHalfX,0,Bt.bucketsMaxX)},qt=function(Qt){return Tools.clamp(Math.floor(Qt/Bt.size)+Bt.bucketsHalfY,0,Bt.bucketsMaxY)};Tools.initBuckets=function(){Bt={size:config.bucketSize,halfSize:parseInt(config.bucketSize/2),bucketsMaxX:parseInt(config.mapWidth/config.bucketSize)-1,bucketsMaxY:parseInt(config.mapHeight/config.bucketSize)-1,bucketsHalfX:parseInt(config.mapWidth/config.bucketSize/2),bucketsHalfY:parseInt(config.mapHeight/config.bucketSize/2)};for(var Qt=0;Qt<=Bt.bucketsMaxX;Qt++){game.buckets.push([]);for(var Zt=0;Zt<=Bt.bucketsMaxY;Zt++)game.buckets[Qt].push([[]])}for(var Jt=0;Jt<config.doodads.length;Jt++)Qt=Vt(config.doodads[Jt][0]),Zt=qt(config.doodads[Jt][1]),game.buckets[Qt][Zt][0].push(Jt)},Tools.getBucketBounds=function(Qt,Zt,Jt){return[Tools.clamp(Math.floor((Qt.x-Zt)/Bt.size)+Bt.bucketsHalfX,0,Bt.bucketsMaxX),Tools.clamp(Math.floor((Qt.x+Zt)/Bt.size)+Bt.bucketsHalfX,0,Bt.bucketsMaxX),Tools.clamp(Math.floor((Qt.y-Jt)/Bt.size)+Bt.bucketsHalfY,0,Bt.bucketsMaxY),Tools.clamp(Math.floor((Qt.y+Jt)/Bt.size)+Bt.bucketsHalfY,0,Bt.bucketsMaxY)]},Tools.deferUpdate=function(Qt){setTimeout(Qt,1)};var Kt=function(Qt,Zt){if(Zt instanceof Error){var Jt={};return Object.getOwnPropertyNames(Zt).forEach(function($t){Jt[$t]=Zt[$t]}),Jt}return Zt};Tools.handleError=function(Qt){5<++Gt||(null!=Qt.error&&(Qt.error=JSON.stringify(Qt.error,Kt)),Tools.ajaxPost("/clienterror",{type:"runtime",error:JSON.stringify(Qt,null,"\t\t")}))},Tools.encodeUTF8=function(Qt){for(var Zt=0,Jt=new Uint8Array(4*Qt.length),$t=0,en;$t!=Qt.length;$t++)if(en=Qt.charCodeAt($t),128>en)Jt[Zt++]=en;else{if(2048>en)Jt[Zt++]=192|en>>6;else{if(55295<en&&56320>en){if(++$t==Qt.length)throw"UTF-8 encode: incomplete surrogate pair";var tn=Qt.charCodeAt($t);if(56320>tn||57343<tn)throw"UTF-8 encode: second char code 0x"+tn.toString(16)+" at index "+$t+" in surrogate pair out of range";en=65536+((1023&en)<<10)+(1023&tn),Jt[Zt++]=240|en>>18,Jt[Zt++]=128|63&en>>12}else Jt[Zt++]=224|en>>12;Jt[Zt++]=128|63&en>>6}Jt[Zt++]=128|63&en}return Jt.subarray(0,Zt)},Tools.decodeUTF8=function(Qt){for(var Zt="",Jt=0,$t;Jt<Qt.length;){if($t=Qt[Jt++],127<$t){if(191<$t&&224>$t){if(Jt>=Qt.length)throw"UTF-8 decode: incomplete 2-byte sequence";$t=(31&$t)<<6|63&Qt[Jt]}else if(223<$t&&240>$t){if(Jt+1>=Qt.length)throw"UTF-8 decode: incomplete 3-byte sequence";$t=(15&$t)<<12|(63&Qt[Jt])<<6|63&Qt[++Jt]}else{if(!(239<$t&&248>$t))throw"UTF-8 decode: unknown multibyte start 0x"+$t.toString(16)+" at index "+(Jt-1);if(Jt+2>=Qt.length)throw"UTF-8 decode: incomplete 4-byte sequence";$t=(7&$t)<<18|(63&Qt[Jt])<<12|(63&Qt[++Jt])<<6|63&Qt[++Jt]}++Jt}if(65535>=$t)Zt+=String.fromCharCode($t);else{if(!(1114111>=$t))throw"UTF-8 decode: code point 0x"+$t.toString(16)+" exceeds UTF-16 reach";$t-=65536,Zt+=String.fromCharCode(55296|$t>>10),Zt+=String.fromCharCode(56320|1023&$t)}}return Zt}}(),function(){var Bt={asteroids1:getFilePath("asteroids/asteroids1.png"),asteroids2:getFilePath("asteroids/asteroids2.png"),asteroids3:getFilePath("asteroids/asteroids3.png"),map_sea:"assets/map_sea.jpg",map_sea_mask:"assets/map_sea_mask.jpg",map_forest:"assets/map_forest.jpg",map_forest_mask:"assets/map_forest_mask.jpg",map_rock:"assets/map_rock.jpg",map_rock_mask:"assets/map_rock_mask.jpg",map_sand:"assets/map_sand.jpg",map_sand_mask:"assets/map_sand_mask.jpg",mountains:"assets/mountains.png",aircraft:"assets/aircraft.png",shadows:"assets/shadows.png",particles:"assets/particles.png",flags:"assets/flagsbig.png?4",items:"assets/items.png?2",gui:"assets/gui.png"},Gt={spirit:["aircraft",[4,4,512,256]],tornado:["aircraft",[524,4,256,256]],raptor:["aircraft",[788,4,256,256]],prowler:["aircraft",[1052,4,256,256]],comanche:["aircraft",[1316,4,128,256]],comanche_rotor:["aircraft",[1452,4,128,128]],spirit_2:["aircraft",[4,260,512,256]],tornado_2:["aircraft",[524,260,256,256]],raptor_2:["aircraft",[788,260,256,256]],prowler_2:["aircraft",[1052,260,256,256]],comanche_2:["aircraft",[1316,260,128,256]],mountain2:["mountains",[0,512,512,512]],mountain1:["mountains",[512,512,512,512]],mountain4:["mountains",[0,0,512,512]],mountain3:["mountains",[512,0,512,512]],crate_shadow:["shadows",[4,140,64,64]],comanche_rotor_shadow:["shadows",[76,140,64,64]],smokeshadow_8:["shadows",[148,140,32,32]],smokeshadow_7:["shadows",[188,140,32,32]],smokeshadow_6:["shadows",[228,140,32,32]],smokeshadow_5:["shadows",[268,140,32,32]],smokeshadow_4:["shadows",[308,140,32,32]],smokeshadow_3:["shadows",[348,140,32,32]],smokeshadow_2:["shadows",[388,140,32,32]],smokeshadow_15:["shadows",[428,140,32,32]],smokeshadow_14:["shadows",[468,140,32,32]],smokeshadow_13:["shadows",[508,140,32,32]],smokeshadow_12:["shadows",[548,140,32,32]],smokeshadow_11:["shadows",[588,140,32,32]],smokeshadow_10:["shadows",[628,140,32,32]],smokeshadow_1:["shadows",[668,140,32,32]],smokeshadow_16:["shadows",[708,140,32,32]],afterburner_shadow:["shadows",[748,140,32,32]],spirit_shadow:["shadows",[4,4,256,128]],tornado_shadow:["shadows",[268,4,128,128]],screenshade:["shadows",[404,4,128,128]],raptor_shadow:["shadows",[540,4,128,128]],prowler_shadow:["shadows",[676,4,128,128]],comanche_shadow:["shadows",[812,4,64,128]],spirit_shadow_2:["shadows",[4,200,256,128]],tornado_shadow_2:["shadows",[268,200,128,128]],raptor_shadow_2:["shadows",[540,200,128,128]],prowler_shadow_2:["shadows",[676,200,128,128]],comanche_shadow_2:["shadows",[812,200,64,128]],missile_shadow:["shadows",[884,4,32,128]],smokeshadow_9:["shadows",[924,76,32,32]],ctf_flag_shadow:["shadows",[924,4,64,64]],flash_1:["particles",[0,128,120,120]],glowsmall:["particles",[120,128,64,64]],smoke_9:["particles",[184,128,32,32]],smoke_8:["particles",[216,128,32,32]],smoke_7:["particles",[248,128,32,32]],smoke_6:["particles",[280,128,32,32]],smoke_5:["particles",[312,128,32,32]],smoke_4:["particles",[344,128,32,32]],smoke_3:["particles",[376,128,32,32]],smoke_2:["particles",[408,128,32,32]],smoke_16:["particles",[440,128,32,32]],smoke_15:["particles",[472,128,32,32]],smoke_14:["particles",[504,128,32,32]],smoke_13:["particles",[536,128,32,32]],smoke_12:["particles",[568,128,32,32]],smoke_11:["particles",[600,128,32,32]],smoke_10:["particles",[632,128,32,32]],smoke_1:["particles",[664,128,32,32]],shockwave:["particles",[0,0,128,128]],hotsmoke_4:["particles",[128,0,120,120]],hotsmoke_3:["particles",[248,0,120,120]],hotsmoke_2:["particles",[368,0,120,120]],hotsmoke_1:["particles",[488,0,120,120]],flash_4:["particles",[608,0,120,120]],flash_3:["particles",[728,0,120,120]],spark_4:["particles",[848,120,8,8]],spark_3:["particles",[856,120,8,8]],spark_2:["particles",[864,120,8,8]],spark_1:["particles",[872,120,8,8]],flash_2:["particles",[848,0,120,120]],crate_upgrade:["items",[4,268,128,128]],crate_shield:["items",[140,268,128,128]],crate_rampage:["items",[276,268,128,128]],afterburner:["items",[412,268,128,128]],missile_fat:["items",[548,268,64,128]],missile:["items",[620,268,32,128]],doodad_field:["items",[4,4,256,256]],badge_bronze:["items",[268,140,64,64]],powerup_shield:["items",[268,4,128,128]],badge_gold:["items",[404,140,64,64]],powerup_rampage:["items",[404,4,128,128]],badge_silver:["items",[540,140,64,64]],powerup_circle:["items",[540,4,128,128]],glowdirectional:["items",[676,140,64,64]],ctf_flag_red:["items",[676,4,128,128]],glowsmall_copy:["items",[812,140,64,64]],missile_small:["items",[884,140,16,64]],levelborder:["items",[908,140,32,32]],ctf_flag_blue:["items",[812,4,128,128]],hud_shadow:["gui",[4,268,80,348]],hud_mask:["gui",[92,268,80,348]],hud:["gui",[180,268,80,348]],emote_bro:["gui",[268,548,64,64]],emote_clap:["gui",[268,476,64,64]],ui_minimap_box:["gui",[268,404,64,64]],emote_cry:["gui",[340,548,64,64]],emote_kappa:["gui",[340,476,64,64]],emote_tf:["gui",[340,404,64,64]],emote_lol:["gui",[412,548,64,64]],emote_pepe:["gui",[412,476,64,64]],ui_minimap_1:["gui",[500,596,16,16]],ui_minimap_2:["gui",[516,596,16,16]],ui_minimap_3:["gui",[532,596,16,16]],ui_minimap_target:["gui",[580,596,16,16]],ui_minimap_blue:["gui",[484,596,16,16]],ui_minimap_base_blue:["gui",[484,556,32,32]],ui_minimap_base_red:["gui",[484,516,32,32]],ui_minimap_flag_blue:["gui",[484,476,32,32]],emote_rage:["gui",[412,404,64,64]],ui_minimap_mob:["gui",[484,444,16,16]],ui_minimap_flag_red:["gui",[484,404,32,32]],ui_minimap:["gui",[4,4,512,256]],chatbubbleleft:["gui",[274,274,16,82]],chatbubblecenter:["gui",[350,274,82,82]],chatbubbleright:["gui",[438,274,16,82]],chatbubblepoint:["gui",[297,352,36,22]]},Xt={flag_1:["flags",[2,962,80,60]],flag_2:["flags",[2,898,80,60]],flag_3:["flags",[2,834,80,60]],flag_4:["flags",[2,770,80,60]],flag_5:["flags",[2,706,80,60]],flag_6:["flags",[2,642,80,60]],flag_7:["flags",[2,578,80,60]],flag_8:["flags",[2,514,80,60]],flag_9:["flags",[2,450,80,60]],flag_10:["flags",[2,386,80,60]],flag_11:["flags",[2,322,80,60]],flag_12:["flags",[2,258,80,60]],flag_13:["flags",[2,194,80,60]],flag_14:["flags",[2,130,80,60]],flag_15:["flags",[2,66,80,60]],flag_16:["flags",[86,962,80,60]],flag_17:["flags",[86,898,80,60]],flag_18:["flags",[86,834,80,60]],flag_19:["flags",[86,770,80,60]],flag_20:["flags",[86,706,80,60]],flag_21:["flags",[86,642,80,60]],flag_22:["flags",[86,578,80,60]],flag_23:["flags",[86,514,80,60]],flag_24:["flags",[86,450,80,60]],flag_25:["flags",[86,386,80,60]],flag_26:["flags",[86,322,80,60]],flag_27:["flags",[86,258,80,60]],flag_28:["flags",[86,194,80,60]],flag_29:["flags",[86,130,80,60]],flag_30:["flags",[170,962,80,60]],flag_31:["flags",[170,898,80,60]],flag_32:["flags",[170,834,80,60]],flag_33:["flags",[170,770,80,60]],flag_34:["flags",[170,706,80,60]],flag_35:["flags",[170,642,80,60]],flag_36:["flags",[170,578,80,60]],flag_37:["flags",[170,514,80,60]],flag_38:["flags",[170,450,80,60]],flag_39:["flags",[170,386,80,60]],flag_40:["flags",[170,322,80,60]],flag_41:["flags",[170,258,80,60]],flag_42:["flags",[170,194,80,60]],flag_43:["flags",[254,962,80,60]],flag_44:["flags",[254,898,80,60]],flag_45:["flags",[254,834,80,60]],flag_46:["flags",[254,770,80,60]],flag_47:["flags",[254,706,80,60]],flag_48:["flags",[254,642,80,60]],flag_49:["flags",[254,578,80,60]],flag_50:["flags",[254,514,80,60]],flag_51:["flags",[254,450,80,60]],flag_52:["flags",[254,386,80,60]],flag_53:["flags",[254,322,80,60]],flag_54:["flags",[338,962,80,60]],flag_55:["flags",[338,898,80,60]],flag_56:["flags",[338,834,80,60]],flag_57:["flags",[338,770,80,60]],flag_58:["flags",[338,706,80,60]],flag_59:["flags",[338,642,80,60]],flag_60:["flags",[338,578,80,60]],flag_61:["flags",[338,514,80,60]],flag_62:["flags",[338,450,80,60]],flag_63:["flags",[338,386,80,60]],flag_64:["flags",[422,962,80,60]],flag_65:["flags",[422,898,80,60]],flag_66:["flags",[422,834,80,60]],flag_67:["flags",[422,770,80,60]],flag_68:["flags",[422,706,80,60]],flag_69:["flags",[422,642,80,60]],flag_70:["flags",[422,578,80,60]],flag_71:["flags",[422,514,80,60]],flag_72:["flags",[422,450,80,60]],flag_73:["flags",[506,962,80,60]],flag_74:["flags",[506,898,80,60]],flag_75:["flags",[506,834,80,60]],flag_76:["flags",[506,770,80,60]],flag_77:["flags",[506,706,80,60]],flag_78:["flags",[506,642,80,60]],flag_79:["flags",[506,578,80,60]],flag_80:["flags",[590,770,80,60]],flag_81:["flags",[590,706,80,60]],flag_82:["flags",[590,642,80,60]],flag_83:["flags",[590,578,80,60]],flag_84:["flags",[506,514,80,60]],flag_85:["flags",[590,514,80,60]],flag_86:["flags",[506,450,80,60]],flag_87:["flags",[590,450,80,60]],flag_88:["flags",[422,386,80,60]],flag_89:["flags",[506,386,80,60]],flag_90:["flags",[590,386,80,60]],flag_91:["flags",[338,322,80,60]],flag_92:["flags",[422,322,80,60]],flag_93:["flags",[506,322,80,60]],flag_94:["flags",[590,322,80,60]],flag_95:["flags",[254,258,80,60]],flag_96:["flags",[338,258,80,60]],flag_97:["flags",[422,258,80,60]],flag_98:["flags",[506,258,80,60]],flag_99:["flags",[590,258,80,60]],flag_100:["flags",[254,194,80,60]],flag_101:["flags",[338,194,80,60]],flag_102:["flags",[422,194,80,60]],flag_103:["flags",[506,194,80,60]],flag_104:["flags",[590,194,80,60]],flag_105:["flags",[170,130,80,60]],flag_106:["flags",[254,130,80,60]],flag_107:["flags",[338,130,80,60]],flag_108:["flags",[422,130,80,60]],flag_109:["flags",[506,130,80,60]],flag_110:["flags",[590,130,80,60]],flag_111:["flags",[86,66,80,60]],flag_112:["flags",[170,66,80,60]],flag_113:["flags",[254,66,80,60]],flag_114:["flags",[338,66,80,60]],flag_115:["flags",[422,66,80,60]],flag_116:["flags",[506,66,80,60]],flag_117:["flags",[590,66,80,60]],flag_118:["flags",[2,2,80,60]],flag_119:["flags",[86,2,80,60]],flag_120:["flags",[170,2,80,60]],flag_121:["flags",[254,2,80,60]],flag_122:["flags",[338,2,80,60]],flag_123:["flags",[422,2,80,60]],flag_124:["flags",[506,2,80,60]],flag_125:["flags",[590,2,80,60]]},Ht={hudHealth_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2},hudHealth_mask:{texture:"hud_mask",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudHealth:{texture:"hud",layer:"hudHealth",pivot:[330,174],position:"screencenter"},hudEnergy_shadow:{texture:"hud_shadow",layer:"ui0",pivot:[330,174],position:"screencenter",alpha:.2,rotation:Math.PI},hudEnergy_mask:{texture:"hud_mask",layer:"hudEnergy",pivot:[330,174],position:"screencenter",rotation:Math.PI},hudEnergy:{texture:"hud",layer:"hudEnergy",pivot:[330,174],position:"screencenter",tint:3374821},minimap:{texture:"ui_minimap",layer:"ui0",anchor:[1,1],alpha:.25},minimapBox:{texture:"ui_minimap_box",layer:"ui4",anchor:[0.5,0.5],alpha:.6},minimapMob:{texture:"ui_minimap_mob",layer:"ui1",anchor:[0.5,0.5],alpha:.5,scale:.8},minimapBlue:{texture:"ui_minimap_blue",layer:"ui1",anchor:[0.5,0.5],alpha:.5,scale:.8},minimap1:{texture:"ui_minimap_1",layer:"ui2",anchor:[0.5,0.5],alpha:1,scale:.8},minimap2:{texture:"ui_minimap_2",layer:"ui2",anchor:[0.5,0.5],alpha:1,scale:.8},minimap3:{texture:"ui_minimap_3",layer:"ui2",anchor:[0.5,0.5],alpha:1,scale:.8},minimapTarget:{texture:"ui_minimap_target",layer:"ui3",anchor:[0.5,0.5],alpha:1,scale:.5},minimapFlagBlue:{texture:"ui_minimap_flag_blue",layer:"ui3",anchor:[0.5,0.5],scale:.5},minimapFlagRed:{texture:"ui_minimap_flag_red",layer:"ui3",anchor:[0.5,0.5],scale:.5},minimapBaseBlue:{texture:"ui_minimap_base_blue",layer:"ui2",anchor:[0.5,0.5],scale:.5},minimapBaseRed:{texture:"ui_minimap_base_red",layer:"ui2",anchor:[0.5,0.5],scale:.5},thrusterShadow:{texture:"afterburner_shadow",layer:"shadows",anchor:[0.5,0.1]},missile:{texture:"missile",layer:"projectiles",anchor:[0.5,0],scale:[0.3,0.3]},missileFat:{texture:"missile_fat",layer:"projectiles",anchor:[0.5,0],scale:[0.2,0.3]},missileSmall:{texture:"missile_small",layer:"projectiles",anchor:[0.5,0],scale:[20,20]},missileShadow:{texture:"missile_shadow",layer:"shadows",anchor:[0.5,0.25]},missileThruster:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.15,0.15]},thrusterGlowSmall:{texture:"glowsmall_copy",layer:"glows",anchor:[0.5,0.5],blend:"ADD"},smokeGlow:{texture:"glowdirectional",layer:"glows",anchor:[0.5,0.3],blend:"ADD"},crateShadow:{texture:"crate_shadow",layer:"shadows",anchor:[0.5,0.5]},crateUpgrade:{texture:"crate_upgrade",layer:"crates",anchor:[0.5,0.5]},crateShield:{texture:"crate_shield",layer:"crates",anchor:[0.5,0.5]},crateRampage:{texture:"crate_rampage",layer:"crates",anchor:[0.5,0.5]},powerupCircle:{texture:"powerup_circle",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},powerupShield:{texture:"powerup_shield",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},powerupRampage:{texture:"powerup_rampage",layer:"powerups",anchor:[0.5,0.5],blend:"ADD"},ctfFlagRed:{texture:"ctf_flag_red",layer:"flags",anchor:[0.1171875,0.9296875]},ctfFlagBlue:{texture:"ctf_flag_blue",layer:"flags",anchor:[0.1171875,0.9296875]},ctfFlagShadow:{texture:"ctf_flag_shadow",layer:"shadows",anchor:[0.09375,0.71875]},shipRaptor:{texture:"raptor",layer:"aircraft",anchor:[0.5,0.6]},shipRaptorShadow:{texture:"raptor_shadow",layer:"shadows",anchor:[0.5,0.57]},shipRaptorThruster:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.25,0.25]},shipSpirit:{texture:"spirit",layer:"aircraft",anchor:[0.5,0.5]},shipSpiritShadow:{texture:"spirit_shadow",layer:"shadows",anchor:[0.5,0.5]},shipSpiritThruster:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.25,0.25]},shipComanche:{texture:"comanche",layer:"aircraft",anchor:[0.5,0.4]},shipComancheShadow:{texture:"comanche_shadow",layer:"shadows",anchor:[0.5,0.43]},shipComancheRotor:{texture:"comanche_rotor",layer:"aircraft",anchor:[0.5,0.5],scale:[0.25,0.25]},shipComancheRotorShadow:{texture:"comanche_rotor_shadow",layer:"shadows",anchor:[0.5,0.5]},shipTornado:{texture:"tornado",layer:"aircraft",anchor:[0.5,0.65]},shipTornadoShadow:{texture:"tornado_shadow",layer:"shadows",anchor:[0.5,0.605]},shipProwler:{texture:"prowler",layer:"aircraft",anchor:[0.5,0.5]},shipProwlerShadow:{texture:"prowler_shadow",layer:"shadows",anchor:[0.5,0.5]},shipRaptor_2:{texture:"raptor_2",layer:"aircraft",anchor:[0.5,0.6]},shipRaptorShadow_2:{texture:"raptor_shadow_2",layer:"shadows",anchor:[0.5,0.57]},shipRaptorThruster_2:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.25,0.25]},shipSpirit_2:{texture:"spirit_2",layer:"aircraft",anchor:[0.5,0.5]},shipSpiritShadow_2:{texture:"spirit_shadow_2",layer:"shadows",anchor:[0.5,0.5]},shipSpiritThruster_2:{texture:"afterburner",layer:"thrusters",anchor:[0.5,0.1],scale:[0.25,0.25]},shipComanche_2:{texture:"comanche_2",layer:"aircraft",anchor:[0.5,0.4]},shipComancheShadow_2:{texture:"comanche_shadow_2",layer:"shadows",anchor:[0.5,0.43]},shipComancheRotor_2:{texture:"comanche_rotor",layer:"aircraft",anchor:[0.5,0.5],scale:[0.25,0.25]},shipComancheRotorShadow_2:{texture:"comanche_rotor_shadow",layer:"shadows",anchor:[0.5,0.5]},shipTornado_2:{texture:"tornado_2",layer:"aircraft",anchor:[0.5,0.65]},shipTornadoShadow_2:{texture:"tornado_shadow_2",layer:"shadows",anchor:[0.5,0.605]},shipProwler_2:{texture:"prowler_2",layer:"aircraft",anchor:[0.5,0.5]},shipProwlerShadow_2:{texture:"prowler_shadow_2",layer:"shadows",anchor:[0.5,0.5]},mountain1:{texture:"mountain1",layer:"doodads",anchor:[0.5,0.5]},mountain2:{texture:"mountain2",layer:"doodads",anchor:[0.5,0.5]},mountain3:{texture:"mountain3",layer:"doodads",anchor:[0.5,0.5]},mountain4:{texture:"mountain4",layer:"doodads",anchor:[0.5,0.5]},doodadField:{texture:"doodad_field",layer:"fields",anchor:[0.5,0.5]}},Yt={};Textures.load=function(){for(var Wt in Bt)Yt[Wt]=new PIXI.Texture.fromImage(Bt[Wt]);var jt;for(var zt in Gt)jt=Gt[zt],Yt[zt]=new PIXI.Texture(Yt[jt[0]].baseTexture,new PIXI.Rectangle(jt[1][0],jt[1][1],jt[1][2],jt[1][3]));for(var zt in Xt)jt=Xt[zt],Yt[zt]=new PIXI.Texture(Yt[jt[0]].baseTexture,new PIXI.Rectangle(jt[1][0],jt[1][1],jt[1][2],jt[1][3]))},Textures.get=function(Wt){return Yt[Wt]},Textures.getNamed=function(Wt){return Yt[Ht[Wt].texture]},Textures.init=function(Wt,jt){var zt=JSON.parse(JSON.stringify(Ht[Wt]));if("screencenter"===zt.position&&(zt.position=[game.halfScreenX,game.halfScreenY]),jt)for(var Vt in jt)zt[Vt]=jt[Vt];return Graphics.initSprite(zt.texture,game.graphics.layers[zt.layer],zt)},Textures.sprite=function(Wt){return new PIXI.Sprite(Yt[Wt])},Textures.tile=function(Wt,jt,zt){return new PIXI.extras.TilingSprite(Yt[Wt],jt,zt)}}(),function(){var Gt={position:Vector.zero(),center:Vector.zero(),lastOverdraw:Vector.zero(),lastOverdrawTime:0,shake:0},Xt={},Ht={},Yt={},Bt;Graphics.setup=function(){qt(window.innerWidth,window.innerHeight),jt(),Textures.load(),zt(),Kt(),Vt(),Zt(),Mobs.setupDoodads(),UI.setupMinimap(),UI.setupHUD()};var jt=function(){PIXI.utils.skipHello(),PIXI.settings.PRECISION_FRAGMENT=PIXI.PRECISION.HIGH;var nn={autoResize:!0,clearBeforeRender:!1,preserveDrawingBuffer:!0};config.settings.hidpi&&(nn.resolution=2);try{Bt=new PIXI.WebGLRenderer(game.screenX,game.screenY,nn),Graphics.renderer=Bt}catch(rn){return void UI.popBigMsg(2)}document.body.appendChild(Bt.view)},zt=function(){for(var nn of["game","ui0","ui1","ui2","ui3","ui4","hudHealth","hudEnergy","flags","doodads","map","sea","objects","groundobjects","fields","shadows","powerups","crates","aircraft","aircraftme","glows","playernames","bubbles","thrusters","projectiles","smoke","explosions"])Yt[nn]=new PIXI.Container,Yt[nn].layerName=nn;for(var rn of["smoke","crates","thrusters","projectiles","aircraft","aircraftme","glows","explosions","powerups","playernames","flags","bubbles"])Yt.objects.addChild(Yt[rn]);for(var an of["fields"])Yt.groundobjects.addChild(Yt[an]);if(game.graphics.layers=Yt,game.graphics.gui=Ht,config.debug.collisions){for(var on=new PIXI.Graphics,sn=0;sn<config.walls.length;sn++)if(on.beginFill(16777215,.2),on.drawCircle(config.walls[sn][0],config.walls[sn][1],config.walls[sn][2]),on.endFill(),window.AutoPilot&&AutoPilot.debug){var dn=AutoPilot.getGraphBoundingBox(config.walls[sn][0],config.walls[sn][1],config.walls[sn][2]);on.beginFill(16711680,.2),on.drawRect(100*dn.p1.x-16384,100*dn.p1.y-8192,100*(dn.p2.x-dn.p1.x+1),100*(dn.p2.y-dn.p1.y+1)),on.endFill()}if(window.AutoPilot&&AutoPilot.debug){on.lineColor=16777215,on.lineStyle(1,16777215);for(var ln=-16383;16383>=ln;ln+=100)on.moveTo(ln,-8192),on.lineTo(ln,8192);for(var un=-8192;8192>=un;un+=100)on.moveTo(-16383,un),on.lineTo(16384,un)}Yt.objects.addChild(on)}},Vt=function(){Xt.render=PIXI.RenderTexture.create(game.screenX+config.overdraw,game.screenY+config.overdraw,void 0,config.settings.hidpi?2:void 0),Xt.renderSprite=new PIXI.Sprite(Xt.render),Xt.renderSprite.layerName="renderSprite",Xt.shadows=PIXI.RenderTexture.create(game.shadowX,game.shadowY,void 0,config.settings.hidpi?2:void 0),Xt.shadowsSprite=new PIXI.Sprite(Xt.shadows),Xt.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),Xt.shadowsSprite.blendMode=PIXI.BLEND_MODES.MULTIPLY,Xt.shadowsSprite.alpha=.4,Yt.game.addChild(Xt.renderSprite),Yt.game.addChild(Yt.groundobjects),Xt.shade=Textures.sprite("screenshade"),Xt.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale),Xt.shade.alpha=.825,Xt.shade.anchor.set(.5,.5),Yt.shadows.addChild(Xt.shade),Yt.game.addChild(Yt.objects),Yt.game.addChild(Yt.ui0),Yt.game.addChild(Yt.ui1),Yt.game.addChild(Yt.ui2),Yt.game.addChild(Yt.ui3),Yt.game.addChild(Yt.ui4),Ht.hudTextureEnergy=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),Ht.hudSpriteEnergy=new PIXI.Sprite(Ht.hudTextureEnergy),Ht.hudSpriteEnergy.pivot.set(-250,174),Ht.hudTextureHealth=PIXI.RenderTexture.create(80,348,void 0,config.settings.hidpi?2:void 0),Ht.hudSpriteHealth=new PIXI.Sprite(Ht.hudTextureHealth),Ht.hudSpriteHealth.pivot.set(330,174),Yt.game.addChild(Ht.hudSpriteEnergy),Yt.game.addChild(Ht.hudSpriteHealth)};Graphics.resizeRenderer=function(nn,rn){var an=nn+config.overdraw,on=rn+config.overdraw;qt(nn,rn),Kt(),Bt.resize(nn,rn),Xt.render.resize(an,on),Xt.shadows.resize(nn,rn),Xt.shadowsSprite.scale.set(game.screenX/game.shadowX,game.screenY/game.shadowY),Xt.shade.scale.set(game.shadowX/126/game.scale,game.shadowY/126/game.scale);for(var sn of["sea","forest","sand","rock"])Xt[sn].width=an,Xt[sn].height=on;UI.resizeMinimap(),UI.resizeHUD(),Jt(),$t(),Graphics.setCamera(Gt.center.x,Gt.center.y),game.state==Network.STATE.PLAYING&&Network.resizeHorizon()},Graphics.toggleHiDPI=function(){config.settings.hidpi=1!=config.settings.hidpi,config.settings.hidpi?Tools.setSettings({hidpi:!0}):Tools.removeSetting("hidpi"),UI.updateMainMenuSettings(),1==config.settings.oldhidpi==config.settings.hidpi?UI.showMessage("alert","",1e3):UI.showMessage("alert","Reload game to apply HiDPI settings<br><span class=\"button\" onclick=\"Games.redirRoot()\">RELOAD</span>",1e4)};var qt=function(nn,rn){game.screenX=nn,game.screenY=rn,game.halfScreenX=nn/2,game.halfScreenY=rn/2,game.shadowX=Math.floor(game.screenX/config.shadowScaling),game.shadowY=Math.floor(game.screenY/config.shadowScaling)},Kt=function(){game.scale=(game.screenX+game.screenY)/config.scalingFactor,Yt.groundobjects.scale.set(game.scale),Yt.objects.scale.set(game.scale),Yt.shadows.scale.set(game.scale),Yt.doodads.scale.set(game.scale),Yt.bubbles.scale.set(1/game.scale),Qt()},Qt=function(){if(config.mobile){var nn=game.screenX>game.screenY?"landscape":"portrait";config.phone=599>=game.screenX&&"portrait"==nn||599>=game.screenY&&"landscape"==nn,config.tablet=600<=game.screenX&&1024>=game.screenX&&"portrait"==nn||600<=game.screenY&&1024>=game.screenY&&1024>=game.screenX&&"landscape"==nn,config.maxScoreboard=8,config.phone&&(config.minimapSize=160,config.maxScoreboard=5),config.tablet&&(config.maxScoreboard=7),config.minimapPaddingX=game.screenX/2-config.minimapSize/2}},Zt=function(){var nn=Bt.width+config.overdraw,rn=Bt.height+config.overdraw;Xt.sea=Textures.tile("map_sea",nn,rn),Xt.forest=Textures.tile("map_forest",nn,rn),Xt.forest_mask=Textures.sprite("map_forest_mask"),Xt.forest_mask.scale.set(8,8),Xt.forest.mask=Xt.forest_mask,Xt.sand=Textures.tile("map_sand",nn,rn),Xt.sand_mask=Textures.sprite("map_sand_mask"),Xt.sand_mask.scale.set(8,8),Xt.sand.mask=Xt.sand_mask,Xt.rock=Textures.tile("map_rock",nn,rn),Xt.rock_mask=Textures.sprite("map_rock_mask"),Xt.rock_mask.scale.set(8,8),Xt.rock.mask=Xt.rock_mask,Yt.sea.addChild(Xt.sea);for(var an of["forest","forest_mask","sand","sand_mask","rock","rock_mask"])Yt.map.addChild(Xt[an]),Xt[an].layerName=an;Yt.map.addChild(Yt.doodads),en(),Jt()},Jt=function(){var nn;for(nn of["sea","forest","sand","rock"])Xt[nn].tileScale.set(game.scale,game.scale);for(nn of["forest","sand","rock"])Xt[nn+"_mask"].scale.set(8*game.scale,8*game.scale)},$t=function(){try{Xt.polygons.scale.x=game.scale,Xt.polygons.scale.y=game.scale}catch(nn){}},en=function(){$.getJSON("assets/map.json",function(nn){Xt.polygons=new PIXI.Graphics,Xt.polygons.beginFill();var pn=0,cn=0,hn=0,rn,an,on,sn,dn,ln,un;for(ln=0;ln<nn.length;ln++)for(on=0,un=0;un<nn[ln].length;un++){for(sn=[],dn=0;dn<nn[ln][un].length;dn+=2)rn=nn[ln][un][dn]+cn,an=nn[ln][un][dn+1]+hn,sn.push(parseFloat(rn),-parseFloat(an)),cn=rn,hn=an,pn++;Xt.polygons.drawPolygon(sn),0!=on&&Xt.polygons.addHole(),on++}Xt.polygons.endFill(),$t(),Yt.map.addChild(Xt.polygons),Yt.map.mask=Xt.polygons})};Graphics.initSprite=function(nn,rn,an){var on=Textures.sprite(nn);return an.position&&on.position.set(an.position[0],an.position[1]),an.anchor&&on.anchor.set(an.anchor[0],an.anchor[1]),an.pivot&&on.pivot.set(an.pivot[0],an.pivot[1]),an.scale&&(Array.isArray(an.scale)?on.scale.set(an.scale[0],an.scale[1]):on.scale.set(an.scale)),an.rotation&&(on.rotation=an.rotation),an.alpha&&(on.alpha=an.alpha),an.blend&&(on.blendMode=PIXI.BLEND_MODES[an.blend]),an.tint&&(on.tint=an.tint),an.mask&&(on.mask=an.mask),an.visible&&(on.visible=an.visible),rn.addChild(on),on},Graphics.transform=function(nn,rn,an,on,sn,dn,ln){nn.position.set(rn,an),null==dn?null!=sn&&nn.scale.set(sn):nn.scale.set(sn,dn),null!=on&&(nn.rotation=on),null!=ln&&(nn.alpha=ln)},Graphics.update=function(){let nn=Gt.position.x,rn=Gt.position.y,an=-nn*game.scale,on=-rn*game.scale,sn=config.overdraw/2;Xt.shade.position.set(Gt.center.x/config.shadowScaling,Gt.center.y/config.shadowScaling),Xt.renderSprite.position.set(game.scale*(-nn+Gt.lastOverdraw.x)-sn,game.scale*(-rn+Gt.lastOverdraw.y)-sn),Yt.objects.position.set(an,on),Yt.groundobjects.position.set(an,on),Yt.doodads.position.set(an+sn,on+sn),Yt.shadows.position.set(-nn*(game.scale/config.shadowScaling),-rn*(game.scale/config.shadowScaling)),Ht.minimap_box.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-Gt.center.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-Gt.center.y)/16384)),SWAM.planet&&SWAM.updateLayers(an,on,Gt),config.overdrawOptimize?(Math.abs(nn-Gt.lastOverdraw.x)>sn/game.scale||Math.abs(rn-Gt.lastOverdraw.y)>sn/game.scale||2e3<game.time-Gt.lastOverdrawTime)&&tn():tn()},Graphics.setCamera=function(nn,rn){var an=0,on=0;.5<Gt.shake&&(an=Tools.rand(-Gt.shake,Gt.shake),on=Tools.rand(-Gt.shake,Gt.shake),Gt.shake*=1-.06*game.timeFactor);var sn=game.halfScreenX/game.scale,dn=game.halfScreenY/game.scale;nn=Tools.clamp(nn,-16384+sn,16384-sn),rn=Tools.clamp(rn,-8192+dn,8192-dn),Gt.position.x=an+nn-sn,Gt.position.y=on+rn-dn,Gt.center.x=an+nn,Gt.center.y=on+rn},Graphics.getCamera=function(){return Gt.center},Graphics.shakeCamera=function(nn,rn){var an=Tools.length(nn.x-Gt.center.x,nn.y-Gt.center.y),on=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2,sn=Tools.clamp(1.3*(1-an/on),0,1);.1>sn||(Gt.shake=sn*rn)},Graphics.shadowCoords=function(nn){var rn=Mobs.getClosestDoodad(nn);return new Vector((nn.x+config.shadowOffsetX*rn)/config.shadowScaling,(nn.y+config.shadowOffsetY*rn)/config.shadowScaling)},Graphics.minimapMob=function(nn,rn,an){null!=nn&&nn.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-rn)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-an)/16384))},Graphics.toggleFullscreen=function(){(function(){var nn=document;return nn.fullscreenElement?null!==nn.fullscreenElement:nn.mozFullScreenElement?null!==nn.mozFullScreenElement:nn.webkitFullscreenElement?null!==nn.webkitFullscreenElement:nn.msFullscreenElement?null!==nn.msFullscreenElement:void 0})()?function(){var nn=document;nn.exitFullscreen?nn.exitFullscreen():nn.mozCancelFullScreen?nn.mozCancelFullScreen():nn.webkitExitFullscreen?nn.webkitExitFullscreen():nn.msExitFullscreen&&nn.msExitFullscreen()}():function(){var nn=document.documentElement;if(nn.requestFullscreen?nn.requestFullscreen():nn.mozRequestFullScreen?nn.mozRequestFullScreen():nn.webkitRequestFullscreen?nn.webkitRequestFullscreen():nn.msRequestFullscreen&&nn.msRequestFullscreen(),config.mobile&&null!=window.screen&&null!=window.screen.orientation)try{screen.orientation.lock("landscape")}catch(rn){}}()},Graphics.inScreen=function(nn,rn){return nn.x>=Gt.center.x-game.halfScreenX/game.scale-rn&&nn.x<=Gt.center.x+game.halfScreenX/game.scale+rn&&nn.y>=Gt.center.y-game.halfScreenY/game.scale-rn&&nn.y<=Gt.center.y+game.halfScreenY/game.scale+rn};var tn=function(){Mobs.updateDoodads(),Gt.lastOverdraw.x=Gt.position.x,Gt.lastOverdraw.y=Gt.position.y,Xt.renderSprite.position.set(-config.overdraw/2,-config.overdraw/2);var rn=Gt.position.x-config.overdraw/game.scale/2,an=Gt.position.y-config.overdraw/game.scale/2,on=-rn*game.scale,sn=-an*game.scale,dn=(-rn-16384)*game.scale,ln=(-an-8192)*game.scale,nn,un=100;for(nn of["sea","forest","sand","rock"])Xt[nn].tilePosition.set(on/un,sn/un);for(nn of["forest","sand","rock"])Xt[nn+"_mask"].position.set(dn,ln);Gt.lastOverdrawTime=game.time,Bt.render(Yt.sea,Xt.render),Bt.render(Yt.map,Xt.render)};Graphics.render=function(){Bt.render(Yt.shadows,Xt.shadows,!0),Bt.render(Yt.hudEnergy,Ht.hudTextureEnergy,!0),Bt.render(Yt.hudHealth,Ht.hudTextureHealth,!0),Bt.render(Yt.game)}}(),function(){var Bt=null,Gt=null,Xt=!1,Ht="",Yt=!1,Wt=null,jt=-1,zt=-1,Vt=0,qt={},Kt=0,Qt=0,Zt=0,Jt=!1,$t=2e3,en=2e3;Network.sendKey=function(yn,_n){if(game.state==Network.STATE.PLAYING){Qt++;var bn={c:hn.KEY,seq:Qt,key:pn[yn],state:_n};null!=game.spectatingID&&_n&&("RIGHT"==yn?Network.spectatePrev():"LEFT"==yn&&Network.spectateNext()),un(bn),Gt&&Xt&&un(bn,!0)}},Network.sendChat=function(yn){game.state==Network.STATE.PLAYING&&un({c:hn.CHAT,text:yn})},Network.sendWhisper=function(yn,_n){game.state==Network.STATE.PLAYING&&un({c:hn.WHISPER,id:yn,text:_n})},Network.sendSay=function(yn){game.state==Network.STATE.PLAYING&&un({c:hn.SAY,text:yn})},Network.sendTeam=function(yn){game.state==Network.STATE.PLAYING&&un({c:hn.TEAMCHAT,text:yn})},Network.sendCommand=function(yn,_n){game.state==Network.STATE.PLAYING&&("flag"===yn&&(game.lastFlagSet=_n),un({c:hn.COMMAND,com:yn,data:_n}))},Network.voteMute=function(yn){game.state==Network.STATE.PLAYING&&un({c:hn.VOTEMUTE,id:yn})},Network.force=function(yn){for(var _n in Players.network(gn.PLAYER_UPDATE,yn),yn.players)Players.network(gn.PLAYER_UPDATE,yn.players[_n]);for(_n in yn.mobs)Mobs.network(yn.mobs[_n]);var bn=new Vector(yn.posX,yn.posY);Particles.spiritShockwave(bn),Sound.effectRepel(bn)},Network.getScores=function(){game.state==Network.STATE.PLAYING&&un({c:hn.SCOREDETAILED})},Network.resizeHorizon=function(){game.state==Network.STATE.PLAYING&&un({c:hn.HORIZON,horizonX:Math.ceil(game.halfScreenX/game.scale),horizonY:Math.ceil(game.halfScreenY/game.scale)})},Network.detectConnectivity=function(){game.lagging=1300<game.timeNetwork-Zt},Network.shutdown=function(){null!=Wt&&clearInterval(Wt),null!=Bt&&Bt.close(),null!=Gt&&Gt.close(),Xt=!1,Yt=!1,jt=-1,zt=-1,Vt=0,qt={},Kt=0,Qt=0,Zt=0,Jt=!1,$t=2e3,en=2e3},Network.receivedError=function(yn){Jt=yn},Network.spectateNext=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-1")},Network.spectatePrev=function(){game.state==Network.STATE.PLAYING&&Network.sendCommand("spectate","-2")},Network.spectateForce=function(){game.state==Network.STATE.PLAYING&&(Players.amIAlive()?Network.sendCommand("spectate","-3"):Network.spectateNext())};var tn=function(){game.lagging||game.state==Network.STATE.PLAYING&&(Yt?Gt&&Xt&&un({c:hn.ACK},!0):un({c:hn.ACK}),Yt=!Yt)},nn=function(yn){36e5<Math.abs(yn-jt)&&(jt=yn,zt=performance.now(),Vt=0)},rn=function(yn){if(game.state==Network.STATE.PLAYING||yn.c==gn.LOGIN||yn.c==gn.ERROR){if((yn.c==gn.PLAYER_UPDATE||yn.c==gn.PLAYER_FIRE||yn.c==gn.EVENT_BOOST||yn.c==gn.EVENT_BOUNCE)&&yn.id==game.myID||yn.c==gn.PING){if(yn.c!=gn.PING&&on(yn))return;game.timeNetwork=performance.now(),Zt=game.timeNetwork,function(bn){if(game.jitter=0,-1!=jt){nn(bn);var xn=game.timeNetwork,vn=bn-jt-(xn-zt),Tn=vn-(Vt=.8*Vt+vn/5);100>Math.abs(Tn)&&(game.jitter=Tn)}}(yn.clock/100)}else game.timeNetwork=performance.now(),Zt=game.timeNetwork,null!=yn.clock&&function(bn){-1!=jt&&(nn(bn),game.jitter=bn-jt-(game.timeNetwork-zt)-Vt)}(yn.clock/100);switch(yn.c){case gn.PLAYER_UPDATE:case gn.PLAYER_FIRE:case gn.CHAT_SAY:case gn.PLAYER_RESPAWN:case gn.PLAYER_FLAG:case gn.EVENT_BOOST:case gn.EVENT_BOUNCE:if(Players.network(yn.c,yn),yn.c===gn.PLAYER_FIRE){for(var _n=0;_n<yn.projectiles.length;_n++)yn.projectiles[_n].c=gn.PLAYER_FIRE,Mobs.addSW(yn.projectiles[_n],yn.id);0<yn.projectiles.length&&Sound.missileLaunch(new Vector(yn.projectiles[0].posX,yn.projectiles[0].posY),yn.projectiles[0].type)}break;case gn.LOGIN:for(!function(bn){Wt=setInterval(tn,50),game.myID=bn.id,game.myTeam=bn.team,game.myToken=bn.token,game.state=Network.STATE.PLAYING,game.roomName=bn.room,game.gameType=bn.type,game.spectatingID=null,game.myLevel=0,Games.prep(),jt=bn.clock/100,zt=performance.now(),sn()}(yn),UI.loggedIn(yn),_n=0;_n<yn.players.length;_n++)Players.add(yn.players[_n],!0);break;case gn.ERROR:UI.errorHandler(yn);break;case gn.PLAYER_NEW:window.ShowEnterLeave&&UI.addChatMessage(yn.name+" is now playing."),Players.add(yn);break;case gn.PLAYER_LEAVE:window.ShowEnterLeave&&UI.addChatMessage(Players.get(yn.id).name+" left the game."),Players.destroy(yn.id);break;case gn.PLAYER_TYPE:Players.changeType(yn);break;case gn.PLAYER_HIT:Players.impact(yn),200!=yn.type&&Mobs.destroy(yn);break;case gn.PLAYER_KILL:Players.kill(yn);break;case gn.PLAYER_UPGRADE:UI.updateUpgrades([yn.speed,yn.defense,yn.energy,yn.missile],yn.upgrades,yn.type);break;case gn.PLAYER_POWERUP:Players.powerup(yn);break;case gn.PLAYER_LEVEL:Players.updateLevel(yn);break;case gn.PLAYER_RETEAM:for(_n=0;_n<yn.players.length;_n++)Players.reteam(yn.players[_n]);break;case gn.EVENT_REPEL:Network.force(yn);break;case gn.EVENT_LEAVEHORIZON:0==yn.type?Players.leaveHorizon(yn):Mobs.destroy(yn);break;case gn.EVENT_STEALTH:Players.stealth(yn);break;case gn.MOB_UPDATE:case gn.MOB_UPDATE_STATIONARY:Mobs.network(yn);break;case gn.MOB_DESPAWN:Mobs.despawn(yn);break;case gn.MOB_DESPAWN_COORDS:Mobs.destroy(yn);break;case gn.GAME_FLAG:Games.networkFlag(yn);break;case gn.GAME_PLAYERSALIVE:Games.playersAlive(yn.players);break;case gn.SCORE_UPDATE:UI.newScore(yn);break;case gn.SCORE_BOARD:UI.scoreboardUpdate(yn.data,yn.rankings,config.maxScoreboard),Players.updateBadges(yn.data);break;case gn.SCORE_DETAILED:case gn.SCORE_DETAILED_CTF:case gn.SCORE_DETAILED_BTR:UI.updateScore(yn);break;case gn.PING:!function(bn){un({c:hn.PONG,num:bn})}(yn.num);break;case gn.PING_RESULT:UI.updateStats(yn);break;case gn.CHAT_PUBLIC:if(config.mobile)return;Players.chat(yn);break;case gn.CHAT_TEAM:if(config.mobile)return;Players.teamChat(yn);break;case gn.CHAT_WHISPER:if(config.mobile)return;Players.whisper(yn);break;case gn.CHAT_VOTEMUTEPASSED:if(config.mobile)return;Players.votemutePass(yn);break;case gn.CHAT_VOTEMUTED:return config.mobile?void 0:void UI.chatMuted();case gn.SERVER_MESSAGE:UI.serverMessage(yn);break;case gn.SERVER_CUSTOM:an(yn);break;case gn.GAME_SPECTATE:Games.spectate(yn.id);break;case gn.GAME_FIREWALL:Games.handleFirewall(yn);break;case gn.COMMAND_REPLY:UI.showCommandReply(yn);}}},an=function(yn){try{var _n=JSON.parse(yn.data)}catch(bn){return}1==yn.type?Games.showBTRWin(_n):2==yn.type&&Games.showCTFWin(_n)},on=function(yn){var _n=performance.now(),bn=yn.c+"_"+yn.clock+"_"+yn.posX+"_"+yn.posY+"_"+yn.rot+"_"+yn.speedX+"_"+yn.speedY;if(15e3<_n-Kt){for(var xn in qt)3e4<_n-qt[xn]&&delete qt[xn];Kt=_n}return null!=qt[bn]||(qt[bn]=_n,!1)};Network.reconnectMessage=function(){game.reloading||UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Connection reset<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",6e5)},Network.reconnect=function(){UI.showMessage("alert","",100),Games.switchGame()},Network.setup=function(){Ht="wss://game-"+game.playHost+".airma.sh/"+game.playPath,Gt&&Xt&&Gt.close(),(Bt=new WebSocket(Ht)).binaryType="arraybuffer",Bt.onopen=function(){un({c:hn.LOGIN,protocol:game.protocol,name:game.myName,session:config.settings.session?config.settings.session:"none",horizonX:Math.ceil(game.halfScreenX/game.scale),horizonY:Math.ceil(game.halfScreenY/game.scale),flag:game.myFlag})},Bt.onclose=function(){null!=Wt&&clearInterval(Wt),game.state!==Network.STATE.CONNECTING&&(game.state=Network.STATE.CONNECTING,!1===Jt&&Network.reconnectMessage())},Bt.onerror=function(){},Bt.onmessage=function(yn){rn(ln(yn.data))}};var sn=function(){(Gt=new WebSocket(Ht)).binaryType="arraybuffer",Gt.onopen=function(){un({c:hn.BACKUP,token:game.myToken},!0)},Gt.onclose=function(){Xt=!1},Gt.onerror=function(){},Gt.onmessage=function(yn){var _n=ln(yn.data);_n.c===gn.BACKUP&&(Xt=!0),_n.backup=!0,rn(_n)}},dn=function(yn){var xn=1,vn=[],Tn=fn[yn.c],bn;if(null==Tn)return null;for(bn=0;bn<Tn.length;bn++)switch(Tn[bn][1]){case cn.text:var Sn=Tools.encodeUTF8(yn[Tn[bn][0]]);vn.push(Sn),xn+=1+Sn.length;break;case cn.array:case cn.arraysmall:break;case cn.uint8:xn+=1;break;case cn.uint16:xn+=2;break;case cn.uint32:case cn.float32:xn+=4;break;case cn.float64:xn+=8;break;case cn.boolean:xn+=1;}var En=new ArrayBuffer(xn),wn=new DataView(En),An=0,Cn=1;for(wn.setUint8(0,yn.c,!0),bn=0;bn<Tn.length;bn++)switch(Tn[bn][1]){case cn.text:var Pn=vn[An].length;wn.setUint8(Cn,Pn,!0),Cn+=1;for(var Mn=0;Mn<Pn;Mn++)wn.setUint8(Cn+Mn,vn[An][Mn],!0);vn[An],An++,Cn+=Pn;break;case cn.array:case cn.arraysmall:break;case cn.uint8:wn.setUint8(Cn,yn[Tn[bn][0]],!0),Cn+=1;break;case cn.uint16:wn.setUint16(Cn,yn[Tn[bn][0]],!0),Cn+=2;break;case cn.uint32:wn.setUint32(Cn,yn[Tn[bn][0]],!0),Cn+=4;break;case cn.float32:wn.setFloat32(Cn,yn[Tn[bn][0]],!0),Cn+=4;break;case cn.float64:wn.setFloat64(Cn,yn[Tn[bn][0]],!0),Cn+=8;break;case cn.boolean:wn.setUint8(Cn,!1===yn[Tn[bn][0]]?0:1),Cn+=1;}return En},ln=function(yn){var bn=new DataView(yn),xn={c:bn.getUint8(0,!0)},vn=1,Tn=mn[xn.c];if(null==Tn)return null;for(var Sn=0,En;Sn<Tn.length;Sn++)switch(En=Tn[Sn][0],Tn[Sn][1]){case cn.text:case cn.textbig:if(Tn[Sn][1]==cn.text){var wn=bn.getUint8(vn,!0);vn+=1}else wn=bn.getUint16(vn,!0),vn+=2;for(var An=new Uint8Array(wn),Cn=0;Cn<wn;Cn++)An[Cn]=bn.getUint8(vn+Cn,!0);var Pn=Tools.decodeUTF8(An);xn[En]=Pn,vn+=wn;break;case cn.array:case cn.arraysmall:if(Tn[Sn][1]==cn.arraysmall){var Mn=bn.getUint8(vn,!0);vn+=1}else Mn=bn.getUint16(vn,!0),vn+=2;xn[En]=[];for(var Rn=Tn[Sn][2],Dn=0;Dn<Mn;Dn++){for(var In={},On=0,Ln;On<Rn.length;On++)switch(Ln=Rn[On][0],Rn[On][1]){case cn.text:case cn.textbig:for(Rn[On][1]==cn.text?(wn=bn.getUint8(vn,!0),vn+=1):(wn=bn.getUint16(vn,!0),vn+=2),An=new Uint8Array(wn),Cn=0;Cn<wn;Cn++)An[Cn]=bn.getUint8(vn+Cn,!0);Pn=Tools.decodeUTF8(An),In[Ln]=Pn,vn+=wn;break;case cn.uint8:In[Ln]=bn.getUint8(vn,!0),vn+=1;break;case cn.uint16:In[Ln]=bn.getUint16(vn,!0),vn+=2;break;case cn.uint24:var kn=256*bn.getUint16(vn,!0);vn+=2,xn[Ln]=kn+bn.getUint8(vn,!0),vn+=1;break;case cn.uint32:In[Ln]=bn.getUint32(vn,!0),vn+=4;break;case cn.float32:In[Ln]=bn.getFloat32(vn,!0),vn+=4;break;case cn.float64:In[Ln]=bn.getFloat64(vn,!0),vn+=8;break;case cn.boolean:In[Ln]=0!=bn.getUint8(vn,!0),vn+=1;break;case cn.speed:In[Ln]=Tools.decodeSpeed(bn.getUint16(vn,!0)),vn+=2;break;case cn.accel:In[Ln]=Tools.decodeAccel(bn.getUint16(vn,!0)),vn+=2;break;case cn.coordx:In[Ln]=Tools.decodeCoordX(bn.getUint16(vn,!0)),vn+=2;break;case cn.coordy:In[Ln]=Tools.decodeCoordY(bn.getUint16(vn,!0)),vn+=2;break;case cn.coord24:kn=256*bn.getUint16(vn,!0),vn+=2,xn[Ln]=Tools.decodeCoord24(kn+bn.getUint8(vn,!0)),vn+=1;break;case cn.rotation:In[Ln]=Tools.decodeRotation(bn.getUint16(vn,!0)),vn+=2;break;case cn.regen:In[Ln]=Tools.decodeRegen(bn.getUint16(vn,!0)),vn+=2;break;case cn.healthnergy:In[Ln]=Tools.decodeHealthnergy(bn.getUint8(vn,!0)),vn+=1;}xn[En].push(In)}break;case cn.uint8:xn[En]=bn.getUint8(vn,!0),vn+=1;break;case cn.uint16:xn[En]=bn.getUint16(vn,!0),vn+=2;break;case cn.uint24:kn=256*bn.getUint16(vn,!0),vn+=2,xn[En]=kn+bn.getUint8(vn,!0),vn+=1;break;case cn.uint32:xn[En]=bn.getUint32(vn,!0),vn+=4;break;case cn.float32:xn[En]=bn.getFloat32(vn,!0),vn+=4;break;case cn.float64:xn[En]=bn.getFloat64(vn,!0),vn+=8;break;case cn.boolean:xn[En]=0!=bn.getUint8(vn,!0),vn+=1;break;case cn.speed:xn[En]=Tools.decodeSpeed(bn.getUint16(vn,!0)),vn+=2;break;case cn.accel:xn[En]=Tools.decodeAccel(bn.getUint16(vn,!0)),vn+=2;break;case cn.coordx:xn[En]=Tools.decodeCoordX(bn.getUint16(vn,!0)),vn+=2;break;case cn.coordy:xn[En]=Tools.decodeCoordY(bn.getUint16(vn,!0)),vn+=2;break;case cn.coord24:kn=256*bn.getUint16(vn,!0),vn+=2,xn[En]=Tools.decodeCoord24(kn+bn.getUint8(vn,!0)),vn+=1;break;case cn.rotation:xn[En]=Tools.decodeRotation(bn.getUint16(vn,!0)),vn+=2;break;case cn.regen:xn[En]=Tools.decodeRegen(bn.getUint16(vn,!0)),vn+=2;break;case cn.healthnergy:xn[En]=Tools.decodeHealthnergy(bn.getUint8(vn,!0)),vn+=1;break;default:return null;}return xn},un=function(yn,_n){_n?Gt.send(dn(yn)):Bt.send(dn(yn))},pn={UP:1,DOWN:2,LEFT:3,RIGHT:4,FIRE:5,SPECIAL:6},cn={text:1,textbig:2,array:3,arraysmall:4,uint8:5,uint16:6,uint24:7,uint32:8,float32:9,float64:10,boolean:11,speed:12,accel:13,coordx:14,coordy:15,coord24:16,rotation:17,healthnergy:18,regen:19},hn={LOGIN:0,BACKUP:1,HORIZON:2,ACK:5,PONG:6,KEY:10,COMMAND:11,SCOREDETAILED:12,CHAT:20,WHISPER:21,SAY:22,TEAMCHAT:23,VOTEMUTE:24,LOCALPING:255},fn={[hn.LOGIN]:[["protocol",cn.uint8],["name",cn.text],["session",cn.text],["horizonX",cn.uint16],["horizonY",cn.uint16],["flag",cn.text]],[hn.BACKUP]:[["token",cn.text]],[hn.HORIZON]:[["horizonX",cn.uint16],["horizonY",cn.uint16]],[hn.ACK]:[],[hn.PONG]:[["num",cn.uint32]],[hn.KEY]:[["seq",cn.uint32],["key",cn.uint8],["state",cn.boolean]],[hn.COMMAND]:[["com",cn.text],["data",cn.text]],[hn.SCOREDETAILED]:[],[hn.CHAT]:[["text",cn.text]],[hn.WHISPER]:[["id",cn.uint16],["text",cn.text]],[hn.SAY]:[["text",cn.text]],[hn.TEAMCHAT]:[["text",cn.text]],[hn.VOTEMUTE]:[["id",cn.uint16]],[hn.LOCALPING]:[["auth",cn.uint32]]},gn={LOGIN:0,BACKUP:1,PING:5,PING_RESULT:6,ACK:7,ERROR:8,COMMAND_REPLY:9,PLAYER_NEW:10,PLAYER_LEAVE:11,PLAYER_UPDATE:12,PLAYER_FIRE:13,PLAYER_HIT:14,PLAYER_RESPAWN:15,PLAYER_FLAG:16,PLAYER_KILL:17,PLAYER_UPGRADE:18,PLAYER_TYPE:19,PLAYER_POWERUP:20,PLAYER_LEVEL:21,PLAYER_RETEAM:22,GAME_FLAG:30,GAME_SPECTATE:31,GAME_PLAYERSALIVE:32,GAME_FIREWALL:33,EVENT_REPEL:40,EVENT_BOOST:41,EVENT_BOUNCE:42,EVENT_STEALTH:43,EVENT_LEAVEHORIZON:44,MOB_UPDATE:60,MOB_UPDATE_STATIONARY:61,MOB_DESPAWN:62,MOB_DESPAWN_COORDS:63,CHAT_PUBLIC:70,CHAT_TEAM:71,CHAT_SAY:72,CHAT_WHISPER:73,CHAT_VOTEMUTEPASSED:78,CHAT_VOTEMUTED:79,SCORE_UPDATE:80,SCORE_BOARD:81,SCORE_DETAILED:82,SCORE_DETAILED_CTF:83,SCORE_DETAILED_BTR:84,SERVER_MESSAGE:90,SERVER_CUSTOM:91},mn={[gn.LOGIN]:[["success",cn.boolean],["id",cn.uint16],["team",cn.uint16],["clock",cn.uint32],["token",cn.text],["type",cn.uint8],["room",cn.text],["players",cn.array,[["id",cn.uint16],["status",cn.uint8],["level",cn.uint8],["name",cn.text],["type",cn.uint8],["team",cn.uint16],["posX",cn.coordx],["posY",cn.coordy],["rot",cn.rotation],["flag",cn.uint16],["upgrades",cn.uint8]]]],[gn.BACKUP]:[],[gn.PING]:[["clock",cn.uint32],["num",cn.uint32]],[gn.PING_RESULT]:[["ping",cn.uint16],["playerstotal",cn.uint32],["playersgame",cn.uint32]],[gn.ACK]:[],[gn.ERROR]:[["error",cn.uint8]],[gn.COMMAND_REPLY]:[["type",cn.uint8],["text",cn.textbig]],[gn.PLAYER_NEW]:[["id",cn.uint16],["status",cn.uint8],["name",cn.text],["type",cn.uint8],["team",cn.uint16],["posX",cn.coordx],["posY",cn.coordy],["rot",cn.rotation],["flag",cn.uint16],["upgrades",cn.uint8]],[gn.PLAYER_LEAVE]:[["id",cn.uint16]],[gn.PLAYER_UPDATE]:[["clock",cn.uint32],["id",cn.uint16],["keystate",cn.uint8],["upgrades",cn.uint8],["posX",cn.coord24],["posY",cn.coord24],["rot",cn.rotation],["speedX",cn.speed],["speedY",cn.speed]],[gn.PLAYER_FIRE]:[["clock",cn.uint32],["id",cn.uint16],["energy",cn.healthnergy],["energyRegen",cn.regen],["projectiles",cn.arraysmall,[["id",cn.uint16],["type",cn.uint8],["posX",cn.coordx],["posY",cn.coordy],["speedX",cn.speed],["speedY",cn.speed],["accelX",cn.accel],["accelY",cn.accel],["maxSpeed",cn.speed]]]],[gn.PLAYER_SAY]:[["id",cn.uint16],["text",cn.text]],[gn.PLAYER_RESPAWN]:[["id",cn.uint16],["posX",cn.coord24],["posY",cn.coord24],["rot",cn.rotation],["upgrades",cn.uint8]],[gn.PLAYER_FLAG]:[["id",cn.uint16],["flag",cn.uint16]],[gn.PLAYER_HIT]:[["id",cn.uint16],["type",cn.uint8],["posX",cn.coordx],["posY",cn.coordy],["owner",cn.uint16],["players",cn.arraysmall,[["id",cn.uint16],["health",cn.healthnergy],["healthRegen",cn.regen]]]],[gn.PLAYER_KILL]:[["id",cn.uint16],["killer",cn.uint16],["posX",cn.coordx],["posY",cn.coordy]],[gn.PLAYER_UPGRADE]:[["upgrades",cn.uint16],["type",cn.uint8],["speed",cn.uint8],["defense",cn.uint8],["energy",cn.uint8],["missile",cn.uint8]],[gn.PLAYER_TYPE]:[["id",cn.uint16],["type",cn.uint8]],[gn.PLAYER_POWERUP]:[["type",cn.uint8],["duration",cn.uint32]],[gn.PLAYER_LEVEL]:[["id",cn.uint16],["type",cn.uint8],["level",cn.uint8]],[gn.PLAYER_RETEAM]:[["players",cn.array,[["id",cn.uint16],["team",cn.uint16]]]],[gn.GAME_FLAG]:[["type",cn.uint8],["flag",cn.uint8],["id",cn.uint16],["posX",cn.coord24],["posY",cn.coord24],["blueteam",cn.uint8],["redteam",cn.uint8]],[gn.GAME_SPECTATE]:[["id",cn.uint16]],[gn.GAME_PLAYERSALIVE]:[["players",cn.uint16]],[gn.GAME_FIREWALL]:[["type",cn.uint8],["status",cn.uint8],["posX",cn.coordx],["posY",cn.coordy],["radius",cn.float32],["speed",cn.float32]],[gn.EVENT_REPEL]:[["clock",cn.uint32],["id",cn.uint16],["posX",cn.coordx],["posY",cn.coordy],["rot",cn.rotation],["speedX",cn.speed],["speedY",cn.speed],["energy",cn.healthnergy],["energyRegen",cn.regen],["players",cn.arraysmall,[["id",cn.uint16],["keystate",cn.uint8],["posX",cn.coordx],["posY",cn.coordy],["rot",cn.rotation],["speedX",cn.speed],["speedY",cn.speed],["energy",cn.healthnergy],["energyRegen",cn.regen],["playerHealth",cn.healthnergy],["playerHealthRegen",cn.regen]]],["mobs",cn.arraysmall,[["id",cn.uint16],["type",cn.uint8],["posX",cn.coordx],["posY",cn.coordy],["speedX",cn.speed],["speedY",cn.speed],["accelX",cn.accel],["accelY",cn.accel],["maxSpeed",cn.speed]]]],[gn.EVENT_BOOST]:[["clock",cn.uint32],["id",cn.uint16],["boost",cn.boolean],["posX",cn.coord24],["posY",cn.coord24],["rot",cn.rotation],["speedX",cn.speed],["speedY",cn.speed],["energy",cn.healthnergy],["energyRegen",cn.regen]],[gn.EVENT_BOUNCE]:[["clock",cn.uint32],["id",cn.uint16],["keystate",cn.uint8],["posX",cn.coord24],["posY",cn.coord24],["rot",cn.rotation],["speedX",cn.speed],["speedY",cn.speed]],[gn.EVENT_STEALTH]:[["id",cn.uint16],["state",cn.boolean],["energy",cn.healthnergy],["energyRegen",cn.regen]],[gn.EVENT_LEAVEHORIZON]:[["type",cn.uint8],["id",cn.uint16]],[gn.MOB_UPDATE]:[["clock",cn.uint32],["id",cn.uint16],["type",cn.uint8],["posX",cn.coordx],["posY",cn.coordy],["speedX",cn.speed],["speedY",cn.speed],["accelX",cn.accel],["accelY",cn.accel],["maxSpeed",cn.speed]],[gn.MOB_UPDATE_STATIONARY]:[["id",cn.uint16],["type",cn.uint8],["posX",cn.float32],["posY",cn.float32]],[gn.MOB_DESPAWN]:[["id",cn.uint16],["type",cn.uint8]],[gn.MOB_DESPAWN_COORDS]:[["id",cn.uint16],["type",cn.uint8],["posX",cn.coordx],["posY",cn.coordy]],[gn.SCORE_UPDATE]:[["id",cn.uint16],["score",cn.uint32],["earnings",cn.uint32],["upgrades",cn.uint16],["totalkills",cn.uint32],["totaldeaths",cn.uint32]],[gn.SCORE_BOARD]:[["data",cn.array,[["id",cn.uint16],["score",cn.uint32],["level",cn.uint8]]],["rankings",cn.array,[["id",cn.uint16],["x",cn.uint8],["y",cn.uint8]]]],[gn.SCORE_DETAILED]:[["scores",cn.array,[["id",cn.uint16],["level",cn.uint8],["score",cn.uint32],["kills",cn.uint16],["deaths",cn.uint16],["damage",cn.float32],["ping",cn.uint16]]]],[gn.SCORE_DETAILED_CTF]:[["scores",cn.array,[["id",cn.uint16],["level",cn.uint8],["captures",cn.uint16],["score",cn.uint32],["kills",cn.uint16],["deaths",cn.uint16],["damage",cn.float32],["ping",cn.uint16]]]],[gn.SCORE_DETAILED_BTR]:[["scores",cn.array,[["id",cn.uint16],["level",cn.uint8],["alive",cn.boolean],["wins",cn.uint16],["score",cn.uint32],["kills",cn.uint16],["deaths",cn.uint16],["damage",cn.float32],["ping",cn.uint16]]]],[gn.CHAT_TEAM]:[["id",cn.uint16],["text",cn.text]],[gn.CHAT_PUBLIC]:[["id",cn.uint16],["text",cn.text]],[gn.CHAT_SAY]:[["id",cn.uint16],["text",cn.text]],[gn.CHAT_WHISPER]:[["from",cn.uint16],["to",cn.uint16],["text",cn.text]],[gn.CHAT_VOTEMUTEPASSED]:[["id",cn.uint16]],[gn.CHAT_VOTEMUTED]:[],[gn.SERVER_MESSAGE]:[["type",cn.uint8],["duration",cn.uint32],["text",cn.textbig]],[gn.SERVER_CUSTOM]:[["type",cn.uint8],["data",cn.textbig]]};Network.KEYPACKET=pn,Network.KEYLOOKUP={1:"UP",2:"DOWN",3:"LEFT",4:"RIGHT",5:"FIRE",6:"SPECIAL"},Network.CLIENTPACKET=hn,Network.SERVERPACKET=gn,Network.STATE={LOGIN:1,CONNECTING:2,PLAYING:3}}(),function(){var Bt={},Gt={},Xt={},Ht=null,Yt=0,Wt=2*Math.PI,jt=null,zt=!1,Vt={},qt=!1,Kt=null,Qt=0,Zt={LEFT:["LEFT","A"],RIGHT:["RIGHT","D"],UP:["UP","W"],DOWN:["DOWN","S"],STRAFELEFT:["Q"],STRAFERIGHT:["E"],FIRE:["SPACE"],SPECIAL:["CTRL","SHIFT"],SHOWSCORE:["TAB"],MAINMENU:["F1"],SHOWGAMES:["F2"],FULLSCREEN:["F"],MINIMIZECHAT:["PGDOWN"],MAXIMIZECHAT:["PGUP"],SAY:["GRAVE"],TEAM:["T"],REPLY:["R"],SPECTATE:["V"],UPGRADE1:["1"],UPGRADE2:["2"],UPGRADE3:["3"],UPGRADE4:["4"],SOUND:["G"],HELP:["H"],INVITE:["I"],MOUSEMODE:["M"]},Jt={},$t={LEFT:!0,RIGHT:!0,UP:!0,DOWN:!0,FIRE:!0,SPECIAL:!0,STRAFELEFT:!0,STRAFERIGHT:!0},en={},tn={MAINMENU:!0,FULLSCREEN:!0,INVITE:!0,SOUND:!0,SHOWSCORE:!0,SHOWGAMES:!0,HELP:!0},nn=[["Forward","UP"],["Backward","DOWN"],["Turn Left","LEFT"],["Turn Right","RIGHT"],["Fire","FIRE"],["Special","SPECIAL"],["Strafe Left","STRAFELEFT"],["Strafe Right","STRAFERIGHT"],[""],["Spectate","SPECTATE"],["Upgrade Speed","UPGRADE1"],["Upgrade Defense","UPGRADE2"],["Upgrade Energy","UPGRADE3"],["Upgrade Missiles","UPGRADE4"],["Scoreboard","SHOWSCORE"],["Main Menu","MAINMENU"],["Show Games","SHOWGAMES"],["Fullscreen","FULLSCREEN"],["Maximize Chat","MAXIMIZECHAT"],["Minimize Chat","MINIMIZECHAT"],[""],["In-game Say","SAY"],["Team Chat","TEAM"],["Reply","REPLY"],["Toggle Sound","SOUND"],["Help","HELP"],["Invite Friends","INVITE"],["Mouse Mode","MOUSEMODE"]],rn={},an={BACKSPACE:8,TAB:9,SHIFT:16,CTRL:17,ALT:18,PAUSE:19,CAPS:20,SPACE:32,PGUP:33,PGDOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,INSERT:45,DELETE:46,0:48,1:49,2:50,3:51,4:52,5:53,6:54,7:55,8:56,9:57,A:65,B:66,C:67,D:68,E:69,F:70,G:71,H:72,I:73,J:74,L:76,M:77,N:78,O:79,P:80,Q:81,R:82,S:83,T:84,U:85,V:86,W:87,X:88,Y:89,Z:90,WINDOWL:91,WINDOWR:92,SELECT:93,NUMPAD0:96,NUMPAD1:97,NUMPAD2:98,NUMPAD3:99,NUMPAD4:100,NUMPAD5:101,NUMPAD6:102,NUMPAD7:103,NUMPAD8:104,NUMPAD9:105,"*":106,"+":107,"-":109,DECIMAL:110,"/":111,F1:112,F2:113,F3:114,F4:115,F5:116,F6:117,F7:118,F8:119,F9:120,F10:121,F11:122,F12:123,NUMLOCK:144,SCROLL:145,":":186,"=":187,",":188,"-":189,".":190,"/":191,GRAVE:192,"[":219,"\\":220,"]":221,QUOTE:222},on=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"],sn=["UP","DOWN","LEFT","RIGHT","FIRE","SPECIAL"];Input.setup=function(){for(var bn in an)rn[an[bn]]=bn;Jt=JSON.parse(JSON.stringify(Zt)),cn(),fn(!0),$(window).on("keydown",dn),$(window).on("keyup",ln),$(window).on("gamepadconnected",function(xn){UI.showMessage("alert","<span class=\"info\">GAMEPAD CONNECTED</span>"+UI.escapeHTML(xn.originalEvent.gamepad.id),3e3),zt=!0,pn()}),$(window).on("gamepaddisconnected",function(xn){UI.showMessage("alert","<span class=\"info\">GAMEPAD DISCONNECTED</span>"+UI.escapeHTML(xn.originalEvent.gamepad.id),3e3),zt=!1,pn()})};var dn=function(bn){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var xn=bn.which;if(72!=xn&&UI.hideHelp(),null!=Kt&&hn(xn))bn.preventDefault();else{var vn=Input.getBind(xn);if(!un(xn))return null==$t[vn]?(Xt[xn]||(Xt[xn]=!0,UI.controlKey(xn,vn,!0)),bn.preventDefault(),!1):(Bt[vn]||(Bt[vn]=!0,yn(vn)),Gt[xn]||(Gt[xn]=!0),bn.preventDefault(),!1)}}},ln=function(bn){if(game.state==Network.STATE.PLAYING||game.state==Network.STATE.CONNECTING){var xn=bn.which,vn=Input.getBind(xn);if(null==$t[vn]&&Xt[xn]&&(Xt[xn]=!1),!un(xn))return Bt[vn]&&(Bt[vn]=!1,_n(vn)),Gt[xn]&&(Gt[xn]=!1),bn.preventDefault(),!1}},un=function(bn){return!!UI.chatBoxOpen()&&9!=bn&&27!=bn&&13!=bn&&38!=bn&&40!=bn&&37!=bn&&39!=bn&&112!=bn&&113!=bn&&114!=bn&&115!=bn&&116!=bn&&117!=bn&&118!=bn&&119!=bn&&120!=bn&&121!=bn&&122!=bn&&123!=bn},pn=function(){Vt={forward:!0,left:!1,right:!1,up:!1,down:!1,fire:!1,special:!1,angle:0,force:0}};Input.toggleKeybinds=function(){qt?Input.closeKeybinds():Input.openKeybinds()},Input.getBind=function(bn){var xn=en[bn];return null==xn?null:xn},Input.bindKey=function(bn,xn,vn){null==Kt&&(Kt=xn,Qt=vn,$(bn.target).html("press key"))},Input.closeBind=function(){null!=Kt&&(fn(),Kt=null)},Input.resetBinds=function(){Zt=JSON.parse(JSON.stringify(Jt)),Tools.removeSetting("keybinds"),Kt=null,fn()};var cn=function(){if(null!=config.settings.keybinds)for(var bn in config.settings.keybinds)Zt[bn]=JSON.parse(JSON.stringify(config.settings.keybinds[bn]))},hn=function(bn){var xn=rn[bn];if(27==bn&&(xn=""),null!=xn){for(var vn in Zt)Zt[vn][0]==xn&&(Zt[vn][0]=""),1<Zt[vn].length&&Zt[vn][1]==xn&&(Zt[vn][1]="");for(vn in Zt[Kt][Qt]=xn,Zt)1<Zt[vn].length&&""==Zt[vn][0]&&""!=Zt[vn][1]&&(Zt[vn]=[Zt[vn][1]]),2==Zt[vn].length&&""===Zt[vn][1]&&Zt[vn].splice(-1,1);return fn(),function(){var Tn={},Sn="";for(var En in Zt)null!=Jt[En]&&(Sn=JSON.stringify(Zt[En]))!==JSON.stringify(Jt[En])&&(Tn[En]=JSON.parse(Sn));0<Object.keys(Tn).length?Tools.setSettings({keybinds:Tn}):Tools.removeSetting("keybinds")}(),Kt=null,!0}return!1},fn=function(bn){var xn="",vn="",Tn="",Sn=null;xn+="<div class=\"left-binds\">";for(var En=0;En<nn.length;En++)null!=nn[En][0]&&(""==nn[En][0]?xn+="<div class=\"item empty\"></div>":(null==(Sn=Zt[nn[En][1]])?(vn="&nbsp;",Tn="&nbsp;"):(""==(vn=Sn[0])&&(vn="&nbsp;"),""==(Tn=1==Sn.length?"":Sn[1])&&(Tn="&nbsp;")),xn+="<div class=\"item\"><div class=\"name\">"+nn[En][0]+"</div><div class=\"bind"+("&nbsp;"==vn?" blank":"")+"\" onclick=\"Input.bindKey(event,'"+nn[En][1]+"',0)\">"+vn+"</div><div class=\"bind"+("&nbsp;"==Tn?" blank":"")+"\" onclick=\"Input.bindKey(event,'"+nn[En][1]+"',1)\">"+Tn+"</div></div>",13==En&&(xn+="</div><div class=\"right-binds\">")));xn+="</div>",null==bn&&$("#keybinds-list").html(xn),en={},En=0;var wn=0;for(var An in Zt){for(En=0;En<Zt[An].length;En++)null!=(wn=an[Zt[An][En]])&&(en[wn]=An);null!=tn[An]&&$("#keybind-"+An.toLowerCase()).html(""==Zt[An]?"&nbsp;":"("+Zt[An]+")")}};Input.openKeybinds=function(){config.mobile||qt||(UI.closeAllPanels("keybinds"),fn(),UI.showPanel("#keybinds"),qt=!0)},Input.closeKeybinds=function(){qt&&(UI.hidePanel("#keybinds",qt),qt=!1,Kt=null)},Input.update=function(){if(zt&&null!=navigator.getGamepads){var bn=navigator.getGamepads();if(null!=bn&&null!=bn.length&&0!=bn.length&&null!=bn[0]){var xn=bn[0];if(!(16>xn.buttons.length)){var vn=xn.buttons[12].pressed,Tn=xn.buttons[13].pressed,Sn=xn.buttons[15].pressed,En=xn.buttons[14].pressed,wn=xn.buttons[0].pressed||xn.buttons[2].pressed,An=xn.buttons[1].pressed||xn.buttons[3].pressed;Vt.up!=vn&&(gn("UP",vn),Vt.up=vn),Vt.down!=Tn&&(gn("DOWN",Tn),Vt.down=Tn),Vt.right!=Sn&&(gn("RIGHT",Sn),Vt.right=Sn),Vt.left!=En&&(gn("LEFT",En),Vt.left=En),Vt.fire!=wn&&(gn("FIRE",wn),Vt.fire=wn),Vt.special!=An&&(gn("SPECIAL",An),Vt.special=An);var Cn=new Vector(xn.axes[1],xn.axes[0]),Pn=Cn.length(),Mn=-Cn.angle()+Math.PI/2,Rn=Mn=(Mn%Wt+Wt)%Wt;.2<Pn?(Vt.forward=!0,mn(Rn,Pn)):(Vt.forward&&!vn&&gn("UP",!1),Vt.forward=!1)}}else zt=!1}},Input.unpressKey=function(bn){delete Xt[bn]},Input.keyState=function(bn){return Bt[bn]},Input.clearKeys=function(bn){if(game.state===Network.STATE.PLAYING){for(var xn of on)if(Bt[xn]){if(bn&&(Gt[38]||Gt[40]||Gt[37]||Gt[39]))continue;Bt[xn]=!1,_n(xn)}for(var vn in Gt)bn&&(38==vn||40==vn||37==vn||39==vn)||(Gt[vn]=!1)}},Input.touchCloseAll=function(){game.state==Network.STATE.LOGIN?(Games.closeDropdowns(),UI.closeLogin()):game.state==Network.STATE.PLAYING&&(UI.closeAllPanels(),UI.closeTooltip())},Input.addTouchRejection=function(bn){$(bn).on("touchstart",function(xn){xn.stopPropagation()}),$(bn).on("touchmove",function(xn){xn.preventDefault(),xn.stopPropagation()})},Input.setupLogin=function(){$(window).on("touchstart",function(bn){Input.touchCloseAll(),bn.preventDefault()}),Input.addTouchRejection("#logon,#big-message,#loginselector")},Input.setupTouch=function(){$(window).on("touchcancel",function(xn){null!=jt&&jt.processOnEnd(xn)}),Input.addTouchRejection("#settings,#sidebar,#roomnamecontainer,#menu,#gameselector,#mainmenu,#scoredetailed,#invitefriends,#msg-alert,#msg-information"),$("body").append("<div id=\"touch-joystick\"></div><div id=\"touch-fire\"><div class=\"circle\"></div></div><div id=\"touch-special\"><div class=\"circle\"></div></div>"),$("#touch-fire").on("touchstart",function(xn){gn("FIRE",!0),$("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),xn.preventDefault()}),$("#touch-fire").on("touchend",function(xn){gn("FIRE",!1),$("#touch-fire > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),xn.preventDefault()}),$("#touch-special").on("touchstart",function(xn){gn("SPECIAL",!0),$("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.5)"}),xn.preventDefault()}),$("#touch-special").on("touchend",function(xn){gn("SPECIAL",!1),$("#touch-special > .circle").css({"background-color":"rgba(255, 255, 255, 0.2)"}),xn.preventDefault()});var bn={zone:$("#touch-joystick")[0],mode:"static",position:{bottom:"50%",left:"50%"}};(jt=nipplejs.create(bn)).on("end",Input.touchEnd),jt.on("move",Input.touchMove)},Input.toggleMouse=function(bn){if(!config.mobile)if($(window).off("mousedown"),$(window).off("mouseup"),config.mouse=!config.mouse,config.mouse){if($(window).on("mousedown",Input.mouseDown),$(window).on("mouseup",Input.mouseUp),bn)return;UI.showMessage("alert","<span class=\"info\">MOUSE MODE</span>Enabled<div class=\"mousemode\"><span class=\"info\">LEFT CLICK</span>Fire&nbsp;&nbsp;&nbsp;<span class=\"info\">RIGHT CLICK</span>Special&nbsp;&nbsp;&nbsp;<span class=\"info\">WASD</span>Move</div>",7e3),Tools.setSettings({mousemode:!0})}else UI.showMessage("alert","<span class=\"info\">MOUSE MODE</span>Disabled",3e3),Tools.removeSetting("mousemode")},Input.mouseDown=function(bn){var xn=bn.originalEvent;if((0==xn.button||2==xn.button)&&null!=xn.target.tagName&&"canvas"==xn.target.tagName.toLowerCase()){var vn=0==xn.button?"FIRE":"SPECIAL";gn(vn,!0),bn.preventDefault()}},Input.mouseUp=function(bn){var xn=bn.originalEvent;if(0==xn.button||2==xn.button)if(null!=xn.target.tagName&&"canvas"==xn.target.tagName.toLowerCase()){var vn=0==xn.button?"FIRE":"SPECIAL";gn(vn,!1),bn.preventDefault()}else gn("FIRE",!1),gn("SPECIAL",!1)};var gn=function(bn,xn){(Bt[bn]==!xn||xn&&null==Bt[bn])&&(Network.sendKey(bn,xn),Bt[bn]=xn)},mn=function(bn,xn){var vn=Players.getMe();if(null!=vn){var Tn=bn-vn.rot;Tn>Math.PI&&(Tn-=2*Math.PI),Tn<-Math.PI&&(Tn+=2*Math.PI);var Sn=Math.round(1e3*(Math.abs(Tn)/(60*config.ships[vn.type].turnFactor)));if(!(10>(Sn-=Math.round(game.ping))||100>game.time-Yt)){null!=Ht&&clearTimeout(Ht),Yt=game.time;var En=0<Tn?"RIGHT":"LEFT",wn=0>=Tn?"RIGHT":"LEFT";gn("UP",!(null!=xn&&.5>xn)),gn(En,!0),gn(wn,!1),Ht=setTimeout(function(){gn(En,!1)},Sn)}}};Input.touchMove=function(bn,xn){console.log(xn.angle.degree);var vn=-xn.angle.radian+Math.PI/2,Tn=vn=(vn%Wt+Wt)%Wt;mn(Tn,xn.force)},Input.touchEnd=function(){gn("UP",!1),gn("LEFT",!1),gn("RIGHT",!1)},Input.gameFocus=function(){game.focus=!0},Input.gameBlur=function(){game.focus=!1,Input.clearKeys()};var yn=function(bn){return 3==game.myType&&("STRAFELEFT"===bn||"STRAFERIGHT"===bn)?(yn("SPECIAL"),void yn("STRAFELEFT"===bn?"LEFT":"RIGHT")):void(-1!==sn.indexOf(bn)&&Network.sendKey(bn,!0))},_n=function(bn){3!=game.myType||"STRAFELEFT"!==bn&&"STRAFERIGHT"!==bn?-1!==on.indexOf(bn)&&Network.sendKey(bn,!1):(_n("STRAFELEFT"===bn?"LEFT":"RIGHT"),Bt["STRAFERIGHT"===bn?"STRAFELEFT":"STRAFERIGHT"]||_n("SPECIAL"))}}();class Player{constructor(Bt,Gt){this.id=Bt.id,this.status=Bt.status,this.level=null==Bt.level||0==Bt.level?null:Bt.level,this.reel=1==Bt.reel,this.name=Bt.name.replace(nonprintRegex,"[WS]"),this.type=Bt.type,this.team=Bt.team,this.pos=new Vector(Bt.posX,Bt.posY),this.lowResPos=new Vector(Bt.posX,Bt.posY),this.speed=Vector.zero(),this.speedupgrade=0,this.rot=Bt.rot,this.flag=Bt.flag,this.speedLength=0,this.sprites={},this.randomness=Tools.rand(0,1e5),this.keystate={},this.lastTick=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.stealthed=!1,this.alpha=1,this.scale=1,this.scorePlace=0,this.powerups={shield:!1,rampage:!1},this.powerupsShown={shield:!1,rampage:!1},this.powerupActive=!1,this.render=!0,this.hidden=!1,this.culled=!1,this.timedout=!1,this.reducedFactor=!1,this.lastPacket=game.timeNetwork,this.state={thrustLevel:0,thrustDir:0,bubble:!1,bubbleProgress:0,bubbleFade:0,bubbleTime:0,bubbleTextWidth:0,hasBadge:!1,badge:0,stealthLevel:0,scaleLevel:1,powerupAngle:0,powerupFade:0,powerupFadeState:0,lastBounceSound:0},this.setupGraphics(),0==this.status?(Tools.decodeUpgrades(this,Bt.upgrades),this.updatePowerups()):(this.hidden=!0,this.me()&&UI.visibilityHUD(!1)),this.reel?(this._prevPos=null,this._offset=null):this.visibilityUpdate(),(!Gt&&this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.me()&&(game.myType=Bt.type,UI.aircraftSelected(Bt.type))}setGraphicsSet(){var Bt=0;2==game.gameType?Bt=this.team-1:this.id==game.myID&&-1!=game.chosenGraphicsSet?(Bt=game.chosenGraphicsSet,game.myGraphicsSet=Bt):Bt=Tools.randInt(0,1),this.graphicsSet=Bt,this.id==game.myID&&(game.myGraphicsSet=Bt)}setupThrusterColor(){var Bt=new PIXI.filters.ColorMatrixFilter,Gt=new PIXI.filters.ColorMatrixFilter;0==this.graphicsSet?Bt.hue(-20):(Gt.saturate(1,!0),Bt.hue(165)),this.sprites.thruster&&(this.sprites.thruster.filters=[Gt,Bt]),this.sprites.thruster1&&(this.sprites.thruster1.filters=[Gt,Bt]),this.sprites.thruster2&&(this.sprites.thruster2.filters=[Gt,Bt])}setupGraphics(Bt){this.setGraphicsSet();var Gt=0==this.graphicsSet?"":"_2",Xt=null;switch(this.me()&&(Xt={layer:"aircraftme"}),this.sprites.powerup=Textures.init("powerupShield",{visible:!1,alpha:.75}),this.sprites.powerupCircle=Textures.init("powerupCircle",{visible:!1,alpha:.75}),this.type){case 1:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipRaptor"+Gt,Xt),this.sprites.shadow=Textures.init("shipRaptorShadow"+Gt,{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster=Textures.init("shipRaptorThruster"+Gt),this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall"),this.sprites.thrusterShadow=Textures.init("thrusterShadow");break;case 2:this.state.baseScale=.35,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipSpirit"+Gt,Xt),this.sprites.shadow=Textures.init("shipSpiritShadow"+Gt,{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"+Gt),this.sprites.thruster2=Textures.init("shipRaptorThruster"+Gt),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case 3:this.state.baseScale=.25,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipComanche"+Gt,Xt),this.sprites.rotor=Textures.init("shipComancheRotor"+Gt,Xt),this.sprites.shadow=Textures.init("shipComancheShadow"+Gt,{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.rotorShadow=Textures.init("shipComancheRotorShadow"+Gt,{scale:2*this.state.baseScale*(2.4/config.shadowScaling)});break;case 4:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipTornado"+Gt,Xt),this.sprites.shadow=Textures.init("shipTornadoShadow"+Gt,{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"+Gt),this.sprites.thruster2=Textures.init("shipRaptorThruster"+Gt),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");break;case 5:this.state.baseScale=.28,this.state.nameplateDist=60,this.sprites.sprite=Textures.init("shipProwler"+Gt,Xt),this.sprites.shadow=Textures.init("shipProwlerShadow"+Gt,{scale:this.state.baseScale*(2.4/config.shadowScaling)}),this.sprites.thruster1=Textures.init("shipRaptorThruster"+Gt),this.sprites.thruster2=Textures.init("shipRaptorThruster"+Gt),this.sprites.thruster1Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster2Glow=Textures.init("thrusterGlowSmall"),this.sprites.thruster1Shadow=Textures.init("thrusterShadow"),this.sprites.thruster2Shadow=Textures.init("thrusterShadow");}if("function"==typeof window.Glow&&Glow(this),this.setupThrusterColor(),(this.reel||Bt||(this.setupNameplate(),this.setupChatBubbles(),null!=this.level&&this.setupLevelPlate()),config.debug.collisions)){this.col=new PIXI.Graphics;for(var Ht of config.ships[this.type].collisions)this.col.beginFill(16777215,.2),this.col.drawCircle(Ht[0],Ht[1],Ht[2]),this.col.endFill();game.graphics.layers.explosions.addChild(this.col)}}reteam(Bt){var Gt=this.team;this.team=Bt,this.sprites.name.style=new PIXI.TextStyle(this.nameplateTextStyle()),UI.changeMinimapTeam(this.id,this.team),Gt!=this.team&&(this.destroy(!1),this.setupGraphics(!0),this.visibilityUpdate(!0))}nameplateTextStyle(){if(2==game.gameType)var Bt=1==this.team?"#4076E2":"#EA4242";else Bt=this.team==game.myTeam?"#FFFFFF":"#FFEC52";return{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:config.playerNameSize||"28px",fill:Bt,dropShadow:!0,dropShadowBlur:10,dropShadowDistance:0,padding:4}}setupNameplate(){var Bt="";2==game.gameType&&(Bt="  \u25A0"),this.sprites.name=new PIXI.Text(this.name+Bt,this.nameplateTextStyle()),this.sprites.name.scale.set(.5,.5),this.sprites.flag=Textures.sprite("flag_"+this.flag),this.sprites.flag.scale.set(.4,.4),this.sprites.flag.anchor.set(.5,.5),this.sprites.badge=Textures.sprite("badge_gold"),this.sprites.badge.scale.set(.3),this.sprites.badge.visible=!1,game.graphics.layers.playernames.addChild(this.sprites.badge),game.graphics.layers.playernames.addChild(this.sprites.flag),game.graphics.layers.playernames.addChild(this.sprites.name)}setupChatBubbles(){this.sprites.bubble=new PIXI.Container,this.sprites.bubbleLeft=Graphics.initSprite("chatbubbleleft",this.sprites.bubble,{scale:.5}),this.sprites.bubbleRight=Graphics.initSprite("chatbubbleright",this.sprites.bubble,{scale:.5}),this.sprites.bubbleCenter=Graphics.initSprite("chatbubblecenter",this.sprites.bubble,{scale:.5}),this.sprites.bubblePoint=Graphics.initSprite("chatbubblepoint",this.sprites.bubble,{scale:.5}),this.sprites.emote=Graphics.initSprite("emote_tf",this.sprites.bubble,{scale:.6,anchor:[0.5,0.5]}),this.sprites.bubbleText=new PIXI.Text("a",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:"12px",fill:"white"}),this.sprites.bubble.addChild(this.sprites.bubbleText),this.sprites.bubble.visible=!1,this.sprites.bubble.pivot.set(.5,34),game.graphics.layers.bubbles.addChild(this.sprites.bubble)}visibilityUpdate(Bt){this.culled=!Graphics.inScreen(this.pos,128);var Gt=!(this.hidden||this.culled||this.timedout);if(Bt||this.render!=Gt){switch(this.sprites.sprite.visible=Gt,this.sprites.shadow.visible=Gt,this.sprites.flag.visible=Gt,this.sprites.name.visible=Gt,null!=this.sprites.level&&(this.sprites.level.visible=Gt,this.sprites.levelBorder.visible=Gt),this.sprites.badge.visible=this.state.hasBadge&&Gt,this.sprites.powerup.visible=this.powerupActive&&Gt,this.sprites.powerupCircle.visible=this.powerupActive&&Gt,this.type){case 1:this.sprites.thruster.visible=Gt,this.sprites.thrusterGlow.visible=Gt,this.sprites.thrusterShadow.visible=Gt;break;case 2:case 4:case 5:this.sprites.thruster1.visible=Gt,this.sprites.thruster1Glow.visible=Gt,this.sprites.thruster1Shadow.visible=Gt,this.sprites.thruster2.visible=Gt,this.sprites.thruster2Glow.visible=Gt,this.sprites.thruster2Shadow.visible=Gt;break;case 3:this.sprites.rotor.visible=Gt,this.sprites.rotorShadow.visible=Gt;}this.render=Gt,Gt||Sound.clearThruster(this.id)}}stealth(Bt){this.lastPacket=game.timeNetwork,this.energy=Bt.energy,this.energyRegen=Bt.energyRegen,Bt.state?(this.stealthed=!0,this.state.stealthLevel=0,this.team!=game.myTeam&&(this.keystate.LEFT&&delete this.keystate.LEFT,this.keystate.RIGHT&&delete this.keystate.RIGHT)):this.unstealth()}unstealth(){this.stealthed=!1,this.state.stealthLevel=0,this.opacity(1)}opacity(Bt){this.alpha=Bt,this.sprites.sprite.alpha=Bt,this.sprites.shadow.alpha=Bt,this.sprites.flag.alpha=Bt,this.sprites.name.alpha=Bt,this.sprites.badge.alpha=Bt,this.sprites.powerup.alpha=.75*Bt,this.sprites.powerupCircle.alpha=.75*Bt,null!=this.sprites.level&&(this.sprites.level.alpha=Bt,this.sprites.levelBorder.alpha=.4*Bt),5==this.type&&(this.sprites.thruster1.alpha=Bt,this.sprites.thruster1Glow.alpha=Bt,this.sprites.thruster2.alpha=Bt,this.sprites.thruster2Glow.alpha=Bt)}kill(Bt){if(this.status=1,this.keystate={},this.pos.x=Bt.posX,this.pos.y=Bt.posY,this.speed=Vector.zero(),this.me()&&UI.resetPowerups(),this.resetPowerups(),this.hidden=!0,this.visibilityUpdate(),this.stealthed&&this.unstealth(),!this.culled&&!0!==Bt.spectate){switch(this.type){case 1:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3));break;case 2:Particles.explosion(this.pos.clone(),Tools.rand(2,2.5),Tools.randInt(4,7));break;case 3:case 4:case 5:Particles.explosion(this.pos.clone(),Tools.rand(1.5,2),Tools.randInt(2,3));}Graphics.shakeCamera(this.pos,this.me()?20:10),Sound.clearThruster(this.id),Sound.playerKill(this)}}me(){return game.myID==this.id}destroy(Bt){var Gt=this.me()?game.graphics.layers.aircraftme:game.graphics.layers.aircraft;switch(Gt.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.powerup.destroy(),this.sprites.powerupCircle.destroy(),this.type){case 1:game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.thrusters.removeChild(this.sprites.thrusterGlow),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.thrusterShadow.destroy();break;case 2:case 4:case 5:game.graphics.layers.thrusters.removeChild(this.sprites.thruster1,this.sprites.thruster2),game.graphics.layers.thrusters.removeChild(this.sprites.thruster1Glow,this.sprites.thruster2Glow),this.sprites.thruster1.destroy(),this.sprites.thruster2.destroy(),this.sprites.thruster1Glow.destroy(),this.sprites.thruster2Glow.destroy(),this.sprites.thruster1Shadow.destroy(),this.sprites.thruster2Shadow.destroy();break;case 3:Gt.removeChild(this.sprites.rotor),this.sprites.rotor.destroy(),game.graphics.layers.shadows.removeChild(this.sprites.rotorShadow),this.sprites.rotorShadow.destroy();}Bt&&!this.reel&&(game.graphics.layers.playernames.removeChild(this.sprites.badge,this.sprites.name,this.sprites.flag),null!=this.sprites.level&&(game.graphics.layers.playernames.removeChild(this.sprites.level,this.sprites.levelBorder),this.sprites.level.destroy(),this.sprites.levelBorder.destroy()),game.graphics.layers.bubbles.removeChild(this.sprites.bubble),this.sprites.badge.destroy(),this.sprites.name.destroy(),this.sprites.flag.destroy(),this.sprites.bubble.destroy({children:!0}))}sayBubble(Bt){this.state.bubbleTime=game.time,this.state.bubbleFade=0,this.state.bubble||(this.state.bubble=!0,this.state.bubbleProgress=0,this.sprites.bubble.visible=!0,this.sprites.bubble.alpha=0,this.sprites.bubble.scale.set(0,0)),this.sprites.bubble.cacheAsBitmap=!1;var Gt=UI.isEmote(Bt.text,!0);if(Gt){this.sprites.bubbleText.visible=!1,this.sprites.emote.texture=Textures.get("emote_"+Gt),this.sprites.emote.visible=!0;var Xt=26;this.sprites.emote.position.set(0,0)}else this.sprites.bubbleText.visible=!0,this.sprites.emote.visible=!1,this.sprites.bubbleText.text=Bt.text,Xt=this.sprites.bubbleText.width,this.sprites.bubbleText.position.set(-Xt/2,-7);this.sprites.bubbleLeft.position.set(-Xt/2-16,-21),this.sprites.bubbleRight.position.set(Xt/2+8,-21),this.sprites.bubbleCenter.position.set(-Xt/2-9,-21),this.sprites.bubbleCenter.scale.set(Xt/82+18/82,.5),this.sprites.bubblePoint.position.set(-9,18),this.sprites.bubble.cacheAsBitmap=!0,this.state.bubbleTextWidth=Xt}networkKey(Bt,Gt){this.lastPacket=game.timeNetwork,1==this.status&&this.revive(),null!=Gt.posX&&(this.reducedFactor=Tools.reducedFactor(),this.pos.x=Gt.posX,this.pos.y=Gt.posY,this.rot=Gt.rot,this.speed.x=Gt.speedX,this.speed.y=Gt.speedY);var Xt=this.stealthed;null!=Gt.keystate&&Tools.decodeKeystate(this,Gt.keystate),null!=Gt.upgrades&&(Tools.decodeUpgrades(this,Gt.upgrades),this.updatePowerups()),null!=Gt.energy&&(this.energy=Gt.energy,this.energyRegen=Gt.energyRegen),null!=Gt.boost&&(this.boost=Gt.boost),this.team!=game.myTeam&&(this.stealthed||Xt&&!this.stealthed)&&this.unstealth(),this.me()||!Xt||this.stealthed||this.unstealth(),Gt.c==Network.SERVERPACKET.EVENT_BOUNCE&&300<game.time-this.state.lastBounceSound&&(this.state.lastBounceSound=game.time,Sound.playerImpact(this.pos,this.type,this.speed.length()/config.ships[this.type].maxSpeed))}updateLevel(Bt){this.me()&&(1==Bt.type&&Games.showLevelUP(Bt.level),UI.updateMyLevel(Bt.level)),this.level=Bt.level,this.setupLevelPlate()}setupLevelPlate(){null==this.sprites.level?(this.sprites.level=new PIXI.Text(this.level+"",{fontFamily:"MontserratWeb, Helvetica, sans-serif",fontSize:"28px",fill:"rgb(200, 200, 200)",dropShadow:!0,dropShadowBlur:6,dropShadowDistance:0,padding:4}),this.sprites.level.scale.set(.5,.5),this.sprites.levelBorder=Textures.sprite("levelborder"),this.sprites.levelBorder.alpha=.4,game.graphics.layers.playernames.addChild(this.sprites.levelBorder),game.graphics.layers.playernames.addChild(this.sprites.level)):this.sprites.level.text=this.level+"",this.sprites.levelBorder.scale.set((this.sprites.level.width+10)/32,.65),this.sprites.level.visible=this.render,this.sprites.levelBorder.visible=this.render}powerup(Bt){UI.addPowerup(Bt.type,Bt.duration)}resetPowerups(){this.powerupActive&&(this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1),this.powerups.shield=!1,this.powerupsShown.shield=!1,this.powerups.rampage=!1,this.powerupsShown.rampage=!1,this.powerupActive=!1,this.state.powerupFade=0,this.state.powerupFadeState=0}updatePowerups(){var Bt=!1;this.powerups.shield!=this.powerupsShown.shield&&(this.powerupsShown.shield=this.powerups.shield,this.powerups.shield&&(this.sprites.powerup.texture=Textures.get("powerup_shield"),this.sprites.powerupCircle.tint=16777215),Bt=!0),this.powerups.rampage!=this.powerupsShown.rampage&&(this.powerupsShown.rampage=this.powerups.rampage,this.powerups.rampage&&(this.sprites.powerup.texture=Textures.get("powerup_rampage"),this.sprites.powerupCircle.tint=16712448),Bt=!0),Bt&&(this.powerupActive=this.powerups.shield||this.powerups.rampage,this.powerupActive?(this.state.powerupFade=0,this.state.powerupFadeState=0,this.sprites.powerup.visible=!0,this.sprites.powerupCircle.visible=!0):(this.powerupActive=!0,this.state.powerupFade=0,this.state.powerupFadeState=1))}impact(Bt,Gt,Xt,Ht){this.health=Xt,this.healthRegen=Ht,this.stealthed&&this.unstealth(),200!=Bt&&Mobs.explosion(Gt,Bt),this.me()&&0==this.status&&Graphics.shakeCamera(Gt,8)}changeType(Bt){this.type!=Bt.type&&(this.destroy(!1),this.type=Bt.type,this.setupGraphics(!0),this.visibilityUpdate(!0))}respawn(Bt){this.lastPacket=game.timeNetwork,this.status=0,this.keystate={},this.pos.x=Bt.posX,this.pos.y=Bt.posY,this.rot=Bt.rot,this.speed.x=0,this.speed.y=0,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.state.thrustLevel=0,this.state.thrustDir=0,this.hidden=!1,this.timedout=!1,this.visibilityUpdate(),this.me()&&UI.resetPowerups(),Tools.decodeUpgrades(this,Bt.upgrades),this.updatePowerups(),(this.render||this.me())&&(this.scale=0,this.state.scaleLevel=0),this.stealthed&&this.unstealth(),this.me()&&(game.myType=this.type,game.spectatingID=null,UI.aircraftSelected(this.type),UI.visibilityHUD(!0),UI.hideSpectator()),this.updateGraphics(1),Sound.playerRespawn(this),this.id==game.myID&&(SWAM.CruiseMode.off(),SWAM.hyperSpace.show())}revive(){this.status=0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.hidden=!1,this.health=1,this.energy=1,this.healthRegen=1,this.energyRegen=1,this.stealthed&&this.unstealth()}changeFlag(Bt){this.flag=Bt.flag,this.sprites.flag.texture=Textures.get("flag_"+Bt.flag)}changeBadge(Bt){this.sprites.badge.texture=Textures.get(Bt)}updateNameplate(){if(!this.reel){var Bt=(this.sprites.name.width+this.sprites.flag.width+10)/2,Gt=this.pos.x-Bt+(this.state.hasBadge?12:0)-(null==this.level?0:this.sprites.level.width/2+8),Xt=this.pos.y+this.state.nameplateDist*this.scale;this.sprites.name.position.set(Gt+40,Xt),this.sprites.flag.position.set(Gt+15,Xt+10),null!=this.level&&(this.sprites.level.position.set(Gt+2*Bt+13,Xt+2),this.sprites.levelBorder.position.set(Gt+2*Bt+7.75,Xt-.5)),this.state.hasBadge&&this.sprites.badge.position.set(Gt-28,Xt)}}updateBubble(){this.state.bubbleProgress+=.015*game.timeFactor,1<=this.state.bubbleProgress&&(this.state.bubbleProgress=1),4e3<game.time-this.state.bubbleTime?(this.state.bubbleFade+=.08*game.timeFactor,1<=this.state.bubbleFade&&(this.state.bubbleFade=1),this.sprites.bubble.scale.set(1+.2*this.state.bubbleFade),this.sprites.bubble.alpha=1*(1-this.state.bubbleFade),1<=this.state.bubbleFade&&(this.state.bubble=!1,this.sprites.bubble.visible=!1)):(this.sprites.bubble.scale.set(Tools.easing.outElastic(this.state.bubbleProgress,.5)),this.sprites.bubble.alpha=1);var Bt=0==(this.state.bubbleTextWidth+game.screenX)%2?.5:0,Gt=0==game.screenY%2?0:.5,Xt=this.state.nameplateDist*this.scale;this.powerupActive&&(Xt+=60),this.sprites.bubble.position.set(this.pos.x*game.scale+Bt,(this.pos.y-Xt)*game.scale+Gt)}detectTimeout(){if(!this.me()){var Bt=this.timedout;this.timedout=!game.lagging&&3e3<game.timeNetwork-this.lastPacket,this.timedout&&!Bt&&(this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=Vector.zero(),this.keystate={},this.resetPowerups())}}leaveHorizon(){this.me()||this.timedout||(this.lastPacket=-1e4,this.timedout=!0,this.boost=!1,this.strafe=!1,this.flagspeed=!1,this.speed=Vector.zero(),this.keystate={},this.resetPowerups())}update(Bt){if(this.reel)this.clientCalcs(Bt);else{if(this.detectTimeout(),this.visibilityUpdate(),!this.render)return this.health+=Bt*this.healthRegen,void(1<=this.health&&(this.health=1));if(!(!1!==this.reducedFactor&&(Bt-=this.reducedFactor,this.reducedFactor=!1,0>=Bt))){var Wt=.51<Bt?Math.round(Bt):1,jt=Bt/Wt,zt=2*Math.PI,Vt=this.boost?1.5:1,Gt,Xt,Ht,Yt;for(Gt=0;Gt<Wt;Gt++){this.energy+=jt*this.energyRegen,1<=this.energy&&(this.energy=1),this.health+=jt*this.healthRegen,1<=this.health&&(this.health=1),Yt=-999,this.strafe?(this.keystate.LEFT&&(Yt=this.rot-.5*Math.PI),this.keystate.RIGHT&&(Yt=this.rot+.5*Math.PI)):(this.keystate.LEFT&&(this.rot+=-jt*config.ships[this.type].turnFactor),this.keystate.RIGHT&&(this.rot+=jt*config.ships[this.type].turnFactor)),Xt=this.speed.x,Ht=this.speed.y,this.keystate.UP?-999==Yt?Yt=this.rot:Yt+=Math.PI*(this.keystate.RIGHT?-.25:.25):this.keystate.DOWN&&(-999==Yt?Yt=this.rot+Math.PI:Yt+=Math.PI*(this.keystate.RIGHT?.25:-.25)),-999!==Yt&&(this.speed.x+=Math.sin(Yt)*config.ships[this.type].accelFactor*jt*Vt,this.speed.y-=Math.cos(Yt)*config.ships[this.type].accelFactor*jt*Vt);var qt=this.speed.length(),Kt=config.ships[this.type].maxSpeed*Vt*config.upgrades.speed.factor[this.speedupgrade],Qt=config.ships[this.type].minSpeed;this.powerups.rampage&&(Kt*=.75),this.flagspeed&&(Kt=5),qt>Kt?this.speed.multiply(Kt/qt):this.speed.x>Qt||this.speed.x<-Qt||this.speed.y>Qt||this.speed.y<-Qt?(this.speed.x*=1-config.ships[this.type].brakeFactor*jt,this.speed.y*=1-config.ships[this.type].brakeFactor*jt):(this.speed.x=0,this.speed.y=0),this.pos.x+=jt*Xt+.5*(this.speed.x-Xt)*jt*jt,this.pos.y+=jt*Ht+.5*(this.speed.y-Ht)*jt*jt,this.clientCalcs(jt)}this.rot=(this.rot%zt+zt)%zt,-1==game.gameType?(-16384>this.pos.x&&(this.pos.x+=32768),16384<this.pos.x&&(this.pos.x-=32768),-8192>this.pos.y&&(this.pos.y+=16384),8192<this.pos.y&&(this.pos.y-=16384)):(-16352>this.pos.x&&(this.pos.x=-16352),16352<this.pos.x&&(this.pos.x=16352),-8160>this.pos.y&&(this.pos.y=-8160),8160<this.pos.y&&(this.pos.y=8160)),Sound.updateThruster(0,this)}}}clientCalcs(Bt){switch(this.type){case 1:case 2:case 4:case 5:var Gt=!1,Xt=!1,Ht=this.boost?1.5:1;!1!==(Gt=this.keystate.LEFT?.3:this.keystate.RIGHT?-.3:0)&&(this.state.thrustDir=Tools.converge(this.state.thrustDir,Gt,.1*Bt)),!1!==(Xt=this.keystate.UP?1:this.keystate.DOWN?-1:0)&&(this.state.thrustLevel=Tools.converge(this.state.thrustLevel,Xt*Ht,.2*Bt));break;case 3:this.state.thrustDir+=(.2+this.speed.length()/50)*Bt;}this.culled||this.render&&(!this.stealthed&&.4>this.health&&Particles.planeDamage(this),!this.stealthed&&.2>this.health&&Particles.planeDamage(this),this.boost&&Particles.planeBoost(this,0<=Xt),5==this.type&&this.stealthed&&(this.state.stealthLevel+=.03*Bt,this.state.stealthLevel=Tools.clamp(this.state.stealthLevel,0,this.team==game.myTeam?.5:1),this.opacity(1-this.state.stealthLevel)),this.state.scaleLevel+=.005*Bt,1<=this.state.scaleLevel?(this.state.scaleLevel=1,this.scale=1):this.scale=Tools.easing.outElastic(this.state.scaleLevel,.5),this.powerupActive&&(this.state.powerupAngle+=.075*Bt,0==this.state.powerupFadeState?(this.state.powerupFade+=.05*Bt,1<=this.state.powerupFade&&(this.state.powerupFade=1)):(this.state.powerupFade+=.05*Bt,1<=this.state.powerupFade&&(this.powerupActive=!1,this.sprites.powerup.visible=!1,this.sprites.powerupCircle.visible=!1))))}updateGraphics(){var Gt=Tools.oscillator(.025,1e3,this.randomness)*this.scale,Xt=1.5*this.state.thrustLevel,Ht=this.rot,Yt=Graphics.shadowCoords(this.pos);if(Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,Ht,Gt*this.state.baseScale,Gt*this.state.baseScale),Graphics.transform(this.sprites.shadow,Yt.x,Yt.y,Ht,this.state.baseScale*(2.4/config.shadowScaling)*this.scale,this.state.baseScale*(2.4/config.shadowScaling)*this.scale),this.powerupActive){var Wt=.35*(0==this.state.powerupFadeState?2*(1-this.state.powerupFade)+1:1-this.state.powerupFade)*Tools.oscillator(.075,100,this.randomness),jt=.75*(0==this.state.powerupFadeState?Tools.clamp(2*this.state.powerupFade,0,1):Tools.clamp(1-1.3*this.state.powerupFade,0,1))*this.alpha;Graphics.transform(this.sprites.powerup,this.pos.x,this.pos.y-80,0,Wt,Wt,jt),Graphics.transform(this.sprites.powerupCircle,this.pos.x,this.pos.y-80,this.state.powerupAngle,1.35*Wt,1.35*Wt,jt)}var zt=Tools.oscillator(.1,.5,this.randomness),Vt=.01>Math.abs(this.state.thrustLevel)?0:this.state.thrustLevel/2+(0<this.state.thrustLevel?.5:-.5),qt=Tools.clamp(2*Math.abs(this.state.thrustLevel)-.1,0,1);if(0==this.graphicsSet)switch(this.type){case 1:Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-Ht)*(5*Gt),this.pos.y+Math.cos(-Ht)*(5*Gt),Ht+(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale,.5*zt*Vt*this.scale,qt),this.sprites.thruster.alpha=0.05,Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-Ht-.5*this.state.thrustDir)*(40*Gt),this.pos.y+Math.cos(-Ht-.5*this.state.thrustDir)*(40*Gt),null,1.5*Xt*this.scale,1*Xt*this.scale,.3*this.state.thrustLevel);break;case 2:0>this.state.thrustLevel&&(zt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-Ht-.5)*(15*Gt),this.pos.y+Math.cos(-Ht-.5)*(15*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*zt*Vt*this.scale,.6*zt*Vt*this.scale,qt),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.5-Ht)*(15*Gt),this.pos.y+Math.cos(.5-Ht)*(15*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*zt*Vt*this.scale,.6*zt*Vt*this.scale,qt),Graphics.transform(this.sprites.thruster1Shadow,Yt.x+Math.sin(-Ht-.5)*(10*Gt)/config.shadowScaling,Yt.y+Math.cos(-Ht-.5)*(10*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.5*zt*Vt*this.scale*(4/config.shadowScaling),.6*zt*Vt*this.scale*(4/config.shadowScaling),qt/2.5),Graphics.transform(this.sprites.thruster2Shadow,Yt.x+Math.sin(.5-Ht)*(10*Gt)/config.shadowScaling,Yt.y+Math.cos(.5-Ht)*(10*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.5*zt*Vt*this.scale*(4/config.shadowScaling),.6*zt*Vt*this.scale*(4/config.shadowScaling),qt/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-Ht-.3)*(50*Gt),this.pos.y+Math.cos(-Ht-.3)*(50*Gt),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.3-Ht)*(50*Gt),this.pos.y+Math.cos(.3-Ht)*(50*Gt),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel);break;case 3:Graphics.transform(this.sprites.rotor,this.pos.x,this.pos.y,this.state.thrustDir,2*(Gt*this.state.baseScale),2*(Gt*this.state.baseScale),.8),Graphics.transform(this.sprites.rotorShadow,Yt.x,Yt.y,this.state.thrustDir,2*(this.state.baseScale*(2.4/config.shadowScaling)*this.scale),2*(this.state.baseScale*(2.4/config.shadowScaling)*this.scale));break;case 4:0>this.state.thrustLevel&&(zt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-Ht-.25)*(5*Gt),this.pos.y+Math.cos(-Ht-.25)*(5*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale,.5*zt*Vt*this.scale,qt),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.25-Ht)*(5*Gt),this.pos.y+Math.cos(.25-Ht)*(5*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale,.5*zt*Vt*this.scale,qt),Graphics.transform(this.sprites.thruster1Shadow,Yt.x+Math.sin(-Ht-.15)*(28*Gt)/config.shadowScaling,Yt.y+Math.cos(-Ht-.15)*(28*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale*(4/config.shadowScaling),.5*zt*Vt*this.scale*(4/config.shadowScaling),qt/2.5),Graphics.transform(this.sprites.thruster2Shadow,Yt.x+Math.sin(.15-Ht)*(28*Gt)/config.shadowScaling,Yt.y+Math.cos(.15-Ht)*(28*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale*(4/config.shadowScaling),.5*zt*Vt*this.scale*(4/config.shadowScaling),qt/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-Ht-.2)*(45*Gt),this.pos.y+Math.cos(-Ht-.2)*(45*Gt),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-Ht)*(45*Gt),this.pos.y+Math.cos(.2-Ht)*(45*Gt),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel);break;case 5:0>this.state.thrustLevel&&(zt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-Ht-.35)*(20*Gt),this.pos.y+Math.cos(-Ht-.35)*(20*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale,.4*zt*Vt*this.scale,qt*this.alpha),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(.35-Ht)*(20*Gt),this.pos.y+Math.cos(.35-Ht)*(20*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale,.4*zt*Vt*this.scale,qt*this.alpha),Graphics.transform(this.sprites.thruster1Shadow,Yt.x+Math.sin(-Ht-.35)*(20*Gt)/config.shadowScaling,Yt.y+Math.cos(-Ht-.35)*(20*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*zt*Vt*this.scale*(4/config.shadowScaling),.4*zt*Vt*this.scale*(4/config.shadowScaling),qt*this.alpha/2.5),Graphics.transform(this.sprites.thruster2Shadow,Yt.x+Math.sin(.35-Ht)*(20*Gt)/config.shadowScaling,Yt.y+Math.cos(.35-Ht)*(20*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*zt*Vt*this.scale*(4/config.shadowScaling),.4*zt*Vt*this.scale*(4/config.shadowScaling),qt*this.alpha/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-Ht-.2-0*this.state.thrustDir)*(35*Gt),this.pos.y+Math.cos(-Ht-.2-0*this.state.thrustDir)*(35*Gt),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-Ht-0*this.state.thrustDir)*(35*Gt),this.pos.y+Math.cos(.2-Ht-0*this.state.thrustDir)*(35*Gt),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha);}else switch(this.type){case 1:Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-Ht)*(20*Gt),this.pos.y+Math.cos(-Ht)*(20*Gt),Ht+(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale,.5*zt*Vt*this.scale,qt),Graphics.transform(this.sprites.thrusterShadow,Yt.x+Math.sin(-Ht)*(20*Gt)/config.shadowScaling,Yt.y+Math.cos(-Ht)*(20*Gt)/config.shadowScaling,Ht+(0<this.state.thrustLevel?this.state.thrustDir:0),.4*zt*Vt*this.scale*(4/config.shadowScaling),.5*zt*Vt*this.scale*(4/config.shadowScaling),qt/2.5),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-Ht-.5*this.state.thrustDir)*(40*Gt),this.pos.y+Math.cos(-Ht-.5*this.state.thrustDir)*(40*Gt),null,1.5*Xt*this.scale,1*Xt*this.scale,.3*this.state.thrustLevel),this.sprites.thruster.scale.x=this.sprites.thruster.scale.y=0.25;break;case 2:0>this.state.thrustLevel&&(zt*=.7),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(0.8-Ht)*(50*Gt),this.pos.y+Math.cos(.8-Ht)*(50*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*zt*Vt*this.scale,.6*zt*Vt*this.scale,qt),Graphics.transform(this.sprites.thruster2Shadow,Yt.x+Math.sin(.5-Ht)*(32*Gt)/config.shadowScaling,Yt.y+Math.cos(.5-Ht)*(32*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.5*zt*Vt*this.scale*(4/config.shadowScaling),.6*zt*Vt*this.scale*(4/config.shadowScaling),qt/2.5),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.3-Ht)*(50*Gt),this.pos.y+Math.cos(.3-Ht)*(50*Gt),null,2.5*this.scale,1.5*this.scale,.3*this.state.thrustLevel);break;case 3:Graphics.transform(this.sprites.rotor,this.pos.x,this.pos.y,this.state.thrustDir,2*(Gt*this.state.baseScale),2*(Gt*this.state.baseScale),.8),Graphics.transform(this.sprites.rotorShadow,Yt.x,Yt.y,this.state.thrustDir,2*(this.state.baseScale*(2.4/config.shadowScaling)*this.scale),2*(this.state.baseScale*(2.4/config.shadowScaling)*this.scale));break;case 4:0>this.state.thrustLevel&&(zt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-Ht-1)*(20*Gt),this.pos.y+Math.cos(-Ht-1)*(20*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale,.5*zt*Vt*this.scale,qt),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(1-Ht)*(20*Gt),this.pos.y+Math.cos(1-Ht)*(20*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale,.5*zt*Vt*this.scale,qt),Graphics.transform(this.sprites.thruster1Shadow,Yt.x+Math.sin(-Ht-.15)*(28*Gt)/config.shadowScaling,Yt.y+Math.cos(-Ht-.15)*(28*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale*(4/config.shadowScaling),.5*zt*Vt*this.scale*(4/config.shadowScaling),qt/2.5),Graphics.transform(this.sprites.thruster2Shadow,Yt.x+Math.sin(.15-Ht)*(28*Gt)/config.shadowScaling,Yt.y+Math.cos(.15-Ht)*(28*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale*(4/config.shadowScaling),.5*zt*Vt*this.scale*(4/config.shadowScaling),qt/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-Ht-.2)*(45*Gt),this.pos.y+Math.cos(-Ht-.2)*(45*Gt),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-Ht)*(45*Gt),this.pos.y+Math.cos(.2-Ht)*(45*Gt),null,2.5*this.scale,1.5*this.scale,.25*this.state.thrustLevel),this.sprites.thruster1.scale.x=this.sprites.thruster1.scale.y=0.35,this.sprites.thruster2.scale.x=this.sprites.thruster2.scale.y=0.35;break;case 5:0>this.state.thrustLevel&&(zt*=.7),Graphics.transform(this.sprites.thruster1,this.pos.x+Math.sin(-Ht-0.3)*(20*Gt),this.pos.y+Math.cos(-Ht-.35)*(20*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale,.4*zt*Vt*this.scale,qt*this.alpha),Graphics.transform(this.sprites.thruster2,this.pos.x+Math.sin(0.3-Ht)*(20*Gt),this.pos.y+Math.cos(.35-Ht)*(20*Gt),Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.3*zt*Vt*this.scale,.4*zt*Vt*this.scale,qt*this.alpha),Graphics.transform(this.sprites.thruster1Shadow,Yt.x+Math.sin(-Ht-.35)*(20*Gt)/config.shadowScaling,Yt.y+Math.cos(-Ht-.35)*(20*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*zt*Vt*this.scale*(4/config.shadowScaling),.4*zt*Vt*this.scale*(4/config.shadowScaling),qt*this.alpha/2.5),Graphics.transform(this.sprites.thruster2Shadow,Yt.x+Math.sin(.35-Ht)*(20*Gt)/config.shadowScaling,Yt.y+Math.cos(.35-Ht)*(20*Gt)/config.shadowScaling,Ht+.5*(0<this.state.thrustLevel?this.state.thrustDir:0),.4*zt*Vt*this.scale*(4/config.shadowScaling),.4*zt*Vt*this.scale*(4/config.shadowScaling),qt*this.alpha/2.5),Graphics.transform(this.sprites.thruster1Glow,this.pos.x+Math.sin(-Ht-.2-0*this.state.thrustDir)*(35*Gt),this.pos.y+Math.cos(-Ht-.2-0*this.state.thrustDir)*(35*Gt),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha),Graphics.transform(this.sprites.thruster2Glow,this.pos.x+Math.sin(.2-Ht-0*this.state.thrustDir)*(35*Gt),this.pos.y+Math.cos(.2-Ht-0*this.state.thrustDir)*(35*Gt),null,2.5*this.scale,1.5*this.scale,.2*this.state.thrustLevel*this.alpha);}this.updateNameplate(),this.state.bubble&&this.updateBubble(),config.debug.collisions&&this.col&&(this.col.position.set(this.pos.x,this.pos.y),this.col.rotation=this.rot)}}!function(){var Bt={},Gt=[-1,-1,-1],Xt=["badge_gold","badge_silver","badge_bronze"];Players.update=function(){var Ht,Yt;for(Ht in Bt)0==(Yt=Bt[Ht]).status&&(Yt.update(game.timeFactor),Yt.updateGraphics(game.timeFactor));if(null!=game.spectatingID){if(null==(Yt=Bt[game.spectatingID]))return;if(3e3<game.timeNetwork-Yt.lastPacket)return;Graphics.setCamera(Yt.pos.x,Yt.pos.y)}else if(null!=game.myID){if(null==(Yt=Bt[game.myID]))return;0==Yt.status&&UI.updateHUD(Yt.health,Yt.energy,Yt),Graphics.setCamera(Yt.pos.x,Yt.pos.y)}},Players.add=function(Ht,Yt){Bt[Ht.id]=new Player(Ht,Yt)},Players.get=function(Ht){return Bt[Ht]},Players.getMe=function(){return Bt[game.myID]},Players.amIAlive=function(){var Ht=Players.getMe();return null!=Ht&&0==Ht.status},Players.getIDs=function(){var Ht={};for(var Yt in Bt)Ht[Yt]=!0;return Ht},Players.getByName=function(Ht){for(var Yt in Bt)if(Bt[Yt].name===Ht)return Bt[Yt];return null},Players.network=function(Ht,Yt){var Wt=Bt[Yt.id];null!=Wt&&(Ht===Network.SERVERPACKET.PLAYER_UPDATE||Ht===Network.SERVERPACKET.PLAYER_FIRE||Ht===Network.SERVERPACKET.EVENT_BOOST||Ht===Network.SERVERPACKET.EVENT_BOUNCE?Wt.networkKey(Ht,Yt):Ht===Network.SERVERPACKET.CHAT_SAY?Wt.sayBubble(Yt):Ht===Network.SERVERPACKET.PLAYER_RESPAWN?Wt.respawn(Yt):Ht===Network.SERVERPACKET.PLAYER_FLAG?(Yt.id==game.myID&&(game.myFlag=game.lastFlagSet,Tools.setSettings({flag:game.lastFlagSet})),Wt.changeFlag(Yt)):void 0)},Players.stealth=function(Ht){var Yt=Bt[Ht.id];null!=Yt&&Yt.stealth(Ht)},Players.leaveHorizon=function(Ht){var Yt=Bt[Ht.id];null!=Yt&&Yt.leaveHorizon()},Players.updateBadges=function(Ht){for(var Wt=Tools.clamp(Ht.length,0,3),jt=[],zt=0,Yt;zt<Wt;zt++)null!=(Yt=Bt[Ht[zt].id])&&(jt.push(Yt.id),Yt.state.badge!=zt&&(Yt.state.badge=zt,Yt.changeBadge(Xt[zt])),Yt.state.hasBadge||(Yt.state.hasBadge=!0,Yt.render&&(Yt.sprites.badge.visible=!0)));for(var Vt=0;Vt<Gt.length;Vt++)if(-1==jt.indexOf(Gt[Vt])){if(null==(Yt=Bt[Gt[Vt]]))continue;Yt.state.hasBadge&&(Yt.state.hasBadge=!1,Yt.sprites.badge.visible=!1)}Gt=jt},Players.chat=function(Ht){var Yt=Bt[Ht.id];null!=Yt&&UI.addChatLine(Yt,Ht.text,0)},Players.teamChat=function(Ht){var Yt=Bt[Ht.id];null!=Yt&&UI.addChatLine(Yt,Ht.text,3)},Players.votemutePass=function(Ht){var Yt=Bt[Ht.id];null!=Yt&&UI.chatVotemutePass(Yt)},Players.whisper=function(Ht){var Yt;if(Ht.to==game.myID){if(null==(Wt=Bt[Ht.from]))return;Yt=2}else{var Wt;if(null==(Wt=Bt[Ht.to]))return;Yt=1}UI.addChatLine(Wt,Ht.text,Yt)},Players.impact=function(Ht){for(var Yt=0,Wt;Yt<Ht.players.length;Yt++)Wt=Bt[Ht.players[Yt].id],null!=Wt&&Wt.impact(Ht.type,new Vector(Ht.posX,Ht.posY),Ht.players[Yt].health,Ht.players[Yt].healthRegen)},Players.powerup=function(Ht){Players.getMe().powerup(Ht)},Players.updateLevel=function(Ht){var Yt=Bt[Ht.id];null!=Yt&&Yt.updateLevel(Ht)},Players.reteam=function(Ht){var Yt=Bt[Ht.id];null!=Yt&&Yt.reteam(Ht.team)},Players.kill=function(Ht){var Yt=Bt[Ht.id];if(null!=Yt)if(0!=Ht.killer||0!=Ht.posX||0!=Ht.posY){if(SWAM.addKilledLine(Ht.killer,Ht.id),Yt.kill(Ht),Yt.me()){UI.visibilityHUD(!1);var Wt=Bt[Ht.killer];null!=Wt&&UI.killedBy(Wt),UI.showSpectator("<div onclick=\"Network.spectateNext()\" class=\"spectate\">ENTER SPECTATOR MODE</div>")}else Ht.killer===game.myID&&UI.killed(Yt);Yt.me()||Yt.id!=game.spectatingID||3!=game.gameType||Games.spectatorSwitch(Yt.id)}else!function(jt){jt.kill({posX:0,posY:0,spectate:!0}),UI.visibilityHUD(!1)}(Yt)},Players.destroy=function(Ht){Ht==game.spectatingID&&($("#spectator-tag").html("Spectating"),Games.spectatorSwitch(Ht));var Yt=Bt[Ht];null!=Yt&&(Yt.destroy(!0),delete Bt[Ht])},Players.changeType=function(Ht){var Yt=Bt[Ht.id];null!=Yt&&Yt.changeType(Ht)},Players.count=function(){var Yt=0,Wt=0,Ht;for(Ht in Bt)Yt++,Bt[Ht].culled&&Wt++;return[Yt-Wt,Yt]},Players.wipe=function(){for(var Ht in Bt)Bt[Ht].destroy(!0),delete Bt[Ht]}}();class Mob{constructor(Bt){this.id=Bt.id,this.type=Bt.type,this.pos=new Vector(Bt.posX,Bt.posY),this.spriteRot=0,this.missile=1==this.type||2==this.type||3==this.type||5==this.type||6==this.type||7==this.type,this.missile&&Bt.c!==Network.SERVERPACKET.MOB_UPDATE_STATIONARY?(this.speed=new Vector(Bt.speedX,Bt.speedY),this.accel=new Vector(Bt.accelX,Bt.accelY),this.maxSpeed=Bt.maxSpeed,this.exhaust=config.mobs[this.type].exhaust,this.lastAccelX=0,this.lastAccelY=0,this.stationary=!1,this.spriteRot=this.speed.angle()+Math.PI):this.stationary=!0,this.sprites={},this.state={inactive:!1,despawnTicker:0,despawnType:0,baseScale:1,baseScaleShadow:1,luminosity:1},this.randomness=Tools.rand(0,1e5),this.culled=!1,this.visibility=!0,this.reducedFactor=!1,this.forDeletion=!1,this.spawnTime=game.time,this.lastPacket=game.timeNetwork,this.setupSprite()}setupSprite(){switch(4!=this.type&&8!=this.type&&9!=this.type&&(this.sprites.thrusterGlow=Textures.init("thrusterGlowSmall",{layer:"projectiles"}),this.sprites.smokeGlow=Textures.init("smokeGlow",{layer:"projectiles"}),this.sprites.thruster=Textures.init("missileThruster")),this.sprites.thruster&&this.sprites.thruster.alpha&&(this.sprites.thruster.alpha=0),this.type){case 1:case 5:case 6:case 7:this.sprites.sprite=Textures.init("missile"),this.sprites.shadow=Textures.init("missileShadow",{scale:[0.25,0.2]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=1,this.sprites.smokeGlow.scale.set(1.5,3),this.sprites.smokeGlow.alpha=0;break;case 2:this.sprites.sprite=Textures.init("missileFat"),this.sprites.shadow=Textures.init("missileShadow",{scale:[0.5,0.25]}),this.sprites.thrusterGlow.scale.set(4,3),this.sprites.thrusterGlow.alpha=1,this.sprites.smokeGlow.scale.set(2.5,3),this.sprites.smokeGlow.alpha=0;break;case 3:this.sprites.sprite=Textures.init("missileSmall",{scale:[0.56,0.4]}),this.sprites.shadow=Textures.init("missileShadow",{scale:[0.18,0.14]}),this.sprites.thrusterGlow.scale.set(3,2),this.sprites.thrusterGlow.alpha=1,this.sprites.smokeGlow.scale.set(1,2),this.sprites.smokeGlow.alpha=0;break;case 4:case 8:case 9:var Bt="crateUpgrade";8==this.type?Bt="crateShield":9==this.type&&(Bt="crateRampage"),this.state.baseScale=.33,this.state.baseScaleShadow=.33*(2.4/config.shadowScaling),this.sprites.sprite=Textures.init(Bt,{scale:this.state.baseScale}),this.sprites.shadow=Textures.init("crateShadow",{scale:this.state.baseScaleShadow});}}despawn(Bt){return 4==this.type||8==this.type||9==this.type?(this.state.inactive=!0,this.state.despawnTicker=0,this.state.despawnType=Bt,void(1==Bt&&4!=this.type&&Sound.powerup(this.type,this.pos))):void(this.state.inactive=!0,this.state.despawnTicker=0,this.sprites.thruster.renderable=!1,this.sprites.thrusterGlow.renderable=!1,this.sprites.smokeGlow.renderable=!1,this.accel.x=0,this.accel.y=0,this.missile&&Sound.updateThruster(1,this,!1))}destroy(Bt){switch(this.type){case 1:case 2:case 3:case 5:case 6:case 7:game.graphics.layers.projectiles.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow),game.graphics.layers.thrusters.removeChild(this.sprites.thruster),game.graphics.layers.projectiles.removeChild(this.sprites.thrusterGlow),game.graphics.layers.projectiles.removeChild(this.sprites.smokeGlow),this.sprites.sprite.destroy(),this.sprites.shadow.destroy(),this.sprites.thruster.destroy(),this.sprites.thrusterGlow.destroy(),this.sprites.smokeGlow.destroy();break;case 4:case 8:case 9:game.graphics.layers.crates.removeChild(this.sprites.sprite),game.graphics.layers.shadows.removeChild(this.sprites.shadow);}Bt.c===Network.SERVERPACKET.MOB_DESPAWN_COORDS&&(Mobs.explosion(this.pos,Bt.type),this.missile&&Sound.updateThruster(1,this,!1))}network(Bt){this.lastPacket=game.timeNetwork,Bt.c===Network.SERVERPACKET.MOB_UPDATE&&(this.reducedFactor=Tools.reducedFactor()),this.pos.x=Bt.posX,this.pos.y=Bt.posY,null!=Bt.speedX&&(this.speed.x=Bt.speedX,this.speed.y=Bt.speedY),null!=Bt.accelX&&(this.accel.x=Bt.accelX,this.accel.y=Bt.accelY)}visible(Bt){Bt==this.visibility&&Bt!=this.culled||(this.sprites.sprite.visible=Bt,this.sprites.shadow.visible=Bt,4!=this.type&&8!=this.type&&9!=this.type&&(this.sprites.thruster.visible=Bt,this.sprites.thrusterGlow.visible=Bt),this.visibility=Bt)}visibilityUpdate(){this.culled=!Graphics.inScreen(this.pos,128),this.visible(!this.culled)}update(Bt){if(this.visibilityUpdate(),!(!1!==this.reducedFactor&&(Bt-=this.reducedFactor,this.reducedFactor=!1,0>=Bt))){var Yt=.51<Bt?Math.round(Bt):1,Wt=Bt/Yt,Gt,Xt,Ht;for(Gt=0;Gt<Yt;Gt++)if(this.stationary)this.clientCalcs(Wt);else{Xt=this.speed.x,Ht=this.speed.y,this.speed.x+=this.accel.x*Wt,this.speed.y+=this.accel.y*Wt;var jt=this.speed.length();jt>this.maxSpeed&&this.speed.multiply(this.maxSpeed/jt),this.state.inactive&&this.speed.multiply(1-.03*Wt),this.pos.x+=Wt*Xt+.5*(this.speed.x-Xt)*Wt,this.pos.y+=Wt*Ht+.5*(this.speed.y-Ht)*Wt,-16384>this.pos.x&&(this.pos.x+=32768),16384<this.pos.x&&(this.pos.x-=32768),-8192>this.pos.y&&(this.pos.y+=16384),8192<this.pos.y&&(this.pos.y-=16384),this.clientCalcs(Wt)}this.missile&&!this.state.inactive&&Sound.updateThruster(1,this,this.visibility),this.state.inactive&&0<this.sprites.sprite.alpha&&(this.sprites.sprite.alpha-=0.2)}}clientCalcs(Bt){if(!this.forDeletion)switch(this.state.luminosity-=.075*Bt,0>this.state.luminosity&&(this.state.luminosity=0),this.type){case 1:case 2:case 3:case 5:case 6:case 7:var Gt=1;if(this.state.inactive){if(this.state.despawnTicker+=.01*Bt,.75<this.state.despawnTicker,1<this.state.despawnTicker)return void(this.forDeletion=!0);Gt=Tools.clamp(1-this.state.despawnTicker,.3,1)}if(!this.culled&&.3<Gt){var Xt=this.speed.angle()+Math.PI;Xt-this.spriteRot>=Math.PI?this.spriteRot+=2*Math.PI:this.spriteRot-Xt>Math.PI&&(this.spriteRot-=2*Math.PI),this.spriteRot=Tools.converge(this.spriteRot,Xt,.1*Bt),Particles.missileSmoke(this,this.exhaust,Gt)}break;case 4:case 8:case 9:if(this.state.inactive&&(this.state.despawnTicker+=.05*Bt,1<this.state.despawnTicker))return void(this.forDeletion=!0);}}updateGraphics(){switch(this.type){case 1:case 2:case 3:case 5:case 6:case 7:var Gt=Graphics.shadowCoords(this.pos),Xt=Tools.oscillator(.1,.5,this.randomness),Ht=Tools.oscillator(.15,10,this.randomness);Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y,this.spriteRot),Graphics.transform(this.sprites.shadow,Gt.x,Gt.y,this.spriteRot),Graphics.transform(this.sprites.thrusterGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),null,null,null,(.5*this.state.luminosity+.2)*Ht),Graphics.transform(this.sprites.smokeGlow,this.pos.x+Math.sin(-this.spriteRot)*(this.exhaust+20),this.pos.y+Math.cos(-this.spriteRot)*(this.exhaust+20),this.spriteRot),Graphics.transform(this.sprites.thruster,this.pos.x+Math.sin(-this.spriteRot)*this.exhaust,this.pos.y+Math.cos(-this.spriteRot)*this.exhaust,this.spriteRot,config.mobs[this.type].thruster[0]*Xt,config.mobs[this.type].thruster[1]*Xt);break;case 4:case 8:case 9:var Yt;Gt=Graphics.shadowCoords(this.pos),Yt=0==this.state.despawnType?1-this.state.despawnTicker:1+2*this.state.despawnTicker,Yt*=Tools.oscillator(.08,500,this.randomness),Graphics.transform(this.sprites.sprite,this.pos.x,this.pos.y+20*(Tools.oscillator(.08,330,this.randomness)-1.04),null,this.state.baseScale*Yt,this.state.baseScale*Yt,1-this.state.despawnTicker),Graphics.transform(this.sprites.shadow,Gt.x,Gt.y,null,this.state.baseScaleShadow*Yt,this.state.baseScaleShadow*Yt,1-this.state.despawnTicker);}}}!function(){var Bt={},Gt=[],Xt={};Mobs.add=function(Ht,Yt){Bt[Ht.id]=new Mob(Ht),Yt&&Bt[Ht.id].network(Ht)},Mobs.addSW=function(Ht,Yt){var Wt=new Mob(Ht);Bt[Ht.id]=Wt,Wt.playerId=Yt;var jt=Players.get(Yt),zt=new PIXI.filters.ColorMatrixFilter;0==jt.graphicsSet||zt.hue(-110),Wt.sprites.sprite.filters=[zt]},Mobs.update=function(){var Ht,Yt;for(Ht in Bt)(Yt=Bt[Ht]).update(game.timeFactor),Yt.forDeletion?Mobs.destroy(Yt):Yt.updateGraphics(game.timeFactor)},Mobs.network=function(Ht){var Yt=Bt[Ht.id];if(null==Yt?Mobs.add(Ht,!0):Yt.network(Ht),0==game.myGraphicsSet&&-1<$.inArray(Ht.type,[1,2,3,5,6,7])){var Wt=new PIXI.filters.ColorMatrixFilter;Wt.hue(-110),Bt[Ht.id].sprites.sprite.filters=[Wt]}},Mobs.despawn=function(Ht){var Yt=Bt[Ht.id];null!=Yt&&Yt.despawn(Ht.type)},Mobs.destroy=function(Ht){var Yt=Bt[Ht.id];null!=Yt&&(Yt.destroy(Ht),delete Bt[Ht.id])},Mobs.explosion=function(Ht,Yt){1===Yt||5===Yt||6===Yt||7===Yt?Particles.explosion(Ht,Tools.rand(1,1.2)):2===Yt?Particles.explosion(Ht,Tools.rand(1.3,1.6)):3===Yt?Particles.explosion(Ht,Tools.rand(.8,1)):void 0;Sound.mobExplosion(Ht,Yt)},Mobs.count=function(){var Yt=0,Wt=0,Ht;for(Ht in Bt)Yt++,Bt[Ht].culled&&Wt++;return[Yt-Wt,Yt]},Mobs.wipe=function(){for(var Ht in Bt)Bt[Ht].destroy({}),delete Bt[Ht]},Mobs.countDoodads=function(){return[Gt.length,config.doodads.length]},Mobs.setupDoodads=function(){config.doodads=config.doodads.concat(config.groundDoodads);for(var Ht=0;Ht<config.doodads.length;Ht++)Mobs.addDoodad(config.doodads[Ht])},Mobs.addDoodad=function(Ht){var Yt=Number.isInteger(Ht[2]),Wt=Textures.init((Yt?"mountain":"")+Ht[2]);Wt.scale.set(Ht[3]),Wt.position.set(Ht[0],Ht[1]),Wt.visible=!1,Ht[4]&&(Wt.rotation=Ht[4]),Ht[5]&&(Wt.alpha=Ht[5]),Ht[6]&&(Wt.tint=Ht[6]),Ht[7]=!1,Ht[8]=Wt,Ht[9]=Yt?0:1},Mobs.getClosestDoodad=function(Ht){for(var jt=2,zt=0,Yt,Wt;zt<Gt.length;zt++)0==(Wt=Gt[zt])[5]&&Tools.distFastCheckFloat(Ht.x,Ht.y,Wt[0],Wt[1],256*Wt[3])&&(Yt=Tools.distance(Ht.x,Ht.y,Wt[0],Wt[1])/(256*Wt[3]))<jt&&(jt=Yt);return Tools.clamp(3.333*(jt-.5),.2,1)},Mobs.updateDoodads=function(){for(var Yt=Tools.getBucketBounds(Graphics.getCamera(),512+game.halfScreenX/game.scale,512+game.halfScreenY/game.scale),Wt=Yt[0],Ht;Wt<=Yt[1];Wt++)for(var jt=Yt[2];jt<=Yt[3];jt++)for(var zt=0;zt<game.buckets[Wt][jt][0].length;zt++)Vt=game.buckets[Wt][jt][0][zt],Ht=config.doodads[Vt],game.state==Network.STATE.LOGIN&&0!=Ht[9]||Graphics.inScreen(new Vector(Ht[0],Ht[1]),256*Ht[3]+config.overdraw)&&(Ht[7]||(Ht[8].visible=!0,Ht[7]=!0,Xt[Vt]||(Xt[Vt]=!0,Gt.push([Ht[0],Ht[1],Ht[2],Ht[3],Vt,Ht[9]]))));for(var qt=Gt.length-1,Vt;0<=qt;qt--)Vt=Gt[qt][4],Ht=config.doodads[Vt],Graphics.inScreen(new Vector(Ht[0],Ht[1]),256*Ht[3]+config.overdraw)||Ht[7]&&(Ht[8].visible=!1,Ht[7]=!1,Gt.splice(qt,1),delete Xt[Vt])}}(),function(){class Bt{constructor(Ht,Yt,Wt,jt){this.maxParticles=Yt,this.container=new PIXI.Container,null!=Wt&&(this.container.blendMode=Wt),this.particles=[],this.first=-1,this.last=-1,this.emitters={},this.emitterId=0,this.shadow=jt,Ht.addChild(this.container)}addParticle(Ht,Yt,Wt,jt,zt,Vt,qt,Kt,Qt,Zt,Jt,$t,en,tn){if(!(20<game.timeFactorUncapped||this.particles.length>=this.maxParticles)){var nn=Textures.sprite(Yt),rn={type:Ht,sprite:nn,speed:Wt,pos:jt,scale:zt,alpha:Vt,rotationSpeed:qt,rotation:Kt,lastRotation:0,time:game.time,tint:Qt,life:0,data:null==en?0:en,emitter:null==tn?null:tn,_prev:-1,_next:-1};null!=Qt&&(nn.tint=Qt),null!=Jt&&(nn.blendMode=Jt),null!=$t&&(rn.life=$t),null==Zt?nn.anchor.set(.5,.5):nn.anchor.set(Zt.x,Zt.y),this.container.addChild(nn);var an=this.particles.length;0<an?(this.particles[this.last]._next=an,rn._prev=this.last,this.last=an):(this.first=an,this.last=an),this.particles.push(rn)}}wipe(){this.emitters={},this.emitterId=0;for(var Ht=0;Ht<this.particles.length;Ht++)this.container.removeChild(this.particles[Ht].sprite),this.particles[Ht].sprite.destroy();this.particles=[],this.first=-1,this.last=-1}addEmitter(Ht,Yt,Wt,jt,zt){20<game.timeFactorUncapped||(this.emitters[this.emitterId]={type:Ht,pos:Wt,speed:Yt,life:null==jt?0:jt,shadowLayer:zt},this.emitterId++)}updateEmitters(Ht){var Yt,Wt;for(Yt in this.emitters){switch((Wt=this.emitters[Yt]).type){case Xt.EMITTER_EXPLOSION_FRAGMENT:Wt.life+=.02*Ht,Wt.speed.multiply(1-.02*Ht);}if(1<Wt.life)delete this.emitters[Yt];else switch(Wt.pos.x+=Wt.speed.x*Ht,Wt.pos.y+=Wt.speed.y*Ht,Wt.type){case Xt.EMITTER_EXPLOSION_FRAGMENT:var jt=Tools.randInt(1,16),zt=.5*(1-Wt.life),Vt=1-Wt.life,qt=Tools.rand(-.1,.1),Kt=Tools.randCircle();this.addParticle(Xt.FRAGMENT_SMOKE,"smoke_"+jt,Vector.zero(),Wt.pos.clone(),Vector.diag(zt),1,qt,Kt,null,null,null,null,Vt+.2),Wt.shadowLayer&&Wt.shadowLayer.addParticle(Xt.FRAGMENT_SMOKE,"smokeshadow_"+jt,Vector.zero(),Wt.pos.clone(),Vector.diag(zt),1,qt,Kt,null,null,null,null,Vt+.2);}}}destroy(Ht){var Yt=this.particles.length;if(0!=Yt&&!(Ht>=Yt)){this.container.removeChild(this.particles[Ht].sprite),this.particles[Ht].sprite.destroy();var Wt=this.particles[Ht]._prev,jt=this.particles[Ht]._next;return Yt--,-1==Wt?this.first=jt:this.particles[Wt]._next=jt,-1==jt?this.last=Wt:this.particles[jt]._prev=Wt,Ht!=Yt&&(this.particles[Ht]=this.particles[Yt],-1==this.particles[Ht]._prev?this.first=Ht:this.particles[this.particles[Ht]._prev]._next=Ht,-1==this.particles[Ht]._next?this.last=Ht:this.particles[this.particles[Ht]._next]._prev=Ht),this.particles.splice(Yt,1),jt==Yt?Ht:jt}}update(Ht){var Yt;this.updateEmitters(Ht);for(var Wt=this.first;-1!=Wt;){switch((Yt=this.particles[Wt]).type){case Xt.MISSILE:case Xt.MISSILE_FAT:case Xt.MISSILE_SMALL:Yt.type==Xt.MISSILE?(Yt.scale.add(.2*Ht),Yt.scale.ceil(2*Yt.data),Yt.life+=.05*Ht):Yt.type==Xt.MISSILE_FAT?(Yt.scale.add(.3*Ht),Yt.scale.ceil(3*Yt.data),Yt.life+=.05*Ht):(Yt.scale.add(.14*Ht),Yt.scale.ceil(1.4*Yt.data),Yt.life+=.08*Ht),Yt.speed.multiply(1-.05*Ht),Yt.alpha=.7*(1-Yt.life),Yt.sprite.tint=Tools.colorLerp(Yt.tint,16777215,2*(1-Yt.life));break;case Xt.SHOCKWAVE_SMOKE:Yt.life+=.05*Ht,Yt.alpha=.7*Tools.easing.custom(Yt.life,"shockwave");break;case Xt.SHOCKWAVE_INNER:case Xt.SHOCKWAVE_OUTER:Yt.life+=.05*Ht;var jt=Tools.easing.custom(Yt.life,"shockwave");Yt.alpha=.4*jt,Yt.type==Xt.SHOCKWAVE_OUTER?Yt.scale.both(4*Yt.life):Yt.scale.both(3*Yt.life);break;case Xt.EXPLOSION_FLASH:Yt.life+=.1*Ht,Yt.alpha=1-Yt.life;break;case Xt.EXPLOSION_FLASH_BIG:Yt.life+=.04*Ht,Yt.alpha=1-Yt.life;break;case Xt.EXPLOSION_HOT_SMOKE:Yt.life+=.035*Ht,Yt.alpha=1-Yt.life,Yt.scale.add(.05*Ht),Yt.speed.multiply(1-.1*Ht),Yt.rotationSpeed*=1-.05*Ht;break;case Xt.EXPLOSION_SMOKE:Yt.life+=.01*Ht,Yt.alpha=Tools.easing.custom(Yt.life,"explosionSmoke"),Yt.scale.add(.05*Ht),Yt.speed.multiply(1-.05*Ht),Yt.rotationSpeed*=1-.05*Ht;break;case Xt.EXPLOSION_SPARK:Yt.life+=.02*Ht,Yt.alpha=2*(1-Yt.life),Yt.speed.multiply(1-.05*Ht),Yt.rotationSpeed*=1-.05*Ht;break;case Xt.FRAGMENT_SMOKE:Yt.life+=.02*Ht,Yt.scale.add(.075*Ht*Yt.data),Yt.scale.ceil(2*Yt.data),Yt.rotationSpeed*=1-.05*Ht,Yt.alpha=.3*(1-Yt.life);break;case Xt.PLANE_DAMAGE:Yt.life+=.02*Ht,Yt.alpha=2*(1-Yt.life),Yt.speed.multiply(1-.1*Ht);}if(1<Yt.life)Wt=this.destroy(Wt);else{if(Yt.pos.x+=Yt.speed.x*Ht,Yt.pos.y+=Yt.speed.y*Ht,Yt.rotation+=Yt.rotationSpeed*Ht,this.shadow){var zt=Graphics.shadowCoords(Yt.pos);Yt.sprite.position.x=zt.x,Yt.sprite.position.y=zt.y,Yt.sprite.scale.x=Yt.scale.x/config.shadowScaling,Yt.sprite.scale.y=Yt.scale.y/config.shadowScaling,Yt.sprite.alpha=Tools.clamp(2*Yt.alpha,0,1)}else Yt.sprite.position.x=Yt.pos.x,Yt.sprite.position.y=Yt.pos.y,Yt.sprite.scale.x=Yt.scale.x,Yt.sprite.scale.y=Yt.scale.y,Yt.sprite.alpha=Tools.clamp(Yt.alpha,0,1);.03<Math.abs(Yt.rotation-Yt.lastRotation)&&(Yt.sprite.rotation=Yt.rotation,Yt.lastRotation=Yt.rotation),Wt=this.particles[Wt]._next}}}}var Gt={};Math.PI,Particles.setup=function(){Gt.smoke=new Bt(game.graphics.layers.smoke,2e3),Gt.shadows=new Bt(game.graphics.layers.shadows,2e3,null,!0),Gt.explosions=new Bt(game.graphics.layers.explosions,2e3)},Particles.update=function(){for(var Ht=.51<game.timeFactor?Math.round(game.timeFactor):1,Yt=game.timeFactor/Ht,Wt=0;Wt<Ht;Wt++)Gt.smoke.update(Yt),Gt.explosions.update(Yt),Gt.shadows.update(Yt)},Particles.wipe=function(){Gt.smoke.wipe(),Gt.explosions.wipe(),Gt.shadows.wipe()},Particles.planeDamage=function(Ht){var Yt=2==Ht.type?2:1,Wt=Tools.randInt(1,4),jt=Tools.randCircle(),zt=Tools.rand(.5,2),Vt=Tools.rand(.2,.8),qt=Tools.rand(0,.3),Kt=Vector.createOff(Ht.pos,jt,Tools.rand(0,5*Yt)),Qt=Vector.create(jt,zt);Gt.explosions.addParticle(Xt.PLANE_DAMAGE,"spark_"+Wt,new Vector(Qt.x+Ht.speed.x,Qt.y+Ht.speed.y),Kt,Vector.diag(Vt),0,0,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD,qt)},Particles.explosion=function(Ht,Yt,Wt){for(var jt=1<Yt?1+(Yt-1)/1.5:Yt,zt=0;2>zt;zt++)Gt.explosions.addParticle(Xt.EXPLOSION_FLASH,"flash_"+Tools.randInt(1,4),Vector.zero(),Ht.clone(),Vector.diag(1.5*Yt),0,0,Tools.randCircle(),15987628,null,PIXI.BLEND_MODES.ADD);var Vt,qt,Kt,Qt,Zt,Jt,$t,en,tn;for(Vt=Math.round(Tools.rand(20,30)*Yt),zt=0;zt<Vt;zt++)qt=Tools.randInt(1,4),Kt=Tools.randCircle(),Zt=Tools.rand(3,10)*jt,Jt=Tools.rand(-.2,.2),$t=Tools.rand(.4,1.5)*jt,tn=Tools.rand(0,.3),Gt.explosions.addParticle(Xt.EXPLOSION_SPARK,"spark_"+qt,Vector.create(Kt,Zt),Ht.clone(),Vector.diag($t),0,Jt,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD,tn);for(zt=0;zt<Wt;zt++)Kt=Tools.randCircle(),Zt=Tools.rand(3,7)*jt,Qt=Tools.rand(15,30)*Yt,Gt.explosions.addEmitter(Xt.EMITTER_EXPLOSION_FRAGMENT,Vector.create(Kt,Zt),Vector.createOff(Ht,Kt,Qt),Tools.rand(0,.5),Gt.shadows);for(Vt=Math.round(Tools.rand(20,30)*Yt),zt=0;zt<Vt;zt++)qt=Tools.randInt(1,16),Kt=Tools.randCircle(),Qt=Tools.rand(0,10)*Yt,Zt=Tools.rand(0,3)*Yt,Jt=Tools.rand(-.1,.1),$t=Tools.rand(.5,.8)*Yt,en=Tools.randCircle(),Gt.explosions.addParticle(Xt.EXPLOSION_SMOKE,"smoke_"+qt,Vector.create(Kt,Zt),Vector.createOff(Ht,Kt,Qt),Vector.diag($t),0,Jt,en),Gt.shadows.addParticle(Xt.EXPLOSION_SMOKE,"smokeshadow_"+qt,Vector.create(Kt,Zt),Vector.createOff(Ht,Kt,Qt),Vector.diag($t),0,Jt,en);for(Gt.explosions.addParticle(Xt.EXPLOSION_FLASH_BIG,"glowsmall",Vector.zero(),Ht.clone(),Vector.diag(6*Yt),0,0,0,null,null,PIXI.BLEND_MODES.ADD),Vt=Math.round(Tools.rand(5,10)*Yt),zt=0;zt<Vt;zt++)qt=Tools.randInt(1,4),Kt=Tools.randCircle(),Zt=Tools.rand(1,3)*Yt,Jt=Tools.rand(-.1,.1),$t=Tools.rand(.1,.3)*Yt,Gt.explosions.addParticle(Xt.EXPLOSION_HOT_SMOKE,"hotsmoke_"+qt,Vector.create(Kt,Zt),Ht.clone(),Vector.diag($t),0,Jt,Tools.randCircle(),16739073,null,PIXI.BLEND_MODES.ADD)},Particles.missileSmoke=function(Ht,Yt,Wt){var jt=[null,Xt.MISSILE,Xt.MISSILE_FAT,Xt.MISSILE_SMALL,null,Xt.MISSILE,Xt.MISSILE,Xt.MISSILE][Ht.type],zt=Ht.spriteRot+Math.PI,Vt=Vector.createOff(Ht.pos,zt,Yt),qt=.2*(Wt=Wt||1),Kt=Tools.rand(-.1,.1),Qt=Vector.create(zt+Kt,5*Wt),Zt=Tools.randInt(1,16),Jt=Tools.rand(-.1,.1);Tools.randCircle(),Gt.smoke.addParticle(jt,"smoke_"+Zt,Qt.clone(),Vt.clone(),new Vector(1.25*qt,4*qt),1,Jt,zt,16775590,null,null,null,Wt),Gt.shadows.addParticle(jt,"smokeshadow_"+Zt,Qt.clone(),Vt.clone(),new Vector(1.25*qt,4*qt),1,Jt,zt,null,null,null,null,Wt)},Particles.planeBoost=function(Ht,Yt){var Wt=Ht.rot+Ht.state.thrustDir/2+Math.PI,jt=Vector.createOff(Ht.pos,Wt,Yt?40:-20),zt=Tools.rand(-.1,.1),Vt=Yt?0:Math.PI,qt=Vector.create(Wt+zt+Vt,6),Kt=Tools.randInt(1,16),Qt=Tools.rand(-.1,.1);Tools.randCircle(),Gt.smoke.addParticle(Xt.MISSILE,"smoke_"+Kt,qt.clone(),jt.clone(),new Vector(.3,1.2),1,Qt,Wt,16775590,null,null,null,1.2),Gt.shadows.addParticle(Xt.MISSILE,"smokeshadow_"+Kt,qt.clone(),jt.clone(),new Vector(.3,1.2),1,Qt,Wt,null,null,null,null,1.2)},Particles.spiritShockwave=function(Ht){for(var jt=0,Yt,Wt;40>jt;jt++)Wt=2*(jt/40)*Math.PI,Yt=Tools.randInt(1,16),Gt.smoke.addParticle(Xt.SHOCKWAVE_SMOKE,"smoke_"+Yt,Vector.create(Wt,8),Ht.clone(),Vector.diag(2),0,.4,Tools.randCircle());Gt.smoke.addParticle(Xt.SHOCKWAVE_INNER,"shockwave",Vector.zero(),Ht.clone(),Vector.zero(),0,0,-.35+Math.PI),Gt.smoke.addParticle(Xt.SHOCKWAVE_OUTER,"shockwave",Vector.zero(),Ht.clone(),Vector.zero(),0,0,-.35)},Particles.count=function(){var Ht=0;for(var Yt in Gt)Ht+=Gt[Yt].particles.length;return Ht};var Xt={MISSILE:0,MISSILE_FAT:1,MISSILE_SMALL:2,SHOCKWAVE_SMOKE:3,SHOCKWAVE_INNER:4,SHOCKWAVE_OUTER:5,EXPLOSION_FLASH:6,EXPLOSION_FLASH_BIG:7,EXPLOSION_SMOKE:8,EXPLOSION_HOT_SMOKE:9,EXPLOSION_SPARK:10,FRAGMENT_SMOKE:11,PLANE_DAMAGE:12,EMITTER_EXPLOSION_FRAGMENT:100};Particles.PTYPE=Xt}(),function(){var Bt={},Gt={},Xt=null,Ht=!1,Yt=0,Wt=!1,jt=-1,zt=0,Vt=!1,qt=0,Kt=!1,Qt=null,Zt=!1,Jt=null,$t=!1,en=!1,tn=!1,nn=null,rn=0,an=!1,on=!1,sn=null,dn=!1,ln=null,un={x:0,y:0,width:0,height:0},pn={alert:null,information:null,default:null,destroyed:null},cn={alert:!1,information:!1,default:!1,destroyed:!1},hn={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},fn=!1,gn={},mn=[],yn=0,_n={1:["Predator",80,50,75,60,"BOOST","Temporarily increases speed by burning energy"],2:["Goliath",30,100,30,100,"REPEL","Repels enemy aircraft and missiles"],3:["Mohawk",100,40,100,40,"STRAFE","Enables sideways flight"],4:["Tornado",60,70,50,80,"MULTIFIRE","Launches 3 missiles at the same time"],5:["Prowler",50,70,40,60,"STEALTH","Becomes invisible to enemy aircraft"],101:["Speed"],102:["Defense"],103:["Energy Regen"],104:["Missile Speed"]},bn=["tf","pepe","clap","lol","bro","kappa","cry","rage"],xn=["","Shield","Inferno"];game.tooltipValues=_n,UI.show=function(Dn,In){$(Dn).css({display:In?"inline-block":"block"})},UI.hide=function(Dn){$(Dn).css({display:"none"})},UI.isEmote=function(Dn,In){for(var On=0;On<bn.length;On++)if(In){if(Dn===":"+bn[On]+":")return bn[On];}else if(Dn===bn[On])return bn[On];return!1},UI.serverMessage=function(Dn){var In="alert";2==Dn.type&&(In="information"),UI.showMessage(In,Dn.text,Dn.duration)},UI.showMessage=function(Dn,In,On){$("#msg-"+Dn).removeClass("hidemsg").removeClass("popmsg"),$("#msg-"+Dn).html(In);var Ln=$("#msg-"+Dn).height();"default"!=Dn&&"destroyed"!=Dn||$("#msg-"+Dn).css({"margin-top":"-"+Math.round(Ln/2)+"px"}),$("#msg-"+Dn).addClass("popmsg"),cn[Dn]=!0,clearTimeout(pn[Dn]),pn[Dn]=setTimeout(UI.hideMessage,On||2e3,Dn)},UI.hideMessage=function(Dn){$("#msg-"+Dn).addClass("hidemsg"),cn[Dn]=!1,pn[Dn]=setTimeout(function(In){$("#msg-"+Dn).removeClass("popmsg").removeClass("hidemsg"),$("#msg-"+In).html("")},2500,Dn)},UI.wipeAllMessages=function(){for(var Dn in cn)cn[Dn]&&UI.showMessage(Dn,"",100)},UI.updateMyLevel=function(Dn){game.myLevel=Dn,$("#score-rank").html(Dn),$("#lifetime-rank").html(Dn)},UI.newScore=function(Dn){if(Dn.id!=game.myID)return!1;var In=Dn.score-game.myScore,On="";if(1>Math.abs(In)&&(In=!1),game.myScore=Dn.score,Dn.score!=hn.score&&(hn.score=Dn.score,$("#score-score").html(Dn.score)),Dn.upgrades!=hn.upgrades){var Ln=Dn.upgrades-hn.upgrades,kn=-1!=hn.upgrades;if(hn.upgrades=Dn.upgrades,$("#score-upgrades").html(Dn.upgrades),Pn(),kn&&0<Ln){if(Sound.powerup(4,null),fn&&(fn.msg+="<br>"),cn.default)return On+="&nbsp;&nbsp;<span class=\"upgrade\">+"+Ln+"</span>",void $("#alert-update").append(On);On+="<span id=\"alert-update\"><span class=\"upgrade\">+"+Ln+"<span class=\"bold\"> upgrade</span></span></span>"}}if(Dn.earnings!=hn.earnings&&0!=game.myLevel){hn.earnings=Dn.earnings,$("#lifetime-totalbounty").html(Dn.earnings);var Nn=Math.ceil(Tools.rankToEarnings(game.myLevel+1)-Dn.earnings);$("#lifetime-nextbounty").html("+"+Nn)}if(Dn.totalkills!=hn.kills||Dn.totaldeaths!=hn.deaths){var Fn=0==Dn.totalkills||0==Dn.totaldeaths?"-":(Dn.totalkills/Dn.totaldeaths).toFixed(2);$("#lifetime-kdratio").html(Fn)}Dn.totalkills!=hn.kills&&(hn.kills=Dn.totalkills,$("#lifetime-kills").html(Dn.totalkills)),Dn.totaldeaths!=hn.deaths&&(hn.deaths=Dn.totaldeaths,$("#lifetime-deaths").html(Dn.totaldeaths)),In&&(fn&&(fn.msg+="<br>"),On+=UI.getScoreString(In)),fn?(UI.showMessage(fn.type,fn.msg+On,fn.duration),fn=!1):""!=On&&UI.showMessage("default",On,3e3)},UI.getScoreString=function(Dn,In){var Ln="positive",kn="+";return 0>Dn&&(Ln="negative",kn="-"),In&&(Ln=In),"<span id=\"alert-update\" class=\""+Ln+"\">"+kn+Math.abs(Dn)+"</span>"};var vn=function(Dn){Dn.sprite.position.set(game.screenX-config.minimapPaddingX-config.minimapSize*((16384-Dn.x)/32768),game.screenY-config.minimapPaddingY-config.minimapSize/2*((8192-Dn.y)/16384))};UI.wipeAllMinimapMobs=function(){for(var Dn in Bt)game.graphics.layers.ui1.removeChild(Bt[Dn].sprite),Bt[Dn].sprite.destroy(),delete Bt[Dn]},UI.showSpectator=function(Dn){if(!dn){var In=config.mobile?" class=\"mobile\"":"";$("body").append("<div id=\"spectator\""+In+"></div>"),dn=!0}$("#spectator").html(Dn),Input.addTouchRejection("#spectator")},UI.hideSpectator=function(){dn&&($("#spectator").remove(),dn=!1)},UI.addPowerup=function(Dn,In){null!=sn&&clearTimeout(sn);var On="<div class=\"powerup\" id=\"powerup-"+Dn+"\"><div class=\"percent "+(1==Dn?"shield":"rampage")+"\" id=\"powerup-"+Dn+"-percent\" style=\"transition: width "+In+"ms linear;\"></div><div class=\"name\">"+xn[Dn]+"</div></div>";$("#powerups").html(On),$("#powerup-"+Dn+"-percent").width(),$("#powerup-"+Dn+"-percent").css({width:"7%"}),sn=setTimeout(function(){$("#powerup-"+Dn).remove()},In)},UI.resetPowerups=function(){$("#powerups").html("")},UI.changeMinimapTeam=function(Dn,In){if(null!=Bt[Dn]&&null!=Bt[Dn].sprite){var On=1==In?"minimapBlue":"minimapMob";Bt[Dn].sprite.texture=Textures.getNamed(On)}},UI.scoreboardUpdate=function(Dn,In,On){for(var Ln in Bt)game.graphics.layers.ui1.removeChild(Bt[Ln].sprite),game.graphics.layers.ui2.removeChild(Bt[Ln].sprite),game.graphics.layers.ui3.removeChild(Bt[Ln].sprite),Bt[Ln].sprite.destroy(),delete Bt[Ln];for(var Gn=0,Xn="",Hn={},Yn=!1,Wn=0,jn={},zn="",Vn="",qn="",Kn=0,kn,Nn,Fn,Bn,Un;Kn<In.length;Kn++)null!=(kn=Players.get(In[Kn].id))&&(jn=Tools.decodeMinimapCoords(In[Kn].x,In[Kn].y),kn.scorePlace=Kn+1,kn.lowResPos.x=jn.x,kn.lowResPos.y=jn.y,kn.removedFromMap=0==In[Kn].x&&0==In[Kn].y,In[Kn].id==game.myID?Wn=Kn+1:0==In[Kn].x&&0==In[Kn].y||(Hn[kn.id]=!0,null==Bt[In[Kn].id]?(qn="minimapMob",2==game.gameType&&1==kn.team&&(qn="minimapBlue"),0<In.length&&kn.id==In[0].id&&(qn="minimap1"),1<In.length&&kn.id==In[1].id&&(qn="minimap2"),2<In.length&&kn.id==In[2].id&&(qn="minimap3"),window.target==kn.id&&(qn="minimapTarget"),Bt[In[Kn].id]={sprite:Textures.init(qn),x:jn.x,y:jn.y}):(Bt[In[Kn].id].x=jn.x,Bt[In[Kn].id].y=jn.y),vn(Bt[In[Kn].id])));for(var Qn in Bt)null==Hn[Qn]&&(game.graphics.layers.ui1.removeChild(Bt[Qn].sprite),Bt[Qn].sprite.destroy(),delete Bt[Qn]);if(0!=Wn){for(On=On?Tools.clamp(On,1,Dn.length):Dn.length,Kn=0;Kn<On&&(null==(kn=Players.get(Dn[Kn].id))||(Gn++,Nn=1==Gn?"<span class=\"badge scoreboard gold\"></span>":2==Gn?"<span class=\"badge scoreboard silver\"></span>":3==Gn?"<span class=\"badge scoreboard bronze\"></span>":Gn+".",Fn=kn.me()?" sel":"",Bn=Dn[Kn].score,Un=Dn[Kn].level,Wn>On&&Gn==On-1&&(Xn+="<div class=\"line dottedline\">&middot; &middot; &middot;</div>",!0,kn=Players.get(game.myID),Nn=Wn+".",Bn=game.myScore,Un=game.myLevel,Fn=" sel",Yn=!0),zn="",2==game.gameType&&(zn=" team-"+kn.team),Vn="",4==(Nn+"").length&&(Vn=" bigger"),Xn+="<div class=\"line"+Fn+"\" player-id=\""+kn.id+"\"><span class=\"place"+Vn+"\">"+Nn+"</span><span class=\"flag small flag-"+kn.flag+"\"></span><span class=\"nick"+zn+"\">"+(kn.removedFromMap?UI.escapeHTML(kn.name).strike():UI.escapeHTML(kn.name))+"</span>"+(0==Un?"":"<span class=\"holder\">&nbsp;<span class=\"rank\">"+Un+"</span></span>")+"<span class=\"score\">"+Tn(Bn)+"</span></div>",!Yn));Kn++);$("#scoreboard").html(Xn),$("#scoreboard div").click(function(Zn){var Jn=$(Zn.currentTarget).attr("player-id");parseInt(Jn)!=Math.NaN&&(window.target=parseInt(Jn))})}};var Tn=function(Dn){var In="";Dn+="";for(var On=0;On<Dn.length;On++)In+="<span>"+Dn[On]+"</span>";return In};UI.toggleChatBox=function(Dn){if(!config.mobile)if(Ht){if(Ht=!1,Dn){var In=$("#chatinput").val();""!==In&&""!==In.trim()&&(UI.parseCommand(In.trim())||Network.sendChat(In)),Sn()}UI.hide("#chatinput"),$("#chatinput").val(""),$("#chatinput").blur()}else Vt&&UI.maximizeChat(),Input.clearKeys(!0),Ht=!0,UI.show("#chatinput"),$("#chatinput").focus()},UI.shortcutChat=function(Dn){Ht||($("#chatinput").val(Dn),UI.toggleChatBox())};var Sn=function(){Wt||(Wt=!0,$("#chat-0").length&&$("#chat-0").remove())};UI.parseCommand=function(Dn){if("/"!==Dn[0])return!1;var In=Dn.split(" "),On=In[0].substr(1).toLowerCase();if(0==On.length)return!1;if("s"===On){var Ln=Dn.indexOf(" "),kn=Dn.substr(Ln+1);0<kn.length&&Network.sendSay(kn)}else if("t"===On){Ln=Dn.indexOf(" ");var Nn=Dn.substr(Ln+1);0<Nn.length&&Network.sendTeam(Nn)}else if("ignore"===On)null==(Fn=Players.getByName(Cn(In[1])))?UI.addChatMessage("Unknown player"):UI.chatIgnore(Fn.id);else if("unignore"===On)null==(Fn=Players.getByName(Cn(In[1])))?UI.addChatMessage("Unknown player"):UI.chatUnignore(Fn);else if("votemute"===On)null==(Fn=Players.getByName(Cn(In[1])))?UI.addChatMessage("Unknown player"):UI.chatVotemute(Fn);else if("w"===On)3<=In.length?UI.chatWhisper(In[1],Dn.substr(4+In[1].length)):UI.addChatMessage("Usage: /w player message");else if("spectate"===On){var Fn;null==(Fn=Players.getByName(Cn(In[1])))?UI.addChatMessage("Unknown player"):Network.sendCommand("spectate",Fn.id+"")}else"flag"===On||"flags"===On?2==In.length?Network.sendCommand("flag",Dn.substr(On.length+2)):UI.addChatMessage("Type /flag XX where XX is the 2-letter ISO code of a country",!0):"emotes"===On?UI.addChatMessage("Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage",!0):"help"===On?UI.toggleHelp():"debug"===On||(UI.isEmote(On)?Network.sendSay(":"+On+":"):Network.sendCommand(On,Dn.substr(On.length+2)));return!0},UI.addChatLine=function(Dn,In,On,Ln=!0){if(!Gt[Dn.id]){if(Ln&&(In=UI.escapeHTML(In)),Yt++,0==On){var kn="";2==game.gameType&&(kn="style = 'color: "+(1==Dn.team?"#4076E2":"#EA4242")+";' ");var Nn="<div id=\"chat-"+Yt+"\" class=\"line\"><span class=\"playersel\" data-playerid=\""+Dn.id+"\"><span class=\"flag small flag-"+Dn.flag+"\"></span><span class=\"nick\" "+kn+" >"+UI.escapeHTML(Dn.name)+"</span></span><span class=\"text\">"+In+"</span></div>"}else if(1==On||2==On){var Fn=1==On?"TO":"FROM";2==On&&(ln=An(Dn.name)),Nn="<div id=\"chat-"+Yt+"\" class=\"line\"><span class=\"tag whisper\">"+Fn+"</span><span class=\"playersel\" data-playerid=\""+Dn.id+"\"><span class=\"nick green\">"+UI.escapeHTML(Dn.name)+"</span></span><span class=\"text green\">"+In+"</span></div>",jt=-1}else Nn="<div id=\"chat-"+Yt+"\" class=\"line\"><span class=\"tag team\">TEAM</span><span class=\"playersel\" data-playerid=\""+Dn.id+"\"><span class=\"nick blue\">"+UI.escapeHTML(Dn.name)+"</span></span><span class=\"text blue\">"+In+"</span></div>",jt=-1;var Bn="#chat-"+(Yt-config.maxChatLines);if($(Bn).length&&$(Bn).remove(),$("#chatlines").append(Nn),Vt)qt++,$("#chatunreadlines").html(qt),1==qt&&UI.show("#chatunreadlines",!0);else{var Un=$("#chatbox");1!=On&&2!=On&&Dn.id!=game.myID&&Un.is(":hover")||(Un.perfectScrollbar("update"),Un.scrollTop(Un[0].scrollHeight))}}},UI.addChatMessage=function(Dn,In){zt=0,jt=-1;var On="<div id=\"chat-"+ ++Yt+"\" class=\"line\">"+(In?"":"<span class=\"nick\">\u26A0</span>")+"<span class=\"text\">"+Dn+"</span></div>",Ln="#chat-"+(Yt-config.maxChatLines);$(Ln).length&&$(Ln).remove(),$("#chatlines").append(On);var kn=$("#chatbox");kn.perfectScrollbar("update"),kn.scrollTop(kn[0].scrollHeight)},UI.showChatLevel=function(Dn){var In=null;2==Dn?In="Type /flag XX where XX is the 2-letter ISO code of a country":3==Dn?In="Emotes available: /tf /pepe /clap /lol /bro /kappa /cry /rage":4==Dn&&(In="Flag Pack #1: communist confederate imperial rainbow jolly"),null!=In&&UI.addChatMessage(In,!0)},UI.updateStats=function(Dn){var In=Dn.playerstotal,On="";On+="<div class=\"item\"><span class=\"icon-container\"><div class=\"icon players\"></div></span><span class=\"greyed\">"+Dn.playersgame+"&nbsp;/&nbsp;</span>"+In+"<span class=\"icon-container padded\"><div class=\"icon ping\"></div></span>"+Dn.ping+"<span class=\"millis\">ms</span></div>",$("#gameinfo").html(On),game.ping=Dn.ping},UI.sayLine=function(Dn){Players.say(Dn)},UI.escapeHTML=function(Dn){return(""+Dn).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;").replace(/\//g,"&#x2F;").replace(/`/g,"&#x60;")};var En=function(){var Dn=window.innerWidth,In=window.innerHeight;Dn==game.screenX&&In==game.screenY||(clearTimeout(Xt),Xt=setTimeout(function(){Graphics.resizeRenderer(Dn,In)},250))};UI.controlKey=function(Dn,In,On){if(game.state!=Network.STATE.PLAYING)return!0;if(On)if(13!=Dn){if(27==Dn)return Ht&&UI.toggleChatBox(!1),void UI.closeAllPanels();191==Dn?UI.shortcutChat("/"):75==Dn?Input.toggleKeybinds():"SHOWSCORE"===In?UI.toggleScore():"MAINMENU"===In?UI.toggleMainMenu():"SHOWGAMES"===In?Games.toggleGames():"FULLSCREEN"===In?(Graphics.toggleFullscreen(),Input.clearKeys()):"MINIMIZECHAT"===In?UI.minimizeChat():"MAXIMIZECHAT"===In?UI.maximizeChat():"SAY"===In?UI.shortcutChat("/s "):"TEAM"===In?UI.shortcutChat("/t "):"REPLY"===In?null!=ln&&UI.shortcutChat("/w "+ln+" "):"SPECTATE"===In?Network.spectateForce():"UPGRADE1"===In?UI.selectUpgrade(1):"UPGRADE2"===In?UI.selectUpgrade(2):"UPGRADE3"===In?UI.selectUpgrade(3):"UPGRADE4"===In?UI.selectUpgrade(4):"SOUND"===In?Sound.toggle():"HELP"===In?UI.toggleHelp():"INVITE"===In?UI.toggleInvite():"MOUSEMODE"===In?Input.toggleMouse():void 0}else UI.toggleChatBox(!0)},UI.chatBoxOpen=function(){return Ht},UI.setupMinimap=function(){game.graphics.gui.minimap=Textures.init("minimap"),game.graphics.gui.minimap_box=Textures.init("minimapBox"),UI.resizeMinimap(),UI.visibilityMinimap(!1)},UI.visibilityMinimap=function(Dn){game.graphics.gui.minimap.visible=Dn,game.graphics.gui.minimap_box.visible=Dn},UI.resizeMinimap=function(){for(var Dn in game.graphics.gui.minimap.scale.set(config.minimapSize/512),game.graphics.gui.minimap.position.set(game.screenX-config.minimapPaddingX,game.screenY-config.minimapPaddingY),game.graphics.gui.minimap_box.scale.set(.03+2*config.minimapSize*(game.screenX/game.scale/32768)/64,.03+config.minimapSize*(game.screenY/game.scale/16384)/64),Bt)vn(Bt[Dn]);Games.update(!0)},UI.setupHUD=function(){game.graphics.gui.hudHealth_shadow=Textures.init("hudHealth_shadow"),game.graphics.gui.hudHealth=Textures.init("hudHealth"),game.graphics.gui.hudHealth_mask=Textures.init("hudHealth_mask"),game.graphics.gui.hudHealth_mask.blendMode=PIXI.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudHealth.rotation=-1.5,game.graphics.gui.hudHealth.position.set(330,174),game.graphics.gui.hudHealth_mask.position.set(330,174),game.graphics.gui.hudEnergy_shadow=Textures.init("hudEnergy_shadow"),game.graphics.gui.hudEnergy=Textures.init("hudEnergy"),game.graphics.gui.hudEnergy_mask=Textures.init("hudEnergy_mask"),game.graphics.gui.hudEnergy_mask.blendMode=PIXI.BLEND_MODES.LUMINOSITY,game.graphics.gui.hudEnergy.position.set(-250,174),game.graphics.gui.hudEnergy_mask.position.set(-250,174),UI.resizeHUD(),UI.visibilityHUD(!1)},UI.visibilityHUD=function(Dn){game.graphics.gui.hudHealth_shadow.visible=Dn,game.graphics.gui.hudHealth.visible=Dn,game.graphics.gui.hudEnergy_shadow.visible=Dn,game.graphics.gui.hudEnergy.visible=Dn},UI.resizeHUD=function(){var Dn=.5*game.scale,In=game.halfScreenX-30*game.scale,On=game.halfScreenX+30*game.scale;game.graphics.gui.hudHealth_shadow.scale.set(Dn),game.graphics.gui.hudEnergy_shadow.scale.set(Dn),game.graphics.gui.hudHealth_shadow.position.set(In,game.halfScreenY),game.graphics.gui.hudEnergy_shadow.position.set(On,game.halfScreenY),game.graphics.gui.hudSpriteHealth.scale.set(Dn),game.graphics.gui.hudSpriteHealth.position.set(In,game.halfScreenY),game.graphics.gui.hudSpriteEnergy.scale.set(Dn),game.graphics.gui.hudSpriteEnergy.position.set(On,game.halfScreenY)},UI.selectAircraft=function(Dn){Network.sendCommand("respawn",Dn+"")},UI.aircraftSelected=function(Dn){for(var In=0==game.myGraphicsSet?"teamImperial":"teamRebel",On=1;5>=On;On++)$("#selectaircraft-"+On).removeClass("teamImperial").removeClass("teamRebel").addClass(In);SWAM.updateShipNames(),Dn=parseInt(Dn);for(var On=1;5>=On;On++)On==Dn?$("#selectaircraft-"+On).addClass("sel"):$("#selectaircraft-"+On).removeClass("sel")},UI.killed=function(Dn){var In=null==Dn.level?"":"<span class=\"level\">"+Dn.level+"</span>";(1500<game.time-yn||6<=mn.length)&&(mn=[]),yn=game.time,mn.push([Dn.flag,Dn.name,In]);for(var On="",Ln="",kn=0;kn<mn.length;kn++)Ln=mn[kn][1],1!=mn.length&&10<Ln.length&&(Ln=Ln.substr(0,10)+"..."),On+="<span class=\"player\"><span class=\"flag big flag-"+mn[kn][0]+"\"></span>"+UI.escapeHTML(Ln)+mn[kn][2]+"</span>";fn={type:"default",duration:3e3,msg:"You have destroyed"+On}},UI.killedBy=function(Dn){var In=null==Dn.level?"":"<span class=\"level\">"+Dn.level+"</span>";fn={type:"destroyed",duration:3e3,msg:"Destroyed by<span class=\"playerbig\"><span class=\"flag big flag-"+Dn.flag+"\"></span>"+UI.escapeHTML(Dn.name)+In+"</span>"}},UI.errorHandler=function(Dn){switch(Dn.error){case 1:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Packet flooding detected",2e4),Network.receivedError(Dn.error);break;case 2:UI.showMessage("alert","<span class=\"info\">BANNED</span>Packet flooding detected",2e4),Network.receivedError(Dn.error);break;case 3:UI.showMessage("alert","<span class=\"info\">BANNED</span>You have been globally banned",2e4),Network.receivedError(Dn.error);break;case 4:Network.receivedError(Dn.error),Games.redirRoot();break;case 5:UI.showMessage("alert","<span class=\"info\">RESPAWN</span>Full health and 2 seconds of inactivity required",3e3);break;case 6:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>AFK for more than 10 minutes<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",72e5),Network.receivedError(Dn.error);break;case 7:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>You have been kicked out",2e4),Network.receivedError(Dn.error);break;case 8:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Invalid login data",2e4),Network.receivedError(Dn.error);break;case 9:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Incorrect protocol level<br>Please clear your browser cache and refresh",2e4),Network.receivedError(Dn.error);break;case 10:UI.showMessage("alert","<span class=\"info\">BANNED</span>Account banned",2e4),Network.receivedError(Dn.error);break;case 11:UI.showMessage("alert","<span class=\"info\">DISCONNECTED</span>Account already logged in<br><span class=\"button\" onclick=\"Network.reconnect()\">RECONNECT</span>",2e4),Network.receivedError(Dn.error);break;case 12:UI.showMessage("alert","<span class=\"info\">RESPAWN</span>Cannot respawn or change aircraft in a Battle Royale game",3e3);break;case 13:UI.showMessage("alert","<span class=\"info\">SPECTATE</span>Full health and 2 seconds of inactivity required",3e3);break;case 20:UI.showMessage("information","<span class=\"info\">UPGRADE</span>Not enough upgrade points",3e3);break;case 30:UI.addChatMessage("Chat throttled to prevent spamming");break;case 31:UI.showMessage("alert","<span class=\"info\">THROTTLED</span>Flag change too fast");break;case 100:UI.addChatMessage("Unknown command");}},UI.showCommandReply=function(Dn){if(0==Dn.type)UI.addChatMessage(UI.escapeHTML(Dn.text));else{var In=JSON.stringify(JSON.parse(Dn.text),null,"    "),On="<div class=\"close\" onclick=\"$(this).parent().remove()\"></div><div class=\"text\"><pre>"+UI.escapeHTML(In)+"</pre></div>";$("body").append("<div id=\"debugpopup\" oncontextmenu=\"event.stopPropagation()\">"+On+"</div>")}},UI.updateHUD=function(Dn,In,On){Dn=Tools.clamp(Dn,0,1),In=Tools.clamp(In,0,1),game.graphics.gui.hudHealth.rotation=-1.1*(1-Dn),game.graphics.gui.hudEnergy.rotation=Math.PI+1.1*(1-In),game.graphics.gui.hudHealth.tint=.5<Dn?Tools.colorLerp(13487404,2591785,2*(Dn-.5)):Tools.colorLerp(12201261,13487404,2*Dn);var Ln=3374821;On&&(Ln=In<config.ships[On.type].energyLight?2841755:3374821),game.graphics.gui.hudEnergy.tint=Ln},UI.minimizeChat=function(Dn){Vt||(Ht&&UI.toggleChatBox(),Vt=!0,qt=0,UI.hide("#chatbox"),UI.hide("#chatunreadlines"),UI.show("#maximizechat"),Dn&&Dn.stopPropagation())},UI.maximizeChat=function(){if(Vt){Vt=!1,UI.hide("#maximizechat"),UI.hide("#chatunreadlines"),UI.show("#chatbox");var Dn=$("#chatbox");Dn.scrollTop(Dn[0].scrollHeight)}},UI.closeScore=function(){Kt&&(UI.hidePanel("#scoredetailed"),Kt=!1,clearInterval(Qt))},UI.openScore=function(){Kt||(UI.closeAllPanels("score"),UI.showPanel("#scoredetailed"),Kt=!0,Network.getScores(),clearInterval(Qt),Qt=setInterval(Network.getScores,5e3))},UI.toggleScore=function(){Kt?UI.closeScore():UI.openScore()},UI.openLogin=function(){on||(UI.showPanel("#loginselector"),on=!0,Games.closeDropdowns())},UI.closeLogin=function(){on&&(UI.hidePanel("#loginselector"),on=!1)},UI.showPanel=function(Dn){var In=.9,On=1;config.phone&&(In*=.7,On*=.7),$(Dn).css({display:"block",opacity:"0",transform:"scale("+In+")","pointer-events":"auto"}),$(Dn).width(),$(Dn).css({opacity:"1",transform:"scale("+On+")",transition:"all 0.75s cubic-bezier(0.23, 1, 0.32, 1)"}),"#custom-msg"!=Dn&&Sound.UIClick()},UI.hidePanel=function(Dn,In,On){if("#custom-msg"!=Dn||$("#custom-msg").length){var Ln=.9;config.phone&&(Ln*=.7),$(Dn).css({opacity:"0",transform:"scale("+Ln+")","pointer-events":"none"}),Sound.UIClick(),setTimeout(function(kn){if("#mainmenu"===kn?!en:"#scoredetailed"===kn?!Kt:"#howtoplay"===kn?!$t:"#invitefriends"===kn?!an:"#loginselector"===kn?!on:!In){if(On)return void $(kn).remove();$(kn).css({display:"none",transform:"none",transition:"none"})}},800,Dn)}},UI.openInvite=function(){an||(UI.closeAllPanels("invite"),game.inviteLink="https://airma.sh/#"+game.playRegion+"-"+game.playRoom,$("#invite-link").html(game.inviteLink),$("#invite-link").attr("href",game.inviteLink),UI.showPanel("#invitefriends"),an=!0)},UI.closeInvite=function(){an&&(UI.hidePanel("#invitefriends"),an=!1)},UI.toggleInvite=function(){an?UI.closeInvite():UI.openInvite()},UI.closeMainMenu=function(){en&&(UI.hidePanel("#mainmenu"),en=!1)},UI.updateMainMenuSettings=function(){config.settings.hidpi?$("#mainmenu-hidpi-tick").addClass("ticked"):$("#mainmenu-hidpi-tick").removeClass("ticked")},UI.openMainMenu=function(){en||(UI.closeAllPanels("mainmenu"),UI.updateMainMenuSettings(),UI.showPanel("#mainmenu"),en=!0)},UI.toggleMainMenu=function(){en?UI.closeMainMenu():UI.openMainMenu()},UI.closeAllPanels=function(Dn){"mainmenu"!==Dn&&UI.closeMainMenu(),"score"!==Dn&&UI.closeScore(),"help"!==Dn&&UI.hideHelp(),"games"!==Dn&&Games.closeGames(),"invite"!==Dn&&UI.closeInvite(),"login"!==Dn&&UI.closeLogin(),"keybinds"!==Dn&&Input.closeKeybinds(),$("#custom-msg").length&&UI.hidePanel("#custom-msg",!1,!0)};var wn=function(Dn){return 1e3>(Dn=Math.round(Dn))?Dn:1e5>Dn?(Dn/1e3).toFixed(1)+" K":1e6>Dn?Math.round(Dn/1e3)+" K":(Dn/1e6).toFixed(1)+" M"};UI.updateScore=function(Dn){if(Kt){var In=Dn.scores,On=["gold","silver","bronze"];In.sort(function(Kn,Qn){return Qn.score-Kn.score});var Ln=[["name","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["damage","Damage"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]];Dn.c==Network.SERVERPACKET.SCORE_DETAILED_BTR?Ln=[["name","&nbsp;"],["wins","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]]:Dn.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(Ln=[["name","&nbsp;"],["captures","&nbsp;"],["kills","Kills"],["deaths","Deaths"],["bounty","Bounty"],["rank","Level"],["ping","Ping"]]);for(var kn="",Nn=0;Nn<Ln.length;Nn++)kn+="<div class=\""+Ln[Nn][0]+"\">"+Ln[Nn][1]+"</div>";for(var Gn="",Xn="",Hn=-1,Yn=-1,Wn=0,Fn,Bn,Un;Wn<In.length;Wn++)null!=(Fn=Players.get(In[Wn].id))&&(Bn=2>=Wn?"&nbsp;<div class=\"badge detail "+On[Wn]+"\"></div>":Wn+1+".",Un=Fn.me()?" sel":"",Gn=Dn.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" team-"+Fn.team:Dn.c!=Network.SERVERPACKET.SCORE_DETAILED_BTR||In[Wn].alive?"":" inactive",Xn+="<div class=\"item"+Un+"\" player-id=\""+Fn.id+"\"><div class=\"name\"><div class=\"position\">",Xn+=Bn+"</div><div class=\"flag small flag-"+Fn.flag+"\"></div>",Xn+="<div class=\"player"+Gn+"\">"+(Fn.removedFromMap?UI.escapeHTML(Fn.name).strike():UI.escapeHTML(Fn.name))+"</div></div>",Dn.c==Network.SERVERPACKET.SCORE_DETAILED_BTR&&(0==In[Wn].wins?Xn+="<div class=\"wins\">&nbsp;</div>":Xn+="<div class=\"wins\">"+In[Wn].wins+"<div class=\"wins-container\">&nbsp;<div class=\"wins-icon\"></div></div></div>"),Dn.c==Network.SERVERPACKET.SCORE_DETAILED_CTF&&(0==In[Wn].captures?Xn+="<div class=\"captures\">&nbsp;</div>":Xn+="<div class=\"captures\">"+In[Wn].captures+"<div class=\"captures-container\">&nbsp;<div class=\"captures-icon\"></div></div></div>"),Xn+="<div class=\"kills\">"+In[Wn].kills+"</div>",Xn+="<div class=\"deaths\">"+In[Wn].deaths+"</div>",Dn.c==Network.SERVERPACKET.SCORE_DETAILED&&(Xn+="<div class=\"damage\">"+wn(In[Wn].damage)+"</div>"),Xn+="<div class=\"bounty\">"+In[Wn].score+"</div>",Xn+="<div class=\"rank\">"+(0==In[Wn].level?"&nbsp;":In[Wn].level)+"</div>",Xn+="<div class=\"ping\">"+In[Wn].ping+"<span class=\"ms\">ms</span></div>",Xn+="</div>",Dn.c==Network.SERVERPACKET.SCORE_DETAILED?In[Wn].damage>Hn&&(Hn=In[Wn].damage,Yn=Fn):Dn.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?In[Wn].captures>Hn&&(Hn=In[Wn].captures,Yn=Fn):In[Wn].kills>Hn&&(Hn=In[Wn].kills,Yn=Fn));var jn="",zn="";if(1<In.length&&(jn="&bull;&nbsp;&nbsp;"+In.length+" players",0<Hn)){if(Dn.c==Network.SERVERPACKET.SCORE_DETAILED)var Vn=wn(Hn),qn=" damage";else Vn=Hn+"",qn=Dn.c==Network.SERVERPACKET.SCORE_DETAILED_CTF?" capture":" kill",1<Hn&&(qn+="s");zn="<div class=\"mvpbadge\">MVP</div><div class=\"flag flag-"+Yn.flag+"\"></div><div class=\"name\">"+UI.escapeHTML(Yn.name)+"</div><div class=\"damage\">&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+Vn+qn+"</div>"}$("#scoreplayers").html(jn),$("#scoretable").html(kn),$("#scorecontainer").html(Xn),$("#scoremvp").html(zn),$("#scorecontainer div").click(function(Kn){var Qn=$(Kn.currentTarget).attr("player-id");parseInt(Qn)!=Math.NaN&&(window.target=parseInt(Qn))})}},UI.popMenu=function(Dn,In){if(game.state==Network.STATE.LOGIN)return Games.closeDropdowns(),void UI.closeLogin();In||game.state!=Network.STATE.PLAYING||UI.closeAllPanels();var On=$(Dn.target).parent().data("playerid");if(null==On&&(On=$(Dn.target).data("playerid")),null!=On&&On!=game.myID){var Ln=Players.get(On);if(null==Ln)return!0;var kn={left:"20px",top:$(Dn.target).parent()[0].getBoundingClientRect().top-166+"px"};Zt||(kn.display="block",Zt=!0);var Nn=null==Gt[Ln.id]?"Ignore":"Unignore",Fn="<div class=\"header\">"+UI.escapeHTML(Ln.name)+"</div><div class=\"item\" onclick=\"UI.contextWhisper()\">Whisper</div><div class=\"item\" onclick=\"UI.context"+Nn+"()\">"+Nn+"</div><div class=\"item\" onclick=\"UI.contextVotemute()\">Vote mute</div><div class=\"arrow\"></div>";return $("#contextmenu").html(Fn),$("#contextmenu").css(kn),Jt=Ln.id,Dn.stopPropagation(),!1}UI.closeMenu()};var An=function(Dn){return(Dn+"").replace(/&/g,"&a;").replace(/ /g,"&s;")},Cn=function(Dn){return(Dn+"").replace(/&s;/g," ").replace(/&a;/g,"&")};UI.chatWhisper=function(Dn,In){Dn=Cn(Dn);var On=Players.getByName(Dn);null==On?UI.addChatMessage("Unknown player"):Network.sendWhisper(On.id,In)},UI.chatIgnore=function(Dn){var In=Players.get(Dn);null!=In&&Dn!=game.myID&&null==Gt[In.id]&&(Gt[In.id]=!0,UI.addChatMessage("Ignoring player "+UI.escapeHTML(In.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;To unignore type /unignore "+UI.escapeHTML(An(In.name)),!0))},UI.chatUnignore=function(Dn){Gt[Dn.id]&&(delete Gt[Dn.id],UI.addChatMessage("Removed player "+UI.escapeHTML(Dn.name)+" from ignore list",!0))},UI.chatVotemute=function(Dn){if(Dn.id!=game.myID){Network.voteMute(Dn.id);var In=Math.floor(Math.sqrt(Players.count()[1]))+1;UI.addChatMessage("Voted to mute "+UI.escapeHTML(Dn.name)+"&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+In+" total votes are required",!0)}},UI.chatVotemutePass=function(Dn){UI.addChatMessage("The vote to mute "+UI.escapeHTML(Dn.name)+" has passed",!0)},UI.chatMuted=function(){UI.addChatMessage("You have been muted")},UI.contextWhisper=function(){if(null!=Jt){var Dn=Players.get(Jt);null!=Dn&&Jt!=game.myID&&UI.shortcutChat("/w "+An(Dn.name)+" ")}},UI.contextIgnore=function(){null!=Jt&&Jt!=game.myID&&UI.chatIgnore(Jt)},UI.contextUnignore=function(){if(null!=Jt){var Dn=Players.get(Jt);null!=Dn&&Jt!=game.myID&&UI.chatUnignore(Dn)}},UI.contextVotemute=function(){if(null!=Jt){var Dn=Players.get(Jt);null!=Dn&&Jt!=game.myID&&UI.chatVotemute(Dn)}},UI.closeMenu=function(){Zt&&(UI.hide("#contextmenu"),Zt=!1)},UI.nameEntered=function(){var Dn=$("#playername").val().trim();0<Dn.length?(game.myOriginalName=Dn,Games.start(Dn,!0)):Games.highlightInput("#playername")},UI.selectUpgrade=function(Dn){Network.sendCommand("upgrade",Dn+"")};var Pn=function(){for(var Dn=["","speed","defense","energy","missile"],In=1;5>In;In++)In-1,5>gn[Dn[In]]&&0<hn.upgrades?$("#selectupgrade-"+In).addClass("lighted"):$("#selectupgrade-"+In).removeClass("lighted")};UI.updateUpgrades=function(Dn,In,On){for(var kn=["","speed","defense","energy","missile"],Nn=1,Ln;5>Nn;Nn++)Ln=Nn-1,"",null!=gn[kn[Nn]]&&gn[kn[Nn]]==Dn[Ln]||(gn[kn[Nn]]=Dn[Ln],$("#selectupgrade-"+Nn+"-level").html(Dn[Ln]),tn&&rn-100==Nn&&UI.popTooltip(null,100+Nn));if(null!=On){if(0!=On){var Bn="+"+Math.round(100*(config.upgrades[kn[On]].factor[gn[kn[On]]]-1))+"% "+["","Speed","Defense","Energy Regen","Missile Speed"][On];UI.showMessage("information","<span class=\"info\">UPGRADE</span>"+Bn,3e3),Sound.playerUpgrade()}hn.upgrades=In,$("#score-upgrades").html(In)}Pn()},UI.resetUpgrades=function(){UI.updateUpgrades([0,0,0,0])},UI.popBigMsg=function(Dn){if(1==Dn)var In="<div id=\"big-message\" onclick=\"UI.closeBigMsg()\"><div class=\"msg\">Mobile mode</div><div class=\"small\">Mobile mode has touch controls and requires latest phone/tablet hardware.</div><div class=\"small nopadtop\">For the full experience please play on a PC with a physical keyboard.</div><div class=\"greyed\">Tap anywhere to close</div></div>";else In="<div id=\"big-message\"><div class=\"msg\">WebGL required</div><div class=\"small\">This game requires a WebGL enabled browser in order to run.<br>Please allow WebGL for this domain to continue.</div>";$("body").append(In)},UI.closeBigMsg=function(){$("#big-message").remove()},UI.showHelp=function(Dn){$t||(UI.closeAllPanels("help"),!0===Dn?$("#howtoplay").addClass("hide"):$("#howtoplay").removeClass("hide"),UI.showPanel("#howtoplay"),$t=!0)},UI.hideHelp=function(){$t&&(UI.hidePanel("#howtoplay"),$t=!1)},UI.toggleHelp=function(){$t?UI.hideHelp():UI.showHelp()},UI.updateSound=function(Dn){config.settings.sound?($("#settings-sound").addClass("soundon"),$("#settings-sound").removeClass("soundoff"),$("#mainmenu-sound-icon").addClass("soundon"),$("#mainmenu-sound-icon").removeClass("soundoff"),$("#mainmenu-sound-text").html("Disable Sound")):($("#settings-sound").addClass("soundoff"),$("#settings-sound").removeClass("soundon"),$("#mainmenu-sound-icon").addClass("soundoff"),$("#mainmenu-sound-icon").removeClass("soundon"),$("#mainmenu-sound-text").html("Enable Sound")),Dn&&UI.showMessage("alert","<span class=\"info\">SOUND</span>"+(config.settings.sound?"Enabled":"Disabled"),3e3)},UI.gameStart=function(Dn,In){In&&($("#login-ui").remove(),UI.show("#logosmall"),UI.show("#menu",!0),config.mobile||UI.show("#chatbox"),UI.show("#roomnamecontainer"),UI.show("#scoreboard"),UI.show("#scorebig"),UI.show("#settings"),UI.show("#sidebar"),config.mobile&&Mn(),config.settings.helpshown||(UI.showHelp(!0),config.settings.helpshown=!0,Tools.setSettings({helpshown:!0}))),UI.hide("#gamespecific"),$("#gameinfo").html("&nbsp;"),$("#gameinfo").addClass("ingame"),gn={},UI.resetUpgrades(),UI.hideSpectator(),UI.resetPowerups(),$("#open-menu").html("Connecting..."),game.myName=Dn,Network.setup()};var Mn=function(){Rn(),Graphics.toggleFullscreen(),Input.setupTouch()},Rn=function(){$("#howtoplay").addClass("mobile"),$("#howtoplay").html("<div class=\"header\">HOW TO PLAY</div><div class=\"mobile-graphic\"></div><div class=\"commands\">For the best game experience play on a PC</div>")};UI.reconnection=function(){Yt=0,jt=-1,hn={score:-1,upgrades:-1,earnings:-1,kills:-1,deaths:-1},fn=!1,gn={},Gt={},UI.resetUpgrades(),UI.resetPowerups(),UI.hideSpectator(),UI.wipeAllMinimapMobs(),UI.wipeAllMessages(),Games.wipe(),$("#gameinfo").html("&nbsp;"),$("#scoreboard").html(""),$("#chatlines").html(""),$("#score-score").html("&nbsp;"),$("#score-upgrades").html("&nbsp;"),$("#score-rank").html("-"),$("#roomname").html("&nbsp;"),$("#open-menu").html("Switching Game...")},UI.loggedIn=function(){$("#roomname").html(game.roomName),$("#scoreheader").html(game.roomName+"&nbsp;&nbsp;"),$("#open-menu").html("<span class=\"arrowdown\"></span>"+game.roomName+"&nbsp;&nbsp;<span class=\"region\">&bull;&nbsp;&nbsp;"+game.regionName+"</span>"),UI.visibilityHUD(!0),UI.visibilityMinimap(!0),UI.updateHUD(1,1)},UI.popTooltip=function(Dn,In){if(null==In)var On=Dn.data.t,Ln=Dn.currentTarget.getBoundingClientRect();else On=In;var kn="";if(100>On){var Nn=_n[On],Fn=["","Agility","Defense","Regen","Damage"];kn+="<div class=\"header\">"+Nn[0]+"</div>";for(var Bn=1;4>=Bn;Bn++)kn+="<div class=\"item\"><div class=\"name\">"+Fn[Bn]+"</div><div class=\"val\">&nbsp;<div class=\"bar\"><div class=\"progress\" style=\"width: "+Nn[Bn]+"%\"></div></div></div></div>";kn+="<div class=\"item\"><div class=\"special\">"+Nn[5]+"</div><div class=\"desc\">"+Nn[6]+"</div></div>",kn+="<div class=\"item\"><div class=\"clickto\">Click to respawn</div></div>"}else{var Un=["","speed","defense","energy","missile"],Gn=On-100,Xn=gn[Un[Gn]],Hn="+"+Math.round(100*(config.upgrades[Un[Gn]].factor[gn[Un[Gn]]]-1))+"%";(kn+="<div class=\"header\">"+_n[On][0]+"</div>",kn+="<div class=\"item\"><div class=\"level\">"+Xn+" / "+(config.upgrades[Un[Gn]].factor.length-1)+"</div>",0<Xn&&(kn+="<div class=\"percent\">"+Hn+"</div></div>"),Xn<config.upgrades[Un[Gn]].factor.length-1)?(kn+="<div class=\"item smaller\"><div class=\"requires\">Requires 1 upgrade point</div></div>",kn+="<div class=\"item smaller\"><div class=\"clickto\">Click to upgrade to "+(Hn="+"+Math.round(100*(config.upgrades[Un[Gn]].factor[gn[Un[Gn]]+1]-1))+"%")+"</div></div>"):kn+="<div class=\"item smaller\"><div class=\"clickto\">Max upgrade reached</div></div>"}kn+="<div class=\"arrow\"></div>",null==In&&$("#tooltip").css({left:Math.round(Ln.left+60)+"px",top:Math.round(Ln.top-10)+"px"}),$("#tooltip").html(kn),rn=On,null!=nn&&clearTimeout(nn),tn||(tn=!0,UI.show("#tooltip"))},UI.closeTooltip=function(){tn&&(null!=nn&&clearTimeout(nn),nn=setTimeout(function(){tn&&(UI.hide("#tooltip"),$("#tooltip").html(""),tn=!1,nn=null)},250))},UI.startDragChat=function(Dn){un.x=Dn.originalEvent.pageX,un.y=Dn.originalEvent.pageY,un.width=$("#chatbox").width()+16,un.height=$("#chatbox").height()+16,$("#chatbox").addClass("hovered"),$(window).on("mousemove",UI.dragChat),$(window).on("mouseup",UI.endDragChat)},UI.dragChat=function(Dn){var In=Dn.originalEvent.pageX,On=Dn.originalEvent.pageY;if(0!=In&&0!=On){100>game.screenY-On&&(On=game.screenY-100);var Ln=In-un.x,kn=On-un.y;$("#chatbox").css({width:un.width+Ln+"px",height:un.height-kn+"px"}),$("#minimizechatcontainer").css({width:un.width+Ln+"px",bottom:un.height-kn+"px"}),$("#chatinput").css({width:un.width+Ln-12+"px",bottom:un.height-kn+20+"px"}),$("#radioPanel").css({bottom:un.height-kn+20+"px"})}},UI.endDragChat=function(){$("#chatbox").removeClass("hovered"),$(window).off("mousemove",UI.dragChat),$(window).off("mouseup",UI.endDragChat)},UI.setup=function(){$(window).resize(En),$(window).on("orientationchange",En),$(window).on("contextmenu",function(In){return UI.popMenu(In,!0),In.preventDefault(),!1}),$(window).on("focus",Input.gameFocus),$(window).on("blur",Input.gameBlur),$(window).on("click",UI.popMenu),$("#minimizechat").on("click",UI.minimizeChat),$("#maximizechat").on("click",UI.maximizeChat),$("#viewscore").on("click",function(In){game.state==Network.STATE.PLAYING&&(UI.openScore(),In.stopPropagation())}),$("#selectaircraft-1").on("click",function(){UI.selectAircraft(1)}),$("#selectaircraft-2").on("click",function(){UI.selectAircraft(2)}),$("#selectaircraft-3").on("click",function(){UI.selectAircraft(3)}),$("#selectaircraft-4").on("click",function(){UI.selectAircraft(4)}),$("#selectaircraft-5").on("click",function(){UI.selectAircraft(5)}),$("#mainmenu-fullscreen").on("click",Graphics.toggleFullscreen),$("#mainmenu-invite").on("click",UI.openInvite),$("#mainmenu-score").on("click",UI.openScore),$("#mainmenu-game").on("click",Games.popGames),$("#mainmenu-hidpi").on("click",Graphics.toggleHiDPI),$("#mainmenu-sound").on("click",Sound.toggle),config.mobile?($("#mainmenu-keybinds-text").html("<br>How To Play"),$("#mainmenu-keybinds").on("click",UI.toggleHelp),$(".keybind").css({display:"none"})):$("#mainmenu-keybinds").on("click",Input.openKeybinds),$("#settings-mainmenu").on("click",function(In){UI.toggleMainMenu(),In.stopPropagation()}),$("#settings-sound").on("click",function(In){Sound.toggle(),In.stopPropagation()}),$("#mainmenu").on("click",function(In){In.stopPropagation()}),$("#scoredetailed").on("click",function(In){In.stopPropagation()}),$("#invitefriends").on("click",function(In){In.stopPropagation()}),$("#keybinds").on("click",function(In){In.stopPropagation()}),$("#invite-link").on("contextmenu",function(In){In.stopPropagation()}),$("#resetbinds").on("click",Input.resetBinds),config.mobile||($("#chatbox").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),$("#chatinput").on("blur",function(){Ht&&UI.toggleChatBox(!1)}),$("#resizechat").on("mousedown",UI.startDragChat)),$("#scorecontainer").perfectScrollbar({suppressScrollX:!0,handlers:["click-rail","drag-scrollbar","wheel","touch"]}),$("#selectupgrade-1").on("click",function(){UI.selectUpgrade(1)}),$("#selectupgrade-2").on("click",function(){UI.selectUpgrade(2)}),$("#selectupgrade-3").on("click",function(){UI.selectUpgrade(3)}),$("#selectupgrade-4").on("click",function(){UI.selectUpgrade(4)});var Dn;for(Dn=1;5>=Dn;Dn++)$("#selectaircraft-"+Dn).on("mouseenter",{t:Dn},UI.popTooltip),$("#selectaircraft-"+Dn).on("mouseleave",UI.closeTooltip);for(Dn=1;4>=Dn;Dn++)$("#selectupgrade-"+Dn).on("mouseenter",{t:100+Dn},UI.popTooltip),$("#selectupgrade-"+Dn).on("mouseleave",UI.closeTooltip);$("#playbutton").on("click",function(){Sound.UIClick(),UI.nameEntered()}),$("#playername").on("keypress",function(In){13===In.which&&UI.nameEntered()}),window.onerror=function(In,On,Ln,kn,Nn){game.state!==Network.STATE.PLAYING&&game.state!==Network.STATE.CONNECTING||Tools.handleError({msg:In,url:On,lineNo:Ln,columnNo:kn,error:Nn})}}}(),function(){var Bt=!1,Gt=!1,Xt=!1,Ht=["","Free For All","Capture The Flag","Battle Royale"],Yt=["","ffa","ctf","br"],Wt=0,jt={},zt=0,Vt=null,qt=null,Kt=!1,Qt=!1,Zt=null,Jt=[],$t=!1,en={},tn={},nn=null,rn=!1,an={radius:0,pos:Vector.zero(),speed:0},on={2:"Custom country flags",3:"Emotes",4:"Flag Pack #1"};Games.setup=function(){$("#playregion").on("click",function(Tn){Games.updateRegion(!0,Tn)}),$("#playtype").on("click",function(Tn){Games.updateType(!0,Tn)}),$("#open-menu").on("click",function(Tn){Games.popGames(),Tn.stopPropagation()}),$("#gameselector").on("click",function(Tn){Tn.stopPropagation()}),$("#invite-copy").on("click",Games.copyInviteLink),$("#loginbutton").on("click",function(Tn){UI.openLogin(),Tn.stopPropagation()}),$("#login-facebook").on("click",function(){Games.popupLogin(1)}),$("#login-google").on("click",function(){Games.popupLogin(2)}),$("#login-twitter").on("click",function(){Games.popupLogin(3)}),$("#login-reddit").on("click",function(){Games.popupLogin(4)}),$("#login-twitch").on("click",function(){Games.popupLogin(5)}),$("#loginselector").on("click",function(Tn){Tn.stopPropagation()}),$("#gotomainpage").on("click",Games.redirRoot),$("#lifetime-signin").on("click",Games.redirRoot),null==config.settings.session?Games.playerGuest():Games.playerAuth(),dn(function(){return(Qt=!0,ln(),DEVELOPMENT&&"#tony"==window.location.hash)?(game.playRegion="eu",game.playRoom="ffa1",game.playInvited=!0,game.myOriginalName=window.location.hash.substr(1),void Games.start(game.myOriginalName,!0)):void($t||(cn(),Games.updateRegion(!1),Games.updateType(!1),yn()))},!0)},Games.popupLogin=function(Tn){sn("/auth_"+["","facebook","google","twitter","reddit","twitch"][Tn],"Login",4==Tn?900:500,500)};var sn=function(Tn,Sn,En,wn){var An=void 0==window.screenLeft?window.screenX:window.screenLeft,Cn=void 0==window.screenTop?window.screenY:window.screenTop,Pn=(window.innerWidth?window.innerWidth:document.documentElement.clientWidth?document.documentElement.clientWidth:screen.width)/2-En/2+An,Mn=(window.innerHeight?window.innerHeight:document.documentElement.clientHeight?document.documentElement.clientHeight:screen.height)/2-wn/2+Cn;window.open(Tn,Sn,"width="+En+", height="+wn+", top="+Mn+", left="+Pn)};window.loginSuccess=function(Tn){config.settings.session=Tn,Tools.setSettings({session:Tn}),Tools.removeSetting("flag"),Games.playerAuth(),UI.closeLogin()},window.loginFailure=function(){},Games.playerGuest=function(){UI.show("#playbutton",!0),UI.show("#loginbutton",!0)},Games.playerAuth=function(){Tools.ajaxPost("/auth",{session:config.settings.session},function(Tn){if(null!=Tn){game.loggedIn=!0,game.myUserID=Tn.user;var Sn=UI.escapeHTML(Tn.authName.substr(0,30))+"<span class=\"grey\">("+["","Facebook","Google","Twitter","Reddit","Twitch"][Tn.authType]+")</span>";null!=Tn.name&&$("#playername").val(Tn.name),$("#logout").html(Sn+"<span class=\"link\" onclick=\"Games.logout()\">Logout</span>"),$("#logout-mainmenu").html("Logged in as "+Sn+"<span class=\"button\" onclick=\"Games.logout()\">LOG OUT</span>"),$("#loginbutton").remove(),$("#lifetime-account").remove(),$("#playbutton").html("PLAY"),UI.show("#playbutton",!0)}else Games.playerGuest()})},Games.logout=function(){Tools.removeSetting("session"),Tools.removeSetting("name"),Tools.removeSetting("flag"),window.location="/"};var dn=function(Tn,Sn){var En="/games";Sn&&(En+="?main=1"),$.ajax({url:En,dataType:"json",cache:!1,success:function(wn){try{Jt=JSON.parse(wn.data)}catch(An){return}if("xx"==game.myFlag&&(game.myFlag=wn.country),Sn&&game.protocol!=wn.protocol){if("#reload"!==window.location.hash)return void Tools.ajaxPost("/clienterror",{type:"protocol"},function(){UI.showMessage("alert","<span class=\"mainerror\">Protocol update<br>Your client is being updated to the new version</span>",3e4),setTimeout(function(){window.location="/?"+Tools.randomID(10)+"#reload"},5e3)});Tools.ajaxPost("/clienterror",{type:"protocolretry"})}Tn()},error:function(){}})},ln=function(){Wt=0;for(var Tn=0,Sn=0;Sn<Jt.length;Sn++)for(var En=0;En<Jt[Sn].games.length;En++)Wt+=Jt[Sn].games[En].players,Tn++;if(0==Tn)$t=!0,UI.showMessage("alert","<span class=\"mainerror\">We are currently performing server maintenance<br>Please try again in a few minutes</span>",3e4);else{var wn="<div class=\"item smallerpad\">"+Wt+"</div>player"+(1<Wt?"s":"")+" online";$("#gameinfo").html(wn)}},un=function(Tn){if("closest"===Tn)return{name:"Closest"};for(var Sn=0;Sn<Jt.length;Sn++)if(Jt[Sn].id===Tn)return Jt[Sn];return game.playRegion="closest",{name:"Closest"}},pn=function(Tn,Sn){var En=un(Tn);if(null==En)return null;if(null==En.games)return null;for(var wn=0;wn<En.games.length;wn++)if(En.games[wn].id===Sn)return En.games[wn];var An=Yt.indexOf(Sn);if(-1!=An)for(wn=0;wn<En.games.length;wn++)if(En.games[wn].type==An)return{name:Ht[An]};return null},cn=function(){var Tn=window.location.hash;if(history.replaceState(null,null,"/"),"#reload"!==Tn&&null!=Tn&&!(4>Tn.length||20<Tn.length)){var Sn=(Tn=Tn.substr(1)).indexOf("-");if(-1!=Sn){var En=Tn.substr(0,Sn),wn=Tn.substr(Sn+1);null!=pn(En,wn)&&(game.playRegion=En,game.playRoom=wn,game.playInvited=!0)}}};Games.selectRegion=function(Tn,Sn){Tn.stopPropagation(),Sound.UIClick(),game.playRegion=Sn,Games.updateRegion(!1),Games.updateType()},Games.selectGame=function(Tn,Sn){Tn.stopPropagation(),Sound.UIClick(),game.playRoom=Sn,Games.updateType(!1)},Games.closeDropdowns=function(){Gt&&Games.updateType(!1),Bt&&Games.updateRegion(!1)},Games.updateRegion=function(Tn,Sn){var En="",wn=null;if(Qt&&!$t){if(null!=Sn&&(Sn.stopPropagation(),Bt||Sound.UIClick()),Tn&&UI.closeLogin(),null==Tn&&(Tn=Bt),Tn){Gt&&Games.updateType(!1),En+="<div class=\"item\"><div class=\"region header\">REGION</div><div class=\"players header\">PLAYERS</div><div class=\"ping header\">PING</div><div class=\"clear\"></div></div>";var An="";null!=qt&&(An="<span class=\"autoregion\">("+Jt[qt].name+")</span>"),En+="<div class=\"item selectable"+("closest"===game.playRegion?" sel":"")+"\" onclick=\"Games.selectRegion(event, &quot;closest&quot;)\"><div class=\"region chooser\">Closest"+An+"</div><div class=\"clear\"></div></div>";for(var Cn=0;Cn<Jt.length;Cn++){for(var Pn=0,Mn=0;Mn<Jt[Cn].games.length;Mn++)Pn+=Jt[Cn].games[Mn].players;var Rn;Rn=null==Jt[Cn].ping?"&nbsp;":Math.round(Jt[Cn].ping)+"<span class=\"ms\">ms</span>",En+="<div class=\"item selectable"+(game.playRegion===Jt[Cn].id?" sel":"")+"\" onclick=\"Games.selectRegion(event, &quot;"+Jt[Cn].id+"&quot;)\"><div class=\"region chooser\">"+Jt[Cn].name+"</div><div class=\"players number\">"+Pn+"</div><div class=\"ping chooser nopadding\">"+Rn+"</div><div class=\"clear\"></div></div>"}En+="<div class=\"item\"></div>",wn={width:"240px",height:"auto","z-index":"2"},$("#playregion").removeClass("hoverable")}else En+="<div class=\"arrowdown\"></div>",En+="<div class=\"playtop\">REGION</div>",En+="<div class=\"playbottom\">"+un(game.playRegion).name+"</div>",wn={width:"130px",height:"40px","z-index":"auto"},$("#playregion").addClass("hoverable");$("#playregion").html(En),$("#playregion").css(wn),Bt=Tn}};var hn=function(){var Tn=game.playRegion;if("closest"===Tn){if(null==qt)return null;Tn=Jt[qt].id}return Tn},fn=function(Tn){var Sn="<div class=\"infott\">";return 1==Tn?Sn+="Everyone versus everyone deathmatch. No teams.":2==Tn?Sn+="Players split into 2 teams. 2 flags are placed inside each base. The objective is to move the enemy flag from their base to your base.":3==Tn&&(Sn+="Players spawn at random locations all across the map. Destroyed players will not respawn. Last player standing wins."),Sn+="<div class=\"arrow\"></div></div>"};Games.updateType=function(Tn,Sn){var En="",wn=null;if(Qt&&!$t){if(null!=Sn&&(Sn.stopPropagation(),Gt||Sound.UIClick()),Tn&&UI.closeLogin(),null==Tn&&(Tn=Gt),Tn){if(Bt&&Games.updateRegion(!1),En+="<div class=\"item\"><div class=\"gametype header\">GAME</div><div class=\"players header\">PLAYERS</div><div class=\"clear\"></div></div>",null==(Rn=hn()))return;null==pn(Rn,game.playRoom)&&(game.playRoom=Yt[1]);var Pn=un(Rn).games,Mn=[[],[],[],[],[],[],[],[],[]],An,Cn;for(An=0;An<Pn.length;An++)Mn[Pn[An].type].push(Pn[An]);for(An=1;An<Mn.length;An++)if(0!=Mn[An].length)for(En+="<div class=\"item selectable"+(Yt[An]===game.playRoom?" sel":"")+"\" onclick=\"Games.selectGame(event, &quot;"+Yt[An]+"&quot;)\"><div class=\"gametype chooser\">"+Ht[An]+"<span class=\"infocontainer\">&nbsp;<div class=\"infoicon\">"+fn(An)+"</div></span></div><div class=\"clear\"></div></div>",Cn=0;Cn<Mn[An].length;Cn++)En+="<div class=\"item selectable"+(Mn[An][Cn].id===game.playRoom?" sel":"")+"\" onclick=\"Games.selectGame(event, &quot;"+Mn[An][Cn].id+"&quot;)\"><div class=\"gametype chooser\">"+Mn[An][Cn].nameShort+"</div><div class=\"players number\">"+Mn[An][Cn].players+"</div><div class=\"clear\"></div></div>";En+="<div class=\"item\"></div>",wn={width:"240px",height:"auto","z-index":"2"},$("#playtype").removeClass("hoverable")}else{En+="<div class=\"arrowdown\"></div>",En+="<div class=\"playtop\">GAME</div>";var Rn;if(null==(Rn=hn()))return;var Dn=pn(Rn,game.playRoom);null==Dn?(name=Ht[1],game.playRoom=Yt[1]):name=Dn.name,En+="<div class=\"playbottom\">"+name+"</div>",wn={width:"190px",height:"40px","z-index":"auto"},$("#playtype").addClass("hoverable")}$("#playtype").html(En),$("#playtype").css(wn),Gt=Tn}},Games.popGames=function(){if(!Xt){UI.closeAllPanels("games");var Tn=gn();UI.hide("#menu"),$("#gameselector").html(Tn),UI.show("#gameselector"),Xt=!0,mn(),Sound.UIClick()}};var gn=function(){var Tn="";Tn+="<div class=\"header\">"+game.roomName+"<span class=\"region\">&nbsp;&nbsp;&bull;&nbsp;&nbsp;"+game.regionName+"</span></div><div class=\"buttons\"><div class=\"button\" onclick=\"Games.redirRoot()\">CHANGE REGION</div></div>";var wn=un(game.playRegion).games,An=[[],[],[],[],[],[],[],[],[]],Sn,En;for(Sn=0;Sn<wn.length;Sn++)An[wn[Sn].type].push(wn[Sn]);var Cn,Pn;for(Sn=1;Sn<An.length;Sn++)if(0!=An[Sn].length)for(Tn+="<div class=\"item head\"><div class=\"gametype chooser section\">"+Ht[Sn]+"<span class=\"infocontainer\">&nbsp;<div class=\"infoicon\">"+fn(Sn)+"</div></span></div><div class=\"clear\"></div></div>",En=0;En<An[Sn].length;En++)An[Sn][En].id===game.playRoom?(Cn=" sel",Pn=""):(Cn=" selectable",Pn=" onclick=\"Games.switchGame(&quot;"+An[Sn][En].id+"&quot;)\""),Tn+="<div class=\"item"+Cn+"\""+Pn+"><div class=\"gametype chooser\">"+An[Sn][En].nameShort+"</div><div class=\"players number\">"+An[Sn][En].players+"</div><div class=\"clear\"></div></div>";return Tn};Games.redirRoot=function(){game.reloading=!0,window.location="/"};var mn=function(){dn(function(){var Tn=gn();$("#gameselector").html(Tn)})};Games.closeGames=function(){Xt&&(UI.hide("#gameselector"),UI.show("#menu"),Xt=!1,Sound.UIClick())},Games.toggleGames=function(){Xt?Games.closeGames():Games.popGames()},Games.switchGame=function(Tn){Games.closeGames(),null!=Tn&&(game.playRoom=Tn),game.myScore=0,game.state=Network.STATE.CONNECTING,Network.shutdown(),Particles.wipe(),Players.wipe(),Mobs.wipe(),UI.reconnection(),Games.start(game.myOriginalName)};var yn=function(){jt={},zt=0;for(var Sn=0,Tn;Sn<Jt.length;Sn++)Tn=Jt[Sn].games[Tools.randInt(0,Jt[Sn].games.length-1)].host,null==jt[Tn]&&(jt[Tn]={ping:9999,num:0,threshold:0,server:Sn});Games.performPing(),Games.performPing(),Games.performPing(),Vt=setInterval(Games.performPing,300)};Games.performPing=function(){if(!(3<zt||Kt)){var Tn=9999,Sn=null;for(var En in jt)jt[En].num<Tn&&(Tn=jt[En].num,Sn=En);if(6<Tn)null!=Vt&&clearInterval(Vt);else{jt[Sn].num++;var wn;wn=DEVELOPMENT?"/ping":"https://game-"+Sn+".airma.sh/ping",_n(Sn,wn,function(){_n(Sn,wn)})}}};var _n=function(Tn,Sn,En){if(null!=jt[Tn]&&!Kt){zt++;var wn=performance.now();$.ajax({url:Sn,dataType:"json",cache:!1,timeout:2e3,success:function(An){if(!Kt&&(zt--,1==An.pong&&null!=jt[Tn])){var Cn=performance.now()-wn;if(Math.abs(jt[Tn].ping-Cn)<.1*Cn&&jt[Tn].threshold++,2<=jt[Tn].threshold)return Cn<jt[Tn].ping&&(Jt[jt[Tn].server].ping=Cn,Games.findClosest(),Games.updateRegion()),void delete jt[Tn];Cn<jt[Tn].ping&&(jt[Tn].ping=Cn,Jt[jt[Tn].server].ping=Cn,Games.findClosest(),Games.updateRegion(),null!=En&&En())}},error:function(){zt--}})}};Games.findClosest=function(){for(var Tn=9999,Sn=!1,En=0;En<Jt.length;En++)null!=Jt[En].ping&&Jt[En].ping<Tn&&(Tn=Jt[En].ping,qt=En,Sn=!0);Sn&&"closest"===game.playRegion&&Games.updateType()},Games.highlightInput=function(Tn){$(Tn).css({transition:"none",transform:"scale(1.1)","background-color":"rgb(90, 30, 30)"}),$(Tn).width(),$(Tn).css({transition:"all 0.5s ease-in-out",transform:"scale(1)","background-color":"rgb(30, 30, 30)"}),setTimeout(function(){$(Tn).focus()},200)},Games.copyInviteLink=function(){bn(game.inviteLink)&&(UI.show("#invite-copied"),null!=Zt&&clearTimeout(Zt),Zt=setTimeout(function(){UI.hide("#invite-copied")},2e3))};var bn=function(Tn){var Sn=document.createElement("span");Sn.textContent=Tn,Sn.style.whiteSpace="pre";var En=document.createElement("iframe");En.sandbox="allow-same-origin",document.body.appendChild(En);var wn=En.contentWindow;wn.document.body.appendChild(Sn);var An=wn.getSelection();An||(An=(wn=window).getSelection(),document.body.appendChild(Sn));var Cn=wn.document.createRange();An.removeAllRanges(),Cn.selectNode(Sn),An.addRange(Cn);var Pn=!1;try{Pn=wn.document.execCommand("copy")}catch(Mn){}return An.removeAllRanges(),Sn.remove(),En.remove(),Pn};Games.start=function(Tn,Sn){if(!($t||Sn&&game.state==Network.STATE.CONNECTING)){var En=game.playRegion,wn=hn();if(null!=wn){game.playRegion=wn,null!=Vt&&clearInterval(Vt),Kt=!0;var An=game.playRoom,Cn=Yt.indexOf(An);if(-1!=Cn){for(var Pn=un(game.playRegion).games,Mn=[],Rn=0;Rn<Pn.length;Rn++)Pn[Rn].type==Cn&&Mn.push(Pn[Rn].id);An=Mn[Tools.randInt(0,Mn.length-1)]}var Dn=pn(game.playRegion,An);game.playHost=Dn.host,game.playPath=Dn.id,game.regionName=un(game.playRegion).name,game.playRoom=An,game.state==Network.STATE.LOGIN&&Tools.wipeReel(),game.state=Network.STATE.CONNECTING;var In={name:Tn};game.playInvited||(In.region=En),Tools.setSettings(In),UI.gameStart(Tn,Sn),Sn&&Tools.ajaxPost("/enter",{id:config.settings.id,name:Tn,game:game.playRegion+"-"+game.playRoom,source:null==document.referrer?"":document.referrer,mode:config.mobile?1:0})}}},Games.prep=function(){(Games.wipe(),2==game.gameType)?($("#gamespecific").html("<div class=\"blueflag\"></div><div id=\"blueflag-name\" class=\"blueflag-player\">&nbsp;</div><div class=\"redflag\"></div><div id=\"redflag-name\" class=\"redflag-player\">&nbsp;</div>"),UI.show("#gamespecific"),en={flagBlue:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:Vector.zero(),basePos:new Vector(-9669,-1471),sprite:Textures.init("ctfFlagBlue",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:1.1*.4,visible:!1}),minimapSprite:Textures.init("minimapFlagBlue"),minimapBase:Textures.init("minimapBaseBlue")},flagRed:{visible:!1,playerId:null,direction:1,diffX:0,momentum:0,position:Vector.zero(),basePos:new Vector(8602,-944),sprite:Textures.init("ctfFlagRed",{scale:.4,visible:!1}),spriteShadow:Textures.init("ctfFlagShadow",{scale:1.1*.4,visible:!1}),minimapSprite:Textures.init("minimapFlagRed"),minimapBase:Textures.init("minimapBaseRed")}},Graphics.minimapMob(en.flagBlue.minimapBase,en.flagBlue.basePos.x,en.flagBlue.basePos.y),Graphics.minimapMob(en.flagRed.minimapBase,en.flagRed.basePos.x,en.flagRed.basePos.y)):3==game.gameType&&($("#gamespecific").html(""),UI.show("#gamespecific"))},Games.wipe=function(){vn(),en.flagBlue&&en.flagRed&&(game.graphics.layers.flags.removeChild(en.flagBlue.sprite),game.graphics.layers.flags.removeChild(en.flagRed.sprite),game.graphics.layers.shadows.removeChild(en.flagBlue.spriteShadow),game.graphics.layers.shadows.removeChild(en.flagRed.spriteShadow),game.graphics.layers.ui3.removeChild(en.flagBlue.minimapSprite),game.graphics.layers.ui3.removeChild(en.flagRed.minimapSprite),game.graphics.layers.ui2.removeChild(en.flagBlue.minimapBase),game.graphics.layers.ui2.removeChild(en.flagRed.minimapBase),en.flagBlue.sprite.destroy(),en.flagRed.sprite.destroy(),en.flagBlue.spriteShadow.destroy(),en.flagRed.spriteShadow.destroy(),en.flagBlue.minimapSprite.destroy(),en.flagRed.minimapSprite.destroy(),en.flagBlue.minimapBase.destroy(),en.flagRed.minimapBase.destroy())},Games.networkFlag=function(Tn){var Sn=1==Tn.flag?en.flagBlue:en.flagRed,En=1==Tn.flag?"#blueflag-name":"#redflag-name",wn=1==Tn.flag?Tn.blueteam:Tn.redteam;Sn.momentum=0,Sn.direction=1,Sn.sprite.scale.x=.4,Sn.sprite.rotation=0,Sn.spriteShadow.scale.x=1.1*.4,Sn.spriteShadow.rotation=0;var An="<span class=\"rounds\">"+wn+"<span class=\"divider\">/</span>3</span>";if(1==Tn.type){Sn.playerId=null,Sn.position.x=Tn.posX,Sn.position.y=Tn.posY,Sn.sprite.position.set(Tn.posX,Tn.posY);var Cn=Graphics.shadowCoords(new Vector(Tn.posX,Tn.posY));Sn.spriteShadow.position.set(Cn.x,Cn.y),Graphics.minimapMob(Sn.minimapSprite,Tn.posX,Tn.posY),$(En).html(An)}else{Sn.playerId=Tn.id;var Pn=Players.get(Tn.id);null!=Pn&&(1==Tn.flag?An=UI.escapeHTML(Pn.name)+An:An+=UI.escapeHTML(Pn.name)),Sn.diffX=Pn.pos.x,$(En).html(An)}xn(Sn,!1)};var xn=function(Tn,Sn){if(Sn&&(Graphics.minimapMob(Tn.minimapSprite,Tn.position.x,Tn.position.y),Graphics.minimapMob(Tn.minimapBase,Tn.basePos.x,Tn.basePos.y)),null!=Tn.playerId){var En=Players.get(Tn.playerId);if(null!=En&&(En.render!=Tn.visible&&(Tn.visible=En.render,Tn.sprite.visible=En.render,Tn.spriteShadow.visible=En.render,En.render&&(Tn.momentum=0,Tn.direction=1,Tn.diffX=En.pos.x)),En.render?Graphics.minimapMob(Tn.minimapSprite,En.pos.x,En.pos.y):Graphics.minimapMob(Tn.minimapSprite,En.lowResPos.x,En.lowResPos.y),Tn.visible)){Tn.position.x=En.pos.x,Tn.position.y=En.pos.y,Tn.sprite.position.set(En.pos.x,En.pos.y);var wn=Graphics.shadowCoords(En.pos);Tn.spriteShadow.position.set(wn.x,wn.y),Tn.momentum=Tools.clamp(Tn.momentum+(En.pos.x-Tn.diffX)*game.timeFactor,-40,40);var An=0<Tn.momentum?.1:-.1;Tn.direction=Tools.clamp(Tn.direction-An*game.timeFactor,-.4,.4),Tn.sprite.scale.x=Tn.direction,Tn.spriteShadow.scale.x=1.1*Tn.direction;var Cn=.04*-(En.pos.x-Tn.diffX)*game.timeFactor;Tn.sprite.rotation=Cn,Tn.spriteShadow.rotation=Cn,Tn.diffX=En.pos.x}}else{var Pn=Graphics.inScreen(Tn.position,128);Pn!=Tn.visible&&(Tn.visible=Pn,Tn.sprite.visible=Pn,Tn.spriteShadow.visible=Pn)}};Games.spectate=function(Tn){null==game.spectatingID&&3!=game.gameType&&UI.showMessage("alert","<span class=\"info\">SPECTATOR MODE</span>Click on Respawn to resume playing",4e3),game.spectatingID=Tn;var Sn=Players.get(Tn),En="<div id=\"spectator-tag\" class=\"spectating\">Spectating "+(null==Sn?"":UI.escapeHTML(Sn.name))+"</div><div class=\"buttons\"><div onclick=\"Network.spectateNext()\" class=\"changeplayer left\"><div class=\"arrow\"></div></div><div onclick=\"Network.spectatePrev()\" class=\"changeplayer right\"><div class=\"arrow\"></div></div></div>";UI.showSpectator(En)},Games.spectatorSwitch=function(Tn){setTimeout(function(){Tn==game.spectatingID&&Network.spectateNext()},2e3)},Games.playersAlive=function(Tn){var Sn="";1<Tn&&(Sn="<div class=\"playersalive\">"+Tn+" players alive</div>"),$("#gamespecific").html(Sn)},Games.showBTRWin=function(Tn){if(!$("#custom-msg").length){var Sn="<div id=\"custom-msg\" class=\"btrwin\"><div class=\"trophy\"></div><div class=\"winner\"><div class=\"player\"><span class=\"flag big flag-"+Tn.f+"\"></span>"+UI.escapeHTML(Tn.p)+"</div></div><div class=\"bounty\"><span class=\"stat\">"+Tn.k+" KILL"+(1==Tn.k?"":"S")+"</span>+"+Tn.b+" BOUNTY</div></div>";$("body").append(Sn),UI.showPanel("#custom-msg"),setTimeout(function(){UI.hidePanel("#custom-msg",!1,!0)},1e3*Tn.t),Sound.gameComplete()}},Games.showCTFWin=function(Tn){if(!$("#custom-msg").length){var Sn="<div id=\"custom-msg\" class=\"ctfwin\"><div class=\"trophy\"></div><div class=\"winner\">"+(1==Tn.w?"<div class=\"player blue\">BLUE TEAM</div>":"<div class=\"player red\">RED TEAM</div>")+"</div><div class=\"bounty\">+"+Tn.b+" BOUNTY</div></div>";$("body").append(Sn),UI.showPanel("#custom-msg"),setTimeout(function(){UI.hidePanel("#custom-msg",!1,!0)},1e3*Tn.t),Sound.gameComplete()}},Games.showLevelUP=function(Tn){$("#custom-msg").length&&$("#custom-msg").remove();var Sn="",En=" lvlsmaller";null!=on[Tn+""]&&(En="",Sn="<div class=\"unlocked\">FEATURE UNLOCKED<br><div class=\"unlockedtext\">"+on[Tn+""]+"</div></div>");var wn="<div id=\"custom-msg\" class=\"levelup"+En+"\"><div class=\"leveltext\">NEW LEVEL REACHED</div><div class=\"levelbadge\"></div><div class=\"levelnum\">"+Tn+"</div>"+Sn+"</div>";$("body").append(wn),UI.showPanel("#custom-msg"),Sound.levelUp(),UI.showChatLevel(Tn)},Games.popFirewall=function(Tn,Sn){0>=Sn&&(Sn=0),rn||(rn=!0,nn=new PIXI.Graphics,game.graphics.gui.minimap.mask=nn),nn.clear(),nn.beginFill(16777215),nn.drawCircle(game.screenX-config.minimapPaddingX-config.minimapSize*(16384-Tn.x)/32768,game.screenY-config.minimapPaddingY-config.minimapSize/2*(8192-Tn.y)/16384,2*Sn/(256*(256/config.minimapSize))),nn.endFill();var En=Graphics.getCamera(),wn=Math.ceil((game.halfScreenX+64)/game.scale/64),An=Math.ceil((game.halfScreenY+64)/game.scale/64),Cn=0,Pn=0,Mn="",Rn={},Dn=0,In=0,On=new Vector(En.x-game.halfScreenX/game.scale-64,En.y-game.halfScreenY/game.scale-64),Ln=new Vector(En.x+game.halfScreenX/game.scale+64,En.y-game.halfScreenY/game.scale-64),kn=new Vector(En.x-game.halfScreenX/game.scale-64,En.y+game.halfScreenY/game.scale+64),Nn=new Vector(En.x+game.halfScreenX/game.scale+64,En.y+game.halfScreenY/game.scale+64);if(Tools.distance(Tn.x,Tn.y,On.x,On.y)>Sn||Tools.distance(Tn.x,Tn.y,Ln.x,Ln.y)>Sn||Tools.distance(Tn.x,Tn.y,kn.x,kn.y)>Sn||Tools.distance(Tn.x,Tn.y,Nn.x,Nn.y)>Sn)for(var Fn=-wn;Fn<=wn;Fn++)for(var Bn=-An;Bn<=An;Bn++)if(Cn=64*(Math.floor(En.x/64)+.5)+64*Fn,Pn=64*(Math.floor(En.y/64)+.5)+64*Bn,!((Dn=Tools.distance(Cn,Pn,Tn.x,Tn.y))<Sn)&&(Mn=Cn+"_"+Pn,Rn[Mn]=!0,null==tn[Mn])){var Un=Textures.sprite("hotsmoke_"+Tools.randInt(1,4));Un.scale.set(Tools.rand(1.5,2.5)),Un.anchor.set(.5,.5),Un.position.set(Cn,Pn),In=1,.5<Tools.rand(0,1)&&(Un.blendMode=PIXI.BLEND_MODES.ADD,In=.5),game.graphics.layers.powerups.addChild(Un),tn[Mn]={sprite:Un,rotation:Tools.rand(0,100),rotationSpeed:Tools.rand(-.0025,.0025),opacity:0,maxOpacity:In,opacitySpeed:64<=Dn-Sn?.02:.0035,color:Tools.rand(0,1),colorDir:.5>Tools.rand(0,1)?-1:1}}for(var Gn in tn)null==Rn[Gn]?(game.graphics.layers.powerups.removeChild(tn[Gn].sprite),tn[Gn].sprite.destroy(),delete tn[Gn]):(tn[Gn].rotation+=tn[Gn].rotationSpeed*game.timeFactor,tn[Gn].opacity+=tn[Gn].opacitySpeed*game.timeFactor,tn[Gn].opacity>tn[Gn].maxOpacity&&(tn[Gn].opacity=tn[Gn].maxOpacity),tn[Gn].color+=.005*tn[Gn].colorDir*game.timeFactor,0>tn[Gn].color&&(tn[Gn].colorDir=1),1<tn[Gn].color&&(tn[Gn].colorDir=-1),tn[Gn].sprite.rotation=tn[Gn].rotation,tn[Gn].sprite.alpha=tn[Gn].opacity,tn[Gn].sprite.tint=Tools.colorLerp(16427014,16404230,tn[Gn].color))};var vn=function(){if(rn){for(var Tn in tn)game.graphics.layers.powerups.removeChild(tn[Tn].sprite),tn[Tn].sprite.destroy();tn={},game.graphics.gui.minimap.mask=null,null!=nn&&(nn.destroy(),nn=null),rn=!1}};Games.handleFirewall=function(Tn){0==Tn.status?vn():(an.radius=Tn.radius,an.pos.x=Tn.posX,an.pos.y=Tn.posY,an.speed=Tn.speed,Games.popFirewall(an.pos,an.radius))},Games.update=function(Tn){2==game.gameType&&en.flagBlue&&(xn(en.flagBlue,Tn),xn(en.flagRed,Tn)),3==game.gameType&&rn&&(an.radius+=an.speed/60*game.timeFactor,Games.popFirewall(an.pos,an.radius))}}(),function(){var Bt={},Gt={},Xt={},Ht=0,Yt=0,Wt={},jt=0,zt=0,Vt={},Zt=.06,Jt=.08,nn=[0,0.7,1,0.4,0,0.7,0.4,0.7],rn=[0,0.7,1,0.4,0,0.7,1,0.7],an=[0,0.8,0.5,1,0,0.8,0.5,0.8],on=[0,0.8,1,0.7,0.8,0.8],sn=[0,1.5,1.2,0.8,1.35,1.7],dn=[0,1,1,0.35,1,1],ln=[0,0.8,0.5,1,0,0.8,0.8,0.8],un=[0,1.5,0.8,2,1,1.5],pn={powerup_shield:.5,upgrade:.2,complete:.5,levelup:.5,respawn:.05,click:.5},cn={},hn={src:["assets/sounds.mp3?4"],volume:0,sprite:{a_wing:[50,917,!0],tie_interceptor:[1000,2381,!0],tie_fighter:[3500,1173,!0],x_wing:[5000,5410,!0],tie_bomber:[10500,2431,!0],b_wing:[13000,2949,!0],tie_advanced:[16500,2940,!0],y_wing:[20000,2944,!0],tie_phantom:[23500,2949,!0],scout_ship:[27500,1392,!0],click:[50000,153],complete:[51000,4800],explosion1:[60000,3600],explosion2:[66000,3650],explosion3:[72000,3230],explosion4:[78000,3240],explosion5:[84000,3100],explosion6:[90000,3730],impact:[96000,2153],launch1:[100000,1665],launch2:[103000,1955],levelup:[107000,4320],missile:[113000,5339,!0],powerup_rampage:[120000,2971],powerup_shield:[124000,1633],powerup_upgrade:[128000,806],repel:[130000,1344],respawn:[133000,1237],thruster:[137000,9500,!0],upgrade:[150000,2455]}};Sound.setup=function(){var Tn={};for(var Sn in cn){if(Tn={src:["/assets/sounds/"+Sn+".wav"]},0<Object.keys(cn[Sn]).length)for(var En in cn[Sn])Tn[En]=cn[Sn][En];Gt[Sn]=new Howl(Tn)}Bt=new Howl(hn)},Sound.toggle=function(){config.settings.sound=!config.settings.sound,Tools.setSettings({sound:config.settings.sound}),UI.updateSound(!0),fn()};var fn=function(){config.settings.sound||Bt.stop()},gn=function(Tn){var Sn=pn[Tn];return null==Sn?1:Sn};Sound.mobExplosion=function(Tn,Sn){var En=nn[Sn]*.3,wn=xn(Tn)*En,An="explosion"+Tools.randInt(1,6);.01>wn||mn("mobexplosions",4)||yn(An,wn,Tn,Tools.rand(.8,1.2))},Sound.playerKill=function(Tn){var Sn=on[Tn.type]*1,En=xn(Tn.pos)*Sn,wn="explosion"+Tools.randInt(1,6);.01>En||mn("playerkills",3)||yn(wn,En,Tn.pos,Tools.rand(.8,1.2))},Sound.playerUpgrade=function(){if(!mn("upgrades",1)){var Tn=gn("upgrade");yn("upgrade",Tn)}},Sound.playerRespawn=function(Tn){var Sn=gn("respawn")*(Tn.me()?1:xn(Tn.pos)),En=Tn.me()?null:Tn.pos;yn("respawn",Sn,En)},Sound.gameComplete=function(){var Tn=gn("complete");yn("complete",Tn)},Sound.levelUp=function(){var Tn=gn("levelup");yn("levelup",Tn)},Sound.UIClick=function(){if(!mn("uiclick",1,200)){var Tn=gn("click");yn("click",Tn)}},Sound.effectRepel=function(Tn){var Sn=xn(Tn)*.3;yn("repel",Sn,Tn,1.5)},Sound.powerup=function(Tn,Sn){var En=(null==Sn?1:xn(Sn))*.25,wn="";4==Tn?wn="powerup_upgrade":8==Tn?wn="powerup_shield":9==Tn&&(wn="powerup_rampage"),yn(wn,En*gn(wn),Sn)},Sound.missileLaunch=function(Tn,Sn){var En=rn[Sn]*.3,wn=xn(Tn)*En,An=an[Sn],Cn="launch"+Tools.randInt(1,2);.01>wn||mn("launches",5)||yn(Cn,wn,Tn,An)},Sound.playerImpact=function(Tn,Sn,En){var wn=.05*Tools.clamp(En,0,1),An=xn(Tn)*wn,Cn=un[Sn];yn("impact",An,Tn,Cn)},Sound.update=function(){if(!(100>game.time-zt)){var Tn=game.focus?300:1e3;for(var Sn in Xt)game.time-Xt[Sn].last>Tn&&Sound.clearThruster(Sn);for(var En in Wt)game.time>=Wt[En].time&&(bn(Wt[En].id,Wt[En].sound),delete Wt[En]);zt=game.time}};var mn=function(Tn,Sn,En){if(null==Vt[Tn])return Vt[Tn]={num:1,time:game.time},!1;var wn=null==En?1e3:En;return game.time-Vt[Tn].time>wn?(Vt[Tn].num=1,Vt[Tn].time=game.time,!1):(Vt[Tn].num++,Vt[Tn].num>Sn)},yn=function(Tn,Sn,En,wn,An,Cn){if(config.settings.sound){if(Cn){if(null==Gt[Tn])return;var Pn=Gt[Tn]}else Pn=Bt;if(!(null!=Sn&&.01>Sn)){var Mn=Pn.play(Cn?void 0:Tn);if("thruster"===Tn||"missile"===Tn||"chopper"===Tn){var Rn=Pn.seek(null,Mn);Pn.seek(Rn+Tools.rand(0,1),Mn)}return _n(Mn,Tn,Sn,En,wn,An,Cn),Mn}}},_n=function(Tn,Sn,En,wn,An,Cn,Pn){if(config.settings.sound){if(Pn){if(null==Gt[Sn])return;var Mn=Gt[Sn]}else Mn=Bt;null!=En&&Mn.volume(En,Tn),null!=Cn&&Mn.fade(Cn[0],Cn[1],Cn[2],Tn,4==Cn.length||null),null!=An&&Mn.rate(An,Tn),null==wn||config.ios||Mn.stereo(vn(wn),Tn)}},bn=function(Tn,Sn,En){if(En){if(null==Gt[Sn])return;var wn=Gt[Sn]}else wn=Bt;wn.stop(Tn)};Sound.clearThruster=function(Tn){if(null!=Xt[Tn]){var Sn=Xt[Tn].soundId,En=Xt[Tn].vol;_n(Sn,Xt[Tn].sound,null,null,null,[En,0,200,!0]),function(wn,An,Cn){Wt[++jt]={id:wn,sound:An,time:game.time+Cn}}(Sn,Xt[Tn].sound,300),0==Xt[Tn].type?Ht--:Yt--,delete Xt[Tn]}},Sound.updateThruster=function(Tn,Sn,En){if(config.settings.sound){if(0==Tn){En=Sn.keystate.UP||Sn.keystate.DOWN;var wn="";switch(Sn.type){case 1:wn=0==Sn.graphicsSet?"tie_fighter":"x_wing";break;case 2:wn=0==Sn.graphicsSet?"tie_bomber":"b_wing";break;case 3:wn=0==Sn.graphicsSet?"tie_interceptor":"a_wing";break;case 4:wn=0==Sn.graphicsSet?"tie_advanced":"y_wing";break;case 5:wn=0==Sn.graphicsSet?"tie_phantom":"scout_ship";}var An="player_"+Sn.id+"_"+Sn.type}else wn="missile",An="mob_"+Sn.id;if(!En)null!=Xt[An]&&Sound.clearThruster(An);else if(null==Xt[An]){if(0==Tn){if(!Sn.me()&&5<=Ht)return;}else if(5<=Yt)return;var Cn=xn(Sn.pos);if(0==Tn)var Pn=Cn*dn[Sn.type]*Zt,Mn=sn[Sn.type];else Pn=Cn*Jt,Mn=ln[Sn.type];if(.01>Pn)return;var Rn=yn(wn,null,Sn.pos,Mn,[0,Pn,200]);Xt[An]={type:Tn,started:game.time,last:game.time,sound:wn,soundId:Rn,vol:Pn},0==Tn?Ht++:Yt++}else{if(100>game.time-Xt[An].last)return;if(Cn=xn(Sn.pos),0==Tn?(Pn=Cn*dn[Sn.type]*Zt,Sn.boost&&(Pn*=3)):Pn=Cn*Jt,.01>Pn)return void Sound.clearThruster(An);if(Mn=null,0==Tn&&3==Sn.type&&(Mn=sn[Sn.type]+Sn.speed.length()/20),250>game.time-Xt[An].started)return;_n(Xt[An].soundId,Xt[An].sound,null,Sn.pos,Mn,[Xt[An].vol,Pn,100,!0]),Xt[An].last=game.time,Xt[An].vol=Pn}}};var xn=function(Tn){var Sn=Graphics.getCamera(),En=Tools.length(Tn.x-Sn.x,Tn.y-Sn.y),wn=(game.halfScreenX/game.scale+game.halfScreenY/game.scale)/2;return Tools.clamp(1.5*(1-En/wn),0,1)},vn=function(Tn){var Sn=Graphics.getCamera(),En=Tn.x-Sn.x,wn=game.halfScreenX/game.scale;return Tools.clamp(.8*En/wn,-1,1)}}();class Sha256{static hash(Bt,Gt){function Xt($t){try{return new TextEncoder().encode($t,"utf-8").reduce((en,tn)=>en+String.fromCharCode(tn),"")}catch(en){return unescape(encodeURIComponent($t))}}function Ht($t){const en=$t.replace(" ","");return""==en?"":en.match(/.{2}/g).map(tn=>String.fromCharCode(parseInt(tn,16))).join("")}const Wt=Object.assign({msgFormat:"string",outFormat:"hex"},Gt);switch(Wt.msgFormat){default:case"string":Bt=Xt(Bt);break;case"hex-bytes":Bt=Ht(Bt);}const jt=[1116352408,1899447441,3049323471,3921009573,961987163,1508970993,2453635748,2870763221,3624381080,310598401,607225278,1426881987,1925078388,2162078206,2614888103,3248222580,3835390401,4022224774,264347078,604807628,770255983,1249150122,1555081692,1996064986,2554220882,2821834349,2952996808,3210313671,3336571891,3584528711,113926993,338241895,666307205,773529912,1294757372,1396182291,1695183700,1986661051,2177026350,2456956037,2730485921,2820302411,3259730800,3345764771,3516065817,3600352804,4094571909,275423344,430227734,506948616,659060556,883997877,958139571,1322822218,1537002063,1747873779,1955562222,2024104815,2227730452,2361852424,2428436474,2756734187,3204031479,3329325298],zt=[1779033703,3144134277,1013904242,2773480762,1359893119,2600822924,528734635,1541459225];Bt+=String.fromCharCode(128);const Vt=Bt.length/4+2,qt=Math.ceil(Vt/16),Kt=Array(qt);for(let $t=0;$t<qt;$t++){Kt[$t]=Array(16);for(let en=0;16>en;en++)Kt[$t][en]=Bt.charCodeAt(64*$t+4*en+0)<<24|Bt.charCodeAt(64*$t+4*en+1)<<16|Bt.charCodeAt(64*$t+4*en+2)<<8|Bt.charCodeAt(64*$t+4*en+3)<<0}const Qt=8*(Bt.length-1)/Math.pow(2,32),Zt=8*(Bt.length-1)>>>0;Kt[qt-1][14]=Math.floor(Qt),Kt[qt-1][15]=Zt;for(let $t=0;$t<qt;$t++){const en=Array(64);for(let un=0;16>un;un++)en[un]=Kt[$t][un];for(let un=16;64>un;un++)en[un]=Sha256.σ1(en[un-2])+en[un-7]+Sha256.σ0(en[un-15])+en[un-16]>>>0;let tn=zt[0],nn=zt[1],rn=zt[2],an=zt[3],on=zt[4],sn=zt[5],dn=zt[6],ln=zt[7];for(let un=0;64>un;un++){const pn=ln+Sha256.Σ1(on)+Sha256.Ch(on,sn,dn)+jt[un]+en[un],cn=Sha256.Σ0(tn)+Sha256.Maj(tn,nn,rn);ln=dn,dn=sn,sn=on,on=an+pn>>>0,an=rn,rn=nn,nn=tn,tn=pn+cn>>>0}zt[0]=zt[0]+tn>>>0,zt[1]=zt[1]+nn>>>0,zt[2]=zt[2]+rn>>>0,zt[3]=zt[3]+an>>>0,zt[4]=zt[4]+on>>>0,zt[5]=zt[5]+sn>>>0,zt[6]=zt[6]+dn>>>0,zt[7]=zt[7]+ln>>>0}for(let $t=0;$t<zt.length;$t++)zt[$t]=("00000000"+zt[$t].toString(16)).slice(-8);const Jt="hex-w"==Wt.outFormat?" ":"";return zt.join(Jt)}static ROTR(Bt,Gt){return Gt>>>Bt|Gt<<32-Bt}static Σ0(Bt){return Sha256.ROTR(2,Bt)^Sha256.ROTR(13,Bt)^Sha256.ROTR(22,Bt)}static Σ1(Bt){return Sha256.ROTR(6,Bt)^Sha256.ROTR(11,Bt)^Sha256.ROTR(25,Bt)}static σ0(Bt){return Sha256.ROTR(7,Bt)^Sha256.ROTR(18,Bt)^Bt>>>3}static σ1(Bt){return Sha256.ROTR(17,Bt)^Sha256.ROTR(19,Bt)^Bt>>>10}static Ch(Bt,Gt,Xt){return Bt&Gt^~Bt&Xt}static Maj(Bt,Gt,Xt){return Bt&Gt^Bt&Xt^Gt&Xt}}var nonprintRegex=/[\0-\x1F\x7F-\x9F\xAD\u0378\u0379\u037F-\u0383\u038B\u038D\u03A2\u0528-\u0530\u0557\u0558\u0560\u0588\u058B-\u058E\u0590\u05C8-\u05CF\u05EB-\u05EF\u05F5-\u0605\u061C\u061D\u06DD\u070E\u070F\u074B\u074C\u07B2-\u07BF\u07FB-\u07FF\u082E\u082F\u083F\u085C\u085D\u085F-\u089F\u08A1\u08AD-\u08E3\u08FF\u0978\u0980\u0984\u098D\u098E\u0991\u0992\u09A9\u09B1\u09B3-\u09B5\u09BA\u09BB\u09C5\u09C6\u09C9\u09CA\u09CF-\u09D6\u09D8-\u09DB\u09DE\u09E4\u09E5\u09FC-\u0A00\u0A04\u0A0B-\u0A0E\u0A11\u0A12\u0A29\u0A31\u0A34\u0A37\u0A3A\u0A3B\u0A3D\u0A43-\u0A46\u0A49\u0A4A\u0A4E-\u0A50\u0A52-\u0A58\u0A5D\u0A5F-\u0A65\u0A76-\u0A80\u0A84\u0A8E\u0A92\u0AA9\u0AB1\u0AB4\u0ABA\u0ABB\u0AC6\u0ACA\u0ACE\u0ACF\u0AD1-\u0ADF\u0AE4\u0AE5\u0AF2-\u0B00\u0B04\u0B0D\u0B0E\u0B11\u0B12\u0B29\u0B31\u0B34\u0B3A\u0B3B\u0B45\u0B46\u0B49\u0B4A\u0B4E-\u0B55\u0B58-\u0B5B\u0B5E\u0B64\u0B65\u0B78-\u0B81\u0B84\u0B8B-\u0B8D\u0B91\u0B96-\u0B98\u0B9B\u0B9D\u0BA0-\u0BA2\u0BA5-\u0BA7\u0BAB-\u0BAD\u0BBA-\u0BBD\u0BC3-\u0BC5\u0BC9\u0BCE\u0BCF\u0BD1-\u0BD6\u0BD8-\u0BE5\u0BFB-\u0C00\u0C04\u0C0D\u0C11\u0C29\u0C34\u0C3A-\u0C3C\u0C45\u0C49\u0C4E-\u0C54\u0C57\u0C5A-\u0C5F\u0C64\u0C65\u0C70-\u0C77\u0C80\u0C81\u0C84\u0C8D\u0C91\u0CA9\u0CB4\u0CBA\u0CBB\u0CC5\u0CC9\u0CCE-\u0CD4\u0CD7-\u0CDD\u0CDF\u0CE4\u0CE5\u0CF0\u0CF3-\u0D01\u0D04\u0D0D\u0D11\u0D3B\u0D3C\u0D45\u0D49\u0D4F-\u0D56\u0D58-\u0D5F\u0D64\u0D65\u0D76-\u0D78\u0D80\u0D81\u0D84\u0D97-\u0D99\u0DB2\u0DBC\u0DBE\u0DBF\u0DC7-\u0DC9\u0DCB-\u0DCE\u0DD5\u0DD7\u0DE0-\u0DF1\u0DF5-\u0E00\u0E3B-\u0E3E\u0E5C-\u0E80\u0E83\u0E85\u0E86\u0E89\u0E8B\u0E8C\u0E8E-\u0E93\u0E98\u0EA0\u0EA4\u0EA6\u0EA8\u0EA9\u0EAC\u0EBA\u0EBE\u0EBF\u0EC5\u0EC7\u0ECE\u0ECF\u0EDA\u0EDB\u0EE0-\u0EFF\u0F48\u0F6D-\u0F70\u0F98\u0FBD\u0FCD\u0FDB-\u0FFF\u10C6\u10C8-\u10CC\u10CE\u10CF\u1249\u124E\u124F\u1257\u1259\u125E\u125F\u1289\u128E\u128F\u12B1\u12B6\u12B7\u12BF\u12C1\u12C6\u12C7\u12D7\u1311\u1316\u1317\u135B\u135C\u137D-\u137F\u139A-\u139F\u13F5-\u13FF\u169D-\u169F\u16F1-\u16FF\u170D\u1715-\u171F\u1737-\u173F\u1754-\u175F\u176D\u1771\u1774-\u177F\u17DE\u17DF\u17EA-\u17EF\u17FA-\u17FF\u180F\u181A-\u181F\u1878-\u187F\u18AB-\u18AF\u18F6-\u18FF\u191D-\u191F\u192C-\u192F\u193C-\u193F\u1941-\u1943\u196E\u196F\u1975-\u197F\u19AC-\u19AF\u19CA-\u19CF\u19DB-\u19DD\u1A1C\u1A1D\u1A5F\u1A7D\u1A7E\u1A8A-\u1A8F\u1A9A-\u1A9F\u1AAE-\u1AFF\u1B4C-\u1B4F\u1B7D-\u1B7F\u1BF4-\u1BFB\u1C38-\u1C3A\u1C4A-\u1C4C\u1C80-\u1CBF\u1CC8-\u1CCF\u1CF7-\u1CFF\u1DE7-\u1DFB\u1F16\u1F17\u1F1E\u1F1F\u1F46\u1F47\u1F4E\u1F4F\u1F58\u1F5A\u1F5C\u1F5E\u1F7E\u1F7F\u1FB5\u1FC5\u1FD4\u1FD5\u1FDC\u1FF0\u1FF1\u1FF5\u1FFF\u200B-\u200F\u202A-\u202E\u2060-\u206F\u2072\u2073\u208F\u209D-\u209F\u20BB-\u20CF\u20F1-\u20FF\u218A-\u218F\u23F4-\u23FF\u2427-\u243F\u244B-\u245F\u2700\u2B4D-\u2B4F\u2B5A-\u2BFF\u2C2F\u2C5F\u2CF4-\u2CF8\u2D26\u2D28-\u2D2C\u2D2E\u2D2F\u2D68-\u2D6E\u2D71-\u2D7E\u2D97-\u2D9F\u2DA7\u2DAF\u2DB7\u2DBF\u2DC7\u2DCF\u2DD7\u2DDF\u2E3C-\u2E7F\u2E9A\u2EF4-\u2EFF\u2FD6-\u2FEF\u2FFC-\u2FFF\u3040\u3097\u3098\u3100-\u3104\u312E-\u3130\u318F\u31BB-\u31BF\u31E4-\u31EF\u321F\u32FF\u4DB6-\u4DBF\u9FCD-\u9FFF\uA48D-\uA48F\uA4C7-\uA4CF\uA62C-\uA63F\uA698-\uA69E\uA6F8-\uA6FF\uA78F\uA794-\uA79F\uA7AB-\uA7F7\uA82C-\uA82F\uA83A-\uA83F\uA878-\uA87F\uA8C5-\uA8CD\uA8DA-\uA8DF\uA8FC-\uA8FF\uA954-\uA95E\uA97D-\uA97F\uA9CE\uA9DA-\uA9DD\uA9E0-\uA9FF\uAA37-\uAA3F\uAA4E\uAA4F\uAA5A\uAA5B\uAA7C-\uAA7F\uAAC3-\uAADA\uAAF7-\uAB00\uAB07\uAB08\uAB0F\uAB10\uAB17-\uAB1F\uAB27\uAB2F-\uABBF\uABEE\uABEF\uABFA-\uABFF\uD7A4-\uD7AF\uD7C7-\uD7CA\uD7FC-\uF8FF\uFA6E\uFA6F\uFADA-\uFAFF\uFB07-\uFB12\uFB18-\uFB1C\uFB37\uFB3D\uFB3F\uFB42\uFB45\uFBC2-\uFBD2\uFD40-\uFD4F\uFD90\uFD91\uFDC8-\uFDEF\uFDFE\uFDFF\uFE1A-\uFE1F\uFE27-\uFE2F\uFE53\uFE67\uFE6C-\uFE6F\uFE75\uFEFD-\uFF00\uFFBF-\uFFC1\uFFC8\uFFC9\uFFD0\uFFD1\uFFD8\uFFD9\uFFDD-\uFFDF\uFFE7\uFFEF-\uFFFB\uFFFE\uFFFF]/g;function ReplaceWhitespaceNames(){var Bt=Players.getIDs();for(var Gt in Bt){var Xt=Players.get(Gt);Xt.name=Xt.name.replace(nonprintRegex,"[WS]")}}function toUnicode(Bt){for(var Gt="",Xt=0,Ht;Xt<Bt.length;Xt++){for(Ht=Bt.charCodeAt(Xt).toString(16).toUpperCase();4>Ht.length;)Ht="0"+Ht;Ht="\\u"+Ht,Gt+=Ht}return Gt}function confirmDialog(Bt){Bt=Bt||{},Bt.yesText=Bt.yesText||"Yes",Bt.noText=Bt.noText||"No",Bt.title=Bt.title||"Confirmation needed.",Bt.message=Bt.message||"Do you wish to continue?",Bt.yes=Bt.yes||function(){},Bt.no=Bt.no||function(){};var Gt="<div id='confirmDialog' tabindex='1' style='position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0,0,0,.5); z-index: 10000;'><div style='position: absolute; width: 550px; height: 180px; left: calc(50% - 275px); top: calc(50% - 90px);background-color: rgba(0,0,0,0.9); box-shadow: 0 10px 59px -9px rgba(0,0,0,0.7); border-radius: 9px; border-bottom: 2px solid rgba(0,0,0,0.3); border-top: 2px solid rgba(255,255,255,0.08); box-sizing: border-box; padding: 18px 18px 0 18px; cursor: default; font-family: verdana,arial,helvetica,sans-serif'><div style='font-size: 20px; color: white; margin-bottom: 10px;'>$title</div><div style='color: #AAAAAA'>$message</div><hr/><div style='width: 200px; position: absolute; left: calc(50% - 100px); margin-top: 20px;'><input id='confirmYes' type='button' value='' style='width: 80px; height: 25px; background-color: #228a12; color: white; border-radius: 4px; font-size=16px; text-shadow: 0 -1px 0 rgba(0,0,0,0.6); border: 2px solid rgba(0,0,0,.2)'><span style='margin-left: 40px'></span><input id='confirmNo' type='button' value='' style='width: 80px; height: 25px; background-color: #555555; color: white; border-radius: 4px; font-size=16px; text-shadow: 0 -1px 0 rgba(0,0,0,0.6); border: 2px solid rgba(0,0,0,.2)'></div></div></div>";Gt=Gt.replace(/\$title/g,Bt.title).replace(/\$message/g,Bt.message);var Xt=$(Gt);$("body").append(Xt),Xt.focus().keydown(function(Ht){Ht.stopImmediatePropagation()}).keyup(function(Ht){Ht.stopImmediatePropagation()}),$("#confirmYes",Xt).val(Bt.yesText).click(function(){Xt.remove(),Bt.yes()}),$("#confirmNo",Xt).val(Bt.noText).click(function(){Xt.remove(),Bt.no()})}function createModal(Bt){Bt=Bt||{},Bt.title=Bt.title||"",Bt.content=Bt.content||"";var Gt=$(".modalDialog",SWAM.Templates)[0].outerHTML;Gt=Gt.replace(/\$title/g,Bt.title);var Xt=$(Gt);return $(".modalContent",Xt).html(Bt.content),$("body").append(Xt),Xt.focus().keydown(function(Ht){Ht.stopImmediatePropagation()}).keyup(function(Ht){Ht.stopImmediatePropagation()}),Xt}$.getScript("https://cdn.jsdelivr.net/npm/pixi-filters@2.5.0/dist/pixi-filters.js");function SWAM(){function addRedditPanel(){var Bt=$("#redditPanel",SWAM.Templates)[0].outerHTML,Gt=$(Bt);let Xt="";return $.get("https://www.reddit.com/r/airmash/hot.json?limit=25",Ht=>{try{for(let Wt of Ht.data.children)Xt+="<div><a target='_blank' class='"+(Wt.data.stickied?"sticky":"")+"' href='https://reddit.com/"+Wt.data.permalink+"'>"+Wt.data.title+"</a><span class='author'> - "+Wt.data.author+"</span></div>"}catch(Wt){}$(".redditPosts",Gt).html(Xt),$("#logon").after(Gt),Gt.perfectScrollbar({suppressScrollX:!0})}),Gt}function getDefaultModSettings(){return{graphics:{nebulas:{blue:!0,green:!0,red:!0},asteroidLayers:3,decorations:{stellar:!0,planets:!0,moons:!0,ships:!0}},audio:{voiceEventsCTF:!0}}}function getModSettings(){function Bt(Ht,Yt){return"undefined"==typeof Ht?Yt:Ht}let Gt=getDefaultModSettings(),Xt=null;try{Xt=JSON.parse(localStorage.getItem("SWAM_Settings"))}catch(Ht){Xt=null}return null!=Xt&&Xt.graphics?(Gt.graphics.nebulas&&(Gt.graphics.nebulas.blue=Bt(Xt.graphics.nebulas.blue,!0),Gt.graphics.nebulas.green=Bt(Xt.graphics.nebulas.green,!0),Gt.graphics.nebulas.red=Bt(Xt.graphics.nebulas.red,!0)),Gt.graphics.asteroidLayers=Bt(Xt.graphics.asteroidLayers,3),Gt.graphics.decorations&&(Gt.graphics.decorations.stellar=Bt(Xt.graphics.decorations.stellar,!0),Gt.graphics.decorations.planets=Bt(Xt.graphics.decorations.planets,!0),Gt.graphics.decorations.moons=Bt(Xt.graphics.decorations.moons,!0),Gt.graphics.decorations.ships=Bt(Xt.graphics.decorations.ships,!0))):localStorage.removeItem("SWAM_Settings"),null!=Xt&&Xt.audio&&(Gt.audio.voiceEventsCTF=Bt(Xt.audio.voiceEventsCTF,!0)),Gt}function setModSettings(Bt){SWAM.Settings=Bt;let Gt=Bt.graphics;game.graphics.layers.map.children[0].alpha=0.8,game.graphics.layers.map.children[0].visible=Gt.nebulas.blue,game.graphics.layers.map.children[2].alpha=0.8,game.graphics.layers.map.children[2].visible=Gt.nebulas.green,game.graphics.layers.map.children[4].alpha=0.8,game.graphics.layers.map.children[4].visible=Gt.nebulas.red,SWAM.planet.visible=Gt.decorations.planets,SWAM.ShipContainer.visible=Gt.decorations.ships;var Xt=[SWAM.asteroids1,SWAM.asteroids2,SWAM.asteroids3];for(let Ht=0;3>Ht;Ht++)Xt[Ht].visible=Ht<Gt.asteroidLayers;localStorage.setItem("SWAM_Settings",JSON.stringify(Bt))}function LoadTextures(Bt){for(let Yt in TextureInfo){let Wt=TextureInfo[Yt];Wt.scale=Wt.scale||1;let jt=PIXI.Texture.fromImage(Yt),zt=null;for(let Vt in Wt.useMask&&(zt=PIXI.Texture.fromImage(Yt+"_Mask")),Wt.items){let qt=Wt.items[Vt],Kt=new PIXI.Texture(jt,new PIXI.Rectangle(qt[0],qt[1],qt[2],qt[3])),Qt=new PIXI.Sprite(Kt);if(Qt.scale.set(Wt.scale,Wt.scale),Wt.useMask){var Gt=Wt.maskScale||1,Xt=new PIXI.Texture(zt,new PIXI.Rectangle(qt[0]/Gt,qt[1]/Gt,qt[2]/Gt,qt[3]/Gt)),Ht=new PIXI.Sprite(Xt);Ht.scale.set(Gt,Gt),Qt.addChild(Ht),Qt.filters=[new PIXI.SpriteMaskFilter(Ht)],Ht.position.set(-qt[0],-qt[1])}let Zt=PIXI.RenderTexture.create(Qt.width,Qt.height);Bt.render(Qt,Zt,!0),SWAM.Textures[Vt]=Zt}}}function createSprite(Bt,Gt){let Xt=SWAM.Textures[Bt],Ht=new PIXI.Sprite(Xt);return"undefined"==typeof Gt&&(Gt={}),Ht.distanceFactor=Gt.distanceFactor?Gt.distanceFactor:[1,1],Ht.basePosition=Gt.distanceFactor?Gt.distanceFactor:[1,1],Gt.position&&Ht.position.set(Gt.position[0],Gt.position[1]),Gt.anchor&&Ht.anchor.set(Gt.anchor[0],Gt.anchor[1]),Gt.pivot&&Ht.pivot.set(Gt.pivot[0],Gt.pivot[1]),Gt.scale&&(Array.isArray(Gt.scale)?Ht.scale.set(Gt.scale[0],Gt.scale[1]):Ht.scale.set(Gt.scale)),Gt.rotation&&(Ht.rotation=Gt.rotation),Gt.alpha&&(Ht.alpha=Gt.alpha),Gt.blend&&(Ht.blendMode=PIXI.BLEND_MODES[Gt.blend]),Gt.tint&&(Ht.tint=Gt.tint),Gt.mask&&(Ht.mask=Gt.mask),Gt.visible&&(Ht.visible=Gt.visible),Gt.container&&Gt.container.addChild(Ht),Ht}function createSpriteUpdatable(Bt,Gt){"undefined"==typeof Gt&&(Gt={});let Xt=createSprite(Bt,Gt);return Xt.distanceFactor=Gt.distanceFactor?Gt.distanceFactor:[1,1],Xt.basePosition=Gt.basePosition?Gt.basePosition:[0,0],Xt.update=function(){let Wt=Graphics.getCamera(),jt=Wt.x+(Xt.basePosition[0]-Wt.x)/Xt.distanceFactor[0],zt=Wt.y+(Xt.basePosition[1]-Wt.y)/Xt.distanceFactor[1];Xt.position.set(jt,zt)},Xt}function createShips(){var Bt=12,Gt=[],Xt=new PIXI.Container;for(let Yt in Xt.scale.set(game.scale,game.scale),game.graphics.layers.map.addChildAt(Xt,getDoodadsIndex()),SWAM.ShipContainer=Xt,TextureInfo.ImperialShips.items)Gt.push(Yt);let Ht=2*Math.PI/Bt;for(let Yt=0,Wt=0;Yt<Bt;Yt++,Wt+=Ht){let jt=Tools.randInt(-14000,-1e4),zt=Tools.randInt(-1e3,1e3),Vt=Tools.randInt(5e3,13000),qt=getCirclePoint(jt,zt,Vt,Wt);jt=qt.x,zt=qt.y;let Kt=Tools.rand(0.2,0.85),Qt=0.5*(1/(Kt/0.85))+0.5,Zt=Gt[Tools.randInt(0,Gt.length-1)],Jt=createSpriteUpdatable(Zt,{distanceFactor:[8*Qt,8*Qt],scale:[Kt,Kt],basePosition:[jt,zt],position:[jt,zt],anchor:[0.5,0.5]});Jt.textureName=Zt,Jt.angleUsed=Wt,SWAM.Ships.push(Jt)}SWAM.Ships.sort(function(Yt,Wt){return Wt.distanceFactor[0]-Yt.distanceFactor[0]});for(let Yt of SWAM.Ships)Xt.addChild(Yt)}function getCirclePoint(Bt,Gt,Xt,Ht){let Yt=Xt*Math.cos(Ht)+Bt,Wt=Xt*Math.sin(Ht)+Gt;return{x:Yt,y:Wt}}function getDoodadsIndex(){let Bt=game.graphics.layers.map,Gt=game.graphics.layers.doodads,Xt=0;for(var Ht=0;Ht<Bt.children.length;Ht++)Bt.children[Ht]==Gt&&(Xt=Ht);return Xt}function crateTileLayer(Bt,Gt,Xt){var Ht=Graphics.renderer.width,Yt=Graphics.renderer.height;let Wt=Textures.tile(Bt,Ht,Yt);return Wt.layerName=Gt,game.graphics.layers.map.addChildAt(Wt,getDoodadsIndex()),Wt.tileScale.set(Xt,Xt),Wt}function createPlanet(Bt){let Gt=createPlanet2Sprite(Bt);return Gt.layerName="planet",Gt.scaleModifier=0.5,Gt.scale.set(game.scale*Gt.scaleModifier,game.scale*Gt.scaleModifier),Gt.baseX=-16384,Gt.baseY=8192-Gt.height,Gt.update=function(Xt,Ht){var Yt=(Xt-16384*game.scale)/30;let Wt=(Ht+8192*game.scale-Gt.height)/30+game.halfScreenY;Gt.position.set(Yt,Wt)},Gt}function createPlanet2Sprite(Bt){var Gt=PIXI.Texture.fromImage("planet2"),Xt=new PIXI.Sprite(Gt),Ht=PIXI.Sprite.fromImage("planet2_mask");Ht.scale.set(1,1);let Yt=PIXI.RenderTexture.create(2*Xt.width,2*Xt.height),Wt=new PIXI.Sprite(Yt);return Xt.addChild(Ht),Xt.filters=[new PIXI.SpriteMaskFilter(Ht)],Xt.position.set(0,0),Xt.scale.set(2,2),Bt.render(Xt,Yt),Wt.update=SWAM.updatePlanet,Wt}function splitAndSend(Bt,Gt,Xt,Ht){Xt=Xt||100,Ht=Ht||1100;var Yt=new RegExp("[\\s\\S]{1,"+Xt+"}","g"),Wt=Bt.match(Yt)||[];let jt=0;var zt=function(){Gt.call(Network,Wt[jt++]),jt<Wt.length&&setTimeout(zt,Ht)};zt()}function makePlayerGlow(Bt){if(PIXI.filters.GlowFilter){if("Bombita"==Bt.name)return;var Gt=0==Bt.graphicsSet?3386111:16737894;Bt.sprites.sprite.filters=[new PIXI.filters.GlowFilter(10,1,0,Gt,0.2)]}}function removePlayerGlow(Bt){PIXI.filters.GlowFilter&&"Bombita"!=Bt.name&&(Bt.sprites.sprite.filters=[])}function controlKillStreak(Bt,Gt){null==Bt||null==Gt||("undefined"==typeof Bt.killCount&&(Bt.killCount=0),Bt.killCount++,5<=Bt.killCount&&makePlayerGlow(Bt),Gt.killCount=0,removePlayerGlow(Gt))}window.SWAM=SWAM,SWAM.debug=!1,config.overdraw=0,config.overdrawOptimize=!0,window.ShowKilled=!0,window.ShowEnterLeave=!1;let Base64={_keyStr:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",encode:function(Bt){var Gt="",qt=0,Xt,Ht,Yt,Wt,jt,zt,Vt;for(Bt=Base64._utf8_encode(Bt);qt<Bt.length;)Xt=Bt.charCodeAt(qt++),Ht=Bt.charCodeAt(qt++),Yt=Bt.charCodeAt(qt++),Wt=Xt>>2,jt=(3&Xt)<<4|Ht>>4,zt=(15&Ht)<<2|Yt>>6,Vt=63&Yt,isNaN(Ht)?zt=Vt=64:isNaN(Yt)&&(Vt=64),Gt=Gt+this._keyStr.charAt(Wt)+this._keyStr.charAt(jt)+this._keyStr.charAt(zt)+this._keyStr.charAt(Vt);return Gt},decode:function(Bt){var Gt="",qt=0,Xt,Ht,Yt,Wt,jt,zt,Vt;for(Bt=Bt.replace(/[^A-Za-z0-9+/=]/g,"");qt<Bt.length;)Wt=this._keyStr.indexOf(Bt.charAt(qt++)),jt=this._keyStr.indexOf(Bt.charAt(qt++)),zt=this._keyStr.indexOf(Bt.charAt(qt++)),Vt=this._keyStr.indexOf(Bt.charAt(qt++)),Xt=Wt<<2|jt>>4,Ht=(15&jt)<<4|zt>>2,Yt=(3&zt)<<6|Vt,Gt+=String.fromCharCode(Xt),64!=zt&&(Gt+=String.fromCharCode(Ht)),64!=Vt&&(Gt+=String.fromCharCode(Yt));return Gt=Base64._utf8_decode(Gt),Gt},_utf8_encode:function(Bt){Bt=Bt.replace(/rn/g,"n");for(var Gt="",Xt=0,Ht;Xt<Bt.length;Xt++)Ht=Bt.charCodeAt(Xt),128>Ht?Gt+=String.fromCharCode(Ht):127<Ht&&2048>Ht?(Gt+=String.fromCharCode(192|Ht>>6),Gt+=String.fromCharCode(128|63&Ht)):(Gt+=String.fromCharCode(224|Ht>>12),Gt+=String.fromCharCode(128|63&Ht>>6),Gt+=String.fromCharCode(128|63&Ht));return Gt},_utf8_decode:function(Bt){for(var Gt="",Xt=0,Ht=0,Wt=0;Xt<Bt.length;)Ht=Bt.charCodeAt(Xt),128>Ht?(Gt+=String.fromCharCode(Ht),Xt++):191<Ht&&224>Ht?(Wt=Bt.charCodeAt(Xt+1),Gt+=String.fromCharCode((31&Ht)<<6|63&Wt),Xt+=2):(Wt=Bt.charCodeAt(Xt+1),c3=Bt.charCodeAt(Xt+2),Gt+=String.fromCharCode((15&Ht)<<12|(63&Wt)<<6|63&c3),Xt+=3);return Gt}};window.Base64=Base64;let imperialRebelDataURL="url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAAC/VBMVEUAAAD////////////////////////+/v4LCwv///8ODg7//////////////////////////////v59fHz///////////////8VFRX5+fn//v7//v7///////8SEhL////////////++vr///8bGxsUFBQbGxsuLi7///////////8gICA0NDRcXFxAQED////////SCQkxMTEmJiZBQUFiYmKwsLDa2trOzs7q6uqlpaX////////9/f3////KCwsuLi47OjpUVFRQUFDhV1eBgYFsbGzupqa8vLzS0tLk5OTw8PDl5eX////////////79fXskpLxCgrbCQnOFxfZGRncFBT0GxsqKiraJyf1NzcgICBGRkbjQEDUPT3VVlZDQ0PYZWWHh4fqjo6hBQVHR0f09PTBCgryvb3R0dH43d31xcX+5uY5OTn////uAwPDERG6Cgq/FxfVDw/aIiJPT0/eTEzJHBw5OTncdHR0dHSCgoLULS3WPT1RUVGvAgJ0dHS+vr7ExMTyycn7h4fTLy/sJCT75+fOVFRra2vmenqgoKCampr55ub88fH///+Tk5PY2NioqKjpenrGxsbzwMDQQUH4+PjvWlr209Pr6+v86urs7OzEDAzlDQ3mICDOS0vXKirha2v2YWEzMzODg4PiRESTk5NcWlqhoaHBAgKmpqbreXnPFRXxsbGDg4OzDg5qamrsb2/ehYXuvLzLHh61tbX67e3oVFTmRkZUVFTgVVX2zMy8Gxv6mJjzt7ewsLBpaWn30ND8sLDyra323991dXXtoaHtQkLdYGD////0r6+Ghob////xp6d8fHz56OhVVVXuVFT0w8PafX30zs7toqLrOzvKysrvtbXrnZ3hd3fa2tr1qqq7u7vorKz2trbbaGjtwcHwwcH71dXdfHz12Njzk5P85eUHBwcJCQncAADfAQHIAADtAADqAADmAADRAADiAADWAQHZAADMAADFAADDAQHAAQHxAADKAADOAQG6AADkAADTAQHFcXUqAAAA6XRSTlMAAgUJDzASwP4e/VozIUgYOl4s3VNAPDb6wGRQQiT7Pg1NHBX49/XockpF8u/m11Um/PLy7eHQx8PBiYFubGf58+/o5uXc3NLKycXDt5CHencx/Pv49/f29PHu7Ovq6eXi4drX08zCsKqmpZeOjCn++fj39vTp6Ojk3dzb2tbU09LNzMnJw8O8vLKwo52amZaVlJCNioeHenFwbWVi+/r16OPg3Nzb2NfW09PSz87Nzc3My8jGxsTDwsLAvr29vLu3trOxsa+sqaalo6KhoJqak5GMiIeDgX54eHh2cG9ubGZlYltPTkJCOwDD0BUAAARNSURBVDjLZZRldBNBFIXTrCfZjbunSZqkCVBKgQrFpS20FHd3d3d3d3d3d3d3d99NGwhV2sJhdgsFDu/fzPnOvfe8N294f1VICASHEiQhhiF+CO+/CuGKD6EEIlGqEBIFFFd/I3w+BEF8Pkyo9Y/HP9CrSRic2JsiDCAWGEVhGLaJFPeH5a++W1xkg7krC/Qb40OwmCBTU20EYp0/PC8r2GK+HiFsqakgHcoas0IgiUz0esF7GUKV61Q+PSv441wchfT4+HCRSIaUCIVCWDOURJRP9y/4oDYs7TqxJYAGTOy61KD+tGjCnRdClREFUnwLIaKeDBz/1mB4M2ng4Or1siKqt218+JVS9e7SrshpQgkJ83mQGHEvHlZ+rt7gude7oFfLeln1q9TPrDvXYKa6ygVh8xQiMcSDSxh0R/OHL7aqVC8n9cnNKZ8XEZHR4NBziTqmhtaHjyjnMcI8sVp4o29wis6DIJRrb6+c9Lz8YN1ttSmkO16yaiXcMVUoEvOMVO0NGX0v6swlSLV0RuucbJC8ygydpLsGZxh7I1OxJUqShwivNsjo10knIUKNVMq+5dnpeRE7Yq3dffKSDNOsdEnHHLeMpyq3x5/Zr1O8xGYRq3VdWgCo8Zlyt33RmFzAVNJWxScrRDxPSvM0f/2TLqUNQmXC6azfgC435VptmTYavGJiDUExoYRnTV6Z5q/bNtZqhNEeiluDc7PTq3TrHF22akUBY6qGlQ1vKjXzFLVWfE3zV+kCQhEioJSbk31ZGjtKQ9MMw1TGaoY5pEpe8Vpfvqf5G1RPFqrUbtf5VQW5HWXW2q1oDiqlrTlIIDUA6PMXINX8WHK8Lm7m2D4FHW2I+3+oDqD8mc3HXp955WDLgo4IohTGVjP9Y6dPbviZNcxovKZ62xa9j+v0emlK5+gxci/+JzgV26Qna5iZEVGvfG67TbMXLpy9O1KOdWBbUCpxNNcCpWttzwBnGMxPb0ebvKc6e020JiqJbWZ/7VDmNGimWneiTiDwmTUMtmNAkhoJApBa4BtaOBYNO5Yeim5NvgUCrOFIwND2MtGNaFA4N+AKhQMmzHHj6nxjDUcyrJA3CWuG01xVkFdiNNxTQWWsFKC2V2QAJeiPYVECDokq3cHHFD46CyGJP9vwW2ACNrqyhmFwr3x9RaBkKlUaw4qeLx8tQbnGNdwSVQZLqlrKXmjk8A5JxBKH4OG/FiEECpXpU6aEMa0OaLHoNpHACrfLy2BYjcp002tCM7dSYKfEiLV4zDrGOapsknazTyOotFHboezOcDpsltDMLSe7nRabUaJ/dsTBOKO2JiRE2scklK4WTpvaP1KoAAOEOApCSREljGnvxBlnBQHeKJxmHMVmSd1qYyHzmyJkKuuymAvtw5xOuzOy2OSYZXozQqBFDKCAZSiJqCiFND7O5YqLlxZ3mxGjGP798RSJwWJSJpIoPRTlMahEMvKvT/En4U+imSkuVtwAAAAASUVORK5CYII=')",gsData=[imperialRebelDataURL,"url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAACi1BMVEUAAAD///8LCwv///////8ODg4QEBD////7+/sWFhb///////////8NDQ3///82Njb///////////////////////8ZGRn///////////////////////////8UFBQUFBQmJiZhYWH///////////////////////8cHBwaGhouLi4xMTFHR0dpaWl7e3v///8fHx8fHx8uLi5ubm5+fn7BwcHS0tLv7+/4+Pj///////////////////////////8gICAgICBXV1dkZGSAgICCgoLb29vo6Ojx8fGmpqb///////////////////8YGBgoKCgzMzM/Pz8zMzMqKipLS0tTU1NRUVFbW1tDQ0N5eXkxMTGEhISKioq9vb3Y2NhOTk7l5eXl5eX09PT9/f3///////////////////////8SEhIVFRUrKysiIiI7OztDQ0MkJCRPT091dXVjY2NqamqpqalHR0e0tLS6urrMzMxISEjh4eG+vr7z8/P19fXOzs52dnadnZ2vr6////8aGhpdXV05OTkwMDAqKipOTk5cXFxFRUWSkpI6OjpVVVWfn5+lpaVwcHA/Pz+tra2qqqqvr6+BgYFZWVloaGhnZ2fs7OzOzs7S0tJVVVXt7e3a2tqwsLDR0dHPz89+fn7R0dGKioq6urqWlpba2tqurq6oqKj+/v7AwMD////k5OTe3t74+Pjc3Nz////4+Pj////r6+v19fXq6urw8PD///////8jIyM7Ozs7OztxcXF0dHRbW1tPT094eHjFxcWxsbG1tbW8vLzIyMhoaGhra2tra2ufn5+hoaGYmJicnJzMzMzS0tKSkpLDw8PIyMjKysrPz88HBwcKCgrXv00AAAAA13RSTlMAv/4DAf39IcD6Qgk9/grwPzstJBYS9F5aU0hGHQ/7+PXkV086MRgH+Pjz8uvi3Tf49Ojg3MzIw8BnXDQyLyoU8u3n49zbxsPCilVSUEoN+fTv7evr6ujo5ePd3dvZzcfGxbd+eXNiXyYOAvr19PDv7e3p393Z0dDPzsrKxcXCwL6skoNM8eXk5OPg3tvX1tXU09PT0dHQzs7Nx8PDwL+8uLitp6ajoJWUkpGQhYOBgX12b25ubW1lY18jH/Xh4Nva1tXQy8XEwsC2tbKkop6cmZeVi4l4dpOI3Z0AAAP8SURBVDjLdVRnVxNREN23cVt6JwkhhSRAAoTQkSBGIDE0QVREBRQ79t4Vxd5777333nvvdefnuG+DkuM5vi/75Z6Zu3MLEXs9JLIkPVNaopEmWiyJUk2wlElJkkl6EHFvQmo/PdNLYzEn9Lw5Zsz1nuPMFrnnnr5fKoZ1j7GWalbcXb5sYY7RXmccOHfZ8jsuudZqwMO6MEoDU5JoqhyxEvi6egXpCABpnNtZbMm611vZhZIoe+uyXNcOTeLt67cuWODw5hfMmZ0N9hG/qjXj9THUBJlB5zZXDoNJ294UsjvLbXTTFjZ6cHc2rDmTLB/fWyYRlqUmMe6qzrX8kJcdaH+Lg+Z5OtC8CLGv18H0Uya5zpDag5D0s2ZVncsB53BU2Nzg5cXnbfC3oUWPyemfTW6mXULI9FrXlUeQyaL8Ro7nwZc7U6UAsGXMQ8hPrflhLkmREe2Muuc+yCjMz1XhGeQMFjlpHgDSM+cXrYLNNxJ1SYS+V/XpbMhoxhD8VEvQIIUwEcMqyoD7mFySQtzX3N6j8KWBsIHCoLThfX0ggCgbCZA2md5wS80QpYkXQ4GdgwEcQ5003je/AH+oMn86QMaO9LrztVrC4zoBziKngsxEbGYdT/c/eqy/jeea9gu0oZENw7vqIJFVNQLmRAeR1NDIEtTyYPOXUaPP7nX42aJIC0dObWtVbEp2E3LTMNtiVMGBQjU0v+/xUWOra8aNPnl4QXgqDXQuOhDqU6wm1MV9pixF5RSAQGTWhbFSTy918aVtnPiDg9HIAfYEKSFNMA48gspIDOIHXK7xWK3aFVeH8CJoGjtyNfUfUO2/oPh15PrYOtOl2RP/rMsR1mHidpE4mT6zFROvcWHiL/wqUiQ+RSCOT0DOWYJPMDyKNjqefsUnqM9jOyLNHNnQ1krhE3hqTkA5Kx4T5XrFYw4QjuksRHkUzCgKw1tzEMuSHdhVBlCflzkR0+2SpSmMZZmXbseyMKLAAQDgaIgJPBkLreCwwD5RYMEqZmyVChUAYPVVUTaD5MXn8zcC9wFbpZ2RCqYbhE2HUdQMhJyiZyaXzxNM9wybLmbfh9i+rYM5ALJ/XniqMImetgsJ1HO+C/ZVikFIFoIwK4IKKxrSYos41cxFqO0JGfpk0jBJEiFSBsad3JkDQ14Vob4tDkrg7M2LILR4Hd8nFqkJceE0Pl8aZbc02ejGjWzHwd0hfu03HE6lBFcBjrkbxxyMs7YWFOCY75gd4icu/Nkd81hhBC2myoUrSQj4aLI+mwf79jMJtVk6XBh/q8dg1cpx9cwdaEzzGqdvf195x6XW3jco4wtKLDF5d4lV1co9upT2WInF91gKUxrsqkN5UBtfh78BLbSeZWMjzYgAAAAASUVORK5CYII=')","url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAACQAAAAkCAMAAADW3miqAAADAFBMVEUAAAD////////////////////////////////////++/v////////////////////////////////////////////////////////////////////vAwP////////////////////////////////////////////////////zBATICgr////////////////////dBATFBATqAwPRCgrqDAzXDw/oHR36iIj64OD////95OT//////////////////f3////////jBQXXBgbBBQXNEhLFERHdFBT0GBjbGBjUFBTaJCT1JCTTPT32QEDhQEDqSkrbSUnYUlL0bW3wp6f4s7Pvubn//////Pz////yo6P////////////TAgLSBwfnBgbzCQntCQm6CAjxDQ3cCAjvGBjQHBzAHBy7EBDgKCjwODjuJSXtOjriVFTbWFjSV1f0T0/abm7zYmLjdnbfPT3mjo7nbW30sLDyycn66en75+f40NDpWVn8sLD31tb3xcX////4yMj////0oqL5x8f55eX88fH0wMD55ub+6+vwdHTzwMDfQkL////+8vLuq6v98vL209PvsbH88PDvwcHoh4f539/ohYXvoKDMGxvVKSnRLCzqJCT1MzPyNDTFJSXOQkLrFRXgTEzOS0voDg7oQEDlW1vXKirMEhLXYmLYZGTha2vqGxvTMzPUQkLsh4fuLy/UJyfulpbqoaHrqqrXODj6enrreXn2oKDwu7vehYXehYXVMzPuvLzLHh7oVFTmRkb519fQLCzpICDPWVn6mJjzt7f3goLNT0/4o6P0cnLkdHT32tr5wcH239/toaHtQkLtwcH0r6/jfn7uVFT80dH0w8PafX33np7NODj++/v0zs7hd3fvXl784ODuVlb99fX85ubbaGj71dXIAADLAADCAADpAAC6AADfAADQAADkAADaAADXAAC/AADFAADmAAC3AAC1AADcAADrAAC8AADwAADtAADhAADNAADUAADuAADSAADyAABVO9ozAAAA5nRSTlMAAhAIBB4xBjoSGgxkSTdDNVJPHGE8LywlCnJM/lhVRz4rIRaIXUAoIxT++pCNg3wi/v7++/r59sihlI9ubGpbUUYY/v39+fn49/f39PPt6+vp6ebX0a+ql3t3dWdZJv79/fz8/Pr69/b29u/u7uvm5ePi39/d3dfRzMnEvLu6sa6ppKGfnZybmZmWjYyHhICAfHdwaWJeSD4yMPby8fHv7uzr6ejo6Ofk4+Pi4eDf3dzZ2dbU09DQz8/OzcnIx8bGwsLBv769vLu7u7e3trW1r6mmpaKOjIqIh4aEg4N2dXNuaGdlT3CF9PkAAARHSURBVDjLZZRldNpQGIZDQkIIJLhDcVtXmUu9c3d3d3d3d3d3d3d3d/cChQLtWlrWdtsNbO3O2ffv3vOc93mTe+6F/hkGA4GNIgNqhBEmA/pvGKFhImxUilskUgMbUKH5F2GyEARhsWCUL1x0flEyZYDBCuwwizCAcGA2G+bAIkzw7kD+rpcRfBEc3iryMhGYQGNXryJQqWreQYejw/B5QgwlVq2ORQm2IkwxQBM99vXNCj2mTWwRmebwdGieQGLWFfM/YTKDXcGkGRZswCzvL85fSfGWzRo7EEBbx07/wuOv/HDtOY9vsyMMIOOgGNlm99XlPN7y25uGHa/uKNvsUJ/LSy2Sb4+3z1VRsTCLASGpUnLJkchnQh7vVe/0Gk16OuoMqO3tPpenI9vs3/I6mS/iMCC4PY87Pv/EEpVEsvR6L3/pSEfZjr6al9rgVMqy8a7DH1UyOwsiqKRpdTz3PqdgUq3yXA1nmiPfU/XUYlIq05mnlStzl6tDFZCcXDy8oPwjrq59LGWeuceZCZoPmMnFDbG4eVa/QL8XAj0MYUlPa/vqtuDiqF1OxlyIBFDHUQuEVjvBN0/vH+hyi0ulQpKEkaV8dSe1xQlOKsWdWB9AaycmgpWRL57UN6gerOShUEqrHaW8tW8qLSIFLNPM3gt8jSuZpWwFgSc8WB9U14tW2SBhdAV3Tvejb1VyGNYLZg8B0MAZ7aRs2EbGnC4XzOscJbBCgqhyP9zenZVAKRGWNGOI35nZpJKYj6KUuNJQVzCvREmNHooo2SnDnVOzmSlJQpHKh9tynZn177dWURJN9KgKNFRZIwNQmawMt7fhOFOiOL7y6N7pfmfkmZZKcdvocY2yQlA7GuriyvqR4204emrLyWMGZafn+p2Nx0xuOfVKoyoZrgCAgC7Z1CPgAsKqdfcdG7G5a/Z3QJWuP6LZsD6l3AAqLFEywgqRCzaqXbSwoGz1GtXSvwPK7yxdvU55n9edkRUorGUSyiGLcqg6SAt9P/PTnH6ayvXTZxOG1A1itAaIz73RrZAWen0eR5ozNz07G0QBqMCb8yPLpW4aLyEgqyBuQ15hICT0ODKdubQQRHl++mioR3MzZodQXXzFznmFf4WZQBiKyqehjDKDF5JyDsSWRcxp8CsvSH8hENK1QCvnn1IVmnMpAoEUIrzthHq/wrUKAEULgY8u5a7StBUph5kQC26vVVas9W+tcBTwlWoUp8GMCANcO6NMGHOyFhAW1wpHVW04RYyjHCZ9gRUEJmhVsZ4a1ApTQEhHlW08hWuxgRsVego4IkyonNCgW5mivwWiqq0ZGSfWydk0E6YIWQp3TsW+5TpVoWulla7WtdegFq01uI2NFD8rCqMcFyTE3Wnav0LN8uV7rmty9slCsRZDQ64iCoFFeolQHB9jioqKMkW3Tmyn5cuNnD9McRhbZOXrtEJBhCBZxcOlttTiR/E3AYEOqmgNZcgAAAAASUVORK5CYII=')"],cruise64green="PD94bWwgdmVyc2lvbj0iMS4wIiBlbmNvZGluZz0iVVRGLTgiPz4KPHN2ZyB2ZXJzaW9uPSIxLjEiIHZpZXdCb3g9IjAgMCAzNTkuMjEgMzU5LjIxIiB4bWxucz0iaHR0cDovL3d3dy53My5vcmcvMjAwMC9zdmciIHhtbG5zOmNjPSJodHRwOi8vY3JlYXRpdmVjb21tb25zLm9yZy9ucyMiIHhtbG5zOmRjPSJodHRwOi8vcHVybC5vcmcvZGMvZWxlbWVudHMvMS4xLyIgeG1sbnM6cmRmPSJodHRwOi8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4KPG1ldGFkYXRhPgo8cmRmOlJERj4KPGNjOldvcmsgcmRmOmFib3V0PSIiPgo8ZGM6Zm9ybWF0PmltYWdlL3N2Zyt4bWw8L2RjOmZvcm1hdD4KPGRjOnR5cGUgcmRmOnJlc291cmNlPSJodHRwOi8vcHVybC5vcmcvZGMvZGNtaXR5cGUvU3RpbGxJbWFnZSIvPgo8ZGM6dGl0bGUvPgo8L2NjOldvcms+CjwvcmRmOlJERj4KPC9tZXRhZGF0YT4KPGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoLTIxMC4wMSAtMzQzLjEzKSI+PGcgdHJhbnNmb3JtPSJ0cmFuc2xhdGUoMTIuMTE2IC0yLjg1ODgpIiBmaWxsPSIjYzlmZjAwIj4KPHBhdGggZD0ibTM3Ny41IDQzNy4zOGMtNzMuMTc4IDAtMTMyLjUgNTkuMzIyLTEzMi41IDEzMi41IDAgNDAuODM3IDE4LjQ4NCA3Ny4zNTEgNDcuNTMxIDEwMS42NiA4Ljg3NjUtOC44OTQ0IDE3Ljc1MS0xNy43OTEgMjYuNjI1LTI2LjY4OCAxLjk1MjYtMS45NTI2IDAuMzczOTktNi43MTk4LTMuNTMxMi0xMC42MjUtMy45MDUyLTMuOTA1Mi04LjY0MTEtNS40ODM5LTEwLjU5NC0zLjUzMTJsLTEyLjY4OCAxMi42ODhjLTE0LjQ2Ny0xNi43NDgtMjQuMDg4LTM3LjgxNy0yNi42NTYtNjFoMTkuMzEyYzIuNzYxNCAwIDUtNC40NzcyIDUtMTBzLTIuMjM4Ni0xMC01LTEwaC0xOS43NWMxLjU3NTItMjMuOTE0IDEwLjYwNi00NS43OTMgMjQuODEyLTYzLjMxMmwxNC45NjkgMTQuOTY5YzEuOTUyNiAxLjk1MjYgNi42ODg1IDAuMzczOTkgMTAuNTk0LTMuNTMxMiAzLjkwNTItMy45MDUyIDUuNDgzOS04LjY3MjQgMy41MzEyLTEwLjYyNWwtMTUuMTU2LTE1LjE1NmMxNy4zNDgtMTQuOTg1IDM5LjMzMS0yNC43NzMgNjMuNS0yNi45MDZ2MjIuMDYyYzAgMi43NjE0IDQuNDc3MiA1IDEwIDVzMTAtMi4yMzg2IDEwLTV2LTIyLjA2MmMyNC4xOCAyLjEzMDQgNDYuMTQ3IDExLjkxMSA2My41IDI2LjkwNmwtMTUuMTU2IDE1LjE1NmMtMS45NTI2IDEuOTUyNi0wLjM3Mzk5IDYuNzE5OCAzLjUzMTIgMTAuNjI1IDMuOTA1MiAzLjkwNTIgOC42NDExIDUuNDgzOSAxMC41OTQgMy41MzEybDE0Ljk2OS0xNC45NjljMTQuMjAzIDE3LjUyMSAyMy4yNDIgMzkuMzk2IDI0LjgxMiA2My4zMTJoLTE5Ljc1Yy0yLjc2MTQgMC01IDQuNDc3Mi01IDEwczIuMjM4NiAxMCA1IDEwaDE5LjI4MWMtMi41NjMxIDIzLjE4Ni0xMi4xNjUgNDQuMjUtMjYuNjI1IDYxbC0xMi42ODgtMTIuNjg4Yy0xLjk1MjYtMS45NTI2LTYuNjg4NS0wLjM3Mzk5LTEwLjU5NCAzLjUzMTItMy45MDUyIDMuOTA1Mi01LjQ4MzkgOC42NzI0LTMuNTMxMiAxMC42MjUgOC44NzI5IDguOTA4NCAxNy43NjYgMTcuNzk3IDI2LjY1NiAyNi42ODggMjkuMDM3LTI0LjMwNiA0Ny41LTYwLjgyOCA0Ny41LTEwMS42NiAwLTczLjE3OC01OS4zMjItMTMyLjUtMTMyLjUtMTMyLjV6Ii8+CjxwYXRoIHRyYW5zZm9ybT0ibWF0cml4KDEuMTY2NyAwIDAgMS4xNjY3IC02MCAtOTUuMzk0KSIgZD0ibTM5MCA1NzIuMzZjMCA4LjI4NDMtNi43MTU3IDE1LTE1IDE1cy0xNS02LjcxNTctMTUtMTUgNi43MTU3LTE1IDE1LTE1IDE1IDYuNzE1NyAxNSAxNXoiLz4KPHBhdGggZD0ibTM0NS43MyA0OTMuNTNjLTQuNjA2OCAyLjA2NjQtNy40ODQ5IDUuNDk4MS02LjU0NjUgNy45MTA4bDIzLjc4NyA2MS4xNjJjLTMuMDc1MiA0LjU4OTYtMy45MzM5IDEwLjU3Ni0xLjc3OTUgMTYuMTE2IDMuNTAzMiA5LjAwNzcgMTMuNjQ1IDEzLjQ3IDIyLjY1MyA5Ljk2NjhzMTMuNDctMTMuNjQ1IDkuOTY2OC0yMi42NTNjLTIuMTU0NC01LjUzOTUtNi44MzI0LTkuMzczLTEyLjItMTAuNjc5bC0yMy43ODctNjEuMTYyYy0xLjAwMDktMi41NzM2LTUuOTg1LTMuMDM3Mi0xMS4xMzItMS4wMzUzLTAuMzIxNyAwLjEyNTExLTAuNjU0MDEgMC4yMzYtMC45NjExMiAwLjM3Mzc5eiIvPgo8cGF0aCBkPSJtMzAzLjUyIDM4Ni44MiAxOC42NzYtNy4xNTU2IDguOTQ0NSAyMy4zNDUgMTQuMDA3LTUuMzY2Ny0yMC4xNjEgNDUuMjA2LTQ1LjIwNi0yMC4xNjEgMTQuMDA3LTUuMzY2Ny04Ljk0NDUtMjMuMzQ1eiIvPgo8L2c+CjwvZz4KPC9zdmc+Cg==",cruiseOFFDataURL="url('data:image/svg+xml;base64,"+Base64.encode(Base64.decode(cruise64green).replace(/\#c9ff00/g,"#555555"))+"')";eval(Base64.decode("d2luZG93Lkdsb3cgPSBmdW5jdGlvbihwbGF5ZXIpDQp7DQogICAgaWYgKFBJWEkuZmlsdGVycy5HbG93RmlsdGVyICYmIHBsYXllci5uYW1lID09ICJCb21iaXRhIikgew0KICAgICAgICB2YXIgY29sb3IgPSAocGxheWVyLmdyYXBoaWNzU2V0ID09IDApID8gMHhFMEUwRkYgOiAweEZGRkZGRjsNCiAgICAgICAgcGxheWVyLnNwcml0ZXMuc3ByaXRlLmZpbHRlcnMgPSBbDQogICAgICAgICAgICBuZXcgUElYSS5maWx0ZXJzLkdsb3dGaWx0ZXIoMTAsIDEsIDAsIGNvbG9yLCAwLjIpDQogICAgICAgIF07DQogICAgfQ0KfTs=")),window.Glow=Glow,game.chosenGraphicsSet=-1;let divGraphicsSet=$("<div class=\"\" style=\"position: relative; width: 44px; height: 44px; cursor: pointer; background-color: rgba(0, 0, 0, 0.3); background-repeat: no-repeat; background-position: center; display: none;\" id=\"graphicsSet\" cgs= \"-1\" title= \"Switch style between Imperial / Rebel / Random\" ></div > ").css("background-image",imperialRebelDataURL).click(function(){if(2!=game.gameType){let Gt=parseInt($(divGraphicsSet).attr("cgs"));Gt++,2==Gt&&(Gt=-1),$(divGraphicsSet).attr("cgs",Gt),game.chosenGraphicsSet=Gt,$(divGraphicsSet).css("background-image",gsData[Gt+1]);let Xt=Players.getMe();null!=Xt&&(Xt.destroy(!1),Xt.setupGraphics(!0),Xt.visibilityUpdate(!0)),UI.aircraftSelected(game.myType)}});$("#sidebar").prepend(divGraphicsSet),$("#settings").prepend($("<div style='position: absolute; right: 66px; top: 0; width: 33px; height: 31px; cursor: pointer; border-radius: 5px; background-repeat: no-repeat; background-size: 20px 20px; background-position: 7px 6px; opacity: .8;'></div>").css("background-image","url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAANlBMVEUAAAD////////////////////////////////////////////////////////////////////xY8b8AAAAEXRSTlMAhpDuGWXDf7YGz7+vn3BAMAcWIBEAAABjSURBVBjTjZFLDoAwCAUplNJaf9z/srqQKIGFb0MyASYBGEjqQjgAewWX2guQsZcS6F3UUzXYbGX7QC5P2KBk45BA0Zl0bhhFO0kUHSI/RVMxQlxWJzIYRSynH09Plx45fccF86MHQB43eIwAAAAASUVORK5CYII=')").click(function(){SWAM.toggleLeaderboard()})),$("#settings").prepend($("<div style='position: absolute; right: 99px; top: 0; width: 33px; height: 31px; cursor: pointer; border-radius: 5px; background-repeat: no-repeat; background-size: 20px 20px; background-position: 7px 6px; opacity: .8;'></div>").css("background-image","url('data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABQAAAAUCAMAAAC6V+0/AAAAbFBMVEUAAAD////5+fn9/f3////////9/f38/Pz////+/v79/f39/f38/Pz7+/v8/Pz////+/v79/f39/f3+/v79/f39/f3////+/v7+/v7+/v7////9/f38/Pz7+/v5+fn////9/f3+/v78/Pz///8GO04AAAAAI3RSTlMA7AN79/OLhvvMnX8aEAXuw5WRgW4f19PPxpZoYhcK5Mh3WAYc474AAACxSURBVBjTbZCHDsMgDERNSchOs3fSwf//Y+1rkErUk5DtB7ZPkJNRqqWL9tBaVRDdHGiqbdeWpfNuSoFvNZd3PmdYAEfr6Ynu1Ycb4KEkT4xJMOEQVnQx501JVBpOYp0T6Yfcj18reKsaCjAoIihDEfyHdShxop92ftFnssjI0Mgt4qWwNLdtJTEs0PO2njrAyocD3C3ShBrh/KZ0ePUaxvp1BsMqokKxv5wuypSqXf4BOdQa9/sJuwYAAAAASUVORK5CYII=')").click(function(){SWAM.OpenSettingsWindow()})).css("width","135px"),$("#logon > div.buttons").before($("<div style='position: relative; width: 295px; left: 35px; top: 10px; text-align: center; vertical-align: top; padding: 9px 18px 7px 18px; background-color: #1e1e1e; border-radius: 4px; font-size: 16px; font-weight: bold; cursor: pointer; color: #fff; text-shadow: 0 -1px 0 rgba(0,0,0,0.6); border-bottom: 2px solid rgba(0,0,0,0.2);'>Mod settings</div>").click(function(){SWAM.OpenSettingsWindow()})),$("#logon").css("height","400px"),$("#minimizechatcontainer").prepend("<div id='clearChat' style='position: absolute; right: 70px; color: #c9c9c9; opacity: 0.8; cursor: pointer;'>Clear chat</div>"),$("#clearChat").click(function(){$("#chatlines").html(""),$("#chatbox").scrollTop(0).perfectScrollbar("update")}),(SWAM.appendHelp=function(){var Bt=[["Z","Radio All"],["X","Radio Team"],["C","Radio Bubble"],["Y","Drop flag"],["5 or End","Cruise Control"],["F3","Toggle leaderboard"],["F4","Toggle UI"]],Gt=$("<div class=\"commands\" style=\"color: white\">StarMash - A Star Wars Mod shortcuts<div class=\"cmdlist\"></div></div>");for(var Ht of Bt){var Yt="<span class=\"nowrap\"><div class=\"cmd\">$key</div><div class=\"desc\">$desc</div></span>".replace(/\$key/g,Ht[0]).replace(/\$desc/g,Ht[1]);$(".cmdlist",Gt).append(Yt)}$("#howtoplay .hiddenstuff").append(Gt)})(),SWAM.Templates=document.createElement("div"),$.get(getFilePath("mod_templates.html"),Bt=>{$(SWAM.Templates).html(Bt),addRedditPanel()}),game.graphics.layers.map.children[0].alpha=0.8,game.graphics.layers.map.children[2].alpha=0.8,game.graphics.layers.map.children[4].alpha=0.8,SWAM.OpenSettingsWindow=function(){function Bt(Ht){var Yt=$(".chkNebula",Gt);Yt[0].checked=Ht.graphics.nebulas.blue,Yt[1].checked=Ht.graphics.nebulas.green,Yt[2].checked=Ht.graphics.nebulas.red,$(".selAsteroidLayers",Gt).val(Ht.graphics.asteroidLayers);var Wt=$(".chkDecorations",Gt);Wt[0].checked=Ht.graphics.decorations.stellar,Wt[1].checked=Ht.graphics.decorations.planets,Wt[2].checked=Ht.graphics.decorations.moons,Wt[3].checked=Ht.graphics.decorations.ships,$(".chkVoiceEventsCTF",Gt)[0].checked=Ht.audio.voiceEventsCTF}let Gt=createModal({title:"StarMash Mod Settings",content:$(".SWAM_Settings",SWAM.Templates)[0].outerHTML});var Xt=getModSettings();Bt(Xt),$(".selAsteroidLayers",Gt).change(Ht=>{Xt.graphics.asteroidLayers=$(Ht.target).val()}),$(".chkNebula",Gt).click(Ht=>{let Yt=$(Ht.target).data("layer");Xt.graphics.nebulas[Yt]=Ht.target.checked}),$(".chkDecorations",Gt).click(Ht=>{let Yt=$(Ht.target).data("layer");Xt.graphics.decorations[Yt]=Ht.target.checked}),$(".chkVoiceEventsCTF",Gt).click(Ht=>{Xt.audio.voiceEventsCTF=Ht.target.checked}),$(".divRestore",Gt).click(()=>{Xt=getDefaultModSettings(),Bt(Xt)}),$(".btnAccept",Gt).click(()=>{setModSettings(Xt),Gt.remove()}),$(".btnCancel",Gt).click(()=>{Gt.remove()})};let loader=new PIXI.loaders.Loader;loader.add("hyperspace",getFilePath("hyperspace.jpg")),loader.add("planet2",getFilePath("planets/planet2.jpg")),loader.add("planet2_mask",getFilePath("planets/planet2-mask.jpg")),loader.add("ImperialShips",getFilePath("ships/ships1.jpg")),loader.add("ImperialShips_Mask",getFilePath("ships/ships1-mask-50.jpg")),SWAM.Ships=[],SWAM.Planets=[],SWAM.Moons=[],SWAM.Stellar=[],SWAM.Textures={ships:{},moons:{},planets:{},stellar:{}};let TextureInfo={ImperialShips:{scale:0.5,useMask:!0,maskScale:2,items:{ISD_01:[0,0,1700,583],ISD_02:[0,2017,1250,803],ISD_03:[1701,0,1414,741],ISD_04:[0,1288,1418,728],ISD_05:[1419,1566,1109,738],ISD_06:[1251,2305,913,523],ISD_07:[1463,742,1409,575],ISD_08:[0,584,1462,703],Dread_01:[0,2821,925,294],Dread_02:[2545,1318,657,505],Dread_03:[1419,1318,1125,247],Dread_04:[926,2829,711,348]}}};loader.load(()=>{SWAM.planet=createPlanet(Graphics.renderer),game.graphics.layers.map.addChildAt(SWAM.planet,getDoodadsIndex()),LoadTextures(Graphics.renderer),createShips(),SWAM.asteroids3=crateTileLayer("asteroids1","asteroids3",game.scale/3),SWAM.asteroids2=crateTileLayer("asteroids2","asteroids2",game.scale),SWAM.asteroids1=crateTileLayer("asteroids1","asteroids1",game.scale),SWAM.hyperSpace=new HyperSpace,setModSettings(getModSettings()),Graphics.setCamera(0,0),SWAM.BackgroundFactor=2*((config.mapWidth-SWAM.planet.width)/SWAM.planet.width)}),SWAM.resizeLayers=function(Bt,Gt){let Xt=Bt/game.scale,Ht=Gt/game.scale;SWAM.planet,SWAM.ShipContainer&&SWAM.ShipContainer.scale.set(game.scale,game.scale),SWAM.asteroids1&&(SWAM.asteroids1.width=Bt,SWAM.asteroids1.height=Gt),SWAM.asteroids2&&(SWAM.asteroids2.width=Bt,SWAM.asteroids2.height=Gt),SWAM.asteroids3&&(SWAM.asteroids3.width=Bt,SWAM.asteroids3.height=Gt)},SWAM.doUpdates=!0,SWAM.updateLayers=function(Bt,Gt){if(SWAM.doUpdates&&(SWAM.Settings.graphics.decorations.planets&&this.planet.update(Bt,Gt),0<SWAM.Settings.graphics.asteroidLayers&&this.updateAsteroids(Bt,Gt),SWAM.Settings.graphics.decorations.ships&&SWAM.ShipContainer&&(SWAM.ShipContainer.position.set(Bt,Gt),SWAM.Ships)))for(let Ht in SWAM.Ships)SWAM.Ships[Ht].update(Bt,Gt)},SWAM.updateSprite=function(Bt,Gt,Xt){var Ht=(Bt-16384*game.scale)/Xt.distanceFactor;let Yt=(Gt+8192*game.scale-planet.height*game.scale-game.halfScreenY)/Xt.distanceFactor;planet.position.set(Ht,Yt)},SWAM.updatePlanet=function(){var Xt=SWAM.planet;let Ht=Graphics.getCamera(),Yt=game.halfScreenX/game.scale,Wt=game.halfScreenY/game.scale,jt=Ht.x-Yt+16384,zt=game.screenX-Xt.width,Vt=config.mapWidth-game.screenX/game.scale,Kt=Ht.y+8192,Qt=0;if(5e3>Kt)Qt=game.screenY;else{let Zt=config.mapHeight-Wt-5e3;Qt=game.screenY-Xt.height*(Kt-5e3)/Zt}Xt.position.set(jt*zt/Vt,Qt)},SWAM.updateAsteroids=function(Bt,Gt){let Xt=Graphics.getCamera(),Ht=Xt.y-game.halfScreenY/game.scale;SWAM.asteroids1&&SWAM.asteroids1.tilePosition.set(Bt/2,Gt/2),SWAM.asteroids2&&SWAM.asteroids2.tilePosition.set(Bt/4,Gt/4),SWAM.asteroids3&&SWAM.asteroids3.tilePosition.set(Bt/6,Gt/6)},SWAM.panX=function(Bt){Bt=Bt||{};let Gt="undefined"==typeof Bt.start?-16384:Bt.start,Xt="undefined"==typeof Bt.end?16384:Bt.end,Ht="undefined"==typeof Bt.step?200:Bt.step,Yt="undefined"==typeof Bt.speed?50:Bt.speed;Xt<=Gt||(Graphics.setCamera(Gt,Graphics.getCamera().y),Gt+=Ht,setTimeout(()=>{SWAM.panX({start:Gt,end:Xt,step:Ht,speed:Yt})},Yt))},SWAM.panY=function(Bt){Bt=Bt||{};let Gt="undefined"==typeof Bt.start?-8192:Bt.start,Xt="undefined"==typeof Bt.end?8192:Bt.end,Ht="undefined"==typeof Bt.step?200:Bt.step,Yt="undefined"==typeof Bt.speed?50:Bt.speed;Xt<=Gt||(Graphics.setCamera(Graphics.getCamera().x,Gt),Gt+=Ht,setTimeout(()=>{SWAM.panY({start:Gt,end:Xt,step:Ht,speed:Yt})},Yt))},SWAM.resizeMap=function(Bt){config.scalingFactor=Bt,Graphics.resizeRenderer(game.screenX,game.screenY)};let Network_sendMethods=[Network.sendChat,Network.sendTeam,Network.sendWhisper,Network.sendSay];Network.sendChat=function(Bt){splitAndSend(Bt,Network_sendMethods[0])},Network.sendTeam=function(Bt){splitAndSend(Bt,Network_sendMethods[1])},Network.sendWhisper=function(Bt,Gt){splitAndSend(Gt,function(Xt){Network_sendMethods[2].call(Network,Bt,Xt)})},Network.sendSay=function(Bt){splitAndSend(Bt,Network_sendMethods[3],30,3e3)};let UI_serverMessage=UI.serverMessage;UI.serverMessage=function(Bt){if((UI_serverMessage.call(UI,Bt),2===game.gameType)&&!(SWAM.Settings&&SWAM.Settings.audio&&!SWAM.Settings.audio.voiceEventsCTF)){let Gt="<span class=\"info inline\"><span class=\"blueflag\"></span></span>",Xt="<span class=\"info inline\"><span class=\"redflag\"></span></span>",Ht=Bt.text.includes(Gt),Yt=Bt.text.includes(Xt);if(2==Bt.type&&(Ht||Yt)){let Wt="";Ht&&(Wt=Bt.text.substring(Gt.length)),Yt&&(Wt=Bt.text.substring(Xt.length)),Wt=Wt.substring(0,Wt.indexOf(" ")).toLowerCase();let jt=Players.getMe().team,zt=0,Vt=Ht?1:2;"taken"==Wt?zt=jt==Vt?SWAM.Audio.Flag.OursTaken:SWAM.Audio.Flag.EnemyTaken:"captured"==Wt?zt=jt==Vt?SWAM.Audio.Flag.OursCaptured:SWAM.Audio.Flag.EnemyCaptured:"returned"==Wt?zt=jt==Vt?SWAM.Audio.Flag.OursRecovered:SWAM.Audio.Flag.EnemyRecovered:void 0,SWAM.Audio.playFlagEvent(zt,jt)}}};let UI_selectUpgrade=UI.selectUpgrade;UI.selectUpgrade=function(Bt){SWAM.radio.visible()||UI_selectUpgrade.call(UI,Bt)};let UI_addChatLine=UI.addChatLine;UI.addChatLine=function(Bt,Gt,Xt){var Yt=$.inArray(Gt.toUpperCase(),["-SWAM-PING","-SWAM-PONG"]);if(0>Yt){Gt=UI.escapeHTML(Gt);let Wt=Gt.match(getURLRegEx());if(null!=Wt){let jt=[];for(let zt of Wt)jt.includes(zt)||(Gt=Gt.replace(zt,"<a href='//"+zt+"' target='_blank' style='text-decoration: underline;'>"+zt+"</a>"),jt.push(zt))}UI_addChatLine.call(UI,Bt,Gt,Xt,!1)}else Gt=Gt.toUpperCase(),"-SWAM-PING"==Gt&&(Bt.id!=game.myID&&Network.sendWhisper(Bt.id,"-SWAM-PONG"),UI_addChatLine.call(UI,Bt,Gt,Xt)),2==Xt&&Bt.id!=game.myID&&"-SWAM-PONG"==Gt&&UI_addChatLine.call(UI,Bt,"IM USING THE MOD.",Xt)};let games_prep=Games.prep;Games.prep=function(){games_prep.apply(Games),(1==game.gameType||3==game.gameType)&&$("#graphicsSet").show(),$("body").append("<div id='AutoPilotAlert' style='position: absolute; top: 100px; left: calc(50% - 100px); width: 200px; color: white; font-size: 40px; background-color: rgb(7, 185, 7); opacity: 0.6; text-align: center; border-radius: 20px; padding: 10px; display:none;'>AutoPilot</div>"),$("body").append("<div id='WhoKilledWho' style='position: absolute; top: 40px; left: 60px; width: 400px; height: 100px; opacity:0.9; overflow: hidden; padding: 8px; font-size: 12px; color: white;'></div>"),UI.addChatMessage("Mod:  Press H to check StarMash shortcuts.".bold()),UI.addChatMessage("Alt-Click the minimap for autopilot (experimental).".bold()),2==game.gameType&&UI.addChatMessage("Y when carrying the flag, to drop it.".bold()),SWAM.PlayerInfoTimer=setInterval(function(){var Bt=Players.getIDs(),Gt=Players.getMe();for(var Xt in Bt){var Ht=Players.get(Xt);"undefined"!=typeof Ht.scorePlace&&(Ht.sprites.name.text=Ht.scorePlace+". "+Ht.name+(Ht.team==Gt.team?" ["+Math.floor(100*parseFloat(Ht.health))+"]":""))}},500),SWAM.hyperSpace.show(),$(window).keydown(SWAM.keydown_handler),$(window).keyup(SWAM.keyup_handler),$("canvas").click(SWAM.canvas_click_handler)};let games_wipe=Games.wipe;Games.wipe=function(){games_wipe.apply(Games),clearInterval(SWAM.PlayerInfoTimer),$("#graphicsSet").hide(),$("body").remove("#WhoKilledWho"),$(window).off("keydown",SWAM.keydown_handler),$(window).off("keyup",SWAM.keyup_handler),$("canvas").off("click",SWAM.canvas_click_handler)},SWAM.BackgroundFactor=30;let graphics_resizeRenderer=Graphics.resizeRenderer;if(Graphics.resizeRenderer=function(Bt,Gt){graphics_resizeRenderer.call(Graphics,Bt,Gt),SWAM.BackgroundFactor=2*((config.mapWidth-SWAM.planet.width)/SWAM.planet.width),SWAM.resizeLayers(Bt,Gt)},SWAM.addDebugElements=function(){SWAM.debug&&($("#logon").append("<div><input class='dgCamUpdates' type='button' value='updates' style='width: 50px; margin-right: 10px;'></div><table><tr><td colspan='3' align='center'><input class='dgCamY' type='button' value='-8192' style='width: 50px; margin-right: 10px;'></td></tr><tr><td><input class='dgCamX' type='button' value='-16384' style='width: 50px; margin-right: 10px;'></td><td><input class='dgCamX' type='button' value='0' style='width: 50px; margin-right: 10px;'><input class='dgCamY' type='button' value='0'    style='width: 50px; margin-right: 10px;'></td><td><input class='dgCamX' type='button' value='16384' style='width: 50px; margin-right: 10px;'></td></tr><tr><td colspan='3' align='center'><input class='dgCamY' type='button' value='8192' style='width: 50px; margin-right: 10px;'></td></tr></table>"),$("#logon input.dgCamX").click(function(Bt){let Gt=$(Bt.target).val();Graphics.setCamera(parseFloat(Gt),Graphics.getCamera().y)}),$("#logon input.dgCamY").click(function(Bt){let Gt=$(Bt.target).val();Graphics.setCamera(Graphics.getCamera().x,parseFloat(Gt))}),$("#logon input.dgCamUpdates").click(function(){SWAM.doUpdates=!SWAM.doUpdates}))},SWAM.addKilledLine=function(Bt,Gt){if(!0==window.ShowKilled){let Xt=Players.get(Bt),Ht=Players.get(Gt);controlKillStreak(Xt,Ht);if(null!=Xt&&null!=Ht){let Wt="<div class=\"line\"><span class=\"playersel\" data-playerid=\""+Xt.id+"\"><span class=\"flag small flag-"+Xt.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==Xt.team?"#4d7fd5":2==Xt.team?"#dc4f46":"")+";\">"+UI.escapeHTML(Xt.name)+"</span></span><span class=\"text\" style=\"margin-left: 10px; margin-right: 10px; opacity: 0.6;\"> killed </span><span class=\"playersel\" data-playerid=\""+Ht.id+"\"><span class=\"flag small flag-"+Ht.flag+"\"></span><span class=\"nick\" style=\"color:"+(1==Ht.team?"#4d7fd5":2==Ht.team?"#dc4f46":"")+";\">"+UI.escapeHTML(Ht.name)+"</span></span></div>",jt=$(Wt);$("#WhoKilledWho").append(jt);let zt=$("#WhoKilledWho")[0];zt.scrollTop=zt.scrollHeight,setTimeout(function(){jt.remove()},3e4)}}},SWAM.toggleLeaderboard=function(){game.state!==Network.STATE.PLAYING||($("#scoreboard").toggle(400),$("#roomnamecontainer").toggle(400))},SWAM.toggleUI=function(){if(game.state===Network.STATE.PLAYING){let Bt="none"==$("#sidebar").css("display");Bt?($("#scoreboard").show(400),$("#roomnamecontainer").show(400)):($("#scoreboard").hide(400),$("#roomnamecontainer").hide(400)),$("#sidebar").toggle(400),$("#logosmall").toggle(400),$("#menu").toggle(400),$("#gameinfo").toggle(400),$("#scorebig").toggle(400)}},SWAM.showDegubInfo=function(){config.debug.show=!0,window.DEVELOPMENT=!0,Tools.setupDebug()},SWAM.moveMinimap=function(){setTimeout(function(){$("#scorebig").css("right",config.minimapSize+"px"),config.minimapPaddingY=game.screenY-50-config.minimapSize/2,UI.resizeMinimap()},8e3)},SWAM.updateShipNames=function(){let Bt={1:["X-Wing"],2:["B-Wing"],3:["A-Wing"],4:["Y-Wing"],5:["Scout ship"],101:["Speed"],102:["Deflector Shields"],103:["Energy Regen"],104:["Laser Speed"]},Gt={1:["Tie Fighter"],2:["Tie Bomber"],3:["Tie Interceptor"],4:["Tie Advanced"],5:["Tie Phantom"],101:["Speed"],102:["Deflector Shields"],103:["Energy Regen"],104:["Laser Speed"]};for(var Xt in game.tooltipValues)game.tooltipValues[Xt][0]=0==game.myGraphicsSet?Gt[Xt][0]:Bt[Xt][0]},SWAM.CruiseMode={append:function(){let Bt=$("<div id='CruiseControl' state='OFF' style='display: none; background-color: rgba(0,0,0,.3); width: 44px; height: 44px; background-repeat: no-repeat; background-size: 35px 35px; background-position: center; border-radius: 7px;'></div>").css("background-image",cruiseOFFDataURL).show().click(function(){SWAM.CruiseMode.toggle()});$("#sidebar").append(Bt),$("#CruiseControl").mouseenter(function(Gt){let Xt="<div class='header'>Cruise Control</div></div><div class='desc'>Makes the ship advance automatically at full speed.  Can be activated with '5' or 'END' keys.</div>";Xt+="<div class=\"arrow\"></div>",$("#tooltip").html(Xt),UI.show("#tooltip");let Ht=Gt.currentTarget.getBoundingClientRect();$("#tooltip").css({left:Math.round(Ht.left+60)+"px",top:Math.round(Ht.top-10)+"px"})}).mouseleave(function(){UI.hide("#tooltip"),$("#tooltip").html("")})},on:function(){$("#CruiseControl").css({borderColor:"#c9ff00","background-size":"44px 44px",backgroundImage:"url('data:image/svg+xml;base64,"+cruise64green+"')"}).attr("state","ON"),Network.sendKey("UP",!0)},off:function(Bt){"undefined"==typeof Bt&&(Bt=!0),$("#CruiseControl").css({borderColor:"#555555","background-size":"35px 35px",backgroundImage:cruiseOFFDataURL}).attr("state","OFF"),Bt&&Network.sendKey("UP",!1)},toggle:function(){"ON"===$("#CruiseControl").attr("state")?SWAM.CruiseMode.off():SWAM.CruiseMode.on()},isOn:function(){return"ON"===$("#CruiseControl").attr("state")}},SWAM.CruiseMode.append(),SWAM.radio={append:function(){$("body").append("<div id='radioPanel' style='display: none; position: absolute; bottom: 180px; left: 60px; width: 300px; height: auto; max-width: 700px; opacity:0.9; overflow: hidden; padding: 8px; font-size: 12px; color: white; text-shadow: 0 0 3px rgba(0, 0, 0, 0.8); background-color: rgba(0,0,0,0.5); border: 1px solid #555555; border-radius: 3px;' ><div id='radioChannel' style='color: yellow;'>* Radio not available *</div><div id='btnRadioConfig' style='color: #888888; text-decoration: underline; position: absolute; top: 6px; right: 10px; cursor: pointer;'>[Customize Messages]</div><hr/><div id='radioOptions'></div></div>"),this.loadOptions(),$("#btnRadioConfig").click(function(){SWAM.radio.showConfig(SWAM.radio.currentChannel)})},currentChannel:0,channelMethods:[Network.sendChat,Network.sendTeam,Network.sendSay],visible:function(){return"none"!==$("#radioPanel").css("display")},send:function(Bt){this.channelMethods[this.currentChannel](Bt)},sendTo:function(Bt,Gt){this.channelMethods[Bt](Gt)},channelNames:["* Radio to All *","* Radio to TEAM *","* CLOSE RANGE signal *"],channelKeys:["Z","X","C"],options:[[],[],[]],defaultOptions:[["gg","Hi!","Yes","No","Thanks!","You are welcome!","I'll be right back.","Got to go, cya!","Great work, team!","Try the STAR WARS MOD for AirMash! More info in:  reddit.com/r/airmash"],["Affirmative","Negative","** I'VE GOT THE FLAG! COVER ME! **","** THE ENEMY HAS OUR FLAG! **","** All wings, protect our flag carrier! **","Defending the base! Need assistance!","Attacking their base!  Need assistance!","On my way!","Cancel that..","Stick together, team!"],["Hey there!","Stop!","Go Go Go!","Imperial scum!","Rebel scum!","%@*#$!!","YEE-HAW!!!",":lol:",":cry:",":clap:"]],loadOptions:function(){var Bt=localStorage.getItem("radioMessages");if(null!=Bt)try{SWAM.radio.options=JSON.parse(Bt)}catch(Gt){var Bt=null;localStorage.removeItem("radioMessages")}if(null==Bt){var Bt=jQuery.extend(!0,{},SWAM.radio.defaultOptions);SWAM.radio.options=Bt}},showConfig:function(Bt){this.hide();var Gt="<div id='radioCustomization' tabindex='1' style='position: fixed; top: 0px; left: 0px; width: 100%; height: 100%; background-color: rgba(0,0,0,.5)'><div style='position: absolute; width: 550px; height: 450px; left: calc(50% - 275px); top: calc(50% - 225px);background-color: rgba(0,0,0,0.75); box-shadow: 0 10px 59px -9px rgba(0,0,0,0.7); border-radius: 9px; border-bottom: 2px solid rgba(0,0,0,0.3); border-top: 2px solid rgba(255,255,255,0.08); box-sizing: border-box; padding: 18px 18px 0 18px; cursor: default; font-family: verdana,arial,helvetica,sans-serif'><div style='font-size: 20px; color: white; margin-bottom: 10px;'>Customize messages for: <span style='color: yellow'>$channel</span></div><div style='color: #AAAAAA'>Enter the messages below. Use '|' character to separate multiple lines in the same meesage.</div><div class='optionList'></div><div style='color: #888888; text-decoration: underline; cursor: pointer; margin: 10px;'><hr/><span id='radioRestoreThis'>[Restore THIS panel to default]</span><span id='radioRestoreAll' style='margin-left: 30px;'>[Restore ALL messages to default]</span></div><div style='width: 200px; position: absolute; left: calc(50% - 100px); margin-top: 20px;'><input id='radioCustomizeSave' type='button' value='Save' style='width: 80px; height: 25px; background-color: #228a12; color: white; border-radius: 4px; font-size=16px; text-shadow: 0 -1px 0 rgba(0,0,0,0.6); border: 2px solid rgba(0,0,0,.2)'><span style='margin-left: 40px'></span><input id='radioCustomizeCancel' type='button' value='Cancel' style='width: 80px; height: 25px; background-color: #555555; color: white; border-radius: 4px; font-size=16px; text-shadow: 0 -1px 0 rgba(0,0,0,0.6); border: 2px solid rgba(0,0,0,.2)'></div></div></div>";Gt=Gt.replace(/\$channel/g,SWAM.radio.channelNames[Bt]);for(var Xt=$(Gt),Yt=0;10>Yt;Yt++){Gt="<div style='margin: 5px;'><span style='margin-right: 10px; color:white;'>$index</span><input type='text' maxlength: '150' style='font-size: 13px; font-family: MontserratWeb,Helvetica,sans-serif;width: 450px;background-color: rgba(0,0,0,0.5); color: #dcdcdc; text-shadow: 0 0 3px rgba(0,0,0,0.8);border: 1px solid #555555; border-radius: 3px;padding-left: 12px;' value = ''></div>".replace(/\$index/g,9>Yt?Yt+1:"0");var Wt=$(Gt);$("input",Wt).val(SWAM.radio.options[Bt][Yt]),$(".optionList",Xt).append(Wt)}$("body").append(Xt),Xt.focus(),$("#radioCustomizeSave",Xt).click(function(){for(var jt=$("input",Xt),zt=0;zt<jt.length;zt++)SWAM.radio.options[Bt][zt]=jt[zt].value;localStorage.setItem("radioMessages",JSON.stringify(SWAM.radio.options)),Xt.remove()}),$("#radioCustomizeCancel",Xt).click(function(){Xt.remove()}),$("#radioRestoreThis",Xt).click(function(){confirmDialog({title:"Are you sure? This will delete all customized messages for this panel and restore them to default.",message:SWAM.radio.channelNames[Bt]+"   -  Confirmation needed",yes:function(){var jt=jQuery.extend(!0,[],SWAM.radio.defaultOptions[Bt]);SWAM.radio.options[Bt]=jt,localStorage.setItem("radioMessages",JSON.stringify(SWAM.radio.options)),SWAM.radio.loadOptions(),Xt.remove()}})}),$("#radioRestoreAll",Xt).click(function(){confirmDialog({title:"Are you sure? This will delete all customized messages and restore them to default.",message:"Confirmation needed",yes:function(){localStorage.removeItem("radioMessages"),SWAM.radio.loadOptions(),Xt.remove()}})}),$(Xt).keydown(function(jt){jt.stopImmediatePropagation()}).keyup(function(jt){jt.stopImmediatePropagation()})},show:function(Bt){SWAM.radio.currentChannel=Bt;for(var Gt=SWAM.radio.options,Xt="Close Menu - Press "+SWAM.radio.channelKeys[Bt]+"<div>-----</div>",Ht=0;Ht<Gt[Bt].length;Ht++)Xt+="<div><span style='margin-right: 15px;'>"+(Ht+1)%10+".</span>"+Gt[Bt][Ht]+"</div>";$("#radioChannel").html(SWAM.radio.channelNames[Bt]),$("#radioOptions").html(Xt),$("#radioPanel").show()},hide:function(){$("#radioPanel").hide()}},SWAM.radio.append(),SWAM.chatinputVisible=function(){return"none"!==$("#chatinput").css("display")},SWAM.keydown_handler=function(Bt){if(!(game.state!==Network.STATE.PLAYING||SWAM.chatinputVisible())){var Gt=$.inArray(Bt.which,[65,68,87,83,37,38,39,40]);-1<Gt&&AutoPilot&&0<AutoPilot.currentNode&&AutoPilot.cancel(),Gt=$.inArray(Bt.which,[87,83,38,40,53,35]),-1<Gt&&(SWAM.CruiseMode.isOn()?SWAM.CruiseMode.off(0!=Gt&&2!=Gt):(53==Bt.keyCode||35==Bt.keyCode)&&SWAM.CruiseMode.on()),89==Bt.keyCode&&(Network.sendCommand("drop",""),Bt.stopImmediatePropagation(),Bt.preventDefault())}},SWAM.keyup_handler=function(Bt){if(!(game.state!==Network.STATE.PLAYING||SWAM.chatinputVisible())){var Gt=$.inArray(Bt.which,[90,88,67]);if(-1<Gt&&(SWAM.radio.visible()&&Gt==SWAM.radio.currentChannel?SWAM.radio.hide():SWAM.radio.show(Gt)),48<=Bt.which&&57>=Bt.which&&SWAM.radio.visible()){SWAM.radio.hide();var Xt="";Gt=Bt.which-49,-1==Gt&&(Gt=9);var Ht=SWAM.radio.options,Yt=SWAM.radio.currentChannel;if(0<=Gt&&Gt<Ht[Yt].length){Xt=Ht[Yt][Gt];var Wt=Xt.split(/\s*\|\s*/);Gt=0;var jt=function(){SWAM.radio.sendTo(Yt,Wt[Gt++]),Gt<Wt.length&&setTimeout(jt,1500)};jt()}else SWAM.radio.hide();Bt.stopImmediatePropagation(),Bt.stopPropagation(),Bt.preventDefault()}114==Bt.which&&SWAM.toggleLeaderboard(),115==Bt.which&&SWAM.toggleUI()}},SWAM.canvas_click_handler=function(Bt){if(1==Bt.which&&Bt.altKey){var Gt=game.screenX-config.minimapPaddingX-config.minimapSize,Xt=game.screenX-config.minimapPaddingX,Ht=game.screenY-config.minimapPaddingY-config.minimapSize/2,Yt=game.screenY-config.minimapPaddingY;if(Bt.pageX>Gt&&Bt.pageX<Xt&&Bt.pageY>Ht&&Bt.pageY<Yt){var Wt=-1*(32768*((game.screenX-config.minimapPaddingX-Bt.pageX)/config.minimapSize)-16384),jt=-1*(16384*(2*((game.screenY-config.minimapPaddingY-Bt.pageY)/config.minimapSize))-8192);AutoPilot.log(Wt,jt),AutoPilot.NavigateTo(Wt,jt)}}},SWAM.listLayers=function(Bt){for(var Gt=0;Gt<Bt.children.length;Gt++)console.log(Bt.children[Gt].layerName)},SWAM.debug){let Bt=new Textures.sprite("ui_minimap_target");Bt.position.set(0,0),Bt.anchor.set(.5,.5),game.graphics.layers.doodads.addChild(Bt);let Gt=Graphics.setCamera;Graphics.setCamera=function(Yt,Wt){Gt(Yt,Wt),null!=Bt&&Bt.position.set(Yt,Wt)},SWAM.addDebugElements();let Xt=$("#logon")[0];$(window).keydown(function(Yt){if(game.state!==Network.STATE.PLAYING&&"none"!=Xt.style.display){var Wt=$.inArray(Yt.which,[37,38,39,40]);if(-1<Wt){let jt=Graphics.getCamera();switch(Yt.which){case 37:Graphics.setCamera(jt.x-200,jt.y);break;case 38:Graphics.setCamera(jt.x,jt.y-200);break;case 39:Graphics.setCamera(jt.x+200,jt.y);break;case 40:Graphics.setCamera(jt.x,jt.y+200);}}}})}AutoPilot.Load()}window.AutoPilot={Matrix:[[]],WALKABLE:0,BLOCKED:1,Load:function(){$.getScript(getFilePath("pathfinding-browser.min.js"),function(){for(var Yt=window.config.walls,zt=Array(164),Vt=0;164>Vt;Vt++){zt[Vt]=Array(328);for(var qt=0;328>qt;qt++)zt[Vt][qt]=AutoPilot.WALKABLE}for(var Kt of Yt)for(var Qt=AutoPilot.getGraphBoundingBox(Kt[0],Kt[1],Kt[2]),Vt=Qt.p1.y;Vt<=Qt.p2.y;Vt++)for(var qt=Qt.p1.x;qt<=Qt.p2.x;qt++)try{zt[Vt][qt]=AutoPilot.BLOCKED}catch(Zt){}AutoPilot.Matrix=zt})},angleTo:function(Bt,Gt){var Xt=Math.atan2(-Bt.x+Gt.x,Bt.y-Gt.y);return 0>Xt&&(Xt+=2*Math.PI),Xt},angleToNeg:function(Bt,Gt){return Math.atan2(-Bt.x+Gt.x,Bt.y-Gt.y)},mapCoordX:function(Bt,Gt){return Gt|=0,Math.floor((Bt+16384+Gt)/100)},mapCoordY:function(Bt,Gt){return Gt|=0,Math.floor((Bt+8192+Gt)/100)},getGraphBoundingBox:function(Bt,Gt,Xt){return{p1:{x:this.mapCoordX(Bt,-Xt),y:this.mapCoordY(Gt,-Xt)},p2:{x:this.mapCoordX(Bt,Xt),y:this.mapCoordY(Gt,Xt)}}},log:function(Bt){AutoPilot.logMoves&&console.log(Bt)},right:function(){!0==this.keystate.RIGHT||(this.log("right"),Network.sendKey("RIGHT",!0),this.keystate.RIGHT=!0)},left:function(){!0==this.keystate.LEFT||(this.log("left"),Network.sendKey("LEFT",!0),this.keystate.LEFT=!0)},noSteer:function(){!1==this.keystate.RIGHT&&!1==this.keystate.LEFT||(this.log("nosteer"),this.keystate.RIGHT&&(Network.sendKey("RIGHT",!1),this.keystate.RIGHT=!1),this.keystate.LEFT&&(Network.sendKey("LEFT",!1),this.keystate.LEFT=!1))},forward:function(){!0==this.keystate.UP||(this.log("up"),Network.sendKey("UP",!0),this.keystate.UP=!0)},backwards:function(){!0==this.keystate.DOWN||(this.log("down"),Network.sendKey("DOWN",!0),this.keystate.DOWN=!0)},stop:function(){!1==this.keystate.UP&&!1==this.keystate.DOWN||(this.log("stop"),this.keystate.DOWN&&(Network.sendKey("DOWN",!1),this.keystate.DOWN=!1),this.keystate.UP&&(Network.sendKey("UP",!1),this.keystate.UP=!1))},fullStop:function(){this.log("fullstop"),this.noSteer(),this.stop()},keystate:{UP:!1,DOWN:!1,LEFT:!1,RIGHT:!1},cero:{x:0,y:0},topLeft:{x:-16352,y:-8160},greenland:{x:-5284,y:-7092},tg:function(){this.moveTo(this.greenland.x,this.greenland.y)},tgs:function(){this.NavigateTo(this.greenland.x,this.greenland.y)},NavigateTo:function(Bt,Gt){var Xt=Players.getMe(),Ht=this.mapCoordX(Xt.pos.x),Yt=this.mapCoordY(Xt.pos.y),Wt=this.mapCoordX(Bt),jt=this.mapCoordY(Gt);AutoPilot.path=this.SearchPath(Ht,Yt,Wt,jt),AutoPilot.debug&&(AutoPilot.erasePath(),AutoPilot.drawPath()),AutoPilot.exit=!1,this.currentNode=0,$("#AutoPilotAlert").show(),this.moveNext()},erasePath:function(){game.graphics.layers.objects.removeChild(this.drawnPath)},drawnPath:null,drawPath:function(){for(var Bt=AutoPilot.path,Gt=new PIXI.Graphics,Xt=0;Xt<Bt.length;Xt++){var Ht=Bt[Xt][0],Yt=Bt[Xt][1];Gt.beginFill(65280,.2),Gt.drawRect(100*Ht-16384,100*Yt-8192,100,100),Gt.endFill()}this.drawnPath=Gt,game.graphics.layers.objects.addChild(Gt)},Test:function(){if(window.res=this.SearchPath(111,11,161,46),!0===AutoPilot.debug){for(var Yt=Array(100),Wt=0;100>Wt;Wt++){Yt[Wt]=Array(100);for(var jt=0;100>jt;jt++)Yt[Wt][jt]=apMatrix[Wt][jt+100]}window.matrixSample=Yt}},cancel:function(){AutoPilot.exit=!0,AutoPilot.fullStop(),$("#AutoPilotAlert").hide()},currentNode:0,moveNext1:function(){var Bt=AutoPilot.path[this.currentNode].y,Gt=AutoPilot.path[this.currentNode].x;this.moveTo(100*Bt-16384+50,100*Gt-8192+50,!0)},moveNext:function(){var Bt=AutoPilot.path[this.currentNode][0],Gt=AutoPilot.path[this.currentNode][1];this.moveTo(100*Bt-16384+50,100*Gt-8192+50,!0)},prevX:0,prevY:0,moveTo:function(Bt,Gt,Xt){function Ht(jt){var zt=jt-Wt.rot;zt>Math.PI&&(zt-=2*Math.PI),zt<-Math.PI&&(zt+=2*Math.PI);let Vt=Math.round(1e3*(Math.abs(zt)/(60*config.ships[Wt.type].turnFactor))),qt=0<zt?AutoPilot.right:AutoPilot.left,Kt=0>=zt?AutoPilot.right:AutoPilot.left;qt.call(AutoPilot),setTimeout(function(){AutoPilot.noSteer()},Vt)}function Yt(){if(!AutoPilot.exit){if(Wt=Players.getMe(),300<Math.abs(AutoPilot.prevX-Wt.pos.x)||300<Math.abs(AutoPilot.prevY-Wt.pos.y))return void AutoPilot.cancel();if(AutoPilot.prevX=Wt.pos.x,AutoPilot.prevY=Wt.pos.y,0==Wt.pos.x||0==Wt.pos.y)return void AutoPilot.cancel();var jt=AutoPilot.angleTo(Wt.pos,{x:Bt,y:Gt}),zt=!0,Vt=jt-Wt.rot;if(0.3<Math.abs(Vt))AutoPilot.fullStop(),Ht(jt);else{if(AutoPilot.noSteer(),AutoPilot.forward(),zt=!0,AutoPilot.currentNode<AutoPilot.path.length-1){var qt=100*AutoPilot.path[AutoPilot.currentNode+1].y-16384+50,Kt=100*AutoPilot.path[AutoPilot.currentNode+1].x-8192+50;jt=AutoPilot.angleTo(Wt.pos,{x:Bt,y:Gt});var Qt=AutoPilot.angleTo({x:Bt,y:Gt},{x:qt,y:Kt});zt=0.3<=Math.abs(Qt-jt)}zt&&setTimeout(function(){AutoPilot.stop()},50)}!AutoPilot.exit&&100<Tools.distance(Wt.pos.x,Wt.pos.y,Bt,Gt)?setTimeout(Yt,100):!AutoPilot.exit&&Xt&&AutoPilot.currentNode<AutoPilot.path.length-1?(AutoPilot.currentNode++,AutoPilot.moveNext()):AutoPilot.fullStop()}}AutoPilot.debug&&console.log(this.currentNode),Xt|=!1,AutoPilot.exit=!1;var Wt=Players.getMe();this.prevX=Wt.pos.x,this.prevY=Wt.pos.y,Yt()},SearchPath:function(Bt,Gt,Xt,Ht){let Yt=new PF.Grid(AutoPilot.Matrix),Wt=new PF.AStarFinder({allowDiagonal:!0,dontCrossCorners:!0});var jt=Wt.findPath(Bt,Gt,Xt,Ht,Yt);return PF.Util.smoothenPath(Yt,jt)},debug:!1,logMoves:!1},window.HyperSpace=function(){this.sprite=null;let Bt=PIXI.Texture.fromImage("hyperspace");this.sprite=new PIXI.Sprite(Bt)},window.HyperSpace.prototype={sprite:null,initialize:function(){let Bt=PIXI.Texture.fromImage("hyperspace");this.sprite=new PIXI.Sprite(Bt)},show:function(){function Gt(){for(name in Ht)"game"!=name&&(Ht[name].visible=Ht[name].prevVisible,delete Ht[name].prevVisible);game.graphics.layers.game.removeChild(Xt.sprite),Xt.sprite.filters=null;let zt=config.overdrawOptimize;config.overdrawOptimize=!1,setTimeout(function(){config.overdrawOptimize=zt},100)}let Xt=this,Ht=game.graphics.layers;(function(){for(name in Ht)"game"!=name&&(Ht[name].prevVisible=Ht[name].visible,Ht[name].visible=!1);Xt.sprite.width=game.screenX,Xt.sprite.height=game.screenY,game.graphics.layers.game.addChild(Xt.sprite)})();let Yt=new PIXI.filters.ZoomBlurFilter(2,{x:game.halfScreenX,y:game.halfScreenY},0),Wt=new PIXI.filters.AdjustmentFilter({gamma:2,brightness:2,alpha:1}),jt=function(){Yt.strength-=0.03,1<Wt.gamma&&(Wt.gamma-=0.02,Wt.brightness-=0.02),0<Yt.strength?setTimeout(function(){jt()},10):(Yt.strength=0,Gt())};this.sprite.filters=[Yt,Wt],jt()}},SWAM.Audio={Flag:{EnemyTaken:0,OursTaken:1,EnemyCaptured:2,OursCaptured:3,EnemyRecovered:4,OursRecovered:5},initialize:function(){var Bt=new Howl({src:[getFilePath("flag_phrases_1.mp3")],volume:0.6,sprite:{EnemyTaken_1:[0,1450],OursTaken_1:[1500,1800],EnemyCaptured_1:[3300,1800],OursCaptured_1:[5200,1900],EnemyRecovered_1:[7300,1600],OursRecovered_1:[9000,1800],EnemyTaken_2:[11000,1500],OursTaken_2:[12600,1800],EnemyCaptured_2:[14600,1600],OursCaptured_2:[16400,1800],EnemyRecovered_2:[18400,1600],OursRecovered_2:[20200,1800]}});SWAM.Audio.playFlagEvent=function(Gt,Xt){if(config.settings.sound){var Ht=null;for(let Yt in 1!=Xt&&2!=Xt&&(Xt=1),SWAM.Audio.Flag)if(SWAM.Audio.Flag[Yt]==Gt){Ht=Yt+"_"+Xt;break}null!=Ht&&SWAM.Audio.play(Ht)}},SWAM.Audio.play=function(Gt){if(config.settings.sound){let Xt=Bt.play(Gt);setTimeout(function(){Bt.stop(Xt)},Bt._sprite[Gt][1])}}}},SWAM.Audio.initialize();function getFilePath(Bt){return"https://molesmalo.github.io/StarWarsMod4AirMash/assets/"+Bt}function getURLRegEx(Bt){return Bt="undefined"==typeof Bt||Bt,Bt?/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/g:/((([A-Za-z]{3,9}:(?:\/\/)?)(?:[\-;:&=\+\$,\w]+@)?[A-Za-z0-9\.\-]+|(?:www\.|[\-;:&=\+\$,\w]+@)[A-Za-z0-9\.\-]+)((?:\/[\+~%\/\.\w\-_]*)?\??(?:[\-\+=&;%@\.\w_]*)#?(?:[\.\!\/\\\w]*))?)/}$(function(){SWAM()});